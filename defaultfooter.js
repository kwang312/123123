(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2077],{47956:(Y,T,e)=>{"use strict";e.d(T,{n:()=>c});var t=e(66111),n=e(32976);function c(s){const{children:i,instanceSettings:f}=s,u=(0,t.useMemo)(()=>({instanceSettings:f,meta:f.meta}),[f]);return t.createElement(n._.Provider,{value:u},i)}},32976:(Y,T,e)=>{"use strict";e.d(T,{_:()=>n});var t=e(66111);const n=(0,t.createContext)(void 0)},75363:(Y,T,e)=>{"use strict";e.d(T,{b:()=>c});var t=e(66111),n=e(32976);function c(s){const{children:i,...f}=s;return t.createElement(n._.Provider,{value:f},i)}},58556:(Y,T,e)=>{"use strict";e.d(T,{v:()=>t});function t(n){return"instanceSettings"in n&&"meta"in n}},81129:(Y,T,e)=>{"use strict";e.d(T,{g:()=>c});var t=e(66111),n=e(32976);function c(){const s=(0,t.useContext)(n._);if(!s)throw new Error("usePluginContext must be used within a PluginContextProvider");return s}},86029:(Y,T,e)=>{"use strict";e.d(T,{P:()=>s,i:()=>c});var t=e(99098),n=e(83881);class c{constructor(u,r){return this.fields=[],this.length=0,s(u,r)}}function s(f,u){const r={fields:[],length:f.length};if(!f?.length)return r;if(u){for(const o of u)r.fields.push(i(o,f.map(m=>m[o])));return r}const d=f.find(o=>o!=null);return d!=null&&(typeof d=="object"?r.fields=Object.keys(d).map(o=>i(o,f.map(m=>m[o]))):r.fields.push(i(t.M5,f))),r}function i(f,u){const r={name:f,config:{},values:u,type:t.fS.other};return r.type=(0,n.fu)(r)??t.fS.other,r}},18298:(Y,T,e)=>{"use strict";e.d(T,{a:()=>c});var t=e(74911),n=e(53678);class c extends n.v{constructor(i){super(void 0,f=>new t.d({...i,buffer:f}))}}},59957:(Y,T,e)=>{"use strict";e.d(T,{Ib:()=>i,Jy:()=>s,Y:()=>r,vP:()=>u});var t=e(99098),n=e(83881);const c={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function s(d,o){for(const m in d){const l=c[m];for(const p of d[m])p<o.length&&(o[p]=l)}}function i(d,o){for(let m=0;m<o.length;m++)o[m]=d[o[m]]}function f(d,o){for(const m of o)if(m!=null)return(0,n._m)(d,m);return t.fS.other}function u(d){const{schema:o,data:m}=d;if(!o||!o.fields)throw new Error("JSON needs a fields definition");const l=m?m.values.reduce((g,y)=>Math.max(g,y.length),0):0,p=o.fields.map((g,y)=>{let v=m?m.values[y]:[],E=v.length,h=g.type;E!==l&&(v.length=l,v.fill(void 0,E));let C=m?.entities?.[y];C&&s(C,v);let a=m?.enums?.[y];a&&(i(a,v),h=t.fS.string);const P=m?.nanos?.[y],D={...g,type:h??f(g.name,v),config:g.config??{},values:v,entities:C??{}};return P!=null&&(D.nanos=P),D});return{...o,fields:p,length:l}}function r(d){const o={values:[]},m=[];let l=!1;const p={refId:d.refId,meta:d.meta,name:d.name,fields:d.fields.map(g=>{const{values:y,nanos:v,state:E,display:h,...C}=g;return delete C.entities,o.values.push(y),v!=null?(m.push(v),l=!0):m.push(null),C})};return l&&(o.nanos=m),{schema:p,data:o}}},12115:(Y,T,e)=>{"use strict";e.d(T,{U:()=>n});var t=e(21570);class n extends t.G{constructor(s){super(),this.data=s,this.index=0;const i={},f={};for(let u=0;u<s.fields.length;u++){const r=s.fields[u];if(!r.name)continue;f[r.name]=r;const d=()=>r.values.get(this.index);i.hasOwnProperty(r.name)||Object.defineProperty(i,r.name,{enumerable:!0,get:d}),i.hasOwnProperty(u.toString())||Object.defineProperty(i,u,{enumerable:!1,get:d})}this.obj=i,this.fields=f}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(s){if(!this.dataFrame||!this.dataFrame.fields)return;const i=this.dataFrame.fields[s];if(!(!i||!i.display))return i.display}get(s){return this.index=s,this.obj}toArray(){return new Array(this.data.length).fill(0).map((s,i)=>({...this.get(i)}))}}},5109:(Y,T,e)=>{"use strict";e.d(T,{N:()=>c});var t=e(99098),n=e(83881);class c{constructor(i){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=i.fields.map((f,u)=>({...f,index:u}));for(let f=0;f<i.fields.length;f++){const u=i.fields[f];if(u.type===t.fS.other){const r=(0,n.fu)(u);r&&(u.type=r)}this.fieldByType[u.type]||(this.fieldByType[u.type]=[]),this.fieldByType[u.type].push({...u,index:f}),this.fieldByName[u.name]?console.warn("Duplicate field names in DataFrame: ",u.name):this.fieldByName[u.name]={...u,index:f}}}getFields(i){if(!i)return[...this.fields];const f=this.fieldByType[i];return f?[...f]:[]}hasFieldOfType(i){const f=this.fieldByType[i];return f&&f.length>0}getFirstFieldOfType(i,f=!1){return this.fieldByType[i].find(d=>f||!d.config.custom?.hidden)}hasFieldNamed(i){return!!this.fieldByName[i]}hasFieldWithNameAndType(i,f){return!!this.fieldByName[i]&&this.fieldByType[f].filter(u=>u.name===i).length>0}getFieldByName(i){return this.fieldByName[i]}getFieldsByLabel(i,f){return Object.values(this.fieldByName).filter(u=>u.labels&&u.labels[i]===f)}}},53678:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>f,v:()=>u});var t=e(82897),n=e(99098),c=e(83881);function s(r,d){return d.type||(d.name==="time"||d.name==="Time"?d.type=n.fS.time:d.type=(0,c.LI)(r)),d.type===n.fS.number?o=>parseFloat(o):d.type===n.fS.boolean?o=>!(o[0]==="F"||o[0]==="f"||o[0]==="0"):o=>o}var i=e(21570);const f=void 0;class u extends i.G{constructor(d,o){if(super(),this.fields=[],this.first=[],this.parsers=void 0,this.creator=o||(m=>m??[]),d){const{name:m,refId:l,meta:p,fields:g}=d;if(m&&(this.name=m),l&&(this.refId=l),p&&(this.meta=p),g)for(const y of g)this.addField(y)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(d,o){return this.addField({name:o||"",type:(0,c.LI)(d)})}addField(d,o){let m;d.values&&(m=d.values);let l=d.type;!l&&(d.name==="time"||d.name==="Time")?l=n.fS.time:(!l&&m&&m.length&&(l=(0,c.LI)(m[0])),l||(l=n.fS.other));let p=d.name;p||(p=`Field ${this.fields.length+1}`);const g={...d,name:p,type:l,config:d.config||{},values:this.creator(m)};if(l===n.fS.other&&(l=(0,c.fu)(g),l&&(g.type=l)),this.fields.push(g),this.first=this.fields[0].values,o)for(;g.values.length<o;)g.values.push(f);else this.validate();return g}validate(){const d=this.fields.reduce((o,m)=>Math.max(o,m.values.length),0);for(const o of this.fields)for(;o.values.length!==d;)o.values.push(f)}setParser(d,o){return this.parsers||(this.parsers=new Map),this.parsers.set(d,o),o}parseValue(d,o){let m=this.parsers?.get(d);return m||(m=this.setParser(d,s(o,d))),m(o)}appendRow(d){for(let o=this.fields.length;o<d.length;o++)this.addField({name:`Field ${o+1}`,type:(0,c.LI)(d[o])});if(this.length<1)for(let o=0;o<this.fields.length;o++){const m=this.fields[o];(!m.type||m.type===n.fS.other)&&(m.type=(0,c.LI)(d[o]))}for(let o=0;o<this.fields.length;o++){const m=this.fields[o];let l=d[o];m.type!==n.fS.string&&(0,t.isString)(l)&&(l=this.parseValue(m,l)),m.values.push(l)}}push(...d){for(const o of d)this.add(o);return this.length}reverse(){for(const d of this.fields)d.values.reverse();return this}add(d){const o=d;for(const m of this.fields){let l=o[m.name];m.type!==n.fS.string&&(0,t.isString)(l)&&(l=this.parseValue(m,l)),l===void 0&&(l=f),m.values.push(l)}}set(d,o){if(d>this.length)throw new Error("Unable to set value beyond current length");const m=o||{};for(const l of this.fields)l.values[d]=m[l.name]}get(d){const o={};for(const m of this.fields)o[m.name]=m.values[d];return o}toJSON(){return(0,c.og)(this)}}},61113:(Y,T,e)=>{"use strict";e.d(T,{$q:()=>c,GV:()=>n,YP:()=>f,jC:()=>s,q2:()=>t,r7:()=>i});const t=(u,r)=>({name:u,columns:r}),n=u=>u.columns,c=(u,r)=>u.columns[r],s=(u,r,d)=>u.columns[r].values[d],i=(u,r,d)=>u.columns.map(o=>o.values[d]),f=(u,r)=>u[r]},96905:(Y,T,e)=>{"use strict";e.d(T,{Ch:()=>c,Vv:()=>f,nl:()=>s});var t=e(82897),n=e.n(t);function c(u,r,d){if(u===r)return!0;if(u?.fields?.length!==r?.fields?.length||u.name!==r.name)return!1;for(let o=0;o<u.fields.length;o++){const m=u.fields[o],l=r.fields[o];if(m.type!==l.type||m.name!==l.name)return!1;if(d)continue;if(m.labels&&l.labels&&!f(m.labels,l.labels))return!1;const p=m.config,g=l.config;let y=Object.keys(p),v=Object.keys(g);if(y.length!==v.length)return!1;for(const E of y){if(!(E in g))return!1;if(E!=="interval"&&!(0,t.isEqual)(p[E],g[E]))return!1}}return!0}function s(u,r,d){if(u===r)return!0;if(u?.length!==r?.length)return!1;for(let o=0;o<u.length;o++)if(!d(u[o],r[o]))return!1;return!0}const i=(u,r)=>u===r;function f(u,r,d=i){if(u===r)return!0;const o=Object.keys(u),m=Object.keys(r);if(o.length!==m.length)return!1;for(let l of o)if(!d(u[l],r[l]))return!1;return!0}},2033:(Y,T,e)=>{"use strict";e.d(T,{$q:()=>f.$q,Aw:()=>i.Aw,Ch:()=>d.Ch,DP:()=>i.DP,F9:()=>i.F9,GV:()=>f.GV,Ib:()=>r.Ib,Ji:()=>i.Ji,Jy:()=>r.Jy,LI:()=>i.LI,N:()=>n.N,Pc:()=>u.P,SX:()=>i.SX,US:()=>t.U,Vv:()=>d.Vv,Y:()=>r.Y,Y6:()=>i.Y6,YP:()=>f.YP,Yi:()=>s.Y,Zr:()=>i.Zr,_m:()=>i._m,a2:()=>c.a,aK:()=>i.aK,aY:()=>i.aY,fh:()=>i.fh,fu:()=>i.fu,g0:()=>i.g0,iB:()=>u.i,jC:()=>f.jC,m$:()=>o.m$,nl:()=>d.nl,og:()=>i.og,pP:()=>o.pP,q2:()=>f.q2,r7:()=>f.r7,sV:()=>i.sV,vA:()=>s.v,vP:()=>r.vP,xI:()=>o.xI,zR:()=>i.zR});var t=e(12115),n=e(5109),c=e(18298),s=e(53678),i=e(83881),f=e(61113),u=e(86029),r=e(59957),d=e(96905),o=e(19447)},83881:(Y,T,e)=>{"use strict";e.d(T,{Aw:()=>U,DP:()=>E,F9:()=>w,Ji:()=>P,LI:()=>h,SX:()=>a,Y6:()=>R,Zr:()=>M,_m:()=>v,aK:()=>b,aY:()=>D,fh:()=>S,fu:()=>C,g0:()=>x,og:()=>O,sV:()=>I,zR:()=>K});var t=e(82897),n=e.n(t),c=e(67483),s=e(76152),i=e(30471),f=e(99098),u=e(52666),r=e(86029),d=e(59957),o=e(53678);function m(L){const V=L.columns.map(H=>{const{text:j,type:A,..._}=H;return{name:j?.length?j:H,config:_||{},values:[],type:A&&Object.values(f.fS).includes(A)?A:f.fS.other}});if(!(0,t.isArray)(L.rows))throw new Error(`Expected table rows to be array, got ${typeof L.rows}.`);for(const H of L.rows)for(let j=0;j<V.length;j++)V[j].values.push(H[j]);for(const H of V)if(H.type===f.fS.other){const j=C(H);j&&(H.type=j)}return{fields:V,refId:L.refId,meta:L.meta,name:L.name,length:L.rows.length}}function l(L){const V=[],H=[],j=L.datapoints||L.points;for(const _ of j)H.push(_[0]),V.push(_[1]);const A=[{name:f.Ls,type:f.fS.time,config:{},values:V},{name:f.M5,type:f.fS.number,config:{unit:L.unit},values:H,labels:L.tags}];return L.title&&(A[1].config.displayNameFromDS=L.title),{name:L.target||L.name,refId:L.refId,meta:L.meta,fields:A,length:H.length}}function p(L){const V=[],H=[];for(let j=0;j<L.data.length;j++){const A=L.data[j];V.push(A[1]),H.push(A[0])}return{name:L.label,fields:[{name:L.label||f.M5,type:f.fS.number,config:{},values:V},{name:f.Ls,type:f.fS.time,config:{unit:"dateTimeAsIso"},values:H}],length:V.length}}function g(L){const V=[{name:L.target,type:f.fS.other,labels:L.tags,config:{unit:L.unit,filterable:L.filterable},values:[]}];for(const H of L.datapoints)V[0].values.push(H);return{name:L.target,refId:L.target,meta:{json:!0},fields:V,length:L.datapoints.length}}const y=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function v(L,V){return L&&(L=L.toLowerCase(),L==="date"||L==="time")?f.fS.time:h(V)}function E(L){return L instanceof Date||(0,c.v9)(L)?f.fS.time:(0,t.isNumber)(L)?f.fS.number:(0,t.isString)(L)?f.fS.string:(0,t.isBoolean)(L)?f.fS.boolean:f.fS.other}function h(L){return L instanceof Date||(0,c.v9)(L)?f.fS.time:(0,t.isNumber)(L)?f.fS.number:(0,t.isString)(L)?y.test(L)?f.fS.number:L==="true"||L==="TRUE"||L==="True"||L==="false"||L==="FALSE"||L==="False"?f.fS.boolean:f.fS.string:(0,t.isBoolean)(L)?f.fS.boolean:f.fS.other}function C(L){if(L.name){const V=L.name.toLowerCase();if(V==="date"||V==="time")return f.fS.time}for(let V=0;V<L.values.length;V++){const H=L.values[V];if(H!=null)return h(H)}}const a=(L,V=!1)=>{for(const H of L.fields)if(!H.type||H.type===f.fS.other||V)return{...L,fields:L.fields.map(j=>j.type&&j.type!==f.fS.other&&!V?j:{...j,type:C(j)||f.fS.other})};return L},P=L=>Boolean(L&&L.hasOwnProperty("columns")),D=L=>Boolean(L&&L.hasOwnProperty("fields"));function x(L){if("fields"in L)return"length"in L&&L.fields[0]?.values?.get?L:new o.v(L);if(L.hasOwnProperty("type")&&L.type==="docs")return g(L);if(L.hasOwnProperty("datapoints")||L.hasOwnProperty("points"))return l(L);if(L.hasOwnProperty("data"))return L.hasOwnProperty("schema")?(0,d.vP)(L):p(L);if(L.hasOwnProperty("columns"))return m(L);if(Array.isArray(L))return(0,r.P)(L);throw console.warn("Can not convert",L),new Error("Unsupported data format")}const M=L=>{const{fields:V}=L,H=L.length,j=[];if(V.length===2){const{timeField:A,timeIndex:_}=I(L);if(A){const Q=V[_===0?1:0],re=V[_];for(let Z=0;Z<H;Z++)j.push([Q.values[Z],re.values[Z]]);return{alias:L.name,target:(0,i.CZ)(Q,L),datapoints:j,unit:V[0].config?V[0].config.unit:void 0,refId:L.refId,meta:L.meta}}}for(let A=0;A<H;A++){const _=[];for(let k=0;k<V.length;k++)_.push(V[k].values[A]);j.push(_)}return L.meta&&L.meta.json?{alias:V[0].name||L.name,target:V[0].name||L.name,datapoints:V[0].values,filterable:V[0].config?V[0].config.filterable:void 0,type:"docs"}:{columns:V.map(A=>{const{name:_,config:k}=A;if(k){const{...Q}=k;return Q.text=_,Q}return{text:_}}),type:"table",refId:L.refId,meta:L.meta,rows:j}};function b(L,V,H=!1){const j=L.fields[V];if(!j)return L;const A=[];for(let k=0;k<L.length;k++)A.push(k);const _=(0,s.Mo)(j,H);return A.sort(_),{...L,fields:L.fields.map(k=>({...k,values:k.values.map((Q,re)=>k.values[A[re]])}))}}function R(L){return{...L,fields:L.fields.map(V=>{const H=[...V.values];return H.reverse(),{...V,values:H}})}}function S(L,V){const H=[];for(const j of L.fields)H.push(j.values[V]);return H}function O(L){return U(L)}function U(L,V){return{fields:(V?L.fields.filter(V):L.fields).map(A=>{let _=A.values;return{name:A.name,type:A.type,config:A.config,values:_,labels:A.labels}}),refId:L.refId,meta:L.meta,name:L.name}}const I=L=>{for(let V=0;V<L.fields.length;V++)if(L.fields[V].type===f.fS.time)return{timeField:L.fields[V],timeIndex:V};return{}};function F(L){const V=a(x(L));if(V.fields&&V.fields.length)for(const H of V.fields)H.state=null;return V}function w(L){return!L||!(0,t.isArray)(L)?[]:L.map(V=>F(V))}function K(L,V){const{series:H,annotations:j}=L;if(L.state===u.Gu.Loading&&H.length===0)return V||(V=L),{...V,state:u.Gu.Loading,request:L.request};const A=performance.now(),_=H.map(re=>F(re)),k=w(j),Q=performance.now();return{...L,series:_,annotations:k,timings:{dataProcessingTime:Q-A}}}},19447:(Y,T,e)=>{"use strict";e.d(T,{m$:()=>i,pP:()=>c,xI:()=>s});var t=e(99098),n=e(83881);function c(f){return f.fields.length>2?!1:Boolean(f.fields.find(u=>u.type===t.fS.time))}function s(f){return!f.find(u=>!c(u))}function i(f){for(let u=0;u<f.length;u++){const r=(0,n.sV)(f[u]);if(r.timeField!==void 0&&r.timeIndex!==void 0)return!0}return!1}},10753:(Y,T,e)=>{"use strict";e.d(T,{K:()=>c,Z:()=>s});var t=e(75849);let n=()=>t.Ys;const c=i=>{n=i??n},s=i=>i?.timeZone??n()??t.Ys},47406:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{isMathString:()=>i,isValid:()=>u,parse:()=>f,parseDateMath:()=>r,roundToFiscal:()=>d});var t=e(82897),n=e.n(t),c=e(67483);const s=["y","M","w","d","h","m","s","Q"];function i(o){return o?!!(typeof o=="string"&&(o.substring(0,3)==="now"||o.includes("||"))):!1}function f(o,m,l,p){if(o){if(typeof o!="string")return(0,c.v9)(o)?o:(0,t.isDate)(o)?(0,c.CQ)(o):void 0;{let g,y="",v,E;return o.substring(0,3)==="now"?(g=(0,c.GY)(l),y=o.substring(3)):(v=o.indexOf("||"),v===-1?(E=o,y=""):(E=o.substring(0,v),y=o.substring(v+2)),g=(0,c.CQ)(E,c.VJ)),y.length?r(y,g,m,p):g}}}function u(o){const m=f(o);return m&&(0,c.v9)(m)?m.isValid():!1}function r(o,m,l,p=0){const g=o.replace(/\s/g,""),y=m;let v=0;const E=g.length;for(;v<E;){const h=g.charAt(v++);let C,a,P,D=!1;if(h==="/")C=0;else if(h==="+")C=1;else if(h==="-")C=2;else return;if(isNaN(parseInt(g.charAt(v),10)))a=1;else if(g.length===2)a=parseInt(g.charAt(v),10);else{const x=v;for(;!isNaN(parseInt(g.charAt(v),10));)if(v++,v>10)return;a=parseInt(g.substring(x,v),10)}if(C===0&&a!==1)return;if(P=g.charAt(v++),P==="f"&&(P=g.charAt(v++),D=!0),(0,t.includes)(s,P))C===0?l?D?d(p,y,P,l):y.endOf(P):D?d(p,y,P,l):y.startOf(P):C===1?y.add(a,P):C===2&&y.subtract(a,P);else return}return y}function d(o,m,l,p){switch(l){case"y":return p?d(o,m,l,!1).add(11,"M").endOf("M"):m.subtract((m.month()-o+12)%12,"M").startOf("M"),m;case"Q":return p?d(o,m,l,!1).add(2,"M").endOf("M"):m.subtract((m.month()-o+3)%3,"M").startOf("M"),m;default:return}}},76282:(Y,T,e)=>{"use strict";e.d(T,{IA:()=>m,Ks:()=>u,RA:()=>f,iX:()=>r,jO:()=>o,qb:()=>d,vT:()=>i});var t=e(87882),n=e(68813),c=e(17454);const s={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function i(l,p=!0){if((0,t.Z)(l.start,l.end))return"";const g=(0,c.Z)(l);return Object.entries(g).reduce((y,[v,E])=>E&&E!==0&&!(v==="seconds"&&!p&&y)?y+`${y!==""?" ":""}${E}${s[v][0]}`:y,"")}function f(l){return l.split(" ").reduce((p,g)=>{const y=g.match(/(\d+)(.+)/),v=y?.[1],E=y?.[2];if(!(v&&E))return p;const h=Object.entries(s).find(([a,P])=>P?.includes(y[2])),C=parseInt(v,10);return h?{...p,[h[0]]:C}:p},{})}function u(l,p){return(0,n.Z)(l,p)}function r(l){const p=new Date;return u(p,l).getTime()-p.getTime()}function d(l){return!isNaN(Date.parse(l))}function o(l){for(const p of l.trim().split(" ")){const g=p.match(/(\d+)(.+)/);if(g===null||g.length!==3||!Object.entries(s).find(([v,E])=>E?.includes(g[2]))?.[0])return!1}return!0}function m(l){const p=["h","m","s","ms","us","\xB5s","ns"];for(const g of l.trim().split(" ")){const y=g.match(/([0-9]*[.]?[0-9]+)(.+)/);if(y===null||y.length!==3||!p.includes(y[2]))return!1}return!0}},82410:(Y,T,e)=>{"use strict";e.d(T,{Ji:()=>s,U6:()=>i,zf:()=>c});const t="YYYY-MM-DD HH:mm:ss",n="YYYY-MM-DD HH:mm:ss.SSS";class c{constructor(){this.fullDate=t,this.fullDateMS=n,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(r){this.fullDate=r.fullDate,this.interval=r.interval,r.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=s({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=s({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=s({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=s({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=s({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(r){return`time:${r?this.fullDateMS:this.fullDate}`}}function s(u,r,d){if(f())return d??t;!r&&navigator&&(r=[...navigator.languages]);const o=new Intl.DateTimeFormat(r||void 0,u),m=o.formatToParts(new Date),p={year:"YYYY",month:"MM",day:"DD",hour:o.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return m.map(g=>p[g.type]||g.value).join("")}const i=new c,f=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},77258:(Y,T,e)=>{"use strict";e.d(T,{E8:()=>u,Fm:()=>r,Hk:()=>d,dq:()=>i,lf:()=>f});var t=e(6835),n=e.n(t),c=e(10753),s=e(82410);const i=(l,p)=>m(l,(0,c.Z)(p)).format(o(p)),f=(l,p)=>m(l,(0,c.Z)(p)).format(),u=(l,p)=>m(l,(0,c.Z)(p)).fromNow(),r=(l,p)=>m(l,(0,c.Z)(p)).format(`${s.U6.fullDate} z`),d=(l,p)=>m(l,(0,c.Z)(p)).format("z"),o=l=>l?.defaultWithMS?l?.format??s.U6.fullDateMS:l?.format??s.U6.fullDate,m=(l,p)=>{const g=l,y=n().tz.zone(p);if(y&&y.name)return n().utc(g).tz(y.name);switch(p){case"utc":return n().utc(g);default:return n().utc(g).local()}}},44540:(Y,T,e)=>{"use strict";e.d(T,{$8:()=>s.$8,CQ:()=>c.CQ,C_:()=>c.C_,D2:()=>c.D2,E8:()=>f.E8,Fm:()=>f.Fm,GY:()=>c.GY,Hk:()=>f.Hk,IA:()=>r.IA,J:()=>u.J,Ji:()=>i.Ji,K7:()=>d.K,Kd:()=>c.Kd,Ks:()=>r.Ks,Ls:()=>c.Ls,Pr:()=>s.Pr,RA:()=>r.RA,RQ:()=>s.RQ,Rn:()=>t,U6:()=>i.U6,VJ:()=>c.VJ,Vs:()=>s.Vs,ZV:()=>s.ZV,Ze:()=>d.Z,cT:()=>n,dq:()=>f.dq,iX:()=>r.iX,i_:()=>c.i_,ig:()=>c.ig,jN:()=>c.jN,jO:()=>r.jO,k4:()=>c.k4,lf:()=>f.lf,np:()=>c.Ks,qb:()=>r.qb,v9:()=>c.v9,vT:()=>r.vT,zf:()=>i.zf,zh:()=>c.zh});var t=e(47406),n=e(47891),c=e(67483),s=e(56808),i=e(82410),f=e(77258),u=e(29826),r=e(76282),d=e(10753)},67483:(Y,T,e)=>{"use strict";e.d(T,{CQ:()=>m,C_:()=>l,D2:()=>u,GY:()=>p,Kd:()=>i,Ks:()=>o,Ls:()=>v,VJ:()=>c,i_:()=>s,ig:()=>g,jN:()=>y,k4:()=>f,v9:()=>r,zh:()=>d});var t=e(36365),n=e.n(t);const c=n().ISO_8601,s=E=>{n().locale(E)},i=()=>n().locale(),f=()=>n().localeData(),u=E=>E===null||typeof E=="string"||typeof E=="number"||E instanceof Date||Array.isArray(E)&&E.every(h=>typeof h=="string"||typeof h=="number")||r(E),r=E=>n().isMoment(E),d=(E,h)=>n().utc(E,h),o=(E,h)=>n().duration(E,h),m=(E,h)=>n()(E,h),l=E=>m(E),p=(E,h,C)=>E==="utc"?d(h,C):m(h,C),g=E=>n().weekdays().findIndex(h=>h.toLowerCase()===E.toLowerCase()),y=E=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(h=>h.toLowerCase()===E.toLowerCase()),v=E=>{const h="-weekStart",C=i().replace(h,""),a=E?y(E):-1;a!==-1?n().locale(C+h,{parentLocale:C,week:{dow:a}}):s(C)}},29826:(Y,T,e)=>{"use strict";e.d(T,{J:()=>d});var t=e(82897),n=e.n(t),c=e(6835),s=e.n(c),i=e(10753),f=e(47406),u=e(82410),r=e(67483);const d=(l,p)=>(0,r.v9)(l)?l:typeof l=="string"?o(l,p):m(l,p),o=(l,p)=>{if(l.indexOf("now")!==-1)return(0,f.isValid)(l)&&(0,f.parse)(l,p?.roundUp,p?.timeZone,p?.fiscalYearStartMonth)||s()();const g=(0,i.Z)(p),y=s().tz.zone(g),v=p?.format??u.U6.fullDate;if(y&&y.name)return s().tz(l,v,y.name);switch((0,t.lowerCase)(g)){case"utc":return s().utc(l,v);default:return s()(l,v)}},m=(l,p)=>{const g=l,y=(0,i.Z)(p),v=s().tz.zone(y);if(v&&v.name)return s().tz(g,v.name);switch((0,t.lowerCase)(y)){case"utc":return s().utc(g);default:return s()(g)}}},47891:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{calculateInterval:()=>P,convertRawToRange:()=>y,describeInterval:()=>M,describeTextRange:()=>m,describeTimeRange:()=>l,describeTimeRangeAbbreviation:()=>g,intervalToMs:()=>R,intervalToSeconds:()=>b,isFiscal:()=>E,isRelativeTimeRange:()=>h,isValidTimeSpan:()=>p,msRangeToTimeString:()=>a,relativeToTimeRange:()=>U,roundInterval:()=>S,secondsToHms:()=>C,timeRangeToRelative:()=>O});var t=e(82897),n=e.n(t),c=e(47406),s=e(77258),i=e(67483),f=e(29826);const u={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},r=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],d=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],o={};(0,t.each)(r,I=>{o[I.from+" to "+I.to]=I}),(0,t.each)(d,I=>{o[I.from+" to "+I.to]=I});function m(I){const F=I.indexOf("+")!==0;I.indexOf("now")===-1&&(I=(F?"now-":"now")+I);let w=o[I+" to now"];if(w)return w;F?w={from:I,to:"now"}:w={from:"now",to:I};const K=/^now([-+])(\d+)(\w)/.exec(I);if(K){const L=K[3],V=parseInt(K[2],10),H=u[L];H&&(w.display=F?"Last ":"Next ",w.display+=V+" "+H.display,w.section=H.section,V>1&&(w.display+="s"))}else w.display=w.from+" to "+w.to,w.invalid=!0;return w}function l(I,F){const w=o[I.from.toString()+" to "+I.to.toString()];if(w)return w.display;const K={timeZone:F};if((0,i.v9)(I.from)&&(0,i.v9)(I.to))return(0,s.dq)(I.from,K)+" to "+(0,s.dq)(I.to,K);if((0,i.v9)(I.from)){const L=c.parse(I.to,!0,"utc");return L?(0,s.dq)(I.from,K)+" to "+(0,s.E8)(L,K):""}if((0,i.v9)(I.to)){const L=c.parse(I.from,!1,"utc");return L?(0,s.E8)(L,K)+" to "+(0,s.dq)(I.to,K):""}return I.to.toString()==="now"?m(I.from).display:I.from.toString()+" to "+I.to.toString()}const p=I=>I.indexOf("$")===0||I.indexOf("+$")===0?!0:m(I).invalid!==!0,g=(I,F)=>{if((0,i.v9)(I.from))return(0,s.Hk)(I.from,{timeZone:F});const w=c.parse(I.from,!0);return w?(0,s.Hk)(w,{timeZone:F}):""},y=(I,F,w,K)=>{const L=(0,f.J)(I.from,{roundUp:!1,timeZone:F,fiscalYearStartMonth:w,format:K}),V=(0,f.J)(I.to,{roundUp:!0,timeZone:F,fiscalYearStartMonth:w,format:K});return c.isMathString(I.from)||c.isMathString(I.to)?{from:L,to:V,raw:I}:{from:L,to:V,raw:{from:L,to:V}}};function v(I){return typeof I=="string"?I.indexOf("now")>=0:!1}function E(I){return typeof I.raw.from=="string"&&I.raw.from.indexOf("f")>0?!0:typeof I.raw.to=="string"&&I.raw.to.indexOf("f")>0}function h(I){return v(I.from)||v(I.to)}function C(I){const F=Math.floor(I/31536e3);if(F)return F+"y";const w=Math.floor(I%31536e3/86400);if(w)return w+"d";const K=Math.floor(I%31536e3%86400/3600);if(K)return K+"h";const L=Math.floor(I%31536e3%86400%3600/60);if(L)return L+"m";const V=Math.floor(I%31536e3%86400%3600%60);if(V)return V+"s";const H=Math.floor(I*1e3);return H?H+"ms":"less than a millisecond"}function a(I){const F=Number((I/1e3).toFixed()),w=Math.floor(F/60/60),K=Math.floor(F/60)-w*60,L=Number((F%60).toFixed());let V=w?w+"h":"",H=K?K+"min":"",j=L?L+"sec":"";return V&&H?V=V+" ":V=V,(H||V)&&j?H=H+" ":H=H,V+H+j||"less than 1sec"}function P(I,F,w){let K=1;w&&(K=R(w));let L=S((I.to.valueOf()-I.from.valueOf())/F);return K>L&&(L=K),{intervalMs:L,interval:C(L/1e3)}}const D=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,x={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function M(I){if(Number(I))return{sec:x.s,type:"s",count:parseInt(I,10)};const F=I.match(D);if(!F||!(0,t.has)(x,F[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(x).join(", ")}"`);return{sec:x[F[2]],type:F[2],count:parseInt(F[1],10)}}function b(I){const F=M(I);return F.sec*F.count}function R(I){const F=M(I);return F.sec*1e3*F.count}function S(I){switch(!0){case I<10:return 1;case I<15:return 10;case I<35:return 20;case I<75:return 50;case I<150:return 100;case I<350:return 200;case I<750:return 500;case I<1500:return 1e3;case I<3500:return 2e3;case I<7500:return 5e3;case I<12500:return 1e4;case I<17500:return 15e3;case I<25e3:return 2e4;case I<45e3:return 3e4;case I<9e4:return 6e4;case I<21e4:return 12e4;case I<45e4:return 3e5;case I<75e4:return 6e5;case I<105e4:return 9e5;case I<15e5:return 12e5;case I<27e5:return 18e5;case I<54e5:return 36e5;case I<9e6:return 72e5;case I<162e5:return 108e5;case I<324e5:return 216e5;case I<864e5:return 432e5;case I<6048e5:return 864e5;case I<18144e5:return 6048e5;case I<36288e5:return 2592e6;default:return 31536e6}}function O(I,F=(0,i.CQ)()){const w=F.unix()-I.from.unix(),K=F.unix()-I.to.unix();return{from:w,to:K}}function U(I,F=(0,i.CQ)()){const w=(0,i.CQ)(F).subtract(I.from,"s"),K=I.to===0?(0,i.CQ)(F):(0,i.CQ)(F).subtract(I.to,"s");return{from:w,to:K,raw:{from:w,to:K}}}},56808:(Y,T,e)=>{"use strict";e.d(T,{$8:()=>o,Pr:()=>r,RQ:()=>f,Vs:()=>u,ZV:()=>d});var t=e(82897),n=e.n(t),c=e(6835),s=e.n(c),i=e(10753),f=(v=>(v.default="",v.localBrowserTime="browser",v.utc="utc",v))(f||{});const u=v=>{switch((0,i.Z)({timeZone:v})){case"browser":return"Local browser time";case"utc":return"UTC";default:return v}},r=(v,E)=>{const h=m(v,E);return h||p(v,E)},d=(0,t.memoize)((v=!1)=>{const E=[];return v===!0?E.push("","browser","utc"):v&&E.push(...v),s().tz.names().reduce((h,C)=>{const a=y[C];return!Array.isArray(a)||a.length===0||h.push(C),h},E)}),o=(0,t.memoize)((v=!1)=>{const h=d(v).reduce((C,a)=>{const P=a.indexOf("/");if(P===-1){const x="";return C[x]=C[x]??[],C[x].push(a),C}const D=a.slice(0,P);return C[D]=C[D]??[],C[D].push(a),C},{});return Object.keys(h).map(C=>({name:C,zones:h[C]}))}),m=(v,E)=>{switch(v){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:v,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const h=(0,i.Z)(),a=(h==="browser"||h==="utc"?m(h,E):p(h,E))??{};return{countries:y[h]??[],abbreviation:"",offsetInMins:0,...a,ianaName:a.ianaName,name:"Default",zone:v}}case"browser":{const h=s().tz.guess(!0),C=p(h,E)??{};return{countries:y[h]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...C,name:"Browser Time",ianaName:C.ianaName,zone:v}}default:return}},l=v=>/^(\+|\-).+/.test(v)?"":v,p=(v,E)=>{const h=s().tz.zone(v);if(h)return{name:v,ianaName:h.name,zone:v,countries:y[v]??[],abbreviation:l(h.abbr(E)),offsetInMins:h.utcOffset(E)}},g={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},y=(()=>s().tz.countries().reduce((v,E)=>s().tz.zonesForCountry(E).reduce((C,a)=>{C[a]||(C[a]=[]);const P=g[E];return P&&C[a].push({code:E,name:P}),C},v),{}))()},50444:(Y,T,e)=>{"use strict";e.d(T,{F:()=>s});var t=e(53943),n=e(84946),c=e(90801);class s{constructor(){this.subscribers=new Map,this.emitter=new t.Z}publish(u){this.emitter.emit(u.type,u)}subscribe(u,r){return this.getStream(u).subscribe({next:r})}getStream(u){return new n.y(r=>{const d=o=>{r.next(o)};return this.emitter.on(u.type,d),this.subscribers.set(d,r),()=>{this.emitter.off(u.type,d),this.subscribers.delete(d)}})}newScopedBus(u,r){return new i([u],this,r)}emit(u,r){typeof u=="string"?this.emitter.emit(u,{type:u,payload:r}):this.emitter.emit(u.name,{type:u.name,payload:r})}on(u,r,d){if(r.wrapper=o=>{r(o.payload)},typeof u=="string"?this.emitter.on(u,r.wrapper):this.emitter.on(u.name,r.wrapper),d){const o=d.$on("$destroy",()=>{this.off(u,r),o()})}}off(u,r){if(typeof u=="string"){this.emitter.off(u,r.wrapper);return}this.emitter.off(u.name,r.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[u,r]of this.subscribers)r.complete(),this.subscribers.delete(u)}}class i{constructor(u,r,d){this.path=u,this.eventBus=r,this.filter=o=>this.filterConfig.onlyLocal?o.origin===this:!0,this.filterConfig=d??{onlyLocal:!1}}publish(u){u.origin||(u.origin=this),this.eventBus.publish(u)}getStream(u){return this.eventBus.getStream(u).pipe((0,c.h)(this.filter))}subscribe(u,r){return this.getStream(u).subscribe({next:r})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(u,r){return new i([...this.path,u],this,r)}}},23588:(Y,T,e)=>{"use strict";e.d(T,{Pl:()=>f,es:()=>n,n1:()=>i,v9:()=>s,xH:()=>c});var t=e(55391);class n extends t.R{}n.type="data-hover";class c extends t.m{}c.type="data-hover-clear";class s extends t.R{}s.type="data-select";class i extends t.R{}i.type="annotation-event";class f extends t.R{}f.type="dashboard-loaded"},84336:(Y,T,e)=>{"use strict";e.d(T,{X:()=>n});const t=new Set;function n(c){if(t.has(c))throw new Error(`There is already an event defined with type '${c}'`);return t.add(c),{name:c}}},69616:(Y,T,e)=>{"use strict";e.d(T,{Fb:()=>c.F,Pl:()=>s.Pl,R_:()=>n.R,Xw:()=>t.X,es:()=>s.es,mA:()=>n.m,n1:()=>s.n1,v9:()=>s.v9,xH:()=>s.xH});var t=e(84336),n=e(55391),c=e(50444),s=e(23588)},55391:(Y,T,e)=>{"use strict";e.d(T,{R:()=>n,m:()=>t});class t{constructor(){this.type=this.__proto__.constructor.type}}class n extends t{constructor(s){super(),this.payload=s}}},96949:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>n});var t=e(53908);class n extends t.B{}},6194:(Y,T,e)=>{"use strict";e.d(T,{U_:()=>l,gE:()=>y,je:()=>g});var t=e(82897),n=e.n(t),c=e(83881),s=e(29826),i=e(67483),f=e(99098),u=e(31290),r=e(2576),d=e(2703),o=e(99601);const m={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function l(E){if(!E||(0,t.isEmpty)(E)||!E.field)return p;const h=E.field,C=h.config??{};let a=C.unit,P=a&&(m[a]||a.startsWith("time:")),D=!1;if(h.type===f.fS.time&&!P){if(a="dateTimeAsSystem",P=!0,h.values&&h.values.length>1){let I=h.values[0],F=h.values[h.values.length-1];typeof I=="string"?(I=(0,s.J)(I).unix(),F=(0,s.J)(F).unix()):(I/=1e3,F/=1e3),D=Math.abs(F-I)<60}}else if(h.type===f.fS.boolean)(0,d.br)(a)||(a="bool");else if(!a&&h.type===f.fS.string)a="string";else if(h.type===f.fS.enum)return g(E.theme,C.type?.enum);const x=a?.startsWith("currency"),M=(0,d.br)(a),b=h.type===f.fS.number,S=!P&&!x&&!M&&!(a==="locale")&&b&&C.decimals==null,O=(0,d.Cf)(a||"none"),U=(0,o.NI)(h,E.theme);return(I,F)=>{const{mappings:w}=C,K=a==="string";P&&typeof I=="string"&&(I=(0,i.zh)(I).valueOf());let L=K?NaN:(0,u.I)(I),V,H,j,A,_,k;if(w&&w.length>0){const re=(0,r.vh)(w,I);re&&(re.text!=null&&(V=re.text),re.color!=null&&(A=E.theme.visualization.getColorByName(re.color)),re.icon!=null&&(_=re.icon))}if(!Number.isNaN(L)){if(V==null&&!(0,t.isBoolean)(I)){let re;S&&F!=null?(re=O(L,F,null,E.timeZone,D),re.text=+re.text+""):re=O(L,C.decimals,null,E.timeZone,D),V=re.text,j=re.suffix,H=re.prefix}if(A==null){const re=U(L);A=re.color,k=re.percent}}if(V==null&&(0,t.isArray)(I)&&(V=(0,t.join)(I,", ")),V==null&&(V=(0,t.toString)(I),V||(C.noValue?V=C.noValue:V="")),!A){const re=U(-1/0);A=re.color,k=re.percent}const Q={text:V,numeric:L,prefix:H,suffix:j,color:A};return _!=null&&(Q.icon=_),k!=null&&(Q.percent=k),Q}}function p(E){return{text:(0,t.toString)(E),numeric:(0,u.I)(E)}}function g(E,h){const C={text:h?.text??[],color:h?.color??[]};return C.color=C.color.map(a=>E.visualization.getColorByName(a)),a=>{if(a==null)return{text:"",numeric:NaN};const P=+a;let D=C.text[P];D==null&&(D=`${a}`);let x=C.color[P];if(x==null){const{palette:M}=E.visualization;x=M[P%M.length],C.color[P]=x}return{text:D,numeric:P,color:x}}}function y(){return E=>({text:(0,c.DP)(E)==="other"?`${JSON.stringify(E,v())}`:`${E}`,numeric:null})}const v=()=>{const E=new WeakSet;return(h,C)=>{if(typeof C=="object"&&C!==null){if(E.has(C))return;E.add(C)}return C}}},72990:(Y,T,e)=>{"use strict";e.d(T,{QY:()=>g,WO:()=>m,YO:()=>y,fD:()=>p});var t=e(32701),n=e(24593),c=e.n(n),s=e(28550),i=e(5680),f=e(33750),u=e(53768),r=e(53908),d=e(99601),o=e(92103);const m=new r.B(()=>[{id:u.S.Fixed,name:"Single color",description:"Set a specific color",getCalculator:v},{id:u.S.Shades,name:"Shades of a color",description:"Select shades of a specific color",getCalculator:E},{id:u.S.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(h,C)=>(a,P,D)=>{const x=D??o.yM;return C.visualization.getColorByName(x.color)}},new l({id:u.S.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:h=>h.visualization.palette}),new l({id:u.S.PaletteClassicByName,name:"Classic palette (by series name)",isContinuous:!1,isByValue:!1,useSeriesName:!0,getColors:h=>h.visualization.palette.filter(C=>i.getContrastRatio(h.visualization.getColorByName(C),h.colors.background.primary)>=h.colors.contrastThreshold)}),new l({id:u.S.ContinuousGrYlRd,name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:h=>["green","yellow","red"]}),new l({id:u.S.ContinuousRdYlGr,name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:h=>["red","yellow","green"]}),new l({id:u.S.ContinuousBlYlRd,name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:h=>["dark-blue","super-light-yellow","dark-red"]}),new l({id:u.S.ContinuousYlRd,name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:h=>["super-light-yellow","dark-red"]}),new l({id:u.S.ContinuousBlPu,name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:h=>["blue","purple"]}),new l({id:u.S.ContinuousYlBl,name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:h=>["super-light-yellow","dark-blue"]}),new l({id:u.S.ContinuousBlues,name:"Blues",isContinuous:!0,isByValue:!0,getColors:h=>["panel-bg","dark-blue"]}),new l({id:u.S.ContinuousReds,name:"Reds",isContinuous:!0,isByValue:!0,getColors:h=>["panel-bg","dark-red"]}),new l({id:u.S.ContinuousGreens,name:"Greens",isContinuous:!0,isByValue:!0,getColors:h=>["panel-bg","dark-green"]}),new l({id:u.S.ContinuousPurples,name:"Purples",isContinuous:!0,isByValue:!0,getColors:h=>["panel-bg","dark-purple"]})]);class l{constructor(C){this.id=C.id,this.name=C.name,this.description=C.description,this.getNamedColors=C.getColors,this.isContinuous=C.isContinuous,this.isByValue=C.isByValue,this.useSeriesName=C.useSeriesName}getColors(C){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===C?this.colorCache:(this.colorCache=this.getNamedColors(C).map(C.visualization.getColorByName),this.colorCacheTheme=C,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,t.hD)(this.colorCache)),this.interpolator}getCalculator(C,a){const P=this.getColors(a);return this.isByValue?this.isContinuous?(D,x,M)=>this.getInterpolator()(x):(D,x,M)=>P[x*(P.length-1)]:this.useSeriesName?(D,x,M)=>P[Math.abs(c()(C.name))%P.length]:(D,x,M)=>{const b=C.state?.seriesIndex??0;return P[b%P.length]}}}function p(h){return m.get(h.config.color?.mode??u.S.Thresholds)}function g(h){return m.get(h??u.S.Thresholds)}function y(h,C){const a=p(h);if(!a.isByValue)return{color:a.getCalculator(h,C)(0,0),threshold:o.yM,percent:1};const P=(0,d.NI)(h,C),D=h.config.color?.seriesBy??"last",M=(0,f.Kx)({field:h,reducers:[D]})[D]??0;return P(M)}function v(h,C){return()=>C.visualization.getColorByName(h.config.color?.fixedColor??u.R)}function E(h,C){return()=>{const a=C.visualization.getColorByName(h.config.color?.fixedColor??u.R),P=[a],D=6,x=10,M=35,b=35;for(let S=1;S<D;S++)P.push((0,s.Z)(a).spin(S/D*x).brighten(S/D*M).toHexString()),P.push((0,s.Z)(a).spin(-(S/D)*x).darken(S/D*b).toHexString());const R=h.state?.seriesIndex??0;return P[R%P.length]}}},92156:(Y,T,e)=>{"use strict";e.d(T,{E1:()=>p,HU:()=>m,cB:()=>v,dE:()=>y,gG:()=>P,nG:()=>E,n_:()=>l,pZ:()=>g,r5:()=>b,sg:()=>D});var t=e(82897),n=e.n(t),c=e(12115),s=e(83881),i=e(50035),f=e(33750),u=e(90748),r=e(99098),d=e(6194),o=e(30471);const m="__series.name",l="__field.displayName",p="__field.labels",g="__calc",y="__cell_",v=25,E=S=>{const{replaceVariables:O,reduceOptions:U,timeZone:I,theme:F}=S,w=U.calcs.length?U.calcs:[f.gz.last],K=[],L=(0,i.sq)(U.fields?{id:u.mi.byRegexp,options:U.fields}:{id:u.mi.numeric}),V=S.data??[],H=U.limit?U.limit:v;let j=!1;for(let A=0;A<V.length&&!j;A++){const _=V[A],{timeField:k}=(0,s.sV)(_),Q=new c.U(_);for(let re=0;re<_.fields.length&&!j;re++){const Z=_.fields[re],oe=Z.getLinks;if(!L(Z,_,V))continue;let G=Z.config;Z.state?.range&&(G={...G,...Z.state?.range});let le=Z.config.displayName??"";const ge=Z.display??(0,d.U_)({field:Z,theme:S.theme,timeZone:I});if(U.values)for(let ne=0;ne<Z.values.length;ne++){Z.state=C(Z,K.length);const ue=R(Z,ne),te=ge(Z.values[ne]),me=h(_,Z,ne,O,ue),q=a(me,S.fieldConfig,F);if(K.push({name:"",field:G,display:{...te,title:me,color:q??te.color},view:Q,colIndex:re,rowIndex:ne,getLinks:oe?()=>oe({valueRowIndex:ne}):()=>[],hasLinks:P(Z)}),K.length>=H){j=!0;break}}else{const ne=(0,f.Kx)({field:Z,reducers:w});for(const ue of w){const te=Z.state?.scopedVars??{};te[g]={value:ue,text:ue};const me=ge(ne[ue]);le!==""?me.title=O(le,te):me.title=(0,o.CZ)(Z,_,V);let q;S.sparkline&&(q={y:_.fields[re],x:k},ue===f.gz.last?q.highlightIndex=q.y.values.length-1:ue===f.gz.first&&(q.highlightIndex=0)),K.push({name:ue,field:G,display:me,sparkline:q,view:Q,colIndex:re,getLinks:oe?()=>oe({calculatedValue:me}):()=>[],hasLinks:P(Z)})}}}}return K.length===0&&K.push(x(S)),K};function h(S,O,U,I,F){const w=O.config.displayName;if(w)return w.indexOf(y)?I(b(w),F):I(w,F);let K=[],L=0;for(const V of S.fields)if(V!==O)if(V.type===r.fS.string){const H=V.values[U]??"",j=V.display?V.display(H).text:H;j.length>0&&K.push(j)}else V.type===r.fS.number&&L++;return(L||K.length===0)&&K.push((0,o.CZ)(O,S)),K.join(" ")}function C(S,O){return{...S.state,seriesIndex:O}}function a(S,O,U){for(const I of O.overrides)if(I.matcher.id==="byName"&&I.matcher.options===S){for(const F of I.properties)if(F.id==="color"&&F.value)return U.visualization.getColorByName(F.value.fixedColor)}return null}function P(S){return S.config?.links?.length?S.config.links.length>0:!1}function D(S){let O="",U="",I="",F="";for(let w=0;w<S.length;w++){const K=S[w].display;K.text&&K.text.length>U.length&&(U=K.text),K.title&&K.title.length>O.length&&(O=K.title),K.prefix&&K.prefix.length>I.length&&(I=K.prefix),K.suffix&&K.suffix.length>F.length&&(F=K.suffix)}return{text:U,title:O,suffix:F,prefix:I}}function x(S){const O="No data",{fieldConfig:U,timeZone:I}=S,{defaults:F}=U,K=(0,d.U_)({field:{type:r.fS.other,config:F},theme:S.theme,timeZone:I})(null),L=M(K,O);return{name:O,field:{...F,max:F.max??0,min:F.min??0},display:{text:L,numeric:0,color:K.color},hasLinks:!1}}function M(S,O){return!S||(0,t.isEmpty)(S.text)?O:S.text}function b(S){return S.replace(/\${__cell_(\d+)}|\[\[__cell_(\d+)\]\]|\$__cell_(\d+)/g,(O,U,I,F)=>`\${__data.fields[${U??I??F}]}`)}function R(S,O){return S.state?.scopedVars?.__dataContext?{...S.state?.scopedVars,__dataContext:{value:{...S.state?.scopedVars?.__dataContext.value,rowIndex:O}}}:S.state?.scopedVars}},76095:(Y,T,e)=>{"use strict";e.d(T,{Cc:()=>R,Of:()=>b,SM:()=>h,Xu:()=>E,gb:()=>x,oB:()=>M});var t=e(82897),n=e.n(t),c=e(66111),s=e(83272),i=e(40538),f=e(83881),u=e(96905),r=e(5680),d=e(33750),o=e(50035),m=e(99098),l=e(53768),p=e(72196),g=e(94976),y=e(6194),v=e(30779);function E(O){let U=null,I=null;const F=[d.gz.min,d.gz.max];for(const w of O)for(const K of w.fields)if(K.type===m.fS.number){const L=(0,d.Kx)({field:K,reducers:F}),V=L[d.gz.min],H=L[d.gz.max];(U===null||V<U)&&(U=V),(I===null||H>I)&&(I=H)}return{min:U,max:I,delta:(I??0)-(U??0)}}function h(O){if(!O.data)return[];const U=O.fieldConfig;if(!U)return O.data;const I=O.fieldConfigRegistry??v.N;let F=0,w;const K=[];if(U.overrides)for(const L of U.overrides){const V=o.Ls.get(L.matcher.id);V&&K.push({match:V.get(L.matcher.options),properties:L.properties})}return O.data.map((L,V)=>{const H={...L};H.fields=H.fields.map(j=>({...j,config:(0,t.cloneDeep)(j.config),state:{...j.state}}));for(const j of H.fields){const A=j.config;j.state.scopedVars={__dataContext:{value:{data:O.data,frame:H,frameIndex:V,field:j}}};const _={field:j,data:O.data,dataFrameIndex:V,replaceVariables:O.replaceVariables,fieldConfigRegistry:I};P(A,U.defaults,_);for(const re of K)if(re.match(j,H,O.data))for(const Z of re.properties)a(A,Z,_);let k=j.type;if(!k||k===m.fS.other){const re=(0,f.fu)(j);re&&(k=re)}let Q;if(j.type===m.fS.number){!w&&(!(0,t.isNumber)(A.min)||!(0,t.isNumber)(A.max))&&(w=E(O.data));const re=A.min??w.min,Z=A.max??w.max;Q={min:re,max:Z,delta:Z-re}}j.state.seriesIndex=F,j.state.range=Q,j.type=k,j.type!==m.fS.time&&F++,j.display=(0,y.U_)({field:j,theme:O.theme,timeZone:O.timeZone}),j.config.unit!=="dateTimeFromNow"&&(j.display=C(j.display,2500)),j.getLinks=M(H,j,j.state.scopedVars,_.replaceVariables,O.timeZone)}return H})}function C(O,U=2500){const I=new Map;for(let F=-1;F<=15;F++)I.set(F,new Map);return(F,w)=>{let K=I.get(w??-1),L=K.get(F);return L||(K.size===U&&K.clear(),L=O(F,w),L.color&&(L.color=(0,r.asHexString)(L.color)),K.set(F,L)),L}}function a(O,U,I){const w=I.fieldConfigRegistry.getIfExists(U.id);if(!w)return;const K=w.process(U.value,I,w.settings);K==null?w.isCustom&&O.custom?(0,t.unset)(O.custom,w.path):(0,t.unset)(O,w.path):w.isCustom?(O.custom||(O.custom={}),(0,t.set)(O.custom,w.path,K)):(0,t.set)(O,w.path,K)}function P(O,U,I){O.links&&U.links&&(O.links=[...O.links,...U.links]);for(const F of I.fieldConfigRegistry.list())F.isCustom&&!O.custom&&(O.custom={}),D(F.isCustom?O.custom:O,F.isCustom?U.custom:U,F,I);x(O)}function D(O,U,I,F){const w=(0,t.get)(O,I.path);if(w==null){const K=F.fieldConfigRegistry.getIfExists(I.id);if(!K)return;if(K&&K.shouldApply(F.field)){const L=K.process((0,t.get)(U,K.path),F,K.settings);L!=null&&(0,t.set)(O,K.path,L)}}}function x(O){const{thresholds:U}=O;if(O.color?O.color.mode||delete O.color:U&&(O.color={mode:l.S.Thresholds}),O.hasOwnProperty("min")&&O.hasOwnProperty("max")&&O.min>O.max){const I=O.max;O.max=O.min,O.min=I}}const M=(O,U,I,F,w)=>K=>!U.config.links||U.config.links.length===0?[]:U.config.links.map(L=>{const V=S(O,U,I),H={...I,__dataContext:V},j=(k,Q,re)=>F(k,{...H,...Q},re);if(K.valueRowIndex!==void 0&&!isNaN(K.valueRowIndex)?V.value.rowIndex=K.valueRowIndex:V.value.calculatedValue=K.calculatedValue,L.onClick)return{href:L.url,title:F(L.title||"",H),target:L.targetBlank?"_blank":void 0,onClick:(k,Q)=>{L.onClick({origin:Q??U,e:k,replaceVariables:j})},origin:U};if(L.internal)return(0,g._)({link:L,internalLink:L.internal,scopedVars:H,field:U,range:L.internal.range??{},replaceVariables:F});let A=L.onBuildUrl?L.onBuildUrl({origin:U,replaceVariables:j}):L.url;return A&&(A=p.u.assureBaseUrl(A.replace(/\n/g,"")),A=F(A,H,i.b8.UriEncode),A=p.u.processUrl(A)),{href:A,title:F(L.title||"",H),target:L.targetBlank?"_blank":void 0,origin:U}});function b(O){if(!O||O.length===0)return[];const U=[...O],I=(0,y.gE)();for(let F=0;F<U.length;F++){const w={...U[F]},K=[...w.fields];for(let L=0;L<K.length;L++)K[L]={...K[L],display:I};U[F]={...w,fields:K}}return U}function R(O,U,I,F,w,K){const L=O?.fieldConfigRegistry,V=(0,c.useRef)(0),H=(0,s.Z)(I?.series);return(0,c.useMemo)(()=>{if(!L||!U||!I)return;const j=I?.series;return I.structureRev==null&&j&&H&&!(0,u.nl)(j,H,u.Ch)&&V.current++,{structureRev:V.current,...I,series:h({data:j,fieldConfig:U,fieldConfigRegistry:L,replaceVariables:K,theme:w,timeZone:F})}},[L,U,I,H,F,w,K])}function S(O,U,I){return I?.__dataContext?{value:{...I.__dataContext.value}}:{value:{frame:O,field:U,data:[O]}}}},30471:(Y,T,e)=>{"use strict";e.d(T,{$w:()=>i,CZ:()=>s,nf:()=>c});var t=e(99098),n=e(7569);function c(r,d){if(r.name)return r.name;const o=[];for(const m of r.fields)m.labels&&Object.keys(m.labels).length>0&&o.push(m);return o.length===1?(0,n.aA)(o[0].labels):d===void 0?r.fields.filter(m=>m.type!==t.fS.time).map(m=>s(m,r)).join(", "):r.refId?`Series (${r.refId})`:`Series (${d})`}function s(r,d,o){const m=r.state?.displayName,l=Boolean(o&&o.length>1);if(m&&l===r.state?.multipleFrames)return m;const p=i(r,d,o);return r.state=r.state||{},r.state.displayName=p,r.state.multipleFrames=l,p}function i(r,d,o){const m=r.config?.displayName&&r.config?.displayName.length;let l=m?r.config.displayName:r.name;if(m)return l;if(d&&r.config?.displayNameFromDS)return r.config.displayNameFromDS;if(r.type===t.fS.time&&!r.labels)return l??t.Ls;let p=[],g=!1;if(o&&o.length>1){for(let E=1;E<o.length;E++)if(o[E].name!==o[E-1].name){g=!0;break}}let y=!1,v=!1;if(g&&d?.name&&(p.push(d.name),y=!0),r.name&&r.name!==t.M5&&p.push(r.name),r.labels&&d){let E=u(o??[d]);if(E)r.labels[E]&&(p.push(r.labels[E]),v=!0);else{let h=(0,n.aA)(r.labels);h&&(p.push(h),v=!0)}}return d&&!y&&!v&&r.name===t.M5&&d.name&&d.name.length>0&&(p.push(d.name),y=!0),p.length?l=p.join(" "):r.name?l=r.name:l=t.M5,l===r.name&&(l=f(r,d)),l}function f(r,d){let o=0,m=!1;if(d)for(let l=0;l<d.fields.length;l++){const p=d.fields[l];if(r===p){if(m=!0,o>0){o++;break}}else if(r.name===p.name&&(o++,m))break}return o?`${r.name} ${o}`:r.name}function u(r){let d=null;for(let o=0;o<r.length;o++){const m=r[o];for(const l of m.fields)if(l.labels){for(const p in l.labels)if(d===null)d=p;else if(p!==d)return null}}return d}},72769:(Y,T,e)=>{"use strict";e.d(T,{z:()=>i});var t=e(82897),n=e.n(t),c=e(2703),s=e(6194);function i(f){return new Proxy({},{get:(u,r)=>{let d=f.frame.fields.find(p=>r===p.name);if(!d){const p=(0,t.toNumber)(r);d=f.frame.fields[p]}if(d||(d=f.frame.fields.find(p=>r===p.config.displayName)),d||(d=f.frame.fields.find(p=>p.labels?r===p.labels.name:!1)),!d)return;const o=d.display??(0,s.U_)(),m=d.values[f.rowIndex],l=o(m);return l.toString=()=>(0,c.zc)(l),l}})}},99928:(Y,T,e)=>{"use strict";e.d(T,{AE:()=>s.AE,CZ:()=>o.CZ,Cc:()=>r.Cc,E1:()=>t.E1,HU:()=>t.HU,N6:()=>c.N,NI:()=>m.NI,NN:()=>s.NN,Of:()=>r.Of,Oh:()=>s.Oh,QY:()=>i.QY,SM:()=>r.SM,SO:()=>c.S,U_:()=>n.U_,VB:()=>s.VB,W0:()=>s.W0,W4:()=>s.W4,WO:()=>i.WO,YO:()=>i.YO,ZD:()=>f.Z,ZN:()=>s.ZN,bP:()=>u.bP,cB:()=>t.cB,dE:()=>t.dE,dz:()=>m.dz,fD:()=>i.fD,gE:()=>n.gE,gG:()=>t.gG,gb:()=>r.gb,je:()=>n.je,kG:()=>s.kG,m1:()=>u.m1,nG:()=>t.nG,n_:()=>t.n_,nf:()=>o.nf,op:()=>s.op,pZ:()=>t.pZ,r5:()=>t.r5,sg:()=>t.sg,uj:()=>s.uj,xD:()=>m.xD,zv:()=>d.z});var t=e(92156),n=e(6194),c=e(30779),s=e(72293),i=e(72990),f=e(96949),u=e(92103),r=e(76095),d=e(72769),o=e(30471),m=e(99601)},72293:(Y,T,e)=>{"use strict";e.d(T,{AE:()=>f,NN:()=>s,Oh:()=>n,VB:()=>d,W0:()=>c,W4:()=>o,ZN:()=>r,kG:()=>t,op:()=>u,uj:()=>i});const t=(m,l,p)=>m,n=(m,l,p)=>{if(m!=null)return parseFloat(m)},c=(m,l,p)=>(delete l.field?.state?.displayName,u(m,l,p)),s=(m,l,p)=>m,i=(m,l,p)=>m,f=(m,l,p)=>m,u=(m,l,p)=>m==null?m:p&&p.expandTemplateVars&&l.replaceVariables?l.replaceVariables(m,l.field.state.scopedVars):`${m}`,r=(m,l,p)=>m,d=(m,l,p)=>m,o=(m,l,p)=>m},99601:(Y,T,e)=>{"use strict";e.d(T,{NI:()=>u,dz:()=>d,xD:()=>o});var t=e(82897),n=e.n(t),c=e(33750),s=e(99098),i=e(72990),f=e(92103);function u(m,l){if(m.type===s.fS.boolean)return r(m,l);const g=(0,i.fD)(m).getCalculator(m,l),y=m.state?.range??d(m);return v=>{let E=0;v!==-1/0&&(E=(v-y.min)/y.delta,Number.isNaN(E)&&(E=0));const h=(0,f.pD)(m,v,E);return{percent:E,threshold:h,color:g(v,E,h)}}}function r(m,l){const p={color:l.visualization.getColorByName("green"),percent:1,threshold:void 0},g={color:l.visualization.getColorByName("red"),percent:0,threshold:void 0},y=(0,i.fD)(m);if(y.isContinuous&&y.getColors){const v=y.getColors(l);p.color=v[v.length-1],g.color=v[0]}return v=>Boolean(v)?p:g}function d(m){if(m.type!==s.fS.number)return{min:0,max:100,delta:100};let l=m.config.min,p=m.config.max;if(!(0,t.isNumber)(l)||!(0,t.isNumber)(p))if(m.values&&m.values.length){const g=(0,c.Kx)({field:m,reducers:[c.gz.min,c.gz.max]});(0,t.isNumber)(l)||(l=g[c.gz.min]),(0,t.isNumber)(p)||(p=g[c.gz.max])}else l=0,p=100;return{min:l,max:p,delta:p-l}}function o(m,l){const{config:p}=m;let{min:g,max:y}=p;return(0,t.isNumber)(g)&&(0,t.isNumber)(y)?p:l||!m.state?.range?{...p,...d(m)}:{...p,...m.state.range}}},30779:(Y,T,e)=>{"use strict";e.d(T,{N:()=>c,S:()=>s});var t=e(53908),n=e(96949);const c=new n.Z,s=new t.B},92103:(Y,T,e)=>{"use strict";e.d(T,{bP:()=>f,m1:()=>s,pD:()=>i,yM:()=>c});var t=e(53768),n=e(69098);const c={value:0,color:t.R};function s(u,r){if(!r||r.length===0)return c;let d=r[0];for(const o of r)if(u>=o.value)d=o;else break;return d}function i(u,r,d){const{thresholds:o}=u.config;return o?.mode===n.H.Percentage?s(d*100,o?.steps):s(r,o?.steps)}function f(u){return u.sort((r,d)=>r.value-d.value)}},82360:(Y,T,e)=>{"use strict";e.d(T,{q:()=>t.q1});var t=e(40538)},38412:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{AnnotationChangeEvent:()=>m.n1,AppendedVectors:()=>s.l$,ArrayDataFrame:()=>i.iB,ArrayVector:()=>s.Gt,AsNumberVector:()=>s.sq,BinaryOperationID:()=>t.LH,BinaryOperationVector:()=>s.rM,BusEventBase:()=>m.mA,BusEventWithPayload:()=>m.R_,ByNamesMatcherMode:()=>f.Ys,CSVHeaderStyle:()=>t.x5,CSVReader:()=>t.QM,CircularDataFrame:()=>i.a2,CircularVector:()=>s.dV,ConstantVector:()=>s.uI,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>o.cB,DashboardLoadedEvent:()=>m.Pl,DataFrameView:()=>i.US,DataHoverClearEvent:()=>m.xH,DataHoverEvent:()=>m.es,DataLinkBuiltInVars:()=>t.WC,DataSelectEvent:()=>m.v9,DataSourcePluginContextProvider:()=>a.n,DataTransformerID:()=>f.Wk,DocsId:()=>t.xV,EventBusSrv:()=>m.Fb,FieldCache:()=>i.N,FieldConfigEditorBuilder:()=>t.vo,FieldConfigOptionsRegistry:()=>o.ZD,FieldMatcherID:()=>f.mi,FormattedVector:()=>s.$Y,FrameGeometrySourceMode:()=>g.q,FrameMatcherID:()=>f.E4,ISO_8601:()=>u.VJ,IndexVector:()=>s.rm,InternalTimeZones:()=>u.RQ,LayoutModes:()=>y.l,LegacyMappingType:()=>t.HU,MISSING_VALUE:()=>i.Yi,MatcherID:()=>f.Ff,MutableDataFrame:()=>i.vA,NodeGraphDataFrameFieldNames:()=>t.zG,PanelOptionsEditorBuilder:()=>t.rt,PanelPlugin:()=>v.c,PluginContextProvider:()=>C.b,ReducerID:()=>f.gz,Registry:()=>t.Bz,SortedVector:()=>s.oH,SystemDateFormatsState:()=>u.zf,VAR_CALC:()=>o.pZ,VAR_CELL_PREFIX:()=>o.dE,VAR_FIELD_LABELS:()=>o.E1,VAR_FIELD_NAME:()=>o.n_,VAR_SERIES_NAME:()=>o.HU,ValueMatcherID:()=>f.mE,addDurationToDate:()=>u.Ks,anySeriesWithTimeField:()=>i.m$,anyToNumber:()=>t.IX,applyFieldOverrides:()=>o.SM,applyRawFieldOverrides:()=>o.Of,arrayToDataFrame:()=>i.Pc,arrayUtils:()=>t.sq,binaryOperators:()=>t.nk,booleanOverrideProcessor:()=>o.W4,booleanValueFormatter:()=>d.IR,buildHistogram:()=>f.gY,classicColors:()=>t.ZC,colorManipulator:()=>l.r,compareArrayValues:()=>i.nl,compareDataFrameStructures:()=>i.Ch,convertOldAngularValueMappings:()=>t.Jb,createDimension:()=>i.q2,createFieldConfigRegistry:()=>h.j,createTheme:()=>l.j,dataFrameFromJSON:()=>i.vP,dataFrameToJSON:()=>i.Y,dataLinksOverrideProcessor:()=>o.NN,dateMath:()=>u.Rn,dateTime:()=>u.CQ,dateTimeAsMoment:()=>u.C_,dateTimeForTimeZone:()=>u.GY,dateTimeFormat:()=>u.dq,dateTimeFormatISO:()=>u.lf,dateTimeFormatTimeAgo:()=>u.E8,dateTimeFormatWithAbbrevation:()=>u.Fm,dateTimeParse:()=>u.J,decodeFieldValueEntities:()=>i.Jy,decodeFieldValueEnums:()=>i.Ib,deprecationWarning:()=>t.d9,displayNameOverrideProcessor:()=>o.W0,doStandardCalcs:()=>f.uP,durationToMilliseconds:()=>u.iX,ensureTimeField:()=>f.J_,escapeRegex:()=>r.yI,escapeStringForRegex:()=>r.GE,eventFactory:()=>m.Xw,fieldColorModeRegistry:()=>o.WO,fieldMatchers:()=>f.Ls,fieldReducers:()=>f.TB,filterFieldConfigOverrides:()=>E.aS,findCommonLabels:()=>t.FT,findHighlightChunksInText:()=>r.Xt,findMatchesInText:()=>r.lu,findUniqueLabels:()=>t.IU,fixCellTemplateExpressions:()=>o.r5,formatLabels:()=>t.aA,formattedValueToString:()=>d.zc,frameMatchers:()=>f.Ac,getActiveThreshold:()=>o.m1,getAllValuesFromDimension:()=>i.r7,getColumnFromDimension:()=>i.$q,getColumnsFromDimension:()=>i.GV,getDataFrameRow:()=>i.fh,getDataSourceRef:()=>t.iU,getDataSourceUID:()=>t.BT,getDimensionByName:()=>i.YP,getDisplayProcessor:()=>o.U_,getDisplayValueAlignmentFactors:()=>o.sg,getEnumDisplayProcessor:()=>o.je,getFieldColorMode:()=>o.QY,getFieldColorModeForField:()=>o.fD,getFieldConfigWithMinMax:()=>o.xD,getFieldDisplayName:()=>o.CZ,getFieldDisplayValues:()=>o.nG,getFieldDisplayValuesProxy:()=>o.zv,getFieldMatcher:()=>f.sq,getFieldSeriesColor:()=>o.YO,getFieldTypeFromValue:()=>i.DP,getFlotPairs:()=>t.k8,getFlotPairsConstant:()=>t.HE,getFrameDisplayName:()=>o.nf,getFrameMatchers:()=>f.b9,getHistogramFields:()=>f.qr,getLinksSupplier:()=>x.oB,getLocale:()=>u.Kd,getLocaleData:()=>u.k4,getMinMaxAndDelta:()=>o.dz,getPanelOptionsWithDefaults:()=>E.d4,getProcessedDataFrames:()=>i.F9,getRawDisplayProcessor:()=>o.gE,getScaleCalculator:()=>o.NI,getSeriesTimeStep:()=>t.e4,getTimeField:()=>i.sV,getTimeZone:()=>u.Ze,getTimeZoneGroups:()=>u.$8,getTimeZoneInfo:()=>u.Pr,getTimeZones:()=>u.ZV,getValueFormat:()=>d.Cf,getValueFormats:()=>d.QW,getValueFormatterIndex:()=>d.Td,getValueFromDimension:()=>i.jC,getValueMatcher:()=>f.IG,getWeekdayIndex:()=>u.ig,getWeekdayIndexByEnglishName:()=>u.jN,guessDecimals:()=>t.dP,guessFieldTypeForField:()=>i.fu,guessFieldTypeFromNameAndValue:()=>i._m,guessFieldTypeFromValue:()=>i.LI,guessFieldTypes:()=>i.SX,hasLinks:()=>o.gG,hasMsResolution:()=>t.fp,histogramBucketSizes:()=>f.Zi,histogramFieldInfo:()=>f.py,histogramFieldsToFrame:()=>f.zM,histogramFrameBucketMaxFieldName:()=>f.cO,histogramFrameBucketMinFieldName:()=>f.wL,histogramTransformer:()=>f.Op,identityOverrideProcessor:()=>o.kG,incrRound:()=>f.Jz,incrRoundDn:()=>f.mB,incrRoundUp:()=>f.UO,intervalToAbbreviatedDurationString:()=>u.vT,isBooleanUnit:()=>d.br,isCustomFieldProp:()=>E.Lc,isDataFrame:()=>i.aY,isDataSourcePluginContext:()=>D.v,isDataSourceRef:()=>t.cv,isDateTime:()=>u.v9,isDateTimeInput:()=>u.D2,isEmptyObject:()=>t.Qr,isHistogramFrameBucketMaxFieldName:()=>f.kl,isHistogramFrameBucketMinFieldName:()=>f.Ok,isLikelyAscendingVector:()=>f.lP,isStandardFieldProp:()=>E._k,isTableData:()=>i.Ji,isTimeSeriesFrame:()=>i.pP,isTimeSeriesFrames:()=>i.xI,isValidDate:()=>u.qb,isValidDuration:()=>u.jO,isValidGoDuration:()=>u.IA,localTimeFormat:()=>u.Ji,locale:()=>d.SP,locationUtil:()=>t.uT,makeClassES5Compatible:()=>t.s2,mapInternalLinkToExplore:()=>t._N,matchAllLabels:()=>t.VS,monacoLanguageRegistry:()=>p.F,numberOverrideProcessor:()=>o.Oh,objRemoveUndefined:()=>t.Hh,onUpdateDatasourceJsonDataOption:()=>t._R,onUpdateDatasourceJsonDataOptionChecked:()=>t.hz,onUpdateDatasourceJsonDataOptionSelect:()=>t.nx,onUpdateDatasourceOption:()=>t.z_,onUpdateDatasourceResetOption:()=>t.HD,onUpdateDatasourceSecureJsonDataOption:()=>t.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>t.TX,outerJoinDataFrames:()=>f.JP,parseDuration:()=>u.RA,parseFlags:()=>r.TL,parseLabels:()=>t.J8,preProcessPanelData:()=>i.zR,rangeUtil:()=>u.cT,readCSV:()=>t.uP,reduceField:()=>f.Kx,renderMarkdown:()=>r.ap,renderTextPanelMarkdown:()=>r.xH,restoreCustomOverrideRules:()=>E.__,reverseDataFrame:()=>i.Y6,roundDecimals:()=>t.O9,scaledUnits:()=>d.Qj,selectOverrideProcessor:()=>o.AE,serializeStateToUrlParam:()=>t.S,setLocale:()=>u.i_,setTimeZoneResolver:()=>u.K7,setWeekStart:()=>u.Ls,shallowCompare:()=>i.Vv,simpleCountUnit:()=>d.SR,sortDataFrame:()=>i.aK,sortThresholds:()=>o.bP,standardEditorsRegistry:()=>o.SO,standardFieldConfigEditorRegistry:()=>o.N6,standardTransformers:()=>f.YR,standardTransformersRegistry:()=>f.Ze,stringFormater:()=>d.vb,stringOverrideProcessor:()=>o.op,stringStartsAsRegEx:()=>r.oH,stringToJsRegex:()=>r.jO,stringToMs:()=>r.e0,systemDateFormats:()=>u.U6,textUtil:()=>r.QX,thresholdsOverrideProcessor:()=>o.ZN,timeZoneAbbrevation:()=>u.Hk,timeZoneFormatUserFriendly:()=>u.Vs,toCSV:()=>t.MJ,toDataFrame:()=>i.g0,toDataFrameDTO:()=>i.og,toDuration:()=>u.np,toFilteredDataFrameDTO:()=>i.Aw,toFixed:()=>d.FH,toFixedScaled:()=>d.bn,toFixedUnit:()=>d.q2,toFloatOrUndefined:()=>r.dz,toIntegerOrUndefined:()=>r.By,toLegacyResponseData:()=>i.Zr,toNumberString:()=>r.PF,toOption:()=>t.Er,toPascalCase:()=>r.Mh,toUtc:()=>u.zh,transformDataFrame:()=>f.Hz,unEscapeStringFromRegex:()=>r.x6,unitOverrideProcessor:()=>o.VB,updateDatasourcePluginJsonDataOption:()=>t.tp,updateDatasourcePluginOption:()=>t.fd,updateDatasourcePluginResetOption:()=>t.Mf,updateDatasourcePluginSecureJsonDataOption:()=>t.uw,urlUtil:()=>t.Cj,useFieldOverrides:()=>o.Cc,usePluginContext:()=>P.g,validateFieldConfig:()=>o.gb,valueMappingsOverrideProcessor:()=>o.uj,valueMatchers:()=>f.U8,vectorator:()=>s.sD,withLoadingIndicator:()=>t.xc});var t=e(39358),n=e(2263),c={};for(const M in n)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","anyToNumber","arrayUtils","binaryOperators","classicColors","convertOldAngularValueMappings","deprecationWarning","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","isEmptyObject","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","roundDecimals","serializeStateToUrlParam","toCSV","toOption","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(M)<0&&(c[M]=()=>n[M]);e.d(T,c);var s=e(50486),i=e(2033),f=e(13095),u=e(44540),r=e(63418),d=e(22078),o=e(99928),m=e(69616),l=e(99358),p=e(46646),g=e(82360),y=e(89974),v=e(36873),E=e(16936),h=e(59472),C=e(75363),a=e(47956),P=e(81129),D=e(58556),x=e(76095)},46646:(Y,T,e)=>{"use strict";e.d(T,{F:()=>t.F});var t=e(8488)},8488:(Y,T,e)=>{"use strict";e.d(T,{F:()=>n});var t=e(53908);const n=new t.B},36873:(Y,T,e)=>{"use strict";e.d(T,{c:()=>r});var t=e(82897),n=e.n(t),c=e(96949),s=e(59250),i=e(55024),f=e(91353),u=e(59472);class r extends s.Sg{constructor(o){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new c.Z,this.dataSupport={annotations:!1,alertStates:!1},this.panel=o}get defaults(){let o=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const m=new f.rt;this.optionsSupplier(m,{data:[]});for(const l of m.getItems())l.defaultValue!=null&&(0,t.set)(o,l.path,l.defaultValue)}return o}get fieldConfigDefaults(){const o=this._fieldConfigDefaults.defaults;o.custom={};for(const m of this.fieldConfigRegistry.list())m.defaultValue!==void 0&&(0,t.set)(o,m.id,m.defaultValue);return{defaults:{...o},overrides:this._fieldConfigDefaults.overrides}}setDefaults(o){return(0,i.d)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=o,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(o){return(0,i.d)("PanelPlugin","setEditor","setPanelOptions"),this.editor=o,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(o){return this.onPanelMigration=o,this}setPanelChangeHandler(o){return this.onPanelTypeChanged=o,this}setPanelOptions(o){return this.optionsSupplier=o,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(o){return this.dataSupport={...this.dataSupport,...o},this}useFieldConfig(o={}){return this._initConfigRegistry=()=>(0,u.j)(o,this.meta.name),this}setSuggestionsSupplier(o){return this.suggestionsSupplier=o,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(o){return this.meta.id===o}}},16936:(Y,T,e)=>{"use strict";e.d(T,{Lc:()=>g,__:()=>p,_k:()=>y,aS:()=>d,d4:()=>u});var t=e(82897),n=e.n(t),c=e(72990),s=e(53768),i=e(3947),f=e(69098);function u({plugin:v,currentOptions:E,currentFieldConfig:h,isAfterPluginChange:C}){const a=(0,t.mergeWith)({},v.defaults,E||{},(x,M)=>{if((0,t.isArray)(M))return M}),P=r(h,v),D=m(v,P,C);return{options:a,fieldConfig:D}}function r(v,E){const h=E.fieldConfigDefaults,C={defaults:(0,t.mergeWith)({},h.defaults,v?v.defaults:{},(a,P)=>{if((0,t.isArray)(P))return P}),overrides:v?.overrides??[]};o(C.defaults,"",E.fieldConfigRegistry),C.defaults.thresholds&&l(C.defaults.thresholds),C.overrides=d(C.overrides,a=>E.fieldConfigRegistry.getIfExists(a.id)!==void 0);for(const a of C.overrides)for(const P of a.properties)P.id==="thresholds"&&l(P.value);return C}function d(v,E){return v.map(h=>{const C=h.properties.filter(E);return{...h,properties:C}}).filter(h=>h.properties.length>0)}function o(v,E,h){let C=!1;for(const a of Object.keys(v)){const P=v[a],D=`${E}${a}`,x=!!h.getIfExists(D);if(x){C=!0;continue}(0,t.isArray)(P)||!(0,t.isObject)(P)?x||(0,t.unset)(v,a):o(P,`${D}.`,h)||(0,t.unset)(v,a)}return C}function m(v,E,h){if(!h)return E;const C=v.fieldConfigRegistry.getIfExists(i.qb.Color);if(C&&C.settings){const a=C.settings,P=c.WO.getIfExists(E.defaults.color?.mode);if(!a.byValueSupport&&(!P||P.isByValue))return E.defaults.color={mode:s.S.PaletteClassic},E;if(a.byValueSupport&&a.preferThresholdsMode&&P?.id!==s.S.Fixed&&(!P||!P.isByValue))return E.defaults.color={mode:s.S.Thresholds},E;if(a.bySeriesSupport&&P?.isByValue)return E.defaults.color={mode:s.S.PaletteClassic},E}return E}function l(v){v.mode||(v.mode=f.H.Absolute),v.steps?v.steps.length&&(v.steps[0].value=-1/0):v.steps=[]}function p(v,E){const h={defaults:{...v.defaults,custom:E.defaults.custom},overrides:[...v.overrides]};for(const C of E.overrides)for(const a of C.properties)if(g(a)){const P=h.overrides.find(D=>(0,t.isEqual)(D.matcher,C.matcher));P?P!==C&&P.properties.push(a):h.overrides.push(C)}return h}function g(v){return v.id.startsWith("custom.")}function y(v){return!g(v)}},59472:(Y,T,e)=>{"use strict";e.d(T,{j:()=>s});var t=e(96949),n=e(30779),c=e(91353);function s(f={},u){const r=new t.Z,d=n.N.list(),o={};if(f.useCustomConfig){const m=new c.vo;f.useCustomConfig(m);for(const l of m.getRegistry().list())if(l.isCustom=!0,l.id="custom."+l.id,i(l,d)){const p=o[l.category[0]]??[];p.push(l),o[l.category[0]]=p}else r.register(l)}for(let m of d)if(!(f.disableStandardOptions&&f.disableStandardOptions.indexOf(m.id)>-1)){if(f.standardOptions){const l=f.standardOptions[m.id]?.defaultValue,p=f.standardOptions[m.id]?.settings;l&&(m={...m,defaultValue:l}),p&&(m={...m,settings:m.settings?{...m.settings,...p}:p})}if(r.register(m),m.category&&o[m.category[0]])for(let l of o[m.category[0]])r.register(l)}for(const m of r.list())if(m.path.indexOf("[")>0)throw new Error(`[${u}] Field config paths do not support arrays: ${m.id}`);return r}function i(f,u){return Boolean(u.find(r=>f.category&&r.category&&f.category[0]===r.category[0]))}},63418:(Y,T,e)=>{"use strict";e.d(T,{By:()=>t.By,GE:()=>t.GE,Mh:()=>t.Mh,PF:()=>t.PF,QX:()=>i,TL:()=>c.TL,Xt:()=>c.Xt,ap:()=>n.a,dz:()=>t.dz,e0:()=>t.e0,jO:()=>t.jO,lu:()=>c.lu,oH:()=>t.oH,x6:()=>t.x6,xH:()=>n.x,yI:()=>t.yI});var t=e(79086),n=e(2631),c=e(52216),s=e(95304);const i={escapeHtml:s.Xv,hasAnsiCodes:s.oT,sanitize:s.Nw,sanitizeTextPanelContent:s.he,sanitizeUrl:s.Nm,sanitizeSVGContent:s.Is,sanitizeTrustedTypes:s.cd,sanitizeTrustedTypesRSS:s.pQ}},2631:(Y,T,e)=>{"use strict";e.d(T,{a:()=>i,x:()=>f});var t=e(27986),n=e(95304);let c=!1;const s={pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1,breaks:!1};function i(u,r){c||(t.TU.setOptions({...s}),c=!0);let d;r?.breaks&&(d={...s,breaks:!0});const o=(0,t.TU)(u||"",d);return r?.noSanitize?o:(0,n.he)(o)}function f(u,r){c||(t.TU.setOptions({...s}),c=!0);const d=(0,t.TU)(u||"");return r?.noSanitize?d:(0,n.he)(d)}},95304:(Y,T,e)=>{"use strict";e.d(T,{Is:()=>l,Nm:()=>p,Nw:()=>r,Xv:()=>y,cd:()=>o,he:()=>m,oT:()=>g,pQ:()=>d});var t=e(2397),n=e(97692),c=e.n(n),s=e(99731),i=e.n(s);const f=Object.keys(s.whiteList).reduce((v,E)=>(v[E]=s.whiteList[E]?.concat(["class","style"]),v),{}),u=new s.FilterXSS({whiteList:f,css:{whiteList:{...s.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function r(v){try{return c().sanitize(v,{USE_PROFILES:{html:!0},FORBID_TAGS:["form","input"]})}catch{return console.error("String could not be sanitized",v),y(v)}}function d(v){return c().sanitize(v,{RETURN_TRUSTED_TYPE:!0,ADD_ATTR:["xmlns:atom","version","property","content"],ADD_TAGS:["rss","meta","channel","title","link","description","atom:link","item","pubDate","guid"],PARSER_MEDIA_TYPE:"application/xhtml+xml"})}function o(v){return c().sanitize(v,{RETURN_TRUSTED_TYPE:!0})}function m(v){try{return u.process(v)}catch{return console.error("String could not be sanitized",v),"Text string could not be sanitized"}}function l(v){return c().sanitize(v,{USE_PROFILES:{svg:!0,svgFilters:!0}})}function p(v){return(0,t.N)(v)}function g(v){return/\u001b\[\d{1,2}m/.test(v)}function y(v){return String(v).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}},79086:(Y,T,e)=>{"use strict";e.d(T,{By:()=>p,GE:()=>u,Mh:()=>y,PF:()=>l,dz:()=>g,e0:()=>m,jO:()=>o,oH:()=>d,x6:()=>r,yI:()=>v});var t=e(82897),n=e.n(t);const s="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",i=new RegExp(s,"g"),f=new RegExp("(\\\\)"+s,"g");function u(E){return E&&E.replace(i,"\\$1")}function r(E){return E&&E.replace(f,"$2")}function d(E){return E?E[0]==="/":!1}function o(E){if(!d(E))return new RegExp(`^${E}$`);const h=E.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!h)throw new Error(`'${E}' is not a valid regular expression.`);return new RegExp(h[1],h[2])}function m(E){if(!E)return 0;const h=parseInt(E,10),C=E.slice(String(h).length),a=1e3,P=a*60,D=P*60,x=D*24;switch(C){case"s":return h*a;case"m":return h*P;case"h":return h*D;case"d":return h*x;default:if(!C)return isNaN(h)?0:h;throw new Error("Not supported unit: "+C)}}function l(E){return E!=null&&Number.isFinite(E)?E.toString():""}function p(E){if(!E)return;const h=parseInt(E,10);return isNaN(h)?void 0:h}function g(E){if(!E)return;const h=parseFloat(E);return isNaN(h)?void 0:h}function y(E){const h=(0,t.camelCase)(E);return h.charAt(0).toUpperCase()+h.substring(1)}function v(E){return E.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},52216:(Y,T,e)=>{"use strict";e.d(T,{TL:()=>f,Xt:()=>t,lu:()=>c});function t({searchWords:u,textToHighlight:r}){const d=[];for(const o of u)d.push(...c(r,o));return d}const n=u=>u.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function c(u,r){if(!u||!r)return[];const d=[],{cleaned:o,flags:m}=f(n(r));let l;try{l=new RegExp(`(?:${o})`,m)}catch{return d}return u.replace(l,(p,...g)=>{if(p){const y=g[g.length-2];d.push({text:p,start:y,length:p.length,end:y+p.length})}return""}),d}const s="-",i=/\(\?([ims-]+)\)/g;function f(u){const r=new Set(["g"]);return{cleaned:u.replace(i,(o,m)=>{const l=m.startsWith(s);for(let p=0;p<m.length;++p){const g=m.charAt(p);l||m.charAt(p-1)===s?r.delete(g):g!==s&&r.add(g)}return""}),flags:Array.from(r).join("")}}},5680:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{alpha:()=>g,asHexString:()=>f,asRgbString:()=>u,darken:()=>y,decomposeColor:()=>d,emphasize:()=>p,getContrastRatio:()=>m,getLuminance:()=>l,hexToRgb:()=>c,hslToRgb:()=>r,lighten:()=>v,recomposeColor:()=>o,rgbToHex:()=>i});var t=e(28550);function n(E,h=0,C=1){return Math.min(Math.max(h,E),C)}function c(E){E=E.slice(1);const h=new RegExp(`.{1,${E.length>=6?2:1}}`,"g");let C=E.match(h);return C&&C[0].length===1&&(C=C.map(a=>a+a)),C?`rgb${C.length===4?"a":""}(${C.map((a,P)=>P<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function s(E){const h=E.toString(16);return h.length===1?`0${h}`:h}function i(E){if(E.indexOf("#")===0)return E;const{values:h}=d(E);return`#${h.map(C=>s(C)).join("")}`}function f(E){if(E[0]==="#")return E;const h=(0,t.Z)(E);return h.getAlpha()===1?h.toHexString():h.toHex8String()}function u(E){return E.startsWith("rgb")?E:(0,t.Z)(E).toRgbString()}function r(E){const h=d(E),{values:C}=h,a=C[0],P=C[1]/100,D=C[2]/100,x=P*Math.min(D,1-D),M=(S,O=(S+a/30)%12)=>D-x*Math.max(Math.min(O-3,9-O,1),-1);let b="rgb";const R=[Math.round(M(0)*255),Math.round(M(8)*255),Math.round(M(4)*255)];return h.type==="hsla"&&(b+="a",R.push(C[3])),o({type:b,values:R})}function d(E){if(typeof E!="string")return E;if(E.charAt(0)==="#")return d(c(E));const h=E.indexOf("("),C=E.substring(0,h);if(["rgb","rgba","hsl","hsla","color"].indexOf(C)===-1)throw new Error(`Unsupported '${E}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let a=E.substring(h+1,E.length-1),P;if(C==="color"){if(a=a.split(" "),P=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(P)===-1)throw new Error(`Unsupported ${P} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else a=a.split(",");return a=a.map(D=>parseFloat(D)),{type:C,values:a,colorSpace:P}}function o(E){const{type:h,colorSpace:C}=E;let a=E.values;return h.indexOf("rgb")!==-1?a=a.map((P,D)=>D<3?parseInt(P,10):P):h.indexOf("hsl")!==-1&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),h.indexOf("color")!==-1?a=`${C} ${a.join(" ")}`:a=`${a.join(", ")}`,`${h}(${a})`}function m(E,h,C){const a=l(E),P=l(h,C);return(Math.max(a,P)+.05)/(Math.min(a,P)+.05)}function l(E,h){const C=d(E);let a=C.type==="hsl"?d(r(E)).values:C.values;if(h&&C.type==="rgba"){const D=d(h),x=a[3];a[0]=a[0]*x+D.values[0]*(1-x),a[1]=a[1]*x+D.values[1]*(1-x),a[2]=a[2]*x+D.values[2]*(1-x)}const P=a.map(D=>(C.type!=="color"&&(D/=255),D<=.03928?D/12.92:((D+.055)/1.055)**2.4));return Number((.2126*P[0]+.7152*P[1]+.0722*P[2]).toFixed(3))}function p(E,h=.15){return l(E)>.5?y(E,h):v(E,h)}function g(E,h){if(E==="")return"#000000";if(h=n(h),E[0]==="#"){if(E.length===9)E=E.substring(0,7);else if(E.length<=5){let a="#";for(let P=1;P<4;P++)a+=E[P]+E[P];E=a}return E+Math.round(h*255).toString(16).padStart(2,"0")}else{if(E[3]==="(")return E.replace(")",`, ${h})`);if(E[4]==="(")return E.substring(0,E.lastIndexOf(","))+`, ${h})`}const C=d(E);return C.type==="color"?C.values[3]=`/${h}`:C.values[3]=h,o(C)}function y(E,h){const C=d(E);if(h=n(h),C.type.indexOf("hsl")!==-1)C.values[2]*=1-h;else if(C.type.indexOf("rgb")!==-1||C.type.indexOf("color")!==-1)for(let a=0;a<3;a+=1)C.values[a]*=1-h;return o(C)}function v(E,h){const C=d(E);if(h=n(h),C.type.indexOf("hsl")!==-1)C.values[2]+=(100-C.values[2])*h;else if(C.type.indexOf("rgb")!==-1)for(let a=0;a<3;a+=1)C.values[a]+=(255-C.values[a])*h;else if(C.type.indexOf("color")!==-1)for(let a=0;a<3;a+=1)C.values[a]+=(1-C.values[a])*h;return o(C)}},21544:(Y,T,e)=>{"use strict";e.d(T,{j:()=>w});function t(){const L=["xs","sm","md","lg","xl","xxl"],V="px",H={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function j(_){return`@media (min-width:${typeof _=="number"?_:H[_]}${V})`}function A(_){return`@media (max-width:${(typeof _=="number"?_:H[_])-5/100}${V})`}return{values:H,up:j,down:A,keys:L,unit:V}}var n=e(82897),c=e(5680);const s={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#FF9900",orangeDarkText:"#fbad37",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FF9900",orangeLightText:"#B5510D"};class i{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.12)`,medium:`rgba(${this.whiteBase}, 0.20)`,strong:`rgba(${this.whiteBase}, 0.30)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:s.blueDarkText,maxContrast:s.white},this.primary={main:s.blueDarkMain,text:s.blueDarkText,border:s.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.10)`,shade:`rgba(${this.whiteBase}, 0.14)`,transparent:`rgba(${this.whiteBase}, 0.08)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:`rgba(${this.whiteBase}, 0.08)`},this.info=this.primary,this.error={main:s.redDarkMain,text:s.redDarkText},this.success={main:s.greenDarkMain,text:s.greenDarkText},this.warning={main:s.orangeDarkMain,text:s.orangeDarkText},this.background={canvas:s.gray05,primary:s.gray10,secondary:s.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class f{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:s.blueLightMain,border:s.blueLightText,text:s.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:s.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.08)`,shade:`rgba(${this.blackBase}, 0.15)`,transparent:`rgba(${this.blackBase}, 0.08)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.weak},this.info={main:s.blueLightMain,text:s.blueLightText},this.error={main:s.redLightMain,text:s.redLightText,border:s.redLightText},this.success={main:s.greenLightMain,text:s.greenLightText},this.warning={main:s.orangeLightMain,text:s.orangeLightText},this.background={canvas:s.gray90,primary:s.white,secondary:s.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function u(K){const L=new i,V=new f,H=(K.mode??"dark")==="dark"?L:V,{primary:j=H.primary,secondary:A=H.secondary,info:_=H.info,warning:k=H.warning,success:Q=H.success,error:re=H.error,tonalOffset:Z=H.tonalOffset,hoverFactor:oe=H.hoverFactor,contrastThreshold:G=H.contrastThreshold,...le}=K;function ge(ue,te=G){return(0,c.getContrastRatio)(L.text.maxContrast,ue,H.background.primary)>=te?L.text.maxContrast:V.text.maxContrast}const ne=({color:ue,name:te})=>{if(ue={...ue,name:te},!ue.main)throw new Error(`Missing main color for ${te}`);return ue.text||(ue.text=ue.main),ue.border||(ue.border=ue.text),ue.shade||(ue.shade=H.mode==="light"?(0,c.darken)(ue.main,Z):(0,c.lighten)(ue.main,Z)),ue.transparent||(ue.transparent=(0,c.alpha)(ue.main,.15)),ue.contrastText||(ue.contrastText=ge(ue.main)),ue};return(0,n.merge)({...H,primary:ne({color:j,name:"primary"}),secondary:ne({color:A,name:"secondary"}),info:ne({color:_,name:"info"}),error:ne({color:re,name:"error"}),success:ne({color:Q,name:"success"}),warning:ne({color:k,name:"warning"}),getContrastText:ge,emphasize:(ue,te)=>(0,c.emphasize)(ue,te??oe)},le)}function r(K,L){const V={padding:1,headerHeight:4,background:K.background.primary,borderColor:K.border.weak,boxShadow:"none"},H={borderColor:K.border.medium,borderHover:K.border.strong,text:K.text.primary,background:K.mode==="dark"?K.background.canvas:K.background.primary};return{height:{sm:3,md:4,lg:6},input:H,panel:V,dropdown:{background:H.background},tooltip:{background:K.background.secondary,text:K.text.primary},dashboard:{background:K.background.canvas,padding:1},overlay:{background:K.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:41},textHighlight:{text:K.warning.contrastText,background:K.warning.main},horizontalDrawer:{defaultHeight:400},table:{rowHoverBackground:K.emphasize(K.background.primary,.03)}}}function d(K){return K.mode==="dark"?{z1:"0px 1px 2px rgba(1, 4, 9, 0.75)",z2:"0px 4px 8px rgba(1, 4, 9, 0.75)",z3:"0px 8px 24px rgb(1, 4, 9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function o(K){const L=K.borderRadius??2;return{radius:{default:"2px",pill:"9999px",circle:"100%"},borderRadius:j=>`${(j??1)*L}px`}}function m(K={}){const{gridSize:L=8}=K,V=j=>typeof j=="string"?j:j*L,H=(...j)=>(j.length===0&&(j[0]=1),j.map(A=>{const _=V(A);return typeof _=="number"?`${_}px`:_}).join(" "));return H.gridSize=L,H}const l={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},p={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function g(K=["all"],L={}){const{duration:V=p.standard,easing:H=l.easeInOut,delay:j=0}=L;return(Array.isArray(K)?K:[K]).map(A=>`${A} ${typeof V=="string"?V:v(V)} ${H} ${typeof j=="string"?j:v(j)}`).join(",")}function y(K){if(!K)return 0;const L=K/36;return Math.round((4+15*L**.25+L/5)*10)}function v(K){return`${Math.round(K)}ms`}function E(){return{create:g,duration:p,easing:l,getAutoHeightDuration:y}}const h='"Inter", "Helvetica", "Arial", sans-serif',C="'Roboto Mono', monospace";function a(K,L={}){const{fontFamily:V=h,fontFamilyMonospace:H=C,fontSize:j=14,fontWeightLight:A=300,fontWeightRegular:_=400,fontWeightMedium:k=500,fontWeightBold:Q=500,htmlFontSize:re=14}=L,Z=j/14,oe=ne=>`${ne/re*Z}rem`,G=(ne,ue,te,me,q)=>{if(te%2!==0||ue%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:V,fontWeight:ne,fontSize:oe(ue),lineHeight:te/ue,...V===h?{letterSpacing:`${P(me/ue)}em`}:{},...q}},le={h1:G(_,28,32,-.25),h2:G(_,24,28,0),h3:G(_,22,24,0),h4:G(_,18,22,.25),h5:G(_,16,22,0),h6:G(k,14,22,.15),body:G(_,j,22,.15),bodySmall:G(_,12,18,.15)};return{htmlFontSize:re,pxToRem:oe,fontFamily:V,fontFamilyMonospace:H,fontSize:j,fontWeightLight:A,fontWeightRegular:_,fontWeightMedium:k,fontWeightBold:Q,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...le}}function P(K){return Math.round(K*1e5)/1e5}var D=e(33536);function x(K){const L={name:"Grafana Default",typography:{fontFamily:{sansSerif:K.typography.fontFamily,monospace:K.typography.fontFamilyMonospace},size:{base:`${K.typography.fontSize}px`,xs:K.typography.size.xs,sm:K.typography.size.sm,md:K.typography.size.md,lg:K.typography.size.lg},heading:{h1:K.typography.h1.fontSize,h2:K.typography.h2.fontSize,h3:K.typography.h3.fontSize,h4:K.typography.h4.fontSize,h5:K.typography.h5.fontSize,h6:K.typography.h6.fontSize},weight:{light:K.typography.fontWeightLight,regular:K.typography.fontWeightRegular,semibold:K.typography.fontWeightMedium,bold:K.typography.fontWeightBold},lineHeight:{xs:K.typography.bodySmall.lineHeight,sm:K.typography.bodySmall.lineHeight,md:K.typography.body.lineHeight,lg:K.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${K.breakpoints.values.xs}px`,sm:`${K.breakpoints.values.sm}px`,md:`${K.breakpoints.values.md}px`,lg:`${K.breakpoints.values.lg}px`,xl:`${K.breakpoints.values.xl}px`,xxl:`${K.breakpoints.values.xxl}px`},spacing:{base:K.spacing.gridSize,insetSquishMd:K.spacing(.5,1),d:K.spacing(2),xxs:K.spacing(.25),xs:K.spacing(.5),sm:K.spacing(1),md:K.spacing(2),lg:K.spacing(3),xl:K.spacing(4),gutter:K.spacing(4),formSpacingBase:K.spacing.gridSize,formMargin:`${K.spacing.gridSize*4}px`,formFieldsetMargin:`${K.spacing.gridSize*2}px`,formInputHeight:K.spacing.gridSize*4,formButtonHeight:K.spacing.gridSize*4,formInputPaddingHorizontal:`${K.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${K.spacing.gridSize/2}px`,formInputMargin:`${K.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${K.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:K.shape.borderRadius(1),md:K.shape.borderRadius(2),lg:K.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:K.spacing.gridSize*K.components.height.sm,md:K.spacing.gridSize*K.components.height.md,lg:K.spacing.gridSize*K.components.height.lg},panelPadding:K.components.panel.padding*K.spacing.gridSize,panelHeaderHeight:K.spacing.gridSize*K.components.panel.headerHeight,zIndex:K.zIndex},V={...M,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},H={bg1:K.colors.background.primary,bg2:K.colors.background.secondary,bg3:K.colors.action.hover,dashboardBg:K.colors.background.canvas,bgBlue1:K.colors.primary.main,bgBlue2:K.colors.primary.shade},j={border1:K.colors.border.weak,border2:K.colors.border.medium,border3:K.colors.border.strong},A={textStrong:K.colors.text.maxContrast,textHeading:K.colors.text.primary,text:K.colors.text.primary,textSemiWeak:K.colors.text.secondary,textWeak:K.colors.text.secondary,textFaint:K.colors.text.disabled,textBlue:K.colors.primary.text},_={formLabel:K.colors.text.primary,formDescription:K.colors.text.secondary,formInputBg:K.components.input.background,formInputBgDisabled:K.colors.action.disabledBackground,formInputBorder:K.components.input.borderColor,formInputBorderHover:K.components.input.borderHover,formInputBorderActive:K.colors.primary.border,formInputBorderInvalid:K.colors.error.border,formInputPlaceholderText:K.colors.text.disabled,formInputText:K.components.input.text,formInputDisabledText:K.colors.action.disabledText,formFocusOutline:K.colors.primary.main,formValidationMessageText:K.colors.error.contrastText,formValidationMessageBg:K.colors.error.main};return{...L,type:K.colors.mode==="dark"?D.Q.Dark:D.Q.Light,isDark:K.isDark,isLight:K.isLight,name:K.name,palette:{...V,brandPrimary:V.orange,brandSuccess:K.colors.success.main,brandWarning:K.colors.warning.main,brandDanger:K.colors.error.main,queryRed:K.colors.error.text,queryGreen:K.colors.success.text,queryPurple:"#fe85fc",queryOrange:V.orange,online:K.colors.success.main,warn:K.colors.success.main,critical:K.colors.success.main},colors:{...H,...j,..._,...A,bodyBg:K.colors.background.canvas,panelBg:K.components.panel.background,panelBorder:K.components.panel.borderColor,pageHeaderBg:K.colors.background.canvas,pageHeaderBorder:K.colors.background.canvas,dropdownBg:_.formInputBg,dropdownShadow:V.black,dropdownOptionHoverBg:H.bg2,link:K.colors.text.primary,linkDisabled:K.colors.text.disabled,linkHover:K.colors.text.maxContrast,linkExternal:K.colors.text.link},shadows:{listItem:"none"},visualization:K.visualization}}const M={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var b=e(53768);function R(K){const L=K.mode==="light"?O():S(),V={};for(const A of L)for(const _ of A.shades)if(V[_.name]=_.color,_.aliases)for(const k of _.aliases)V[k]=_.color;V.transparent="rgba(0,0,0,0)",V["panel-bg"]=K.background.primary,V.text=K.text.primary;const H=A=>{if(!A)return b.R;const _=V[A];if(_)return _;if(A[0]==="#"||A.indexOf("rgb")>-1)return A;const k=I[A.toLowerCase()];return k?(V[A]=k,k):A},j=U();return{hues:L,palette:j,getColorByName:H}}function S(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function O(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function U(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const I={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},F={navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function w(K={}){const{colors:L={},spacing:V={},shape:H={},typography:j={}}=K,A=u(L),_=t(),k=m(V),Q=o(H),re=a(A,j),Z=d(A),oe=E(),G=r(A,Z),le=R(A),ge={name:A.mode==="dark"?"Dark":"Light",isDark:A.mode==="dark",isLight:A.mode==="light",colors:A,breakpoints:_,spacing:k,shape:Q,components:G,typography:re,shadows:Z,transitions:oe,visualization:le,zIndex:{...F},flags:{}};return{...ge,v1:x(ge)}}},99358:(Y,T,e)=>{"use strict";e.d(T,{j:()=>t.j,r:()=>n});var t=e(21544),n=e(5680)},33750:(Y,T,e)=>{"use strict";e.d(T,{Kx:()=>u,TB:()=>r,gz:()=>f,uP:()=>d});var t=e(82897),n=e.n(t),c=e(52666),s=e(99098),i=e(53908),f=(E=>(E.sum="sum",E.max="max",E.min="min",E.logmin="logmin",E.mean="mean",E.variance="variance",E.stdDev="stdDev",E.last="last",E.first="first",E.count="count",E.range="range",E.diff="diff",E.diffperc="diffperc",E.delta="delta",E.step="step",E.firstNotNull="firstNotNull",E.lastNotNull="lastNotNull",E.changeCount="changeCount",E.distinctCount="distinctCount",E.allIsZero="allIsZero",E.allIsNull="allIsNull",E.allValues="allValues",E.uniqueValues="uniqueValues",E))(f||{});function u(E){const{field:h,reducers:C}=E;if(!h||!C||C.length<1)return{};if(h.state?.calcs){const R=[];for(const S of C)h.state.calcs.hasOwnProperty(S)||R.push(S);if(R.length<1)return{...h.state.calcs}}h.state||(h.state={});const a=r.list(C);if(h.values.length<1){const R={...h.state.calcs};for(const S of a)R[S.id]=S.emptyInputResult!==null?S.emptyInputResult:null;return h.state.calcs=R}const{nullValueMode:D}=h.config,x=D===c.Gl.Ignore,M=D===c.Gl.AsZero;if(a.length===1&&a[0].reduce){const R=a[0].reduce(h,x,M);return h.state.calcs={...h.state.calcs,...R},R}let b=d(h,x,M);for(const R of a)!b.hasOwnProperty(R.id)&&R.reduce&&(b={...b,...R.reduce(h,x,M)});return h.state.calcs={...h.state.calcs,...b},b}const r=new i.B(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value",standard:!0,aliasIds:["current"],reduce:p},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:l},{id:"firstNotNull",name:"First *",description:"First non-null value",standard:!0,reduce:m},{id:"first",name:"First",description:"First Value",standard:!0,reduce:o},{id:"min",name:"Min",description:"Minimum Value",standard:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:g},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:g},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:y},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:v},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:E=>({allValues:E.values})},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:E=>({uniqueValues:[...new Set(E.values)]})}]);function d(E,h,C){const a={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0},P=E.values;a.count=h?P.length:P.filter(x=>x!=null).length;const D=E.type===s.fS.number||s.fS.time;for(let x=0;x<P.length;x++){let M=P[x];if(x===0&&(a.first=M),a.last=M,M===null){if(h)continue;C&&(M=0)}if(M!=null){const b=a.firstNotNull===null;if(b&&(a.firstNotNull=M),D){if(a.sum+=M,a.allIsNull=!1,a.nonNullCount++,!b){const R=M-a.lastNotNull;a.step>R&&(a.step=R),a.lastNotNull>M?(a.previousDeltaUp=!1,x===P.length-1&&(a.delta+=M)):(a.previousDeltaUp?a.delta+=R:a.delta+=M,a.previousDeltaUp=!0)}M>a.max&&(a.max=M),M<a.min&&(a.min=M),M<a.logmin&&M>0&&(a.logmin=M)}M!==0&&(a.allIsZero=!1),a.lastNotNull=M}}return a.max===-Number.MAX_VALUE&&(a.max=null),a.min===Number.MAX_VALUE&&(a.min=null),a.step===Number.MAX_VALUE&&(a.step=null),a.nonNullCount>0&&(a.mean=a.sum/a.nonNullCount),a.allIsNull&&(a.allIsZero=!1),a.max!==null&&a.min!==null&&(a.range=a.max-a.min),(0,t.isNumber)(a.firstNotNull)&&(0,t.isNumber)(a.lastNotNull)&&(a.diff=a.lastNotNull-a.firstNotNull),(0,t.isNumber)(a.firstNotNull)&&(0,t.isNumber)(a.diff)&&(a.diffperc=a.diff/a.firstNotNull),a}function o(E,h,C){return{first:E.values[0]}}function m(E,h,C){const a=E.values;for(let P=0;P<a.length;P++){const D=a[P];if(D!=null&&D!==void 0)return{firstNotNull:D}}return{firstNotNull:null}}function l(E,h,C){const a=E.values;return{last:a[a.length-1]}}function p(E,h,C){const a=E.values;let P=a.length-1;for(;P>=0;){const D=a[P--];if(D!=null&&D!==void 0)return{lastNotNull:D}}return{lastNotNull:null}}function g(E,h,C){if(!(E.type===s.fS.number||E.type===s.fS.time))return{variance:0,stdDev:0};let a=0,P=0,D=0;const x=E.values;for(let M=0;M<x.length;M++){const b=x[M];if(b!=null){D++;let R=P;P+=(b-R)/D,a+=(b-R)*(b-P)}}if(D>0){const M=a/D;return{variance:M,stdDev:Math.sqrt(M)}}return{variance:0,stdDev:0}}function y(E,h,C){const a=E.values;let P=0,D=!0,x=null;for(let M=0;M<a.length;M++){let b=a[M];if(b===null){if(h)continue;C&&(b=0)}!D&&x!==b&&P++,D=!1,x=b}return{changeCount:P}}function v(E,h,C){const a=E.values,P=new Set;for(let D=0;D<a.length;D++){let x=a[D];if(x===null){if(h)continue;C&&(x=0)}P.add(x)}return{distinctCount:P.size}}},13095:(Y,T,e)=>{"use strict";e.d(T,{Ac:()=>c.Ac,E4:()=>t.E4,Ff:()=>t.Ff,Hz:()=>f.H,IG:()=>c.IG,JP:()=>d._9,J_:()=>m.J_,Jz:()=>o.Jz,Kx:()=>i.Kx,Ls:()=>c.Ls,Ok:()=>o.Ok,Op:()=>o.Op,TB:()=>i.TB,U8:()=>c.U8,UO:()=>o.UO,Wk:()=>n.W,YR:()=>s.Y,Ys:()=>r.Ys,Ze:()=>u.Z,Zi:()=>o.Zi,b9:()=>c.b9,cO:()=>o.cO,gY:()=>o.gY,gz:()=>i.gz,kl:()=>o.kl,lP:()=>d.lP,mB:()=>o.mB,mE:()=>t.mE,mi:()=>t.mi,py:()=>o.py,qr:()=>o.qr,sq:()=>c.sq,uP:()=>i.uP,wL:()=>o.wL,zM:()=>o.zM});var t=e(90748),n=e(13512),c=e(50035),s=e(50928),i=e(33750),f=e(13946),u=e(2653),r=e(73567),d=e(17587),o=e(75133),m=e(49052)},50035:(Y,T,e)=>{"use strict";e.d(T,{Ac:()=>g,IG:()=>h,Ls:()=>p,U8:()=>y,b9:()=>E,sq:()=>v});var t=e(53908),n=e(60096),c=e(11733),s=e(73567),i=e(33369),f=e(46933),u=e(71586),r=e(25249),d=e(16176),o=e(97792),m=e(88254),l=e(66088);const p=new t.B(()=>[...(0,i.Ty)(),...(0,n.N)(),...(0,s.Lk)(),...(0,u.z)(),c.b]),g=new t.B(()=>[...(0,i.fX)(),...(0,s.cC)(),...(0,f.n)()]),y=new t.B(()=>[...(0,d.a)(),...(0,o.H)(),...(0,r.T)(),...(0,m.G)(),...(0,l.G)()]);function v(C){const a=p.get(C.id);if(!a)throw new Error("Unknown field matcher: "+C.id);return a.get(C.options)}function E(C){const a=g.get(C.id);if(!a)throw new Error("Unknown frame matcher: "+C.id);return a.get(C.options)}function h(C){const a=y.get(C.id);if(!a)throw new Error("Unknown value matcher: "+C.id);return a.get(C.options)}},73567:(Y,T,e)=>{"use strict";e.d(T,{Lk:()=>g,Ys:()=>i,cC:()=>y});var t=e(30471),n=e(79086),c=e(99098),s=e(90748),i=(v=>(v.exclude="exclude",v.include="include",v))(i||{});const f={id:s.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:v=>{const h=r(new Set([v]));return(C,a,P)=>v===C.name||v===(0,t.CZ)(C,a,P)||Boolean(h&&h(C,a,P))},getOptionsDisplayText:v=>`Field name: ${v}`},u={id:s.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:v=>{const{names:E,mode:h="include"}=v,C=new Set(E??[]),a=r(C),P=(D,x,M)=>C.has(D.name)||C.has((0,t.CZ)(D,x,M))||Boolean(a&&a(D,x,M));return h==="exclude"?(D,x,M)=>!P(D,x,M):P},getOptionsDisplayText:v=>{const{names:E,mode:h}=v,C=(E??[]).join(", ");return h==="exclude"?`All except: ${C}`:`All of: ${C}`}};function r(v){let E;return window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback&&(v.has(c.M5)?E=(C,a)=>Boolean(C.labels)&&C.labels?.__name__===C.name:(v.has("Time")||v.has("time"))&&(E=(C,a)=>a.meta?.typeVersion==null&&C.type===c.fS.time)),E}const d={id:s.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:v=>{const E=l(v);return(h,C,a)=>{const P=(0,t.CZ)(h,C,a);return!!E&&E.test(P)}},getOptionsDisplayText:v=>`Field name by pattern: ${v}`},o={id:s.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:v=>(E,h,C)=>h.refId===v,getOptionsDisplayText:v=>`Math all fields returned by query with reference ID: ${v}`},m={id:s.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:v=>{const E=d.get(v?.pattern||""),h=u.get({mode:"include",names:v?.names??[]});return(C,a,P)=>h(C,a,P)||E(C,a,P)},getOptionsDisplayText:v=>{const E=v?.pattern??"",h=v?.names?.join(",")??"";return`Field name by pattern: ${E} or names: ${h}`}},l=v=>{if(v)try{return(0,n.jO)(v)}catch(E){console.error(E);return}},p={id:s.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:v=>{const E=(0,n.jO)(v);return h=>E.test(h.name||"")},getOptionsDisplayText:v=>`Frame name: ${v}`};function g(){return[f,d,u,m,o]}function y(){return[p]}},33369:(Y,T,e)=>{"use strict";e.d(T,{Qw:()=>p,Ty:()=>C,fX:()=>a,m3:()=>o});var t=e(99098),n=e(50035),c=e(90748);const s={id:c.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const D=P.map(x=>(0,n.sq)(x));return(x,M,b)=>{for(const R of D)if(R(x,M,b))return!0;return!1}},getOptionsDisplayText:P=>{let D="";for(const x of P){D.length>0&&(D+=" OR ");const M=n.Ls.get(x.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(x):M.name}return D}},i={id:c.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const D=P.map(x=>(0,n.b9)(x));return x=>{for(const M of D)if(M(x))return!0;return!1}},getOptionsDisplayText:P=>{let D="";for(const x of P){D.length>0&&(D+=" OR ");const M=n.Ac.get(x.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(x):M.name}return D}},f={id:c.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const D=P.map(x=>(0,n.sq)(x));return(x,M,b)=>{for(const R of D)if(!R(x,M,b))return!1;return!0}},getOptionsDisplayText:P=>{let D="";for(const x of P){D.length>0&&(D+=" AND ");const M=n.Ls.get(x.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(x):M.name}return D}},u={id:c.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const D=P.map(x=>(0,n.b9)(x));return x=>{for(const M of D)if(!M(x))return!1;return!0}},getOptionsDisplayText:P=>{let D="";for(const x of P){D.length>0&&(D+=" AND ");const M=n.Ac.get(x.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(x):M.name}return D}},r={id:c.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:P=>{const D=(0,n.sq)(P);return(x,M,b)=>!D(x,M,b)},getOptionsDisplayText:P=>{const D=n.Ls.get(P.id);return"NOT "+(D.getOptionsDisplayText?D.getOptionsDisplayText(P.options):D.name)}},d={id:c.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:P=>{const D=(0,n.b9)(P);return x=>!D(x)},getOptionsDisplayText:P=>{const D=n.Ac.get(P.id);return"NOT "+(D.getOptionsDisplayText?D.getOptionsDisplayText(P.options):D.name)}},o=P=>!0,m=P=>!0,l=P=>!1,p=P=>P.type!==t.fS.time,g=P=>!1,y={id:c.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:P=>o,getOptionsDisplayText:P=>"Always"},v={id:c.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:P=>m,getOptionsDisplayText:P=>"Always"},E={id:c.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:P=>l,getOptionsDisplayText:P=>"Never"},h={id:c.Ff.neverMatch,name:"No Frames",description:"Never Match",get:P=>g,getOptionsDisplayText:P=>"Never"};function C(){return[s,f,r,y,E]}function a(){return[i,u,d,v,h]}},2653:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>n});var t=e(53908);const n=new t.B},13946:(Y,T,e)=>{"use strict";e.d(T,{H:()=>d});var t=e(59980),n=e(39859),c=e(9471),s=e(50035),i=e(2653);const f=(m,l)=>p=>{const g=i.Z.get(m.id);if(!g)return p;const v={...g.transformation.defaultOptions??{},...m.options},E=m.filter?.options?(0,s.b9)(m.filter):void 0;return p.pipe((0,n.z)(h=>(0,t.of)(u(h,E)).pipe(g.transformation.operator(v,l),r(h,g,E))))};function u(m,l){return l?m.filter(p=>l(p)):m}const r=(m,l,p)=>g=>g.pipe((0,c.U)(y=>{if(y===m)return y;for(const v of y)v.meta||(v.meta={}),v.meta.transformations?v.meta.transformations=[...v.meta.transformations,l.id]:v.meta.transformations=[l.id];if(p){let v=0;const E=m.filter((h,C)=>{const a=!p(h);return a&&!v&&(v=C),a});E.length&&y.splice(v,0,...E)}return y}));function d(m,l,p){const g=(0,t.of)(l);if(!m.length)return g;const y=[],v=p??{interpolate:E=>E};for(let E=0;E<m.length;E++){const h=m[E];if(o(h))y.push(h(v));else{if(h.disabled)continue;y.push(f(h,v))}}return g.pipe.apply(g,y)}function o(m){return typeof m=="function"}},50928:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>me});var t=e(62294),n=e(32302),c=e(49052),s=e(44449),i=e(51907),f=e(98294),u=e(90748),r=e(13512);const d={id:r.W.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(q,se)=>ae=>{const pe={};return q.include&&(pe.include={id:u.E4.byRefId,options:q.include}),q.exclude&&(pe.exclude={id:u.E4.byRefId,options:q.exclude}),ae.pipe(i.u.operator(pe,se))}};var o=e(91603),m=e(61171),l=e(9471),p=e(53678),g=e(30471),y=e(90834),v=e(99098),E=e(50035);const h="Time",C="Time",a="Value",P=y.U.Empty,D=window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback,x={id:r.W.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:h,rowField:C,valueField:a},operator:q=>se=>se.pipe((0,l.U)(ae=>{const pe=q.columnField||h,de=q.rowField||C,Me=q.valueField||a,Ke=q.emptyValue||P;if(ae.length!==1)return ae;const st=ae[0],Ie=b(st,pe),Ve=b(st,de),_e=b(st,Me),tt=`${de}\\${pe}`;if(!Ie||!Ve||!_e)return ae;const dt=M(Ie.values),Oe=M(Ve.values),ye={};for(let be=0;be<_e.values.length;be++){const Be=Ie.values[be],ze=Ve.values[be],lt=_e.values[be];ye[Be]||(ye[Be]={}),ye[Be][ze]=lt}const Pe=new p.v;Pe.addField({name:tt,values:Oe,type:v.fS.string});for(const be of dt){let Be=[];for(const ze of Oe){const lt=ye[be][ze]??R(Ke);Be.push(lt)}D&&typeof be=="number"&&(_e.config={..._e.config,displayNameFromDS:void 0}),Pe.addField({name:be.toString(),values:Be,config:_e.config,type:_e.type})}return[Pe]}))};function M(q){const se=new Set;for(let ae=0;ae<q.length;ae++)se.add(q[ae]);return Array.from(se)}function b(q,se){for(let ae=0;ae<q.fields.length;ae++){const pe=q.fields[ae];let de;if(D?de=E.Ls.get(u.mi.byName).get(se)(pe,q,[q]):de=se===(0,g.CZ)(pe),de)return pe}return null}function R(q){switch(q){case y.U.False:return!1;case y.U.True:return!0;case y.U.Null:return null;case y.U.Empty:default:return""}}var S=e(75133),O=e(13221),U=e(31568);const I=10,F={id:r.W.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:I},operator:q=>se=>se.pipe((0,l.U)(ae=>{const pe=q.limitField||I;return ae.map(de=>de.length>pe?{...de,fields:de.fields.map(Me=>({...Me,values:Me.values.slice(0,pe)})),length:pe}:de)}))};var w=e(18820),K=e(43137),L=e(74700);const V={id:r.W.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:q=>se=>se.pipe((0,l.U)(ae=>{const pe=H(q.renameByName);return!Array.isArray(ae)||ae.length===0?ae:ae.map(de=>({...de,fields:pe(de)}))}))},H=q=>se=>!q||Object.keys(q).length===0?se.fields:se.fields.map(ae=>{const pe=(0,g.CZ)(ae,se),de=q[pe];return typeof de!="string"||de.length===0?ae:{...ae,config:{...ae.config,displayName:de},state:{...ae.state,displayName:de}}}),j={id:r.W.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{}},operator:(q,se)=>ae=>ae.pipe(f.w.operator({exclude:{names:A(q.excludeByName)}},se),L.t.operator(q,se),V.operator(q,se))},A=q=>q?Object.keys(q).filter(se=>q[se]):[];var _=e(27742),k=e(79086);const Q={id:r.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:q=>se=>se.pipe((0,l.U)(ae=>!Array.isArray(ae)||ae.length===0?ae:ae.map(re(q))))},re=q=>se=>{const ae=(0,k.jO)(q.regex),pe=se.fields.map(de=>{const Me=(0,g.CZ)(de,se);if(!ae.test(Me))return de;const Ke=Me.replace(ae,q.renamePattern);return{...de,config:{...de.config,displayName:Ke},state:{...de.state,displayName:Ke}}});return{...se,fields:pe}};var Z=e(82897),oe=e(83881),G=e(19447);const le={id:r.W.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:q=>se=>se.pipe((0,l.U)(ae=>{if(!Array.isArray(ae)||ae.length<=1||!(0,G.xI)(ae))return ae;const pe={},de=new Set,Me=new p.v,Ke={name:v.rN,values:[],config:{},type:v.fS.string};for(let st=0;st<ae.length;st++){const Ie=ae[st];for(let Ve=0;Ve<Ie.fields.length;Ve++){const _e=Ie.fields[Ve];if(_e.type===v.fS.time){pe[st]=Ve,de.has(v.Ls)||(Me.addField(ge(_e,v.Ls)),Me.addField(Ke),de.add(v.Ls));continue}de.has(v.M5)||(Me.addField(ge(_e,v.M5)),de.add(v.M5))}}for(let st=0;st<ae.length;st++){const Ie=ae[st];for(let Ve=0;Ve<Ie.length;Ve++){const _e=pe[st],tt=_e===0?1:0;Me.add({[v.Ls]:Ie.fields[_e].values[Ve],[v.rN]:(0,g.nf)(Ie),[v.M5]:Ie.fields[tt].values[Ve]})}}return[(0,oe.aK)(Me,0,!0)]}))},ge=(q,se)=>({...(0,Z.omit)(q,["values","state","labels","config","name"]),name:se,values:[],config:{...(0,Z.omit)(q.config,["displayName","displayNameFromDS"])}}),ne={id:r.W.sortBy,name:"Sort by",description:"Sort fields in a frame",defaultOptions:{fields:{}},operator:q=>se=>se.pipe((0,l.U)(ae=>!Array.isArray(ae)||ae.length===0||!q?.sort?.length?ae:ue(ae,q.sort)))};function ue(q,se){return q.map(ae=>{const pe=te(ae,se);return pe.length&&pe[0].index!=null?(0,oe.aK)(ae,pe[0].index,pe[0].desc):ae})}function te(q,se){return se.map(ae=>ae.index!=null?ae:{...ae,index:q.fields.findIndex(pe=>ae.field===(0,g.CZ)(pe,q))})}const me={noopTransformer:K.d,filterFieldsTransformer:i.P,filterFieldsByNameTransformer:f.w,filterFramesTransformer:i.u,filterFramesByRefIdTransformer:d,filterByValueTransformer:o.JA,orderFieldsTransformer:L.t,organizeFieldsTransformer:j,reduceTransformer:_.mf,concatenateTransformer:n.aE,calculateFieldTransformer:t.U,joinByFieldTransformer:O.M,seriesToColumnsTransformer:O.M,seriesToRowsTransformer:le,renameFieldsTransformer:V,labelsToFieldsTransformer:U.r,ensureColumnsTransformer:s.W,groupByTransformer:m.i,sortByTransformer:ne,mergeTransformer:w.R,renameByRegexTransformer:Q,histogramTransformer:S.Op,convertFieldTypeTransformer:c.mg,groupingToMatrixTransformer:x,limitTransformer:F}},62294:(Y,T,e)=>{"use strict";e.d(T,{U:()=>h,h:()=>D,ie:()=>y});var t=e(82897),n=e.n(t),c=e(9471),s=e(83881),i=e(30471),f=e(99098),u=e(52666),r=e(66392),d=e(33750),o=e(50035),m=e(90748),l=e(44449),p=e(13512),g=e(43137),y=(x=>(x.ReduceRow="reduceRow",x.BinaryOperation="binary",x.Index="index",x))(y||{});const v={reducer:d.gz.sum},E={left:"",operator:r.L.Add,right:""},h={id:p.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:d.gz.sum}},operator:(x,M)=>b=>{const R=x&&x.timeSeries!==!1?l.W.operator(null,M):g.d.operator({},M);return x.alias!=null&&(x.alias=M.interpolate(x.alias)),b.pipe(R,(0,c.U)(S=>{const O=x.mode??"reduceRow";let U;if(O==="reduceRow")U=C((0,t.defaults)(x.reduce,v),S);else if(O==="binary"){const I={...x.binary,left:M.interpolate(x.binary?.left),right:M.interpolate(x.binary?.right)};U=P((0,t.defaults)(I,E),S)}else if(O==="index")return S.map(I=>{const F={name:x.alias??"Row",type:f.fS.number,values:[...Array(I.length).keys()],config:{}};return{...I,fields:x.replaceFields?[F]:[...I.fields,F]}});return U?S.map(I=>{const F=U(I);if(!F)return I;const w={name:D(x),type:f.fS.number,config:{},values:F};let K=[];if(x.replaceFields){const{timeField:L}=(0,s.sV)(I);L&&x.timeSeries!==!1?K=[L,w]:K=[w]}else K=[...I.fields,w];return{...I,fields:K}}):S}))}};function C(x,M){let b=(0,o.sq)({id:m.mi.numeric});x.include&&x.include.length&&(b=(0,o.sq)({id:m.mi.byNames,options:{names:x.include}}));const R=d.TB.get(x.reducer);if(!R)throw new Error(`Unknown reducer: ${x.reducer}`);const S=R.reduce??d.uP,O=x.nullValueMode===u.Gl.Ignore,U=x.nullValueMode===u.Gl.AsZero;return I=>{const F=[];for(const V of I.fields)b(V,I,M)&&F.push(V.values);const w=F.length,K={name:"temp",values:new Array(w),type:f.fS.number,config:{}},L=[];for(let V=0;V<I.length;V++){for(let H=0;H<w;H++)K.values[H]=F[H][V];L.push(S(K,O,U)[x.reducer])}return L}}function a(x,M,b){if(!M)return;for(const S of x.fields)if(M===(0,i.CZ)(S,x,b))return S.type===f.fS.boolean?S.values.map(O=>O?1:0):S.values;const R=parseFloat(M);if(!isNaN(R))return new Array(x.length).fill(R)}function P(x,M){const b=r.n.getIfExists(x.operator);return R=>{const S=a(R,x.left,M),O=a(R,x.right,M);if(!S||!O||!b)return;const U=new Array(S.length);for(let I=0;I<U.length;I++)U[I]=b.operation(S[I],O[I]);return U}}function D(x){if(x.alias?.length)return x.alias;switch(x.mode){case"binary":{const{binary:M}=x;return`${M?.left??""} ${M?.operator??""} ${M?.right??""}`}case"reduceRow":{const M=d.TB.getIfExists(x.reduce?.reducer);if(M)return M.name}break;case"index":return"Row"}return"math"}},32302:(Y,T,e)=>{"use strict";e.d(T,{HO:()=>s,aE:()=>i});var t=e(9471),n=e(99098),c=e(13512),s=(u=>(u.Drop="drop",u.FieldName="field",u.Label="label",u))(s||{});const i={id:c.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:u=>r=>r.pipe((0,t.U)(d=>!Array.isArray(d)||d.length<2?d:[f(d,u)]))};function f(u,r){let d=!0,o=u[0].length;const m=r.frameNameLabel??"frame";let l=[];for(const p of u){o!==p.length&&(d=!1,o=Math.max(o,p.length));for(const g of p.fields){const y={...g};y.state=void 0,p.name&&(r.frameNameMode==="drop"||(r.frameNameMode==="label"?(y.labels={...g.labels},y.labels[m]=p.name):!y.name||y.name===n.M5?y.name=p.name:y.name=`${p.name} \xB7 ${g.name}`)),l.push(y)}}return d||(l=l.map(p=>{if(p.values.length===o)return p;const g=p.values;return g.length=o,{...p,values:g}})),{fields:l,length:o}}},49052:(Y,T,e)=>{"use strict";e.d(T,{J_:()=>v,mg:()=>u,p8:()=>d});var t=e(9471),n=e(29826),c=e(99098),s=e(50035),i=e(90748),f=e(13512);const u={id:f.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0}]},operator:(h,C)=>a=>a.pipe((0,t.U)(P=>u.transformer(h,C)(P))),transformer:h=>C=>!Array.isArray(C)||C.length===0?C:r(h,C)??[]};function r(h,C){if(!h.conversions.length)return C;const a=C.map(P=>({...P}));for(const P of h.conversions){if(!P.targetField)continue;const D=s.Ls.get(i.mi.byName).get(P.targetField);for(const x of a)x.fields=x.fields.map(M=>D(M,x,a)?d(M,P):M)}return a}function d(h,C){switch(C.destinationType){case c.fS.time:return v(h,C.dateFormat);case c.fS.number:return l(h);case c.fS.string:return g(h,C.dateFormat);case c.fS.boolean:return p(h);case c.fS.enum:return E(h,C.enumConfig);case c.fS.other:return y(h);default:return h}}const o=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function m(h,C){let a=C?{format:C}:void 0;const P=h.values.slice();let D=P.find(M=>M!=null),x=typeof D=="string"&&o.test(D);for(let M=0;M<P.length;M++)if(P[M]){let b=x?Date.parse(P[M]):(0,n.J)(P[M],a).valueOf();P[M]=Number.isFinite(b)?b:null}else P[M]=null;return{...h,type:c.fS.time,values:P}}function l(h){const C=h.values.slice(),a=C.some(P=>typeof P=="string");for(let P=0;P<C.length;P++){let D=C[P];a&&D!=null&&typeof D=="string"&&(D=D.replace(/,/g,""));const x=+D;C[P]=Number.isFinite(x)?x:null}return{...h,type:c.fS.number,values:C}}function p(h){const C=h.values.slice();for(let a=0;a<C.length;a++)C[a]=Boolean(!!C[a]);return{...h,type:c.fS.boolean,values:C}}function g(h,C){let a=h.values;switch(h.type){case c.fS.time:a=a.map(P=>(0,n.J)(P).format(C));break;case c.fS.other:a=a.map(P=>JSON.stringify(P));break;default:a=a.map(P=>`${P}`)}return{...h,type:c.fS.string,values:a}}function y(h){const C=h.values.slice();for(let a=0;a<C.length;a++)try{C[a]=JSON.parse(C[a])}catch{C[a]=null}return{...h,type:c.fS.other,values:C}}function v(h,C){const a=typeof h.values[0]=="number";return h.type===c.fS.time&&a?h:a?{...h,type:c.fS.time}:m(h,C)}function E(h,C){const a={...C},P=h.values.slice(),D=new Map;if(a.text)for(let x=0;x<a.text.length;x++)D.set(a.text[x],x);else a.text=[];for(let x=0;x<P.length;x++){const M=P[x];D.has(M)||(a.text[D.size]=M,D.set(M,D.size)),P[x]=D.get(M)}return{...h,config:{...h.config,type:{enum:a}},type:c.fS.enum,values:P}}},44449:(Y,T,e)=>{"use strict";e.d(T,{W:()=>i});var t=e(9471),n=e(83881),c=e(13512),s=e(13221);const i={id:c.W.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(u,r)=>d=>d.pipe((0,t.U)(o=>i.transformer(u,r)(o))),transformer:(u,r)=>d=>{const o=f(d);return d.length>1&&o?s.M.transformer({byField:o},r)(d):d}};function f(u){let r;for(const d of u){const{timeField:o}=(0,n.sV)(d);if(!o)return;if(!r)r=o.name;else if(r!==o.name)return}return r}},51907:(Y,T,e)=>{"use strict";e.d(T,{P:()=>i,u:()=>f});var t=e(9471),n=e(50035),c=e(13512),s=e(43137);const i={id:c.W.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(u,r)=>d=>!u.include&&!u.exclude?d.pipe(s.d.operator({},r)):(typeof u.include?.options=="string"?u.include.options=r.interpolate(u.include?.options):typeof u.include?.options?.pattern=="string"&&(u.include.options.pattern=r.interpolate(u.include?.options.pattern)),typeof u.exclude?.options=="string"?u.exclude.options=r.interpolate(u.exclude?.options):typeof u.exclude?.options?.pattern=="string"&&(u.exclude.options.pattern=r.interpolate(u.exclude?.options.pattern)),d.pipe((0,t.U)(o=>{const m=u.include?(0,n.sq)(u.include):null,l=u.exclude?(0,n.sq)(u.exclude):null,p=[];for(const g of o){const y=[];for(let E=0;E<g.fields.length;E++){const h=g.fields[E];if(l){if(l(h,g,o))continue;m||y.push(h)}m&&m(h,g,o)&&y.push(h)}if(!y.length)continue;const v={...g,fields:y};p.push(v)}return p})))},f={id:c.W.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(u,r)=>d=>!u.include&&!u.exclude?d.pipe(s.d.operator({},r)):d.pipe((0,t.U)(o=>{const m=u.include?(0,n.b9)(u.include):null,l=u.exclude?(0,n.b9)(u.exclude):null,p=[];for(const g of o){if(l){if(l(g))continue;m||p.push(g)}m&&m(g)&&p.push(g)}return p}))}},98294:(Y,T,e)=>{"use strict";e.d(T,{f:()=>i,w:()=>s});var t=e(90748),n=e(51907),c=e(13512);const s={id:c.W.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(f,u)=>r=>r.pipe(n.P.operator({include:i(f.include),exclude:i(f.exclude)},u))},i=f=>{if(!f)return;const{names:u,pattern:r}=f;if(!((!Array.isArray(u)||u.length===0)&&!r))return r?!Array.isArray(u)||u.length===0?{id:t.mi.byRegexp,options:r}:{id:t.mi.byRegexpOrNames,options:f}:{id:t.mi.byNames,options:{names:u}}}},91603:(Y,T,e)=>{"use strict";e.d(T,{ER:()=>u,JA:()=>r,PQ:()=>f});var t=e(9471),n=e(30471),c=e(50035),s=e(13512),i=e(43137),f=(m=>(m.exclude="exclude",m.include="include",m))(f||{}),u=(m=>(m.all="all",m.any="any",m))(u||{});const r={id:s.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(m,l)=>p=>{const g=m.filters,y=m.match==="all",v=m.type==="include";return!Array.isArray(g)||g.length===0?p.pipe(i.d.operator({},l)):p.pipe((0,t.U)(E=>{if(!Array.isArray(E)||E.length===0)return E;const h=new Set;for(const P of E){const D=o(P,E),x=d(g,D);for(let M=0;M<P.length;M++){if(h.has(M))continue;let b=!0;for(const R of x){const S=R(M,P,E);if(!y&&S){b=!0;break}if(y&&!S){b=!1;break}b=S}b&&h.add(M)}}const C=[],a=v?h.size:E[0].length-h.size;for(const P of E){const D=[];for(const x of P.fields){const M=[];for(let b=0;b<P.length;b++){if(v&&h.has(b)){M.push(x.values[b]);continue}if(!v&&!h.has(b)){M.push(x.values[b]);continue}}D.push({...x,values:M,state:{}})}C.push({...P,fields:D,length:a})}return C}))}},d=(m,l)=>{const p=()=>!1;return m.map(g=>{const y=l[g.fieldName]??-1;if(y<0)return console.warn(`[FilterByValue] Could not find index for field name: ${g.fieldName}`),p;const v=(0,c.IG)(g.config);return(E,h,C)=>v(E,h.fields[y],h,C)})},o=(m,l)=>m.fields.reduce((p,g,y)=>{const v=(0,n.CZ)(g,m,l);return p[v]=y,p},{})},61171:(Y,T,e)=>{"use strict";e.d(T,{i:()=>r,x:()=>u});var t=e(9471),n=e(83881),c=e(30471),s=e(99098),i=e(33750),f=e(13512),u=(l=>(l.aggregate="aggregate",l.groupBy="groupby",l))(u||{});const r={id:f.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group",defaultOptions:{fields:{}},operator:l=>p=>p.pipe((0,t.U)(g=>{if(!Object.keys(l.fields).find(E=>l.fields[E].operation==="groupby"))return g;const v=[];for(const E of g){const h=[];for(const P of E.fields)d(P,l)&&h.push(P);if(h.length===0)continue;const C=new Map;for(let P=0;P<E.length;P++){const D=String(h.map(M=>M.values[P])),x=C.get(D)??{};C.has(D)||C.set(D,x);for(let M of E.fields){const b=(0,c.CZ)(M);x[b]||(x[b]={name:b,type:M.type,config:{...M.config},values:[]}),x[b].values.push(M.values[P])}}const a=[];for(const P of h){const D=[],x=(0,c.CZ)(P);C.forEach(M=>{D.push(M[x].values[0])}),a.push({name:P.name,type:P.type,config:{...P.config},values:D})}for(const P of E.fields){if(!o(P,l))continue;const D=(0,c.CZ)(P),x=l.fields[D].aggregations,M={};C.forEach(b=>{const R=b[D],S=(0,i.Kx)({field:R,reducers:x});for(const O of x)Array.isArray(M[O])||(M[O]=[]),M[O].push(S[O])});for(const b of x){const R={name:`${D} (${b})`,values:M[b],type:s.fS.other,config:{}};R.type=m(b,P,R),a.push(R)}}v.push({fields:a,length:C.size})}return v}))},d=(l,p)=>{const g=(0,c.CZ)(l);return p?.fields[g]?.operation==="groupby"},o=(l,p)=>{const g=(0,c.CZ)(l);return p?.fields[g]?.operation==="aggregate"&&Array.isArray(p?.fields[g].aggregations)&&p?.fields[g].aggregations.length>0},m=(l,p,g)=>{switch(l){case i.gz.allIsNull:return s.fS.boolean;case i.gz.last:case i.gz.lastNotNull:case i.gz.first:case i.gz.firstNotNull:return p.type;default:return(0,n.fu)(g)??s.fS.string}}},75133:(Y,T,e)=>{"use strict";e.d(T,{Jz:()=>P,Ok:()=>y,Op:()=>p,UO:()=>D,Zi:()=>d,cO:()=>v,gY:()=>a,kl:()=>E,mB:()=>x,py:()=>l,qr:()=>h,wL:()=>g,zM:()=>b});var t=e(9471),n=e(6194),c=e(21544),s=e(39393),i=e(99098),f=e(56190),u=e(13512),r=e(17587);const d=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],o=[null],m=(R,S)=>R-S,l={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},p={id:u.W.histogram,name:"Histogram",description:"Calculate a histogram from input data",defaultOptions:{fields:{}},operator:(R,S)=>O=>O.pipe((0,t.U)(U=>p.transformer(R,S)(U))),transformer:R=>S=>{if(!Array.isArray(S)||S.length===0)return S;const O=a(S,R);return O==null?[]:[b(O)]}},g="xMin";function y(R){return R===g||R==="BucketMin"}const v="xMax";function E(R){return R===v||R==="BucketMax"}function h(R){let S,O;const U=[];for(const I of R.fields)y(I.name)?S=I:E(I.name)?O=I:I.type===i.fS.number&&U.push(I);if(!O&&S&&S.values.length>1){let I=S.values,F=(0,f.O)(I[1]-I[0],6);O={...S,name:v,values:I.map(w=>w+F)}}if(!S&&O&&O?.values.length>1){let I=O.values,F=(0,f.O)(I[1]-I[0],6);S={...O,name:g,values:I.map(w=>w-F)}}if(S&&O&&U.length)return{xMin:S,xMax:O,counts:U}}const C=20;function a(R,S){let O=S?.bucketSize,U=S?.bucketOffset??0;if(!O||O<0){let A=[];for(const oe of R)for(const G of oe.fields)G.type===i.fS.number&&(A=A.concat(G.values));A=A.filter(oe=>oe!=null),A.sort((oe,G)=>oe-G);let _=1/0;if(A.length===1)_=1;else for(let oe=1;oe<A.length;oe++){let G=A[oe]-A[oe-1];G!==0&&(_=Math.min(_,G))}let k=A[0];const Z=(A[A.length-1]-k)/C;for(let oe=0;oe<d.length;oe++){let G=d[oe];if(Z<G&&G>=_){O=G;break}}}const I=A=>x(A-U,O)+U;let F=((""+O).match(/\.\d+$/)??["."])[0].length-1,w=[],K=[],L;for(const A of R)for(const _ of A.fields)if(_.type===i.fS.number){let k=M(_.values,I,o,m);w.push(k),K.push({..._,config:{..._.config,unit:_.config.unit==="short"?"short":void 0}}),!L&&_.config.unit&&(L=_.config)}if(!K.length)return null;let V=(0,r.v_)(w);for(let A=1;A<V.length;A++){let _=V[A];for(let k=0;k<_.length;k++)_[k]==null&&(_[k]=0)}const H={name:g,values:V[0],type:i.fS.number,state:void 0,config:F===0?L??{}:{...L,decimals:F}},j={...H,name:v,values:V[0].map(A=>A+O)};if(S?.combine){const A=new Array(V[0].length).fill(0);for(let _=1;_<V.length;_++)for(let k=0;k<A.length;k++)A[k]+=V[_][k];K=[{...K[0],name:"count",values:A,type:i.fS.number,state:void 0}]}else K.forEach((A,_)=>{A.values=V[_+1]});return{xMin:H,xMax:j,counts:K}}function P(R,S){return Math.round(R/S)*S}function D(R,S){return Math.ceil(R/S)*S}function x(R,S){return Math.floor(R/S)*S}function M(R,S,O,U){let I=new Map;for(let L=0;L<R.length;L++){let V=R[L];V!=null&&(V=S(V));let H=I.get(V);H?H.count++:I.set(V,{value:V,count:1})}O&&O.forEach(L=>I.delete(L));let F=[...I.values()];U&&F.sort((L,V)=>U(L.value,V.value));let w=Array(F.length),K=Array(F.length);for(let L=0;L<F.length;L++)w[L]=F[L].value,K[L]=F[L].count;return[w,K]}function b(R,S){if(!R.xMin.display){const O=(0,n.U_)({field:R.xMin,theme:S??(0,c.j)()});R.xMin.display=O,R.xMax.display=O}return R.counts[0].display=(0,n.U_)({field:R.counts[0],theme:S??(0,c.j)()}),{length:R.xMin.values.length,meta:{type:s.P.Histogram},fields:[R.xMin,R.xMax,...R.counts]}}},13221:(Y,T,e)=>{"use strict";e.d(T,{M:()=>u,c:()=>f});var t=e(9471),n=e(50035),c=e(90748),s=e(13512),i=e(17587),f=(r=>(r.outer="outer",r.inner="inner",r))(f||{});const u={id:s.W.joinByField,aliasIds:[s.W.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(r,d)=>o=>o.pipe((0,t.U)(m=>u.transformer(r,d)(m))),transformer:r=>{let d;return o=>{if(o.length>1){r.byField&&!d&&(d=n.Ls.get(c.mi.byName).get(r.byField));const m=(0,i._9)({frames:o,joinBy:d,mode:r.mode});if(m)return[m]}return o}}}},17587:(Y,T,e)=>{"use strict";e.d(T,{Y3:()=>d,_9:()=>o,lP:()=>v,v_:()=>y});var t=e(39963),n=e(83881),c=e(99098),s=e(50035),i=e(90748),f=e(13221);function u(E){const{timeField:h}=(0,n.sV)(E[0]);if(h)return s.Ls.get(i.mi.firstTimeField).get({});let C=[];for(const a of E[0].fields)a.type===c.fS.number&&C.push(a.name);for(let a=1;a<E.length;a++){const P=[];for(const D of E[0].fields)D.type===c.fS.number&&P.push(D.name);C=C.filter(D=>!P.includes(D))}return s.Ls.get(i.mi.byName).get(C[0])}function r(E){return E.joinBy??u(E.frames)}function d(E,h){if(h>=0){let C=E.fields[h];C.type!==c.fS.string&&!v(C.values)&&(E=(0,n.aK)(E,h))}return E}function o(E){if(!E.frames?.length)return;if(E.frames.length===1){let x=E.frames[0],M=x;const b=r(E);let R=M.fields.findIndex(S=>b(S,M,E.frames));if(E.keepOriginIndices&&(M={...x,fields:x.fields.map((S,O)=>{const U={...S},I={frameIndex:0,fieldIndex:O};return U.state?U.state.origin=I:U.state={origin:I},U})},R>0)){const S=M.fields[R],O=M.fields.filter((U,I)=>I!==R);O.unshift(S),M.fields=O,R=0}if(R>=0&&(M=d(M,R)),E.keep){let S=M.fields.filter((O,U)=>U===R||E.keep(O,M,E.frames));x!==M?M.fields=S:M={...x,fields:S}}return M}const h=[],C=[],a=[],P=r(E);for(let x=0;x<E.frames.length;x++){const M=E.frames[x];if(!M||!M.fields?.length)continue;const b=[m];let R,S=[];for(let U=0;U<M.fields.length;U++){const I=M.fields[U];if(I.state=I.state||{},!R&&P(I,M,E.frames))R=I;else{if(E.keep&&!E.keep(I,M,E.frames))continue;let F=I.config.custom?.spanNulls;b.push(F===!0?m:F===-1?l:p);let w=I.labels??{};M.name&&(w={...w,name:M.name}),S.push({...I,labels:w})}E.keepOriginIndices&&(I.state.origin={frameIndex:x,fieldIndex:U})}if(!R)continue;a.length===0&&a.push(R),h.push(b);const O=[R.values];for(const U of S)O.push(U.values),a.push(U),delete U.state?.displayName;C.push(O)}const D=y(C,h,E.mode);return{length:D[0].length,fields:a.map((x,M)=>({...x,values:D[M]}))}}const m=0,l=1,p=2;function g(E,h,C){for(let a=0,P,D=-1;a<h.length;a++){let x=h[a];if(x>D){for(P=x-1;P>=0&&E[P]==null;)E[P--]=null;for(P=x+1;P<C&&E[P]==null;)E[D=P++]=null}}}function y(E,h,C=f.c.outer){let a;if(C===f.c.inner)a=new Set((0,t.Z)(E.map(M=>M[0])));else{a=new Set;for(let M=0;M<E.length;M++){let R=E[M][0],S=R.length;for(let O=0;O<S;O++)a.add(R[O])}}let P=[Array.from(a).sort((M,b)=>M-b)],D=P[0].length,x=new Map;for(let M=0;M<D;M++)x.set(P[0][M],M);for(let M=0;M<E.length;M++){let b=E[M],R=b[0];for(let S=1;S<b.length;S++){let O=b[S],U=Array(D).fill(void 0),I=h?h[M][S]:l,F=[];for(let w=0;w<O.length;w++){let K=O[w],L=x.get(R[w]);K===null?I!==m&&(U[L]=K,I===p&&F.push(L)):U[L]=K}g(U,F,D),P.push(U)}}return P}function v(E,h=50){const C=E.length;if(C<=1)return!0;let a=0,P=C-1;for(;a<=P&&E[a]==null;)a++;for(;P>=a&&E[P]==null;)P--;if(P<=a)return!0;const D=Math.max(1,Math.floor((P-a+1)/h));for(let x=E[a],M=a+D;M<=P;M+=D){const b=E[M];if(b!=null){if(b<=x)return!1;x=b}}return!0}},31568:(Y,T,e)=>{"use strict";e.d(T,{k:()=>i,r:()=>f});var t=e(9471),n=e(30471),c=e(99098),s=e(13512),i=(r=>(r.Columns="columns",r.Rows="rows",r))(i||{});const f={id:s.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(r,d)=>o=>o.pipe((0,t.U)(m=>f.transformer(r,d)(m))),transformer:r=>d=>{if(r.mode==="rows")return u(d,r.keepLabels);const o=[],m=r.keepLabels?.length?new Set(r.keepLabels):void 0;for(const l of d){const p=[],g={};for(const y of l.fields){if(!y.labels){p.push(y);continue}const v={...y,config:{...y.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};p.push(v);for(const E of Object.keys(y.labels)){if(m&&!m.has(E))continue;if(r.valueLabel===E){v.name=y.labels[E];continue}(g[E]??(g[E]=new Set)).add(y.labels[E])}}for(const y in g)for(const v of g[y]){const E=new Array(l.length).fill(v);p.push({name:y,type:c.fS.string,values:E,config:{}})}o.push({...l,fields:p,length:l.length})}return o}};function u(r,d){const o=[];for(const m of r)for(const l of m.fields)if(l.labels){const p=[],g=[];if(d)for(const y of d)p.push(y),g.push(l.labels[y]);else for(const[y,v]of Object.entries(l.labels))p.push(y),g.push(v);g.length&&o.push({...m,name:(0,n.CZ)(l,m,r),fields:[{name:"label",type:c.fS.string,config:{},values:p},{name:"value",type:c.fS.string,config:{},values:g}],length:g.length})}return o}},18820:(Y,T,e)=>{"use strict";e.d(T,{R:()=>f});var t=e(82897),n=e.n(t),c=e(9471),s=e(53678),i=e(13512);const f={id:i.W.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},operator:p=>g=>g.pipe((0,c.U)(y=>{if(!Array.isArray(y)||y.length<=1)return y;const v=y.filter(b=>b.fields.length>0);if(v.length===0)return[y[0]];const E=new Set,h={},C=[],a=new s.v;for(let b=0;b<v.length;b++){const R=v[b];for(let S=0;S<R.fields.length;S++){const O=R.fields[S];E.has(O.name)||(a.addField(u(O)),E.add(O.name)),h[O.name]=h[O.name]||{},h[O.name][b]=S,v.length-1===b&&m(h,O,v)&&C.push(O.name)}}if(C.length===0)return y;const P={},D=[],x=r(v,h,C),M=d(v,E,h);for(let b=0;b<v.length;b++){const R=v[b];for(let S=0;S<R.length;S++){const O=x(b,S),U=M(b,S);if(!Array.isArray(P[O])){P[O]=[U],D.push(l(O,P));continue}let I=!1;P[O]=P[O].map(F=>o(F,U)?(I=!0,{...F,...U}):F),I||(P[O].push(U),D.push(l(O,P)))}}for(const b of D){const R=P[b.key][b.index];R&&a.add(R)}return[a]}))},u=p=>({...(0,t.omit)(p,["values","state","labels","config"]),values:[],config:{...(0,t.omit)(p.config,"displayName")}}),r=(p,g,y)=>{const v=y.reduce((E,h)=>Object.keys(g[h]).reduce((C,a)=>(C[a]=C[a]||[],C[a].push(g[h][a]),C),E),{});return(E,h)=>v[E].reduce((C,a)=>C+p[E].fields[a].values[h],"")},d=(p,g,y)=>(v,E)=>{const h={},C=Array.from(g);for(const a of C){const P=y[a];if(!P)continue;const D=P[v];if(typeof D!="number")continue;const x=p[v];if(!x||!x.fields)continue;const M=x.fields[D];!M||!M.values||(h[a]=M.values[E])}return h},o=(p,g)=>{let y=!0;for(const v in g)if(!(typeof p[v]>"u")&&p[v]!==null&&p[v]!==g[v]){y=!1;break}return y},m=(p,g,y)=>Object.keys(p[g.name]).length===y.length,l=(p,g)=>({key:p,index:g[p].length-1})},43137:(Y,T,e)=>{"use strict";e.d(T,{d:()=>n});var t=e(13512);const n={id:t.W.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:c=>s=>s,transformer:c=>s=>s}},74700:(Y,T,e)=>{"use strict";e.d(T,{$:()=>u,t:()=>f});var t=e(82897),n=e.n(t),c=e(9471),s=e(30471),i=e(13512);const f={id:i.W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:o=>m=>m.pipe((0,c.U)(l=>{const p=r(o.indexByName);return!Array.isArray(l)||l.length===0?l:l.map(g=>({...g,fields:p(g.fields,l,g)}))}))},u=o=>(m,l)=>d(m,o)-d(l,o),r=o=>(m,l,p)=>{if(!Array.isArray(m)||m.length===0||!o||Object.keys(o).length===0)return m;const g=u(o);return(0,t.clone)(m).sort((y,v)=>g((0,s.CZ)(y,p,l),(0,s.CZ)(v,p,l)))},d=(o,m)=>Number.isInteger(m[o])?m[o]:Number.MAX_SAFE_INTEGER},27742:(Y,T,e)=>{"use strict";e.d(T,{AL:()=>d,mf:()=>o});var t=e(9471),n=e(83881),c=e(30471),s=e(99098),i=e(33750),f=e(50035),u=e(33369),r=e(13512),d=(y=>(y.SeriesToRows="seriesToRows",y.ReduceFields="reduceFields",y))(d||{});const o={id:r.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last",defaultOptions:{reducers:[i.gz.max]},operator:y=>v=>v.pipe((0,t.U)(E=>{if(!y?.reducers?.length)return E;const h=y.fields?(0,f.sq)(y.fields):y.includeTimeField&&y.mode==="reduceFields"?u.m3:u.Qw;if(y.mode==="reduceFields")return g(E,h,y.reducers);const C=m(E,h,y.reducers,y.labelsToFields);return C?[C]:[]}))};function m(y,v,E,h){const C=i.TB.list(E),a=C.map(x=>x.id),P=[],D=h?l(y):[];for(const x of y){const M=x.fields.filter(I=>v(I,x,y)),b=M.length,R=[],S=new Array(b);R.push({name:"Field",type:s.fS.string,values:S,config:{}});const O={};if(h)for(const I of D)O[I]=new Array(b),R.push({name:I,type:s.fS.string,values:O[I],config:{}});const U={};for(const I of C)U[I.id]=new Array(b),R.push({name:I.name,type:s.fS.other,values:U[I.id],config:{}});for(let I=0;I<M.length;I++){const F=M[I],w=(0,i.Kx)({field:F,reducers:a});if(h){if(S[I]=F.name,F.labels)for(const K of Object.keys(F.labels))O[K][I]=F.labels[K]}else S[I]=(0,c.CZ)(F,x,y);for(const K of C){const L=w[K.id];U[K.id][I]=L}}for(const I of R)if(I.type===s.fS.other){const F=(0,n.fu)(I);F&&(I.type=F)}P.push({...x,fields:R,length:b})}return p(P)}function l(y){const v=new Set;for(const E of y)for(const h of E.fields)if(h.labels)for(const C of Object.keys(h.labels))v.add(C);return[...v]}function p(y){if(!y?.length)return;const v=y[0];for(let E=1;E<y.length;E++){const h=y[E];for(let C=0;C<v.fields.length;C++){const a=v.fields[C];for(let P=0;P<h.fields.length;P++){const D=h.fields[P],x=C===0&&P===0,M=a.type===D.type&&a.name===D.name;if(x||M){const b=a.values,R=D.values;a.values=b.concat(R)}}}}return v.name=void 0,v.length=v.fields[0].values.length,v}function g(y,v,E){const C=i.TB.list(E).map(P=>P.id),a=[];for(const P of y){const D=[];for(const x of P.fields)if(v(x,P,y)){const M=(0,i.Kx)({field:x,reducers:C});for(const b of C){const R=M[b],S={...x,values:[R]};S.state=void 0,C.length>1&&(S.labels||(S.labels={}),S.labels.reducer=i.TB.get(b).name),D.push(S)}}D.length&&a.push({...P,fields:D,length:1})}return a}},89653:()=>{"use strict"},2925:()=>{"use strict"},97865:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>t});var t=(n=>(n.NoData="no_data",n.Paused="paused",n.Alerting="alerting",n.OK="ok",n.Pending="pending",n.Unknown="unknown",n))(t||{})},39834:(Y,T,e)=>{"use strict";e.d(T,{L:()=>t});var t=(n=>(n.Field="field",n.Text="text",n.Skip="skip",n))(t||{})},206:(Y,T,e)=>{"use strict";e.d(T,{CQ:()=>i,k8:()=>s,zj:()=>c});var t=e(59250),n=e(22623),c=(f=>(f.CloudAlerting="cloud-alerting",f.UnifiedAlerting="unified-alerting",f.Dashboard="dashboard",f.Explore="explore",f.Correlations="correlations",f.Unknown="unknown",f.PanelEditor="panel-editor",f.PanelViewer="panel-viewer",f))(c||{});class s extends t.Sg{constructor(){super(...arguments),this._extensionConfigs=[]}init(u){}setRootPage(u){return this.root=u,this}setComponentsFromLegacyExports(u){if(u.ConfigCtrl&&(this.angularConfigCtrl=u.ConfigCtrl),this.meta&&this.meta.includes){for(const r of this.meta.includes)if(r.type===t.$_.page&&r.component&&!u[r.component]){console.warn("App Page uses unknown component: ",r.component,this.meta);continue}}}get extensionConfigs(){return this._extensionConfigs}configureExtensionLink(u){return this._extensionConfigs.push({...u,type:n.D.link}),this}}var i=(f=>(f.alpha="alpha",f.beta="beta",f))(i||{})},59959:(Y,T,e)=>{"use strict";e.d(T,{e:()=>t});var t=(n=>(n.OpenSource="Open Source",n.Pro="Pro",n.Enterprise="Enterprise",n))(t||{})},18111:(Y,T,e)=>{"use strict";e.d(T,{Hx:()=>t,Z3:()=>n,bm:()=>c});const t=0,n=100,c="SAML"},56632:(Y,T,e)=>{"use strict";e.d(T,{m:()=>t});var t=(n=>(n[n.Off=0]="Off",n[n.Crosshair=1]="Crosshair",n[n.Tooltip=2]="Tooltip",n))(t||{})},52666:(Y,T,e)=>{"use strict";e.d(T,{Gl:()=>c,Gu:()=>t,dC:()=>n,fQ:()=>s});var t=(i=>(i.NotStarted="NotStarted",i.Loading="Loading",i.Streaming="Streaming",i.Done="Done",i.Error="Error",i))(t||{});const n=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var c=(i=>(i.Null="null",i.Ignore="connected",i.AsZero="null as zero",i))(c||{});const s=i=>Boolean(i)},99098:(Y,T,e)=>{"use strict";e.d(T,{Ls:()=>c,M5:()=>n,fS:()=>t,rN:()=>s});var t=(i=>(i.time="time",i.number="number",i.string="string",i.boolean="boolean",i.trace="trace",i.geo="geo",i.enum="enum",i.other="other",i.frame="frame",i))(t||{});const n="Value",c="Time",s="Metric"},39393:(Y,T,e)=>{"use strict";e.d(T,{P:()=>t});var t=(n=>(n.TimeSeriesWide="timeseries-wide",n.TimeSeriesLong="timeseries-long",n.TimeSeriesMany="timeseries-many",n.TimeSeriesMulti="timeseries-multi",n.DirectoryListing="directory-listing",n.HeatmapRows="heatmap-rows",n.HeatmapCells="heatmap-cells",n.Histogram="histogram",n))(t||{})},3281:(Y,T,e)=>{"use strict";e.d(T,{L8:()=>c,n1:()=>t,o3:()=>s,sN:()=>n});var t=(i=>(i.Datasource="Datasource",i.Correlations="Correlations",i))(t||{}),n=(i=>(i.Regex="regex",i.Logfmt="logfmt",i))(n||{}),c=(i=>(i.Series="series",i.Field="field",i.Fields="fields",i.Value="value",i.BuiltIn="built-in",i.Template="template",i))(c||{}),s=(i=>(i.Values="values",i))(s||{})},89424:(Y,T,e)=>{"use strict";e.d(T,{MF:()=>s,Ru:()=>i,eA:()=>f,hf:()=>c,iL:()=>u});var t=e(85194),n=e(59250);class c extends n.Sg{constructor(d){super(),this.DataSourceClass=d,this.components={}}setConfigEditor(d){return this.components.ConfigEditor=d,this}setConfigCtrl(d){return this.angularConfigCtrl=d,this}setQueryCtrl(d){return this.components.QueryCtrl=d,this}setAnnotationQueryCtrl(d){return this.components.AnnotationsQueryCtrl=d,this}setQueryEditor(d){return this.components.QueryEditor=d,this}setExploreQueryField(d){return this.components.ExploreQueryField=d,this}setExploreMetricsQueryField(d){return this.components.ExploreMetricsQueryField=d,this}setExploreLogsQueryField(d){return this.components.ExploreLogsQueryField=d,this}setQueryEditorHelp(d){return this.components.QueryEditorHelp=d,this}setExploreStartPage(d){return this.setQueryEditorHelp(d)}setVariableQueryEditor(d){return this.components.VariableQueryEditor=d,this}setMetadataInspector(d){return this.components.MetadataInspector=d,this}setComponentsFromLegacyExports(d){this.angularConfigCtrl=d.ConfigCtrl,this.components.QueryCtrl=d.QueryCtrl,this.components.AnnotationsQueryCtrl=d.AnnotationsQueryCtrl,this.components.ExploreQueryField=d.ExploreQueryField,this.components.QueryEditor=d.QueryEditor,this.components.QueryEditorHelp=d.QueryEditorHelp,this.components.VariableQueryEditor=d.VariableQueryEditor}}class s{constructor(d){this.name=d.name,this.id=d.id,this.type=d.type,this.meta=d.meta,this.cachingConfig=d.cachingConfig,this.uid=d.uid}getRef(){return{type:this.type,uid:this.uid}}}var i=(r=>(r.Logs="Logs",r.Metrics="Metrics",r.Tracing="Tracing",r))(i||{}),f=(r=>(r.Cancelled="cancelled",r.Timeout="timeout",r.Unknown="unknown",r))(f||{});class u{}u=(0,t.s)(u),s=(0,t.s)(s)},93830:()=>{"use strict"},19836:()=>{"use strict"},53768:(Y,T,e)=>{"use strict";e.d(T,{R:()=>n,S:()=>t});var t=(c=>(c.Thresholds="thresholds",c.PaletteClassic="palette-classic",c.PaletteClassicByName="palette-classic-by-name",c.PaletteSaturated="palette-saturated",c.ContinuousGrYlRd="continuous-GrYlRd",c.ContinuousRdYlGr="continuous-RdYlGr",c.ContinuousBlYlRd="continuous-BlYlRd",c.ContinuousYlRd="continuous-YlRd",c.ContinuousBlPu="continuous-BlPu",c.ContinuousYlBl="continuous-YlBl",c.ContinuousBlues="continuous-blues",c.ContinuousReds="continuous-reds",c.ContinuousGreens="continuous-greens",c.ContinuousPurples="continuous-purples",c.Fixed="fixed",c.Shades="shades",c))(t||{});const n="#808080"},3947:(Y,T,e)=>{"use strict";e.d(T,{Y4:()=>t,qb:()=>c,v3:()=>n});function t(s){return i=>i.__systemRef===s}const n=s=>typeof s?.__systemRef=="string";var c=(s=>(s.Unit="unit",s.Min="min",s.Max="max",s.Decimals="decimals",s.DisplayName="displayName",s.NoValue="noValue",s.Thresholds="thresholds",s.Mappings="mappings",s.Links="links",s.Color="color",s.Filterable="filterable",s))(c||{})},90076:()=>{"use strict"},77907:()=>{"use strict"},83008:()=>{"use strict"},84559:(Y,T,e)=>{"use strict";e.d(T,{Mo:()=>n,_S:()=>t,iJ:()=>c});const t={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,discord:!0,hipchat:!0,"google-hangouts-alt":!0,pagerduty:!0,line:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,apps:!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,"expand-arrows":!0,at:!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,"calendar-slash":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"corner-down-right-alt":!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,"document-info":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,"file-landscape-alt":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,grafana:!0,"graph-bar":!0,"grafana-ml":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"layers-alt":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,"list-ol":!0,lock:!0,"map-marker":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,"stopwatch-slash":!0,sync:!0,"sync-slash":!0,table:!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"wrap-text":!0,rss:!0,x:!0};function n(s){return!s||typeof s!="string"?!1:s in t}function c(s){if(n(s))return s}},2263:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{AbstractLabelOperator:()=>u.K2,AlertState:()=>G.Z,AnnotationEventFieldSource:()=>r.L,AppEvents:()=>_.SI,AppPlugin:()=>b.k8,CoreApp:()=>b.zj,CustomVariableSupport:()=>Q.Mg,DEFAULT_SAML_NAME:()=>t.bm,DashboardCursorSync:()=>f.m,DataFrameType:()=>s.P,DataLinkConfigOrigin:()=>i.n1,DataQueryErrorType:()=>R.eA,DataSourceApi:()=>R.MF,DataSourcePlugin:()=>R.hf,DataSourceVariableSupport:()=>Q.gv,DataTopic:()=>u.w5,DefaultTimeZone:()=>p.Ys,ExploreMode:()=>R.Ru,FALLBACK_COLOR:()=>I.R,FeatureState:()=>b.CQ,FieldColorModeId:()=>I.S,FieldConfigProperty:()=>x.qb,FieldType:()=>c.fS,GAUGE_DEFAULT_MAXIMUM:()=>t.Z3,GAUGE_DEFAULT_MINIMUM:()=>t.Hx,GrafanaPlugin:()=>O.Sg,GrafanaThemeType:()=>F.Q,LanguageProvider:()=>R.iL,LegacyGraphHoverClearEvent:()=>_.oi,LegacyGraphHoverEvent:()=>_.IA,LiveChannelConnectionState:()=>k.yS,LiveChannelEventType:()=>k.FU,LiveChannelScope:()=>k.z,LiveChannelType:()=>k.SK,LoadingState:()=>n.Gu,LogLevel:()=>d.in,LogRowContextQueryDirection:()=>d.M4,LogsDedupDescription:()=>d.Uv,LogsDedupStrategy:()=>d.Y4,LogsMetaKind:()=>d.Ku,LogsSortOrder:()=>d.UV,LogsVolumeType:()=>d.o8,MappingType:()=>y.H,NavMenuItemType:()=>o.V,NullValueMode:()=>n.Gl,OrgRole:()=>w.B,PageLayoutType:()=>o.Q,PanelEvents:()=>_.Kh,PluginErrorCode:()=>O.w2,PluginExtensionPoints:()=>q.y,PluginExtensionTypes:()=>q.D,PluginIncludeType:()=>O.$_,PluginSignatureStatus:()=>O.Xy,PluginSignatureType:()=>O._Z,PluginState:()=>O.BV,PluginType:()=>O.zV,SpecialValue:()=>D.U,SpecialValueMatch:()=>y.e,StandardVariableSupport:()=>Q.v6,SupplementaryQueryType:()=>d.v8,SupportedTransformationType:()=>i.sN,TIME_FORMAT:()=>p.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>c.rN,TIME_SERIES_TIME_FIELD_NAME:()=>c.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>c.M5,ThresholdsMode:()=>g.H,VariableHide:()=>U.bU,VariableOrigin:()=>i.L8,VariableRefresh:()=>U.Bd,VariableSort:()=>U.$U,VariableSuggestionsScope:()=>i.o3,VariableSupportBase:()=>Q.Tq,VariableSupportType:()=>Q.j2,VisualizationSuggestionScore:()=>S._,VisualizationSuggestionsBuilder:()=>S.mi,VisualizationSuggestionsListAppender:()=>S.sf,VizOrientation:()=>S.wm,availableIconsIndex:()=>me._S,getDefaultRelativeTimeRange:()=>p.Rr,getDefaultTimeRange:()=>p.JK,hasLogsContextSupport:()=>d.Q4,hasLogsContextUiSupport:()=>d.xW,hasQueryExportSupport:()=>u.p,hasQueryImportSupport:()=>u.CZ,hasSupplementaryQuerySupport:()=>d.mN,isIconName:()=>me.Mo,isLiveChannelJoinEvent:()=>k.mx,isLiveChannelLeaveEvent:()=>k.gH,isLiveChannelMessageEvent:()=>k.RL,isLiveChannelStatusEvent:()=>k.se,isSystemOverride:()=>x.v3,isSystemOverrideWithRef:()=>x.Y4,isTruthy:()=>n.fQ,isUnsignedPluginSignature:()=>oe.x,isValidLiveChannelAddress:()=>k.nU,makeArrayIndexableVector:()=>M.U,parseLiveChannelAddress:()=>k.H7,preferredVisualizationTypes:()=>n.dC,toIconName:()=>me.iJ,toLiveChannelId:()=>k.Aj});var t=e(18111),n=e(52666),c=e(99098),s=e(39393),i=e(3281),f=e(56632),u=e(89749),r=e(39834),d=e(13787),o=e(77346),m=e(10540),l=e.n(m),te={};for(const se in m)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType"].indexOf(se)<0&&(te[se]=()=>m[se]);e.d(T,te);var p=e(75849),g=e(69098),y=e(32195),v=e(93830),E=e.n(v),te={};for(const se in v)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(se)<0&&(te[se]=()=>v[se]);e.d(T,te);var h=e(83008),C=e.n(h),te={};for(const se in h)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(se)<0&&(te[se]=()=>h[se]);e.d(T,te);var a=e(89653),P=e.n(a),te={};for(const se in a)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(se)<0&&(te[se]=()=>a[se]);e.d(T,te);var D=e(90834),x=e(3947),M=e(23845),b=e(206),R=e(89424),S=e(82229),O=e(59250),U=e(69273),I=e(53768),F=e(33536),w=e(49969),K=e(90076),L=e.n(K),te={};for(const se in K)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(se)<0&&(te[se]=()=>K[se]);e.d(T,te);var V=e(5273),H=e.n(V),te={};for(const se in V)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(se)<0&&(te[se]=()=>V[se]);e.d(T,te);var j=e(19836),A=e.n(j),te={};for(const se in j)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(se)<0&&(te[se]=()=>j[se]);e.d(T,te);var _=e(4063),k=e(8891),Q=e(48976),re=e(77907),Z=e.n(re),te={};for(const se in re)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(se)<0&&(te[se]=()=>re[se]);e.d(T,te);var oe=e(53940),G=e(97865),le=e(21366),ge=e.n(le),te={};for(const se in le)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(se)<0&&(te[se]=()=>le[se]);e.d(T,te);var ne=e(2925),ue=e.n(ne),te={};for(const se in ne)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(se)<0&&(te[se]=()=>ne[se]);e.d(T,te);var me=e(84559),q=e(22623)},89974:(Y,T,e)=>{"use strict";e.d(T,{l:()=>t});var t=(n=>(n.Grid="grid",n.List="list",n))(t||{})},4063:(Y,T,e)=>{"use strict";e.d(T,{IA:()=>i,Kh:()=>s,SI:()=>c,oi:()=>f});var t=e(84336),n=e(55391);const c={alertSuccess:(0,t.X)("alert-success"),alertWarning:(0,t.X)("alert-warning"),alertError:(0,t.X)("alert-error")},s={refresh:(0,t.X)("refresh"),componentDidMount:(0,t.X)("component-did-mount"),dataReceived:(0,t.X)("data-received"),dataError:(0,t.X)("data-error"),dataFramesReceived:(0,t.X)("data-frames-received"),dataSnapshotLoad:(0,t.X)("data-snapshot-load"),editModeInitialized:(0,t.X)("init-edit-mode"),initPanelActions:(0,t.X)("init-panel-actions"),initialized:(0,t.X)("panel-initialized"),panelTeardown:(0,t.X)("panel-teardown"),render:(0,t.X)("render")};class i extends n.R{}i.type="graph-hover";class f extends n.m{constructor(){super(...arguments),this.payload={point:{}}}}f.type="graph-hover-clear"},8891:(Y,T,e)=>{"use strict";e.d(T,{Aj:()=>m,FU:()=>s,H7:()=>d,RL:()=>r,SK:()=>n,gH:()=>u,mx:()=>f,nU:()=>o,se:()=>i,yS:()=>c,z:()=>t});var t=(l=>(l.DataSource="ds",l.Plugin="plugin",l.Grafana="grafana",l.Stream="stream",l))(t||{}),n=(l=>(l.DataStream="stream",l.DataFrame="frame",l.JSON="json",l))(n||{}),c=(l=>(l.Pending="pending",l.Connected="connected",l.Connecting="connecting",l.Disconnected="disconnected",l.Shutdown="shutdown",l.Invalid="invalid",l))(c||{}),s=(l=>(l.Status="status",l.Join="join",l.Leave="leave",l.Message="message",l))(s||{});function i(l){return l.type==="status"}function f(l){return l.type==="join"}function u(l){return l.type==="leave"}function r(l){return l.type==="message"}function d(l){if(l?.length){let p=l.trim().split("/");if(p.length>=3)return{scope:p[0],namespace:p[1],path:p.slice(2).join("/")}}}function o(l){return!!(l?.path&&l.namespace&&l.scope)}function m(l){if(!l.scope)return"";let p=l.scope;return!l.namespace||(p+="/"+l.namespace,!l.path)?p:p+"/"+l.path}},13787:(Y,T,e)=>{"use strict";e.d(T,{Ku:()=>c,M4:()=>i,Q4:()=>f,UV:()=>t.UV,Uv:()=>s,Y4:()=>t.Y4,in:()=>n,mN:()=>d,o8:()=>r,v8:()=>u,xW:()=>o});var t=e(40538),n=(m=>(m.emerg="critical",m.fatal="critical",m.alert="critical",m.crit="critical",m.critical="critical",m.warn="warning",m.warning="warning",m.err="error",m.eror="error",m.error="error",m.info="info",m.information="info",m.informational="info",m.notice="info",m.dbug="debug",m.debug="debug",m.trace="trace",m.unknown="unknown",m))(n||{}),c=(m=>(m[m.Number=0]="Number",m[m.String=1]="String",m[m.LabelsMap=2]="LabelsMap",m[m.Error=3]="Error",m))(c||{}),s=(m=>(m.none="No de-duplication",m.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",m.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",m.signature="De-duplication of successive lines that have identical punctuation and whitespace.",m))(s||{}),i=(m=>(m.Backward="BACKWARD",m.Forward="FORWARD",m))(i||{});const f=m=>{if(!m)return!1;const l=m;return l.getLogRowContext!==void 0&&l.showContextToggle!==void 0};var u=(m=>(m.LogsVolume="LogsVolume",m.LogsSample="LogsSample",m))(u||{}),r=(m=>(m.FullRange="FullRange",m.Limited="Limited",m))(r||{});const d=(m,l)=>{if(!m)return!1;const p=m;return p.getDataProvider!==void 0&&p.getSupplementaryQuery!==void 0&&p.getSupportedSupplementaryQueryTypes().includes(l)},o=m=>m?m.getLogRowContextUi!==void 0:!1},77346:(Y,T,e)=>{"use strict";e.d(T,{Q:()=>n,V:()=>t});var t=(c=>(c.Section="section",c.Item="item",c))(t||{}),n=(c=>(c[c.Standard=0]="Standard",c[c.Canvas=1]="Canvas",c[c.Custom=2]="Custom",c))(n||{})},49969:(Y,T,e)=>{"use strict";e.d(T,{B:()=>t});var t=(n=>(n.Admin="Admin",n.Editor="Editor",n.Viewer="Viewer",n))(t||{})},82229:(Y,T,e)=>{"use strict";e.d(T,{_:()=>i,mi:()=>f,sf:()=>u,wm:()=>s});var t=e(82897),n=e.n(t),c=e(99098),s=(r=>(r.Auto="auto",r.Vertical="vertical",r.Horizontal="horizontal",r))(s||{}),i=(r=>(r[r.Best=100]="Best",r[r.Good=70]="Good",r[r.OK=50]="OK",r))(i||{});class f{constructor(d,o){this.list=[],this.data=d,this.panel=o,this.dataSummary=this.computeDataSummary()}getListAppender(d){return new u(this.list,d)}computeDataSummary(){const d=this.data?.series||[];let o=0,m=0,l=0,p=0,g=0,y=0,v;for(const E of d){p+=E.length,E.meta?.preferredVisualisationType&&(v=E.meta.preferredVisualisationType);for(const h of E.fields)switch(y++,h.type){case c.fS.number:o+=1;break;case c.fS.time:m+=1;break;case c.fS.string:l+=1;break}E.length>g&&(g=E.length)}return{numberFieldCount:o,timeFieldCount:m,stringFieldCount:l,rowCountTotal:p,rowCountMax:g,fieldCount:y,preferredVisualisationType:v,frameCount:d.length,hasData:p>0,hasTimeField:m>0,hasNumberField:o>0,hasStringField:l>0}}getList(){return this.list}}class u{constructor(d,o){this.list=d,this.defaults=o}append(d){this.list.push((0,t.defaultsDeep)(d,this.defaults))}}},59250:(Y,T,e)=>{"use strict";e.d(T,{$_:()=>f,BV:()=>t,Sg:()=>u,Xy:()=>c,_Z:()=>s,w2:()=>i,zV:()=>n});var t=(r=>(r.alpha="alpha",r.beta="beta",r.stable="stable",r.deprecated="deprecated",r))(t||{}),n=(r=>(r.panel="panel",r.datasource="datasource",r.app="app",r.renderer="renderer",r.secretsmanager="secretsmanager",r))(n||{}),c=(r=>(r.internal="internal",r.valid="valid",r.invalid="invalid",r.modified="modified",r.missing="missing",r))(c||{}),s=(r=>(r.grafana="grafana",r.commercial="commercial",r.community="community",r.private="private",r.core="core",r))(s||{}),i=(r=>(r.missingSignature="signatureMissing",r.invalidSignature="signatureInvalid",r.modifiedSignature="signatureModified",r))(i||{}),f=(r=>(r.dashboard="dashboard",r.page="page",r.panel="panel",r.datasource="datasource",r))(f||{});class u{addConfigPage(d){return this.configPages||(this.configPages=[]),this.configPages.push(d),this}setChannelSupport(d){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},22623:(Y,T,e)=>{"use strict";e.d(T,{D:()=>t,y:()=>n});var t=(c=>(c.link="link",c))(t||{}),n=(c=>(c.DashboardPanelMenu="grafana/dashboard/panel/menu",c))(n||{})},53940:(Y,T,e)=>{"use strict";e.d(T,{x:()=>n});var t=e(59250);function n(c){return c&&c!==t.Xy.valid&&c!==t.Xy.internal}},89749:(Y,T,e)=>{"use strict";e.d(T,{CZ:()=>c,K2:()=>n,p:()=>s,w5:()=>t});var t=(i=>(i.Annotations="annotations",i))(t||{}),n=(i=>(i.Equal="Equal",i.NotEqual="NotEqual",i.EqualRegEx="EqualRegEx",i.NotEqualRegEx="NotEqualRegEx",i))(n||{});const c=i=>i.importFromAbstractQueries!==void 0,s=i=>i.exportToAbstractQueries!==void 0},10540:()=>{"use strict"},21366:()=>{"use strict"},69273:(Y,T,e)=>{"use strict";e.d(T,{$U:()=>n,Bd:()=>t,bU:()=>c});var t=(s=>(s[s.never=0]="never",s[s.onDashboardLoad=1]="onDashboardLoad",s[s.onTimeRangeChanged=2]="onTimeRangeChanged",s))(t||{}),n=(s=>(s[s.disabled=0]="disabled",s[s.alphabeticalAsc=1]="alphabeticalAsc",s[s.alphabeticalDesc=2]="alphabeticalDesc",s[s.numericalAsc=3]="numericalAsc",s[s.numericalDesc=4]="numericalDesc",s[s.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",s[s.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",s))(n||{}),c=(s=>(s[s.dontHide=0]="dontHide",s[s.hideLabel=1]="hideLabel",s[s.hideVariable=2]="hideVariable",s))(c||{})},33536:(Y,T,e)=>{"use strict";e.d(T,{Q:()=>t});var t=(n=>(n.Light="light",n.Dark="dark",n))(t||{})},69098:(Y,T,e)=>{"use strict";e.d(T,{H:()=>t});var t=(n=>(n.Absolute="absolute",n.Percentage="percentage",n))(t||{})},75849:(Y,T,e)=>{"use strict";e.d(T,{JK:()=>i,Rr:()=>f,T_:()=>s,Ys:()=>c});var t=e(40538),n=e(67483);const c=t.iT,s="YYYY-MM-DD HH:mm:ss";function i(){const u=(0,n.CQ)();return{from:(0,n.CQ)(u).subtract(6,"hour"),to:u,raw:{from:"now-6h",to:"now"}}}function f(){return{from:600,to:0}}},5273:()=>{"use strict"},90834:(Y,T,e)=>{"use strict";e.d(T,{U:()=>t});var t=(n=>(n.True="true",n.False="false",n.Null="null",n.Empty="empty",n))(t||{})},32195:(Y,T,e)=>{"use strict";e.d(T,{H:()=>t,e:()=>n});var t=(c=>(c.ValueToText="value",c.RangeToText="range",c.RegexToText="regex",c.SpecialValue="special",c))(t||{}),n=(c=>(c.True="true",c.False="false",c.Null="null",c.NaN="nan",c.NullAndNaN="null+nan",c.Empty="empty",c))(n||{})},48976:(Y,T,e)=>{"use strict";e.d(T,{Mg:()=>s,Tq:()=>n,gv:()=>i,j2:()=>t,v6:()=>c});var t=(f=>(f.Legacy="legacy",f.Standard="standard",f.Custom="custom",f.Datasource="datasource",f))(t||{});class n{}class c extends n{getType(){return"standard"}}class s extends n{getType(){return"custom"}}class i extends n{getType(){return"datasource"}}},23845:(Y,T,e)=>{"use strict";e.d(T,{U:()=>t}),Object.getOwnPropertyDescriptor(Array.prototype,"toArray")||Object.defineProperties(Array.prototype,{get:{value:function(n){return this[n]},writable:!1,enumerable:!1,configurable:!1},set:{value:function(n,c){this[n]=c},writable:!1,enumerable:!1,configurable:!1},add:{value:function(n){this.push(n)},writable:!1,enumerable:!1,configurable:!1},toArray:{value:function(){return this},writable:!1,enumerable:!1,configurable:!1}});function t(n){return new Proxy(n,{get(c,s,i){if(typeof s!="symbol"){const f=+s;if(String(f)===s)return c.get(f)}return Reflect.get(c,s,i)},set(c,s,i,f){if(typeof s!="symbol"){const u=+s;if(String(u)===s)return c.set(u,i),!0}return Reflect.set(c,s,i,f)}})}},91353:(Y,T,e)=>{"use strict";e.d(T,{vo:()=>i,rt:()=>r,j:()=>u});var t=e(30779),n=e(72293),c=e(53908);class s{constructor(){this.properties=[]}addCustomEditor(o){return this.properties.push(o),this}getRegistry(){return new c.B(()=>this.properties)}getItems(){return this.properties}}class i extends s{addNumberInput(o){return this.addCustomEditor({...o,id:o.path,override:t.S.get("number").editor,editor:t.S.get("number").editor,process:n.Oh,shouldApply:o.shouldApply??(()=>!0),settings:o.settings||{}})}addSliderInput(o){return this.addCustomEditor({...o,id:o.path,override:t.S.get("slider").editor,editor:t.S.get("slider").editor,process:n.Oh,shouldApply:o.shouldApply??(()=>!0),settings:o.settings||{}})}addTextInput(o){return this.addCustomEditor({...o,id:o.path,override:t.S.get("text").editor,editor:t.S.get("text").editor,process:n.op,shouldApply:o.shouldApply??(()=>!0),settings:o.settings||{}})}addSelect(o){return this.addCustomEditor({...o,id:o.path,override:t.S.get("select").editor,editor:t.S.get("select").editor,process:n.AE,shouldApply:o.shouldApply?o.shouldApply:()=>!0,settings:o.settings||{options:[]}})}addRadio(o){return this.addCustomEditor({...o,id:o.path,override:t.S.get("radio").editor,editor:t.S.get("radio").editor,process:n.AE,shouldApply:o.shouldApply?o.shouldApply:()=>!0,settings:o.settings||{options:[]}})}addBooleanSwitch(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("boolean").editor,override:t.S.get("boolean").editor,process:n.W4,shouldApply:o.shouldApply?o.shouldApply:()=>!0,settings:o.settings||{}})}addColorPicker(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("color").editor,override:t.S.get("color").editor,process:n.kG,shouldApply:o.shouldApply?o.shouldApply:()=>!0,settings:o.settings||{}})}addUnitPicker(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("unit").editor,override:t.S.get("unit").editor,process:n.VB,shouldApply:o.shouldApply?o.shouldApply:()=>!0,settings:o.settings||{}})}addFieldNamePicker(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("field-name").editor,override:t.S.get("field-name").editor,process:n.kG,shouldApply:o.shouldApply?o.shouldApply:()=>!0,settings:o.settings||{}})}}class f{constructor(o){this.cfg=o,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=m=>{const l=this.cfg.values;return l?l(m):{getValue:p=>m.getValue(`${this.path}.${p}`),onChange:(p,g)=>m.onChange(`${this.path}.${p}`,g)}},this.path=o.path,this.category=o.category,this.defaultValue=o.defaultValue}}function u(d){return d.id==="nested-panel-options"}class r extends s{addNestedOptions(o){const m=new f(o);return this.addCustomEditor(m)}addNumberInput(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("number").editor})}addSliderInput(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("slider").editor})}addTextInput(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("text").editor})}addStringArray(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("strings").editor})}addSelect(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("select").editor})}addMultiSelect(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("multi-select").editor})}addRadio(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("radio").editor})}addBooleanSwitch(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("boolean").editor})}addColorPicker(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("color").editor,settings:o.settings||{}})}addTimeZonePicker(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("timezone").editor,settings:o.settings||{}})}addUnitPicker(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("unit").editor})}addFieldNamePicker(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("field-name").editor})}addDashboardPicker(o){return this.addCustomEditor({...o,id:o.path,editor:t.S.get("dashboard-uid").editor})}}},31290:(Y,T,e)=>{"use strict";e.d(T,{I:()=>c});var t=e(82897),n=e.n(t);function c(s){return typeof s=="number"?s:s===""||s===null||s===void 0||Array.isArray(s)?NaN:typeof s=="boolean"?s?1:0:(0,t.toNumber)(s)}},574:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{moveItemImmutably:()=>n,sortValues:()=>i});var t=e(40538);function n(f,u,r){const d=[...f];return Array.prototype.splice.call(d,r,0,Array.prototype.splice.call(d,u,1)[0]),d}const c=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),s=(f,u)=>f-u;function i(f){return(u,r)=>{if(u===r)return 0;if(r==null||typeof r=="string"&&r.trim()==="")return-1;if(u==null||typeof u=="string"&&u?.trim()==="")return 1;let d=c.compare;return typeof u=="number"&&typeof r=="number"&&(d=s),f===t.As.Descending?d(r,u):d(u,r)}}},66392:(Y,T,e)=>{"use strict";e.d(T,{L:()=>n,n:()=>c});var t=e(53908),n=(s=>(s.Add="+",s.Subtract="-",s.Divide="/",s.Multiply="*",s))(n||{});const c=new t.B(()=>[{id:"+",name:"Add",operation:(s,i)=>s+i},{id:"-",name:"Subtract",operation:(s,i)=>s-i},{id:"*",name:"Multiply",operation:(s,i)=>s*i},{id:"/",name:"Divide",operation:(s,i)=>s/i}])},76015:(Y,T,e)=>{"use strict";e.d(T,{MJ:()=>h,QM:()=>p,uP:()=>m,x5:()=>o});var t=e(82897),n=e.n(t),c=e(26389),s=e.n(c),i=e(53678),f=e(83881),u=e(30471),r=e(99098),d=e(2703),o=(C=>(C[C.full=0]="full",C[C.name=1]="name",C[C.none=2]="none",C))(o||{});function m(C,a){return new p(a).readCSV(C)}var l=(C=>(C[C.Starting=0]="Starting",C[C.InHeader=1]="InHeader",C[C.ReadingRows=2]="ReadingRows",C))(l||{});class p{constructor(a){this.chunk=(P,D)=>{for(let x=0;x<P.data.length;x++){const M=P.data[x];if(M.length<1)continue;const b=M[0];if(b){if(b.startsWith("#")){const R=b.indexOf("#",2);if(R>0){const S=b.slice(1,R),O=S==="name";if(O||{unit:"#"}.hasOwnProperty(S)){this.state===2&&(this.current=new i.v({fields:[]}),this.data.push(this.current));const I=b.slice(R+1);if(O){this.current.addFieldFor(void 0,I);for(let F=1;F<M.length;F++)this.current.addFieldFor(void 0,M[F])}else{const{fields:F}=this.current;for(let w=0;w<F.length;w++){F[w].config||(F[w].config={});const K=F[w].config;K[S]=w===0?I:M[w]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,f.LI)(b)===r.fS.string){for(const S of M)this.current.addFieldFor(void 0,S);this.state=1;continue}this.state=1}}if(this.state,this.state=2,M.length>this.current.fields.length){const{fields:R}=this.current;for(let S=R.length;S<M.length;S++)this.current.addFieldFor(M[S]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(M),this.callback&&this.callback.onRow(M)}},a||(a={}),this.config=a.config||{},this.callback=a.callback,this.current=new i.v({fields:[]}),this.state=0,this.data=[]}readCSV(a){this.current=new i.v({fields:[]}),this.data=[this.current];const P={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return s().parse(a,P),this.data}}function g(C,a){if(C==null)return"";const P=C.toString();return P.includes('"')?a.quoteChar+P.replace(/"/gi,'""')+a.quoteChar:P.includes(`
`)||a.delimiter&&P.includes(a.delimiter)?a.quoteChar+P+a.quoteChar:P}function y(C,a){return C.display?P=>{const D=C.display(P);return g((0,d.zc)(D),a)}:P=>g(P,a)}function v(C,a,P){const D=C==="name",x=C==="type";for(const M of a){const b=M.config;if(D||x||b&&b.hasOwnProperty(C)){let R="#"+C+"#";for(let S=0;S<a.length;S++){S>0&&(R=R+P.delimiter);let O=a[S].name;x?O=a[S].type:D||(O=a[S].config[C]),O&&(R=R+g(O,P))}return R+P.newline}}return""}function E(){const C=["x","y"];return C.toLocaleString?C.toLocaleString().charAt(1):","}function h(C,a){if(!C)return"";a=(0,t.defaults)(a,{delimiter:E(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let P=a.useExcelHeader?`sep=${a.delimiter}${a.newline}`:"";for(const D of C){const{fields:x}=D;if(x.length===0)continue;if(a.headerStyle===0)P=P+v("name",x,a)+v("type",x,a)+v("unit",x,a)+v("dateFormat",x,a);else if(a.headerStyle===1){for(let b=0;b<x.length;b++)b>0&&(P+=a.delimiter),P+=`"${(0,u.CZ)(x[b],D).replace(/"/g,'""')}"`;P+=a.newline}const M=x[0].values.length;if(M>0){const b=x.map(R=>y(R,a));for(let R=0;R<M;R++){for(let S=0;S<x.length;S++){S>0&&(P=P+a.delimiter);const O=x[S].values[R];O!==null&&(P=P+b[S](O))}P=P+a.newline}}P=P+a.newline}return P}},94976:(Y,T,e)=>{"use strict";e.d(T,{W:()=>c,_:()=>s});var t=e(72196),n=e(49187);const c={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function s(r){const{onClickFn:d,replaceVariables:o,link:m,scopedVars:l,range:p,field:g,internalLink:y}=r,v=f(m.internal?.query,l,o),E=f(m.internal?.panelsState,l,o),h=m.title?m.title:y.datasourceName;return{title:o(h,l),href:i(y.datasourceUid,v,p,E),onClick:d?()=>{d({datasourceUid:y.datasourceUid,query:v,panelsState:E,range:p})}:void 0,target:m?.targetBlank?"_blank":"_self",origin:g}}function i(r,d,o,m){return t.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,n.S)({range:o.raw,datasource:r,queries:[d],panelsState:m}))}`)}function f(r,d,o){if(!r)return r;if(typeof r=="string")return o(r,d);const m=JSON.parse(JSON.stringify(r));return u(m,d,o)}function u(r,d,o){for(const m of Object.keys(r))typeof r[m]=="string"?r[m]=o(r[m],d):typeof r[m]=="object"&&r[m]!==null&&(r[m]=u(r[m],d,o));return r}},73446:(Y,T,e)=>{"use strict";e.d(T,{BT:()=>i,HD:()=>l,Mf:()=>v,TX:()=>m,_R:()=>u,cv:()=>s,fd:()=>p,fi:()=>r,hz:()=>o,iU:()=>c,nx:()=>d,tp:()=>g,uw:()=>y,z_:()=>f});var t=e(82897),n=e.n(t);function c(E){return{uid:E.uid,type:E.type}}function s(E){return typeof E=="object"&&typeof E?.uid=="string"}function i(E){if(s(E))return E.uid;if((0,t.isString)(E))return E}const f=(E,h)=>C=>{p(E,h,C.currentTarget.value)},u=(E,h)=>C=>{g(E,h,C.currentTarget.value)},r=(E,h)=>C=>{y(E,h,C.currentTarget.value)},d=(E,h)=>C=>{g(E,h,C.value)},o=(E,h)=>C=>{g(E,h,C.currentTarget.checked)},m=(E,h)=>C=>{y(E,h,C.value)},l=(E,h)=>C=>{v(E,h)};function p(E,h,C){const a=E.options;E.onOptionsChange({...a,[h]:C})}const g=(E,h,C)=>{const a=E.options;E.onOptionsChange({...a,jsonData:{...a.jsonData,[h]:C}})},y=(E,h,C)=>{const a=E.options;E.onOptionsChange({...a,secureJsonData:{...a.secureJsonData?a.secureJsonData:{},[h]:C}})},v=(E,h)=>{const C=E.options;E.onOptionsChange({...C,secureJsonData:{...C.secureJsonData?C.secureJsonData:{},[h]:""},secureJsonFields:{...C.secureJsonFields,[h]:!1}})}},55024:(Y,T,e)=>{"use strict";e.d(T,{d:()=>n});const t={},n=(c,s,i)=>{let f=`[Deprecation warning] ${c}: ${s} is deprecated`;i&&(f+=`. Use ${i} instead`);const u=Date.now(),r=t[f];(!r||u-r>1e4)&&(console.warn(f),t[f]=u)}},65180:(Y,T,e)=>{"use strict";e.d(T,{x:()=>t});var t=(n=>(n[n.Transformations=0]="Transformations",n[n.FieldConfig=1]="FieldConfig",n[n.FieldConfigOverrides=2]="FieldConfigOverrides",n))(t||{})},44103:(Y,T,e)=>{"use strict";e.d(T,{H:()=>c,k:()=>n});var t=e(52666);function n({xField:s,yField:i,nullValueMode:f}){const u=s.values,r=i.values,d=u.length;if(r.length!==d)throw new Error("Unexpected field length");const o=f===t.Gl.Ignore,m=f===t.Gl.AsZero,l=[];for(let p=0;p<d;p++){const g=u[p];let y=r[p];if(y===null){if(o)continue;m&&(y=0)}g!==null&&l.push([g,y])}return l}function c(s,i){if(!i.from||!i.to||!s||s.length===0)return[];const f=i.from.valueOf(),u=i.to.valueOf(),r=s[0][1];return[[f,r],[u,r]]}},39358:(Y,T,e)=>{"use strict";e.d(T,{LH:()=>l.L,x5:()=>i.x5,QM:()=>i.QM,WC:()=>C.W,xV:()=>a.x,vo:()=>y.vo,HU:()=>M.HU,zG:()=>p.z,rt:()=>y.rt,Bz:()=>n.B,IX:()=>D.I,sq:()=>t,nk:()=>l.n,ZC:()=>d,Jb:()=>M.Jb,d9:()=>s.d,FT:()=>f.FT,IU:()=>f.IU,aA:()=>f.aA,iU:()=>c.iU,BT:()=>c.BT,k8:()=>v.k,HE:()=>v.H,e4:()=>o,dP:()=>u.d,fp:()=>m,cv:()=>c.cv,Qr:()=>r.Q,uT:()=>E.u,s2:()=>P.s,_N:()=>C._,VS:()=>f.VS,Hh:()=>r.H,_R:()=>c._R,hz:()=>c.hz,nx:()=>c.nx,z_:()=>c.z_,HD:()=>c.HD,fi:()=>c.fi,TX:()=>c.TX,J8:()=>f.J8,uP:()=>i.uP,O9:()=>u.O,S:()=>h.S,MJ:()=>i.MJ,Er:()=>g.E,tp:()=>c.tp,fd:()=>c.fd,Mf:()=>c.Mf,uw:()=>c.uw,Cj:()=>h.Cj,xc:()=>x.x});var t=e(574),n=e(53908),c=e(73446),s=e(55024),i=e(76015),f=e(7569),u=e(56190),r=e(61618);const d=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],o=b=>{let R,S,O=Number.MAX_VALUE;for(let U=0;U<b.values.length;U++){const I=b.values[U];if(R!==void 0){const F=I-R;S===void 0&&(O=F),F<O&&(O=F)}R=I}return O},m=b=>{for(let R=0;R<b.values.length;R++){const S=b.values[R];if(S!=null){const O=S.toString();if(O.length===13&&O%1e3!==0)return!0}}return!1};var l=e(66392),p=e(92468),g=e(13572),y=e(91353),v=e(44103),E=e(72196),h=e(49187),C=e(94976),a=e(65180),P=e(85194),D=e(31290),x=e(32921),M=e(2576)},7569:(Y,T,e)=>{"use strict";e.d(T,{FT:()=>c,IU:()=>s,J8:()=>n,VS:()=>i,aA:()=>f});const t=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function n(u){const r={};return u.replace(t,(d,o,m,l)=>(r[o]=l,"")),r}function c(u){return u.reduce((r,d)=>{if(!d)throw new Error("Need parsed labels to find common labels.");return Object.keys(d).forEach(o=>{(r[o]===void 0||r[o]!==d[o])&&delete r[o]}),Object.keys(r).forEach(o=>{d[o]===void 0&&delete r[o]}),r},{...u[0]})}function s(u,r){const d={...u};return Object.keys(r).forEach(o=>{delete d[o]}),d}function i(u,r){if(!u)return!0;for(const[d,o]of Object.entries(u))if(!r||r[d]!==o)return!1;return!0}function f(u,r="",d){if(!u||Object.keys(u).length===0)return r;const m=Object.keys(u).sort().map(l=>`${l}="${u[l]}"`).join(", ");return d?m:["{",m,"}"].join("")}},72196:(Y,T,e)=>{"use strict";e.d(T,{u:()=>m});var t=e(63418),n=e(49187);let c={appSubUrl:""},s,i;const f=l=>{try{return new URL(l)}catch{return}},u=l=>{const p=f(l);if(p&&p.origin!==window.location.origin)return l;const g=c.appSubUrl??"",y=g.endsWith("/")?1:0,v=l.startsWith("http");let E=g;return(!l.startsWith("/")||v)&&(E=`${window.location.origin}${g}`),l.length>0&&l.indexOf(E)===0?l.slice(E.length-y):l},r=l=>l.startsWith("/")?`${c.appSubUrl}${u(l)}`:l,m={initialize:l=>{c=l.config,s=l.getTimeRangeForUrl,i=l.getVariablesUrlParams},stripBaseFromUrl:u,assureBaseUrl:r,updateSearchParams:(l,p)=>{const g=new URLSearchParams(p);try{const y=new URL(l);return g.forEach((v,E)=>y.searchParams.set(E,v)),y.href}catch{const y=new URLSearchParams(l);return g.forEach((v,E)=>{y.set(E,v)}),"?"+y.toString()}},getTimeRangeUrlParams:()=>s?n.Cj.toUrlParams(s()):null,getVariablesUrlParams:l=>{if(!i)return null;const p=i(l);return n.Cj.toUrlParams(p)},getUrlForPartial:(l,p)=>{const g=n.Cj.parseKeyValue(l.search.startsWith("?")?l.search.substring(1):l.search);for(const y of Object.keys(p))p[y]===null||p[y]===void 0?delete g[y]:g[y]=p[y];return r(n.Cj.renderUrl(l.pathname,g))},processUrl:l=>c.disableSanitizeHtml?l:t.QX.sanitizeUrl(l)}},85194:(Y,T,e)=>{"use strict";e.d(T,{s:()=>t});function t(n){return new Proxy(n,{apply(c,s,i){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(c,i,s.constructor)}})}},92468:(Y,T,e)=>{"use strict";e.d(T,{z:()=>t});var t=(n=>(n.id="id",n.title="title",n.subTitle="subtitle",n.mainStat="mainstat",n.secondaryStat="secondarystat",n.arc="arc__",n.icon="icon",n.color="color",n.source="source",n.target="target",n.detail="detail__",n))(t||{})},56190:(Y,T,e)=>{"use strict";e.d(T,{O:()=>t,d:()=>n});function t(c,s=0){if(Number.isInteger(c))return c;let i=10**s,f=c*i*(1+Number.EPSILON);return Math.round(f)/i}function n(c){return((""+c).split(".")[1]||"").length}},61618:(Y,T,e)=>{"use strict";e.d(T,{H:()=>t,Q:()=>n});const t=c=>Object.keys(c).reduce((s,i)=>(c[i]!==void 0&&(s[i]=c[i]),s),{}),n=c=>typeof c=="object"&&c!==null&&Object.keys(c).length===0},13572:(Y,T,e)=>{"use strict";e.d(T,{E:()=>t});const t=n=>({label:n,value:n})},49187:(Y,T,e)=>{"use strict";e.d(T,{Cj:()=>r,S:()=>d});/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function t(o,m){return m&&Object.keys(m).length>0&&(o+="?"+c(m)),o}function n(o,m){return encodeURIComponent(o).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,m?"%20":"+").replace(/[!'()*]/g,function(l){return"%"+l.charCodeAt(0).toString(16).toUpperCase()})}function c(o){const m=[],l=/\[\]$/,p=v=>Object.prototype.toString.call(v)==="[object Array]",g=(v,E)=>{if(E=typeof E=="function"?E():E===null||E===void 0?"":E,typeof E!="boolean")m[m.length]=n(v,!0)+"="+n(E,!0);else{const h=E?"":"="+n("false",!0);m[m.length]=n(v,!0)+h}},y=(v,E)=>{let h,C,a;if(v)if(p(E))for(h=0,C=E.length;h<C;h++)l.test(v)?g(v,E[h]):y(v,E[h]);else if(E&&String(E)==="[object Object]")for(a in E)y(v+"["+a+"]",E[a]);else g(v,E);else if(p(E))for(h=0,C=E.length;h<C;h++)g(E[h].name,E[h].value);else for(a in E)y(a,E[a]);return m};return y("",o).join("&")}function s(o,m){if(m!=null&&m!==""){const l=o.indexOf("?");l!==-1?o.length-l>1&&(o+="&"):o+="?",o+=m}return o}function i(){const m=window.location.search.substring(1).split("&"),l={};for(const p of m){const g=p.split("=");if(g.length>1){const y=decodeURIComponent(g[0]),v=decodeURIComponent(g[1]);y in l?l[y]=[...l[y],v]:l[y]=[v]}else if(g.length===1){const y=decodeURIComponent(g[0]);l[y]=!0}}return l}function f(o){const m={},l=(o||"").split("&");for(let p of l){let g,y,v;if(p&&(y=p=p.replace(/\+/g,"%20"),g=p.indexOf("="),g!==-1&&(y=p.substring(0,g),v=p.substring(g+1)),y=u(y),y!==void 0)){v=v!==void 0?u(v):!0;let E;typeof v=="string"&&v!==""?E=v==="true"||v==="false"?v==="true":v:E=v,m.hasOwnProperty(y)?Array.isArray(m[y])?m[y].push(v):m[y]=[m[y],isNaN(E)?v:E]:m[y]=isNaN(E)?v:E}}return m}function u(o){try{return decodeURIComponent(o)}catch{return}}const r={renderUrl:t,toUrlParams:c,appendQueryToUrl:s,getUrlSearchParams:i,parseKeyValue:f};function d(o,m){return m!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(o)}},2576:(Y,T,e)=>{"use strict";e.d(T,{HU:()=>f,Jb:()=>u,vh:()=>s});var t=e(92103),n=e(79086),c=e(32195);function s(d,o){for(const m of d)switch(m.type){case c.H.ValueToText:if(o==null)continue;const l=m.options[o];if(l)return l;break;case c.H.RangeToText:if(o==null)continue;const p=parseFloat(o);if(isNaN(p)||!isNaN(m.options.from)&&p<m.options.from||!isNaN(m.options.to)&&p>m.options.to)continue;return m.options.result;case c.H.RegexToText:if(o==null||typeof o!="string")continue;const v=(0,n.jO)(m.options.pattern);if(o.match(v)){const E={...m.options.result};return E.text!=null&&(E.text=o.replace(v,m.options.result.text||"")),E}case c.H.SpecialValue:switch(m.options.match){case c.e.Null:{if(o==null)return m.options.result;break}case c.e[NaN]:{if(isNaN(o))return m.options.result;break}case c.e.NullAndNaN:{if(isNaN(o)||o==null)return m.options.result;break}case c.e.True:{if(o===!0||o==="true")return m.options.result;break}case c.e.False:{if(o===!1||o==="false")return m.options.result;break}case c.e.Empty:{if(o==="")return m.options.result;break}}}return null}function i(d){return(typeof d=="number"||typeof d=="string"&&d.trim()!=="")&&!isNaN(d)}var f=(d=>(d[d.ValueToText=1]="ValueToText",d[d.RangeToText=2]="RangeToText",d))(f||{});function u(d,o){const m=[];let l=d.mappingType;if(d.mappingType||(d.valueMaps&&d.valueMaps.length?l=1:d.rangeMaps&&d.rangeMaps.length&&(l=2)),l===1)for(let p=0;p<d.valueMaps.length;p++){const g=d.valueMaps[p];m.push(r({...g,id:p,type:c.H.ValueToText},d.fieldConfig?.defaults?.thresholds||o))}else if(l===2)for(let p=0;p<d.rangeMaps.length;p++){const g=d.rangeMaps[p];m.push(r({...g,id:p,type:c.H.RangeToText},d.fieldConfig?.defaults?.thresholds||o))}return m}function r(d,o){const m={type:c.H.ValueToText,options:{}},l=[];let p;const g=parseFloat(d.text);if(o&&!isNaN(g)){const y=(0,t.m1)(g,o.steps);y&&y.color&&(p=y.color)}switch(d.type){case 1:case c.H.ValueToText:d.value!=null&&(d.value==="null"?l.push({type:c.H.SpecialValue,options:{match:c.e.Null,result:{text:d.text,color:p}}}):m.options[String(d.value)]={text:d.text,color:p});break;case 2:case c.H.RangeToText:d.from==="null"||d.to==="null"?l.push({type:c.H.SpecialValue,options:{match:c.e.Null,result:{text:d.text,color:p}}}):l.push({type:c.H.RangeToText,options:{from:+d.from,to:+d.to,result:{text:d.text,color:p}}});break}return Object.keys(m.options).length>0&&l.unshift(m),l[0]}},32921:(Y,T,e)=>{"use strict";e.d(T,{x:()=>i});var t=e(12877),n=e(25740),c=e(46978),s=e(82615);function i({whileLoading:f,source:u}){return(0,t.T)((0,n.H)(200).pipe((0,c.h)(f),(0,s.R)(u)),u)}},22078:(Y,T,e)=>{"use strict";e.d(T,{Cf:()=>t.Cf,FH:()=>t.FH,IR:()=>t.IR,QW:()=>t.QW,Qj:()=>t.Qj,SP:()=>t.SP,SR:()=>t.SR,Td:()=>t.Td,bn:()=>t.bn,br:()=>t.br,q2:()=>t.q2,vb:()=>t.vb,zc:()=>t.zc});var t=e(2703)},7897:(Y,T,e)=>{"use strict";e.d(T,{Aq:()=>n,Yh:()=>u,dT:()=>i,i7:()=>r});var t=e(2703);function n(d,o){const m=["","K","M","B","T"],l=(0,t.Qj)(1e3,m);return(p,g,y)=>{if(p==null)return{text:""};const v=p<0;v&&(p=Math.abs(p));const E=l(p,g,y);return o?E.suffix=E.suffix!==void 0?`${E.suffix}${d}`:void 0:E.prefix=d,v&&(E.prefix=`-${E.prefix?.length?E.prefix:""}`),E}}const c=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],s=c.indexOf("");function i(d){const o=c.findIndex(m=>m.normalize("NFKD")===d.normalize("NFKD"));return o<0?0:o-s}const f=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function u(d,o=0){const m=f.map(l=>" "+l+d);return(0,t.Qj)(1024,m,o)}function r(d,o=0){const m=c.map(l=>" "+l+d);return(0,t.Qj)(1e3,m,s+o)}},2703:(Y,T,e)=>{"use strict";e.d(T,{IR:()=>te,zc:()=>Q,Cf:()=>Me,QW:()=>st,Td:()=>Ke,br:()=>ue,SP:()=>se,Qj:()=>q,SR:()=>ae,vb:()=>pe,FH:()=>G,bn:()=>ge,q2:()=>ne});var t=e(82897);function n(Ie,Ve){return Ie===null?{text:""}:{text:G(Ie,Ve),suffix:"%"}}function c(Ie,Ve){return Ie===null?{text:""}:{text:G(100*Ie,Ve),suffix:"%"}}function s(Ie,Ve){if(Ie==null)return{text:""};const _e=i(Ie,Ve);return _e.text.substring(0,1)==="-"?_e.text="-0x"+_e.text.substring(1):_e.text="0x"+_e.text,_e}function i(Ie,Ve){return Ie==null?{text:""}:{text:parseFloat(G(Ie,Ve)).toString(16).toUpperCase()}}function f(Ie,Ve){return Ie==null?{text:""}:{text:Ie.toExponential(Ve??void 0)}}var u=e(77258),r=e(82410),d=e(67483),o=(Ie=>(Ie.Year="year",Ie.Month="month",Ie.Week="week",Ie.Day="day",Ie.Hour="hour",Ie.Minute="minute",Ie.Second="second",Ie.Millisecond="millisecond",Ie))(o||{});const m=["year","month","week","day","hour","minute","second","millisecond"],l={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function p(Ie,Ve){return Ie===null?{text:""}:Math.abs(Ie)<1e3?{text:G(Ie,Ve),suffix:" ns"}:Math.abs(Ie)<1e6?ge(Ie/1e3,Ve," \xB5s"):Math.abs(Ie)<1e9?ge(Ie/1e6,Ve," ms"):Math.abs(Ie)<6e10?ge(Ie/1e9,Ve," s"):Math.abs(Ie)<36e11?ge(Ie/6e10,Ve," min"):Math.abs(Ie)<864e11?ge(Ie/36e11,Ve," hour"):ge(Ie/864e11,Ve," day")}function g(Ie,Ve){return Ie===null?{text:""}:Math.abs(Ie)<1e3?{text:G(Ie,Ve),suffix:" \xB5s"}:Math.abs(Ie)<1e6?ge(Ie/1e3,Ve," ms"):ge(Ie/1e6,Ve," s")}function y(Ie,Ve,_e){return Ie===null?{text:""}:Math.abs(Ie)<1e3?{text:G(Ie,Ve),suffix:" ms"}:Math.abs(Ie)<6e4?ge(Ie/1e3,Ve," s"):Math.abs(Ie)<36e5?ge(Ie/6e4,Ve," min"):Math.abs(Ie)<864e5?ge(Ie/36e5,Ve," hour"):Math.abs(Ie)<31536e6?ge(Ie/864e5,Ve," day"):ge(Ie/31536e6,Ve," year")}function v(Ie,Ve){if(Ie!=null&&Ve!==null&&Ve!==void 0)return Ie-Ve}function E(Ie,Ve){return Ie===null?{text:""}:Ie===0?{text:"0",suffix:" s"}:Math.abs(Ie)<1e-6?ge(Ie*1e9,Ve," ns"):Math.abs(Ie)<.001?ge(Ie*1e6,Ve," \xB5s"):Math.abs(Ie)<1?ge(Ie*1e3,Ve," ms"):Math.abs(Ie)<60?{text:G(Ie,Ve),suffix:" s"}:Math.abs(Ie)<3600?ge(Ie/60,Ve," min"):Math.abs(Ie)<86400?ge(Ie/3600,Ve," hour"):Math.abs(Ie)<604800?ge(Ie/86400,Ve," day"):Math.abs(Ie)<31536e3?ge(Ie/604800,Ve," week"):ge(Ie/31556900,Ve," year")}function h(Ie,Ve){return Ie===null?{text:""}:Math.abs(Ie)<60?{text:G(Ie,Ve),suffix:" min"}:Math.abs(Ie)<1440?ge(Ie/60,Ve," hour"):Math.abs(Ie)<10080?ge(Ie/1440,Ve," day"):Math.abs(Ie)<604800?ge(Ie/10080,Ve," week"):ge(Ie/525948,Ve," year")}function C(Ie,Ve){return Ie===null?{text:""}:Math.abs(Ie)<24?{text:G(Ie,Ve),suffix:" hour"}:Math.abs(Ie)<168?ge(Ie/24,Ve," day"):Math.abs(Ie)<8760?ge(Ie/168,Ve," week"):ge(Ie/8760,Ve," year")}function a(Ie,Ve){return Ie===null?{text:""}:Math.abs(Ie)<7?{text:G(Ie,Ve),suffix:" day"}:Math.abs(Ie)<365?ge(Ie/7,Ve," week"):ge(Ie/365,Ve," year")}function P(Ie,Ve,_e){if(Ie===null)return{text:""};if(Ie===0)return{text:"0",suffix:" "+_e+"s"};if(Ie<0){const ye=P(-Ie,Ve,_e);return ye.suffix||(ye.suffix=""),ye.suffix+=" ago",ye}Ie*=l[_e]*1e3;const tt=[];let dt=!1,Oe=0;Ve!=null&&(Oe=Ve);for(let ye=0;ye<m.length&&Oe>=0;ye++){const Pe=l[m[ye]]*1e3,be=Ie/Pe;if(be>=1||dt){dt=!0;const Be=Math.floor(be),ze=m[ye]+(Be!==1?"s":"");tt.push(Be+" "+ze),Ie=Ie%Pe,Oe--}}return{text:tt.join(", ")}}function D(Ie,Ve){if(Ie===null)return{text:""};if(Ie<1e3)return{text:(0,d.zh)(Ie).format("SSS\\m\\s")};if(Ie<6e4){let Oe="ss\\s:SSS\\m\\s";return Ve===0&&(Oe="ss\\s"),{text:(0,d.zh)(Ie).format(Oe)}}if(Ie<36e5){let Oe="mm\\m:ss\\s:SSS\\m\\s";return Ve===0?Oe="mm\\m":Ve===1&&(Oe="mm\\m:ss\\s"),{text:(0,d.zh)(Ie).format(Oe)}}let _e="mm\\m:ss\\s:SSS\\m\\s";const tt=`${("0"+Math.floor((0,d.Ks)(Ie,"milliseconds").asHours())).slice(-2)}h`;return Ve===0?_e="":Ve===1?_e="mm\\m":Ve===2&&(_e="mm\\m:ss\\s"),{text:_e?`${tt}:${(0,d.zh)(Ie).format(_e)}`:tt}}function x(Ie,Ve){return P(Ie,Ve,"millisecond")}function M(Ie,Ve){return P(Ie,Ve,"second")}function b(Ie){if(Ie<0){const Oe=b(-Ie);return Oe.suffix||(Oe.suffix=""),Oe.suffix+=" ago",Oe}const Ve=[],_e=Math.floor(Ie/3600),tt=Math.floor(Ie%3600/60),dt=Math.floor(Ie%3600%60);return _e>9?Ve.push(""+_e):Ve.push("0"+_e),tt>9?Ve.push(""+tt):Ve.push("0"+tt),dt>9?Ve.push(""+dt):Ve.push("0"+dt),{text:Ve.join(":")}}function R(Ie){if(Ie<0){const dt=R(-Ie);return dt.suffix||(dt.suffix=""),dt.suffix+=" ago",dt}let Ve="";const _e=Math.floor(Ie/(24*3600));_e>0&&(Ve=_e+" d ");const tt=b(Ie-_e*24*3600);return{text:Ve+tt.text}}function S(Ie,Ve){return E(Ie/100,Ve)}function O(Ie,Ve){return D(Ie,Ve)}function U(Ie,Ve){return D(Ie*1e3,Ve)}function I(Ie,Ve){return(_e,tt,dt,Oe)=>Ve&&(0,d.CQ)().isSame(_e,"day")?{text:(0,u.dq)(_e,{format:Ve,timeZone:Oe})}:{text:(0,u.dq)(_e,{format:Ie,timeZone:Oe})}}const F=I("YYYY-MM-DD HH:mm:ss"),w=I("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),K=I("MM/DD/YYYY h:mm:ss a"),L=I("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function V(){return I((0,r.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function H(){return I((0,r.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,r.Ji)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function j(Ie,Ve,_e,tt,dt){return{text:(0,u.dq)(Ie,{format:dt?r.U6.fullDateMS:r.U6.fullDate,timeZone:tt})}}function A(Ie,Ve,_e,tt){return{text:(0,u.E8)(Ie,{timeZone:tt})}}var _=e(7897);const k=()=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:ne("")},{name:"String",id:"string",fn:pe},{name:"short",id:"short",fn:q(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:n},{name:"Percent (0.0-1.0)",id:"percentunit",fn:c},{name:"Humidity (%H)",id:"humidity",fn:ne("%H")},{name:"Decibel",id:"dB",fn:ne("dB")},{name:"Hexadecimal (0x)",id:"hex0x",fn:s},{name:"Hexadecimal",id:"hex",fn:i},{name:"Scientific notation",id:"sci",fn:f},{name:"Locale format",id:"locale",fn:se},{name:"Pixels",id:"pixel",fn:ne("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:ne("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:ne("f/sec\xB2")},{name:"G unit",id:"accG",fn:ne("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:ne("\xB0")},{name:"Radians",id:"radian",fn:ne("rad")},{name:"Gradian",id:"grad",fn:ne("grad")},{name:"Arc Minutes",id:"arcmin",fn:ne("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:ne("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:ne("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:ne("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:ne("mi\xB2")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,_.i7)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,_.i7)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,_.i7)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,_.i7)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,_.i7)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,_.i7)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,_.i7)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,_.i7)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:ne("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:ne("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:ne("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:ne("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:ne("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:ne("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:ne("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:ne("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:ne("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:ne("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:ne("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:ne("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,_.Aq)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,_.Aq)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,_.Aq)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,_.Aq)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,_.Aq)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,_.Aq)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,_.Aq)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,_.Aq)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,_.Aq)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,_.Aq)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,_.Aq)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,_.Aq)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,_.Aq)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,_.Aq)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,_.Aq)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,_.Aq)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,_.Aq)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,_.Aq)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,_.Aq)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,_.Aq)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,_.Aq)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,_.Aq)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,_.Aq)("\u0111",!0)}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,_.Yh)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,_.i7)("B")},{name:"bits(IEC)",id:"bits",fn:(0,_.Yh)("b")},{name:"bits(SI)",id:"decbits",fn:(0,_.i7)("b")},{name:"kibibytes",id:"kbytes",fn:(0,_.Yh)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,_.i7)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,_.Yh)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,_.i7)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,_.Yh)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,_.i7)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,_.Yh)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,_.i7)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,_.Yh)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,_.i7)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,_.i7)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,_.Yh)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,_.i7)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,_.Yh)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,_.i7)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,_.Yh)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,_.Yh)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,_.i7)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,_.i7)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,_.Yh)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,_.Yh)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,_.i7)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,_.i7)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,_.Yh)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,_.Yh)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,_.i7)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,_.i7)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,_.Yh)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,_.Yh)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,_.i7)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,_.i7)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,_.Yh)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,_.Yh)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,_.i7)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,_.i7)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:F},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:w},{name:"Datetime US",id:"dateTimeAsUS",fn:K},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:L},{name:"Datetime local",id:"dateTimeAsLocal",fn:V()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:H()},{name:"Datetime default",id:"dateTimeAsSystem",fn:j},{name:"From Now",id:"dateTimeFromNow",fn:A}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,_.i7)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,_.i7)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,_.i7)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,_.i7)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,_.i7)("W",-1)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:ne("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,_.i7)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,_.i7)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,_.i7)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,_.i7)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,_.i7)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,_.i7)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,_.i7)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,_.i7)("W-Min",1)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,_.i7)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,_.i7)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,_.i7)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,_.i7)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,_.i7)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,_.i7)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,_.i7)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,_.i7)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,_.i7)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,_.i7)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,_.i7)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,_.i7)("dBm")},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,_.i7)("\u03A9")},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,_.i7)("\u03A9",1)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,_.i7)("\u03A9",2)},{name:"Farad (F)",id:"farad",fn:(0,_.i7)("F")},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,_.i7)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,_.i7)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,_.i7)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,_.i7)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,_.i7)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,_.i7)("H",-1)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,_.i7)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,_.i7)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:ne("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:ne("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:ne("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:ne("cfm")},{name:"Litre/hour",id:"litreh",fn:ne("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:ne("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:ne("mL/min")},{name:"Lux (lx)",id:"lux",fn:ne("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,_.i7)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,_.i7)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,_.i7)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,_.i7)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,_.i7)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,_.i7)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,_.i7)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,_.i7)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,_.i7)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,_.i7)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,_.i7)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,_.i7)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,_.i7)("g")},{name:"pound (lb)",id:"masslb",fn:ne("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,_.i7)("g",1)},{name:"metric ton (t)",id:"masst",fn:ne("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,_.i7)("m",-1)},{name:"inch (in)",id:"lengthin",fn:ne("in")},{name:"feet (ft)",id:"lengthft",fn:ne("ft")},{name:"meter (m)",id:"lengthm",fn:(0,_.i7)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,_.i7)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:ne("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,_.i7)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,_.i7)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,_.i7)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,_.i7)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:ne("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:ne("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:ne('"Hg')},{name:"PSI",id:"pressurepsi",fn:q(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,_.i7)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,_.i7)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,_.i7)("Gy")},{name:"rad",id:"radrad",fn:(0,_.i7)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,_.i7)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,_.i7)("Sv",-1)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,_.i7)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,_.i7)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,_.i7)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,_.i7)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,_.i7)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,_.i7)("Sv/h",-1)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,_.i7)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:ne("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,_.i7)("Hz")},{name:"Radians per second (rad/s)",id:"rotrads",fn:ne("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:ne("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:ne("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:ne("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:ne("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,_.i7)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:p},{name:"microseconds (\xB5s)",id:"\xB5s",fn:g},{name:"milliseconds (ms)",id:"ms",fn:y},{name:"seconds (s)",id:"s",fn:E},{name:"minutes (m)",id:"m",fn:h},{name:"hours (h)",id:"h",fn:C},{name:"days (d)",id:"d",fn:a},{name:"duration (ms)",id:"dtdurationms",fn:x},{name:"duration (s)",id:"dtdurations",fn:M},{name:"duration (hh:mm:ss)",id:"dthms",fn:b},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:R},{name:"Timeticks (s/100)",id:"timeticks",fn:S},{name:"clock (ms)",id:"clockms",fn:O},{name:"clock (s)",id:"clocks",fn:U}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:ae("c/s")},{name:"ops/sec (ops)",id:"ops",fn:ae("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:ae("req/s")},{name:"reads/sec (rps)",id:"rps",fn:ae("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:ae("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:ae("io/s")},{name:"counts/min (cpm)",id:"cpm",fn:ae("c/m")},{name:"ops/min (opm)",id:"opm",fn:ae("ops/m")},{name:"requests/min (rpm)",id:"reqpm",fn:ae("req/m")},{name:"reads/min (rpm)",id:"rpm",fn:ae("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:ae("wr/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:ne("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:ne("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:ne("mph")},{name:"knot (kn)",id:"velocityknot",fn:ne("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,_.i7)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,_.i7)("L")},{name:"cubic meter",id:"m3",fn:ne("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:ne("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:ne("dm\xB3")},{name:"gallons",id:"gallons",fn:ne("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:te("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:te("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:te("On","Off")}]}];function Q(Ie){return`${Ie.prefix??""}${Ie.text}${Ie.suffix??""}`}let re=[];const Z={};let oe=!1;function G(Ie,Ve){if(Ie===null)return"";if(Ie===Number.NEGATIVE_INFINITY||Ie===Number.POSITIVE_INFINITY)return Ie.toLocaleString();if(Ve==null&&(Ve=le(Ie)),Ie===0)return Ie.toFixed(Ve);const _e=Ve?Math.pow(10,Math.max(0,Ve)):1,tt=String(Math.round(Ie*_e)/_e);if(tt.indexOf("e")!==-1||Ie===0)return tt;const dt=tt.indexOf("."),Oe=dt===-1?0:tt.length-dt-1;return Oe<Ve?(Oe?tt:tt+".")+String(_e).slice(1,Ve-Oe+1):tt}function le(Ie){const Ve=Math.abs(Ie);let tt=-Math.floor(Math.log(Ve)/Math.LN10)+1;const dt=Math.pow(10,-tt);return Ve/dt>2.25&&++tt,Ie%1===0&&(tt=0),Math.max(0,tt)}function ge(Ie,Ve,_e){return{text:G(Ie,Ve),suffix:_e}}function ne(Ie,Ve){return(_e,tt)=>{if(_e===null)return{text:""};const dt=G(_e,tt);return Ie?Ve?{text:dt,prefix:Ie}:{text:dt,suffix:" "+Ie}:{text:dt}}}function ue(Ie){return Ie&&Ie.startsWith("bool")}function te(Ie,Ve){return _e=>({text:_e?Ie:Ve})}const me=(Ie,Ve)=>Math.log10(Ve)/Math.log10(Ie);function q(Ie,Ve,_e=0){return(tt,dt)=>{if(tt==null)return{text:""};if(tt===Number.NEGATIVE_INFINITY||tt===Number.POSITIVE_INFINITY||isNaN(tt))return{text:tt.toLocaleString()};const Oe=tt===0?0:Math.floor(me(Ie,Math.abs(tt))),ye=Ve[(0,t.clamp)(_e+Oe,0,Ve.length-1)];return{text:G(tt/Ie**(0,t.clamp)(Oe,-_e,Ve.length-_e-1),dt),suffix:ye}}}function se(Ie,Ve){return Ie==null?{text:""}:{text:Ie.toLocaleString(void 0,{maximumFractionDigits:Ve??void 0})}}function ae(Ie){const _e=q(1e3,["","K","M","B","T"]);return(tt,dt,Oe)=>{if(tt===null)return{text:""};const ye=_e(tt,dt,Oe);return ye.suffix+=" "+Ie,ye}}function pe(Ie){return{text:`${Ie}`}}function de(){re=k();for(const Ie of re)for(const Ve of Ie.formats)Z[Ve.id]=Ve.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(Ie=>{const Ve=Z[Ie.to];Ve&&(Z[Ie.from]=Ve)}),oe=!0}function Me(Ie){if(!Ie)return ne("");oe||de();const Ve=Z[Ie];if(!Ve&&Ie){let _e=Ie.indexOf(":");if(_e>0){const tt=Ie.substring(0,_e),dt=Ie.substring(_e+1);if(tt==="prefix")return ne(dt,!0);if(tt==="suffix")return ne(dt,!1);if(tt==="time")return I(dt);if(tt==="si"){const Oe=(0,_.dT)(dt.charAt(0)),ye=Oe===0?dt:dt.substring(1);return(0,_.i7)(ye,Oe)}if(tt==="count")return ae(dt);if(tt==="currency")return(0,_.Aq)(dt);if(tt==="bool"){if(_e=dt.indexOf("/"),_e>=0){const Oe=dt.substring(0,_e),ye=dt.substring(_e+1);return te(Oe,ye)}return te(dt,"-")}}return ne(Ie)}return Ve}function Ke(){return oe||de(),Z}function st(){return oe||de(),re.map(Ie=>({text:Ie.name,submenu:Ie.formats.map(Ve=>({text:Ve.name,value:Ve.id}))}))}},74911:(Y,T,e)=>{"use strict";e.d(T,{d:()=>c});var t=e(23845),n=e(21570);class c extends n.G{constructor(i){return super(),this.buffer=i.buffer||[],this.capacity=this.buffer.length,this.tail=i.append!=="head",this.index=0,this.add=this.getAddFunction(),i.capacity&&this.setCapacity(i.capacity),(0,t.U)(this)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?i=>{this.buffer.push(i),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:i=>{this.buffer.unshift(i),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?i=>{this.buffer[this.index]=i,this.index=(this.index+1)%this.buffer.length}:i=>{let f=this.index-1;f<0&&(f=this.buffer.length-1),this.buffer[f]=i,this.index=f}}setCapacity(i){if(this.capacity===i)return;const f=this.toArray();if(i>this.length)this.buffer=f;else if(i<this.capacity){const u=this.length-i;this.tail?this.buffer=f.slice(u,f.length):this.buffer=f.slice(0,f.length-u)}this.capacity=i,this.index=0,this.add=this.getAddFunction()}setAppendMode(i){const f=i!=="head";f!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=f,this.add=this.getAddFunction())}reverse(){return this.buffer.reverse()}get(i){return this.buffer[(i+this.index)%this.buffer.length]}set(i,f){this.buffer[(i+this.index)%this.buffer.length]=f}get length(){return this.buffer.length}}},21570:(Y,T,e)=>{"use strict";e.d(T,{G:()=>n,s:()=>s});var t=e(77747);class n{*iterator(){for(let f=0;f<this.length;f++)yield this.get(f)}set(f,u){throw"unsupported operation"}add(f){throw"unsupported operation"}push(...f){for(const u of f)this.add(u);return this.length}[Symbol.iterator](){return this.iterator()}forEach(f){return s(this).forEach(f)}map(f){return s(this).map(f)}filter(f){return s(this).filter(f)}at(f){return this.get(f)}toArray(){return(0,t.n)(this)}join(f){return this.toArray().join(f)}toJSON(){return this.toArray()}pop(){throw new Error("Method not implemented.")}concat(...f){throw new Error("Method not implemented.")}reverse(){throw new Error("Method not implemented.")}shift(){throw new Error("Method not implemented.")}sort(f){throw new Error("Method not implemented.")}splice(f,u,...r){throw new Error("Method not implemented.")}unshift(...f){throw new Error("Method not implemented.")}fill(f,u,r){throw new Error("Method not implemented.")}copyWithin(f,u,r){throw new Error("Method not implemented.")}[Symbol.unscopables](){throw new Error("Method not implemented.")}slice(f,u){return this.toArray().slice(f,u)}indexOf(f,u){return this.toArray().indexOf(f,u)}lastIndexOf(f,u){return this.toArray().lastIndexOf(f,u)}every(f,u){return this.toArray().every(f,u)}some(f,u){return this.toArray().some(f,u)}reduce(f,u){throw new Error("Method not implemented.")}reduceRight(f,u){throw new Error("Method not implemented.")}find(f,u){return this.toArray().find(f,u)}findIndex(f,u){return this.toArray().findIndex(f,u)}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.toArray().values()}includes(f,u){return this.toArray().includes(f,u)}flatMap(f,u){return this.toArray().flatMap(f,u)}flat(f){throw new Error("Method not implemented.")}}const c=[];function s(i){return{*[Symbol.iterator](){for(let f=0;f<i.length;f++)yield i.get(f)},forEach(f){for(let u=0;u<i.length;u++)f(i.get(u),u,c)},map(f){const u=[];for(let r=0;r<i.length;r++)u.push(f(i.get(r),r,c));return u},filter(f){const u=[];let r=0;for(const d of this)f(d,r++,c)&&u.push(d);return u}}}},88971:(Y,T,e)=>{"use strict";e.d(T,{o:()=>s});var t=e(23845),n=e(21570),c=e(77747);class s extends n.G{constructor(f,u){return super(),this.source=f,this.order=u,(0,t.U)(this)}get length(){return this.source.length}get(f){return this.source.get(this.order[f])}toArray(){return(0,c.n)(this)}toJSON(){return(0,c.n)(this)}getOrderArray(){return this.order}}},50486:(Y,T,e)=>{"use strict";e.d(T,{l$:()=>s,Gt:()=>i,sq:()=>g,rM:()=>r,dV:()=>f.d,uI:()=>u,$Y:()=>m,rm:()=>p,oH:()=>d.o,sD:()=>n.s});var t=e(23845),n=e(21570),c=e(77747);class s extends n.G{constructor(v=0){return super(),this.length=0,this.source=[],this.length=v,(0,t.U)(this)}setLength(v){if(v>this.length)this.length=v;else if(v<this.length){const E=[];for(const h of this.source)if(E.push(h),h.end>v){h.end=v;break}this.source=E,this.length=v}}append(v){const E={start:this.length,end:this.length+v.length,values:v};return this.length=E.end,this.source.push(E),E}get(v){for(let E=0;E<this.source.length;E++){const h=this.source[E];if(v>=h.start&&v<h.end)return h.values[v-h.start]}}toArray(){return(0,c.n)(this)}toJSON(){return(0,c.n)(this)}}class i extends Array{get buffer(){return this}set buffer(v){this.length=0;const E=v?.length;if(E){let h=65e3,C=Math.ceil(E/h);for(let a=0;a<C;a++)this.push.apply(this,v.slice(a*h,(a+1)*h))}}constructor(v){super(),this.buffer=v??[]}toJSON(){return[...this]}}var f=e(74911);class u extends Array{constructor(v,E){return super(),new Array(E).fill(v)}}class r extends Array{constructor(v,E,h){super();const C=new Array(v.length);for(let a=0;a<C.length;a++)C[a]=h(v[a],E[a]);return C}}var d=e(88971),o=e(2703);class m extends Array{constructor(v,E){return super(),v.map(h=>(0,o.zc)(E(h)))}}var l=e(99098);class p extends Array{constructor(v){super();const E=new Array(v);for(let h=0;h<v;h++)E[h]=h;return E}static newField(v){return{name:"",values:new p(v),type:l.fS.number,config:{min:0,max:v-1}}}}class g extends Array{constructor(v){return super(),v.map(E=>+E)}}},77747:(Y,T,e)=>{"use strict";e.d(T,{n:()=>t});function t(n){const c=Array(n.length);for(let s=0;s<n.length;s++)c[s]=n.get(s);return c}},75552:(Y,T,e)=>{"use strict";e.d(T,{Si:()=>n,ct:()=>t,fV:()=>c,mR:()=>s});var t=(i=>(i.DashboardView="dashboard-view",i.DataRequest="data-request",i))(t||{});const n=i=>Boolean(i.payload.page),c=i=>Boolean(i.payload.interactionName),s=i=>Boolean(i.payload.experimentId)},41818:(Y,T,e)=>{"use strict";e.d(T,{SZ:()=>u,ff:()=>f,r_:()=>s,sm:()=>i});var t=e(35645),n=e(37932),c=e(5494);const s=r=>{(0,c.RP)().addEvent({type:c.ee.MetaAnalytics,payload:r})},i=()=>{const r=n.E1.getLocation(),d=`${t.v.appSubUrl??""}${r.pathname}${r.search}${r.hash}`;(0,c.RP)().addEvent({type:c.ee.Pageview,payload:{page:d}})},f=(r,d)=>{(0,c.RP)().addEvent({type:c.ee.Interaction,payload:{interactionName:r,properties:d}})},u=(r,d,o)=>{(0,c.RP)().addEvent({type:c.ee.ExperimentView,payload:{experimentId:r,experimentGroup:d,experimentVariant:o}})}},53117:(Y,T,e)=>{"use strict";e.d(T,{q:()=>o});var t=e(66111),n=e(73446),c=e(53940),s=e(68183),i=e(8581),f=e(52081),u=e(51613),r=e(86647),d=e(22069);class o extends t.PureComponent{constructor(l){super(l),this.dataSourceSrv=(0,r.F)(),this.state={},this.onChange=(p,g)=>{if(g.action==="clear"&&this.props.onClear){this.props.onClear();return}const y=this.dataSourceSrv.getInstanceSettings(p.value);y&&(this.props.onChange(y),this.setState({error:void 0}))}}componentDidMount(){const{current:l}=this.props;this.dataSourceSrv.getInstanceSettings(l)||this.setState({error:"Could not find data source "+l})}getCurrentValue(){const{current:l,hideTextValue:p,noDefault:g}=this.props;if(!l&&g)return;const y=this.dataSourceSrv.getInstanceSettings(l);if(y)return{label:y.name.slice(0,37),value:y.uid,imgUrl:y.meta.info.logos.small,hideText:p,meta:y.meta};const v=(0,n.BT)(l);return v===d.hr.uid||v===d.hr.name?{label:v,value:v,hideText:p}:{label:(v??"no name")+" - not found",value:v??void 0,imgUrl:"",hideText:p}}getDataSourceOptions(){const{alerting:l,tracing:p,metrics:g,mixed:y,dashboard:v,variables:E,annotations:h,pluginId:C,type:a,filter:P,logs:D}=this.props;return this.dataSourceSrv.getList({alerting:l,tracing:p,metrics:g,logs:D,dashboard:v,mixed:y,variables:E,annotations:h,pluginId:C,filter:P,type:a}).map(M=>({value:M.name,label:`${M.name}${M.isDefault?" (default)":""}`,imgUrl:M.meta.info.logos.small,meta:M.meta}))}render(){const{autoFocus:l,onBlur:p,onClear:g,openMenuOnFocus:y,placeholder:v,width:E,inputId:h,disabled:C=!1,isLoading:a=!1}=this.props,{error:P}=this.state,D=this.getDataSourceOptions(),x=this.getCurrentValue(),M=typeof g=="function";return t.createElement("div",{"aria-label":"Data source picker select container","data-testid":s.wl.components.DataSourcePicker.container},t.createElement(i.Ph,{isLoading:a,disabled:C,"aria-label":s.wl.components.DataSourcePicker.inputV2,inputId:h||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:M,backspaceRemovesValue:!1,onChange:this.onChange,options:D,autoFocus:l,onBlur:p,width:E,openMenuOnFocus:y,maxMenuHeight:500,placeholder:v,noOptionsMessage:"No datasources found",value:x??null,invalid:Boolean(P)||Boolean(this.props.invalid),getOptionLabel:b=>b.meta&&(0,c.x)(b.meta.signature)&&b!==x?t.createElement(f.Lh,{align:"center",justify:"space-between",height:"auto"},t.createElement("span",null,b.label)," ",t.createElement(u.o,{status:b.meta.signature})):b.label||""}))}}o.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}},87670:(Y,T,e)=>{"use strict";e.d(T,{$:()=>c,Z:()=>n});var t=e(66111);let n=({message:s})=>t.createElement("div",null,"Unable to render data: ",s,".");function c(s){n=s}},98825:(Y,T,e)=>{"use strict";e.d(T,{$:()=>n,L:()=>c});var t=e(66111);let n=()=>t.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function c(s){n=s}},87221:(Y,T,e)=>{"use strict";e.d(T,{T:()=>n,t:()=>c});var t=e(66111);let n=({children:s})=>t.createElement("div",null,s);function c(s){n=s}},35645:(Y,T,e)=>{"use strict";e.d(T,{O:()=>i,v:()=>m});var t=e(82897),n=e.n(t),c=e(82410),s=e(21544);class i{constructor(p){this.snapshotEnabled=!0,this.datasources={},this.panels={},this.apps={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.alertingEnabled=!1,this.alertingErrorOrTimeout="",this.alertingNoDataOrNullValues="",this.alertingMinInterval=1,this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.secureSocksDSProxyEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.trustedTypesDefaultPolicyEnabled=!1,this.cspReportOnlyEnabled=!1,this.liveEnabled=!0,this.featureToggles={},this.anonymousEnabled=!1,this.licenseInfo={},this.rendererAvailable=!1,this.dashboardPreviews={systemRequirements:{met:!1,requiredImageRendererPluginVersion:""},thumbnailsExist:!1},this.rendererVersion="",this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.sentry={enabled:!1,dsn:"",customEndpoint:"",sampleRate:1},this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.pluginsCDNBaseURL="",this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:"",alertStateHistoryBackend:void 0,alertStateHistoryPrimary:void 0},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.sqlConnectionLimits={maxOpenConns:100,maxIdleConns:100,connMaxLifetime:14400},this.bootData=p.bootData,this.bootData.user.lightTheme=f(p)==="light",this.isPublicDashboardView=p.bootData.settings.isPublicDashboardView;const g={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,t.merge)(this,g,p),this.buildInfo=p.buildInfo||g.buildInfo,this.dateFormats&&c.U6.update(this.dateFormats),r(this),this.featureToggles.disableAngular&&(this.angularSupportEnabled=!1),this.theme2=(0,s.j)(u(this)),this.theme=this.theme2.v1,this.theme2.flags.topnav=this.featureToggles.topnav}}function f(l){let p="dark";const g=l.bootData.user.theme;return g==="light"||g==="dark"?p=g:g==="system"&&(p=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),p}function u(l){return{colors:{mode:l.bootData.user.lightTheme?"light":"dark"}}}function r(l){if(window.location.href.indexOf("__feature")===-1)return;new URLSearchParams(window.location.search).forEach((g,y)=>{if(y.startsWith("__feature.")){const v=l.featureToggles,E=y.substring(10),h=g==="true"||g==="";h!==v[y]&&(v[E]=h,console.log(`Setting feature toggle ${E} = ${h}`))}})}const d=window.grafanaBootData||{settings:{},user:{},navTree:[]},o=d.settings;o.bootData=d;const m=new i(o)},35670:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{CopyPanelEvent:()=>o.EK,DataSourcePicker:()=>R.q,DataSourceWithBackend:()=>C.CK,EchoEventType:()=>i.ee,FakeEchoSrv:()=>i.rX,GrafanaBootConfig:()=>p.O,HealthCheckError:()=>C.ZA,HealthStatus:()=>C.QO,HistoryWrapper:()=>d._i,MetaAnalyticsEventName:()=>g.ct,PanelDataErrorView:()=>D.Z,PanelRenderer:()=>P.$,PluginPage:()=>b.T,RefreshEvent:()=>o.U5,StreamingFrameAction:()=>r.T0,SystemJS:()=>y.i3,ThemeChangedEvent:()=>o.hD,TimeRangeUpdatedEvent:()=>o.md,config:()=>p.v,createDataSourcePluginEventProperties:()=>O,createPluginEventProperties:()=>S,createQueryRunner:()=>M.AQ,featureEnabled:()=>E.v,frameToMetricFindValue:()=>a.S9,getAngularLoader:()=>n.w,getAppEvents:()=>o.N$,getBackendSrv:()=>t.i,getDataSourceSrv:()=>c.F,getEchoSrv:()=>i.RP,getGrafanaLiveSrv:()=>r.gj,getLegacyAngularInjector:()=>u.V,getLocationSrv:()=>s.w,getPluginExtensions:()=>m.I,getPluginImportUtils:()=>y.bP,getRunRequest:()=>M.Pl,getTemplateSrv:()=>f.J,isExperimentViewEvent:()=>g.mR,isFetchError:()=>t.kW,isInteractionEvent:()=>g.fV,isPageviewEvent:()=>g.Si,isPluginExtensionLink:()=>l.c,loadPluginCss:()=>y.iS,locationSearchToObject:()=>d.Ox,locationService:()=>d.E1,logDebug:()=>h.o7,logError:()=>h.H,logInfo:()=>h.PN,logWarning:()=>h.KE,navigationLogger:()=>d.GQ,registerEchoBackend:()=>i.e6,reportExperimentView:()=>v.SZ,reportInteraction:()=>v.ff,reportMetaAnalytics:()=>v.r_,reportPageview:()=>v.sm,setAngularLoader:()=>n.W,setAppEvents:()=>o.Xw,setBackendSrv:()=>t.jW,setDataSourceSrv:()=>c.w,setEchoSrv:()=>i.tz,setGrafanaLiveSrv:()=>r.cA,setLegacyAngularInjector:()=>u.t,setLocationService:()=>d.ZG,setLocationSrv:()=>s.x,setPluginExtensionGetter:()=>m.o,setPluginImportUtils:()=>y.Qf,setQueryRunnerFactory:()=>M.pD,setRunRequest:()=>M.Iw,setTemplateSrv:()=>f.l,toDataQueryError:()=>x.P,toDataQueryResponse:()=>a.z1,usePluginInteractionReporter:()=>K});var t=e(54899),n=e(11484),c=e(86647),s=e(47458),i=e(5494),f=e(20308),u=e(70926),r=e(75118),d=e(37932),o=e(82378),m=e(54665),l=e(36032),p=e(35645),g=e(75552),y=e(19920),v=e(41818),E=e(66121),h=e(54408),C=e(22069),a=e(32689),P=e(98825),D=e(87670),x=e(77599),M=e(36535),b=e(87221),R=e(53117);function S(V){return{grafana_version:p.v.buildInfo.version,plugin_type:String(V.type),plugin_version:V.info.version,plugin_id:V.id,plugin_name:V.name}}function O(V){return{...S(V.meta),datasource_uid:V.uid}}var U=e(66111),I=e(81129),F=e(58556);const w="grafana_plugin_";function K(){const V=(0,I.g)();return(0,U.useMemo)(()=>{const H=(0,F.v)(V)?O(V.instanceSettings):S(V.meta);return(j,A)=>{if(!L(j))throw new Error(`Interactions reported in plugins should start with: "${w}".`);return(0,v.ff)(j,{...A,...H})}},[V])}function L(V){return V.startsWith(w)&&V.length>w.length}},11484:(Y,T,e)=>{"use strict";e.d(T,{W:()=>n,w:()=>c});let t;function n(s){t=s}function c(){return t}},5494:(Y,T,e)=>{"use strict";e.d(T,{RP:()=>s,e6:()=>i,ee:()=>t,rX:()=>f,tz:()=>c});var t=(u=>(u.Performance="performance",u.MetaAnalytics="meta-analytics",u.Sentry="sentry",u.Pageview="pageview",u.Interaction="interaction",u.ExperimentView="experimentview",u.GrafanaJavascriptAgent="grafana-javascript-agent",u))(t||{});let n;function c(u){n=u}function s(){return n||(n=new f),n}const i=u=>{s().addBackend(u)};class f{constructor(){this.events=[]}flush(){this.events=[]}addBackend(r){}addEvent(r,d){this.events.push(r)}}},37932:(Y,T,e)=>{"use strict";e.d(T,{E1:()=>d,GQ:()=>l,Ox:()=>r,ZG:()=>o,_i:()=>u});var t=e(97594),n=e(49187),c=e(55024),s=e(88383),i=e(73289),f=e(35645);class u{constructor(g){this.history=g||t.lX({basename:f.v.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(g,y){const v=this.history.location,E=this.getSearchObject();for(const C of Object.keys(g))g[C]===null||g[C]===void 0?delete E[C]:E[C]=g[C];const h=n.Cj.renderUrl(v.pathname,E);y?this.history.replace(h,this.history.location.state):this.history.push(h,this.history.location.state)}push(g){this.history.push(g)}replace(g){this.history.replace(g)}reload(){const g=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:g?g+1:1}})}getLocation(){return this.history.location}getSearchObject(){return r(this.history.location.search)}update(g){if((0,c.d)("LocationSrv","update","partial, push or replace"),g.partial&&g.query)this.partial(g.query,g.partial);else{const y={pathname:g.path};g.query&&(y.search=n.Cj.toUrlParams(g.query)),g.replace?this.replace(y):this.push(y)}}}function r(p){let g=typeof p=="number"?String(p):p;return g.length>0?g.startsWith("?")?n.Cj.parseKeyValue(g.substring(1)):n.Cj.parseKeyValue(g):{}}let d=new u;const o=p=>{throw new Error("locationService can be only overriden in test environment")},m=(0,s.h)("Router"),l=m.logger;(0,i.x)("location",d,m)},47458:(Y,T,e)=>{"use strict";e.d(T,{w:()=>c,x:()=>n});let t;function n(s){t=s}function c(){return t}},36535:(Y,T,e)=>{"use strict";e.d(T,{AQ:()=>c,Iw:()=>i,Pl:()=>f,pD:()=>n});let t;const n=u=>{if(t)throw new Error("Runner should only be set when Grafana is starting.");t=u},c=()=>{if(!t)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return t()};let s;function i(u){if(s)throw new Error("runRequest function should only be set once, when Grafana is starting.");s=u}function f(){if(!s)throw new Error("getRunRequest can only be used after Grafana instance has started.");return s}},82378:(Y,T,e)=>{"use strict";e.d(T,{EK:()=>i,N$:()=>r,U5:()=>n,Xw:()=>u,hD:()=>c,md:()=>s});var t=e(55391);class n extends t.m{}n.type="refresh";class c extends t.R{}c.type="theme-changed";class s extends t.R{}s.type="time-range-updated";class i extends t.R{}i.type="copy-panel";let f;function u(d){f=d}function r(){return f}},54899:(Y,T,e)=>{"use strict";e.d(T,{i:()=>s,jW:()=>c,kW:()=>t});function t(i){return typeof i=="object"&&i!==null&&"status"in i&&"data"in i}let n;const c=i=>{n=i},s=()=>n},86647:(Y,T,e)=>{"use strict";e.d(T,{F:()=>c,w:()=>n});let t;function n(s){t=s}function c(){return t}},70926:(Y,T,e)=>{"use strict";e.d(T,{V:()=>c,t:()=>n});let t;const n=s=>{t=s},c=()=>t},75118:(Y,T,e)=>{"use strict";e.d(T,{T0:()=>t,cA:()=>c,gj:()=>s});var t=(i=>(i.Append="append",i.Replace="replace",i))(t||{});let n;const c=i=>{n=i},s=()=>n},54665:(Y,T,e)=>{"use strict";e.d(T,{I:()=>s,o:()=>n});let t;function n(i){if(t)throw new Error("setPluginExtensionGetter() function should only be called once, when Grafana is starting.");t=i}function c(){if(!t)throw new Error("getPluginExtensionGetter() can only be used after the Grafana instance has started.");return t}const s=i=>c()(i)},36032:(Y,T,e)=>{"use strict";e.d(T,{c:()=>n});var t=e(22623);function n(c){return c?c.type===t.D.link&&("path"in c||"onClick"in c):!1}},20308:(Y,T,e)=>{"use strict";e.d(T,{J:()=>c,l:()=>n});let t;const n=s=>{t=s},c=()=>t},22069:(Y,T,e)=>{"use strict";e.d(T,{B9:()=>D,CK:()=>P,PI:()=>x,Pr:()=>E,QO:()=>C,ZA:()=>h,hr:()=>v});var t=e(59980),n=e(65583),c=e(12877),s=e(53704),i=e(59724),f=e(89424),u=e(73446),r=e(8891),d=e(59957),o=e(85194),m=e(35645),l=e(86647),p=e(75118),g=e(54899),y=e(32689);const v=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function E(M){if(!M)return!1;const b=typeof M=="string"?M:M.type;return b===v.type||b===v.name||b==="-100"}class h extends Error{constructor(b,R){super(b),this.details=R,this.name="HealthCheckError"}}var C=(M=>(M.Unknown="UNKNOWN",M.OK="OK",M.Error="ERROR",M))(C||{}),a=(M=>(M.PluginID="X-Plugin-Id",M.DatasourceUID="X-Datasource-Uid",M.DashboardUID="X-Dashboard-Uid",M.PanelID="X-Panel-Id",M.QueryGroupID="X-Query-Group-Id",M.FromExpression="X-Grafana-From-Expr",M))(a||{});class P extends f.MF{constructor(b){super(b),this.streamOptionsProvider=x}query(b){const{intervalMs:R,maxDataPoints:S,queryCachingTTL:O,range:U,requestId:I,hideFromInspector:F=!1}=b;let w=b.targets;this.filterQuery&&(w=w.filter(k=>this.filterQuery(k)));let K=!1;const L=new Set,V=new Set,H=w.map(k=>{let Q=this.getRef(),re=this.id,Z=!0;if(E(k.datasource))return K=!0,{...k,datasource:v};if(k.datasource){const oe=(0,l.F)().getInstanceSettings(k.datasource,b.scopedVars);if(!oe)throw new Error(`Unknown Datasource: ${JSON.stringify(k.datasource)}`);const G=oe.rawRef??(0,u.iU)(oe),le=oe.id;(G.uid!==Q.uid||re!==le)&&(Q=G,re=le,Z=!1)}return Q.type?.length&&L.add(Q.type),Q.uid?.length&&V.add(Q.uid),{...Z?this.applyTemplateVariables(k,b.scopedVars):k,datasource:Q,datasourceId:re,intervalMs:R,maxDataPoints:S,queryCachingTTL:O}});if(!H.length)return(0,t.of)({data:[]});const j={queries:H};if(U&&(j.range=U,j.from=U.from.valueOf().toString(),j.to=U.to.valueOf().toString()),m.v.featureToggles.queryOverLive)return(0,p.gj)().getQueryData({request:b,body:j});const A={};A["X-Plugin-Id"]=Array.from(L).join(", "),A["X-Datasource-Uid"]=Array.from(V).join(", ");let _="/api/ds/query?ds_type="+this.type;return K&&(A["X-Grafana-From-Expr"]="true",_+="&expression=true"),I&&(_+=`&requestId=${I}`),b.dashboardUID&&(A["X-Dashboard-Uid"]=b.dashboardUID),b.panelId&&(A["X-Panel-Id"]=`${b.panelId}`),b.queryGroupId&&(A["X-Query-Group-Id"]=`${b.queryGroupId}`),(0,g.i)().fetch({url:_,method:"POST",data:j,requestId:I,hideFromInspector:F,headers:A}).pipe((0,s.w)(k=>{const Q=(0,y.z1)(k,H);return Q.data?.length&&Q.data.find(re=>re.meta?.channel)?D(Q,b,this.streamOptionsProvider):(0,t.of)(Q)}),(0,i.K)(k=>(0,t.of)((0,y.z1)(k))))}getRequestHeaders(){const b={};return b["X-Plugin-Id"]=this.type,b["X-Datasource-Uid"]=this.uid,b}interpolateVariablesInQueries(b,R){return b.map(S=>this.applyTemplateVariables(S,R))}applyTemplateVariables(b,R){return b}async getResource(b,R,S){const O=this.getRequestHeaders();return(await(0,n.n)((0,g.i)().fetch({...S,method:"GET",headers:S?.headers?{...S.headers,...O}:O,params:R??S?.params,url:`/api/datasources/uid/${this.uid}/resources/${b}`}))).data}async postResource(b,R,S){const O=this.getRequestHeaders();return(await(0,n.n)((0,g.i)().fetch({...S,method:"POST",headers:S?.headers?{...S.headers,...O}:O,data:R??{...R},url:`/api/datasources/uid/${this.uid}/resources/${b}`}))).data}async callHealthCheck(){return(0,n.n)((0,g.i)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(b=>b.data).catch(b=>b.data)}async testDatasource(){return this.callHealthCheck().then(b=>b.status==="OK"?{status:"success",message:b.message}:Promise.reject({status:"error",message:b.message,error:new h(b.message,b.details)}))}}function D(M,b,R){const S=(0,p.gj)();if(!S)return(0,t.of)(M);const O=[],U=[];for(const I of M.data){const F=(0,r.H7)(I.meta?.channel);if(F){const w=I;U.push(S.getDataStream({addr:F,buffer:R(b,w),frame:(0,d.Y)(I)}))}else O.push(I)}return O.length&&U.push((0,t.of)({...M,data:O})),U.length===1?U[0]:(0,c.T)(...U)}const x=(M,b)=>{const R={maxLength:M.maxDataPoints??500,action:p.T0.Append};return M.rangeRaw?.to==="now"&&(R.maxDelta=M.range.to.valueOf()-M.range.from.valueOf()),R};P=(0,o.s)(P)},66121:(Y,T,e)=>{"use strict";e.d(T,{v:()=>n});var t=e(35645);const n=c=>{const{enabledFeatures:s}=t.v.licenseInfo;return s&&s[c]}},54408:(Y,T,e)=>{"use strict";e.d(T,{H:()=>d,KE:()=>u,PN:()=>f,o7:()=>r});var t=e(37916),n=e(48606),c=e(53843),s=e(56986),i=e(35645);function f(o,m){i.v.grafanaJavascriptAgent.enabled&&c.s.api.pushLog([o],{level:s.in.INFO,context:m}),i.v.sentry.enabled&&(0,t.uT)(o,{level:n.z.Info,contexts:m})}function u(o,m){i.v.grafanaJavascriptAgent.enabled&&c.s.api.pushLog([o],{level:s.in.WARN,context:m}),i.v.sentry.enabled&&(0,t.uT)(o,{level:n.z.Warning,contexts:m})}function r(o,m){i.v.grafanaJavascriptAgent.enabled&&c.s.api.pushLog([o],{level:s.in.DEBUG,context:m}),i.v.sentry.enabled&&(0,t.uT)(o,{level:n.z.Debug,contexts:m})}function d(o,m){i.v.grafanaJavascriptAgent.enabled&&c.s.api.pushError(o),i.v.sentry.enabled&&(0,t.Tb)(o,{contexts:m})}},19920:(Y,T,e)=>{"use strict";e.d(T,{Qf:()=>u,bP:()=>r,i3:()=>s,iS:()=>i});var t=e(59587),n=e.n(t),c=e(35645);const s=n();function i(d){const o=c.v.bootData.user.lightTheme?d.light:d.dark;return s.import(`${o}!css`)}let f;function u(d){if(f)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");f=d}function r(){if(!f)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return f}},32689:(Y,T,e)=>{"use strict";e.d(T,{S9:()=>m,z1:()=>u});var t=e(52666),n=e(59957),c=e(83881),s=e(99098),i=e(77599);const f={severity:"info",text:"Cached response"};function u(l,p){const g={data:[],state:t.Gu.Done},y="traceId"in l?l.traceId:void 0;if(y!=null&&(g.traceIds=[y]),l.data?.results){const v=l.data.results,E=p?.length?p.map(a=>a.refId):Object.keys(v),h=r(l),C=[];for(const a of E){const P=v[a];P&&(P.refId=a,C.push(P))}for(const a of C){if(a.error){const P={refId:a.refId,message:a.error,status:a.status};y!=null&&(P.traceId=y),g.error||(g.error={...P}),g.errors?g.errors.push({...P}):g.errors=[{...P}],g.state=t.Gu.Error}if(a.frames?.length){for(let P of a.frames){h&&(P=d(P));const D=(0,n.vP)(P);D.refId||(D.refId=a.refId),g.data.push(D)}continue}if(a.series?.length)for(const P of a.series)P.refId||(P.refId=a.refId),g.data.push((0,c.g0)(P));if(a.tables?.length)for(const P of a.tables)P.refId||(P.refId=a.refId),g.data.push((0,c.g0)(P))}}return l.status&&l.status!==200&&(g.state!==t.Gu.Error&&(g.state=t.Gu.Error),g.error||(g.error=(0,i.P)(l))),g}function r(l){const p=l?.headers;return!p||!p.get?!1:p.get("X-Cache")==="HIT"}function d(l){return{...l,schema:{...l.schema,fields:[...l.schema?.fields??[]],meta:{...l.schema?.meta,notices:[...l.schema?.meta?.notices??[],f],isCachedResponse:!0}}}}function o(l){const p=u(l);if(p.error?.data?.message)return{status:"error",message:p.error.data.message,details:p.error?.data?.error?{message:p.error.data.error}:void 0};if(p.error?.refId&&p.error?.message)return{status:"error",message:p.error.message};throw l}function m(l){if(!l||!l.length)return[];const p=[];let g=l.fields.find(y=>y.type===s.fS.string);if(g||(g=l.fields.find(y=>y.type!==s.fS.time)),g)for(let y=0;y<g.values.length;y++)p.push({text:""+g.values[y]});return p}},45253:(Y,T,e)=>{"use strict";e.d(T,{b:()=>r});var t=e(9892),n=e(66111),c=e(28550),s=e(68183),i=e(72648),f=e(31403),u=e(39904);const r=n.forwardRef(({title:m,onRemove:l,children:p,buttonContent:g,elevated:y,bottomSpacing:v,topSpacing:E,className:h,severity:C="error",...a},P)=>{const D=(0,i.l4)(),x=Boolean(m),M=o(D,C,x,y,v,E),b={error:"alert",warning:"alert",info:"status",success:"status"},R=a.role||b[C],S=a["aria-label"]||m;return n.createElement("div",{ref:P,className:(0,t.cx)(M.alert,h),"data-testid":s.wl.components.Alert.alertV2(C),role:R,"aria-label":S,...a},n.createElement("div",{className:M.icon},n.createElement(u.J,{size:"xl",name:d(C)})),n.createElement("div",{className:M.body},n.createElement("div",{className:M.title},m),p&&n.createElement("div",{className:M.content},p)),l&&!g&&n.createElement("div",{className:M.close},n.createElement(f.zx,{"aria-label":"Close alert",icon:"times",onClick:l,type:"button",fill:"text",variant:"secondary"})),l&&g&&n.createElement("div",{className:M.buttonWrapper},n.createElement(f.zx,{"aria-label":"Close alert",variant:"secondary",onClick:l,type:"button"},g)))});r.displayName="Alert";const d=m=>{switch(m){case"error":case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}},o=(m,l,p,g,y,v)=>{const E=m.colors[l],h=m.shape.borderRadius(),C=(0,c.Z)(E.border).setAlpha(.2).toString();return{alert:t.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${h};
      display: flex;
      flex-direction: row;
      align-items: stretch;
      background: ${E.transparent};
      box-shadow: ${g?m.shadows.z3:"none"};
      padding: ${m.spacing(1,2)};
      border: 1px solid ${C};
      margin-bottom: ${m.spacing(y??2)};
      margin-top: ${m.spacing(v??0)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${m.colors.background.primary};
        z-index: -1;
      }
    `,icon:t.css`
      padding: ${m.spacing(1,2,0,0)};
      color: ${E.text};
      display: flex;
    `,title:(0,t.css)({fontWeight:m.typography.fontWeightMedium}),body:t.css`
      padding: ${m.spacing(1,0)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:t.css`
      padding-top: ${p?m.spacing(.5):0};
      max-height: 50vh;
      overflow-y: auto;
    `,buttonWrapper:t.css`
      margin-left: ${m.spacing(1)};
      display: flex;
      align-items: center;
      align-self: center;
    `,close:t.css`
      position: relative;
      color: ${m.colors.text.secondary};
      background: none;
      display: flex;
      top: -6px;
      right: -14px;
    `}}},30532:(Y,T,e)=>{"use strict";e.d(T,{h:()=>p});var t=e(9892),n=e(82897),c=e(66111),s=e(72648),i=e(24799),f=e(4784);const u=c.memo(()=>{const y=(0,s.wW)(r);return c.createElement("div",{className:y.ellipsis},c.createElement("span",{className:y.firstDot},"."),c.createElement("span",{className:y.secondDot},"."),c.createElement("span",{className:y.thirdDot},"."))});u.displayName="EllipsisAnimated";const r=()=>({ellipsis:(0,t.css)({display:"inline"}),firstDot:(0,t.css)({animation:`${d} 2s linear infinite`}),secondDot:(0,t.css)({animation:`${o} 2s linear infinite`}),thirdDot:(0,t.css)({animation:`${m} 2s linear infinite`})}),d=t.keyframes`
  0% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,o=t.keyframes`
  0% {
    opacity: 0;
  }
  21% {
    opacity: 0.5;
  }
  22% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,m=t.keyframes`
  0% {
    opacity: 0;
  }
  43% {
    opacity: 0.5;
  }
  44% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,l=2*1e3;function p(y){const{invalid:v,loading:E,onFinishChange:h,saveErrorMessage:C="Error saving this value",error:a,children:P,disabled:D,...x}=y,[M,b]=c.useState({isLoading:!1,showSuccess:!1,showError:v}),R=(0,c.useRef)(null);c.useEffect(()=>{let F;if(M.showSuccess){const w=M.showError?0:l;F=setTimeout(()=>{b({...M,showSuccess:!1})},w)}return()=>{window.clearTimeout(F)}},[M]);const S=(0,c.useCallback)(F=>{v||(b({...M,isLoading:!0,showSuccess:!1}),h(F).then(()=>{b({isLoading:!1,showSuccess:!0,showError:!1})}).catch(()=>{b({...M,isLoading:!1,showError:!0})}))},[v,M,h]),O=(0,c.useMemo)(()=>(0,n.debounce)(S,600,{leading:!1}),[S]),U=v||M.showError||void 0,I=(0,s.wW)(g);return c.createElement(c.Fragment,null,c.createElement(i.g,{...x,loading:E||void 0,invalid:U,disabled:D,error:a||M.showError&&C,ref:R,className:I.widthFitContent},c.cloneElement(P(F=>{O(F)}))),M.isLoading&&c.createElement(f.K,{referenceElement:R.current,placement:"right",alternativePlacement:"bottom"},"Saving ",c.createElement(u,null)),M.showSuccess&&c.createElement(f.K,{suffixIcon:"check",referenceElement:R.current,placement:"right",alternativePlacement:"bottom"},"Saved!"))}p.displayName="AutoSaveField";const g=()=>({widthFitContent:(0,t.css)({width:"fit-content"})})},19985:(Y,T,e)=>{"use strict";e.d(T,{C:()=>u});var t=e(9892),n=e(66111),c=e(28550),s=e(72648),i=e(39904),f=e(61860);const u=n.memo(({icon:d,color:o,text:m,tooltip:l,className:p,...g})=>{const y=(0,s.wW)((0,n.useCallback)(E=>r(E,o),[o])),v=n.createElement("div",{className:(0,t.cx)(y.wrapper,p),...g},d&&n.createElement(i.J,{name:d,size:"sm"}),m);return l?n.createElement(f.u,{content:l,placement:"auto"},v):v});u.displayName="Badge";const r=(d,o)=>{let m=d.visualization.getColorByName(o),l="",p="",g="";return d.isDark?(p=(0,c.Z)(m).setAlpha(.15).toString(),l=(0,c.Z)(m).darken(30).toString(),g=(0,c.Z)(m).lighten(15).toString()):(p=(0,c.Z)(m).setAlpha(.15).toString(),l=(0,c.Z)(m).lighten(20).toString(),g=(0,c.Z)(m).darken(20).toString()),{wrapper:t.css`
      display: inline-flex;
      padding: 1px 4px;
      border-radius: ${d.shape.radius.default};
      background: ${p};
      border: 1px solid ${l};
      color: ${g};
      font-weight: ${d.typography.fontWeightRegular};
      gap: 2px;
      font-size: ${d.typography.bodySmall.fontSize};
      line-height: ${d.typography.bodySmall.lineHeight};
      align-items: center;
    `}}},19670:(Y,T,e)=>{"use strict";e.d(T,{xf:()=>P});var t=e(9892),n=e(66111),c=e(28550),s=e(18111),i=e(82229),f=e(69098),u=e(2703),r=e(53768),d=e(72990),o=e(68183),m=e(40538),l=e(4176),p=e(31403),g=e(72777);const y=18,v=50,E=150,h=1.5,C=1,a=10;class P extends n.PureComponent{render(){const{onClick:K,className:L,theme:V}=this.props,{title:H}=this.props.value,j=M(this.props);return K?n.createElement("button",{type:"button",style:j.wrapper,onClick:K,className:(0,t.cx)((0,p.gN)(V),L)},n.createElement("div",{style:j.title},H),this.renderBarAndValue()):n.createElement("div",{style:j.wrapper,className:L},H&&n.createElement("div",{style:j.title},H),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:K,showUnfilled:L,valueDisplayMode:V}=this.props,H=O(this.props);return n.createElement("div",{style:H.wrapper},V!==m.M8.Hidden&&n.createElement(g.W,{"data-testid":o.wl.components.Panels.Visualization.BarGauge.valueV2,value:K,style:H.value}),L&&n.createElement("div",{style:H.emptyBar}),n.createElement("div",{style:H.bar}))}renderRetroBars(){const{display:K,field:L,value:V,itemSpacing:H,alignmentFactors:j,orientation:A,lcdCellWidth:_,text:k,valueDisplayMode:Q,theme:re}=this.props,{valueHeight:Z,valueWidth:oe,maxBarHeight:G,maxBarWidth:le,wrapperWidth:ge,wrapperHeight:ne}=b(this.props),ue=L.min??s.Hx,te=L.max??s.Z3,me=D(A),q=te-ue,se=me?G:le,ae=H,pe=Math.floor(se/_),de=Math.floor((se-ae*pe)/pe),Me=I(this.props),st=F(j||V,Me,oe,Z,A,k),Ie={width:`${ge}px`,height:`${ne}px`,display:"flex"};me?(Ie.flexDirection="column-reverse",Ie.alignItems="center"):(Ie.flexDirection="row",Ie.alignItems="center",st.justifyContent="flex-end");const Ve=[];for(let _e=0;_e<pe;_e++){const tt=ue+q/pe*_e,dt=R(tt,V,K),Oe={borderRadius:re.shape.radius.default};dt.isLit?Oe.backgroundImage=`radial-gradient(${dt.background} 10%, ${dt.backgroundShade})`:Oe.backgroundColor=dt.background,me?(Oe.height=`${de}px`,Oe.width=`${le}px`,Oe.marginTop=`${ae}px`):(Oe.width=`${de}px`,Oe.height=`${G}px`,Oe.marginRight=`${ae}px`),Ve.push(n.createElement("div",{key:_e.toString(),style:Oe}))}return n.createElement("div",{style:Ie},Ve,Q!==m.M8.Hidden&&n.createElement(g.W,{"data-testid":o.wl.components.Panels.Visualization.BarGauge.valueV2,value:V,style:st}))}}P.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:m.QH.Gradient,orientation:i.wm.Horizontal,field:{min:0,max:100,thresholds:{mode:f.H.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0};function D(w){return w===i.wm.Vertical}function x(w){const{height:K,width:L,alignmentFactors:V,orientation:H,text:j}=w,A=V?V.title:w.value.title;if(!A)return{fontSize:0,width:0,height:0,placement:"above"};if(D(H)){const oe=j?.titleSize??14;return{fontSize:oe,width:L,height:oe*h,placement:"below"}}if(K>40){if(j?.titleSize)return{fontSize:j?.titleSize,width:0,height:j.titleSize*h,placement:"above"};const G=Math.max(Math.min(K*.45,v),17);return{fontSize:G/h,width:0,height:G,placement:"above"}}const Q=Math.max(K*.6,y)/h,re=(0,l.X1)(A,Q),Z=Math.min(re.width+15,L*.4);return{fontSize:j?.titleSize??Q,height:0,width:Z,placement:"left"}}function M(w){const K={display:"flex",overflow:"hidden",width:"100%"},L=x(w),V={fontSize:`${L.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return D(w.orientation)?(K.flexDirection="column-reverse",V.textAlign="center"):L.placement==="above"?K.flexDirection="column":(K.flexDirection="row",V.width=`${L.width}px`,V.textAlign="right",V.paddingRight="10px"),{wrapper:K,title:V}}function b(w){const{height:K,width:L,orientation:V,text:H,alignmentFactors:j,valueDisplayMode:A}=w,_=x(w),k=j??w.value,Q=(0,u.zc)(k);let re=0,Z=0,oe=0,G=0,le=0,ge=0;const ne=H?.valueSize??Math.max(_.fontSize,12),te=(0,l.X1)(Q,ne).width+a*2;return D(V)?(H?.valueSize?oe=H.valueSize*C:oe=Math.min(Math.max(K*.1,y),v),G=L,A===m.M8.Hidden&&(oe=0,G=0),re=K-(_.height+oe),Z=L,le=L,ge=K-_.height):(A===m.M8.Hidden?(oe=0,G=0):(oe=K-_.height,G=Math.max(Math.min(L*.2,E),te)),re=K-_.height,Z=L-G-_.width,_.placement==="above"?(le=L,ge=K-_.height):(le=L-_.width,ge=K)),{valueWidth:G,valueHeight:oe,maxBarWidth:Z,maxBarHeight:re,wrapperHeight:ge,wrapperWidth:le}}function R(w,K,L){if(w===null)return{background:r.R,border:r.R};const V=L?L(w).color:null;return V?K===null||isNaN(K.numeric)||w!==null&&w>K.numeric?{background:(0,c.Z)(V).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:(0,c.Z)(V).setAlpha(.95).toRgbString(),backgroundShade:(0,c.Z)(V).setAlpha(.55).toRgbString(),border:(0,c.Z)(V).setAlpha(.9).toRgbString(),isLit:!0}:{background:r.R,border:r.R}}function S(w,K,L){const V=Math.min((w-K)/(L-K),1);return isNaN(V)?0:V}function O(w){const{displayMode:K,field:L,value:V,alignmentFactors:H,orientation:j,theme:A,text:_}=w,{valueWidth:k,valueHeight:Q,maxBarHeight:re,maxBarWidth:Z}=b(w),oe=L.min??s.Hx,G=L.max??s.Z3,le=S(V.numeric,oe,G),ge=I(w),ne=V.color??r.R,te=F(H||V,ge,k,Q,j,_),me=K==="basic",q={display:"flex",flexGrow:1},se={borderRadius:A.shape.radius.default,position:"relative",zIndex:1},ae={background:A.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:A.shape.radius.default,position:"relative"};if(D(j)){const pe=Math.max(le*re,1);q.flexDirection="column",q.justifyContent="flex-end",se.transition="height 1s",se.height=`${pe}px`,se.width=`${Z}px`,ae.bottom="-3px",ae.width=`${k}px`,me?(se.background=`${(0,c.Z)(ne).setAlpha(.35).toRgbString()}`,se.borderTop=`2px solid ${ne}`):se.background=U(w,re)}else{const pe=Math.max(le*Z,1);q.flexDirection="row-reverse",q.justifyContent="flex-end",q.alignItems="stretch",se.transition="width 1s",se.height=`${re}px`,se.width=`${pe}px`,ae.left="-3px",ae.height=`${Q}px`,me?(se.background=`${(0,c.Z)(ne).setAlpha(.35).toRgbString()}`,se.borderRight=`2px solid ${ne}`):se.background=U(w,Z)}return{wrapper:q,bar:se,value:te,emptyBar:ae}}function U(w,K){const{field:L,value:V,orientation:H,theme:j}=w,A=D(H)?"0deg":"90deg",_=L.min,k=L.max;let Q="",re=0,Z=(0,d.QY)(L.color?.mode);if(Z.id===r.S.Thresholds){const oe=L.thresholds;for(let G=0;G<oe.steps.length;G++){const le=oe.steps[G],ge=w.theme.visualization.getColorByName(le.color),ne=oe.mode===f.H.Percentage?le.value/100:S(le.value,_,k),ue=ne*K,te=Math.round(ue-(ue-re)/2),me=oe.mode===f.H.Percentage?_+(k-_)*ne:le.value;if(Q==="")Q=`linear-gradient(${A}, ${ge}, ${ge}`;else{if(V.numeric<me)break;re=ue,Q+=` ${te}px, ${ge}`}}return Q+")"}if(Z.isContinuous&&Z.getColors){const oe=Z.getColors(j);for(let G=0;G<oe.length;G++){const le=oe[G];if(Q==="")Q=`linear-gradient(${A}, ${le} 0px`;else{const ne=G/(oe.length-1)*K;Q+=`, ${le} ${ne}px`}}return Q+")"}return V.color??r.R}function I(w){if(w.valueDisplayMode==="text")return w.theme.colors.text.primary;const{value:K}=w;return K.color?K.color:r.R}function F(w,K,L,V,H,j){const A={color:K,height:`${V}px`,width:`${L}px`,display:"flex",alignItems:"center",lineHeight:C};let _=L;const k=(0,u.zc)(w);return D(H)?(A.fontSize=j?.valueSize??(0,l.MX)(k,_,V,C),A.justifyContent="center"):(A.fontSize=j?.valueSize??(0,l.MX)(k,_-a*2,V,C),A.justifyContent="flex-end",A.paddingLeft=`${a}px`,A.paddingRight=`${a}px`,_-=a),A}},57426:(Y,T,e)=>{"use strict";e.d(T,{w6:()=>O,pc:()=>M,IG:()=>b,ap:()=>R,jG:()=>S});var t=e(9892),n=e(66111),c=e(31403),s=e(72777),i=e(28550),f=e(82229),u=e(99098),r=e(2703),d=e(40538),o=e(16514),m=e(4176),l=e(67307);const p=1.2,g=30,y=500;class v{constructor(I){this.props=I;const{width:F,height:w,value:K,text:L}=I;this.valueColor=K.color??"gray",this.panelPadding=w>100?12:8,this.textValues=x(I),this.justifyCenter=D(I.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=F-this.panelPadding*2,this.maxTextHeight=w-this.panelPadding*2,L&&(L.titleSize&&(this.titleFontSize=L.titleSize,this.titleToAlignTo=void 0),L.valueSize&&(this.valueFontSize=L.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const I={fontSize:`${this.titleFontSize}px`,lineHeight:p};return this.props.parentOrientation===f.wm.Horizontal&&this.justifyCenter&&(I.paddingRight="0.75ch"),(this.props.colorMode===M.Background||this.props.colorMode===M.BackgroundSolid)&&(I.color=(0,o.bM)(this.valueColor,this.props.theme.isDark)),I}getValueStyles(){const I={fontSize:this.valueFontSize,fontWeight:y,lineHeight:p,position:"relative",zIndex:1};switch(this.justifyCenter&&(I.textAlign="center"),this.props.colorMode){case M.Value:I.color=this.valueColor;break;case M.Background:case M.BackgroundSolid:I.color=(0,o.bM)(this.valueColor,this.props.theme.isDark);break;case M.None:I.color=this.props.theme.colors.text.primary;break}return I}getValueAndTitleContainerStyles(){const I={display:"flex"};return this.justifyCenter&&(I.alignItems="center",I.justifyContent="center",I.flexGrow=1),I}getPanelStyles(){const{width:I,height:F,theme:w,colorMode:K}=this.props,L={width:`${I}px`,height:`${F}px`,padding:`${this.panelPadding}px`,borderRadius:w.shape.borderRadius(),position:"relative",display:"flex"},V=w.isDark?1:-.7;switch(K){case M.Background:const H=(0,i.Z)(this.valueColor).darken(15*V).spin(8).toRgbString(),j=(0,i.Z)(this.valueColor).darken(5*V).spin(-8).toRgbString();L.background=`linear-gradient(120deg, ${H}, ${j})`;break;case M.BackgroundSolid:L.background=(0,i.Z)(this.valueColor).toString();break;case M.Value:L.background="transparent";break}return this.justifyCenter&&(L.alignItems="center",L.flexDirection="row"),L}renderChart(){const{sparkline:I,colorMode:F}=this.props;if(!I||I.y?.type!==u.fS.number)return null;let w,K;switch(F){case M.Background:case M.BackgroundSolid:w="rgba(255,255,255,0.4)",K=(0,i.Z)(this.valueColor).brighten(40).toRgbString();break;case M.None:case M.Value:default:K=this.valueColor,w=(0,i.Z)(this.valueColor).setAlpha(.2).toRgbString();break}const L={custom:{drawStyle:d.l8.Line,lineWidth:1,fillColor:w,lineColor:K}};return n.createElement("div",{style:this.getChartStyles()},n.createElement(l.b,{height:this.chartHeight,width:this.chartWidth,sparkline:I,config:L,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class E extends v{constructor(I){super(I);const F=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,m.MX)(this.valueToAlignTo,this.maxTextWidth*F,this.maxTextHeight,p,void 0,y)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,m.MX)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,p,g),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const I=super.getValueAndTitleContainerStyles();return I.flexDirection="row",I.alignItems="center",I.flexGrow=1,this.justifyCenter||(I.justifyContent="space-between"),I}renderChart(){return null}getPanelStyles(){const I=super.getPanelStyles();return I.alignItems="center",I}}class h extends v{constructor(I){super(I);const{width:F,height:w}=I,K=.5,L=.6,V=1-L,H=.4;this.chartWidth=F,this.chartHeight=w*K,this.titleToAlignTo?.length&&(this.titleFontSize=(0,m.MX)(this.titleToAlignTo,this.maxTextWidth*L,this.maxTextHeight*H,p,g)),this.valueToAlignTo.length&&(this.valueFontSize=(0,m.MX)(this.valueToAlignTo,this.maxTextWidth*V,this.maxTextHeight*K,p,void 0,y))}getValueAndTitleContainerStyles(){const I=super.getValueAndTitleContainerStyles();return I.flexDirection="row",I.flexGrow=1,this.justifyCenter||(I.justifyContent="space-between"),I}getPanelStyles(){const I=super.getPanelStyles();return I.flexDirection="row",I.justifyContent="space-between",I}}class C extends v{constructor(I){super(I);const{width:F,height:w}=I,K=.15,L=.25;let V=0;this.chartHeight=w*L,this.chartWidth=F,this.titleToAlignTo?.length&&(this.titleFontSize=(0,m.MX)(this.titleToAlignTo,this.maxTextWidth,w*K,p,g),V=this.titleFontSize*p),this.valueToAlignTo.length&&(this.valueFontSize=(0,m.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-V,p,void 0,y)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=w-this.titleFontSize*p-this.valueFontSize*p}getValueAndTitleContainerStyles(){const I=super.getValueAndTitleContainerStyles();return I.flexDirection="column",I.justifyContent="center",I}getPanelStyles(){const I=super.getPanelStyles();return I.flexDirection="column",I}}class a extends v{constructor(I){super(I);const{height:F}=I,w=.15;let K=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,m.MX)(this.titleToAlignTo,this.maxTextWidth,F*w,p,g),K=this.titleFontSize*p),this.valueToAlignTo.length&&(this.valueFontSize=(0,m.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-K,p,void 0,y)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const I=super.getValueAndTitleContainerStyles();return I.flexDirection="column",I.flexGrow=1,I}renderChart(){return null}getPanelStyles(){const I=super.getPanelStyles();return I.alignItems="center",I}}function P(U){const{width:I,height:F,sparkline:w}=U;return I/F>2.5?F>50&&w&&w.y.values.length>1?new h(U):new E(U):F>100&&w&&w.y.values.length>1?new C(U):new a(U)}function D(U,I){return U===R.Center?!0:(I??"").length===0}function x(U){const{value:I,alignmentFactors:F,count:w}=U;let{textMode:K}=U;const L=F?F.title:I.title,V=(0,r.zc)(F||I);switch(K===S.Auto&&(w??1)===1&&(K=S.Value),K){case S.Name:return{...I,title:void 0,prefix:void 0,suffix:void 0,text:I.title||"",titleToAlignTo:void 0,valueToAlignTo:L??"",tooltip:(0,r.zc)(I)};case S.Value:return{...I,title:void 0,titleToAlignTo:void 0,valueToAlignTo:V,tooltip:I.title};case S.None:return{numeric:I.numeric,color:I.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${I.title}
Value: ${(0,r.zc)(I)}`};case S.ValueAndName:default:return{...I,titleToAlignTo:L,valueToAlignTo:V}}}var M=(U=>(U.Background="background",U.BackgroundSolid="background_solid",U.None="none",U.Value="value",U))(M||{}),b=(U=>(U.None="none",U.Line="line",U.Area="area",U))(b||{}),R=(U=>(U.Auto="auto",U.Center="center",U))(R||{}),S=(U=>(U.Auto="auto",U.Value="value",U.ValueAndName="value_and_name",U.Name="name",U.None="none",U))(S||{});class O extends n.PureComponent{render(){const{onClick:I,className:F,hasLinks:w,theme:K}=this.props,L=P(this.props),V=L.getPanelStyles(),H=L.getValueAndTitleContainerStyles(),j=L.getValueStyles(),A=L.getTitleStyles(),_=L.textValues,k=w?void 0:_.tooltip;return I?n.createElement("button",{type:"button",className:(0,t.cx)((0,c.gN)(K),F),style:V,onClick:I,title:k},n.createElement("div",{style:H},_.title&&n.createElement("div",{style:A},_.title),n.createElement(s.W,{value:_,style:j})),L.renderChart()):n.createElement("div",{className:F,style:V,title:k},n.createElement("div",{style:H},_.title&&n.createElement("div",{style:A},_.title),n.createElement(s.W,{value:_,style:j})),L.renderChart())}}O.defaultProps={justifyMode:"auto"}},85951:(Y,T,e)=>{"use strict";e.d(T,{_:()=>u});var t=e(9892),n=e(66111),c=e(55271),s=e.n(c),i=e(72648),f=e(69636);const u=(0,n.forwardRef)(({name:d,value:o,hidden:m,facets:l,onClick:p,className:g,loading:y,searchTerm:v,active:E,style:h,title:C,highlightParts:a,...P},D)=>{const x=(0,i.l4)(),M=r(x),b=v?[v]:[],R=(0,n.useCallback)(O=>{p&&!m&&p(d,o,O)},[p,d,m,o]);let S=o||d;return l&&(S=`${S} (${l})`),n.createElement("button",{key:S,ref:D,onClick:R,style:h,title:C||S,type:"button",role:"option","aria-selected":!!E,className:(0,t.cx)(M.base,E&&M.active,y&&M.loading,m&&M.hidden,g,p&&!m&&M.hover),...P},a!==void 0?n.createElement(f.H,{text:S,highlightClassName:M.matchHighLight,highlightParts:a}):n.createElement(s(),{textToHighlight:S,searchWords:b,autoEscape:!0,highlightClassName:M.matchHighLight}))});u.displayName="Label";const r=d=>({base:t.css`
    display: inline-block;
    cursor: pointer;
    font-size: ${d.typography.size.sm};
    line-height: ${d.typography.bodySmall.lineHeight};
    background-color: ${d.colors.background.secondary};
    color: ${d.colors.text.primary};
    white-space: nowrap;
    text-shadow: none;
    padding: ${d.spacing(.5)};
    border-radius: ${d.shape.borderRadius()};
    border: none;
    margin-right: ${d.spacing(1)};
    margin-bottom: ${d.spacing(.5)};
  `,loading:t.css`
    font-weight: ${d.typography.fontWeightMedium};
    background-color: ${d.colors.primary.shade};
    color: ${d.colors.text.primary};
    animation: pulse 3s ease-out 0s infinite normal forwards;
    @keyframes pulse {
      0% {
        color: ${d.colors.text.primary};
      }
      50% {
        color: ${d.colors.text.secondary};
      }
      100% {
        color: ${d.colors.text.disabled};
      }
    }
  `,active:t.css`
    font-weight: ${d.typography.fontWeightMedium};
    background-color: ${d.colors.primary.main};
    color: ${d.colors.primary.contrastText};
  `,matchHighLight:t.css`
    background: inherit;
    color: ${d.components.textHighlight.text};
    background-color: ${d.components.textHighlight.background};
  `,hidden:t.css`
    opacity: 0.6;
    cursor: default;
    border: 1px solid transparent;
  `,hover:t.css`
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `})},31403:(Y,T,e)=>{"use strict";e.d(T,{Qj:()=>m,_7:()=>E,c9:()=>y,fW:()=>l,gN:()=>v,zx:()=>o});var t=e(9892),n=e(66111),c=e(72648),s=e(85419),i=e(73267),f=e(39904),u=e(61860);const r=null,d=null,o=n.forwardRef(({variant:h="primary",size:C="md",fill:a="solid",icon:P,fullWidth:D,children:x,className:M,type:b="button",tooltip:R,tooltipPlacement:S,...O},U)=>{const I=(0,c.l4)(),F=l({theme:I,size:C,variant:h,fill:a,fullWidth:D,iconOnly:!x}),w=n.createElement("button",{className:(0,t.cx)(F.button,M),type:b,...O,ref:R?void 0:U},P&&n.createElement(f.J,{name:P,size:C,className:F.icon}),x&&n.createElement("span",{className:F.content},x));return R?n.createElement(u.u,{ref:U,content:R,placement:S},w):w});o.displayName="Button";const m=n.forwardRef(({variant:h="primary",size:C="md",fill:a="solid",icon:P,fullWidth:D,children:x,className:M,onBlur:b,onFocus:R,disabled:S,tooltip:O,tooltipPlacement:U,...I},F)=>{const w=(0,c.l4)(),K=l({theme:w,fullWidth:D,size:C,variant:h,fill:a,iconOnly:!x}),L=(0,t.cx)(K.button,{[(0,t.css)(K.disabled,{pointerEvents:"none"})]:S},M),V=n.createElement("a",{className:L,...I,tabIndex:S?-1:0,ref:O?void 0:F},P&&n.createElement(f.J,{name:P,size:C,className:K.icon}),x&&n.createElement("span",{className:K.content},x));return O?n.createElement(u.u,{ref:F,content:O,placement:U},V):V});m.displayName="LinkButton";const l=h=>{const{theme:C,variant:a,fill:P="solid",size:D,iconOnly:x,fullWidth:M}=h,{height:b,padding:R,fontSize:S}=(0,i.iL)(D,C),O=y(C,a,P),U=g(C,a,P),I=(0,s.getFocusStyles)(C),F=C.spacing.gridSize*R-1;return{button:(0,t.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:S,fontWeight:C.typography.fontWeightMedium,fontFamily:C.typography.fontFamily,padding:`0 ${F}px`,height:C.spacing(b),lineHeight:`${C.spacing.gridSize*b-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:C.shape.borderRadius(1),"&:focus":I,"&:focus-visible":I,"&:focus:not(:focus-visible)":(0,s.getMouseFocusStyles)(C),...M&&{flexGrow:1,justifyContent:"center"},...O,":disabled":U,"&[disabled]":U}),disabled:(0,t.css)(U),img:t.css`
      width: 16px;
      height: 16px;
      margin: ${C.spacing(0,1,0,.5)};
    `,icon:x?(0,t.css)({marginRight:C.spacing(-R/2),marginLeft:C.spacing(-R/2)}):(0,t.css)({marginRight:C.spacing(R/2)}),content:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      white-space: nowrap;
      height: 100%;
    `}};function p(h,C,a){let P=C.border,D="transparent",x="transparent";return C.name==="secondary"&&(D=C.border,x=h.colors.emphasize(C.border,.25),P=h.colors.border.strong),a==="outline"?{background:"transparent",color:C.text,border:`1px solid ${P}`,transition:h.transitions.create(["background-color","border-color","color"],{duration:h.transitions.duration.short}),"&:hover":{background:C.transparent,borderColor:h.colors.emphasize(P,.25),color:C.text}}:a==="text"?{background:"transparent",color:C.text,border:"1px solid transparent",transition:h.transitions.create(["background-color","color"],{duration:h.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:C.transparent,textDecoration:"none"}}:{background:C.main,color:C.contrastText,border:`1px solid ${D}`,transition:h.transitions.create(["background-color","box-shadow","border-color","color"],{duration:h.transitions.duration.short}),"&:hover":{background:C.shade,color:C.contrastText,boxShadow:h.shadows.z1,borderColor:x}}}function g(h,C,a){const P={cursor:"not-allowed",boxShadow:"none",color:h.colors.text.disabled,transition:"none"};return a==="text"?{...P,background:"transparent",border:"1px solid transparent"}:a==="outline"?{...P,background:"transparent",border:`1px solid ${h.colors.border.weak}`}:{...P,background:h.colors.action.disabledBackground,border:"1px solid transparent"}}function y(h,C,a){switch(C){case"secondary":return p(h,h.colors.secondary,a);case"destructive":return p(h,h.colors.error,a);case"success":return p(h,h.colors.success,a);case"primary":default:return p(h,h.colors.primary,a)}}const v=h=>t.css`
    background: transparent;
    color: ${h.colors.text.primary};
    border: none;
    padding: 0;
  `,E=h=>t.css`
    background: transparent;
    border: none;
    padding: 0;
    font-family: inherit;
    color: inherit;
    height: 100%;
    &:hover {
      background: transparent;
      color: inherit;
    }
  `},26202:(Y,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(9892),n=e(66111),c=e(72648);const s=(0,n.forwardRef)(({className:f,children:u,...r},d)=>{const o=(0,c.wW)(i);return n.createElement("div",{ref:d,className:(0,t.cx)("button-group",o.wrapper,f),...r},u)});s.displayName="ButtonGroup";const i=f=>({wrapper:t.css`
    display: flex;

    > .button-group:not(:first-child) > button,
    > button:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    > .button-group:not(:last-child) > button,
    > button:not(:last-child) {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      border-right-width: 0;
    }
  `})},97389:(Y,T,e)=>{"use strict";e.d(T,{f:()=>s});var t=e(9892),n=e(66111),c=e(7804);const s=({className:f,children:u})=>{const r=i();return n.createElement("div",{className:(0,t.cx)(r,f)},u)},i=(0,c.B)(()=>t.css`
    display: flex;

    button {
      flex-grow: 1;
      justify-content: center;
    }

    > * {
      flex-grow: 1;
    }

    label {
      flex-grow: 1;
      text-align: center;
    }
  `)},19974:(Y,T,e)=>{"use strict";e.d(T,{O:()=>o});var t=e(9892),n=e(81494),c=e(66111),s=e(7804),i=e(72648),f=e(31403),u=e(94229),r=e(39904);const d=(0,s.B)(m=>({popup:t.css`
      label: popup;
      z-index: ${m.zIndex.dropdown};
    `,icons:{right:t.css`
        margin: 1px 0 0 4px;
      `,left:t.css`
        margin: -1px 4px 0 0;
      `}})),o=m=>{const{onChange:l,className:p,loadData:g,icon:y,buttonProps:v,hideDownIcon:E,variant:h,disabled:C,...a}=m,P=(0,i.l4)(),D=d(P);let x=m.children;return E||(x=[m.children,c.createElement(r.J,{key:"down-icon",name:"angle-down",className:D.icons.right})]),c.createElement(n.Z,{onChange:(0,u.K)(l),loadData:(0,u.p)(g),dropdownClassName:D.popup,...a,expandIcon:null},c.createElement(f.zx,{icon:y,disabled:C,variant:h,...v??{}},x))};o.displayName="ButtonCascader"},97097:(Y,T,e)=>{"use strict";e.d(T,{_:()=>s});var t=e(9892),n=e(66111),c=e(72648);const s=({message:f,callToActionElement:u,footer:r,className:d})=>{const o=(0,c.wW)(i);return n.createElement("div",{className:(0,t.cx)([o.wrapper,d])},f&&n.createElement("div",{className:o.message},f),u,r&&n.createElement("div",{className:o.footer},r))},i=f=>({wrapper:t.css`
    label: call-to-action-card;
    padding: ${f.spacing(3)};
    background: ${f.colors.background.secondary};
    border-radius: ${f.shape.radius.default};
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
  `,message:t.css`
    margin-bottom: ${f.spacing(3)};
    font-style: italic;
  `,footer:t.css`
    margin-top: ${f.spacing(3)}};
  `})},72948:(Y,T,e)=>{"use strict";e.d(T,{L:()=>D,Z:()=>u});var t=e(9892),n=e(66111),c=e(72648),s=e(85419),i=e(35633);const f=n.createContext(null),u=({disabled:x,href:M,onClick:b,children:R,isSelected:S,className:O,...U})=>{const I=(0,n.useMemo)(()=>n.Children.toArray(R).some(V=>n.isValidElement(V)&&V.type.displayName===r.displayName),[R]),F=x||!b&&!M,w=b&&!x?b:void 0,K=(0,c.l4)(),L=(0,i.$)(K,x,F,S);return n.createElement(i._,{disableEvents:x,disableHover:F,isSelected:S,className:(0,t.cx)(L.container,O),...U},n.createElement(f.Provider,{value:{href:M,onClick:w,disabled:x,isSelected:S}},!I&&n.createElement(r,null),R))},r=({children:x,className:M,"aria-label":b})=>{const R=(0,n.useContext)(f),S=(0,c.wW)(d),{href:O,onClick:U,isSelected:I}=R??{href:void 0,onClick:void 0,isSelected:void 0};return n.createElement("h2",{className:(0,t.cx)(S.heading,M)},O?n.createElement("a",{href:O,className:S.linkHack,"aria-label":b,onClick:U},x):U?n.createElement("button",{onClick:U,className:S.linkHack,"aria-label":b,type:"button"},x):n.createElement(n.Fragment,null,x),I!==void 0&&n.createElement("input",{"aria-label":"option",type:"radio",readOnly:!0,checked:I}))};r.displayName="Heading";const d=x=>({heading:(0,t.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:x.typography.size.md,letterSpacing:"inherit",lineHeight:x.typography.body.lineHeight,color:x.colors.text.primary,fontWeight:x.typography.fontWeightMedium}),linkHack:(0,t.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:x.shape.borderRadius(1)},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,s.getFocusStyles)(x),zIndex:1}}})}),o=({children:x,className:M})=>{const b=(0,c.wW)(m);return n.createElement("div",{className:(0,t.cx)(b.tagList,M)},x)};o.displayName="Tags";const m=x=>({tagList:(0,t.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),l=({children:x,className:M})=>{const b=(0,c.wW)(p);return n.createElement("p",{className:(0,t.cx)(b.description,M)},x)};l.displayName="Description";const p=x=>({description:(0,t.css)({width:"100%",gridArea:"Description",margin:x.spacing(1,0,0),color:x.colors.text.secondary,lineHeight:x.typography.body.lineHeight})}),g=({children:x,align:M="start",className:b})=>{const R=(0,c.wW)(y);return n.createElement("div",{className:(0,t.cx)(R.media,b,t.css`
          align-self: ${M};
        `)},x)};g.displayName="Figure";const y=x=>({media:(0,t.css)({position:"relative",gridArea:"Figure",marginRight:x.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),v=(0,n.memo)(({children:x,className:M,separator:b="|"})=>{const R=(0,c.wW)(E);let S=x;const O=n.Children.toArray(x).filter(Boolean);return O.length?(S=O.map((U,I)=>n.createElement("div",{key:`element_${I}`,className:R.metadataItem},U)),O.length>1&&b&&(S=O.reduce((U,I,F)=>[U,n.createElement("span",{key:`separator_${F}`,className:R.separator},b),I])),n.createElement("div",{className:(0,t.cx)(R.metadata,M)},S)):null});v.displayName="Meta";const E=x=>({metadata:(0,t.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:x.typography.size.sm,color:x.colors.text.secondary,margin:x.spacing(.5,0,0),lineHeight:x.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,t.css)({zIndex:0}),separator:(0,t.css)({margin:`0 ${x.spacing(1)}`})}),h=({children:x,disabled:M,variant:b,className:R})=>{const S=(0,c.wW)(C),U=(0,n.useContext)(f)?.disabled||M,I=b==="primary"?S.actions:S.secondaryActions;return n.createElement("div",{className:(0,t.cx)(I,R)},n.Children.map(x,F=>n.isValidElement(F)?(0,n.cloneElement)(F,{disabled:U,...F.props}):null))},C=x=>({actions:(0,t.css)({gridArea:"Actions",marginTop:x.spacing(2),"& > *":{marginRight:x.spacing(1)}}),secondaryActions:(0,t.css)({display:"flex",gridArea:"Secondary",alignSelf:"center",color:x.colors.text.secondary,marginTtop:x.spacing(2),"& > *":{marginRight:`${x.spacing(1)} !important`}})}),a=({children:x,disabled:M,className:b})=>n.createElement(h,{variant:"primary",disabled:M,className:b},x);a.displayName="Actions";const P=({children:x,disabled:M,className:b})=>n.createElement(h,{variant:"secondary",disabled:M,className:b},x);P.displayName="SecondaryActions";const D=x=>({inner:t.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      flex-wrap: wrap;
    `,...d(x),...E(x),...p(x),...y(x),...C(x),...m(x)});u.Heading=r,u.Tags=o,u.Figure=g,u.Meta=v,u.Actions=a,u.SecondaryActions=P,u.Description=l},35633:(Y,T,e)=>{"use strict";e.d(T,{$:()=>d,_:()=>r});var t=e(9892),n=e(66111),c=e(72648),s=e(7804),i=e(85419);const f=({children:o,href:m})=>{const{inner:l}=(0,c.wW)(u);return m?n.createElement("a",{className:l,href:m},o):n.createElement(n.Fragment,null,o)},u=o=>({inner:(0,t.css)({display:"flex",width:"100%",padding:o.spacing(2)})}),r=({children:o,disableEvents:m,disableHover:l,isSelected:p,className:g,href:y,...v})=>{const E=(0,c.l4)(),{oldContainer:h}=d(E,m,l,p);return n.createElement("div",{...v,className:(0,t.cx)(h,g)},n.createElement(f,{href:y},o))},d=(0,s.B)((o,m=!1,l=!1,p)=>{const g=p!==void 0;return{container:(0,t.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:o.spacing(2),background:o.colors.background.secondary,borderRadius:o.shape.borderRadius(),marginBottom:"8px",pointerEvents:m?"none":"auto",transition:o.transitions.create(["background-color","box-shadow","border-color","color"],{duration:o.transitions.duration.short}),...!l&&{"&:hover":{background:o.colors.emphasize(o.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":i.getFocusStyles(o)},...g&&{cursor:"pointer"},...p&&{outline:`solid 2px ${o.colors.primary.border}`}}),oldContainer:(0,t.css)({display:"flex",width:"100%",background:o.colors.background.secondary,borderRadius:o.shape.borderRadius(),position:"relative",pointerEvents:m?"none":"auto",marginBottom:o.spacing(1),transition:o.transitions.create(["background-color","box-shadow","border-color","color"],{duration:o.transitions.duration.short}),...!l&&{"&:hover":{background:o.colors.emphasize(o.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":i.getFocusStyles(o)}})}})},95093:(Y,T,e)=>{"use strict";e.d(T,{v:()=>m});var t=e(9892),n=e(58635),c=e(81494),s=e(66111),i=e(39904),f=e(46967),u=e(8581),r=e(94229);const d=(0,t.css)(`
&:focus{
  outline: none;
}
`),o="/";class m extends s.PureComponent{constructor(p){super(p),this.flattenOptions=(E,h=[])=>{let C=[];for(const a of E){const P=[...h];P.push(a),a.items?C=[...C,...this.flattenOptions(a.items,P)]:C.push({singleLabel:P[P.length-1].label,label:P.map(D=>D.label).join(this.props.separator||` ${o} `),value:P.map(D=>D.value)})}return C},this.getSearchableOptions=(0,n.Z)(E=>this.flattenOptions(E)),this.onChange=(E,h)=>{const C=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?h.map(a=>a.label).join(this.props.separator||o):h[h.length-1].label;this.setState({rcValue:E,focusCascade:!0,activeLabel:C}),this.props.onSelect(h[h.length-1].value)},this.onSelect=E=>{const h=E.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?E.label:E.singleLabel||"",rcValue:h,isSearching:!1}),this.props.onSelect(h[h.length-1])},this.onCreateOption=E=>{this.setState({activeLabel:E,rcValue:[],isSearching:!1}),this.props.onSelect(E)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=E=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(E.key)||this.setState({focusCascade:!1,isSearching:!0})},this.onSelectInputChange=E=>{E===""&&this.setState({isSearching:!1})};const g=this.getSearchableOptions(p.options),{rcValue:y,activeLabel:v}=this.setInitialValue(g,p.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:y,activeLabel:v}}setInitialValue(p,g){if(!g)return{rcValue:[],activeLabel:""};for(const y of p){const v=y.value||[];if(v.indexOf(g)===v.length-1)return{rcValue:v,activeLabel:this.props.displayAllSelectedLevels?y.label:y.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:g}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:p,formatCreateLabel:g,placeholder:y,width:v,changeOnSelect:E,options:h}=this.props,{focusCascade:C,isSearching:a,rcValue:P,activeLabel:D}=this.state,x=this.getSearchableOptions(h);return s.createElement("div",null,a?s.createElement(u.Ph,{allowCustomValue:p,placeholder:y,autoFocus:!C,onChange:this.onSelect,onBlur:this.onBlur,options:x,onCreateOption:this.onCreateOption,formatCreateLabel:g,width:v,onInputChange:this.onSelectInputChange}):s.createElement(c.Z,{onChange:(0,r.K)(this.onChange),options:h,changeOnSelect:E,value:P.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen},s.createElement("div",{className:d},s.createElement(f.I,{autoFocus:this.props.autoFocus,width:v,placeholder:y,onBlur:this.onBlurCascade,value:D,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:C?s.createElement(i.J,{name:"angle-up"}):s.createElement(i.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})}))))}}m.defaultProps={changeOnSelect:!0}},94229:(Y,T,e)=>{"use strict";e.d(T,{K:()=>t,p:()=>n});const t=i=>(f,u)=>{i&&i(f.map(r=>String(r)),c(u))},n=i=>f=>{i&&i(c(f))},c=i=>i.map(s),s=i=>({value:i.value??"",label:i.label})},94437:(Y,T,e)=>{"use strict";e.d(T,{L:()=>n});var t=e(66111);class n extends t.PureComponent{constructor(){super(...arguments),this.myRef=(0,t.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=s=>{const i=this.myRef.current;(!i||!i.contains(s.target))&&this.props.onClick()}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return t.createElement("div",{ref:this.myRef},this.props.children)}}n.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:null,useCapture:!1}},94599:(Y,T,e)=>{"use strict";e.d(T,{m:()=>d});var t=e(9892),n=e(66111),c=e(37951),s=e(72648),i=e(31403),f=e(39904),u=e(4784);const r=2*1e3;function d({onClipboardCopy:l,onClipboardError:p,children:g,getText:y,icon:v,variant:E,...h}){const C=(0,s.wW)(m),[a,P]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let M;return a&&(M=setTimeout(()=>{P(!1)},r)),()=>{window.clearTimeout(M)}},[a]);const D=(0,n.useRef)(null),x=(0,n.useCallback)(async()=>{const M=y();try{await o(M,D),P(!0),l?.(M)}catch(b){p?.(M,b)}},[y,l,p]);return n.createElement(n.Fragment,null,a&&n.createElement(u.K,{placement:"top",referenceElement:D.current},n.createElement(c.c,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),n.createElement(i.zx,{onClick:x,icon:v,variant:a?"success":E,"aria-label":a?"Copied":void 0,...h,className:(0,t.cx)(C.button,a&&C.successButton,h.className),ref:D},g,a&&n.createElement("div",{className:C.successOverlay},n.createElement(f.J,{name:"check"}))))}const o=async(l,p)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(l);{const g=document.createElement("textarea");p.current?.appendChild(g),g.value=l,g.focus(),g.select(),document.execCommand("copy"),g.remove()}},m=l=>({button:(0,t.css)({position:"relative"}),successButton:(0,t.css)({"> *":(0,t.css)({visibility:"hidden"})}),successOverlay:(0,t.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},20941:(Y,T,e)=>{"use strict";e.d(T,{s:()=>d});var t=e(9892),n=e(82897),c=e.n(n),s=e(66111),i=e(67487),f=e(39904),u=e(72648),r=e(85419);const d=({label:m,isOpen:l,onToggle:p,className:g,contentClassName:y,children:v,labelId:E,loading:h=!1,headerDataTestId:C,contentDataTestId:a})=>{const[P,D]=(0,s.useState)(l),x=(0,u.wW)(o),M=S=>{S.target instanceof HTMLElement&&S.target.tagName==="A"||(S.preventDefault(),S.stopPropagation(),p?.(!P),D(!P))},{current:b}=(0,s.useRef)((0,n.uniqueId)()),R=E??`collapse-label-${b}`;return s.createElement(s.Fragment,null,s.createElement("div",{onClick:M,className:(0,t.cx)(x.header,g)},s.createElement("button",{type:"button",id:`collapse-button-${b}`,className:x.button,onClick:M,"aria-expanded":P&&!h,"aria-controls":`collapse-content-${b}`,"aria-labelledby":R},h?s.createElement(i.$,{className:x.spinner}):s.createElement(f.J,{name:P?"angle-up":"angle-down",className:x.icon})),s.createElement("div",{className:x.label,id:`collapse-label-${b}`,"data-testid":C},m)),P&&s.createElement("div",{id:`collapse-content-${b}`,className:(0,t.cx)(x.content,y),"data-testid":a},v))},o=m=>({header:(0,t.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:m.typography.size.lg,padding:`${m.spacing(.5)} 0`,"&:focus-within":(0,r.getFocusStyles)(m)}),button:(0,t.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,t.css)({color:m.colors.text.secondary}),content:(0,t.css)({padding:`${m.spacing(2)} 0`}),spinner:(0,t.css)({display:"flex",alignItems:"center",width:m.spacing(2)}),label:(0,t.css)({display:"flex"})})},2352:(Y,T,e)=>{"use strict";e.d(T,{U:()=>r,y:()=>u});var t=e(9892),n=e(66111),c=e(72648),s=e(31403),i=e(39904);const f=d=>({collapse:t.css`
    label: collapse;
    margin-bottom: ${d.spacing(1)};
    background-color: ${d.colors.background.primary};
    border: 1px solid ${d.colors.border.weak};
    position: relative;
    border-radius: ${d.shape.radius.default};
    width: 100%;
    display: flex;
    flex-direction: column;
    flex: 1 1 0;
  `,collapseBody:t.css`
    label: collapse__body;
    padding: ${d.spacing(d.components.panel.padding)};
    padding-top: 0;
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  `,bodyContentWrapper:t.css`
    label: bodyContentWrapper;
    flex: 1;
    overflow: hidden;
  `,loader:t.css`
    label: collapse__loader;
    height: 2px;
    position: relative;
    overflow: hidden;
    background: none;
    margin: ${d.spacing(.5)};
  `,loaderActive:t.css`
    label: collapse__loader_active;
    &:after {
      content: ' ';
      display: block;
      width: 25%;
      top: 0;
      top: -50%;
      height: 250%;
      position: absolute;
      animation: loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms;
      animation-iteration-count: 100;
      left: -25%;
      background: ${d.colors.primary.main};
    }
    @keyframes loader {
      from {
        left: -25%;
        opacity: 0.1;
      }
      to {
        left: 100%;
        opacity: 1;
      }
    }
  `,header:t.css`
    label: collapse__header;
    padding: ${d.spacing(1,2,1,2)};
    display: flex;
    transition: all 0.1s linear;
  `,headerCollapsed:t.css`
    label: collapse__header--collapsed;
    padding: ${d.spacing(1,2,1,2)};
  `,headerLabel:t.css`
    label: collapse__header-label;
    font-weight: ${d.typography.fontWeightMedium};
    margin-right: ${d.spacing(1)};
    font-size: ${d.typography.size.md};
  `,icon:t.css`
    label: collapse__icon;
    margin: ${d.spacing(.25,1,0,-1)};
  `}),u=({isOpen:d,onToggle:o,...m})=>{const[l,p]=(0,n.useState)(d);return n.createElement(r,{isOpen:l,collapsible:!0,...m,onToggle:()=>{p(!l),o&&o(!l)}})},r=({isOpen:d,label:o,loading:m,collapsible:l,onToggle:p,className:g,children:y})=>{const v=(0,c.wW)(s.gN),E=(0,c.wW)(f),h=()=>{p&&p(!d)},C=(0,t.cx)([E.collapse,g]),a=m?(0,t.cx)([E.loader,E.loaderActive]):(0,t.cx)([E.loader]),P=l?(0,t.cx)([E.header]):(0,t.cx)([E.headerCollapsed]);return n.createElement("div",{className:C},n.createElement("button",{type:"button",className:(0,t.cx)(v,P),onClick:h},l&&n.createElement(i.J,{className:E.icon,name:d?"angle-down":"angle-right"}),n.createElement("div",{className:(0,t.cx)([E.headerLabel])},o)),d&&n.createElement("div",{className:(0,t.cx)([E.collapseBody])},n.createElement("div",{className:a}),n.createElement("div",{className:E.bodyContentWrapper},y)))};r.displayName="Collapse"},76161:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>d});var t=e(9892),n=e(82897),c=e.n(n),s=e(66111),i=e(28550),f=e(72648),u=e(46967);const r=(0,s.forwardRef)(({color:l,onChange:p,isClearable:g=!1,onClick:y,onBlur:v,disabled:E,buttonAriaLabel:h,...C},a)=>{const[P,D]=(0,s.useState)(l),[x,M]=(0,s.useState)(l),b=(0,s.useMemo)(()=>(0,n.debounce)(p,100),[]);(0,s.useEffect)(()=>{const O=(0,i.Z)(l);O.isValid()&&l!==x&&(D(O.toString()),M(l))},[l,x]);const R=O=>{const{value:U}=O.currentTarget;if(D(U),U===""&&g){b(U);return}const I=(0,i.Z)(U);I.isValid()&&b(I.toString())},S=O=>{(0,i.Z)(P).isValid()||D(l),v?.(O)};return s.createElement(u.I,{...C,value:P,onChange:R,disabled:E,onClick:y,onBlur:S,addonBefore:s.createElement(o,{onClick:y,ariaLabel:h,disabled:E,color:l}),ref:a})});r.displayName="ColorInput";const d=r,o=({color:l,onClick:p,disabled:g,ariaLabel:y})=>{const v=(0,f.wW)(m);return s.createElement("button",{type:"button",onClick:p,"aria-label":y,disabled:g||!p,className:(0,t.cx)(v,t.css`
          background-color: ${l};
        `)})},m=l=>t.css`
  height: 100%;
  width: ${l.spacing.gridSize*4}px;
  border-radius: ${l.shape.borderRadius()} 0 0 ${l.shape.borderRadius()};
  border: 1px solid ${l.colors.border.medium};
`},90208:(Y,T,e)=>{"use strict";e.d(T,{sp:()=>p,zH:()=>l});var t=e(9892),n=e(66111),c=e(72648),s=e(7804),i=e(66120),f=e(56921),u=e(39604),r=e(560),d=e(98671),o=e(43598);const m=(y,v="ColorPicker")=>{var E;return E=class extends n.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,n.createRef)()}render(){const{theme:h,children:C,onChange:a}=this.props,P=g(h),D=n.createElement(y,{...this.props,children:null,onChange:a});return n.createElement(u.D,{content:D,hideAfter:300},(x,M,b)=>n.createElement(n.Fragment,null,this.pickerTriggerRef.current&&n.createElement(f.J,{...b,referenceElement:this.pickerTriggerRef.current,wrapperClassName:P.colorPicker,onMouseLeave:M,onMouseEnter:x,onKeyDown:R=>(0,i.i)(R,M)}),C?C({ref:this.pickerTriggerRef,showColorPicker:x,hideColorPicker:M}):n.createElement(d.b,{ref:this.pickerTriggerRef,onClick:x,onMouseLeave:M,color:h.visualization.getColorByName(this.props.color||"#000000")})))}},E.displayName=v,E},l=(0,c.HE)(m(r.h,"ColorPicker")),p=(0,c.HE)(m(o.j,"SeriesColorPicker")),g=(0,s.B)(y=>({colorPicker:t.css`
      position: absolute;
      z-index: ${y.zIndex.tooltip};
      color: ${y.colors.text.primary};
      max-width: 400px;
      font-size: ${y.typography.size.sm};
      // !important because these styles are also provided to popper via .popper classes from Tooltip component
      // hope to get rid of those soon
      padding: 15px !important;
      & [data-placement^='top'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='bottom'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='left'] {
        padding-top: 0 !important;
      }
      & [data-placement^='right'] {
        padding-top: 0 !important;
      }
    `}))},83957:(Y,T,e)=>{"use strict";e.d(T,{T:()=>o});var t=e(9892),n=e(66111),c=e(72317),s=e(193),i=e(5680),f=e(72648),u=e(94437),r=e(76161),d=e(96639);const o=(0,n.forwardRef)(({value:l="",onChange:p,returnColorAs:g="rgb",...y},v)=>{const[E,h]=(0,n.useState)(l),[C,a]=(0,n.useState)(!1),P=(0,f.l4)(),D=(0,f.wW)(m),x=(0,f.wW)(d.W);return(0,s.Z)(M=>{if(M===l)return;if(!M){p("");return}const b=P.visualization.getColorByName(M);p(g==="rgb"?i.asRgbString(b):i.asHexString(b))},500,[E]),n.createElement(u.L,{onClick:()=>a(!1)},n.createElement("div",{className:D.wrapper},C&&!y.disabled&&n.createElement(c.ef,{"data-testid":"color-popover",color:E,onChange:h,className:(0,t.cx)(x.root,D.picker)}),n.createElement(r.Z,{...y,theme:P,color:E,onChange:h,buttonAriaLabel:"Open color picker",onClick:()=>a(!0),onBlur:()=>a(!1),ref:v,isClearable:!0})))});o.displayName="ColorPickerInput";const m=l=>({wrapper:t.css`
      position: relative;
    `,picker:t.css`
      &.react-colorful {
        position: absolute;
        width: 100%;
        z-index: 11;
        bottom: 36px;
      }
    `,inner:t.css`
      position: absolute;
    `})},560:(Y,T,e)=>{"use strict";e.d(T,{h:()=>E});var t=e(9892),n=e(83962),c=e(66111),s=e(5680),i=e(72648),f=e(7804),u=e(98671),r=e(82897);function d(C,a){const P=new Array(C.length);for(let D=0;D<C.length;D++){const x=C.length-1-D;P[D]=a(C[x],x,C)}return P}const m=({hue:C,selectedColor:a,onColorSelect:P,...D})=>{const x=(0,r.upperFirst)(C.name),M=(0,i.wW)(l);return c.createElement("div",{className:M.colorRow},c.createElement("div",{className:M.colorLabel},x),c.createElement("div",{...D,className:M.swatchRow},d(C.shades,b=>c.createElement(u.b,{key:b.name,"aria-label":b.name,variant:b.primary?u.$.Large:u.$.Small,isSelected:b.name===a,color:b.color,onClick:()=>P(b.name)}))))},l=C=>({colorRow:t.css`
      display: grid;
      grid-template-columns: 25% 1fr;
      grid-column-gap: ${C.spacing(2)};
      padding: ${C.spacing(.5,0)};

      &:hover {
        background: ${C.colors.background.secondary};
      }
    `,colorLabel:t.css`
      padding-left: ${C.spacing(2)};
      display: flex;
      align-items: center;
    `,swatchRow:t.css`
      display: flex;
      gap: ${C.spacing(1)};
      align-items: center;
      justify-content: space-around;
      flex-direction: row;
    `}),p=({color:C,onChange:a})=>{const P=(0,i.l4)(),D=(0,i.wW)(g),x=[];for(const M of P.visualization.hues)x.push(c.createElement(m,{key:M.name,selectedColor:C,hue:M,onColorSelect:a}));return c.createElement(c.Fragment,null,c.createElement("div",{className:D.swatches},x),c.createElement("div",{className:D.extraColors},c.createElement(u.b,{isSelected:C==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>a("transparent")}),c.createElement(u.b,{isSelected:C==="text",color:P.colors.text.primary,label:"Text color",onClick:()=>a("text")})))},g=C=>({container:t.css`
      display: flex;
      flex-direction: column;
    `,extraColors:t.css`
      display: flex;
      align-items: center;
      justify-content: space-around;
      gap: ${C.spacing(1)};
      padding: ${C.spacing(1,0)};
    `,swatches:t.css`
      display: grid;
      flex-grow: 1;
    `});var y=e(96639);class v extends c.Component{constructor(a){super(a),this.getTabClassName=P=>{const{activePicker:D}=this.state;return`ColorPickerPopover__tab ${D===P&&"ColorPickerPopover__tab--active"}`},this.handleChange=P=>{const{onChange:D,enableNamedColors:x,theme:M}=this.props;if(x)return D(P);D(s.asHexString(M.visualization.getColorByName(P)))},this.onTabChange=P=>()=>this.setState({activePicker:P}),this.renderPicker=()=>{const{activePicker:P}=this.state,{color:D}=this.props;switch(P){case"spectrum":return c.createElement(y.Z,{color:D,onChange:this.handleChange});case"palette":return c.createElement(p,{color:D,onChange:this.handleChange});default:return this.renderCustomPicker(P)}},this.renderCustomPicker=P=>{const{customPickers:D,color:x,theme:M}=this.props;return D?c.createElement(D[P].tabComponent,{color:x,theme:M,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:P}=this.props;return P?c.createElement(c.Fragment,null,Object.keys(P).map(D=>c.createElement("button",{className:this.getTabClassName(D),onClick:this.onTabChange(D),key:D},P[D].name))):null},this.state={activePicker:"palette"}}render(){const{theme:a}=this.props,P=h(a);return c.createElement(n.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},c.createElement("div",{tabIndex:-1,className:P.colorPickerPopover},c.createElement("div",{className:P.colorPickerPopoverTabs},c.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette")},"Colors"),c.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum")},"Custom"),this.renderCustomPickerTabs()),c.createElement("div",{className:P.colorPickerPopoverContent},this.renderPicker())))}}const E=(0,i.HE)(v);E.displayName="ColorPickerPopover";const h=(0,f.B)(C=>({colorPickerPopover:t.css`
      border-radius: ${C.shape.borderRadius()};
      box-shadow: ${C.shadows.z3};
      background: ${C.colors.background.primary};
      border: 1px solid ${C.colors.border.weak};

      .ColorPickerPopover__tab {
        width: 50%;
        text-align: center;
        padding: ${C.spacing(1,0)};
        background: ${C.colors.background.secondary};
        color: ${C.colors.text.secondary};
        font-size: ${C.typography.bodySmall.fontSize};
        cursor: pointer;
        border: none;

        &:focus:not(:focus-visible) {
          outline: none;
          box-shadow: none;
        }

        :focus-visible {
          position: relative;
        }
      }

      .ColorPickerPopover__tab--active {
        color: ${C.colors.text.primary};
        font-weight: ${C.typography.fontWeightMedium};
        background: ${C.colors.background.primary};
      }
    `,colorPickerPopoverContent:t.css`
      width: 246px;
      font-size: ${C.typography.bodySmall.fontSize};
      min-height: 184px;
      padding: ${C.spacing(1)};
      display: flex;
      flex-direction: column;
    `,colorPickerPopoverTabs:t.css`
      display: flex;
      width: 100%;
      border-radius: ${C.shape.borderRadius()} ${C.shape.borderRadius()} 0 0;
    `}))},98671:(Y,T,e)=>{"use strict";e.d(T,{$:()=>u,b:()=>r});var t=e(9892),n=e(83962),c=e(66111),s=e(28550),i=e(68183),f=e(72648),u=(o=>(o.Small="small",o.Large="large",o))(u||{});const r=c.forwardRef(({color:o,label:m,variant:l="small",isSelected:p,"aria-label":g,...y},v)=>{const E=(0,f.l4)(),{isFocusVisible:h,focusProps:C}=(0,n.Fx)(),a=d(E,l,o,h,p),P=!!m,D=`${g||m} color`;return c.createElement("div",{ref:v,className:a.wrapper,"data-testid":i.wl.components.ColorSwatch.name,...y},P&&c.createElement("span",{className:a.label},m),c.createElement("button",{className:a.swatch,...C,"aria-label":D}))}),d=(o,m,l,p,g)=>{const y=(0,s.Z)(l),E=m==="small"?"16px":"32px";let h="none";return y.getAlpha()<.1&&(h=`2px solid ${o.colors.border.medium}`),{wrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,t.css)({marginRight:o.spacing(1)}),swatch:(0,t.css)({width:E,height:E,background:`${l}`,border:h,borderRadius:"50%",outlineOffset:"1px",outline:p?`2px solid  ${o.colors.primary.main}`:"none",boxShadow:g?`inset 0 0 0 2px ${l}, inset 0 0 0 4px ${o.colors.getContrastText(l)}`:"none",transition:o.transitions.create(["transform"],{duration:o.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"}})}};r.displayName="ColorSwatch"},43598:(Y,T,e)=>{"use strict";e.d(T,{j:()=>f,q:()=>u});var t=e(9892),n=e(66111),c=e(72648),s=e(18979),i=e(560);const f=d=>{const o=(0,c.wW)(r),{yaxis:m,onToggleAxis:l,color:p,...g}=d,y=l?{yaxis:{name:"Y-Axis",tabComponent(){return n.createElement(s.r,{key:"yaxisSwitch",label:"Use right y-axis",className:o.colorPickerAxisSwitch,labelClass:o.colorPickerAxisSwitchLabel,checked:m===2,onChange:()=>{l&&l()}})}}}:void 0;return n.createElement(i.h,{...g,color:p||"#000000",customPickers:y})},u=(0,c.HE)(f),r=()=>({colorPickerAxisSwitch:t.css`
      width: 100%;
    `,colorPickerAxisSwitchLabel:t.css`
      display: flex;
      flex-grow: 1;
    `})},96639:(Y,T,e)=>{"use strict";e.d(T,{W:()=>o,Z:()=>m});var t=e(9892),n=e(66111),c=e(72317),s=e(193),i=e(28550),f=e(5680),u=e(72648),r=e(76161);const d=({color:l,onChange:p})=>{const[g,y]=(0,n.useState)(l);(0,s.Z)(C=>{p(f.asHexString(v.visualization.getColorByName(C)))},500,[g]);const v=(0,u.l4)(),E=(0,u.wW)(o),h=(0,n.useMemo)(()=>g.startsWith("rgba")?g:(0,i.Z)(v.visualization.getColorByName(l)).toRgbString(),[g,v,l]);return n.createElement("div",{className:E.wrapper},n.createElement(c.ef,{className:E.root,color:h,onChange:y}),n.createElement(r.Z,{theme:v,color:h,onChange:y,className:E.colorInput}))},o=l=>({wrapper:t.css`
    flex-grow: 1;
  `,root:t.css`
    &.react-colorful {
      width: auto;
    }

    .react-colorful {
      &__saturation {
        border-radius: ${l.shape.borderRadius(1)} ${l.shape.borderRadius(1)} 0 0;
      }
      &__alpha {
        border-radius: 0 0 ${l.shape.borderRadius(1)} ${l.shape.borderRadius(1)};
      }
      &__alpha,
      &__hue {
        height: ${l.spacing(2)};
        position: relative;
      }
      &__pointer {
        height: ${l.spacing(2)};
        width: ${l.spacing(2)};
      }
    }
  `,colorInput:t.css`
    margin-top: ${l.spacing(2)};
  `}),m=d},71657:(Y,T,e)=>{"use strict";e.d(T,{p:()=>u});var t=e(9892),n=e(66111),c=e(72648),s=e(7804),i=e(31403);class f extends n.PureComponent{constructor(){super(...arguments),this.mainButtonRef=n.createRef(),this.confirmButtonRef=n.createRef(),this.state={showConfirm:!1},this.onClickButton=o=>{o&&o.preventDefault(),this.setState({showConfirm:!0},()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()}),this.props.onClick&&this.props.onClick()},this.onClickCancel=o=>{o&&o.preventDefault(),this.setState({showConfirm:!1},()=>{this.mainButtonRef.current?.focus()}),this.props.onCancel&&this.props.onCancel()},this.onConfirm=o=>{o&&o.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}}render(){const{theme:o,className:m,size:l,disabled:p,confirmText:g,confirmVariant:y,children:v}=this.props,E=r(o),h=(0,t.cx)(m,this.state.showConfirm?E.buttonHide:E.buttonShow,p&&E.buttonDisabled),C=(0,t.cx)(E.confirmButton,this.state.showConfirm?E.confirmButtonShow:E.confirmButtonHide),a=p?()=>{}:this.onClickButton;return n.createElement("span",{className:E.buttonContainer},n.createElement("div",{className:(0,t.cx)(p&&E.disabled)},typeof v=="string"?n.createElement("span",{className:h},n.createElement(i.zx,{size:l,fill:"text",onClick:a,ref:this.mainButtonRef},v)):n.createElement("span",{className:h,onClick:a},v)),n.createElement("span",{className:C},n.createElement(i.zx,{size:l,variant:y,onClick:this.onConfirm,ref:this.confirmButtonRef},g),n.createElement(i.zx,{size:l,fill:"text",onClick:this.onClickCancel},"Cancel")))}}const u=(0,c.HE)(f),r=(0,s.B)(d=>({buttonContainer:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-end;
    `,buttonDisabled:t.css`
      text-decoration: none;
      color: ${d.colors.text.primary};
      opacity: 0.65;
      pointer-events: none;
    `,buttonShow:t.css`
      opacity: 1;
      transition: opacity 0.1s ease;
      z-index: 2;
    `,buttonHide:t.css`
      opacity: 0;
      transition: opacity 0.1s ease, visibility 0 0.1s;
      visibility: hidden;
      z-index: 0;
    `,confirmButton:t.css`
      align-items: flex-start;
      background: ${d.colors.background.primary};
      display: flex;
      position: absolute;
      pointer-events: none;
    `,confirmButtonShow:t.css`
      z-index: 1;
      opacity: 1;
      transition: opacity 0.08s ease-out, transform 0.1s ease-out;
      transform: translateX(0);
      pointer-events: all;
    `,confirmButtonHide:t.css`
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s;
      transform: translateX(100px);
    `,disabled:t.css`
      cursor: not-allowed;
    `}));u.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},u.displayName="ConfirmButton"},13626:(Y,T,e)=>{"use strict";e.d(T,{m:()=>s});var t=e(66111),n=e(31403),c=e(71657);const s=({size:i,disabled:f,onConfirm:u,"aria-label":r,closeOnConfirm:d})=>t.createElement(c.p,{confirmText:"Delete",confirmVariant:"destructive",size:i||"md",disabled:f,onConfirm:u,closeOnConfirm:d},t.createElement(n.zx,{"aria-label":r,variant:"destructive",icon:"times",size:i||"sm"}))},98102:(Y,T,e)=>{"use strict";e.d(T,{s:()=>d});var t=e(9892),n=e(66111),c=e(68183),s=e(52081),i=e(46967),f=e(72648),u=e(31403),r=e(35029);const d=({isOpen:m,title:l,body:p,description:g,confirmText:y,confirmVariant:v="destructive",confirmationText:E,dismissText:h="Cancel",dismissVariant:C="secondary",alternativeText:a,modalClass:P,icon:D="exclamation-triangle",onConfirm:x,onDismiss:M,onAlternative:b,confirmButtonVariant:R="destructive"})=>{const[S,O]=(0,n.useState)(Boolean(E)),U=(0,f.wW)(o),I=(0,n.useRef)(null),F=w=>{O(E?.localeCompare(w.currentTarget.value)!==0)};return(0,n.useEffect)(()=>{m&&I.current?.focus()},[m]),(0,n.useEffect)(()=>{m&&O(Boolean(E))},[m,E]),n.createElement(r.u,{className:(0,t.cx)(U.modal,P),title:l,icon:D,isOpen:m,onDismiss:M},n.createElement("div",{className:U.modalText},p,g?n.createElement("div",{className:U.modalDescription},g):null,E?n.createElement("div",{className:U.modalConfirmationInput},n.createElement(s.Lh,null,n.createElement(i.I,{placeholder:`Type ${E} to confirm`,onChange:F}))):null),n.createElement(r.u.ButtonRow,null,n.createElement(u.zx,{variant:C,onClick:M},h),n.createElement(u.zx,{variant:R,onClick:x,disabled:S,ref:I,"data-testid":c.wl.pages.ConfirmModal.delete},y),b?n.createElement(u.zx,{variant:"primary",onClick:b},a):null))},o=m=>({modal:t.css`
    width: 500px;
  `,modalText:(0,t.css)({fontSize:m.typography.h5.fontSize,color:m.colors.text.primary}),modalDescription:(0,t.css)({fontSize:m.typography.body.fontSize}),modalConfirmationInput:(0,t.css)({paddingTop:m.spacing(1)})})},30909:(Y,T,e)=>{"use strict";e.d(T,{x:()=>f});var t=e(66111),n=e(17650),c=e(68183),s=e(95130),i=e(85511);const f=t.memo(({x:u,y:r,onClose:d,focusOnOpen:o=!0,renderMenuItems:m,renderHeader:l})=>{const p=(0,t.useRef)(null),[g,y]=(0,t.useState)({});(0,t.useLayoutEffect)(()=>{const a=p.current;if(a){const P=a.getBoundingClientRect(),D=5,x={right:window.innerWidth<u+P.width,bottom:window.innerHeight<r+P.height+D};y({position:"fixed",left:x.right?u-P.width-D:u-D,top:x.bottom?r-P.height-D:r+D})}},[u,r]),(0,n.Z)(p,()=>{d?.()});const v=l?.(),E=m?.(),h=a=>{o&&a(0)},C=a=>{a.key==="Escape"&&(a.preventDefault(),a.stopPropagation(),d?.())};return t.createElement(i.h_,null,t.createElement(s.v,{header:v,ref:p,style:g,ariaLabel:c.wl.components.Menu.MenuComponent("Context"),onOpen:h,onClick:d,onKeyDown:C},E))});f.displayName="ContextMenu"},74285:(Y,T,e)=>{"use strict";e.d(T,{z:()=>c});var t=e(66111),n=e(30909);const c=({children:s,renderMenuItems:i,focusOnOpen:f=!0})=>{const[u,r]=(0,t.useState)(!1),[d,o]=(0,t.useState)({x:0,y:0});return t.createElement(t.Fragment,null,s({openMenu:m=>{r(!0),o({x:m.pageX,y:m.pageY})}}),u&&t.createElement(n.x,{onClose:()=>r(!1),x:d.x,y:d.y,renderMenuItems:i,focusOnOpen:f}))}},68226:(Y,T,e)=>{"use strict";e.d(T,{$:()=>o,Z:()=>m});var t=e(9892),n=e(66111),c=e(32439),s=e(72648),i=e(9085),f=e.n(i),u=e(39904);const r=({children:p})=>{const[g,y]=(0,n.useState)(!1),[v,E]=(0,n.useState)(!1),h=(0,n.useRef)(null),C=(0,n.useRef)(null),a=(0,s.wW)(d);return(0,n.useEffect)(()=>{const P=new IntersectionObserver(D=>{D.forEach(x=>{x.target===h.current?y(!x.isIntersecting):x.target===C.current&&E(!x.isIntersecting)})});return[h,C].forEach(D=>{D.current&&P.observe(D.current)}),()=>P.disconnect()},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(a.scrollIndicator,a.scrollTopIndicator,{[a.scrollIndicatorVisible]:g})},n.createElement(u.J,{className:f()(a.scrollIcon,a.scrollTopIcon),name:"angle-up"})),n.createElement("div",{className:a.scrollContent},n.createElement("div",{ref:h}),p,n.createElement("div",{ref:C})),n.createElement("div",{className:(0,t.cx)(a.scrollIndicator,a.scrollBottomIndicator,{[a.scrollIndicatorVisible]:v})},n.createElement(u.J,{className:f()(a.scrollIcon,a.scrollBottomIcon),name:"angle-down"})))},d=p=>({scrollContent:(0,t.css)({flex:1,position:"relative"}),scrollIndicator:(0,t.css)({height:p.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:p.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,t.css)({background:`linear-gradient(0deg, transparent, ${p.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,t.css)({background:`linear-gradient(180deg, transparent, ${p.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,t.css)({opacity:1}),scrollIcon:(0,t.css)({left:"50%",position:"absolute",transform:"translateX(-50%)"}),scrollTopIcon:(0,t.css)({top:0}),scrollBottomIcon:(0,t.css)({bottom:0})}),o=({autoHide:p=!1,autoHideTimeout:g=200,setScrollTop:y,className:v,testId:E,autoHeightMin:h="0",autoHeightMax:C="100%",hideTracksWhenNotNeeded:a=!1,hideHorizontalTrack:P,hideVerticalTrack:D,scrollRefCallback:x,showScrollIndicators:M=!1,updateAfterMountMs:b,scrollTop:R,onScroll:S,children:O})=>{const U=(0,n.useRef)(null),I=(0,s.wW)(l);(0,n.useEffect)(()=>{U.current&&x&&x(U.current.view)},[U,x]),(0,n.useEffect)(()=>{U.current&&R!=null&&U.current.scrollTop(R)},[R]),(0,n.useEffect)(()=>{b&&setTimeout(()=>{const A=U.current;A?.update&&A.update()},b)},[b]);function F(A,_,k){return k.style&&_&&(k.style.display="none"),n.createElement("div",{...k,className:A})}const w=(0,n.useCallback)(A=>F("track-horizontal",P,A),[P]),K=(0,n.useCallback)(A=>F("track-vertical",D,A),[D]),L=(0,n.useCallback)(A=>n.createElement("div",{...A,className:"thumb-horizontal"}),[]),V=(0,n.useCallback)(A=>n.createElement("div",{...A,className:"thumb-vertical"}),[]),H=(0,n.useCallback)(A=>(A.style&&A.style.WebkitOverflowScrolling==="touch"&&(A.style.WebkitOverflowScrolling="auto"),n.createElement("div",{...A,className:"scrollbar-view"})),[]),j=(0,n.useCallback)(()=>{U.current&&y&&y(U.current.getValues())},[y]);return n.createElement(c.ZP,{"data-testid":E,ref:U,className:(0,t.cx)(I.customScrollbar,v,{[I.scrollbarWithScrollIndicators]:M}),onScrollStop:j,autoHeight:!0,autoHide:p,autoHideTimeout:g,hideTracksWhenNotNeeded:a,autoHeightMax:C,autoHeightMin:h,renderTrackHorizontal:w,renderTrackVertical:K,renderThumbHorizontal:L,renderThumbVertical:V,renderView:H,onScroll:S},M?n.createElement(r,null,O):O)},m=o,l=p=>({customScrollbar:t.css`
      // Fix for Firefox. For some reason sometimes .view container gets a height of its content, but in order to
      // make scroll working it should fit outer container size (scroll appears only when inner container size is
      // greater than outer one).
      display: flex;
      flex-grow: 1;
      .scrollbar-view {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
      }
      .track-vertical {
        border-radius: ${p.shape.borderRadius(2)};
        width: ${p.spacing(1)} !important;
        right: 0px;
        bottom: ${p.spacing(.25)};
        top: ${p.spacing(.25)};
      }
      .track-horizontal {
        border-radius: ${p.shape.borderRadius(2)};
        height: ${p.spacing(1)} !important;
        right: ${p.spacing(.25)};
        bottom: ${p.spacing(.25)};
        left: ${p.spacing(.25)};
      }
      .thumb-vertical {
        background: ${p.colors.action.focus};
        border-radius: ${p.shape.borderRadius(2)};
        opacity: 0;
      }
      .thumb-horizontal {
        background: ${p.colors.action.focus};
        border-radius: ${p.shape.borderRadius(2)};
        opacity: 0;
      }
      &:hover {
        .thumb-vertical,
        .thumb-horizontal {
          opacity: 1;
          transition: opacity 0.3s ease-in-out;
        }
      }
    `,scrollbarWithScrollIndicators:t.css`
      .scrollbar-view {
        position: static !important;
      }
    `})},89719:(Y,T,e)=>{"use strict";e.d(T,{k:()=>c});var t=e(66111),n=e(31403);function c({link:s,buttonProps:i}){return t.createElement("a",{href:s.href,target:s.target,rel:"noreferrer",onClick:s.onClick?f=>{!(f.ctrlKey||f.metaKey||f.shiftKey)&&s.onClick&&(f.preventDefault(),s.onClick(f))}:void 0},t.createElement(n.zx,{icon:"external-link-alt",variant:"primary",size:"sm",...i},s.title))}},35919:(Y,T,e)=>{"use strict";e.d(T,{v:()=>O});var t=e(9892),n=e(57706),c=e.n(n),s=e(66111),i=e(14760),f=e(83272),u=e(43809),r=e(56975),d=e(3281),o=e(94976),m=e(12724),l=e(67660),p=e(72648),g=e(68226),y=e(46967),v=e(85511),E=e(82897),h=e(53165),C=e(56766);const a=I=>({list:t.css`
      border-bottom: 1px solid ${I.colors.border.weak};
      &:last-child {
        border: none;
      }
    `,wrapper:t.css`
      background: ${I.colors.background.primary};
      width: 250px;
    `,item:t.css`
      background: none;
      padding: 2px 8px;
      color: ${I.colors.text.primary};
      cursor: pointer;
      &:hover {
        background: ${I.colors.action.hover};
      }
    `,label:t.css`
      color: ${I.colors.text.secondary};
    `,activeItem:t.css`
      background: ${I.colors.background.secondary};
      &:hover {
        background: ${I.colors.background.secondary};
      }
    `,itemValue:t.css`
      font-family: ${I.typography.fontFamilyMonospace};
      font-size: ${I.typography.size.sm};
    `}),P=({suggestions:I,...F})=>{const w=(0,s.useRef)(null);(0,h.Z)(w,()=>{F.onClose&&F.onClose()});const K=(0,s.useMemo)(()=>(0,E.groupBy)(I,V=>V.origin),[I]),L=(0,p.wW)(a);return s.createElement("div",{role:"menu",ref:w,className:L.wrapper},Object.keys(K).map((V,H)=>{const j=H===0?0:Object.keys(K).reduce((A,_,k)=>k>=H?A:A+K[_].length,0);return s.createElement(D,{...F,suggestions:K[V],label:`${(0,E.capitalize)(V)}`,activeIndex:F.activeIndex,activeIndexOffset:j,key:V})}))};P.displayName="DataLinkSuggestions";const D=s.memo(({activeIndex:I,activeIndexOffset:F,label:w,onClose:K,onSuggestionSelect:L,suggestions:V,activeRef:H})=>{const j=(0,p.wW)(a);return s.createElement(s.Fragment,null,s.createElement(C.a,{className:j.list,items:V,renderItem:(A,_)=>{const k=_+F===I;return s.createElement("div",{role:"menuitem",tabIndex:0,className:(0,t.cx)(j.item,k&&j.activeItem),ref:k?H:void 0,onClick:()=>{L(A)},title:A.documentation},s.createElement("span",{className:j.itemValue},s.createElement("span",{className:j.label},w)," ",A.label))}}))});D.displayName="DataLinkSuggestionsList";class x{getBoundingClientRect(){const F=window.getSelection(),w=F&&F.anchorNode;return w&&w.parentElement?w.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const M=(I,F)=>I-F*Math.floor(I/F),b={builtInVariable:{pattern:/(\${\S+?})/}},R=[(0,l.Z)({onlyIn:I=>I.type==="code_block",getSyntax:()=>"links"},{...c().languages,links:b})],S=I=>({input:(0,y.H)({theme:I,invalid:!1}).input,editor:t.css`
    .token.builtInVariable {
      color: ${I.colors.success.text};
    }
    .token.variable {
      color: ${I.colors.primary.text};
    }
  `,suggestionsWrapper:t.css`
    box-shadow: ${I.shadows.z2};
  `,wrapperOverrides:t.css`
    width: 100%;
    > .slate-query-field__wrapper {
      padding: 0;
      background-color: transparent;
      border: none;
    }
  `}),O=(0,s.memo)(({value:I,onChange:F,suggestions:w,placeholder:K="http://your-grafana.com/d/000000010/annotations"})=>{const L=(0,s.useRef)(null),V=(0,p.wW)(S),[H,j]=(0,s.useState)(!1),[A,_]=(0,s.useState)(0),[k,Q]=(0,s.useState)((0,m.l1)(I)),re=(0,f.Z)(k),[Z,oe]=(0,s.useState)(0),G=(0,s.useRef)({showingSuggestions:H,suggestions:w,suggestionsIndex:A,linkUrl:k,onChange:F});G.current={showingSuggestions:H,suggestions:w,suggestionsIndex:A,linkUrl:k,onChange:F};const le=(0,s.useRef)(null);(0,s.useEffect)(()=>{oe(U(le.current,A))},[A]);const ge=(0,s.useMemo)(()=>new x,[]),ne=s.useCallback((q,se)=>{if(!G.current.showingSuggestions)return q.key==="="||q.key==="$"||q.keyCode===32&&q.ctrlKey?j(!0):se();switch(q.key){case"Backspace":case"Escape":return j(!1),_(0);case"Enter":return q.preventDefault(),te(G.current.suggestions[G.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":q.preventDefault();const ae=q.key==="ArrowDown"?1:-1;return _(pe=>M(pe+ae,G.current.suggestions.length));default:return se()}},[]);(0,s.useEffect)(()=>{re&&re.selection.isFocused&&!k.selection.isFocused&&G.current.onChange(u.Z.serialize(k))},[k,re]);const ue=s.useCallback(({value:q})=>{Q(q)},[]),te=(q,se=L.current)=>{const pe=me()==="$";q.origin!==d.L8.Template||q.value===o.W.includeVars?se.insertText(`${pe?"":"$"}{${q.value}}`):se.insertText(`${pe?"":"$"}{${q.value}:queryparam}`),Q(se.value),j(!1),_(0),G.current.onChange(u.Z.serialize(se.value))},me=()=>{const q=document.getElementById("data-link-input");let se="",ae,pe;return window.getSelection&&(ae=window.getSelection(),ae&&ae.rangeCount>0&&(pe=ae.getRangeAt(0).cloneRange(),pe.collapse(!0),pe.setStart(q,0),se=pe.toString().slice(-1))),se};return s.createElement("div",{className:V.wrapperOverrides},s.createElement("div",{className:"slate-query-field__wrapper"},s.createElement("div",{id:"data-link-input",className:"slate-query-field"},H&&s.createElement(v.h_,null,s.createElement(i.r,{referenceElement:ge,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}]},({ref:q,style:se,placement:ae})=>s.createElement("div",{ref:q,style:se,"data-placement":ae,className:V.suggestionsWrapper},s.createElement(g.Z,{scrollTop:Z,autoHeightMax:"300px",setScrollTop:({scrollTop:pe})=>oe(pe)},s.createElement(P,{activeRef:le,suggestions:G.current.suggestions,onSuggestionSelect:te,onClose:()=>j(!1),activeIndex:A}))))),s.createElement(r.ML,{schema:m.Yi,ref:L,placeholder:K,value:G.current.linkUrl,onChange:ue,onKeyDown:(q,se,ae)=>ne(q,ae),plugins:R,className:(0,t.cx)(V.editor,V.input,t.css`
                  padding: 3px 8px;
                `)}))))});O.displayName="DataLinkInput";function U(I,F){return(I?.clientHeight??0)*F}},18543:(Y,T,e)=>{"use strict";e.d(T,{V:()=>r});var t=e(9892),n=e(66111),c=e(68183),s=e(79406),i=e(74285),f=e(14391),u=e(42044);const r=({children:d,links:o,style:m})=>{const l=[{items:(0,s.R)(o),label:"Data links"}],p=l[0].items.length,g=()=>l.map((v,E)=>n.createElement(f.k,{key:`${v.label}${E}`,label:v.label},(v.items||[]).map(h=>n.createElement(u.s,{key:h.label,url:h.url,label:h.label,target:h.target,icon:h.icon,active:h.active,onClick:h.onClick})))),y=t.css`
    cursor: context-menu;
  `;if(p>1)return n.createElement(i.z,{renderMenuItems:g},({openMenu:v})=>d({openMenu:v,targetClassName:y}));{const v=o()[0];return n.createElement("a",{href:v.href,onClick:v.onClick,target:v.target,title:v.title,style:{...m,overflow:"hidden",display:"flex"},"aria-label":c.wl.components.DataLinksContextMenu.singleLink},d({}))}}},68037:(Y,T,e)=>{"use strict";e.d(T,{d:()=>a});var t=e(9892),n=e(82897),c=e(66111),s=e(72648),i=e(7804),f=e(31403),u=e(35029),r=e(79406),d=e(24799),o=e(46967),m=e(8944),l=e(35919);const p=D=>({listItem:t.css`
    margin-bottom: ${D.spacing()};
  `,infoText:t.css`
    padding-bottom: ${D.spacing(2)};
    margin-left: 66px;
    color: ${D.colors.text.secondary};
  `}),g=c.memo(({index:D,value:x,onChange:M,suggestions:b,isLast:R})=>{const S=(0,s.wW)(p),O=(F,w)=>{M(D,{...x,url:F},w)},U=F=>{M(D,{...x,title:F.target.value})},I=()=>{M(D,{...x,targetBlank:!x.targetBlank})};return c.createElement("div",{className:S.listItem},c.createElement(d.g,{label:"Title"},c.createElement(o.I,{value:x.title,onChange:U,placeholder:"Show details"})),c.createElement(d.g,{label:"URL",invalid:(0,r.g)(x.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},c.createElement(l.v,{value:x.url,onChange:O,suggestions:b})),c.createElement(d.g,{label:"Open in new tab"},c.createElement(m.r,{value:x.targetBlank||!1,onChange:I})),R&&c.createElement("div",{className:S.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});g.displayName="DataLinkEditor";const y=({link:D,index:x,getSuggestions:M,onSave:b,onCancel:R})=>{const[S,O]=(0,c.useState)(D);return c.createElement(c.Fragment,null,c.createElement(g,{value:S,index:x,isLast:!1,suggestions:M(),onChange:(U,I)=>{O(I)}}),c.createElement(u.u.ButtonRow,null,c.createElement(f.zx,{variant:"secondary",onClick:()=>R(x),fill:"outline"},"Cancel"),c.createElement(f.zx,{onClick:()=>{b(x,S)}},"Save")))};var v=e(57227),E=e(8180);const h=({link:D,onEdit:x,onRemove:M})=>{const b=(0,s.l4)(),R=C(b),{title:S="",url:O=""}=D,U=S.trim()!=="",I=O.trim()!=="",F=(0,r.g)(O);return c.createElement("div",{className:R.wrapper},c.createElement("div",{className:R.titleWrapper},c.createElement("div",{className:(0,t.cx)(R.url,!I&&R.notConfigured,F&&R.errored)},U?S:"Data link title not provided"),c.createElement("div",{className:R.actionButtons},c.createElement(E.h,{name:"pen",onClick:x}),c.createElement(E.h,{name:"times",onClick:M}))),c.createElement("div",{className:(0,t.cx)(R.url,!I&&R.notConfigured,F&&R.errored),title:O},I?O:"Data link url not provided"),F&&c.createElement(v.S,null,"Explore data link may not work in the future. Please edit."))},C=(0,i.B)(D=>({wrapper:t.css`
      margin-bottom: ${D.spacing(2)};
      width: 100%;
      &:last-child {
        margin-bottom: 0;
      }
      display: flex;
      flex-direction: column;
    `,titleWrapper:t.css`
      label: data-links-list-item-title;
      justify-content: space-between;
      display: flex;
      width: 100%;
      align-items: center;
    `,actionButtons:t.css`
      margin-left: ${D.spacing(1)};
      display: flex;
    `,errored:t.css`
      color: ${D.colors.error.text};
      font-style: italic;
    `,notConfigured:t.css`
      font-style: italic;
    `,title:t.css`
      color: ${D.colors.text.primary};
      font-size: ${D.typography.size.sm};
      font-weight: ${D.typography.fontWeightMedium};
    `,url:t.css`
      color: ${D.colors.text.secondary};
      font-size: ${D.typography.size.sm};
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 90%;
    `})),a=({links:D,onChange:x,getSuggestions:M,data:b})=>{const R=(0,s.l4)(),[S,O]=(0,c.useState)(null),[U,I]=(0,c.useState)(!1),F=P(R),w=D??[],K=S!==null,L=(A,_)=>{if(U)if(_.title.trim()===""&&_.url.trim()===""){I(!1),O(null);return}else O(null),I(!1);const k=(0,n.cloneDeep)(w);k[A]=_,x(k),O(null)},V=()=>{let A=(0,n.cloneDeep)(w);O(A.length),I(!0)},H=A=>{U&&I(!1),O(null)},j=A=>{const _=(0,n.cloneDeep)(w);_.splice(A,1),x(_)};return c.createElement(c.Fragment,null,w.length>0&&c.createElement("div",{className:F.wrapper},w.map((A,_)=>c.createElement(h,{key:`${A.title}/${_}`,index:_,link:A,onChange:L,onEdit:()=>O(_),onRemove:()=>j(_),data:b}))),K&&S!==null&&c.createElement(u.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{H(S)}},c.createElement(y,{index:S,link:U?{title:"",url:""}:w[S],data:b,onSave:L,onCancel:H,getSuggestions:M})),c.createElement(f.zx,{size:"sm",icon:"plus",onClick:V,variant:"secondary"},"Add link"))},P=(0,i.B)(D=>({wrapper:t.css`
      margin-bottom: ${D.spacing(2)};
    `}))},45576:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>f});var t=e(9892),n=e(66111),c=e(72648),s=e(39904),i=e(89719);function f({links:r}){const d=(0,c.wW)(u);if(r.length===1)return n.createElement(i.k,{link:r[0]});const o=r.filter(l=>l.target==="_blank"),m=r.filter(l=>l.target==="_self");return n.createElement(n.Fragment,null,m.map((l,p)=>n.createElement(i.k,{key:p,link:l})),n.createElement("div",{className:d.wrapper},n.createElement("p",{className:d.externalLinksHeading},"External links"),o.map((l,p)=>n.createElement("a",{key:p,href:l.href,target:l.target,className:d.externalLink},n.createElement(s.J,{name:"external-link-alt"}),l.title))))}const u=r=>({wrapper:t.css`
    flex-basis: 150px;
    width: 100px;
    margin-top: ${r.spacing(1)};
  `,externalLinksHeading:t.css`
    color: ${r.colors.text.secondary};
    font-weight: ${r.typography.fontWeightRegular};
    font-size: ${r.typography.size.sm};
    margin: 0;
  `,externalLink:t.css`
    color: ${r.colors.text.link};
    font-weight: ${r.typography.fontWeightRegular};
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    &:hover {
      text-decoration: underline;
    }

    div {
      margin-right: ${r.spacing(1)};
    }
  `})},64260:(Y,T,e)=>{"use strict";e.d(T,{O:()=>s});var t=e(66111),n=e(8944),c=e(81764);function s({options:i,onOptionsChange:f}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Alerting"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(c._,{labelWidth:29,label:"Manage alert rules in Alerting UI",disabled:i.readOnly,tooltip:"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source."},t.createElement(n.x,{value:i.jsonData.manageAlerts!==!1,onChange:u=>f({...i,jsonData:{...i.jsonData,manageAlerts:u.currentTarget.checked}})}))))))}},85615:(Y,T,e)=>{"use strict";e.d(T,{W:()=>u});var t=e(66111),n=e(31403),c=e(81764),s=e(11543),i=e(46967),f=e(97379);const u=({hasCert:r,label:d,onChange:o,onClick:m,placeholder:l})=>t.createElement(s.Z,null,t.createElement(c._,{label:d,labelWidth:14,disabled:r},r?t.createElement(i.I,{type:"text",value:"configured",width:24}):t.createElement(f.K,{rows:7,onChange:o,placeholder:l,required:!0})),r&&t.createElement(n.zx,{variant:"secondary",onClick:m,style:{marginLeft:4}},"Reset"))},92099:(Y,T,e)=>{"use strict";e.d(T,{H:()=>l});var t=e(9892),n=e(82897),c=e.n(n),s=e(66111),i=e(7804),f=e(31403),u=e(95569),r=e(39904),d=e(34517);const o=(0,i.B)(()=>({layout:t.css`
      display: flex;
      align-items: center;
      margin-bottom: 4px;
      > * {
        margin-left: 4px;
        margin-bottom: 0;
        height: 100%;
        &:first-child,
        &:last-child {
          margin-left: 0;
        }
      }
    `})),m=({header:g,onBlur:y,onChange:v,onRemove:E,onReset:h})=>{const C=o();return s.createElement("div",{className:C.layout},s.createElement(u.W,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:g.name||"",onChange:a=>v({...g,name:a.target.value}),onBlur:y}),s.createElement(d.c,{label:"Value","aria-label":"Value",name:"value",isConfigured:g.configured,value:g.value,labelWidth:5,inputWidth:g.configured?11:12,placeholder:"Header Value",onReset:()=>h(g.id),onChange:a=>v({...g,value:a.target.value}),onBlur:y}),s.createElement(f.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:a=>E(g.id)},s.createElement(r.J,{name:"trash-alt"})))};m.displayName="CustomHeaderRow";class l extends s.PureComponent{constructor(y){super(y),this.state={headers:[]},this.updateSettings=()=>{const{headers:C}=this.state,a=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([D,x])=>!D.startsWith("httpHeaderName"))),P=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([D,x])=>!D.startsWith("httpHeaderValue")));for(const[D,x]of C.entries())a[`httpHeaderName${D+1}`]=x.name,x.configured||(P[`httpHeaderValue${D+1}`]=x.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:a,secureJsonData:P})},this.onHeaderAdd=()=>{this.setState(C=>({headers:[...C.headers,{id:(0,n.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(C,a)=>{this.setState(({headers:P})=>({headers:P.map((D,x)=>C!==x?D:{...a})}))},this.onHeaderReset=C=>{this.setState(({headers:a})=>({headers:a.map((P,D)=>P.id!==C?P:{...P,value:"",configured:!1})}))},this.onHeaderRemove=C=>{this.setState(({headers:a})=>({headers:a.filter(P=>P.id!==C)}),this.updateSettings)};const{jsonData:v,secureJsonData:E,secureJsonFields:h}=this.props.dataSourceConfig;this.state={headers:Object.keys(v).sort().filter(C=>C.startsWith("httpHeaderName")).map((C,a)=>({id:(0,n.uniqueId)(),name:v[C],value:E!==void 0?E[C]:"",configured:h&&h[`httpHeaderValue${a+1}`]||!1}))}}render(){const{headers:y}=this.state,{dataSourceConfig:v}=this.props;return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("h6",null,"Custom HTTP Headers")),s.createElement("div",null,y.map((E,h)=>s.createElement(m,{key:E.id,header:E,onChange:C=>{this.onHeaderChange(h,C)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!v.readOnly&&s.createElement("div",{className:"gf-form"},s.createElement(f.zx,{variant:"secondary",icon:"plus",type:"button",onClick:E=>{this.onHeaderAdd()}},"Add header")))}}var p=null},12006:(Y,T,e)=>{"use strict";e.d(T,{E:()=>M});var t=e(9892),n=e(66111),c=e(68183),s=e(72648),i=e(95569),f=e(19426),u=e(81764),r=e(50869),d=e(39904),o=e(8581),m=e(8944),l=e(43339),p=e(34517);const g=({dataSourceConfig:b,onChange:R})=>{const S=b.secureJsonData?b.secureJsonData.basicAuthPassword:"",O=()=>{R({...b,secureJsonData:{...b.secureJsonData,basicAuthPassword:""},secureJsonFields:{...b.secureJsonFields,basicAuthPassword:!1}})},U=I=>{R({...b,secureJsonData:{...b.secureJsonData,basicAuthPassword:I.currentTarget.value}})};return n.createElement(n.Fragment,null,n.createElement(u._,{disabled:b.readOnly},n.createElement(i.W,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:b.basicAuthUser,onChange:I=>R({...b,basicAuthUser:I.currentTarget.value})})),n.createElement(u._,{disabled:b.readOnly},n.createElement(p.c,{isConfigured:!!(b.secureJsonFields&&b.secureJsonFields.basicAuthPassword),value:S||"",inputWidth:18,labelWidth:10,onReset:O,onChange:U})))};var y=e(92099);const v=26,E=({dataSourceConfig:b,onChange:R,showForwardOAuthIdentityOption:S=!0})=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement(u._,{label:"TLS Client Auth",labelWidth:v,disabled:b.readOnly},n.createElement(m.x,{id:"http-settings-tls-client-auth",value:b.jsonData.tlsAuth||!1,onChange:O=>R({...b.jsonData,tlsAuth:O.currentTarget.checked})})),n.createElement(u._,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:v,disabled:b.readOnly},n.createElement(m.x,{id:"http-settings-ca-cert",value:b.jsonData.tlsAuthWithCACert||!1,onChange:O=>R({...b.jsonData,tlsAuthWithCACert:O.currentTarget.checked})}))),n.createElement("div",{className:"gf-form-inline"},n.createElement(u._,{label:"Skip TLS Verify",labelWidth:v,disabled:b.readOnly},n.createElement(m.x,{id:"http-settings-skip-tls-verify",value:b.jsonData.tlsSkipVerify||!1,onChange:O=>R({...b.jsonData,tlsSkipVerify:O.currentTarget.checked})}))),S&&n.createElement("div",{className:"gf-form-inline"},n.createElement(u._,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:v,disabled:b.readOnly},n.createElement(m.x,{id:"http-settings-forward-oauth",value:b.jsonData.oauthPassThru||!1,onChange:O=>R({...b.jsonData,oauthPassThru:O.currentTarget.checked})}))));var h=e(12580),C=e(23622);const a=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],P={label:"Server (default)",value:"proxy"},D=()=>n.createElement("div",{className:"grafana-info-box m-t-2"},n.createElement("p",null,"Access mode controls how requests to the data source will be handled.",n.createElement("strong",null,"\xA0",n.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),n.createElement("div",{className:"alert-title"},"Server access mode (Default):"),n.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),n.createElement("div",{className:"alert-title"},"Browser access mode:"),n.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),x=26,M=b=>{const{defaultUrl:R,dataSourceConfig:S,onChange:O,showAccessOptions:U,sigV4AuthToggleEnabled:I,showForwardOAuthIdentityOption:F,azureAuthSettings:w,renderSigV4Editor:K,secureSocksDSProxyEnabled:L,urlLabel:V,urlDocs:H}=b,[j,A]=(0,n.useState)(!1),_=(0,s.l4)();let k;const Q=(0,n.useCallback)(ne=>{O({...S,...ne})},[S,O]);switch(S.access){case"direct":k=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",H);break;case"proxy":k=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",H);break;default:k=n.createElement(n.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",H)}const re=n.createElement(o.Ph,{"aria-label":"Access",className:"width-20 gf-form-input",options:a,value:a.filter(ne=>ne.value===S.access)[0]||P,onChange:ne=>Q({access:ne.value}),disabled:S.readOnly}),Z=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(S.url),oe=t.css`
    box-shadow: inset 0 0px 5px ${_.v1.palette.red};
  `,G=(0,t.cx)({["width-20"]:!0,[oe]:!Z}),le=n.createElement(r.I,{className:G,placeholder:R,value:S.url,"aria-label":c.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:ne=>Q({url:ne.currentTarget.value}),disabled:S.readOnly}),ge=w?.azureAuthSupported&&w.getAzureAuthEnabled(S)||!1;return n.createElement("div",{className:"gf-form-group"},n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"HTTP"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(i.W,{interactive:!!H,label:V??"URL",labelWidth:13,tooltip:k,inputEl:le})),U&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(i.W,{label:"Access",labelWidth:13,inputWidth:20,inputEl:re})),n.createElement("div",{className:"gf-form"},n.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>A(ne=>!ne)},"Help\xA0",n.createElement(d.J,{name:j?"angle-down":"angle-right",style:{marginBottom:0}})))),j&&n.createElement(D,null)),S.access==="proxy"&&n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(f.c,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),n.createElement(l.B,{tags:S.jsonData.keepCookies,width:40,onChange:ne=>Q({jsonData:{...S.jsonData,keepCookies:ne}}),disabled:S.readOnly})),n.createElement("div",{className:"gf-form"},n.createElement(i.W,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:S.jsonData.timeout,onChange:ne=>{Q({jsonData:{...S.jsonData,timeout:parseInt(ne.currentTarget.value,10)}})},disabled:S.readOnly}))))),n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Auth"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement(u._,{label:"Basic auth",labelWidth:x,disabled:S.readOnly},n.createElement(m.x,{id:"http-settings-basic-auth",value:S.basicAuth,onChange:ne=>{Q({basicAuth:ne.currentTarget.checked})}})),n.createElement(u._,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:x,disabled:S.readOnly},n.createElement(m.x,{id:"http-settings-with-credentials",value:S.withCredentials,onChange:ne=>{Q({withCredentials:ne.currentTarget.checked})}}))),w?.azureAuthSupported&&n.createElement("div",{className:"gf-form-inline"},n.createElement(u._,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:x,disabled:S.readOnly},n.createElement(m.x,{id:"http-settings-azure-auth",value:ge,onChange:ne=>{Q(w.setAzureAuthEnabled(S,ne.currentTarget.checked))}}))),I&&n.createElement("div",{className:"gf-form-inline"},n.createElement(u._,{label:"SigV4 auth",labelWidth:x,disabled:S.readOnly},n.createElement(m.x,{id:"http-settings-sigv4-auth",value:S.jsonData.sigV4Auth||!1,onChange:ne=>{Q({jsonData:{...S.jsonData,sigV4Auth:ne.currentTarget.checked}})}}))),S.access==="proxy"&&n.createElement(E,{dataSourceConfig:S,onChange:ne=>Q({jsonData:ne}),showForwardOAuthIdentityOption:F})),S.basicAuth&&n.createElement(n.Fragment,null,n.createElement("h6",null,"Basic Auth Details"),n.createElement("div",{className:"gf-form-group"},n.createElement(g,{...b}))),w?.azureAuthSupported&&ge&&w.azureSettingsUI&&n.createElement(w.azureSettingsUI,{dataSourceConfig:S,onChange:O}),S.jsonData.sigV4Auth&&I&&K,(S.jsonData.tlsAuth||S.jsonData.tlsAuthWithCACert)&&n.createElement(C.s,{dataSourceConfig:S,onChange:O}),S.access==="proxy"&&n.createElement(y.H,{dataSourceConfig:S,onChange:O})),L&&n.createElement(h.i,{options:S,onOptionsChange:O}))}},12580:(Y,T,e)=>{"use strict";e.d(T,{i:()=>s});var t=e(66111),n=e(8944),c=e(81764);function s({options:i,onOptionsChange:f}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(c._,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},t.createElement(n.x,{value:i.jsonData.enableSecureSocksProxy??!1,onChange:u=>f({...i,jsonData:{...i.jsonData,enableSecureSocksProxy:u.currentTarget.checked}})}))))))}},23622:(Y,T,e)=>{"use strict";e.d(T,{s:()=>u});var t=e(9892),n=e(66111),c=e(95569),s=e(39904),i=e(61860),f=e(85615);const u=({dataSourceConfig:r,onChange:d})=>{const o=r.secureJsonFields&&r.secureJsonFields.tlsCACert,m=r.secureJsonFields&&r.secureJsonFields.tlsClientCert,l=r.secureJsonFields&&r.secureJsonFields.tlsClientKey,p=r.jsonData&&r.jsonData.serverName,g=E=>h=>{h.preventDefault();const C={...r.secureJsonFields};C[E]=!1,d({...r,secureJsonFields:C})},y=E=>h=>{const C={...r.secureJsonData};C[E]=h.currentTarget.value,d({...r,secureJsonData:C})},v=E=>{const h={...r.jsonData,serverName:E.currentTarget.value};d({...r,jsonData:h})};return n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:(0,t.cx)("gf-form",t.css`
            align-items: baseline;
          `)},n.createElement("h6",null,"TLS/SSL Auth Details"),n.createElement(i.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},n.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},n.createElement(s.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}})))),n.createElement("div",null,r.jsonData.tlsAuthWithCACert&&n.createElement(f.W,{hasCert:!!o,onChange:y("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:g("tlsCACert")}),r.jsonData.tlsAuth&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form"},n.createElement(c.W,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:p&&r.jsonData.serverName,onChange:v})),n.createElement(f.W,{hasCert:!!m,label:"Client Cert",onChange:y("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:g("tlsClientCert")}),n.createElement(f.W,{hasCert:!!l,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:y("tlsClientKey"),onClick:g("tlsClientKey")}))))}},77239:(Y,T,e)=>{"use strict";e.d(T,{M:()=>r});var t=e(9892),n=e(66111),c=e(74363),s=e(72648),i=e(94437),f=e(39904),u=e(36290);const r=(0,n.memo)(m=>{const l=(0,s.wW)(o),{isOpen:p,onClose:g}=m;return p?n.createElement(i.L,{useCapture:!0,includeButtonPress:!1,onClick:g},n.createElement("div",{className:l.modal,"data-testid":"date-picker"},n.createElement(d,{...m}))):null});r.displayName="DatePicker";const d=(0,n.memo)(({value:m,minDate:l,maxDate:p,onChange:g})=>{const y=(0,s.wW)(u.mg);return n.createElement(c.ZP,{className:y.body,tileClassName:y.title,value:m||new Date,minDate:l,maxDate:p,nextLabel:n.createElement(f.J,{name:"angle-right"}),prevLabel:n.createElement(f.J,{name:"angle-left"}),onChange:v=>{Array.isArray(v)||g(v)},locale:"en"})});d.displayName="Body";const o=m=>({modal:t.css`
      z-index: ${m.zIndex.modal};
      position: absolute;
      box-shadow: ${m.shadows.z3};
      background-color: ${m.colors.background.primary};
      border: 1px solid ${m.colors.border.weak};
      border-radius: 2px 0 0 2px;

      button:disabled {
        color: ${m.colors.text.disabled};
      }
    `})},86348:(Y,T,e)=>{"use strict";e.d(T,{d:()=>r});var t=e(9892),n=e(66111),c=e(67483),s=e(72648),i=e(46967),f=e(77239);const u=o=>(0,c.CQ)(o).format("L"),r=({value:o,minDate:m,maxDate:l,onChange:p,closeOnSelect:g,placeholder:y="Date",...v})=>{const[E,h]=n.useState(!1),C=(0,s.wW)(d);return n.createElement("div",{className:C.container},n.createElement(i.I,{type:"text",autoComplete:"off",placeholder:y,value:o&&u(o),onClick:()=>h(!0),onChange:a=>{a.target.value===""&&p("")},className:C.input,...v}),n.createElement(f.M,{isOpen:E,value:o&&typeof o!="string"?o:(0,c.CQ)().toDate(),minDate:m,maxDate:l,onChange:a=>{p(a),g&&h(!1)},onClose:()=>h(!1)}))},d=()=>({container:t.css`
      position: relative;
    `,input:t.css`
    /* hides the native Calendar picker icon given when using type=date */
    input[type='date']::-webkit-inner-spin-button,
    input[type='date']::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
    `})},35575:(Y,T,e)=>{"use strict";e.d(T,{x:()=>M});var t=e(9892),n=e(29952),c=e(83962),s=e(86922),i=e(66111),f=e(74363),u=e(10092),r=e(92268),d=e(77258),o=e(67483),m=e(85511),l=e(31403),p=e(81764),g=e(46967),y=e(39904),v=e(52081),E=e(72648),h=e(27581),C=e(91942),a=e(36290),P=e(47406),D=e(29826);function x(O,U,I){return(0,o.v9)(O)?O.isValid():P.isMathString(O)?P.isValid(O):(0,D.J)(O,{roundUp:U,timeZone:I}).isValid()}const M=({date:O,maxDate:U,minDate:I,label:F,onChange:w,disabledHours:K,disabledMinutes:L,disabledSeconds:V,showSeconds:H=!0})=>{const[j,A]=(0,i.useState)(!1),_=(0,i.useRef)(null),{overlayProps:k,underlayProps:Q}=(0,s.Ir)({onClose:()=>A(!1),isDismissable:!0,isOpen:j,shouldCloseOnInteractOutside:ae=>{const pe=document.getElementsByClassName(C.F)[0];return!(pe&&pe.contains(ae))}},_),{dialogProps:re}=(0,n.R)({},_),Z=(0,E.l4)(),{modalBackdrop:oe}=(0,h.J)(Z),G=(0,r.Z)(`(min-width: ${Z.breakpoints.values.lg}px)`),le=(0,E.wW)(S),[ge,ne]=(0,i.useState)(),[ue,te]=(0,i.useState)(),me=(0,u.D)(ge,ue,{placement:"bottom-start"}),q=(0,i.useCallback)(ae=>{A(!1),w(ae)},[w]),se=(0,i.useCallback)(ae=>{ae.preventDefault(),A(!0)},[A]);return i.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},i.createElement(b,{date:O,onChange:w,isFullscreen:G,onOpen:se,label:F,ref:ne,showSeconds:H}),j?G?i.createElement(m.h_,null,i.createElement(c.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:_,...k,...re},i.createElement(R,{date:O,onChange:q,isFullscreen:!0,onClose:()=>A(!1),maxDate:U,minDate:I,ref:te,style:me.styles.popper,showSeconds:H,disabledHours:K,disabledMinutes:L,disabledSeconds:V})))):i.createElement(m.h_,null,i.createElement("div",{className:oe,...Q}),i.createElement(c.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:_,...k,...re},i.createElement("div",{className:le.modal},i.createElement(R,{date:O,maxDate:U,minDate:I,onChange:q,isFullscreen:!1,onClose:()=>A(!1),showSeconds:H,disabledHours:K,disabledMinutes:L,disabledSeconds:V}))))):null)},b=i.forwardRef(({date:O,label:U,onChange:I,isFullscreen:F,onOpen:w,showSeconds:K=!0},L)=>{const V=K?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm",[H,j]=(0,i.useState)(()=>({value:O?(0,d.dq)(O):(0,d.dq)((0,o.CQ)()),invalid:!1}));(0,i.useEffect)(()=>{O&&j({invalid:!x((0,d.dq)(O,{format:V})),value:(0,o.v9)(O)?(0,d.dq)(O,{format:V}):O})},[O,V]);const A=(0,i.useCallback)(Q=>{const re=!x(Q.currentTarget.value);j({value:Q.currentTarget.value,invalid:re})},[]),_=(0,i.useCallback)(()=>{(0,o.v9)(H.value)&&I((0,o.CQ)(H.value))},[H.value,I]),k=i.createElement(l.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:w});return i.createElement(p._,{label:U,invalid:!!(H.value&&H.invalid),className:t.css`
          margin-bottom: 0;
        `},i.createElement(g.I,{onChange:A,addonAfter:k,value:H.value,onBlur:_,"data-testid":"date-time-input",placeholder:"Select date/time",ref:L}))});b.displayName="DateTimeInput";const R=i.forwardRef(({date:O,onClose:U,onChange:I,isFullscreen:F,maxDate:w,minDate:K,style:L,showSeconds:V=!0,disabledHours:H,disabledMinutes:j,disabledSeconds:A},_)=>{const k=(0,E.wW)(a.mg),Q=(0,E.wW)(S),[re,Z]=(0,i.useState)(()=>O&&O.isValid()?O.toDate():new Date),oe=(0,i.useCallback)(le=>{Array.isArray(le)||Z(ge=>(le.setHours(ge.getHours()),le.setMinutes(ge.getMinutes()),le.setSeconds(ge.getSeconds()),le))},[]),G=(0,i.useCallback)(le=>{Z(le.toDate())},[]);return i.createElement("div",{className:(0,t.cx)(Q.container,{[Q.fullScreen]:F}),style:L,ref:_},i.createElement(f.ZP,{next2Label:null,prev2Label:null,value:re,nextLabel:i.createElement(y.J,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:i.createElement(y.J,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:oe,locale:"en",className:k.body,tileClassName:k.title,maxDate:w,minDate:K}),i.createElement("div",{className:Q.time},i.createElement(C.y,{showSeconds:V,onChange:G,value:(0,o.CQ)(re),disabledHours:H,disabledMinutes:j,disabledSeconds:A})),i.createElement(v.Lh,null,i.createElement(l.zx,{type:"button",onClick:()=>I((0,o.CQ)(re))},"Apply"),i.createElement(l.zx,{variant:"secondary",type:"button",onClick:U},"Cancel")))});R.displayName="DateTimeCalendar";const S=O=>({container:t.css`
    padding: ${O.spacing(1)};
    border: 1px ${O.colors.border.weak} solid;
    border-radius: ${O.shape.borderRadius(1)};
    background-color: ${O.colors.background.primary};
    z-index: ${O.zIndex.modal};
  `,fullScreen:t.css`
    position: absolute;
  `,time:t.css`
    margin-bottom: ${O.spacing(2)};
  `,modal:t.css`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: ${O.zIndex.modal};
    max-width: 280px;
  `})},19115:(Y,T,e)=>{"use strict";e.d(T,{x:()=>P});var t=e(9892),n=e(29952),c=e(83962),s=e(86922),i=e(66111),f=e(10092),u=e(72648),r=e(37951),d=e(31403),o=e(68226),m=e(24799),l=e(39904),p=e(46967),g=e(85511),y=e(61860),v=e(65012),E=e(98574),h=e(21356),C=e(25482);const a=h.r.filter(R=>(0,C.jD)(R.from));function P(R){const{timeRange:S,onChange:O}=R,[U,I]=(0,i.useState)(!1),F=(0,i.useCallback)(()=>I(!1),[]),w=(0,C.C_)(S),[K,L]=(0,i.useState)({value:w.from,validation:(0,C.x5)(w.from)}),[V,H]=(0,i.useState)({value:w.to,validation:(0,C.x5)(w.to)}),j=(0,i.useRef)(null),{overlayProps:A,underlayProps:_}=(0,s.Ir)({onClose:()=>I(!1),isDismissable:!0,isOpen:U},j),{dialogProps:k}=(0,n.R)({},j),[Q,re]=(0,i.useState)(null),[Z,oe]=(0,i.useState)(null),G=(0,f.D)(Q,Z,{placement:"auto-start"}),le=(0,u.wW)(M(K.validation.errorMessage,V.validation.errorMessage)),ge=te=>{const me=(0,C.aw)(te);me&&(F(),L({...K,value:te.from}),H({...V,value:te.to}),O(me))},ne=(0,i.useCallback)(te=>{te.stopPropagation(),te.preventDefault(),I(!U)},[U]),ue=te=>{if(te.preventDefault(),!V.validation.isValid||!K.validation.isValid)return;const me=(0,C.aw)({from:K.value,to:V.value,display:""});me&&(O(me),I(!1))};return i.createElement("div",{className:le.container,ref:re},i.createElement("button",{className:le.pickerInput,type:"button",onClick:ne},i.createElement("span",{className:le.clockIcon},i.createElement(l.J,{name:"clock-nine"})),i.createElement("span",null,w.from," to ",w.to),i.createElement("span",{className:le.caretIcon},i.createElement(l.J,{name:U?"angle-up":"angle-down",size:"lg"}))),U&&i.createElement(g.h_,null,i.createElement("div",{role:"presentation",className:le.backdrop,..._}),i.createElement(c.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:j,...A,...k},i.createElement("div",{className:le.content,ref:oe,style:G.styles.popper,...G.attributes},i.createElement("div",{className:le.body},i.createElement(o.Z,{className:le.leftSide,hideHorizontalTrack:!0},i.createElement(E.V,{title:(0,r.t)("time-picker.time-range.example-title","Example time ranges"),options:a,onChange:ge,value:w})),i.createElement("div",{className:le.rightSide},i.createElement("div",{className:le.title},i.createElement(v.r,null,i.createElement(y.u,{content:i.createElement(D,null),placement:"bottom",theme:"info"},i.createElement("div",null,i.createElement(r.c,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",i.createElement(l.J,{name:"info-circle"})))))),i.createElement(m.g,{label:"From",invalid:!K.validation.isValid,error:K.validation.errorMessage},i.createElement(p.I,{onClick:te=>te.stopPropagation(),onBlur:()=>L({...K,validation:(0,C.x5)(K.value)}),onChange:te=>L({...K,value:te.currentTarget.value}),value:K.value})),i.createElement(m.g,{label:"To",invalid:!V.validation.isValid,error:V.validation.errorMessage},i.createElement(p.I,{onClick:te=>te.stopPropagation(),onBlur:()=>H({...V,validation:(0,C.x5)(V.value)}),onChange:te=>H({...V,value:te.currentTarget.value}),value:V.value})),i.createElement(d.zx,{"aria-label":"TimePicker submit button",onClick:ue},"Apply time range"))))))))}const D=()=>{const R=(0,u.wW)(x);return i.createElement(i.Fragment,null,i.createElement("div",{className:R.supported},"Supported formats: ",i.createElement("code",{className:R.tooltip},"now-[digit]s/m/h/d/w")),i.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),i.createElement("code",{className:R.tooltip},"From: now-10m To: now"),i.createElement("div",{className:R.link},"For more information see"," ",i.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",i.createElement(l.J,{name:"external-link-alt"})),"."))},x=R=>({supported:t.css`
    margin-bottom: ${R.spacing(1)};
  `,tooltip:t.css`
    margin: 0;
  `,link:t.css`
    margin-top: ${R.spacing(1)};
  `}),M=(R,S)=>O=>{const U=(0,p.H)({theme:O,invalid:!1}),F=250+b(O,R)+b(O,S);return{backdrop:t.css`
      position: fixed;
      z-index: ${O.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    `,container:t.css`
      display: flex;
      position: relative;
    `,pickerInput:(0,t.cx)(U.input,U.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        padding-left: 0;
        line-height: ${O.spacing.gridSize*O.components.height.md-2}px;
      `),caretIcon:(0,t.cx)(U.suffix,t.css`
        position: relative;
        margin-left: ${O.spacing(.5)};
      `),clockIcon:(0,t.cx)(U.prefix,t.css`
        position: relative;
        margin-right: ${O.spacing(.5)};
      `),content:t.css`
      background: ${O.colors.background.primary};
      box-shadow: ${O.shadows.z3};
      position: absolute;
      z-index: ${O.zIndex.modal};
      width: 500px;
      top: 100%;
      border-radius: ${O.shape.radius.default};
      border: 1px solid ${O.colors.border.weak};
      left: 0;
      white-space: normal;
    `,body:t.css`
      display: flex;
      height: ${F}px;
    `,description:t.css`
      color: ${O.colors.text.secondary};
      font-size: ${O.typography.size.sm};
    `,leftSide:t.css`
      width: 50% !important;
      border-right: 1px solid ${O.colors.border.medium};
    `,rightSide:t.css`
      width: 50%;
      padding: ${O.spacing(1)};
    `,title:t.css`
      margin-bottom: ${O.spacing(1)};
    `}};function b(R,S){return S?S.length>34?R.spacing.gridSize*6.5:R.spacing.gridSize*4:0}},25482:(Y,T,e)=>{"use strict";e.d(T,{C_:()=>c,aw:()=>n,jD:()=>i,x5:()=>s});const t=/^now$|^now\-(\d{1,10})([wdhms])$/,n=d=>({from:f(d.from),to:f(d.to)}),c=d=>{const o=r(d.from),m=r(d.to);return{from:o,to:m,display:`${o} to ${m}`}},s=(d,o=Date.now())=>i(d)?f(d)>Math.ceil(o/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},i=d=>t.test(d),f=d=>{const o=t.exec(d);if(!o||o.length!==3)return 0;const[,m,l]=o,p=parseInt(m,10);return isNaN(p)?0:p*u[l]},u={w:604800,d:86400,h:3600,m:60,s:1},r=d=>d<=0?"now":d>=u.w&&d%u.w===0?`now-${d/u.w}w`:d>=u.d&&d%u.d===0?`now-${d/u.d}d`:d>=u.h&&d%u.h===0?`now-${d/u.h}h`:d>=u.m&&d%u.m===0?`now-${d/u.m}m`:`now-${d}s`},91942:(Y,T,e)=>{"use strict";e.d(T,{F:()=>d,y:()=>o});var t=e(9892),n=e(72505),c=e(66111),s=e(67483),i=e(72648),f=e(39904),u=e(85419),r=e(73267);const d="time-of-day-picker-panel",o=({minuteStep:p=1,showHour:g=!0,showSeconds:y=!1,onChange:v,value:E,size:h="auto",disabled:C,disabledHours:a,disabledMinutes:P,disabledSeconds:D})=>{const x=(0,i.wW)(l);return c.createElement(n.Z,{className:(0,t.cx)((0,r.ht)()[h],x.input),popupClassName:(0,t.cx)(x.picker,d),defaultValue:(0,s.C_)(),onChange:M=>v((0,s.CQ)(M)),allowEmpty:!1,showSecond:y,value:(0,s.C_)(E),showHour:g,minuteStep:p,inputIcon:c.createElement(m,{wrapperStyle:x.caretWrapper}),disabled:C,disabledHours:a,disabledMinutes:P,disabledSeconds:D})},m=({wrapperStyle:p=""})=>c.createElement("div",{className:p},c.createElement(f.J,{name:"angle-down"})),l=p=>{const g=p.components.input.background,y=p.v1.palette.black,v=p.colors.background.secondary,E=p.shape.borderRadius(1),h=p.components.input.borderColor;return{caretWrapper:t.css`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${p.colors.text.secondary};
    `,picker:t.css`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${g};
        border-color: ${h};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${p.v1.palette.orange};
            border-radius: ${E};
          }

          &:hover {
            background: ${v};
          }

          &.rc-time-picker-panel-select-option-disabled {
            color: ${p.colors.action.disabledText};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${y};
        background-color: ${g};
        border-color: ${h};
        border-radius: ${E};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${g};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:t.css`
      .rc-time-picker-input {
        background-color: ${g};
        border-radius: ${E};
        border-color: ${h};
        height: ${p.spacing(4)};

        &:focus {
          ${(0,u.focusCss)(p)}
        }

        &:disabled {
          background-color: ${p.colors.action.disabledBackground};
          color: ${p.colors.action.disabledText};
          border: 1px solid ${p.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }
    `}}},95794:(Y,T,e)=>{"use strict";e.d(T,{K:()=>E});var t=e(9892),n=e(66111),c=e(47406),s=e(67483),i=e(75849),f=e(68183),u=e(7804),r=e(72648),d=e(94437),o=e(39904),m=e(46967),l=e(3630),p=e(99489),g=e(21356);const y=C=>c.isValid(C.from)&&c.isValid(C.to),v=()=>{},E=({value:C,onChange:a,onChangeTimeZone:P=v,clearable:D,hideTimeZone:x=!0,timeZone:M="browser",placeholder:b="Select time range",isReversed:R=!0,hideQuickRanges:S=!1,disabled:O=!1})=>{const[U,I]=(0,n.useState)(!1),F=(0,r.l4)(),w=h(F,O),K=j=>{j.stopPropagation(),j.preventDefault(),!O&&I(!U)},L=()=>{I(!1)},V=j=>{L(),a(j)},H=j=>{j.stopPropagation();const A=(0,s.CQ)(null),_=(0,s.CQ)(null);a({from:A,to:_,raw:{from:A,to:_}})};return n.createElement("div",{className:w.container},n.createElement("button",{type:"button",className:w.pickerInput,"aria-label":f.wl.components.TimePicker.openButton,onClick:K},y(C)?n.createElement(l.sU,{value:C,timeZone:M}):n.createElement("span",{className:w.placeholder},b),!O&&n.createElement("span",{className:w.caretIcon},y(C)&&D&&n.createElement(o.J,{className:w.clearIcon,name:"times",size:"lg",onClick:H}),n.createElement(o.J,{name:U?"angle-up":"angle-down",size:"lg"}))),U&&n.createElement(d.L,{includeButtonPress:!1,onClick:L},n.createElement(p.x,{timeZone:M,value:y(C)?C:(0,i.JK)(),onChange:V,quickOptions:g.r,onChangeTimeZone:P,className:w.content,hideTimeZone:x,isReversed:R,hideQuickRanges:S})))},h=(0,u.B)((C,a=!1)=>{const P=(0,m.H)({theme:C,invalid:!1});return{container:t.css`
      display: flex;
      position: relative;
    `,content:t.css`
      margin-left: 0;
      position: absolute;
      top: 116%;
      z-index: ${C.zIndex.dropdown};
    `,pickerInput:(0,t.cx)(P.input,a&&P.inputDisabled,P.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        line-height: ${C.spacing.gridSize*4-2}px;
      `),caretIcon:(0,t.cx)(P.suffix,t.css`
        position: relative;
        top: -1px;
        margin-left: ${C.spacing(.5)};
      `),clearIcon:t.css`
      margin-right: ${C.spacing(.5)};
      &:hover {
        color: ${C.colors.text.maxContrast};
      }
    `,placeholder:t.css`
      color: ${C.colors.text.disabled};
      opacity: 1;
    `}})},3630:(Y,T,e)=>{"use strict";e.d(T,{IF:()=>D,Xc:()=>a,sU:()=>x});var t=e(9892),n=e(29952),c=e(83962),s=e(86922),i=e(66111),f=e(67483),u=e(77258),r=e(56808),d=e(47891),o=e(47406),m=e(68183),l=e(72648),p=e(37951),g=e(26202),y=e(27581),v=e(64319),E=e(61860),h=e(99489),C=e(21356);function a(S){const[O,U]=(0,i.useState)(!1),{value:I,onMoveBackward:F,onMoveForward:w,onZoom:K,timeZone:L,fiscalYearStartMonth:V,timeSyncButton:H,isSynced:j,history:A,onChangeTimeZone:_,onChangeFiscalYearStartMonth:k,hideQuickRanges:Q,widthOverride:re,isOnCanvas:Z}=S,oe=Me=>{S.onChange(Me),U(!1)},G=Me=>{Me.stopPropagation(),Me.preventDefault(),U(!O)},le=()=>{U(!1)},ge=(0,i.createRef)(),{overlayProps:ne,underlayProps:ue}=(0,s.Ir)({onClose:le,isDismissable:!0,isOpen:O},ge),{dialogProps:te}=(0,n.R)({},ge),me=(0,l.l4)(),q=(0,l.wW)(b),{modalBackdrop:se}=(0,y.J)(me),ae=(0,f.v9)(I.raw.from)||(0,f.v9)(I.raw.to),pe=j?"active":Z?"canvas":"default",de=M(I,L);return i.createElement(g.h,{className:q.container},ae&&i.createElement(v.h,{"aria-label":(0,p.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:pe,onClick:F,icon:"angle-left",narrow:!0}),i.createElement(E.u,{content:i.createElement(D,{timeRange:I,timeZone:L}),placement:"bottom",interactive:!0},i.createElement(v.h,{"data-testid":m.wl.components.TimePicker.openButton,"aria-label":(0,p.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:de}),"aria-controls":"TimePickerContent",onClick:G,icon:"clock-nine",isOpen:O,variant:pe},i.createElement(x,{...S}))),O&&i.createElement("div",null,i.createElement("div",{role:"presentation",className:(0,t.cx)(se,q.backdrop),...ue}),i.createElement(c.MT,{contain:!0,autoFocus:!0},i.createElement("section",{className:q.content,ref:ge,...ne,...te},i.createElement(h.x,{timeZone:L,fiscalYearStartMonth:V,value:I,onChange:oe,quickOptions:C.r,history:A,showHistory:!0,widthOverride:re,onChangeTimeZone:_,onChangeFiscalYearStartMonth:k,hideQuickRanges:Q})))),H,ae&&i.createElement(v.h,{"aria-label":(0,p.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:w,icon:"angle-right",narrow:!0,variant:pe}),i.createElement(E.u,{content:P,placement:"bottom"},i.createElement(v.h,{"aria-label":(0,p.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:K,icon:"search-minus",variant:pe})))}a.displayName="TimeRangePicker";const P=()=>i.createElement(i.Fragment,null,i.createElement(p.c,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",i.createElement("br",null)," CTRL+Z")),D=({timeRange:S,timeZone:O})=>{const U=(0,l.wW)(R);return i.createElement(i.Fragment,null,(0,u.dq)(S.from,{timeZone:O}),i.createElement("div",{className:"text-center"},i.createElement(p.c,{i18nKey:"time-picker.range-picker.to"},"to")),(0,u.dq)(S.to,{timeZone:O}),i.createElement("div",{className:"text-center"},i.createElement("span",{className:U.utc},(0,r.Vs)(O))))},x=(0,i.memo)(({hideText:S,value:O,timeZone:U})=>{const I=(0,l.wW)(R);return S?null:i.createElement("span",{className:I.container},i.createElement("span",null,M(O,U)),i.createElement("span",{className:I.utc},d.describeTimeRangeAbbreviation(O,U)))});x.displayName="TimePickerButtonLabel";const M=(S,O)=>{const U={to:o.isMathString(S.raw.to)?S.raw.to:S.to,from:o.isMathString(S.raw.from)?S.raw.from:S.from};return d.describeTimeRange(U,O)},b=S=>({container:t.css`
      position: relative;
      display: flex;
      vertical-align: middle;
    `,backdrop:(0,t.css)({display:"none",[S.breakpoints.down("sm")]:{display:"block"}}),content:(0,t.css)({position:"absolute",right:0,top:"116%",zIndex:S.zIndex.dropdown,[S.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:S.zIndex.modal}})}),R=S=>({container:t.css`
      display: flex;
      align-items: center;
      white-space: nowrap;
    `,utc:t.css`
      color: ${S.v1.palette.orange};
      font-size: ${S.typography.size.sm};
      padding-left: 6px;
      line-height: 28px;
      vertical-align: bottom;
      font-weight: ${S.typography.fontWeightMedium};
    `})},36290:(Y,T,e)=>{"use strict";e.d(T,{mg:()=>l,uT:()=>r});var t=e(9892),n=e(66111),c=e(74363),s=e(67483),i=e(29826),f=e(72648),u=e(39904);function r({onChange:p,from:g,to:y,timeZone:v}){const E=d(g,y),h=o(p,v),C=(0,f.wW)(l);return n.createElement(c.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:C.body,tileClassName:C.title,value:E,nextLabel:n.createElement(u.J,{name:"angle-right"}),prevLabel:n.createElement(u.J,{name:"angle-left"}),onChange:h,locale:"en"})}r.displayName="Body";function d(p,g,y=new Date){const v=p.toDate(),E=g.toDate(),h=(0,s.CQ)(v).isValid()?v:y,C=(0,s.CQ)(E).isValid()?E:y;return h>C?[C,h]:[h,C]}function o(p,g){return(0,n.useCallback)(y=>{if(!Array.isArray(y))return console.error("onCalendarChange: should be run in selectRange={true}");const v=(0,i.J)(m(y[0]),{timeZone:g}),E=(0,i.J)(m(y[1]),{timeZone:g});p(v,E)},[p,g])}function m(p){return[p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds()]}const l=p=>{const g=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:t.css`
      color: ${p.colors.text.primary};
      background-color: ${p.colors.background.primary};
      font-size: ${p.typography.size.md};
      border: 1px solid transparent;

      &:hover {
        position: relative;
      }

      &:disabled {
        color: ${p.colors.action.disabledText};
      }
    `,body:t.css`
      z-index: ${p.zIndex.modal};
      background-color: ${p.colors.background.primary};
      width: 268px;

      .react-calendar__navigation {
        display: flex;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation__arrow,
      .react-calendar__navigation {
        padding-top: 4px;
        background-color: inherit;
        color: ${p.colors.text.primary};
        border: 0;
        font-weight: ${p.typography.fontWeightMedium};
      }

      .react-calendar__month-view__weekdays {
        background-color: inherit;
        text-align: center;
        color: ${p.colors.primary.text};

        abbr {
          border: 0;
          text-decoration: none;
          cursor: default;
          display: block;
          padding: 4px 0 4px 0;
        }
      }

      .react-calendar__month-view__days {
        background-color: inherit;
      }

      .react-calendar__tile,
      .react-calendar__tile--now {
        margin-bottom: 4px;
        background-color: inherit;
        height: 26px;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation > button:focus,
      .time-picker-calendar-tile:focus {
        outline: 0;
      }

      ${g},
      .react-calendar__tile--active,
      .react-calendar__tile--active:hover {
        color: ${p.colors.primary.contrastText};
        font-weight: ${p.typography.fontWeightMedium};
        background: ${p.colors.primary.main};
        box-shadow: none;
        border: 0px;
      }

      .react-calendar__tile--rangeEnd,
      .react-calendar__tile--rangeStart {
        padding: 0;
        border: 0px;
        color: ${p.colors.primary.contrastText};
        font-weight: ${p.typography.fontWeightMedium};
        background: ${p.colors.primary.main};

        abbr {
          background-color: ${p.colors.primary.main};
          border-radius: 100px;
          display: block;
          padding-top: 2px;
          height: 26px;
        }
      }

      ${g},
      .react-calendar__tile--rangeStart {
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
      }

      ${g},
      .react-calendar__tile--rangeEnd {
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
      }
    `}}},99489:(Y,T,e)=>{"use strict";e.d(T,{x:()=>pe});var t=e(9892),n=e(66111),c=e(67483),s=e(47891),i=e(68183),f=e(14747),u=e(72648),r=e(7804),d=e(85419),o=e(37951),m=e(68226),l=e(39904),p=e(82897),g=e(56808),y=e(2594),v=e(24799),E=e(8581),h=e(31403),C=e(52566),a=e(64612),P=e(4883),D=e(10516),x=e(21356);const M=Oe=>{const{timeZone:ye,fiscalYearStartMonth:Pe,timestamp:be=Date.now(),onChangeTimeZone:Be,onChangeFiscalYearStartMonth:ze}=Oe,[lt,ht]=(0,n.useState)(!1),[vt,bt]=(0,n.useState)("tz"),ct=(0,n.useCallback)(Ne=>{Ne&&Ne.stopPropagation(),ht(!lt)},[lt,ht]),Pt=(0,u.l4)(),ie=b(Pt);if(!(0,p.isString)(ye))return null;const Ce=(0,g.Pr)(ye,be);return Ce?n.createElement("div",null,n.createElement("section",{"aria-label":(0,o.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:ie.container},n.createElement("div",{className:ie.timeZoneContainer},n.createElement("div",{className:ie.timeZone},n.createElement(D.d,{title:Ce.name}),n.createElement("div",{className:ie.spacer}),n.createElement(a.K,{info:Ce})),n.createElement(P.v,{timeZone:ye,timestamp:be})),n.createElement("div",{className:ie.spacer}),n.createElement(h.zx,{variant:"secondary",onClick:ct,size:"sm"},n.createElement(o.c,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),lt?n.createElement("div",{className:ie.editContainer},n.createElement("div",null,n.createElement(y.S,{value:vt,options:[{label:(0,o.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,o.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:bt})),vt==="tz"?n.createElement("section",{"data-testid":i.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(ie.timeZoneContainer,ie.timeSettingContainer)},n.createElement(C.O,{includeInternal:!0,onChange:Ne=>{ct(),(0,p.isString)(Ne)&&Be(Ne)},onBlur:ct})):n.createElement("section",{"aria-label":i.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(ie.timeZoneContainer,ie.timeSettingContainer)},n.createElement(v.g,{className:ie.fiscalYearField,label:(0,o.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},n.createElement(E.Ph,{value:Pe,menuShouldPortal:!1,options:x.E,onChange:Ne=>{ze&&ze(Ne.value??0)}})))):null):null},b=(0,r.B)(Oe=>({container:t.css`
      border-top: 1px solid ${Oe.colors.border.weak};
      padding: 11px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    `,editContainer:t.css`
      border-top: 1px solid ${Oe.colors.border.weak};
      padding: 11px;
      justify-content: space-between;
      align-items: center;
      padding: 7px;
    `,spacer:t.css`
      margin-left: 7px;
    `,timeSettingContainer:t.css`
      padding-top: ${Oe.spacing(1)};
    `,fiscalYearField:t.css`
      margin-bottom: 0px;
    `,timeZoneContainer:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      flex-grow: 1;
    `,timeZone:t.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
      flex-grow: 1;
    `}));var R=e(65012),S=e(29826),O=e(77258),U=e(47406),I=e(61860),F=e(46967),w=e(29952),K=e(83962),L=e(86922),V=e(27581),H=e(36290);function j({onClose:Oe,onApply:ye}){const Pe=(0,u.wW)(A);return n.createElement("div",{className:Pe.container},n.createElement(h.zx,{className:Pe.apply,onClick:ye},n.createElement(o.c,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")),n.createElement(h.zx,{variant:"secondary",onClick:Oe},n.createElement(o.c,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")))}j.displayName="Footer";const A=Oe=>({container:t.css`
      background-color: ${Oe.colors.background.primary};
      display: flex;
      justify-content: center;
      padding: 10px;
      align-items: stretch;
    `,apply:t.css`
      margin-right: 4px;
      width: 100%;
      justify-content: center;
    `});function _({onClose:Oe}){const ye=(0,u.wW)(k);return n.createElement("div",{className:ye.container},n.createElement(R.r,null,n.createElement(o.c,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),n.createElement(h.zx,{"aria-label":i.wl.components.TimePicker.calendar.closeButton,icon:"times",variant:"secondary",onClick:Oe}))}_.displayName="Header";const k=Oe=>({container:t.css`
      background-color: ${Oe.colors.background.primary};
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px;
    `}),Q=(Oe,ye=!1)=>({container:t.css`
      top: 0px;
      position: absolute;
      ${ye?"left":"right"}: 544px;
      box-shadow: ${Oe.shadows.z3};
      background-color: ${Oe.colors.background.primary};
      z-index: -1;
      border: 1px solid ${Oe.colors.border.weak};
      border-radius: 2px 0 0 2px;

      &:after {
        display: block;
        background-color: ${Oe.colors.background.primary};
        width: 19px;
        height: 100%;
        content: ${ye?"":" "};
        position: absolute;
        top: 0;
        right: -19px;
        border-left: 1px solid ${Oe.colors.border.weak};
      }
    `,modal:t.css`
      box-shadow: ${Oe.shadows.z3};
      left: 50%;
      position: fixed;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index: ${Oe.zIndex.modal};
    `,content:t.css`
      margin: 0 auto;
      width: 268px;
    `});function re(Oe){const ye=(0,u.l4)(),{modalBackdrop:Pe}=(0,V.J)(ye),be=Q(ye,Oe.isReversed),{isOpen:Be,isFullscreen:ze,onClose:lt}=Oe,ht=n.createRef(),{dialogProps:vt}=(0,w.R)({"aria-label":i.wl.components.TimePicker.calendar.label},ht),{overlayProps:bt}=(0,L.Ir)({isDismissable:!0,isOpen:Be,onClose:lt},ht);return Be?ze?n.createElement(K.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement("section",{className:be.container,ref:ht,...bt,...vt},n.createElement(_,{...Oe}),n.createElement(H.uT,{...Oe}))):n.createElement(L.Xj,null,n.createElement("div",{className:Pe}),n.createElement(K.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("section",{className:be.modal,ref:ht,...bt,...vt},n.createElement("div",{className:be.content,"aria-label":i.wl.components.TimePicker.calendar.label},n.createElement(_,{...Oe}),n.createElement(H.uT,{...Oe}),n.createElement(j,{...Oe}))))):null}const Z=(0,n.memo)(re);re.displayName="TimePickerCalendar";const oe={default:()=>(0,o.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,o.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},G=Oe=>{const{value:ye,isFullscreen:Pe=!1,timeZone:be,onApply:Be,isReversed:ze,fiscalYearStartMonth:lt}=Oe,[ht,vt]=ge(ye.raw.from,ye.raw.to,be),bt=(0,u.wW)(te),[ct,Pt]=(0,n.useState)(ht),[ie,Ce]=(0,n.useState)(vt),[Ne,Ze]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const[gt,mt]=ge(ye.raw.from,ye.raw.to,be);Pt(gt),Ce(mt)},[ye.raw.from,ye.raw.to,be]);const Qe=(0,n.useCallback)(gt=>{gt.preventDefault(),Ze(!0)},[Ze]),Le=(0,n.useCallback)(()=>{if(ie.invalid||ct.invalid)return;const gt={from:ct.value,to:ie.value},mt=s.convertRawToRange(gt,be,lt);Be(mt)},[ct.invalid,ct.value,Be,be,ie.invalid,ie.value,lt]),Ue=(0,n.useCallback)((gt,mt)=>{const[Ye,ft]=ge(gt,mt,be);Pt(Ye),Ce(ft)},[be]),ve=gt=>{gt.key==="Enter"&&Le()},Se=s.convertRawToRange({from:"now/fy",to:"now/fy"},be,lt),Fe=(0,o.t)("time-picker.range-content.fiscal-year","Fiscal year"),je=n.createElement("div",{className:bt.tooltip},s.isFiscal(ye)?n.createElement(I.u,{content:`${Fe}: ${Se.from.format("MMM-DD")} - ${Se.to.format("MMM-DD")}`},n.createElement(l.J,{name:"info-circle"})):null),Ge=n.createElement(h.zx,{"aria-label":i.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:Qe});return n.createElement("div",null,n.createElement("div",{className:bt.fieldContainer},n.createElement(v.g,{label:(0,o.t)("time-picker.range-content.from-input","From"),invalid:ct.invalid,error:ct.errorMessage},n.createElement(F.I,{onClick:gt=>gt.stopPropagation(),onChange:gt=>Ue(gt.currentTarget.value,ie.value),addonAfter:Ge,onKeyDown:ve,"aria-label":i.wl.components.TimePicker.fromField,value:ct.value})),je),n.createElement("div",{className:bt.fieldContainer},n.createElement(v.g,{label:(0,o.t)("time-picker.range-content.to-input","To"),invalid:ie.invalid,error:ie.errorMessage},n.createElement(F.I,{onClick:gt=>gt.stopPropagation(),onChange:gt=>Ue(ct.value,gt.currentTarget.value),addonAfter:Ge,onKeyDown:ve,"aria-label":i.wl.components.TimePicker.toField,value:ie.value})),je),n.createElement(h.zx,{"data-testid":i.wl.components.TimePicker.applyTimeRange,type:"button",onClick:Le},n.createElement(o.c,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range")),n.createElement(Z,{isFullscreen:Pe,isOpen:Ne,from:(0,S.J)(ct.value),to:(0,S.J)(ie.value),onApply:Le,onClose:()=>Ze(!1),onChange:Ue,timeZone:be,isReversed:ze}))};function le(Oe,ye,Pe){const be={from:Oe,to:ye},Be=s.convertRawToRange(be,Pe);return!(Be.from.isSame(Be.to)||Be.from.isBefore(Be.to))}function ge(Oe,ye,Pe){const be=ne(Oe,Pe),Be=ne(ye,Pe),ze=!ue(be,!1,Pe),lt=!ue(Be,!0,Pe),ht=le(be,Be,Pe)&&!lt;return[{value:be,invalid:ze||ht,errorMessage:ht&&!ze?oe.range():oe.default()},{value:Be,invalid:lt,errorMessage:oe.default()}]}function ne(Oe,ye){return(0,c.v9)(Oe)?(0,O.dq)(Oe,{timeZone:ye}):Oe}function ue(Oe,ye,Pe){return(0,c.v9)(Oe)?Oe.isValid():U.isMathString(Oe)?U.isValid(Oe):(0,S.J)(Oe,{roundUp:ye,timeZone:Pe}).isValid()}function te(Oe){return{fieldContainer:t.css`
      display: flex;
    `,tooltip:t.css`
      padding-left: ${Oe.spacing(1)};
      padding-top: ${Oe.spacing(3)};
    `}}var me=e(98574);const q=(Oe,ye)=>s.convertRawToRange({from:Oe.from,to:Oe.to},ye),se=(Oe,ye)=>{const Pe=(0,O.dq)(Oe.from,{timeZone:ye}),be=(0,O.dq)(Oe.to,{timeZone:ye});return{from:Pe,to:be,display:`${Pe} to ${be}`}},ae=Oe=>{const{quickOptions:ye=[],isReversed:Pe,isFullscreen:be,hideQuickRanges:Be,timeZone:ze,fiscalYearStartMonth:lt,value:ht,onChange:vt,history:bt,showHistory:ct,className:Pt,hideTimeZone:ie,onChangeTimeZone:Ce,onChangeFiscalYearStartMonth:Ne}=Oe,Ze=!bt?.length,Qe=be&&ct||!be&&(ct&&!Ze||!Be),Le=(0,u.l4)(),Ue=Ve(Le,Pe,Be,Qe,be),ve=st(bt,ze),Se=Ie(ht.raw,ye),[Fe,je]=(0,n.useState)(""),Ge=ye.filter(mt=>mt.display.toLowerCase().includes(Fe.toLowerCase())),gt=mt=>vt(q(mt));return n.createElement("div",{id:"TimePickerContent",className:(0,t.cx)(Ue.container,Pt)},n.createElement("div",{className:Ue.body},(!be||!Be)&&n.createElement("div",{className:Ue.rightSide},n.createElement("div",{className:Ue.timeRangeFilter},n.createElement(f.H,{width:0,autoFocus:!0,value:Fe,onChange:je,placeholder:(0,o.t)("time-picker.content.filter-placeholder","Search quick ranges")})),n.createElement(m.$,null,!be&&n.createElement(de,{...Oe,historyOptions:ve}),!Be&&n.createElement(me.V,{options:Ge,onChange:gt,value:Se}))),be&&n.createElement("div",{className:Ue.leftSide},n.createElement(Me,{...Oe,historyOptions:ve}))),!ie&&be&&n.createElement(M,{timeZone:ze,fiscalYearStartMonth:lt,onChangeTimeZone:Ce,onChangeFiscalYearStartMonth:Ne}))},pe=Oe=>{const{widthOverride:ye}=Oe,Pe=(0,u.l4)(),be=(ye||window.innerWidth)>=Pe.breakpoints.values.lg;return n.createElement(ae,{...Oe,isFullscreen:be})},de=Oe=>{const{value:ye,hideQuickRanges:Pe,onChange:be,timeZone:Be,historyOptions:ze=[],showHistory:lt}=Oe,ht=(0,u.l4)(),vt=_e(ht),bt=(0,c.v9)(ye.raw.from)||(0,c.v9)(ye.raw.to),[ct,Pt]=(0,n.useState)(!bt),ie=Pe?!1:ct,Ce=Ne=>be(q(Ne,Be));return n.createElement("fieldset",null,n.createElement("div",{className:vt.header},n.createElement("button",{type:"button",className:vt.expandButton,onClick:()=>{Pe||Pt(!ie)},"data-testid":i.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!ie,"aria-controls":"expanded-timerange"},n.createElement(R.r,null,n.createElement(o.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!Pe&&n.createElement(l.J,{name:ie?"angle-down":"angle-up"}))),!ie&&n.createElement("div",{className:vt.body,id:"expanded-timerange"},n.createElement("div",{className:vt.form},n.createElement(G,{value:ye,onApply:be,timeZone:Be,isFullscreen:!1})),lt&&n.createElement(me.V,{title:(0,o.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:ze,onChange:Ce,placeholderEmpty:null})))},Me=Oe=>{const{onChange:ye,value:Pe,timeZone:be,fiscalYearStartMonth:Be,isReversed:ze,historyOptions:lt}=Oe,ht=(0,u.l4)(),vt=tt(ht,Oe.hideQuickRanges),bt=ct=>ye(q(ct,be));return n.createElement(n.Fragment,null,n.createElement("div",{className:vt.container},n.createElement("div",{className:vt.title,"data-testid":i.wl.components.TimePicker.absoluteTimeRangeTitle},n.createElement(R.r,null,n.createElement(o.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),n.createElement(G,{value:Pe,timeZone:be,fiscalYearStartMonth:Be,onApply:ye,isFullscreen:!0,isReversed:ze})),Oe.showHistory&&n.createElement("div",{className:vt.recent},n.createElement(me.V,{title:(0,o.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:lt||[],onChange:bt,placeholderEmpty:n.createElement(Ke,null)})))},Ke=(0,n.memo)(()=>{const Oe=(0,u.l4)(),ye=dt(Oe);return n.createElement("div",{className:ye.container},n.createElement(o.c,{i18nKey:"time-picker.content.empty-recent-list"},n.createElement("div",null,n.createElement("span",null,"It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.")),n.createElement("div",null,n.createElement("a",{className:ye.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),n.createElement("span",null," to find out more about how to enter custom time ranges."))))});function st(Oe,ye){return!Array.isArray(Oe)||Oe.length===0?[]:Oe.map(Pe=>se(Pe,ye))}Ke.displayName="EmptyRecentList";const Ie=(Oe,ye)=>(0,n.useMemo)(()=>{if(s.isRelativeTimeRange(Oe))return ye.find(Pe=>Pe.from===Oe.from&&Pe.to===Oe.to)},[Oe,ye]),Ve=(0,r.B)((Oe,ye,Pe,be,Be)=>({container:t.css`
      background: ${Oe.colors.background.primary};
      box-shadow: ${Oe.shadows.z3};
      width: ${Be?"546px":"262px"};
      border-radius: 2px;
      border: 1px solid ${Oe.colors.border.weak};
      ${ye?"left":"right"}: 0;
    `,body:t.css`
      display: flex;
      flex-direction: row-reverse;
      height: ${be?"381px":"217px"};
    `,leftSide:t.css`
      display: flex;
      flex-direction: column;
      border-right: ${ye?"none":`1px solid ${Oe.colors.border.weak}`};
      width: ${Pe?"100%":"60%"};
      overflow: hidden;
      order: ${ye?1:0};
    `,rightSide:t.css`
      width: ${Be?"40%":"100%"}; !important;
      border-right: ${ye?`1px solid ${Oe.colors.border.weak}`:"none"};
      display: flex;
      flex-direction: column;
    `,timeRangeFilter:t.css`
      padding: ${Oe.spacing(1)};
    `,spacing:t.css`
      margin-top: 16px;
    `})),_e=(0,r.B)(Oe=>({header:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid ${Oe.colors.border.weak};
      padding: 7px 9px 7px 9px;
    `,expandButton:t.css`
      background-color: transparent;
      border: none;
      display: flex;
      width: 100%;

      &:focus-visible {
        ${(0,d.getFocusStyles)(Oe)}
      }
    `,body:t.css`
      border-bottom: 1px solid ${Oe.colors.border.weak};
    `,form:t.css`
      padding: 7px 9px 7px 9px;
    `})),tt=(0,r.B)((Oe,ye)=>({container:t.css`
      padding-top: 9px;
      padding-left: 11px;
      padding-right: ${ye?"11px":"20%"};
    `,title:t.css`
      margin-bottom: 11px;
    `,recent:t.css`
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding-top: ${Oe.spacing(1)};
    `})),dt=(0,r.B)(Oe=>({container:t.css`
      padding: 12px;
      margin: 12px;

      a,
      span {
        font-size: 13px;
      }\
    `,link:t.css`
      color: ${Oe.colors.text.link};
    `}))},65012:(Y,T,e)=>{"use strict";e.d(T,{r:()=>i});var t=e(9892),n=e(66111),c=e(72648);const s=f=>({text:t.css`
      font-size: ${f.typography.size.md};
      font-weight: ${f.typography.fontWeightMedium};
      color: ${f.colors.text.primary};
      margin: 0;
      display: flex;
    `}),i=(0,n.memo)(({children:f})=>{const u=(0,c.wW)(s);return n.createElement("h3",{className:u.text},f)});i.displayName="TimePickerTitle"},98574:(Y,T,e)=>{"use strict";e.d(T,{V:()=>p});var t=e(9892),n=e(66111),c=e(7804),s=e(37951),i=e(65012),f=e(44288),u=e(72648),r=e(85419);const d=E=>({container:t.css`
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      justify-content: space-between;
    `,selected:t.css`
      background: ${E.colors.action.selected};
      font-weight: ${E.typography.fontWeightMedium};
    `,radio:t.css`
      opacity: 0;
      width: 0 !important;

      &:focus-visible + label {
        ${(0,r.getFocusStyles)(E)};
      }
    `,label:t.css`
      cursor: pointer;
      flex: 1;
      padding: 7px 9px 7px 9px;

      &:hover {
        background: ${E.colors.action.hover};
        cursor: pointer;
      }
    `}),o=(0,n.memo)(({value:E,onSelect:h,selected:C=!1,name:a})=>{const P=(0,u.wW)(d),D=(0,f.Z)();return n.createElement("li",{className:(0,t.cx)(P.container,C&&P.selected)},n.createElement("input",{className:P.radio,checked:C,name:a,type:"checkbox",id:D,onChange:()=>h(E)}),n.createElement("label",{className:P.label,htmlFor:D},E.display))});o.displayName="TimeRangeOption";const m=(0,c.B)(()=>({title:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 16px 5px 9px;
    `})),l=(0,c.B)(()=>({grow:t.css`
      flex-grow: 1;
      align-items: flex-start;
    `})),p=E=>{const h=m(),{title:C,options:a,placeholderEmpty:P}=E;return typeof P<"u"&&a.length<=0?n.createElement(n.Fragment,null,P):C?n.createElement("section",{"aria-label":C},n.createElement("fieldset",null,n.createElement("div",{className:h.title},n.createElement(i.r,null,C)),n.createElement(g,{...E}))):n.createElement(g,{...E})},g=({options:E,value:h,onChange:C,title:a})=>{const P=l();return n.createElement(n.Fragment,null,n.createElement("ul",{"aria-roledescription":(0,s.t)("time-picker.time-range.aria-role","Time range selection")},E.map((D,x)=>n.createElement(o,{key:y(D,x),value:D,selected:v(D,h),onSelect:C,name:a??(0,s.t)("time-picker.time-range.default-title","Time ranges")}))),n.createElement("div",{className:P.grow}))};function y(E,h){return`${E.from}-${E.to}-${h}`}function v(E,h){return!h||!E?!1:h.from===E.from&&h.to===E.to}},52566:(Y,T,e)=>{"use strict";e.d(T,{O:()=>C});var t=e(82897),n=e(66111),c=e(56808),s=e(37951),i=e(8581),f=e(9892),u=e(72648);const r=b=>{const{children:R,label:S}=b,O=(0,u.wW)(d);return S?n.createElement("div",null,n.createElement("div",{className:O.header},n.createElement("span",{className:O.label},S)),R):n.createElement("div",null,R)},d=b=>({header:f.css`
      padding: 7px 10px;
      width: 100%;
      border-top: 1px solid ${b.colors.border.weak};
      text-transform: capitalize;
    `,label:f.css`
      font-size: ${b.typography.size.sm};
      color: ${b.colors.text.secondary};
      font-weight: ${b.typography.fontWeightMedium};
    `});var o=e(4883),m=e(7804),l=e(39904),p=e(64612),g=e(10516);const y="tz-utc-offset",v=b=>{const{children:R,innerProps:S,innerRef:O,data:U,isSelected:I,isFocused:F}=b,w=(0,u.l4)(),K=h(w),L=Date.now(),V=(0,f.cx)(K.container,F&&K.containerFocused);if(!(0,t.isString)(U.value))return null;const H=(0,c.Pr)(U.value,L);return n.createElement("div",{className:V,...S,ref:O,"aria-label":"Select option"},n.createElement("div",{className:(0,f.cx)(K.leftColumn,K.row)},n.createElement("div",{className:(0,f.cx)(K.leftColumn,K.wideRow)},n.createElement(g.d,{title:R}),n.createElement("div",{className:K.spacer}),n.createElement(p.K,{info:H})),n.createElement("div",{className:K.rightColumn},n.createElement(o.v,{timeZone:H?.ianaName||U.value,timestamp:L,className:y}),I&&n.createElement("span",null,n.createElement(l.J,{name:"check"})))))},E=b=>{const{children:R,innerProps:S,innerRef:O,data:U,isSelected:I,isFocused:F}=b,w=(0,u.l4)(),K=h(w),L=Date.now(),V=(0,f.cx)(K.container,F&&K.containerFocused);if(!(0,t.isString)(U.value))return null;const H=(0,c.Pr)(U.value,L);return n.createElement("div",{className:V,...S,ref:O,"aria-label":"Select option"},n.createElement("div",{className:K.body},n.createElement("div",{className:K.row},n.createElement("div",{className:K.leftColumn},n.createElement(g.d,{title:R})),n.createElement("div",{className:K.rightColumn},I&&n.createElement("span",null,n.createElement(l.J,{name:"check"})))),n.createElement("div",{className:K.row},n.createElement("div",{className:K.leftColumn},n.createElement(p.K,{info:H})),n.createElement("div",{className:K.rightColumn},n.createElement(o.v,{timestamp:L,timeZone:H?.ianaName||U.value,className:y})))))},h=(0,m.B)(b=>({container:f.css`
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      padding: 6px 8px 4px;

      &:hover {
        background: ${b.colors.action.hover};
      }
    `,containerFocused:f.css`
      background: ${b.colors.action.hover};
    `,body:f.css`
      display: flex;
      font-weight: ${b.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,row:f.css`
      display: flex;
      flex-direction: row;
    `,leftColumn:f.css`
      flex-grow: 1;
      text-overflow: ellipsis;
    `,rightColumn:f.css`
      justify-content: flex-end;
      align-items: center;
    `,wideRow:f.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
    `,spacer:f.css`
      margin-left: 6px;
    `})),C=b=>{const{onChange:R,width:S,autoFocus:O=!1,onBlur:U,value:I,includeInternal:F=!1,disabled:w=!1,inputId:K,menuShouldPortal:L=!1,openMenuOnFocus:V=!0}=b,H=a(F),j=P(H,I),A=x(),_=S&&S<=45?E:v,k=(0,n.useCallback)(Q=>{if(!Q||!(0,t.isString)(Q.value))return R(I);R(Q.value)},[R,I]);return n.createElement(i.Ph,{inputId:K,value:j,placeholder:(0,s.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:O,menuShouldPortal:L,openMenuOnFocus:V,width:S,filterOption:A,options:H,onChange:k,onBlur:U,components:{Option:_,Group:r},disabled:w,"aria-label":(0,s.t)("time-picker.zone.select-aria-label","Time zone picker")})},a=b=>{const R=Date.now();return(0,c.$8)(b).map(O=>{const U=O.zones.reduce((I,F)=>{const w=(0,c.Pr)(F,R);return w&&I.push({label:w.name,value:w.zone,searchIndex:M(w,R)}),I},[]);return{label:O.name,options:U}})},P=(b,R)=>(0,n.useMemo)(()=>{if(R===void 0)return;const S=(0,t.toLower)(R);return b.find(U=>U.label?S.startsWith((0,t.toLower)(U.label)):D(S))?.options.find(U=>(0,t.isEmpty)(S)?U.value===c.RQ.default:(0,t.toLower)(U.value)===S)},[b,R]),D=b=>{switch(b){case c.RQ.default:case c.RQ.localBrowserTime:case c.RQ.utc:return!0;default:return!1}},x=()=>(0,n.useCallback)((b,R)=>!R||!b.data||!b.data.searchIndex?!0:b.data.searchIndex.indexOf((0,t.toLower)(R))>-1,[]),M=(b,R)=>{const S=[(0,t.toLower)(b.name),(0,t.toLower)(b.abbreviation),(0,t.toLower)((0,o.k)(R,b.zone))];for(const O of b.countries)S.push((0,t.toLower)(O.name)),S.push((0,t.toLower)(O.code));return S.join("|")}},64612:(Y,T,e)=>{"use strict";e.d(T,{K:()=>s});var t=e(9892),n=e(66111),c=e(72648);const s=({info:u})=>{const r=(0,c.wW)(f),d=i(u);return u?n.createElement("div",{className:r.description},d):null},i=u=>(0,n.useMemo)(()=>{const r=[];if(!u)return"";if(u.countries.length>0){const d=u.countries[0];r.push(d.name)}return u.abbreviation&&r.push(u.abbreviation),r.join(", ")},[u]),f=u=>({description:t.css`
      font-weight: normal;
      font-size: ${u.typography.size.sm};
      color: ${u.colors.text.secondary};
      white-space: normal;
      text-overflow: ellipsis;
    `})},4883:(Y,T,e)=>{"use strict";e.d(T,{k:()=>r,v:()=>u});var t=e(9892),n=e(82897),c=e.n(n),s=e(66111),i=e(77258),f=e(72648);const u=o=>{const{timestamp:m,timeZone:l,className:p}=o,g=(0,f.wW)(d);return(0,n.isString)(l)?s.createElement(s.Fragment,null,s.createElement("span",{className:(0,t.cx)(g.offset,p)},r(m,l))):null},r=(o,m)=>{const l=(0,i.dq)(o,{timeZone:m,format:"Z"});return l==="+00:00"?"UTC":`UTC${l}`},d=o=>{const m=t.css`
    font-weight: normal;
    font-size: ${o.typography.size.sm};
    color: ${o.colors.text.secondary};
    white-space: normal;
  `;return{offset:t.css`
      ${m};
      color: ${o.colors.text.primary};
      background: ${o.colors.background.secondary};
      padding: 2px 5px;
      border-radius: 2px;
      margin-left: 4px;
    `}}},10516:(Y,T,e)=>{"use strict";e.d(T,{d:()=>s});var t=e(9892),n=e(66111),c=e(72648);const s=({title:f})=>{const u=(0,c.wW)(i);return f?n.createElement("span",{className:u.title},f):null},i=f=>({title:t.css`
      font-weight: ${f.typography.fontWeightRegular};
      text-overflow: ellipsis;
    `})},80124:(Y,T,e)=>{"use strict";e.d(T,{z:()=>i});var t=e(66111),n=e(68183),c=e(8581);const s=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],i=f=>{const{onChange:u,width:r,autoFocus:d=!1,onBlur:o,value:m,disabled:l=!1,inputId:p}=f,g=(0,t.useCallback)(y=>{y.value!==void 0&&u(y.value)},[u]);return t.createElement(c.Ph,{inputId:p,value:s.find(y=>y.value===m)?.value,placeholder:n.wl.components.WeekStartPicker.placeholder,autoFocus:d,openMenuOnFocus:!0,width:r,options:s,onChange:g,onBlur:o,disabled:l})}},21356:(Y,T,e)=>{"use strict";e.d(T,{E:()=>n,r:()=>t});const t=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],n=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},30979:(Y,T,e)=>{"use strict";e.d(T,{d:()=>p});var t=e(9892),n=e(29952),c=e(83962),s=e(86922),i=e(6756),f=e(66111),u=e(17650),r=e(68183),d=e(72648),o=e(31403),m=e(68226),l=e(17937);function p({children:E,onClose:h,closeOnMaskClick:C=!0,scrollableContent:a=!1,title:P,subtitle:D,width:x,size:M="md",tabs:b}){const R=(0,d.wW)(v),S=f.useRef(null),{dialogProps:O,titleProps:U}=(0,n.R)({},S),{overlayProps:I}=(0,s.Ir)({isDismissable:!1,isOpen:!0,onClose:h},S);y(),(0,u.Z)(S,C?h:g);const F=(0,t.cx)(R.drawer,!x&&R.sizes[M]),w=f.createElement("div",{className:R.content},E);return f.createElement(i.Z,{open:!0,onClose:h,placement:"right",width:x??"",getContainer:".main-view",className:R.drawerContent,rootClassName:F,motion:{motionAppear:!0,motionName:R.drawerMotion},maskClassName:R.mask,maskClosable:C,maskMotion:{motionAppear:!0,motionName:R.maskMotion}},f.createElement(c.MT,{restoreFocus:!0,contain:!0,autoFocus:!0},f.createElement("div",{"aria-label":typeof P=="string"?r.wl.components.Drawer.General.title(P):r.wl.components.Drawer.General.title("no title"),className:R.container,...I,...O,ref:S},typeof P=="string"&&f.createElement("div",{className:(0,t.cx)(R.header,Boolean(b)&&R.headerWithTabs)},f.createElement("div",{className:R.actions},f.createElement(o.zx,{icon:"times",variant:"secondary",fill:"text",onClick:h,"aria-label":r.wl.components.Drawer.General.close})),f.createElement("div",{className:R.titleWrapper},f.createElement(l.x,{as:"h3",...U},P),D&&f.createElement("div",{className:R.subtitle},D),b&&f.createElement("div",{className:R.tabsWrapper},b))),typeof P!="string"&&P,f.createElement("div",{className:R.contentScroll},a?f.createElement(m.$,{autoHeightMin:"100%"},w):w))))}function g(){}function y(){(0,f.useEffect)(()=>{if(document.body)return document.body.classList.add("body-drawer-open"),()=>{document.body.classList.remove("body-drawer-open")}},[])}const v=E=>({container:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      flex: 1 1 0;
    `,drawer:t.css`
      .main-view & {
        top: 81px;
      }

      .main-view--search-bar-hidden & {
        top: 41px;
      }

      .rc-drawer-content-wrapper {
        box-shadow: ${E.shadows.z3};

        ${E.breakpoints.down("sm")} {
          width: calc(100% - ${E.spacing(2)}) !important;
          min-width: 0 !important;
        }
      }
    `,sizes:{sm:(0,t.css)({".rc-drawer-content-wrapper":{label:"drawer-sm",width:"25vw",minWidth:E.spacing(48)}}),md:(0,t.css)({".rc-drawer-content-wrapper":{label:"drawer-md",width:"50vw",minWidth:E.spacing(60)}}),lg:(0,t.css)({".rc-drawer-content-wrapper":{label:"drawer-lg",width:"75vw",minWidth:E.spacing(93),[E.breakpoints.down("md")]:{width:`calc(100% - ${E.spacing(2)}) !important`,minWidth:0}}})},drawerContent:t.css`
      background-color: ${E.colors.background.primary} !important;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      z-index: ${E.zIndex.dropdown};
    `,drawerMotion:t.css`
      &-appear {
        transform: translateX(100%);
        transition: none !important;

        &-active {
          transition: ${E.transitions.create("transform")} !important;
          transform: translateX(0);
        }
      }
    `,mask:t.css`
      background-color: ${E.components.overlay.background} !important;
      backdrop-filter: blur(1px);
    `,maskMotion:t.css`
      &-appear {
        opacity: 0;

        &-active {
          opacity: 1;
          transition: ${E.transitions.create("opacity")};
        }
      }
    `,header:(0,t.css)({flexGrow:0,padding:E.spacing(3,2),borderBottom:`1px solid ${E.colors.border.weak}`}),headerWithTabs:(0,t.css)({borderBottom:"none"}),actions:(0,t.css)({position:"absolute",right:E.spacing(1),top:E.spacing(2)}),titleWrapper:t.css`
      overflow-wrap: break-word;
    `,subtitle:(0,t.css)({color:E.colors.text.secondary,paddingTop:E.spacing(1)}),content:(0,t.css)({padding:E.spacing(2),height:"100%",flexGrow:1}),contentScroll:(0,t.css)({minHeight:0,flex:1}),tabsWrapper:(0,t.css)({paddingLeft:E.spacing(2),margin:E.spacing(2,-1,-3,-3)})})},44342:(Y,T,e)=>{"use strict";e.d(T,{d:()=>g});var t=e(9892),n=e(88962),c=e(83962),s=e(61781),i=e(61960),f=e(66111),u=e(72648),r=e(26202),d=e(94437),o=e(95130),m=e(42044),l=e(64319);const p=v=>{const{className:E,options:h,value:C,onChange:a,narrow:P,variant:D,...x}=v,M=(0,u.wW)(y),b=(0,i.W)({}),R=f.useRef(null),{menuTriggerProps:S,menuProps:O}=(0,s.u4)({},b,R),{buttonProps:U}=(0,n.U)(S,R),I=F=>{a(F),b.close()};return f.createElement(r.h,{className:M.wrapper},f.createElement(l.h,{className:E,isOpen:b.isOpen,narrow:P,variant:D,ref:R,...U,...x},C?.label||(C?.value!=null?String(C?.value):null)),b.isOpen&&f.createElement("div",{className:M.menuWrapper},f.createElement(d.L,{onClick:b.close,parent:document,includeButtonPress:!1},f.createElement(c.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},f.createElement(o.v,{tabIndex:-1,onClose:b.close,...O},h.map(F=>f.createElement(m.s,{key:`${F.value}`,label:F.label??String(F.value),onClick:()=>I(F),active:F.value===C?.value,ariaChecked:F.value===C?.value,ariaLabel:F.ariaLabel||F.label,role:"menuitemradio"})))))))};p.displayName="ButtonSelect";const g=f.memo(p),y=v=>({wrapper:t.css`
      position: relative;
      display: inline-flex;
    `,menuWrapper:t.css`
      position: absolute;
      z-index: ${v.zIndex.dropdown};
      top: ${v.spacing(4)};
      right: 0;
    `})},71698:(Y,T,e)=>{"use strict";e.d(T,{L:()=>r});var t=e(9892),n=e(83962),c=e(66111),s=e(27480),i=e(79288),f=e(61970),u=e(85511);const r=c.memo(({children:o,overlay:m,placement:l,offset:p,onVisibleChange:g})=>{const[y,v]=(0,c.useState)(!1),E=(0,c.useRef)(null);(0,c.useEffect)(()=>{g?.(y)},[g,y]);const{getArrowProps:h,getTooltipProps:C,setTooltipRef:a,setTriggerRef:P,visible:D}=(0,s.O)({visible:y,placement:l,onVisibleChange:v,interactive:!0,delayHide:0,delayShow:0,offset:p??[0,8],trigger:["click"]}),x=150,M=d(x),b=()=>{v(!1)},R=S=>{(S.key==="Escape"||S.key==="Tab")&&v(!1)};return c.createElement(c.Fragment,null,c.cloneElement(o,{ref:P}),D&&c.createElement(u.h_,null,c.createElement(n.MT,{autoFocus:!0,restoreFocus:!0,contain:!0},c.createElement("div",{ref:a,...C(),onClick:b,onKeyDown:R},c.createElement("div",{...h({className:"tooltip-arrow"})}),c.createElement(i.Z,{nodeRef:E,appear:!0,in:!0,timeout:{appear:x,exit:0,enter:0},classNames:M},c.createElement("div",{ref:E},f.renderOrCallToRender(m,{})))))))});r.displayName="Dropdown";const d=o=>({appear:(0,t.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,t.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${o}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${o}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},69097:(Y,T,e)=>{"use strict";e.d(T,{K:()=>s});var t=e(9892),n=e(66111),c=e(72648);const s=({children:f})=>{const u=(0,c.wW)(i);return n.createElement("div",{className:u.container},f)},i=f=>({container:t.css`
      border-left: 3px solid ${f.colors.info.main};
      background-color: ${f.colors.background.secondary};
      padding: ${f.spacing(2)};
      min-width: 350px;
      border-radius: ${f.shape.radius.default};
      margin-bottom: ${f.spacing(4)};
    `})},53546:(Y,T,e)=>{"use strict";e.d(T,{Pf:()=>r,SV:()=>f,z4:()=>u});var t=e(37916),n=e(66111),c=e(53843),s=e(45253),i=e(39198);class f extends n.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(o,m){(0,t.Tb)(o,{contexts:{react:{componentStack:m.componentStack}}}),c.s?.api?.pushError(o),this.setState({error:o,errorInfo:m}),this.props.onError&&this.props.onError(o)}componentDidUpdate(o){const{dependencies:m,onRecover:l}=this.props;if(this.state.error&&m&&o.dependencies){for(let p=0;p<m.length;p++)if(m[p]!==o.dependencies[p]){this.setState({error:null,errorInfo:null}),l&&l();break}}}render(){const{children:o}=this.props,{error:m,errorInfo:l}=this.state;return o({error:m,errorInfo:l})}}class u extends n.PureComponent{render(){const{title:o,children:m,style:l,dependencies:p}=this.props;return n.createElement(f,{dependencies:p},({error:g,errorInfo:y})=>y?l==="alertbox"?n.createElement(s.b,{title:o||""},n.createElement("details",{style:{whiteSpace:"pre-wrap"}},g&&g.toString(),n.createElement("br",null),y.componentStack)):n.createElement(i.X,{title:o||"",error:g,errorInfo:y}):m)}}u.defaultProps={title:"An unexpected error happened",style:"alertbox"};function r(d,o={}){const m=l=>n.createElement(u,{...o},n.createElement(d,{...l}));return m.displayName="WithErrorBoundary",m}},39198:(Y,T,e)=>{"use strict";e.d(T,{X:()=>i});var t=e(9892),n=e(66111),c=e(7804);const s=(0,c.B)(()=>t.css`
    width: 500px;
    margin: 64px auto;
  `),i=({error:f,errorInfo:u,title:r})=>n.createElement("div",{className:s()},n.createElement("h2",null,r),n.createElement("details",{style:{whiteSpace:"pre-wrap"}},f&&f.toString(),n.createElement("br",null),u&&u.componentStack));i.displayName="ErrorWithStack"},30784:(Y,T,e)=>{"use strict";e.d(T,{A_:()=>y,Yo:()=>l});var t=e(9892),n=e(82897),c=e.n(n),s=e(66111),i=e(85191),f=e(92138),u=e(2703),r=e(72648),d=e(45253),o=e(39904),m=e(27119);function l({options:a,children:P,readAs:D,onLoad:x,fileListRenderer:M,onFileRemove:b}){const[R,S]=(0,s.useState)([]),[O,U]=(0,s.useState)([]),I=(0,u.Cf)("decbytes")(a?.maxSize?a?.maxSize:0),F=(0,s.useCallback)((Z,oe)=>{S(G=>G.map(le=>(le.id===Z.id&&oe(le),le)))},[]),w=(0,s.useCallback)((Z,oe,G)=>{let le=Z.map(h);if(a?.multiple===!1?S(le):S(ge=>[...ge,...le]),k(oe),a?.onDrop)a.onDrop(Z,oe,G);else for(const ge of le){const ne=new FileReader,ue=()=>{D?ne[D](ge.file):ne.readAsText(ge.file)};F(ge,te=>{te.abortUpload=()=>{ne.abort()},te.retryUpload=()=>{F(ge,me=>{me.error=null,me.progress=void 0}),ue()}}),ne.onabort=()=>{F(ge,te=>{te.error=new DOMException("Aborted")})},ne.onprogress=te=>{F(ge,me=>{me.progress=te.loaded})},ne.onload=()=>{x?.(ne.result)},ne.onerror=()=>{F(ge,te=>{te.error=ne.error})},ue()}},[x,a,D,F]),K=Z=>{const oe=R.filter(G=>Z.id!==G.id);S(oe),b?.(Z)},{getRootProps:L,getInputProps:V,isDragActive:H}=(0,i.uI)({...a,useFsAccessApi:!1,onDrop:w,accept:g(a?.accept)}),j=(0,r.l4)(),A=C(j,H),_=R.map(Z=>M?M(Z,K):s.createElement(m.K,{key:Z.id,file:Z,removeFile:K})),k=Z=>{let oe=[];Z.map(G=>{G.errors.map(le=>{oe.findIndex(ge=>ge.code===le.code&&ge.message===le.message)===-1&&oe.push(le)})}),U(oe)},Q=Z=>s.createElement("div",{className:A.errorAlert},s.createElement(d.b,{title:"Upload failed",severity:"error",onRemove:re},Z.map(oe=>{switch(oe.code){case f.jK.FileTooLarge:return s.createElement("div",{key:oe.message+oe.code},"File is larger than ",(0,u.zc)(I));default:return s.createElement("div",{key:oe.message+oe.code},oe.message)}}))),re=()=>{U([])};return s.createElement("div",{className:A.container},s.createElement("div",{"data-testid":"dropzone",...L({className:A.dropzone})},s.createElement("input",{...V()}),P??s.createElement(y,{primaryText:v(R,a)})),O.length>0&&Q(O),s.createElement("small",{className:(0,t.cx)(A.small,A.acceptContainer)},a?.maxSize&&`Max file size: ${(0,u.zc)(I)}`,a?.maxSize&&a?.accept&&s.createElement("span",{className:A.acceptSeparator},"|"),a?.accept&&E(a.accept)),_)}function p(a){return["txt","json","csv","xls","yml"].some(P=>a.match(P))?"text/plain":"application/octet-stream"}function g(a){return(0,n.isString)(a)?{[p(a)]:[a]}:Array.isArray(a)?a.reduce((P,D)=>{const x=p(D);return P[x]=P[x]?[...P[x],D]:[D],P},{}):a}function y({primaryText:a="Drop file here or click to upload",secondaryText:P=""}){const D=(0,r.l4)(),x=C(D);return s.createElement("div",{className:(0,t.cx)(x.defaultDropZone)},s.createElement(o.J,{className:(0,t.cx)(x.icon),name:"upload",size:"xl"}),s.createElement("h6",{className:(0,t.cx)(x.primaryText)},a),s.createElement("small",{className:x.small},P))}function v(a,P){return P?.multiple===void 0||P?.multiple?"Upload file":a.length?"Replace file":"Upload file"}function E(a){return(0,n.isString)(a)?`Accepted file type: ${a}`:Array.isArray(a)?`Accepted file types: ${a.join(", ")}`:`Accepted file types: ${Object.values(a).flat().join(", ")}`}function h(a){return{id:(0,n.uniqueId)("file"),file:a,error:null}}function C(a,P){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
      padding: ${a.spacing(2)};
      border-radius: 2px;
      border: 1px dashed ${a.colors.border.strong};
      background-color: ${P?a.colors.background.secondary:a.colors.background.primary};
      cursor: pointer;
      align-items: center;
      justify-content: center;
    `,dropzone:t.css`
      display: flex;
      flex-direction: column;
    `,defaultDropZone:t.css`
      text-align: center;
    `,icon:t.css`
      margin-bottom: ${a.spacing(1)};
    `,primaryText:t.css`
      margin-bottom: ${a.spacing(1)};
    `,acceptContainer:t.css`
      text-align: center;
      margin: 0;
    `,acceptSeparator:t.css`
      margin: 0 ${a.spacing(1)};
    `,small:t.css`
      color: ${a.colors.text.secondary};
    `,errorAlert:t.css`
      padding-top: 10px;
    `}}},27119:(Y,T,e)=>{"use strict";e.d(T,{K:()=>o});var t=e(9892),n=e(66111),c=e(2703),s=e(72648),i=e(39027),f=e(31403),u=e(39904),r=e(8180);const d="Remove file";function o({file:l,removeFile:p}){const g=(0,s.wW)(m),{file:y,progress:v,error:E,abortUpload:h,retryUpload:C}=l,a=()=>E?n.createElement(n.Fragment,null,n.createElement("span",{className:g.error},E.message),C&&n.createElement(r.h,{type:"button","aria-label":"Retry",name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:C}),p&&n.createElement(r.h,{className:C?g.marginLeft:"",type:"button",name:"trash-alt",onClick:()=>p(l),tooltip:d,"aria-label":d})):v&&y.size>v?n.createElement(n.Fragment,null,n.createElement("progress",{className:g.progressBar,max:y.size,value:v}),n.createElement("span",{className:g.paddingLeft},Math.round(v/y.size*100),"%"),h&&n.createElement(f.zx,{variant:"secondary",type:"button",fill:"text",onClick:h},"Cancel upload")):p&&n.createElement(r.h,{name:"trash-alt",onClick:()=>p(l),tooltip:d,"aria-label":d,type:"button",tooltipPlacement:"top"}),P=(0,c.Cf)("decbytes")(y.size);return n.createElement("div",{className:g.fileListContainer},n.createElement("span",{className:g.fileNameWrapper},n.createElement(u.J,{name:"file-blank",size:"lg","aria-hidden":!0}),n.createElement("span",{className:g.padding},(0,i.O)(y.name)),n.createElement("span",null,(0,c.zc)(P))),n.createElement("div",{className:g.fileNameWrapper},a()))}function m(l){return{fileListContainer:t.css`
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: ${l.spacing(2)};
      border: 1px dashed ${l.colors.border.medium};
      background-color: ${l.colors.background.secondary};
      margin-top: ${l.spacing(1)};
    `,fileNameWrapper:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
    `,padding:t.css`
      padding: ${l.spacing(0,1)};
    `,paddingLeft:t.css`
      padding-left: ${l.spacing(2)};
    `,marginLeft:t.css`
      margin-left: ${l.spacing(1)};
    `,error:t.css`
      padding-right: ${l.spacing(2)};
      color: ${l.colors.error.text};
    `,progressBar:t.css`
      border-radius: ${l.shape.radius.default};
      height: 4px;
      ::-webkit-progress-bar {
        background-color: ${l.colors.border.weak};
        border-radius: ${l.shape.radius.default};
      }
      ::-webkit-progress-value {
        background-color: ${l.colors.primary.main};
        border-radius: ${l.shape.radius.default};
      }
    `}}},47556:(Y,T,e)=>{"use strict";e.d(T,{A_:()=>t.A_,K$:()=>n.K,Yo:()=>t.Yo});var t=e(30784),n=e(27119)},82381:(Y,T,e)=>{"use strict";e.d(T,{p:()=>o});var t=e(9892),n=e(66111),c=e(44288),s=e(68183),i=e(72648),f=e(85419),u=e(39027),r=e(31403),d=e(39904);const o=({onFileUpload:l,className:p,children:g="Upload file",accept:y="*",size:v="md",showFileName:E})=>{const h=(0,i.wW)(m(v)),[C,a]=(0,n.useState)(""),P=(0,c.Z)(),D=(0,n.useCallback)(x=>{const M=x.currentTarget?.files?.[0];M&&a(M.name??""),l(x)},[l]);return n.createElement(n.Fragment,null,n.createElement("input",{type:"file",id:P,className:h.fileUpload,onChange:D,multiple:!1,accept:y,"data-testid":s.wl.components.FileUpload.inputField}),n.createElement("label",{htmlFor:P,className:(0,t.cx)(h.labelWrapper,p)},n.createElement(d.J,{name:"upload",className:h.icon}),g),E&&C&&n.createElement("span",{"aria-label":"File name",className:h.fileName,"data-testid":s.wl.components.FileUpload.fileNameSpan},(0,u.O)(C)))},m=l=>p=>{const g=(0,r.fW)({theme:p,variant:"primary",size:l,iconOnly:!1}),y=(0,f.getFocusStyles)(p);return{fileUpload:(0,t.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":y,"&:focus-visible + label":y}),labelWrapper:g.button,icon:g.icon,fileName:(0,t.css)({marginLeft:p.spacing(.5)})}}},14747:(Y,T,e)=>{"use strict";e.d(T,{H:()=>u});var t=e(66111),n=e(79086);function c(...r){const d=t.useRef(null);return t.useEffect(()=>{r.forEach(o=>{o&&(typeof o=="function"?o(d.current):o.current=d.current)})},[r]),d}var s=e(31403),i=e(39904),f=e(46967);const u=t.forwardRef(({value:r,width:d,onChange:o,escapeRegex:m=!0,...l},p)=>{const g=t.useRef(null),y=c(p,g),v=r!==""?t.createElement(s.zx,{icon:"times",fill:"text",size:"sm",onClick:E=>{g.current?.focus(),o(""),E.stopPropagation()}},"Clear"):null;return t.createElement(f.I,{prefix:t.createElement(i.J,{name:"search"}),suffix:v,width:d,type:"text",value:m?(0,n.x6)(r??""):r,onChange:E=>o(m?(0,n.GE)(E.currentTarget.value):E.currentTarget.value),...l,ref:y})});u.displayName="FilterInput"},41165:(Y,T,e)=>{"use strict";e.d(T,{B:()=>f});var t=e(9892),n=e(66111),c=e(72648),s=e(31403),i=e(39904);const f=({label:r,selected:d,onClick:o,icon:m="check"})=>{const l=(0,c.wW)(u),p=(0,c.wW)(s.gN);return n.createElement("button",{type:"button",className:(0,t.cx)(p,l.wrapper,d&&l.selected),onClick:o},n.createElement("span",null,r),d&&n.createElement(i.J,{name:m,className:l.icon}))},u=r=>({wrapper:t.css`
      background: ${r.colors.background.secondary};
      border-radius: ${r.shape.borderRadius(8)};
      padding: ${r.spacing(0,2)};
      font-size: ${r.typography.bodySmall.fontSize};
      font-weight: ${r.typography.fontWeightMedium};
      line-height: ${r.typography.bodySmall.lineHeight};
      color: ${r.colors.text.secondary};
      display: flex;
      align-items: center;
      height: 32px;

      &:hover {
        background: ${r.colors.action.hover};
        color: ${r.colors.text.primary};
      }
    `,selected:t.css`
      color: ${r.colors.text.primary};
      background: ${r.colors.action.selected};

      &:hover {
        background: ${r.colors.action.focus};
      }
    `,icon:t.css`
      margin-left: ${r.spacing(.5)};
    `})},95569:(Y,T,e)=>{"use strict";e.d(T,{W:()=>i});var t=e(9892),n=e(66111),c=e(19426);const s={labelWidth:6,inputWidth:12},i=({label:u,tooltip:r,labelWidth:d,inputWidth:o,inputEl:m,className:l,interactive:p,...g})=>{const y=f();return n.createElement("div",{className:(0,t.cx)(y.formField,l)},n.createElement(c.c,{width:d,tooltip:r,interactive:p},u),m||n.createElement("input",{type:"text",className:`gf-form-input ${o?`width-${o}`:""}`,...g,disabled:g.disabled}))};i.displayName="FormField",i.defaultProps=s;const f=()=>({formField:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
    `})},19426:(Y,T,e)=>{"use strict";e.d(T,{c:()=>u});var t=e(9085),n=e.n(t),c=e(66111),s=e(39904),i=e(61860);const u=({children:r,isFocused:d,isInvalid:o,className:m,htmlFor:l,tooltip:p,width:g,interactive:y,...v})=>{const E=n()(m,`gf-form-label width-${g||"10"}`,{"gf-form-label--is-focused":d,"gf-form-label--is-invalid":o});return c.createElement("label",{className:E,...v,htmlFor:l},r,p&&c.createElement(i.u,{placement:"top",content:p,theme:"info",interactive:y},c.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},72777:(Y,T,e)=>{"use strict";e.d(T,{W:()=>c});var t=e(66111);function n(s){return s<20?.9:s<26?.8:.6}const c=({value:s,className:i,style:f,...u})=>{const r=(s.prefix??"").length>0,d=(s.suffix??"").length>0;let o;if(f&&f.fontSize&&typeof f.fontSize=="number"){const m=f.fontSize,l=n(m);o={fontSize:m*l}}return t.createElement("div",{className:i,style:f,...u},t.createElement("div",null,r&&t.createElement("span",null,s.prefix),t.createElement("span",null,s.text),d&&t.createElement("span",{style:o},s.suffix)))};c.displayName="FormattedDisplayValue"},58255:(Y,T,e)=>{"use strict";e.d(T,{X:()=>u});var t=e(9892),n=e(66111),c=e(72648),s=e(7804),i=e(85419),f=e(64353);const u=n.forwardRef(({label:d,description:o,value:m,htmlValue:l,onChange:p,disabled:g,className:y,indeterminate:v,...E},h)=>{const C=(0,n.useCallback)(D=>{p&&p(D)},[p]),a=(0,c.wW)(r),P=v?"mixed":void 0;return n.createElement("label",{className:(0,t.cx)(a.wrapper,y)},n.createElement("div",{className:a.checkboxWrapper},n.createElement("input",{type:"checkbox",className:(0,t.cx)(a.input,v&&a.inputIndeterminate),checked:m,disabled:g,onChange:C,value:l,"aria-checked":P,...E,ref:h}),n.createElement("span",{className:a.checkmark})),d&&n.createElement("span",{className:a.label},d),o&&n.createElement("span",{className:a.description},o))}),r=(0,s.B)(d=>{const o=(0,f.F)(d),m=2,l=1;return{wrapper:t.css`
      display: inline-grid;
      align-items: center;
      column-gap: ${d.spacing(l)};
      grid-template-columns: auto 1fr;
      grid-template-rows: auto auto;
      position: relative;
      vertical-align: middle;
    `,input:t.css`
      position: absolute;
      z-index: 1;
      top: 0;
      left: 0;
      width: 100% !important; // global styles unset this
      height: 100%;
      opacity: 0;

      &:focus + span,
      &:focus-visible + span {
        ${(0,i.getFocusStyles)(d)}
      }

      &:focus:not(:focus-visible) + span {
        ${(0,i.getMouseFocusStyles)(d)}
      }

      /**
       * Using adjacent sibling selector to style checked state.
       * Primarily to limit the classes necessary to use when these classes will be used
       * for angular components styling
       * */
      &:checked + span {
        background: ${d.colors.primary.main};
        border: none;

        &:hover {
          background: ${d.colors.primary.shade};
        }

        &:after {
          content: '';
          position: absolute;
          z-index: 2;
          left: 5px;
          top: 1px;
          width: 6px;
          height: 12px;
          border: solid ${d.colors.primary.contrastText};
          border-width: 0 3px 3px 0;
          transform: rotate(45deg);
        }
      }

      &:disabled + span {
        background-color: ${d.colors.action.disabledBackground};
        cursor: not-allowed;

        &:hover {
          background-color: ${d.colors.action.disabledBackground};
        }

        &:after {
          border-color: ${d.colors.action.disabledText};
        }
      }
    `,inputIndeterminate:t.css`
      &[aria-checked='mixed'] + span {
        border: none;
        background: ${d.colors.primary.main};

        &:hover {
          background: ${d.colors.primary.shade};
        }

        &:after {
          content: '';
          position: absolute;
          z-index: 2;
          left: 3px;
          right: 3px;
          top: calc(50% - 1.5px);
          height: 3px;
          border: 1.5px solid ${d.colors.primary.contrastText};
          background-color: ${d.colors.primary.contrastText};
          width: auto;
          transform: none;
        }
      }
      &:disabled[aria-checked='mixed'] + span {
        background-color: ${d.colors.action.disabledBackground};

        &:after {
          border-color: ${d.colors.action.disabledText};
        }
      }
    `,checkboxWrapper:t.css`
      display: flex;
      align-items: center;
      grid-column-start: 1;
      grid-row-start: 1;
    `,checkmark:t.css`
      position: relative; /* Checkbox should be layered on top of the invisible input so it recieves :hover */
      z-index: 2;
      display: inline-block;
      width: ${d.spacing(m)};
      height: ${d.spacing(m)};
      border-radius: ${d.shape.borderRadius()};
      background: ${d.components.input.background};
      border: 1px solid ${d.components.input.borderColor};

      &:hover {
        cursor: pointer;
        border-color: ${d.components.input.borderHover};
      }
    `,label:(0,t.cx)(o.label,t.css`
        grid-column-start: 2;
        grid-row-start: 1;
        position: relative;
        z-index: 2;
        cursor: pointer;
        max-width: fit-content;
        line-height: ${d.typography.bodySmall.lineHeight};
        margin-bottom: 0;
      `),description:(0,t.cx)(o.description,t.css`
        grid-column-start: 2;
        grid-row-start: 2;
        line-height: ${d.typography.bodySmall.lineHeight};
        margin-top: 0; /* The margin effectively comes from the top: -2px on the label above it */
      `)}});u.displayName="Checkbox"},24799:(Y,T,e)=>{"use strict";e.d(T,{g:()=>d});var t=e(9892),n=e(66111),c=e(7804),s=e(72648),i=e(61970),f=e(57227),u=e(64353);const r=(0,c.B)(m=>({field:t.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${m.spacing(2)};
    `,fieldHorizontal:t.css`
      flex-direction: row;
      justify-content: space-between;
      flex-wrap: wrap;
    `,fieldValidationWrapper:t.css`
      margin-top: ${m.spacing(.5)};
    `,fieldValidationWrapperHorizontal:t.css`
      flex: 1 1 100%;
    `,validationMessageHorizontalOverflow:t.css`
      width: 0;
      overflow-x: visible;

      & > * {
        white-space: nowrap;
      }
    `})),d=n.forwardRef(({label:m,description:l,horizontal:p,invalid:g,loading:y,disabled:v,required:E,error:h,children:C,className:a,validationMessageHorizontalOverflow:P,htmlFor:D,...x},M)=>{const b=(0,s.l4)(),R=r(b),S=D??(0,i.getChildId)(C),O=typeof m=="string"?n.createElement(u._,{htmlFor:S,description:l},`${m}${E?" *":""}`):m,U=o({invalid:g,disabled:v,loading:y});return n.createElement("div",{className:(0,t.cx)(R.field,p&&R.fieldHorizontal,a),...x},O,n.createElement("div",null,n.createElement("div",{ref:M},n.cloneElement(C,U)),g&&h&&!p&&n.createElement("div",{className:(0,t.cx)(R.fieldValidationWrapper,{[R.validationMessageHorizontalOverflow]:!!P})},n.createElement(f.S,null,h))),g&&h&&p&&n.createElement("div",{className:(0,t.cx)(R.fieldValidationWrapper,R.fieldValidationWrapperHorizontal,{[R.validationMessageHorizontalOverflow]:!!P})},n.createElement(f.S,null,h)))});d.displayName="Field";function o(m){for(const l in m)m[l]===void 0&&delete m[l];return m}},70132:(Y,T,e)=>{"use strict";e.d(T,{F:()=>n});var t=e(66698);const n=({name:c,control:s,children:i,...f})=>{const{fields:u,append:r,prepend:d,remove:o,swap:m,move:l,insert:p}=(0,t.Dq)({control:s,name:c,...f});return i({fields:u,append:r,prepend:d,remove:o,swap:m,move:l,insert:p})}},13393:(Y,T,e)=>{"use strict";e.d(T,{C:()=>f});var t=e(9892),n=e(66111),c=e(72648),s=e(7804),i=e(19825);const f=({label:r,children:d,className:o,...m})=>{const l=(0,c.l4)(),p=u(l);return n.createElement("fieldset",{className:(0,t.cx)(p.wrapper,o),...m},r&&n.createElement(i.D,null,r),d)},u=(0,s.B)(r=>({wrapper:t.css`
      margin-bottom: ${r.spacing(4)};

      &:last-child {
        margin-bottom: 0;
      }
    `}))},57227:(Y,T,e)=>{"use strict";e.d(T,{S:()=>u});var t=e(9892),n=e(66111),c=e(7804),s=e(72648),i=e(39904);const f=(0,c.B)(r=>{const d=`
      font-size: ${r.typography.size.sm};
      font-weight: ${r.typography.fontWeightMedium};
      padding: ${r.spacing(.5,1)};
      color: ${r.colors.error.contrastText};
      background: ${r.colors.error.main};
      border-radius: ${r.shape.borderRadius()};
      position: relative;
      display: inline-block;
      align-self: flex-start;

      a {
        color: ${r.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:t.css`
      ${d}
      margin: ${r.spacing(.5,0,0,0)};

      &:before {
        content: '';
        position: absolute;
        left: 9px;
        top: -5px;
        width: 0;
        height: 0;
        border-width: 0 4px 5px 4px;
        border-color: transparent transparent ${r.colors.error.main} transparent;
        border-style: solid;
      }
    `,horizontal:t.css`
      ${d}
      margin-left: 10px;

      &:before {
        content: '';
        position: absolute;
        left: -5px;
        top: 9px;
        width: 0;
        height: 0;
        border-width: 4px 5px 4px 0;
        border-color: transparent #e02f44 transparent transparent;
        border-style: solid;
      }
    `,fieldValidationMessageIcon:t.css`
      margin-right: ${r.spacing()};
    `}}),u=({children:r,horizontal:d,className:o})=>{const m=(0,s.l4)(),l=f(m),p=(0,t.cx)(d?l.horizontal:l.vertical,o);return n.createElement("div",{role:"alert",className:p},n.createElement(i.J,{className:l.fieldValidationMessageIcon,name:"exclamation-triangle"}),r)}},94270:(Y,T,e)=>{"use strict";e.d(T,{l:()=>s});var t=e(9892),n=e(66111),c=e(66698);function s({defaultValues:i,onSubmit:f,validateOnMount:u=!1,validateFieldsOnMount:r,children:d,validateOn:o="onSubmit",maxWidth:m=600,...l}){const{handleSubmit:p,trigger:g,formState:y,...v}=(0,c.cI)({mode:o,defaultValues:i});return(0,n.useEffect)(()=>{u&&g(r)},[g,r,u]),n.createElement("form",{className:t.css`
        max-width: ${m!=="none"?m+"px":m};
        width: 100%;
      `,onSubmit:p(f),...l},d({errors:y.errors,formState:y,...v}))}},81764:(Y,T,e)=>{"use strict";e.d(T,{_:()=>u});var t=e(9892),n=e(66111),c=e(72648),s=e(61970),i=e(57227),f=e(77117);const u=({children:d,label:o,tooltip:m,labelWidth:l="auto",invalid:p,loading:g,disabled:y,required:v,className:E,htmlFor:h,grow:C,shrink:a,error:P,transparent:D,interactive:x,...M})=>{const b=(0,c.l4)(),R=r(b,C,a),S=h??(0,s.getChildId)(d),O=typeof o=="string"?n.createElement(f.W,{interactive:x,width:l,tooltip:m,htmlFor:S,transparent:D},`${o}${v?" *":""}`):o;return n.createElement("div",{className:(0,t.cx)(R.container,E),...M},O,n.createElement("div",{className:R.childContainer},n.cloneElement(d,{invalid:p,disabled:y,loading:g}),p&&P&&n.createElement("div",{className:(0,t.cx)(R.fieldValidationWrapper)},n.createElement(i.S,null,P))))};u.displayName="InlineField";const r=(d,o,m)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${o?1:0} ${m?1:0} auto;
      margin: 0 ${d.spacing(.5)} ${d.spacing(.5)} 0;
    `,childContainer:t.css`
      flex: ${o?1:0} ${m?1:0} auto;
    `,fieldValidationWrapper:t.css`
      margin-top: ${d.spacing(.5)};
    `})},11543:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>s});var t=e(9892),n=e(66111),c=e(72648);const s=({children:f,className:u,...r})=>{const d=(0,c.wW)(i);return n.createElement("div",{className:(0,t.cx)(d.container,u),...r},f)},i=f=>({container:t.css`
      label: InlineFieldRow;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-content: flex-start;
      row-gap: ${f.spacing(.5)};
    `})},77117:(Y,T,e)=>{"use strict";e.d(T,{W:()=>f});var t=e(9892),n=e(66111),c=e(72648),s=e(39904),i=e(61860);const f=({children:r,className:d,tooltip:o,width:m,transparent:l,interactive:p,as:g="label",...y})=>{const v=(0,c.wW)((0,n.useCallback)(E=>u(E,l,m),[l,m]));return n.createElement(g,{className:(0,t.cx)(v.label,d),...y},r,o&&n.createElement(i.u,{interactive:p,placement:"top",content:o,theme:"info"},n.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",className:v.icon})))},u=(r,d=!1,o)=>({label:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
      padding: 0 ${r.spacing(1)};
      font-weight: ${r.typography.fontWeightMedium};
      font-size: ${r.typography.size.sm};
      background-color: ${d?"transparent":r.colors.background.secondary};
      height: ${r.spacing(r.components.height.md)};
      line-height: ${r.spacing(r.components.height.md)};
      margin-right: ${r.spacing(.5)};
      border-radius: ${r.shape.radius.default};
      border: none;
      width: ${o?o!=="auto"?`${8*o}px`:o:"100%"};
      color: ${r.colors.text.primary};
    `,icon:t.css`
      color: ${r.colors.text.secondary};
      margin-left: 10px;

      :hover {
        color: ${r.colors.text.primary};
      }
    `})},62157:(Y,T,e)=>{"use strict";e.d(T,{m:()=>s});var t=e(9892),n=e(66111),c=e(72648);const s=({children:f,className:u,grow:r,...d})=>{const o=(0,c.wW)(m=>i(m,r));return n.createElement("div",{className:(0,t.cx)(o.container,u),...d},f)};s.displayName="InlineSegmentGroup";const i=(f,u)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${u?1:0} 0 auto;
      margin-bottom: ${f.spacing(.5)};
    `})},64353:(Y,T,e)=>{"use strict";e.d(T,{F:()=>f,_:()=>u});var t=e(9892),n=e(66111),c=e(7804),s=e(72648),i=e(39904);const f=(0,c.B)(r=>({label:t.css`
      label: Label;
      font-size: ${r.typography.size.sm};
      font-weight: ${r.typography.fontWeightMedium};
      line-height: 1.25;
      margin-bottom: ${r.spacing(.5)};
      color: ${r.colors.text.primary};
      max-width: 480px;
    `,labelContent:t.css`
      display: flex;
      align-items: center;
    `,description:t.css`
      label: Label-description;
      color: ${r.colors.text.secondary};
      font-size: ${r.typography.size.sm};
      font-weight: ${r.typography.fontWeightRegular};
      margin-top: ${r.spacing(.25)};
      display: block;
    `,categories:t.css`
      label: Label-categories;
      display: inline-flex;
      align-items: center;
    `,chevron:t.css`
      margin: 0 ${r.spacing(.25)};
    `})),u=({children:r,description:d,className:o,category:m,...l})=>{const p=(0,s.l4)(),g=f(p),y=m?.map((v,E)=>n.createElement("span",{className:g.categories,key:`${v}/${E}`},n.createElement("span",null,v),n.createElement(i.J,{name:"angle-right",className:g.chevron})));return n.createElement("div",{className:(0,t.cx)(g.label,o)},n.createElement("label",{...l},n.createElement("div",{className:g.labelContent},y,r),d&&n.createElement("span",{className:g.description},d)))}},50869:(Y,T,e)=>{"use strict";e.d(T,{G:()=>i,I:()=>f});var t=e(9085),n=e.n(t),c=e(66111),s=e(97291),i=(u=>(u.Invalid="invalid",u.Valid="valid",u))(i||{});class f extends c.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=r=>d=>{const o=(0,s.Gu)(d.target.value,r);this.setState(m=>({...m,error:o?o[0]:null}))},this.populateEventPropsWithStatus=(r,d)=>{const o={...r};return d&&Object.keys(s.JU).forEach(m=>{((0,s.z3)(m,d)||r[m])&&(o[m]=async l=>{l.persist(),(0,s.z3)(m,d)&&await this.validatorAsync(d[m]).apply(this,[l]),r[m]&&r[m].apply(null,[l,this.status])})}),o}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:r,className:d,hideErrorMessage:o,inputRef:m,...l}=this.props,{error:p}=this.state,g=n()("gf-form-input",{invalid:this.isInvalid},d),y=this.populateEventPropsWithStatus(l,r);return c.createElement("div",{style:{flexGrow:1}},c.createElement("input",{...y,ref:m,className:g}),p&&!o&&c.createElement("span",null,p))}}f.defaultProps={className:""}},21662:(Y,T,e)=>{"use strict";e.d(T,{B:()=>s,Z:()=>i});var t=e(66111),n=e(44800),c=e(39904);const s=f=>{const u=f.selectProps.menuIsOpen;return t.createElement(n.c.IndicatorsContainer,{...f},t.createElement(c.J,{name:u?"angle-up":"angle-down",style:{marginTop:"7px"}}))},i=s},76603:(Y,T,e)=>{"use strict";e.d(T,{P:()=>c,Z:()=>s});var t=e(66111),n=e(44800);const c=i=>{const{children:f}=i;return t.createElement(n.c.NoOptionsMessage,{...i},t.createElement("div",{className:"gf-form-select-box__desc-option"},t.createElement("div",{className:"gf-form-select-box__desc-option__body"},f)))},s=c},29418:(Y,T,e)=>{"use strict";e.d(T,{qb:()=>D,Ph:()=>P});var t=e(9085),n=e.n(t),c=e(66111),s=e(44800),i=e(58839),f=e(51306),u=e(81658),r=e(72648),d=e(68226),o=e(874),m=e(24901),l=e(54897),p=e(61860),g=e(21662),y=e(76603),v=e(39904);const E=b=>{const{children:R,isSelected:S,data:O}=b;return c.createElement(s.c.Option,{...b},c.createElement("div",{className:"gf-form-select-box__desc-option"},O.imgUrl&&c.createElement("img",{className:"gf-form-select-box__desc-option__img",src:O.imgUrl,alt:""}),c.createElement("div",{className:"gf-form-select-box__desc-option__body"},c.createElement("div",null,R),O.description&&c.createElement("div",{className:"gf-form-select-box__desc-option__desc"},O.description)),S&&c.createElement(v.J,{name:"check","aria-hidden":"true"})))},h=null,C=b=>c.createElement(s.c.MenuList,{...b},c.createElement(d.$,{autoHide:!1,autoHeightMax:"inherit"},b.children)),a=class extends c.PureComponent{render(){const{defaultValue:b,getOptionLabel:R,getOptionValue:S,onChange:O,options:U,placeholder:I,width:F,value:w,className:K,isDisabled:L,isLoading:V,isSearchable:H,isClearable:j,backspaceRemovesValue:A,isMulti:_,autoFocus:k,openMenuOnFocus:Q,onBlur:re,maxMenuHeight:Z,noOptionsMessage:oe,isOpen:G,components:le,tooltipContent:ge,tabSelectsValue:ne,onCloseMenu:ue,onOpenMenu:te,allowCustomValue:me,formatCreateLabel:q,"aria-label":se}=this.props;let ae="";F&&(ae="width-"+F);let pe=i.ZP;const de={};me&&(pe=u.Z,de.formatCreateLabel=q??(st=>st));const Me=n()("gf-form-input","gf-form-input--form-dropdown",ae,K),Ke={...a.defaultProps.components,...le};return c.createElement(x,{onCloseMenu:ue,onOpenMenu:te,tooltipContent:ge,isOpen:G},(st,Ie)=>c.createElement(pe,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Me,components:Ke,defaultValue:b,value:w,getOptionLabel:R,getOptionValue:S,menuShouldScrollIntoView:!1,isSearchable:H,onChange:O,options:U,placeholder:I||"Choose",styles:(0,l.Z)(this.context),isDisabled:L,isLoading:V,isClearable:j,autoFocus:k,onBlur:re,openMenuOnFocus:Q,maxMenuHeight:Z,noOptionsMessage:oe,isMulti:_,backspaceRemovesValue:A,menuIsOpen:G,onMenuOpen:st,onMenuClose:Ie,tabSelectsValue:ne,"aria-label":se,...de}))}};let P=a;P.contextType=r.Ni,P.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:E,SingleValue:m.P,IndicatorsContainer:g.Z,MenuList:C,Group:o.n}};class D extends c.PureComponent{render(){const{defaultValue:R,getOptionLabel:S,getOptionValue:O,onChange:U,placeholder:I,width:F,value:w,className:K,loadOptions:L,defaultOptions:V,isLoading:H,loadingMessage:j,noOptionsMessage:A,isDisabled:_,isSearchable:k,isClearable:Q,backspaceRemovesValue:re,autoFocus:Z,onBlur:oe,openMenuOnFocus:G,maxMenuHeight:le,isMulti:ge,tooltipContent:ne,onCloseMenu:ue,onOpenMenu:te,isOpen:me}=this.props;let q="";F&&(q="width-"+F);const se=n()("gf-form-input","gf-form-input--form-dropdown",q,K);return c.createElement(x,{onCloseMenu:ue,onOpenMenu:te,tooltipContent:ne,isOpen:me},(ae,pe)=>c.createElement(f.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:se,components:{Option:E,SingleValue:m.P,IndicatorsContainer:g.Z,NoOptionsMessage:y.Z},defaultValue:R,value:w,getOptionLabel:S,getOptionValue:O,menuShouldScrollIntoView:!1,onChange:U,loadOptions:L,isLoading:H,defaultOptions:V,placeholder:I||"Choose",styles:(0,l.Z)(this.context),loadingMessage:j,noOptionsMessage:A,isDisabled:_,isSearchable:k,isClearable:Q,autoFocus:Z,onBlur:oe,openMenuOnFocus:G,maxMenuHeight:le,isMulti:ge,backspaceRemovesValue:re}))}}D.contextType=r.Ni,D.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300};class x extends c.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:R}=this.props;R&&R(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:R}=this.props;R&&R(),this.setState({isOpenInternal:!1})}}render(){const{children:R,isOpen:S,tooltipContent:O}=this.props,{isOpenInternal:U}=this.state;let I;return(U||S)&&(I=!1),O?c.createElement(p.u,{show:I,content:O,placement:"bottom"},c.createElement("div",null,R(this.onOpenMenu,this.onCloseMenu))):c.createElement("div",null,R(this.onOpenMenu,this.onCloseMenu))}}const M=null},18979:(Y,T,e)=>{"use strict";e.d(T,{r:()=>f});var t=e(82897),n=e.n(t),c=e(66111),s=e(39904),i=e(61860);class f extends c.PureComponent{constructor(){super(...arguments),this.state={id:(0,t.uniqueId)()},this.internalOnChange=r=>{r.stopPropagation(),this.props.onChange(r)}}render(){const{labelClass:r="",switchClass:d="",label:o,checked:m,disabled:l,transparent:p,className:g,tooltip:y,tooltipPlacement:v}=this.props,E=this.state.id,h=`gf-form-label ${r} ${p?"gf-form-label--transparent":""} pointer`,C=`gf-form-switch ${d} ${p?"gf-form-switch--transparent":""}`;return c.createElement("div",{className:"gf-form-switch-container-react"},c.createElement("label",{htmlFor:E,className:`gf-form gf-form-switch-container ${g||""}`},o&&c.createElement("div",{className:h},o,y&&c.createElement(i.u,{placement:v||"auto",content:y,theme:"info"},c.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},c.createElement(s.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))),c.createElement("div",{className:C},c.createElement("input",{disabled:l,id:E,type:"checkbox",checked:m,onChange:this.internalOnChange}),c.createElement("span",{className:"gf-form-switch__slider"}))))}}},19825:(Y,T,e)=>{"use strict";e.d(T,{D:()=>i});var t=e(9892),n=e(66111),c=e(72648);const s=f=>({legend:t.css`
      font-size: ${f.typography.h3.fontSize};
      font-weight: ${f.typography.fontWeightRegular};
      margin: 0 0 ${f.spacing(2)} 0;
    `}),i=({children:f,className:u,...r})=>{const d=(0,c.wW)(s);return n.createElement("legend",{className:(0,t.cx)(d.legend,u),...r},f)}},2594:(Y,T,e)=>{"use strict";e.d(T,{S:()=>l});var t=e(9892),n=e(82897),c=e(66111),s=e(84559),i=e(72648),f=e(39904),u=e(7804),r=e(85419),d=e(73267);const o=c.forwardRef(({children:g,active:y=!1,disabled:v=!1,size:E="md",onChange:h,onClick:C,id:a,name:P=void 0,description:D,fullWidth:x,"aria-label":M},b)=>{const R=(0,i.l4)(),S=m(R,E,x);return c.createElement(c.Fragment,null,c.createElement("input",{type:"radio",className:S.radio,onChange:h,onClick:C,disabled:v,id:a,checked:y,name:P,"aria-label":M,ref:b}),c.createElement("label",{className:S.radioLabel,htmlFor:a,title:D},g))});o.displayName="RadioButton";const m=(0,u.B)((g,y,v)=>{const{fontSize:E,height:h,padding:C}=(0,d.iL)(y,g),a=g.colors.text.secondary,P=g.colors.text.primary,D=h*g.spacing.gridSize-4-2;return{radio:t.css`
      position: absolute;
      opacity: 0;
      z-index: -1000;

      &:checked + label {
        color: ${g.colors.text.primary};
        font-weight: ${g.typography.fontWeightMedium};
        background: ${g.colors.action.selected};
        z-index: 3;
      }

      &:focus + label,
      &:focus-visible + label {
        ${(0,r.getFocusStyles)(g)};
      }

      &:focus:not(:focus-visible) + label {
        ${(0,r.getMouseFocusStyles)(g)}
      }

      &:disabled + label {
        color: ${g.colors.text.disabled};
        cursor: not-allowed;
      }
    `,radioLabel:t.css`
      display: inline-block;
      position: relative;
      font-size: ${E};
      height: ${D}px;
      // Deduct border from line-height for perfect vertical centering on windows and linux
      line-height: ${D}px;
      color: ${a};
      padding: ${g.spacing(0,C)};
      border-radius: ${g.shape.borderRadius()};
      background: ${g.colors.background.primary};
      cursor: pointer;
      z-index: 1;
      flex: ${v?"1 0 0":"none"};
      text-align: center;
      user-select: none;
      white-space: nowrap;

      &:hover {
        color: ${P};
      }
    `}});function l({options:g,value:y,onChange:v,onClick:E,disabled:h,disabledOptions:C,size:a="md",id:P,className:D,fullWidth:x=!1,autoFocus:M=!1}){const b=(0,c.useCallback)(F=>()=>{v&&v(F.value)},[v]),R=(0,c.useCallback)(F=>()=>{E&&E(F.value)},[E]),S=P??(0,n.uniqueId)("radiogroup-"),O=(0,c.useRef)(S),U=(0,i.wW)(p),I=(0,c.useRef)(null);return(0,c.useEffect)(()=>{M&&I.current&&I.current.focus()},[M]),c.createElement("div",{className:(0,t.cx)(U.radioGroup,x&&U.fullWidth,D)},g.map((F,w)=>{const K=C&&F.value&&C.includes(F.value),L=F.icon?(0,s.iJ)(F.icon):void 0;return c.createElement(o,{size:a,disabled:K||h,active:y===F.value,key:`o.label-${w}`,"aria-label":F.ariaLabel,onChange:b(F),onClick:R(F),id:`option-${F.value}-${S}`,name:O.current,description:F.description,fullWidth:x,ref:y===F.value?I:void 0},L&&c.createElement(f.J,{name:L,className:U.icon}),F.imgUrl&&c.createElement("img",{src:F.imgUrl,alt:F.label,className:U.img}),F.label," ",F.component?c.createElement(F.component,null):null)}))}l.displayName="RadioButtonGroup";const p=g=>({radioGroup:(0,t.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${g.components.input.borderColor}`,borderRadius:g.shape.borderRadius(),padding:"2px"}),fullWidth:(0,t.css)({display:"flex"}),icon:t.css`
      margin-right: 6px;
    `,img:t.css`
      width: ${g.spacing(2)};
      height: ${g.spacing(2)};
      margin-right: ${g.spacing(1)};
    `})},29395:(Y,T,e)=>{"use strict";e.d(T,{x:()=>u});var t=e(9892),n=e(82897),c=e(66111),s=e(72648);const i=({id:d,name:o,label:m,checked:l,disabled:p,description:g,onChange:y})=>{const v=(0,s.wW)(f);return c.createElement("label",{title:g,className:v.label},c.createElement("input",{id:d,name:o,type:"radio",checked:l,disabled:p,className:v.input,onChange:()=>y&&y(d)}),m)},f=d=>({input:t.css`
    position: relative;
    appearance: none;
    outline: none;
    background-color: ${d.colors.background.canvas};
    margin: 0;
    width: ${d.spacing(2)} !important; /* TODO How to overcome this? Checkbox does the same 🙁 */
    height: ${d.spacing(2)};
    border: 1px solid ${d.colors.border.medium};
    border-radius: 50%;
    margin: 3px 0; /* Space for box-shadow when focused */

    :checked {
      background-color: ${d.v1.palette.white};
      border: 5px solid ${d.colors.primary.main};
    }

    :disabled {
      background-color: ${d.colors.action.disabledBackground} !important;
      border-color: ${d.colors.border.weak};
    }

    :disabled:checked {
      border: 1px solid ${d.colors.border.weak};
    }

    :disabled:checked::after {
      content: '';
      width: 6px;
      height: 6px;
      background-color: ${d.colors.text.disabled};
      border-radius: 50%;
      display: inline-block;
      position: absolute;
      top: 4px;
      left: 4px;
    }

    :focus {
      outline: none !important;
      box-shadow: 0 0 0 1px ${d.colors.background.canvas}, 0 0 0 3px ${d.colors.primary.main};
    }
  `,label:t.css`
    font-size: ${d.typography.fontSize};
    line-height: 22px; /* 16px for the radio button and 6px for the focus shadow */
    display: grid;
    grid-template-columns: ${d.spacing(2)} auto;
    gap: ${d.spacing(1)};
  `});function u({name:d,id:o,options:m,value:l,onChange:p,className:g,disabled:y,disabledOptions:v=[]}){const E=(0,s.wW)(r),h=o??(0,n.uniqueId)("radiogroup-list-");return c.createElement("div",{id:o,className:(0,t.cx)(E.container,g),role:"radiogroup"},m.map((C,a)=>{const P=`${h}-${a}`,D=l&&l===C.value,x=y||v.some(b=>b===C.value),M=()=>p&&C.value&&p(C.value);return c.createElement(i,{key:P,id:P,name:d,label:C.label,description:C.description,checked:D,disabled:x,onChange:M})}))}const r=d=>({container:t.css`
    display: grid;
    gap: ${d.spacing(1)};
  `})},73267:(Y,T,e)=>{"use strict";e.d(T,{GL:()=>c,RK:()=>s,ht:()=>f,iL:()=>r,nf:()=>i});var t=e(9892),n=e(85419);const c=d=>t.css`
  &:focus {
    ${(0,n.focusCss)(d)}
  }
`,s=(d,o=!1)=>{const m=o?d.colors.error.border:d.components.input.borderColor,l=o?d.colors.error.shade:d.components.input.borderHover,p=d.components.input.background,g=d.components.input.text,y=d.isDark?"#2e2f35":"#bab4ca";return(0,t.cx)(i(d),t.css`
      background: ${p};
      line-height: ${d.typography.body.lineHeight};
      font-size: ${d.typography.size.md};
      color: ${g};
      border: 1px solid ${m};

      &:-webkit-autofill,
      &:-webkit-autofill:hover {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${p}!important;
        -webkit-text-fill-color: ${g} !important;
        border-color: ${y};
      }

      &:-webkit-autofill:focus {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: 0 0 0 2px ${d.colors.background.primary}, 0 0 0px 4px ${d.colors.primary.main},
          inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${p}!important;
        -webkit-text-fill-color: ${g} !important;
      }

      &:hover {
        border-color: ${l};
      }

      &:focus {
        outline: none;
      }

      &:disabled {
        background-color: ${d.colors.action.disabledBackground};
        color: ${d.colors.action.disabledText};
        border: 1px solid ${d.colors.action.disabledBackground};

        &:hover {
          border-color: ${m};
        }
      }

      &::placeholder {
        color: ${d.colors.text.disabled};
        opacity: 1;
      }
    `)},i=d=>t.css`
    padding: ${d.spacing(0,1,0,1)};
  `,f=()=>({sm:t.css`
      width: ${u("sm")};
    `,md:t.css`
      width: ${u("md")};
    `,lg:t.css`
      width: ${u("lg")};
    `,auto:t.css`
      width: ${u("auto")};
    `}),u=d=>{switch(d){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function r(d,o){switch(d){case"sm":return{padding:1,fontSize:o.typography.size.sm,height:o.components.height.sm};case"lg":return{padding:3,fontSize:o.typography.size.lg,height:o.components.height.lg};case"md":default:return{padding:2,fontSize:o.typography.size.md,height:o.components.height.md}}}},69823:(Y,T,e)=>{"use strict";e.d(T,{a:()=>g});var t=e(24259),n=e.n(t),c=e(66111),s=e(2703),i=e(18111),f=e(69098),u=e(4176),r=e(31403),d=e(53768),o=e(92103);const m={mode:f.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function l(y,v,E){const h=E!=null,C=Math.min(y*.15/1.5,20),a=C*1.5,P=h?v-a:v,D=Math.min(P,y);return{showLabel:h,gaugeHeight:D,titleFontSize:C}}function p(y,v,E,h){if(v.color?.mode!==d.S.Thresholds)return[{value:v.min??i.Hx,color:E.color??d.R}];const C=v.thresholds??m,a=C.mode===f.H.Percentage,P=C.steps;let D=v.min??i.Hx,x=v.max??i.Z3;a&&(D=0,x=100);const M=(0,o.m1)(D,P),b=(0,o.m1)(x,P),R=[{value:+D.toFixed(y),color:h.visualization.getColorByName(M.color)}];let S=!0;for(let O=0;O<P.length;O++){const U=P[O];if(S){M===U&&(S=!1);continue}const I=P[O-1];if(R.push({value:U.value,color:h.visualization.getColorByName(I.color)}),U===b)break}return R.push({value:+x.toFixed(y),color:h.visualization.getColorByName(b.color)}),R}class g extends c.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:v,value:E,height:h,onClick:C,text:a,theme:P}=this.props,D=l(v,h,E.title),x=c.createElement("div",{style:{height:`${D.gaugeHeight}px`,width:"100%"},ref:M=>this.canvasElement=M});return c.createElement(c.Fragment,null,C?c.createElement("button",{className:(0,r.gN)(P),type:"button",onClick:C},x):x,D.showLabel&&c.createElement("div",{style:{textAlign:"center",fontSize:a?.titleSize??D.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:"100%",top:"-4px",cursor:"default"}},E.title))}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:v,showThresholdLabels:E,showThresholdMarkers:h,width:C,height:a,theme:P,value:D}=this.props,x=l(C,a,D.title),M=Math.min(C,x.gaugeHeight),b=P.colors.background.secondary,R=E?1.5:1,S=Math.min(M/5.5,40)/R,O=S/5,U=(0,s.zc)(D),F=Math.min(C,M*1.3)*.9-((S+(h?O:0)+(E?10:0))*2+10),w=this.props.text?.valueSize??(0,u.MX)(U,F,M,1,S*1.7),K=Math.max(w/2.5,12);let L=v.min??i.Hx,V=v.max??i.Z3,H=D.numeric;v.thresholds?.mode===f.H.Percentage&&(L=0,V=100,D.percent===void 0?H=(H-L)/(V-L)*100:H=D.percent*100);const j=v.decimals===void 0?2:v.decimals;h&&(L=+L.toFixed(j),V=+V.toFixed(j));const A={series:{gauges:{gauge:{min:L,max:V,neutralValue:v.custom?.neutral,background:{color:b},border:{color:null},shadow:{show:!1},width:S},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:p(j,v,D,P),label:{show:E,margin:O+1,font:{size:K}},show:h,width:O},value:{color:D.color,formatter:()=>U,font:{size:w,family:P.typography.fontFamily}},show:!0}}},_={data:[[0,H]],label:D.title};try{this.canvasElement&&n().plot(this.canvasElement,[_],A)}catch(k){console.error("Gauge rendering error",k,A,D)}}render(){return c.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}g.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:m}}},87691:(Y,T,e)=>{"use strict";e.d(T,{k:()=>v});var t=e(24259),n=e.n(t),c=e(82897),s=e(66111),i=e(61113),f=e(40538),u=e(24505),r=e(65987),d=e(50800),o=e(31438);const m=({dimensions:h,activeDimensions:C,pos:a,timeZone:P})=>{let D=null;if(C.xAxis===null)return null;C.yAxis&&(D=C.yAxis[0]);const x=C.xAxis[1]?(0,i.jC)(h.xAxis,C.xAxis[0],C.xAxis[1]):a.x,M=(0,o.wu)(h.yAxis.columns,h.xAxis.columns,x,P),b=M.time,R=M.results.map((S,O)=>({color:S.color,label:S.label,value:S.value,isActive:D===O}));return s.createElement(d.c,{series:R,timestamp:b})};m.displayName="MultiModeGraphTooltip";var l=e(2703),p=e(30471);const g=({dimensions:h,activeDimensions:C,timeZone:a})=>{if(C.yAxis===null||C.yAxis[1]===void 0||C.xAxis===null||C.xAxis[1]===void 0)return null;const P=(0,i.jC)(h.xAxis,C.xAxis[0],C.xAxis[1]),D=(0,i.$q)(h.xAxis,C.xAxis[0]),x=D.display?(0,l.zc)(D.display(P)):P,M=(0,i.$q)(h.yAxis,C.yAxis[0]),b=(0,i.jC)(h.yAxis,C.yAxis[0],C.yAxis[1]),R=M.display,S=R(b);return s.createElement(d.c,{series:[{color:S.color,label:(0,p.CZ)(M),value:(0,l.zc)(S)}],timestamp:x})};g.displayName="SingleModeGraphTooltip";const y=({mode:h=f.f3.Single,dimensions:C,activeDimensions:a,pos:P,timeZone:D})=>!a||!a.xAxis?null:h==="single"?s.createElement(g,{dimensions:C,activeDimensions:a,timeZone:D}):s.createElement(m,{dimensions:C,activeDimensions:a,pos:P,timeZone:D});y.displayName="GraphTooltip";class v extends s.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.onPlotSelected=(C,a)=>{const{onHorizontalRegionSelected:P}=this.props;P&&P(a.xaxis.from,a.xaxis.to)},this.onPlotHover=(C,a,P)=>{this.setState({isTooltipVisible:!0,activeItem:P,pos:a})},this.onPlotClick=(C,a,P)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:P,contextPos:a})},this.renderTooltip=()=>{const{children:C,series:a,timeZone:P}=this.props,{pos:D,activeItem:x,isTooltipVisible:M}=this.state;let b=null;if(!M||!D||a.length===0||(s.Children.forEach(C,L=>{if(b)return;(L&&L.type&&(L.type.displayName||L.type.name))===u.I.displayName&&(b=L)}),!b))return null;const R=b.props,S=R.mode||"single";if(!x&&S==="single")return null;const O=R.tooltipComponent||y,U=x?x.series.seriesIndex:0,I=x?x.dataIndex:void 0,F={xAxis:[U,I],yAxis:x?[x.series.seriesIndex,x.dataIndex]:null},w={dimensions:{xAxis:(0,i.q2)("xAxis",a.map(L=>L.timeField)),yAxis:(0,i.q2)("yAxis",a.map(L=>L.valueField))},activeDimensions:F,pos:D,mode:R.mode||f.f3.Single,timeZone:P},K=s.createElement(O,{...w});return s.cloneElement(b,{content:K,position:{x:D.pageX,y:D.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:C}=this.props,{contextPos:a,contextItem:P,isContextVisible:D}=this.state;if(!D||!a||!P||C.length===0)return null;const x=P?P.series.seriesIndex:0,M=P?P.dataIndex:void 0,b={xAxis:[x,M],yAxis:P?[P.series.seriesIndex,P.dataIndex]:null},R={xAxis:(0,i.q2)("xAxis",C.map(I=>I.timeField)),yAxis:(0,i.q2)("yAxis",C.map(I=>I.valueField))},S=()=>this.setState({isContextVisible:!1}),O=()=>({datapoint:P.datapoint,dataIndex:P.dataIndex,series:P.series,seriesIndex:P.series.seriesIndex,pageX:a.pageX,pageY:a.pageY}),U={x:a.pageX,y:a.pageY,onClose:S,getContextMenuSource:O,timeZone:this.props.timeZone,dimensions:R,contextDimensions:b};return s.createElement(r.w,{...U})},this.getBarWidth=()=>{const{series:C}=this.props;return Math.min(...C.map(a=>a.timeStep))}}componentDidUpdate(C,a){C!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=n()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(C){return C.length===0?[{show:!0,min:-1,max:1}]:(0,c.uniqBy)(C.map(a=>{const P=a.yAxis?a.yAxis.index:1,D=a.yAxis&&a.yAxis.min&&!isNaN(a.yAxis.min)?a.yAxis.min:null,x=a.yAxis&&a.yAxis.tickDecimals&&!isNaN(a.yAxis.tickDecimals)?a.yAxis.tickDecimals:null;return{show:!0,index:P,position:P===1?"left":"right",min:D,tickDecimals:x}}),a=>a.index)}draw(){if(this.element===null)return;const{width:C,series:a,timeRange:P,showLines:D,showBars:x,showPoints:M,isStacked:b,lineWidth:R,timeZone:S,onHorizontalRegionSelected:O}=this.props;if(!C)return;const U=C/100,I=P.from.valueOf(),F=P.to.valueOf(),w=this.getYAxes(a),K={legend:{show:!1},series:{stack:b,lines:{show:D,lineWidth:R,zero:!1},points:{show:M,fill:1,fillColor:!1,radius:2},bars:{show:x,fill:1,barWidth:x?this.getBarWidth()/1.5:1,zero:!1,lineWidth:R},shadowSize:0},xaxis:{timezone:S,show:!0,mode:"time",min:I,max:F,label:"Datetime",ticks:U,timeformat:(0,o.mc)(U,I,F),tickFormatter:o.sV},yaxes:w,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:O?"x":null,color:"#666"},crosshair:{mode:"x"}};try{n().plot(this.element,a.filter(L=>L.isVisible),K)}catch(L){throw console.error("Graph rendering error",L,K,a),new Error("Error rendering panel")}}render(){const{ariaLabel:C,height:a,width:P,series:D}=this.props,x=D.length===0,M=this.renderTooltip(),b=this.renderContextMenu();return s.createElement("div",{className:"graph-panel","aria-label":C},s.createElement("div",{className:"graph-panel__chart",ref:R=>this.element=R,style:{height:a,width:P},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),x&&s.createElement("div",{className:"datapoints-warning"},"No data"),M,b)}}v.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1};const E=null},65987:(Y,T,e)=>{"use strict";e.d(T,{b:()=>p,w:()=>l});var t=e(9892),n=e(66111),c=e(61113),s=e(77258),i=e(72648),f=e(30909),u=e(72777),r=e(52081),d=e(14391),o=e(42044),m=e(6264);const l=({getContextMenuSource:y,timeZone:v,itemsGroup:E,dimensions:h,contextDimensions:C,...a})=>{const P=y(),D=E?E.map(b=>({...b,items:b.items?.filter(R=>R.label)})):[],x=()=>{if(!P)return null;let b;if(h?.yAxis&&C?.yAxis?.[1]){const S=(0,c.jC)(h.yAxis,C.yAxis[0],C.yAxis[1]),O=P.series.valueField.display;b=O(S)}const R=(0,s.dq)(P.datapoint[0],{defaultWithMS:P.series.hasMsResolution,timeZone:v});return n.createElement(p,{timestamp:R,seriesColor:P.series.color,displayName:P.series.alias||P.series.label,displayValue:b})},M=()=>D?.map((b,R)=>n.createElement(d.k,{key:`${b.label}${R}`,label:b.label},(b.items||[]).map(S=>n.createElement(o.s,{key:`${S.label}`,url:S.url,label:S.label,target:S.target,icon:S.icon,active:S.active,onClick:S.onClick}))));return n.createElement(f.x,{...a,renderMenuItems:M,renderHeader:x})},p=({timestamp:y,seriesColor:v,displayName:E,displayValue:h})=>{const C=(0,i.wW)(g);return n.createElement("div",{className:C.wrapper},n.createElement("strong",null,y),n.createElement(r.Lh,null,n.createElement("div",null,n.createElement(m.F,{color:v}),n.createElement("span",{className:C.displayName},E)),h&&n.createElement(u.W,{value:h})))};function g(y){return{wrapper:t.css`
      padding: ${y.spacing(.5)} ${y.spacing(1)};
      font-size: ${y.typography.size.sm};
      z-index: ${y.zIndex.tooltip};
    `,displayName:t.css`
      white-space: nowrap;
      padding-left: ${y.spacing(.5)};
    `}}},56506:(Y,T,e)=>{"use strict";e.d(T,{U:()=>s});var t=e(82897),n=e.n(t),c=e(66111);class s extends c.Component{constructor(f){super(f),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:f.series}}componentDidUpdate(f){const{series:u}=this.props;(0,t.isEqual)(f.series,u)||this.setState({hiddenSeries:[],toggledSeries:u})}onSeriesToggle(f,u){const{series:r,onHiddenSeriesChanged:d}=this.props,{hiddenSeries:o}=this.state;if(u.ctrlKey||u.metaKey||u.shiftKey){const g=o.indexOf(f)>-1?o.filter(v=>v!==f):o.concat([f]),y=r.map(v=>({...v,isVisible:g.indexOf(v.label)===-1}));this.setState({hiddenSeries:g,toggledSeries:y},()=>d?d(g):void 0);return}const m=r.map(g=>g.label),l=o.length+1===m.length?[]:(0,t.difference)(m,[f]),p=r.map(g=>({...g,isVisible:l.indexOf(g.label)===-1}));this.setState({hiddenSeries:l,toggledSeries:p},()=>d?d(l):void 0)}render(){const{children:f}=this.props,{toggledSeries:u}=this.state;return f({onSeriesToggle:this.onSeriesToggle,toggledSeries:u})}}},29781:(Y,T,e)=>{"use strict";e.d(T,{U:()=>d});var t=e(9892),n=e(66111),c=e(7804),s=e(68226),i=e(78056),f=e(87691);const u=(0,c.B)(({placement:o})=>({wrapper:t.css`
    display: flex;
    flex-direction: ${o==="bottom"?"column":"row"};
  `,graphContainer:t.css`
    min-height: 65%;
    flex-grow: 1;
  `,legendContainer:t.css`
    padding: 10px 0;
    max-height: ${o==="bottom"?"35%":"none"};
  `})),r=(o,m=!1,l=!1)=>{const p=o.reduce((y,v)=>y+(v[1]||0),0)===0,g=!o.reduce((y,v)=>y&&v[1]!==null,!0);return m&&g||l&&p},d=o=>{const{series:m,timeRange:l,width:p,height:g,showBars:y,showLines:v,showPoints:E,sortLegendBy:h,sortLegendDesc:C,legendDisplayMode:a,legendVisibility:P,placement:D,onSeriesToggle:x,onToggleSort:M,hideEmpty:b,hideZero:R,isStacked:S,lineWidth:O,onHorizontalRegionSelected:U,timeZone:I,children:F,ariaLabel:w}=o,{graphContainer:K,wrapper:L,legendContainer:V}=u(o),H=m.reduce((j,A)=>r(A.data,b,R)?j:j.concat([{label:A.label,color:A.color||"",disabled:!A.isVisible,yAxis:A.yAxis.index,getDisplayValues:()=>A.info||[]}]),[]);return n.createElement("div",{className:L,"aria-label":w},n.createElement("div",{className:K},n.createElement(f.k,{series:m,timeRange:l,timeZone:I,showLines:v,showPoints:E,showBars:y,width:p,height:g,isStacked:S,lineWidth:O,onHorizontalRegionSelected:U},F)),P&&n.createElement("div",{className:V},n.createElement(s.$,{hideHorizontalTrack:!0},n.createElement(i.l,{items:H,displayMode:a,placement:D,sortBy:h,sortDesc:C,onLabelClick:(j,A)=>{x&&x(j.label,A)},onToggleSort:M}))))}},31438:(Y,T,e)=>{"use strict";e.d(T,{mc:()=>r,sV:()=>u,wu:()=>f});var t=e(2703),n=e(30471),c=e(77258),s=e(82410);const i=(d,o)=>{let m=0,l=d.values.length-1,p;for(;;){if(m>l)return Math.max(l,0);p=Math.floor((m+l)/2);const g=d.values[p];if(g===o)return p;g&&g<o?m=p+1:l=p-1}},f=(d,o,m,l)=>{let p,g,y,v,E;const h=[];let C,a;for(p=0;p<d.length;p++){g=d[p];const P=o[p];y=i(P,m),v=m-P.values[y],E=P.values[y],(C===void 0||v>=0&&(v<C||C<0)||v<0&&v>C)&&(C=v,a=P.display?(0,t.zc)(P.display(E)):E);const D=g.display(g.values[y]);h.push({value:(0,t.zc)(D),datapointIndex:y,seriesIndex:p,color:D.color,label:(0,n.CZ)(g),time:P.display?(0,t.zc)(P.display(E)):E})}return{results:h,time:a}},u=(d,o)=>(0,c.dq)(d,{format:o?.options?.timeformat,timeZone:o?.options?.timezone}),r=(d,o,m)=>{if(o&&m&&d){const l=m-o,p=l/d/1e3,g=86400010,y=31536e6;return p<=10?s.U6.interval.millisecond:p<=45?s.U6.interval.second:l<=g?s.U6.interval.minute:p<=8e4?s.U6.interval.hour:l<=y?s.U6.interval.day:p<=31536e3?s.U6.interval.month:s.U6.interval.year}return s.U6.interval.minute}},72269:(Y,T,e)=>{"use strict";e.d(T,{d:()=>y,j:()=>p});var t=e(66111),n=e(53376),c=e(98803),s=e(50035),i=e(90748),f=e(23588),u=e(4063),r=e(60325),d=e(729),o=e(3200),m=e(2445),l=e(86979);const p="__fixed";function g(v,E,h=[]){for(const C of h)if(typeof C=="function"){if(!C(v,E))return!1}else if(E[C]!==v[C])return!1;return!0}class y extends t.Component{constructor(E){super(E),this.panelContext={},this.subscription=new n.w0,this.getTimeRange=()=>this.props.timeRange;let h=this.prepState(E);h.alignedData=h.config.prepData([h.alignedFrame]),this.state=h,this.plotInstance=t.createRef()}prepState(E,h=!0){let C=null;const{frames:a,fields:P,preparePlotFrame:D}=E,M=(D||l.R)(a,P||{x:s.Ls.get(i.mi.firstTimeField).get({}),y:s.Ls.get(i.mi.numeric).get({})},E.timeRange);if((0,m.Zp)("GraphNG",!1,"data aligned",M),M){let b=this.state?.config;h&&(b=E.prepConfig(M,this.props.frames,this.getTimeRange),(0,m.Zp)("GraphNG",!1,"config prepared",b)),C={alignedFrame:M,config:b},(0,m.Zp)("GraphNG",!1,"data prepared",C.alignedData)}return C}handleCursorUpdate(E){const h=E.payload?.point?.time,C=this.plotInstance.current;if(C&&h){const a=C.valToPos(h,"x");let P;if(a&&(P=(0,m.ah)(C,C.posToIdx(a))),!P||!a)return;C.setCursor({left:a,top:P})}}componentDidMount(){this.panelContext=this.context;const{eventBus:E}=this.panelContext;this.subscription.add(E.getStream(f.es).pipe((0,c.p)(50)).subscribe({next:h=>{E!==h.origin&&this.handleCursorUpdate(h)}})),this.subscription.add(E.getStream(u.IA).pipe((0,c.p)(50)).subscribe({next:h=>this.handleCursorUpdate(h)})),this.subscription.add(E.getStream(f.xH).pipe((0,c.p)(50)).subscribe({next:()=>{const h=this.plotInstance?.current;h&&h.setCursor({left:-10,top:-10})}}))}componentDidUpdate(E){const{frames:h,structureRev:C,timeZone:a,propsToDiff:P}=this.props,D=!g(E,this.props,P);if(h!==E.frames||D||a!==E.timeZone){let x=this.prepState(this.props,!1);x&&((this.state.config===void 0||a!==E.timeZone||C!==E.structureRev||!C||D)&&(x.config=this.props.prepConfig(x.alignedFrame,this.props.frames,this.getTimeRange),(0,m.Zp)("GraphNG",!1,"config recreated",x.config)),x.alignedData=x.config.prepData([x.alignedFrame]),this.setState(x))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:E,height:h,children:C,timeRange:a,renderLegend:P}=this.props,{config:D,alignedFrame:x,alignedData:M}=this.state;return D?t.createElement(d.AY,{width:E,height:h,legend:P(D)},(b,R)=>t.createElement(o.N,{config:D,data:M,width:b,height:R,timeRange:a,plotRef:S=>this.plotInstance.current=S},C?C(D,x):null)):null}}y.contextType=r.bb},16566:(Y,T,e)=>{"use strict";e.d(T,{z:()=>c});var t=e(66111);const n=t.createContext({}),c=()=>{const{data:s,dimFields:i,mapSeriesIndexToDataFrameFieldIndex:f}=(0,t.useContext)(n),u=(0,t.useCallback)(()=>{const r=i.x;let d=null;for(let o=0;o<s.fields.length;o++)if(r(s.fields[o],s,[s])){d=s.fields[o];break}return d},[s,i]);return{dimFields:i,mapSeriesIndexToDataFrameFieldIndex:f,getXAxisField:u,alignedData:s}}},45778:(Y,T,e)=>{"use strict";e.d(T,{w:()=>c});var t=e(99098);const n={threshold:(i,f,u)=>i+u,midpoint:(i,f,u)=>(i+f)/2,plusone:(i,f,u)=>i+1};function c(i){if(i.frame.length===0)return i.frame;let f=!0,{frame:u,refFieldName:r,refFieldPseudoMax:d,refFieldPseudoMin:o,insertMode:m}=i;m||(m=n.threshold);const l=u.fields.find(y=>r!=null?y.name===r:y.type===t.fS.time);if(l==null)return u;l.state={...l.state,nullThresholdApplied:!0};const p=u.fields.map(y=>y.config.custom?.insertNulls??l.config.interval??null),g=new Set(p);if(g.delete(null),g.size===0)return u;if(g.size===1){const y=g.values().next().value;if(y<=0)return u;const v=l.values,E=u.fields.map(C=>C.values),h=s(v,E,y,o,d,m,f);return h===E?u:{...u,length:h[0].length,fields:u.fields.map((C,a)=>({...C,values:h[a]}))}}return u}function s(i,f,u,r=null,d=null,o,m){const l=i.length,p=[];if(r!=null&&r<i[0]){let E=Math.ceil((i[0]-r)/u),h=i[0]-E*u;for(;h<i[0];)p.push(o(h-u,h,u)),h+=u}p.push(i[0]);let g=i[0];for(let E=1;E<l;E++){const h=i[E];for(;h-g>u&&(p.push(o(g,h,u)),g+=u,!!m););p.push(h),g=h}if(d!=null&&d>g)for(;g+u<d;)p.push(o(g,d,u)),g+=u;const y=p.length;if(y===l)return f;const v=[];for(let E of f){let h;if(E!==i){h=Array(y);for(let C=0,a=0;C<y;C++)h[C]=i[a]===p[C]?E[a++]:null}else h=p;v.push(h)}return v}},45389:(Y,T,e)=>{"use strict";e.d(T,{I:()=>t});function t(n){return{...n,fields:n.fields.map(c=>{const s=+c.config?.noValue;if(Number.isNaN(s))return c;{const i=c.values.slice();for(let f=0;f<i.length;f++)i[f]===null&&(i[f]=s);return{...c,values:i}}})}}},86979:(Y,T,e)=>{"use strict";e.d(T,{z:()=>o,R:()=>d});var t=e(99098),n=e(17587),c=e(40538),s=e(72269),i=e(45778);function f(l,p,g){let y,v;for(let E=0;E<p.length;E++)if(p[E]==null)v==null&&y!=null&&(v=E);else{if(v!=null){if(l[E]-y<g)for(;v<E;)p[v++]=void 0;v=null}y=l[E]}return p}function u(l){return l.type===t.fS.number&&l.config.custom?.drawStyle===c.l8.Bars&&!l.config.custom?.hideFrom?.viz}function r(l){let p=l.fields.find(y=>y.type===t.fS.time),g=p?.values;for(let y=0;y<l.fields.length;y++){let v=l.fields[y];if(v===p||u(v))continue;let E=v.config.custom?.spanNulls;typeof E=="number"&&E!==-1&&(v.values=f(g,v.values,E))}return l}function d(l,p,g){l=l.map(h=>h.fields[0].state?.nullThresholdApplied?h:(0,i.w)({frame:h,refFieldName:null,refFieldPseudoMin:g?.from.valueOf(),refFieldPseudoMax:g?.to.valueOf()}));let y=0;l.forEach(h=>{h.fields.forEach(C=>{u(C)&&(C.config.custom={...C.config.custom,spanNulls:-1},y++)})});let v=1/0;y>1&&l.forEach(h=>{if(!h.fields.some(u))return;const C=h.fields[0].values;for(let a=0;a<C.length;a++)a>0&&(v=Math.min(v,C[a]-C[a-1]))});let E=(0,n._9)({frames:l,joinBy:p.x,keep:p.y,keepOriginIndices:!0});return E?(E=r(E),v!==1/0&&(E.fields.forEach((h,C)=>{let a=h.values;if(C===0){let P=a[a.length-1];a.push(P+v,P+2*v)}else u(h)?a.push(null,null):a.push(void 0,void 0)}),E.length+=2),E):null}function o(l){const p="na",g=`${l.min!==void 0?l.min:p}-${l.max!==void 0?l.max:p}`,y=`${l.custom?.axisSoftMin!==void 0?l.custom.axisSoftMin:p}-${l.custom?.axisSoftMax!==void 0?l.custom.axisSoftMax:p}`,v=`${l.custom?.axisPlacement!==void 0?l.custom?.axisPlacement:c.LB.Auto}`,E=l.unit??s.j,h=l.custom?.scaleDistribution?m(l.custom.scaleDistribution):c.wf.Linear,C=Boolean(l.custom?.axisLabel)?l.custom.axisLabel:p;return`${E}/${g}/${y}/${v}/${h}/${C}`}function m(l){return l.type===c.wf.Log?`${l.type}${l.log}`:l.type}},39904:(Y,T,e)=>{"use strict";e.d(T,{J:()=>Vt});var t=e(9892),n=e(66111),c=e(81910),s=e(84559),i=e(72648),f=e(79161),u=e(94654),r=e(70726),d=e(30735),o=e(97048),m=e(43053),l=e(76059),p=e(41477),g=e(25173),y=e(89833),v=e(59658),E=e(85429),h=e(26925),C=e(22346),a=e(85334),P=e(10958),D=e(84060),x=e(92270),M=e(7803),b=e(26183),R=e(94526),S=e(49893),O=e(79691),U=e(35644),I=e(47255),F=e(76375),w=e(88921),K=e(59622),L=e(35988),V=e(63536),H=e(65976),j=e(69343),A=e(38958),_=e(95e3),k=e(53505),Q=e(45299),re=e(65774),Z=e(39239),oe=e(53516),G=e(94149),le=e(62373),ge=e(42601),ne=e(39295),ue=e(19570),te=e(369),me=e(71942),q=e(97623),se=e(7955),ae=e(41429),pe=e(88447),de=e(61501),Me=e(47069),Ke=e(48509),st=e(43305),Ie=e(16584),Ve=e(42644),_e=e(79603),tt=e(65291),dt=e(45230),Oe=e(7835),ye=e(63050),Pe=e(62216),be=e(49024),Be=e(67226),ze=e(49162),lt=e(88297),ht=e(70973),vt=e(26055),bt=e(56271),ct=e(5810),Pt=e(3408),ie=e(67628),Ce=e(50778),Ne=e(7274),Ze=e(70471),Qe=e(75603),Le=e(91196),Ue=e(48411),ve=e(16243),Se=e(78372),Fe=e(8380),je=e(48578),Ge=e(83143),gt=e(18625),mt=e(91157),Ye=e(24062),ft=e(35548),St=e(26407),we=e(23841),qe=e(19827),Je=e(5386),ut=e(60093),Mt=e(69980),Wt=e(50319),ln=e(67743),fn=e(27207),pn=e(7532),An=e(6127),Ot=e(61449),Ft=e(79748),Kt=e(80384),Lt=e(51164),Ut=e(58929),Rt=e(98723),$t=e(90577),_t=e(52677),jt=e(98851),an=e(20323),cn=e(2533),rn=e(51284),hn=e(63742),Dn=e(35398),Rn=e(57710),ea=e(91290),Fn=e(27714),Vn=e(42148),aa=e(1316),Sa=e(39423),la=e(31277),Yn=e(71580),ia=e(71171),Ia=e(36746),ha=e(4403),xa=e(80579),Wa=e(3802),as=e(22465),Xa=e(11774),Ba=e(98361),ca=e(45453),ss=e(99703),Ya=e(52370),sa=e(34924),ja=e(40159),da=e(76419),Ga=e(26216),qa=e(96864),Ka=e(83507),ts=e(88043),va=e(95428),ns=e(87784),xs=e(72461),hs=e(39228),rr=e(59619),Is=e(43743),ur=e(24099),mr=e(55054),os=e(8),Vs=e(3265),is=e(13965),zs=e(6666),ls=e(97091),ws=e(34604),Ws=e(75864),fr=e(28122),Js=e(48491),Xs=e(97612),Hs=e(32411),or=e(36319),gr=e(96861),ks=e(25169),pr=e(34052),hr=e(88175),qs=e(36277),vr=e(62695),us=e(65023),_s=e(51433),Er=e(46558);let er=!1,ms="public/img/icons/";function Gt(en,vn){c.V[ms+vn]={content:en,status:"loaded"}}function He(){er=!0;const en=typeof window<"u"&&window.__grafana_public_path__;en&&(ms=en+"img/icons/"),Gt(f,"unicons/at.svg"),Gt(u,"unicons/adjust-circle.svg"),Gt(r,"unicons/angle-double-down.svg"),Gt(d,"unicons/angle-double-right.svg"),Gt(o,"unicons/angle-down.svg"),Gt(m,"unicons/angle-left.svg"),Gt(l,"unicons/angle-right.svg"),Gt(p,"unicons/angle-up.svg"),Gt(g,"unicons/apps.svg"),Gt(y,"unicons/arrow.svg"),Gt(v,"unicons/arrow-down.svg"),Gt(E,"unicons/arrow-from-right.svg"),Gt(h,"unicons/arrow-left.svg"),Gt(C,"unicons/arrow-random.svg"),Gt(a,"unicons/arrow-right.svg"),Gt(P,"unicons/arrow-to-right.svg"),Gt(D,"unicons/arrow-up.svg"),Gt(x,"unicons/arrows-h.svg"),Gt(M,"unicons/backward.svg"),Gt(b,"unicons/bars.svg"),Gt(R,"unicons/bell.svg"),Gt(S,"unicons/bell-slash.svg"),Gt(O,"unicons/bolt.svg"),Gt(U,"unicons/book.svg"),Gt(I,"unicons/book-open.svg"),Gt(F,"unicons/brackets-curly.svg"),Gt(w,"unicons/bug.svg"),Gt(K,"unicons/building.svg"),Gt(L,"unicons/calculator-alt.svg"),Gt(V,"unicons/calendar-alt.svg"),Gt(H,"unicons/calendar-slash.svg"),Gt(j,"unicons/camera.svg"),Gt(A,"unicons/channel-add.svg"),Gt(_,"unicons/chart-line.svg"),Gt(k,"unicons/check.svg"),Gt(Q,"unicons/check-circle.svg"),Gt(re,"unicons/circle.svg"),Gt(Z,"unicons/clipboard-alt.svg"),Gt(oe,"unicons/clock-nine.svg"),Gt(G,"unicons/cloud.svg"),Gt(le,"unicons/cloud-download.svg"),Gt(ge,"unicons/code-branch.svg"),Gt(ne,"unicons/cog.svg"),Gt(ue,"unicons/columns.svg"),Gt(te,"unicons/comment-alt.svg"),Gt(me,"unicons/comment-alt-share.svg"),Gt(q,"unicons/comments-alt.svg"),Gt(se,"unicons/compass.svg"),Gt(ae,"unicons/copy.svg"),Gt(pe,"unicons/corner-down-right-alt.svg"),Gt(de,"unicons/cube.svg"),Gt(Me,"unicons/dashboard.svg"),Gt(Ke,"unicons/database.svg"),Gt(st,"unicons/document-info.svg"),Gt(Ie,"unicons/download-alt.svg"),Gt(Ve,"unicons/draggabledots.svg"),Gt(_e,"unicons/edit.svg"),Gt(tt,"unicons/ellipsis-v.svg"),Gt(dt,"unicons/ellipsis-h.svg"),Gt(Oe,"unicons/envelope.svg"),Gt(ye,"unicons/exchange-alt.svg"),Gt(Pe,"unicons/exclamation-circle.svg"),Gt(be,"unicons/exclamation-triangle.svg"),Gt(Be,"unicons/external-link-alt.svg"),Gt(ze,"unicons/eye.svg"),Gt(lt,"unicons/eye-slash.svg"),Gt(ht,"unicons/file-alt.svg"),Gt(vt,"unicons/file-blank.svg"),Gt(bt,"unicons/filter.svg"),Gt(ct,"unicons/folder.svg"),Gt(Pt,"unicons/folder-open.svg"),Gt(ie,"unicons/folder-plus.svg"),Gt(Ce,"unicons/folder-upload.svg"),Gt(Ne,"unicons/forward.svg"),Gt(Ze,"unicons/graph-bar.svg"),Gt(Qe,"unicons/history.svg"),Gt(Le,"unicons/home-alt.svg"),Gt(Ue,"unicons/import.svg"),Gt(ve,"unicons/info.svg"),Gt(Se,"unicons/info-circle.svg"),Gt(Fe,"unicons/k6.svg"),Gt(je,"unicons/key-skeleton-alt.svg"),Gt(Ge,"unicons/keyboard.svg"),Gt(gt,"unicons/link.svg"),Gt(mt,"unicons/list-ul.svg"),Gt(Ye,"unicons/lock.svg"),Gt(ft,"unicons/minus.svg"),Gt(St,"unicons/minus-circle.svg"),Gt(we,"unicons/mobile-android.svg"),Gt(qe,"unicons/monitor.svg"),Gt(Je,"unicons/pause.svg"),Gt(ut,"unicons/pen.svg"),Gt(Mt,"unicons/play.svg"),Gt(Wt,"unicons/plug.svg"),Gt(ln,"unicons/plus.svg"),Gt(fn,"unicons/plus-circle.svg"),Gt(pn,"unicons/power.svg"),Gt(An,"unicons/presentation-play.svg"),Gt(Ot,"unicons/process.svg"),Gt(Ft,"unicons/question-circle.svg"),Gt(Kt,"unicons/repeat.svg"),Gt(Lt,"unicons/rocket.svg"),Gt(Ut,"unicons/rss.svg"),Gt(Rt,"unicons/save.svg"),Gt($t,"unicons/search.svg"),Gt(_t,"unicons/search-minus.svg"),Gt(jt,"unicons/search-plus.svg"),Gt(an,"unicons/share-alt.svg"),Gt(cn,"unicons/shield.svg"),Gt(rn,"unicons/signal.svg"),Gt(hn,"unicons/signin.svg"),Gt(Dn,"unicons/signout.svg"),Gt(Rn,"unicons/sitemap.svg"),Gt(ea,"unicons/slack.svg"),Gt(Fn,"unicons/sliders-v-alt.svg"),Gt(Vn,"unicons/sort-amount-down.svg"),Gt(aa,"unicons/sort-amount-up.svg"),Gt(Sa,"unicons/square-shape.svg"),Gt(la,"unicons/star.svg"),Gt(Yn,"unicons/step-backward.svg"),Gt(ia,"unicons/sync.svg"),Gt(Ia,"unicons/table.svg"),Gt(ha,"unicons/tag-alt.svg"),Gt(xa,"unicons/times.svg"),Gt(Wa,"unicons/trash-alt.svg"),Gt(as,"unicons/unlock.svg"),Gt(Xa,"unicons/upload.svg"),Gt(Ba,"unicons/user.svg"),Gt(ca,"unicons/users-alt.svg"),Gt(ss,"unicons/wrap-text.svg"),Gt(Ya,"unicons/cloud-upload.svg"),Gt(sa,"unicons/credit-card.svg"),Gt(ja,"unicons/file-copy-alt.svg"),Gt(da,"unicons/fire.svg"),Gt(Ga,"unicons/hourglass.svg"),Gt(qa,"unicons/layer-group.svg"),Gt(Ka,"unicons/layers-alt.svg"),Gt(ts,"unicons/line-alt.svg"),Gt(va,"unicons/list-ui-alt.svg"),Gt(ns,"unicons/message.svg"),Gt(xs,"unicons/palette.svg"),Gt(hs,"unicons/percentage.svg"),Gt(rr,"unicons/shield-exclamation.svg"),Gt(Is,"unicons/plus-square.svg"),Gt(ur,"unicons/x.svg"),Gt(mr,"unicons/capture.svg"),Gt(os,"custom/gf-grid.svg"),Gt(Vs,"custom/gf-landscape.svg"),Gt(is,"custom/gf-layout-simple.svg"),Gt(zs,"custom/gf-portrait.svg"),Gt(ls,"custom/gf-bar-alignment-after.svg"),Gt(ws,"custom/gf-bar-alignment-before.svg"),Gt(Ws,"custom/gf-bar-alignment-center.svg"),Gt(fr,"custom/gf-interpolation-linear.svg"),Gt(Js,"custom/gf-interpolation-smooth.svg"),Gt(Xs,"custom/gf-interpolation-step-after.svg"),Gt(Hs,"custom/gf-interpolation-step-before.svg"),Gt(or,"custom/gf-logs.svg"),Gt(gr,"custom/gf-movepane-left.svg"),Gt(ks,"custom/gf-movepane-right.svg"),Gt(pr,"mono/favorite.svg"),Gt(hr,"mono/grafana.svg"),Gt(qs,"mono/heart.svg"),Gt(vr,"mono/heart-break.svg"),Gt(us,"mono/panel-add.svg"),Gt(_s,"mono/library-panel.svg"),Gt(Er,"unicons/record-audio.svg")}var it=e(37532);const xt=en=>({container:t.css`
      label: Icon;
      display: inline-block;
      line-height: 0;
    `,icon:t.css`
      vertical-align: middle;
      display: inline-block;
      fill: currentColor;
    `,orange:t.css`
      fill: ${en.v1.palette.orange};
    `}),Vt=n.forwardRef(({size:en="md",type:vn="default",name:On,className:yn,style:bn,title:Xn="",...Ct},Re)=>{const Te=(0,i.wW)(xt);if(On?.startsWith("fa fa-"))return n.createElement("i",{className:sn(On,yn),...Ct,style:bn});if(er||He(),(0,s.Mo)(On)||console.warn("Icon component passed an invalid icon name",On),!On||On.includes(".."))return n.createElement("div",{ref:Re},"invalid icon name");const nt=(0,it.B)(en),Xe=nt,Nt=On.startsWith("gf-bar-align")?16:On.startsWith("gf-interp")?30:nt,zt=(0,it.y)(On,vn),wt=`${ms}${zt}/${On}.svg`;return n.createElement("div",{className:Te.container,...Ct,ref:Re},n.createElement(c.Z,{src:wt,width:Nt,height:Xe,title:Xn,className:(0,t.cx)(Te.icon,yn,vn==="mono"?{[Te.orange]:On==="favorite"}:""),style:bn}))});Vt.displayName="Icon";function sn(en,vn){return(0,t.cx)(en,{"fa-spin":en==="fa fa-spinner"},vn)}},37532:(Y,T,e)=>{"use strict";e.d(T,{B:()=>c,y:()=>n});const t=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function n(s,i){return s?.startsWith("gf-")?"custom":t.includes(s)?"mono":i==="default"?"unicons":i==="solid"?"solid":"mono"}function c(s){switch(s){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}},8180:(Y,T,e)=>{"use strict";e.d(T,{h:()=>o});var t=e(9892),n=e(66111),c=e(5680),s=e(72648),i=e(85419),f=e(7804),u=e(39904),r=e(37532),d=e(61860);const o=n.forwardRef(({name:l,size:p="md",iconType:g,tooltip:y,tooltipPlacement:v,ariaLabel:E,className:h,variant:C="secondary",...a},P)=>{const D=(0,s.l4)(),x=m(D,p,C),M=typeof y=="string"?y:"",b=n.createElement("button",{ref:y?void 0:P,"aria-label":E||M,...a,className:(0,t.cx)(x.button,h)},n.createElement(u.J,{name:l,size:p,className:x.icon,type:g}));return y?n.createElement(d.u,{ref:P,content:y,placement:v},b):b});o.displayName="IconButton";const m=(0,f.B)((l,p,g)=>{const y=(0,r.B)(p),v=Math.max(y/3,8);let E=l.colors.text.primary;return g==="primary"?E=l.colors.primary.text:g==="destructive"&&(E=l.colors.error.text),{button:t.css`
      width: ${y}px;
      height: ${y}px;
      background: transparent;
      border: none;
      color: ${E};
      padding: 0;
      margin: 0;
      outline: none;
      box-shadow: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border-radius: ${l.shape.borderRadius()};
      z-index: 0;
      margin-right: ${l.spacing(.5)};

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        color: ${l.colors.action.disabledText};
        opacity: 0.65;
        box-shadow: none;
      }

      &:before {
        content: '';
        display: block;
        opacity: 1;
        position: absolute;
        transition-duration: 0.2s;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        z-index: -1;
        bottom: -${v}px;
        left: -${v}px;
        right: -${v}px;
        top: -${v}px;
        background: none;
        border-radius: 50%;
        box-sizing: border-box;
        transform: scale(0);
        transition-property: transform, opacity;
      }

      &:focus,
      &:focus-visible {
        ${(0,i.getFocusStyles)(l)}
      }

      &:focus:not(:focus-visible) {
        ${(0,i.getMouseFocusStyles)(l)}
      }

      &:hover {
        color: ${E};

        &:before {
          background-color: ${g==="secondary"?l.colors.action.hover:c.alpha(E,.12)};
          border: none;
          box-shadow: none;
          opacity: 1;
          transform: scale(0.8);
        }
      }
    `,icon:t.css`
      vertical-align: baseline;
      display: flex;
    `}})},26338:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>u,a:()=>d});var t=e(9892),n=e(66111),c=e(206),s=e(72648),i=e(19985),f=e(17784);const u=n.memo(n.forwardRef(({title:m,featureState:l,...p},g)=>{const y=(0,s.wW)(r),v=l?n.createElement(n.Fragment,null,n.createElement("div",{className:y.badge},n.createElement(d,{featureState:l})),n.createElement("h3",null,m)):n.createElement("h3",null,m);return n.createElement(f.v,{branded:!0,title:v,urlTitle:"Read documentation",ref:g,...p})}));u.displayName="FeatureInfoBox";const r=m=>({badge:t.css`
      margin-bottom: ${m.spacing(1)};
    `}),d=({featureState:m,tooltip:l})=>{const p=o(m);return n.createElement(i.C,{text:p.text,color:p.color,icon:p.icon,tooltip:l})};function o(m){switch(m){case c.CQ.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},17784:(Y,T,e)=>{"use strict";e.d(T,{v:()=>u});var t=e(9892),n=e(66111),c=e(72648),s=e(7804),i=e(45253),f=e(39904);const u=n.memo(n.forwardRef(({title:d,className:o,children:m,branded:l,url:p,urlTitle:g,onDismiss:y,severity:v="info",...E},h)=>{const C=(0,c.wW)(r);return n.createElement(i.b,{severity:v,className:o,...E,ref:h,title:d},n.createElement("div",null,m),p&&n.createElement("a",{href:p,className:(0,t.cx)("external-link",C.docsLink),target:"_blank",rel:"noreferrer"},n.createElement(f.J,{name:"book"})," ",g||"Read more"))}));u.displayName="InfoBox";const r=(0,s.B)(d=>({docsLink:t.css`
      display: inline-block;
      margin-top: ${d.spacing(2)};
    `}))},4784:(Y,T,e)=>{"use strict";e.d(T,{K:()=>u});var t=e(9892),n=e(66111),c=e(10092),s=e(72648),i=e(39904),f=e(85511);function u({referenceElement:l,children:p,suffixIcon:g,placement:y,alternativePlacement:v}){const[E,h]=(0,n.useState)(null),[C,a]=(0,n.useState)(y),P=(0,c.D)(l,E,{placement:C}),D=(0,s.wW)(r),x=(0,s.wW)(m);return n.useEffect(()=>{v&&d(y,E,l)&&a(v)},[v,y,E,l]),n.createElement(f.h_,null,n.createElement("div",{style:{display:"inline-block",...P.styles.popper},...P.attributes.popper,ref:h,"aria-live":"polite"},n.createElement("span",{className:(0,t.cx)(D.root,x[C])},p&&n.createElement("span",null,p),g&&n.createElement(i.J,{name:g}))))}const r=l=>({root:(0,t.css)({...l.typography.bodySmall,willChange:"transform",background:l.components.tooltip.background,color:l.components.tooltip.text,padding:l.spacing(.5,1.5),borderRadius:100,display:"inline-flex",gap:l.spacing(.5),alignItems:"center"})}),d=(l,p,g)=>{const y=p?.getBoundingClientRect(),v=g?.getBoundingClientRect();if(!y||!v)return!1;switch(l){case"right":return y.width+v.right>window.innerWidth;case"bottom":return y.height+v.bottom>window.innerHeight;case"left":return v.left-y.width<0;case"top":return v.top-y.height<0;default:return!1}},o=(l,p)=>(0,t.keyframes)({from:{opacity:0,transform:`translate(${l}, ${p})`},to:{opacity:1,transform:"translate(0, 0px)"}}),m=l=>{const g=o(0,l.spacing(1)),y=o(0,l.spacing(1*-1)),v=o(l.spacing(1),0),E=o(l.spacing(1*-1),0);return{top:(0,t.css)({marginBottom:l.spacing(1),animation:`${g} ease-out 100ms`}),bottom:(0,t.css)({marginTop:l.spacing(1),animation:`${y} ease-out 100ms`}),left:(0,t.css)({marginRight:l.spacing(1),animation:`${v} ease-out 100ms`}),right:(0,t.css)({marginLeft:l.spacing(1),animation:`${E} ease-out 100ms`})}}},68668:(Y,T,e)=>{"use strict";e.d(T,{H:()=>s});var t=e(66111),n=e(4176),c=e(46967);const s=t.forwardRef((f,u)=>{const{defaultValue:r="",minWidth:d=10,maxWidth:o,onCommitChange:m,onKeyDown:l,onBlur:p,...g}=f,[y,v]=t.useState(r),[E,h]=t.useState(d);return(0,t.useEffect)(()=>{h(i(y.toString(),d,o))},[y,o,d]),t.createElement(c.I,{...g,ref:u,value:y.toString(),onChange:C=>{v(C.currentTarget.value)},width:E,onBlur:C=>{p?p(C):m&&m(C)},onKeyDown:C=>{l?l(C):C.key==="Enter"&&m&&m(C)},"data-testid":"autosize-input"})});function i(f,u,r){if(!f)return u;const d=3,o=(0,n.X1)(f.toString(),14).width/8+d;return u&&o<u?u:r&&o>r?r:o}s.displayName="AutoSizeInput"},46967:(Y,T,e)=>{"use strict";e.d(T,{H:()=>d,I:()=>r});var t=e(9892),n=e(66111),c=e(62326),s=e(72648),i=e(7804),f=e(73267),u=e(67487);const r=n.forwardRef((o,m)=>{const{className:l,addonAfter:p,addonBefore:g,prefix:y,suffix:v,invalid:E,loading:h,width:C=0,...a}=o,[P,D]=(0,c.Z)(),[x,M]=(0,c.Z)(),b=(0,s.l4)(),R=d({theme:b,invalid:!!E,width:C});return n.createElement("div",{className:(0,t.cx)(R.wrapper,l),"data-testid":"input-wrapper"},!!g&&n.createElement("div",{className:R.addon},g),n.createElement("div",{className:R.inputWrapper},y&&n.createElement("div",{className:R.prefix,ref:P},y),n.createElement("input",{ref:m,className:R.input,...a,style:{paddingLeft:y?D.width+12:void 0,paddingRight:v||h?M.width+12:void 0}}),(v||h)&&n.createElement("div",{className:R.suffix,ref:x},h&&n.createElement(u.$,{className:R.loadingIndicator,inline:!0}),v)),!!p&&n.createElement("div",{className:R.addon},p))});r.displayName="Input";const d=(0,i.B)(({theme:o,invalid:m=!1,width:l})=>{const p="28px",g=t.css`
    position: absolute;
    top: 0;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-grow: 0;
    flex-shrink: 0;
    font-size: ${o.typography.size.md};
    height: 100%;
    /* Min width specified for prefix/suffix classes used outside React component*/
    min-width: ${p};
    color: ${o.colors.text.secondary};
  `;return{wrapper:(0,t.cx)(t.css`
        label: input-wrapper;
        display: flex;
        width: ${l?`${o.spacing(l)}`:"100%"};
        height: ${o.spacing(o.components.height.md)};
        border-radius: ${o.shape.borderRadius()};
        &:hover {
          > .prefix,
          .suffix,
          .input {
            border-color: ${m?o.colors.error.border:o.colors.primary.border};
          }

          // only show number buttons on hover
          input[type='number'] {
            -moz-appearance: number-input;
            -webkit-appearance: number-input;
            appearance: textfield;
          }

          input[type='number']::-webkit-inner-spin-button,
          input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: inner-spin-button !important;
            opacity: 1;
          }
        }
      `),inputWrapper:t.css`
      label: input-inputWrapper;
      position: relative;
      flex-grow: 1;
      /* we want input to be above addons, especially for focused state */
      z-index: 1;

      /* when input rendered with addon before only*/
      &:not(:first-child):last-child {
        > input {
          border-left: none;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      /* when input rendered with addon after only*/
      &:first-child:not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      /* when rendered with addon before and after */
      &:not(:first-child):not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      input {
        /* paddings specified for classes used outside React component */
        &:not(:first-child) {
          padding-left: ${p};
        }
        &:not(:last-child) {
          padding-right: ${p};
        }
        &[readonly] {
          cursor: default;
        }
      }
    `,input:(0,t.cx)((0,f.GL)(o),(0,f.RK)(o,m),t.css`
        label: input-input;
        position: relative;
        z-index: 0;
        flex-grow: 1;
        border-radius: ${o.shape.borderRadius()};
        height: 100%;
        width: 100%;
      `),inputDisabled:t.css`
      background-color: ${o.colors.action.disabledBackground};
      color: ${o.colors.action.disabledText};
      border: 1px solid ${o.colors.action.disabledBackground};
      &:focus {
        box-shadow: none;
      }
    `,addon:t.css`
      label: input-addon;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-grow: 0;
      flex-shrink: 0;
      position: relative;

      &:first-child {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        > :last-child {
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      &:last-child {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        > :first-child {
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }
      > *:focus {
        /* we want anything that has focus and is an addon to be above input */
        z-index: 2;
      }
    `,prefix:(0,t.cx)(g,t.css`
        label: input-prefix;
        padding-left: ${o.spacing(1)};
        padding-right: ${o.spacing(.5)};
        border-right: none;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      `),suffix:(0,t.cx)(g,t.css`
        label: input-suffix;
        padding-left: ${o.spacing(1)};
        padding-right: ${o.spacing(1)};
        margin-bottom: -2px;
        border-left: none;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        right: 0;
      `),loadingIndicator:t.css`
      & + * {
        margin-left: ${o.spacing(.5)};
      }
    `}})},63619:(Y,T,e)=>{"use strict";e.d(T,{g:()=>n});var t=e(66698);const n=t.Qr},65455:(Y,T,e)=>{"use strict";e.d(T,{e:()=>g});var t=e(9892),n=e(82897),c=e(66111),s=e(9827),i=e(52666),f=e(72648),u=e(39904),r=e(8180);const d=t.css`
  display: flex;
  align-items: center;
  height: 100%;
`;function o({row:h,__rowID:C}){return c.createElement("div",{className:d},c.createElement(r.h,{tooltip:"toggle row expanded","aria-controls":C,name:h.isExpanded?"angle-down":"angle-right","aria-expanded":h.isExpanded,...h.getToggleRowExpandedProps()}))}const m="__expander";function l(h){return[{id:m,Cell:o,disableSortBy:!0,width:0},...h.map(C=>({id:C.id,accessor:C.id,Header:C.header||(()=>null),sortType:C.sortType||"alphanumeric",disableSortBy:!Boolean(C.sortType),width:C.disableGrow?0:void 0,visible:C.visible,...C.cell&&{Cell:C.cell}}))]}const p=h=>{const C=h.colors.emphasize(h.colors.background.primary,.03);return{table:t.css`
      border-radius: ${h.shape.borderRadius()};
      width: 100%;

      td {
        padding: ${h.spacing(1)};
      }

      td,
      th {
        min-width: ${h.spacing(3)};
      }
    `,disableGrow:t.css`
      width: 0%;
    `,header:t.css`
      border-bottom: 1px solid ${h.colors.border.weak};
      &,
      & > button {
        position: relative;
        white-space: nowrap;
        padding: ${h.spacing(1)};
      }
      & > button {
        &:after {
          content: '\\00a0';
        }
        width: 100%;
        height: 100%;
        background: none;
        border: none;
        padding-right: ${h.spacing(2.5)};
        text-align: left;
        font-weight: ${h.typography.fontWeightMedium};
      }
    `,row:t.css`
      label: row;
      border-bottom: 1px solid ${h.colors.border.weak};

      &:hover {
        background-color: ${C};
      }

      &:last-child {
        border-bottom: 0;
      }
    `,expandedRow:t.css`
      label: expanded-row-content;
      border-bottom: none;
    `,expandedContentRow:t.css`
      label: expanded-row-content;

      td {
        border-bottom: 1px solid ${h.colors.border.weak};
        position: relative;
        padding: ${h.spacing(2,2,2,5)};

        &:before {
          content: '';
          position: absolute;
          width: 1px;
          top: 0;
          left: 16px;
          bottom: ${h.spacing(2)};
          background: ${h.colors.border.medium};
        }
      }
    `,sortableHeader:t.css`
      /* increases selector's specificity so that it always takes precedence over default styles  */
      && {
        padding: 0;
      }
    `}};function g({data:h,className:C,columns:a,renderExpandedRow:P,getRowId:D}){const x=(0,f.wW)(p),M=(0,c.useMemo)(()=>l(a),[a]),b=y(),R=(0,c.useCallback)(w=>`${b}-${w.id}`.replace(/\s/g,""),[b]),{getTableProps:S,getTableBodyProps:O,headerGroups:U,rows:I,prepareRow:F}=(0,s.useTable)({columns:M,data:h,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,getRowId:D,initialState:{hiddenColumns:[!P&&m,...M.filter(w=>!(!w.visible||w.visible(h))).map(w=>w.id).filter(i.fQ)].filter(i.fQ)}},s.useSortBy,s.useExpanded);return I.forEach(F),c.createElement("table",{...S(),className:(0,t.cx)(x.table,C)},c.createElement("thead",null,U.map(w=>{const{key:K,...L}=w.getHeaderGroupProps();return c.createElement("tr",{key:K,...L},w.headers.map(V=>{const{key:H,...j}=V.getHeaderProps();return c.createElement("th",{key:H,className:(0,t.cx)(x.header,{[x.disableGrow]:V.width===0,[x.sortableHeader]:V.canSort}),...j,...V.isSorted&&{"aria-sort":V.isSortedDesc?"descending":"ascending"}},c.createElement(E,{column:V}))}))})),c.createElement("tbody",{...O()},I.map(w=>{const{key:K,...L}=w.getRowProps(),V=R(w),H=w.isExpanded;return c.createElement(c.Fragment,{key:K},c.createElement("tr",{...L,className:(0,t.cx)(x.row,H&&x.expandedRow)},w.cells.map(j=>{const{key:A,..._}=j.getCellProps();return c.createElement("td",{key:A,..._},j.render("Cell",{__rowID:V}))})),H&&P&&c.createElement("tr",{...L,id:V,className:x.expandedContentRow},c.createElement("td",{colSpan:w.cells.length},P(w.original))))})))}const y=()=>(0,c.useMemo)(()=>(0,n.uniqueId)("InteractiveTable"),[]),v=h=>({sortIcon:t.css`
    position: absolute;
    top: ${h.spacing(1)};
  `});function E({column:{canSort:h,render:C,isSorted:a,isSortedDesc:P,getSortByToggleProps:D}}){const x=(0,f.wW)(v),{onClick:M}=D(),b=c.createElement(c.Fragment,null,C("Header"),a&&c.createElement("span",{"aria-hidden":"true",className:x.sortIcon},c.createElement(u.J,{name:P?"angle-down":"angle-up"})));return h?c.createElement("button",{type:"button",onClick:M},b):b}},16065:(Y,T,e)=>{"use strict";e.d(T,{g:()=>c});var t=e(66111),n=e(73892);class c extends t.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,t.createRef)(),this.renderJson=()=>{const{json:i,config:f,open:u,onDidRender:r}=this.props,d=this.wrapperRef.current,o=new n.u(i,u,f);d.hasChildNodes()?d.replaceChild(o.render(),d.lastChild):d.appendChild(o.render()),r&&r(o.json)}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:i}=this.props;return t.createElement("div",{className:i,ref:this.wrapperRef})}}c.defaultProps={open:3,config:{animateOpen:!0}}},73892:(Y,T,e)=>{"use strict";e.d(T,{u:()=>E});var t=e(82897);function n(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function c(h){return!!h&&typeof h==="object"}function s(h){if(h===void 0)return"";if(h===null||typeof h=="object"&&!h.constructor)return"Object";const a=/function ([^(]*)/.exec(h.constructor.toString());return a&&a.length>1?a[1]:""}function i(h){return h===null?"null":typeof h}function f(h,C){const a=i(h);return a==="null"||a==="undefined"?a:(a==="string"&&(C='"'+n(C)+'"'),a==="function"?h.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":C)}let u="";function r(h){return c(h)?(u=s(h),Array.isArray(h)&&(u+="["+h.length+"]")):u=f(h,h.toString()),u}function d(h){return`json-formatter-${h}`}function o(h,C,a){const P=document.createElement(h);return C&&P.classList.add(d(C)),a!==void 0&&(a instanceof Node?P.appendChild(a):P.appendChild(document.createTextNode(String(a)))),P}const m=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,l=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,p=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,g=10,y=typeof window<"u"&&window.requestAnimationFrame||(h=>(h(),0)),v={animateOpen:!0,animateClose:!0};class E{constructor(C,a=1,P=v,D){this.json=C,this.open=a,this.config=P,this.key=D,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(C){this._isOpen=C}get isDate(){return this.type==="string"&&(m.test(this.json)||p.test(this.json)||l.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return c(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return s(this.json)}get type(){return i(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(C=>C||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(d("open")))}openAtDepth(C=1){C<0||(this.open=C,this.isOpen=C!==0,this.element&&(this.removeChildren(!1),C===0?this.element.classList.remove(d("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(d("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,t.isNumber)(this.json[0])||(0,t.isNumber)(this.json[1]))}renderArray(){const C=o("span");return C.appendChild(o("span","bracket","[")),this.isNumberArray()?(this.json.forEach((a,P)=>{P>0&&C.appendChild(o("span","array-comma",",")),C.appendChild(o("span","number",a))}),this.skipChildren=!0):C.appendChild(o("span","number",this.json.length)),C.appendChild(o("span","bracket","]")),C}render(C=!1){this.element=o("div","row");const a=o("a","toggler-link"),P=o("span","toggler");if(this.isObject&&a.appendChild(P),this.hasKey&&a.appendChild(o("span","key",`${this.key}:`)),this.isObject){const x=o("span","value"),M=o("span"),b=o("span","constructor-name",this.constructorName);if(M.appendChild(b),this.isArray){const R=this.renderArray();M.appendChild(R)}x.appendChild(M),a.appendChild(x)}else{const x=this.isUrl?o("a"):o("span");x.classList.add(d(this.type)),this.isDate&&x.classList.add(d("date")),this.isUrl&&(x.classList.add(d("url")),x.setAttribute("href",this.json));const M=f(this.json,this.json);x.appendChild(document.createTextNode(M)),a.appendChild(x)}const D=o("div","children");return this.isObject&&D.classList.add(d("object")),this.isArray&&D.classList.add(d("array")),this.isEmpty&&D.classList.add(d("empty")),this.config&&this.config.theme&&this.element.classList.add(d(this.config.theme)),this.isOpen&&this.element.classList.add(d("open")),C||this.element.appendChild(a),this.skipChildren?a.removeChild(P):this.element.appendChild(D),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&a.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(C=!1){const a=this.element&&this.element.querySelector(`div.${d("children")}`);if(!(!a||this.isEmpty))if(C){let P=0;const D=()=>{const x=this.keys[P],M=new E(this.json[x],this.open-1,this.config,x);a.appendChild(M.render()),P+=1,P<this.keys.length&&(P>g?D():y(D))};y(D)}else this.keys.forEach(P=>{const D=new E(this.json[P],this.open-1,this.config,P);a.appendChild(D.render())})}removeChildren(C=!1){const a=this.element&&this.element.querySelector(`div.${d("children")}`);if(C){let P=0;const D=()=>{a&&a.children.length&&(a.removeChild(a.children[0]),P+=1,P>g?D():y(D))};y(D)}else a&&(a.innerHTML="")}}},52081:(Y,T,e)=>{"use strict";e.d(T,{Ar:()=>i,Lh:()=>f,W2:()=>r,wc:()=>u});var t=e(9892),n=e(66111),c=e(72648),s=(l=>(l[l.Horizontal=0]="Horizontal",l[l.Vertical=1]="Vertical",l))(s||{});const i=({children:l,orientation:p=0,spacing:g="sm",justify:y="flex-start",align:v="normal",wrap:E=!1,width:h="100%",height:C="100%",...a})=>{const P=(0,c.wW)((0,n.useCallback)(D=>d(D,p,g,y,v,E),[v,y,p,g,E]));return n.createElement("div",{className:P.layout,style:{width:h,height:C},...a},n.Children.toArray(l).filter(Boolean).map((D,x)=>n.createElement("div",{className:P.childWrapper,key:x},D)))},f=({children:l,spacing:p,justify:g,align:y="center",wrap:v,width:E,height:h})=>n.createElement(i,{spacing:p,justify:g,orientation:0,align:y,width:E,height:h,wrap:v},l),u=({children:l,spacing:p,justify:g,align:y,width:v,height:E})=>n.createElement(i,{spacing:p,justify:g,orientation:1,align:y,width:v,height:E},l),r=({children:l,padding:p,margin:g,grow:y,shrink:v})=>{const E=(0,c.wW)((0,n.useCallback)(h=>m(h,p,g),[p,g]));return n.createElement("div",{className:(0,t.cx)(E.wrapper,y!==void 0&&t.css`
            flex-grow: ${y};
          `,v!==void 0&&t.css`
            flex-shrink: ${v};
          `)},l)},d=(l,p,g,y,v,E)=>{const h=g!=="none"?l.spacing(o[g]):0,C=p===0&&!E||p===1?0:`-${h}`,a=p===1?"vertical-group":"horizontal-group";return{layout:t.css`
      label: ${a};
      display: flex;
      flex-direction: ${p===1?"column":"row"};
      flex-wrap: ${E?"wrap":"nowrap"};
      justify-content: ${y};
      align-items: ${v};
      height: 100%;
      max-width: 100%;
      // compensate for last row margin when wrapped, horizontal layout
      margin-bottom: ${C};
    `,childWrapper:t.css`
      label: layoutChildrenWrapper;
      margin-bottom: ${p===0&&!E?0:h};
      margin-right: ${p===0?h:0};
      display: flex;
      align-items: ${v};

      &:last-child {
        margin-bottom: ${p===1&&0};
        margin-right: ${p===0&&0};
      }
    `}},o={none:0,xs:.5,sm:1,md:2,lg:3},m=(l,p,g)=>{const y=p&&p!=="none"&&l.spacing(o[p])||0,v=g&&g!=="none"&&l.spacing(o[g])||0;return{wrapper:t.css`
      label: container;
      margin: ${v};
      padding: ${y};
    `}}},29460:(Y,T,e)=>{"use strict";e.d(T,{r:()=>i});var t=e(66111),n=e(51947),c=e(72196),s=e(63418);const i=(0,t.forwardRef)(({href:f,children:u,...r},d)=>{const o=c.u.stripBaseFromUrl(s.QX.sanitizeUrl(f??""));return t.createElement(n.Link,{ref:d,to:o,...r},u)});i.displayName="Link"},398:(Y,T,e)=>{"use strict";e.d(T,{L:()=>i});var t=e(9892),n=e(66111),c=e(7804);const s=(0,c.B)((f=!1)=>({list:t.css`
    list-style-type: none;
    margin: 0;
    padding: 0;
  `,item:t.css`
    display: ${f&&"inline-block"||"block"};
  `}));class i extends n.PureComponent{constructor(u){super(u)}render(){const{items:u,renderItem:r,getItemKey:d,className:o,inline:m}=this.props,l=s(m);return n.createElement("ul",{className:(0,t.cx)(l.list,o)},u.map((p,g)=>n.createElement("li",{className:l.item,key:d?d(p):g},r(p,g))))}}},19882:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>c});var t=e(66111),n=e(398);class c extends t.PureComponent{render(){return t.createElement(n.L,{inline:!0,...this.props})}}},56766:(Y,T,e)=>{"use strict";e.d(T,{a:()=>c});var t=e(66111),n=e(398);class c extends t.PureComponent{render(){return t.createElement(n.L,{...this.props})}}},74750:(Y,T,e)=>{"use strict";e.d(T,{F:()=>u});var t=e(9892),n=e(66111),c=e(72648);const s=2.4,i=500,f=4e3;function u({width:d,ariaLabel:o="Loading bar"}){const m=(0,c.wW)(r),l=Math.min(Math.max(Math.round(d*s),i),f),p={width:"100%",animation:`${m.animation} ${l}ms infinite linear`,willChange:"transform"};return n.createElement("div",{style:p},n.createElement("div",{"aria-label":o,className:m.bar}))}const r=()=>({animation:(0,t.keyframes)({"0%":{transform:"translateX(-50%)"},"100%":{transform:"translateX(100%)"}}),bar:(0,t.css)({width:"28%",height:1,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)"})})},61744:(Y,T,e)=>{"use strict";e.d(T,{u:()=>i});var t=e(9892),n=e(66111),c=e(72648),s=e(67487);const i=({text:u,className:r,...d})=>{const o=(0,c.wW)(f);return n.createElement("div",{className:(0,t.cx)(o.container,r),...d},u," ",n.createElement(s.$,{inline:!0}))},f=u=>({container:t.css`
      margin-bottom: ${u.spacing(4)};
    `})},15448:(Y,T,e)=>{"use strict";e.d(T,{b:()=>s});var t=e(66111),n=e(8581),c=e(80760);const s=({value:i,onChange:f,context:u,item:r})=>{const d=r.settings??{},o=(0,c.IX)(u.data,d?.filter),m=(0,c.nw)(o,i),l=(0,t.useCallback)(g=>{if(!(g&&!(0,c.w3)(g.value,o)))return f(g?.value)},[o,f]),p=m.find(g=>g.value===i);return t.createElement(t.Fragment,null,t.createElement(n.Ph,{value:p,placeholder:d.placeholderText??"Select field",options:m,onChange:l,noOptionsMessage:d.noFieldsMessage,width:d.width,isClearable:d.isClearable!==!1}))}},16453:(Y,T,e)=>{"use strict";e.d(T,{$w:()=>m,OL:()=>r});var t=e(66111),n=e(99098),c=e(90748),s=e(50035),i=e(50622),f=e(8581);const u=(0,t.memo)(l=>{const{data:p,options:g,onChange:y,id:v}=l,E=d(p),h=o(E,g),C=(0,t.useCallback)(P=>y(P.value),[y]),a=h.find(P=>P.value===g);return t.createElement(f.Ph,{inputId:v,value:a,options:h,onChange:C})});u.displayName="FieldTypeMatcherEditor";const r=[{value:n.fS.number,label:"Number",icon:(0,i.WZ)(n.fS.number)},{value:n.fS.string,label:"String",icon:(0,i.WZ)(n.fS.string)},{value:n.fS.time,label:"Time",icon:(0,i.WZ)(n.fS.time)},{value:n.fS.boolean,label:"Boolean",icon:(0,i.WZ)(n.fS.boolean)},{value:n.fS.trace,label:"Traces",icon:(0,i.WZ)(n.fS.trace)},{value:n.fS.enum,label:"Enum",icon:(0,i.WZ)(n.fS.enum)},{value:n.fS.other,label:"Other",icon:(0,i.WZ)(n.fS.other)}],d=l=>(0,t.useMemo)(()=>{const p=new Map;for(const g of r)p.set(g.value,0);for(const g of l)for(const y of g.fields){const v=y.type||n.fS.other;let E=p.get(v);E||(E=0),p.set(v,E+1)}return p},[l]),o=(l,p)=>(0,t.useMemo)(()=>{let g=!1;const y=[];for(const v of r){const E=l.get(v.value),h=p===v.value;(E||h)&&y.push({...v,label:`${v.label} (${l.get(v.value)})`}),h&&(g=!0)}return p&&!g&&y.push({value:p,label:`${p} (No matches)`}),y},[l,p]),m={id:c.mi.byType,component:u,matcher:s.Ls.get(c.mi.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:l=>l}},92830:(Y,T,e)=>{"use strict";e.d(T,{J8:()=>o,fN:()=>g});var t=e(9892),n=e(66111),c=e(33750),s=e(90748),i=e(50035),f=e(40538),u=e(72648),r=e(46967),d=e(8581);const o=[{label:"==",value:f.Bd.EQ},{label:"!=",value:f.Bd.NEQ},{label:">",value:f.Bd.GT},{label:">=",value:f.Bd.GTE},{label:"<",value:f.Bd.LT},{label:"<=",value:f.Bd.LTE}];function m(y){return y===c.gz.allIsNull||y===c.gz.allIsZero}const l=({options:y,onChange:v})=>{const E=(0,u.wW)(p),h=(0,n.useMemo)(()=>c.TB.selectOptions([y?.reducer]),[y?.reducer]),C=(0,n.useCallback)(M=>v({...y,reducer:M.value}),[y,v]),a=(0,n.useCallback)(M=>v({...y,op:M.value}),[y,v]),P=(0,n.useCallback)(M=>{const b=M.currentTarget.valueAsNumber;return v({...y,value:b})},[y,v]),D=y??{},x=m(y.reducer);return n.createElement("div",{className:E.spot},n.createElement(d.Ph,{value:h.current,options:h.options,onChange:C,placeholder:"Select field reducer"}),D.reducer&&!x&&n.createElement(n.Fragment,null,n.createElement(d.Ph,{value:o.find(M=>M.value===D.op),options:o,onChange:a,"aria-label":"Comparison operator",width:19}),n.createElement(r.I,{type:"number",value:D.value,onChange:P})))},p=y=>({spot:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      align-content: flex-end;
      gap: 4px;
    `}),g={id:s.mi.byValue,component:l,matcher:i.Ls.get(s.mi.byValue),name:"Fields with values",description:"Set properties for fields with reducer condition",optionsToLabel:y=>`${y?.reducer} ${y?.op} ${y?.value}`}},43657:(Y,T,e)=>{"use strict";e.d(T,{O:()=>u,S:()=>o});var t=e(66111),n=e(30471),c=e(90748),s=e(50035),i=e(8581);const f=(m,l,p)=>{if(!p)return;let g=m.find(y=>!l.some(v=>y===v));if(g)return g};function u({value:m,data:l,onChange:p,placeholder:g}){const y=(0,t.useMemo)(()=>r(l),[l]),[v,E]=(0,t.useState)({refIds:[],value:void 0}),h=(0,t.useMemo)(()=>y.find(a=>a.value===m)??f(y,v.refIds,v.value),[m,y,v]),C=(0,t.useCallback)(a=>{p(a.value)},[p]);return(y!==v.refIds||h?.value!==v.value)&&E({refIds:y,value:h?.value}),t.createElement(i.Ph,{options:y,onChange:C,isClearable:!0,placeholder:g??"Select query refId",value:h})}function r(m){const l=new Map;for(const g of m){const y=g.refId??"",v=l.get(y)??[];v.length===0&&l.set(y,v),v.push(g)}const p=[];for(const[g,y]of l.entries())p.push({value:g,label:`Query: ${g??"(missing refId)"}`,description:d(y)});return p}function d(m){return`Frames (${m.length}):
    ${m.slice(0,Math.min(3,m.length)).map(l=>(0,n.nf)(l)).join(", ")} ${m.length>3?"...":""}`}const o={id:c.mi.byFrameRefID,component:m=>t.createElement(u,{value:m.options,data:m.data,onChange:m.onChange}),matcher:s.Ls.get(c.mi.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:m=>m}},6058:(Y,T,e)=>{"use strict";e.d(T,{i:()=>E});var t=e(53908),n=e(66111),c=e(90748),s=e(50035),i=e(46967);const f=(0,n.memo)(h=>{const{options:C,onChange:a}=h,P=(0,n.useCallback)(D=>a(D.target.value),[a]);return n.createElement(i.I,{placeholder:"Enter regular expression",defaultValue:C,onBlur:P})});f.displayName="FieldNameByRegexMatcherEditor";const u={id:c.mi.byRegexp,component:f,matcher:s.Ls.get(c.mi.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:h=>h};var r=e(8581),d=e(80760);const o=(0,n.memo)(h=>{const{data:C,options:a,onChange:P,id:D}=h,x=(0,d.IX)(C),M=(0,d.nw)(x,a),b=(0,n.useCallback)(S=>{if((0,d.w3)(S.value,x))return P(S.value)},[x,P]),R=M.find(S=>S.value===a);return n.createElement(r.Ph,{value:R,options:M,onChange:b,inputId:D})});o.displayName="FieldNameMatcherEditor";const m={id:c.mi.byName,component:o,matcher:s.Ls.get(c.mi.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:h=>h},l=(0,n.memo)(h=>{const{data:C,options:a,onChange:P}=h,{readOnly:D,prefix:x}=a,M=(0,d.IX)(C),b=(0,d.nw)(M,void 0),R=(0,n.useCallback)(S=>{if(Array.isArray(S))return P({...a,names:S.reduce((O,U)=>((0,d.w3)(U.value,M)&&O.push(U.value),O),[])})},[M,P,a]);if(D){const S=(a.names??[]).join(", ");return n.createElement(i.I,{value:S,readOnly:!0,disabled:!0,prefix:x})}return n.createElement(r.NU,{value:a.names,options:b,onChange:R})});l.displayName="FieldNameMatcherEditor";const p={id:c.mi.byNames,component:l,matcher:s.Ls.get(c.mi.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:h=>(h.names??[]).join(", "),excludeFromPicker:!0};var g=e(16453),y=e(92830),v=e(43657);const E=new t.B(()=>[m,u,g.$w,v.S,p,y.fN])},80760:(Y,T,e)=>{"use strict";e.d(T,{IX:()=>f,g2:()=>i,nw:()=>u,w3:()=>s});var t=e(66111),n=e(30471),c=e(50622);function s(r,d){return r?d.display.has(r)||d.raw.has(r):!1}function i(r,d){const o={display:new Set,raw:new Set,fields:new Map};for(const m of r)for(const l of m.fields){if(d&&!d(l))continue;const p=(0,n.CZ)(l,m,r);o.display.add(p),o.fields.set(p,l),l.name&&p!==l.name&&(o.raw.add(l.name),o.fields.set(l.name,l))}return o}function f(r,d){return(0,t.useMemo)(()=>i(r,d),[r,d])}function u(r,d,o,m){return(0,t.useMemo)(()=>{let l=!1;const p=[];o&&p.push(o);for(const g of r.display){!l&&g===d&&(l=!0);const y=r.fields.get(g);(!m||m===y?.type)&&p.push({value:g,label:g,icon:y?(0,c.e7)(y):void 0})}for(const g of r.raw)r.display.has(g)||(!l&&g===d&&(l=!0),p.push({value:g,label:`${g} (base field name)`}));return d&&!l&&p.push({value:d,label:`${d} (not found)`}),p},[r,d,o,m])}},95130:(Y,T,e)=>{"use strict";e.d(T,{v:()=>d});var t=e(9892),n=e(66111),c=e(72648),s=e(97456),i=e(14391),f=e(42044),u=e(69914);const r=n.forwardRef(({header:m,children:l,ariaLabel:p,onOpen:g,onClose:y,onKeyDown:v,...E},h)=>{const C=(0,c.wW)(o),a=(0,n.useRef)(null);(0,n.useImperativeHandle)(h,()=>a.current);const[P]=(0,u.d)({localRef:a,onOpen:g,onClose:y,onKeyDown:v});return n.createElement("div",{...E,tabIndex:-1,ref:a,className:C.wrapper,role:"menu","aria-label":p,onKeyDown:P},m&&n.createElement("div",{className:(0,t.cx)(C.header,Boolean(l)&&n.Children.toArray(l).length>0&&C.headerBorder)},m),l)});r.displayName="Menu";const d=Object.assign(r,{Item:f.s,Divider:s.R,Group:i.k}),o=m=>({header:(0,t.css)({padding:`${m.spacing(.5,1,1,1)}`}),headerBorder:(0,t.css)({borderBottom:`1px solid ${m.colors.border.weak}`}),wrapper:(0,t.css)({background:`${m.colors.background.primary}`,boxShadow:`${m.shadows.z3}`,display:"inline-block",borderRadius:`${m.shape.borderRadius()}`,padding:`${m.spacing(.5,0)}`})})},97456:(Y,T,e)=>{"use strict";e.d(T,{R:()=>s});var t=e(9892),n=e(66111),c=e(72648);function s(){const f=(0,c.wW)(i);return n.createElement("div",{className:f.divider})}const i=f=>({divider:(0,t.css)({height:1,backgroundColor:f.colors.border.weak,margin:f.spacing(.5,0)})})},14391:(Y,T,e)=>{"use strict";e.d(T,{k:()=>f});var t=e(9892),n=e(82897),c=e.n(n),s=e(66111),i=e(72648);const f=({label:r,ariaLabel:d,children:o})=>{const m=(0,i.wW)(u),l=`group-label-${(0,n.uniqueId)()}`;return s.createElement("div",{role:"group","aria-labelledby":!d&&r?l:void 0,"aria-label":d},r&&s.createElement("label",{id:l,className:m.groupLabel,"aria-hidden":!0},r),o)};f.displayName="MenuGroup";const u=r=>({groupLabel:t.css`
      color: ${r.colors.text.secondary};
      font-size: ${r.typography.size.sm};
      padding: ${r.spacing(.5,1)};
    `})},42044:(Y,T,e)=>{"use strict";e.d(T,{s:()=>m});var t=e(9892),n=e(66111),c=e(72648),s=e(85419),i=e(39904),f=e(68183),u=e(69914);const r=p=>{if(!p)return!1;const g=p.parentElement.getBoundingClientRect(),y=p.getBoundingClientRect();return y.width!==0&&g.right+y.width+10>window.innerWidth},d=n.memo(({items:p,isOpen:g,openedWithArrow:y,setOpenedWithArrow:v,close:E,customStyle:h})=>{const C=(0,c.wW)(o),a=(0,n.useRef)(null),[P]=(0,u.d)({localRef:a,isMenuOpen:g,openedWithArrow:y,setOpenedWithArrow:v,close:E}),[D,x]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{g&&a.current&&x(r(a.current))},[g]),n.createElement(n.Fragment,null,n.createElement("div",{className:C.iconWrapper,"aria-label":f.wl.components.Menu.SubMenu.icon},n.createElement(i.J,{name:"angle-right",className:C.icon,"aria-hidden":!0})),g&&n.createElement("div",{ref:a,className:(0,t.cx)(C.subMenu,{[C.pushLeft]:D}),"aria-label":f.wl.components.Menu.SubMenu.container,style:h},n.createElement("div",{tabIndex:-1,className:C.itemsWrapper,role:"menu",onKeyDown:P},p)))});d.displayName="SubMenu";const o=p=>({iconWrapper:t.css`
      display: flex;
      flex: 1;
      justify-content: end;
    `,icon:t.css`
      opacity: 0.7;
      margin-left: ${p.spacing(1)};
      color: ${p.colors.text.secondary};
    `,itemsWrapper:t.css`
      background: ${p.colors.background.primary};
      box-shadow: ${p.shadows.z3};
      display: inline-block;
      border-radius: ${p.shape.borderRadius()};
    `,pushLeft:t.css`
      right: 100%;
      left: unset;
    `,subMenu:t.css`
      position: absolute;
      top: 0;
      left: 100%;
      z-index: ${p.zIndex.dropdown};
    `}),m=n.memo(n.forwardRef((p,g)=>{const{url:y,icon:v,label:E,ariaLabel:h,ariaChecked:C,target:a,onClick:P,className:D,active:x,disabled:M,destructive:b,childItems:R,role:S="menuitem",tabIndex:O=-1,customSubMenuContainerStyles:U,shortcut:I,testId:F}=p,w=(0,c.wW)(l),[K,L]=(0,n.useState)(x),[V,H]=(0,n.useState)(!1),[j,A]=(0,n.useState)(!1),_=(0,n.useCallback)(()=>{M||(H(!0),L(!0))},[M]),k=(0,n.useCallback)(()=>{M||(H(!1),L(!1))},[M]),Q=R&&R.length>0,re=Q?"div":y===void 0?"button":"a",Z=(0,t.cx)({[w.item]:!0,[w.active]:K,[w.disabled]:M,[w.destructive]:b&&!M},D),oe={[re==="button"?"disabled":"aria-disabled"]:M,...re==="a"&&M&&{href:void 0,onClick:void 0},...M&&{tabIndex:-1,["data-disabled"]:M}},G=(0,n.useRef)(null);(0,n.useImperativeHandle)(g,()=>G.current);const le=ue=>{switch(ue.key){case"ArrowRight":ue.preventDefault(),ue.stopPropagation(),Q&&(H(!0),A(!0),L(!0));break;default:break}},ge=()=>{H(!1),L(!1),G?.current?.focus()},ne=Boolean(I&&I.length>0);return n.createElement(re,{target:a,className:Z,rel:a==="_blank"?"noopener noreferrer":void 0,href:y,onClick:P,onMouseEnter:_,onMouseLeave:k,onKeyDown:le,role:y===void 0?S:void 0,"data-role":"menuitem",ref:G,"data-testid":F,"aria-label":h,"aria-checked":C,tabIndex:O,...oe},n.createElement(n.Fragment,null,v&&n.createElement(i.J,{name:v,className:w.icon,"aria-hidden":!0}),E,n.createElement("div",{className:(0,t.cx)(w.rightWrapper,{[w.withShortcut]:ne})},ne&&n.createElement("div",{className:w.shortcut},n.createElement(i.J,{name:"keyboard","aria-hidden":!0}),I),Q&&n.createElement(d,{items:R,isOpen:V,openedWithArrow:j,setOpenedWithArrow:A,close:ge,customStyle:U}))))}));m.displayName="MenuItem";const l=p=>({item:t.css`
      background: none;
      cursor: pointer;
      white-space: nowrap;
      color: ${p.colors.text.primary};
      display: flex;
      align-items: center;
      padding: ${p.spacing(.5,2)};
      min-height: ${p.spacing(4)};
      margin: 0;
      border: none;
      width: 100%;
      position: relative;

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${p.colors.action.hover};
        color: ${p.colors.text.primary};
        text-decoration: none;
      }

      &:focus-visible {
        ${(0,s.getFocusStyles)(p)}
      }
    `,active:t.css`
      background: ${p.colors.action.hover};
    `,destructive:t.css`
      color: ${p.colors.error.text};

      svg {
        color: ${p.colors.error.text};
      }

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${p.colors.error.main};
        color: ${p.colors.error.contrastText};

        svg {
          color: ${p.colors.error.contrastText};
        }
      }
    `,disabled:t.css`
      color: ${p.colors.action.disabledText};

      &:hover,
      &:focus,
      &:focus-visible {
        cursor: not-allowed;
        background: none;
        color: ${p.colors.action.disabledText};
      }
    `,icon:t.css`
      opacity: 0.7;
      margin-right: 10px;
      margin-left: -4px;
      color: ${p.colors.text.secondary};
    `,rightWrapper:t.css`
      display: flex;
      align-items: center;
      margin-left: auto;
    `,shortcutIcon:t.css`
      margin-right: ${p.spacing(1)};
    `,withShortcut:t.css`
      min-width: ${p.spacing(10.5)};
    `,shortcut:t.css`
      display: flex;
      align-items: center;
      gap: ${p.spacing(1)};
      margin-left: ${p.spacing(2)};
      color: ${p.colors.text.secondary};
      opacity: 0.7;
    `})},69914:(Y,T,e)=>{"use strict";e.d(T,{d:()=>i});var t=e(66111),n=e(49380);const c=(f,u)=>(f%u+u)%u,s=-1,i=({localRef:f,isMenuOpen:u,openedWithArrow:r,setOpenedWithArrow:d,close:o,onOpen:m,onClose:l,onKeyDown:p})=>{const[g,y]=(0,t.useState)(s);return(0,t.useEffect)(()=>{u&&r&&(y(0),d?.(!1))},[u,r,d]),(0,t.useEffect)(()=>{const E=f?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');E?.[g]?.focus(),E?.forEach((h,C)=>{h.tabIndex=C===g?0:-1})},[f,g]),(0,n.Z)(()=>{m?.(y)}),[E=>{const h=f?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),C=h?.length??0;switch(E.key){case"ArrowUp":E.preventDefault(),E.stopPropagation(),y(c(g-1,C));break;case"ArrowDown":E.preventDefault(),E.stopPropagation(),y(c(g+1,C));break;case"ArrowLeft":E.preventDefault(),E.stopPropagation(),y(s),o?.();break;case"Home":E.preventDefault(),E.stopPropagation(),y(0);break;case"End":E.preventDefault(),E.stopPropagation(),y(C-1);break;case"Enter":E.preventDefault(),E.stopPropagation(),h?.[g]?.click();break;case"Escape":l?.();break;case"Tab":E.preventDefault(),l?.();break;default:break}p?.(E)}]}},35029:(Y,T,e)=>{"use strict";e.d(T,{u:()=>m});var t=e(9892),n=e(29952),c=e(83962),s=e(86922),i=e(66111),f=e(72648),u=e(8180),r=e(52081),d=e(38894),o=e(27581);function m(g){const{title:y,children:v,isOpen:E=!1,closeOnEscape:h=!0,closeOnBackdropClick:C=!0,className:a,contentClassName:P,onDismiss:D,onClickBackdrop:x,trapFocus:M=!0}=g,b=(0,f.l4)(),R=(0,o.J)(b),S=(0,i.useRef)(null),{overlayProps:O,underlayProps:U}=(0,s.Ir)({isKeyboardDismissDisabled:!h,isOpen:E,onClose:D},S),{dialogProps:I,titleProps:F}=(0,n.R)({},S);if(!E)return null;const w=(0,t.cx)(R.modalHeader,typeof y!="string"&&R.modalHeaderWithTabs);return i.createElement(s.Xj,null,i.createElement("div",{role:"presentation",className:R.modalBackdrop,onClick:x||(C?D:void 0),...U}),i.createElement(c.MT,{contain:M,autoFocus:!0,restoreFocus:!0},i.createElement("div",{className:(0,t.cx)(R.modal,a),ref:S,...O,...I},i.createElement("div",{className:w},typeof y=="string"&&i.createElement(p,{...g,title:y,id:F.id}),typeof y!="string"&&y,i.createElement("div",{className:R.modalHeaderClose},i.createElement(u.h,{"aria-label":"Close dialog",name:"times",size:"xl",onClick:D}))),i.createElement("div",{className:(0,t.cx)(R.modalContent,P)},v))))}function l({leftItems:g,children:y}){const v=(0,f.l4)(),E=(0,o.J)(v);return g?i.createElement("div",{className:E.modalButtonRow},i.createElement(r.Lh,{justify:"space-between"},i.createElement(r.Lh,{justify:"flex-start",spacing:"md"},g),i.createElement(r.Lh,{justify:"flex-end",spacing:"md"},y))):i.createElement("div",{className:E.modalButtonRow},i.createElement(r.Lh,{justify:"flex-end",spacing:"md"},y))}m.ButtonRow=l;function p({icon:g,iconTooltip:y,title:v,id:E}){return i.createElement(d.x,{icon:g,iconTooltip:y,title:v,id:E})}},38894:(Y,T,e)=>{"use strict";e.d(T,{x:()=>s});var t=e(66111),n=e(72648),c=e(27581);const s=({icon:i,iconTooltip:f,title:u,children:r,id:d})=>{const o=(0,n.wW)(c.J);return t.createElement(t.Fragment,null,t.createElement("h2",{className:o.modalHeaderTitle,id:d},u),r)}},72535:(Y,T,e)=>{"use strict";e.d(T,{Q:()=>n});var t=e(66111);const n=({children:c})=>t.createElement("div",{className:"share-modal-body"},t.createElement("div",{className:"share-modal-header"},t.createElement("div",{className:"share-modal-content"},c)))},88683:(Y,T,e)=>{"use strict";e.d(T,{H:()=>i});var t=e(66111),n=e(79841),c=e(72142),s=e(38894);const i=({icon:f,title:u,tabs:r,activeTab:d,onChangeTab:o})=>t.createElement(s.x,{icon:f,title:u},t.createElement(c.J,{hideBorder:!0},r.map((m,l)=>t.createElement(n.O,{key:`${m.value}-${l}`,label:m.label,icon:m.icon,suffix:m.tabSuffix,active:m.value===d,onChangeTab:()=>o(m)}))))},5191:(Y,T,e)=>{"use strict";e.d(T,{$i:()=>c,JY:()=>i,Y0:()=>s,kr:()=>n});var t=e(66111);const n=t.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class c extends t.Component{constructor(u){super(u),this.showModal=(r,d)=>{this.setState({component:r,props:d})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:u.component||null,props:u.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return t.createElement(n.Provider,{value:this.state},this.props.children)}}const s=()=>t.createElement(n.Consumer,null,({component:f,props:u})=>f?t.createElement(f,{...u}):null),i=n.Consumer},27581:(Y,T,e)=>{"use strict";e.d(T,{J:()=>c});var t=e(9892),n=e(7804);const c=(0,n.B)(s=>{const i=s.shape.borderRadius(1);return{modal:t.css`
      position: fixed;
      z-index: ${s.zIndex.modal};
      background: ${s.colors.background.primary};
      box-shadow: ${s.shadows.z3};
      border-radius: ${i};
      border: 1px solid ${s.colors.border.weak};
      background-clip: padding-box;
      outline: none;
      width: 750px;
      max-width: 100%;
      left: 0;
      right: 0;
      margin-left: auto;
      margin-right: auto;
      top: 10%;
      max-height: 80%;
      display: flex;
      flex-direction: column;
    `,modalBackdrop:t.css`
      position: fixed;
      z-index: ${s.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: ${s.components.overlay.background};
      backdrop-filter: blur(1px);
    `,modalHeader:t.css`
      label: modalHeader;
      display: flex;
      align-items: center;
      min-height: 42px;
      margin: ${s.spacing(1,2,0,2)};
    `,modalHeaderWithTabs:t.css`
      border-bottom: 1px solid ${s.colors.border.weak};
    `,modalHeaderTitle:t.css`
      font-size: ${s.typography.size.lg};
      margin: ${s.spacing(0,4,0,1)};
      display: flex;
      align-items: center;
      position: relative;
      top: 2px;
    `,modalHeaderIcon:t.css`
      margin-right: ${s.spacing(2)};
      font-size: inherit;
      &:before {
        vertical-align: baseline;
      }
    `,modalHeaderClose:t.css`
      height: 100%;
      display: flex;
      align-items: center;
      color: ${s.colors.text.secondary};
      flex-grow: 1;
      justify-content: flex-end;
    `,modalContent:t.css`
      overflow: auto;
      padding: ${s.spacing(3)};
      width: 100%;
    `,modalButtonRow:t.css`
      padding-top: ${s.spacing(3)};
    `}})},9405:(Y,T,e)=>{"use strict";e.d(T,{p:()=>p});var t=e(9892),n=e(66111),c=e(8488),s=e(68183),i=e(72648),f=e(84128),u=e(10339);function r(y){for(let v=y.length-1;v>0;v--){const E=y.charAt(v);if(E==="$")return{index:v,prefix:y.substring(v)};if(E===" "||E==="	"||E==='"'||E==="'")return{index:v+1,prefix:y.substring(v+1)}}return{index:0,prefix:y}}function d(y,v,E,h){const C=[];for(const a of E)v&&!a.label.startsWith(v)||C.push({...a,kind:o(y,a.kind),range:h,insertText:a.insertText??a.label});return C}function o(y,v){switch(v){case u.k.Method:return y.languages.CompletionItemKind.Method;case u.k.Field:return y.languages.CompletionItemKind.Field;case u.k.Property:return y.languages.CompletionItemKind.Property;case u.k.Constant:return y.languages.CompletionItemKind.Constant;case u.k.Text:return y.languages.CompletionItemKind.Text}return y.languages.CompletionItemKind.Text}function m(y,v,E,h){if(!(!v||!E))return y.languages.registerCompletionItemProvider(v,{triggerCharacters:["$"],provideCompletionItems:(C,a,P)=>{if(C.id!==h)return;const D={startLineNumber:a.lineNumber,endLineNumber:a.lineNumber,startColumn:a.column,endColumn:a.column};if(P.triggerCharacter==="$")return D.startColumn=a.column-1,{suggestions:d(y,"$",E(),D)};const x=C.getValueInRange({startLineNumber:a.lineNumber,startColumn:1,endLineNumber:a.lineNumber,endColumn:a.column}),{index:M,prefix:b}=r(x);D.startColumn=M+1;const R=d(y,b,E(),D);if(R.length)return{suggestions:R}}})}class l extends n.PureComponent{constructor(v){super(v),this.loadCustomLanguage=()=>{const{language:E}=this.props,h=c.F.getIfExists(E);return h?h.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:E}=this.props;E&&E(this.getEditorValue())},this.onSave=()=>{const{onSave:E}=this.props;E&&E(this.getEditorValue())},this.handleBeforeMount=E=>{this.monaco=E;const{onBeforeEditorMount:h}=this.props;h?.(E)},this.handleOnMount=(E,h)=>{const{getSuggestions:C,language:a,onChange:P,onEditorDidMount:D}=this.props;this.modelId=E.getModel()?.id,this.getEditorValue=()=>E.getValue(),C&&this.modelId&&(this.completionCancel=m(h,a,C,this.modelId)),E.addCommand(h.KeyMod.CtrlCmd|h.KeyCode.KeyS,this.onSave);const x=this.loadCustomLanguage();D&&(x.then(()=>D(E,h)),E.getModel()?.onDidChangeContent(()=>P?.(E.getValue())))}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose()}componentDidUpdate(v){const{getSuggestions:E,language:h}=this.props,C=v.language!==h;if(v.getSuggestions!==E||C){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}E&&this.modelId&&(this.completionCancel=m(this.monaco,h,E,this.modelId))}C&&this.loadCustomLanguage()}render(){const{theme:v,language:E,width:h,height:C,showMiniMap:a,showLineNumbers:P,readOnly:D,monacoOptions:x}=this.props,M=this.props.value??"",b=M.length>100,R=this.props.containerStyles??g(v).container,S={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:b&&a,renderCharacters:!1},readOnly:D,lineNumbersMinChars:4,lineDecorationsWidth:1*v.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*v.spacing.gridSize,bottom:.5*v.spacing.gridSize},fixedOverflowWidgets:!0};return P||(S.glyphMargin=!1,S.folding=!1,S.lineNumbers="off",S.lineNumbersMinChars=0),n.createElement("div",{className:R,onBlur:this.onBlur,"aria-label":s.wl.components.CodeEditor.container},n.createElement(f.o,{width:h,height:C,language:E,value:M,options:{...S,...x??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount}))}}const p=(0,i.HE)(l),g=y=>({container:t.css`
      border-radius: ${y.shape.borderRadius()};
      border: 1px solid ${y.components.input.borderColor};
    `})},84128:(Y,T,e)=>{"use strict";e.d(T,{o:()=>f});var t=e(66111),n=e(61744),c=e(39198),s=e(59679);const i=u=>{const r=(0,s.Z)(async()=>await u);return{...r,dependency:r.value}},f=u=>{const{loading:r,error:d,dependency:o}=i(e.e(2462).then(e.bind(e,89852)));if(r)return t.createElement(n.u,{text:""});if(d)return t.createElement(c.X,{title:"React Monaco Editor failed to load",error:d,errorInfo:{componentStack:d?.stack||""}});const m=o.ReactMonacoEditor;return t.createElement(m,{...u})}},10339:(Y,T,e)=>{"use strict";e.d(T,{k:()=>t});var t=(n=>(n.Method="method",n.Field="field",n.Property="property",n.Constant="constant",n.Text="text",n))(t||{})},25503:(Y,T,e)=>{"use strict";e.d(T,{T:()=>n});var t=e(10339);function n(c){const s="${"+c.value+"}",i=c.value===c.label?c.origin:`${c.label} / ${c.origin}`;return{label:s,kind:t.k.Property,detail:i,documentation:c.documentation}}},35224:(Y,T,e)=>{"use strict";e.d(T,{X:()=>o});var t=e(9892),n=e(66111),c=e(68183),s=e(29460),i=e(8125),f=e(72648),u=e(85419),r=e(39904),d=e(8180);const o=n.memo(({title:l,section:p,parent:g,pageIcon:y,onGoBack:v,children:E,titleHref:h,parentHref:C,leftItems:a,isFullscreen:P,className:D,"aria-label":x,buttonOverflowAlignment:M="right",forceShowLeftItems:b=!1})=>{const R=(0,f.wW)(m),S=(0,t.cx)("page-toolbar",R.toolbar,{["page-toolbar--fullscreen"]:P,[R.noPageIcon]:!y},D),O=n.createElement(n.Fragment,null,n.createElement("span",{className:R.truncateText},l),p&&n.createElement("span",{className:R.pre}," / ",p));return n.createElement("nav",{className:S,"aria-label":x},n.createElement("div",{className:R.leftWrapper},y&&!v&&n.createElement("div",{className:R.pageIcon},n.createElement(r.J,{name:y,size:"lg","aria-hidden":!0})),v&&n.createElement("div",{className:R.pageIcon},n.createElement(d.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","aria-label":c.wl.components.BackButton.backArrow,onClick:v})),n.createElement("nav",{"aria-label":"Search links",className:R.navElement},g&&C&&n.createElement(n.Fragment,null,n.createElement(s.r,{"aria-label":`Search dashboard in the ${g} folder`,className:(0,t.cx)(R.titleText,R.parentLink,R.titleLink,R.truncateText),href:C},g," ",n.createElement("span",{className:R.parentIcon})),h&&n.createElement("span",{className:(0,t.cx)(R.titleText,R.titleDivider),"aria-hidden":!0},"/")),(l||Boolean(a?.length))&&n.createElement("div",{className:R.titleWrapper},l&&n.createElement("h1",{className:R.h1Styles},h?n.createElement(s.r,{"aria-label":"Search dashboard by name",className:(0,t.cx)(R.titleText,R.titleLink),href:h},O):n.createElement("div",{className:R.titleText},O)),a?.map((U,I)=>n.createElement("div",{className:(0,t.cx)(R.leftActionItem,{[R.forceShowLeftActionItems]:b}),key:I},U))))),n.createElement(i.R,{alignment:M},n.Children.toArray(E).filter(Boolean)))});o.displayName="PageToolbar";const m=l=>{const{spacing:p,typography:g}=l,y=(0,u.getFocusStyles)(l);return{pre:t.css`
      white-space: pre;
    `,toolbar:t.css`
      align-items: center;
      background: ${l.colors.background.canvas};
      display: flex;
      gap: ${l.spacing(2)};
      justify-content: space-between;
      padding: ${l.spacing(1.5,2)};

      ${l.breakpoints.down("md")} {
        padding-left: 53px;
      }
    `,noPageIcon:t.css`
      ${l.breakpoints.down("md")} {
        padding-left: ${l.spacing(2)};
      }
    `,leftWrapper:t.css`
      display: flex;
      flex-wrap: nowrap;
      max-width: 70%;
    `,pageIcon:t.css`
      display: none;
      ${l.breakpoints.up("sm")} {
        display: flex;
        padding-right: ${l.spacing(1)};
        align-items: center;
      }
    `,truncateText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,titleWrapper:t.css`
      display: flex;
      margin: 0;
      min-width: 0;
    `,navElement:t.css`
      display: flex;
      align-items: center;
      min-width: 0;
    `,h1Styles:t.css`
      margin: ${p(0,1,0,0)};
      line-height: inherit;
      flex-grow: 1;
      min-width: 0;
    `,parentIcon:t.css`
      margin-left: ${l.spacing(.5)};
    `,titleText:t.css`
      display: flex;
      font-size: ${g.size.lg};
      margin: 0;
      max-width: 300px;
      border-radius: ${l.shape.radius.default};
    `,titleLink:t.css`
      &:focus-visible {
        ${y}
      }
    `,titleDivider:t.css`
      padding: ${p(0,.5,0,.5)};
      display: none;
      ${l.breakpoints.up("md")} {
        display: unset;
      }
    `,parentLink:t.css`
      display: none;
      ${l.breakpoints.up("md")} {
        display: unset;
        flex: 1;
      }
    `,leftActionItem:t.css`
      display: none;
      align-items: center;
      padding-right: ${p(.5)};
      ${l.breakpoints.up("md")} {
        display: flex;
      }
    `,forceShowLeftActionItems:t.css`
      display: flex;
    `}}},78889:(Y,T,e)=>{"use strict";e.d(T,{t:()=>f});var t=e(9892),n=e(66111),c=e(72648),s=e(31403),i=e(39904);const f=({currentPage:r,numberOfPages:d,onNavigate:o,hideWhenSinglePage:m,showSmallVersion:l,className:p})=>{const g=(0,c.wW)(u),y=l?1:8,v=(0,n.useMemo)(()=>{const E=[...new Array(d).keys()],h=d>y,C=(a,P)=>n.createElement("li",{key:a,className:g.item},n.createElement(s.zx,{size:"sm",variant:P,onClick:()=>o(a)},a));return E.reduce((a,P)=>{const D=P+1,x=D===r?"primary":"secondary",M=y,b=d-y+1,R=b-M,S=D===1||D===d,O=R>-1&&r>=M&&r<=b,U=l?1:3,I=l?0:2;return h?S||r<M&&D<M||R>=0&&r>b&&D>b||R<0&&r>=M&&D>b||O&&D>=r-I&&D<=r+I?a.push(C(D,x)):(D===M&&r<M||D===b&&r>b||O&&(D===r-U||D===r+U))&&a.push(n.createElement("li",{key:D,className:g.item},n.createElement(i.J,{className:g.ellipsis,name:"ellipsis-v"}))):a.push(C(D,x)),a},[])},[r,d,o,y,l,g.ellipsis,g.item]);return m&&d<=1?null:n.createElement("div",{className:(0,t.cx)(g.container,p)},n.createElement("ol",null,n.createElement("li",{className:g.item},n.createElement(s.zx,{"aria-label":"previous",size:"sm",variant:"secondary",onClick:()=>o(r-1),disabled:r===1},n.createElement(i.J,{name:"angle-left"}))),v,n.createElement("li",{className:g.item},n.createElement(s.zx,{"aria-label":"next",size:"sm",variant:"secondary",onClick:()=>o(r+1),disabled:r===d},n.createElement(i.J,{name:"angle-right"})))))},u=()=>({container:t.css`
      float: right;
    `,item:t.css`
      display: inline-block;
      padding-left: 10px;
      margin-bottom: 5px;
    `,ellipsis:t.css`
      transform: rotate(90deg);
    `})},99562:(Y,T,e)=>{"use strict";e.d(T,{g:()=>o});var t=e(9892),n=e(66111),c=e(72648);const s={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"},i=8,f={name:"Grafana Default",typography:{fontFamily:{sansSerif:'"Inter", "Helvetica", "Arial", sans-serif',monospace:"'Roboto Mono', monospace"},size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},heading:{h1:"28px",h2:"24px",h3:"21px",h4:"18px",h5:"16px",h6:"14px"},weight:{light:300,regular:400,semibold:500,bold:500},lineHeight:{xs:1,sm:1.1,md:1.5,lg:2},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:"0",sm:"544px",md:"769px",lg:"992px",xl:"1200px",xxl:"1440px"},spacing:{base:i,insetSquishMd:"4px 8px",d:"16px",xxs:"2px",xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px",gutter:"30px",formSpacingBase:i,formMargin:`${i*4}px`,formFieldsetMargin:`${i*2}px`,formInputHeight:i*4,formButtonHeight:i*4,formInputPaddingHorizontal:`${i}px`,formInputAffixPaddingHorizontal:`${i/2}px`,formInputMargin:`${i*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${i/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:"2px",md:"3px",lg:"5px"},width:{sm:"1px"}},height:{sm:24,md:32,lg:48},panelPadding:8,panelHeaderHeight:28,zIndex:{navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061}},u=null;var r=e(39904),d=e(61860);const o=({error:l,onClick:p})=>{const g=(0,c.wW)(m);return l?n.createElement(d.u,{theme:"error",content:l},n.createElement(r.J,{onClick:p,className:(0,t.cx)(g.icon,{[g.clickable]:!!p}),size:"sm",name:"exclamation-triangle"})):null},m=()=>({clickable:(0,t.css)({cursor:"pointer"}),icon:(0,t.css)({color:`${s.red88}`})})},8861:(Y,T,e)=>{"use strict";e.d(T,{T:()=>u});var t=e(9892),n=e(66111),c=e(68183),s=e(72648),i=e(39904),f=e(61860);const u=({onCancel:d,loading:o})=>{const m=(0,s.wW)(r);return o?n.createElement(f.u,{content:"Cancel query"},n.createElement(i.J,{className:(0,t.cx)("spin-clockwise",{[m.clickable]:!!d}),name:"sync",size:"sm",onClick:d,"aria-label":c.wl.components.LoadingIndicator.icon})):null},r=()=>({clickable:(0,t.css)({cursor:"pointer"})})},60325:(Y,T,e)=>{"use strict";e.d(T,{R9:()=>i,_w:()=>s,bb:()=>c});var t=e(66111),n=e(50444);const c=t.createContext({eventBus:new n.F}),s=c.Provider,i=()=>t.useContext(c)},38208:(Y,T,e)=>{"use strict";e.d(T,{fm:()=>I});var t=e(99562),n=e(8861),c=e(9892),s=e(66111),i=e(52666),f=e(68183),u=e(72648);function r({children:F,delay:w}){const[K,L]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{const V=setInterval(()=>{L(!0)},w);return()=>{clearInterval(V)}},[F,w]),s.createElement(s.Fragment,null,K?F:null)}var d=e(39904),o=e(74750),m=e(61860),l=e(71698),p=e(64319);function g({menu:F,title:w,placement:K="bottom",offset:L,dragClassCancel:V,menuButtonClass:H,onVisibleChange:j,onOpenMenu:A}){const _=w?f.wl.components.Panels.Panel.menu(w):"panel-menu-button",k=(0,s.useCallback)(Q=>(Q&&A&&A(),j),[A,j]);return s.createElement(l.L,{overlay:F,placement:K,offset:L,onVisibleChange:k},s.createElement(p.h,{"aria-label":`Menu for panel with ${w?`title ${w}`:"no title"}`,title:"Menu",icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":_,className:(0,c.cx)(H,V)}))}function y({menu:F,title:w,dragClass:K,children:L,offset:V=-32,onOpenMenu:H}){const j=(0,u.wW)(v),A=(0,s.useRef)(null),_=f.wl.components.Panels.Panel.HoverWidget,k=(0,s.useCallback)(oe=>{A.current?.setPointerCapture(oe.pointerId)},[]),Q=(0,s.useCallback)(oe=>{A.current?.releasePointerCapture(oe.pointerId)},[]),[re,Z]=(0,s.useState)(!1);return L===void 0||s.Children.count(L)===0?null:s.createElement("div",{className:(0,c.cx)(j.container,{"show-on-hover":!re}),style:{top:`${V}px`},"data-testid":_.container},K&&s.createElement("div",{className:(0,c.cx)(j.square,j.draggable,K),onPointerDown:k,onPointerUp:Q,ref:A,"data-testid":_.dragIcon},s.createElement(d.J,{name:"expand-arrows",className:j.draggableIcon})),!w&&s.createElement("h6",{className:(0,c.cx)(j.untitled,{[j.draggable]:!!K},K)},"Untitled"),L,F&&s.createElement(g,{menu:F,title:w,placement:"bottom",menuButtonClass:j.menuButton,onVisibleChange:Z,onOpenMenu:H}))}function v(F){return{hidden:(0,c.css)({visibility:"hidden",opacity:"0"}),container:(0,c.css)({label:"hover-container-widget",transition:"all .1s linear",display:"flex",position:"absolute",zIndex:1,right:0,boxSizing:"content-box",alignItems:"center",background:F.colors.background.secondary,color:F.colors.text.primary,border:`1px solid ${F.colors.border.weak}`,borderRadius:F.shape.radius.default,height:F.spacing(4),boxShadow:F.shadows.z1}),square:(0,c.css)({display:"flex",justifyContent:"center",alignItems:"center",width:F.spacing(4),height:"100%"}),draggable:(0,c.css)({cursor:"move",[F.breakpoints.down("md")]:{display:"none"}}),menuButton:(0,c.css)({background:"inherit",border:"none","&:hover":{background:F.colors.secondary.main}}),untitled:(0,c.css)({color:F.colors.text.disabled,fontStyle:"italic",padding:F.spacing(0,1),marginBottom:0}),draggableIcon:(0,c.css)({transform:"rotate(45deg)",color:F.colors.text.secondary,"&:hover":{color:F.colors.text.primary}})}}var E=e(85419),h=e(31403);const C=(0,s.forwardRef)(({className:F,children:w,href:K,onClick:L,target:V,title:H,...j},A)=>{const _=(0,u.wW)(a);return K?s.createElement("a",{ref:A,href:K,onClick:L,target:V,title:H,className:(0,c.cx)(_.linkItem,F),...j},w):L?s.createElement(h.zx,{ref:A,className:(0,c.cx)(_.item,F),variant:"secondary",fill:"text",onClick:L},w):s.createElement("span",{ref:A,className:(0,c.cx)(_.item,F),...j},w)});C.displayName="TitleItem";const a=F=>{const w=(0,c.css)({color:`${F.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${F.shape.borderRadius()}`,padding:`${F.spacing(0,1)}`,height:`${F.spacing(F.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,E.getFocusStyles)(F),zIndex:1},"&: focus:not(:focus-visible)":(0,E.getMouseFocusStyles)(F),"&:hover ":{boxShadow:`${F.shadows.z1}`,background:`${F.colors.background.secondary}`,color:`${F.colors.text.primary}`}});return{item:w,linkItem:(0,c.cx)(w,(0,c.css)({cursor:"pointer"}))}};function P({description:F,className:w}){const K=(0,u.wW)(D),L=()=>{const V=typeof F=="function"?F():F;return s.createElement("div",{className:"panel-info-content markdown-html"},s.createElement("div",{dangerouslySetInnerHTML:{__html:V}}))};return F!==""?s.createElement(m.u,{interactive:!0,content:L},s.createElement(C,{className:(0,c.cx)(w,K.description)},s.createElement(d.J,{name:"info-circle",size:"md"}))):null}const D=F=>({description:(0,c.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function x({message:F,onClick:w,ariaLabel:K="status"}){const L=(0,u.wW)(M);return s.createElement(p.h,{className:L.buttonStyles,onClick:w,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:F||"","aria-label":K})}const M=F=>{const{headerHeight:w,padding:K}=F.components.panel;return{buttonStyles:(0,c.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:F.spacing(K),width:F.spacing(w),height:F.spacing(w),borderRadius:F.shape.radius.default})}};function b({width:F,height:w,children:K,padding:L="md",title:V="",description:H="",displayMode:j="default",titleItems:A,menu:_,dragClass:k,dragClassCancel:Q,hoverHeader:re=!1,hoverHeaderOffset:Z,loadingState:oe,statusMessage:G,statusMessageOnClick:le,leftItems:ge,actions:ne,onCancelQuery:ue,onOpenMenu:te}){const me=(0,u.l4)(),q=(0,u.wW)(U),se=!re,ae="show-on-hover",pe=S(me,se),{contentStyle:de,innerWidth:Me,innerHeight:Ke}=O(L,me,F,pe,w),st={height:pe,cursor:k?"move":"auto"},Ie={width:F,height:w};j==="transparent"&&(Ie.backgroundColor="transparent",Ie.border="none"),ge&&(ne=ge);const Ve=V?f.wl.components.Panels.Panel.title(V):"Panel",_e=s.createElement(s.Fragment,null,V&&s.createElement("h6",{title:V,className:q.title},V),s.createElement("div",{className:(0,c.cx)(q.titleItems,Q),"data-testid":"title-items-container"},s.createElement(P,{description:H,className:Q}),A),oe===i.Gu.Streaming&&s.createElement(m.u,{content:ue?"Stop streaming":"Streaming"},s.createElement(C,{className:Q,"data-testid":"panel-streaming",onClick:ue},s.createElement(d.J,{name:"circle-mono",size:"md",className:q.streaming}))),oe===i.Gu.Loading&&ue&&s.createElement(r,{delay:2e3},s.createElement(m.u,{content:"Cancel query"},s.createElement(C,{className:Q,"data-testid":"panel-cancel-query",onClick:ue},s.createElement(d.J,{name:"sync-slash",size:"md"})))),s.createElement("div",{className:q.rightAligned},ne&&s.createElement("div",{className:q.rightActions},R(ne,tt=>tt))));return s.createElement("div",{className:q.container,style:Ie,"data-testid":Ve},s.createElement("div",{className:q.loadingBarContainer},oe===i.Gu.Loading?s.createElement(o.F,{width:F,ariaLabel:"Panel loading bar"}):null),re&&s.createElement(s.Fragment,null,s.createElement(y,{menu:_,title:V,offset:Z,dragClass:k,onOpenMenu:te},_e),G&&s.createElement("div",{className:q.errorContainerFloating},s.createElement(x,{message:G,onClick:le,ariaLabel:"Panel status"}))),se&&s.createElement("div",{className:(0,c.cx)(q.headerContainer,k),style:st,"data-testid":"header-container"},G&&s.createElement("div",{className:Q},s.createElement(x,{message:G,onClick:le,ariaLabel:"Panel status"})),_e,_&&s.createElement(g,{menu:_,title:V,placement:"bottom-end",menuButtonClass:(0,c.cx)(q.menuItem,Q,ae),onOpenMenu:te})),s.createElement("div",{className:q.content,style:de},K(Me,Ke)))}const R=(F,w)=>{const K=s.Children.toArray(F).filter(Boolean);return K.length>0?w(K):null},S=(F,w)=>w?F.spacing.gridSize*F.components.panel.headerHeight:0,O=(F,w,K,L,V)=>{const H=(F==="md"?w.components.panel.padding:0)*w.spacing.gridSize,j=H*2,A=1*2,_=K-j-A,k=V-L-j-A;return{contentStyle:{padding:H},innerWidth:_,innerHeight:k}},U=F=>{const{background:w,borderColor:K,padding:L}=F.components.panel;return{container:(0,c.css)({label:"panel-container",backgroundColor:w,border:`1px solid ${K}`,position:"relative",borderRadius:F.shape.borderRadius(1),height:"100%",display:"flex",flexDirection:"column",".show-on-hover":{opacity:"0"},"&:focus-visible, &:hover":{".show-on-hover":{opacity:"1"}},"&:focus-visible":{outline:`1px solid ${F.colors.action.focus}`},"&:focus-within":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),loadingBarContainer:(0,c.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%",overflow:"hidden"}),content:(0,c.css)({label:"panel-content",flexGrow:1,contain:"strict"}),headerContainer:(0,c.css)({label:"panel-header",display:"flex",alignItems:"center"}),streaming:(0,c.css)({label:"panel-streaming",marginRight:0,color:F.colors.success.text,"&:hover":{color:F.colors.success.text}}),title:(0,c.css)({label:"panel-title",marginBottom:0,padding:F.spacing(0,L),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:F.typography.h6.fontSize,fontWeight:F.typography.h6.fontWeight}),items:(0,c.css)({display:"flex"}),item:(0,c.css)({display:"flex",justifyContent:"center",alignItems:"center"}),hiddenMenu:(0,c.css)({visibility:"hidden"}),menuItem:(0,c.css)({label:"panel-menu",border:"none",background:F.colors.secondary.main,"&:hover":{background:F.colors.secondary.shade}}),errorContainerFloating:(0,c.css)({label:"error-container",position:"absolute",left:0,top:0,zIndex:F.zIndex.tooltip}),rightActions:(0,c.css)({display:"flex",padding:F.spacing(0,L),gap:F.spacing(1)}),rightAligned:(0,c.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,c.css)({display:"flex",height:"100%"})}},I=b;I.LoadingIndicator=n.T,I.ErrorIndicator=t.g,I.TitleItem=C},17882:(Y,T,e)=>{"use strict";e.d(T,{R:()=>t});var t=(n=>(n.ToggleSelection="select",n.AppendToSelection="append",n))(t||{})},72080:(Y,T,e)=>{"use strict";e.d(T,{l:()=>s});var t=e(9892),n=e(66111),c=e(72648);const s=({children:f,className:u,...r})=>{const d=(0,c.wW)(i);return n.createElement("div",{className:(0,t.cx)(d,u),...r},f)},i=f=>t.css`
    background-color: ${f.components.panel.background};
    border: 1px solid ${f.components.panel.borderColor};
    border-radius: ${f.shape.radius.default};
  `},51613:(Y,T,e)=>{"use strict";e.d(T,{o:()=>s});var t=e(66111),n=e(59250),c=e(19985);const s=({status:f,...u})=>{const r=i(f);return t.createElement(c.C,{text:r.text,color:r.color,icon:r.icon,tooltip:r.tooltip,...u})};s.displayName="PluginSignatureBadge";function i(f){switch(f||(f=n.Xy.invalid),f){case n.Xy.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case n.Xy.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case n.Xy.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case n.Xy.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case n.Xy.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},85511:(Y,T,e)=>{"use strict";e.d(T,{RN:()=>i,h_:()=>s,lO:()=>f});var t=e(66111),n=e(15638),c=e(72648);function s(r){const{children:d,className:o,root:m,forwardedRef:l}=r,p=(0,c.l4)(),g=(0,t.useRef)(null),y=m??i();return g.current||(g.current=document.createElement("div"),o&&(g.current.className=o),g.current.style.position="relative",g.current.style.zIndex=`${p.zIndex.portal}`),(0,t.useLayoutEffect)(()=>(g.current&&y.appendChild(g.current),()=>{g.current&&y.removeChild(g.current)}),[y]),n.createPortal(t.createElement("div",{ref:l},d),g.current)}function i(){return window.document.getElementById("grafana-portal-container")??document.body}function f(){return t.createElement("div",{id:"grafana-portal-container"})}const u=t.forwardRef((r,d)=>t.createElement(s,{...r,forwardedRef:d}));u.displayName="RefForwardingPortal"},69659:(Y,T,e)=>{"use strict";e.d(T,{q:()=>P});var t=e(9892),n=e(9085),c=e.n(n),s=e(82897),i=e.n(s),f=e(66111),u=e(43809),r=e(56975),d=e(68183),o=e(12724),m=e(73958),l=e(47838),p=e(9830),g=e(74778),y=e(71096),v=e(784),E=e(6464),h=e(72648),C=e(85419);class a extends f.PureComponent{constructor(M,b){super(M,b),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(I,F)=>{const w=I.document!==this.state.value.document,K=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(I),this.setState({value:I},()=>{if(w){const L=u.Z.serialize(K)!==u.Z.serialize(I);L&&F&&this.runOnChangeAndRunQuery(),L&&!F&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:I}=this.props,F=u.Z.serialize(this.state.value);I&&I(this.cleanText(F))},this.runOnRunQuery=()=>{const{onRunQuery:I}=this.props;I&&(I(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(I,F,w)=>{const{onBlur:K}=this.props;if(K)K();else{const L=this.lastExecutedValue?u.Z.serialize(this.lastExecutedValue):"",V=u.Z.serialize(F.value);L!==V&&this.runOnChangeAndRunQuery()}return w()},this.runOnChangeDebounced=(0,s.debounce)(this.runOnChange,500);const{onTypeahead:R,cleanText:S,portalOrigin:O,onWillApplySuggestion:U}=M;this.plugins=[(0,m.b)({onTypeahead:R,cleanText:S,portalOrigin:O,onWillApplySuggestion:U}),(0,l.d)({handler:this.runOnChangeAndRunQuery}),(0,p.z)(),(0,g.G)(),(0,y.$)(),(0,v.R)(),(0,E.w)(),...M.additionalPlugins||[]].filter(I=>I),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,o.l1)(M.query||"",M.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(M,b){const{query:R,syntax:S,syntaxLoaded:O}=this.props;if(!M.syntaxLoaded&&O&&this.editor){const I=this.editor.insertText(" ").deleteBackward(1);this.onChange(I.value,!0)}const{value:U}=this.state;R!==M.query&&R!==u.Z.serialize(U)&&this.setState({value:(0,o.l1)(R||"",S)})}cleanText(M){return M.replace(/[\r]/g,"")}render(){const{disabled:M,theme:b}=this.props,R=c()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":M}),S=D(b);return f.createElement("div",{className:(0,t.cx)(R,S.wrapper)},f.createElement("div",{className:"slate-query-field","aria-label":d.wl.components.QueryField.container},f.createElement(r.ML,{ref:O=>this.editor=O,schema:o.Yi,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:O=>{this.onChange(O.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const P=(0,h.HE)(a),D=x=>{const M=(0,C.getFocusStyles)(x);return{wrapper:t.css`
      &:focus-within {
        ${M}
      }
    `}}},5562:(Y,T,e)=>{"use strict";e.d(T,{dP:()=>m,o5:()=>d});var t=e(14016),n=e(66111),c=e(76282),s=e(68183),i=e(37951),f=e(26202),u=e(44342),r=e(64319);const d=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],o=class extends n.PureComponent{constructor(g){super(g),this.onChangeSelect=y=>{const{onIntervalChanged:v}=this.props;v&&y.value!=null&&v(y.value)}}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:g,intervals:y,tooltip:v,value:E,text:h,isLoading:C,noIntervalPicker:a,width:P}=this.props,D=E||"",x=this.getVariant(),M=p({intervals:y}),b=M.find(({value:w})=>w===D),R=l(o.offOption.value);let S=b||R;S.label===R.label&&(S={value:""});const O=S.ariaLabel,U=(0,i.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:O}),I=(0,i.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),F=S.value===""?I:U;return n.createElement(f.h,{className:"refresh-picker"},n.createElement(r.h,{"aria-label":h,tooltip:v,onClick:g,variant:x,icon:C?"fa fa-spinner":"sync",style:P?{width:P}:void 0,"data-testid":s.wl.components.RefreshPicker.runButtonV2},h),!a&&n.createElement(u.d,{value:S,options:M,onChange:this.onChangeSelect,variant:x,title:(0,i.t)("refresh-picker.select-button.auto-refresh","Set auto refresh interval"),"data-testid":s.wl.components.RefreshPicker.intervalButtonV2,"aria-label":F}))}};let m=o;m.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"},m.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"},m.isLive=g=>g===o.liveOption.value;function l(g){return g===m.liveOption.value?{label:(0,i.t)("refresh-picker.live-option.label","Live"),value:"LIVE",ariaLabel:(0,i.t)("refresh-picker.live-option.aria-label","Turn on live streaming")}:{label:(0,i.t)("refresh-picker.off-option.label","Off"),value:"",ariaLabel:(0,i.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")}}function p({intervals:g=d}={}){const y=g.map(v=>{const E=(0,c.RA)(v),h=(0,t.Z)(E);return{label:v,value:v,ariaLabel:h}});return y.unshift(l(m.offOption.value)),y}},39856:(Y,T,e)=>{"use strict";e.d(T,{D:()=>c});var t=e(66111),n=e(63418);function c({component:s,content:i,...f}){return t.createElement(s||"span",{dangerouslySetInnerHTML:{__html:n.QX.sanitize(i)},...f})}},34517:(Y,T,e)=>{"use strict";e.d(T,{c:()=>r});var t=e(9892),n=e(82897),c=e.n(n),s=e(66111),i=e(31403),f=e(95569);const u=()=>({noRadiusInput:t.css`
      border-bottom-right-radius: 0 !important;
      border-top-right-radius: 0 !important;
    `,noRadiusButton:t.css`
      border-bottom-left-radius: 0 !important;
      border-top-left-radius: 0 !important;
    `}),r=({label:d="Password",labelWidth:o,inputWidth:m=12,onReset:l,isConfigured:p,tooltip:g,placeholder:y="Password",interactive:v,...E})=>{const h=u();return s.createElement(f.W,{label:d,tooltip:g,interactive:v,labelWidth:o,inputEl:p?s.createElement(s.Fragment,null,s.createElement("input",{type:"text",className:(0,t.cx)(`gf-form-input width-${m}`,h.noRadiusInput),disabled:!0,value:"configured",...(0,n.omit)(E,"value")}),s.createElement(i.zx,{onClick:l,variant:"secondary",type:"button"},"Reset")):s.createElement("input",{type:"password",className:`gf-form-input width-${m}`,placeholder:y,...E})})};r.displayName="SecretFormField"},52953:(Y,T,e)=>{"use strict";e.d(T,{m4:()=>u});var t=e(66111),n=e(31403),c=e(46967),s=e(52081);const i="configured",f="Reset",u=({isConfigured:r,onReset:d,...o})=>t.createElement(s.Lh,null,!r&&t.createElement(c.I,{...o,type:"password"}),r&&t.createElement(c.I,{...o,type:"text",disabled:!0,value:i}),r&&t.createElement(n.zx,{onClick:d,variant:"secondary"},f))},70862:(Y,T,e)=>{"use strict";e.d(T,{m:()=>t.m4});var t=e(52953)},30810:(Y,T,e)=>{"use strict";e.d(T,{Zk:()=>o});var t=e(9892),n=e(66111),c=e(72648),s=e(31403),i=e(52081),f=e(97379);const u="configured",r="Reset",d=m=>({configuredStyle:t.css`
      min-height: ${m.spacing(m.components.height.md)};
      padding-top: ${m.spacing(.5)};
      resize: none;
    `}),o=({isConfigured:m,onReset:l,...p})=>{const g=(0,c.wW)(d);return n.createElement(i.Lh,null,!m&&n.createElement(f.K,{...p}),m&&n.createElement(f.K,{...p,rows:1,disabled:!0,value:u,className:(0,t.cx)(g.configuredStyle)}),m&&n.createElement(s.zx,{onClick:l,variant:"secondary"},r))}},88892:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>t.Zk});var t=e(30810)},70044:(Y,T,e)=>{"use strict";e.d(T,{X:()=>o});var t=e(9892),n=e(82897),c=e.n(n),s=e(66111),i=e(72648),f=e(77117),u=e(97924),r=e(28318),d=e(2357);function o({options:m,value:l,onChange:p,Component:g,className:y,allowCustomValue:v,allowEmptyValue:E,placeholder:h,disabled:C,inputMinWidth:a,inputPlaceholder:P,onExpandedChange:D,autofocus:x=!1,...M}){const[b,R,S,O]=(0,r._)(x,D),U=a?Math.max(a,R):R,I=(0,i.wW)(u.N);if(!S){const F=(0,n.isObject)(l)?l.label:l,w=F!=null?String(F):void 0;return s.createElement(b,{disabled:C,Component:g||s.createElement(f.W,{className:(0,t.cx)(I.segment,{[I.queryPlaceholder]:h!==void 0&&!l,[I.disabled]:C},y)},w||h)})}return s.createElement(d.V,{...M,value:l&&!(0,n.isObject)(l)?{value:l}:l,placeholder:P,options:m,width:U,onClickOutside:()=>O(!1),allowCustomValue:v,allowEmptyValue:E,onChange:F=>{O(!1),p(F)}})}},68118:(Y,T,e)=>{"use strict";e.d(T,{V:()=>l});var t=e(9892),n=e(82897),c=e.n(n),s=e(66111),i=e(13821),f=e(72648),u=e(37951),r=e(77117),d=e(2357),o=e(97924),m=e(28318);function l({value:g,onChange:y,loadOptions:v,reloadOptionsOnChange:E=!1,Component:h,className:C,allowCustomValue:a,allowEmptyValue:P,disabled:D,placeholder:x,inputMinWidth:M,inputPlaceholder:b,autofocus:R=!1,onExpandedChange:S,noOptionMessageHandler:O=p,...U}){const[I,F]=(0,i.Z)(v,[v]),[w,K,L,V]=(0,m._)(R,S),H=M?Math.max(M,K):K,j=(0,f.wW)(o.N);if(!L){const A=(0,n.isObject)(g)?g.label:g,_=A!=null?String(A):void 0;return s.createElement(w,{onClick:E?void 0:F,disabled:D,Component:h||s.createElement(r.W,{className:(0,t.cx)(j.segment,{[j.queryPlaceholder]:x!==void 0&&!g,[j.disabled]:D},C)},_||x)})}return s.createElement(d.V,{...U,value:g&&!(0,n.isObject)(g)?{value:g}:g,placeholder:b,options:I.value??[],loadOptions:E?F:void 0,width:H,noOptionsMessage:O(I),allowCustomValue:a,allowEmptyValue:P,onClickOutside:()=>{V(!1)},onChange:A=>{V(!1),y(A)}})}function p(g){return g.loading?(0,u.t)("grafana-ui.segment-async.loading","Loading options..."):g.error?(0,u.t)("grafana-ui.segment-async.error","Failed to load options"):!Array.isArray(g.value)||g.value.length===0?(0,u.t)("grafana-ui.segment-async.no-options","No options found"):""}},58564:(Y,T,e)=>{"use strict";e.d(T,{X:()=>o});var t=e(9892),n=e(66111),c=e(53165),s=e(72648),i=e(4176),f=e(77117),u=e(97924),r=e(28318);const d=14;function o({value:m,onChange:l,Component:p,className:g,placeholder:y,inputPlaceholder:v,disabled:E,autofocus:h=!1,onExpandedChange:C,...a}){const P=(0,n.useRef)(null),[D,x]=(0,n.useState)(m),[M,b]=(0,n.useState)((0,i.X1)((m||"").toString(),d).width),[R,,S,O]=(0,r._)(h,C),U=(0,s.wW)(u.N);if((0,c.Z)(P,()=>{O(!1),l(D)}),!S)return n.createElement(R,{disabled:E,Component:p||n.createElement(f.W,{className:(0,t.cx)(U.segment,{[U.queryPlaceholder]:y!==void 0&&!D,[U.disabled]:E},g)},m||y)});const I=t.css`
    width: ${Math.max(M+20,32)}px;
  `;return n.createElement("input",{...a,ref:P,autoFocus:!0,className:(0,t.cx)("gf-form gf-form-input",I),value:D,placeholder:v,onChange:F=>{const{width:w}=(0,i.X1)(F.target.value,d);b(w),x(F.target.value)},onBlur:()=>{O(!1),l(D)},onKeyDown:F=>{[13,27].includes(F.keyCode)&&(O(!1),l(D))}})}},30991:(Y,T,e)=>{"use strict";e.d(T,{f:()=>f});var t=e(9892),n=e(66111),c=e(72648),s=e(11543),i=e(77117);const f=({label:r,htmlFor:d,children:o,fill:m})=>{const l=(0,c.wW)(u);return n.createElement(n.Fragment,null,n.createElement(s.Z,null,n.createElement(i.W,{htmlFor:d,width:12,className:l.label},r),o,m&&n.createElement("div",{className:l.fill},n.createElement(i.W,null,""))))},u=r=>({label:t.css`
    color: ${r.colors.primary.text};
  `,fill:t.css`
    flex-grow: 1;
    margin-bottom: ${r.spacing(.5)};
  `})},2357:(Y,T,e)=>{"use strict";e.d(T,{V:()=>s});var t=e(66111),n=e(72648),c=e(8581);function s({value:i,placeholder:f="",options:u=[],onChange:r,onClickOutside:d,loadOptions:o=void 0,width:m,noOptionsMessage:l="",allowCustomValue:p=!1,allowEmptyValue:g=!1,...y}){const v=(0,t.useRef)(null),E=(0,n.l4)();let h=m>0?m/E.spacing.gridSize:void 0,C,a={};return o?(C=c.qb,a={loadOptions:o,defaultOptions:!0}):C=c.Ph,t.createElement("div",{...y,ref:v},t.createElement(C,{width:h,noOptionsMessage:l,placeholder:f,autoFocus:!0,isOpen:!0,onChange:r,options:u,value:i,closeMenuOnSelect:!1,onCloseMenu:()=>{if(v&&v.current){const P=v.current.querySelector('input[id^="react-select-"]');P&&(P.value||g)?r({value:P.value,label:P.value}):d()}},allowCustomValue:p,...a}))}},97924:(Y,T,e)=>{"use strict";e.d(T,{N:()=>n});var t=e(9892);const n=c=>{const s="v1"in c?c.v1.palette:c.palette;return{segment:t.css`
      cursor: pointer;
      width: auto;
    `,queryPlaceholder:t.css`
      color: ${s.gray2};
    `,disabled:t.css`
      cursor: not-allowed;
      opacity: 0.65;
      box-shadow: none;
    `}}},28318:(Y,T,e)=>{"use strict";e.d(T,{_:()=>s});var t=e(66111),n=e(72648),c=e(31403);const s=(i,f)=>{const u=(0,t.useRef)(null),r=(0,n.wW)(c.gN),[d,o]=(0,t.useState)(i),[m,l]=(0,t.useState)(0),p=y=>{o(y),f&&f(y)};return[({Component:y,onClick:v,disabled:E})=>t.createElement("button",{type:"button",className:r,ref:u,disabled:E,onClick:()=>{p(!0),u&&u.current&&l(u.current.clientWidth*1.25),v?.()}},y),m,d,p]}},62997:(Y,T,e)=>{"use strict";e.d(T,{m:()=>c});var t=e(66111),n=e(39904);const c=({isOpen:s})=>{const i=s?"search":"angle-down",f=s?"sm":"md";return t.createElement(n.J,{name:i,size:f})}},8581:(Y,T,e)=>{"use strict";e.d(T,{M8:()=>oe,qb:()=>Q,gY:()=>Z,NU:()=>k,Ph:()=>_,eI:()=>M,LT:()=>re});var t=e(66111),n=e(58839),c=e(51306),s=e(7576),i=e(81658),f=e(13572),u=e(72648),r=e(39904),d=e(67487),o=e(62997),m=e(9892),l=e(46967);const p=t.forwardRef((G,le)=>{const{children:ge}=G,ne=(0,u.l4)(),ue=(0,l.H)({theme:ne,invalid:!1});return t.createElement("div",{className:(0,m.cx)(ue.suffix,m.css`
          position: relative;
        `),ref:le},ge)});p.displayName="IndicatorsContainer";var g=e(7804),y=e(73267);const v=(0,g.B)((G,le,ge)=>{const ne=(0,l.H)({theme:G,invalid:le});return{input:(0,m.cx)((0,y.nf)(G),m.css`
        width: 100%;
        max-width: 100%;
        display: flex;
        flex-direction: row;
        align-items: center;
        flex-wrap: wrap;
        justify-content: space-between;
        padding-right: 0;
        position: relative;
        box-sizing: border-box;
      `,ge&&m.css`
          padding-left: 0;
        `),prefix:(0,m.cx)(ne.prefix,m.css`
        position: relative;
      `)}}),E=t.forwardRef(function({focused:le,invalid:ge,disabled:ne,children:ue,innerProps:te,prefix:me,...q},se){const ae=(0,u.l4)(),pe=v(ae,ge,!!me);return t.createElement("div",{className:pe.input,...te,ref:se},me&&t.createElement("div",{className:(0,m.cx)(pe.prefix)},me),ue)});var h=e(8180),C=e(27501);const a=({innerProps:G,children:le})=>{const ge=(0,u.l4)(),ne=(0,C.D)(ge);return t.createElement("div",{...G,className:ne.multiValueContainer},le)},P=({children:G,innerProps:le})=>{const ge=(0,u.l4)(),ne=(0,C.D)(ge);return t.createElement(h.h,{...le,name:"times",size:"sm",className:ne.multiValueRemove})};var D=e(44800),x=e(85419);const M=G=>{const{isDisabled:le,isFocused:ge,children:ne,selectProps:{invalid:ue=!1}}=G,te=(0,u.l4)(),me=b(te,ge,le,ue);return t.createElement(D.c.SelectContainer,{...G,className:(0,m.cx)(me.wrapper,G.className)},ne)},b=(0,g.B)((G,le,ge,ne)=>{const ue=(0,l.H)({theme:G,invalid:ne});return{wrapper:(0,m.cx)(ue.wrapper,(0,y.RK)(G,ne),le&&m.css`
            ${(0,x.focusCss)(G.v1)}
          `,ge&&ue.inputDisabled,m.css`
          position: relative;
          box-sizing: border-box;
          /* The display property is set by the styles prop in SelectBase because it's dependant on the width prop  */
          flex-direction: row;
          flex-wrap: wrap;
          align-items: stretch;
          justify-content: space-between;

          min-height: 32px;
          height: auto;
          max-width: 100%;

          /* Input padding is applied to the InputControl so the menu is aligned correctly */
          padding: 0;
          cursor: ${ge?"not-allowed":"pointer"};
        `)}});var R=e(64861),S=e(874),O=e(24901);class U extends t.Component{render(){const{children:le}=this.props,{selectProps:ge}=this.props;if(ge&&Array.isArray(le)&&Array.isArray(le[0])&&ge.maxVisibleValues!==void 0&&!(ge.showAllSelectedWhenOpen&&ge.menuIsOpen)){const[ne,...ue]=le,te=ne.slice(0,ge.maxVisibleValues);return this.renderContainer([te,...ue])}return this.renderContainer(le)}renderContainer(le){const{isMulti:ge,theme:ne}=this.props,ue=(0,C.D)(ne),te=(0,m.cx)(ue.valueContainer,ge&&ue.valueContainerMulti);return t.createElement("div",{className:te},le)}}const I=(0,u.HE)(U);var F=e(54897);const w=(G,le)=>{if(Array.isArray(G)){const ge=G.filter(Boolean);return ge?.length?ge:void 0}if(typeof G=="object")return[G];if(typeof G=="string"||typeof G=="number"){const ge=K(G,le);if(ge)return[ge]}},K=(G,le)=>{for(const ge of le)if("options"in ge){let ne=K(G,ge.options);if(ne)return ne}else if("value"in ge&&ge.value===G)return ge;return null},L=G=>G.map(({description:le,...ge})=>ge),V=G=>{const{maxVisibleValues:le,selectedValuesCount:ge,menuIsOpen:ne,showAllSelectedWhenOpen:ue}=G;return le!==void 0&&ge>le&&!(ue&&ne)?t.createElement("span",{key:"excess-values",id:"excess-values"},"(+",ge-le,")"):null},H=G=>{const{children:le,innerProps:ge,selectProps:{menuIsOpen:ne,onMenuClose:ue,onMenuOpen:te},isFocused:me,isMulti:q,getValue:se,innerRef:ae}=G,pe=G.selectProps;return pe.renderControl?t.createElement(pe.renderControl,{isOpen:ne,value:q?se():se()[0],ref:ae,onClick:ne?ue:te,onBlur:ue,disabled:!!pe.disabled,invalid:!!pe.invalid}):t.createElement(E,{ref:ae,innerProps:ge,prefix:pe.prefix,focused:me,invalid:!!pe.invalid,disabled:!!pe.disabled},le)};function j({allowCustomValue:G=!1,allowCreateWhileLoading:le=!1,"aria-label":ge,autoFocus:ne=!1,backspaceRemovesValue:ue=!0,blurInputOnSelect:te,cacheOptions:me,className:q,closeMenuOnSelect:se=!0,components:ae,createOptionPosition:pe="last",defaultOptions:de,defaultValue:Me,disabled:Ke=!1,filterOption:st,formatCreateLabel:Ie,getOptionLabel:Ve,getOptionValue:_e,inputValue:tt,invalid:dt,isClearable:Oe=!1,id:ye,isLoading:Pe=!1,isMulti:be=!1,inputId:Be,isOpen:ze,isOptionDisabled:lt,isSearchable:ht=!0,loadOptions:vt,loadingMessage:bt="Loading options...",maxMenuHeight:ct=300,minMenuHeight:Pt,maxVisibleValues:ie,menuPlacement:Ce="auto",menuPosition:Ne,menuShouldPortal:Ze=!0,noOptionsMessage:Qe="No options found",onBlur:Le,onChange:Ue,onCloseMenu:ve,onCreateOption:Se,onInputChange:Fe,onKeyDown:je,onOpenMenu:Ge,onFocus:gt,openMenuOnFocus:mt=!1,options:Ye=[],placeholder:ft="Choose",prefix:St,renderControl:we,showAllSelectedWhenOpen:qe=!0,tabSelectsValue:Je=!0,value:ut,virtualized:Mt=!1,width:Wt,isValidNewOption:ln,formatOptionLabel:fn,hideSelectedOptions:pn}){const An=(0,u.l4)(),Ot=(0,C.D)(An),Ft=(0,t.useRef)(null),[Kt,Lt]=(0,t.useState)(!1),Ut=(0,F.O)(An,Wt);(0,t.useEffect)(()=>{if(vt&&ze&&Ft.current&&Ft.current.controlRef&&Ce==="auto"){const hn=window.innerHeight-Ft.current.controlRef.getBoundingClientRect().bottom;Lt(hn<ct)}},[ct,Ce,vt,ze]);const Rt=(0,t.useCallback)((hn,Dn)=>{if(be&&hn==null)return Ue([],Dn);Ue(hn,Dn)},[be,Ue]);let $t=n.ZP;const _t={};let jt={},an;if(be&&vt)an=ut;else if(be&&ut&&Array.isArray(ut)&&!vt)an=ut.map(hn=>{const Dn=K(hn.value??hn,Ye);return!G||Dn?Dn:typeof hn=="string"?(0,f.E)(hn):hn});else if(vt){const hn=Me||ut;an=hn?[hn]:[]}else an=w(ut,Ye);const cn={"aria-label":ge,autoFocus:ne,backspaceRemovesValue:ue,blurInputOnSelect:te,captureMenuScroll:!1,closeMenuOnSelect:se,defaultValue:Me,disabled:Ke,filterOption:st,getOptionLabel:Ve,getOptionValue:_e,hideSelectedOptions:pn,inputValue:tt,invalid:dt,isClearable:Oe,id:ye,isDisabled:Ke,isLoading:Pe,isMulti:be,inputId:Be,isOptionDisabled:lt,isSearchable:ht,maxMenuHeight:ct,minMenuHeight:Pt,maxVisibleValues:ie,menuIsOpen:ze,menuPlacement:Ce==="auto"&&Kt?"top":Ce,menuPosition:Ne,menuShouldBlockScroll:!0,menuPortalTarget:Ze&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:Le,onChange:Rt,onInputChange:Fe,onKeyDown:je,onMenuClose:ve,onMenuOpen:Ge,onFocus:gt,formatOptionLabel:fn,openMenuOnFocus:mt,options:Mt?L(Ye):Ye,placeholder:ft,prefix:St,renderControl:we,showAllSelectedWhenOpen:qe,tabSelectsValue:Je,value:be?an:an?.[0]};G&&($t=i.Z,_t.allowCreateWhileLoading=le,_t.formatCreateLabel=Ie??A,_t.onCreateOption=Se,_t.createOptionPosition=pe,_t.isValidNewOption=ln),vt&&($t=G?s.Z:c.Z,jt={loadOptions:vt,cacheOptions:me,defaultOptions:de});const rn=Mt?R.r4:R.SA;return t.createElement(t.Fragment,null,t.createElement($t,{ref:Ft,components:{MenuList:rn,Group:S.n,ValueContainer:I,IndicatorsContainer(hn){const{selectProps:Dn}=hn,{value:Rn,showAllSelectedWhenOpen:ea,maxVisibleValues:Fn,menuIsOpen:Vn}=Dn;if(Fn!==void 0){const aa=Rn.length,Sa=[...hn.children];return Sa.splice(-1,0,V({maxVisibleValues:Fn,selectedValuesCount:aa,showAllSelectedWhenOpen:ea,menuIsOpen:Vn})),t.createElement(p,{...hn},Sa)}return t.createElement(p,{...hn})},IndicatorSeparator(){return t.createElement(t.Fragment,null)},Control:H,Option:R.Qn,ClearIndicator(hn){const{clearValue:Dn}=hn;return t.createElement(r.J,{name:"times",role:"button","aria-label":"select-clear-value",className:Ot.singleValueRemove,onMouseDown:Rn=>{Rn.preventDefault(),Rn.stopPropagation(),Dn()}})},LoadingIndicator(){return t.createElement(d.$,{inline:!0})},LoadingMessage(){return t.createElement("div",{className:Ot.loadingMessage},bt)},NoOptionsMessage(){return t.createElement("div",{className:Ot.loadingMessage,"aria-label":"No options provided"},Qe)},DropdownIndicator(hn){return t.createElement(o.m,{isOpen:hn.selectProps.menuIsOpen})},SingleValue(hn){return t.createElement(O.P,{...hn,disabled:Ke})},SelectContainer:M,MultiValueContainer:a,MultiValueRemove:Ke?()=>null:P,...ae},styles:Ut,className:q,...cn,..._t,...jt}))}function A(G){return t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},t.createElement("div",null,G),t.createElement("div",{style:{flexGrow:1}}),t.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function _(G){return t.createElement(j,{...G})}function k(G){return t.createElement(j,{...G,isMulti:!0})}function Q(G){return t.createElement(j,{...G})}function re(G){return t.createElement(j,{virtualized:!0,...G})}function Z(G){return t.createElement(j,{virtualized:!0,...G})}function oe(G){return t.createElement(j,{...G,isMulti:!0})}},64861:(Y,T,e)=>{"use strict";e.d(T,{Qn:()=>y,SA:()=>m,r4:()=>g});var t=e(9892),n=e(82897),c=e.n(n),s=e(66111),i=e(32436),f=e(84559),u=e(72648),r=e(68226),d=e(39904),o=e(27501);const m=({children:v,maxHeight:E,innerRef:h,innerProps:C})=>{const a=(0,u.l4)(),P=(0,o.D)(a);return s.createElement("div",{...C,className:P.menu,style:{maxHeight:E},"aria-label":"Select options menu"},s.createElement(r.$,{scrollRefCallback:h,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},v))};m.displayName="SelectMenu";const l=37,p=7,g=({children:v,maxHeight:E,options:h,getValue:C})=>{const a=(0,u.l4)(),P=(0,o.D)(a),[D]=C(),M=(D?h.findIndex(O=>O.value===D.value):0)*l;if(!Array.isArray(v))return null;const R=((0,n.max)(h.map(O=>O.label?.length))??0)*p,S=Math.min(h.length*l,E);return s.createElement(i.t7,{className:P.menu,height:S,width:R,"aria-label":"Select options menu",itemCount:v.length,itemSize:l,initialScrollOffset:M},({index:O,style:U})=>s.createElement("div",{style:{...U,overflow:"hidden"}},v[O]))};g.displayName="VirtualizedSelectMenu";const y=({children:v,data:E,innerProps:h,innerRef:C,isFocused:a,isSelected:P,renderOptionLabel:D})=>{const x=(0,u.l4)(),M=(0,o.D)(x),b=E.icon?(0,f.iJ)(E.icon):void 0;return s.createElement("div",{ref:C,className:(0,t.cx)(M.option,a&&M.optionFocused,P&&M.optionSelected,E.isDisabled&&M.optionDisabled),...h,"aria-label":"Select option",title:E.title},b&&s.createElement(d.J,{name:b,className:M.optionIcon}),E.imgUrl&&s.createElement("img",{className:M.optionImage,src:E.imgUrl,alt:E.label||E.value}),s.createElement("div",{className:M.optionBody},s.createElement("span",null,D?D(E):v),E.description&&s.createElement("div",{className:M.optionDescription},E.description),E.component&&s.createElement(E.component,null)))};y.displayName="SelectMenuOptions"},874:(Y,T,e)=>{"use strict";e.d(T,{n:()=>r});var t=e(9892),n=e(66111),c=e(7804),s=e(72648),i=e(39904);const f=(0,c.B)(d=>({header:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-start;
      justify-items: center;
      cursor: pointer;
      padding: 7px 10px;
      width: 100%;
      border-bottom: 1px solid ${d.colors.background.secondary};

      &:hover {
        color: ${d.colors.text.maxContrast};
      }
    `,label:t.css`
      flex-grow: 1;
    `,icon:t.css`
      padding-right: 2px;
    `}));class u extends n.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(o=>({expanded:!o.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:o}=this.props.selectProps.value;o&&this.props.options.some(m=>m.value===o)&&this.setState({expanded:!0})}}componentDidUpdate(o){o.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:o,label:m,theme:l}=this.props,{expanded:p}=this.state,g=f(l);return n.createElement("div",null,n.createElement("div",{className:g.header,onClick:this.onToggleChildren},n.createElement("span",{className:g.label},m),n.createElement(i.J,{className:g.icon,name:p?"angle-up":"angle-down"})," "),p&&o)}}const r=(0,s.HE)(u)},24901:(Y,T,e)=>{"use strict";e.d(T,{P:()=>l});var t=e(9892),n=e(66111),c=e(44800),s=e(84559),i=e(72648);function f(g,y={}){const{duration:v=250,delay:E=250}=y,[h,C]=(0,n.useState)(g),a=(0,n.useRef)();return(0,n.useEffect)(()=>{let P;if(g)P=setTimeout(()=>{a.current=new Date,C(g)},E);else{const D=a.current?Date.now()-a.current.valueOf():0,x=()=>{a.current=void 0,C(g)};D>=v?x():P=setTimeout(x,v-D)}return()=>{P&&(clearTimeout(P),P=void 0)}},[g,v,E]),h}var u=e(39904),r=e(67487),d=e(19801),o=e(41200);const m=g=>({singleValue:t.css`
      label: singleValue;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
      grid-area: 1 / 1 / 2 / 3;
    `,spinnerWrapper:t.css`
      width: 16px;
      height: 16px;
      display: inline-block;
      margin-right: 10px;
      position: relative;
      vertical-align: middle;
      overflow: hidden;
    `,spinnerIcon:t.css`
      width: 100%;
      height: 100%;
      position: absolute;
    `,optionIcon:t.css`
      margin-right: ${g.spacing(1)};
      color: ${g.colors.text.secondary};
    `,disabled:t.css`
      color: ${g.colors.text.disabled};
    `,isOpen:t.css`
      color: ${g.colors.text.disabled};
    `}),l=g=>{const{children:y,data:v,isDisabled:E}=g,h=(0,i.wW)(m),C=f(v.loading||!1,{delay:250,duration:750}),a=v.icon?(0,s.iJ)(v.icon):void 0;return n.createElement(c.c.SingleValue,{...g,className:(0,t.cx)(h.singleValue,E&&h.disabled,g.selectProps.menuIsOpen&&h.isOpen)},v.imgUrl?n.createElement(p,{loading:C,imgUrl:v.imgUrl,styles:h,alt:v.label??v.value}):n.createElement(n.Fragment,null,n.createElement(o.R,{horizontal:!0,size:16,visible:C,duration:150},n.createElement("div",{className:h.spinnerWrapper},n.createElement(r.$,{className:h.spinnerIcon,inline:!0}))),a&&n.createElement(u.J,{name:a,role:"img",className:h.optionIcon})),!v.hideText&&y)},p=g=>n.createElement("div",{className:g.styles.spinnerWrapper},n.createElement(d.n,{duration:150,visible:g.loading},n.createElement(r.$,{className:g.styles.spinnerIcon,inline:!0})),n.createElement(d.n,{duration:150,visible:!g.loading},n.createElement("img",{className:g.styles.spinnerIcon,src:g.imgUrl,alt:g.alt})))},27501:(Y,T,e)=>{"use strict";e.d(T,{D:()=>c});var t=e(9892),n=e(7804);const c=(0,n.B)(s=>({menu:t.css`
      label: grafana-select-menu;
      background: ${s.components.dropdown.background};
      box-shadow: ${s.shadows.z3};
      position: relative;
      min-width: 100%;
      z-index: 1;
    `,option:t.css`
      label: grafana-select-option;
      padding: 8px;
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;

      &:hover {
        background: ${s.colors.action.hover};
      }
    `,optionIcon:t.css`
      margin-right: ${s.spacing(1)};
    `,optionImage:t.css`
      label: grafana-select-option-image;
      width: 16px;
      margin-right: 10px;
    `,optionDescription:t.css`
      label: grafana-select-option-description;
      font-weight: normal;
      font-size: ${s.typography.size.sm};
      color: ${s.colors.text.secondary};
      white-space: normal;
      line-height: ${s.typography.body.lineHeight};
    `,optionBody:t.css`
      label: grafana-select-option-body;
      display: flex;
      font-weight: ${s.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,optionFocused:t.css`
      label: grafana-select-option-focused;
      background: ${s.colors.action.focus};
    `,optionSelected:t.css`
      background: ${s.colors.action.selected};
    `,optionDisabled:t.css`
      label: grafana-select-option-disabled;
      background-color: ${s.colors.action.disabledBackground};
      color: ${s.colors.action.disabledText};
      cursor: not-allowed;
    `,singleValue:t.css`
      label: grafana-select-single-value;
      color: ${s.components.input.text};
      grid-area: 1 / 1 / 2 / 3;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
    `,valueContainer:t.css`
      label: grafana-select-value-container;
      align-items: center;
      display: grid;
      position: relative;
      box-sizing: border-box;
      flex: 1 1 0%;
      outline: none;
      overflow: hidden;
    `,valueContainerMulti:t.css`
      label: grafana-select-value-container-multi;
      flex-wrap: wrap;
      display: flex;
    `,loadingMessage:t.css`
      label: grafana-select-loading-message;
      padding: ${s.spacing(1)};
      text-align: center;
      width: 100%;
    `,multiValueContainer:t.css`
      label: grafana-select-multi-value-container;
      display: flex;
      align-items: center;
      line-height: 1;
      background: ${s.colors.background.secondary};
      border-radius: ${s.shape.borderRadius()};
      margin: ${s.spacing(.25,1,.25,0)};
      padding: ${s.spacing(.25,0,.25,1)};
      color: ${s.colors.text.primary};
      font-size: ${s.typography.size.sm};

      &:hover {
        background: ${s.colors.emphasize(s.colors.background.secondary)};
      }
    `,multiValueRemove:t.css`
      label: grafana-select-multi-value-remove;
      margin: ${s.spacing(0,.5)};
      cursor: pointer;
      svg {
        margin-bottom: 0;
      }
    `,singleValueRemove:t.css`
      cursor: pointer;
      &:hover {
        color: ${s.colors.text.primary};
      }
    `}))},54897:(Y,T,e)=>{"use strict";e.d(T,{O:()=>c,Z:()=>n});var t=e(66111);function n(s){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(i){return{...i,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:i})=>({maxHeight:i}),multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:i=>({...i,color:s.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function c(s,i){return(0,t.useMemo)(()=>({...n(s),menuPortal:f=>({...f,zIndex:s.zIndex.portal}),menu:({top:f,bottom:u,position:r})=>({top:f,bottom:u,position:r,minWidth:"100%",zIndex:s.zIndex.dropdown}),container:()=>({width:i?s.spacing(i):"100%",display:i==="auto"?"inline-flex":"flex"}),option:(f,u)=>({...f,opacity:u.isDisabled?.5:1})}),[s,i])}},60857:()=>{"use strict"},41490:(Y,T,e)=>{"use strict";e.d(T,{F:()=>p});var t=e(82897),n=e.n(t),c=e(66111),s=e(91017),i=e(59980),f=e(15402),u=e(24434),r=e(53704),d=e(71735),o=e(79086),m=e(5562);function l(g){return{label:g,value:stringToMs(g)}}class p extends c.PureComponent{constructor(y){super(y),this.propsSubject=new s.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,r.w)(y=>m.dP.isLive(y.interval)?(0,i.of)({}):y.loading?f.C:(0,u.F)((0,o.e0)(y.interval))),(0,d.b)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(y){m.dP.isLive(y.interval)&&m.dP.isLive(this.props.interval)||(0,t.isEqual)(y,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},50954:(Y,T,e)=>{"use strict";e.d(T,{PR:()=>E,ZH:()=>m,rD:()=>p});var t=e(82897),n=e.n(t),c=e(33750),s=e(82229),i=e(69098),f=e(2576),u=e(53768),r=e(76095),d=e(92103);const o=["reduceOptions","orientation"];function m(h,C,a){let P=h.options;if(h.fieldConfig=h.fieldConfig||{defaults:{},overrides:[]},C==="singlestat"&&a.angular)return l(h,a);for(const D of o)a.hasOwnProperty(D)&&(P[D]=(0,t.cloneDeep)(a[D]));return P}function l(h,C){const a=C.angular,P=c.TB.getIfExists(a.valueName),D={reduceOptions:{calcs:[P?P.id:c.gz.mean]},orientation:s.wm.Horizontal},x={};if(a.format&&(x.unit=a.format),a.tableColumn&&(D.reduceOptions.fields=`/^${a.tableColumn}$/`),a.nullPointMode&&(x.nullValueMode=a.nullPointMode),a.nullText&&(x.noValue=a.nullText),(a.decimals||a.decimals===0)&&(x.decimals=a.decimals),a.thresholds&&a.colors){const b=a.thresholds.split(",").map(S=>Number(S.trim())),R=[];for(const S of a.colors){const O=R.length-1;O>=0?R.push({value:b[O],color:S}):R.push({value:-1/0,color:S})}x.thresholds={mode:i.H.Absolute,steps:R}}const M=(0,f.Jb)(a,x.thresholds);return M&&M.length&&(x.mappings=M),a.gauge&&a.gauge.show&&(x.min=a.gauge.minValue,x.max=a.gauge.maxValue),h.fieldConfig.defaults=x,D}function p(h){if(!h.options)return{};const C=parseFloat(h.pluginVersion||"6.1");let a=h.options;C<6.2&&(a=y(a)),C<6.3&&(a=g(a));const{fieldOptions:P}=a;if(C<6.6&&P){if(P&&P.override){const{override:M,...b}=a.fieldOptions;a={...a,fieldOptions:{...b,overrides:[]}}}let D=P?.defaults?.thresholds;D?delete P.defaults.thresholds:(D=P?.thresholds,delete P.thresholds),D&&(P.defaults.thresholds={mode:i.H.Absolute,steps:D});const{defaults:x}=P;x.color&&typeof x.color=="string"&&(x.color={mode:u.S.Fixed,fixedColor:x.color}),(0,r.gb)(x)}if(C<7&&(h.fieldConfig=h.fieldConfig||{defaults:{},overrides:[]},h.fieldConfig={defaults:P&&P.defaults?{...h.fieldConfig.defaults,...P.defaults}:h.fieldConfig.defaults,overrides:P&&P.overrides?[...h.fieldConfig.overrides,...P.overrides]:h.fieldConfig.overrides},P&&(a.reduceOptions={values:P.values,limit:P.limit,calcs:P.calcs}),delete a.fieldOptions),C<7.1){const D=h.fieldConfig.defaults.title;D!=null&&(h.fieldConfig.defaults.displayName=D,delete h.fieldConfig.defaults.title)}if(C<8){const D=h.fieldConfig?.defaults;let x=D?.unit;x==="percent"?((0,t.isNumber)(D.min)||(D.min=0),(0,t.isNumber)(D.max)||(D.max=100)):x==="percentunit"&&((0,t.isNumber)(D.min)||(D.min=0),(0,t.isNumber)(D.max)||(D.max=1))}return a}function g(h){const{fieldOptions:C}=h;if(!C)return h;const{mappings:a,...P}=h.fieldOptions;let D;return h.thresholds&&(D={mode:i.H.Absolute,steps:v(h.thresholds)}),{...h,fieldOptions:{...P,defaults:{...C.defaults,mappings:a,thresholds:D}}}}function y(h){const{valueOptions:C}=h;if(!C)return h;const a={},P={};if(a.mappings=h.valueMappings,a.thresholds=h.thresholds,a.defaults=P,P.unit=C.unit,P.decimals=C.decimals,C.stat){const x=c.TB.get(C.stat);x&&(a.calcs=[x.id])}P.min=h.minValue,P.max=h.maxValue;const D={...h,fieldOptions:a};return(0,t.omit)(D,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function v(h){if(!h||!h.length)return;const C=h.map(a=>({value:a.value===null?-1/0:a.value,color:a.color}));return(0,d.bP)(C),C[0].value=-1/0,C}function E(h){return(0,f.Jb)(h)}},70161:(Y,T,e)=>{"use strict";e.d(T,{PR:()=>t.PR,ZH:()=>t.ZH,rD:()=>t.rD});var t=e(50954)},97759:(Y,T,e)=>{"use strict";e.d(T,{U:()=>m});var t=e(9892),n=e(65788),c=e(74560),s=e(66111),i=e(72648),f=e(89188);const u=l=>{const{value:p,children:g,visible:y,placement:v,tipFormatter:E,...h}=l,C=(0,s.useRef)(),a=(0,s.useRef)(null),P=(0,i.wW)(r);function D(){a.current!==null&&cancelAnimationFrame(a.current)}function x(){a.current=requestAnimationFrame(()=>{C.current?.forcePopupAlign?.()})}return(0,s.useEffect)(()=>(y?x():D(),D),[p,y]),s.createElement(f.Z,{overlayClassName:P.tooltip,placement:v,overlay:E??p,overlayInnerStyle:{minHeight:"auto"},ref:C,visible:y,...h},g)},r=l=>({tooltip:(0,t.css)({position:"absolute",display:"block",visibility:"visible",fontSize:l.typography.bodySmall.fontSize,opacity:.9,padding:3,zIndex:l.zIndex.tooltip})}),d=u;var o=e(29571);const m=({min:l,max:p,onChange:g,onAfterChange:y,orientation:v="horizontal",reverse:E,step:h,formatTooltipResult:C,value:a,tooltipAlwaysVisible:P=!0})=>{const D=(0,s.useCallback)(O=>{g?.(typeof O=="number"?[O,O]:O)},[g]),x=(0,s.useCallback)(O=>{y?.(typeof O=="number"?[O,O]:O)},[y]),M=v==="horizontal",b=(0,i.l4)(),R=(0,o.W)(b,M),S=(O,U)=>s.createElement(d,{value:U.value,visible:P||U.dragging,tipFormatter:C?()=>C(U.value):void 0,placement:M?"top":"right"},O);return s.createElement("div",{className:(0,t.cx)(R.container,R.slider)},s.createElement(n.Global,{styles:R.tooltip}),s.createElement(c.Z,{min:l,max:p,step:h,defaultValue:a,range:!0,onChange:D,onAfterChange:x,vertical:!M,reverse:E,handleRender:S}))};m.displayName="RangeSlider"},90330:(Y,T,e)=>{"use strict";e.d(T,{i:()=>r});var t=e(9892),n=e(65788),c=e(74560),s=e(66111),i=e(72648),f=e(46967),u=e(29571);const r=({min:d,max:o,onChange:m,onAfterChange:l,orientation:p="horizontal",reverse:g,step:y,value:v,ariaLabelForHandle:E,marks:h,included:C})=>{const a=p==="horizontal",P=(0,i.l4)(),D=(0,u.W)(P,a,Boolean(h)),x=c.Z,[M,b]=(0,s.useState)(v??d),R=(0,s.useCallback)(w=>{const K=typeof w=="number"?w:w[0];b(K),m?.(K)},[b,m]),S=(0,s.useCallback)(w=>{let K=+w.target.value;Number.isNaN(K)&&(K=0),b(K),m&&m(K),l&&l(K)},[m,l]),O=(0,s.useCallback)(w=>{const K=+w.target.value;K>o?b(o):K<d&&b(d)},[o,d]),U=(0,s.useCallback)(w=>{const K=typeof w=="number"?w:w[0];l?.(K)},[l]),I=a?[]:[D.sliderInputVertical],F=a?[]:[D.sliderInputFieldVertical];return s.createElement("div",{className:(0,t.cx)(D.container,D.slider)},s.createElement(n.Global,{styles:D.tooltip}),s.createElement("div",{className:(0,t.cx)(D.sliderInput,...I)},s.createElement(x,{min:d,max:o,step:y,defaultValue:v,value:M,onChange:R,onAfterChange:U,vertical:!a,reverse:g,ariaLabelForHandle:E,marks:h,included:C}),s.createElement(f.I,{type:"text",className:(0,t.cx)(D.sliderInputField,...F),value:M,onChange:S,onBlur:O,min:d,max:o})))};r.displayName="Slider"},29571:(Y,T,e)=>{"use strict";e.d(T,{W:()=>s});var t=e(9892),n=e(65788),c=e(7804);const s=(0,c.B)((i,f,u=!1)=>{const{spacing:r}=i,d=i.colors.border.strong,o=i.colors.primary.main,m=i.colors.primary.main,p=`box-shadow: 0px 0px 0px 6px ${i.colors.primary.transparent}`;return{container:t.css`
      width: 100%;
      margin: ${f?"inherit":`${r(1,3,1,1)}`};
      padding-bottom: ${f&&u?i.spacing(1):"inherit"};
      height: ${f?"auto":"100%"};
    `,slider:t.css`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${i.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${i.colors.text.disabled};
        font-size: ${i.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${i.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${m};
        box-shadow: ${i.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${p};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${i.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${i.colors.text.primary};
        border-color: ${i.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${o};
      }
      .rc-slider-rail {
        background-color: ${d};
        cursor: pointer;
      }
    `,tooltip:n.css`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${i.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${i.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      width: 100%;
    `,sliderInputVertical:t.css`
      flex-direction: column;
      height: 100%;

      .rc-slider {
        margin: 0;
        order: 2;
      }
    `,sliderInputField:t.css`
      margin-left: ${i.spacing(3)};
      width: 60px;
      input {
        text-align: center;
      }
    `,sliderInputFieldVertical:t.css`
      margin: 0 0 ${i.spacing(3)} 0;
      order: 1;
    `}})},67307:(Y,T,e)=>{"use strict";e.d(T,{b:()=>y});var t=e(82897),n=e(66111),c=e(96905),s=e(99098),i=e(72990),f=e(40538),u=e(3200),r=e(13347),d=e(2445),o=e(17587),m=e(83881),l=e(45778);function p(v,E){const h=v.y.values.length,C={...v.y.config,...E},a=v.x??{name:"",values:[...Array(h).keys()],type:s.fS.number,config:{}};let P={refId:"sparkline",fields:[a,{...v.y,config:C}],length:h};return(0,o.lP)(a.values)||(P=(0,m.aK)(P,0)),(0,l.w)({frame:P})}const g={drawStyle:f.l8.Line,showPoints:f.Jp.Auto,axisPlacement:f.LB.Hidden,pointSize:2};class y extends n.PureComponent{constructor(E){super(E);const h=p(E.sparkline,E.config);this.state={data:(0,d.Bj)(h,(0,d.i7)(h)),alignedDataFrame:h,configBuilder:this.prepareConfig(h)}}static getDerivedStateFromProps(E,h){const C=p(E.sparkline,E.config);return C?{...h,data:(0,d.Bj)(C,(0,d.i7)(C)),alignedDataFrame:C}:{...h}}componentDidUpdate(E,h){const{alignedDataFrame:C}=this.state;if(!C)return;let a=!1;E.sparkline!==this.props.sparkline?a=!(0,c.Ch)(this.state.alignedDataFrame,h.alignedDataFrame):a=!(0,t.isEqual)(E.config,this.props.config),a&&this.setState({configBuilder:this.prepareConfig(C)})}getYRange(E){let{min:h,max:C}=this.state.alignedDataFrame.fields[1].state?.range;return h===C?(h===0?C=100:(h=0,C*=2),[h,C]):[Math.max(h,E.config.min??-1/0),Math.min(C,E.config.max??1/0)]}prepareConfig(E){const{theme:h}=this.props,C=new r.U;C.setCursor({show:!1,x:!1,y:!1});const a=E.fields[0];C.addScale({scaleKey:"x",orientation:f.wN.Horizontal,direction:f.bQ.Right,isTime:!1,range:()=>{const{sparkline:P}=this.props;if(P.x){if(P.timeRange&&P.x.type===s.fS.time)return[P.timeRange.from.valueOf(),P.timeRange.to.valueOf()];const D=P.x.values;return[D[0],D[D.length-1]]}return[0,P.y.values.length-1]}}),C.addAxis({scaleKey:"x",theme:h,placement:f.LB.Hidden});for(let P=0;P<E.fields.length;P++){const D=E.fields[P],x=D.config,M={...g,...x.custom};if(D===a||D.type!==s.fS.number)continue;const b=x.unit||"__fixed";C.addScale({scaleKey:b,orientation:f.wN.Vertical,direction:f.bQ.Up,range:()=>this.getYRange(D)}),C.addAxis({scaleKey:b,theme:h,placement:f.LB.Hidden});const R=(0,i.fD)(D),S=R.getCalculator(D,h)(0,0),O=M.drawStyle===f.l8.Points?f.Jp.Always:M.showPoints;C.addSeries({pxAlign:!1,scaleKey:b,theme:h,colorMode:R,thresholds:x.thresholds,drawStyle:M.drawStyle,lineColor:M.lineColor??S,lineWidth:M.lineWidth,lineInterpolation:M.lineInterpolation,showPoints:O,pointSize:M.pointSize,fillOpacity:M.fillOpacity,fillColor:M.fillColor,lineStyle:M.lineStyle,gradientMode:M.gradientMode})}return C}render(){const{data:E,configBuilder:h}=this.state,{width:C,height:a,sparkline:P}=this.props;return n.createElement(u.N,{data:E,config:h,width:C,height:a,timeRange:P.timeRange})}}},67487:(Y,T,e)=>{"use strict";e.d(T,{$:()=>f});var t=e(9892),n=e(66111),c=e(7804),s=e(39904);const i=(0,c.B)((u,r)=>({wrapper:t.css`
      font-size: ${u}px;
      ${r?t.css`
            display: inline-block;
          `:""}
    `})),f=({className:u,inline:r=!1,iconClassName:d,style:o,size:m=16})=>{const l=i(m,r);return n.createElement("div",{"data-testid":"Spinner",style:o,className:(0,t.cx)(l.wrapper,u)},n.createElement(s.J,{className:(0,t.cx)("fa-spin",d),name:"fa fa-spinner"}))}},71294:(Y,T,e)=>{"use strict";e.d(T,{m:()=>f});var t=e(82897),n=e.n(t),c=e(66111),s=e(33750),i=e(8581);class f extends c.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:r,allowMultiple:d,defaultStat:o,onChange:m}=this.props,l=s.TB.list(r);if(l.length!==r.length){const p=l.map(y=>y.id),g=(0,t.difference)(r,p);console.warn("Unknown stats",g,r),m(l.map(y=>y.id))}!d&&r.length>1&&(console.warn("Removing extra stat",r),m([r[0]])),o&&r.length<1&&m([o])},this.onSelectionChange=r=>{const{onChange:d}=this.props;Array.isArray(r)?d(r.map(o=>o.value)):d(r&&r.value?[r.value]:[])}}componentDidMount(){this.checkInput()}componentDidUpdate(r){this.checkInput()}render(){const{stats:r,allowMultiple:d,defaultStat:o,placeholder:m,className:l,menuPlacement:p,width:g,inputId:y}=this.props,v=s.TB.selectOptions(r);return c.createElement(i.Ph,{value:v.current,className:l,isClearable:!o,isMulti:d,width:g,isSearchable:!0,options:v.options,placeholder:m,onChange:this.onSelectionChange,menuPlacement:p,inputId:y})}}f.defaultProps={allowMultiple:!1}},8944:(Y,T,e)=>{"use strict";e.d(T,{r:()=>d,x:()=>o});var t=e(9892),n=e(82897),c=e.n(n),s=e(66111),i=e(55024),f=e(72648),u=e(7804),r=e(85419);const d=s.forwardRef(({value:l,checked:p,onChange:g,id:y,label:v,disabled:E,...h},C)=>{p&&(0,i.d)("Switch","checked prop","value");const a=(0,f.l4)(),P=m(a),D=(0,s.useRef)(y||(0,n.uniqueId)("switch-"));return s.createElement("div",{className:(0,t.cx)(P.switch)},s.createElement("input",{type:"checkbox",disabled:E,checked:l,onChange:x=>{!E&&g?.(x)},id:D.current,...h,ref:C}),s.createElement("label",{htmlFor:D.current,"aria-label":v??"Toggle switch"}))});d.displayName="Switch";const o=s.forwardRef(({transparent:l,className:p,showLabel:g,label:y,value:v,id:E,...h},C)=>{const a=(0,f.l4)(),P=m(a,l);return s.createElement("div",{className:(0,t.cx)(P.inlineContainer,p,h.disabled&&P.disabled)},g&&s.createElement("label",{htmlFor:E,className:(0,t.cx)(P.inlineLabel,v&&P.inlineLabelEnabled,"inline-switch-label")},y),s.createElement(d,{...h,id:E,label:y,ref:C,value:v}))});o.displayName="Switch";const m=(0,u.B)((l,p)=>({switch:t.css`
      width: 32px;
      height: 16px;
      position: relative;

      input {
        opacity: 0;
        left: -100vw;
        z-index: -1000;
        position: absolute;

        &:disabled + label {
          background: ${l.colors.action.disabledBackground};
          cursor: not-allowed;
        }

        &:checked + label {
          background: ${l.colors.primary.main};
          border-color: ${l.colors.primary.main};

          &:hover {
            background: ${l.colors.primary.shade};
          }

          &::after {
            transform: translate3d(18px, -50%, 0);
            background: ${l.colors.primary.contrastText};
          }
        }

        &:focus + label,
        &:focus-visible + label {
          ${(0,r.getFocusStyles)(l)}
        }

        &:focus:not(:focus-visible) + label {
          ${(0,r.getMouseFocusStyles)(l)}
        }
      }

      label {
        width: 100%;
        height: 100%;
        cursor: pointer;
        border: none;
        border-radius: ${l.shape.radius.pill};
        background: ${l.components.input.background};
        border: 1px solid ${l.components.input.borderColor};
        transition: all 0.3s ease;

        &:hover {
          border-color: ${l.components.input.borderHover};
        }

        &::after {
          position: absolute;
          display: block;
          content: '';
          width: 12px;
          height: 12px;
          border-radius: ${l.shape.radius.circle};
          background: ${l.colors.text.secondary};
          box-shadow: ${l.shadows.z1};
          top: 50%;
          transform: translate3d(2px, -50%, 0);
          transition: transform 0.2s cubic-bezier(0.19, 1, 0.22, 1);
        }
      }
    `,inlineContainer:t.css`
      padding: ${l.spacing(0,1)};
      height: ${l.spacing(l.components.height.md)};
      display: inline-flex;
      align-items: center;
      background: ${p?"transparent":l.components.input.background};
      border: 1px solid ${p?"transparent":l.components.input.borderColor};
      border-radius: ${l.shape.borderRadius()};

      &:hover {
        border: 1px solid ${p?"transparent":l.components.input.borderHover};

        .inline-switch-label {
          color: ${l.colors.text.primary};
        }
      }
    `,disabled:t.css`
      background-color: rgba(204, 204, 220, 0.04);
      color: rgba(204, 204, 220, 0.6);
      border: 1px solid rgba(204, 204, 220, 0.04);
    `,inlineLabel:t.css`
      cursor: pointer;
      padding-right: ${l.spacing(1)};
      color: ${l.colors.text.secondary};
      white-space: nowrap;
    `,inlineLabelEnabled:t.css`
      color: ${l.colors.text.primary};
    `}))},18607:(Y,T,e)=>{"use strict";e.d(T,{W:()=>m});var t=e(9892),n=e(66111),c=e(72142),s=e(79841),i=e(8180),f=e(68226),u=e(94893),r=e(7804),d=e(72648);const o=(0,r.B)(l=>({container:t.css`
      height: 100%;
    `,tabContent:t.css`
      padding: ${l.spacing(2)};
      background-color: ${l.colors.background.primary};
      height: calc(100% - ${l.components.menuTabs.height}px);
    `,close:t.css`
      position: absolute;
      right: 16px;
      top: 5px;
      cursor: pointer;
      font-size: ${l.typography.size.lg};
    `,tabs:t.css`
      padding-top: ${l.spacing(1)};
      border-color: ${l.colors.border.weak};
      ul {
        margin-left: ${l.spacing(2)};
      }
    `}));function m(l){const[p,g]=(0,n.useState)(l.tabs.some(P=>P.value===l.defaultTab)?l.defaultTab:l.tabs?.[0].value),y=P=>{g(P.value)},{tabs:v,onClose:E,closeIconTooltip:h}=l,C=(0,d.l4)(),a=o(C);return n.createElement("div",{className:a.container},n.createElement(c.J,{className:a.tabs},v.map(P=>n.createElement(s.O,{key:P.value,label:P.label,active:P.value===p,onChangeTab:()=>y(P),icon:P.icon})),n.createElement(i.h,{className:a.close,onClick:E,name:"times",title:h??"Close"})),n.createElement(f.$,{autoHeightMin:"100%"},n.createElement(u.I,{className:a.tabContent},v.find(P=>P.value===p)?.content)))}},89361:(Y,T,e)=>{"use strict";e.d(T,{i:()=>u,c:()=>d});var t=e(66111),n=e(33750),c=e(68183),s=e(9892);const i=o=>{const m=s.css`
    width: 100%;
    list-style: none;
  `,l=s.css`
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  `;return o.value&&!Array.isArray(o.value)?t.createElement("span",null,o.value):o.value&&Array.isArray(o.value)&&o.value.length>0?t.createElement("ul",{className:m},o.value.map((p,g)=>{const y=Object.keys(p)[0];return t.createElement("li",{className:l,key:g},t.createElement("span",null,y),t.createElement("span",null,p[y]))})):f},f=()=>t.createElement("span",null,"\xA0");function u(o){const{totalColumnsWidth:m,footerGroups:l,isPaginationVisible:p,tableStyles:g}=o,y=c.wl.components.Panels.Visualization.Table;return t.createElement("div",{style:{position:p?"relative":"absolute",width:m?`${m}px`:"100%",bottom:"0px"}},l.map(v=>{const{key:E,...h}=v.getFooterGroupProps();return t.createElement("div",{className:g.tfoot,...h,key:E,"data-testid":y.footer},v.headers.map(C=>r(C,g)))}))}function r(o,m){const l=o.getHeaderProps();return l?(l.style=l.style??{},l.style.position="absolute",l.style.justifyContent=o.justifyContent,t.createElement("div",{className:m.headerCell,...l},o.render("Footer"))):null}function d(o,m,l){if(m===void 0)return f;if(l){if(m[o]===void 0)return f;const p=n.TB.get(n.gz.count).name;return i({value:[{[p]:String(m[o])}]})}return i({value:m[o]})}},24115:(Y,T,e)=>{"use strict";e.d(T,{A:()=>d,U:()=>r});var t=e(66111),n=e(99601),c=e(99098),s=e(83881),i=e(40538),f=e(67307),u=e(48010);const r={drawStyle:i.l8.Line,lineInterpolation:i.KC.Smooth,lineWidth:1,fillOpacity:17,gradientMode:i.FI.Hue,pointSize:2,barAlignment:i.pu.Center,showPoints:i.Jp.Never},d=l=>{const{field:p,innerWidth:g,tableStyles:y,cell:v,cellProps:E,timeRange:h}=l,C=o(v.value);if(!C)return t.createElement("div",{...E,className:y.cellContainer},"no data");const a=(0,n.dz)(C.y);C.y.config.min=a.min,C.y.config.max=a.max,C.y.state={range:a},C.timeRange=h;const P=m(p),D={color:p.config.color,custom:{...r,...P}};return t.createElement("div",{...E,className:y.cellContainer},t.createElement(f.b,{width:g,height:y.cellHeightInner,sparkline:C,config:D,theme:y.theme}))};function o(l){if(Array.isArray(l))return{y:{name:"test",type:c.fS.number,values:l,config:{}}};if((0,s.aY)(l)){const p=l.fields.find(y=>y.type===c.fS.time),g=l.fields.find(y=>y.type===c.fS.number);if(p&&g)return{x:p,y:g}}}function m(l){let p=(0,u.S_)(l);if(p.type===i.h2.Auto&&(p={...p,type:i.h2.Sparkline}),p.type===i.h2.Sparkline)return p;throw new Error(`Excpected options type ${i.h2.Sparkline} but got ${p.type}`)}},88144:(Y,T,e)=>{"use strict";e.d(T,{i:()=>oe});var t=e(66111),n=e(9827),c=e(32436),s=e(33750),i=e(40538),f=e(72648),u=e(68226),r=e(78889),d=e(89361),o=e(68183),m=e(50622),l=e(39904),p=e(9892),g=e(56921),y=e(94437),v=e(52081),E=e(64353),h=e(8180),C=e(31403),a=e(14747),P=e(58255),D=e(7804);const x=28,M=x*5,b=({options:G,values:le,caseSensitive:ge,onChange:ne})=>{const ue=(0,f.l4)(),te=R(ue),[me,q]=(0,t.useState)(""),se=(0,t.useMemo)(()=>new RegExp(me,ge?void 0:"i"),[me,ge]),ae=(0,t.useMemo)(()=>G.filter(st=>st.label===void 0?!1:se.test(st.label)),[G,se]),pe=ue.spacing.gridSize,de=(0,t.useMemo)(()=>Math.min(ae.length*x,M)+pe,[pe,ae.length]),Me=(0,t.useCallback)(st=>{q(st)},[q]),Ke=(0,t.useCallback)(st=>Ie=>{const Ve=Ie.currentTarget.checked?le.concat(st):le.filter(_e=>_e.value!==st.value);ne(Ve)},[ne,le]);return t.createElement(v.wc,{spacing:"md"},t.createElement(a.H,{placeholder:"Filter values",onChange:Me,value:me}),!ae.length&&t.createElement(E._,null,"No values"),ae.length&&t.createElement(c.t7,{height:de,itemCount:ae.length,itemSize:x,width:"100%",className:te.filterList},({index:st,style:Ie})=>{const Ve=ae[st],{value:_e,label:tt}=Ve,dt=le.find(Oe=>Oe.value===_e)!==void 0;return t.createElement("div",{className:te.filterListRow,style:Ie,title:tt},t.createElement(P.X,{value:dt,label:tt,onChange:Ke(Ve)}))}))},R=(0,D.B)(G=>({filterList:p.css`
    label: filterList;
  `,filterListRow:p.css`
    label: filterListRow;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: ${G.spacing(.5)};

    :hover {
      background-color: ${G.colors.action.hover};
    }
  `}));var S=e(48010);const O=({column:{preFilteredRows:G,filterValue:le,setFilter:ge},onClose:ne,field:ue})=>{const te=(0,f.l4)(),me=(0,t.useMemo)(()=>(0,S.AF)(G,ue),[G,ue]),q=(0,t.useMemo)(()=>(0,S.mP)(me),[me]),se=(0,t.useMemo)(()=>(0,S.n0)(q,le),[q,le]),[ae,pe]=(0,t.useState)(se),[de,Me]=(0,t.useState)(!1),Ke=(0,t.useCallback)(tt=>ne(),[ne]),st=(0,t.useCallback)(tt=>{const dt=ae.length?ae:void 0;ge(dt),ne()},[ge,ae,ne]),Ie=(0,t.useCallback)(tt=>{ge(void 0),ne()},[ge,ne]),Ve=(0,t.useMemo)(()=>le!==void 0,[le]),_e=(0,f.wW)(U);return t.createElement(y.L,{onClick:Ke,useCapture:!0},t.createElement("div",{className:(0,p.cx)(_e.filterContainer),onClick:I},t.createElement(v.wc,{spacing:"lg"},t.createElement(v.wc,{spacing:"xs"},t.createElement(v.Lh,{justify:"space-between",align:"center"},t.createElement(E._,{className:_e.label},"Filter by values:"),t.createElement(h.h,{name:"text-fields",tooltip:"Match case",style:{color:de?te.colors.text.link:te.colors.text.disabled},onClick:()=>{Me(tt=>!tt)}})),t.createElement("div",{className:(0,p.cx)(_e.listDivider)}),t.createElement(b,{onChange:pe,values:ae,options:q,caseSensitive:de})),t.createElement(v.Lh,{spacing:"lg"},t.createElement(v.Lh,null,t.createElement(C.zx,{size:"sm",onClick:st},"Ok"),t.createElement(C.zx,{size:"sm",variant:"secondary",onClick:Ke},"Cancel")),Ve&&t.createElement(v.Lh,null,t.createElement(C.zx,{fill:"text",size:"sm",onClick:Ie},"Clear filter"))))))},U=G=>({filterContainer:p.css`
    label: filterContainer;
    width: 100%;
    min-width: 250px;
    height: 100%;
    max-height: 400px;
    background-color: ${G.colors.background.primary};
    border: 1px solid ${G.colors.border.weak};
    padding: ${G.spacing(2)};
    margin: ${G.spacing(1)} 0;
    box-shadow: ${G.shadows.z3};
    border-radius: ${G.shape.radius.default};
  `,listDivider:p.css`
    label: listDivider;
    width: 100%;
    border-top: 1px solid ${G.colors.border.medium};
    padding: ${G.spacing(.5,2)};
  `,label:p.css`
    margin-bottom: 0;
  `}),I=G=>{G.stopPropagation()},F=({column:G,field:le,tableStyles:ge})=>{const ne=(0,t.useRef)(null),[ue,te]=(0,t.useState)(!1),me=(0,f.wW)(w),q=(0,t.useMemo)(()=>Boolean(G.filterValue),[G.filterValue]),se=(0,t.useCallback)(()=>te(!0),[te]),ae=(0,t.useCallback)(()=>te(!1),[te]);return!le||!le.config.custom?.filterable?null:t.createElement("button",{className:(0,p.cx)(ge.headerFilter,q?me.filterIconEnabled:me.filterIconDisabled),ref:ne,type:"button",onClick:se},t.createElement(l.J,{name:"filter"}),ue&&ne.current&&t.createElement(g.J,{content:t.createElement(O,{column:G,tableStyles:ge,field:le,onClose:ae}),placement:"bottom-start",referenceElement:ne.current,show:!0}))},w=G=>({filterIconEnabled:p.css`
    label: filterIconEnabled;
    color: ${G.colors.primary.text};
  `,filterIconDisabled:p.css`
    label: filterIconDisabled;
    color: ${G.colors.text.disabled};
  `}),K=G=>{const{headerGroups:le,showTypeIcons:ge,tableStyles:ne}=G,ue=o.wl.components.Panels.Visualization.Table;return t.createElement("div",{role:"rowgroup",className:ne.headerRow},le.map(te=>{const{key:me,...q}=te.getHeaderGroupProps();return t.createElement("div",{className:ne.thead,...q,key:me,"aria-label":ue.header,role:"row"},te.headers.map((se,ae)=>L(se,ne,ge)))}))};function L(G,le,ge){const ne=G.getHeaderProps(),ue=G.field??null;return G.canResize&&(ne.style.userSelect=G.isResizing?"none":"auto"),ne.style.position="absolute",ne.style.justifyContent=G.justifyContent,t.createElement("div",{className:le.headerCell,...ne,role:"columnheader"},G.canSort&&t.createElement(t.Fragment,null,t.createElement("button",{...G.getSortByToggleProps(),className:le.headerCellLabel},ge&&t.createElement(l.J,{name:(0,m.e7)(ue),title:ue?.type,size:"sm",className:le.typeIcon}),t.createElement("div",null,G.render("Header")),G.isSorted&&(G.isSortedDesc?t.createElement(l.J,{size:"lg",name:"arrow-down",className:le.sortIcon}):t.createElement(l.J,{name:"arrow-up",size:"lg",className:le.sortIcon}))),G.canFilter&&t.createElement(F,{column:G,tableStyles:le,field:ue})),!G.canSort&&G.render("Header"),!G.canSort&&G.canFilter&&t.createElement(F,{column:G,tableStyles:le,field:ue}),G.canResize&&t.createElement("div",{...G.getResizerProps(),className:le.resizeHandle}))}var V=e(35316);function H(G,le){(0,t.useEffect)(()=>{const ge=G.current?.querySelector(".track-vertical"),ne=le.current?.firstChild;ne&&ge&&(ge?.remove(),ne.querySelector(":scope > .track-vertical")?.remove(),ne.append(ge))})}function j(G,le,ge){(0,t.useEffect)(()=>{if(G.lastExpandedIndex!==void 0){le.current?.resetAfterIndex(Math.max(G.lastExpandedIndex-1,0));return}},[G.lastExpandedIndex,G.toggleRowExpandedCounter,le,ge])}var A=e(30471);function _({onColumnResize:G,onSortByChange:le,data:ge}){return(0,t.useCallback)((ne,ue)=>{switch(ue.type){case"columnDoneResizing":if(G){const me=ne.columnResizing.headerIdWidths[0][0],q=parseInt(me,10),se=Math.round(ne.columnResizing.columnWidths[me]),ae=ge.fields[q];if(!ae)return ne;const pe=(0,A.CZ)(ae,ge);G(pe,se)}case"toggleSortBy":if(le){const te=[];for(const me of ne.sortBy){const q=ge.fields[parseInt(me.id,10)];q&&te.push({displayName:(0,A.CZ)(q,ge),desc:me.desc})}le(te)}case"toggleRowExpanded":if(ue.id)return{...ne,lastExpandedIndex:parseInt(ue.id,10),toggleRowExpandedCounter:ne.toggleRowExpandedCounter+1}}return ne},[ge,G,le])}function k(G,le){const ge={toggleRowExpandedCounter:0};if(G){ge.sortBy=[];for(const ne of G)for(const ue of le)ue.Header===ne.displayName&&ge.sortBy.push({id:ue.id,desc:ne.desc})}return ge}var Q=e(12245);const re=150,Z=36,oe=(0,t.memo)(G=>{const{ariaLabel:le,data:ge,subData:ne,height:ue,onCellFilterAdded:te,width:me,columnMinWidth:q=re,noHeader:se,resizable:ae=!0,initialSortBy:pe,footerOptions:de,showTypeIcons:Me,footerValues:Ke,enablePagination:st,cellHeight:Ie=i.Ss.Sm,timeRange:Ve}=G,_e=(0,t.useRef)(null),tt=(0,t.useRef)(null),dt=(0,t.useRef)(null),Oe=(0,f.l4)(),ye=(0,Q.p)(Oe,Ie),Pe=se?0:ye.rowHeight,[be,Be]=(0,t.useState)(Ke),ze=(0,t.useMemo)(()=>{const ut=Z;let Mt=0;if(!be)return 0;for(const Wt of be)Array.isArray(Wt)&&Wt.length>Mt&&(Mt=Wt.length);return Mt>1?ut*Mt:ut},[be]),lt=(0,t.useMemo)(()=>ge.fields.length?Array(ge.length).fill(0):[],[ge]),ht=Boolean(de?.countRows&&de.reducer&&de.reducer.length&&de.reducer[0]===s.gz.count),vt=(0,t.useMemo)(()=>(0,S.Pu)(ge,me,q,!!ne?.length,be,ht),[ge,me,q,be,ne,ht]),bt=_(G),ct=(0,t.useMemo)(()=>({columns:vt,data:lt,disableResizing:!ae,stateReducer:bt,autoResetPage:!1,initialState:k(pe,vt),autoResetFilters:!1,sortTypes:{number:S.QT,"alphanumeric-insensitive":S.nl}}),[pe,vt,lt,ae,bt]),{getTableProps:Pt,headerGroups:ie,footerGroups:Ce,rows:Ne,prepareRow:Ze,totalColumnsWidth:Qe,page:Le,state:Ue,gotoPage:ve,setPageSize:Se,pageOptions:Fe}=(0,n.useTable)(ct,n.useFilters,n.useSortBy,n.useAbsoluteLayout,n.useResizeColumns,n.useExpanded,n.usePagination),je=Ue;(0,t.useEffect)(()=>{de||Be(Ke)},[Ke,de]),(0,t.useEffect)(()=>{if(!de)return;if(!de.show){Be(void 0);return}if(ht){const Mt=[];Mt[0]=ie[0]?.headers[0]?.filteredRows.length.toString()??ge.length.toString(),Be(Mt);return}const ut=(0,S.jB)(ie[0].headers,(0,S.KF)(Ne),de,Oe);Be(ut)},[de,Oe,Ue.filters,ge]);let Ge=ue-(Pe+ze);st&&(Ge-=ye.cellHeight);const gt=Math.round(Ge/ye.rowHeight)-1;(0,t.useEffect)(()=>{gt<=0||Se(gt)},[gt,Se]),j(je,_e,ge),H(dt,tt);const mt=(0,t.useCallback)(ut=>{if(Ue.expanded[ut]){const Mt=ne?.find(Wt=>Wt.meta?.custom?.parentRowIndex===ut);if(Mt){const Wt=!!Mt.meta?.custom?.noHeader,ln={height:ye.rowHeight*(Mt.length+(Wt?0:1)),background:Oe.colors.emphasize(Oe.colors.background.primary,.015),paddingLeft:S.bc,position:"absolute",bottom:0};return t.createElement("div",{style:ln},t.createElement(oe,{data:Mt,width:me-S.bc,height:ye.rowHeight*(Mt.length+1),noHeader:Wt}))}}return null},[Ue.expanded,ne,ye.rowHeight,Oe.colors,me]),Ye=(0,t.useCallback)(({index:ut,style:Mt})=>{let Wt=Ne[ut];return st&&(Wt=Le[ut]),Ze(Wt),t.createElement("div",{...Wt.getRowProps({style:Mt}),className:ye.row},mt(ut),Wt.cells.map((ln,fn)=>t.createElement(V.p,{key:fn,tableStyles:ye,cell:ln,onCellFilterAdded:te,columnIndex:fn,columnCount:Wt.cells.length,timeRange:Ve})))},[te,Le,st,Ze,Ne,ye,mt,Ve]),ft=(0,t.useCallback)(ut=>{ve(ut-1)},[ve]),St=st?Le.length:Ne.length;let we=null;if(st){const ut=Ue.pageIndex*Ue.pageSize+1;let Mt=ut+Ue.pageSize-1;const Wt=me<550;Mt>ge.length&&(Mt=ge.length),we=t.createElement("div",{className:ye.paginationWrapper},t.createElement(r.t,{currentPage:Ue.pageIndex+1,numberOfPages:Fe.length,showSmallVersion:Wt,onNavigate:ft}),Wt?null:t.createElement("div",{className:ye.paginationSummary},ut," - ",Mt," of ",ge.length," rows"))}const qe=ut=>{if(Ue.expanded[ut]){const Mt=ne?.find(Wt=>Wt.meta?.custom?.parentRowIndex===ut);if(Mt){const Wt=!!Mt.meta?.custom?.noHeader;return ye.rowHeight*(Mt.length+1+(Wt?0:1))}}return ye.rowHeight},Je=ut=>{const{scrollTop:Mt}=ut.target;_e.current!==null&&_e.current.scrollTo(Mt)};return t.createElement("div",{...Pt(),className:ye.table,"aria-label":le,role:"table",ref:tt,style:{width:me,height:ue}},t.createElement(u.$,{hideVerticalTrack:!0},t.createElement("div",{className:ye.tableContentWrapper(Qe)},!se&&t.createElement(K,{headerGroups:ie,showTypeIcons:Me,tableStyles:ye}),St>0?t.createElement("div",{ref:dt},t.createElement(u.$,{onScroll:Je,hideHorizontalTrack:!0},t.createElement(c.S_,{key:ye.rowHeight,height:Ge,itemCount:St,itemSize:qe,width:"100%",ref:_e,style:{overflow:void 0}},Ye))):t.createElement("div",{style:{height:ue-Pe},className:ye.noData},"No data"),be&&t.createElement(d.i,{isPaginationVisible:Boolean(st),footerValues:be,footerGroups:Ce,totalColumnsWidth:Qe,tableStyles:ye}))),we)});oe.displayName="Table"},35316:(Y,T,e)=>{"use strict";e.d(T,{p:()=>t});const t=({cell:n,tableStyles:c,onCellFilterAdded:s,timeRange:i,userProps:f})=>{const u=n.getCellProps(),r=n.column.field;if(!r?.display)return null;u.style&&(u.style.minWidth=u.style.width,u.style.justifyContent=n.column.justifyContent);let d=(n.column.width??24)-c.cellPadding*2;return n.render("Cell",{field:r,tableStyles:c,onCellFilterAdded:s,cellProps:u,innerWidth:d,timeRange:i,userProps:f})}},12245:(Y,T,e)=>{"use strict";e.d(T,{p:()=>n});var t=e(9892);function n(s,i){const f=s.colors.border.weak,u=s.colors.primary.border,r=6,d=c(s,i,r),o=d+2,m=28,l=(p,g,y)=>{const v={margin:s.spacing(0,-.5,0,.5)},E={position:"absolute",top:0,right:0,margin:"auto"},h={overflow:"visible",width:"auto !important",boxShadow:`0 0 2px ${s.colors.primary.main}`,background:g??s.components.table.rowHoverBackground,zIndex:1};return t.css`
      label: ${y?"cellContainerOverflow":"cellContainerNoOverflow"};
      padding: ${r}px;
      width: 100%;
      // Cell height need to account for row border
      height: ${o-1}px;
      display: flex;
      align-items: center;
      border-right: 1px solid ${f};

      ${p?`color: ${p};`:""};
      ${g?`background: ${g};`:""};
      background-clip: padding-box;

      &:last-child:not(:only-child) {
        border-right: none;
      }

      &:hover {
        ${y&&h};
        .cellActions {
          visibility: visible;
          opacity: 1;
          width: auto;
        }
      }

      a {
        color: inherit;
      }

      .cellActions {
        display: flex;
        ${y?v:E}
        visibility: hidden;
        opacity: 0;
        width: 0;
        align-items: center;
        height: 100%;
        padding: ${s.spacing(1,.5,1,.5)};
        background: ${g?"none":s.colors.emphasize(s.colors.background.primary,.03)};

        svg {
          color: ${p};
        }
      }

      .cellActionsLeft {
        right: auto !important;
        left: 0;
      }

      .cellActionsTransparent {
        background: none;
      }
    `};return{theme:s,cellHeight:d,buildCellContainerStyle:l,cellPadding:r,cellHeightInner:d-r*2,rowHeight:o,table:t.css`
      height: 100%;
      width: 100%;
      overflow: auto;
      display: flex;
      flex-direction: column;
    `,thead:t.css`
      label: thead;
      height: ${m}px;
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,tfoot:t.css`
      label: tfoot;
      height: ${m}px;
      border-top: 1px solid ${f};
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,headerRow:t.css`
      label: row;
      border-bottom: 1px solid ${f};
    `,headerCell:t.css`
      height: 100%;
      padding: 0 ${r}px;
      overflow: hidden;
      white-space: nowrap;
      display: flex;
      align-items: center;
      font-weight: ${s.typography.fontWeightMedium};

      &:last-child {
        border-right: none;
      }
    `,headerCellLabel:t.css`
      border: none;
      padding: 0;
      background: inherit;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-weight: ${s.typography.fontWeightMedium};
      display: flex;
      align-items: center;
      margin-right: ${s.spacing(.5)};

      &:hover {
        text-decoration: underline;
        color: ${s.colors.text.link};
      }
    `,cellContainer:l(void 0,void 0,!0),cellContainerNoOverflow:l(void 0,void 0,!1),cellText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
    `,sortIcon:t.css`
      margin-left: ${s.spacing(.5)};
    `,cellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      color: ${s.colors.text.link};
      font-weight: ${s.typography.fontWeightMedium};
      &:hover {
        text-decoration: underline;
        color: ${s.colors.text.link};
      }
    `,cellLinkForColoredCell:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      font-weight: ${s.typography.fontWeightMedium};
      text-decoration: underline;
    `,imageCellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      height: 100%;
    `,headerFilter:t.css`
      background: transparent;
      border: none;
      label: headerFilter;
      padding: 0;
    `,paginationWrapper:t.css`
      display: flex;
      height: ${d}px;
      justify-content: center;
      align-items: center;
      width: 100%;
      li {
        margin-bottom: 0;
      }
    `,paginationSummary:t.css`
      color: ${s.colors.text.secondary};
      font-size: ${s.typography.bodySmall.fontSize};
      display: flex;
      justify-content: flex-end;
      padding: ${s.spacing(0,1,0,2)};
    `,tableContentWrapper:p=>{const g=p!==void 0?`${p}px`:"100%";return t.css`
        label: tableContentWrapper;
        width: ${g};
        display: flex;
        flex-direction: column;
      `},row:t.css`
      label: row;
      border-bottom: 1px solid ${f};

      &:hover {
        background-color: ${s.components.table.rowHoverBackground};
      }

      &:last-child {
        border-bottom: 0;
      }
    `,imageCell:t.css`
      height: 100%;
    `,resizeHandle:t.css`
      label: resizeHandle;
      cursor: col-resize !important;
      display: inline-block;
      background: ${u};
      opacity: 0;
      transition: opacity 0.2s ease-in-out;
      width: 8px;
      height: 100%;
      position: absolute;
      right: -4px;
      border-radius: ${s.shape.radius.default};
      top: 0;
      touch-action: none;

      &:hover {
        opacity: 1;
      }
    `,typeIcon:t.css`
      margin-right: ${s.spacing(1)};
      color: ${s.colors.text.secondary};
    `,noData:t.css`
      align-items: center;
      display: flex;
      height: 100%;
      justify-content: center;
      width: 100%;
    `,expanderCell:t.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      height: ${o}px;
      cursor: pointer;
    `}}function c(s,i,f){const u=s.typography.fontSize,r=s.typography.body.lineHeight;switch(i){case"md":return 42;case"lg":return 48;case"sm":default:return f*2+u*r}}},13580:(Y,T,e)=>{"use strict";e.d(T,{PT:()=>t,tE:()=>n});const t="=",n="!="},48010:(Y,T,e)=>{"use strict";e.d(T,{bc:()=>le,AF:()=>me,KF:()=>Ve,S_:()=>tt,Pu:()=>ne,n0:()=>pe,jB:()=>st,E4:()=>ge,q7:()=>dt,nl:()=>de,QT:()=>Me,mP:()=>se});var t=e(82897),n=e(58635),c=e(99098),s=e(30471),i=e(83881),f=e(19447),u=e(2703),r=e(33750),d=e(6194),o=e(40538),m=e(66111),l=e(69098),p=e(99601),g=e(82229),y=e(19670),v=e(18543);const E={mode:l.H.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},h=ye=>{const{field:Pe,innerWidth:be,tableStyles:Be,cell:ze,cellProps:lt,row:ht}=ye,vt=Pe.display(ze.value),bt=tt(Pe);let ct=(0,p.xD)(Pe,!1);ct.thresholds||(ct={...ct,thresholds:E});let Pt=o.QH.Gradient,ie;bt.type===o.h2.Gauge&&(Pt=bt.mode??o.QH.Gradient,ie=bt.valueDisplayMode!==void 0?bt.valueDisplayMode:o.M8.Text);const Ce=()=>(0,t.isFunction)(Pe.getLinks)?Pe.getLinks({valueRowIndex:ht.index}):[],Ne=Boolean(Ce().length),Ze=C(Pe,vt,ze.row.index),Qe=Le=>{const{openMenu:Ue,targetClassName:ve}=Le;return m.createElement(y.xf,{width:be,height:Be.cellHeightInner,field:ct,display:Pe.display,text:{valueSize:14},value:vt,orientation:g.wm.Horizontal,theme:Be.theme,alignmentFactors:Ze,onClick:Ue,className:ve,itemSpacing:1,lcdCellWidth:8,displayMode:Pt,valueDisplayMode:ie})};return m.createElement("div",{...lt,className:Be.cellContainer},Ne&&m.createElement(v.V,{links:Ce,style:{display:"flex",width:"100%"}},Le=>Qe(Le)),!Ne&&Qe({}))};function C(ye,Pe,be){let Be=ye.state?.alignmentFactors;if(Be)return Be.text.length<Pe.text.length&&(Be.text=Pe.text),Be;{Be={...Pe};const ze=Math.min(ye.values.length,be+1e3);for(let lt=be+1;lt<ze;lt++)ye.display(ye.values[lt]).text.length>Be.text.length&&(Be.text=Pe.text);return ye.state?ye.state.alignmentFactors=Be:ye.state={alignmentFactors:Be},Be}}var a=e(9892),P=e(28550),D=e(72648),x=e(30901),M=e(16514),b=e(31403),R=e(8180),S=e(52081),O=e(94599),U=e(35029),I=e(9405);function F({value:ye,onDismiss:Pe,mode:be}){let Be=ye;if((0,t.isString)(ye))try{ye=JSON.parse(ye)}catch{}else Be=JSON.stringify(ye,null," ");let ze=Be;return be==="code"&&(ze=JSON.stringify(ye,null," ")),m.createElement(U.u,{onDismiss:Pe,isOpen:!0,title:"Inspect value"},be==="code"?m.createElement(I.p,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(ze&&ze.length)>100,value:ze,readOnly:!0}):m.createElement("pre",null,ze),m.createElement(U.u.ButtonRow,null,m.createElement(O.m,{icon:"copy",getText:()=>ze},"Copy to Clipboard")))}var w=e(13580);function K({field:ye,cell:Pe,previewMode:be,showFilters:Be,onCellFilterAdded:ze}){const[lt,ht]=(0,m.useState)(!1),vt=ge(ye)==="flex-end",bt=Boolean(ye.config.custom?.inspect),ct={size:"sm",tooltipPlacement:"top"},Pt=(0,m.useCallback)(Ce=>{ze&&ze({key:ye.name,operator:w.PT,value:Pe.value})},[Pe,ye,ze]),ie=(0,m.useCallback)(Ce=>{ze&&ze({key:ye.name,operator:w.tE,value:Pe.value})},[Pe,ye,ze]);return m.createElement(m.Fragment,null,m.createElement("div",{className:`cellActions ${vt?"cellActionsLeft":""}`},m.createElement(S.Lh,{spacing:"xs"},bt&&m.createElement(R.h,{name:"eye",tooltip:"Inspect value",onClick:()=>{ht(!0)},...ct}),Be&&m.createElement(R.h,{name:"search-plus",onClick:Pt,tooltip:"Filter for value",...ct}),Be&&m.createElement(R.h,{name:"search-minus",onClick:ie,tooltip:"Filter out value",...ct}))),lt&&m.createElement(F,{mode:be,value:Pe.value,onDismiss:()=>{ht(!1)}}))}const L=ye=>{const{field:Pe,cell:be,tableStyles:Be,row:ze,cellProps:lt}=ye,ht=Boolean(Pe.config.custom?.inspect),vt=Pe.display(be.value);let bt;m.isValidElement(be.value)?bt=be.value:bt=(0,u.zc)(vt);const ct=ye.onCellFilterAdded&&Pe.config.filterable,Pt=ct&&be.value!==void 0||ht,ie=tt(Pe),Ce=V(Be,ie,vt,ht),Ne=Boolean((0,x.i)(Pe,ze)?.length),Ze=(0,D.wW)(b._7);return m.createElement("div",{...lt,className:Ce},!Ne&&m.createElement("div",{className:Be.cellText},bt),Ne&&m.createElement(v.V,{links:()=>(0,x.i)(Pe,ze)||[]},Qe=>Qe.openMenu?m.createElement("button",{className:(0,a.cx)(Ze,H(Be,ie,Qe.targetClassName)),onClick:Qe.openMenu},bt):m.createElement("div",{className:H(Be,ie,Qe.targetClassName)},bt)),Pt&&m.createElement(K,{...ye,previewMode:"text",showFilters:ct}))};function V(ye,Pe,be,Be=!1){const ze=ye.theme.isDark?1:-.7;let lt,ht;if(Pe.type===o.h2.ColorText)lt=be.color;else if(Pe.type===o.h2.ColorBackground){const vt=Pe.mode??o.v7.Gradient;if(vt===o.v7.Basic)lt=(0,M.bM)(be.color,ye.theme.isDark),ht=(0,P.Z)(be.color).toRgbString();else if(vt===o.v7.Gradient){const bt=(0,P.Z)(be.color).darken(10*ze).spin(5);lt=(0,M.bM)(be.color,ye.theme.isDark),ht=`linear-gradient(120deg, ${bt.toRgbString()}, ${be.color})`}}return lt!==void 0||ht!==void 0?ye.buildCellContainerStyle(lt,ht,!Be):Be?ye.cellContainerNoOverflow:ye.cellContainer}function H(ye,Pe,be){return Pe.type===o.h2.Auto?(0,a.cx)(ye.cellLink,be):(0,a.cx)(ye.cellLinkForColoredCell,be)}var j=e(89361),A=e(56257),_=e(69377);function k(ye){const{cell:Pe,tableStyles:be,cellProps:Be}=ye;let ze="";return Pe.value instanceof _.Z?ze=new A.Z().writeGeometry(Pe.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):Pe.value!=null&&(ze=`${Pe.value}`),m.createElement("div",{...Be,className:be.cellContainer},m.createElement("div",{className:be.cellText,style:{fontFamily:"monospace"}},ze))}const Q=ye=>{const{field:Pe,cell:be,tableStyles:Be,row:ze,cellProps:lt}=ye,ht=Pe.display(be.value),vt=Boolean((0,x.i)(Pe,ze)?.length),bt=(0,D.wW)(b._7);return m.createElement("div",{...lt,className:Be.cellContainer},!vt&&m.createElement("img",{src:ht.text,className:Be.imageCell,alt:""}),vt&&m.createElement(v.V,{style:{height:"100%"},links:()=>(0,x.i)(Pe,ze)||[]},ct=>{const Pt=m.createElement("img",{src:ht.text,className:Be.imageCell,alt:""});return ct.openMenu?m.createElement(b.zx,{className:(0,a.cx)(bt),onClick:ct.openMenu},Pt):Pt}))};function re(ye){const{cell:Pe,tableStyles:be,cellProps:Be,field:ze,row:lt}=ye,ht=Boolean(ze.config.custom?.inspect),vt=a.css`
    cursor: pointer;
    font-family: monospace;
  `;let bt=Pe.value,ct=bt;if((0,t.isString)(bt))try{bt=JSON.parse(bt)}catch{}else ct=JSON.stringify(bt,null," ");const Pt=Boolean((0,x.i)(ze,lt)?.length),ie=(0,D.wW)(b._7);return m.createElement("div",{...Be,className:ht?be.cellContainerNoOverflow:be.cellContainer},m.createElement("div",{className:(0,a.cx)(be.cellText,vt)},!Pt&&m.createElement("div",{className:be.cellText},ct),Pt&&m.createElement(v.V,{links:()=>(0,x.i)(ze,lt)||[]},Ce=>Ce.openMenu?m.createElement(b.zx,{className:(0,a.cx)(ie),onClick:Ce.openMenu},ct):m.createElement(m.Fragment,null,ct))),ht&&m.createElement(K,{...ye,previewMode:"code"}))}var Z=e(39904);function oe({row:ye,tableStyles:Pe}){return m.createElement("div",{className:Pe.expanderCell,...ye.getToggleRowExpandedProps()},m.createElement(Z.J,{"aria-label":ye.isExpanded?"Collapse row":"Expand row",name:ye.isExpanded?"angle-down":"angle-right",size:"xl"}))}var G=e(24115);const le=50;function ge(ye){if(!ye)return"flex-start";if(ye.config.custom)switch(ye.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return ye.type===c.fS.number?"flex-end":"flex-start"}function ne(ye,Pe,be,Be,ze,lt){const ht=[];let vt=0;Be&&(ht.push({Header:()=>null,id:"expander",Cell:oe,width:le,minWidth:le,filter:(ct,Pt,ie)=>[],justifyContent:"left",field:ye.fields[0],sortType:"basic"}),Pe-=le);for(const[ct,Pt]of ye.fields.entries()){const ie=Pt.config.custom||{};if(ie.hidden)continue;ie.width?Pe-=ie.width:vt++;const Ce=Ze=>{switch(Ze){case c.fS.number:return"number";case c.fS.time:return"basic";default:return"alphanumeric-insensitive"}},Ne=ue(ie.cellOptions?.type,Pt);ht.push({Cell:Ne,id:ct.toString(),field:Pt,Header:(0,s.CZ)(Pt,ye),accessor:(Ze,Qe)=>Pt.values[Qe],sortType:Ce(Pt.type),width:ie.width,minWidth:ie.minWidth??be,filter:(0,n.Z)(te(Pt)),justifyContent:ge(Pt),Footer:(0,j.c)(ct,ze,lt)})}let bt=Pe/vt;for(let ct=vt;ct>0;ct--)for(const Pt of ht)!Pt.width&&Pt.minWidth>bt&&(Pt.width=Pt.minWidth,Pe-=Pt.width,vt-=1,bt=Pe/vt);for(const ct of ht)ct.width||(ct.width=bt),ct.minWidth=50;return ht}function ue(ye,Pe){switch(ye){case o.h2.ColorText:case o.h2.ColorBackground:return L;case o.h2.Image:return Q;case o.h2.Gauge:return h;case o.h2.Sparkline:return G.A;case o.h2.JSONView:return re}if(Pe.type===c.fS.geo)return k;if(Pe.type===c.fS.frame){const be=Pe.values[0];return(0,i.aY)(be)&&(0,f.pP)(be)?G.A:re}return Pe.type===c.fS.other?re:L}function te(ye){return function(Pe,be,Be){return Pe.length===0||!Be||!ye?Pe:Pe.filter(ze=>{if(!ze.values.hasOwnProperty(be))return!1;const lt=q(ze,ye);return Be.find(ht=>ht.value===lt)!==void 0})}}function me(ye,Pe){if(!Pe||ye.length===0)return{};const be={};for(let Be=0;Be<ye.length;Be++){const ze=q(ye[Be],Pe);be[ze||"(Blanks)"]=ze}return be}function q(ye,Pe){if(!Pe||!ye)return"";const be=Pe.values[ye.index],Be=Pe.display?Pe.display(be):be;return Pe.display?(0,u.zc)(Be):Be}function se(ye){return Object.keys(ye).reduce((Pe,be)=>Pe.concat({value:ye[be],label:be}),[]).sort(ae)}function ae(ye,Pe){return ye.label===void 0&&Pe.label===void 0?0:ye.label===void 0&&Pe.label!==void 0?-1:ye.label!==void 0&&Pe.label===void 0?1:ye.label<Pe.label?-1:ye.label>Pe.label?1:0}function pe(ye,Pe){return Pe?ye.filter(be=>Pe.some(Be=>Be.value===be.value)):[]}function de(ye,Pe,be){return String(ye.values[be]).localeCompare(String(Pe.values[be]),void 0,{sensitivity:"base"})}function Me(ye,Pe,be){const Be=Ke(ye.values[be]),ze=Ke(Pe.values[be]);return Be===ze?0:Be>ze?1:-1}function Ke(ye){return ye==null||ye===""||isNaN(ye)?Number.NEGATIVE_INFINITY:typeof ye=="number"?ye:Number(ye)}function st(ye,Pe,be,Be){return Oe(ye),ye.map((ze,lt)=>{if(ze?.field?.type!==c.fS.number)return lt===0&&be.reducer&&be.reducer.length>0?r.TB.get(be.reducer[0]).name:void 0;let ht=(0,t.clone)(ze.field);return ht.values=Pe[ze.id],ht.state=void 0,ze.field=ht,be.fields&&be.fields.length>0?be.fields.find(bt=>bt===ze?.field?.name)?Ie(ze.field,be.reducer,Be):void 0:Ie(ze.field,be.reducer||[],Be)})}function Ie(ye,Pe,be){const Be=ye.display??(0,d.U_)({field:ye,theme:be}),ze=Pe[0],lt=(0,r.Kx)({field:ye,reducers:Pe})[ze];return(0,u.zc)(Be(lt))}function Ve(ye){const Pe=[];for(const be in ye)for(const[Be,ze]of Object.entries(ye[be].values))Pe[Be]===void 0&&(Pe[Be]=[]),Pe[Be].push(ze);return Pe}const _e={type:o.h2.Auto};function tt(ye){return ye.config.custom?.displayMode?dt(ye.config.custom?.displayMode):ye.config.custom?.cellOptions?ye.config.custom.cellOptions:_e}function dt(ye){switch(ye){case"basic":case"gradient-gauge":case"lcd-gauge":let Pe=o.QH.Basic;return ye==="gradient-gauge"?Pe=o.QH.Gradient:ye==="lcd-gauge"&&(Pe=o.QH.Lcd),{type:o.h2.Gauge,mode:Pe};case"color-background":case"color-background-solid":let be=o.v7.Basic;return ye==="color-background"&&(be=o.v7.Gradient),{type:o.h2.ColorBackground,mode:be};default:return{type:ye}}}function Oe(ye){const Pe=ye.findIndex((be,Be)=>be?.id!==String(Be));Pe!==-1&&(ye.splice(Pe,0,{id:String(Pe)}),Oe(ye))}},91363:(Y,T,e)=>{"use strict";e.d(T,{w:()=>m});var t=e(9892),n=e(82897),c=e.n(n),s=e(66111),i=e(76015),f=e(72648),u=e(7804),r=e(39904),d=e(97379);class o extends s.PureComponent{constructor(g){super(g),this.readCSV=(0,n.debounce)(()=>{const{config:E}=this.props,{text:h}=this.state;this.setState({data:(0,i.uP)(h,{config:E})})},150),this.onTextChange=E=>{this.setState({text:E.target.value})};const{text:y,config:v}=g;this.state={text:y,data:(0,i.uP)(y,{config:v})}}componentDidUpdate(g,y){const{text:v}=this.state;(v!==y.text||this.props.config!==g.config)&&this.readCSV(),this.props.text!==g.text&&this.props.text!==v&&this.setState({text:this.props.text}),this.state.data!==y.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:g,height:y,theme:v}=this.props,{data:E}=this.state,h=l(v);return s.createElement("div",{className:h.tableInputCsv},s.createElement(d.K,{style:{width:g,height:y},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:h.textarea}),E&&s.createElement("footer",{className:h.footer},E.map((C,a)=>s.createElement("span",{key:a},"Rows:",C.length,", Columns:",C.fields.length," \xA0",s.createElement(r.J,{name:"check-circle"})))))}}const m=(0,f.HE)(o);m.displayName="TableInputCSV";const l=(0,u.B)(p=>({tableInputCsv:t.css`
      position: relative;
    `,textarea:t.css`
      height: 100%;
      width: 100%;
    `,footer:t.css`
      position: absolute;
      bottom: 15px;
      right: 15px;
      border: 1px solid #222;
      background: ${p.colors.success.main};
      padding: 1px ${p.spacing(.5)};
      font-size: 80%;
    `}))},51275:(Y,T,e)=>{"use strict";e.d(T,{A:()=>u});var t=e(9892),n=e(66111),c=e(2703),s=e(7804),i=e(72648);const f=(0,s.B)(r=>({counter:t.css`
      label: counter;
      margin-left: ${r.spacing(1)};
      border-radius: ${r.spacing(3)};
      background-color: ${r.colors.action.hover};
      padding: ${r.spacing(.25,1)};
      color: ${r.colors.text.secondary};
      font-weight: ${r.typography.fontWeightMedium};
      font-size: ${r.typography.size.sm};
    `})),u=({value:r})=>{const d=(0,i.wW)(f);return n.createElement("span",{className:d.counter},(0,c.SP)(r,0).text)}},79841:(Y,T,e)=>{"use strict";e.d(T,{O:()=>r});var t=e(9892),n=e(66111),c=e(68183),s=e(72648),i=e(85419),f=e(39904),u=e(51275);const r=n.forwardRef(({label:o,active:m,icon:l,onChangeTab:p,counter:g,suffix:y,className:v,href:E,...h},C)=>{const a=(0,s.wW)(d),P=()=>n.createElement(n.Fragment,null,l&&n.createElement(f.J,{name:l}),o,typeof g=="number"&&n.createElement(u.A,{value:g}),y&&n.createElement(y,{className:a.suffix})),D=(0,t.cx)(a.link,m?a.activeStyle:a.notActive);return n.createElement("div",{className:a.item},n.createElement("a",{href:E||"#",className:D,...h,onClick:p,"aria-label":h["aria-label"]||c.wl.components.Tab.title(o),role:"tab","aria-selected":m,ref:C},P()))});r.displayName="Tab";const d=o=>({item:t.css`
      list-style: none;
      position: relative;
      display: flex;
      white-space: nowrap;
    `,link:t.css`
      color: ${o.colors.text.secondary};
      padding: ${o.spacing(1.5,2,1)};
      display: block;
      height: 100%;

      svg {
        margin-right: ${o.spacing(1)};
      }

      &:focus-visible {
        ${(0,i.getFocusStyles)(o)}
      }

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 4px;
        border-radius: ${o.shape.radius.default};
        bottom: 0px;
      }
    `,notActive:t.css`
      a:hover,
      &:hover,
      &:focus {
        color: ${o.colors.text.primary};

        &::before {
          background-color: ${o.colors.action.hover};
        }
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${o.colors.text.primary};
      overflow: hidden;

      a {
        color: ${o.colors.text.primary};
      }

      &::before {
        background-image: ${o.colors.gradients.brandHorizontal};
      }
    `,suffix:t.css`
      margin-left: ${o.spacing(1)};
    `})},94893:(Y,T,e)=>{"use strict";e.d(T,{I:()=>f});var t=e(9892),n=e(66111),c=e(7804),s=e(72648);const i=(0,c.B)(u=>({tabContent:t.css`
      background: ${u.colors.background.primary};
    `})),f=({children:u,className:r,...d})=>{const o=(0,s.l4)(),m=i(o);return n.createElement("div",{...d,className:(0,t.cx)(m.tabContent,r)},u)}},72142:(Y,T,e)=>{"use strict";e.d(T,{J:()=>s});var t=e(9892),n=e(66111),c=e(72648);const s=n.forwardRef(({children:f,className:u,hideBorder:r=!1},d)=>{const o=(0,c.wW)(i);return n.createElement("div",{className:(0,t.cx)(o.tabsWrapper,r&&o.noBorder,u),ref:d},n.createElement("div",{className:o.tabs,role:"tablist"},f))}),i=f=>({tabsWrapper:t.css`
    border-bottom: 1px solid ${f.colors.border.weak};
    overflow-x: auto;
  `,noBorder:t.css`
    border-bottom: 0;
  `,tabs:t.css`
    position: relative;
    display: flex;
    height: ${f.components.menuTabs.height}px;
  `});s.displayName="TabsBar"},13026:(Y,T,e)=>{"use strict";e.d(T,{L:()=>u});var t=e(9892),n=e(66111),c=e(68183),s=e(72648),i=e(39904),f=e(51275);const u=n.forwardRef(({label:d,active:o,icon:m,counter:l,className:p,suffix:g,onChangeTab:y,href:v,...E},h)=>{const C=(0,s.wW)(r),a=()=>n.createElement(n.Fragment,null,m&&n.createElement(i.J,{name:m}),d,typeof l=="number"&&n.createElement(f.A,{value:l}),g&&n.createElement(g,{className:C.suffix})),P=(0,t.cx)(C.link,o&&C.activeStyle);return n.createElement("a",{href:v,className:P,...E,onClick:y,"aria-label":E["aria-label"]||c.wl.components.Tab.title(d),role:"tab","aria-selected":o,ref:h},a())});u.displayName="Tab";const r=d=>({link:t.css`
      padding: 6px 12px;
      display: block;
      height: 100%;
      cursor: pointer;
      position: relative;

      color: ${d.colors.text.primary};

      svg {
        margin-right: ${d.spacing(1)};
      }

      &:hover,
      &:focus {
        text-decoration: underline;
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${d.colors.text.maxContrast};
      overflow: hidden;

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: ${d.shape.radius.default};
        background-image: linear-gradient(0deg, #f05a28 30%, #fbca0a 99%);
      }
    `,suffix:t.css`
      margin-left: ${d.spacing(1)};
    `})},34719:(Y,T,e)=>{"use strict";e.d(T,{V:()=>f});var t=e(9892),n=e(66111),c=e(72648),s=e(3385),i=e(39904);const f=(0,n.forwardRef)(({name:r,onClick:d,icon:o,className:m,colorIndex:l,...p},g)=>{const y=(0,c.l4)(),v=u(y,r,l),E=C=>{C.preventDefault(),C.stopPropagation(),d?.(r,C)},h=(0,t.cx)(v.wrapper,m,{[v.hover]:d!==void 0});return d?n.createElement("button",{...p,className:h,onClick:E,ref:g},o&&n.createElement(i.J,{name:o}),r):n.createElement("span",{...p,className:h,ref:g},o&&n.createElement(i.J,{name:o}),r)});f.displayName="Tag";const u=(r,d,o)=>{let m;return o===void 0?m=(0,s.Bx)(d):m=(0,s.vm)(o),{wrapper:t.css`
      appearance: none;
      border-style: none;
      font-weight: ${r.typography.fontWeightMedium};
      font-size: ${r.typography.size.sm};
      line-height: ${r.typography.bodySmall.lineHeight};
      vertical-align: baseline;
      background-color: ${m.color};
      color: ${r.v1.palette.gray98};
      white-space: nowrap;
      text-shadow: none;
      padding: 3px 6px;
      border-radius: ${r.shape.radius.default};
    `,hover:t.css`
      &:hover {
        opacity: 0.85;
        cursor: pointer;
      }
    `}}},34807:(Y,T,e)=>{"use strict";e.d(T,{P:()=>i});var t=e(9892),n=e(66111),c=e(72648),s=e(34719);const i=(0,n.memo)((0,n.forwardRef)(({displayMax:u,tags:r,icon:d,onClick:o,className:m,getAriaLabel:l},p)=>{const g=(0,c.l4)(),y=f(g,Boolean(u&&u>0)),v=r.length,E=u?r.slice(0,u):r;return n.createElement("ul",{className:(0,t.cx)(y.wrapper,m),"aria-label":"Tags",ref:p},E.map((h,C)=>n.createElement("li",{className:y.li,key:h},n.createElement(s.V,{name:h,icon:d,onClick:o,"aria-label":l?.(h,C),"data-tag-id":C}))),u&&u>0&&v-u>0&&n.createElement("span",{className:y.moreTagsLabel},"+ ",v-u))}));i.displayName="TagList";const f=(u,r)=>({wrapper:t.css`
      position: relative;
      align-items: ${r?"center":"unset"};
      display: flex;
      flex: 1 1 auto;
      flex-wrap: wrap;
      flex-shrink: ${r?0:1};
      justify-content: flex-end;
      gap: 6px;
    `,moreTagsLabel:t.css`
      color: ${u.colors.text.secondary};
      font-size: ${u.typography.size.sm};
    `,li:(0,t.css)({listStyle:"none"})})},43339:(Y,T,e)=>{"use strict";e.d(T,{B:()=>o});var t=e(9892),n=e(66111),c=e(72648),s=e(31403),i=e(46967),f=e(3385),u=e(8180);const r=({name:l,disabled:p,onRemove:g})=>{const{color:y,borderColor:v}=(0,n.useMemo)(()=>(0,f.Bx)(l),[l]),E=(0,c.wW)(d);return n.createElement("li",{className:E.itemStyle,style:{backgroundColor:y,borderColor:v}},n.createElement("span",{className:E.nameStyle},l),n.createElement(u.h,{name:"times",size:"lg",disabled:p,ariaLabel:`Remove "${l}" tag`,onClick:()=>g(l),type:"button",className:E.buttonStyles}))},d=l=>{const p=l.spacing.gridSize*3;return{itemStyle:(0,t.css)({display:"flex",gap:"3px",alignItems:"center",height:`${p}px`,lineHeight:`${p-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:l.shape.radius.default,padding:`0 ${l.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:l.typography.size.sm}),nameStyle:(0,t.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,t.css)({margin:0,"&:hover::before":{display:"none"}})}},o=({placeholder:l="New tag (enter key to add)",tags:p=[],onChange:g,width:y,className:v,disabled:E,addOnBlur:h,invalid:C,id:a})=>{const[P,D]=(0,n.useState)(""),x=(0,c.wW)(m),M=(0,c.l4)(),b=(0,n.useCallback)(I=>{D(I.target.value)},[]),R=I=>{g(p.filter(F=>F!==I))},S=I=>{I?.preventDefault(),p.includes(P)||g(p.concat(P)),D("")},O=()=>{h&&P&&S()},U=I=>{I.key==="Enter"&&P!==""&&S(I)};return n.createElement("div",{className:(0,t.cx)(x.wrapper,v,y?(0,t.css)({width:M.spacing(y)}):"")},n.createElement(i.I,{id:a,disabled:E,placeholder:l,onChange:b,value:P,onKeyDown:U,onBlur:O,invalid:C,suffix:n.createElement(s.zx,{fill:"text",className:x.addButtonStyle,onClick:S,size:"md",disabled:P.length<=0},"Add")}),p?.length>0&&n.createElement("ul",{className:x.tags},p.map(I=>n.createElement(r,{key:I,name:I,onRemove:R,disabled:E}))))},m=l=>({wrapper:t.css`
    min-height: ${l.spacing(4)};
    display: flex;
    flex-direction: column;
    gap: ${l.spacing(1)};
    flex-wrap: wrap;
  `,tags:t.css`
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
    gap: ${l.spacing(.5)};
  `,addButtonStyle:t.css`
    margin: 0 -${l.spacing(1)};
  `})},17937:(Y,T,e)=>{"use strict";e.d(T,{x:()=>s});var t=e(9892),n=e(66111),c=e(72648);const s=n.forwardRef(({as:r,variant:d,weight:o,color:m,truncate:l,textAlignment:p,children:g},y)=>{const v=(0,c.wW)((0,n.useCallback)(E=>i(E,d,m,o,l,p),[m,p,l,o,d]));return(0,n.createElement)(r,{className:v,ref:y},g)});s.displayName="Text";const i=(r,d,o,m,l,p)=>(0,t.css)([d&&{...r.typography[d]},{margin:0,padding:0},o&&{color:u(o,r)},m&&{fontWeight:f(m,r)},l&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},p&&{textAlign:p}]),f=(r,d)=>{switch(r){case"bold":return d.typography.fontWeightBold;case"medium":return d.typography.fontWeightMedium;case"light":return d.typography.fontWeightLight;case"regular":case void 0:return d.typography.fontWeightRegular}},u=(r,d)=>{switch(r){case"error":return d.colors.error.text;case"success":return d.colors.success.text;case"info":return d.colors.info.text;case"warning":return d.colors.warning.text;default:return r?d.colors.text[r]:void 0}}},98699:(Y,T,e)=>{"use strict";e.d(T,{Dr:()=>o,H3:()=>i});var t=e(66111),n=e(17937);const c=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h1",...p,variant:p.variant||"h1",ref:g}));c.displayName="H1";const s=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h2",...p,variant:p.variant||"h2",ref:g}));s.displayName="H2";const i=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h3",...p,variant:p.variant||"h3",ref:g}));i.displayName="H3";const f=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h4",...p,variant:p.variant||"h4",ref:g}));f.displayName="H4";const u=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h5",...p,variant:p.variant||"h5",ref:g}));u.displayName="H5";const r=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h6",...p,variant:p.variant||"h6",ref:g}));r.displayName="H6";const d=t.forwardRef((p,g)=>t.createElement(n.x,{as:"p",...p,variant:p.variant||"body",ref:g}));d.displayName="P";const o=t.forwardRef((p,g)=>t.createElement(n.x,{as:"span",...p,variant:p.variant||"bodySmall",ref:g}));o.displayName="Span";const m=t.forwardRef((p,g)=>t.createElement(n.x,{as:"legend",...p,variant:p.variant||"bodySmall",ref:g}));m.displayName="Legend";const l=t.forwardRef((p,g)=>t.createElement(n.x,{as:"span",...p,ref:g}));l.displayName="TextModifier"},97379:(Y,T,e)=>{"use strict";e.d(T,{K:()=>f});var t=e(9892),n=e(66111),c=e(72648),s=e(7804),i=e(73267);const f=n.forwardRef(({invalid:r,className:d,...o},m)=>{const l=(0,c.l4)(),p=u(l,r);return n.createElement("textarea",{...o,className:(0,t.cx)(p.textarea,d),ref:m})}),u=(0,s.B)((r,d=!1)=>({textarea:(0,t.cx)((0,i.RK)(r),(0,i.GL)(r),t.css`
        display: block;
        border-radius: ${r.shape.borderRadius()};
        padding: ${r.spacing.gridSize/4}px ${r.spacing.gridSize}px;
        width: 100%;
        border-color: ${d?r.colors.error.border:r.components.input.borderColor};
      `)}));f.displayName="TextArea"},68948:(Y,T,e)=>{"use strict";e.d(T,{p:()=>U});var t=e(66111),n=e(72648),c=e(72269),s=e(60325),i=e(68416),f=e(82897),u=e(75974),r=e(99098),d=e(2703),o=e(6194),m=e(72990),l=e(53768),p=e(30471),g=e(56632),y=e(23588),v=e(40538),E=e(86979),h=e(13347),C=e(52240),a=e(2445);const P=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),D=Array(53);for(let I=0;I<D.length;I++)D[I]=2**I;const x=(I,F=1)=>I==null?"-":I.toFixed(F),M={drawStyle:v.l8.Line,showPoints:v.Jp.Auto,axisPlacement:v.LB.Auto},b=({frame:I,theme:F,timeZones:w,getTimeRange:K,eventBus:L,sync:V,allFrames:H,renderers:j,tweakScale:A=k=>k,tweakAxis:_=k=>k})=>{const k=new h.U(w[0]);let Q;k.setPrepData(se=>(Q=se[0],(0,a.Bj)(se[0],k.getStackingGroups())));const re=I.fields[0];if(!re)return k;const Z="x";let oe="_x",G="";const le=re.config.custom?.axisPlacement!==v.LB.Hidden?v.LB.Bottom:v.LB.Hidden,ge=re.config.custom?.axisPlacement!==v.LB.Hidden;if(re.type===r.fS.time){oe="time",k.addScale({scaleKey:Z,orientation:v.wN.Horizontal,direction:v.bQ.Right,isTime:!0,range:()=>{const ae=K();return[ae.from.valueOf(),ae.to.valueOf()]}});const se=w.length>1?(ae,pe)=>pe.map((de,Me)=>Me<2?null:de):void 0;for(let ae=0;ae<w.length;ae++){const pe=w[ae];k.addAxis({scaleKey:Z,isTime:!0,placement:le,show:ge,label:re.config.custom?.axisLabel,timeZone:pe,theme:F,grid:{show:ae===0&&re.config.custom?.axisGridShow},filter:se})}w.length>1&&k.addHook("drawAxes",ae=>{ae.ctx.save(),ae.ctx.fillStyle=F.colors.text.primary,ae.ctx.textAlign="left",ae.ctx.textBaseline="bottom";let pe=0;ae.axes.forEach(de=>{if(de.side===2){let Me=de._pos+de._size;ae.ctx.fillText(w[pe],ae.bbox.left,Me*u.Z.pxRatio),pe++}}),ae.ctx.restore()})}else re.config.unit&&(oe=re.config.unit),k.addScale({scaleKey:Z,orientation:v.wN.Horizontal,direction:v.bQ.Right,range:(se,ae,pe)=>[re.config.min??ae,re.config.max??pe]}),k.addAxis({scaleKey:Z,placement:le,show:ge,label:re.config.custom?.axisLabel,theme:F,grid:{show:re.config.custom?.axisGridShow},formatValue:(se,ae)=>(0,d.zc)(re.display(se,ae))});let ne=j?.flatMap(se=>Object.values(se.fieldMap).filter(ae=>se.indicesOnly.indexOf(ae)===-1))??[],ue;for(let se=1;se<I.fields.length;se++){const ae=I.fields[se],pe={...ae.config,custom:{...M,...ae.config.custom}},de=pe.custom;if(ae===re||ae.type!==r.fS.number)continue;let Me=ae.display??x;ae.config.custom?.stacking?.mode===v.o0.Percent&&(Me=(0,o.U_)({field:{...ae,config:{...ae.config,unit:"percentunit"}},theme:F}));const Ke=(0,E.z)(pe),st=(0,m.fD)(ae),Ve=(0,m.YO)(ae,F).color;if(k.addScale(A({scaleKey:Ke,orientation:v.wN.Vertical,direction:v.bQ.Up,distribution:de.scaleDistribution?.type,log:de.scaleDistribution?.log,linearThreshold:de.scaleDistribution?.linearThreshold,min:ae.config.min,max:ae.config.max,softMin:de.axisSoftMin,softMax:de.axisSoftMax,centeredZero:de.axisCenteredZero,range:de.stacking?.mode===v.o0.Percent?(be,Be,ze)=>(Be=Be<0?-1:0,ze=ze>0?1:0,[Be,ze]):void 0,decimals:ae.config.decimals},ae)),G||(G=Ke),de.axisPlacement!==v.LB.Hidden){let be;de.axisColorMode===v.yK.Series&&(st.isByValue&&ae.config.custom?.gradientMode===v.FI.Scheme&&st.id===l.S.Thresholds?be=(0,C.P2)(1,F,st,ae.config.thresholds):be=Ve);let Be={};be&&(Be={border:{show:!0,width:1,stroke:be},ticks:{stroke:be},color:de.axisColorMode===v.yK.Series?be:void 0});let ze;P.has(pe.unit)&&(ze=D),k.addAxis(_({scaleKey:Ke,label:de.axisLabel,size:de.axisWidth,placement:de.axisPlacement??v.LB.Auto,formatValue:(lt,ht)=>(0,d.zc)(Me(lt,ht)),theme:F,grid:{show:de.axisGridShow},decimals:ae.config.decimals,distr:de.scaleDistribution?.type,incrs:ze,...Be},ae))}const _e=de.drawStyle===v.l8.Points?v.Jp.Always:de.showPoints;let tt=()=>null;de.spanNulls!==!0&&(tt=(be,Be,ze,lt)=>{let ht=[],vt=be.series[Be];if(!ze&&lt&&lt.length){const[bt,ct]=vt.idxs,Pt=be.data[0],ie=be.data[Be],Ce=Math.round(be.valToPos(Pt[bt],"x",!0)),Ne=Math.round(be.valToPos(Pt[ct],"x",!0));lt[0][0]===Ce&&ht.push(bt);for(let Ze=0;Ze<lt.length;Ze++){let Qe=lt[Ze],Le=lt[Ze+1];if(Le&&Qe[1]===Le[0]){let Ue=be.posToIdx(Qe[1],!0);if(ie[Ue]==null)for(let ve=1;ve<100;ve++){if(ie[Ue+ve]!=null){Ue+=ve;break}if(ie[Ue-ve]!=null){Ue-=ve;break}}ht.push(Ue)}}lt[lt.length-1][1]===Ne&&ht.push(ct)}return ht.length?ht:null});let{fillOpacity:dt}=de,Oe=null,ye=null;if(ae.state?.origin){ue||(ue=R(I,H));const be=H[ae.state.origin.frameIndex],Be=be?.fields[ae.state.origin.fieldIndex],ze=(0,p.CZ)(Be??ae,be,H);if(ne.indexOf(ze)>=0)Oe=()=>null,ye=()=>{};else if(de.transform===v.pR.Constant){const lt=u.Z.paths.linear();Oe=(ht,vt)=>{const bt=ht._data,ct=K();let Pt=[ct.from.valueOf(),ct.to.valueOf()],ie=bt[vt].find(Ze=>Ze!=null),Ce=[ie,ie],Ne=bt.slice();return Ne[0]=Pt,Ne[vt]=Ce,lt({...ht,_data:Ne},vt,0,1)}}if(de.fillBelowTo){const lt=I.fields.find(ct=>de.fillBelowTo===ct.name||de.fillBelowTo===ct.config?.displayNameFromDS||de.fillBelowTo===(0,p.CZ)(ct,I,H)),ht=lt?(0,p.CZ)(lt,I,H):de.fillBelowTo,vt=ue.get(ze),bt=ue.get(ht);(0,f.isNumber)(bt)&&(0,f.isNumber)(vt)?(k.addBand({series:[vt,bt],fill:void 0}),dt||(dt=35)):dt=0}}let Pe;st.id===l.S.Thresholds&&(Pe=be=>(0,m.YO)(Q.fields[be],F).color),k.addSeries({pathBuilder:Oe,pointsBuilder:ye,scaleKey:Ke,showPoints:_e,pointsFilter:tt,colorMode:st,fillOpacity:dt,theme:F,dynamicSeriesColor:Pe,drawStyle:de.drawStyle,lineColor:de.lineColor??Ve,lineWidth:de.lineWidth,lineInterpolation:de.lineInterpolation,lineStyle:de.lineStyle,barAlignment:de.barAlignment,barWidthFactor:de.barWidthFactor,barMaxWidth:de.barMaxWidth,pointSize:de.pointSize,spanNulls:de.spanNulls||!1,show:!de.hideFrom?.viz,gradientMode:de.gradientMode,thresholds:pe.thresholds,hardMin:ae.config.min,hardMax:ae.config.max,softMin:de.axisSoftMin,softMax:de.axisSoftMax,dataFrameFieldIndex:ae.state?.origin}),de.thresholdsStyle&&pe.thresholds&&(de.thresholdsStyle.mode??v.i3.Off)!==v.i3.Off&&k.addThresholds({config:de.thresholdsStyle,thresholds:pe.thresholds,scaleKey:Ke,theme:F,hardMin:ae.config.min,hardMax:ae.config.max,softMin:de.axisSoftMin,softMax:de.axisSoftMax})}let te=(0,a.i7)(I);k.setStackingGroups(te),j?.forEach(se=>{ue||(ue=R(I,H));let ae={};for(let pe in se.fieldMap){let de=se.fieldMap[pe];ae[pe]=ue.get(de)}se.init(k,ae)}),k.scaleKeys=[Z,G];const me=15;let q={dataIdx:(se,ae,pe,de)=>{let Me=se.data[ae];if(Me[pe]==null){let Ke=null,st=null,Ie;for(Ie=pe;Ke==null&&Ie-- >0;)Me[Ie]!=null&&(Ke=Ie);for(Ie=pe;st==null&&Ie++<Me.length;)Me[Ie]!=null&&(st=Ie);let Ve=se.data[0],_e=se.valToPos(de,"x"),tt=st==null?1/0:se.valToPos(Ve[st],"x"),dt=Ke==null?-1/0:se.valToPos(Ve[Ke],"x"),Oe=_e-dt,ye=tt-_e;Oe<=ye?Oe<=me&&(pe=Ke):ye<=me&&(pe=st)}return pe}};if(V&&V()!==g.m.Off){const se={point:{[Z]:null,[G]:null},data:I},ae=new y.es(se);q.sync={key:"__global_",filters:{pub:(pe,de,Me,Ke,st,Ie,Ve)=>V&&V()===g.m.Off?!1:(se.rowIndex=Ve,Me<0&&Ke<0?(se.point[oe]=null,se.point[G]=null,L.publish(new y.xH)):(se.point[oe]=de.posToVal(Me,Z),se.point[G]=de.posToVal(Ke,G),se.point.panelRelY=Ke>0?Ke/Ie:1,L.publish(ae),ae.payload.down=void 0),!0)},scales:[Z,G]}}return k.setSync(),k.setCursor(q),k};function R(I,F){const w=new Map;return I.fields.forEach((K,L)=>{const V=K.state?.origin;if(V){const H=F[V.frameIndex]?.fields[V.fieldIndex];H&&w.set((0,p.CZ)(H,F[V.frameIndex],F),L)}}),w}const S=["legend","options","theme"];class O extends t.Component{constructor(){super(...arguments),this.panelContext={},this.prepConfig=(F,w,K)=>{const{eventBus:L,sync:V}=this.context,{theme:H,timeZone:j,renderers:A,tweakAxis:_,tweakScale:k}=this.props;return b({frame:F,theme:H,timeZones:Array.isArray(j)?j:[j],getTimeRange:K,eventBus:L,sync:V,allFrames:w,renderers:A,tweakScale:k,tweakAxis:_})},this.renderLegend=F=>{const{legend:w,frames:K}=this.props;return!F||w&&!w.showLegend||!(0,i.o)(F,K)?null:t.createElement(i.l,{data:K,config:F,...w})}}render(){return t.createElement(c.d,{...this.props,prepConfig:this.prepConfig,propsToDiff:S,renderLegend:this.renderLegend})}}O.contextType=s.bb;const U=(0,n.HE)(O);U.displayName="TimeSeries"},50819:(Y,T,e)=>{"use strict";e.d(T,{P:()=>u});var t=e(66111),n=e(27480),c=e(72648),s=e(21133),i=e(8180),f=e(85511);const u=t.memo(({children:d,theme:o="info",placement:m="auto",content:l,title:p,closeButton:g=!0,onClose:y,footer:v})=>{const h=(0,c.wW)(r)[o],C=(0,t.useRef)(null),[a,P]=t.useState(!1),D=(0,t.useCallback)(()=>{P(!1),y?.()},[y]);(0,t.useEffect)(()=>{if(a){const U=I=>{I.key==="Escape"&&D()};return document.addEventListener("keydown",U),()=>{document.removeEventListener("keydown",U)}}},[a,D]);const{getArrowProps:x,getTooltipProps:M,setTooltipRef:b,setTriggerRef:R,visible:S,update:O}=(0,n.O)({visible:a,placement:m,interactive:!0,offset:[0,8],trigger:"click",onVisibleChange:U=>{P(U),U||y?.()}});return t.createElement(t.Fragment,null,t.cloneElement(d,{ref:R,tabIndex:0}),S&&t.createElement(f.h_,null,t.createElement("div",{"data-testid":"toggletip-content",ref:b,...M({className:h.container})},Boolean(p)&&t.createElement("div",{className:h.header},p),g&&t.createElement("div",{className:h.headerClose},t.createElement(i.h,{"aria-label":"Close Toggletip",name:"times",size:"md","data-testid":"toggletip-header-close",onClick:D})),t.createElement("div",{ref:C,...x({className:h.arrow})}),t.createElement("div",{className:h.body},(typeof l=="string"||t.isValidElement(l))&&l,typeof l=="function"&&O&&l({update:O})),Boolean(v)&&t.createElement("div",{className:h.footer},v))))});u.displayName="Toggletip";const r=d=>{const o=(0,s.k)(d,d.components.tooltip.background,d.components.tooltip.background,d.components.tooltip.text,{topBottom:3,rightLeft:3}),m=(0,s.k)(d,d.colors.error.main,d.colors.error.main,d.colors.error.contrastText,{topBottom:3,rightLeft:3});return{info:o,error:m}}},64319:(Y,T,e)=>{"use strict";e.d(T,{h:()=>o});var t=e(9892),n=e(66111),c=e(84559),s=e(68183),i=e(72648),f=e(85419),u=e(31403),r=e(39904),d=e(61860);const o=(0,n.forwardRef)(({tooltip:g,icon:y,iconSize:v,className:E,children:h,imgSrc:C,imgAlt:a,fullWidth:P,isOpen:D,narrow:x,variant:M="default",iconOnly:b,"aria-label":R,isHighlighted:S,...O},U)=>{const I=(0,i.wW)(p),F=(0,t.cx)({[I.button]:!0,[I.buttonFullWidth]:P,[I.narrow]:x},I[M],E),w=(0,t.cx)({[I.content]:!0,[I.contentWithIcon]:!!y,[I.contentWithRightIcon]:D!==void 0}),K=n.createElement("button",{ref:U,className:F,"aria-label":m(R,g),"aria-expanded":D,...O},l(y,v),C&&n.createElement("img",{className:I.img,src:C,alt:a??""}),h&&!b&&n.createElement("div",{className:w},h),D===!1&&n.createElement(r.J,{name:"angle-down"}),D===!0&&n.createElement(r.J,{name:"angle-up"}),S&&n.createElement("div",{className:I.highlight}));return g?n.createElement(d.u,{content:g,placement:"bottom"},K):K});o.displayName="ToolbarButton";function m(g,y){return g||(y?s.wl.components.PageToolbar.item(y):void 0)}function l(g,y){return g?(0,c.Mo)(g)?n.createElement(r.J,{name:g,size:`${y||"lg"}`}):g:null}const p=g=>{const y=(0,u.c9)(g,"primary","solid"),v=(0,u.c9)(g,"destructive","solid"),E=t.css`
    color: ${g.colors.text.primary};
    background: ${g.colors.secondary.main};

    &:hover {
      color: ${g.colors.text.primary};
      background: ${g.colors.secondary.shade};
      border: 1px solid ${g.colors.border.medium};
    }
  `,h=t.css`
    color: ${g.colors.text.secondary};
    background: transparent;
    border: 1px solid transparent;

    &:hover {
      color: ${g.colors.text.primary};
      background: ${g.colors.background.secondary};
    }
  `;return{button:t.css`
      label: toolbar-button;
      position: relative;
      display: flex;
      align-items: center;
      height: ${g.spacing(g.components.height.md)};
      padding: ${g.spacing(0,1)};
      border-radius: ${g.shape.borderRadius()};
      line-height: ${g.components.height.md*g.spacing.gridSize-2}px;
      font-weight: ${g.typography.fontWeightMedium};
      border: 1px solid ${g.colors.secondary.border};
      white-space: nowrap;
      transition: ${g.transitions.create(["background","box-shadow","border-color","color"],{duration:g.transitions.duration.short})};

      &:focus,
      &:focus-visible {
        ${(0,f.getFocusStyles)(g)}
        z-index: 1;
      }

      &:focus:not(:focus-visible) {
        ${(0,f.getMouseFocusStyles)(g)}
      }

      &:hover {
        box-shadow: ${g.shadows.z1};
      }

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        opacity: ${g.colors.action.disabledOpacity};
        background: ${g.colors.action.disabledBackground};
        box-shadow: none;

        &:hover {
          color: ${g.colors.text.disabled};
          background: ${g.colors.action.disabledBackground};
          box-shadow: none;
        }
      }
    `,default:h,canvas:E,active:t.css`
      color: ${g.v1.palette.orangeDark};
      border-color: ${g.v1.palette.orangeDark};
      background-color: transparent;

      &:hover {
        color: ${g.colors.text.primary};
        background: ${g.colors.emphasize(g.colors.background.canvas,.03)};
      }
    `,primary:(0,t.css)(y),destructive:(0,t.css)(v),narrow:t.css`
      padding: 0 ${g.spacing(.5)};
    `,img:t.css`
      width: 16px;
      height: 16px;
      margin-right: ${g.spacing(1)};
    `,buttonFullWidth:t.css`
      flex-grow: 1;
    `,content:t.css`
      flex-grow: 1;
    `,contentWithIcon:t.css`
      display: none;
      padding-left: ${g.spacing(1)};

      @media ${f.mediaUp(g.v1.breakpoints.md)} {
        display: block;
      }
    `,contentWithRightIcon:t.css`
      padding-right: ${g.spacing(.5)};
    `,highlight:t.css`
      background-color: ${g.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      position: absolute;
      top: -3px;
      right: -3px;
      z-index: 1;
    `}}},8125:(Y,T,e)=>{"use strict";e.d(T,{R:()=>d});var t=e(9892),n=e(29952),c=e(83962),s=e(86922),i=e(66111),f=e(72648),u=e(85511),r=e(64319);const d=(0,i.forwardRef)(({alignment:m="left",className:l,children:p,...g},y)=>{const v=i.Children.toArray(p).filter(U=>U!=null),[E,h]=(0,i.useState)(Array(v.length).fill(!1)),C=(0,i.useRef)(null),[a,P]=(0,i.useState)(!1),D=(0,i.useRef)(null),x=(0,i.createRef)(),{overlayProps:M}=(0,s.Ir)({onClose:()=>P(!1),isDismissable:!0,isOpen:a,shouldCloseOnInteractOutside:U=>{const I=(0,u.RN)();return!D.current?.contains(U)&&!I.contains(U)}},x),{dialogProps:b}=(0,n.R)({},x),R=(0,f.l4)(),S=m==="left"?E.indexOf(!1)-1:E.length,O=o(R,S,m);return(0,i.useLayoutEffect)(()=>{const U=new IntersectionObserver(I=>{I.forEach(F=>{if(F.target instanceof HTMLElement&&F.target.parentNode){const w=Array.prototype.indexOf.call(F.target.parentNode.children,F.target);h(K=>{const L=[...K];return L[w]=F.isIntersecting,L})}})},{threshold:1,root:C.current});return C.current&&Array.from(C.current.children).forEach(I=>{I instanceof HTMLElement&&I!==D.current&&U.observe(I)}),()=>U.disconnect()},[p]),i.createElement("div",{ref:C,className:(0,t.cx)(O.container,l),...g},v.map((U,I)=>i.createElement("div",{key:I,style:{order:I,visibility:E[I]?"visible":"hidden"},className:O.childWrapper},U)),E.includes(!1)&&i.createElement("div",{ref:D,className:O.overflowButton},i.createElement(r.h,{variant:a?"active":"default",tooltip:"Show more items",onClick:()=>P(!a),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),a&&i.createElement(c.MT,{contain:!0,autoFocus:!0},i.createElement("div",{className:O.overflowItems,ref:x,...M,...b},v.map((U,I)=>!E[I]&&U)))))});d.displayName="ToolbarButtonRow";const o=(m,l,p)=>({overflowButton:t.css`
    order: ${l};
  `,overflowItems:t.css`
    align-items: center;
    background-color: ${m.colors.background.primary};
    border-radius: ${m.shape.borderRadius()};
    box-shadow: ${m.shadows.z3};
    display: flex;
    flex-wrap: wrap;
    gap: ${m.spacing(1)};
    margin-top: ${m.spacing(1)};
    max-width: 80vw;
    padding: ${m.spacing(.5,1)};
    position: absolute;
    right: 0;
    top: 100%;
    width: max-content;
    z-index: ${m.zIndex.sidemenu};
  `,container:t.css`
    align-items: center;
    display: flex;
    gap: ${m.spacing(1)};
    justify-content: ${p==="left"?"flex-start":"flex-end"};
    min-width: 0;
    position: relative;
  `,childWrapper:t.css`
    align-items: center;
    display: flex;
    gap: ${m.spacing(1)};
  `})},56921:(Y,T,e)=>{"use strict";e.d(T,{J:()=>r});var t=e(66111),n=e(69733),c=e(14760),s=e(66525),i=e(85511);const f={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},u={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class r extends t.PureComponent{render(){const{content:o,show:m,placement:l,onMouseEnter:p,onMouseLeave:g,className:y,wrapperClassName:v,renderArrow:E,referenceElement:h,onKeyDown:C}=this.props;return t.createElement(n.dK,null,t.createElement(s.ZP,{in:m,timeout:100,mountOnEnter:!0,unmountOnExit:!0},a=>t.createElement(i.h_,null,t.createElement(c.r,{placement:l,referenceElement:h,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}]},({ref:P,style:D,placement:x,arrowProps:M,update:b})=>t.createElement("div",{onMouseEnter:p,onMouseLeave:g,onKeyDown:C,ref:P,style:{...D,...f,...u[a]},"data-placement":x,className:`${v}`},t.createElement("div",{className:y},typeof o=="string"&&o,t.isValidElement(o)&&t.cloneElement(o),typeof o=="function"&&o({updatePopperPosition:b}),E&&E({arrowProps:M,placement:x})))))))}}},39604:(Y,T,e)=>{"use strict";e.d(T,{D:()=>n});var t=e(66111);class n extends t.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:s,content:i,placement:f="auto"}=this.props,{show:u}=this.state;return s(this.showPopper,this.hidePopper,{show:u,placement:f,content:i})}}},61860:(Y,T,e)=>{"use strict";e.d(T,{u:()=>f});var t=e(66111),n=e(27480),c=e(72648),s=e(21133),i=e(85511);const f=t.forwardRef(({children:r,theme:d,interactive:o,show:m,placement:l,content:p},g)=>{const[y,v]=t.useState(m);(0,t.useEffect)(()=>{if(y!==!1){const R=S=>{S.key==="Escape"&&v(!1)};return document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}}else return},[y]);const{getArrowProps:E,getTooltipProps:h,setTooltipRef:C,setTriggerRef:a,visible:P,update:D}=(0,n.O)({visible:m??y,placement:l,interactive:o,delayHide:o?100:0,delayShow:150,offset:[0,8],trigger:["hover","focus"],onVisibleChange:v}),M=(0,c.wW)(u)[d??"info"],b=(0,t.useCallback)(R=>{a(R),typeof g=="function"?g(R):g&&(g.current=R)},[g,a]);return t.createElement(t.Fragment,null,t.cloneElement(r,{ref:b,tabIndex:0}),P&&t.createElement(i.h_,null,t.createElement("div",{ref:C,...h({className:M.container})},t.createElement("div",{...E({className:M.arrow})}),typeof p=="string"&&p,t.isValidElement(p)&&t.cloneElement(p),typeof p=="function"&&D&&p({updatePopperPosition:D}))))});f.displayName="Tooltip";const u=r=>{const d=(0,s.k)(r,r.components.tooltip.background,r.components.tooltip.background,r.components.tooltip.text,{topBottom:.5,rightLeft:1}),o=(0,s.k)(r,r.colors.error.main,r.colors.error.main,r.colors.error.contrastText,{topBottom:.5,rightLeft:1});return{info:d,["info-alt"]:d,error:o}}},69636:(Y,T,e)=>{"use strict";e.d(T,{H:()=>c});var t=e(66111);function n(s,i){const f=[];return s.forEach(u=>{f.push(u.start,u.end+1)}),f[0]!==0&&f.unshift(0),f[f.length-1]!==i&&f.push(i),f}const c=s=>{let{highlightParts:i,text:f,highlightClassName:u}=s;if(!i?.length)return null;let r=[],d=n(i,f.length),o=i[0].start===0;for(let m=1;m<d.length;m++){let l=d[m-1],p=d[m];r.push((0,t.createElement)(o?"mark":"span",{key:m-1,className:o?u:void 0},f.substring(l,p))),o=!o}return t.createElement("div",null,r)}},61227:(Y,T,e)=>{"use strict";e.d(T,{n:()=>i});var t=e(66111),n=e(2703),c=e(95093);function s(f){return`Custom unit: ${f}`}class i extends t.PureComponent{constructor(){super(...arguments),this.onChange=u=>{this.props.onChange(u.value)}}render(){const{value:u,width:r}=this.props;let d;const m=(0,n.QW)().map(l=>{const p=l.submenu.map(g=>{const y={label:g.text,value:g.value};return g.value===u&&(d=y),y});return{label:l.text,value:l.text,items:p}});return u&&!d&&(d={value:u,label:u}),t.createElement(c.v,{width:r,initialValue:d&&d.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:s,options:m,placeholder:"Choose",onSelect:this.props.onChange})}}},15670:(Y,T,e)=>{"use strict";e.d(T,{b:()=>f});var t=e(66111),n=e(68183),c=e(72648),s=e(31403),i=e(8581);function f({"aria-label":u,label:r,icon:d,options:o,onChange:m,variant:l,minWidth:p=16,size:g="sm",isFullWidth:y=!0,menuPlacement:v,fill:E,buttonCss:h}){const[C,a]=(0,t.useState)(!1),P=(0,c.l4)();return t.createElement(t.Fragment,null,!C&&t.createElement(s.zx,{size:g||"sm",className:h,icon:d||"plus",onClick:()=>a(!0),variant:l,fill:E,fullWidth:y,"aria-label":n.wl.components.ValuePicker.button(u??r)},r),C&&t.createElement("span",{style:{minWidth:P.spacing(p),flexGrow:y?1:void 0}},t.createElement(i.Ph,{placeholder:r,options:o,"aria-label":n.wl.components.ValuePicker.select(u??r),isOpen:!0,onCloseMenu:()=>a(!1),autoFocus:!0,onChange:D=>{a(!1),m(D)},menuPlacement:v})))}},729:(Y,T,e)=>{"use strict";e.d(T,{AY:()=>u});var t=e(9892),n=e(66111),c=e(27443),s=e(72648),i=e(85419),f=e(68226);const u=({width:o,height:m,legend:l,children:p})=>{const g=(0,s.l4)(),y=(0,s.wW)(r),v={display:"flex",width:`${o}px`,height:`${m}px`},[E,h]=(0,c.Z)();if(!l)return n.createElement(n.Fragment,null,n.createElement("div",{tabIndex:0,style:v,className:y.viz},p(o,m)));let{placement:C,maxHeight:a="35%",maxWidth:P="60%"}=l.props;document.body.clientWidth<g.breakpoints.values.lg&&(C="bottom");let D=null;const x={};switch(C){case"bottom":v.flexDirection="column",x.maxHeight=a,h.height&&(D={width:o,height:m-h.height});break;case"right":v.flexDirection="row",x.maxWidth=P,h.width&&(D={width:o-h.width,height:m}),l.props.width&&(x.width=l.props.width,D={width:o-l.props.width,height:m});break}return D?.width===0&&(D.width=o),D?.height===0&&(D.height=m),n.createElement("div",{style:v},n.createElement("div",{tabIndex:0,className:y.viz},D&&p(D.width,D.height)),n.createElement("div",{style:x,ref:E},n.createElement(f.$,{hideHorizontalTrack:!0},l)))},r=o=>({viz:(0,t.css)({flexGrow:2,borderRadius:o.shape.borderRadius(1),"&:focus-visible":(0,i.getFocusStyles)(o)})}),d=({children:o})=>n.createElement(n.Fragment,null,o);u.Legend=d},6264:(Y,T,e)=>{"use strict";e.d(T,{F:()=>s});var t=e(66111),n=e(72990),c=e(72648);const s=t.memo(t.forwardRef(({color:i,className:f,gradient:u,...r},d)=>{const o=(0,c.l4)();let m;if(u){const p=n.WO.get(u).getColors?.(o);p?.length?m=`linear-gradient(90deg, ${p.join(", ")})`:m=o.visualization.getColorByName("")}else m=i;const l={background:m,width:"14px",height:"4px",borderRadius:o.shape.radius.pill,display:"inline-block",marginRight:"8px"};return t.createElement("div",{"data-testid":"series-icon",ref:d,className:f,style:l,...r})}));s.displayName="SeriesIcon"},78056:(Y,T,e)=>{"use strict";e.d(T,{l:()=>M});var t=e(66111),n=e(23588),c=e(40538),s=e(60325),i=e(17882),f=e(9892),u=e(72648),r=e(19882),d=e(56766),o=e(46920);const m=({items:b,itemRenderer:R,onLabelMouseOver:S,onLabelMouseOut:O,onLabelClick:U,placement:I,className:F,readonly:w})=>{const K=(0,u.wW)(l);R||(R=V=>t.createElement(o.e,{item:V,onLabelClick:U,onLabelMouseOver:S,onLabelMouseOut:O,readonly:w}));const L=V=>`${V.getItemKey?V.getItemKey():V.label}`;switch(I){case"right":{const V=(H,j)=>t.createElement("span",{className:K.itemRight},R(H,j));return t.createElement("div",{className:(0,f.cx)(K.rightWrapper,F)},t.createElement(d.a,{items:b,renderItem:V,getItemKey:L}))}case"bottom":default:{const V=(H,j)=>t.createElement("span",{className:K.itemBottom},R(H,j));return t.createElement("div",{className:(0,f.cx)(K.bottomWrapper,F)},t.createElement("div",{className:K.section},t.createElement(r.Y,{items:b.filter(H=>H.yAxis===1),renderItem:V,getItemKey:L})),t.createElement("div",{className:(0,f.cx)(K.section,K.sectionRight)},t.createElement(r.Y,{items:b.filter(H=>H.yAxis!==1),renderItem:V,getItemKey:L})))}}};m.displayName="VizLegendList";const l=b=>{const R=f.css`
    padding-right: 10px;
    display: flex;
    font-size: ${b.typography.bodySmall.fontSize};
    white-space: nowrap;
  `;return{itemBottom:R,itemRight:(0,f.cx)(R,f.css`
        margin-bottom: ${b.spacing(.5)};
      `),rightWrapper:f.css`
      padding-left: ${b.spacing(.5)};
    `,bottomWrapper:f.css`
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      width: 100%;
      padding-left: ${b.spacing(.5)};
    `,section:f.css`
      display: flex;
    `,sectionRight:f.css`
      justify-content: flex-end;
      flex-grow: 1;
    `}};var p=e(82897),g=e(39904),y=e(2703),v=e(85419),E=e(59943);const h=({item:b,onLabelClick:R,onLabelMouseOver:S,onLabelMouseOut:O,className:U,readonly:I})=>{const F=(0,u.wW)(C),w=(0,t.useCallback)(V=>{S&&S(b,V)},[b,S]),K=(0,t.useCallback)(V=>{O&&O(b,V)},[b,O]),L=(0,t.useCallback)(V=>{R&&R(b,V)},[b,R]);return t.createElement("tr",{className:(0,f.cx)(F.row,U)},t.createElement("td",null,t.createElement("span",{className:F.itemWrapper},t.createElement(E.i,{color:b.color,seriesName:b.label,readonly:I}),t.createElement("button",{disabled:I,type:"button",title:b.label,onBlur:K,onFocus:w,onMouseOver:w,onMouseOut:K,onClick:I?void 0:L,className:(0,f.cx)(F.label,b.disabled&&F.labelDisabled)},b.label," ",b.yAxis===2&&t.createElement("span",{className:F.yAxisLabel},"(right y-axis)")))),b.getDisplayValues&&b.getDisplayValues().map((V,H)=>t.createElement("td",{className:F.value,key:`${V.title}-${H}`},(0,y.zc)(V))))};h.displayName="LegendTableItem";const C=b=>{const R=v.hoverColor(b.colors.background.primary,b);return{row:f.css`
      label: LegendRow;
      font-size: ${b.v1.typography.size.sm};
      border-bottom: 1px solid ${b.colors.border.weak};
      td {
        padding: ${b.spacing(.25,1)};
        white-space: nowrap;
      }

      &:hover {
        background: ${R};
      }
    `,label:f.css`
      label: LegendLabel;
      white-space: nowrap;
      background: none;
      border: none;
      font-size: inherit;
      padding: 0;
      max-width: 600px;
      text-overflow: ellipsis;
      overflow: hidden;
    `,labelDisabled:f.css`
      label: LegendLabelDisabled;
      color: ${b.colors.text.disabled};
    `,itemWrapper:f.css`
      display: flex;
      white-space: nowrap;
      align-items: center;
    `,value:f.css`
      text-align: right;
    `,yAxisLabel:f.css`
      color: ${b.colors.text.secondary};
    `}},a=({items:b,sortBy:R,sortDesc:S,itemRenderer:O,className:U,onToggleSort:I,onLabelClick:F,onLabelMouseOver:w,onLabelMouseOut:K,readonly:L})=>{const V=(0,u.wW)(P),H={};for(const A of b)if(A.getDisplayValues)for(const _ of A.getDisplayValues())H[_.title??"?"]=_;const j=R?(0,p.orderBy)(b,A=>{if(A.getDisplayValues){const _=A.getDisplayValues().filter(k=>k.title===R)[0];return _&&_.numeric}},S?"desc":"asc"):b;return O||(O=(A,_)=>t.createElement(h,{key:`${A.label}-${_}`,item:A,onLabelClick:F,onLabelMouseOver:w,onLabelMouseOut:K,readonly:L})),t.createElement("table",{className:(0,f.cx)(V.table,U)},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null),Object.keys(H).map(A=>{const _=H[A];return t.createElement("th",{title:_.description,key:A,className:(0,f.cx)(V.header,I&&V.headerSortable,{[V.withIcon]:R===A}),onClick:()=>{I&&I(A)}},A,R===A&&t.createElement(g.J,{size:"xs",name:S?"angle-down":"angle-up"}))}))),t.createElement("tbody",null,j.map(O)))},P=b=>({table:f.css`
    width: 100%;
    th:first-child {
      width: 100%;
      border-bottom: 1px solid ${b.colors.border.weak};
    }
  `,header:f.css`
    color: ${b.colors.primary.text};
    font-weight: ${b.typography.fontWeightMedium};
    border-bottom: 1px solid ${b.colors.border.weak};
    padding: ${b.spacing(.25,1,.25,1)};
    font-size: ${b.typography.bodySmall.fontSize};
    text-align: right;
    white-space: nowrap;
  `,withIcon:f.css`
    padding-right: 4px;
  `,headerSortable:f.css`
    cursor: pointer;
  `});var D=e(26993);function x(b){return b.ctrlKey||b.metaKey||b.shiftKey?i.R.AppendToSelection:i.R.ToggleSelection}function M({items:b,displayMode:R,sortBy:S,seriesVisibilityChangeBehavior:O=D.Y.Isolate,sortDesc:U,onLabelClick:I,onToggleSort:F,placement:w,className:K,itemRenderer:L,readonly:V}){const{eventBus:H,onToggleSeriesVisibility:j,onToggleLegendSort:A}=(0,s.R9)(),_=(0,t.useCallback)((re,Z)=>{H?.publish({type:n.es.type,payload:{raw:Z,x:0,y:0,dataId:re.label}})},[H]),k=(0,t.useCallback)((re,Z)=>{H?.publish({type:n.xH.type,payload:{raw:Z,x:0,y:0,dataId:re.label}})},[H]),Q=(0,t.useCallback)((re,Z)=>{I&&I(re,Z),j&&j(re.label,O===D.Y.Hide?i.R.AppendToSelection:x(Z))},[j,I,O]);switch(R){case c.jK.Table:return t.createElement(a,{className:K,items:b,placement:w,sortBy:S,sortDesc:U,onLabelClick:Q,onToggleSort:F||A,onLabelMouseOver:_,onLabelMouseOut:k,itemRenderer:L,readonly:V});case c.jK.List:return t.createElement(m,{className:K,items:b,placement:w,onLabelMouseOver:_,onLabelMouseOut:k,onLabelClick:Q,itemRenderer:L,readonly:V});default:return null}}M.displayName="VizLegend"},46920:(Y,T,e)=>{"use strict";e.d(T,{e:()=>m});var t=e(9892),n=e(66111),c=e(68183),s=e(72648),i=e(59943),f=e(82897),u=e(2703),r=e(19882);const d=({stats:p})=>{const g=(0,s.wW)(o);return p.length===0?null:n.createElement(r.Y,{className:g.list,items:p,renderItem:y=>n.createElement("div",{className:g.item,title:y.description},y.title&&`${(0,f.capitalize)(y.title)}:`," ",(0,u.zc)(y))})},o=()=>({list:t.css`
    flex-grow: 1;
    text-align: right;
  `,item:t.css`
    margin-left: 8px;
  `});d.displayName="VizLegendStatsList";const m=({item:p,onLabelClick:g,onLabelMouseOver:y,onLabelMouseOut:v,className:E,readonly:h})=>{const C=(0,s.wW)(l),a=(0,n.useCallback)(x=>{y&&y(p,x)},[p,y]),P=(0,n.useCallback)(x=>{v&&v(p,x)},[p,v]),D=(0,n.useCallback)(x=>{g&&g(p,x)},[p,g]);return n.createElement("div",{className:(0,t.cx)(C.itemWrapper,p.disabled&&C.itemDisabled,E),"aria-label":c.wl.components.VizLegend.seriesName(p.label)},n.createElement(i.i,{seriesName:p.label,color:p.color,gradient:p.gradient,readonly:h}),n.createElement("button",{disabled:h,type:"button",title:p.label,onBlur:P,onFocus:a,onMouseOver:a,onMouseOut:P,onClick:D,className:C.label},p.label),p.getDisplayValues&&n.createElement(d,{stats:p.getDisplayValues()}))};m.displayName="VizLegendListItem";const l=p=>({label:t.css`
    label: LegendLabel;
    white-space: nowrap;
    background: none;
    border: none;
    font-size: inherit;
    padding: 0;
    user-select: text;
    max-width: 600px;
    text-overflow: ellipsis;
    overflow: hidden;
  `,itemDisabled:t.css`
    label: LegendLabelDisabled;
    color: ${p.colors.text.disabled};
  `,itemWrapper:t.css`
    label: LegendItemWrapper;
    display: flex;
    white-space: nowrap;
    align-items: center;
    flex-grow: 1;
  `,value:t.css`
    text-align: right;
  `,yAxisLabel:t.css`
    color: ${p.v1.palette.gray2};
  `})},59943:(Y,T,e)=>{"use strict";e.d(T,{i:()=>i});var t=e(66111),n=e(90208),c=e(60325),s=e(6264);const i=t.memo(({seriesName:f,color:u,gradient:r,readonly:d})=>{const{onSeriesColorChange:o}=(0,c.R9)(),m=(0,t.useCallback)(l=>o(f,l),[f,o]);return f&&o&&u&&!d?t.createElement(n.sp,{color:u,onChange:m,enableNamedColors:!0},({ref:l,showColorPicker:p,hideColorPicker:g})=>t.createElement(s.F,{color:u,className:"pointer",ref:l,onClick:p,onMouseLeave:g})):t.createElement(s.F,{color:u,gradient:r})});i.displayName="VizLegendSeriesIcon"},26993:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>t});var t=(n=>(n[n.Isolate=0]="Isolate",n[n.Hide=1]="Hide",n))(t||{})},4387:(Y,T,e)=>{"use strict";e.d(T,{Q:()=>i});var t=e(66111),n=e(82229);const c=(u,r,d,o)=>{const m=s(u,r,o),l=s(r,u,o),p=Math.max(m,l);let g=Math.floor(u/p),y=Math.ceil(o/g);g=Math.ceil(o/y);const v=g-(g*y-o),E=u/v-d+d/v;return{width:u/g-d+d/g,height:r/y-d+d/y,widthOnLastRow:E,xCount:g,yCount:y}};function s(u,r,d){const o=Math.ceil(Math.sqrt(d*u/r));return Math.floor(o*r/u)*o<d?r/Math.ceil(o*r/u):u/o}class i extends t.PureComponent{constructor(r){super(r),this.state={values:r.getValues()}}componentDidUpdate(r){const{renderCounter:d,source:o}=this.props;(d!==r.renderCounter||o!==r.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:r,width:d,height:o}=this.props;return r===n.wm.Auto?d>o?n.wm.Vertical:n.wm.Horizontal:r}renderGrid(){const{renderValue:r,height:d,width:o,itemSpacing:m,getAlignmentFactors:l,orientation:p}=this.props,{values:g}=this.state,y=c(o,d,m,g.length),v=l?l(g,y.width,y.height):{};let E=0,h=0,C=[];for(let a=0;a<g.length;a++){const P=g[a],x=h===y.yCount-1?y.widthOnLastRow:y.width,M=y.height,b=E*x+m*E,R=h*M+m*h,S={position:"absolute",left:b,top:R,width:`${x}px`,height:`${M}px`};C.push(t.createElement("div",{key:a,style:S},r({value:P,width:x,height:M,alignmentFactors:v,orientation:p,count:g.length}))),E++,E===y.xCount&&(E=0,h++)}return t.createElement("div",{style:{position:"relative"}},C)}render(){const{renderValue:r,height:d,width:o,itemSpacing:m,getAlignmentFactors:l,autoGrid:p,orientation:g,minVizWidth:y,minVizHeight:v}=this.props,{values:E}=this.state;if(p&&g===n.wm.Auto)return this.renderGrid();const h={display:"flex"},C={display:"flex",overflow:`${y?"auto":"hidden"} ${v?"auto":"hidden"}`};let a=d,P=o,D=this.getOrientation();switch(D){case n.wm.Horizontal:C.flexDirection="column",C.height=`${d}px`,h.marginBottom=`${m}px`,P=o,a=Math.max(d/E.length-m+m/E.length,v??0);break;case n.wm.Vertical:C.flexDirection="row",C.justifyContent="space-between",h.marginRight=`${m}px`,a=d,P=Math.max(o/E.length-m+m/E.length,y??0)}h.width=`${P}px`,h.height=`${a}px`;const x=l?l(E,P,a):{};return t.createElement("div",{style:C},E.map((M,b)=>t.createElement("div",{key:b,style:f(h,b,E.length)},r({value:M,width:P,height:a,alignmentFactors:x,orientation:D,count:E.length}))))}}i.defaultProps={itemSpacing:8};function f(u,r,d){return r===d-1?{...u,marginRight:0,marginBottom:0}:u}},50800:(Y,T,e)=>{"use strict";e.d(T,{V:()=>f,c:()=>u});var t=e(9892),n=e(66111),c=e(72648),s=e(6264);const i=r=>({icon:t.css`
      margin-right: ${r.spacing(1)};
      vertical-align: middle;
    `,seriesTable:t.css`
      display: table;
    `,seriesTableRow:t.css`
      display: table-row;
      font-size: ${r.typography.bodySmall.fontSize};
    `,seriesTableCell:t.css`
      display: table-cell;
    `,label:t.css`
      word-break: break-all;
    `,value:t.css`
      padding-left: ${r.spacing(2)};
      text-align: right;
    `,activeSeries:t.css`
      font-weight: ${r.typography.fontWeightBold};
      color: ${r.colors.text.maxContrast};
    `,timestamp:t.css`
      font-weight: ${r.typography.fontWeightBold};
      font-size: ${r.typography.bodySmall.fontSize};
    `}),f=({color:r,label:d,value:o,isActive:m})=>{const l=(0,c.wW)(i);return n.createElement("div",{"data-testid":"SeriesTableRow",className:(0,t.cx)(l.seriesTableRow,m&&l.activeSeries)},r&&n.createElement("div",{className:l.seriesTableCell},n.createElement(s.F,{color:r,className:l.icon})),d&&n.createElement("div",{className:(0,t.cx)(l.seriesTableCell,l.label)},d),o&&n.createElement("div",{className:(0,t.cx)(l.seriesTableCell,l.value)},o))},u=({timestamp:r,series:d})=>{const o=(0,c.wW)(i);return n.createElement(n.Fragment,null,r&&n.createElement("div",{className:o.timestamp,"aria-label":"Timestamp"},r),d.map((m,l)=>n.createElement(f,{isActive:m.isActive,label:m.label,color:m.color,value:m.value,key:`${m.label}-${l}`})))}},24505:(Y,T,e)=>{"use strict";e.d(T,{I:()=>f});var t=e(9892),n=e(66111),c=e(72648),s=e(85511),i=e(20888);const f=({content:r,position:d,offset:o})=>{const m=(0,c.wW)(u);return d?n.createElement(s.h_,{className:m.portal},n.createElement(i.S,{position:d,offset:o||{x:0,y:0}},r)):null};f.displayName="VizTooltip";const u=()=>({portal:t.css`
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      width: 100%;
      height: 100%;
    `})},20888:(Y,T,e)=>{"use strict";e.d(T,{S:()=>u});var t=e(9892),n=e(66111),c=e(830),s=e(72648),i=e(85419);const f=(d=0,o=0,m=0,l=0,p=0,g=0,y=0,v=0)=>{let E=d,h=o;const C=Math.max(d+p+m-(y-p),0),a=Math.abs(Math.min(d-p-m-p,0)),P=C>0,D=a>0,x=Math.max(o+g+l-(v-g),0),M=Math.abs(Math.min(o-g-l-g,0)),b=x>0,R=M>0;return P&&D?E=C>a?p:y-p-m:P?E=d-p-m:E=d+p,b&&R?h=x>M?g:v-g-l:b?h=o-g-l:h=o+g,{x:E,y:h}},u=({position:{x:d,y:o},offset:{x:m,y:l},children:p,allowPointerEvents:g=!1,className:y,...v})=>{const E=(0,n.useRef)(null),[h,C]=(0,n.useState)({width:0,height:0}),{width:a,height:P}=(0,c.Z)(),[D,x]=(0,n.useState)({x:d+m,y:o+l}),M=(0,n.useMemo)(()=>new ResizeObserver(R=>{for(let S of R){const O=Math.floor(S.contentRect.width+16),U=Math.floor(S.contentRect.height+2*8);(h.width!==O||h.height!==U)&&C({width:Math.min(O,a),height:Math.min(U,P)})}}),[h,a,P]);(0,n.useLayoutEffect)(()=>(E.current&&M.observe(E.current),()=>{M.disconnect()}),[M]),(0,n.useLayoutEffect)(()=>{if(E&&E.current){const{x:R,y:S}=f(d,o,h.width,h.height,m,l,a,P);x({x:R,y:S})}},[a,P,d,m,o,l,h]);const b=(0,s.wW)(r);return n.createElement("div",{ref:E,style:{position:"fixed",left:0,pointerEvents:g?"auto":"none",top:0,transform:`translate(${D.x}px, ${D.y}px)`,transition:"transform ease-out 0.1s"},...v,className:(0,t.cx)(b.wrapper,y)},p)};u.displayName="VizTooltipContainer";const r=d=>({wrapper:t.css`
    ${(0,i.getTooltipContainerStyles)(d)}
  `})},14835:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{Alert:()=>gt.b,AlertingSettings:()=>hn.O,AsyncMultiSelect:()=>os.M8,AsyncSelect:()=>os.qb,AsyncVirtualizedSelect:()=>os.gY,AutoSaveField:()=>re.h,AutoSizeInput:()=>or.H,Badge:()=>fr.C,BarGauge:()=>ct.xf,BarGaugeDisplayMode:()=>Ve.QH,BigValue:()=>Be.w6,BigValueColorMode:()=>Be.pc,BigValueGraphMode:()=>Be.IG,BigValueJustifyMode:()=>Be.ap,BigValueTextMode:()=>Be.jG,BrowserLabel:()=>zt._,Button:()=>ca.zx,ButtonCascader:()=>P.O,ButtonGroup:()=>ss.h,ButtonSelect:()=>it.d,CallToActionCard:()=>Mt._,Card:()=>ms.Z,CardContainer:()=>Gt._,Cascader:()=>a.v,CertificationKey:()=>ea.W,Checkbox:()=>qs.X,ClickOutsideWrapper:()=>Je.L,ClipboardButton:()=>C.m,CodeEditor:()=>ue.p,CodeEditorSuggestionItemKind:()=>me.k,CollapsableSection:()=>ft.s,Collapse:()=>Ye.U,ColorPicker:()=>b.zH,ColorPickerInput:()=>R.T,ConfirmButton:()=>o.p,ConfirmModal:()=>ge.s,Container:()=>Ws.W2,ContextMenu:()=>Wt.x,ControlledCollapse:()=>Ye.y,Counter:()=>Pe.A,CustomHeadersSettings:()=>rn.H,CustomScrollbar:()=>E.$,DataLinkButton:()=>St.k,DataLinkInput:()=>Ft.v,DataLinksContextMenu:()=>Kt.V,DataLinksInlineEditor:()=>Ot.d,DataSourceHttpSettings:()=>cn.E,DatePicker:()=>H.M,DatePickerWithInput:()=>j.d,DateTimePicker:()=>A.x,DeleteButton:()=>m.m,Drawer:()=>ha.d,Dropdown:()=>xt.L,DropdownIndicator:()=>Vs.m,EmptySearchResult:()=>O.K,ErrorBoundary:()=>jt.SV,ErrorBoundaryAlert:()=>jt.z4,ErrorWithStack:()=>an.X,EventsCanvas:()=>Xn.TZ,FIXED_UNIT:()=>Re.j,FadeTransition:()=>Vn.n,FeatureBadge:()=>Rt.a,FeatureInfoBox:()=>Rt.Z,Field:()=>Ka.g,FieldArray:()=>ur.F,FieldLinkList:()=>we.Z,FieldSet:()=>va.C,FieldValidationMessage:()=>ns.S,FileDropzone:()=>_s.Yo,FileDropzoneDefaultChildren:()=>_s.A_,FileListItem:()=>_s.K$,FileUpload:()=>us.p,FilterInput:()=>gr.H,FilterPill:()=>le.B,Form:()=>as.l,FormattedValueDisplay:()=>He.W,FullWidthButtonContainer:()=>qe.f,Gauge:()=>lt.a,Graph:()=>ht.k,GraphContextMenu:()=>bt.w,GraphContextMenuHeader:()=>bt.b,GraphNG:()=>Re.d,GraphSeriesToggler:()=>mt.U,GraphWithLegend:()=>vt.U,HorizontalGroup:()=>Ws.Lh,Icon:()=>r.J,IconButton:()=>d.h,InfoBox:()=>Ut.v,InlineField:()=>xs._,InlineFieldRow:()=>Is.Z,InlineFormLabel:()=>sn.c,InlineLabel:()=>rr.W,InlineSegmentGroup:()=>hs.m,InlineSwitch:()=>hr.x,InlineToast:()=>D.K,Input:()=>Hs.I,InputControl:()=>Ba.g,InteractiveTable:()=>k.e,JSONFormatter:()=>$t.g,JsonExplorer:()=>_t.u,KeyboardPlugin:()=>Ct.Cm,Label:()=>qa._,LegacyForms:()=>on,LegacyInputStatus:()=>n.G,Legend:()=>ts.D,Link:()=>Ga.r,LinkButton:()=>ca.Qj,List:()=>_.a,LoadingBar:()=>M.F,LoadingPlaceholder:()=>x.u,Marker:()=>Xn.Jx,Menu:()=>ln.v,MenuGroup:()=>fn.k,MenuItem:()=>pn.s,Modal:()=>se.u,ModalHeader:()=>ae.x,ModalRoot:()=>Me.Y0,ModalTabContent:()=>de.Q,ModalTabsHeader:()=>pe.H,ModalsContext:()=>Me.kr,ModalsController:()=>Me.JY,ModalsProvider:()=>Me.$i,MultiSelect:()=>os.NU,PageToolbar:()=>Ke.X,Pagination:()=>Z.t,PanelChrome:()=>Qe.fm,PanelChromeErrorIndicator:()=>Ue.g,PanelChromeLoadingIndicator:()=>Le.T,PanelContainer:()=>wt.l,PanelContextProvider:()=>ve._w,PanelContextRoot:()=>ve.bb,PlotLegend:()=>bn.l,PluginSignatureBadge:()=>Vt.o,Popover:()=>g.J,PopoverController:()=>p.D,Portal:()=>v.h_,PortalContainer:()=>v.lO,QueryField:()=>ne.q,RadioButtonGroup:()=>Js.S,RadioButtonList:()=>Xs.x,RangeSlider:()=>Wa.U,ReactMonacoEditor:()=>te.o,RefreshPicker:()=>F.dP,RelativeTimeRangePicker:()=>er.x,RenderUserContentAsHTML:()=>be.D,ScaleDistribution:()=>Ve.wf,SecretInput:()=>ks.m,SecretTextArea:()=>pr.Z,SecureSocksProxySettings:()=>Dn.i,Segment:()=>Sa.X,SegmentAsync:()=>la.V,SegmentInput:()=>Yn.X,SegmentSection:()=>Ia.f,SegmentSelect:()=>ia.V,Select:()=>os.Ph,SelectContainer:()=>os.eI,SeriesColorPicker:()=>b.sp,SeriesColorPickerPopover:()=>S.j,SeriesColorPickerPopoverWithTheme:()=>S.q,SeriesIcon:()=>Lt.F,SeriesTable:()=>Ce.c,SeriesTableRow:()=>Ce.V,SeriesVisibilityChangeBehavior:()=>Fe.Y,SeriesVisibilityChangeMode:()=>Nt.R,SetInterval:()=>st.F,SlideOutTransition:()=>aa.R,Slider:()=>xa.i,Sparkline:()=>ze.b,Spinner:()=>Fn.$,StatsPicker:()=>I.m,Switch:()=>hr.r,TLSAuthSettings:()=>Rn.s,Tab:()=>dt.O,TabContent:()=>ye.I,TabbedContainer:()=>h.W,Table:()=>Ie.i,TableCellDisplayMode:()=>Ve.h2,TableInputCSV:()=>_e.w,TabsBar:()=>tt.J,Tag:()=>oe.V,TagList:()=>G.P,TagsInput:()=>Q.B,TextArea:()=>vr.K,TimeOfDayPicker:()=>K.y,TimePickerTooltip:()=>w.IF,TimeRangeInput:()=>Er.K,TimeRangePicker:()=>w.Xc,TimeSeries:()=>Te.p,TimeZonePicker:()=>L.O,Toggletip:()=>y.P,ToolbarButton:()=>Ya.h,ToolbarButtonRow:()=>sa.R,Tooltip:()=>l.u,TooltipPlugin:()=>Ct.ii,UPLOT_AXIS_FONT_SIZE:()=>On.gD,UPlotChart:()=>yn.N,UPlotConfigBuilder:()=>vn.U,UnitPicker:()=>U.n,ValuePicker:()=>ja.b,VerticalGroup:()=>Ws.wc,VerticalTab:()=>Oe.L,VirtualizedSelect:()=>os.LT,VizLayout:()=>Se.AY,VizLegend:()=>je.l,VizLegendListItem:()=>Ge.e,VizRepeater:()=>Ne.Q,VizTooltip:()=>Pt.I,VizTooltipContainer:()=>ie.S,WeekStartPicker:()=>V.z,WithContextMenu:()=>An.z,XYCanvas:()=>Xn.K2,ZoomPlugin:()=>Ct.Rb,buildScaleKey:()=>Xe.z,clearButtonStyles:()=>ca.gN,convertOldAngularValueMapping:()=>ut.PR,defaultIntervals:()=>F.o5,fieldMatchersUI:()=>da.i,getCardStyles:()=>ms.L,getInputStyles:()=>Hs.H,getPortalContainer:()=>v.RN,getSelectStyles:()=>is.D,graphFieldOptions:()=>en.q,graphTickFormatter:()=>Ze.sV,graphTimeFormat:()=>Ze.mc,preparePlotFrame:()=>Xe.R,resetSelectStyles:()=>mr.Z,sharedInputStyle:()=>Xa.RK,sharedSingleStatMigrationHandler:()=>ut.rD,sharedSingleStatPanelChangedHandler:()=>ut.ZH,useGraphNGContext:()=>nt.z,usePanelContext:()=>ve.R9,variableSuggestionToCodeEditorSuggestion:()=>q.T,withErrorBoundary:()=>jt.Pf});var t=e(95569),n=e(50869),c=e(21662),s=e(76603),i=e(29418),f=e(18979),u=e(34517),r=e(39904),d=e(8180),o=e(71657),m=e(13626),l=e(61860),p=e(39604),g=e(56921),y=e(50819),v=e(85511),E=e(68226),h=e(18607),C=e(94599),a=e(95093),P=e(19974),D=e(4784),x=e(61744),M=e(74750),b=e(90208),R=e(83957),S=e(43598),O=e(69097),U=e(61227),I=e(71294),F=e(5562),w=e(3630),K=e(91942),L=e(52566),V=e(80124),H=e(77239),j=e(86348),A=e(35575),_=e(56766),k=e(65455),Q=e(43339),re=e(30532),Z=e(78889),oe=e(34719),G=e(34807),le=e(41165),ge=e(98102),ne=e(69659),ue=e(9405),te=e(84128),me=e(10339),q=e(25503),se=e(35029),ae=e(38894),pe=e(88683),de=e(72535),Me=e(5191),Ke=e(35224),st=e(41490),Ie=e(88144),Ve=e(40538),_e=e(91363),tt=e(72142),dt=e(79841),Oe=e(13026),ye=e(94893),Pe=e(51275),be=e(39856),Be=e(57426),ze=e(67307),lt=e(69823),ht=e(87691),vt=e(29781),bt=e(65987),ct=e(19670),Pt=e(24505),ie=e(20888),Ce=e(50800),Ne=e(4387),Ze=e(31438),Qe=e(38208),Le=e(8861),Ue=e(99562),ve=e(60325),Se=e(729),Fe=e(26993),je=e(78056),Ge=e(46920),gt=e(45253),mt=e(56506),Ye=e(2352),ft=e(20941),St=e(89719),we=e(45576),qe=e(97389),Je=e(94437),ut=e(70161),Mt=e(97097),Wt=e(30909),ln=e(95130),fn=e(14391),pn=e(42044),An=e(74285),Ot=e(68037),Ft=e(35919),Kt=e(18543),Lt=e(6264),Ut=e(17784),Rt=e(26338),$t=e(16065),_t=e(73892),jt=e(53546),an=e(39198),cn=e(12006),rn=e(92099),hn=e(64260),Dn=e(12580),Rn=e(23622),ea=e(85615),Fn=e(67487),Vn=e(19801),aa=e(41200),Sa=e(70044),la=e(68118),Yn=e(58564),ia=e(2357),Ia=e(30991),ha=e(30979),xa=e(90330),Wa=e(97759),as=e(94270),Xa=e(73267),Ba=e(63619),ca=e(31403),ss=e(26202),Ya=e(64319),sa=e(8125),ja=e(15670),da=e(6058),Ga=e(29460),qa=e(64353),Ka=e(24799),ts=e(19825),va=e(13393),ns=e(57227),xs=e(81764),hs=e(62157),rr=e(77117),Is=e(11543),ur=e(70132),mr=e(54897),os=e(8581),Vs=e(62997),is=e(27501),zs=e(60857),ls=e.n(zs),ws={};for(const qt in zs)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","graphTimeFormat","graphTickFormatter","PanelChrome","PanelChromeLoadingIndicator","PanelChromeErrorIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","DropdownIndicator","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","InlineFormLabel","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","GraphNG","FIXED_UNIT","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","BrowserLabel","PanelContainer","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(qt)<0&&(ws[qt]=()=>zs[qt]);e.d(T,ws);var Ws=e(52081),fr=e(19985),Js=e(2594),Xs=e(29395),Hs=e(46967),or=e(68668),gr=e(14747),ks=e(70862),pr=e(88892),hr=e(8944),qs=e(58255),vr=e(97379),us=e(82381),_s=e(47556),Er=e(95794),er=e(19115),ms=e(72948),Gt=e(35633),He=e(72777),it=e(44342),xt=e(71698),Vt=e(51613),sn=e(19426),en=e(26372),vn=e(13347),On=e(23888),yn=e(3200),bn=e(68416),Xn=e(56709),Ct=e(57989),Re=e(72269),Te=e(68948),nt=e(16566),Xe=e(86979),Nt=e(17882),zt=e(85951),wt=e(72080);const on={SecretFormField:u.c,FormField:t.W,Select:i.Ph,AsyncSelect:i.qb,IndicatorsContainer:c.B,NoOptionsMessage:s.P,Input:n.I,Switch:f.r}},19801:(Y,T,e)=>{"use strict";e.d(T,{n:()=>f});var t=e(9892),n=e(66111),c=e(79288),s=e(7804);const i=(0,s.B)(u=>({enter:t.css`
      label: enter;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      opacity: 1;
      transition: opacity ${u}ms ease-out;
    `,exit:t.css`
      label: exit;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      transition: opacity ${u}ms ease-out;
    `}));function f(u){const{visible:r,children:d,duration:o=250}=u,m=i(o);return n.createElement(c.Z,{in:r,mountOnEnter:!0,unmountOnExit:!0,timeout:o,classNames:m},d)}},41200:(Y,T,e)=>{"use strict";e.d(T,{R:()=>f});var t=e(9892),n=e(66111),c=e(79288),s=e(7804);const i=(0,s.B)((u,r,d)=>({enter:t.css`
      label: enter;
      ${r}: 0;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      ${r}: ${d}px;
      opacity: 1;
      transition: opacity ${u}ms ease-out, ${r} ${u}ms ease-out;
    `,exit:t.css`
      label: exit;
      ${r}: ${d}px;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      ${r}: 0;
      transition: opacity ${u}ms ease-out, ${r} ${u}ms ease-out;
    `}));function f(u){const{visible:r,children:d,duration:o=250,horizontal:m,size:l}=u,p=i(o,m?"width":"height",l);return n.createElement(c.Z,{in:r,mountOnEnter:!0,unmountOnExit:!0,timeout:o,classNames:p},d)}},3200:(Y,T,e)=>{"use strict";e.d(T,{N:()=>r});var t=e(66111),n=e(75974),c=e(2445);function s(d,o){return o.width===d.width&&o.height===d.height}function i(d,o){return o.data===d.data}function f(d,o){return o.config===d.config}function u(d,o){let m=d.timeRange,l=o.timeRange;return m===l||l.from.valueOf()===m.from.valueOf()&&l.to.valueOf()===m.to.valueOf()}class r extends t.Component{constructor(o){super(o),this.plotContainer=(0,t.createRef)(),this.plotCanvasBBox=(0,t.createRef)(),this.state={plot:null}}reinitPlot(){let{width:o,height:m,plotRef:l}=this.props;if(this.state.plot?.destroy(),o===0&&m===0)return;this.props.config.addHook("setSize",y=>{y.over});const p={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,c.Zp)("UPlot",!1,"Reinitializing plot",p);const g=new n.Z(p,this.props.data,this.plotContainer.current);l&&l(g),this.setState({plot:g})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(o){let{plot:m}=this.state;s(o,this.props)?f(o,this.props)?i(o,this.props)?u(o,this.props)||m?.setScale("x",{min:this.props.timeRange.from.valueOf(),max:this.props.timeRange.to.valueOf()}):m?.setData(this.props.data):this.reinitPlot():m?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return t.createElement("div",{style:{position:"relative"}},t.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},68416:(Y,T,e)=>{"use strict";e.d(T,{l:()=>l,o:()=>m});var t=e(66111),n=e(30471),c=e(72990),s=e(33750),i=e(6194),f=e(40538),u=e(72648),r=e(729),d=e(78056);const o=p=>p==null?"-":p.toFixed(1);function m(p,g){return p.getSeries().some(y=>{const v=y.props.dataFrameFieldIndex;if(!v)return!1;const E=g[v.frameIndex]?.fields[v.fieldIndex];return!(!E||E.config.custom?.hideFrom?.legend)})}const l=t.memo(({data:p,config:g,placement:y,calcs:v,displayMode:E,...h})=>{const C=(0,u.l4)(),a=g.getSeries().map(P=>{const D=P.props,x=D.dataFrameFieldIndex,M=g.getAxisPlacement(P.props.scaleKey);if(!x)return;const b=p[x.frameIndex]?.fields[x.fieldIndex];if(!b||b.config.custom?.hideFrom?.legend)return;const R=(0,n.CZ)(b,p[x.frameIndex],p),O=(0,c.YO)(b,C).color;return{disabled:!(D.show??!0),fieldIndex:x,color:O,label:R,yAxis:M===f.LB.Left||M===f.LB.Bottom?1:2,getDisplayValues:()=>{if(!v?.length)return[];const U=b.display??o;let I=null;const F=(0,s.Kx)({field:b,reducers:v});return v.map(w=>{const K=s.TB.get(w);let L=U;return K.id===s.gz.diffperc&&(L=(0,i.U_)({field:{...b,config:{...b.config,unit:"percentunit"}},theme:C})),(K.id===s.gz.count||K.id===s.gz.changeCount||K.id===s.gz.distinctCount)&&(I||(I=(0,i.U_)({field:{...b,config:{...b.config,unit:"none"}},theme:C})),L=I),{...L(F[w]),title:K.name,description:K.description}})},getItemKey:()=>`${R}-${x.frameIndex}-${x.fieldIndex}`}}).filter(P=>P!==void 0);return t.createElement(r.AY.Legend,{placement:y,...h},t.createElement(d.l,{placement:y,items:a,displayMode:E,sortBy:h.sortBy,sortDesc:h.sortDesc}))});l.displayName="PlotLegend"},26372:(Y,T,e)=>{"use strict";e.d(T,{q:()=>n});var t=e(40538);const n={drawStyle:[{label:"Lines",value:t.l8.Line},{label:"Bars",value:t.l8.Bars},{label:"Points",value:t.l8.Points}],lineInterpolation:[{description:"Linear",value:t.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:t.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:t.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:t.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:t.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:t.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:t.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:t.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:t.Jp.Always},{label:"Never",value:t.Jp.Never}],axisPlacement:[{label:"Auto",value:t.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:t.LB.Left},{label:"Right",value:t.LB.Right},{label:"Hidden",value:t.LB.Hidden}],fillGradient:[{label:"None",value:t.FI.None},{label:"Opacity",value:t.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:t.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:t.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:t.o0.None},{label:"Normal",value:t.o0.Normal},{label:"100%",value:t.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:t.i3.Off},{label:"As lines",value:t.i3.Line},{label:"As lines (dashed)",value:t.i3.Dashed},{label:"As filled regions",value:t.i3.Area},{label:"As filled regions and lines",value:t.i3.LineAndArea},{label:"As filled regions and lines (dashed)",value:t.i3.DashedAndArea}]}},23888:(Y,T,e)=>{"use strict";e.d(T,{ff:()=>m,gD:()=>d,mr:()=>p});var t=e(2703),n=e(56190),c=e(82410),s=e(77258),i=e(40538),f=e(4176),u=e(13890),r=e(36562);const d=12,o=8;class m extends u.L{merge(v){this.props.size=(0,r.V)("max",this.props.size,v.size),this.props.label||(this.props.label=v.label),this.props.placement===i.LB.Auto&&(this.props.placement=v.placement)}calculateSpace(v,E,h,C,a){const P=v.axes[E],D=v.scales[P.scale];if(P.side!==2||!D)return 30;const x=40;if(D.time){const M=a/x,b=(C-h)/M,R=p(v,[h],E,x,b);return(0,f.X1)(R[0],d).width+18}return x}calculateAxisSize(v,E,h){const C=v.axes[h];let a=C.ticks.size;if(C.side===2)a+=C.gap+d;else if(E?.length){let P=E.reduce((x,M)=>Math.max(x,(0,f.X1)(M,d).width),0);const D=Math.min(v.width*.4,P);a+=C.gap+C.labelGap+D}return Math.ceil(a)}getConfig(){let{scaleKey:v,label:E,show:h=!0,placement:C=i.LB.Auto,grid:a={show:!0},ticks:P,space:D,filter:x,gap:M=5,formatValue:b,splits:R,values:S,incrs:O,isTime:U,timeZone:I,theme:F,tickLabelRotation:w,size:K,color:L,border:V,decimals:H,distr:j=i.wf.Linear}=this.props;const A=`${d}px ${F.typography.fontFamily}`,_=F.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,t.br)(v)&&(R=[0,1]),H===0&&j===i.wf.Linear&&(x=(Q,re)=>re.map(Z=>Number.isInteger(Z)?Z:null));let k={scale:v,show:h,stroke:L??F.colors.text.primary,side:g(C),font:A,size:K??((Q,re,Z)=>this.calculateAxisSize(Q,re,Z)),rotate:w,gap:M,labelGap:0,grid:{show:a.show,stroke:_,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:_,width:1/devicePixelRatio,size:4},P),splits:R,values:S,space:D??((Q,re,Z,oe,G)=>this.calculateSpace(Q,re,Z,oe,G)),filter:x,incrs:O};return V!=null&&(k.border=V),E!=null&&E.length>0&&(k.label=E,k.labelSize=d+o,k.labelFont=A,k.labelGap=o),S?k.values=S:U?k.values=p:b&&(k.values=(Q,re,Z,oe,G)=>{let le=(0,n.d)((0,n.O)(G,6));return re.map(ge=>b(ge,le>0?le:void 0))}),k.timeZone=I,k}}const l={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function p(y,v,E,h,C){const a=y.axes[E].timeZone,P=y.scales.x,D=(P?.max??0)-(P?.min??0),x=Math.round(l.year/l.day)*l.day,M=Math.round(C/l.day)*l.day;let b=c.U6.interval.year;return C<l.second?b=c.U6.interval.millisecond:C<=l.minute?b=c.U6.interval.second:D<=l.day?b=c.U6.interval.minute:C<=l.day?b=c.U6.interval.hour:D<l.year?b=c.U6.interval.day:M===x?b=c.U6.interval.year:C<=l.year&&(b=c.U6.interval.month),v.map(R=>R==null?"":(0,s.dq)(R,{format:b,timeZone:a}))}function g(y){switch(y){case i.LB.Top:return 0;case i.LB.Right:return 1;case i.LB.Bottom:return 2;case i.LB.Left:}return 3}},13347:(Y,T,e)=>{"use strict";e.d(T,{U:()=>a});var t=e(82897),n=e(75974),c=e(75849),s=e(56808),i=e(40538),f=e(2445),u=e(23888),r=e(36562),d=e(53768),o=e(5680),m=e(13890),l=e(52240);class p extends m.L{getConfig(){const{facets:D,drawStyle:x,pathBuilder:M,pointsBuilder:b,pointsFilter:R,lineInterpolation:S,lineWidth:O,lineStyle:U,barAlignment:I,barWidthFactor:F,barMaxWidth:w,showPoints:K,pointSize:L,scaleKey:V,pxAlign:H,spanNulls:j,show:A=!0}=this.props;let _={},k=this.getLineColor();_.stroke=k,M!=null?(_.paths=M,_.width=O):x===i.l8.Points?_.paths=()=>null:x!=null&&(_.width=O,U&&U.fill!=="solid"&&(U.fill==="dot"&&(_.cap="round"),_.dash=U.dash??[10,10]),_.paths=(Z,oe,G,le)=>y(x,S,I,F,w)(Z,oe,G,le));const Q=typeof k=="string"?k:(Z,oe)=>Z.series[oe]._stroke,re={points:{stroke:Q,fill:Q,size:!L||L<O?void 0:L,filter:R}};return b!=null?re.points.show=b:x===i.l8.Points?re.points.show=!0:K===i.Jp.Auto?x===i.l8.Bars&&(re.points.show=!1):K===i.Jp.Never?re.points.show=!1:K===i.Jp.Always&&(re.points.show=!0),{scale:V,facets:D,spanGaps:typeof j=="number"?!1:j,value:()=>"",pxAlign:H,show:A,fill:this.getFill(),..._,...re}}getLineColor(){const{lineColor:D,gradientMode:x,colorMode:M,thresholds:b,theme:R,hardMin:S,hardMax:O,softMin:U,softMax:I,dynamicSeriesColor:F}=this.props;return x===i.FI.None&&F?(w,K)=>F(K)??D??d.R:x===i.FI.Scheme&&M?.id!==d.S.Fixed?(0,l.P2)(1,R,M,b,S,O,U,I):D??d.R}getFill(){const{lineColor:D,fillColor:x,gradientMode:M,fillOpacity:b,colorMode:R,thresholds:S,theme:O,hardMin:U,hardMax:I,softMin:F,softMax:w,dynamicSeriesColor:K}=this.props;if(x)return x;const L=M??i.FI.None,V=(b??0)/100;if(L===i.FI.None&&K&&V>0)return(H,j)=>{let A=H.series[j]._stroke;return o.alpha(A??"",V)};switch(L){case i.FI.Opacity:return(0,l.DT)(x??D,V);case i.FI.Hue:return(0,l.oN)(x??D,V,O);case i.FI.Scheme:if(R?.id!==d.S.Fixed)return(0,l.P2)(V,O,R,S,U,I,F,w);default:if(V>0)return o.alpha(D??"",V)}}}let g;function y(P,D,x=0,M=.6,b=200){const R=n.Z.paths;if(g||(g={linear:R.linear(),smooth:R.spline(),stepBefore:R.stepped({align:-1}),stepAfter:R.stepped({align:1})}),P===i.l8.Bars){let S=`bars|${x}|${M}|${b}`;return g[S]||(g[S]=R.bars({size:[M,b],align:x})),g[S]}else if(P===i.l8.Line){if(D===i.KC.StepBefore)return g.stepBefore;if(D===i.KC.StepAfter)return g.stepAfter;if(D===i.KC.Smooth)return g.smooth}return g.linear}var v=e(28550),E=e(69098);function h(P){const D=P.config.mode===i.i3.Dashed||P.config.mode===i.i3.DashedAndArea?[10,10]:null;function x(K,L,V,H){let j=K.ctx,A=0;for(let _=0;_<V.length;_++)if(V[_].color==="transparent"){A=_;break}j.lineWidth=2,D&&j.setLineDash(D);for(let _=1;_<V.length;_++){const k=V[_];let Q;A>=_&&_>0?Q=(0,v.Z)(H.visualization.getColorByName(V[_-1].color)):Q=(0,v.Z)(H.visualization.getColorByName(k.color)),Q.getAlpha()===1&&Q.setAlpha(.7);let re=Math.round(K.bbox.left),Z=Math.round(K.valToPos(k.value,L,!0)),oe=Math.round(K.bbox.left+K.bbox.width),G=Math.round(K.valToPos(k.value,L,!0));j.beginPath(),j.moveTo(re,Z),j.lineTo(oe,G),j.strokeStyle=Q.toString(),j.stroke()}}function M(K,L,V,H){let j=K.ctx,A=(0,l.KV)(K,L,V.map(_=>{let k=(0,v.Z)(H.visualization.getColorByName(_.color));return k.getAlpha()===1&&k.setAlpha(.15),[_.value,k.toString()]}),!0);j.fillStyle=A,j.fillRect(K.bbox.left,K.bbox.top,K.bbox.width,K.bbox.height)}const{scaleKey:b,thresholds:R,theme:S,config:O,hardMin:U,hardMax:I,softMin:F,softMax:w}=P;return K=>{const L=K.ctx,{min:V,max:H}=K.scales.x,{min:j,max:A}=K.scales[b];if(V==null||H==null||j==null||A==null)return;let{steps:_,mode:k}=R;if(k===E.H.Percentage){let[Q,re]=(0,l.A9)(K,b,U,I,F,w),Z=re-Q;_=_.map(oe=>({...oe,value:Q+Z*(oe.value/100)}))}switch(L.save(),O.mode){case i.i3.Line:case i.i3.Dashed:x(K,b,_,S);break;case i.i3.Area:M(K,b,_,S);break;case i.i3.LineAndArea:case i.i3.DashedAndArea:M(K,b,_,S),x(K,b,_,S)}L.restore()}}const C={drag:{setScale:!1},points:{size:(P,D)=>P.series[D].points.size*2,width:(P,D,x)=>x/4},focus:{prox:30}};class a{constructor(D=c.Ys){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=x=>{let M=new Date(x);return this.tz?n.Z.tzDate(M,this.tz):M},this.tz=(0,s.Pr)(D,Date.now())?.ianaName}addHook(D,x){(0,f.Zp)("UPlotConfigBuilder",!1,"addHook",D),this.hooks[D]||(this.hooks[D]=[]),this.hooks[D].push(x)}addThresholds(D){this.thresholds[D.scaleKey]||(this.thresholds[D.scaleKey]=D,this.addHook("drawClear",h(D)))}addAxis(D){D.placement=D.placement??i.LB.Auto,D.grid=D.grid??{};let x=D.scaleKey;if(x==="x"&&(x+=D.timeZone??""),this.axes[x]){this.axes[x].merge(D);return}D.placement===i.LB.Auto&&(D.placement=this.hasLeftAxis?i.LB.Right:i.LB.Left),D.placement===i.LB.Left&&(this.hasLeftAxis=!0),D.placement===i.LB.Hidden&&(D.grid.show=!1,D.size=0),this.axes[x]=new u.ff(D)}getAxisPlacement(D){return this.axes[D]?.props.placement??i.LB.Left}setCursor(D){this.cursor=(0,t.merge)({},this.cursor,D)}setMode(D){this.mode=D}setSelect(D){this.select=D}addSeries(D){this.series.push(new p(D))}getSeries(){return this.series}addScale(D){const x=this.scales.find(M=>M.props.scaleKey===D.scaleKey);if(x){x.merge(D);return}this.scales.push(new r.I(D))}addBand(D){this.bands.push(D)}setStackingGroups(D){this.stackingGroups=D}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(D){this.tooltipInterpolator=D}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(D){this.prepData=x=>(this.frames=x,D(x,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(D){this.padding=D}getConfig(){const D={...f.qt,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};D.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(M=>M.getConfig()),D.series=[...D.series,...this.series.map(M=>M.getConfig())],D.scales=this.scales.reduce((M,b)=>({...M,...b.getConfig()}),{}),D.hooks=this.hooks,D.select=this.select;const x=(M="")=>(b,R)=>{let S=b.series[R].points._stroke;if(typeof S!="string"){let O=this.frames[0].fields[R];S=O.display(O.values[b.cursor.idxs[R]]).color}return S+M};return D.cursor=(0,t.merge)({},C,{points:{stroke:x("80"),fill:x()}},this.cursor),D.tzDate=this.tzDate,Array.isArray(this.padding)&&(D.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach(M=>{(0,f.Kq)(M).forEach(b=>{this.addBand(b)})}),this.bands.length&&(D.bands=this.bands),D}ensureNonOverlappingAxes(D){const x=D.find(R=>R.props.scaleKey==="x"),M=D.filter(R=>R.props.grid?.show===void 0),b=M.findIndex(R=>R.props.placement===i.LB.Left||R.props.placement===i.LB.Right||R.props.placement===i.LB.Bottom&&R!==x);for(let R=0;R<M.length;R++)M[R]===x||R===b?M[R].props.grid.show=!0:M[R].props.grid.show=!1;return D}}},36562:(Y,T,e)=>{"use strict";e.d(T,{I:()=>f,V:()=>u});var t=e(75974),n=e(75133),c=e(2703),s=e(40538),i=e(13890);class f extends i.L{merge(d){this.props.min=u("min",this.props.min,d.min),this.props.max=u("max",this.props.max,d.max)}getConfig(){let{isTime:d,scaleKey:o,min:m,max:l,softMin:p,softMax:g,range:y,direction:v,orientation:E,centeredZero:h,decimals:C}=this.props;const a=this.props.distribution,P=d?{}:{distr:a===s.wf.Symlog?4:a===s.wf.Log?3:a===s.wf.Ordinal?2:1,log:a===s.wf.Log||a===s.wf.Symlog?this.props.log??2:void 0,asinh:a===s.wf.Symlog?this.props.linearThreshold??1:void 0};if(a===s.wf.Log){let I=this.props.log,F=I===2?Math.log2:Math.log10;m!=null&&(m<=0?m=null:m=I**Math.floor(F(m))),l!=null&&(l<=0?l=null:l=I**Math.ceil(F(l))),p!=null&&(p<=0?p=null:p=I**Math.floor(F(p))),g!=null&&(g<=0?g=null:g=I**Math.ceil(F(g)))}let D=p==null?3:1,x=g==null?3:1;const M={min:{pad:.1,hard:m??-1/0,soft:p||0,mode:D},max:{pad:.1,hard:l??1/0,soft:g||0,mode:x}};let b=p==null&&m!=null,R=g==null&&l!=null,S=b&&R;const O=(I,F,w,K)=>{const L=I.scales[K];let V=[F,w];if(K==="x"&&!d&&a===s.wf.Linear||!S&&F==null&&w==null)return V;let H=L.log??10;if(L.distr===1||L.distr===2||L.distr===4){if(h){let j=Math.abs(F),A=Math.abs(w),_=Math.max(j,A);_===0&&(_=80),F=-_,w=_}L.distr===4?V=t.Z.rangeAsinh(F,w,H,!0):V=t.Z.rangeNum(b?m:F,R?l:w,M)}else L.distr===3&&(V=t.Z.rangeLog(m??F,l??w,H,!0));if(C===0)if(L.distr===1||L.distr===2)V[0]=(0,n.mB)(V[0],1),V[1]=(0,n.UO)(V[1],1);else if(L.distr===3){let j=L.log===2?Math.log2:Math.log10;if(V[0]<=1)V[0]=1;else{let _=Math.floor(j(V[0]));V[0]=H**_}let A=Math.ceil(j(V[1]));V[1]=H**A,V[0]===V[1]&&(V[1]*=H)}else L.distr===4&&(V[0]=(0,n.mB)(V[0],1),V[1]=(0,n.UO)(V[1],1));return(L.distr===1||L.distr===4)&&(b&&(V[0]=m),R&&(V[1]=l)),V[0]>=V[1]&&(V[0]=L.distr===3?1:0,V[1]=100),V};let U=!d&&!S;return(0,c.br)(o)&&(U=!1,y=[0,1]),{[o]:{time:d,auto:U,range:y??O,dir:v,ori:E,...P}}}}function u(r,d,o){const m=d!=null,l=o!=null;return m?l?r==="min"?d<o?d:o:d>o?d:o:d:o}},52240:(Y,T,e)=>{"use strict";e.d(T,{A9:()=>p,DT:()=>r,KV:()=>m,P2:()=>g,oN:()=>d});var t=e(28550),n=e(5680),c=e(53768),s=e(69098),i=e(40538),f=e(4176);function u(y,v,E){let h=0,C=0,a=0,P=0;return y===o.Down?(C=v.top,P=v.top+v.height):y===o.Left?(h=v.left+v.width,a=v.left):y===o.Up?(C=v.top+v.height,P=v.top):y===o.Right&&(h=v.left,a=v.left+v.width),E.createLinearGradient(h,C,a,P)}function r(y,v){return(E,h)=>{const C=(0,f.AE)(),a=u(E.scales.x.ori===i.wN.Horizontal?o.Down:o.Left,E.bbox,C);return a.addColorStop(0,n.alpha(y,v)),a.addColorStop(1,n.alpha(y,0)),a}}function d(y,v,E){return(h,C)=>{const a=(0,f.AE)(),P=u(h.scales.x.ori===i.wN.Horizontal?o.Down:o.Left,h.bbox,a),D=(0,t.Z)(y).spin(-15),x=(0,t.Z)(y).spin(15);return E.isDark?(P.addColorStop(0,x.lighten(10).setAlpha(v).toString()),P.addColorStop(1,D.darken(10).setAlpha(v).toString())):(P.addColorStop(0,x.lighten(10).setAlpha(v).toString()),P.addColorStop(1,D.setAlpha(v).toString())),P}}var o=(y=>(y[y.Right=0]="Right",y[y.Up=1]="Up",y[y.Left=2]="Left",y[y.Down=3]="Down",y))(o||{});function m(y,v,E,h=!1){let C=y.scales[v],a=null,P=null;for(let L=0;L<E.length;L++){let V=E[L][0];if((V<=C.min||a==null)&&(a=L),P=L,V>=C.max)break}if(a===P)return E[a][1];let D=E[a][0],x=E[P][0];D===-1/0&&(D=C.min),x===1/0&&(x=C.max);let M=Math.round(y.valToPos(D,v,!0)),b=Math.round(y.valToPos(x,v,!0)),R=M-b;if(R===0)return E[P][1];let S,O,U,I;y.scales.x.ori===i.wN.Horizontal?(S=U=0,O=M,I=b):(O=I=0,S=M,U=b);let w=(0,f.AE)().createLinearGradient(S,O,U,I),K;for(let L=a;L<=P;L++){let V=E[L],H=L===a?M:L===P?b:Math.round(y.valToPos(V[0],v,!0)),j=(M-H)/R;h&&L>a&&w.addColorStop(j,K),w.addColorStop(j,K=V[1])}return w}function l(y,v){let E=y.scales[v],h=1/0,C=-1/0;return y.series.forEach((a,P)=>{if(a.show&&a.scale===v)if(a.min==null){let D=y.data[P];for(let x=0;x<D.length;x++)D[x]!=null&&(h=Math.min(h,D[x]),C=Math.max(C,D[x]))}else h=Math.min(h,a.min),C=Math.max(C,a.max)}),C===h&&(h=E.min,C=E.max),[h,C]}function p(y,v,E,h,C,a){let P=E??C??null,D=h??a??null;if(P==null||D==null){let[x,M]=l(y,v);P=P??x??0,D=D??M??100}return[P,D]}function g(y,v,E,h,C,a,P,D){if(!E)throw Error("Missing colorMode required for color scheme gradients");if(!h)throw Error("Missing thresholds required for color scheme gradients");return(x,M)=>{let b=x.series[M].scale,R="";if(E.id===c.S.Thresholds)if(h.mode===s.H.Absolute){const S=h.steps.map(O=>[O.value,n.alpha(v.visualization.getColorByName(O.color),y)]);R=m(x,b,S,!0)}else{const[S,O]=p(x,b,C,a,P,D),U=O-S,I=h.steps.map(F=>[S+U*(F.value/100),n.alpha(v.visualization.getColorByName(F.color),y)]);R=m(x,b,I,!0)}else if(E.getColors){const S=E.getColors(v),[O,U]=p(x,b,C,a,P,D),I=U-O,F=S.map((w,K)=>[O+I*(K/(S.length-1)),n.alpha(v.visualization.getColorByName(w),y)]);R=m(x,b,F,!1)}return R}}},66243:(Y,T,e)=>{"use strict";e.d(T,{T:()=>i});var t=e(66111),n=e(41213),c=e(50215),s=e(45807);function i({id:f,events:u,renderEventMarker:r,mapEventToXYCoords:d,config:o}){const m=(0,t.useRef)(),[l,p]=(0,t.useState)(0),g=(0,n.Z)();(0,t.useLayoutEffect)(()=>{o.addHook("init",v=>{m.current=v}),o.addHook("draw",()=>{g()&&p(v=>v+1)})},[o,p]);const y=(0,t.useMemo)(()=>{const v=[];if(!m.current||u.length===0)return v;for(let E=0;E<u.length;E++){const h=u[E];for(let C=0;C<h.length;C++){const a=d(h,{fieldIndex:C,frameIndex:E});a&&v.push(t.createElement(c.J,{...a,key:`${f}-marker-${E}-${C}`},r(h,{fieldIndex:C,frameIndex:E})))}}return t.createElement(t.Fragment,null,v)},[u,r,l]);return m.current?t.createElement(s.K,{left:m.current.bbox.left/window.devicePixelRatio,top:m.current.bbox.top/window.devicePixelRatio},y):null}},50215:(Y,T,e)=>{"use strict";e.d(T,{J:()=>n});var t=e(66111);const n=({x:c,y:s,children:i})=>t.createElement("div",{style:{position:"absolute",top:`${s}px`,left:`${c}px`}},i)},45807:(Y,T,e)=>{"use strict";e.d(T,{K:()=>c});var t=e(9892),n=e(66111);const c=({children:s,left:i,top:f})=>{const u=(0,n.useMemo)(()=>t.css`
      position: absolute;
      overflow: visible;
      left: ${i}px;
      top: ${f}px;
    `,[i,f]);return n.createElement("div",{className:u},s)}},56709:(Y,T,e)=>{"use strict";e.d(T,{Jx:()=>n.J,K2:()=>c.K,TZ:()=>t.T});var t=e(66243),n=e(50215),c=e(45807)},16366:(Y,T,e)=>{"use strict";e.d(T,{C:()=>r});var t=e(82897),n=e.n(t),c=e(66111);const s=.1,i=2,f=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),u=d=>{let o=d.root.closest("[tabindex]"),m=new Set,l=null,p=null;if(!o)return;const g=(P,D)=>{const{cursor:x}=d;if(x.left===void 0||x.top===void 0)return;const{width:M,height:b}=d.over.style,[R,S]=[Math.floor(parseFloat(M)),Math.floor(parseFloat(b))];d.setCursor({left:(0,t.clamp)(x.left+P,0,R),top:(0,t.clamp)(x.top+D,0,S)})},y=P=>{if(m.size===0||!d){p=null;return}const M=(P-(p??P))*s;let b=0,R=0;m.has("ArrowUp")&&(R-=M),m.has("ArrowDown")&&(R+=M),m.has("ArrowLeft")&&(b-=M),m.has("ArrowRight")&&(b+=M),m.has("Shift")&&(b*=i,R*=i),g(b,R);const{cursor:S}=d;if(m.has(" ")&&S){const O=Number(d.over.style.height.slice(0,-2));d.setSelect({left:S.left<l?S.left:l,top:0,width:Math.abs(S.left-(l??S.left)),height:O},!1)}p=P,window.requestAnimationFrame(y)},v=P=>{if(P.key==="Tab"){d.setCursor({left:-5,top:-5});return}if(!f.has(P.key))return;if(P.preventDefault(),P.stopPropagation(),!m.has(P.key)){const x=m.size===0;m.add(P.key),l=P.key===" "&&l===null?d.cursor.left:l,x&&window.requestAnimationFrame(y)}},E=P=>{f.has(P.key)&&(m.delete(P.key),P.key===" "&&(P.preventDefault(),P.stopPropagation(),d.setSelect(d.select),l=null))},h=()=>{if(!o?.matches(":focus-visible"))return;const P=parseFloat(d.over.style.width),D=parseFloat(d.over.style.height);d.setCursor({left:P/2,top:D/2})},C=()=>{p=null,l=null,m.clear(),d.setSelect({left:0,top:0,width:0,height:0},!1)};o.addEventListener("keydown",v),o.addEventListener("keyup",E),o.addEventListener("focus",h),o.addEventListener("blur",C);const a=()=>{o?.removeEventListener("keydown",v),o?.removeEventListener("keyup",E),o?.removeEventListener("focus",h),o?.removeEventListener("blur",C),o=null};(d.hooks.destroy??=[]).push(a)},r=({config:d})=>((0,c.useLayoutEffect)(()=>d.addHook("init",u),[d]),null)},1105:(Y,T,e)=>{"use strict";e.d(T,{_:()=>C,i:()=>E});var t=e(66111),n=e(41213),c=e(56632),s=e(6194),i=e(53768),f=e(30471),u=e(2703),r=e(99098),d=e(574),o=e(40538),m=e(72648),l=e(85511),p=e(50800),g=e(20888),y=e(2445);const v=10,E=({mode:a=o.f3.Single,sortOrder:P=o.As.None,sync:D,timeZone:x,config:M,renderTooltip:b,...R})=>{const S=(0,t.useRef)(),O=(0,m.l4)(),[U,I]=(0,t.useState)(null),[F,w]=(0,t.useState)(null),[K,L]=(0,t.useState)([]),[V,H]=(0,t.useState)(null),[j,A]=(0,t.useState)(!1),_=(0,n.Z)(),k="TooltipPlugin";if((0,t.useEffect)(()=>{(0,y.Zp)(k,!0,`Focused series: ${U}, focused point: ${F}`)},[F,U]),(0,t.useLayoutEffect)(()=>{let G;const le=()=>{_()&&(A(!0),S.current?.root.classList.add("plot-active"))},ge=()=>{_()&&(H(null),A(!1),S.current?.root.classList.remove("plot-active"))};M.addHook("syncRect",(ue,te)=>G=te),M.addHook("init",ue=>{S.current=ue,ue.root.parentElement?.addEventListener("focus",le),ue.over.addEventListener("mouseenter",le),ue.root.parentElement?.addEventListener("blur",ge),ue.over.addEventListener("mouseleave",ge),D&&D()===c.m.Crosshair&&ue.root.classList.add("shared-crosshair")});const ne=M.getTooltipInterpolator();return ne?M.addHook("setCursor",ue=>{ne(I,w,te=>{if(te){H(null);return}if(!G)return;const{x:me,y:q}=C(ue,G);me!==void 0&&q!==void 0&&H({x:me,y:q})},ue)}):(M.addHook("setLegend",ue=>{_()&&(w(ue.legend.idx),L(ue.legend.idxs.slice()))}),M.addHook("setCursor",ue=>{if(!G||!_())return;const{x:te,y:me}=C(ue,G);H(te!==void 0&&me!==void 0?{x:te,y:me}:null)}),M.addHook("setSeries",(ue,te)=>{_()&&I(te)})),()=>{H(null),S.current&&(S.current.over.removeEventListener("mouseleave",ge),S.current.over.removeEventListener("mouseenter",le),S.current.root.parentElement?.removeEventListener("focus",le),S.current.root.parentElement?.removeEventListener("blur",ge))}},[M,H,A,w,L]),F===null||!j&&D&&D()===c.m.Crosshair)return null;let Q=R.data.fields[0];if(!Q)return null;const re=Q.display||(0,s.U_)({field:Q,timeZone:x,theme:O});let Z=null,oe=re(Q.values[F]).text;if(b)Z=b(R.data,U,F);else{if(a===o.f3.Single&&U!==null){const G=R.data.fields[U];if(!G)return null;const le=K?.[U]??F;oe=re(Q.values[le]).text;const ne=(G.display||(0,s.U_)({field:G,timeZone:x,theme:O}))(G.values[le]);Z=t.createElement(p.c,{series:[{color:ne.color||i.R,label:(0,f.CZ)(G,R.data,R.frames),value:ne?(0,u.zc)(ne):null}],timestamp:oe})}if(a===o.f3.Multi){let G=[];const le=R.data,ge=le.fields,ne=[];for(let ue=0;ue<ge.length;ue++){const te=le.fields[ue];if(!te||te===Q||te.type===r.fS.time||te.type!==r.fS.number||te.config.custom?.hideFrom?.tooltip||te.config.custom?.hideFrom?.viz)continue;const me=R.data.fields[ue].values[K[ue]],q=te.display(me);ne.push(me),G.push({color:q.color||i.R,label:(0,f.CZ)(te,le,R.frames),value:q?(0,u.zc)(q):null,isActive:U===ue})}if(P!==o.As.None){const ue=[...G],te=d.sortValues(P);G.sort((me,q)=>{const se=ue.indexOf(me),ae=ue.indexOf(q);return te(ne[se],ne[ae])})}Z=t.createElement(p.c,{series:G,timestamp:oe})}}return t.createElement(l.h_,null,Z&&V&&t.createElement(g.S,{position:{x:V.x,y:V.y},offset:{x:v,y:v}},Z))};function h({left:a,top:P},D){return a===void 0||P===void 0?!1:a<0||a>D.width||P<0||P>D.height}function C(a,P){let D,x;const M=a.cursor.left||0,b=a.cursor.top||0;if(h(a.cursor,P)){const R=a.posToIdx(M);if(b<0||b>P.height){let S=(0,y.ah)(a,R);S&&(x=P.top+S,M>=0&&M<=P.width&&(D=P.left+a.valToPos(a.data[0][a.posToIdx(M)],a.series[0].scale)))}}else D=P.left+M,x=P.top+b;return{x:D,y:x}}},99375:(Y,T,e)=>{"use strict";e.d(T,{R:()=>s});var t=e(66111),n=e(2445);const c=5,s=({onZoom:i,config:f})=>{const[u,r]=(0,t.useState)(null);return(0,t.useEffect)(()=>{if(u){if((0,n.Zp)("ZoomPlugin",!1,"selected",u),u.bbox.width<c)return;i({from:u.min,to:u.max})}},[u]),(0,t.useLayoutEffect)(()=>{f.addHook("setSelect",d=>{const o=d.posToVal(d.select.left,"x"),m=d.posToVal(d.select.left+d.select.width,"x");r({min:o,max:m,bbox:{left:d.bbox.left/window.devicePixelRatio+d.select.left,top:d.bbox.top/window.devicePixelRatio,height:d.bbox.height/window.devicePixelRatio,width:d.select.width}}),d.setSelect({left:0,width:0},!1)})},[f]),null}},57989:(Y,T,e)=>{"use strict";e.d(T,{Cm:()=>c.C,Rb:()=>t.R,ii:()=>n.i});var t=e(99375),n=e(1105),c=e(16366)},13890:(Y,T,e)=>{"use strict";e.d(T,{L:()=>t});class t{constructor(c){this.props=c}}},2445:(Y,T,e)=>{"use strict";e.d(T,{Bj:()=>g,Kq:()=>l,Zp:()=>C,ah:()=>y,i7:()=>p,qt:()=>o});var t=e(99098),n=e(49052),c=e(40538),s=e(73289),i=e(88383),f=e(86979);const u=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function r(a){return a.replace(u,P=>`{${P}}`)}const d=(a,P,D)=>{let x=P%2?D[0]||D[2]:D[1]||D[3];return D[P]||!x?0:8},o={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[d,d,d,d],series:[],hooks:{}};var m=(a=>(a[a.Pos=1]="Pos",a[a.Neg=-1]="Neg",a))(m||{});function l(a){let P=[],{series:D,dir:x}=a,M=D.length-1,b=D.slice().reverse();return b.forEach((R,S)=>{if(S!==M){let O=b[S+1];P.push({series:[R,O],dir:-1*x})}}),P}function p(a){let P=new Map;return a.fields.forEach(({config:D,values:x},M)=>{if(M===0)return;let{custom:b}=D;if(b==null||b.hideFrom?.viz)return;let{stacking:R}=b;if(R==null)return;let{mode:S,group:O}=R;if(S===c.o0.None)return;let U=b.transform,I=v(U,x),F=b.drawStyle,w=F===c.l8.Bars?b.barAlignment:F===c.l8.Line?b.lineInterpolation:null,K=`${I}|${S}|${O}|${(0,f.z)(D)}|${F}|${w}`,L=P.get(K);L==null&&(L={series:[],dir:I},P.set(K,L)),L.series.push(M)}),[...P.values()]}function g(a,P,D){let x=Array(a.fields.length),M=P.length,b=a.length,R=M>0?Array(b).fill(0):[],S=M>0?Array(b).fill(!1):[],O=Array.from({length:M},()=>R.slice()),U=Array.from({length:M},()=>S.slice());if(P.forEach((I,F)=>{let w=U[F];I.series.forEach(K=>{let L=a.fields[K];if(L.config.custom?.hideFrom?.viz)return;let V=L.values;for(let H=0;H<b;H++)V[H]!=null&&(w[H]=!0)})}),a.fields.forEach((I,F)=>{let w=I.values;if(F===0){I.type===t.fS.time?x[F]=(0,n.J_)(I).values:x[F]=w;return}let{custom:K}=I.config;if(!K||K.hideFrom?.viz){x[F]=w;return}if(K.transform===c.pR.Constant){let V=w.findIndex(j=>j!=null),H=w[V];w=Array(w.length).fill(void 0),w[V]=H}else if(w=w.slice(),K.transform===c.pR.NegativeY)for(let V=0;V<w.length;V++)w[V]!=null&&(w[V]*=-1);let L=K.stacking?.mode;if(!L||L===c.o0.None)x[F]=w;else{let V=P.findIndex(_=>_.series.indexOf(F)>-1),H=O[V],j=U[V],A=x[F]=Array(b);for(let _=0;_<b;_++){let k=w[_];k!=null?A[_]=H[_]+=k:A[_]=j[_]?H[_]:k}}}),D){let I=x.map((F,w)=>{let K=P.findIndex(L=>L.series.indexOf(w)>-1);return K!==-1?O[K]:F});D({totals:I})}return a.fields.forEach((I,F)=>{if(F===0||I.config.custom?.hideFrom?.viz)return;if(I.config.custom?.stacking?.mode===c.o0.Percent){let K=P.findIndex(j=>j.series.indexOf(F)>-1),L=O[K],V=P[K],H=x[F];for(let j=0;j<b;j++){let A=H[j];A!=null&&(H[j]=L[j]===0?0:V.dir*(A/L[j]))}}}),x}function y(a,P){let D,x=1,M=1,b=a.data[1][P],R=a.data[1][P];for(let S=1;S<a.data.length;S++){const U=a.data[S][P];U!=null&&(b==null?b=U:U>b&&(b=a.data[S][P],x=S),R==null?R=U:U<R&&(R=a.data[S][P],M=S))}return R==null&&b==null?D=void 0:R!=null&&b!=null?D=(a.valToPos(R,a.series[M].scale)+a.valToPos(b,a.series[x].scale))/2:D=a.valToPos(R||b,a.series[x||M].scale),D!==void 0&&D<0&&(D=a.bbox.height/devicePixelRatio),D}function v(a,P){const D=E(P);return a===c.pR.NegativeY?D?1:-1:D?-1:1}function E(a,P=100){const D=a.length;if(D===0)return!1;let x=0,M=D-1;for(;x<=M&&a[x]==null;)x++;for(;M>=x&&a[M]==null;)M--;let b=0,R=0;if(M>=x){const S=Math.max(1,Math.floor((M-x+1)/P));for(let O=x;O<=M;O+=S){const U=a[O];U!=null&&(U<0||Object.is(U,-0)?b++:U>0&&R++)}if(b>R)return!0}return!1}const h=(0,i.h)("uPlot"),C=h.logger;(0,s.x)("graphng",void 0,h)},40419:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{ALERTING_COLOR:()=>s.ns,AxisPlacement:()=>r.LB,BarAlignment:()=>r.pu,BarValueVisibility:()=>r.eU,BracesPlugin:()=>u.hP,ClearPlugin:()=>u.Gp,ClipboardPlugin:()=>u.wl,DEFAULT_ANNOTATION_COLOR:()=>s.Jx,DOMUtil:()=>s.Qi,DrawStyle:()=>r.$6,EventsWithValidation:()=>s.JU,GlobalStyles:()=>i.nz,GraphGradientMode:()=>r.FI,GraphTresholdsStyleMode:()=>r.i3,IndentationPlugin:()=>u.Rc,LegendDisplayMode:()=>r.jK,LineInterpolation:()=>r.KC,NO_DATA_COLOR:()=>s._V,NewlinePlugin:()=>u.z2,NodeGraphDataFrameFieldNames:()=>s.zG,OK_COLOR:()=>s.te,PENDING_COLOR:()=>s.f7,PointVisibility:()=>r.mv,REGION_FILL_ALPHA:()=>s.iV,ReactUtils:()=>s.Ot,RunnerPlugin:()=>u.dv,SCHEMA:()=>s.Yi,ScaleDirection:()=>r.bQ,ScaleOrientation:()=>r.wN,SearchFunctionType:()=>s.nu,SelectionShortcutsPlugin:()=>u.$L,SlatePrism:()=>u.Ze,StackingMode:()=>r.o0,SuggestionsPlugin:()=>u.bm,ThemeContext:()=>i.Ni,TooltipDisplayMode:()=>r.f3,ansicolor:()=>s._J,attachDebugger:()=>s.xq,calculateFontSize:()=>s.MX,colors:()=>s.O9,commonOptionsBuilder:()=>f.q,createLogger:()=>s.hu,fuzzyMatch:()=>s.C6,getCanvasContext:()=>s.AE,getCellLinks:()=>s.iu,getScrollbarWidth:()=>s.np,getTagColor:()=>s.vm,getTagColorsFromName:()=>s.Bx,getTextColorForAlphaBackground:()=>s.bM,getTextColorForBackground:()=>s.Gc,getTheme:()=>i.gh,hasValidationEvent:()=>s.z3,isCompactUrl:()=>s.go,linkModelToContextMenuItems:()=>s.Rc,makeFragment:()=>s.xl,makeValue:()=>s.l1,measureText:()=>s.X1,mockTheme:()=>i.Zu,mockThemeContext:()=>i.sJ,regexValidation:()=>s.FE,sortedColors:()=>s.Wm,styleMixins:()=>i.GU,stylesFactory:()=>i.Bb,useForceUpdate:()=>s.NW,useStyles:()=>i.yK,useStyles2:()=>i.wW,useTheme:()=>i.Fg,useTheme2:()=>i.l4,validate:()=>s.Gu,withTheme:()=>i.Zz,withTheme2:()=>i.HE});var t=e(14835),c={};for(const d in t)d!=="default"&&(c[d]=()=>t[d]);e.d(T,c);var n=e(24539),c={};for(const d in n)["default","Alert","AlertingSettings","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","AutoSaveField","AutoSizeInput","Badge","BarGauge","BarGaugeDisplayMode","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","BrowserLabel","Button","ButtonCascader","ButtonGroup","ButtonSelect","CallToActionCard","Card","CardContainer","Cascader","CertificationKey","Checkbox","ClickOutsideWrapper","ClipboardButton","CodeEditor","CodeEditorSuggestionItemKind","CollapsableSection","Collapse","ColorPicker","ColorPickerInput","ConfirmButton","ConfirmModal","Container","ContextMenu","ControlledCollapse","Counter","CustomHeadersSettings","CustomScrollbar","DataLinkButton","DataLinkInput","DataLinksContextMenu","DataLinksInlineEditor","DataSourceHttpSettings","DatePicker","DatePickerWithInput","DateTimePicker","DeleteButton","Drawer","Dropdown","DropdownIndicator","EmptySearchResult","ErrorBoundary","ErrorBoundaryAlert","ErrorWithStack","EventsCanvas","FIXED_UNIT","FadeTransition","FeatureBadge","FeatureInfoBox","Field","FieldArray","FieldLinkList","FieldSet","FieldValidationMessage","FileDropzone","FileDropzoneDefaultChildren","FileListItem","FileUpload","FilterInput","FilterPill","Form","FormattedValueDisplay","FullWidthButtonContainer","Gauge","Graph","GraphContextMenu","GraphContextMenuHeader","GraphNG","GraphSeriesToggler","GraphWithLegend","HorizontalGroup","Icon","IconButton","InfoBox","InlineField","InlineFieldRow","InlineFormLabel","InlineLabel","InlineSegmentGroup","InlineSwitch","InlineToast","Input","InputControl","InteractiveTable","JSONFormatter","JsonExplorer","KeyboardPlugin","Label","LegacyForms","LegacyInputStatus","Legend","Link","LinkButton","List","LoadingBar","LoadingPlaceholder","Marker","Menu","MenuGroup","MenuItem","Modal","ModalHeader","ModalRoot","ModalTabContent","ModalTabsHeader","ModalsContext","ModalsController","ModalsProvider","MultiSelect","PageToolbar","Pagination","PanelChrome","PanelChromeErrorIndicator","PanelChromeLoadingIndicator","PanelContainer","PanelContextProvider","PanelContextRoot","PlotLegend","PluginSignatureBadge","Popover","PopoverController","Portal","PortalContainer","QueryField","RadioButtonGroup","RadioButtonList","RangeSlider","ReactMonacoEditor","RefreshPicker","RelativeTimeRangePicker","RenderUserContentAsHTML","ScaleDistribution","SecretInput","SecretTextArea","SecureSocksProxySettings","Segment","SegmentAsync","SegmentInput","SegmentSection","SegmentSelect","Select","SelectContainer","SeriesColorPicker","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","SeriesIcon","SeriesTable","SeriesTableRow","SeriesVisibilityChangeBehavior","SeriesVisibilityChangeMode","SetInterval","SlideOutTransition","Slider","Sparkline","Spinner","StatsPicker","Switch","TLSAuthSettings","Tab","TabContent","TabbedContainer","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tag","TagList","TagsInput","TextArea","TimeOfDayPicker","TimePickerTooltip","TimeRangeInput","TimeRangePicker","TimeSeries","TimeZonePicker","Toggletip","ToolbarButton","ToolbarButtonRow","Tooltip","TooltipPlugin","UPLOT_AXIS_FONT_SIZE","UPlotChart","UPlotConfigBuilder","UnitPicker","ValuePicker","VerticalGroup","VerticalTab","VirtualizedSelect","VizLayout","VizLegend","VizLegendListItem","VizRepeater","VizTooltip","VizTooltipContainer","WeekStartPicker","WithContextMenu","XYCanvas","ZoomPlugin","buildScaleKey","clearButtonStyles","convertOldAngularValueMapping","defaultIntervals","fieldMatchersUI","getCardStyles","getInputStyles","getPortalContainer","getSelectStyles","graphFieldOptions","graphTickFormatter","graphTimeFormat","preparePlotFrame","resetSelectStyles","sharedInputStyle","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","useGraphNGContext","usePanelContext","variableSuggestionToCodeEditorSuggestion","withErrorBoundary"].indexOf(d)<0&&(c[d]=()=>n[d]);e.d(T,c);var s=e(13643),i=e(34726),f=e(59851),u=e(8659),r=e(49557)},34315:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>p,r:()=>o});var t=e(66111),n=e(99098),c=e(72293),s=e(40538),i=e(26372),f=e(2594),u=e(24799),r=e(8581),d=e(46967);function o(g,y,v){const E=["Axis"];g.addRadio({path:"axisPlacement",name:"Placement",category:E,defaultValue:i.q.axisPlacement[0].value,settings:{options:i.q.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:E,defaultValue:"",settings:{placeholder:"Optional text"},showIf:h=>h.axisPlacement!==s.LB.Hidden,shouldApply:h=>h.type!==n.fS.time&&h.type!==n.fS.string}).addNumberInput({path:"axisWidth",name:"Width",category:E,settings:{placeholder:"Auto"},showIf:h=>h.axisPlacement!==s.LB.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:E,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]}}).addRadio({path:"axisColorMode",name:"Color",category:E,defaultValue:s.yK.Text,settings:{options:[{value:s.yK.Text,label:"Text"},{value:s.yK.Series,label:"Series"}]}}),g.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:E,editor:p,override:p,defaultValue:{type:s.wf.Linear},shouldApply:h=>h.type===n.fS.number,process:c.kG}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:E,defaultValue:!1,showIf:h=>h.scaleDistribution?.type!==s.wf.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:y.axisSoftMin,category:E,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:y.axisSoftMax,category:E,settings:{placeholder:"See: Standard options > Max"}})}const m=[{label:"Linear",value:s.wf.Linear},{label:"Logarithmic",value:s.wf.Log},{label:"Symlog",value:s.wf.Symlog}],l=[{label:"2",value:2},{label:"10",value:10}],p=({value:g,onChange:y})=>{const v=g?.type??s.wf.Linear,E=g?.log??2;return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:16}},t.createElement(f.S,{value:v,options:m,onChange:h=>{y({...g,type:h,log:h===s.wf.Linear?void 0:E})}})),(v===s.wf.Log||v===s.wf.Symlog)&&t.createElement(u.g,{label:"Log base"},t.createElement(r.Ph,{options:l,value:E,onChange:h=>{y({...g,log:h.value})}})),v===s.wf.Symlog&&t.createElement(u.g,{label:"Linear threshold"},t.createElement(d.I,{placeholder:"1",value:g?.linearThreshold,onChange:h=>{y({...g,linearThreshold:Number(h.currentTarget.value)})}})))}},91511:(Y,T,e)=>{"use strict";e.d(T,{B:()=>u});var t=e(82897),n=e.n(t),c=e(66111),s=e(52081),i=e(41165);const f=({value:r,onChange:d})=>{const o=(0,c.useCallback)(m=>{d({...r,[m]:!r[m]})},[r,d]);return c.createElement(s.Lh,{spacing:"xs"},Object.keys(r).map(m=>{const l=m;return c.createElement(i.B,{icon:r[l]?"eye-slash":"eye",onClick:()=>o(l),key:l,label:(0,t.startCase)(l),selected:r[l]})}))};function u(r){r.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:f,override:f,shouldApply:()=>!0,hideFromDefaults:!0,process:d=>d})}},31911:(Y,T,e)=>{"use strict";e.d(T,{J:()=>c});var t=e(30779),n=e(40538);function c(s,i=!0){s.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:n.jK.List,settings:{options:[{value:n.jK.List,label:"List"},{value:n.jK.Table,label:"Table"}]},showIf:f=>f.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:f=>f.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:f=>f.legend.showLegend&&f.legend.placement==="right"}),i&&s.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:t.S.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:f=>f.legend.showLegend!==!1})}},22110:(Y,T,e)=>{"use strict";e.d(T,{V:()=>l,n:()=>m});var t=e(66111),n=e(72293),c=e(99098),s=e(40538),i=e(52081),f=e(2594),u=e(46967),r=e(61860),d=e(8180),o=e(26372);const m=({value:p,context:g,onChange:y,item:v})=>t.createElement(i.Lh,null,t.createElement(f.S,{value:p?.mode||s.o0.None,options:v.settings.options,onChange:E=>{y({...p,mode:E})}}),g.isOverride&&p?.mode&&p?.mode!==s.o0.None&&t.createElement(u.I,{type:"text",placeholder:"Group",suffix:t.createElement(r.u,{content:"Name of the stacking group",placement:"top"},t.createElement(d.h,{name:"question-circle"})),defaultValue:p?.group,onChange:E=>{y({...p,group:E.currentTarget.value.trim()})}}));function l(p,g,y=["Graph styles"]){p.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:y,defaultValue:g,editor:m,override:m,settings:{options:o.q.stacking},process:n.kG,shouldApply:v=>v.type===c.fS.number})}},25272:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>t});function t(n,c=!0){c&&n.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),n.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},77587:(Y,T,e)=>{"use strict";e.d(T,{L:()=>n});var t=e(40538);function n(c,s=!1){const i=["Tooltip"],f=s?[{value:t.f3.Single,label:"Single"},{value:t.f3.None,label:"Hidden"}]:[{value:t.f3.Single,label:"Single"},{value:t.f3.Multi,label:"All"},{value:t.f3.None,label:"Hidden"}],u=[{value:t.As.None,label:"None"},{value:t.As.Ascending,label:"Ascending"},{value:t.As.Descending,label:"Descending"}];c.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:i,defaultValue:"single",settings:{options:f}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:i,defaultValue:t.As.None,showIf:r=>r.tooltip?.mode===t.f3.Multi,settings:{options:u}})}},59851:(Y,T,e)=>{"use strict";e.d(T,{q:()=>t});var t={};e.r(t),e.d(t,{ScaleDistributionEditor:()=>n.Y,StackingEditor:()=>u.n,addAxisConfig:()=>n.r,addHideFrom:()=>c.B,addLegendOptions:()=>s.J,addStackingConfig:()=>u.V,addTextSizeOptions:()=>f.Z,addTooltipOptions:()=>i.L});var n=e(34315),c=e(91511),s=e(31911),i=e(77587),f=e(25272),u=e(22110)},49557:(Y,T,e)=>{"use strict";e.d(T,{$6:()=>t.l8,FI:()=>t.FI,KC:()=>t.KC,LB:()=>t.LB,bQ:()=>t.bQ,eU:()=>t.Jp,f3:()=>t.f3,i3:()=>t.i3,jK:()=>t.jK,mv:()=>t.Jp,o0:()=>t.o0,pu:()=>t.pu,wN:()=>t.wN});var t=e(40538)},13193:(Y,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(44288);const n={"[":"]","{":"}","(":")"},c="brace_match";function s(){return{onKeyDown(i,f,u){const{value:r}=f;switch(i.key){case"(":case"{":case"[":{const{start:{offset:d,key:o},end:{offset:m,key:l},focus:{offset:p}}=r.selection,g=r.focusText.text;if(r.selection.isExpanded)return i.preventDefault(),f.insertTextByKey(o,d,i.key).insertTextByKey(l,m+1,n[i.key]).moveEndBackward(1),!0;if(p===g.length||g[p]===" "||Object.values(n).includes(g[p])){i.preventDefault();const y=n[i.key],v={key:`${c}-${(0,t.Z)()}`,type:`${c}-${y}`,anchor:{key:o,offset:d,object:"point"},focus:{key:l,offset:m+1,object:"point"},object:"annotation"};return f.insertText(i.key).insertText(y).addAnnotation(v).moveBackward(1),!0}break}case")":case"}":case"]":{const d=r.anchorText.text,o=r.selection.anchor.offset,m=d[o],l=i.key,p=`${c}-${l}`,g=r.annotations.find(y=>y?.type===p&&y.anchor.key===r.anchorText.key);if(g&&m===l&&!r.selection.isExpanded)return i.preventDefault(),f.moveFocusForward(1).removeAnnotation(g).moveAnchorForward(1),!0;break}case"Backspace":{const d=r.anchorText.text,o=r.selection.anchor.offset,m=d[o-1],l=d[o];if(n[m]&&n[m]===l)return i.preventDefault(),f.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return u()}}}},74778:(Y,T,e)=>{"use strict";e.d(T,{G:()=>t});function t(){return{onKeyDown(n,c,s){const i=c.value;if(i.selection.isExpanded)return s();if(n.key==="k"&&n.ctrlKey){n.preventDefault();const f=i.anchorText.text,u=i.selection.anchor.offset,d=f.length-u;return c.deleteForward(d),!0}return s()}}}},6464:(Y,T,e)=>{"use strict";e.d(T,{w:()=>c});const t=(s,i,f)=>{if(!s.length)return;const u=s.slice(0,-1).join("").length+s.length-1;return s.join(`
`).slice(i,u+f)},n=s=>s?.replace(/[\uFEFF]/g,"");function c(){const s={onCopy(i,f,u){i.preventDefault();const{document:r,selection:d}=f.value,{start:{offset:o},end:{offset:m}}=d,l=r.getLeafBlocksAtRange(d).toArray().map(g=>g.text),p=n(t(l,o,m));return p&&i.clipboardData&&i.clipboardData.setData("Text",p),!0},onPaste(i,f,u){if(i.preventDefault(),i.clipboardData){const d=n(i.clipboardData.getData("Text"))?.split(`
`);if(d&&d.length){f.insertText(d[0]);for(const o of d.slice(1))f.splitBlock().insertText(o)}}return!0}};return{...s,onCut(i,f,u){return s.onCopy(i,f,u),f.deleteAtRange(f.value.selection),!0}}}},784:(Y,T,e)=>{"use strict";e.d(T,{R:()=>o});var t=e(59641),n=e(95787),c=e(43809);const s=(0,t.TB)("mod+["),i=(0,t.TB)("shift+tab"),f=(0,t.TB)("mod+]"),u="  ",r=(m,l,p)=>{const{startBlock:g,endBlock:y,selection:{start:{offset:v,key:E},end:{offset:h,key:C}}}=l.value;if(c.Z.serialize(l.value)==="")return;m.preventDefault();const a=g.getFirstText();a&&v===0&&E===a.key&&h===a.text.length&&C===a.key||!g.equals(y)?d(l,"right"):l.insertText(u)},d=(m,l)=>{const p=m.value.selection,g=m.value.document.getLeafBlocksAtRange(p).toArray();if(l==="left")for(const y of g){const v=y.text.length-y.text.trimLeft().length,E=y.getFirstText().key,h={anchor:{key:E,offset:v,path:[]},focus:{key:E,offset:v,path:[]}};m.deleteBackwardAtRange(n.e6.create(h),Math.min(u.length,v))}else{const{startText:y}=m.value,v=y.text.slice(0,p.start.offset),E=/^\s*$/.test(v);for(const h of g)m.insertTextByKey(h.getFirstText().key,0,u);E&&m.moveStartBackward(u.length)}};function o(){return{onKeyDown(m,l,p){if(s(m)||i(m))m.preventDefault(),d(l,"left");else if(f(m))m.preventDefault(),d(l,"right");else if(m.key==="Tab")r(m,l,p);else return p();return!0}}}},8659:(Y,T,e)=>{"use strict";e.d(T,{$L:()=>u.$,Gp:()=>n.G,Rc:()=>s.R,Ze:()=>r.Z,bm:()=>d.b,dv:()=>f.d,hP:()=>t.h,wl:()=>c.w,z2:()=>i.z});var t=e(13193),n=e(74778),c=e(6464),s=e(784),i=e(9830),f=e(47838),u=e(71096),r=e(67660),d=e(73958)},9830:(Y,T,e)=>{"use strict";e.d(T,{z:()=>n});function t(c){let s=c.length-c.trimLeft().length;if(s){let i=c[0];for(;--s;)i+=c[0];return i}return""}function n(){return{onKeyDown(c,s,i){const f=s.value;if(f.selection.isExpanded)return i();if(c.key==="Enter"){c.preventDefault();const{startBlock:u}=f,r=u.text,d=t(r);return s.splitBlock().insertText(d).focus()}return i()}}}},47838:(Y,T,e)=>{"use strict";e.d(T,{d:()=>t});function t({handler:n}){return{onKeyDown(c,s,i){return n&&c.key==="Enter"&&(c.shiftKey||c.ctrlKey)?(c.preventDefault(),n(c),s):i()}}}},71096:(Y,T,e)=>{"use strict";e.d(T,{$:()=>c});var t=e(59641);const n=(0,t.TB)("mod+l");function c(){return{onKeyDown(s,i,f){if(n(s)){s.preventDefault();const{focusBlock:u,document:r}=i.value;i.moveAnchorToStartOfBlock(),r.getNextBlock(u.key)?i.moveFocusToStartOfNextBlock():i.moveFocusToEndOfText()}else return f();return!0}}}},95514:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>n});const n="prism-token"},67660:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>l,a:()=>v});var t=e(57706),n=e.n(t),c=e(95787),s=e(95514),i=e(220),f=e(66111);function u(E){return E.object==="block"&&E.type==="code_block"}function r(E){return"javascript"}function d(E,h,C){const{decoration:a}=E;if(a.type!==s.Z)return C();const P=a.data.get("className");return f.createElement("span",{className:P},E.children)}class o extends(0,i.Record)({onlyIn:u,getSyntax:r,renderDecoration:d}){constructor(h){super(h)}}const m=o;function l(E={},h=n().languages){const C=new m(E);return{decorateNode:(a,P,D)=>{if(!C.onlyIn(a))return D();const x=c.gO.create(a),M=C.getSyntax(x),b=h[M];if(!b)return[];const S=x.getTexts().map(F=>F&&F.getText()).join(`
`),O=n().tokenize(S,b),U=v(O),I=P.value.data.set("tokens",U);return P.setData(I),p(C,O,x)},renderDecoration:(a,P,D)=>C.renderDecoration({children:a.children,decoration:a.decoration},P,D)}}function p(E,h,C){const a=C.getTexts(),P=[];let D=0,x=0;return a.forEach(M=>{x=D+M.getText().length;let b=0;function R(S,O){if(typeof S=="string"){if(O){const U=g({text:M,textStart:D,textEnd:x,start:b,end:b+S.length,className:`prism-token token ${O}`,block:C});U&&P.push(U)}b+=S.length}else if(O=`${O} ${S.type}`,S.alias&&(O+=" "+S.alias),typeof S.content=="string"){const U=g({text:M,textStart:D,textEnd:x,start:b,end:b+S.content.length,className:`prism-token token ${O}`,block:C});U&&P.push(U),b+=S.content.length}else for(let U=0;U<S.content.length;U+=1)R(S.content[U],O)}h.forEach(R),D=x+1}),P}function g({text:E,textStart:h,textEnd:C,start:a,end:P,className:D,block:x}){return a>=C||P<=h?null:(a=Math.max(a,h),P=Math.min(P,C),a-=h,P-=h,x.createDecoration({object:"decoration",anchor:{key:E.key,offset:a,object:"point"},focus:{key:E.key,offset:P,object:"point"},type:s.Z,data:{className:D}}))}function y(E){return typeof E=="string"?[{content:E,types:[],aliases:[]}]:Array.isArray(E)?E.flatMap(h=>y(h)):E instanceof n().Token?y(E.content).flatMap(h=>{let C=[];return typeof E.alias=="string"?C=[E.alias]:C=E.alias??[],{content:h.content,types:[E.type,...h.types],aliases:[...C,...h.aliases]}}):[]}function v(E){const h=y(E);if(!h.length)return[];const C=h[0];C.prev=null,C.next=h.length>=2?h[1]:null,C.offsets={start:0,end:C.content.length};for(let P=1;P<h.length-1;P++)h[P].prev=h[P-1],h[P].next=h[P+1],h[P].offsets={start:h[P-1].offsets.end,end:h[P-1].offsets.end+h[P].content.length};const a=h[h.length-1];return a.prev=h.length>=2?h[h.length-2]:null,a.next=null,a.offsets={start:h.length>=2?h[h.length-2].offsets.end:0,end:h.length>=2?h[h.length-2].offsets.end+a.content.length:a.content.length},h}},73958:(Y,T,e)=>{"use strict";e.d(T,{b:()=>I});var t=e(82897),n=e(66111),c=e(15638),s=e(32436),i=e(72648),f=e(26519),u=e(13265);const r=w=>w.reduce((K,{items:L,label:V})=>(K.push({label:V,kind:f.c.GroupTitle}),L.reduce((H,j)=>(H.push(j),H),K)),[]),d=w=>w.reduce((K,L)=>K.length<L.label.length?L.label:K,""),o=(w,K,L)=>{const V=(0,u.Z)(L,{font:w.typography.fontFamilyMonospace,fontSize:w.typography.bodySmall.fontSize,fontWeight:"normal"}),H=l(V.width,w),j=m(V.height,w),A=p(j,K);return{listWidth:H,listHeight:A,itemHeight:j}},m=(w,K)=>{const L=K.spacing.gridSize*2;return w+L},l=(w,K)=>{const L=K.spacing.gridSize*3,V=800;return Math.min(Math.max(w+L,200),V)},p=(w,K)=>{const L=Math.min(K.length,10),V=100,H=L*w;return Math.max(H,V)};var g=e(9892),y=e(2631);const v=(w,K,L)=>({typeaheadItem:g.css`
      label: type-ahead-item;
      z-index: 11;
      padding: ${w.spacing(1,1,1,2)};
      border: ${w.colors.border.medium};
      overflow-y: scroll;
      overflow-x: hidden;
      outline: none;
      background: ${w.colors.background.secondary};
      color: ${w.colors.text};
      box-shadow: 0 0 20px ${w.v1.colors.dropdownShadow};
      visibility: ${L===!0?"visible":"hidden"};
      width: 250px;
      min-height: ${K+parseInt(w.spacing(.25),10)}px;
      position: relative;
      word-break: break-word;
    `}),E=({item:w,height:K})=>{const L=w&&!!w.documentation,V=w?w.label:"",H=(0,y.a)(w?.documentation),j=(0,i.l4)(),A=v(j,K,L);return n.createElement("div",{className:(0,g.cx)([A.typeaheadItem])},n.createElement("b",null,V),n.createElement("hr",null),n.createElement("div",{dangerouslySetInnerHTML:{__html:H}}))};var h=e(55271),C=e.n(h),a=e(69636);const P=w=>({typeaheadItem:g.css`
    border: none;
    background: none;
    text-align: left;
    label: type-ahead-item;
    height: auto;
    font-family: ${w.typography.fontFamilyMonospace};
    padding: ${w.spacing(1,1,1,2)};
    font-size: ${w.typography.bodySmall.fontSize};
    text-overflow: ellipsis;
    overflow: hidden;
    z-index: 11;
    display: block;
    white-space: nowrap;
    cursor: pointer;
    transition: color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),
      background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1);
  `,typeaheadItemSelected:g.css`
    label: type-ahead-item-selected;
    background-color: ${w.colors.background.secondary};
  `,typeaheadItemMatch:g.css`
    label: type-ahead-item-match;
    color: ${w.v1.palette.yellow};
    border-bottom: 1px solid ${w.v1.palette.yellow};
    padding: inherit;
    background: inherit;
  `,typeaheadItemGroupTitle:g.css`
    label: type-ahead-item-group-title;
    color: ${w.colors.text.secondary};
    font-size: ${w.typography.bodySmall.fontSize};
    line-height: ${w.typography.body.lineHeight};
    padding: ${w.spacing(1)};
  `}),D=w=>{const K=(0,i.wW)(P),{isSelected:L,item:V,prefix:H,style:j,onMouseEnter:A,onMouseLeave:_,onClickItem:k}=w,Q=L?(0,g.cx)([K.typeaheadItem,K.typeaheadItemSelected]):(0,g.cx)([K.typeaheadItem]),re=(0,g.cx)([K.typeaheadItemMatch]),Z=(0,g.cx)([K.typeaheadItemGroupTitle]),oe=V.label||"";return V.kind===f.c.GroupTitle?n.createElement("li",{className:Z,style:j},n.createElement("span",null,oe)):n.createElement("li",{role:"none"},n.createElement("button",{role:"menuitem",className:Q,style:j,onMouseDown:k,onMouseEnter:A,onMouseLeave:_,type:"button"},V.highlightParts!==void 0?n.createElement(a.H,{text:oe,highlightClassName:re,highlightParts:V.highlightParts}):n.createElement(C(),{textToHighlight:oe,searchWords:[H??""],autoEscape:!0,highlightClassName:re})))},x=(w,K)=>w-K*Math.floor(w/K);class M extends n.PureComponent{constructor(){super(...arguments),this.listRef=(0,n.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const K=r(this.props.groupedItems),L=d(K),{listWidth:V,listHeight:H,itemHeight:j}=o(this.context,K,L);this.setState({listWidth:V,listHeight:H,itemHeight:j,allItems:K})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(K,L)=>{if(this.state.typeaheadIndex!==null&&L.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,t.isEqual)(K.groupedItems,this.props.groupedItems)===!1){const V=r(this.props.groupedItems),H=d(V),{listWidth:j,listHeight:A,itemHeight:_}=o(this.context,V,H);this.setState({listWidth:j,listHeight:A,itemHeight:_,allItems:V,typeaheadIndex:null})}},this.onMouseEnter=K=>{this.setState({hoveredItem:K})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=K=>{const L=this.state.allItems.length;if(L){const V=this.state.typeaheadIndex||0;let H=x(V+K,L);this.state.allItems[H].kind===f.c.GroupTitle&&(H=x(H+K,L)),this.setState({typeaheadIndex:H});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}get menuPosition(){if(!window.getSelection)return"";const K=window.getSelection(),L=K&&K.anchorNode;if(L&&L.parentElement){const V=L.parentElement.getBoundingClientRect(),H=window.scrollX,j=window.scrollY;return`position: absolute; display: flex; top: ${V.top+j+V.height+6}px; left: ${V.left+H-2}px`}return""}render(){const{prefix:K,isOpen:L=!1,origin:V}=this.props,{allItems:H,listWidth:j,listHeight:A,itemHeight:_,hoveredItem:k,typeaheadIndex:Q}=this.state,re=k||Q,Z=H[k||Q||0];return n.createElement(b,{origin:V,isOpen:L,style:this.menuPosition},n.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},n.createElement(s.t7,{ref:this.listRef,itemCount:H.length,itemSize:_,itemKey:oe=>{const G=H&&H[oe];return G?`${oe}-${G.label}`:`${oe}`},width:j,height:A},({index:oe,style:G})=>{const le=H&&H[oe];return le?n.createElement(D,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(le):{},isSelected:Q===null?!1:H[Q]===le,item:le,prefix:K,style:G,onMouseEnter:()=>this.onMouseEnter(oe),onMouseLeave:this.onMouseLeave}):null})),re&&n.createElement(E,{height:A,item:Z}))}}M.contextType=i.Ni;class b extends n.PureComponent{constructor(K){super(K);const{index:L=0,origin:V="query",style:H}=K;this.node=document.createElement("div"),this.node.setAttribute("style",H),this.node.classList.add("slate-typeahead",`slate-typeahead-${V}-${L}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),c.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var R=e(12724),S=e(8644),O=e(95514);const U=250;function I({onTypeahead:w,cleanText:K,onWillApplySuggestion:L,portalOrigin:V}){let H,j={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const A=(0,t.debounce)(F,U),_=k=>{j={...j,...k}};return{onBlur:(k,Q,re)=>(j={...j,groupedItems:[]},re()),onClick:(k,Q,re)=>(j={...j,groupedItems:[]},re()),onKeyDown:(k,Q,re)=>{const oe=j.groupedItems.length;switch(k.key){case"Escape":{if(oe)return k.preventDefault(),j={...j,groupedItems:[]},Q.insertText("");break}case"ArrowDown":case"ArrowUp":if(oe){k.preventDefault(),H.moveMenuIndex(k.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(k.shiftKey||k.ctrlKey)&&oe)return k.preventDefault(),H.insertSuggestion();break}case"Tab":{if(oe)return k.preventDefault(),H.insertSuggestion();break}default:{k.key.length===1&&A(Q,_,w,K);break}}return re()},commands:{selectSuggestion:(k,Q)=>{const re=j.groupedItems;if(!re||!re.length)return k;const Z=k.applyTypeahead(Q);return A(k,_,w,K),Z},applyTypeahead:(k,Q)=>{let re=Q.insertText||Q.label;const Z=Q.kind==="function",oe=Q.move||0,G=oe>0?oe:0,le=oe<0?-oe:0,{typeaheadPrefix:ge,typeaheadText:ne,typeaheadContext:ue}=j;L&&(re=L(re,{groupedItems:j.groupedItems,typeaheadContext:ue,typeaheadPrefix:ge,typeaheadText:ne}));const te=Q.deleteBackwards||ge.length,q=(K?K(ne):ne).length-ge.length,se=ne.indexOf(ge),pe=ge&&(q>0&&se>-1||re===ne)&&!Z?q+se:0;if(re.match(/\n/)){const de=(0,R.xl)(re);return k.deleteBackward(te).deleteForward(pe).insertFragment(de).focus(),k}return j={...j,groupedItems:[]},k.snapshotSelection().deleteBackward(te).deleteForward(pe).insertText(re).moveForward(G).moveBackward(le).focus(),k}},renderEditor(k,Q,re){if(Q.value.selection.isExpanded)return re();const Z=re();return n.createElement(n.Fragment,null,Z,n.createElement(M,{menuRef:oe=>H=oe,origin:V,prefix:j.typeaheadPrefix,isOpen:!!j.groupedItems.length,groupedItems:j.groupedItems,onSelectSuggestion:Q.selectSuggestion}))}}}const F=async(w,K,L,V)=>{if(!L)return;const{value:H}=w,{selection:j}=H,A=H.document.getClosestBlock(H.focusBlock.key),_=H.selection.start.offset-1,k=A&&A.getDecorations(w),Q=k?k.filter(me=>me.start.offset<=_&&me.end.offset>_&&me.type===O.Z).toArray():[],re=k&&k.filter(me=>me.end.offset<=_&&me.type===O.Z&&me.data.get("className").includes("label-key")).last(),Z=re&&H.focusText.text.slice(re.start.offset,re.end.offset),oe=Q.map(me=>me.data.get("className")).join(" ").split(" ").filter(me=>me.length);let G=H.focusText.text,le=G.slice(0,j.focus.offset);Q.length&&(G=H.focusText.text.slice(Q[0].start.offset,Q[0].end.offset),le=H.focusText.text.slice(Q[0].start.offset,j.focus.offset));const ge=le.match(/(?:!?=~?"?|")(.*)/);ge?le=ge[1]:V&&(le=V(le));const{suggestions:ne,context:ue}=await L({prefix:le,text:G,value:H,wrapperClasses:oe,labelKey:Z||void 0,editor:w}),te=ne.map(me=>{if(!me.items)return me;const q=me.searchFunctionType||(me.prefixMatch?S.Z.Prefix:S.Z.Word),se=S.n[q];let ae={...me};return le&&(me.skipFilter||(ae.items=ae.items.filter(pe=>(pe.filterText||pe.label).length>=le.length),ae.items=se(ae.items,le)),ae.items=ae.items.filter(pe=>!(pe.insertText===le||(pe.filterText??pe.label)===le))),me.skipSort||(ae.items=(0,t.sortBy)(ae.items,pe=>pe.sortText===void 0?pe.sortValue!==void 0?pe.sortValue:pe.label:pe.sortText||pe.label)),ae}).filter(me=>me.items&&me.items.length);K({groupedItems:te,typeaheadPrefix:le,typeaheadContext:ue,typeaheadText:G}),w.blur().focus()}},29428:(Y,T,e)=>{"use strict";e.d(T,{n:()=>p});var t=e(65788),n=e(66111),c=e(72648);function s(g){return t.css`
    .panel-options-group {
      border-bottom: 1px solid ${g.colors.border.weak};
    }

    .panel-options-group__header {
      padding: ${g.spacing(1,2,1,1)};
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      font-weight: 500;
      color: ${g.colors.text.primary};

      &:hover {
        background: ${g.colors.emphasize(g.colors.background.primary,.03)};
      }
    }

    .panel-options-group__icon {
      color: ${g.colors.text.secondary};
      margin-right: ${g.spacing(1)};
      padding: ${g.spacing(0,.9,0,.6)};
    }

    .panel-options-group__title {
      position: relative;
    }

    .panel-options-group__body {
      padding: ${g.spacing(1,2,1,4)};
    }
  `}function i(g){return t.css`
    .card-section {
      margin-bottom: ${g.spacing(4)};
    }

    .card-list {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      list-style-type: none;
    }

    .card-item {
      display: block;
      height: 100%;
      background: ${g.colors.background.secondary};
      box-shadow: none;
      padding: ${g.spacing(2)};
      border-radius: 4px;

      &:hover {
        background: ${g.colors.emphasize(g.colors.background.secondary,.03)};
      }

      .label-tag {
        margin-left: ${g.spacing(1)};
        font-size: 11px;
        padding: 2px 6px;
      }
    }

    .card-item-body {
      display: flex;
      overflow: hidden;
    }

    .card-item-details {
      overflow: hidden;
    }

    .card-item-header {
      margin-bottom: ${g.spacing(2)};
    }

    .card-item-type {
      color: ${g.colors.text.secondary};
      text-transform: uppercase;
      font-size: ${g.typography.size.sm};
      font-weight: ${g.typography.fontWeightMedium};
    }

    .card-item-badge {
      margin: 6px 0;
    }

    .card-item-notice {
      font-size: ${g.typography.size.sm};
    }

    .card-item-name {
      color: ${g.colors.text.primary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-label {
      margin-left: ${g.spacing(1)};
    }

    .card-item-sub-name {
      color: ${g.colors.text.secondary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-sub-name--header {
      color: ${g.colors.text.secondary};
      text-transform: uppercase;
      margin-bottom: ${g.spacing(2)};
      font-size: ${g.typography.size.sm};
      font-weight: bold;
    }

    .card-list-layout-grid {
      .card-item-type {
        display: inline-block;
      }

      .card-item-notice {
        font-size: ${g.typography.size.sm};
        display: inline-block;
        margin-left: ${g.spacing(2)};
      }

      .card-item-header-action {
        float: right;
      }

      .card-item-wrapper {
        width: 100%;
        padding: ${g.spacing(0,2,2,0)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item-figure {
        margin: ${g.spacing(0,2,2,0)}0;
        height: 80px;

        img {
          width: 80px;
        }
      }

      .card-item-name {
        font-size: ${g.typography.h3.fontSize};
      }

      ${g.breakpoints.up("md")} {
        .card-item-wrapper {
          width: 50%;
        }
      }

      ${g.breakpoints.up("lg")} {
        .card-item-wrapper {
          width: 33.333333%;
        }
      }

      &.card-list-layout-grid--max-2-col {
        ${g.breakpoints.up("lg")} {
          .card-item-wrapper {
            width: 50%;
          }
        }
      }
    }

    .card-list-layout-list {
      .card-item-wrapper {
        padding: 0;
        width: 100%;
        margin-bottom: ${g.spacing(1)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item {
        border-radius: 2px;
      }

      .card-item-header {
        float: right;
        text-align: right;
      }

      .card-item-figure {
        margin: ${g.spacing(0,2,0,0)};
        img {
          width: 48px;
        }
      }

      .card-item-name {
        font-size: ${g.typography.h4.fontSize};
      }

      .card-item-sub-name {
        font-size: ${g.typography.size.sm};
      }

      .layout-selector {
        margin-right: 0;
      }
    }
  `}var f=e(85419);function u(g){return t.css`
    html {
      -ms-overflow-style: scrollbar;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      height: 100%;
      font-size: ${g.typography.htmlFontSize}px;
      font-family: ${g.typography.fontFamily};
      line-height: ${g.typography.body.lineHeight};
      font-kerning: normal;
    }

    :root {
      color-scheme: ${g.colors.mode};
    }

    body {
      height: 100%;
      width: 100%;
      position: absolute;
      color: ${g.colors.text.primary};
      background-color: ${g.colors.background.canvas};
      ${r(g.typography.body)}
    }

    h1,
    .h1 {
      ${r(g.typography.h1)}
    }
    h2,
    .h2 {
      ${r(g.typography.h2)}
    }
    h3,
    .h3 {
      ${r(g.typography.h3)}
    }
    h4,
    .h4 {
      ${r(g.typography.h4)}
    }
    h5,
    .h5 {
      ${r(g.typography.h5)}
    }
    h6,
    .h6 {
      ${r(g.typography.h6)}
    }

    p {
      margin: 0 0 ${g.spacing(2)};
    }

    button {
      letter-spacing: ${g.typography.body.letterSpacing};

      &:focus-visible {
        outline: ${(0,f.getFocusStyles)(g)};
      }
      &:focus {
        outline: none;
      }
    }

    // Ex: 14px base font * 85% = about 12px
    small {
      font-size: ${g.typography.bodySmall.fontSize};
    }

    b,
    strong {
      font-weight: ${g.typography.fontWeightMedium};
    }

    em {
      font-style: italic;
      color: ${g.colors.text.primary};
    }

    cite {
      font-style: normal;
    }

    // Utility classes
    .muted {
      color: ${g.colors.text.secondary};
    }

    a.muted:hover,
    a.muted:focus {
      color: ${g.colors.text.primary};
    }

    .text-warning {
      color: ${g.colors.warning.text};

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.warning.text,.15)};
      }
    }

    .text-error {
      color: ${g.colors.error.text};

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.error.text,.15)};
      }
    }

    .text-success {
      color: $success-text-color;

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.success.text,.15)};
      }
    }

    a {
      cursor: pointer;
      color: ${g.colors.text.primary};
      text-decoration: none;

      &:focus {
        outline: none;
      }

      &:focus-visible {
        ${(0,f.getFocusStyles)(g)}
      }

      &: [disabled] {
        cursor: default;
        pointer-events: none !important;
      }
    }

    .text-link {
      text-decoration: underline;
    }

    .text-left {
      text-align: left;
    }

    .text-right {
      text-align: right;
    }

    .text-center {
      text-align: center;
    }

    .highlight-search-match {
      background: ${g.components.textHighlight.background};
      color: ${g.components.textHighlight.text};
      padding: 0;
    }
  `}function r(g){return`
    margin: 0;
    font-size: ${g.fontSize};
    line-height: ${g.lineHeight};
    font-weight: ${g.fontWeight};
    letter-spacing: ${g.letterSpacing};
    font-family: ${g.fontFamily};
    margin-bottom: 0.45em;
  `}function d(g){return t.css`
    // fix white background on intercom in dark mode
    iframe.intercom-borderless-frame {
      color-scheme: ${g.colors.mode};
    }
  `}function o(g){return t.css`
    input,
    button,
    select,
    textarea {
      font-size: ${g.typography.body.fontSize};
      font-weight: ${g.typography.body.fontWeight};
      line-height: ${g.typography.body.lineHeight};
    }
    input,
    button,
    select,
    textarea {
      font-family: ${g.typography.body.fontFamily};
    }

    input,
    select {
      background-color: ${g.components.input.background};
      color: ${g.components.input.text};
      border: none;
      box-shadow: none;
    }

    textarea {
      height: auto;
    }

    // Reset width of input images, buttons, radios, checkboxes
    input[type='file'],
    input[type='image'],
    input[type='submit'],
    input[type='reset'],
    input[type='button'],
    input[type='radio'],
    input[type='checkbox'] {
      width: auto; // Override of generic input selector
    }
  `}function m(g){return t.css`
    // TODO copy from _utils.scss
  `}function l(g){const y=g.breakpoints.values.xxl+g.spacing.gridSize*2+g.components.sidemenu.width;return t.css`
    .grafana-app {
      display: flex;
      align-items: stretch;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .main-view {
      position: relative;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      height: 100%;
      flex: 1 1 0;
      min-width: 0;
    }

    .page-scrollbar-content {
      display: flex;
      min-height: 100%;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    .page-container {
      flex-grow: 1;
      flex-basis: 100%;
      padding-left: ${g.spacing(2)};
      padding-right: ${g.spacing(2)};

      ${g.breakpoints.up("sm")} {
        margin: ${g.spacing(0,1)};
      }

      ${g.breakpoints.up("md")} {
        margin: ${g.spacing(0,2)};
      }

      @media (min-width: ${y}px) {
        max-width: ${g.breakpoints.values.xxl}px;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }
    }

    .page-full {
      margin-left: ${g.spacing(2)};
      padding-left: ${g.spacing(2)};
      padding-right: ${g.spacing(2)};
    }

    .page-body {
      padding: ${g.spacing(1)};
      background: ${g.components.panel.background};
      border: 1px solid ${g.components.panel.borderColor};
      margin-bottom: 32px;

      ${g.breakpoints.up("md")} {
        padding: ${g.spacing(2)};
      }

      ${g.breakpoints.up("lg")} {
        padding: ${g.spacing(3)};
      }
    }

    .page-heading {
      font-size: ${g.typography.h4.fontSize};
      margin-top: 0;
      margin-bottom: ${g.spacing(2)};
    }

    .page-action-bar {
      margin-bottom: ${g.spacing(2)};
      display: flex;
      align-items: flex-start;

      > a,
      > button,
      > div:nth-child(2) {
        margin-left: ${g.spacing(2)};
      }
    }

    .page-action-bar--narrow {
      margin-bottom: 0;
    }

    .page-action-bar__spacer {
      width: ${g.spacing(2)};
      flex-grow: 1;
    }

    .page-sub-heading {
      margin-bottom: ${g.spacing(2)};
    }

    .page-sub-heading-icon {
      margin-left: ${g.spacing(1)};
      margin-top: ${g.spacing(.5)};
    }

    .page-hidden {
      display: none;
    }
  `}function p(){const g=(0,c.l4)();return n.createElement(t.Global,{styles:[u(g),d(g),o(g),l(g),i(g),s(g),m(g)]})}},72648:(Y,T,e)=>{"use strict";e.d(T,{Fg:()=>m,HE:()=>o,Ni:()=>r,Zz:()=>d,l4:()=>l,sJ:()=>y,wW:()=>g,yK:()=>p});var t=e(24420),n=e.n(t),c=e(66111),s=e(21544),i=e(7804);let f=null;const u=new WeakMap,r=c.createContext((0,s.j)());r.displayName="ThemeContext";const d=v=>{const E=h=>{const C=f||r;return c.createElement(C.Consumer,null,a=>c.createElement(v,{...h,theme:a.v1}))};return E.displayName=`WithTheme(${v.displayName})`,n()(E,v),E},o=v=>{const E=h=>{const C=f||r;return c.createElement(C.Consumer,null,a=>c.createElement(v,{...h,theme:a}))};return E.displayName=`WithTheme(${v.displayName})`,n()(E,v),E};function m(){return(0,c.useContext)(f||r).v1}function l(){return(0,c.useContext)(f||r)}function p(v){const E=m();let h=u.get(v);return h||(h=(0,i.B)(v),u.set(v,h)),h(E)}function g(v){const E=l();let h=u.get(v);return h||(h=(0,i.B)(v),u.set(v,h)),h(E)}const y=v=>(f=c.createContext(v),()=>{f=null})},34726:(Y,T,e)=>{"use strict";e.d(T,{nz:()=>u.n,Ni:()=>t.Ni,gh:()=>s,Zu:()=>i,sJ:()=>t.sJ,GU:()=>r,Bb:()=>f.B,yK:()=>t.yK,wW:()=>t.wW,Fg:()=>t.Fg,l4:()=>t.l4,Zz:()=>t.Zz,HE:()=>t.HE});var t=e(72648),n=e(21544);let c;const s=(d="dark")=>c?c(d):(0,n.j)({colors:{mode:d}}).v1,i=d=>(c=d,()=>{c=null});var f=e(7804),u=e(29428),r=e(85419)},85419:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{cardChrome:()=>n,focusCss:()=>r,getFocusStyles:()=>o,getMouseFocusStyles:()=>d,getTooltipContainerStyles:()=>m,hoverColor:()=>c,listItem:()=>s,listItemSelected:()=>i,mediaUp:()=>f});var t=e(28550);function n(l){return`
    background: ${l.colors.background.secondary};
    &:hover {
      background: ${c(l.colors.background.secondary,l)};
    }
    box-shadow: ${l.components.panel.boxShadow};
    border-radius: ${l.shape.radius.default};
`}function c(l,p){return p.isDark?(0,t.Z)(l).brighten(2).toString():(0,t.Z)(l).darken(2).toString()}function s(l){return`
  background: ${l.colors.background.secondary};
  &:hover {
    background: ${c(l.colors.background.secondary,l)};
  }
  box-shadow: ${l.components.panel.boxShadow};
  border-radius: ${l.shape.radius.default};
`}function i(l){return`
    background: ${c(l.colors.background.secondary,l)};
    color: ${l.colors.text.maxContrast};
`}function f(l){return`only screen and (min-width: ${l})`}const u=l=>l.hasOwnProperty("v1"),r=l=>{const p=u(l),g=p?l.colors.background.canvas:l.colors.bodyBg,y=p?l.colors.primary.main:l.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${g}, 0 0 0px 4px ${y};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function d(l){return{outline:"none",boxShadow:"none"}}function o(l){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${l.colors.background.canvas}, 0 0 0px 4px ${l.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const m=l=>`
  overflow: hidden;
  background: ${l.colors.background.secondary};
  box-shadow: ${l.shadows.z2};
  max-width: 800px;
  padding: ${l.spacing(1)};
  border-radius: ${l.shape.radius.default};
  z-index: ${l.zIndex.tooltip};
`},7804:(Y,T,e)=>{"use strict";e.d(T,{B:()=>n});var t=e(58635);function n(c){return(0,t.Z)(c)}},26519:(Y,T,e)=>{"use strict";e.d(T,{c:()=>t});var t=(n=>(n.GroupTitle="GroupTitle",n))(t||{})},5771:()=>{"use strict"},50622:(Y,T,e)=>{"use strict";e.d(T,{BI:()=>c,WZ:()=>i,e7:()=>s,iJ:()=>t.iJ});var t=e(84559),n=e(99098);const c=()=>Object.keys(t._S);function s(f){return i(f?.type)}function i(f){if(f)switch(f){case n.fS.time:return"clock-nine";case n.fS.string:return"font";case n.fS.number:return"calculator-alt";case n.fS.boolean:return"toggle-on";case n.fS.trace:return"info-circle";case n.fS.enum:return"list-ol";case n.fS.geo:return"map-marker";case n.fS.other:return"brackets-curly"}return"question-circle"}},24539:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{CompletionItemKind:()=>i.c,getAvailableIcons:()=>r.BI,getFieldTypeIcon:()=>r.e7,getFieldTypeIconName:()=>r.WZ,toIconName:()=>r.iJ});var t=e(2729),n=e.n(t),y={};for(const v in t)v!=="default"&&(y[v]=()=>t[v]);e.d(T,y);var c=e(96590),s=e.n(c),y={};for(const v in c)v!=="default"&&(y[v]=()=>c[v]);e.d(T,y);var i=e(26519),f=e(5771),u=e.n(f),y={};for(const v in f)["default","CompletionItemKind"].indexOf(v)<0&&(y[v]=()=>f[v]);e.d(T,y);var r=e(50622),d=e(64343),o=e.n(d),y={};for(const v in d)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(v)<0&&(y[v]=()=>d[v]);e.d(T,y);var m=e(76891),l=e.n(m),y={};for(const v in m)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(v)<0&&(y[v]=()=>m[v]);e.d(T,y);var p=e(53581),g=e.n(p),y={};for(const v in p)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(v)<0&&(y[v]=()=>p[v]);e.d(T,y)},96590:()=>{"use strict"},53581:()=>{"use strict"},64343:()=>{"use strict"},76891:()=>{"use strict"},2729:()=>{"use strict"},66120:(Y,T,e)=>{"use strict";e.d(T,{i:()=>t});const t=(n,c)=>{n.key==="Tab"||n.altKey||n.ctrlKey||n.metaKey||(n.stopPropagation(),n.key==="Escape"&&c())}},16514:(Y,T,e)=>{"use strict";e.d(T,{Gc:()=>y,Jx:()=>i,O9:()=>m,Wm:()=>E,_V:()=>r,bM:()=>v,f7:()=>d,iV:()=>o,ns:()=>u,te:()=>f});var t=e(82897),n=e.n(t),c=e(28550);const s=4,i="rgba(0, 211, 255, 1)",f="rgba(11, 237, 50, 1)",u="rgba(237, 46, 24, 1)",r="rgba(150, 150, 150, 1)",d="rgba(247, 149, 32, 1)",o=.09,m=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function l(h){const C=(0,t.map)(h,p),a=(0,t.sortBy)(C,["h"]),P=(0,t.chunk)(a,s),D=(0,t.map)(P,M=>(0,t.sortBy)(M,"l")),x=(0,t.flattenDeep)((0,t.zip)(...D));return(0,t.map)(x,g)}function p(h){return(0,c.Z)(h).toHsl()}function g(h){return(0,c.Z)(h).toHexString()}function y(h){return(0,c.Z)(h).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function v(h,C){const a=(0,c.Z)(h),P=a.getBrightness();return a.getAlpha()<.3?C?"rgb(247, 248, 250)":"rgb(32, 34, 38)":P>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let E=l(m)},79406:(Y,T,e)=>{"use strict";e.d(T,{R:()=>t,g:()=>n});const t=c=>c().map(s=>({label:s.title,ariaLabel:s.title,url:s.href,target:s.target,icon:`${s.target==="_blank"?"external-link-alt":"link"}`,onClick:s.onClick})),n=c=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(c)},73289:(Y,T,e)=>{"use strict";e.d(T,{x:()=>t});function t(n,c,s){}},39027:(Y,T,e)=>{"use strict";e.d(T,{O:()=>t});function t(n){const s=n.lastIndexOf("."),i=n.substring(s),f=n.substring(0,s);return f.length<16?n:`${f.substring(0,16)}...${i}`}},27303:(Y,T,e)=>{"use strict";e.d(T,{C:()=>c});var t=e(82897),n=e.n(t);function c(s,i){let f=0,u=s.indexOf(i);i=i.replace(/\s/g,"");const r=[];if(u!==-1)return{distance:0,found:!0,ranges:[{start:u,end:u+i.length-1}]};for(const d of i){const o=s.indexOf(d,u);if(o===-1)return{distance:1/0,ranges:[],found:!1};if(u!==-1&&(f+=o-u),u=o+1,r.length===0)r.push({start:o,end:o});else{const m=(0,t.last)(r);o===m.end+1?m.end++:r.push({start:o,end:o})}}return{distance:f,ranges:r,found:!0}}},37951:(Y,T,e)=>{"use strict";e.d(T,{c:()=>f,t:()=>r});var t=e(97925),n=e(66111),c=e(80332),s=e(89880);function i(){t.ZP.options.lng||t.ZP.use(c.Db).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const f=d=>(i(),n.createElement(s.c,{...d})),u=t.ZP.t,r=(d,o,m)=>(i(),u(d,o,m))},13643:(Y,T,e)=>{"use strict";e.d(T,{ns:()=>i.ns,Jx:()=>i.Jx,Qi:()=>t,JU:()=>f.JU,_V:()=>i._V,zG:()=>h,te:()=>i.te,f7:()=>i.f7,iV:()=>i.iV,Ot:()=>s,Yi:()=>u.Yi,nu:()=>g.Z,_J:()=>y._J,xq:()=>E.x,MX:()=>l.MX,O9:()=>i.O9,hu:()=>v.h,C6:()=>C.C,AE:()=>l.AE,iu:()=>m.i,np:()=>o.n,vm:()=>d.vm,Bx:()=>d.Bx,bM:()=>i.bM,Gc:()=>i.Gc,z3:()=>f.z3,go:()=>r.g,Rc:()=>r.R,xl:()=>u.xl,l1:()=>u.l1,X1:()=>l.X1,FE:()=>f.FE,Wm:()=>i.Wm,NW:()=>p.N,Gu:()=>f.Gu});var t={};e.r(t),e.d(t,{getNextCharacter:()=>c,getPreviousCousin:()=>n}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(a){const P=(this.document||this.ownerDocument).querySelectorAll(a);let D=this,x;do{for(x=P.length;--x>=0&&P.item(x)!==D;);D=D.parentElement}while(x<0&&D);return D});function n(a,P){let D=a.parentElement.previousSibling,x;for(;D;){if(x=D.querySelector(P),x)return x;D=D.previousSibling}}function c(a){const P=(a||window).getSelection();if(!P||!P.anchorNode)return null;const D=P.getRangeAt(0),x=P.anchorNode.textContent,M=D.startOffset;return x.slice(M,M+1)}var s=e(61970),i=e(16514),f=e(97291),u=e(12724),r=e(79406),d=e(3385),o=e(90771),m=e(30901),l=e(4176),p=e(32434),g=e(8644),y=e(2525),v=e(88383),E=e(73289),h=(a=>(a.id="id",a.title="title",a.subTitle="subTitle",a.mainStat="mainStat",a.secondaryStat="secondaryStat",a.source="source",a.target="target",a.detail="detail__",a.arc="arc__",a.color="color",a))(h||{}),C=e(27303)},88383:(Y,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(82897),n=e.n(t);const c=(0,t.throttle)((...i)=>{console.log(...i)},500),s=i=>{let f=!1;return{logger:(u,r=!1,...d)=>{},enable:()=>f=!0,disable:()=>f=!1,isEnabled:()=>f}}},4176:(Y,T,e)=>{"use strict";e.d(T,{AE:()=>i,MX:()=>u,X1:()=>f});let t;const n=new Map,c=500;let s="";function i(){return t||(t=document.createElement("canvas").getContext("2d")),t}function f(r,d,o=400){const m=`${o} ${d}px 'Inter'`,l=r+m,p=n.get(l);if(p)return p;const g=i();s!==m&&(g.font=s=m);const y=g.measureText(r);return n.size===c&&n.clear(),n.set(l,y),y}function u(r,d,o,m,l,p){const g=f(r,14,p),y=d/(g.width+2)*14,v=o/m,E=Math.min(v,y);return Math.min(E,l??E)}},61970:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{getChildId:()=>n,renderOrCallToRender:()=>c});var t=e(66111);function n(s){let i;const f=t.Children.only(s);return"id"in f?.props?i=f.props.id:"inputId"in f.props&&(i=f?.props.inputId),typeof i=="string"?i:void 0}function c(s,i){if(t.isValidElement(s)||typeof s=="string"||typeof s=="number")return s;if(typeof s=="function"&&i)return s(i);throw new Error(`${s} is not a React element nor a function that returns React element`)}},90771:(Y,T,e)=>{"use strict";e.d(T,{n:()=>n});let t=null;function n(){if(t!==null)return t;if(typeof document<"u"){const c=document.createElement("div"),s={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(s).map(i=>{c.style[i]=s[i]}),document.body.appendChild(c),t=c.offsetWidth-c.clientWidth,document.body.removeChild(c)}else t=0;return t||0}},8644:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>n,n:()=>f});var t=e(27303),n=(u=>(u.Word="Word",u.Prefix="Prefix",u.Fuzzy="Fuzzy",u))(n||{});const f={Word:(u,r)=>u.filter(d=>(d.filterText||d.label).includes(r)),Prefix:(u,r)=>u.filter(d=>(d.filterText||d.label).startsWith(r)),Fuzzy:(u,r)=>(r=r.toLowerCase(),u.filter(d=>{const{distance:o,ranges:m,found:l}=(0,t.C)(d.label.toLowerCase(),r);return l?(d.sortValue=o,d.highlightParts=m,!0):!1}))}},12724:(Y,T,e)=>{"use strict";e.d(T,{Yi:()=>n,l1:()=>s,xl:()=>c});var t=e(95787);const n={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},c=(i,f)=>{const u=i.split(`
`).map(d=>t.gO.create({type:"code_line",nodes:[t.xv.create(d)]})),r=t.gO.create({data:{syntax:f},type:"code_block",nodes:u});return t.BB.create({nodes:[r]})},s=(i,f)=>{const u=c(i,f);return t.B4.create({document:u})}},30901:(Y,T,e)=>{"use strict";e.d(T,{i:()=>t});const t=(n,c)=>{let s;if(n.getLinks&&(s=n.getLinks({valueRowIndex:c.index})),!!s){for(let i=0;i<s?.length;i++)if(s[i].onClick){const f=s[i].onClick;s[i].onClick=u=>{u.ctrlKey||u.metaKey||u.shiftKey||(u.preventDefault(),f(u,{field:n,rowIndex:c.index}))}}return s}}},3385:(Y,T,e)=>{"use strict";e.d(T,{Bx:()=>c,vm:()=>s});const t=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],n=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function c(u=""){const r=i(u.toLowerCase()),d=Math.abs(r%t.length);return s(d)}function s(u){return{color:t[u],borderColor:n[u]}}function i(u){let r=5381;for(let d=0;d<u.length;d++)r=(r<<5)+r+u.charCodeAt(d);return r}var f={getTagColorsFromName:c}},21133:(Y,T,e)=>{"use strict";e.d(T,{k:()=>c});var t=e(9892),n=e(5680);function c(s,i,f,u,r){return{arrow:t.css`
      height: 1rem;
      width: 1rem;
      position: absolute;
      pointer-events: none;

      &::before {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        width: 0;
      }

      &::after {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        position: absolute;
        width: 0;
      }
    `,container:t.css`
      background-color: ${i};
      border-radius: ${s.shape.radius.default};
      border: 1px solid ${f};
      box-shadow: ${s.shadows.z2};
      color: ${u};
      font-size: ${s.typography.bodySmall.fontSize};
      padding: ${s.spacing(r.topBottom,r.rightLeft)};
      transition: opacity 0.3s;
      z-index: ${s.zIndex.tooltip};
      max-width: 400px;
      overflow-wrap: break-word;

      &[data-popper-interactive='false'] {
        pointer-events: none;
      }

      &[data-popper-placement*='bottom'] > div[data-popper-arrow='true'] {
        left: 0;
        margin-top: -7px;
        top: 0;

        &::before {
          border-color: transparent transparent ${f} transparent;
          border-width: 0 8px 7px 8px;
          position: absolute;
          top: -1px;
        }

        &::after {
          border-color: transparent transparent ${i} transparent;
          border-width: 0 8px 7px 8px;
        }
      }

      &[data-popper-placement*='top'] > div[data-popper-arrow='true'] {
        bottom: 0;
        left: 0;
        margin-bottom: -14px;

        &::before {
          border-color: ${f} transparent transparent transparent;
          border-width: 7px 8px 0 7px;
          position: absolute;
          top: 1px;
        }

        &::after {
          border-color: ${i} transparent transparent transparent;
          border-width: 7px 8px 0 7px;
        }
      }

      &[data-popper-placement*='right'] > div[data-popper-arrow='true'] {
        left: 0;
        margin-left: -10px;

        &::before {
          border-color: transparent ${f} transparent transparent;
          border-width: 7px 6px 7px 0;
        }

        &::after {
          border-color: transparent ${i} transparent transparent;
          border-width: 6px 7px 7px 0;
          left: 2px;
          top: 1px;
        }
      }

      &[data-popper-placement*='left'] > div[data-popper-arrow='true'] {
        margin-right: -11px;
        right: 0;

        &::before {
          border-color: transparent transparent transparent ${f};
          border-width: 7px 0 6px 7px;
        }

        &::after {
          border-color: transparent transparent transparent ${i};
          border-width: 6px 0 5px 5px;
          left: 1px;
          top: 1px;
        }
      }

      code {
        border: none;
        display: inline;
        background: ${n.darken(i,.1)};
        color: ${u};
      }

      pre {
        background: ${n.darken(i,.1)};
        color: ${u};
      }

      a {
        color: ${u};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `,headerClose:t.css`
      color: ${s.colors.text.secondary};
      position: absolute;
      right: ${s.spacing(1)};
      top: ${s.spacing(1.5)};
      background-color: transparent;
      border: 0;
    `,header:t.css`
      padding-top: ${s.spacing(1)};
      padding-bottom: ${s.spacing(2)};
    `,body:t.css`
      padding-top: ${s.spacing(1)};
      padding-bottom: ${s.spacing(1)};
    `,footer:t.css`
      padding-top: ${s.spacing(2)};
      padding-bottom: ${s.spacing(1)};
    `}}},32434:(Y,T,e)=>{"use strict";e.d(T,{N:()=>n});var t=e(66111);function n(){const[c,s]=(0,t.useState)(0);return()=>s(i=>i+1)}},97291:(Y,T,e)=>{"use strict";e.d(T,{FE:()=>s,Gu:()=>n,JU:()=>t,z3:()=>c});var t=(i=>(i.onBlur="onBlur",i.onFocus="onFocus",i.onChange="onChange",i))(t||{});const n=(i,f)=>{const u=f.reduce((r,d)=>d.rule(i)?r:r.concat(d.errorMessage),[]);return u.length>0?u:null},c=(i,f)=>f&&f[i],s=(i,f)=>({rule:u=>!!u.match(i),errorMessage:f||"Value is not valid"})},42879:(Y,T,e)=>{"use strict";e.d(T,{z:()=>t});const t={Breadcrumbs:{breadcrumb:n=>`data-testid ${n} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:n=>`${n} menu`,MenuGroup:n=>`${n} menu group`,MenuItem:n=>`${n} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:n=>`data-testid Panel header ${n}`,headerItems:n=>`Panel header item ${n}`,menuItems:n=>`data-testid Panel menu item ${n}`,menu:n=>`data-testid Panel menu ${n}`,containerByTitle:n=>`${n} panel`,headerCornerInfo:n=>`Panel header ${n}`,loadingBar:()=>"Panel loading bar",HoverWidget:{container:"data-test-id hover-header-container",dragIcon:"data-testid drag-icon"}},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:n=>`gpl alias ${n}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:n=>`VizLegend series ${n}`},Drawer:{General:{title:n=>`Drawer title ${n}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:n=>`${n} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"data-testid toggle-viz-picker",toggleVizOptions:"data-testid toggle-viz-options",toggleTableView:"toggle-table-view",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:n=>`Tab ${n}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"Rich history button",addQuery:"Query editor add query button"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:n=>`${n}`,title:n=>`Query editor row title ${n}`,container:n=>`Query editor row ${n}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:n=>`Alert ${n}`,alertV2:n=>`data-testid Alert ${n}`},TransformTab:{content:"Transform editor tab content",newTransform:n=>`New transform ${n}`,transformationEditor:n=>`Transformation editor ${n}`,transformationEditorDebugger:n=>`Transformation editor debugger ${n}`},Transforms:{card:n=>`New transform ${n}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"search transformations"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:n=>`${n}`,itemButton:n=>`data-testid ${n}`},QueryEditorToolbarItem:{button:n=>`QueryEditor toolbar item button ${n}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:n=>n?`Options group ${n}`:"Options group",toggle:n=>n?`Options group ${n} toggle`:"Options group toggle"},PluginVisualization:{item:n=>`Plugin visualization item ${n}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"data-testid Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:n=>`Value picker button ${n}`,select:n=>`Value picker select ${n}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:n=>`data-testid Collapse folder ${n}`,expandFolder:n=>`data-testid Expand folder ${n}`,dashboardItem:n=>`${t.Search.dashboardItems} ${n}`,dashboardCard:n=>`data-testid Search card ${n}`,folderHeader:n=>`data-testid Folder header ${n}`,folderContent:n=>`data-testid Folder content ${n}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:n=>`Call to action button ${n}`,buttonV2:n=>`data-testid Call to action button ${n}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:n=>`data-testid suggestion-${n}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:n=>`data-testid dashboard-row-title-${n}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"},Annotations:{annotationsTypeInput:"annotations-type-input",annotationsChoosePanelInput:"choose-panels-input"}}},68183:(Y,T,e)=>{"use strict";e.d(T,{wl:()=>c});var t=e(42879);const c={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"data-testid Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:s=>`Data source list item ${s}`},EditDataSource:{url:s=>`/datasources/edit/${s}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:s=>`Data source plugin item ${s}`,dataSourcePluginsV2:s=>`Add new data source ${s}`},ConfirmModal:{delete:"data-testid Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:s=>`data-testid ${s}`,addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:s=>`/d/${s}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:s=>`data-testid Dashboard template variables submenu Label ${s}`,submenuItemValueDropDownValueLinkTexts:s=>`data-testid Dashboard template variables Variable Value DropDown value link text ${s}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:s=>`data-testid Dashboard template variables Variable Value DropDown option text ${s}`,Annotations:{annotationsWrapper:"data-testid annotation-wrapper",annotationLabel:s=>`data-testid Dashboard annotations submenu Label ${s}`,annotationToggle:s=>`data-testid Dashboard annotations submenu Toggle ${s}`}},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:s=>`Dashboard settings section item ${s}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:t.z.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:t.z.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"},NewAnnotation:{panelFilterSelect:"data-testid annotations-panel-filter",showInLabel:"show-in-label",previewInDashboard:"data-testid annotations-preview"}},Variables:{List:{addVariableCTA:t.z.CallToActionCard.button("Add variable"),addVariableCTAV2:t.z.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:s=>`Variable editor Table Name field ${s}`,tableRowDefinitionFields:s=>`Variable editor Table Definition field ${s}`,tableRowArrowUpButtons:s=>`Variable editor Table ArrowUp button ${s}`,tableRowArrowDownButtons:s=>`Variable editor Table ArrowDown button ${s}`,tableRowDuplicateButtons:s=>`Variable editor Table Duplicate button ${s}`,tableRowRemoveButtons:s=>`Variable editor Table Remove button ${s}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:t.z.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}},Annotations:{marker:"data-testid annotation-marker"}},Dashboards:{url:"/dashboards",dashboards:s=>`Dashboard search item ${s}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard or panel",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"}},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:s=>`/d-solo/${s}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"Delete playlist item"},BrowseDashbards:{table:{row:s=>`data-testid ${s} row`,checkbox:s=>`data-testid ${s} checkbox`}},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button"}},UserListPage:{tabs:{allUsers:"data-testid all-users-tab",orgUsers:"data-testid org-users-tab",publicDashboardsUsers:"data-testid public-dashboards-users-tab",users:"data-testid users-tab"},org:{url:"/org/users"},admin:{url:"/admin/users"},publicDashboards:{container:"data-testid public-dashboards-users-list"},UserListAdminPage:{container:"data-testid user-list-admin-page"},UsersListPage:{container:"data-testid users-list-page"},UsersListPublicDashboardsPage:{container:"data-testid users-list-public-dashboards-page",DashboardsListModal:{listItem:s=>`data-testid dashboards-list-item-${s}`}}}},components:t.z}},40538:(Y,T,e)=>{"use strict";e.d(T,{As:()=>w,B5:()=>t,Bd:()=>re,FI:()=>v,IG:()=>O,Jp:()=>m,KC:()=>g,LB:()=>d,M8:()=>V,Q8:()=>s,QH:()=>L,Ss:()=>_,UV:()=>r,Y4:()=>Q,ap:()=>U,b8:()=>k,bQ:()=>a,eK:()=>n,f3:()=>F,h2:()=>H,i3:()=>D,iT:()=>oe,jG:()=>I,jK:()=>x,kW:()=>f,kv:()=>u,l8:()=>l,o0:()=>E,pR:()=>p,pc:()=>S,pu:()=>h,q1:()=>i,v7:()=>j,wN:()=>C,wf:()=>y,wm:()=>b,xy:()=>c,yK:()=>o});var t=(G=>(G.Linear="linear",G.Quad="quad",G))(t||{}),n=(G=>(G.Clamped="clamped",G.Mod="mod",G))(n||{}),c=(G=>(G.Field="field",G.Fixed="fixed",G.Template="template",G))(c||{}),s=(G=>(G.Field="field",G.Fixed="fixed",G.Mapping="mapping",G))(s||{}),i=(G=>(G.Auto="auto",G.Coords="coords",G.Geohash="geohash",G.Lookup="lookup",G))(i||{}),f=(G=>(G.Count="count",G.Size="size",G))(f||{}),u=(G=>(G.auto="auto",G.ge="ge",G.le="le",G.unknown="unknown",G))(u||{}),r=(G=>(G.Ascending="Ascending",G.Descending="Descending",G))(r||{}),d=(G=>(G.Auto="auto",G.Bottom="bottom",G.Hidden="hidden",G.Left="left",G.Right="right",G.Top="top",G))(d||{}),o=(G=>(G.Series="series",G.Text="text",G))(o||{}),m=(G=>(G.Always="always",G.Auto="auto",G.Never="never",G))(m||{}),l=(G=>(G.Bars="bars",G.Line="line",G.Points="points",G))(l||{}),p=(G=>(G.Constant="constant",G.NegativeY="negative-Y",G))(p||{}),g=(G=>(G.Linear="linear",G.Smooth="smooth",G.StepAfter="stepAfter",G.StepBefore="stepBefore",G))(g||{}),y=(G=>(G.Linear="linear",G.Log="log",G.Ordinal="ordinal",G.Symlog="symlog",G))(y||{}),v=(G=>(G.Hue="hue",G.None="none",G.Opacity="opacity",G.Scheme="scheme",G))(v||{}),E=(G=>(G.None="none",G.Normal="normal",G.Percent="percent",G))(E||{}),h=(G=>(G[G.After=1]="After",G[G.Before=-1]="Before",G[G.Center=0]="Center",G))(h||{}),C=(G=>(G[G.Horizontal=0]="Horizontal",G[G.Vertical=1]="Vertical",G))(C||{}),a=(G=>(G[G.Down=-1]="Down",G[G.Left=-1]="Left",G[G.Right=1]="Right",G[G.Up=1]="Up",G))(a||{});const P={dash:[]};var D=(G=>(G.Area="area",G.Dashed="dashed",G.DashedAndArea="dashed+area",G.Line="line",G.LineAndArea="line+area",G.Off="off",G.Series="series",G))(D||{}),x=(G=>(G.Hidden="hidden",G.List="list",G.Table="table",G))(x||{});const M={calcs:[]};var b=(G=>(G.Auto="auto",G.Horizontal="horizontal",G.Vertical="vertical",G))(b||{});const R={timezone:[]};var S=(G=>(G.Background="background",G.BackgroundSolid="background_solid",G.None="none",G.Value="value",G))(S||{}),O=(G=>(G.Area="area",G.Line="line",G.None="none",G))(O||{}),U=(G=>(G.Auto="auto",G.Center="center",G))(U||{}),I=(G=>(G.Auto="auto",G.Name="name",G.None="none",G.Value="value",G.ValueAndName="value_and_name",G))(I||{}),F=(G=>(G.Multi="multi",G.None="none",G.Single="single",G))(F||{}),w=(G=>(G.Ascending="asc",G.Descending="desc",G.None="none",G))(w||{});const K={calcs:[]};var L=(G=>(G.Basic="basic",G.Gradient="gradient",G.Lcd="lcd",G))(L||{}),V=(G=>(G.Color="color",G.Hidden="hidden",G.Text="text",G))(V||{}),H=(G=>(G.Auto="auto",G.BasicGauge="basic",G.ColorBackground="color-background",G.ColorBackgroundSolid="color-background-solid",G.ColorText="color-text",G.Gauge="gauge",G.GradientGauge="gradient-gauge",G.Image="image",G.JSONView="json-view",G.LcdGauge="lcd-gauge",G.Sparkline="sparkline",G))(H||{}),j=(G=>(G.Basic="basic",G.Gradient="gradient",G))(j||{});const A={fields:[],reducer:[]};var _=(G=>(G.Lg="lg",G.Md="md",G.Sm="sm",G))(_||{}),k=(G=>(G.CSV="csv",G.Date="date",G.Distributed="distributed",G.DoubleQuote="doublequote",G.Glob="glob",G.HTML="html",G.JSON="json",G.Lucene="lucene",G.PercentEncode="percentencode",G.Pipe="pipe",G.QueryParam="queryparam",G.Raw="raw",G.Regex="regex",G.SQLString="sqlstring",G.SingleQuote="singlequote",G.Text="text",G.UriEncode="uriencode",G))(k||{}),Q=(G=>(G.exact="exact",G.none="none",G.numbers="numbers",G.signature="signature",G))(Q||{}),re=(G=>(G.EQ="eq",G.GT="gt",G.GTE="gte",G.LT="lt",G.LTE="lte",G.NEQ="neq",G))(re||{});const Z={align:"auto",inspect:!1},oe="browser"},85596:(Y,T,e)=>{"use strict";e.d(T,{AU:()=>D,G_:()=>s,Gu:()=>d,H3:()=>p,Hi:()=>y,NU:()=>C,Ql:()=>M,SJ:()=>x,Vb:()=>a,ZM:()=>P,bn:()=>c,gW:()=>i,n5:()=>g});const t={tags:[]},n={exclude:!1,ids:[]},c={list:[]},s={enable:!0,hide:!1},i={id:"00000000-0000-0000-0000-000000000000",multi:!1,options:[],skipUrlSync:!1};var f=(b=>(b[b.never=0]="never",b[b.onDashboardLoad=1]="onDashboardLoad",b[b.onTimeRangeChanged=2]="onTimeRangeChanged",b))(f||{}),u=(b=>(b[b.dontHide=0]="dontHide",b[b.hideLabel=1]="hideLabel",b[b.hideVariable=2]="hideVariable",b))(u||{}),r=(b=>(b[b.alphabeticalAsc=1]="alphabeticalAsc",b[b.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",b[b.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",b[b.alphabeticalDesc=2]="alphabeticalDesc",b[b.disabled=0]="disabled",b[b.numericalAsc=3]="numericalAsc",b[b.numericalDesc=4]="numericalDesc",b))(r||{}),d=(b=>(b.Done="Done",b.Error="Error",b.Loading="Loading",b.NotStarted="NotStarted",b.Streaming="Streaming",b))(d||{});const o={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var m=(b=>(b.ContinuousBlPu="continuous-BlPu",b.ContinuousBlYlRd="continuous-BlYlRd",b.ContinuousBlues="continuous-blues",b.ContinuousGrYlRd="continuous-GrYlRd",b.ContinuousGreens="continuous-greens",b.ContinuousPurples="continuous-purples",b.ContinuousRdYlGr="continuous-RdYlGr",b.ContinuousReds="continuous-reds",b.ContinuousYlBl="continuous-YlBl",b.ContinuousYlRd="continuous-YlRd",b.Fixed="fixed",b.PaletteClassic="palette-classic",b.PaletteClassicByName="palette-classic-by-name",b.Shades="shades",b.Thresholds="thresholds",b))(m||{});const l={h:9,w:12,x:0,y:0};var p=(b=>(b.Absolute="absolute",b.Percentage="percentage",b))(p||{});const g={steps:[]};var y=(b=>(b.RangeToText="range",b.RegexToText="regex",b.SpecialValue="special",b.ValueToText="value",b))(y||{}),v=(b=>(b.Empty="empty",b.False="false",b.NaN="nan",b.Null="null",b.NullAndNan="null+nan",b.True="true",b))(v||{}),E=(b=>(b[b.Crosshair=1]="Crosshair",b[b.Off=0]="Off",b[b.Tooltip=2]="Tooltip",b))(E||{});const h=0,C={links:[],repeatDirection:"h",tags:[],targets:[],transformations:[],transparent:!1},a={overrides:[]},P={id:""},D={links:[],mappings:[]},x={collapsed:!1,panels:[]},M={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],schemaVersion:36,style:"dark",tags:[],timezone:"browser"}},30670:(Y,T,e)=>{"use strict";e.d(T,{Ql:()=>c});var t=e(85596),n=(p=>(p[p.dontHide=0]="dontHide",p[p.hideLabel=1]="hideLabel",p[p.hideVariable=2]="hideVariable",p))(n||{});const c=t.Ql,s={...t.gW,description:null,hide:0,datasource:null},i=t.NU,f=t.SJ,u=t.AU,r=t.Vb,d=t.ZM,o=t.G_,m=t.bn,l=t.n5},37219:(Y,T,e)=>{"use strict";e.d(T,{M:()=>i,Z:()=>c});var t=e(82897),n=e.n(t);class c{constructor(u){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",u){if(u.columns)for(const r of u.columns)this.addColumn(r);if(u.rows)for(const r of u.rows)this.addRow(r)}}sort(u){u.col===null||u.col===void 0||this.columns.length<=u.col||(this.rows.sort((r,d)=>(r=r[u.col],d=d[u.col],+(r==null)-+(d==null)||+(r>d)||-(r<d))),u.desc&&this.rows.reverse(),this.columns[u.col].sort=!0,this.columns[u.col].desc=u.desc)}addColumn(u){this.columnMap[u.text]||(this.columns.push(u),this.columnMap[u.text]=u)}addRow(u){this.rows.push(u)}}function s(f,u,r){let d=!1;for(let o=0;o<f.length;o++)if(u[o]!==void 0&&r[o]!==void 0){if(u[o]!==r[o])return!1}else(u[o]===void 0||r[o]===void 0)&&(d=!0);return d}function i(f,...u){const r=f||new c;if(arguments.length===1)return r;if(arguments.length===2)return r.columns=u[0].hasOwnProperty("columns")?[...u[0].columns]:[],r.rows=u[0].hasOwnProperty("rows")?[...u[0].rows]:[],r;const d=u.filter(v=>!!v.columns),o={},m=d.slice().reduce((v,E)=>(E.columns.forEach(h=>{const{text:C}=h;o[C]===void 0&&(o[C]=v.length,v.push(h))}),v),[]),l=d.map(v=>v.columns.map(E=>o[E.text])),p=d.reduce((v,E,h)=>{const C=l[h];return E.rows.forEach(a=>{const P=[];C.forEach((D,x)=>{P[D]=a[x]}),v.push(P)}),v},[]),g={},y=p.reduce((v,E,h)=>{if(!g[h]){let C=h+1;for(;C<p.length;){const a=(0,t.findIndex)(p,P=>s(m,E,P),C);if(a>-1){const P=p[a];for(let D=0;D<m.length;D++)E[D]===void 0&&P[D]!==void 0&&(E[D]=P[D]);g[a]=P,C=a+1}else break}v.push(E)}return v},[]);return r.columns=m,r.rows=y,r}},70431:(Y,T,e)=>{"use strict";e.d(T,{e:()=>n});var t=e(62992);const n=(0,t.PH)("core/cleanUpState")},659:(Y,T,e)=>{"use strict";e.d(T,{$l:()=>t.$l,H7:()=>n.H7,RL:()=>n.RL,ad:()=>t.ad});var t=e(98864),n=e(14393)},18271:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>c,h:()=>n});var t=e(50444);const n=new t.F,c=n},73546:(Y,T,e)=>{"use strict";e.d(T,{P:()=>b});var t=e(82897),n=e(66111),c=e(31403),s=e(1108),i=e(29930),f=e(94270),u=e(52081),r=e(8581),d=e(50796),o=e(94080),m=e(28038),l=e(73757),p=(w=>(w.None="None",w.Team="Team",w.User="User",w.BuiltInRole="builtInRole",w))(p||{});const g=({title:w="Add Permission For",permissions:K,assignments:L,onAdd:V,onCancel:H})=>{const[j,A]=(0,n.useState)(p.None),[_,k]=(0,n.useState)(0),[Q,re]=(0,n.useState)(0),[Z,oe]=(0,n.useState)(""),[G,le]=(0,n.useState)(""),ge=(0,n.useMemo)(()=>{const ue=[];return L.users&&ue.push({value:p.User,label:"User"}),L.teams&&ue.push({value:p.Team,label:"Team"}),L.builtInRoles&&ue.push({value:p.BuiltInRole,label:"Role"}),ue},[L]);(0,n.useEffect)(()=>{K.length>0&&le(K[0])},[K]);const ne=()=>j===p.Team&&_>0||j===p.User&&Q>0||p.BuiltInRole&&l.B5.hasOwnProperty(Z);return n.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},n.createElement(d.P,{onClick:H}),n.createElement("h5",null,w),n.createElement(f.l,{name:"addPermission",maxWidth:"none",onSubmit:()=>V({userId:Q,teamId:_,builtInRole:Z,permission:G,target:j})},()=>n.createElement(u.Lh,null,n.createElement(r.Ph,{"aria-label":"Role to add new permission to",value:j,options:ge,onChange:ue=>A(ue.value),disabled:ge.length===0}),j===p.User&&n.createElement(m.f,{onSelected:ue=>re(ue.value||0),className:"width-20"}),j===p.Team&&n.createElement(o.c,{onSelected:ue=>k(ue.value?.id||0),className:"width-20"}),j===p.BuiltInRole&&n.createElement(r.Ph,{"aria-label":"Built-in role picker",options:Object.values(l.B5).map(ue=>({value:ue,label:ue})),onChange:ue=>oe(ue.value||""),width:40}),n.createElement(r.Ph,{"aria-label":"Permission Level",width:25,value:K.find(ue=>ue===G),options:K.map(ue=>({label:ue,value:ue})),onChange:ue=>le(ue.value||"")}),n.createElement(c.zx,{type:"submit",disabled:!ne()},"Save"))))};var y=e(61860),v=e(39904);const E=({item:w,permissionLevels:K,canSet:L,onRemove:V,onChange:H})=>n.createElement("tr",null,n.createElement("td",{style:{width:"1%"}},h(w)),n.createElement("td",{style:{width:"90%"}},a(w)),n.createElement("td",null,w.isInherited&&n.createElement("em",{className:"muted no-wrap"},"Inherited from folder")),n.createElement("td",null,n.createElement("div",{className:"gf-form"},n.createElement(r.Ph,{className:"width-20",disabled:!L||!w.isManaged,onChange:j=>H(w,j.value),value:K.find(j=>j===w.permission),options:K.map(j=>({value:j,label:j}))}))),n.createElement("td",null,n.createElement(y.u,{content:P(w)},n.createElement(v.J,{name:"info-circle"}))),n.createElement("td",null,w.isManaged?n.createElement(c.zx,{size:"sm",icon:"times",variant:"destructive",disabled:!L,onClick:()=>V(w),"aria-label":`Remove permission for ${C(w)}`}):n.createElement(y.u,{content:w.isInherited?"Inherited Permission":"Provisioned Permission"},n.createElement(c.zx,{size:"sm",icon:"lock"})))),h=w=>w.teamId?n.createElement("img",{className:"filter-table__avatar",src:w.teamAvatarUrl,alt:`Avatar for team ${w.teamId}`}):w.userId?n.createElement("img",{className:"filter-table__avatar",src:w.userAvatarUrl,alt:`Avatar for user ${w.userId}`}):n.createElement(v.J,{size:"xl",name:"shield"}),C=w=>w.userId?w.userLogin:w.teamId?w.team:w.builtInRole,a=w=>w.userId?n.createElement("span",{key:"name"},w.userLogin," "):w.teamId?n.createElement("span",{key:"name"},w.team," "):w.builtInRole?n.createElement("span",{key:"name"},w.builtInRole," "):n.createElement("span",{key:"name"}),P=w=>`Actions: ${[...new Set(w.actions)].sort().join(" ")}`,D=({title:w,items:K,compareKey:L,permissionLevels:V,canSet:H,onRemove:j,onChange:A})=>{const _=(0,n.useMemo)(()=>{const k={};for(let Q of K){const re=Q[L];if(!k[re]){k[re]=Q;continue}Q.actions.length>k[re].actions.length&&(k[re]=Q)}return Object.keys(k).map(Q=>k[Q])},[K,L]);return _.length===0?null:n.createElement("div",null,n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,w),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,"Permission"),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",{style:{width:"1%"}}))),n.createElement("tbody",null,_.map((k,Q)=>n.createElement(E,{item:k,onRemove:j,onChange:A,canSet:H,key:`${Q}-${k.userId}`,permissionLevels:V})))))},x="",M={permissions:[],assignments:{teams:!1,users:!1,builtInRoles:!1}},b=({title:w="Permissions",buttonLabel:K="Add a permission",emptyLabel:L="There are no permissions",resource:V,resourceId:H,canSetPermissions:j,addPermissionTitle:A})=>{const[_,k]=(0,n.useState)(!1),[Q,re]=(0,n.useState)([]),[Z,oe]=(0,n.useState)(M),G=(0,n.useCallback)(()=>S(V,H).then(q=>re(q)),[V,H]);(0,n.useEffect)(()=>{R(V).then(q=>(oe(q),G()))},[V,H,G]);const le=q=>{let se=null;q.target===p.User?se=O(V,H,q.userId,q.permission):q.target===p.Team?se=U(V,H,q.teamId,q.permission):q.target===p.BuiltInRole&&(se=I(V,H,q.builtInRole,q.permission)),se!==null&&se.then(G)},ge=q=>{let se=null;q.userId?se=O(V,H,q.userId,x):q.teamId?se=U(V,H,q.teamId,x):q.builtInRole&&(se=I(V,H,q.builtInRole,x)),se!==null&&se.then(G)},ne=(q,se)=>{q.permission!==se&&(q.userId?le({permission:se,userId:q.userId,target:p.User}):q.teamId?le({permission:se,teamId:q.teamId,target:p.Team}):q.builtInRole&&le({permission:se,builtInRole:q.builtInRole,target:p.BuiltInRole}))},ue=(0,n.useMemo)(()=>(0,t.sortBy)(Q.filter(q=>q.teamId),["team","isManaged"]),[Q]),te=(0,n.useMemo)(()=>(0,t.sortBy)(Q.filter(q=>q.userId),["userLogin","isManaged"]),[Q]),me=(0,n.useMemo)(()=>(0,t.sortBy)(Q.filter(q=>q.builtInRole),["builtInRole","isManaged"]),[Q]);return n.createElement("div",null,n.createElement("div",{className:"page-action-bar"},n.createElement("h3",{className:"page-sub-heading"},w),n.createElement("div",{className:"page-action-bar__spacer"}),j&&n.createElement(c.zx,{variant:"primary",key:"add-permission",onClick:()=>k(!0)},K)),n.createElement("div",null,n.createElement(s.s,{in:_},n.createElement(g,{title:A,onAdd:le,permissions:Z.permissions,assignments:Z.assignments,onCancel:()=>k(!1)})),Q.length===0&&n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",null,L)))),n.createElement(D,{title:"Role",items:me,compareKey:"builtInRole",permissionLevels:Z.permissions,onChange:ne,onRemove:ge,canSet:j}),n.createElement(D,{title:"User",items:te,compareKey:"userLogin",permissionLevels:Z.permissions,onChange:ne,onRemove:ge,canSet:j}),n.createElement(D,{title:"Team",items:ue,compareKey:"team",permissionLevels:Z.permissions,onChange:ne,onRemove:ge,canSet:j})))},R=async w=>{try{return await(0,i.i)().get(`/api/access-control/${w}/description`)}catch(K){return console.error("failed to load resource description: ",K),M}},S=(w,K)=>(0,i.i)().get(`/api/access-control/${w}/${K}`),O=(w,K,L,V)=>F(w,K,"users",L,V),U=(w,K,L,V)=>F(w,K,"teams",L,V),I=(w,K,L,V)=>F(w,K,"builtInRoles",L,V),F=(w,K,L,V,H)=>(0,i.i)().post(`/api/access-control/${w}/${K}/${L}/${V}`,{permission:H})},1108:(Y,T,e)=>{"use strict";e.d(T,{s:()=>f});var t=e(66111),n=e(66525);const c="200px",s=200,i={transition:`max-height ${s}ms ease-in-out`,overflow:"hidden"},f=({children:u,in:r,maxHeight:d=c,style:o=i})=>{const m={exited:{maxHeight:0},entering:{maxHeight:d},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return t.createElement(n.ZP,{in:r,timeout:s},l=>t.createElement("div",{style:{...o,...m[l]}},u))}},95379:(Y,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(66111),n=e(34177);const c=t.memo(({actions:s})=>{const{chrome:i}=(0,n.p)();return(0,t.useLayoutEffect)(()=>{i.update({actions:s})}),null});c.displayName="TopNavUpdate"},99740:(Y,T,e)=>{"use strict";e.d(T,{L:()=>c,Y:()=>n});var t=e(35287);function n(s){switch(s){case"home":return(0,t.t)("nav.home.title","Home");case"new":return(0,t.t)("nav.new.title","New");case"create":return(0,t.t)("nav.create.title","Create");case"create-dashboard":return(0,t.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,t.t)("nav.create-folder.title","Folder");case"import":return(0,t.t)("nav.create-import.title","Import dashboard");case"alert":return(0,t.t)("nav.create-alert.title","Create alert rule");case"starred":return(0,t.t)("nav.starred.title","Starred");case"starred-empty":return(0,t.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/playlists":return(0,t.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.title","Library panels");case"dashboards/public":return(0,t.t)("nav.public.title","Public dashboards");case"dashboards/new":return(0,t.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,t.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,t.t)("nav.create-import.title","Import dashboard");case"scenes":return(0,t.t)("nav.scenes.title","Scenes");case"explore":return(0,t.t)("nav.explore.title","Explore");case"alerting":return(0,t.t)("nav.alerting.title","Alerting");case"alerting-legacy":return(0,t.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alert-home":return(0,t.t)("nav.alerting-home.title","Home");case"alert-list":return(0,t.t)("nav.alerting-list.title","Alert rules");case"receivers":return(0,t.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,t.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,t.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,t.t)("nav.alerting-silences.title","Silences");case"groups":return(0,t.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,t.t)("nav.alerting-admin.title","Admin");case"cfg":return(0,t.t)("nav.config.title","Administration");case"datasources":return(0,t.t)("nav.datasources.title","Data sources");case"correlations":return(0,t.t)("nav.correlations.title","Correlations");case"users":return(0,t.t)("nav.users.title","Users");case"teams":return(0,t.t)("nav.teams.title","Teams");case"plugins":return(0,t.t)("nav.plugins.title","Plugins");case"org-settings":return(0,t.t)("nav.org-settings.title","Default preferences");case"apikeys":return(0,t.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,t.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,t.t)("nav.admin.title","Server admin");case"support-bundles":return(0,t.t)("nav.support-bundles.title","Support bundles");case"global-users":return(0,t.t)("nav.global-users.title","Users");case"global-orgs":return(0,t.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,t.t)("nav.server-settings.title","Settings");case"storage":return(0,t.t)("nav.storage.title","Storage");case"upgrading":return(0,t.t)("nav.upgrading.title","Stats and license");case"monitoring":return(0,t.t)("nav.monitoring.title","Observability");case"apps":return(0,t.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.title","Alerts & IRM");case"help":return(0,t.t)("nav.help.title","Help");case"profile/settings":return(0,t.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,t.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,t.t)("nav.profile/password.title","Change password");case"sign-out":return(0,t.t)("nav.sign-out.title","Sign out");case"search":return(0,t.t)("nav.search-dashboards.title","Search dashboards");default:return}}function c(s){switch(s){case"dashboards":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"manage-folder":return(0,t.t)("nav.manage-folder.subtitle","Manage folder dashboards and permissions");case"dashboards/playlists":return(0,t.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,t.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alert-list":return(0,t.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,t.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,t.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,t.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,t.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,t.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,t.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,t.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,t.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,t.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,t.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,t.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,t.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,t.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,t.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,t.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,t.t)("nav.storage.subtitle","Manage file storage");case"support-bundles":return(0,t.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return(0,t.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses");case"apps":return(0,t.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,t.t)("nav.monitoring.subtitle","Monitoring and infrastructure apps");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");default:return}}},9956:(Y,T,e)=>{"use strict";e.d(T,{M:()=>s});var t=e(9892),n=e(66111),c=e(72648);function s({className:f,leftActionsSeparator:u}){const r=(0,c.wW)(i);return u?n.createElement("div",{className:(0,t.cx)(f,r.leftActionsSeparator)}):n.createElement("div",{className:(0,t.cx)(f,r.line)})}const i=f=>({leftActionsSeparator:(0,t.css)({display:"flex",flexGrow:1}),line:(0,t.css)({width:1,backgroundColor:f.colors.border.medium,height:24})})},13211:(Y,T,e)=>{"use strict";e.d(T,{$:()=>t});const t=40},36578:(Y,T,e)=>{"use strict";e.d(T,{c:()=>o});var t=e(9892),n=e(66111),c=e(5680),s=e(72648),i=e(85419);const f=({className:m,logo:l})=>n.createElement("img",{className:m,src:`${l||"public/img/grafana_icon.svg"}`,alt:"Grafana"}),u=({className:m,children:l})=>{const p=(0,s.l4)(),g=t.css`
    &:before {
      content: '';
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background: url(public/img/g8_login_${p.isDark?"dark":"light"}.svg);
      background-position: top center;
      background-size: auto;
      background-repeat: no-repeat;

      opacity: 0;
      transition: opacity 3s ease-in-out;

      @media ${i.mediaUp(p.v1.breakpoints.md)} {
        background-position: center;
        background-size: cover;
      }
    }
  `;return n.createElement("div",{className:(0,t.cx)(g,m)},l)},r=({className:m})=>n.createElement("img",{className:m,src:"public/img/grafana_icon.svg",alt:"Grafana"}),d=()=>{const m=(0,s.l4)();return t.css`
    background: ${c.alpha(m.colors.background.primary,.7)};
    background-size: cover;
  `};class o{}o.LoginLogo=f,o.LoginBackground=u,o.MenuLogo=r,o.LoginBoxBackground=d,o.AppTitle="Grafana",o.LoginTitle="Welcome to Grafana",o.GetLoginSubTitle=()=>null},67345:(Y,T,e)=>{"use strict";e.d(T,{t:()=>t});function t(n,c,s){const i=[];let f=!1;function u(r){const d=new URLSearchParams(r.url?.split("?")[1]);let o=`${r.url?.split("?")[0]}`;d.has("editview")&&(o+=`?editview=${d.get("editview")}`),!f&&!r.hideFromBreadcrumbs&&(s&&o===s.url?(i.unshift({text:s.text,href:r.url??""}),f=!0):i.unshift({text:r.text,href:r.url??""})),r.parentItem&&u(r.parentItem)}if(c)if(c.url&&c.children){const r=c.children.find(d=>d.active);r&&(u(r),r.parentItem!==c&&u(c))}else u(c);return u(n),i}},52822:(Y,T,e)=>{"use strict";e.d(T,{x:()=>i});var t=e(9892),n=e(66111),c=e(72648),s=e(39904);const i=n.forwardRef(({icon:u,children:r,onClick:d,...o},m)=>{const l=(0,c.wW)(f);return n.createElement("button",{...o,className:l.action,onClick:d},n.createElement(s.J,{name:u,size:"xl"}),r)});i.displayName="CardButton";const f=u=>({action:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      cursor: pointer;
      background: ${u.colors.background.secondary};
      border-radius: ${u.shape.borderRadius(1)};
      color: ${u.colors.text.primary};
      border: unset;
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;

      &:hover {
        background: ${u.colors.emphasize(u.colors.background.secondary)};
      }
    `})},50796:(Y,T,e)=>{"use strict";e.d(T,{P:()=>i});var t=e(9892),n=e(66111),c=e(72648),s=e(8180);const i=({onClick:u,"aria-label":r,style:d})=>{const o=(0,c.wW)(f);return n.createElement(s.h,{"aria-label":r??"Close",className:o,name:"times",onClick:u,style:d})},f=u=>t.css`
    position: absolute;
    right: ${u.spacing(.5)};
    top: ${u.spacing(1)};
  `},62911:(Y,T,e)=>{"use strict";e.d(T,{j:()=>c});var t=e(66111),n=e(31403);function c(s){const{hrefSuffix:i}=s,f="Learn more in the Grafana docs";return t.createElement(n.Qj,{"aria-label":f,icon:"external-link-alt",fill:"text",href:`https://grafana.com/docs/grafana/next/datasources/${i}`,variant:"secondary",size:"md",target:"_blank",tooltip:f,tooltipPlacement:"top"})}},69142:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(9892),n=e(66111),c=e(68183),s=e(39904),i=e(31403),f=e(97097);const u=t.css`
  text-align: center;
`,r=t.css`
  max-width: 700px;
  margin: 0 auto;
`,o=({title:m,buttonIcon:l,buttonLink:p,buttonTitle:g,buttonDisabled:y,onClick:v,proTip:E,proTipLink:h,proTipLinkTitle:C,proTipTarget:a,infoBox:P,infoBoxTitle:D})=>{const x=()=>n.createElement(n.Fragment,null,E?n.createElement("span",{key:"proTipFooter"},n.createElement(s.J,{name:"rocket"}),n.createElement(n.Fragment,null," ProTip: ",E," "),h&&n.createElement("a",{href:h,target:a,className:"text-link"},C)):"",P?n.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${r}`},D&&n.createElement("h5",null,D),n.createElement("div",{dangerouslySetInnerHTML:P})):""),M=x()?"":t.css`
        margin-bottom: 20px;
      `,b=p?i.Qj:i.zx,R=n.createElement(b,{size:"lg",onClick:v,href:p,icon:l,className:M,"data-testid":c.wl.components.CallToActionCard.buttonV2(g),disabled:y},g);return n.createElement(f._,{className:u,message:m,footer:x(),callToActionElement:R})}},25337:(Y,T,e)=>{"use strict";e.d(T,{$_:()=>d,dP:()=>i});var t=e(66111),n=e(35645),c=e(39904),s=e(35287);let i=()=>[{target:"_blank",id:"documentation",text:(0,s.t)("nav.help/documentation","BeyondnetGlobal"),url:"http://www.beyondnetglobal.com"},{target:"_blank",id:"community",text:(0,s.t)("nav.help/community","Support"),icon:"comments-alt",url:"https://support.beyondnetglobal.com"}];function f(m){return{hasReleaseNotes:!0,isBeta:m.includes("-beta")}}function u(){const{buildInfo:m,licenseInfo:l}=n.v,p=[],g=l.stateInfo?` (${l.stateInfo})`:"";if(p.push(),m.hideVersion)return p;const{hasReleaseNotes:y}=f(m.version);return p.push(),m.hasUpdate&&p.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),p}function r(m){i=m}const d=t.memo(({customLinks:m})=>{const l=(m||i()).concat(u());return t.createElement("footer",{className:"footer"},t.createElement("div",{className:"text-center"},t.createElement("ul",null,l.map(p=>t.createElement("li",{key:p.text},t.createElement(o,{item:p}))))))});d.displayName="Footer";function o({item:m}){const l=m.url?t.createElement("a",{href:m.url,target:m.target,rel:"noopener noreferrer",id:m.id},m.text):m.text;return t.createElement(t.Fragment,null,m.icon&&t.createElement(c.J,{name:m.icon})," ",l)}},16534:(Y,T,e)=>{"use strict";e.d(T,{G:()=>o});var t=e(66111),n=e(68183),c=e(94270),s=e(24799),i=e(52081),f=e(31403),u=e(61860),r=e(5080),d=e(20787);const o=({onSubmit:m,onSkip:l})=>{const p=g=>{m(g.newPassword)};return t.createElement(c.l,{onSubmit:p},({errors:g,register:y,getValues:v})=>t.createElement(t.Fragment,null,t.createElement(s.g,{label:"New password",invalid:!!g.newPassword,error:g?.newPassword?.message},t.createElement(d.Z,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...y("newPassword",{required:"New Password is required"})})),t.createElement(s.g,{label:"Confirm new password",invalid:!!g.confirmNew,error:g?.confirmNew?.message},t.createElement(d.Z,{id:"confirm-new-password",autoComplete:"new-password",...y("confirmNew",{required:"Confirmed Password is required",validate:E=>E===v().newPassword||"Passwords must match!"})})),t.createElement(i.wc,null,t.createElement(f.zx,{type:"submit",className:r.F},"Submit"),l&&t.createElement(u.u,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom"},t.createElement(f.zx,{fill:"text",onClick:l,type:"button","aria-label":n.wl.pages.Login.skip},"Skip")))))}},93022:(Y,T,e)=>{"use strict";e.d(T,{X:()=>u});var t=e(9892),n=e(66111),c=e(72648),s=e(39904),i=e(46967),f=e(57227);const u=({name:d,onChange:o,verifyLayerNameUniqueness:m,overrideStyles:l})=>{const p=(0,c.wW)(r),[g,y]=(0,n.useState)(!1),[v,E]=(0,n.useState)(null),h=M=>{y(!0)},C=M=>{if(y(!1),v){E(null);return}d!==M&&o(M)},a=M=>{const b=M.currentTarget.value.trim();if(b.length===0){E("An empty layer name is not allowed");return}if(m&&!m(b)&&b!==d){E("Layer name already exists");return}v&&E(null)},P=M=>{C(M.currentTarget.value.trim())},D=M=>{M.key==="Enter"&&C(M.currentTarget.value)},x=M=>{M.target.select()};return n.createElement(n.Fragment,null,n.createElement("div",{className:p.wrapper},!g&&n.createElement("button",{className:p.layerNameWrapper,title:"Edit layer name",onClick:h,"data-testid":"layer-name-div"},n.createElement("span",{className:l?"":p.layerName},d),n.createElement(s.J,{name:"pen",className:p.layerEditIcon,size:"sm"})),g&&n.createElement(n.Fragment,null,n.createElement(i.I,{type:"text",defaultValue:d,onBlur:P,autoFocus:!0,onKeyDown:D,onFocus:x,invalid:v!==null,onChange:a,className:p.layerNameInput,"data-testid":"layer-name-input"}),v&&n.createElement(f.S,{horizontal:!0},v))))},r=d=>({wrapper:t.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${d.spacing(.5)};
    `,layerNameWrapper:t.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${d.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${d.spacing(.5)};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${d.colors.action.hover};
        border: 1px dashed ${d.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${d.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,layerName:t.css`
      font-weight: ${d.typography.fontWeightMedium};
      color: ${d.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${d.spacing(.5)};
    `,layerEditIcon:(0,t.cx)(t.css`
        margin-left: ${d.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),layerNameInput:t.css`
      max-width: 300px;
      margin: -4px 0;
    `})},59796:(Y,T,e)=>{"use strict";e.d(T,{G:()=>c});var t=e(66111),n=e(58379);const c=s=>{const{children:i,storageKey:f,defaultValue:u}=s,[r,d]=(0,t.useState)({value:n.Z.getObject(s.storageKey,s.defaultValue)});(0,t.useEffect)(()=>{const l=p=>{p.key===f&&d({value:n.Z.getObject(s.storageKey,s.defaultValue)})};return window.addEventListener("storage",l),()=>{window.removeEventListener("storage",l)}});const o=l=>{try{n.Z.setObject(f,l)}catch(p){console.error(p)}d({value:l})},m=()=>{try{n.Z.delete(f)}catch(l){console.log(l)}d({value:u})};return t.createElement(t.Fragment,null,i(r.value,o,m))}},86824:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>r});var t=e(66111),n=e(4063),c=e(54899),s=e(18271),i=e(47694);const f=()=>!!i.ZP.oauth&&Object.keys(i.ZP.oauth).length>0;class u extends t.PureComponent{constructor(o){super(o),this.result={},this.changePassword=m=>{const l={newPassword:m,confirmNew:m,oldPassword:"admin"};if(this.props.resetCode){const p={code:this.props.resetCode,newPassword:m,confirmPassword:m};(0,c.i)().post("/api/user/password/reset",p).then(()=>{this.toGrafana()})}else(0,c.i)().put("/api/user/password",l).then(()=>{this.toGrafana()}).catch(p=>console.error(p))},this.login=m=>{this.setState({isLoggingIn:!0}),(0,c.i)().post("/login",m).then(l=>{if(this.result=l,m.password!=="admin"||i.ZP.ldapEnabled||i.ZP.authProxyEnabled){this.toGrafana();return}else this.changeView()}).catch(()=>{this.setState({isLoggingIn:!1})})},this.changeView=()=>{this.setState({isChangingPassword:!0})},this.toGrafana=()=>{this.result.redirectUrl?i.ZP.appSubUrl!==""&&!this.result.redirectUrl.startsWith(i.ZP.appSubUrl)?window.location.assign(i.ZP.appSubUrl+this.result.redirectUrl):window.location.assign(this.result.redirectUrl):window.location.assign(i.ZP.appSubUrl+"/")},this.state={isLoggingIn:!1,isChangingPassword:!1},i.ZP.loginError&&s.Z.emit(n.SI.alertWarning,["Login Failed",i.ZP.loginError])}render(){const{children:o}=this.props,{isLoggingIn:m,isChangingPassword:l}=this.state,{login:p,toGrafana:g,changePassword:y}=this,{loginHint:v,passwordHint:E,disableLoginForm:h,disableUserSignUp:C}=i.ZP;return t.createElement(t.Fragment,null,o({isOauthEnabled:f(),loginHint:v,passwordHint:E,disableLoginForm:h,disableUserSignUp:C,login:p,isLoggingIn:m,changePassword:y,skipPasswordChange:g,isChangingPassword:l}))}}const r=u},5080:(Y,T,e)=>{"use strict";e.d(T,{F:()=>o,U:()=>m});var t=e(9892),n=e(66111),c=e(68183),s=e(94270),i=e(24799),f=e(46967),u=e(31403),r=e(20787);const d=t.css`
  width: 100%;
  padding-bottom: 16px;
`,o=t.css`
  justify-content: center;
  width: 100%;
`,m=({children:l,onSubmit:p,isLoggingIn:g,passwordHint:y,loginHint:v})=>n.createElement("div",{className:d},n.createElement(s.l,{onSubmit:p,validateOn:"onChange"},({register:E,errors:h})=>n.createElement(n.Fragment,null,n.createElement(i.g,{label:"Email or username",invalid:!!h.user,error:h.user?.message},n.createElement(f.I,{...E("user",{required:"Email or username is required"}),autoFocus:!0,autoCapitalize:"none",placeholder:v,"aria-label":c.wl.pages.Login.username})),n.createElement(i.g,{label:"Password",invalid:!!h.password,error:h.password?.message},n.createElement(r.Z,{id:"current-password",autoComplete:"current-password",passwordHint:y,...E("password",{required:"Password is required"})})),n.createElement(u.zx,{type:"submit","aria-label":c.wl.pages.Login.submit,className:o,disabled:g},g?"Logging in...":"Log in"),l)))},80472:(Y,T,e)=>{"use strict";e.d(T,{$s:()=>u,dd:()=>r,pJ:()=>o});var t=e(9892),n=e(66111),c=e(72648),s=e(85419),i=e(36578),f=e(25337);const u=({children:m,enterAnimation:l=!0})=>{const p=(0,c.wW)(o);return n.createElement("div",{className:(0,t.cx)(p.loginInnerBox,l&&p.enterAnimation)},m)},r=({children:m,branding:l})=>{const p=(0,c.wW)(o),[g,y]=(0,n.useState)(!1),v=l?.loginSubtitle??i.c.GetLoginSubTitle(),E=l?.loginTitle??i.c.LoginTitle,h=l?.loginBoxBackground||i.c.LoginBoxBackground(),C=l?.loginLogo;return(0,n.useEffect)(()=>y(!0),[]),n.createElement(i.c.LoginBackground,{className:(0,t.cx)(p.container,g&&p.loginAnim,l?.loginBackground)},n.createElement("div",{className:p.loginMain},n.createElement("div",{className:(0,t.cx)(p.loginContent,h,"login-content-box")},n.createElement("div",{className:p.loginLogoWrapper},n.createElement(i.c.LoginLogo,{className:p.loginLogo,logo:C}),n.createElement("div",{className:p.titleWrapper},n.createElement("h1",{className:p.mainTitle},E),v&&n.createElement("h3",{className:p.subTitle},v))),n.createElement("div",{className:p.loginOuterBox},m))),l?.hideFooter?n.createElement(n.Fragment,null):n.createElement(f.$_,{customLinks:l?.footerLinks}))},d=t.keyframes`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,o=m=>({loginMain:(0,t.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,t.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:t.css`
      &:before {
        opacity: 1;
      }

      .login-content-box {
        opacity: 1;
      }
    `,submitButton:t.css`
      justify-content: center;
      width: 100%;
    `,loginLogo:t.css`
      width: 100%;
      max-width: 60px;
      margin-bottom: 15px;

      @media ${s.mediaUp(m.v1.breakpoints.sm)} {
        max-width: 100px;
      }
    `,loginLogoWrapper:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: ${m.spacing(3)};
    `,titleWrapper:t.css`
      text-align: center;
    `,mainTitle:t.css`
      font-size: 22px;

      @media ${s.mediaUp(m.v1.breakpoints.sm)} {
        font-size: 32px;
      }
    `,subTitle:t.css`
      font-size: ${m.typography.size.md};
      color: ${m.colors.text.secondary};
    `,loginContent:t.css`
      max-width: 478px;
      width: calc(100% - 2rem);
      display: flex;
      align-items: stretch;
      flex-direction: column;
      position: relative;
      justify-content: flex-start;
      z-index: 1;
      min-height: 320px;
      border-radius: ${m.shape.borderRadius(4)};
      padding: ${m.spacing(2,0)};
      opacity: 0;
      transition: opacity 0.5s ease-in-out;

      @media ${s.mediaUp(m.v1.breakpoints.sm)} {
        min-height: 320px;
        justify-content: center;
      }
    `,loginOuterBox:t.css`
      display: flex;
      overflow-y: hidden;
      align-items: center;
      justify-content: center;
    `,loginInnerBox:t.css`
      padding: ${m.spacing(2)};

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
      max-width: 415px;
      width: 100%;
      transform: translate(0px, 0px);
      transition: 0.25s ease;
    `,enterAnimation:t.css`
      animation: ${d} ease-out 0.2s;
    `})},45458:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>f});var t=e(82897),n=e.n(t),c=e(66111),s=e(46967),i=e(24799);class f extends c.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=c.createRef(),this.updateValue=()=>{const r=this.inputRef.current?.value;let d=!1,o="";const m=this.props.min,l=this.props.max;let p=r!==""?Number(r):void 0;p&&!Number.isNaN(p)&&(m!=null&&p<m?(o=m.toString(),d=!0):l!=null&&p>l?(o=l.toString(),d=!0):o=r??"",this.setState({text:o,inputCorrected:d})),d&&this.updateValueDebounced(),!Number.isNaN(p)&&p!==this.props.value&&this.props.onChange(p)},this.updateValueDebounced=(0,t.debounce)(this.updateValue,500),this.onChange=r=>{this.setState({text:r.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=r=>{r.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(r){if(this.props.value!==r.value){const d=isNaN(this.props.value)?"":`${this.props.value}`;d!==this.state.text&&this.setState({text:d})}}renderInput(){return c.createElement(s.I,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder,disabled:this.props.fieldDisabled,width:this.props.width})}render(){const{inputCorrected:r}=this.state;if(r){let d="",{min:o,max:m}=this.props;return m==null?o!=null&&(d=`< ${o}`):o!=null?d=`${o} < > ${m}`:d=`> ${m}`,c.createElement(i.g,{invalid:r,error:`Out of range ${d}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},13355:(Y,T,e)=>{"use strict";e.d(T,{B:()=>u});var t=e(9892),n=e(66111),c=e(72648),s=e(90208),i=e(8180),f=e(98671);const u=({value:d,settings:o,onChange:m,details:l})=>{const p=(0,c.l4)(),g=(0,c.wW)(r);return n.createElement(s.zH,{color:d??"",onChange:m,enableNamedColors:o?.enableNamedColors!==!1},({ref:y,showColorPicker:v,hideColorPicker:E})=>n.createElement("div",{className:g.spot},n.createElement("div",{className:g.colorPicker},n.createElement(f.b,{ref:y,onClick:v,onMouseLeave:E,color:d?p.visualization.getColorByName(d):p.components.input.borderColor})),l&&n.createElement(n.Fragment,null,d?n.createElement("span",{className:g.colorText,onClick:v},d):n.createElement("span",{className:g.placeholderText,onClick:v},o?.placeholder??"Select color"),o?.isClearable&&d&&n.createElement(i.h,{name:"times",onClick:()=>m(void 0)}))))},r=d=>({spot:t.css`
      cursor: pointer;
      color: ${d.colors.text};
      background: ${d.components.input.background};
      padding: 3px;
      height: ${d.v1.spacing.formInputHeight}px;
      border: 1px solid ${d.components.input.borderColor};
      display: flex;
      flex-direction: row;
      align-items: center;
      align-content: flex-end;
      &:hover {
        border: 1px solid ${d.components.input.borderHover};
      }
    `,colorPicker:t.css`
      padding: 0 ${d.spacing(1)};
    `,colorText:t.css`
      flex-grow: 2;
    `,placeholderText:t.css`
      flex-grow: 2;
      color: ${d.colors.text.secondary};
    `})},12503:(Y,T,e)=>{"use strict";e.d(T,{w:()=>c});var t=e(66111),n=e(45458);const c=({value:s,onChange:i,item:f})=>{const{settings:u}=f,r=(0,t.useCallback)(d=>{i(u?.integer&&d!==void 0?Math.floor(d):d)},[i,u?.integer]);return t.createElement(n.Y,{value:s,min:u?.min,max:u?.max,step:u?.step,placeholder:u?.placeholder,onChange:r})}},52974:(Y,T,e)=>{"use strict";e.d(T,{u:()=>vt,l:()=>bt});var t=e(66111),n=e(30779),c=e(72293),s=e(99098),i=e(69098),f=e(8944),u=e(2594),r=e(52566),d=e(15448),o=e(9892),m=e(82897),l=e(92103),p=e(16514),g=e(46967),y=e(90208),v=e(8180),E=e(72648),h=e(31403),C=e(64353),a=e(7804);const P=[{value:i.H.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:i.H.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class D extends t.PureComponent{constructor(Pt){super(Pt),this.onAddThreshold=()=>{const{steps:Ce}=this.state;let Ne=0;Ce.length>1&&(Ne=Ce[Ce.length-1].value+10);let Ze=p.O9.filter(Ue=>!Ce.some(ve=>ve.color===Ue))[1];Ze||(Ze="#CCCCCC");const Qe={value:Ne,color:Ze,key:x++},Le=[...Ce,Qe];(0,l.bP)(Le),this.setState({steps:Le},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=Ce=>{const{steps:Ne}=this.state;Ne.length&&Ce.key!==Ne[0].key&&this.setState({steps:Ne.filter(Ze=>Ze.key!==Ce.key)},this.onChange)},this.onChangeThresholdValue=(Ce,Ne)=>{const Ze=Ce.target.value.replace(/,/g,"."),Qe=parseFloat(Ze),Le=isNaN(Qe)?"":Qe,Ue=this.state.steps.map(ve=>(ve.key===Ne.key&&(ve={...ve,value:Le}),ve));Ue.length&&(Ue[0].value=-1/0),(0,l.bP)(Ue),this.setState({steps:Ue})},this.onChangeThresholdColor=(Ce,Ne)=>{const{steps:Ze}=this.state,Qe=Ze.map(Le=>(Le.key===Ce.key&&(Le={...Le,color:Ne}),Le));this.setState({steps:Qe},this.onChange)},this.onBlur=()=>{const Ce=[...this.state.steps];(0,l.bP)(Ce),this.setState({steps:Ce},this.onChange)},this.onChange=()=>{this.props.onChange(b(this.props.thresholds,this.state.steps))},this.onModeChanged=Ce=>{this.props.onChange({...this.props.thresholds,mode:Ce})};const ie=M(Pt.thresholds.steps);ie[0].value=-1/0,this.state={steps:ie},this.latestThresholdInputRef=t.createRef()}renderInput(Pt,ie,Ce){const Ne=this.props.thresholds.mode===i.H.Percentage,Ze=`Threshold ${Ce+1}`;return isFinite(Pt.value)?t.createElement(g.I,{type:"number",step:"0.0001",key:Ne.toString(),onChange:Qe=>this.onChangeThresholdValue(Qe,Pt),value:Pt.value,"aria-label":Ze,ref:Ce===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:t.createElement("div",{className:ie.inputPrefix},t.createElement("div",{className:ie.colorPicker},t.createElement(y.zH,{color:Pt.color,onChange:Qe=>this.onChangeThresholdColor(Pt,Qe),enableNamedColors:!0})),Ne&&t.createElement("div",{className:ie.percentIcon},"%")),suffix:t.createElement(v.h,{"aria-label":`Remove ${Ze}`,className:ie.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(Pt)})}):t.createElement(g.I,{type:"text",value:"Base","aria-label":Ze,disabled:!0,prefix:t.createElement("div",{className:ie.colorPicker},t.createElement(y.zH,{color:Pt.color,onChange:Qe=>this.onChangeThresholdColor(Pt,Qe),enableNamedColors:!0}))})}render(){const{thresholds:Pt}=this.props,{steps:ie}=this.state;return t.createElement(E.Ni.Consumer,null,Ce=>{const Ne=R(Ce);return t.createElement("div",{className:Ne.wrapper},t.createElement(h.zx,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:Ne.addButton,fullWidth:!0},"Add threshold"),t.createElement("div",{className:Ne.thresholds},ie.slice(0).reverse().map((Ze,Qe)=>t.createElement("div",{className:Ne.item,key:`${Ze.key}`},this.renderInput(Ze,Ne,Qe)))),t.createElement("div",null,t.createElement(C._,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),t.createElement(u.S,{options:P,onChange:this.onModeChanged,value:Pt.mode})))})}}let x=100;function M(ct){return(!ct||ct.length===0)&&(ct=[{value:-1/0,color:"green"}]),ct.filter((Pt,ie)=>(0,m.isNumber)(Pt.value)||ie===0).map(Pt=>({color:Pt.color,value:Pt.value===null?-1/0:Pt.value,key:x++}))}function b(ct,Pt){return{mode:ct.mode??i.H.Absolute,steps:Pt.map(Ce=>{const{key:Ne,...Ze}=Ce;return Ze})}}const R=(0,a.B)(ct=>({wrapper:o.css`
      display: flex;
      flex-direction: column;
    `,thresholds:o.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${ct.spacing(2)};
    `,item:o.css`
      margin-bottom: ${ct.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:o.css`
      padding: 0 ${ct.spacing(1)};
    `,addButton:o.css`
      margin-bottom: ${ct.spacing(1)};
    `,percentIcon:o.css`
      font-size: ${ct.typography.bodySmall.fontSize};
      color: ${ct.colors.text.secondary};
    `,inputPrefix:o.css`
      display: flex;
      align-items: center;
    `,trashIcon:o.css`
      color: ${ct.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${ct.colors.text};
      }
    `}));class S extends t.PureComponent{constructor(Pt){super(Pt)}render(){const{onChange:Pt}=this.props;let ie=this.props.value;return ie||(ie={mode:i.H.Percentage,steps:[]}),t.createElement(D,{thresholds:ie,onChange:Pt})}}var O=e(32195),U=e(52081),I=e(39904),F=e(35029),w=e(92484),K=e(26786),L=e(36826),V=e(15670),H=e(8581);function j({mapping:ct,index:Pt,onChange:ie,onRemove:Ce,onDuplicate:Ne,showIconPicker:Ze}){const{key:Qe,result:Le,id:Ue}=ct,ve=(0,E.wW)(A),Se=(0,t.useRef)(null),Fe=(0,t.useCallback)(Mt=>{const Wt={...ct,result:{...ct.result}};Mt(Wt),ie(Pt,Wt)},[ct,Pt,ie]);(0,t.useEffect)(()=>{Se.current&&ct.isNew&&(Se.current.focus(),Fe(Mt=>{Mt.isNew=!1}))},[ct,Se,Fe]);const je=Mt=>{Fe(Wt=>{Wt.result.color=Mt})},Ge=()=>{Fe(Mt=>{Mt.result.color=void 0})},gt=Mt=>{Fe(Wt=>{Wt.result.icon=Mt})},mt=()=>{Fe(Mt=>{Mt.result.icon=void 0})},Ye=Mt=>{Fe(Wt=>{Wt.key=Mt.currentTarget.value})},ft=Mt=>{Fe(Wt=>{Wt.result.text=Mt.currentTarget.value})},St=Mt=>{Fe(Wt=>{Wt.from=parseFloat(Mt.currentTarget.value)})},we=Mt=>{Fe(Wt=>{Wt.to=parseFloat(Mt.currentTarget.value)})},qe=Mt=>{Fe(Wt=>{Wt.pattern=Mt.currentTarget.value})},Je=Mt=>{Fe(Wt=>{Wt.specialMatch=Mt.value})},ut=[{label:"Null",value:O.e.Null,description:"Matches null and undefined values"},{label:"NaN",value:O.e[NaN],description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:O.e.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:O.e.True,description:"Boolean true values"},{label:"False",value:O.e.False,description:"Boolean false values"},{label:"Empty",value:O.e.Empty,description:"Empty string"}];return t.createElement(L._l,{key:Ue,draggableId:Ue,index:Pt},Mt=>t.createElement("tr",{className:ve.dragRow,ref:Mt.innerRef,...Mt.draggableProps},t.createElement("td",null,t.createElement("div",{className:ve.dragHandle,...Mt.dragHandleProps},t.createElement(I.J,{name:"draggabledots",size:"lg"}))),t.createElement("td",{className:ve.typeColumn},ct.type),t.createElement("td",null,ct.type===O.H.ValueToText&&t.createElement(g.I,{ref:Se,type:"text",value:Qe??"",onChange:Ye,placeholder:"Exact value to match"}),ct.type===O.H.RangeToText&&t.createElement("div",{className:ve.rangeInputWrapper},t.createElement(g.I,{type:"number",value:ct.from??"",placeholder:"Range start",onChange:St,prefix:"From"}),t.createElement(g.I,{type:"number",value:ct.to??"",placeholder:"Range end",onChange:we,prefix:"To"})),ct.type===O.H.RegexToText&&t.createElement(g.I,{type:"text",value:ct.pattern??"",placeholder:"Regular expression",onChange:qe}),ct.type===O.H.SpecialValue&&t.createElement(H.Ph,{value:ut.find(Wt=>Wt.value===ct.specialMatch),options:ut,onChange:Je})),t.createElement("td",null,t.createElement(g.I,{type:"text",value:Le.text??"",onChange:ft,placeholder:"Optional display text"})),t.createElement("td",{className:ve.textAlignCenter},Le.color&&t.createElement(U.Lh,{spacing:"sm",justify:"center"},t.createElement(y.zH,{color:Le.color,onChange:je,enableNamedColors:!0}),t.createElement(v.h,{name:"times",onClick:Ge,tooltip:"Remove color",tooltipPlacement:"top"})),!Le.color&&t.createElement(y.zH,{color:"gray",onChange:je,enableNamedColors:!0},Wt=>t.createElement(h.zx,{variant:"primary",fill:"text",onClick:Wt.showColorPicker,ref:Wt.ref,size:"sm"},"Set color"))),Ze&&t.createElement("td",{className:ve.textAlignCenter},t.createElement(U.Lh,{spacing:"sm",justify:"center"},t.createElement(K.E,{onChange:gt,onClear:mt,value:Le.icon,size:w.zc.SMALL,folderName:w.QS.Icon,mediaType:w.DD.Icon,color:Le.color}),Le.icon&&t.createElement(v.h,{name:"times",onClick:mt,tooltip:"Remove icon",tooltipPlacement:"top"}))),t.createElement("td",{className:ve.textAlignCenter},t.createElement(U.Lh,{spacing:"sm"},t.createElement(v.h,{name:"copy",onClick:()=>Ne(Pt),"data-testid":"duplicate-value-mapping"}),t.createElement(v.h,{name:"trash-alt",onClick:()=>Ce(Pt),"data-testid":"remove-value-mapping"})))))}const A=ct=>({dragRow:(0,o.css)({position:"relative"}),dragHandle:(0,o.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${ct.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,o.css)({display:"flex","> div:first-child":{marginRight:ct.spacing(2)}}),regexInputWrapper:(0,o.css)({display:"flex","> div:first-child":{marginRight:ct.spacing(2)}}),typeColumn:(0,o.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,o.css)({textAlign:"center"})});function _({value:ct,onChange:Pt,onClose:ie,showIconPicker:Ce}){const Ne=(0,E.wW)(k),[Ze,Qe]=(0,t.useState)([]);(0,t.useEffect)(()=>{Qe(G(ct))},[ct]);const Le=gt=>{if(!ct||!gt.destination)return;const mt=[...Ze],Ye=mt[gt.source.index];mt.splice(gt.source.index,1),mt.splice(gt.destination.index,0,Ye),Qe(mt)},Ue=(gt,mt)=>{const Ye=[...Ze];Ye.splice(gt,1,mt),Qe(Ye)},ve=gt=>{const mt=[...Ze];mt.splice(gt,1),Qe(mt)},Se=[{label:"Value",value:O.H.ValueToText,description:"Match a specific text value"},{label:"Range",value:O.H.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:O.H.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:O.H.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],Fe=gt=>{Qe([...Ze,re({type:gt.value,result:{},isNew:!0})])},je=gt=>{const mt=Z(Ze[gt]),Ye=[...Ze];Ye.splice(gt,0,{...mt});for(let ft=gt;ft<Ze.length;ft++)Ye[ft].result.index=ft;Qe(Ye)},Ge=()=>{Pt(oe(Ze)),ie()};return(0,t.useEffect)(()=>{ct?.length||Fe({value:O.H.ValueToText})},[]),t.createElement(t.Fragment,null,t.createElement("div",{className:Ne.tableWrap},t.createElement("table",{className:Ne.editTable},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{style:{width:"1%"}}),t.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),t.createElement("th",{style:{textAlign:"left"}},"Display text"),t.createElement("th",{style:{width:"10%"}},"Color"),Ce&&t.createElement("th",{style:{width:"10%"}},"Icon"),t.createElement("th",{style:{width:"1%"}}))),t.createElement(L.Z5,{onDragEnd:Le},t.createElement(L.bK,{droppableId:"sortable-field-mappings",direction:"vertical"},gt=>t.createElement("tbody",{ref:gt.innerRef,...gt.droppableProps},Ze.map((mt,Ye)=>t.createElement(j,{key:mt.id,mapping:mt,index:Ye,onChange:Ue,onRemove:ve,onDuplicate:je,showIconPicker:Ce})),gt.placeholder))))),t.createElement(F.u.ButtonRow,{leftItems:t.createElement(V.b,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:Se,onChange:Fe})},t.createElement(h.zx,{variant:"secondary",fill:"outline",onClick:ie},"Cancel"),t.createElement(h.zx,{variant:"primary",onClick:Ge},"Update")))}const k=ct=>({tableWrap:o.css`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,o.css)({width:"100%",marginBottom:ct.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:ct.colors.action.hover}," th, td":{padding:ct.spacing(1)}})});function Q(){return(0,m.uniqueId)("mapping-")}function re(ct){return{type:O.H.ValueToText,result:{},id:Q(),...ct}}function Z(ct){return{...re(ct),id:Q()}}function oe(ct){const Pt=[],ie={type:O.H.ValueToText,options:{}};return ct.forEach((Ce,Ne)=>{const Ze={...Ce.result,index:Ne};switch((!Ze.text||Ze.text.trim().length===0)&&(Ze.text=void 0),Ce.type){case O.H.ValueToText:Ce.key!=null&&(ie.options[Ce.key]=Ze);break;case O.H.RangeToText:Ce.from!=null&&Ce.to!=null&&Pt.push({type:Ce.type,options:{from:Ce.from,to:Ce.to,result:Ze}});break;case O.H.RegexToText:Ce.pattern!=null&&Pt.push({type:Ce.type,options:{pattern:Ce.pattern,result:Ze}});break;case O.H.SpecialValue:Pt.push({type:Ce.type,options:{match:Ce.specialMatch,result:Ze}})}}),Object.keys(ie.options).length>0&&Pt.unshift(ie),Pt}function G(ct){const Pt=[];if(ct)for(const ie of ct)switch(ie.type){case O.H.ValueToText:for(const Ce of Object.keys(ie.options))Pt.push(re({type:ie.type,result:ie.options[Ce],key:Ce}));break;case O.H.RangeToText:Pt.push(re({type:ie.type,result:ie.options.result,from:ie.options.from??0,to:ie.options.to??0}));break;case O.H.RegexToText:Pt.push(re({type:ie.type,result:ie.options.result,pattern:ie.options.pattern}));break;case O.H.SpecialValue:Pt.push(re({type:ie.type,result:ie.options.result,specialMatch:ie.options.match??O.e.Null}))}return Pt.sort((ie,Ce)=>(ie.result.index??0)>(Ce.result.index??0)?1:-1),Pt}const le=t.memo(ct=>{const{value:Pt,onChange:ie,item:Ce}=ct,Ne=(0,E.wW)(ge),Ze=Ce.settings?.icon,[Qe,Le]=(0,t.useState)(!1),Ue=(0,t.useCallback)(()=>{Le(!1)},[Le]),ve=(0,t.useMemo)(()=>G(Pt),[Pt]),Se=(0,t.useCallback)((je,Ge)=>{ve[Ge].result.color=je,ie(oe(ve))},[ve,ie]),Fe=(0,t.useCallback)((je,Ge)=>{ve[Ge].result.icon=je,ie(oe(ve))},[ve,ie]);return t.createElement(U.wc,null,t.createElement("table",{className:Ne.compactTable},t.createElement("tbody",null,ve.map((je,Ge)=>t.createElement("tr",{key:Ge.toString()},t.createElement("td",null,je.type===O.H.ValueToText&&je.key,je.type===O.H.RangeToText&&t.createElement("span",null,"[",je.from," - ",je.to,"]"),je.type===O.H.RegexToText&&je.pattern,je.type===O.H.SpecialValue&&je.specialMatch),t.createElement("td",null,t.createElement(I.J,{name:"arrow-right"})),t.createElement("td",null,je.result.text),je.result.color&&t.createElement("td",null,t.createElement(y.zH,{color:je.result.color,onChange:gt=>Se(gt,Ge),enableNamedColors:!0})),Ze&&je.result.icon&&t.createElement("td",{"data-testid":"iconPicker"},t.createElement(K.E,{onChange:gt=>Fe(gt,Ge),value:je.result.icon,size:w.zc.SMALL,folderName:w.QS.Icon,mediaType:w.DD.Icon,color:je.result.color})))))),t.createElement(h.zx,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>Le(!0)},ve.length>0&&t.createElement("span",null,"Edit value mappings"),ve.length===0&&t.createElement("span",null,"Add value mappings")),t.createElement(F.u,{isOpen:Qe,title:"Value mappings",onDismiss:Ue,className:Ne.modal,closeOnBackdropClick:!1},t.createElement(_,{value:Pt,onChange:ie,onClose:Ue,showIconPicker:Ze})))});le.displayName="ValueMappingsEditor";const ge=ct=>({modal:(0,o.css)({width:"980px"}),compactTable:(0,o.css)({width:"100%","tbody td":{padding:ct.spacing(.5)}})});var ne=e(99661);const ue=({value:ct,onChange:Pt,item:ie})=>{const{placeholder:Ce,isClearable:Ne}=ie?.settings??{},Ze=(0,t.useCallback)(Qe=>{Pt(Qe?.value?.uid)},[Pt]);return t.createElement(ne.o,{isClearable:Ne,defaultOptions:!0,onChange:Ze,placeholder:Ce,value:ct})};var te=e(13355),me=e(72990),q=e(53768),se=e(24799);const ae=({value:ct,onChange:Pt,item:ie,id:Ce})=>{const Ne=(0,E.l4)(),Ze=(0,E.wW)(de),Qe=(0,me.QY)(ct?.mode),Ue=(ie.settings?.byValueSupport?me.WO.list():me.WO.list().filter(Ge=>!Ge.isByValue)).map(Ge=>{let gt=Ge.isByValue?" (by value)":"";return{value:Ge.id,label:`${Ge.name}${gt}`,description:Ge.description,isContinuous:Ge.isContinuous,isByValue:Ge.isByValue,component(){return t.createElement(pe,{mode:Ge,theme:Ne})}}}),ve=Ge=>{Pt({...ct,mode:Ge.value})},Se=Ge=>{Pt({...ct,mode:je,fixedColor:Ge})},Fe=Ge=>{Pt({...ct,mode:je,seriesBy:Ge})},je=ct?.mode??q.S.Thresholds;if(je===q.S.Fixed||je===q.S.Shades)return t.createElement("div",{className:Ze.group},t.createElement(H.Ph,{minMenuHeight:200,options:Ue,value:je,onChange:ve,className:Ze.select,inputId:Ce}),t.createElement(te.B,{value:ct?.fixedColor,onChange:Se}));if(ie.settings?.bySeriesSupport&&Qe.isByValue){const Ge=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:Ne.spacing(2)}},t.createElement(H.Ph,{minMenuHeight:200,options:Ue,value:je,onChange:ve,inputId:Ce})),t.createElement(se.g,{label:"Color series by"},t.createElement(u.S,{value:ct?.seriesBy??"last",options:Ge,onChange:Fe})))}return t.createElement(H.Ph,{minMenuHeight:200,options:Ue,value:je,onChange:ve,inputId:Ce})},pe=({mode:ct,theme:Pt})=>{if(!ct.getColors)return null;const ie=ct.getColors(Pt).map(Pt.visualization.getColorByName),Ce={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(ct.isContinuous)Ce.background=`linear-gradient(90deg, ${ie.join(",")})`;else{let Ne="",Ze="";for(let Qe=0;Qe<ie.length;Qe++){const Le=ie[Qe];if(Ne==="")Ne=`linear-gradient(90deg, ${Le} 0%`;else{const ve=Qe/(ie.length-1)*100;Ne+=`, ${Ze} ${ve}%, ${Le} ${ve}%`}Ze=Le}Ce.background=Ne}return t.createElement("div",{style:Ce})},de=ct=>({group:o.css`
      display: flex;
    `,select:o.css`
      margin-right: 8px;
      flex-grow: 1;
    `});var Me=e(3281),Ke=e(68037);const st=({value:ct,onChange:Pt,context:ie})=>t.createElement(Ke.d,{links:ct,onChange:Pt,data:ie.data,getSuggestions:()=>ie.getSuggestions?ie.getSuggestions(Me.o3.Values):[]});class Ie extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:Pt}=this.props,{settings:ie}=Pt;let Ce=Pt.settings?.options||[];ie?.getOptions&&(Ce=await ie.getOptions(this.props.context)),this.state.options!==Ce&&this.setState({isLoading:!1,options:Ce})}}componentDidMount(){this.updateOptions()}componentDidUpdate(Pt){const ie=Pt.item?.settings,Ce=this.props.item?.settings;if(ie!==Ce)this.updateOptions();else if(Ce?.getOptions){const Ne=Pt.context?.data,Ze=this.props.context?.data;Ne!==Ze&&this.updateOptions()}}render(){const{options:Pt,isLoading:ie}=this.state,{value:Ce,onChange:Ne,item:Ze}=this.props,{settings:Qe}=Ze;return t.createElement(H.NU,{isLoading:ie,value:Ce,defaultValue:Ce,allowCustomValue:Qe?.allowCustomValue,onChange:Le=>{Ne(Le.map(Ue=>Ue.value).flatMap(Ue=>Ue!==void 0?[Ue]:[]))},options:Pt})}}var Ve=e(12503);class _e extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:Pt}=this.props,{settings:ie}=Pt;let Ce=Pt.settings?.options||[];ie?.getOptions&&(Ce=await ie.getOptions(this.props.context)),this.state.options!==Ce&&this.setState({isLoading:!1,options:Ce})}}componentDidMount(){this.updateOptions()}componentDidUpdate(Pt){const ie=Pt.item?.settings,Ce=this.props.item?.settings;if(ie!==Ce)this.updateOptions();else if(Ce?.getOptions){const Ne=Pt.context?.data,Ze=this.props.context?.data;Ne!==Ze&&this.updateOptions()}}render(){const{options:Pt,isLoading:ie}=this.state,{value:Ce,onChange:Ne,item:Ze}=this.props,{settings:Qe}=Ze;let Le=Pt.find(Ue=>Ue.value===Ce);return!Le&&Ce&&(Le={label:`${Ce}`,value:Ce}),t.createElement(H.Ph,{isLoading:ie,value:Le,defaultValue:Ce,allowCustomValue:Qe?.allowCustomValue,isClearable:Qe?.isClearable,onChange:Ue=>Ne(Ue?.value),options:Pt})}}var tt=e(74912),dt=e(71294);const Oe=({value:ct,onChange:Pt,item:ie,id:Ce})=>t.createElement(dt.m,{stats:ct,onChange:Pt,allowMultiple:!!ie.settings?.allowMultiple,defaultStat:ie.settings?.defaultStat,inputId:Ce});var ye=e(37565),Pe=e(35645);class be extends t.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=Pt=>{const{value:ie,onChange:Ce}=this.props,Ne=[...ie];Ne.splice(Pt,1),Ce(Ne)},this.onValueChange=(Pt,ie)=>{if("key"in Pt&&Pt.key!=="Enter")return;const{value:Ce,onChange:Ne}=this.props,Ze=Pt.currentTarget.value.trim();if(ie<0){Ze&&(Pt.currentTarget.value="",Ne([...Ce,Ze])),this.setState({showAdd:!1});return}if(!Ze)return this.onRemoveString(ie);const Qe=[...Ce];Qe[ie]=Ze,Ne(Qe)}}render(){const{value:Pt,item:ie}=this.props,{showAdd:Ce}=this.state,Ne=Be(Pe.v.theme2),Ze=ie.settings?.placeholder||"Add text";return t.createElement("div",null,Pt.map((Qe,Le)=>t.createElement(g.I,{className:Ne.textInput,key:`${Le}/${Qe}`,defaultValue:Qe||"",onBlur:Ue=>this.onValueChange(Ue,Le),onKeyDown:Ue=>this.onValueChange(Ue,Le),suffix:t.createElement(I.J,{className:Ne.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(Le)})})),Ce?t.createElement(g.I,{autoFocus:!0,className:Ne.textInput,placeholder:Ze,defaultValue:"",onBlur:Qe=>this.onValueChange(Qe,-1),onKeyDown:Qe=>this.onValueChange(Qe,-1),suffix:t.createElement(I.J,{name:"plus-circle"})}):t.createElement(h.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},Ze))}}const Be=(0,a.B)(ct=>({textInput:o.css`
      margin-bottom: 5px;
      &:hover {
        border: 1px solid ${ct.components.input.borderHover};
      }
    `,trashIcon:o.css`
      color: ${ct.colors.text.secondary};
      cursor: pointer;

      &:hover {
        color: ${ct.colors.text};
      }
    `}));var ze=e(61227);function lt({value:ct,onChange:Pt,item:ie}){const Ce=(0,E.wW)(ht);return ie?.settings?.isClearable&&ct!=null?t.createElement("div",{className:Ce.wrapper},t.createElement("span",{className:Ce.first},t.createElement(ze.n,{value:ct,onChange:Pt})),t.createElement(v.h,{ariaLabel:"clear unit selection",name:"times",onClick:()=>Pt(void 0)})):t.createElement(ze.n,{value:ct,onChange:Pt})}const ht=ct=>({wrapper:o.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:o.css`
    margin-right: 8px;
    flex-grow: 2;
  `}),vt=()=>{const ct={id:"number",name:"Number",description:"Allows numeric values input",editor:Ve.w},Pt={id:"slider",name:"Slider",description:"Allows numeric values input",editor:tt.p},ie={id:"text",name:"Text",description:"Allows string values input",editor:ye.A},Ce={id:"strings",name:"String array",description:"An array of strings",editor:be},Ne={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(St){const{id:we,...qe}=St;return t.createElement(f.r,{...qe,onChange:Je=>St.onChange(Je.currentTarget.checked)})}},Ze={id:"select",name:"Select",description:"Allows option selection",editor:_e},Qe={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:Ie},Le={id:"radio",name:"Radio",description:"Allows option selection",editor(St){return t.createElement(u.S,{...St,options:St.item.settings?.options})}},Ue={id:"unit",name:"Unit",description:"Allows unit input",editor:lt},ve={id:"color",name:"Color",description:"Allows color selection",editor(St){return t.createElement(te.B,{value:St.value,onChange:St.onChange,settings:St.item.settings,details:!0})}},Se={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:ae},Fe={id:"links",name:"Links",description:"Allows defining data links",editor:st},je={id:"stats-picker",name:"Stats Picker",editor:Oe,description:""},Ge={id:"timezone",name:"Time zone",description:"Time zone selection",editor:r.O},gt={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:d.b};return[ie,ct,Pt,Ne,Le,Ze,Ue,Fe,je,Ce,Ge,Se,ve,Qe,gt,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:ue},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:le},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:S}]},bt=()=>{const ct=["Standard options"],Pt={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:c.W0,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:ct},ie={id:"unit",path:"unit",name:"Unit",description:"",editor:n.S.get("unit").editor,override:n.S.get("unit").editor,process:c.op,settings:{placeholder:"none"},shouldApply:()=>!0,category:ct},Ce={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:c.Oh,settings:{placeholder:"auto"},shouldApply:je=>je.type===s.fS.number,category:ct},Ne={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:c.Oh,settings:{placeholder:"auto"},shouldApply:je=>je.type===s.fS.number,category:ct},Ze={id:"decimals",path:"decimals",name:"Decimals",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:c.Oh,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:je=>je.type===s.fS.number,category:ct},Qe={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:c.op,settings:{placeholder:"-"},shouldApply:()=>!0,category:ct},Le={id:"links",path:"links",name:"Data links",editor:n.S.get("links").editor,override:n.S.get("links").editor,process:c.NN,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:je=>je?je.length:0},Ue={id:"color",path:"color",name:"Color scheme",editor:n.S.get("fieldColor").editor,override:n.S.get("fieldColor").editor,process:c.kG,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:ct},ve={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:n.S.get("mappings").editor,override:n.S.get("mappings").editor,process:c.uj,settings:{},defaultValue:[],shouldApply:je=>je.type!==s.fS.time,category:["Value mappings"],getItemsCount:je=>je?je.length:0},Se={id:"thresholds",path:"thresholds",name:"Thresholds",editor:n.S.get("thresholds").editor,override:n.S.get("thresholds").editor,process:c.ZN,settings:{},defaultValue:{mode:i.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:je=>je?je.steps.length:0},Fe={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:n.S.get("boolean").editor,override:n.S.get("boolean").editor,process:c.W4,shouldApply:()=>!0,settings:{},category:ct};return[ie,Ce,Ne,Ze,Pt,Ue,Qe,Le,ve,Se,Fe]}},74912:(Y,T,e)=>{"use strict";e.d(T,{p:()=>r});var t=e(9892),n=e(65788),c=e(74560),s=e(66111),i=e(72648),f=e(29571),u=e(45458);const r=({value:m,onChange:l,item:p})=>{const g=(0,s.useRef)(null),{settings:y}=p,v=y?.min||0,E=y?.max||100,h=y?.step,C=y?.marks||{[v]:v,[E]:E},a=y?.included,P=y?.ariaLabelForHandle,D=75,x=!0,M=(0,i.l4)(),[b,R]=(0,s.useState)(m??v),[S,O]=(0,s.useState)(D);(0,s.useEffect)(()=>{m!=null&&m!==b&&R(m)},[m,b]),(0,s.useEffect)(()=>{const L=getComputedStyle(g.current),V=L.getPropertyValue("font-weight")||"normal",H=L.getPropertyValue("font-size")||"16px",j=L.getPropertyValue("font-family")||"Arial",A="0",_=4,k=8,Q=Math.max((E+(h||0)).toString().length,(E-(h||0)).toString().length)+_,re=A.repeat(Q),Z=d(re,`${V} ${H} ${j}`);Z&&O(Z+k*2)},[E,h]);const U=(0,s.useCallback)(L=>{const V=typeof L=="number"?L:L[0];R(V),l&&l(V)},[R,l]),I=(0,s.useCallback)(L=>{let V=L;(Number.isNaN(V)||!V)&&(V=0),R(V),l&&l(V)},[l]),F=(0,f.W)(M,x,Boolean(C)),w=o(M,S),K=x?[]:[F.sliderInputVertical];return s.createElement("div",{className:(0,t.cx)(F.container,F.slider)},s.createElement(n.Global,{styles:F.slider}),s.createElement("label",{className:(0,t.cx)(F.sliderInput,...K)},s.createElement(c.Z,{min:v,max:E,step:h,defaultValue:m,value:b,onChange:U,vertical:!x,reverse:!1,ariaLabelForHandle:P,marks:C,included:a}),s.createElement("span",{className:w.numberInputWrapper,ref:g},s.createElement(u.Y,{value:b,onChange:I,max:E,min:v,step:h}))))};function d(m,l){const g=document.createElement("canvas").getContext("2d");return g?(g.font=l,g.measureText(m).width):null}const o=(m,l)=>({numberInputWrapper:t.css`
      margin-left: 10px;
      max-height: 32px;
      max-width: ${l}px;
      min-width: ${l}px;
      overflow: visible;
      width: 100%;
    `})},37565:(Y,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(66111),n=e(97379),c=e(46967);const s=({value:i,onChange:f,item:u,suffix:r})=>{const d=u.settings?.useTextarea?n.K:c.I,o=(0,t.useCallback)(m=>{let l=i??"";"key"in m?m.key==="Enter"&&!u.settings?.useTextarea&&(l=m.currentTarget.value.trim()):l=m.currentTarget.value.trim(),l!==i&&f(l===""?void 0:l)},[i,u.settings?.useTextarea,f]);return t.createElement(d,{placeholder:u.settings?.placeholder,defaultValue:i||"",rows:u.settings?.useTextarea&&u.settings.rows||5,onBlur:o,onKeyDown:o,suffix:r})}},8412:(Y,T,e)=>{"use strict";e.d(T,{T:()=>x});var t=e(9892),n=e(66111),c=e(77346),s=e(72648),i=e(68226),f=e(34177),u=e(2555);const r=({isLoading:b,children:R,className:S})=>{let O=S?n.createElement("div",{className:S},R):R;return n.createElement(n.Fragment,null,b?n.createElement(u.Z,null):O)};var d=e(9591);function o({navItem:b,renderTitle:R,actions:S,info:O,subTitle:U}){const I=(0,s.wW)(m),F=U??b.subTitle,w=R?R(b.text):n.createElement("h1",{className:I.pageTitle},b.text);return n.createElement("div",{className:I.pageHeader},n.createElement("div",{className:I.topRow},n.createElement("div",{className:I.titleInfoContainer},n.createElement("div",{className:I.title},b.img&&n.createElement("img",{className:I.img,src:b.img,alt:`logo for ${b.text}`}),w),O&&n.createElement(d.S,{info:O})),n.createElement("div",{className:I.actions},S)),F&&n.createElement("div",{className:I.subTitle},F))}const m=b=>({topRow:(0,t.css)({alignItems:"center",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:b.spacing(1,2)}),title:(0,t.css)({display:"flex",flexDirection:"row"}),actions:(0,t.css)({display:"flex",flexDirection:"row",gap:b.spacing(1)}),titleInfoContainer:(0,t.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:b.spacing(1,4),justifyContent:"space-between",maxWidth:"100%"}),pageHeader:(0,t.css)({label:"page-header",display:"flex",flexDirection:"column",gap:b.spacing(1),marginBottom:b.spacing(2)}),pageTitle:(0,t.css)({display:"flex",marginBottom:0}),subTitle:(0,t.css)({position:"relative",color:b.colors.text.secondary}),img:(0,t.css)({width:"32px",height:"32px",marginRight:b.spacing(2)})});var l=e(72142),p=e(40419),g=e(79841);function y({navItem:b}){const R=(0,s.wW)(v);return n.createElement("div",{className:R.tabsWrapper},n.createElement(l.J,null,b.children.map((S,O)=>{const U=S.icon?(0,p.toIconName)(S.icon):void 0;return!S.hideFromTabs&&n.createElement(g.O,{label:S.text,active:S.active,key:`${S.url}-${O}`,icon:U,href:S.url,suffix:S.tabSuffix})})))}const v=b=>({tabsWrapper:(0,t.css)({paddingBottom:b.spacing(3)})});var E=e(83233),h=e(14393),C=e(27876),a=e(36578),P=e(67345);function D(b,R){const S=(0,C.useSelector)(O=>O.navIndex)?.[h.Qz];(0,n.useEffect)(()=>{const O=(b?.node!==b?.main?b?.node:b?.main)??{text:"Grafana"},U=(0,P.t)(O,R,S).map(I=>I.text).reverse();U[U.length-1]=a.c.AppTitle,document.title=U.join(" - ")},[S,b,R])}const x=({navId:b,navModel:R,pageNav:S,renderTitle:O,actions:U,subTitle:I,children:F,className:w,info:K,layout:L=c.Q.Standard,toolbar:V,scrollTop:H,scrollRef:j,...A})=>{const _=(0,s.wW)(M),k=(0,E.P)(b,R),{chrome:Q}=(0,f.p)();D(k,S);const re=S??k?.node;return(0,n.useLayoutEffect)(()=>{k&&Q.update({sectionNav:k,pageNav:S,layout:L})},[k,S,Q,L]),n.createElement("div",{className:(0,t.cx)(_.wrapper,w),...A},L===c.Q.Standard&&n.createElement(i.$,{autoHeightMin:"100%",scrollTop:H,scrollRefCallback:j},n.createElement("div",{className:_.pageInner},re&&n.createElement(o,{actions:U,navItem:re,renderTitle:O,info:K,subTitle:I}),S&&S.children&&n.createElement(y,{navItem:S}),n.createElement("div",{className:_.pageContent},F))),L===c.Q.Canvas&&n.createElement(i.$,{autoHeightMin:"100%",scrollTop:H,scrollRefCallback:j},n.createElement("div",{className:_.canvasContent},V,F)),L===c.Q.Custom&&n.createElement(n.Fragment,null,V,F))};x.Contents=r;const M=b=>({wrapper:(0,t.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),pageContent:(0,t.css)({label:"page-content",flexGrow:1}),pageInner:(0,t.css)({label:"page-inner",padding:b.spacing(2),borderRadius:b.shape.borderRadius(1),border:`1px solid ${b.colors.border.weak}`,borderBottom:"none",background:b.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:b.spacing(0,0,0,0),[b.breakpoints.up("md")]:{margin:b.spacing(2,2,0,1),padding:b.spacing(3)}}),canvasContent:(0,t.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:b.spacing(2),flexBasis:"100%",flexGrow:1})})},83233:(Y,T,e)=>{"use strict";e.d(T,{P:()=>i});var t=e(90158),n=e(86245),c=e(3153),s=e(27876);function i(u,r){if(r)return r;if(u&&c.h)return(0,s.useSelector)((0,t.P1)(f,d=>(0,n.ht)(d,u??"home")))}function f(u){return u.navIndex}},9591:(Y,T,e)=>{"use strict";e.d(T,{S:()=>s});var t=e(9892),n=e(66111),c=e(72648);function s({info:f}){const u=(0,c.wW)(i);return n.createElement("div",{className:u.container},f.map((r,d)=>n.createElement(n.Fragment,{key:d},n.createElement("div",{className:u.infoItem},n.createElement("div",{className:u.label},r.label),r.value),d+1<f.length&&n.createElement("div",{"data-testid":"page-info-separator",className:u.separator}))))}const i=f=>({container:(0,t.css)({display:"flex",flexDirection:"row",gap:f.spacing(1.5),overflow:"auto"}),infoItem:(0,t.css)({...f.typography.bodySmall,display:"flex",flexDirection:"column",gap:f.spacing(.5)}),label:(0,t.css)({color:f.colors.text.secondary}),separator:(0,t.css)({borderLeft:`1px solid ${f.colors.border.weak}`})})},2555:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>s});var t=e(66111),n=e(61744);const s=({pageName:i=""})=>{const f=`Loading ${i}...`;return t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n.u,{text:f}))}},98148:(Y,T,e)=>{"use strict";e.d(T,{j:()=>s});var t=e(9892),n=e(66111),c=e(72648);function s({entity:f="Page"}){const u=(0,c.wW)(i),r=(0,c.l4)();return n.createElement("div",{className:u.container},n.createElement("h1",null,f," not found"),n.createElement("div",{className:u.subtitle},"We're looking but can't seem to find this ",f.toLowerCase(),". Try returning"," ",n.createElement("a",{href:"/",className:"external-link"},"home")," ","or seeking help on the"," ",n.createElement("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"external-link"},"community site.")),n.createElement("div",{className:u.grot},n.createElement("img",{src:`public/img/grot-404-${r.isDark?"dark":"light"}.svg`,width:"100%",alt:"grot"})))}function i(f){return{container:(0,t.css)({display:"flex",flexDirection:"column",padding:f.spacing(8,2,2,2),h1:{textAlign:"center"}}),subtitle:(0,t.css)({color:f.colors.text.secondary,fontSize:f.typography.h5.fontSize,padding:f.spacing(2,0),textAlign:"center"}),grot:(0,t.css)({maxWidth:"450px",paddingTop:f.spacing(8),margin:"0 auto"})}}},20787:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>i});var t=e(66111),n=e(68183),c=e(46967),s=e(8180);const i=t.forwardRef(({autoComplete:f,autoFocus:u,id:r,passwordHint:d,...o},m)=>{const[l,p]=(0,t.useState)(!1);return t.createElement(c.I,{id:r,autoFocus:u,autoComplete:f,...o,type:l?"text":"password",placeholder:d,"aria-label":n.wl.pages.Login.password,ref:m,suffix:t.createElement(s.h,{name:l?"eye-slash":"eye",type:"button","aria-controls":r,role:"switch","aria-checked":l,"aria-label":"Show password",onClick:()=>{p(!l)}})})});i.displayName="PasswordField"},6645:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>y});var t=e(9892),n=e(66111),c=e(94270),s=e(52081),i=e(8581),f=e(31403),u=e(7804),r=e(94080),d=e(28038),o=e(47694),m=e(73757),l=e(50796);class p extends n.Component{constructor(E){super(E),this.onTypeChanged=h=>{const C=h.value;switch(C){case m.pC.User:case m.pC.Team:this.setState({type:C,userId:0,teamId:0,role:void 0});break;case m.pC.Editor:this.setState({type:C,userId:0,teamId:0,role:m.B5.Editor});break;case m.pC.Viewer:this.setState({type:C,userId:0,teamId:0,role:m.B5.Viewer});break}},this.onUserSelected=h=>{this.setState({userId:h&&!Array.isArray(h)?h.id:0})},this.onTeamSelected=h=>{this.setState({teamId:h.value?.id&&!Array.isArray(h.value)?h.value.id:0})},this.onPermissionChanged=h=>{this.setState({permission:h.value})},this.onSubmit=async()=>{await this.props.onAddPermission(this.state),this.setState(this.getCleanState())},this.state=this.getCleanState()}getCleanState(){return{userId:0,teamId:0,role:void 0,type:m.pC.Team,permission:m.V5.View}}isValid(){switch(this.state.type){case m.pC.Team:return this.state.teamId>0;case m.pC.User:return this.state.userId>0}return!0}render(){const{onCancel:E}=this.props,h=this.state,C="min-width-20",a=this.isValid(),P=g(o.ZP.theme2);return n.createElement("div",{className:"cta-form"},n.createElement(l.P,{onClick:E}),n.createElement("h5",null,"Add Permission For"),n.createElement(c.l,{maxWidth:"none",onSubmit:this.onSubmit},()=>n.createElement(s.Lh,null,n.createElement(i.Ph,{"aria-label":"Role to add new permission to",isSearchable:!1,value:this.state.type,options:m.BL,onChange:this.onTypeChanged}),h.type===m.pC.User?n.createElement(d.f,{onSelected:this.onUserSelected,className:C}):null,h.type===m.pC.Team?n.createElement(r.c,{onSelected:this.onTeamSelected,className:C}):null,n.createElement("span",{className:P.label},"Can"),n.createElement(i.Ph,{"aria-label":"Permission level",isSearchable:!1,value:this.state.permission,options:m.vT,onChange:this.onPermissionChanged,width:25}),n.createElement(f.zx,{"data-save-permission":!0,type:"submit",disabled:!a},"Save"))))}}p.defaultProps={showPermissionLevels:!0};const g=(0,u.B)(v=>({label:t.css`
    color: ${v.colors.primary.text};
    font-weight: bold;
  `})),y=p},92158:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>l});var t=e(66111),n=e(39904),c=e(8581),s=e(31403),i=e(73757);class f extends t.Component{render(){const{item:g}=this.props,y=i.vT.find(v=>v.value===g.permission);return t.createElement("tr",{className:"gf-form-disabled"},t.createElement("td",{style:{width:"1%"}},t.createElement(n.J,{size:"lg",name:"shield"})),t.createElement("td",{style:{width:"90%"}},g.name,t.createElement("span",{className:"filter-table__weak-italic"}," (Role)")),t.createElement("td",null),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement("div",{className:"gf-form"},t.createElement(c.Ph,{"aria-label":`Permission level for "${g.name}"`,options:i.vT,onChange:()=>{},disabled:!0,value:y}))),t.createElement("td",null,t.createElement(s.zx,{"aria-label":`Remove permission for "${g.name}"`,size:"sm",icon:"lock",disabled:!0})))}}const u=p=>p?"gf-form-disabled":"";function r({item:p}){return p.userAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:p.userAvatarUrl,alt:"User avatar"}):p.teamAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:p.teamAvatarUrl,alt:"Team avatar"}):p.role==="Editor"?t.createElement(n.J,{size:"lg",name:"edit"}):t.createElement(n.J,{size:"lg",name:"eye"})}function d({item:p}){return p.userId?t.createElement("span",{className:"filter-table__weak-italic"},"(User)"):p.teamId?t.createElement("span",{className:"filter-table__weak-italic"},"(Team)"):t.createElement("span",{className:"filter-table__weak-italic"},"(Role)")}class o extends t.PureComponent{constructor(){super(...arguments),this.onPermissionChanged=g=>{this.props.onPermissionChanged(this.props.item,g.value)},this.onRemoveItem=()=>{this.props.onRemoveItem(this.props.item)}}render(){const{item:g,folderInfo:y}=this.props,v=g.dashboardId===-1&&!g.inherited,E=i.vT.find(h=>h.value===g.permission);return t.createElement("tr",{className:u(Boolean(g?.inherited))},t.createElement("td",{style:{width:"1%"}},t.createElement(r,{item:g})),t.createElement("td",{style:{width:"90%"}},g.name," ",t.createElement(d,{item:g})),t.createElement("td",null,g.inherited&&y&&t.createElement("em",{className:"muted no-wrap"},"Inherited from folder"," ",y.canViewFolderPermissions?t.createElement("a",{className:"text-link",href:`${y.url}/permissions`},y.title):y.title),v&&t.createElement("em",{className:"muted no-wrap"},"Default Permission")),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement(c.Ph,{"aria-label":`Permission level for "${g.name}"`,isSearchable:!1,options:i.vT,onChange:this.onPermissionChanged,disabled:g.inherited,value:E,width:25})),t.createElement("td",null,g.inherited?t.createElement(s.zx,{"aria-label":`Remove permission for "${g.name}" (Disabled)`,size:"sm",disabled:!0,icon:"times"}):t.createElement(s.zx,{"aria-label":`Remove permission for "${g.name}"`,size:"sm",variant:"destructive",icon:"times",onClick:this.onRemoveItem})))}}class m extends t.PureComponent{render(){const{items:g,onRemoveItem:y,onPermissionChanged:v,isFetching:E,folderInfo:h}=this.props;return t.createElement("table",{className:"filter-table gf-form-group"},t.createElement("tbody",null,t.createElement(f,{key:0,item:{name:"Admin",permission:4}}),g.map((C,a)=>t.createElement(o,{key:a+1,item:C,onRemoveItem:y,onPermissionChanged:v,folderInfo:h})),E===!0&&g.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"Loading permissions..."))):null,E===!1&&g.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"No permissions are set. Will only be accessible by admins."))):null))}}const l=m},54630:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>c});var t=e(66111);const c=()=>t.createElement("div",null,t.createElement("h5",null,"What are Permissions?"),t.createElement("p",null,"An Access Control List (ACL) model is used to limit access to Dashboard Folders. A user or a Team can be assigned permissions for a folder or for a single dashboard."))},19117:(Y,T,e)=>{"use strict";e.d(T,{h:()=>i});var t=e(9892),n=e(66111),c=e(2631),s=e(72648);const i=n.memo(n.forwardRef(({className:r,children:d,markdown:o,onRemove:m,...l},p)=>{const g=(0,s.wW)(u);return n.createElement("div",{className:(0,t.cx)(g.wrapper,r),...l,ref:p},o&&f(o),d)}));function f(r){const d=(0,c.a)(r);return n.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:d}})}i.displayName="OperationRowHelp";const u=r=>{const d=r.shape.borderRadius();return{wrapper:t.css`
      padding: ${r.spacing(2)};
      border: 2px solid ${r.colors.background.secondary};
      border-top: none;
      border-radius: 0 0 ${d} ${d};
      position: relative;
      top: -4px;
    `}}},1029:(Y,T,e)=>{"use strict";e.d(T,{V:()=>r,y:()=>u});var t=e(9892),n=e(66111),c=e(68183),s=e(72648),i=e(8180);function f(o){const m=(0,s.wW)(d);return n.createElement("div",{className:(0,t.cx)(m.icon,"active"in o&&o.active&&m.active)},n.createElement(i.h,{name:o.icon,tooltip:o.title,className:m.icon,disabled:!!o.disabled,onClick:o.onClick,type:"button","aria-label":c.wl.components.QueryEditorRow.actionButton(o.title),..."active"in o&&{"aria-pressed":o.active}}))}function u(o){return n.createElement(f,{...o})}const r=o=>n.createElement(f,{...o}),d=o=>({icon:t.css`
      display: flex;
      position: relative;
      color: ${o.colors.text.secondary};
    `,active:t.css`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: ${o.shape.radius.default};
        bottom: -8px;
        background-image: ${o.colors.gradients.brandHorizontal} !important;
      }
    `})},67254:(Y,T,e)=>{"use strict";e.d(T,{t:()=>l});var t=e(9892),n=e(66111),c=e(36826),s=e(71828),i=e(41818),f=e(72648),u=e(61970),r=e(8180),d=e(39904);const o=({actionsElement:g,disabled:y,draggable:v,dragHandleProps:E,headerElement:h,isContentVisible:C,onRowToggle:a,reportDragMousePosition:P,title:D,id:x})=>{const M=(0,f.wW)(m);return n.createElement("div",{className:M.header},n.createElement("div",{className:M.column},n.createElement(r.h,{name:C?"angle-down":"angle-right",title:"toggle collapse and expand","aria-label":"toggle collapse and expand query row",className:M.collapseIcon,onClick:a,type:"button","aria-expanded":C,"aria-controls":x}),D&&n.createElement("div",{className:M.titleWrapper,onClick:a,"aria-label":"Query operation row title"},n.createElement("div",{className:(0,t.cx)(M.title,y&&M.disabled)},D)),h),n.createElement("div",{className:M.column},g,v&&n.createElement(d.J,{title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:M.dragIcon,onMouseMove:P,...E})))},m=g=>({header:t.css`
    label: Header;
    padding: ${g.spacing(.5,.5)};
    border-radius: ${g.shape.borderRadius(1)};
    background: ${g.colors.background.secondary};
    min-height: ${g.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:t.css`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:t.css`
    cursor: grab;
    color: ${g.colors.text.disabled};
    margin: ${g.spacing(0,.5)};
    &:hover {
      color: ${g.colors.text};
    }
  `,collapseIcon:t.css`
    margin-left: ${g.spacing(.5)};
    color: ${g.colors.text.disabled};
    }
  `,titleWrapper:t.css`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${g.spacing(.5)};
  `,title:t.css`
    font-weight: ${g.typography.fontWeightBold};
    color: ${g.colors.text.link};
    margin-left: ${g.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:t.css`
    color: ${g.colors.text.disabled};
  `});o.displayName="QueryOperationRowHeader";function l({children:g,actions:y,title:v,headerElement:E,onClose:h,onOpen:C,isOpen:a,disabled:P,draggable:D,index:x,id:M}){const[b,R]=(0,n.useState)(a!==void 0?a:!0),S=(0,f.wW)(p),O=(0,n.useCallback)(()=>{R(!b)},[b,R]),U=(0,n.useCallback)(K=>{if(K.defaultPrevented){const L=K.currentTarget.getBoundingClientRect(),V=K.clientX-L.left,H=K.clientY-L.top;(0,i.ff)("query_row_reorder_drag_position",{x:V/L.width,y:H/L.height,width:L.width,height:L.height})}},[]);(0,s.Z)(()=>{b?C&&C():h&&h()},[b]);const I={isOpen:b,onOpen:()=>{R(!0)},onClose:()=>{R(!1)}},F=y&&u.renderOrCallToRender(y,I),w=E&&u.renderOrCallToRender(E,I);return D?n.createElement(c._l,{draggableId:M,index:x},K=>n.createElement(n.Fragment,null,n.createElement("div",{ref:K.innerRef,className:S.wrapper,...K.draggableProps},n.createElement("div",null,n.createElement(o,{id:M,actionsElement:F,disabled:P,draggable:!0,dragHandleProps:K.dragHandleProps,headerElement:w,isContentVisible:b,onRowToggle:O,reportDragMousePosition:U,title:v})),b&&n.createElement("div",{className:S.content},g)))):n.createElement("div",{className:S.wrapper},n.createElement(o,{id:M,actionsElement:F,disabled:P,draggable:!1,headerElement:w,isContentVisible:b,onRowToggle:O,reportDragMousePosition:U,title:v}),b&&n.createElement("div",{className:S.content},g))}const p=g=>({wrapper:t.css`
      margin-bottom: ${g.spacing(2)};
    `,content:t.css`
      margin-top: ${g.spacing(.5)};
      margin-left: ${g.spacing(3)};
    `});l.displayName="QueryOperationRow"},17069:(Y,T,e)=>{"use strict";e.d(T,{I:()=>ue});var t=e(66111),n=e(52081),c=e(67487),s=e(94437),i=e(9892),f=e(72648),u=e(39904),r=e(61860),d=e(46967),o=e(73267),m=e(85419),l=e(27501);const p=(0,t.forwardRef)(({children:te,iconName:me},q)=>{const se=(0,f.wW)(g);return t.createElement("div",{className:se.container,ref:q},me&&t.createElement(u.J,{name:me,size:"xs"}),te)});p.displayName="ValueContainer";const g=te=>{const{prefix:me}=(0,d.H)({theme:te}),{multiValueContainer:q}=(0,l.D)(te);return{container:(0,i.cx)(me,q,i.css`
        position: relative;
        padding: ${te.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${te.spacing(.5)};
        }
      `)}},y=300,v=360,E=260,h=te=>te.stopPropagation(),C=({appliedRoles:te,basicRole:me,disabled:q,isFocused:se,query:ae,showBasicRole:pe,onOpen:de,onClose:Me,onQueryChange:Ke,...st})=>{const Ie=(0,f.wW)(dt=>P(dt,!1,!!se,!!q,!1)),Ve=(0,t.useRef)(null);(0,t.useEffect)(()=>{se&&Ve.current?.focus()});const _e=dt=>{const Oe=dt.target?.value;Ke(Oe)},tt=te.length;return se?t.createElement("div",{className:Ie.wrapper},pe&&t.createElement(p,null,me),te.map(dt=>t.createElement(p,{key:dt.uid},dt.displayName||dt.name)),!q&&t.createElement("input",{...st,className:Ie.input,ref:Ve,onMouseDown:h,onChange:_e,"data-testid":"role-picker-input",placeholder:se?"Select role":"",value:ae}),t.createElement("div",{className:Ie.suffix},t.createElement(u.J,{name:"angle-up",className:Ie.dropdownIndicator,onMouseDown:Me}))):t.createElement("div",{className:(0,i.cx)(Ie.wrapper,Ie.selectedRoles),onMouseDown:de},pe&&t.createElement(p,null,me),t.createElement(a,{appliedRoles:te,numberOfRoles:tt,showBuiltInRole:pe}))};C.displayName="RolePickerInput";const a=({showBuiltInRole:te,numberOfRoles:me,appliedRoles:q})=>{const se=(0,f.wW)(ae=>D(ae));return t.createElement(t.Fragment,null,me?t.createElement(r.u,{content:t.createElement("div",{className:se.tooltip},q?.map(ae=>t.createElement("p",{key:ae.uid},ae.displayName)))},t.createElement(p,null,`${te?"+":""}${me} role${me>1?"s":""}`)):!te&&t.createElement(p,null,"No roles assigned"))},P=(te,me,q,se,ae)=>{const pe=(0,d.H)({theme:te,invalid:me});return{wrapper:(0,i.cx)(pe.wrapper,(0,o.RK)(te,me),q&&i.css`
          ${m.focusCss(te.v1)}
        `,se&&pe.inputDisabled,i.css`
        min-width: ${v}px;
        min-height: 32px;
        height: auto;
        flex-direction: row;
        padding-right: 24px;
        max-width: 100%;
        align-items: center;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        position: relative;
        box-sizing: border-box;
        cursor: default;
      `,ae&&i.css`
          padding-left: 0;
        `),input:(0,i.cx)((0,o.RK)(te,me),i.css`
        max-width: 120px;
        border: none;
        cursor: ${q?"default":"pointer"};
      `),suffix:pe.suffix,dropdownIndicator:i.css`
      cursor: pointer;
    `,selectedRoles:i.css`
      display: flex;
      align-items: center;
      cursor: ${se?"not-allowed":"pointer"};
    `,tooltip:i.css`
      p {
        margin-bottom: ${te.spacing(.5)};
      }
    `}},D=te=>({tooltip:i.css`
    p {
      margin-bottom: ${te.spacing(.5)};
    }
  `});var x=e(68226),M=e(2594),b=e(31403),R=e(27876),S=e(58255),O=e(85511);const U=te=>({menuWrapper:i.css`
      display: flex;
      max-height: 650px;
      position: absolute;
      z-index: ${te.zIndex.dropdown};
      overflow: hidden;
      min-width: auto;
    `,menu:i.css`
      min-width: ${E}px;

      & > div {
        padding-top: ${te.spacing(1)};
      }
    `,menuLeft:i.css`
      right: 0;
      flex-direction: row-reverse;
    `,subMenu:i.css`
      height: 100%;
      min-width: ${E}px;
      display: flex;
      flex-direction: column;
      border-left: 1px solid ${te.components.input.borderColor};

      & > div {
        padding-top: ${te.spacing(1)};
      }
    `,subMenuLeft:i.css`
      border-right: 1px solid ${te.components.input.borderColor};
      border-left: unset;
    `,groupHeader:i.css`
      padding: ${te.spacing(0,4.5)};
      display: flex;
      align-items: center;
      color: ${te.colors.text.primary};
      font-weight: ${te.typography.fontWeightBold};
    `,container:i.css`
      padding: ${te.spacing(1)};
      border: 1px ${te.colors.border.weak} solid;
      border-radius: ${te.shape.borderRadius(1)};
      background-color: ${te.colors.background.primary};
      z-index: ${te.zIndex.modal};
    `,menuSection:i.css`
      margin-bottom: ${te.spacing(2)};
    `,menuOptionCheckbox:i.css`
      display: flex;
      margin: ${te.spacing(0,1,0,.25)};
    `,menuButtonRow:i.css`
      background-color: ${te.colors.background.primary};
      padding: ${te.spacing(1)};
    `,menuOptionBody:i.css`
      font-weight: ${te.typography.fontWeightRegular};
      padding: ${te.spacing(0,1.5,0,0)};
    `,menuOptionDisabled:i.css`
      color: ${te.colors.text.disabled};
      cursor: not-allowed;
    `,menuOptionExpand:i.css`
      position: absolute;
      right: ${te.spacing(1.25)};
      color: ${te.colors.text.disabled};

      &:after {
        content: '>';
      }
    `,menuOptionInfoSign:i.css`
      color: ${te.colors.text.disabled};
    `,basicRoleSelector:i.css`
      margin: ${te.spacing(1,1.25,1,1)};
    `,subMenuPortal:i.css`
      height: 100%;
      > div {
        height: 100%;
      }
    `,subMenuButtonRow:i.css`
      background-color: ${te.colors.background.primary};
      padding: ${te.spacing(1)};
    `,checkboxPartiallyChecked:i.css`
      input {
        &:checked + span {
          &:after {
            border-width: 0 3px 0px 0;
            transform: rotate(90deg);
          }
        }
      }
    `}),I=(0,t.memo)(t.forwardRef(({name:te,value:me,isFocused:q,isSelected:se,partiallySelected:ae,disabled:pe,onChange:de,onClick:Me,onOpenSubMenu:Ke,onCloseSubMenu:st,children:Ie,root:Ve},_e)=>{const tt=(0,f.l4)(),dt=(0,l.D)(tt),Oe=(0,f.wW)(U),ye=(0,i.cx)(dt.option,q&&dt.optionFocused,pe&&Oe.menuOptionDisabled),Pe=lt=>{pe||me&&de(me)},be=lt=>{Me&&Me(me)},Be=()=>{Ke&&Ke(me)},ze=()=>{st&&st()};return t.createElement("div",{onMouseEnter:Be,onMouseLeave:ze},t.createElement("div",{ref:_e,className:ye,"aria-label":"Role picker option",onClick:be},t.createElement(S.X,{value:se,className:(0,i.cx)(Oe.menuOptionCheckbox,{[Oe.checkboxPartiallyChecked]:ae}),onChange:Pe,disabled:pe}),t.createElement("div",{className:(0,i.cx)(dt.optionBody,Oe.menuOptionBody)},t.createElement("span",null,te),t.createElement("span",{className:Oe.menuOptionExpand})),Ve&&Ie&&t.createElement(O.h_,{className:Oe.subMenuPortal,root:Ve},Ie)))}));I.displayName="RoleMenuGroupOption";const F=t.forwardRef(({data:te,isFocused:me,isSelected:q,disabled:se,onChange:ae,hideDescription:pe},de)=>{const Me=(0,f.l4)(),Ke=(0,l.D)(Me),st=(0,f.wW)(U),Ie=(0,i.cx)(Ke.option,me&&Ke.optionFocused,se&&st.menuOptionDisabled),Ve=_e=>{se||(_e.preventDefault(),_e.stopPropagation(),ae(te))};return t.createElement("div",{ref:de,className:Ie,"aria-label":"Role picker option",onClick:Ve},t.createElement(S.X,{value:q,className:st.menuOptionCheckbox,onChange:Ve,disabled:se}),t.createElement("div",{className:(0,i.cx)(Ke.optionBody,st.menuOptionBody)},t.createElement("span",null,te.displayName||te.name),!pe&&te.description&&t.createElement("div",{className:Ke.optionDescription},te.description)),te.description&&t.createElement(r.u,{content:te.description},t.createElement(u.J,{name:"info-circle",className:st.menuOptionInfoSign})))});F.displayName="RoleMenuOption";var w=e(25310);const K=({options:te,selectedOptions:me,disabledOptions:q,onSelect:se,onClear:ae,showOnLeft:pe})=>{const de=(0,f.l4)(),Me=(0,l.D)(de),Ke=(0,f.wW)(U),st=async()=>{ae&&ae()};return t.createElement("div",{className:(0,i.cx)(Ke.subMenu,{[Ke.subMenuLeft]:pe}),"aria-label":"Role picker submenu"},t.createElement(x.$,{autoHide:!1,autoHeightMax:`${y}px`,hideHorizontalTrack:!0},t.createElement("div",{className:Me.optionBody},te.map((Ie,Ve)=>t.createElement(F,{data:Ie,key:Ve,isSelected:!!(Ie.uid&&(me.find(_e=>_e.uid===Ie.uid)||q?.find(_e=>_e.uid===Ie.uid))),disabled:!!(Ie.uid&&q?.find(_e=>_e.uid===Ie.uid))||(0,w.r)(Ie),onChange:se,hideDescription:!0})))),t.createElement("div",{className:Ke.subMenuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(b.zx,{size:"sm",fill:"text",onClick:st},"Clear"))))},L=t.forwardRef(({roles:te,renderedName:me,showGroups:q,optionGroups:se,onGroupChange:ae,groupSelected:pe,groupPartiallySelected:de,subMenuNode:Me,selectedOptions:Ke,onRoleChange:st,onClearSubMenu:Ie,showOnLeftSubMenu:Ve},_e)=>{const[tt,dt]=(0,t.useState)(!1),[Oe,ye]=(0,t.useState)(""),Pe=(0,f.l4)(),be=(0,l.D)(Pe),Be=(0,f.wW)(U),ze=(0,t.useCallback)(ht=>{ye(ht),dt(!0)},[]),lt=(0,t.useCallback)(()=>{dt(!1),ye("")},[]);return t.createElement("div",null,te.length>0&&t.createElement("div",{className:Be.menuSection},t.createElement("div",{className:Be.groupHeader},me),t.createElement("div",{className:be.optionBody}),q&&se?.length?se.map(ht=>t.createElement(I,{key:ht.value,name:ht.name,value:ht.value,isSelected:pe(ht.value)||de(ht.value),partiallySelected:de(ht.value),disabled:ht.options?.every(w.r),onChange:ae,onOpenSubMenu:ze,onCloseSubMenu:lt,root:Me,isFocused:tt&&Oe===ht.value},tt&&Oe===ht.value&&t.createElement(K,{options:ht.options,selectedOptions:Ke,onSelect:st,onClear:()=>Ie(Oe),showOnLeft:Ve}))):te.map(ht=>t.createElement(F,{data:ht,key:ht.uid,isSelected:!!(ht.uid&&Ke.find(vt=>vt.uid===ht.uid)),disabled:(0,w.r)(ht),onChange:st,hideDescription:!0}))))});L.displayName="RoleMenuGroupsSection";var V=(te=>(te.fixed="fixed",te.custom="custom",te.plugin="plugin",te))(V||{});const j=Object.values(R.OrgRole).map(te=>({label:te,value:te})),A={ldap:"LDAP",current:"Current org"},_=({basicRole:te,options:me,appliedRoles:q,showGroups:se,basicRoleDisabled:ae,showBasicRole:pe,onSelect:de,onBasicRoleSelect:Me,onUpdate:Ke,updateDisabled:st,offset:Ie,apply:Ve})=>{const[_e,tt]=(0,t.useState)(q),[dt,Oe]=(0,t.useState)(te),[ye,Pe]=(0,t.useState)({}),be=(0,t.useRef)(null),Be=(0,f.l4)(),ze=(0,l.D)(Be),lt=(0,f.wW)(U);(0,t.useEffect)(()=>{de(_e)},[_e,de]),(0,t.useEffect)(()=>{Me&&dt&&Me(dt)},[dt,Me]),(0,t.useEffect)(()=>{const Qe=me.filter(k).sort(ge),Le=me.filter(Q).sort(ge),Ue=me.filter(re).sort(ge),ve={fixed:Z(Le).sort((Se,Fe)=>Se.name.localeCompare(Fe.name)),custom:Z(Qe).sort((Se,Fe)=>Se.name.localeCompare(Fe.name)),plugin:Z(Ue).sort((Se,Fe)=>Se.name.localeCompare(Fe.name))};Pe({fixed:{groupType:"fixed",optionGroup:ve.fixed,renderedName:"Fixed roles",roles:Le},custom:{groupType:"custom",optionGroup:ve.custom,renderedName:"Custom roles",roles:Qe},plugin:{groupType:"plugin",optionGroup:ve.plugin,renderedName:"Plugin roles",roles:Ue}})},[me]);const ht=Qe=>{const Le=[];for(const Ue of _e)oe(Ue)===Qe&&Le.push(Ue);return Le},vt=(Qe,Le)=>{const Ue=ht(Le),ve=ye[Qe]?.optionGroup.find(Se=>Se.value===Le);return Ue.length>0&&Ue.length>=ve.options.length},bt=(Qe,Le)=>{const Ue=ht(Le),ve=ye[Qe]?.optionGroup.find(Se=>Se.value===Le);return Ue.length>0&&Ue.length<ve.options.length},ct=Qe=>{_e.find(Le=>Le.uid===Qe.uid)?tt(_e.filter(Le=>Le.uid!==Qe.uid)):tt([..._e,Qe])},Pt=(Qe,Le)=>{const Ue=ye[Qe]?.optionGroup.find(ve=>ve.value===Le);if(Ue)if(vt(Qe,Le)||bt(Qe,Le))tt(_e.filter(ve=>!Ue.options.find(Se=>ve.uid===Se.uid)));else{const ve=Ue.options.filter(Fe=>Fe.delegatable),Se=_e.filter(Fe=>!Ue.options.find(je=>Fe.uid===je.uid));tt([...Se,...ve])}},ie=Qe=>{Oe(Qe)},Ce=async()=>{tt([])},Ne=Qe=>{const Le=_e.filter(Ue=>oe(Ue)!==Qe);tt(Le)},Ze=()=>{Ke(_e,dt)};return t.createElement("div",{className:(0,i.cx)(ze.menu,lt.menuWrapper,{[lt.menuLeft]:Ie.horizontal>0},i.css`
          bottom: ${Ie.vertical>0?`${Ie.vertical}px`:"unset"};
          top: ${Ie.vertical<0?`${Math.abs(Ie.vertical)}px`:"unset"};
        `)},t.createElement("div",{className:lt.menu,"aria-label":"Role picker menu"},t.createElement(x.$,{autoHide:!1,autoHeightMax:`${y}px`,hideHorizontalTrack:!0,hideVerticalTrack:!0},pe&&t.createElement("div",{className:lt.menuSection},t.createElement("div",{className:lt.groupHeader},"Basic roles"),t.createElement(M.S,{className:lt.basicRoleSelector,options:j,value:dt,onChange:ie,fullWidth:!0,disabled:ae})),Object.entries(ye).map(([Qe,Le])=>t.createElement(L,{key:Qe,roles:Le.roles,renderedName:Le.renderedName,showGroups:se,optionGroups:Le.optionGroup,groupSelected:Ue=>vt(Le.groupType,Ue),groupPartiallySelected:Ue=>bt(Le.groupType,Ue),onGroupChange:Ue=>Pt(Le.groupType,Ue),subMenuNode:be?.current,selectedOptions:_e,onRoleChange:ct,onClearSubMenu:Ne,showOnLeftSubMenu:Ie.horizontal>0}))),t.createElement("div",{className:lt.menuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(b.zx,{size:"sm",fill:"text",onClick:Ce,disabled:st},"Clear all"),t.createElement(b.zx,{size:"sm",onClick:Ze,disabled:st},Ve?"Apply":"Update")))),t.createElement("div",{ref:be}))},k=te=>!te.name?.startsWith("fixed:")&&!te.name.startsWith("plugins:"),Q=te=>te.name?.startsWith("fixed:"),re=te=>te.name?.startsWith("plugins:"),Z=te=>{const me={};return te.forEach(se=>{const ae=oe(se),pe=G(se);me[ae]||(me[ae]={name:pe,roles:[]}),me[ae].roles.push(se)}),Object.entries(me).map(([se,ae])=>({name:A[se]||ne(ae.name),value:se,options:ae.roles.sort(ge)}))},oe=te=>{const me=le(te),q=G(te);return`${me}:${q}`},G=te=>te.group||"Other",le=te=>{const me=te.name.indexOf(":");return me<0?"unknown":te.name.substring(0,me)},ge=(te,me)=>te.name.localeCompare(me.name),ne=te=>te.slice(0,1).toUpperCase()+te.slice(1),ue=({basicRole:te,appliedRoles:me,roleOptions:q,disabled:se,isLoading:ae,basicRoleDisabled:pe,showBasicRole:de,onRolesChange:Me,onBasicRoleChange:Ke,canUpdateRoles:st=!0,apply:Ie=!1,maxWidth:Ve=v})=>{const[_e,tt]=(0,t.useState)(!1),[dt,Oe]=(0,t.useState)(me),[ye,Pe]=(0,t.useState)(te),[be,Be]=(0,t.useState)(""),[ze,lt]=(0,t.useState)({vertical:0,horizontal:0}),ht=(0,t.useRef)(null);(0,t.useEffect)(()=>{Pe(te),Oe(me)},[me,te]),(0,t.useEffect)(()=>{const Qe=ht?.current?.getBoundingClientRect();if(!Qe||!_e)return;const{bottom:Le,top:Ue,left:ve,right:Se,width:Fe}=Qe,je=window.innerHeight-Le,Ge=Le-Ue+10,gt=Se-ve;let mt=-gt,Ye=-Ge;je<y+20&&(Ye=50+(y-je)-Ge),window.innerWidth-Se<Fe&&Fe<2*E&&(mt=gt),lt({horizontal:mt,vertical:Ye})},[_e,dt]);const vt=(0,t.useCallback)(Qe=>{se||(Qe.preventDefault(),Qe.stopPropagation(),tt(!0))},[tt,se]),bt=(0,t.useCallback)(()=>{tt(!1),Be(""),Oe(me),Pe(te)},[me,te]),ct=()=>_e&&bt(),Pt=Qe=>{Be(Qe||"")},ie=Qe=>{Oe(Qe)},Ce=Qe=>{Pe(Qe)},Ne=(Qe,Le)=>{Ke&&Le&&Le!==te&&Ke(Le),st&&Me(Qe),Be(""),tt(!1)},Ze=()=>{const Qe=q.map(Le=>({...Le,delegatable:st&&Le.delegatable}));return be&&be.trim()!==""?Qe.filter(Le=>Le.name?.toLowerCase().includes(be.toLowerCase())):Qe};return ae?t.createElement(n.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(c.$,{size:16})):t.createElement("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:Ve},ref:ht},t.createElement(s.L,{onClick:ct},t.createElement(C,{basicRole:ye,appliedRoles:dt,query:be,onQueryChange:Pt,onOpen:vt,onClose:bt,isFocused:_e,disabled:se,showBasicRole:de}),_e&&t.createElement(_,{options:Ze(),basicRole:ye,appliedRoles:me,onBasicRoleSelect:Ce,onSelect:ie,onUpdate:Ne,showGroups:be.length===0||be.trim()==="",basicRoleDisabled:pe,showBasicRole:de,updateDisabled:pe&&!st,apply:Ie,offset:ze})))}},66226:(Y,T,e)=>{"use strict";e.d(T,{R:()=>u});var t=e(66111),n=e(13821),c=e(77582),s=e(27876),i=e(17069),f=e(11630);const u=({basicRole:r,userId:d,orgId:o,onBasicRoleChange:m,roleOptions:l,disabled:p,basicRoleDisabled:g,apply:y=!1,onApplyRoles:v,pendingRoles:E,maxWidth:h})=>{const[{loading:C,value:a=[]},P]=(0,n.Z)(async()=>{try{if(y&&Boolean(E?.length))return E;if(c.Vt.hasPermission(s.AccessControlAction.ActionUserRolesList))return await(0,f.kt)(d,o)}catch{console.error("Error loading options")}return[]},[o,d,E]);(0,t.useEffect)(()=>{o&&P()},[o,P,E]);const D=async M=>{y?v&&v(M,d,o):(await(0,f.hB)(M,d,o),await P())},x=c.Vt.hasPermission(s.AccessControlAction.ActionUserRolesAdd)&&c.Vt.hasPermission(s.AccessControlAction.ActionUserRolesRemove);return t.createElement(i.I,{appliedRoles:a,basicRole:r,onRolesChange:D,onBasicRoleChange:m,roleOptions:l,isLoading:C,disabled:p,basicRoleDisabled:g,showBasicRole:!0,apply:y,canUpdateRoles:x,maxWidth:h})}},11630:(Y,T,e)=>{"use strict";e.d(T,{_C:()=>f,hB:()=>i,kt:()=>s,u7:()=>u,ul:()=>c});var t=e(54899),n=e(25310);const c=async(r,d)=>{let o="/api/access-control/roles?delegatable=true";r&&(o+=`&targetOrgId=${r}`);const m=await(0,t.i)().get(o);return!m||!m.length?[]:m.map(n.w)},s=async(r,d)=>{let o=`/api/access-control/users/${r}/roles`;d&&(o+=`?targetOrgId=${d}`);try{const m=await(0,t.i)().get(o);return!m||!m.length?[]:m.map(n.w)}catch(m){return(0,t.kW)(m)&&(m.isHandled=!0),[]}},i=(r,d,o)=>{let m=`/api/access-control/users/${d}/roles`;o&&(m+=`?targetOrgId=${o}`);const l=r.flatMap(p=>p.uid);return(0,t.i)().put(m,{orgId:o,roleUids:l})},f=async(r,d)=>{let o=`/api/access-control/teams/${r}/roles`;d&&(o+=`?targetOrgId=${d}`);try{const m=await(0,t.i)().get(o);return!m||!m.length?[]:m.map(n.w)}catch(m){return(0,t.kW)(m)&&(m.isHandled=!0),[]}},u=(r,d,o)=>{let m=`/api/access-control/teams/${d}/roles`;o&&(m+=`?targetOrgId=${o}`);const l=r.flatMap(p=>p.uid);return(0,t.i)().put(m,{orgId:o,roleUids:l})}},25310:(Y,T,e)=>{"use strict";e.d(T,{r:()=>t,w:()=>n});const t=c=>c.delegatable!==void 0&&!c.delegatable,n=c=>{const s="fixed:";if(!c.displayName&&c.name.startsWith(s)){let i="";i=c.name.replace(s,"").replace(/:/g," "),c.displayName=i}return c}},16964:(Y,T,e)=>{"use strict";e.d(T,{V:()=>s});var t=e(66111),n=e(81910),c=e(63418);const s=u=>t.createElement(n.Z,{...u,cacheRequests:!0,preProcessor:f});let i=new Map;function f(u){let r=i.get(u);return r||(r=c.QX.sanitizeSVGContent(u),i.set(u,r)),r}},99661:(Y,T,e)=>{"use strict";e.d(T,{o:()=>d});var t=e(99151),n=e.n(t),c=e(66111),s=e(8581),i=e(29930);const f=(o="General",m)=>`${o}/${m}`;async function u(o=""){return i.ae.search({type:"dash-db",query:o,limit:100}).then(m=>m.map(l=>({value:{uid:l.uid,title:l.title,folderTitle:l.folderTitle,folderUid:l.folderUid},label:f(l?.folderTitle,l.title)})))}const r=n()(u,250,{leading:!0}),d=({value:o,onChange:m,placeholder:l="Select dashboard",noOptionsMessage:p="No dashboards found",...g})=>{const[y,v]=(0,c.useState)();(0,c.useEffect)(()=>{!o||o===y?.value?.uid||(async()=>{const h=await i.ae.getDashboardByUid(o);h.dashboard&&v({value:{uid:h.dashboard.uid,title:h.dashboard.title,folderTitle:h.meta.folderTitle,folderUid:h.meta.folderUid},label:f(h.meta?.folderTitle,h.dashboard.title)})})()},[o]);const E=(0,c.useCallback)(h=>{v(h),m?.(h?.value)},[m,v]);return c.createElement(s.qb,{loadOptions:r,onChange:E,placeholder:l,noOptionsMessage:p,value:y,defaultOptions:!0,...g})}},79658:(Y,T,e)=>{"use strict";e.d(T,{Es:()=>C});var t=e(9892),n=e(99151),c=e.n(n),s=e(66111),i=e(59679),f=e(4063),u=e(68183),r=e(35645),d=e(72648),o=e(46967),m=e(8581),l=e(18271),p=e(35287),g=e(82002),y=e(50946),v=e(27876);const E="+ Add new",h="-10";function C(x){const{dashboardId:M,allowEmpty:b,onChange:R,filter:S,enableCreateNew:O,inputId:U,onClear:I,enableReset:F,initialFolderUid:w,initialTitle:K="",permissionLevel:L=v.PermissionLevelString.Edit,rootName:V,showRoot:H=!0,skipInitialLoad:j,searchQueryType:A,customAdd:_,folderWarning:k}=x,Q=V??r.v.featureToggles.nestedFolders?"Dashboards":"General",[re,Z]=(0,s.useState)(null),[oe,G]=(0,s.useState)(!1),[le,ge]=(0,s.useState)(""),[ne,ue]=(0,s.useState)(re?.title??""),te=(0,d.wW)(D),me=typeof I=="function",q=(0,s.useCallback)(async tt=>{const dt=await(0,y.ZL)(tt,L,A),ye=a(dt,S);return(g.Vt.hasAccess(v.AccessControlAction.DashboardsWrite,g.Vt.isEditor)||g.Vt.hasAccess(v.AccessControlAction.DashboardsCreate,g.Vt.isEditor))&&Q?.toLowerCase().startsWith(tt.toLowerCase())&&H&&ye.unshift({label:Q,value:""}),F&&tt===""&&K!==""&&!ye.find(be=>be.label===K)&&ye.unshift({label:K,value:w}),O&&Boolean(_)?[...ye,{value:h,label:E,title:tt}]:ye},[F,w,K,L,Q,H,A,S,O,_]),se=(0,s.useMemo)(()=>c()(q,300,{leading:!0}),[q]),ae=async()=>{const tt={label:K,value:void 0},dt={label:Q,value:""},Oe=await q("");let ye=null;w!=null?ye=Oe.find(Pe=>Pe.value===w)||null:F&&K?ye=tt:w&&(ye=Oe.find(Pe=>Pe.id===w)||null),!ye&&!b&&(g.Vt.isEditor?ye=dt:!!M?ye=tt:ye=Oe.length>0?Oe[0]:tt),!oe&&Z(ye)};(0,s.useEffect)(()=>{re&&re.value!==w&&!oe&&re.value&&re.label&&R({uid:re.value,title:re.label})},[re,w]),(0,i.Z)(async()=>{if(j){const tt=await P({getFolder:y.Pb,folderUid:w,folderName:K});Z(tt)}await ae()},[j,w,K]),(0,s.useEffect)(()=>{re&&re.id===h&&G(!0)},[re]);const pe=(0,s.useCallback)((tt,dt)=>{if(tt?.value===h)Z({id:h,title:le}),ue(le);else{if(tt||(tt={value:"",label:Q}),dt.action==="clear"&&I){I();return}Z(tt),R({uid:tt.value,title:tt.label})}},[R,I,Q,le]),de=(0,s.useCallback)(async tt=>{if(k?.warningCondition(tt))return!1;const dt=await(0,y.L6)({title:tt});let Oe={value:"",label:"Not created"};return dt.uid?(l.Z.emit(f.SI.alertSuccess,["Folder Created","OK"]),Oe={value:dt.uid,label:dt.title},Z(dt),pe(Oe,{action:"create-option",option:Oe})):l.Z.emit(f.SI.alertError,["Folder could not be created"]),Oe},[k,pe]),Me=(0,s.useCallback)(tt=>{const dt=Boolean(_?.disallowValues);if(tt.key==="Enter"&&dt&&!_?.isAllowedValue(ne)){tt.preventDefault();return}switch(tt.key){case"Enter":{de(re?.title),G(!1);break}case"Escape":Z({value:"",label:Q}),G(!1)}},[_?.disallowValues,_?.isAllowedValue,ne,de,re?.title,Q]),Ke=tt=>{const dt=tt.currentTarget.value;ue(dt),Z({id:void 0,title:dt})},st=()=>{Z({value:"",label:Q}),G(!1)},Ie=(tt,{action:dt})=>{dt==="input-change"&&ge(Oe=>tt),dt==="menu-close"&&ge(Oe=>tt)},Ve=()=>k?.warningCondition(ne)?s.createElement(k.warningComponent,null):null,_e=()=>k?.warningCondition(le)?s.createElement(k.warningComponent,null):null;return oe?s.createElement(s.Fragment,null,s.createElement(Ve,null),s.createElement("div",{className:te.newFolder},"Press enter to create the new folder."),s.createElement(o.I,{"aria-label":"aria-label",width:30,autoFocus:!0,value:ne,onChange:Ke,onKeyDown:Me,placeholder:"Press enter to confirm new folder.",onBlur:st})):s.createElement("div",{"data-testid":u.wl.components.FolderPicker.containerV2},s.createElement(_e,null),s.createElement(m.gY,{inputId:U,"aria-label":u.wl.components.FolderPicker.input,loadingMessage:(0,p.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:re,inputValue:le,onInputChange:Ie,value:re,allowCustomValue:O&&!Boolean(_),loadOptions:se,onChange:pe,onCreateOption:de,isClearable:me}))}function a(x,M){return(M?M(x):x).map(R=>({label:R.title,value:R.uid}))}async function P({folderName:x,folderUid:M,getFolder:b}){if(M==null)throw new Error("folderUid is not found.");return x?{label:x,value:M}:{label:(await b(M)).title,value:M}}const D=x=>({newFolder:t.css`
    color: ${x.colors.warning.main};
    font-size: ${x.typography.bodySmall.fontSize};
    padding-bottom: ${x.spacing(1)};
  `})},94080:(Y,T,e)=>{"use strict";e.d(T,{c:()=>f});var t=e(82897),n=e.n(t),c=e(66111),s=e(54899),i=e(8581);class f extends c.Component{constructor(r){super(r),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(r){return this.setState({isLoading:!0}),(0,t.isNil)(r)&&(r=""),(0,s.i)().get(`/api/teams/search?perpage=100&page=1&query=${r}`).then(d=>{const o=d.teams.map(m=>({value:m,label:m.name,imgUrl:m.avatarUrl}));return this.setState({isLoading:!1}),o})}render(){const{onSelected:r,className:d}=this.props,{isLoading:o}=this.state;return c.createElement("div",{className:"user-picker","data-testid":"teamPicker"},c.createElement(i.qb,{isLoading:o,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:r,className:d,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"}))}}},28038:(Y,T,e)=>{"use strict";e.d(T,{f:()=>f});var t=e(82897),n=e.n(t),c=e(66111),s=e(54899),i=e(8581);class f extends c.Component{constructor(r){super(r),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(r){return this.setState({isLoading:!0}),(0,t.isNil)(r)&&(r=""),(0,s.i)().get(`/api/org/users/lookup?query=${r}&limit=100`).then(d=>d.map(o=>({id:o.userId,value:o.userId,label:o.login,imgUrl:o.avatarUrl,login:o.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:r,onSelected:d,inputId:o}=this.props,{isLoading:m}=this.state;return c.createElement("div",{className:"user-picker","data-testid":"userPicker"},c.createElement(i.qb,{isClearable:!0,className:r,inputId:o,isLoading:m,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:d,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"}))}}},21731:(Y,T,e)=>{"use strict";e.d(T,{e:()=>s});var t=e(66111),n=e(3385),c=e(39904);class s extends t.Component{constructor(f){super(f)}render(){const{label:f,removeIcon:u,count:r,onClick:d}=this.props,{color:o}=(0,n.Bx)(f),m={backgroundColor:o},l=r!==0&&t.createElement("span",{className:"tag-count-label"},`(${r})`);return t.createElement("span",{className:"label label-tag",style:m},u&&t.createElement(c.J,{onClick:d,name:"times"}),f," ",l)}}},24357:(Y,T,e)=>{"use strict";e.d(T,{D:()=>p});var t=e(9892),n=e(66111),c=e(44800),s=e(79086),i=e(72648),f=e(8581),u=e(39904),r=e(35287),d=e(21731);const o=({data:y,className:v,label:E,isFocused:h,innerProps:C})=>{const a=(0,i.wW)(m);return n.createElement("div",{className:(0,t.cx)(a.option,h&&a.optionFocused),"aria-label":"Tag option",...C},n.createElement("div",{className:`tag-filter-option ${v||""}`},typeof E=="string"?n.createElement(d.e,{label:E,removeIcon:!1,count:y.count??0}):E))},m=y=>({option:t.css`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${y.colors.background.secondary};
      }
    `,optionFocused:t.css`
      background: ${y.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),l=(y,v)=>RegExp((0,s.GE)(v),"i").test(y.value),p=({allowCustomValue:y=!1,formatCreateLabel:v,hideValues:E,inputId:h,isClearable:C,onChange:a,placeholder:P,tagOptions:D,tags:x,width:M})=>{const b=(0,i.wW)(g),R=x.map(k=>({value:k,label:k,count:0})),[S,O]=(0,n.useState)(R),[U,I]=(0,n.useState)(!1),[F,w]=(0,n.useState)(x),[K,L]=(0,n.useState)(R),V=(0,n.useMemo)(()=>x.join(),[x]),H=(0,n.useCallback)(async()=>(await D()).map(Q=>x.includes(Q.term)?{value:Q.term,label:Q.term,count:0}:{value:Q.term,label:Q.term,count:Q.count}),[D,x]),j=(0,n.useCallback)(async()=>{I(!0);const k=await H();y&&K.forEach(Q=>k.push(Q)),O(k),I(!1)},[y,K,H]);(0,n.useEffect)(()=>{x.length>0&&S.length===0&&j()},[j,S.length,x.length]),(0,n.useEffect)(()=>{x!==F&&(w(x),j())},[j,F,x]);const A=k=>{k.forEach(Q=>Q.count=0),a((k||[]).map(Q=>Q.value)),y&&L(k.filter(Q=>!x.includes(Q)))},_={key:V,onFocus:j,isLoading:U,options:S,allowCreateWhileLoading:!0,allowCustomValue:y,formatCreateLabel:v,defaultOptions:!0,filterOption:l,getOptionLabel:k=>k.label,getOptionValue:k=>k.value,inputId:h,isMulti:!0,onChange:A,loadingMessage:(0,r.t)("tag-filter.loading","Loading..."),noOptionsMessage:(0,r.t)("tag-filter.no-tags","No tags found"),placeholder:P||(0,r.t)("tag-filter.placeholder","Filter by tag"),value:R,width:M,components:{Option:o,MultiValueLabel:()=>null,MultiValueRemove(k){const{data:Q}=k;return n.createElement(c.c.MultiValueRemove,{...k},n.createElement(d.e,{key:Q.label,label:Q.label,removeIcon:!0,count:Q.count}))},MultiValueContainer:E?()=>null:c.c.MultiValueContainer}};return n.createElement("div",{className:b.tagFilter},C&&x.length>0&&n.createElement("button",{className:b.clear,onClick:()=>A([])},"Clear tags"),n.createElement(f.NU,{..._,prefix:n.createElement(u.J,{name:"tag-alt"}),"aria-label":"Tag filter"}))};p.displayName="TagFilter";const g=y=>({tagFilter:t.css`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:t.css`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${y.colors.text.secondary};

    &:hover {
      color: ${y.colors.text.primary};
    }
  `})},32873:(Y,T,e)=>{"use strict";e.d(T,{a:()=>d});var t=e(82897),n=e.n(t),c=e(66111),s=e(47891),i=e(67483),f=e(3630),u=e(59796);const r="grafana.dashboard.timepicker.history",d=y=>c.createElement(u.G,{storageKey:r,defaultValue:[]},(v,E)=>{const h=m(v),C=o(h);return c.createElement(f.Xc,{...y,history:C,onChange:a=>{l(a,h,E),y.onChange(a)}})});function o(y){return y.map(v=>s.convertRawToRange(v,"utc",void 0,"YYYY-MM-DD HH:mm:ss"))}function m(y){return y.map(v=>{const E=typeof v.from=="string"?v.from:v.from.toISOString(),h=typeof v.to=="string"?v.to:v.to.toISOString();return{from:E,to:h}})}function l(y,v,E){if(!p(y))return;const h={from:typeof y.raw.from=="string"?y.raw.from:y.raw.from.toISOString(),to:typeof y.raw.to=="string"?y.raw.to:y.raw.to.toISOString()},C=g([h,...v]);E(C)}function p(y){return(0,i.v9)(y.raw.from)||(0,i.v9)(y.raw.to)}function g(y){return(0,t.uniqBy)(y,v=>v.from+v.to).slice(0,4)}},59420:(Y,T,e)=>{"use strict";e.d(T,{K:()=>o});var t=e(66111),n=e(53768),c=e(99098),s=e(729),i=e(78056),f=e(72269),u=e(60325),r=e(97551);const d=["rowHeight","colWidth","showValue","mergeValues","alignValue"];class o extends t.Component{constructor(){super(...arguments),this.panelContext={},this.getValueColor=(l,p,g)=>{const y=this.props.frames[l].fields[p];if(y.display){const v=y.display(g);if(v.color)return v.color}return n.R},this.prepConfig=(l,p,g)=>{this.panelContext=this.context;const{eventBus:y,sync:v}=this.panelContext;return(0,r.Nj)({frame:l,getTimeRange:g,eventBus:y,sync:v,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:l.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor})},this.renderLegend=l=>{const{legend:p,legendItems:g}=this.props;return!l||!g||!p||p.showLegend===!1?null:t.createElement(s.AY.Legend,{placement:p.placement},t.createElement(i.l,{placement:p.placement,items:g,displayMode:p.displayMode,readonly:!0}))}}render(){return t.createElement(f.d,{...this.props,fields:{x:l=>l.type===c.fS.time,y:l=>l.type===c.fS.number||l.type===c.fS.boolean||l.type===c.fS.string},prepConfig:this.prepConfig,propsToDiff:d,renderLegend:this.renderLegend})}}o.contextType=u.bb},97551:(Y,T,e)=>{"use strict";e.d(T,{KN:()=>F,iK:()=>oe,Y:()=>G,$m:()=>re,Ur:()=>k,Nj:()=>L,AR:()=>_,SA:()=>Q});var t=e(53768),n=e(30471),c=e(2703),s=e(56632),i=e(23588),f=e(99098),u=e(69098),r=e(99601),d=e(92103),o=e(17587),m=e(85596),l=e(40538),p=e(13347),g=e(72269),y=e(45778),v=e(45389),E=e(2445),h=e(75974),C=e(5680),a=e(28586),P=e(60892);const{round:D,min:x,ceil:M}=Math,b=2;let R=6;const S=a.Gj;function O(le,ge,ne,ue,te){(0,a.Qm)(ne,le,S,ge,(me,q,se)=>{let ae=ue*q,pe=ue*se;te(me,ae,pe)})}function U(le){const{mode:ge,numSeries:ne,isDiscrete:ue,hasMappedNull:te,rowHeight:me=0,colWidth:q=0,showValue:se,mergeValues:ae=!1,theme:pe,label:de,formatValue:Me,alignValue:Ke="left",getTimeRange:st,getValueColor:Ie,getFieldConfig:Ve,onHover:_e,onLeave:tt}=le;let dt;const Oe=Array(ne).fill(null).map(()=>{let Ye=document.createElement("div");return Ye.classList.add("bar-mark"),Ye.style.position="absolute",Ye.style.background="rgba(255,255,255,0.2)",Ye});let ye;const Pe=Ye=>{ye=Array(ne).fill(null).map(ft=>Array(Ye).fill(null))},be=`500 ${Math.round(12*devicePixelRatio)}px ${pe.typography.fontFamily}`,Be=Array(ne).fill(null),ze=[q,1/0],lt=1-ze[0],ht=(ze[1]??1/0)*h.Z.pxRatio,vt=new Map,bt=new Map;function ct(Ye){vt.forEach((ft,St)=>{Ye.fillStyle=St,Ye.fill(ft)}),bt.forEach((ft,St)=>{Ye.strokeStyle=St,Ye.stroke(ft)}),vt.clear(),bt.clear()}function Pt(Ye,ft,St,we,qe,Je,ut,Mt,Wt,ln,fn,pn,An){if(ut<1)return;const Ot=Ie(ln+1,pn),Ft=Ve(ln),Kt=I(Ft,Ot);if(ye[ln][fn]={x:D(qe-St),y:D(Je-we),w:ut,h:Mt,sidx:ln+1,didx:fn,fillColor:Kt},An){let Lt=Kt,Ut=vt.get(Lt);if(Ut==null&&vt.set(Lt,Ut=new Path2D),ft(Ut,qe,Je,ut,Mt),Wt){let Rt=Ot,$t=bt.get(Rt);$t==null&&bt.set(Rt,$t=new Path2D),ft($t,qe+Wt/2,Je+Wt/2,ut-Wt,Mt-Wt)}}else Ye.beginPath(),ft(Ye,qe,Je,ut,Mt),Ye.fillStyle=Kt,Ye.fill(),Wt&&(Ye.beginPath(),ft(Ye,qe+Wt/2,Je+Wt/2,ut-Wt,Mt-Wt),Ye.strokeStyle=Ot,Ye.lineWidth=Wt,Ye.stroke())}const ie=(Ye,ft,St,we)=>(h.Z.orient(Ye,ft,(qe,Je,ut,Mt,Wt,ln,fn,pn,An,Ot,Ft,Kt,Lt,Ut)=>{let Rt=D((qe.width||0)*h.Z.pxRatio),$t=ue(ft),_t=$t&&te(ft);Ye.ctx.save(),Ut(Ye.ctx,Ye.bbox.left,Ye.bbox.top,Ye.bbox.width,Ye.bbox.height),Ye.ctx.clip(),O(me,ft-1,ne,Ft,(jt,an,cn)=>{if(ge===F.Changes)for(let rn=0;rn<ut.length;rn++){let hn=ut[rn];if(hn!=null||_t){let Dn=Math.round(ln(Je[rn],Mt,Ot,pn)),Rn=rn;for(;++Rn<ut.length&&(ut[Rn]===void 0||ae&&ut[Rn]===hn););let ea=Rn===ut.length?pn+Ot+Rt:Math.round(ln(Je[Rn],Mt,Ot,pn));Pt(Ye.ctx,Ut,pn,An,Dn,D(An+an),ea-Dn,D(cn),Rt,jt,rn,hn,$t),rn=Rn-1}}else if(ge===F.Samples){let rn=ln(Je[1],Mt,Ot,pn)-ln(Je[0],Mt,Ot,pn),hn=rn*lt,Dn=D(x(ht,rn-hn)-Rt),Rn=Dn/2;for(let ea=St;ea<=we;ea++){let Fn=ut[ea];if(Fn!=null||_t){let Vn=ln(Je[ea],Mt,Ot,pn);Pt(Ye.ctx,Ut,pn,An,D(Vn-Rn),D(An+an),Dn,D(cn),Rt,jt,ea,Fn,$t)}}}}),$t&&(Ye.ctx.lineWidth=Rt,ct(Ye.ctx)),Ye.ctx.restore()}),null),Ce=Me==null||se===l.Jp.Never?!1:(Ye,ft,St,we)=>(Ye.ctx.save(),Ye.ctx.rect(Ye.bbox.left,Ye.bbox.top,Ye.bbox.width,Ye.bbox.height),Ye.ctx.clip(),Ye.ctx.font=be,Ye.ctx.textAlign=ge===F.Changes?Ke:"center",Ye.ctx.textBaseline="middle",h.Z.orient(Ye,ft,(qe,Je,ut,Mt,Wt,ln,fn,pn,An,Ot,Ft)=>{let Kt=D((qe.width||0)*h.Z.pxRatio),Ut=ue(ft)&&te(ft),Rt=D(An+Ge[ft-1]);for(let $t=0;$t<ut.length;$t++)if(ut[$t]!=null||Ut){const _t=ye[ft-1][$t];if(!_t||_t.x>=Ot)continue;let jt=Math.floor(_t?.w/R);if(se===l.Jp.Auto&&jt<2)continue;let an=Me(ft,ut[$t]),cn=D(_t.x+pn+_t.w/2);ge===F.Changes&&(Ke==="left"?cn=D(_t.x+pn+Kt+b):Ke==="right"&&(cn=D(_t.x+pn+_t.w-Kt-b))),Ye.ctx.fillStyle=pe.colors.getContrastText(_t.fillColor,3),Ye.ctx.fillText(an.slice(0,jt),cn,Rt)}}),Ye.ctx.restore(),!1),Ne=Ye=>{let ft=Ye.over,St="";for(let we=32;we<=126;we++)St+=String.fromCharCode(we);R=Math.ceil(Ye.ctx.measureText(St).width/St.length*h.Z.pxRatio),R+=2.5,ft.style.overflow="hidden",Oe.forEach(we=>{ft.appendChild(we)})},Ze=Ye=>{dt=dt||new P.lW(0,0,Ye.bbox.width,Ye.bbox.height),dt.clear(),Pe(Ye.data[0].length),Ye.series.forEach(ft=>{ft._paths=null})};function Qe(Ye,ft){let St=Oe[Ye],we=h.Z.pxRatio;ft?(St.style.display="",St.style.left=D(ft.x/we)+"px",St.style.top=D(ft.y/we)+"px",St.style.width=D(ft.w/we)+"px",St.style.height=D(ft.h/we)+"px"):St.style.display="none",Be[Ye]=ft}let Le;function Ue(Ye,ft){let St;for(let we=0;we<ne;we++){let qe;if(Ye>=0){let Je=Ge[we];dt.get(Ye,Je,1,1,ut=>{(0,P.Pn)(Ye,Je,ut.x,ut.y,ut.x+ut.w,ut.y+ut.h)&&(qe=ut,Math.abs(ft-Je)<=ut.h/2&&(St=ut))})}qe?qe!==Be[we]&&Qe(we,qe):Be[we]!=null&&Qe(we,null)}St?St!==Le&&(Le=St,_e(St.sidx,St.didx,St)):Le&&(Le=void 0,tt())}function ve(Ye,ft){let St;dt.get(Ye,ft,1,1,we=>{(0,P.Pn)(Ye,ft,we.x,we.y,we.x+we.w,we.y+we.h)&&(St=we)}),St?(Qe(0,St),St!==Le&&(Le=St,_e(St.sidx,St.didx,St))):Le&&(Qe(0,null),Le=void 0,tt())}const Se=ge===F.Changes?Ue:ve,Fe=Ye=>{let ft=D(Ye.cursor.left*h.Z.pxRatio),St=D(Ye.cursor.top*h.Z.pxRatio);if(!dt.o.length&&dt.q==null)for(const we of ye)for(const qe of we)qe&&dt.add(qe);Se(ft,St)},je={y:!1,x:ge===F.Changes,points:{show:!1}},Ge=Array(ne).fill(0),gt=Array(ne).fill(0),mt=[0,1];return{cursor:je,xSplits:ge===F.Samples?(Ye,ft,St,we,qe,Je)=>{let ut=[],Mt=Ye.data[0][1]-Ye.data[0][0],Wt=M(qe/Mt);for(let ln=0;ln<Ye.data[0].length;ln+=Wt){let fn=Ye.data[0][ln];fn>=St&&fn<=we&&ut.push(fn)}return ut}:null,xRange:Ye=>{const ft=st();let St=ft.from.valueOf(),we=ft.to.valueOf();if(ge===F.Samples){let ut=(Ye.data[0][1]-Ye.data[0][0])/2;St<=Ye.data[0][0]&&(St=Ye.data[0][0]-ut);let Mt=Ye.data[0].length-1;we>=Ye.data[0][Mt]&&(we=Ye.data[0][Mt]+ut)}return[St,we]},ySplits:Ye=>(O(me,null,ne,Ye.bbox.height,(ft,St,we)=>{Ge[ft]=D(St+we/2),gt[ft]=Ye.posToVal(Ge[ft]/h.Z.pxRatio,g.j)}),gt),yValues:(Ye,ft)=>ft.map((St,we)=>de(we+1)),yRange:mt,drawPaths:ie,drawPoints:Ce,init:Ne,drawClear:Ze,setCursor:Fe}}function I(le,ge){if(ge[0]==="#"&&ge.length===9)return ge;const ne=(le.fillOpacity??100)/100;return(0,C.alpha)(ge,ne)}var F=(le=>(le.Changes="changes",le.Samples="samples",le))(F||{});const w={lineWidth:0,fillOpacity:80};function K(le){return le.ctrlKey||le.metaKey||le.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const L=({frame:le,theme:ge,timeZones:ne,getTimeRange:ue,mode:te,eventBus:me,sync:q,rowHeight:se,colWidth:ae,showValue:pe,alignValue:de,mergeValues:Me,getValueColor:Ke})=>{const st=new p.U(ne[0]),Ie="time",Ve="x",_e=vt=>{const bt=vt.config?.color?.mode;return!(bt&&vt.display&&bt.startsWith("continuous-"))},tt=vt=>vt.config.mappings?.some(bt=>bt.type===m.Hi.SpecialValue&&bt.options.match==="null")||!1,dt=(vt,bt)=>{const ct=le.fields[vt];return ct.state?.origin?.fieldIndex!==void 0&&ct.state?.origin?.frameIndex!==void 0&&Ke?Ke(ct.state?.origin?.frameIndex,ct.state?.origin?.fieldIndex,bt):t.R},Oe={mode:te,numSeries:le.fields.length-1,isDiscrete:vt=>_e(le.fields[vt]),hasMappedNull:vt=>tt(le.fields[vt]),mergeValues:Me,rowHeight:se,colWidth:ae,showValue:pe,alignValue:de,theme:ge,label:vt=>(0,n.CZ)(le.fields[vt],le),getFieldConfig:vt=>le.fields[vt].config.custom,getValueColor:dt,getTimeRange:ue,formatValue:(vt,bt)=>(0,c.zc)(le.fields[vt].display(bt)),onHover:(vt,bt)=>{Pe=vt,be=bt,ye=!0},onLeave:()=>{Pe=null,be=null,ye=!0}};let ye=!1,Pe=null,be=null;const Be=U(Oe),ze={point:{[Ie]:null,[g.j]:null},data:le};st.addHook("init",Be.init),st.addHook("drawClear",Be.drawClear),st.addHook("setCursor",Be.setCursor);const lt=(vt,bt,ct)=>{ye&&(Pe!=null&&(vt(Pe),bt(be)),ye=!1),ct(Pe==null)};st.setTooltipInterpolator(lt),st.setPrepData(vt=>(0,E.Bj)(vt[0],(0,E.i7)(vt[0]))),st.setCursor(Be.cursor),st.addScale({scaleKey:Ve,isTime:!0,orientation:l.wN.Horizontal,direction:l.bQ.Right,range:Be.xRange}),st.addScale({scaleKey:g.j,isTime:!1,orientation:l.wN.Vertical,direction:l.bQ.Up,range:Be.yRange}),st.addAxis({scaleKey:Ve,isTime:!0,splits:Be.xSplits,placement:l.LB.Bottom,timeZone:ne[0],theme:ge,grid:{show:!0}}),st.addAxis({scaleKey:g.j,isTime:!1,placement:l.LB.Left,splits:Be.ySplits,values:Be.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:ge});let ht=0;for(let vt=0;vt<le.fields.length;vt++){if(vt===0)continue;const bt=le.fields[vt],ct=bt.config,Pt={...w,...ct.custom};bt.state.seriesIndex=ht++,st.addSeries({scaleKey:g.j,pathBuilder:Be.drawPaths,pointsBuilder:Be.drawPoints,lineWidth:Pt.lineWidth,fillOpacity:Pt.fillOpacity,theme:ge,show:!Pt.hideFrom?.viz,thresholds:ct.thresholds,dataFrameFieldIndex:bt.state?.origin})}if(q&&q()!==s.m.Off){let vt={};vt.sync={key:"__global_",filters:{pub:(bt,ct,Pt,ie,Ce,Ne,Ze)=>q&&q()===s.m.Off?!1:(ze.rowIndex=Ze,Pt<0&&ie<0?(ze.point[Ie]=null,ze.point[g.j]=null,me.publish(new i.xH)):(ze.point[Ie]=ct.posToVal(Pt,Ve),ze.point.panelRelY=ie>0?ie/Ne:1,ze.down=void 0,me.publish(new i.es(ze))),!0)},scales:[Ve,null]},st.setSync(),st.setCursor(vt)}return st};function V(le){const ge=new Map;for(let ne=0;ne<le.fields.length;ne++)ge.set(getFieldDisplayName(le.fields[ne],le),ne);return ge}function H(le){let ge=le[0],ne;for(let ue=1;ue<le.length;ue++){let te=le[ue];te===null?ge=null:te===ge?(ne||(ne=[...le]),ne[ue]=void 0):te!=null&&(ge=te)}return ne}function j(le){let ge=le.config.custom?.spanNulls;return ge?ge===!0?1/0:ge:-1}function A(le,ge){const ne=le.config.thresholds;if(le.type!==f.fS.number||!ne||!ne.steps.length)return;const ue=k(le.config,ge);if(ue.length!==ne.steps.length)return;const te=new Map,me=new Map;for(let ae=0;ae<ue.length;ae++)te.set(ne.steps[ae],ue[ae].label),me.set(ue[ae].label,ue[ae].color);let q=le.values;const se=new Array(le.values.length);if(ne.mode===u.H.Percentage){const{min:ae,max:pe}=(0,r.xD)(le),de=pe-ae;q=q.map(Me=>Me==null?Me:(Me-ae)/de*100)}for(let ae=0;ae<se.length;ae++){const pe=q[ae];pe==null?se[ae]=pe:se[ae]=te.get((0,d.m1)(pe,ne.steps))}return{...le,config:{...le.config,custom:{...le.config.custom,spanNulls:j(le)}},type:f.fS.string,values:se,display:ae=>({text:String(ae),color:me.get(String(ae)),numeric:NaN})}}function _(le,ge,ne,ue){if(!le?.length)return{warn:"No data in response"};let te=!1;const me=[];for(let q of le){let se=!1,ae=!1,pe=(0,o.Y3)(q,q.fields.findIndex(Ke=>Ke.type===f.fS.time)),de=(0,y.w)({frame:pe,refFieldPseudoMin:ne.from.valueOf(),refFieldPseudoMax:ne.to.valueOf()});de!==q&&(ae=!0);const Me=[];for(let Ke of(0,v.I)(de).fields)switch(Ke.type){case f.fS.time:se=!0,te=!0,Me.push(Ke);break;case f.fS.number:if(ge&&Ke.config.color?.mode===t.S.Thresholds){const st=A(Ke,ue);if(st){Me.push(st),ae=!0;continue}}case f.fS.boolean:case f.fS.string:Ke={...Ke,config:{...Ke.config,custom:{...Ke.config.custom,spanNulls:j(Ke)}}},Me.push(Ke);break;default:ae=!0}se&&Me.length>1&&(te=!0,ae?me.push({...pe,fields:Me}):me.push(pe))}return te?me.length?{frames:me}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function k(le,ge){const ne=[],ue=le.thresholds;if(!ue||!ue.steps.length)return ne;const te=ue.steps,me=(0,c.Cf)(ue.mode===u.H.Percentage?"percent":le.unit??""),q=se=>(0,c.zc)(me(se));for(let se=0;se<te.length;se++){let ae=te[se],pe=ae.value,de="",Me="";pe===-1/0&&se<te.length-1?(pe=te[se+1].value,de="< "):Me="+",ne.push({label:`${de}${q(pe)}${Me}`,color:ge.visualization.getColorByName(ae.color),yAxis:1})}return ne}function Q(le,ge,ne){if(!(!le||ge.showLegend===!1))return re(Z(le),ne)}function re(le,ge){if(!le.length)return;const ne=[],ue=le[0].config,te=ue.color?.mode??t.S.Fixed,me=ue.thresholds;if(te===t.S.Thresholds&&me?.steps&&me.steps.length>1)return k(ue,ge);if(te.startsWith("continuous"))return;let q=new Map;return le.forEach(se=>{se.values.forEach(ae=>{let pe=se.display(ae);pe.color&&q.set(pe.text,pe.color)})}),q.forEach((se,ae)=>{ae.length>0&&ne.push({label:ae,color:ge.visualization.getColorByName(se??t.R),yAxis:1})}),ne}function Z(le){const ge=[];for(const ne of le)for(const ue of ne.fields)ue.type!==f.fS.time&&ge.push(ue);return ge}function oe(le,ge){let ne,ue=ge+1;if(ue>=le.values.length)return null;const te=le.values[ge];for(;ne===void 0;){if(ue>=le.values.length)return null;const me=le.values[ue];me===void 0||me===te?ue++:ne=ue}return ne}function G(le){if(le<0||Number.isNaN(le))return"";let ge,ne,ue,te,me,q,se,ae;return se=Math.floor(le/1e3),q=Math.floor(se/60),se=se%60,me=Math.floor(q/60),q=q%60,te=Math.floor(me/24),me=me%24,ge=Math.floor(te/365),ge>0&&(te=te%365),ne=Math.floor(te/30),ne>0&&(te=te%30),ue=Math.floor(te/7),ue>0&&(te=te%7),ae=Math.round(le%1e3*1e3)/1e3,(ge>0?ge+"y "+(ne>0?ne+"mo ":"")+(ue>0?ue+"w ":"")+(te>0?te+"d ":""):ne>0?ne+"mo "+(ue>0?ue+"w ":"")+(te>0?te+"d ":""):ue>0?ue+"w "+(te>0?te+"d ":""):te>0?te+"d "+(me>0?me+"h ":""):me>0?me+"h "+(q>0?q+"m ":""):q>0?q+"m "+(se>0?se+"s ":""):se>0?se+"s "+(ae>0?ae+"ms ":""):ae>0?ae+"ms ":"0").trim()}},33045:(Y,T,e)=>{"use strict";e.d(T,{a:()=>u});var t=e(9892),n=e(66111),c=e(72648),s=e(58564),i=e(77117),f=e(39904);const u=({values:d,onChange:o,id:m})=>{const l=(0,c.wW)(r);return n.createElement("div",{className:l.wrapper},d.length?d.map((p,g)=>n.createElement("div",{className:l.pair,key:g},n.createElement(s.X,{id:`${m}-key-${g}`,placeholder:"Tag name",value:p.key,onChange:y=>{o(d.map((v,E)=>(E===g&&(v.key=String(y)),v)))}}),n.createElement(i.W,{"aria-label":"equals",className:l.operator},"as"),n.createElement(s.X,{id:`${m}-value-${g}`,placeholder:"New name (optional)",value:p.value||"",onChange:y=>{o(d.map((v,E)=>(E===g&&(v.value=String(y)),v)))}}),n.createElement("button",{onClick:()=>o([...d.slice(0,g),...d.slice(g+1)]),className:"gf-form-label query-part","aria-label":"Remove tag",type:"button"},n.createElement(f.J,{name:"times"})),g===d.length-1?n.createElement("button",{onClick:()=>o([...d,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(f.J,{name:"plus"})):null)):n.createElement("button",{onClick:()=>o([...d,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(f.J,{name:"plus"})))},r=d=>({wrapper:t.css`
    display: flex;
    flex-direction: column;
    gap: ${d.spacing(.5)} 0;
  `,pair:t.css`
    display: flex;
    justify-content: start;
    align-items: center;
  `,operator:t.css`
    color: ${d.v1.palette.orange};
    width: auto;
  `})},83437:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>l,p:()=>m});var t=e(9892),n=e(66111),c=e(53117),s=e(72648),i=e(11543),f=e(81764),u=e(8944),r=e(46967),d=e(62911),o=e(33045);function m(v){if(v?.tracesToLogsV2)return v.tracesToLogsV2;if(!v?.tracesToLogs)return;const E={customQuery:!1};return E.datasourceUid=v.tracesToLogs.datasourceUid,E.tags=v.tracesToLogs.mapTagNamesEnabled?v.tracesToLogs.mappedTags:v.tracesToLogs.tags?.map(h=>({key:h})),E.filterByTraceID=v.tracesToLogs.filterByTraceID,E.filterBySpanID=v.tracesToLogs.filterBySpanID,E.spanStartTimeShift=v.tracesToLogs.spanStartTimeShift,E.spanEndTimeShift=v.tracesToLogs.spanEndTimeShift,E}function l({options:v,onOptionsChange:E}){const h=(0,s.wW)(y),C=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource","grafana-falconlogscale-datasource"],a=(0,n.useMemo)(()=>m(v.jsonData)||{customQuery:!1},[v.jsonData]),{query:P="",tags:D,customQuery:x}=a,M=(0,n.useCallback)(b=>{E({...v,jsonData:{...v.jsonData,tracesToLogsV2:{...a,...b},tracesToLogs:void 0}})},[E,v,a]);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Trace to logs"),n.createElement("div",{className:h.infoText},"Navigate from a trace span to the selected data source's logs",n.createElement(d.j,{hrefSuffix:`${v.type}/#trace-to-logs`})),n.createElement(i.Z,null,n.createElement(f._,{tooltip:"The logs data source the trace is going to navigate to",label:"Data source",labelWidth:26},n.createElement(c.q,{inputId:"trace-to-logs-data-source-picker",filter:b=>C.includes(b.type),current:a.datasourceUid,noDefault:!0,width:40,onChange:b=>M({datasourceUid:b.uid})}))),n.createElement(g,{type:"start",value:a.spanStartTimeShift||"",onChange:b=>M({spanStartTimeShift:b})}),n.createElement(g,{type:"end",value:a.spanEndTimeShift||"",onChange:b=>M({spanEndTimeShift:b})}),n.createElement(i.Z,null,n.createElement(f._,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26},n.createElement(o.a,{values:D??[],onChange:b=>M({tags:b})}))),n.createElement(p,{disabled:x,type:"trace",id:"filterByTraceID",value:Boolean(a.filterByTraceID),onChange:b=>M({filterByTraceID:b})}),n.createElement(p,{disabled:x,type:"span",id:"filterBySpanID",value:Boolean(a.filterBySpanID),onChange:b=>M({filterBySpanID:b})}),n.createElement(i.Z,null,n.createElement(f._,{tooltip:"Use a custom query with the possibility to interpolate variables from the trace or span",label:"Use custom query",labelWidth:26},n.createElement(u.x,{id:"customQuerySwitch",value:x,onChange:b=>M({customQuery:b.currentTarget.checked})}))),x&&n.createElement(f._,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword",grow:!0},n.createElement(r.I,{label:"Query",type:"text",allowFullScreen:!0,value:P,onChange:b=>M({query:b.currentTarget.value})})))}function p(v){return n.createElement(i.Z,null,n.createElement(f._,{disabled:v.disabled,label:`Filter by ${v.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${v.type} ID`},n.createElement(u.x,{id:v.id,value:v.value,onChange:E=>v.onChange(E.currentTarget.checked)})))}function g(v){return n.createElement(i.Z,null,n.createElement(f._,{label:`Span ${v.type} time shift`,labelWidth:26,grow:!0,tooltip:`Shifts the ${v.type} time of the span. Default: 0 (Time units can be used here, for example: 5s, -1m, 3h)`},n.createElement(r.I,{type:"text",placeholder:"0",width:40,onChange:E=>v.onChange(E.currentTarget.value),value:v.value})))}const y=v=>({infoText:t.css`
    padding-bottom: ${v.spacing(2)};
    color: ${v.colors.text.secondary};
  `})},41197:(Y,T,e)=>{"use strict";e.d(T,{B:()=>u});var t=e(9892),n=e(66111),c=e(72648),s=e(35029),i=e(43226);const f=d=>({Global:[{keys:["g","h"],description:"Go to Home Dashboard"},{keys:["g","d"],description:"Go to Dashboards"},{keys:["g","e"],description:"Go to Explore"},{keys:["g","p"],description:"Go to Profile"},{keys:[`${d} + k`],description:"Open search"},{keys:["esc"],description:"Exit edit/setting views"},{keys:["h"],description:"Show all keyboard shortcuts"},{keys:["c","t"],description:"Change theme"}],Dashboard:[{keys:[`${d}+s`],description:"Save dashboard"},{keys:["d","r"],description:"Refresh all panels"},{keys:["d","s"],description:"Dashboard settings"},{keys:["d","v"],description:"Toggle in-active / view mode"},{keys:["d","k"],description:"Toggle kiosk mode (hides top nav)"},{keys:["d","E"],description:"Expand all rows"},{keys:["d","C"],description:"Collapse all rows"},{keys:["d","a"],description:"Toggle auto fit panels (experimental feature)"},{keys:[`${d} + o`],description:"Toggle shared graph crosshair"},{keys:["d","l"],description:"Toggle all panel legends"}],"Focused Panel":[{keys:["e"],description:"Toggle panel edit view"},{keys:["v"],description:"Toggle panel fullscreen view"},{keys:["p","s"],description:"Open Panel Share Modal"},{keys:["p","d"],description:"Duplicate Panel"},{keys:["p","r"],description:"Remove Panel"},{keys:["p","l"],description:"Toggle panel legend"}],"Time Range":[{keys:["t","z"],description:"Zoom out time range"},{keys:["t","\u2190"],description:"Move time range back"},{keys:["t","\u2192"],description:"Move time range forward"},{keys:["t","a"],description:"Make time range absolute/permanent"}]}),u=({onDismiss:d})=>{const o=(0,c.wW)(r),m=(0,n.useMemo)(()=>(0,i.vl)(),[]),l=(0,n.useMemo)(()=>f(m),[m]);return n.createElement(s.u,{title:"Shortcuts",isOpen:!0,onDismiss:d,onClickBackdrop:d},n.createElement("div",{className:o.categories},Object.entries(l).map(([p,g],y)=>n.createElement("div",{className:o.shortcutCategory,key:y},n.createElement("table",{className:o.shortcutTable},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{className:o.shortcutTableCategoryHeader,colSpan:2},p)),g.map((v,E)=>n.createElement("tr",{key:`${y}-${E}`},n.createElement("td",{className:o.shortcutTableKeys},v.keys.map((h,C)=>n.createElement("span",{className:o.shortcutTableKey,key:`${y}-${E}-${C}`},h))),n.createElement("td",{className:o.shortcutTableDescription},v.description)))))))))};function r(d){return{titleDescription:t.css`
      font-size: ${d.typography.bodySmall.fontSize};
      font-weight: ${d.typography.bodySmall.fontWeight};
      color: ${d.colors.text.disabled};
      padding-bottom: ${d.spacing(2)};
    `,categories:t.css`
      font-size: ${d.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:t.css`
      width: 50%;
      font-size: ${d.typography.bodySmall.fontSize};
    `,shortcutTable:t.css`
      margin-bottom: ${d.spacing(2)};
    `,shortcutTableCategoryHeader:t.css`
      font-weight: normal;
      font-size: ${d.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:t.css`
      text-align: left;
      color: ${d.colors.text.disabled};
      width: 99%;
      padding: ${d.spacing(1,2)};
    `,shortcutTableKeys:t.css`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${d.colors.text.primary};
    `,shortcutTableKey:t.css`
      display: inline-block;
      text-align: center;
      margin-right: ${d.spacing(.5)};
      padding: 3px 5px;
      font: 11px Consolas, 'Liberation Mono', Menlo, Courier, monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${d.colors.border.medium};
      border-radius: ${d.shape.borderRadius(3)};
      color: ${d.colors.text.primary};
      background-color: ${d.colors.background.secondary};
    `}}},47694:(Y,T,e)=>{"use strict";e.d(T,{Oh:()=>u,ZP:()=>s,iE:()=>i,vc:()=>n.v});var t=e(59250),n=e(35645);let c=n.v;const s=c,i=()=>c,f=r=>{c={...c,...r}},u=Boolean(n.v.panels?.debug?.state===t.BV.alpha)},84952:(Y,T,e)=>{"use strict";e.d(T,{AV:()=>r,FL:()=>p,K3:()=>t,OA:()=>s,QO:()=>o,b0:()=>u,cz:()=>c,gN:()=>l,hD:()=>n,kh:()=>f,yM:()=>i,zF:()=>d});const t=30,n=8,c=24,s="v",i="h",f=4,u=250,r=t*3,d="panel-copy",o=2,m=23763571993,l=40,p="VisualizationSelectPane.ListMode"},34177:(Y,T,e)=>{"use strict";e.d(T,{h:()=>n,p:()=>c});var t=e(66111);const n=t.createContext(void 0);function c(){const s=(0,t.useContext)(n);if(!s)throw new Error("No GrafanaContext found");return s}},60499:(Y,T,e)=>{"use strict";e.d(T,{AT:()=>d,ZR:()=>m,iG:()=>l,t_:()=>o});var t=e(66111),n=e(44288),c=e(82052),s=e(27876),i=e(659);const f={title:"",text:"",severity:s.AppNotificationSeverity.Success,icon:"check"},u={title:"",text:"",severity:s.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},r={title:"",text:"",severity:s.AppNotificationSeverity.Error,icon:"exclamation-triangle"},d=(p,g="",y)=>({...f,title:p,text:g,id:(0,n.Z)(),timestamp:Date.now(),showing:!0}),o=(p,g="",y,v)=>({...r,text:(0,c.i)(g),title:p,id:(0,n.Z)(),traceId:y,component:v,timestamp:Date.now(),showing:!0}),m=(p,g="",y)=>({...u,title:p,text:g,traceId:y,id:(0,n.Z)(),timestamp:Date.now(),showing:!0});function l(){const p=(0,s.useDispatch)();return(0,t.useMemo)(()=>({success:(g,y="")=>{p((0,i.$l)(d(g,y)))},warning:(g,y="",v)=>{p((0,i.$l)(m(g,y,v)))},error:(g,y="",v)=>{p((0,i.$l)(o(g,y,v)))}}),[p])}},77582:(Y,T,e)=>{"use strict";e.d(T,{Vt:()=>c.Vt,Wz:()=>s.W,h$:()=>t.Z,rv:()=>n.r});var t=e(18271),n=e(29494),c=e(82002),s=e(4050)},3258:(Y,T,e)=>{"use strict";e.d(T,{H6:()=>v,ZP:()=>E});var t=e(82897),n=e(58379),c=e(50395),s=e(86647);const i=R=>{const S=(0,s.F)().getInstanceSettings(R.datasourceName);return{id:R.ts.toString(),createdAt:R.ts,datasourceName:R.datasourceName,datasourceUid:S?.uid||"",starred:R.starred,comment:R.comment,queries:R.queries}},f=R=>{if(!(0,s.F)().getInstanceSettings({uid:R.datasourceUid}))throw new Error("Datasource not found.");return{ts:R.createdAt,datasourceName:R.datasourceName,starred:R.starred,comment:R.comment,queries:R.queries}};var u=e(43823);function r(R,S,O,U,I){const F=m(R,O),w=l(F,U),K=I?o(w,I):w;return p(K,S)}const d=(R,S)=>{const O=new Date,U=new Date(O.setDate(O.getDate()-R));return S?U.setHours(24,0,0,0):U.setHours(0,0,0,0)};function o(R,S){const O=d(S[0],!0),U=d(S[1],!1);return R.filter(I=>I.createdAt<O&&I.createdAt>U)}function m(R,S){return S.length>0?R.filter(O=>S.includes(O.datasourceName)):R}function l(R,S){return R.filter(O=>O.comment.includes(S)?!0:O.queries.filter(I=>Object.values((0,t.omit)(I,["datasource","key","refId","hide","queryType"])).some(F=>F?.toString().includes(S))).length>0)}const p=(R,S)=>{let O;return S===u.A.Ascending&&(O=(U,I)=>U.createdAt<I.createdAt?-1:U.createdAt>I.createdAt?1:0),S===u.A.Descending&&(O=(U,I)=>U.createdAt<I.createdAt?1:U.createdAt>I.createdAt?-1:0),S===u.A.DatasourceZA&&(O=(U,I)=>U.datasourceName<I.datasourceName?-1:U.datasourceName>I.datasourceName?1:0),S===u.A.DatasourceAZ&&(O=(U,I)=>U.datasourceName<I.datasourceName?1:U.datasourceName>I.datasourceName?-1:0),R.sort(O)},g={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"},y="grafana.explore.richHistory",v=1e4;class E{async getRichHistory(S){const O=P().map(i),U=S.starred?O.filter(F=>F.starred===!0):O,I=r(U,S.sortOrder,S.datasourceFilters,S.search,[S.from,S.to]);return{richHistory:I,total:I.length}}async addToRichHistory(S){const O=Date.now(),U={id:O.toString(),createdAt:O,...S},I=f(U),F=C(P()),w=I.queries.map(j=>(0,t.omit)(j,["key","refId"])),K=F.length>0&&F[0].queries.map(j=>(0,t.omit)(j,["key","refId"]));if((0,t.isEqual)(w,K)){const j=new Error("Entry already exists");throw j.name=c.j.DuplicatedEntry,j}const{queriesToKeep:L,limitExceeded:V}=a(F),H=[I,...L];try{n.Z.setObject(y,H)}catch(j){if(j instanceof Error&&j.name==="QuotaExceededError")b(c.j.StorageFull,`Saving rich history failed: ${j.message}`);else throw j}return V?{warning:{type:c.V.LimitExceeded,message:`Query history reached the limit of ${v}. Old, not-starred items have been removed.`},richHistoryQuery:U}:{richHistoryQuery:U}}async deleteAll(){n.Z.delete(y)}async deleteRichHistory(S){const O=parseInt(S,10),I=n.Z.getObject(y,[]).filter(F=>F.ts!==O);n.Z.setObject(y,I)}async updateStarred(S,O){return h(S,U=>U.starred=O)}async updateComment(S,O){return h(S,U=>U.comment=O)}async getSettings(){return{activeDatasourceOnly:n.Z.getObject(g.activeDatasourceOnly,!1),retentionPeriod:n.Z.getObject(g.retentionPeriod,7),starredTabAsFirstTab:n.Z.getBool(g.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:n.Z.getObject(g.datasourceFilters,[]).map(S=>S.value)}}async updateSettings(S){n.Z.set(g.activeDatasourceOnly,S.activeDatasourceOnly),n.Z.set(g.retentionPeriod,S.retentionPeriod),n.Z.set(g.starredTabAsFirstTab,S.starredTabAsFirstTab),n.Z.setObject(g.datasourceFilters,(S.lastUsedDatasourceFilters||[]).map(O=>({value:O})))}}function h(R,S){const O=parseInt(R,10),U=n.Z.getObject(y,[]),I=(0,t.find)(U,{ts:O});if(!I)throw new Error("Rich history item not found.");return S(I),n.Z.setObject(y,U),i(I)}function C(R){const S=n.Z.getObject(g.retentionPeriod,7),O=d(S,!1);return R.filter(U=>U.ts>O||U.starred===!0)||[]}function a(R){let S=!1,O=R.length-1;for(;O>=0&&R.length>=v;)R[O].starred||(R.splice(O,1),S=!0),O--;return{queriesToKeep:R,limitExceeded:S}}function P(){const R=n.Z.getObject(y,[]);return D(R)}function D(R){return R.map(O=>{const U=O.queries.map((I,F)=>x(O,I,F));return{...O,queries:U}})}function x(R,S,O){const U="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof S=="object"?S:M(S)?JSON.parse(S):{expr:S,refId:U[O]}}function M(R){try{JSON.parse(R)}catch{return!1}return!0}function b(R,S){const O=new Error(S);throw O.name=R,O}},50395:(Y,T,e)=>{"use strict";e.d(T,{V:()=>n,j:()=>t});var t=(c=>(c.StorageFull="StorageFull",c.DuplicatedEntry="DuplicatedEntry",c))(t||{}),n=(c=>(c.LimitExceeded="LimitExceeded",c))(n||{})},4219:(Y,T,e)=>{"use strict";e.d(T,{b:()=>y,X:()=>v});var t=e(35645),n=e(77582),c=e(43823),s=e(3258),i=e(65583),f=e(54899),u=e(86647),r=e(42454);const d=E=>{const h=(0,u.F)().getInstanceSettings({uid:E.datasourceUid});return{id:E.uid,createdAt:E.createdAt*1e3,datasourceName:h?.name||"",datasourceUid:E.datasourceUid,starred:E.starred,comment:E.comment,queries:E.queries}},o=E=>({uid:E.id,createdAt:Math.floor(E.createdAt/1e3),datasourceUid:E.datasourceUid,starred:E.starred,comment:E.comment,queries:E.queries});class m{constructor(){this.preferenceService=new r.y("user")}async addToRichHistory(h){const{result:C}=await(0,f.i)().post("/api/query-history",{dataSourceUid:h.datasourceUid,queries:h.queries});return{richHistoryQuery:d(C)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(h){(0,f.i)().delete(`/api/query-history/${h}`)}async getRichHistory(h){const C=l(h);let a="query-history-get-all";h.starred&&(a="query-history-get-starred");const D=(await(0,i.n)((0,f.i)().fetch({method:"GET",url:`/api/query-history?${C}`,requestId:a}))).data,x=(D.result.queryHistory||[]).map(d),M=D.result.totalCount||0;return{richHistory:x,total:M}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(h,C){const a=await(0,f.i)().patch(`/api/query-history/${h}`,{comment:C});return d(a.result)}updateSettings(h){return this.preferenceService.patch({queryHistory:{homeTab:h.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(h,C){let a;return C?a=await(0,f.i)().post(`/api/query-history/star/${h}`):a=await(0,f.i)().delete(`/api/query-history/star/${h}`),d(a.result)}}function l(E){let h=`${E.datasourceFilters.map(C=>{const a=(0,u.F)().getInstanceSettings(C).uid;return`datasourceUid=${encodeURIComponent(a)}`}).join("&")}`;if(E.search&&(h=h+`&searchString=${E.search}`),E.sortOrder&&(h=h+`&sort=${E.sortOrder===c.A.Ascending?"time-asc":"time-desc"}`),!E.starred){const C=E.from===0?"now":`now-${E.from}d`,a=E.to===0?"now":`now-${E.to}d`;h=h+`&to=${C}`,h=h+`&from=${a}`}return h=h+"&limit=100",h=h+`&page=${E.page||1}`,E.starred&&(h=h+`&onlyStarred=${E.starred}`),h}const p=new s.ZP,g=new m,y=()=>t.v.queryHistoryEnabled?g:p,v=()=>t.v.queryHistoryEnabled?{availableFilters:[c.A.Descending,c.A.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:n.Vt.isSignedIn}:{availableFilters:[c.A.Descending,c.A.Ascending,c.A.DatasourceAZ,c.A.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},40014:(Y,T,e)=>{"use strict";e.d(T,{x:()=>s});var t=e(66111),n=e(27876),c=e(70431);function s(i){const f=(0,n.useDispatch)(),u=(0,t.useRef)(i);u.current=i,(0,t.useEffect)(()=>()=>{f((0,c.e)({cleanupAction:u.current}))},[f])}},76770:(Y,T,e)=>{"use strict";e.d(T,{q:()=>c});var t=e(27876),n=e(86245);const c=s=>{const i=(0,t.useSelector)(f=>f.navIndex);return(0,n.ht)(i,s)}},96044:(Y,T,e)=>{"use strict";e.d(T,{K:()=>s});var t=e(66111),n=e(56895),c=e(37932);function s(){const{search:i}=(0,n.TH)(),f=(0,t.useMemo)(()=>(0,c.Ox)(i||""),[i]),u=(0,t.useCallback)((r,d)=>c.E1.partial(r,d),[]);return[f,u]}},19719:(Y,T,e)=>{"use strict";e.d(T,{D_:()=>d,a2:()=>r,k$:()=>u});const t="en-US",n="fr-FR",c="es-ES",s="de-DE",i="zh-Hans",f="pseudo-LOCALE",u=t,r=[{code:t,name:"English",loader:()=>Promise.resolve({})},{code:n,name:"Fran\xE7ais",loader:()=>e.e(6419).then(e.t.bind(e,58756,19))},{code:c,name:"Espa\xF1ol",loader:()=>e.e(6008).then(e.t.bind(e,4253,19))},{code:s,name:"Deutsch",loader:()=>e.e(810).then(e.t.bind(e,90810,19))},{code:i,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(5001).then(e.t.bind(e,35001,19))}],d=r.map(o=>o.code)},35287:(Y,T,e)=>{"use strict";e.d(T,{$q:()=>l,cC:()=>d,t:()=>m,uC:()=>u});var t=e(97925),n=e(66111),c=e(80332),s=e(89880),i=e(19719);const f={type:"backend",init(){},async read(p,g,y){const v=i.a2.find(h=>h.code===p);if(!v)return y(new Error("No message loader available for "+p),null);const E=await v.loader();y(null,E)}};function u(p){const g=i.D_.includes(p)?p:i.k$;return m("_comment","Do not manually edit this file, or update these source phrases in Crowdin. The source of truth for English strings are in the code source"),t.ZP.use(f).use(c.Db).init({lng:g,partialBundledLanguages:!0,resources:{},returnEmptyString:!1,pluralSeparator:"__"})}function r(p){const g=VALID_LANGUAGES.includes(p)?p:DEFAULT_LANGUAGE;return i18n.changeLanguage(g)}const d=p=>n.createElement(s.c,{...p}),o=t.ZP.t,m=(p,g,y)=>o(p,g,y),l=(p,g={})=>{if(typeof p=="string")return l(new Date(p),g);const y=t.ZP.options.lng??i.k$;return new Intl.DateTimeFormat(y,g).format(p)}},20053:(Y,T,e)=>{"use strict";e.d(T,{Qp:()=>M,aB:()=>j,UW:()=>K,nu:()=>L,Nw:()=>V,Ce:()=>ne,Bz:()=>ge});var t=e(82897),n=e(84946),c=e(68114),s=e(49372),i=e(13787),f=e(40538),u=e(83881),r=e(5109),d=e(99098),o=e(53768),m=e(7569),l=e(67483),p=e(63418),g=e(77258),y=e(47891),v=e(52666),E=e(7897),h=e(16514),C=e(2525),a=e(47694);function P(te,me){return a.ZP.bootData.user.lightTheme?me:te}var D=e(81042);const x="Line limit",M="Common labels",b={[i.in.critical]:h.O9[7],[i.in.warning]:h.O9[1],[i.in.error]:h.O9[4],[i.in.info]:h.O9[0],[i.in.debug]:h.O9[5],[i.in.trace]:h.O9[2],[i.in.unknown]:P("#8e8e8e","#bdc4cd")},R=1,S=1e3*R,O=60*S,U=60*O,I=24*U,F=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function w(te,me,q){switch(q){case f.Y4.exact:return te.entry.replace(F,"")===me.entry.replace(F,"");case f.Y4.numbers:return te.entry.replace(/\d/g,"")===me.entry.replace(/\d/g,"");case f.Y4.signature:return te.entry.replace(/\w/g,"")===me.entry.replace(/\w/g,"");default:return!1}}function K(te,me){return me===f.Y4.none?te:te.reduce((q,se,ae)=>{const pe={...se},de=q[q.length-1];return ae>0&&w(se,de,me)?de.duplicates++:(pe.duplicates=0,q.push(pe)),q},[])}function L(te,me){return me.size===0?te:te.filter(q=>!me.has(q.logLevel))}function V(te,me){const q={},se=[];for(const ae of te){let pe=q[ae.logLevel];pe||(q[ae.logLevel]=pe={lastTs:null,datapoints:[],target:ae.logLevel,color:b[ae.logLevel]},se.push(pe));const de=Math.floor(ae.timeEpochMs/me)*me;de===pe.lastTs?pe.datapoints[pe.datapoints.length-1][0]++:(pe.datapoints.push([1,de]),pe.lastTs=de);for(const Me of se)Me!==pe&&Me.lastTs!==de&&(Me.datapoints.push([0,de]),Me.lastTs=de)}return se.map((ae,pe)=>{ae.datapoints.sort((st,Ie)=>st[1]-Ie[1]);const de=(0,u.g0)(ae),Ke=new r.N(de).getFirstFieldOfType(d.fS.number);return de.fields[Ke.index].config.min=0,de.fields[Ke.index].config.decimals=0,de.fields[Ke.index].config.color={mode:o.S.Fixed,fixedColor:ae.color},de.fields[Ke.index].config.custom={drawStyle:f.l8.Bars,barAlignment:f.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:ae.color,pointColor:ae.color,fillColor:ae.color,lineWidth:0,fillOpacity:100,stacking:{mode:f.o0.Normal,group:"A"}},de})}function H(te){return te.fields.some(me=>me.type===d.fS.time)&&te.fields.some(me=>me.type===d.fS.string)}function j(te,me,q,se){const{logSeries:ae}=_(te),pe=re(ae,se);if(pe){if(me&&pe.rows.length>0){const de=pe.rows.sort(D.DA),{visibleRange:Me,bucketSize:Ke,visibleRangeMs:st,requestedRangeMs:Ie}=A(de,me,q);pe.visibleRange=Me,pe.bucketSize=Ke,pe.series=V(de,Ke),pe.meta&&(pe.meta=oe(pe,st,Ie))}else pe.series=[];return pe.queries=se,pe}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:se}}function A(te,me,q,se=20,ae=1e3){let pe=q,de=me,Me=Math.max(de*se,ae),Ke,st;if(q){const Ie=te[0].timeEpochMs;if(st=q.to-q.from,Ke=q.to-Ie,Ke>0){const Ve=Ke/st;de*=Ve,Me=Math.max(Math.ceil(de*se),ae),pe={from:Math.floor(Ie/Me)*Me,to:q.to}}else Ke=1}return{bucketSize:Me,visibleRange:pe,visibleRangeMs:Ke,requestedRangeMs:st}}function _(te){const me=[],q=[];for(const se of te){if(H(se)||!se.fields.length){q.push(se);continue}se.length>0&&me.push(se)}return{logSeries:q,metricSeries:me}}function k(te){const{stringField:me,labelsField:q}=te;return q!==void 0?q.values:[me.labels??{}]}function Q(te,me){const{stringField:q,labelsField:se}=te;return se!==void 0?se.values[me]:q.labels??{}}function re(te,me=[]){if(te.length===0)return;const q=[];let se=[];const ae=te.filter(ye=>ye.fields.length);ae.length&&ae.forEach(ye=>{const Pe=new r.N(ye),be=Pe.getFirstFieldOfType(d.fS.string),Be=Pe.getFirstFieldOfType(d.fS.time),ze=ye.meta?.custom?.frameType==="LabeledTimeValues"?Pe.getFieldByName("labels"):void 0;if(be!==void 0&&Be!==void 0){const lt={series:ye,timeField:Be,labelsField:ze,timeNanosecondField:Pe.getFieldByName("tsNs"),stringField:be,logLevelField:Pe.getFieldByName("level"),idField:Z(Pe)};se.push(lt);const ht=k(lt);ht.length>0&&q.push(ht)}});const pe=q.flat(),de=pe.length>0?(0,m.FT)(pe):{},Me=[];let Ke=!1;for(const ye of se){const{timeField:Pe,timeNanosecondField:be,stringField:Be,logLevelField:ze,idField:lt,series:ht}=ye;for(let vt=0;vt<ht.length;vt++){const bt=Pe.values[vt],ct=(0,l.zh)(bt),Pt=be?be.values[vt]:void 0,ie=Pt||ct.valueOf()+"000000",Ce=Be.values[vt]??"",Ne=typeof Ce=="string"?Ce:JSON.stringify(Ce),Ze=p.QX.hasAnsiCodes(Ne),Qe=!!Ne.match(/\\n|\\t|\\r/),Le=ht.meta?.custom?.searchWords??ht.meta?.searchWords??[],Ue=Ze?C._J.strip(Ne):Ne,ve=Q(ye,vt),Se=(0,m.IU)(ve,de);Object.keys(Se).length>0&&(Ke=!0);let Fe=i.in.unknown;const je=ze&&ze.values[vt]||ve&&ve.level;je?Fe=(0,D.jx)(je):Fe=(0,D.ZO)(Ue);const Ge=me.find(gt=>gt.refId===ht.refId)?.datasource?.type;Me.push({entryFieldIndex:Be.index,rowIndex:vt,dataFrame:ht,logLevel:Fe,timeFromNow:(0,g.E8)(bt),timeEpochMs:ct.valueOf(),timeEpochNs:ie,timeLocal:(0,g.dq)(bt,{timeZone:"browser"}),timeUtc:(0,g.dq)(bt,{timeZone:"utc"}),uniqueLabels:Se,hasAnsi:Ze,hasUnescapedContent:Qe,searchWords:Le,entry:Ue,raw:Ne,labels:ve||{},uid:lt?lt.values[vt]:vt.toString(),datasourceType:Ge})}}const st=[];(0,t.size)(de)>0&&st.push({label:M,value:de,kind:i.Ku.LabelsMap});const Ve=te.filter(ye=>ye?.meta?.custom?.limit??ye?.meta?.limit).reduce((ye,Pe)=>(ye[Pe.refId??""]=Pe.meta?.custom?.limit??Pe.meta?.limit??0,ye),{}),_e=Object.values(Ve).reduce((ye,Pe)=>ye+=Pe,0);_e>0&&st.push({label:x,value:_e,kind:i.Ku.Number});let tt=0;const dt={};let Oe=!1;for(const ye of te){const Pe=ye.meta?.custom?.lokiQueryStatKey,{refId:be}=ye;if(!Oe&&ye.meta?.custom?.error&&(st.push({label:"",value:ye.meta?.custom.error,kind:i.Ku.Error}),Oe=!0),be&&!dt[be]){if(Pe&&ye.meta?.stats){const Be=ye.meta.stats.find(ze=>ze.displayName===Pe);Be&&(tt+=Be.value)}dt[be]=!0}}if(tt>0){const{text:ye,suffix:Pe}=(0,E.i7)("B")(tt);st.push({label:"Total bytes processed",value:`${ye} ${Pe}`,kind:i.Ku.String})}return{hasUniqueLabels:Ke,meta:st,rows:Me}}function Z(te){const me=["id"];for(const q of me){const se=te.getFieldByName(q);if(se)return se}}function oe(te,me,q){let se=[...te.meta];const ae=se.findIndex(de=>de.label===x),pe=ae>=0&&se[ae]?.value;if(pe&&pe>0){let de;if(pe===te.rows.length&&me&&q){const Me=(me/q*100).toFixed(2);de=`${pe} reached, received logs cover ${Me}% (${y.msRangeToTimeString(me)}) of your selected time range (${y.msRangeToTimeString(q)})`}else de=`${pe} (${te.rows.length} returned)`;se[ae]={label:x,value:de,kind:i.Ku.String}}return se}function G(te,me){const q=me&&te===i.in.unknown?"logs":te,se=b[te];return{displayNameFromDS:q,color:{mode:o.S.Fixed,fixedColor:se},custom:{drawStyle:f.l8.Bars,barAlignment:f.pu.Center,lineColor:se,pointColor:se,fillColor:se,lineWidth:1,fillOpacity:100,stacking:{mode:f.o0.Normal,group:"A"}}}}const le=(te,me,q)=>(te.fields=te.fields.map(se=>(se.type===d.fS.number&&(se.config={...se.config,...G(me(te),q)}),se)),te);function ge(te,me,q){const se=q.range.to.valueOf()-q.range.from.valueOf(),ae=ue(me.scopedVars,se);return me.interval=ae.interval,me.scopedVars.__interval={value:ae.interval,text:ae.interval},ae.intervalMs!==void 0&&(me.intervalMs=ae.intervalMs,me.scopedVars.__interval_ms={value:ae.intervalMs,text:ae.intervalMs}),me.hideFromInspector=!0,new n.y(pe=>{let de=[];pe.next({state:v.Gu.Loading,error:void 0,data:[]});const Me=te.query(me),st=((0,c.b)(Me)?Me:(0,s.D)(Me)).subscribe({complete:()=>{pe.complete()},next:Ie=>{const{error:Ve}=Ie;if(Ve!==void 0)pe.next({state:v.Gu.Error,error:Ve,data:[]}),pe.error(Ve);else{const _e=(0,t.groupBy)(Ie.data,"refId");de=Ie.data.map(tt=>{let dt=tt.refId||"";dt.startsWith("log-volume-")&&(dt=dt.substr(11));const Oe={logsVolumeType:i.o8.FullRange,absoluteRange:{from:q.range.from.valueOf(),to:q.range.to.valueOf()},datasourceName:te.name,sourceQuery:q.targets.find(ye=>ye.refId===dt)};return tt.meta={...tt.meta,custom:{...tt.meta?.custom,...Oe}},le(tt,q.extractLevel,_e[tt.refId].length===1)}),pe.next({state:Ie.state,error:void 0,data:de})}},error:Ie=>{pe.next({state:v.Gu.Error,error:Ie,data:[]}),pe.error(Ie)}});return()=>{st?.unsubscribe()}})}function ne(te,me){return me.hideFromInspector=!0,new n.y(q=>{let se=[];q.next({state:v.Gu.Loading,error:void 0,data:[]});const ae=te.query(me),de=((0,c.b)(ae)?ae:(0,s.D)(ae)).subscribe({complete:()=>{q.next({state:v.Gu.Done,error:void 0,data:se}),q.complete()},next:Me=>{const{error:Ke}=Me;Ke!==void 0?(q.next({state:v.Gu.Error,error:Ke,data:[]}),q.error(Ke)):se=Me.data.map(st=>{const Ie=(0,u.g0)(st),{timeIndex:Ve}=(0,u.sV)(Ie);return(0,u.aK)(Ie,Ve)})},error:Me=>{q.next({state:v.Gu.Error,error:Me,data:[]}),q.error(Me)}});return()=>{de?.unsubscribe()}})}function ue(te,me){if(te.__interval_ms){let q=te.__interval_ms.value,se="";return me<S*5?(q=R,se="1ms"):q>U?(q=I,se="1d"):q>O?(q=U,se="1h"):q>S?(q=O,se="1m"):(q=S,se="1s"),{interval:se,intervalMs:q}}else return{interval:"$__interval"}}},29494:(Y,T,e)=>{"use strict";e.d(T,{r:()=>n});class t{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const n=new t},98864:(Y,T,e)=>{"use strict";e.d(T,{$l:()=>r,Av:()=>g,F6:()=>m,Jk:()=>l,VW:()=>p,ad:()=>d,hS:()=>o,mE:()=>v,vo:()=>E});var t=e(62992),n=e(27876);const c=25,s="notifications",i=`${s}/lastRead`,f={byId:P(),lastRead:Number.parseInt(window.localStorage.getItem(i)??`${Date.now()}`,10)},u=(0,t.oM)({name:"appNotifications",initialState:f,reducers:{notifyApp:(x,{payload:M})=>{Object.values(x.byId).some(b=>h(M,b)&&b.showing)||(x.byId[M.id]=M,D(x.byId))},hideAppNotification:(x,{payload:M})=>{M in x.byId&&(x.byId[M].showing=!1,D(x.byId))},clearNotification:(x,{payload:M})=>{delete x.byId[M],D(x.byId)},clearAllNotifications:x=>{x.byId={},D(x.byId)},readAllNotifications:(x,{payload:M})=>{x.lastRead=M}}}),{notifyApp:r,hideAppNotification:d,clearNotification:o,clearAllNotifications:m,readAllNotifications:l}=u.actions,p=u.reducer,g=x=>x.lastRead,y=x=>Object.values(x.byId).sort((M,b)=>b.timestamp-M.timestamp),v=x=>y(x).filter(C),E=x=>Object.values(x.byId).filter(M=>M.showing);function h(x,M){return x.icon===M.icon&&x.severity===M.severity&&x.text===M.text&&x.title===M.title}function C(x){return x.severity===n.AppNotificationSeverity.Warning||x.severity===n.AppNotificationSeverity.Error}function a(x){return typeof x=="object"&&x!==null&&"id"in x&&"icon"in x&&"title"in x&&"text"in x}function P(){const x=window.localStorage.getItem(s);if(!x)return{};const M=JSON.parse(x);return Object.values(M).every(b=>a(b))?M:{}}function D(x){const M=Object.values(x).filter(C).sort((b,R)=>R.timestamp-b.timestamp).slice(0,c).reduce((b,R)=>(b[R.id]={id:R.id,severity:R.severity,icon:R.icon,title:R.title,text:R.text,traceId:R.traceId,timestamp:R.timestamp,showing:R.showing},b),{});try{window.localStorage.setItem(s,JSON.stringify(M))}catch(b){console.error("Unable to persist notifications to local storage"),console.error(b)}}},61962:(Y,T,e)=>{"use strict";e.d(T,{Lk:()=>d,OQ:()=>r,V4:()=>m,gd:()=>o});var t=e(62992),n=e(35645),c=e(99740);const s=n.v.bootData?.navTree??[];function i(l){return l.map(p=>{const g=p.children&&i(p.children);return{...p,children:g,text:(0,c.Y)(p.id)??p.text,subTitle:(0,c.L)(p.id)??p.subTitle,emptyMessage:(0,c.Y)(p.emptyMessageId)}})}const f="starred/",u=(0,t.oM)({name:"navBarTree",initialState:()=>i(n.v.bootData?.navTree??[]),reducers:{setStarred:(l,p)=>{const g=l.find(C=>C.id==="starred"),{id:y,title:v,url:E,isStarred:h}=p.payload;if(g)if(h){g.children||(g.children=[]);const C={id:f+y,text:v,url:E};g.children.push(C),g.children.sort((a,P)=>a.text.localeCompare(P.text))}else{const C=g.children?.findIndex(a=>a.id===f+y)??-1;C>-1&&g?.children?.splice(C,1)}},updateDashboardName:(l,p)=>{const{id:g,title:y,url:v}=p.payload,E=l.find(h=>h.id==="starred");if(E){const h=E.children?.find(C=>C.id===g);h&&(h.text=y,h.url=v,E.children?.sort((C,a)=>C.text.localeCompare(a.text)))}},removePluginFromNavTree:(l,p)=>{const g="plugin-page-"+p.payload.pluginID,y=l.findIndex(v=>v.id===g);y>-1&&l.splice(y,1)}}}),{setStarred:r,removePluginFromNavTree:d,updateDashboardName:o}=u.actions,m=u.reducer},14393:(Y,T,e)=>{"use strict";e.d(T,{Cu:()=>u,G4:()=>g,H7:()=>l,Qz:()=>f,RL:()=>m});var t=e(62992),n=e(82897),c=e.n(n),s=e(47694),i=e(99740);const f="home";function u(){const y={},v=(0,n.cloneDeep)(s.ZP.bootData.navTree),E=v.find(C=>C.id===f),h=v.filter(C=>C.id!==f);return E&&r(y,[E]),r(y,h,y[f]),y}function r(y,v,E){const h=[];for(const C of v){const a={...C,text:(0,i.Y)(C.id)??C.text,subTitle:(0,i.L)(C.id)??C.subTitle,emptyMessage:(0,i.Y)(C.emptyMessageId),parentItem:E};a.id&&(y[a.id]=a),a.children&&r(y,a.children,a),h.push(a)}E&&(E.children=h),y["not-found"]={...d("Page not found","404 Error").node},y.error={...d("Page error","An unexpected error").node}}function d(y,v){const E={text:y,subTitle:v,icon:"exclamation-triangle"};return{node:E,main:E}}const o={},m=(0,t.PH)("navIndex/updateNavIndex"),l=(0,t.PH)("navIndex/updateConfigurationSubtitle"),p=(y,v)=>({...y,parentItem:{...y.parentItem,text:y.parentItem?.text??"",subTitle:v}}),g=(y=o,v)=>{if(m.match(v)){let h=function(P){if(P.children)for(const D of P.children)C[D.id]={...D,parentItem:P};P.parentItem&&h(P.parentItem)};var E=h;const C={},a=v.payload;return h(a),{...y,...C}}else if(l.match(v)){const h=`Organization: ${v.payload}`;return{...y,cfg:{...y.cfg,subTitle:h},datasources:p(y.datasources,h),correlations:p(y.correlations,h),users:p(y.users,h),teams:p(y.teams,h),plugins:p(y.plugins,h),"org-settings":p(y["org-settings"],h),apikeys:p(y.apikeys,h)}}return y}},86245:(Y,T,e)=>{"use strict";e.d(T,{ht:()=>i,vw:()=>f});var t=e(35645),n=e(60492),c=e(14393);const s=()=>{const d={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:d,main:d}},i=(d,o,m,l=!1)=>{if(d[o]){const p=d[o],g=l?p:f(p),y=u(g,o);return{node:p,main:y}}return m||s()};function f(d){return t.v.featureToggles.nestedFolders&&d.id===n.y3?d:d.parentItem&&d.parentItem.id!==c.Qz?f(d.parentItem):d}function u(d,o){return d.id===o?{...d,active:!0}:d.children&&d.children.length>0?{...d,children:d.children.map(m=>u(m,o))}:d}const r=d=>`${d.main.text}${d.node.text?": "+d.node.text:""}`},42454:(Y,T,e)=>{"use strict";e.d(T,{y:()=>n});var t=e(29930);class n{constructor(s){this.resourceUri=s}update(s){return t.ae.put(`/api/${this.resourceUri}/preferences`,s)}patch(s){return t.ae.patch(`/api/${this.resourceUri}/preferences`,s)}load(){return t.ae.get(`/api/${this.resourceUri}/preferences`)}}},29930:(Y,T,e)=>{"use strict";e.d(T,{y$:()=>ge,ae:()=>ne,i:()=>ue});var t=e(91017),n=e(65583),c=e(84946),s=e(53376),i=e(12877),f=e(85850),u=e(59980),r=e(49372),d=e(5173),o=e(9471),m=e(90801),l=e(71735),p=e(59724),g=e(39859),y=e(57027),v=e(66516),E=e(82615),h=e(29933),C=e(44288),a=e(4063),P=e(89424),D=e(35645),x=e(18271),M=e(47694),b=e(53747),R=e(9892),S=e(66111),O=e(72648),U=e(85511),I=e(17784),F=e(31403),w=e(7804),K=e(27581);const L=me=>{const q=(0,O.l4)(),se=V(q),ae=(0,K.J)(q),pe=Boolean(me.maxConcurrentSessions),de=()=>{window.location.reload()};return S.createElement(U.h_,null,S.createElement("div",{className:ae.modal},S.createElement(I.v,{title:"You have been automatically signed out",severity:"warning",className:se.infobox},S.createElement("div",{className:se.text},S.createElement("p",null,"Your session token was automatically revoked because you have reached",S.createElement("strong",null,` the maximum number of ${pe?me.maxConcurrentSessions:""} concurrent sessions `),"for your account."),S.createElement("p",null,S.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),S.createElement(F.zx,{size:"md",variant:"primary",onClick:de},"Sign in"))),S.createElement("div",{className:(0,R.cx)(ae.modalBackdrop,se.backdrop)}))},V=(0,w.B)(me=>({infobox:R.css`
      margin-bottom: 0;
    `,text:R.css`
      margin: ${me.spacing(1,0,2)};
    `,backdrop:R.css`
      background-color: ${me.colors.background.canvas};
      opacity: 0.8;
    `}));var H=e(45984),j=e(8878),A=e(99822),_=(me=>(me[me.Pending=0]="Pending",me[me.InProgress=1]="InProgress",me[me.Done=2]="Done",me))(_||{});class k{constructor(q=!1){this.state={},this.queue=new t.x,this.updates=new t.x,this.add=(se,ae)=>this.queue.next({id:se,options:ae,state:0}),this.setInProgress=se=>this.queue.next({id:se,state:1}),this.setDone=se=>this.queue.next({id:se,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=se=>{const ae=Object.keys(se).filter(de=>se[de].state===1).length;return{noOfPending:Object.keys(se).filter(de=>se[de].state===0).length,noOfInProgress:ae,state:se}},this.publishUpdate=(se,ae)=>{this.printState(se,ae),this.updates.next(se)},this.printState=(se,ae)=>{if(!ae)return;const pe=Object.keys(se.state).reduce((de,Me)=>{const Ke={id:Me,state:se.state[Me].state};return de.push(Ke),de},[]);console.log("FetchQueue noOfStarted",se.noOfInProgress),console.log("FetchQueue noOfNotStarted",se.noOfPending),console.log("FetchQueue state",pe)},this.queue.subscribe(se=>{const{id:ae,state:pe,options:de}=se;if(this.state[ae]||(this.state[ae]={state:0,options:{url:""}}),pe===2){delete this.state[ae];const Ke=this.getUpdate(this.state);this.publishUpdate(Ke,q);return}this.state[ae].state=pe,de&&(this.state[ae].options=de);const Me=this.getUpdate(this.state);this.publishUpdate(Me,q)})}}var Q=e(86870);class re{constructor(q,se,ae){const pe=ae?.http2Enabled?1e3:5;q.getUpdates().pipe((0,m.h)(({noOfPending:de})=>de>0),(0,Q.b)(({state:de,noOfInProgress:Me})=>{const Ke=Object.keys(de).filter(_e=>de[_e].state===_.Pending&&!(0,A.mu)(de[_e].options.url)).reduce((_e,tt)=>{const dt={id:tt,options:de[tt].options};return _e.push(dt),_e},[]),st=Object.keys(de).filter(_e=>de[_e].state===_.Pending&&(0,A.mu)(de[_e].options.url)).reduce((_e,tt)=>{const dt={id:tt,options:de[tt].options};return _e.push(dt),_e},[]),Ie=Math.max(pe-Me-Ke.length,0),Ve=st.slice(0,Ie);return Ke.concat(Ve)})).subscribe(({id:de,options:Me})=>{se.add(de,Me)})}}class Z{constructor(q,se){this.queue=new t.x,this.responses=new t.x,this.add=(ae,pe)=>{this.queue.next({id:ae,options:pe})},this.getResponses=ae=>this.responses.asObservable().pipe((0,m.h)(pe=>pe.id===ae)),this.queue.subscribe(ae=>{const{id:pe,options:de}=ae;q.setInProgress(pe),this.responses.next({id:pe,observable:se(de)})})}}var oe=e(82002);const G="cancel_all_requests_request_id",le="grafana-trace-id";class ge{constructor(q){this.inFlightRequests=new t.x,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new t.x,this.dependencies={fromFetch:d.U,appEvents:x.Z,contextSrv:oe.Vt,logout:()=>{oe.Vt.setLoggedOut()}},q&&(this.dependencies={...this.dependencies,...q}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new k,this.responseQueue=new Z(this.fetchQueue,this.internalFetch),new re(this.fetchQueue,this.responseQueue,(0,M.iE)())}async request(q){return await(0,n.n)(this.fetch(q).pipe((0,o.U)(se=>se.data)))}fetch(q){const se=(0,C.Z)(),ae=this.fetchQueue;return new c.y(pe=>{const de=new s.w0;return de.add(this.responseQueue.getResponses(se).subscribe(Me=>{de.add(Me.observable.subscribe(pe))})),this.fetchQueue.add(se,q),function(){ae.setDone(se),de.unsubscribe()}})}internalFetch(q){q.requestId&&this.inFlightRequests.next(q.requestId),q=this.parseRequestOptions(q);const se=(0,b.v)();se!==null&&se!==""&&(q.headers||(q.headers={}),D.v.jwtUrlLogin&&D.v.jwtHeaderName&&(q.headers[D.v.jwtHeaderName]=`${se}`));const ae=this.getFromFetchStream(q),pe=ae.pipe(this.toFailureStream(q)),de=ae.pipe((0,m.h)(Me=>Me.ok===!0),(0,l.b)(Me=>{this.showSuccessAlert(Me),this.inspectorStream.next(Me)}));return(0,i.T)(de,pe).pipe((0,p.K)(Me=>(0,f._)(this.processRequestError(q,Me))),this.handleStreamCancellation(q))}resolveCancelerIfExists(q){this.inFlightRequests.next(q)}cancelAllInFlightRequests(){this.inFlightRequests.next(G)}async datasourceRequest(q){return(0,n.n)(this.fetch(q))}parseRequestOptions(q){const se=this.dependencies.contextSrv.user?.orgId;return q.retry=q.retry??0,(0,A.R8)(q.url)&&(se&&(q.headers=q.headers??{},q.headers["X-Grafana-Org-Id"]=se),q.url.startsWith("/")&&(q.url=q.url.substring(1)),q.headers?.Authorization&&(q.headers["X-DS-Authorization"]=q.headers.Authorization,delete q.headers.Authorization),this.noBackendCache&&(q.headers=q.headers??{},q.headers["X-Grafana-NoCache"]="true")),q.hideFromInspector===void 0&&(q.hideFromInspector=(0,A.R8)(q.url)&&!(0,A.mu)(q.url)),q}getFromFetchStream(q){const se=(0,j.Xv)(q),ae=(0,j.nS)(q);return this.dependencies.fromFetch(se,ae).pipe((0,g.z)(async pe=>{const{status:de,statusText:Me,ok:Ke,headers:st,url:Ie,type:Ve,redirected:_e}=pe,tt=q.responseType??((0,j.rZ)(st)?"json":void 0),dt=await(0,j.aO)(pe,tt);return{status:de,statusText:Me,ok:Ke,data:dt,headers:st,url:Ie,type:Ve,redirected:_e,config:q,traceId:pe.headers.get(le)??void 0}}),(0,y.B)())}toFailureStream(q){const{isSignedIn:se}=this.dependencies.contextSrv.user;return ae=>ae.pipe((0,m.h)(pe=>pe.ok===!1),(0,g.z)(pe=>{const{status:de,statusText:Me,data:Ke}=pe,st={status:de,statusText:Me,data:Ke,config:q,traceId:pe.headers.get(le)??void 0};return(0,f._)(st)}),(0,v.a)(pe=>pe.pipe((0,g.z)((de,Me)=>{const Ke=Me===0&&q.retry===0;if(de.status===401&&(0,A.R8)(q.url)&&Ke&&se){if(de.data?.error?.id==="ERR_TOKEN_REVOKED")return this.dependencies.appEvents.publish(new H.Dn({component:L,props:{maxConcurrentSessions:de.data?.error?.maxConcurrentSessions}})),(0,u.of)({});let st=()=>this.loginPing();return D.v.featureToggles.clientTokenRotation&&(st=()=>this.rotateToken()),(0,r.D)(st()).pipe((0,p.K)(Ie=>(Ie.status===401&&this.dependencies.logout(),(0,f._)(Ie))))}return(0,f._)(de)}))))}showApplicationErrorAlert(q){}showSuccessAlert(q){const{config:se}=q;if(se.showSuccessAlert===!1||se.showSuccessAlert===void 0&&(se.method==="GET"||(0,A.mu)(se.url)||!(0,A.R8)(se.url)))return;const ae=q.data;ae?.message&&this.dependencies.appEvents.emit(a.SI.alertSuccess,[ae.message])}showErrorAlert(q,se){if(q.showErrorAlert===!1||q.showErrorAlert===void 0&&((0,A.mu)(q.url)||!(0,A.R8)(q.url)))return;let ae="",pe=se.data.message;pe==="Unexpected error"&&se.message&&(pe=se.message),pe.length>80&&(ae=pe,pe="Error"),se.status===422&&(ae=se.data.message,pe="Validation failed"),this.dependencies.appEvents.emit(se.status<500?a.SI.alertWarning:a.SI.alertError,[pe,ae,se.data.traceID])}processRequestError(q,se){return se.data=se.data??{message:"Unexpected error"},typeof se.data=="string"&&(se.data={message:se.data,error:se.statusText,response:se.data}),se.data&&!se.data.message&&typeof se.data.error=="string"&&(se.data.message=se.data.error),se.data.message&&setTimeout(()=>{se.isHandled||this.showErrorAlert(q,se)},50),this.inspectorStream.next(se),se}handleStreamCancellation(q){return se=>se.pipe((0,E.R)(this.inFlightRequests.pipe((0,m.h)(ae=>{let pe=!1;return q&&q.requestId&&q.requestId===ae&&(pe=!0),ae===G&&(pe=!0),pe}))),(0,h.T)(()=>({type:P.eA.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:q})))}getInspectorStream(){return this.inspectorStream}async get(q,se,ae,pe){return this.request({...pe,method:"GET",url:q,params:se,requestId:ae})}async delete(q,se,ae){return this.request({...ae,method:"DELETE",url:q,data:se})}async post(q,se,ae){return this.request({...ae,method:"POST",url:q,data:se})}async patch(q,se,ae){return this.request({...ae,method:"PATCH",url:q,data:se})}async put(q,se,ae){return this.request({...ae,method:"PUT",url:q,data:se})}withNoBackendCache(q){return this.noBackendCache=!0,q().finally(()=>{this.noBackendCache=!1})}rotateToken(){return this.request({url:"/api/user/auth-tokens/rotate",method:"POST",retry:1})}loginPing(){return this.request({url:"/api/login/ping",method:"GET",retry:1})}search(q){return this.get("/api/search",q)}getDashboardByUid(q){return this.get(`/api/dashboards/uid/${q}`)}validateDashboard(q){const se=JSON.stringify(q,te,2);return this.request({method:"POST",url:"/api/dashboards/validate",data:{dashboard:se},showSuccessAlert:!1,showErrorAlert:!1})}getPublicDashboardByUid(q){return this.get(`/api/public/dashboards/${q}`)}getFolderByUid(q,se={}){const ae=new URLSearchParams;return se.withAccessControl&&ae.set("accesscontrol","true"),this.get(`/api/folders/${q}?${ae.toString()}`)}}const ne=new ge,ue=()=>ne;function te(me,q){if(!(typeof q=="number"&&!Number.isFinite(q)))return q}},82002:(Y,T,e)=>{"use strict";e.d(T,{Vt:()=>o});var t=e(82897),n=e.n(t),c=e(47891),s=e(54899),i=e(66121),f=e(27876),u=e(47694);class r{constructor(){this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.theme="dark",this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",this.analytics={identifier:""},u.ZP.bootData.user&&(0,t.extend)(this,u.ZP.bootData.user)}}class d{constructor(){this.sidemenuSmallBreakpoint=!1,this.tokenRotationJobId=0,u.ZP.bootData||(u.ZP.bootData={user:{},settings:{},navTree:[]}),this.user=new r,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=u.ZP.minRefreshInterval,this.isSignedIn&&this.scheduleTokenRotationJob()}async fetchUserPermissions(){try{this.accessControlEnabled()&&(this.user.permissions=await(0,s.i)().get("/api/access-control/user/actions",{reloadcache:!0}))}catch(p){console.error(p)}}setLoggedOut(){this.cancelTokenRotationJob(),this.user.isSignedIn=!1,this.isSignedIn=!1,window.location.reload()}hasRole(p){return p==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===p}accessControlEnabled(){return u.ZP.rbacEnabled}licensedAccessControlEnabled(){return(0,i.v)("accesscontrol")&&u.ZP.rbacEnabled}hasPermissionInMetadata(p,g){return this.accessControlEnabled()?!!g.accessControl?.[p]:!0}hasPermission(p){return this.accessControlEnabled()?!!this.user.permissions?.[p]:!0}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(p){return u.ZP.minRefreshInterval?c.intervalToMs(p)>=c.intervalToMs(u.ZP.minRefreshInterval):!0}getValidInterval(p){return this.isAllowedInterval(p)?p:u.ZP.minRefreshInterval}hasAccessToExplore(){return this.accessControlEnabled()?this.hasPermission(f.AccessControlAction.DataSourcesExplore)&&u.ZP.exploreEnabled:(this.isEditor||u.ZP.viewersCanEdit)&&u.ZP.exploreEnabled}hasAccess(p,g){return this.accessControlEnabled()?this.hasPermission(p):g}hasAccessInMetadata(p,g,y){return this.accessControlEnabled()?this.hasPermissionInMetadata(p,g):y}evaluatePermission(p,g){return this.accessControlEnabled()?g.some(y=>this.hasPermission(y))?[]:["Reject"]:p()}scheduleTokenRotationJob(){if(u.ZP.featureToggles.clientTokenRotation&&this.isSignedIn){let p=this.getSessionExpiry();if(p===0){this.rotateToken().then();return}let y=(p-Math.floor(Math.random()*(20-1)+1))*1e3-Date.now();this.tokenRotationJobId=setTimeout(()=>{if(this.getSessionExpiry()>p){this.scheduleTokenRotationJob();return}this.rotateToken().then()},y)}}cancelTokenRotationJob(){u.ZP.featureToggles.clientTokenRotation&&this.tokenRotationJobId>0&&clearTimeout(this.tokenRotationJobId)}rotateToken(){return fetch("/api/user/auth-tokens/rotate",{method:"POST"}).then(p=>{if(p.status===200){this.scheduleTokenRotationJob();return}if(p.status===401){this.setLoggedOut();return}}).catch(p=>{console.error(p)})}getSessionExpiry(){const p=document.cookie.split("; ").find(y=>y.startsWith("grafana_session_expiry="));if(!p)return 0;let g=p.split("=").at(1);return g?parseInt(g,10):0}}let o=new d;const m=l=>{throw new Error("contextSrv can be only overridden in test environment")}},13019:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>r});var t=e(82897),n=e.n(t),c=e(54899),s=e(47694),i=e(58379);class f{constructor(){}addDashboardImpression(o){const m=this.impressionKey();let l=[];i.Z.exists(m)&&(l=JSON.parse(i.Z.get(m)),(0,t.isArray)(l)||(l=[])),l=l.filter(p=>o!==p),l.unshift(o),l.length>50&&l.pop(),i.Z.set(m,JSON.stringify(l))}async convertToUIDs(){let o=this.getImpressions();const m=(0,t.filter)(o,p=>(0,t.isNumber)(p));if(!m.length)return;const l=await(0,c.i)().get(`/api/dashboards/ids/${m.join(",")}`);i.Z.set(this.impressionKey(),JSON.stringify([...(0,t.filter)(o,p=>(0,t.isString)(p)),...l]))}getImpressions(){const o=i.Z.get(this.impressionKey())||"[]";return JSON.parse(o)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,t.filter)(this.getImpressions(),m=>(0,t.isString)(m))}impressionKey(){return"dashboard_impressions-"+s.ZP.bootData.user.orgId}}const r=new f},58379:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>c});class t{get(i){return window.localStorage[i]}set(i,f){window.localStorage[i]=f}getBool(i,f){return f!==void 0&&!this.exists(i)?f:window.localStorage[i]==="true"}getObject(i,f){let u=f;if(this.exists(i)){const r=window.localStorage[i];try{u=JSON.parse(r)}catch(d){console.error(`Error parsing store object: ${i}. Returning default: ${f}. [${d}]`)}}return u}setObject(i,f){let u;try{u=JSON.stringify(f)}catch(r){throw new Error(`Could not stringify object: ${i}. [${r}]`)}try{this.set(i,u)}catch(r){const d=new Error(`Could not save item in localStorage: ${i}. [${r}]`);throw r instanceof Error&&(d.name=r.name),d}return!0}exists(i){return window.localStorage[i]!==void 0}delete(i){window.localStorage.removeItem(i)}}const c=new t},4050:(Y,T,e)=>{"use strict";e.d(T,{W:()=>r,Z:()=>d});var t=e(82897),n=e.n(t),c=e(79086),s=e(2703);function i(o,m){if(!o)return!1;if(o[0]==="/"){const l=(0,c.jO)(o);return m.match(l)!=null}return o===m}function f(o){return o===0?.001:o/10}function u(o){return o?{colors:[{opacity:0},{opacity:o/10}]}:null}function r(o,m,l){for(let p=0;p<o.length;p++){const g=o[p],y=m.yaxes,v=g.yaxis||1,E=y[v-1],h=(0,s.Cf)(E.format);(0,t.isNumber)(m.decimals)?g.updateLegendValues(h,m.decimals):(0,t.isNumber)(E.decimals)?g.updateLegendValues(h,E.decimals+1):g.updateLegendValues(h,null)}}class d{constructor(m){this.datapoints=m.datapoints,this.label=m.alias,this.id=m.alias,this.alias=m.alias,this.aliasEscaped=(0,t.escape)(m.alias),this.color=m.color,this.bars={fillColor:m.color},this.valueFormater=(0,s.Cf)("none"),this.stats={},this.legend=!0,this.unit=m.unit,this.dataFrameIndex=m.dataFrameIndex,this.fieldIndex=m.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(m){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let l=0;l<m.length;l++){const p=m[l];i(p.alias,this.alias)&&(p.lines!==void 0&&(this.lines.show=p.lines),p.dashes!==void 0&&(this.dashes.show=p.dashes,this.lines.lineWidth=0),p.points!==void 0&&(this.points.show=p.points),p.bars!==void 0&&(this.bars.show=p.bars),p.fill!==void 0&&(this.lines.fill=f(p.fill)),p.fillGradient!==void 0&&(this.lines.fillColor=u(p.fillGradient)),p.stack!==void 0&&(this.stack=p.stack),p.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:p.linewidth,this.dashes.lineWidth=p.linewidth),p.dashLength!==void 0&&(this.dashes.dashLength[0]=p.dashLength),p.spaceLength!==void 0&&(this.dashes.dashLength[1]=p.spaceLength),p.nullPointMode!==void 0&&(this.nullPointMode=p.nullPointMode),p.pointradius!==void 0&&(this.points.radius=p.pointradius),p.steppedLine!==void 0&&(this.lines.steps=p.steppedLine),p.zindex!==void 0&&(this.zindex=p.zindex),p.fillBelowTo!==void 0&&(this.fillBelowTo=p.fillBelowTo),p.color!==void 0&&this.setColor(p.color),p.transform!==void 0&&(this.transform=p.transform),p.legend!==void 0&&(this.legend=p.legend),p.hideTooltip!==void 0&&(this.hideTooltip=p.hideTooltip),p.yaxis!==void 0&&(this.yaxis=p.yaxis),p.hiddenSeries!==void 0&&(this.hiddenSeries=p.hiddenSeries))}}getFlotPairs(m){const l=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const p=m==="connected",g=m==="null as zero";let y,v,E=0,h,C=0,a=!0;for(let P=0;P<this.datapoints.length;P++){if(v=this.datapoints[P][0],y=this.datapoints[P][1],h!==void 0){const D=y-h;D<this.stats.timeStep&&(this.stats.timeStep=D)}if(h=y,v===null){if(p)continue;g&&(v=0)}v!==null&&((0,t.isNumber)(v)&&(this.stats.total+=v,this.allIsNull=!1,E++),v>this.stats.max&&(this.stats.max=v),v<this.stats.min&&(this.stats.min=v),this.stats.first===null?this.stats.first=v:C>v?(a=!1,P===this.datapoints.length-1&&(this.stats.delta+=v)):(a?this.stats.delta+=v-C:this.stats.delta+=v,a=!0),C=v,v<this.stats.logmin&&v>0&&(this.stats.logmin=v),v!==0&&(this.allIsZero=!1)),l.push([y,v])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),l.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/E,this.stats.current=l[l.length-1][1],this.stats.current===null&&l.length>1&&(this.stats.current=l[l.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=l.length,l}updateLegendValues(m,l){this.valueFormater=m,this.decimals=l}formatValue(m){return(0,t.isFinite)(m)||(m=null),(0,s.zc)(this.valueFormater(m,this.decimals))}isMsResolutionNeeded(){for(let m=0;m<this.datapoints.length;m++)if(this.datapoints[m][1]!==null&&this.datapoints[m][1]!==void 0){const l=this.datapoints[m][1].toString();if(l.length===13&&l%1e3!==0)return!0}return!1}hideFromLegend(m){return!!(m.hideEmpty&&this.allIsNull||!this.legend||m.hideZero&&this.allIsZero)}setColor(m){this.color=m,this.bars.fillColor=m}}},92973:(Y,T,e)=>{"use strict";e.d(T,{E:()=>f,f:()=>i});var t=e(66111),n=e(82378),c=e(72648),s=e(77582);const i=({children:u,value:r})=>{const[d,o]=(0,t.useState)(r);return(0,t.useEffect)(()=>{const m=s.h$.subscribe(n.hD,l=>{o(l.payload)});return()=>m.unsubscribe()},[]),t.createElement(c.Ni.Provider,{value:d},u)},f=(u,r)=>function(o){return t.createElement(i,{value:r},t.createElement(u,{...o}))}},77410:(Y,T,e)=>{"use strict";e.d(T,{q:()=>t});class t extends window.Worker{constructor(c,s){const i=c.toString(),f=i.split("/");f.pop();const u=`${f.join("/")}/`,r=`importScripts('${i}');`,d=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${u}'; ${r}`],{type:"application/javascript"}));super(d,s),URL.revokeObjectURL(d)}}},95156:(Y,T,e)=>{"use strict";e.d(T,{y:()=>n});var t=e(47694);function n(c={}){return t.ZP.rbacEnabled?{...c,accesscontrol:!0}:c}},2024:(Y,T,e)=>{"use strict";e.d(T,{A:()=>t});function t(c){return c.map(n).sort((s,i)=>i.sortRank-s.sortRank||s.name.localeCompare(i.name))}function n(c){const s=c;return s.sortRank=0,s.userId>0?(s.name=s.userLogin,s.sortRank=10):s.teamId>0?(s.name=s.team,s.sortRank=20):s.role&&(s.icon="fa fa-fw fa-street-view",s.name=s.role,s.sortRank=30,s.role==="Editor"&&(s.sortRank+=1)),s.inherited&&(s.sortRank+=100),s}},79378:(Y,T,e)=>{"use strict";e.d(T,{R:()=>t});const t=(n,c,s)=>(n.splice(s,0,n.splice(c,1)[0]),n)},43226:(Y,T,e)=>{"use strict";e.d(T,{vl:()=>c});function t(){const s=navigator.userAgent.indexOf("MSIE")>-1,i=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,f=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,u=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),r=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return s&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||i&&(r&&parseFloat(r[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||f&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(u&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function n(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function c(){return n()?"cmd":"ctrl"}},28630:(Y,T,e)=>{"use strict";e.d(T,{kJ:()=>c});class t{_linkTo(u,r){r<=0&&u.inputEdges.push(this),r>=0&&u.outputEdges.push(this),u.edges.push(this)}link(u,r){if(!u)throw Error("inputNode is required");if(!r)throw Error("outputNode is required");return this.unlink(),this.inputNode=u,this.outputNode=r,this._linkTo(u,1),this._linkTo(r,-1),this}unlink(){let u;const r=this.inputNode,d=this.outputNode;r&&d&&(u=r.edges.indexOf(this),u>-1&&r.edges.splice(u,1),u=d.edges.indexOf(this),u>-1&&d.edges.splice(u,1),u=r.outputEdges.indexOf(this),u>-1&&r.outputEdges.splice(u,1),u=d.inputEdges.indexOf(this),u>-1&&d.inputEdges.splice(u,1))}}class n{constructor(u){this.name=u,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(u){return u?typeof u=="object"?this.inputEdges.find(r=>r.inputNode?.name===u.name):this.inputEdges.find(r=>r.inputNode?.name===u):null}getEdgeTo(u){return u?typeof u=="object"?this.outputEdges.find(r=>r.outputNode?.name===u.name):this.outputEdges.find(r=>r.outputNode?.name===u):null}getOptimizedInputEdges(){const u=[];return this.inputEdges.forEach(r=>{r.inputNode?.inputEdges.map(o=>o.inputNode)?.forEach(o=>{const m=o?.getEdgeTo(this.name);m&&u.push(m)})}),this.inputEdges.filter(r=>u.indexOf(r)===-1)}}class c{constructor(){this.nodes={}}createNode(u){const r=new n(u);return this.nodes[u]=r,r}createNodes(u){const r=[];return u.forEach(d=>{r.push(this.createNode(d))}),r}link(u,r){let d=[],o=[];const m=[],l=[];u instanceof Array?d=u:d=[u],r instanceof Array?o=r:o=[r];for(let g=0;g<d.length;g++){const y=d[g];if(typeof y=="string"){const v=this.getNode(y);if(!v)throw Error(`cannot link input node named ${y} since it doesn't exist in graph`);m.push(v)}else m.push(y)}for(let g=0;g<o.length;g++){const y=o[g];if(typeof y=="string"){const v=this.getNode(y);if(!v)throw Error(`cannot link output node named ${y} since it doesn't exist in graph`);l.push(v)}else l.push(y)}const p=[];return m.forEach(g=>{l.forEach(y=>{p.push(this.createEdge().link(g,y))})}),p}descendants(u){if(!u.length)return new Set;const r=new Set(i(u)?u.map(d=>this.nodes[d]).filter(d=>d!==void 0):u);return this.descendantsRecursive(r)}descendantsRecursive(u,r=new Set){for(const d of u){const o=new Set;for(const{inputNode:m}of d.inputEdges)m&&!r.has(m)&&(r.add(m),o.add(m));this.descendantsRecursive(o,r)}return r}createEdge(){return new t}getNode(u){return this.nodes[u]}}const s=f=>{Object.keys(f.nodes).forEach(u=>{const r=f.nodes[u];let d=r.outputEdges.map(m=>m.outputNode?.name).join(", ");d||(d="<none>");let o=r.inputEdges.map(m=>m.inputNode?.name).join(", ");o||(o="<none>"),console.log(`${r.name}:
 - links to:   ${d}
 - links from: ${o}`)})};function i(f){return f.length>0&&typeof f[0]=="string"}},82052:(Y,T,e)=>{"use strict";e.d(T,{i:()=>n});var t=e(54899);function n(c){if(typeof c=="string")return c;if(c){if(c instanceof Error)return c.message;if((0,t.kW)(c)){if(c.data&&c.data.message)return c.data.message;if(c.statusText)return c.statusText}}return JSON.stringify(c)}},55935:(Y,T,e)=>{"use strict";e.d(T,{$$:()=>_,F3:()=>le,H6:()=>D,HI:()=>I,I$:()=>P,J5:()=>U,OQ:()=>k,Oy:()=>G,RZ:()=>ge,UI:()=>E,Xh:()=>O,Xk:()=>F,Z8:()=>L,Zf:()=>x,_Q:()=>j,_o:()=>K,fR:()=>w,n9:()=>ue,uC:()=>M,vP:()=>re,z_:()=>H});var t=e(82897),n=e.n(t),c=e(44288),s=e(40538),i=e(49187),f=e(206),u=e(75849),r=e(47891),d=e(67483),o=e(47406),m=e(86647),l=e(5562),p=e(58379),g=e(97573),y=e(47694),v=e(99822);const E={from:"now-1h",to:"now"},h={dedupStrategy:s.Y4.none},C=100,a="grafana.explore.datasource",P=te=>`${a}.${te}`;async function D(te){const{panel:me,datasourceSrv:q,timeSrv:se}=te;let ae=await q.get(me.datasource),pe=me.targets.map(Me=>(0,t.omit)(Me,"legendFormat")).filter(Me=>Me.datasource?.uid!==g.Yq),de;if(y.vc.featureToggles.exploreMixedDatasource===!1&&ae.meta?.id==="mixed"&&pe)for(const Me of pe){const Ke=await q.get(Me.datasource||void 0);if(Ke){ae=Ke,pe=me.targets.filter(st=>st.datasource===Ke.name);break}}if(ae){let Ke={range:se.timeRangeForUrl()};if(ae.interpolateVariablesInQueries){const Ie=me.scopedVars||{};Ke={...Ke,datasource:ae.name,context:"explore",queries:ae.interpolateVariablesInQueries(pe,Ie)}}else Ke={...Ke,datasource:ae.name,context:"explore",queries:pe};const st=JSON.stringify(Ke);de=i.Cj.renderUrl("/explore",{left:st})}return de}function x(te,me,q,se,ae,pe){const de=me.reduce((Ve,_e)=>(Ve+=_e.key,Ve),""),{interval:Me,intervalMs:Ke}=ne(se,q.minInterval,q.maxDataPoints),st=`${de}`,Ie={app:f.zj.Explore,timezone:pe||u.Ys,startTime:Date.now(),interval:Me,intervalMs:Ke,panelId:st,targets:me,range:se,requestId:"explore_"+te,rangeRaw:se.raw,scopedVars:{__interval:{text:Me,value:Me},__interval_ms:{text:Ke,value:Ke}},maxDataPoints:q.maxDataPoints,liveStreaming:q.liveStreaming};return{queries:me,request:Ie,scanning:ae,id:I(),done:!1}}const M=({key:te,...me})=>me,b=(te,...me)=>me.some(q=>te.hasOwnProperty(q));var R=(te=>(te[te.RangeFrom=0]="RangeFrom",te[te.RangeTo=1]="RangeTo",te[te.Datasource=2]="Datasource",te[te.SegmentsStart=3]="SegmentsStart",te))(R||{});const S=te=>{if(te)try{return JSON.parse(te)}catch(me){console.error(me)}},O=(te,me)=>{if(te==null)return"";try{return JSON.stringify(te,null,me)}catch(q){console.error(q)}return""};function U(te){const me=S(te),q={datasource:null,queries:[],range:E,mode:null};if(!me)return q;if(!Array.isArray(me))return{...me,isFromCompactUrl:!1};if(me.length<=3)return console.error("Error parsing compact URL state for Explore."),q;const se={from:me[0],to:me[1]},ae=me[2],pe=me.slice(3),de=pe.filter(Ke=>!b(Ke,"ui","mode","__panelsState")),Me=pe.find(Ke=>b(Ke,"__panelsState"))?.__panelsState;return{datasource:ae,queries:de,range:se,panelsState:Me,isFromCompactUrl:!0}}function I(te=0){return`Q-${(0,c.Z)()}-${te}`}async function F(te,me=0,q){let se,ae,pe;return q?ae=q:te.length>0&&te[te.length-1].datasource?ae=te[te.length-1].datasource:(se=await(0,m.F)().get(),pe=se.getDefaultQuery?.(f.zj.Explore),ae=se.getRef()),se||(se=await(0,m.F)().get(ae),pe=se.getDefaultQuery?.(f.zj.Explore)),{...pe,refId:(0,v.Hs)(te),key:I(me),datasource:ae}}const w=(te,me,q=0)=>{const se=I(q),ae=te.refId||(0,v.Hs)(me);return{...te,refId:ae,key:se}},K=te=>{const me=te.map(q=>q.datasource?.uid);return{allHaveDatasource:me.length===te.length,noneHaveDatasource:me.length===0,allDatasourceSame:me.every((q,se,ae)=>q===ae[0])}};async function L(te,me){if(te&&typeof te=="object"&&te.length>0){const q=[];for(let se=0;se<te.length;se++){const ae=te[se],pe=I(se);let de=ae.refId;de||(de=(0,v.Hs)(q));let Me=!0;if(ae.datasource)try{await(0,m.F)().get(ae.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),Me=!1}Me&&q.push({...ae,refId:de,key:pe})}return q}try{const q=me??(await(0,m.F)().get()).getRef();return[await F(te??[],void 0,q)]}catch{return[]}}const V=["refId","key","context","datasource"];function H(te){return te&&te.some(me=>Object.keys(me).filter(se=>V.indexOf(se)===-1).map(se=>me[se]).filter(se=>se).length>0)}function j(te,me,q){const se=Date.now();let ae=te;q.forEach(de=>{ae=[{query:de,ts:se},...ae]}),ae.length>C&&(ae=ae.slice(0,C));const pe=`grafana.explore.history.${me}`;try{return p.Z.setObject(pe,ae),ae}catch(de){return console.error(de),te}}function A(te){const me=`grafana.explore.history.${te}`;store.delete(me)}const _=te=>te.reduce((q,se,ae)=>{const pe=se.datasource?.uid||se.key;return q.concat(`${pe}-${ae}`)},[]),k=(te,me,q)=>{let se=r.convertRawToRange(me,te,q);return se.to.isBefore(se.from)&&(se=r.convertRawToRange({from:se.raw.to,to:se.raw.from},te,q)),se},Q=te=>{if(te===null)return null;if((0,d.v9)(te)||te.indexOf("now")!==-1)return te;if(te.length===8)return(0,d.zh)(te,"YYYYMMDD");if(te.length===15)return(0,d.zh)(te,"YYYYMMDDTHHmmss");if(te.length===19)return(0,d.zh)(te,"YYYY-MM-DD HH:mm:ss");if(te.match(/^\d+$/)){const q=parseInt(te,10);return(0,d.zh)(q)}const me=(0,d.zh)(te);return me.isValid()?me:null},re=(te,me,q)=>{const se={from:Q(te.from),to:Q(te.to)};return{from:o.parse(se.from,!1,me),to:o.parse(se.to,!0,me),raw:se}},Z=te=>{if(!te||typeof te!="object")return;if(te.refId)return te;const me=Object.keys(te);for(let q=0;q<me.length;q++){const se=me[q],ae=Z(te[se]);if(ae)return ae}},oe=te=>{if(!te)return[];if(typeof te!="object")return[];const me=Object.keys(te),q=[];for(let se=0;se<me.length;se++){const ae=me[se];if(ae==="refId"){q.push(te[ae]);continue}q.push(oe(te[ae]))}return uniq(flatten(q))},G=te=>l.dP.isLive(te)?s.UV.Ascending:s.UV.Descending,le=te=>{let q=`${window.location.protocol==="https:"?"wss://":"ws://"}${window.location.host}${y.vc.appSubUrl}`;return q.endsWith("/")&&(q=q.slice(0,-1)),`${q}${te}`},ge=te=>{te&&te.unsubscribe()};function ne(te,me,q){return q?r.calculateInterval(te,q,me):{interval:"1s",intervalMs:1e3}}const ue=te=>{const me=document.createElement("textarea");me.value=te,document.body.appendChild(me),me.select(),document.execCommand("copy"),document.body.removeChild(me)}},8878:(Y,T,e)=>{"use strict";e.d(T,{Xv:()=>v,aO:()=>g,nS:()=>s,rZ:()=>l,tW:()=>y});var t=e(82897),n=e.n(t),c=e(55024);const s=h=>{const C=h.method,a=m(h),P=l(a),D=p(h,P),x=E(h);return{method:C,headers:a,body:D,credentials:x}},i={canParse:()=>!0,parse:h=>(h.get("accept")||h.set("accept","application/json, text/plain, */*"),h)},f=h=>({canParse:C=>(C?.method?C?.method.toLowerCase():"")===h,parse:C=>(C.get("content-type")||C.set("content-type","application/json"),C)}),u=f("post"),r=f("put"),d=f("patch"),o=[u,r,d,i],m=h=>{const C=h?.headers?new Headers(h.headers):new Headers;return o.filter(D=>D.canParse(h)).reduce((D,x)=>x.parse(D),C)},l=h=>{if(!h)return!1;const C=h.get("content-type");return!!(C&&C.toLowerCase()==="application/json")},p=(h,C)=>h&&(!h.data||typeof h.data=="string"?h.data:C?JSON.stringify(h.data):new URLSearchParams(h.data));async function g(h,C){if(C)switch(C){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"json":return h.headers.get("Content-Length")==="0"?(console.warn(`${h.url} returned an invalid JSON`),{}):await h.json();case"text":return h.text()}const a=await h.text();try{return JSON.parse(a)}catch{}return a}function y(h){return Object.keys(h).map(C=>{const a=h[C];return Array.isArray(a)?a.map(P=>`${encodeURIComponent(C)}=${encodeURIComponent(P)}`).join("&"):`${encodeURIComponent(C)}=${encodeURIComponent(a)}`}).join("&")}const v=h=>{const C=(0,t.omitBy)(h.params,P=>P===void 0||P&&P.length===0),a=y(C);return h.params&&a.length?`${h.url}?${a}`:h.url},E=h=>h&&(h.credentials?h.credentials:h.withCredentials?((0,c.d)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin")},40229:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{default:()=>t});function t(n,c){c=c||{};const s=c.delimiter||".";let i=c.maxDepth||3,f=1;const u={};function r(d,o){Object.keys(d).forEach(m=>{const l=d[m],p=c?.safe&&Array.isArray(l),y=Object.prototype.toString.call(l)==="[object Object]",v=o?o+s+m:m;if(c?.maxDepth||(i=f+1),!p&&y&&Object.keys(l).length&&f<i)return++f,r(l,v);u[v]=l})}return r(n,null),u}},24816:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>f});var t=e(55024),n=e(79086),c=e(47891),s=e(2703);const i={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:u=>((0,t.d)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,n.yI)(u)),roundInterval:u=>((0,t.d)("kbn.ts","kbn.roundInterval()","@grafana/data"),c.roundInterval(u)),secondsToHms:u=>((0,t.d)("kbn.ts","kbn.secondsToHms()","@grafana/data"),c.secondsToHms(u)),secondsToHhmmss:u=>{const r=[],d=Math.floor(u/3600),o=Math.floor(u%3600/60),m=Math.floor(u%3600%60);return d>9?r.push(""+d):r.push("0"+d),o>9?r.push(""+o):r.push("0"+o),m>9?r.push(""+m):r.push("0"+m),r.join(":")},toPercent:(u,r)=>Math.floor(u/r*1e4)/100+"%",addSlashes:u=>u.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:u=>((0,t.d)("kbn.ts","kbn.describeInterval()","@grafana/data"),c.describeInterval(u)),intervalToSeconds:u=>((0,t.d)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),c.intervalToSeconds(u)),intervalToMs:u=>((0,t.d)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),c.intervalToMs(u)),calculateInterval:(u,r,d)=>((0,t.d)("kbn.ts","kbn.calculateInterval()","@grafana/data"),c.calculateInterval(u,r,d)),queryColorDot:(u,r)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+u,"font-size:"+r+"px"].join(";")+'"></div>',slugifyForUrl:u=>u.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:u=>((0,t.d)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,n.jO)(u)),toFixed:(u,r)=>{if(u===null)return"";const d=r?Math.pow(10,Math.max(0,r)):1,o=String(Math.round(u*d)/d);if(o.indexOf("e")!==-1||u===0)return o;if(r!=null){const m=o.indexOf("."),l=m===-1?0:o.length-m-1;if(l<r)return(l?o:o+".")+String(d).slice(1,r-l+1)}return o},toFixedScaled:(u,r,d,o,m)=>d===null?i.toFixed(u,r)+m:i.toFixed(u,d+o)+m,roundValue:(u,r)=>{if(u===null)return null;const d=Math.pow(10,r),o=(d*u).toFixed(r);return Math.round(parseFloat(o))/d},getUnitFormats:s.QW};typeof Proxy<"u"?i.valueFormats=new Proxy(i.valueFormats,{get(u,r,d){if(typeof r!="string")throw{message:`Value format ${String(r)} is not a string`};const o=(0,s.Cf)(r);return o?(m,l,p,g)=>(0,s.zc)(o(m,l,p,g?"utc":"browser")):Reflect.get(u,r,d)}}):i.valueFormats=(0,s.Td)();const f=i},99822:(Y,T,e)=>{"use strict";e.d(T,{DI:()=>c,Hs:()=>t,R8:()=>i,mu:()=>s,sB:()=>u,vH:()=>n});const t=r=>{for(let d=0;;d++){const o=f(d);if(!r.some(m=>m.refId===o))return o}};function n(r){const d=["refId","hide","key","queryType","datasource"];for(const o in r)if(o!=="label"&&!d.includes(o))return!1;return!0}function c(r,d,o){const m=d||{};return m.refId=t(r),m.hide=!1,!m.datasource&&o&&(m.datasource=o),[...r,m]}function s(r){return r.indexOf("api/datasources/proxy")!==-1||r.indexOf("api/ds/query")!==-1}function i(r){return!r.match(/^http/)}function f(r){const d="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return r<d.length?d[r]:f(Math.floor(r/d.length)-1)+d[r%d.length]}function u(r){return r||void 0}},51424:(Y,T,e)=>{"use strict";e.d(T,{As:()=>l.A,DR:()=>O,HK:()=>E,OH:()=>R,VI:()=>h,au:()=>p,bQ:()=>D,di:()=>v,gt:()=>C,k4:()=>S,kg:()=>y,t2:()=>P,ub:()=>g,y9:()=>a});var t=e(82897),n=e.n(t),c=e(49187),s=e(77258),i=e(86647),f=e(659),u=e(60499),r=e(3153),d=e(47694),o=e(50395),m=e(4219),l=e(43823);async function p(I,F,w,K,L,V,H){const j=w&&w.filter(A=>U(A));if(j.length>0){let A=!1,_=!1,k;try{k=(await(0,m.b)().addToRichHistory({datasourceUid:I,datasourceName:F??"",queries:j,starred:K,comment:L??""})).warning}catch(Q){return Q instanceof Error&&(Q.name===o.j.StorageFull?(A=!0,V&&(0,r.WI)((0,f.$l)((0,u.t_)(Q.message)))):Q.name!==o.j.DuplicatedEntry&&(0,r.WI)((0,f.$l)((0,u.t_)("Rich History update failed",Q.message)))),{richHistoryStorageFull:A,limitExceeded:_}}return k&&k.type===o.V.LimitExceeded&&(_=!0,H&&(0,r.WI)((0,f.$l)((0,u.ZR)(k.message)))),{richHistoryStorageFull:A,limitExceeded:_}}return{}}async function g(I){return await(0,m.b)().getRichHistory(I)}async function y(I){await(0,m.b)().updateSettings(I)}async function v(){return await(0,m.b)().getSettings()}async function E(){return(0,m.b)().deleteAll()}async function h(I,F){try{return await(0,m.b)().updateStarred(I,F)}catch(w){w instanceof Error&&(0,r.WI)((0,f.$l)((0,u.t_)("Saving rich history failed",w.message)));return}}async function C(I,F){try{return await(0,m.b)().updateComment(I,F)}catch(w){w instanceof Error&&(0,r.WI)((0,f.$l)((0,u.t_)("Saving rich history failed",w.message)));return}}async function a(I){try{return await(0,m.b)().deleteRichHistory(I),I}catch(F){F instanceof Error&&(0,r.WI)((0,f.$l)((0,u.t_)("Saving rich history failed",F.message)));return}}const P=I=>{const F={range:{from:"now-1h",to:"now"},datasource:I.datasourceName,queries:I.queries,context:"explore"},w=(0,c.S)(F),K=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return c.Cj.renderUrl(`${K}/explore`,{left:w})},D=I=>{let F;switch(I){case 0:F="today";break;case 1:F="yesterday";break;case 7:F="a week ago";break;case 14:F="two weeks ago";break;default:F=`${I} days ago`}return F};function x(I){return(0,s.dq)(I,{format:"MMMM D"})}function M(I){const F=(0,t.omit)(I,["key","refId","datasource"]);return JSON.stringify(F)}function b(I,F){let w="";return F===l.A.DatasourceAZ||F===l.A.DatasourceZA?w=I.datasourceName:w=x(I.createdAt),w}function R(I,F){return F?.getQueryDisplayText?F.getQueryDisplayText(I):M(I)}function S(I,F){let w={};return I.forEach(K=>{let L=b(K,F);L in w?w[L]=[...w[L],K]:w[L]=[K]}),w}function O(){return(0,i.F)().getList({mixed:d.vc.featureToggles.exploreMixedDatasource===!0}).map(I=>({name:I.name,uid:I.uid}))}function U(I){const F=(0,t.omit)(I,["key","refId","datasource"]);return Object.keys(F).length>0}},43823:(Y,T,e)=>{"use strict";e.d(T,{A:()=>t});var t=(n=>(n.Descending="Descending",n.Ascending="Ascending",n.DatasourceAZ="Datasource A-Z",n.DatasourceZA="Datasource Z-A",n))(t||{})},57465:(Y,T,e)=>{"use strict";e.d(T,{D:()=>o,L:()=>m});var t=e(58635),n=e(35645),c=e(54899),s=e(659),i=e(60499),f=e(3153),u=e(55935);function r(){return`${window.location.protocol}//${window.location.host}${n.v.appSubUrl}`}function d(l){let p=l.replace(r(),"");return p.startsWith("/")?p.substring(1,p.length):p}const o=(0,t.Z)(async function(l){try{return(await(0,c.i)().post("/api/short-urls",{path:d(l)})).url}catch(p){console.error("Error when creating shortened link: ",p),(0,f.WI)((0,s.$l)((0,i.t_)("Error generating shortened link")))}}),m=async l=>{const p=await o(l);p?((0,u.n9)(p),(0,f.WI)((0,s.$l)((0,i.AT)("Shortened link copied to clipboard")))):(0,f.WI)((0,s.$l)((0,i.t_)("Error generating shortened link")))}},97724:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{getFlotRange:()=>s,getFlotTickDecimals:()=>i,getFlotTickSize:()=>c,getPrecision:()=>r,getScaledDecimals:()=>n,getStringPrecision:()=>d,grafanaTimeFormat:()=>f,logp:()=>u,tickStep:()=>t});function t(o,m,l){const p=Math.sqrt(50),g=Math.sqrt(10),y=Math.sqrt(2),v=Math.abs(m-o)/Math.max(0,l);let E=Math.pow(10,Math.floor(Math.log(v)/Math.LN10));const h=v/E;return h>=p?E*=10:h>=g?E*=5:h>=y&&(E*=2),m<o?-E:E}function n(o,m){return o-Math.floor(Math.log(m)/Math.LN10)}function c(o,m,l,p){const g=(m-o)/l;let y=-Math.floor(Math.log(g)/Math.LN10);const v=p,E=Math.pow(10,-y),h=g/E;let C;return h<1.5?C=1:h<3?(C=2,h>2.25&&(v==null||y+1<=v)&&(C=2.5,++y)):h<7.5?C=5:C=10,C*=E,C}function s(o,m,l,p){let y=+(o??l),v=+(m??p);const E=v-y;if(E===0){const C=Math.abs(v===0?1:v*.25);o===null&&(y-=C),(m==null||o!=null)&&(v+=C)}else .02!=null&&(o==null&&(y-=E*.02,y<0&&l!=null&&l>=0&&(y=0)),m==null&&(v+=E*.02,v>0&&p!=null&&p<=0&&(v=0)));return{min:y,max:v}}function i(o,m,l,p){const{min:g,max:y}=s(l.min,l.max,o,m),v=.3*Math.sqrt(p),E=(y-g)/v,h=-Math.floor(Math.log(E)/Math.LN10),C=Math.pow(10,-h),a=E/C;let P;a<1.5?P=1:a<3?(P=2,a>2.25&&(P=2.5)):a<7.5?P=5:P=10,P*=C;const D=Math.max(0,-Math.floor(Math.log(E)/Math.LN10)+1),x=D-Math.floor(Math.log(P)/Math.LN10);return{tickDecimals:D,scaledDecimals:x}}function f(o,m,l){if(m&&l&&o){const p=l-m,g=p/o/1e3,y=864e5,v=31536e6;return g<=45?"HH:mm:ss":g<=7200||p<=y?"HH:mm":g<=8e4?"MM/DD HH:mm":g<=2419200||p<=v?"MM/DD":"YYYY-MM"}return"HH:mm"}function u(o,m){return Math.log(o)/Math.log(m)}function r(o){const m=o.toString();return d(m)}function d(o){if(isNaN(o))return 0;const m=o.indexOf(".");return m===-1?0:o.length-m-1}},5242:(Y,T,e)=>{"use strict";e.d(T,{e:()=>n,h:()=>c});var t=e(67483);const n=(s,i)=>{const f={from:(0,t.zh)(i.from),to:(0,t.zh)(i.to)},u=(f.to.valueOf()-f.from.valueOf())/2;let r,d;return s===-1?(r=f.to.valueOf()-u,d=f.from.valueOf()-u):s===1?(r=f.to.valueOf()+u,d=f.from.valueOf()+u,r>Date.now()&&f.to.valueOf()<Date.now()&&(r=Date.now(),d=f.from.valueOf())):(r=f.to.valueOf(),d=f.from.valueOf()),{from:d,to:r}},c=(s,i)=>{const f=s.to.valueOf()-s.from.valueOf(),u=s.to.valueOf()-f/2,r=f===0?3e4:f*i,d=u+r/2;return{from:u-r/2,to:d}}},17804:(Y,T,e)=>{"use strict";e.d(T,{q7:()=>n});var t=e(67483);function n(i,f){if(!(i.fromDayOfWeek||i.from)&&!(i.toDayOfWeek||i.to))return[];const u={...i};u.from&&!u.to&&(u.to=u.from),!u.from&&u.to&&(u.from=u.to);const r={from:c(u.from),to:c(u.to)};if(!u.fromDayOfWeek&&u.toDayOfWeek&&(u.fromDayOfWeek=u.toDayOfWeek),!u.toDayOfWeek&&u.fromDayOfWeek&&(u.toDayOfWeek=u.fromDayOfWeek),u.fromDayOfWeek&&(r.from.dayOfWeek=Number(u.fromDayOfWeek)),u.toDayOfWeek&&(r.to.dayOfWeek=Number(u.toDayOfWeek)),r.from.dayOfWeek&&r.from.h==null&&r.from.m==null&&(r.from.h=0,r.from.m=0,r.from.s=0),r.to.dayOfWeek&&r.to.h==null&&r.to.m==null&&(r.to.h=23,r.to.m=59,r.to.s=59),!r.from||!r.to)return[];r.from.h==null&&(r.from.h=0),r.to.h==null&&(r.to.h=23);const d=[],o=(0,t.CQ)(f.from).utc();for(o.set("hour",0),o.set("minute",0),o.set("second",0),o.set("millisecond",0),o.add(r.from.h,"hours"),o.add(r.from.m,"minutes"),o.add(r.from.s,"seconds");o.unix()<=f.to.unix();){for(;r.from.dayOfWeek&&r.from.dayOfWeek!==o.isoWeekday();)o.add(24,"hours");if(o.unix()>f.to.unix())break;const m=(0,t.CQ)(o).utc();if(m.hour)if(r.from.h<=r.to.h)m.add(r.to.h-r.from.h,"hours");else if(r.from.h>r.to.h)for(;m.hour()!==r.to.h;)m.add(1,"hours");else for(m.add(24-r.from.h,"hours");m.hour()!==r.to.h;)m.add(1,"hours");for(m.set("minute",r.to.m??0),m.set("second",r.to.s??0);r.to.dayOfWeek&&r.to.dayOfWeek!==m.isoWeekday();)m.add(24,"hours");o.unix()<f.from.unix()&&m.unix()<f.from.unix()||o.unix()>f.to.unix()&&m.unix()>f.to.unix()||d.push({from:o.valueOf(),to:m.valueOf()}),o.add(24,"hours")}return d}function c(i){const f={};if(!i?.length)return f;const u=i.split(":");return u?.length&&(f.h=Math.min(23,Math.max(0,Number(u[0]))),u.length>1&&(f.m=Math.min(60,Math.max(0,Number(u[1]))),u.length>2&&(f.s=Math.min(60,Math.max(0,Number(u[2])))))),f}function s(i){if(!i||i.h==null&&i.m==null&&i.s==null)return"";let f=String(i.h??0).padStart(2,"0")+":"+String(i.m??0).padStart(2,"0");return i.s!=null&&(f+=String(i.s??0).padStart(2,"0")),f}},49427:(Y,T,e)=>{"use strict";e.d(T,{et:()=>s,fy:()=>f,nO:()=>i,np:()=>r});var t=e(53678),n=e(92468),c=e(99098);function s(d){return d.sort((m,l)=>m[0]-l[0]),d.reduce((m,l)=>{if(!m.length)return[l];const p=m.slice(-1)[0],[g,y]=p,[v,E]=l;return E<y?m:v>y?[...m,l]:[...m.slice(0,-1),[g,E]]},[]).reduce((m,l)=>m+(l[1]-l[0]),0)}function i(d){const o={};let m;for(let l=0;m=d(l),!!m;l++){o[m.id]?o[m.id].span=m.span:o[m.id]={span:m.span,children:[]};for(const p of m.parentIds)p&&(o[p]?o[p].children.push(m.id):o[p]={span:void 0,children:[m.id]})}return o}function f(d,o,m){return{main:`${u(d)}ms (${u(d/o*100)}%)`,secondary:`${u(m)}ms (${u(m/d*100)}%)`}}function u(d){return parseFloat(d.toFixed(2))}function r(){const d=new t.v({fields:[{name:n.z.id,type:c.fS.string},{name:n.z.title,type:c.fS.string},{name:n.z.subTitle,type:c.fS.string},{name:n.z.mainStat,type:c.fS.string,config:{displayName:"Total time (% of trace)"}},{name:n.z.secondaryStat,type:c.fS.string,config:{displayName:"Self time (% of total)"}},{name:n.z.color,type:c.fS.number,config:{color:{mode:"continuous-GrYlRd"},displayName:"Self time / Trace duration"}}],meta:{preferredVisualisationType:"nodeGraph"}}),o=new t.v({fields:[{name:n.z.id,type:c.fS.string},{name:n.z.target,type:c.fS.string},{name:n.z.source,type:c.fS.string}],meta:{preferredVisualisationType:"nodeGraph"}});return[d,o]}},53747:(Y,T,e)=>{"use strict";e.d(T,{v:()=>n});let t="";const n=()=>{const s=new URLSearchParams(window.location.search).get("auth_token");return s!==null&&s!==""?(t=s,s):t}},65135:(Y,T,e)=>{"use strict";e.d(T,{A:()=>i});var t=e(66111),n=e(49969),c=e(8581);const s=Object.keys(n.B).map(f=>({label:f,value:f}));function i({value:f,onChange:u,"aria-label":r,inputId:d,autoFocus:o,...m}){return t.createElement(c.Ph,{inputId:d,value:f,options:s,onChange:l=>u(l.value),placeholder:"Choose role...","aria-label":r,autoFocus:o,...m})}},37592:(Y,T,e)=>{"use strict";e.d(T,{B9:()=>v,CP:()=>O,Dx:()=>E,Fm:()=>R,IS:()=>w,Jk:()=>D,M6:()=>j,Nq:()=>g,PK:()=>l,R5:()=>H,V0:()=>F,Xx:()=>C,Y3:()=>U,_1:()=>b,bN:()=>P,b_:()=>I,h8:()=>h,j4:()=>S,oO:()=>A,tQ:()=>y,uV:()=>x,uh:()=>L});var t=e(82897),n=e.n(t),c=e(77258),s=e(66121),i=e(54899),f=e(37932),u=e(47694),r=e(77582),d=e(95156),o=e(27876),m=e(66114);function l(_){return async k=>{try{k((0,m.UA)(!1)),await k(p(_)),await k(a(_)),await k(M(_)),u.ZP.ldapEnabled&&(0,s.v)("ldapsync")&&await k(S()),k((0,m.UA)(!0))}catch(Q){if(console.error(Q),(0,i.kW)(Q)){const re={title:Q.data.message,body:Q.data.error};k((0,m.sL)(re))}}}}function p(_){return async k=>{const Q=await(0,i.i)().get(`/api/users/${_}`,(0,d.y)());k((0,m.pm)(Q))}}function g(_){return async k=>{await(0,i.i)().put(`/api/users/${_.id}`,_),k(l(_.id))}}function y(_,k){return async Q=>{const re={password:k};await(0,i.i)().put(`/api/admin/users/${_}/password`,re),Q(l(_))}}function v(_){return async k=>{await(0,i.i)().post(`/api/admin/users/${_}/disable`),f.E1.push("/admin/users")}}function E(_){return async k=>{await(0,i.i)().post(`/api/admin/users/${_}/enable`),k(l(_))}}function h(_){return async k=>{await(0,i.i)().delete(`/api/admin/users/${_}`),f.E1.push("/admin/users")}}function C(_,k){return async Q=>{const re={isGrafanaAdmin:k};await(0,i.i)().put(`/api/admin/users/${_}/permissions`,re),Q(l(_))}}function a(_){return async k=>{const Q=await(0,i.i)().get(`/api/users/${_}/orgs`);k((0,m.fm)(Q))}}function P(_,k,Q){return async re=>{const Z={loginOrEmail:_.login,role:Q};await(0,i.i)().post(`/api/orgs/${k}/users/`,Z),re(l(_.id))}}function D(_,k,Q){return async re=>{const Z={role:Q};await(0,i.i)().patch(`/api/orgs/${k}/users/${_}`,Z),re(l(_))}}function x(_,k){return async Q=>{await(0,i.i)().delete(`/api/orgs/${k}/users/${_}`),Q(l(_))}}function M(_){return async k=>{if(!r.Vt.hasPermission(o.AccessControlAction.UsersAuthTokenList))return;const Q=await(0,i.i)().get(`/api/admin/users/${_}/auth-tokens`);Q.reverse();const re=Q.map(Z=>({id:Z.id,isActive:Z.isActive,seenAt:(0,c.E8)(Z.seenAt),createdAt:Z.createdAt,clientIp:Z.clientIp,browser:Z.browser,browserVersion:Z.browserVersion,os:Z.os,osVersion:Z.osVersion,device:Z.device}));k((0,m.RC)(re))}}function b(_,k){return async Q=>{const re={authTokenId:_};await(0,i.i)().post(`/api/admin/users/${k}/revoke-auth-token`,re),Q(M(k))}}function R(_){return async k=>{await(0,i.i)().post(`/api/admin/users/${_}/logout`),k(M(_))}}function S(){return async _=>{const k=r.Vt.hasPermission(o.AccessControlAction.LDAPStatusRead);if((0,s.v)("ldapsync")&&k){const Q=await(0,i.i)().get("/api/admin/ldap-sync-status");_((0,m.CY)(Q))}}}function O(_){return async k=>{await(0,i.i)().post(`/api/admin/ldap/sync/${_}`),k(l(_))}}function U(){return async _=>{if(r.Vt.hasPermission(o.AccessControlAction.LDAPStatusRead))try{const k=await(0,i.i)().get("/api/admin/ldap/status");_((0,m.Ls)(k))}catch(k){if((0,i.kW)(k)){k.isHandled=!0;const Q={title:k.data.message,body:k.data.error};_((0,m.y3)(Q))}}}}function I(_){return async k=>{try{const Q=await(0,i.i)().get(`/api/admin/ldap/${encodeURIComponent(_)}`),{name:re,surname:Z,email:oe,login:G,isGrafanaAdmin:le,isDisabled:ge,roles:ne,teams:ue}=Q,te={info:{name:re,surname:Z,email:oe,login:G},permissions:{isGrafanaAdmin:le,isDisabled:ge},roles:ne,teams:ue};k((0,m.sJ)(te))}catch(Q){if((0,i.kW)(Q)){Q.isHandled=!0;const re={title:Q.data.message,body:Q.data.error};k((0,m.eq)()),k((0,m.VB)(re))}}}}function F(){return _=>{_((0,m.WO)())}}function w(){return _=>{_((0,m.WO)()),_((0,m.eq)())}}const K=_=>_.map(k=>Array.isArray(k.value)?k.value.map(Q=>`${k.name}=${Q.value}`).join("&"):`${k.name}=${k.value}`).join("&");function L(){return async(_,k)=>{try{const{perPage:Q,page:re,query:Z,filters:oe}=k().userListAdmin,G=await(0,i.i)().get(`/api/users/search?perpage=${Q}&page=${re}&query=${Z}&${K(oe)}`);_((0,m.xh)(G))}catch(Q){(0,m.k7)(),console.error(Q)}}}const V=(0,t.debounce)(_=>_(L()),500);function H(_){return async k=>{k((0,m.tZ)()),k((0,m.aj)(_)),V(k)}}function j(_){return async k=>{k((0,m.tZ)()),k((0,m.qz)(_)),V(k)}}function A(_){return async k=>{k((0,m.tZ)()),k((0,m.PJ)(_)),k(L())}}},66114:(Y,T,e)=>{"use strict";e.d(T,{CY:()=>r,Ls:()=>f,PJ:()=>R,RC:()=>v,UA:()=>E,VB:()=>d,WO:()=>s,ZP:()=>U,aj:()=>b,eq:()=>i,fm:()=>y,k7:()=>M,pm:()=>g,qz:()=>S,sJ:()=>o,sL:()=>h,tZ:()=>x,xh:()=>D,y3:()=>u});var t=e(62992);const n={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},c=(0,t.oM)({name:"ldap",initialState:n,reducers:{ldapConnectionInfoLoadedAction:(I,F)=>({...I,ldapError:void 0,connectionInfo:F.payload}),ldapFailedAction:(I,F)=>({...I,ldapError:F.payload}),ldapSyncStatusLoadedAction:(I,F)=>({...I,syncInfo:F.payload}),userMappingInfoLoadedAction:(I,F)=>({...I,user:F.payload,userError:void 0}),userMappingInfoFailedAction:(I,F)=>({...I,user:void 0,userError:F.payload}),clearUserMappingInfoAction:(I,F)=>({...I,user:void 0}),clearUserErrorAction:(I,F)=>({...I,userError:void 0})}}),{clearUserErrorAction:s,clearUserMappingInfoAction:i,ldapConnectionInfoLoadedAction:f,ldapFailedAction:u,ldapSyncStatusLoadedAction:r,userMappingInfoFailedAction:d,userMappingInfoLoadedAction:o}=c.actions,m=c.reducer,l={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},p=(0,t.oM)({name:"userAdmin",initialState:l,reducers:{userProfileLoadedAction:(I,F)=>({...I,user:F.payload}),userOrgsLoadedAction:(I,F)=>({...I,orgs:F.payload}),userSessionsLoadedAction:(I,F)=>({...I,sessions:F.payload}),userAdminPageLoadedAction:(I,F)=>({...I,isLoading:!F.payload}),userAdminPageFailedAction:(I,F)=>({...I,error:F.payload,isLoading:!1})}}),{userProfileLoadedAction:g,userOrgsLoadedAction:y,userSessionsLoadedAction:v,userAdminPageLoadedAction:E,userAdminPageFailedAction:h}=p.actions,C=p.reducer,a={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!1},P=(0,t.oM)({name:"userListAdmin",initialState:a,reducers:{usersFetched:(I,F)=>{const{totalCount:w,perPage:K,...L}=F.payload,V=Math.ceil(w/K);return{...I,...L,totalPages:V,perPage:K,showPaging:V>1,isLoading:!1}},usersFetchBegin:I=>({...I,isLoading:!0}),usersFetchEnd:I=>({...I,isLoading:!1}),queryChanged:(I,F)=>({...I,query:F.payload,page:0}),pageChanged:(I,F)=>({...I,page:F.payload}),filterChanged:(I,F)=>{const{name:w,value:K}=F.payload;return I.filters.some(L=>L.name===w)?{...I,page:0,filters:I.filters.map(L=>L.name===w?{...L,value:K}:L)}:{...I,page:0,filters:[...I.filters,F.payload]}}}}),{usersFetched:D,usersFetchBegin:x,usersFetchEnd:M,queryChanged:b,pageChanged:R,filterChanged:S}=P.actions,O=P.reducer,U={ldap:m,userAdmin:C,userListAdmin:O}},67162:(Y,T,e)=>{"use strict";e.d(T,{$:()=>u,Z:()=>h});var t=e(82897),n=e.n(t),c=e(57591);const s=new c.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),i=[{text:"Query",value:"query"}],f={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var u=(C=>(C.IsAbove="gt",C.IsBelow="lt",C.IsOutsideRange="outside_range",C.IsWithinRange="within_range",C.HasNoValue="no_value",C))(u||{});const r=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],d=[{text:"OR",value:"or"},{text:"AND",value:"and"}],o=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],m=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],l=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function p(C){const a=new c.zU({type:C.type,defaultParams:[]});return new c.XN(C,a)}function g(C){return C.toLowerCase().replace(/_/g,"").split(" ")[0]}function y(C){switch(g(C)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function v(C,a){return(0,t.reduce)(C,(P,D)=>(D.metric!==void 0&&D.value!==void 0&&P.push(D.metric+"="+D.value),D.Metric!==void 0&&D.Value!==void 0&&P.push(D.Metric+"="+D.Value),P),[]).join(a)}function E(C){return(0,t.isArray)(C.data)?v(C.data,", "):(0,t.isArray)(C.data.evalMatches)?v(C.data.evalMatches,", "):C.data.error?"Error: "+C.data.error:""}const h={alertQueryDef:s,getStateDisplayModel:y,conditionTypes:i,evalFunctions:r,evalOperators:d,noDataModes:m,executionErrorModes:l,reducerTypes:o,createReducerPart:p,getAlertAnnotationInfo:E,alertStateSortScore:f}},57591:(Y,T,e)=>{"use strict";e.d(T,{C7:()=>f,D:()=>i,XN:()=>s,zU:()=>c});var t=e(82897),n=e.n(t);class c{constructor(o){this.type=o.type,this.params=o.params,this.defaultParams=o.defaultParams,this.renderer=o.renderer,this.category=o.category,this.addStrategy=o.addStrategy}}class s{constructor(o,m){if(this.part=o,this.def=m,!this.def)throw{message:"Could not find query part "+o.type};o.params=o.params||(0,t.clone)(this.def.defaultParams),this.params=o.params,this.text="",this.updateText()}render(o){return this.def.renderer(this,o)}hasMultipleParamsInString(o,m){return o.indexOf(",")===-1?!1:this.def.params[m+1]&&this.def.params[m+1].optional}updateParam(o,m){if(this.hasMultipleParamsInString(o,m)){(0,t.each)(o.split(","),(l,p)=>{this.updateParam(l.trim(),p)});return}o===""&&this.def.params[m].optional?this.params.splice(m,1):this.params[m]=o,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let o=this.def.type+"(";o+=this.params.join(", "),o+=")",this.text=o}}function i(d,o){const m=d.def.type+"(",l=(0,t.map)(d.params,(p,g)=>{const y=d.def.params[g];return y.type==="time"&&p==="auto"&&(p="$__interval"),y.quote==="single"?"'"+p+"'":y.quote==="double"?'"'+p+'"':p});return o&&l.unshift(o),m+l.join(", ")+")"}function f(d,o){return o+" "+d.params[0]}function u(d,o){return d.params[0]}function r(d,o){return'"'+d.params[0]+'"'}},11626:(Y,T,e)=>{"use strict";e.d(T,{ZP:()=>D,Gr:()=>o,gz:()=>g,Oc:()=>y,K:()=>h,J0:()=>C,T2:()=>E,ql:()=>v});var t=e(62992),n=e(67483),c=e(83829),s=e(46818),i=e(72004);const u=(0,c.combineReducers)({dataSources:(0,s.jK)("dataSources",i.nw,({rulesSourceName:b})=>b).reducer,promRules:(0,s.jK)("promRules",i.y6,({rulesSourceName:b})=>b).reducer,rulerRules:(0,s.jK)("rulerRules",i.UR,({rulesSourceName:b})=>b).reducer,amConfigs:(0,s.jK)("amConfigs",i.Yh,b=>b).reducer,silences:(0,s.jK)("silences",i.je,b=>b).reducer,ruleForm:(0,c.combineReducers)({saveRule:(0,s.i6)("saveRule",i.wy).reducer,existingRule:(0,s.i6)("existingRule",i.on).reducer}),grafanaNotifiers:(0,s.i6)("grafanaNotifiers",i.Vj).reducer,saveAMConfig:(0,s.i6)("saveAMConfig",i.mM).reducer,deleteAMConfig:(0,s.i6)("deleteAMConfig",i.Nc).reducer,updateSilence:(0,s.i6)("updateSilence",i.QY).reducer,amAlerts:(0,s.jK)("amAlerts",i.dB,b=>b).reducer,folders:(0,s.jK)("folders",i.vL,b=>b).reducer,amAlertGroups:(0,s.jK)("amAlertGroups",i.mS,b=>b).reducer,testReceivers:(0,s.i6)("testReceivers",i.D8).reducer,updateLotexNamespaceAndGroup:(0,s.i6)("updateLotexNamespaceAndGroup",i.hv).reducer,externalAlertmanagers:(0,c.combineReducers)({alertmanagerConfig:(0,s.i6)("alertmanagerConfig",i.wE).reducer,discoveredAlertmanagers:(0,s.i6)("discoveredAlertmanagers",i.zy).reducer}),managedAlertStateHistory:(0,s.i6)("managedAlertStateHistory",i.Ms).reducer});var r=e(67162);const d={items:[],searchQuery:"",isLoading:!1},o={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function m(b,R){const S=r.Z.getStateDisplayModel(R),O={...b,stateText:S.text,stateIcon:S.iconClass,stateClass:S.stateClass,stateAge:(0,n.CQ)(b.newStateDate).fromNow(!0)};return O.state!=="paused"&&(O.executionError&&(O.info="Execution Error: "+O.executionError),O.evalData&&O.evalData.noData&&(O.info="Query returned no data")),O}const l=(0,t.oM)({name:"alertRules",initialState:d,reducers:{loadAlertRules:b=>({...b,isLoading:!0}),loadedAlertRules:(b,R)=>{const O=R.payload.map(U=>m(U,U.state));return{...b,items:O,isLoading:!1}},setSearchQuery:(b,R)=>({...b,searchQuery:R.payload})}}),p=(0,t.oM)({name:"notificationChannel",initialState:o,reducers:{setNotificationChannels:(b,R)=>({...b,notificationChannelTypes:M(R.payload),notifiers:R.payload}),notificationChannelLoaded:(b,R)=>{const S=R.payload,U=b.notifiers.find(I=>I.type===S.type).options.filter(I=>I.secure);return U.length>0&&U.some(I=>S.settings[I.propertyName]!=="")?x(b,R.payload,U):{...b,notificationChannel:S}},resetSecureField:(b,R)=>({...b,notificationChannel:{...b.notificationChannel,secureFields:{...b.notificationChannel.secureFields,[R.payload]:!1}}})}}),{loadAlertRules:g,loadedAlertRules:y,setSearchQuery:v}=l.actions,{setNotificationChannels:E,notificationChannelLoaded:h,resetSecureField:C}=p.actions,a=l.reducer,P=p.reducer,D={alertRules:a,notificationChannel:P,unifiedAlerting:u};function x(b,R,S){const O={},U={};return S.forEach(I=>{U[I.propertyName]=R.settings[I.propertyName],O[I.propertyName]=""}),{...b,notificationChannel:{...R,settings:{...R.settings,...O},secureSettings:{...U}}}}function M(b){return b.map(R=>({value:R.type,label:R.name,...R,typeName:R.type})).sort((R,S)=>R.name>S.name?1:-1)}},41904:(Y,T,e)=>{"use strict";e.d(T,{Hc:()=>p,I5:()=>l,PN:()=>d,Z0:()=>g,pM:()=>o,z7:()=>r});var t=e(67483),n=e(53843),c=e(56986),s=e(54899),i=e(35645),f=e(41818);const u=15,r={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully",unknownMessageFromError:"unknown messageFromError"};function d(y,v={}){i.v.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([y],{level:c.in.INFO,context:{...v,module:"Alerting"}})}function o(y,v,E){return async function(...h){const C=performance.now(),a=await y(...h);return d(v,{loadTimeMs:(performance.now()-C).toFixed(0),...E}),a}}async function m(){try{const{createdAt:y}=await(0,s.i)().get("/api/user"),v=(0,t.CQ)().subtract(u,"days"),E=(0,t.CQ)(y);return v.isBefore(E)}catch{return!0}}const l=async y=>{await m()||(0,f.ff)("grafana_alerting_rule_creation",y)},p=async y=>{await m()||(0,f.ff)("grafana_alerting_rule_aborted",y)},g=async y=>{await m()||(0,f.ff)("grafana_alerting_rule_form_error",y)}},29427:(Y,T,e)=>{"use strict";e.d(T,{C:()=>f});var t=e(90701),n=e(65583),c=e(54899),s=e(41904);const i=()=>async u=>{try{const r=performance.now(),{data:d,...o}=await(0,n.n)((0,c.i)().fetch(u));return(0,s.PN)("Request finished",{loadTimeMs:(performance.now()-r).toFixed(0),url:u.url,method:u.method??"",responseStatus:o.statusText}),{data:d,meta:o}}catch(r){return{error:r}}},f=(0,t.LC)({reducerPath:"alertingApi",baseQuery:i(),tagTypes:["AlertmanagerChoice"],endpoints:()=>({})})},30173:(Y,T,e)=>{"use strict";e.d(T,{h:()=>i});var t=e(20194),n=e(45849),c=e(29427);const s=10,i=c.C.injectEndpoints({endpoints:f=>({getAlertmanagerAlerts:f.query({query:({amSourceName:u,filter:r})=>{const d=r?.matchers?.filter(v=>v.name&&v.value).map(v=>`${v.name}${(0,t.zy)(v)}${v.value}`),{silenced:o,inhibited:m,unprocessed:l,active:p}=r||{},g=Object.fromEntries(Object.entries({silenced:o,active:p,inhibited:m,unprocessed:l}).filter(([v,E])=>E!==void 0)),y={filter:d};return g&&Object.keys(g).forEach(v=>{y[v]=g[v]}),{url:`/api/alertmanager/${(0,n.gt)(u)}/api/v2/alerts`,params:y}}}),getAlertmanagerChoiceStatus:f.query({query:()=>({url:"/api/v1/ngalert"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagerConfig:f.query({query:()=>({url:"/api/v1/ngalert/admin_config"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagers:f.query({query:()=>({url:"/api/v1/ngalert/alertmanagers"}),transformResponse:u=>u.data}),saveExternalAlertmanagersConfig:f.mutation({query:u=>({url:"/api/v1/ngalert/admin_config",method:"POST",data:u}),invalidatesTags:["AlertmanagerChoice"]}),getValidAlertManagersConfig:f.query({query:()=>({url:`/api/alertmanager/${(0,n.gt)(n.GC)}/config/history?limit=${s}`})}),resetAlertManagerConfigToOldVersion:f.mutation({query:u=>({url:`/api/alertmanager/${(0,n.gt)(n.GC)}/config/history/${u.id}/_activate`,method:"POST"})})})})},44737:(Y,T,e)=>{"use strict";e.d(T,{C$:()=>r,SJ:()=>m,WG:()=>d,Zy:()=>o});var t=e(65583),n=e(54899),c=e(46063),s=e(37190),i=e(45849),f=e(95454),u=e(49011);async function r(E){if(E===i.GC)return{features:{rulerApiEnabled:!0}};const h=(0,i.c$)(E);if(!h)throw new Error(`Cannot find data source configuration for ${E}`);const{url:C,name:a,type:P}=h;if(!C)throw new Error("The data source url cannot be empty.");if(P!=="prometheus"&&P!=="loki")throw new Error(`The build info request is not available for ${P}. Only 'prometheus' and 'loki' are supported`);return d({name:a,url:C,type:P})}async function d(E){const{url:h,name:C,type:a}=E,P=a==="loki"?void 0:await p(h);if(!(P!==void 0)){if(!await g(C))throw new Error(`Unable to fetch alert rules. Is the ${C} data source properly configured?`);const b=await y(C);return{application:c.T8.Cortex,features:{rulerApiEnabled:b}}}const{features:x}=P.data;return x?{application:c.T8.Mimir,features:{rulerApiEnabled:x?.ruler_config_api==="true"}}:{application:c.T8.Prometheus,features:{rulerApiEnabled:!1}}}async function o(E){if(E===i.GC)return{lazyConfigInit:!1};const h=l(E),{url:C,type:a}=h;if(!C)throw new Error("The data source url cannot be empty.");if(a!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${a}. Only 'alertmanager' type is supported`);return await m(C)}async function m(E){try{return{lazyConfigInit:(await p(E))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function l(E){const h=(0,i.c$)(E);if(!h)throw new Error(`Cannot find data source configuration for ${E}`);return h}async function p(E){return(await(0,t.n)((0,n.i)().fetch({url:`${E}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(C=>{if(!("status"in C&&C.status===404))throw C}))?.data}async function g(E){try{return await(0,f.j)(E),!0}catch{return!1}}async function y(E){try{return await(0,u.jw)(E),!0}catch(h){if(v(h))return!1;throw h}}function v(E){return(0,n.kW)(E)?E.data.message?.includes("GetRuleGroup unsupported in rule local store")||E.data.message?.includes("page not found")||E.data.message?.includes(s.jZ):E instanceof Error&&E.message?.includes("404 from rules config endpoint")}},79572:(Y,T,e)=>{"use strict";e.d(T,{T:()=>c});var t=e(29427),n=e(44737);const c=t.C.injectEndpoints({endpoints:s=>({discoverAmFeatures:s.query({queryFn:async({amSourceName:i})=>{try{return{data:await(0,n.Zy)(i)}}catch(f){return{error:f}}}})})})},644:(Y,T,e)=>{"use strict";e.d(T,{QE:()=>r,i9:()=>s});var t=e(65583),n=e(54899),c=e(45849);function s(){return(0,n.i)().get("/api/alert-notifiers")}const i=d=>{const o=d.match(/^(\w+)(\[\d+\])?$/);return o?{type:o[1],index:o[2]}:{type:d,index:void 0}},f=d=>{const o={receivers:{},errorCount:0};d.forEach(l=>{o.receivers[l.name]={active:l.active,notifiers:{},errorCount:0};const p=o.receivers[l.name];l.integrations.forEach(g=>{Boolean(g?.lastNotifyAttemptError)&&(p.errorCount+=1);const v=u(g.name);v&&(p.notifiers[v]||(p.notifiers[v]=[]),p.notifiers[v].push(g))})});const m=Object.values(o.receivers).reduce((l,p)=>l+p.errorCount,0);return{...o,errorCount:m}},u=d=>i(d)?.type;async function r(d){try{const o=await(0,t.n)((0,n.i)().fetch({url:`/api/alertmanager/${(0,c.gt)(d)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return f(o.data)}catch{return f([])}}},95454:(Y,T,e)=>{"use strict";e.d(T,{Tb:()=>u,hd:()=>f,j:()=>d,lL:()=>r});var t=e(65583),n=e(54899),c=e(45849),s=e(79662);function i(o){const{dataSourceName:m,limitAlerts:l,identifier:p}=o;return{rules:(g,y,v)=>{const E=new URLSearchParams;m===c.GC&&l&&E.set("limit_alerts",String(l)),p&&((0,s.qE)(p)||(0,s.E4)(p))&&(E.set("file",p.namespace),E.set("rule_group",p.groupName));const h=f(E,g);return{url:`/api/prometheus/${(0,c.gt)(m)}/api/v1/rules`,params:u(h,y,v)}}}}function f(o,m){return m?.dashboardUID&&(o.set("dashboard_uid",m.dashboardUID),m?.panelId&&o.set("panel_id",String(m.panelId))),Object.fromEntries(o)}function u(o,m,l){let p={...o};if(m?.length&&(p={...p,state:m}),l?.length){const g=l.map(y=>JSON.stringify(y));p={...p,matcher:g}}return p}const r=(o,m)=>{const l={};return o.forEach(p=>{p.rules.forEach(g=>{g.query=g.query||""}),l[p.file]?l[p.file].groups.push(p):l[p.file]={dataSourceName:m,name:p.file,groups:[p]}}),Object.values(l)};async function d(o,m,l,p,g,y){if(m?.dashboardUID&&o!==c.GC)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:v,params:E}=i({dataSourceName:o,limitAlerts:l,identifier:y}).rules(m,g,p),h=await(0,t.n)((0,n.i)().fetch({url:v,params:E,showErrorAlert:!1,showSuccessAlert:!1})).catch(C=>{throw"status"in C&&C.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):C});return r(h.data.data.groups,o)}},49011:(Y,T,e)=>{"use strict";e.d(T,{BC:()=>l,P4:()=>u,jJ:()=>m,jw:()=>o,m6:()=>r,sz:()=>E});var t=e(65583),n=e(54899),c=e(37190),s=e(45849),i=e(95454);function f(h){const a=`${`/api/ruler/${(0,s.gt)(h.dataSourceName)}`}/api/v1/rules`,P=new URLSearchParams;return P.set("subtype",h.apiVersion==="legacy"?"cortex":"mimir"),{rules:D=>{const x=(0,i.hd)(P,D);return{path:`${a}`,params:x}},namespace:D=>({path:`${a}/${encodeURIComponent(D)}`,params:Object.fromEntries(P)}),namespaceGroup:(D,x)=>({path:`${a}/${encodeURIComponent(D)}/${encodeURIComponent(x)}`,params:Object.fromEntries(P)})}}async function u(h,C,a){const{path:P,params:D}=f(h).namespace(C);await(0,t.n)((0,n.i)().fetch({method:"POST",url:P,data:a,showErrorAlert:!1,showSuccessAlert:!1,params:D}))}async function r(h,C){if(C?.dashboardUID&&h.dataSourceName!==s.GC)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:a,params:P}=f(h).rules(C);return p(a,{},P)}async function d(h,C){const{path:a,params:P}=f(h).namespace(C);return(await p(a,{},P))[C]||[]}async function o(h){return p(`/api/ruler/${(0,s.gt)(h)}/api/v1/rules/test/test`,null)}async function m(h,C,a){const{path:P,params:D}=f(h).namespaceGroup(C,a);return p(P,null,D)}async function l(h,C,a){const{path:P,params:D}=f(h).namespaceGroup(C,a);await(0,t.n)((0,n.i)().fetch({url:P,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:D}))}async function p(h,C,a){try{return(await(0,t.n)((0,n.i)().fetch({url:h,showErrorAlert:!1,showSuccessAlert:!1,params:a}))).data}catch(P){if(!g(P))throw P;if(v(P))return C;throw y(P)?{...P,data:{...P.data,message:c.jZ}}:P}}function g(h){const C=h.data!=null;return Number.isFinite(h.status)&&C}function y(h){return h.status===404||h.status===500&&h.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function v(h){return h.status===404&&(h.data.message?.includes("group does not exist")||h.data.message?.includes("no rule groups found"))}async function E(h,C){const{path:a,params:P}=f(h).namespace(C);await(0,t.n)((0,n.i)().fetch({method:"DELETE",url:a,showErrorAlert:!1,showSuccessAlert:!1,params:P}))}},24782:(Y,T,e)=>{"use strict";e.d(T,{i:()=>i});var t=e(9892),n=e(66111),c=e(72648),s=e(8180);const i=({labelKey:u,value:r,operator:d="=",onRemoveLabel:o})=>{const m=(0,c.wW)(f);return n.createElement("div",{className:m.wrapper},u,d,r,!!o&&n.createElement(s.h,{name:"times",size:"xs",onClick:o}))},f=u=>({wrapper:t.css`
    padding: ${u.spacing(.5,1)};
    border-radius: ${u.shape.borderRadius(1)};
    border: solid 1px ${u.colors.border.medium};
    font-size: ${u.typography.bodySmall.fontSize};
    background-color: ${u.colors.background.secondary};
    font-weight: ${u.typography.fontWeightBold};
    color: ${u.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},52694:(Y,T,e)=>{"use strict";e.d(T,{s:()=>c});var t=e(66111),n=e(34807);const c=({labels:s,className:i})=>{const f=Object.entries(s).filter(([u])=>!(u.startsWith("__")&&u.endsWith("__")));return t.createElement("div",{className:i},t.createElement(n.P,{tags:Object.values(f).map(([u,r])=>`${u}=${r}`),className:i}))}},94984:(Y,T,e)=>{"use strict";e.d(T,{P:()=>r});var t=e(9892),n=e(66111),c=e(72648),s=e(24799),i=e(8581),f=e(45849);function u(o){return o.name===f.GC?"Grafana":o.name.slice(0,37)}const r=({onChange:o,current:m,dataSources:l,disabled:p=!1})=>{const g=(0,c.wW)(d),y=(0,n.useMemo)(()=>l.map(v=>({label:u(v),value:v.name,imgUrl:v.imgUrl,meta:v.meta})),[l]);return n.createElement(s.g,{className:g.field,label:p?"Alertmanager":"Choose Alertmanager",disabled:p||y.length===1,"data-testid":"alertmanager-picker"},n.createElement(i.Ph,{"aria-label":p?"Alertmanager":"Choose Alertmanager",width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:v=>v.value&&o(v.value),options:y,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:m,getOptionLabel:v=>v.label}))},d=o=>({field:t.css`
    margin-bottom: ${o.spacing(4)};
  `})},78543:(Y,T,e)=>{"use strict";e.d(T,{a:()=>m});var t=e(9892),n=e(66111),c=e(63418),s=e(61860),i=e(72648),f=e(37190),u=e(80498),r=e(46587),d=e(94884);const o=["message","description"],m=({annotationKey:g,value:y,valueLink:v})=>{const E=f.vY[g]?n.createElement(s.u,{content:g,placement:"top",theme:"info"},n.createElement("span",null,f.vY[g])):g;return n.createElement(u.C,{label:E,horizontal:!0},n.createElement(l,{annotationKey:g,value:y,valueLink:v}))},l=({annotationKey:g,value:y,valueLink:v})=>{const E=(0,i.wW)(p),h=o.includes(g),C=y&&y.startsWith("http"),a=n.createElement(r.Z,{input:y,delimiter:["{{","}}"]});return v?n.createElement("a",{href:c.QX.sanitizeUrl(v),className:E.link},y):h?n.createElement(d.t,{className:E.well},a):C?n.createElement("a",{href:c.QX.sanitizeUrl(y),target:"__blank",className:E.link},y):n.createElement(n.Fragment,null,a)},p=g=>({well:t.css`
    word-break: break-word;
  `,link:t.css`
    word-break: break-all;
    color: ${g.colors.primary.text};
  `})},33950:(Y,T,e)=>{"use strict";e.d(T,{U:()=>i});var t=e(9892),n=e(66111),c=e(72648),s=e(31403);const i=({isCollapsed:u,onToggle:r,idControlled:d,className:o,text:m,size:l="xl",...p})=>{const g=(0,c.wW)(f);return n.createElement(s.zx,{type:"button",fill:"text",variant:"secondary","aria-expanded":!u,"aria-controls":d,className:(0,t.cx)(g.expandButton,o),icon:u?"angle-right":"angle-down",onClick:()=>r(!u),...p},m)},f=u=>({expandButton:t.css`
    margin-right: ${u.spacing(1)};
  `})},80498:(Y,T,e)=>{"use strict";e.d(T,{C:()=>s});var t=e(9892),n=e(66111),c=e(72648);const s=({className:f,label:u,horizontal:r,children:d,childrenWrapperClassName:o})=>{const m=(0,c.wW)(i);return n.createElement("div",{className:(0,t.cx)(m.field,r?m.fieldHorizontal:m.fieldVertical,f)},n.createElement("div",null,u),n.createElement("div",{className:o},d))},i=f=>({fieldHorizontal:t.css`
    flex-direction: row;
    ${f.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:t.css`
    flex-direction: column;
  `,field:t.css`
    display: flex;
    margin: ${f.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${f.spacing(1)};
      font-size: ${f.typography.size.sm};
      font-weight: ${f.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${f.colors.text.secondary};
    }
  `})},53731:(Y,T,e)=>{"use strict";e.d(T,{t:()=>r});var t=e(9892),n=e(66111),c=e(72648),s=e(8180),i=e(78889),f=e(25724),u=e(1562);const r=({cols:o,items:m,isExpandable:l=!1,onCollapse:p,onExpand:g,isExpanded:y,renderExpandedContent:v,testIdGenerator:E,pagination:h,paginationStyles:C,renderPrefixCell:a,renderPrefixHeader:P,footerRow:D,dataTestId:x})=>{const M=(0,c.wW)(u.Z);if((p||g||y)&&!(p&&g&&y))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((l||v)&&!(l&&v))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const b=(0,c.wW)(d(o,l,!!P)),[R,S]=(0,n.useState)([]),O=L=>{y&&p&&g?y(L)?p(L):g(L):S(R.includes(L.id)?R.filter(V=>V!==L.id):[...R,L.id])},U=h?.itemsPerPage??m.length,{page:I,numberOfPages:F,onPageChange:w,pageItems:K}=(0,f.h)(m,1,U);return n.createElement(n.Fragment,null,n.createElement("div",{className:b.container,"data-testid":x??"dynamic-table"},n.createElement("div",{className:b.row,"data-testid":"header"},P&&P(),l&&n.createElement("div",{className:b.cell}),o.map(L=>n.createElement("div",{className:b.cell,key:L.id},L.label))),K.map((L,V)=>{const H=y?y(L):R.includes(L.id);return n.createElement("div",{className:b.row,key:`${L.id}-${V}`,"data-testid":E?.(L,V)??"row"},a&&a(L,V,m),l&&n.createElement("div",{className:(0,t.cx)(b.cell,b.expandCell)},n.createElement(s.h,{"aria-label":`${H?"Collapse":"Expand"} row`,size:"lg","data-testid":"collapse-toggle",className:b.expandButton,name:H?"angle-down":"angle-right",onClick:()=>O(L),type:"button"})),o.map(j=>n.createElement("div",{className:(0,t.cx)(b.cell,b.bodyCell,j.className),"data-column":j.label,key:`${L.id}-${j.id}`},j.renderCell(L,V))),H&&v&&n.createElement("div",{className:b.expandedContentRow,"data-testid":"expanded-content"},v(L,V,m)))}),D&&n.createElement("div",{className:(0,t.cx)(b.row,b.footerRow)},D)),h&&n.createElement(i.t,{className:(0,t.cx)(M,C),currentPage:I,numberOfPages:F,onNavigate:w,hideWhenSinglePage:!0}))},d=(o,m,l)=>{const p=o.map(g=>g.size?typeof g.size=="number"?`${g.size}fr`:g.size:"auto");return m&&p.unshift("calc(1em + 16px)"),l&&p.unshift("0"),g=>({container:t.css`
      border: 1px solid ${g.colors.border.weak};
      border-radius: ${g.shape.borderRadius()};
      color: ${g.colors.text.secondary};
    `,row:t.css`
      display: grid;
      grid-template-columns: ${p.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${g.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${g.colors.background.primary};
      }

      ${g.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${g.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${l?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:t.css`
      display: flex;
      padding: ${g.spacing(1)};
    `,cell:t.css`
      display: flex;
      align-items: center;
      padding: ${g.spacing(1)};

      ${g.breakpoints.down("sm")} {
        padding: ${g.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:t.css`
      overflow: hidden;

      ${g.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${g.colors.text.primary};
        }
      }
    `,expandCell:t.css`
      justify-content: center;

      ${g.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:t.css`
      grid-column-end: ${p.length+1};
      grid-column-start: ${l?3:2};
      grid-row: 2;
      padding: 0 ${g.spacing(3)} 0 ${g.spacing(1)};
      position: relative;

      ${g.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${g.colors.border.strong};
        grid-row: auto;
        padding: ${g.spacing(1)} 0 0 0;
      }
    `,expandButton:t.css`
      margin-right: 0;
      display: block;
    `})}},42042:(Y,T,e)=>{"use strict";e.d(T,{z:()=>d});var t=e(9892),n=e(9085),c=e.n(n),s=e(66111),i=e(26418),f=e(72648),u=e(39604),r=e(56921);const d=({children:m,header:l,content:p,footer:g,arrow:y,showAfter:v=300,wrapperClassName:E,disabled:h=!1,...C})=>{const a=(0,s.useRef)(null),P=(0,f.wW)(o);if(h)return m;const D=s.createElement(i.Stack,{direction:"column",gap:0},l&&s.createElement("div",{className:P.card.header},l),s.createElement("div",{className:P.card.body},p),g&&s.createElement("div",{className:P.card.footer},g));return s.createElement(u.D,{content:D,hideAfter:100},(x,M,b)=>s.createElement(s.Fragment,null,a.current&&s.createElement(r.J,{...b,...C,wrapperClassName:c()(P.popover(y?1.25:0),E),onMouseLeave:M,onMouseEnter:x,referenceElement:a.current,renderArrow:y?({arrowProps:R,placement:S})=>s.createElement("div",{className:P.arrow(S),...R}):()=>s.createElement(s.Fragment,null)}),s.cloneElement(m,{ref:a,onMouseEnter:x,onMouseLeave:M})))},o=m=>({popover:l=>t.css`
    border-radius: ${m.shape.borderRadius()};
    box-shadow: ${m.shadows.z3};
    background: ${m.colors.background.primary};
    border: 1px solid ${m.colors.border.medium};

    margin-bottom: ${m.spacing(l)};
  `,card:{body:t.css`
      padding: ${m.spacing(1)};
    `,header:t.css`
      padding: ${m.spacing(1)};
      background: ${m.colors.background.secondary};
      border-bottom: solid 1px ${m.colors.border.medium};
    `,footer:t.css`
      padding: ${m.spacing(.5)} ${m.spacing(1)};
      background: ${m.colors.background.secondary};
      border-top: solid 1px ${m.colors.border.medium};
    `},arrow:l=>{const p="9px";return t.css`
      width: 0;
      height: 0;

      border-left: ${p} solid transparent;
      border-right: ${p} solid transparent;
      /* using hex colors here because the border colors use alpha transparency */
      border-top: ${p} solid ${m.isLight?"#d2d3d4":"#2d3037"};

      &:after {
        content: '';
        position: absolute;

        border: ${p} solid ${m.colors.background.primary};
        border-bottom: 0;
        border-left-color: transparent;
        border-right-color: transparent;

        margin-top: 1px;
        bottom: 1px;
        left: -${p};
      }
    `}})},63613:(Y,T,e)=>{"use strict";e.d(T,{s:()=>s});var t=e(66111),n=e(61860),c=e(39904);function s({text:i}){return t.createElement(n.u,{placement:"top",content:t.createElement("div",null,i)},t.createElement(c.J,{name:"info-circle",size:"xs"}))}},63029:(Y,T,e)=>{"use strict";e.d(T,{L:()=>c});var t=e(9892),n=e(66111);const c=()=>n.createElement("span",{className:t.css`
      flex: 1;
    `})},79453:(Y,T,e)=>{"use strict";e.d(T,{i:()=>s});var t=e(9892),n=e(66111),c=e(72648);const s=({children:f,state:u,size:r="md",muted:d=!1})=>{const o=(0,c.wW)(i);return n.createElement("span",{className:(0,t.cx)(o.common,o[u],o[r],{[o.muted]:d})},f||u)},i=f=>({common:t.css`
    display: inline-block;
    color: white;
    border-radius: ${f.shape.borderRadius()};
    font-size: ${f.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${f.typography.fontWeightBold};
  `,good:t.css`
    background-color: ${f.colors.success.main};
    border: solid 1px ${f.colors.success.main};
    color: ${f.colors.success.contrastText};
  `,warning:t.css`
    background-color: ${f.colors.warning.main};
    border: solid 1px ${f.colors.warning.main};
    color: ${f.colors.warning.contrastText};
  `,bad:t.css`
    background-color: ${f.colors.error.main};
    border: solid 1px ${f.colors.error.main};
    color: ${f.colors.error.contrastText};
  `,neutral:t.css`
    background-color: ${f.colors.secondary.main};
    border: solid 1px ${f.colors.secondary.main};
    color: ${f.colors.secondary.contrastText};
  `,info:t.css`
    background-color: ${f.colors.primary.main};
    border: solid 1px ${f.colors.primary.main};
    color: ${f.colors.primary.contrastText};
  `,md:t.css`
    padding: ${f.spacing(.5,1)};
    min-width: ${f.spacing(8)};
  `,sm:t.css`
    padding: ${f.spacing(.3,.5)};
    min-width: 52px;
  `,muted:t.css`
    opacity: 0.5;
  `})},46587:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>r});var t=e(9892),n=e(66111),c=e(72648),s=e(19985),i=e(42042),f=e(68402);const u=["$",".",'"'];function r({input:v,delimiter:E=["{{","}}"]}){const h=(0,c.wW)(y),[C,a]=E,P=new RegExp(`(?<before>.*?)(${C}(?<token>.*?)${a}|$)`,"gm"),D=v.split(`
`),x=[];return D.forEach((M,b)=>{Array.from(M.matchAll(P)).forEach((S,O)=>{const U=S.groups?.before,I=S.groups?.token?.trim();if(U&&x.push(n.createElement("span",{key:`${b}-${O}-before`},U)),I){const F=g(I),w=F===d.Variable?I:"",K=`${C} ${I} ${a}`;x.push(n.createElement(o,{key:`${b}-${O}-token`,content:K,type:F,description:w}))}}),x.push(n.createElement("br",{key:`${b}-newline`}))}),n.createElement("span",{className:h.wrapper},x)}var d=(v=>(v.Variable="variable",v.Function="function",v.Keyword="keyword",v.Unknown="unknown",v))(d||{});function o({content:v,description:E,type:h}){const C=(0,c.wW)(y),a=Boolean(h)===!1;return n.createElement(i.z,{placement:"top-start",disabled:a,content:n.createElement("div",{className:C.hoverTokenItem},n.createElement(s.C,{text:n.createElement(n.Fragment,null,h),color:"blue"})," ",E&&n.createElement("code",null,E))},n.createElement("span",null,n.createElement(s.C,{className:C.token,text:v,color:"blue"})))}function m(v){return u.some(E=>v.startsWith(E))}function l(v){return f.keywords.some(E=>v.startsWith(E))}function p(v){return f.builtinFunctions.some(E=>v.startsWith(E))}function g(v){let E;return m(v)?E="variable":l(v)?E="keyword":p(v)?E="function":E="unknown",E}const y=v=>({wrapper:t.css`
    white-space: pre-wrap;
  `,token:t.css`
    cursor: default;
    font-family: ${v.typography.fontFamilyMonospace};
  `,popover:t.css`
    border-radius: ${v.shape.borderRadius()};
    box-shadow: ${v.shadows.z3};
    background: ${v.colors.background.primary};
    border: 1px solid ${v.colors.border.medium};

    padding: ${v.spacing(1)};
  `,hoverTokenItem:t.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${v.spacing(1)};
  `})},94884:(Y,T,e)=>{"use strict";e.d(T,{t:()=>s});var t=e(9892),n=e(66111),c=e(72648);const s=({children:f,className:u})=>{const r=(0,c.wW)(i);return n.createElement("div",{className:(0,t.cx)(r.wrapper,u)},f)},i=f=>({wrapper:t.css`
    background-color: ${f.components.panel.background};
    border: solid 1px ${f.components.input.borderColor};
    border-radius: ${f.shape.borderRadius(1)};
    padding: ${f.spacing(.5,1)};
    font-family: ${f.typography.fontFamilyMonospace};
  `})},96308:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>f});var t=e(64681),n=e.n(t),c=e(66111),s=e(72648),i=e(53715);const f=({group:u})=>{const r=(0,s.wW)(i.r),d=u.alerts.length,o=u.alerts.reduce((m,l)=>(m[l.status.state]?m[l.status.state]+=1:m[l.status.state]=1,m),{});return c.createElement("div",null,`${d} ${n()("alert",d)}: `,Object.entries(o).map(([m,l],p)=>c.createElement("span",{key:`${JSON.stringify(u.labels)}-notifications-${p}`,className:r[m]},p>0&&", ",`${l} ${m}`)))}},30151:(Y,T,e)=>{"use strict";e.d(T,{F:()=>p});var t=e(9892),n=e(82897),c=e.n(n),s=e(66111),i=e(26418),f=e(54408),u=e(72648),r=e(39904),d=e(64353),o=e(61860),m=e(46967),l=e(41904);const p=({className:y,onFilterChange:v,defaultQueryString:E})=>{const h=(0,u.wW)(g),C=(0,s.useMemo)(()=>(0,n.debounce)(P=>{(0,f.PN)(l.z7.filterByLabel);const D=P.target;v(D.value)},600),[v]);(0,s.useEffect)(()=>C.cancel(),[C]);const a=s.createElement(r.J,{name:"search"});return s.createElement("div",{className:y},s.createElement(d._,null,s.createElement(i.Stack,{gap:.5},s.createElement("span",null,"Search by label"),s.createElement(o.u,{content:s.createElement("div",null,"Filter alerts using label querying, ex:",s.createElement("pre",null,'{severity="critical", instance=~"cluster-us-.+"}'))},s.createElement(r.J,{className:h.icon,name:"info-circle",size:"sm"})))),s.createElement(m.I,{placeholder:"Search",defaultValue:E,onChange:C,"data-testid":"search-query-input",prefix:a,className:h.inputWidth}))},g=y=>({icon:t.css`
    margin-right: ${y.spacing(.5)};
  `,inputWidth:t.css`
    width: 340px;
    flex-grow: 0;
  `})},50362:(Y,T,e)=>{"use strict";e.d(T,{_:()=>f});var t=e(9892),n=e(66111),c=e(72648),s=e(19985),i=e(31403);const f=({enabled:r=!1,error:d,warning:o,onSetCondition:m})=>{const l=(0,c.wW)(u);return r&&d?n.createElement(s.C,{color:"red",icon:"exclamation-circle",text:"Alert condition",tooltip:d.message}):r&&o?n.createElement(s.C,{color:"orange",icon:"exclamation-triangle",text:"Alert condition",tooltip:o.message}):r&&!d&&!o?n.createElement(s.C,{color:"green",icon:"check",text:"Alert condition"}):r?null:n.createElement("button",{type:"button",className:l.actionLink,onClick:()=>m&&m()},"Make this the alert condition")},u=r=>{const d=(0,i.gN)(r);return{actionLink:t.css`
      ${d};
      color: ${r.colors.text.link};
      cursor: pointer;

      &:hover {
        text-decoration: underline;
      }
    `}}},97201:(Y,T,e)=>{"use strict";e.d(T,{A2:()=>w,bw:()=>L});var t=e(9892),n=e(82897),c=e(66111),s=e(52666),i=e(19447),f=e(77258),u=e(26418),r=e(72648),d=e(31403),o=e(68668),m=e(39904),l=e(8581),p=e(8180),g=e(5076),y=e(71263),v=e(75897),E=e(436),h=e(17349),C=e(97573),a=e(46063),P=e(25724),D=e(42042),x=e(63029),M=e(45608),b=e(50362),R=e(56190);const S=k=>{const Q=k.fields[0];return Q?.config?.displayNameFromDS??k.name??Q?.labels?.__name__},O=k=>{const Q=k.fields[0]?.values[0];return Number.isFinite(Q)?(0,R.O)(Q,5):Q},U=k=>k.fields[0]?.labels??{},I=k=>Object.entries(k).map(([Q,re])=>Q+"="+re).join(", "),F=k=>k.every(re=>re.fields.every(Z=>Z.values.every(oe=>oe==null))),w=({queries:k=[],query:Q,data:re,error:Z,warning:oe,isAlertCondition:G,onSetCondition:le,onUpdateRefId:ge,onRemoveExpression:ne,onUpdateExpressionType:ue,onChangeQuery:te})=>{const me=(0,r.wW)(_),q=Q?.type,se=re&&Object.values(re).some(Ie=>Boolean(Ie)&&Ie.state===s.Gu.Loading),ae=Array.isArray(re?.series)&&!se,pe=re?.series??[],de=G??!1,Me=G&&ae,Ke={[a.x_.Firing]:pe.filter(Ie=>O(Ie)>=1),[a.x_.Inactive]:pe.filter(Ie=>O(Ie)<1)},st=(0,c.useCallback)(Ie=>{const Ve=k.filter(_e=>Ie.refId!==_e.refId).map(_e=>({value:_e.refId,label:_e.refId}));switch(Ie.type){case C.Us.math:return c.createElement(y.Z,{onChange:te,query:Ie,labelWidth:"auto",onRunQuery:()=>{}});case C.Us.reduce:return c.createElement(v.v,{onChange:te,refIds:Ve,labelWidth:"auto",query:Ie});case C.Us.resample:return c.createElement(E.p,{onChange:te,query:Ie,labelWidth:"auto",refIds:Ve});case C.Us.classic:return c.createElement(g.I,{onChange:te,query:Ie,refIds:Ve});case C.Us.threshold:return c.createElement(h.M,{onChange:te,query:Ie,labelWidth:"auto",refIds:Ve});default:return c.createElement(c.Fragment,null,"Expression not supported: ",Ie.type)}},[te,k]);return c.createElement("div",{className:(0,t.cx)(me.expression.wrapper,de&&me.expression.alertCondition)},c.createElement("div",{className:me.expression.stack},c.createElement(H,{refId:Q.refId,queryType:q,onRemoveExpression:()=>ne(Q.refId),onUpdateRefId:Ie=>ge(Q.refId,Ie),onUpdateExpressionType:Ie=>ue(Q.refId,Ie)}),c.createElement("div",{className:me.expression.body},st(Q)),ae&&c.createElement(L,{series:pe,isAlertCondition:G}),c.createElement("div",{className:me.footer},c.createElement(u.Stack,{direction:"row",alignItems:"center"},c.createElement(b._,{onSetCondition:()=>le(Q.refId),enabled:de,error:Z,warning:oe}),c.createElement(x.L,null),Me&&c.createElement(V,{firing:Ke[a.x_.Firing].length,normal:Ke[a.x_.Inactive].length})))))},K=20,L=({series:k,isAlertCondition:Q})=>{const{pageItems:re,previousPage:Z,nextPage:oe,numberOfPages:G,pageStart:le,pageEnd:ge}=(0,P.h)(k,1,K),ne=(0,r.wW)(_),ue=F(k),te=!ue&&(0,i.xI)(k),me=G>1;return c.createElement("div",{className:ne.expression.results},!ue&&te&&c.createElement("div",null,re.map((q,se)=>c.createElement(A,{key:(0,n.uniqueId)(),frame:q,index:le+se,isAlertCondition:Q}))),!ue&&!te&&re.map((q,se)=>c.createElement(j,{key:(0,n.uniqueId)(),frame:q,index:le+se,isAlertCondition:Q})),ue&&c.createElement("div",{className:(0,t.cx)(ne.expression.noData,ne.mutedText)},"No data"),me&&c.createElement("div",{className:ne.pagination.wrapper,"data-testid":"paginate-expression"},c.createElement(u.Stack,null,c.createElement(d.zx,{variant:"secondary",fill:"outline",onClick:Z,icon:"angle-left",size:"sm","aria-label":"previous-page"}),c.createElement(x.L,null),c.createElement("span",{className:ne.mutedText},le," - ",ge," of ",k.length),c.createElement(x.L,null),c.createElement(d.zx,{variant:"secondary",fill:"outline",onClick:oe,icon:"angle-right",size:"sm","aria-label":"next-page"}))))},V=({firing:k,normal:Q})=>{const{mutedText:re}=(0,r.wW)(_);return c.createElement("span",{className:re},`${k} firing, ${Q} normal`)},H=({refId:k,queryType:Q,onUpdateRefId:re,onUpdateExpressionType:Z,onRemoveExpression:oe})=>{const G=(0,r.wW)(_),le=(0,r.wW)(d.gN),[ge,ne]=(0,c.useState)(!1),ue=ge!==!1,te=ue&&ge==="refId",me=ue&&ge==="expressionType",q=C._M.find(se=>se.value===Q);return c.createElement("header",{className:G.header.wrapper},c.createElement(u.Stack,{direction:"row",gap:.5,alignItems:"center"},c.createElement(u.Stack,{direction:"row",gap:1,alignItems:"center",wrap:!1},!te&&c.createElement("button",{type:"button",className:(0,t.cx)(le,G.editable),onClick:()=>ne("refId")},c.createElement("div",{className:G.expression.refId},k)),te&&c.createElement(o.H,{autoFocus:!0,defaultValue:k,minWidth:5,onChange:se=>{re(se.currentTarget.value),ne(!1)},onFocus:se=>se.target.select(),onBlur:se=>{re(se.currentTarget.value),ne(!1)}}),!me&&c.createElement("button",{type:"button",className:(0,t.cx)(le,G.editable),onClick:()=>ne("expressionType")},c.createElement("div",{className:G.mutedText},(0,n.capitalize)(Q)),c.createElement(m.J,{size:"xs",name:"pen",className:G.mutedIcon,onClick:()=>ne("expressionType")})),me&&c.createElement(l.Ph,{isOpen:!0,autoFocus:!0,onChange:se=>{Z(se.value??C.Us.classic),ne(!1)},onBlur:()=>{ne(!1)},options:C._M,value:q,width:25})),c.createElement(x.L,null),c.createElement(p.h,{type:"button",name:"trash-alt",variant:"secondary",className:G.mutedIcon,onClick:oe})))},j=({frame:k,index:Q,isAlertCondition:re})=>{const Z=(0,r.wW)(_),oe=S(k)||"Series "+Q,G=O(k),le=U(k),ge=Object.entries(le),ne=ge.length>0,ue=re&&G!==0,te=re&&G===0,me=`${ne?"":oe}${ne?`{${I(le)}}`:""}`;return c.createElement("div",{className:Z.expression.resultsRow},c.createElement(u.Stack,{direction:"row",gap:1,alignItems:"center"},c.createElement("div",{className:Z.expression.resultLabel,title:me},c.createElement("span",null,ne?"":oe),ne&&c.createElement(c.Fragment,null,c.createElement("span",null,"{"),ge.map(([q,se],ae)=>c.createElement("span",{key:(0,n.uniqueId)()},c.createElement("span",{className:Z.expression.labelKey},q),c.createElement("span",null,"="),c.createElement("span",null,'"'),c.createElement("span",{className:Z.expression.labelValue},se),c.createElement("span",null,'"'),ae<ge.length-1&&c.createElement("span",null,", "))),c.createElement("span",null,"}"))),c.createElement("div",{className:Z.expression.resultValue},G),ue&&c.createElement(M.l,{state:a.x_.Firing,size:"sm"}),te&&c.createElement(M.l,{state:a.x_.Inactive,size:"sm"})))},A=({frame:k,index:Q})=>{const re=(0,r.wW)(_),Z=k.fields[1],oe=Z.labels,le=Z.config?.displayNameFromDS??(oe?I(Z.labels??{}):"Series "+Q),ge=k.fields[0].values,ne=te=>k.fields[0].values[te],ue=te=>k.fields[1].values[te];return c.createElement("div",{className:re.expression.resultsRow},c.createElement(u.Stack,{direction:"row",gap:1,alignItems:"center"},c.createElement("span",{className:(0,t.cx)(re.mutedText,re.expression.resultLabel),title:le},le),c.createElement("div",{className:re.expression.resultValue},c.createElement(D.z,{placement:"right",wrapperClassName:re.timeseriesTableWrapper,content:c.createElement("table",{className:re.timeseriesTable},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",null,"Timestamp"),c.createElement("th",null,"Value"))),c.createElement("tbody",null,ge.map((te,me)=>c.createElement("tr",{key:me},c.createElement("td",{className:re.mutedText},(0,f.dq)(ne(me))),c.createElement("td",{className:re.expression.resultValue},ue(me))))))},c.createElement("span",null,"Time series data")))))},_=k=>({expression:{wrapper:t.css`
      display: flex;
      border: solid 1px ${k.colors.border.medium};

      border-radius: ${k.shape.borderRadius()};
      max-width: 640px;
    `,stack:t.css`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      gap: 0;
      min-width: 0; // this one is important to prevent text overflow
    `,alertCondition:t.css``,body:t.css`
      padding: ${k.spacing(1)};
      flex: 1;
    `,refId:t.css`
      font-weight: ${k.typography.fontWeightBold};
      color: ${k.colors.primary.text};
    `,results:t.css`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;

      border-top: solid 1px ${k.colors.border.medium};
    `,noResults:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
    `,resultsRow:t.css`
      padding: ${k.spacing(.75)} ${k.spacing(1)};

      &:nth-child(odd) {
        background-color: ${k.colors.background.secondary};
      }

      &:hover {
        background-color: ${k.colors.background.canvas};
      }
    `,labelKey:t.css`
      color: ${k.isDark?"#73bf69":"#56a64b"};
    `,labelValue:t.css`
      color: ${k.isDark?"#ce9178":"#a31515"};
    `,resultValue:t.css`
      text-align: right;
    `,resultLabel:t.css`
      flex: 1;
      overflow-x: auto;

      display: inline-block;
      white-space: nowrap;
    `,noData:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      padding: ${k.spacing()};
    `},mutedText:t.css`
    color: ${k.colors.text.secondary};
    font-size: 0.9em;

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,header:{wrapper:t.css`
      background: ${k.colors.background.secondary};
      padding: ${k.spacing(.5)} ${k.spacing(1)};
      border-bottom: solid 1px ${k.colors.border.medium};
    `},footer:t.css`
    background: ${k.colors.background.secondary};
    padding: ${k.spacing(1)};
    border-top: solid 1px ${k.colors.border.medium};
  `,draggableIcon:t.css`
    cursor: grab;
  `,mutedIcon:t.css`
    color: ${k.colors.text.secondary};
  `,editable:t.css`
    padding: ${k.spacing(.5)} ${k.spacing(1)};
    border: solid 1px ${k.colors.border.weak};
    border-radius: ${k.shape.borderRadius()};

    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${k.spacing(1)};

    cursor: pointer;
  `,timeseriesTableWrapper:t.css`
    max-height: 500px;

    overflow-y: scroll;
  `,timeseriesTable:t.css`
    table-layout: auto;

    width: 100%;
    height: 100%;

    td,
    th {
      padding: ${k.spacing(1)};
    }

    td {
      background: ${k.colors.background.primary};
    }

    th {
      background: ${k.colors.background.secondary};
    }

    tr {
      border-bottom: 1px solid ${k.colors.border.medium};

      &:last-of-type {
        border-bottom: none;
      }
    }
  `,pagination:{wrapper:t.css`
      border-top: 1px solid ${k.colors.border.medium};
      padding: ${k.spacing()};
    `}})},68402:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{AlertmanagerTemplateFunction:()=>n,availableAlertManagerFunctions:()=>c,builtinFunctions:()=>i,conf:()=>r,keywords:()=>f,language:()=>u});var t=(d=>(d.Delimiter="delimiter",d.Keyword="keyword",d.Function="type.identifier",d.String="string",d.Variable="variable.name",d.Number="number",d.Comment="comment",d.Operator="operator",d.Identifier="idenfifier",d))(t||{}),n=(d=>(d.toUpper="toUpper",d.toLower="toLower",d.title="title",d.join="join",d.match="match",d.safeHtml="safeHtml",d.reReplaceAll="reReplaceAll",d.stringSlice="stringSlice",d))(n||{});const c=Object.values(n),i=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],f=["define","if","else","end","range","break","continue","template","block","with"],u={defaultToken:"",keywords:f,functions:[...i,...c],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},r={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},32139:(Y,T,e)=>{"use strict";e.d(T,{p:()=>yn,E:()=>On});var t=e(9892),n=e(66111),c=e(66698),s=e(51947),i=e(35645),f=e(54408),u=e(72648),r=e(24799),d=e(46967),o=e(52081),m=e(31403),l=e(67487),p=e(68226),g=e(98102),y=e(60499),v=e(77582),E=e(40014),h=e(96044),C=e(27876),a=e(41904),P=e(69945),D=e(72004),x=e(94617),M=e(46818),b=e(21767),R=e(60048),S=e(63619),O=e(8581),U=e(20383),I=e(41213),F=e(30422),w=e(77258),K=e(52666),L=e(86647),V=e(45253),H=e(59980),j=e(9471),A=e(59724),_=e(57027),k=e(32921),Q=e(59957),re=e(75849),Z=e(54899),oe=e(77599);function G(Ct){return"expr"in Ct}function le(Ct){return"grafana_condition"in Ct}var ge=e(45849);function ne(Ct){if(G(Ct))return ue(Ct,Ct.dataSourceUid,x.$.cloudAlerting);if(le(Ct))return ue(Ct,ge.GC,x.$.grafana);throw new Error("unsupported preview rule request")}function ue(Ct,Re,Te){return(0,k.x)({whileLoading:te(Te),source:(0,Z.i)().fetch({method:"POST",url:`/api/v1/rule/test/${Re}`,data:Ct}).pipe((0,j.U)(({data:nt})=>te(Te,{state:K.Gu.Done,series:nt.instances.map(Q.vP)})),(0,A.K)(nt=>(0,H.of)(te(Te,{state:K.Gu.Error,error:(0,oe.P)(nt)}))),(0,_.B)())})}function te(Ct,Re={}){return{ruleType:Ct,data:{state:K.Gu.Loading,series:[],timeRange:(0,re.JK)(),...Re}}}var me=e(69369),q=e(89050),se=e(90748),ae=e(98825),pe=e(40538);function de(Ct){const{preview:Re}=Ct,Te=(0,u.wW)(Me),nt={defaults:{},overrides:[{matcher:{id:se.mi.byName,options:"Info"},properties:[{id:"custom.displayMode",value:pe.h2.JSONView}]}]};if(!Re)return null;const{data:Xe,ruleType:Nt}=Re;return Xe.state===K.Gu.Loading?n.createElement("div",{className:Te.container},n.createElement("span",null,"Loading preview...")):Xe.state===K.Gu.Error?n.createElement("div",{className:Te.container},Xe.error?(0,M.kk)(Xe.error):"Failed to preview alert rule"):n.createElement("div",{className:Te.container},n.createElement("span",null,"Preview based on the result of running the query, for this moment."," ",Nt===x.$.grafana?"Configuration for `no data` and `error handling` is not applied.":null),n.createElement("div",{className:Te.table},n.createElement(q.Z,null,({width:zt,height:wt})=>n.createElement("div",{style:{width:`${zt}px`,height:`${wt}px`}},n.createElement(ae.$,{title:"",width:zt,height:wt,pluginId:"table",data:Xe,fieldConfig:nt})))))}function Me(Ct){return{container:t.css`
      margin: ${Ct.spacing(2)} 0;
    `,table:t.css`
      flex: 1 1 auto;
      height: 135px;
      margin-top: ${Ct.spacing(2)};
      border: 1px solid ${Ct.colors.border.medium};
      border-radius: ${Ct.shape.borderRadius(1)};
    `}}const Ke=["type","dataSourceName","condition","queries","expression"];function st(){const Ct=(0,u.wW)(tt),[Re,Te]=Ie(),{watch:nt}=(0,c.Gc)(),[Xe,Nt,zt]=nt(["type","condition","queries"]),{allDataSourcesAvailable:wt}=(0,me.S)(zt);if(Xe===x.$.cloudRecording||Xe===x.$.cloudAlerting)return null;const on=Boolean(Nt)&&wt;return n.createElement("div",{className:Ct.container},n.createElement(o.Lh,null,wt&&n.createElement(m.zx,{disabled:!on,type:"button",variant:"primary",onClick:Te},"Preview alerts"),!wt&&n.createElement(V.b,{title:"Preview is not available",severity:"warning"},"Cannot display the query preview. Some of the data sources used in the queries are not available.")),n.createElement(de,{preview:Re}))}function Ie(){const[Ct,Re]=(0,n.useState)(),{getValues:Te}=(0,c.Gc)(),nt=(0,I.Z)(),Xe=(0,n.useCallback)(()=>{const Nt=Te(Ke),zt=Ve(Nt);ne(zt).pipe((0,F.o)(wt=>!_e(wt),!0)).subscribe(wt=>{nt()&&Re(wt)})},[Te,nt]);return[Ct,Xe]}function Ve(Ct){const[Re,Te,nt,Xe,Nt]=Ct,zt=(0,L.F)().getInstanceSettings(Te);if(!zt)throw new Error(`Cannot find data source settings for ${Te}`);switch(Re){case x.$.cloudAlerting:return{dataSourceUid:zt.uid,dataSourceName:Te,expr:Nt};case x.$.grafana:return{grafana_condition:{condition:nt,data:Xe,now:(0,w.lf)(Date.now())}};default:throw new Error(`Alert type ${Re} not supported by preview.`)}}function _e(Ct){switch(Ct.data.state){case K.Gu.Done:case K.Gu.Error:return!0;default:return!1}}function tt(Ct){return{container:t.css`
      margin-top: ${Ct.spacing(2)};
      max-width: ${Ct.breakpoints.values.xxl}px;
    `}}var dt=e(36894);const Oe=()=>{const Ct=(0,u.wW)(ye),{register:Re,control:Te,watch:nt,formState:{errors:Xe}}=(0,c.Gc)();return nt("type")===x.$.cloudRecording?null:n.createElement(dt.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(r.g,{label:"For",description:"Expression has to be true for this long for the alert to be fired."},n.createElement("div",{className:Ct.flexRow},n.createElement(r.g,{invalid:!!Xe.forTime?.message,error:Xe.forTime?.message,className:Ct.inlineField},n.createElement(d.I,{...Re("forTime",{pattern:{value:/^\d+$/,message:"Must be a positive integer."}}),width:8})),n.createElement(S.g,{name:"forTimeUnit",render:({field:{onChange:zt,ref:wt,...on}})=>n.createElement(O.Ph,{...on,options:U.qr,onChange:qt=>zt(qt?.value),width:15,className:Ct.timeUnit}),control:Te}))),n.createElement(st,null))},ye=Ct=>({inlineField:t.css`
    margin-bottom: 0;
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-start;
  `,timeUnit:t.css`
    margin-left: ${Ct.spacing(.5)};
  `});var Pe=e(16808),be=e(20700);const Be=({rulesSourceName:Ct})=>{const{control:Re,watch:Te,formState:{errors:nt},setValue:Xe}=(0,c.Gc)(),Nt=(0,u.wW)(ze),zt=(0,P._)(yt=>yt.rulerRules),wt=(0,C.useDispatch)();(0,n.useEffect)(()=>{wt((0,D.UR)({rulesSourceName:Ct}))},[Ct,wt]);const on=zt[Ct]?.result,qt=Te("namespace"),un=(0,n.useMemo)(()=>on?Object.keys(on).map(yt=>({label:yt,value:yt})):[],[on]),tn=(0,n.useMemo)(()=>qt&&on?.[qt]?.map(yt=>({label:yt.name,value:yt.name}))||[],[qt,on]);return n.createElement("div",{className:Nt.flexRow},n.createElement(r.g,{"data-testid":"namespace-picker",label:"Namespace",error:nt.namespace?.message,invalid:!!nt.namespace?.message},n.createElement(S.g,{render:({field:{onChange:yt,ref:jn,...ra}})=>n.createElement(O.LT,{...ra,allowCustomValue:!0,className:Nt.input,onChange:Da=>{Xe("group",""),yt(Da.value)},options:un,width:42}),name:"namespace",control:Re,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:be.p0}}})),n.createElement(r.g,{"data-testid":"group-picker",label:"Group",error:nt.group?.message,invalid:!!nt.group?.message},n.createElement(S.g,{render:({field:{ref:yt,...jn}})=>n.createElement(O.LT,{...jn,allowCustomValue:!0,options:tn,width:42,onChange:ra=>{Xe("group",ra.value??"")},className:Nt.input}),name:"group",control:Re,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:be.p0}}})))},ze=Ct=>({flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;

    & > * + * {
      margin-left: ${Ct.spacing(3)};
    }
  `,input:t.css`
    width: 330px !important;
  `});function lt(Ct){if(Ct===x.$.cloudRecording)return"Select the Namespace and Group for your recording rule.";const Re="https://grafana.com/docs/grafana/latest/alerting/fundamentals/annotation-label/variables-label-annotation",Te=()=>n.createElement("span",null,"Click"," ",n.createElement("a",{href:Re,target:"_blank",rel:"noreferrer"},"here"," "),"for documentation on how to template annotations and labels.");return Ct===x.$.grafana?n.createElement("span",null," ","Write a summary to help you better manage your alerts. ",n.createElement(Te,null)):Ct===x.$.cloudAlerting?n.createElement("span",null," ","Select the Namespace and evaluation group for your alert. Write a summary to help you better manage your alerts."," "):""}function ht(){const{watch:Ct}=(0,c.Gc)(),Re=Ct("type"),Te=Ct("dataSourceName"),nt=Ct("type");return n.createElement(dt.z,{stepNo:nt===x.$.cloudRecording?3:4,title:nt===x.$.cloudRecording?"Folder and group":"Add details for your alert rule",description:lt(nt)},(Re===x.$.cloudRecording||Re===x.$.cloudAlerting)&&Te&&n.createElement(Be,{rulesSourceName:Te}),nt!==x.$.cloudRecording&&n.createElement(Pe.Z,null))}var vt=e(56412),bt=e(72948),ct=e(29460),Pt=e(19191);const ie=()=>{const Ct=(0,u.wW)(Ne),{watch:Re,getValues:Te}=(0,c.Gc)(),nt=Re("type"),Xe=Re("dataSourceName")??ge.GC,Nt=Ce(Te("labels")).length>0;return n.createElement(dt.z,{stepNo:nt===x.$.cloudRecording?4:5,title:nt===x.$.cloudRecording?"Labels":"Notifications",description:nt===x.$.cloudRecording?"Add labels to help you better manage your recording rules":"Grafana handles the notifications for alerts by assigning labels to alerts. These labels connect alerts to contact points and silence alert instances that have matching labels."},n.createElement("div",{className:Ct.contentWrapper},n.createElement("div",{style:{display:"flex",flexDirection:"column"}},!Nt&&nt!==x.$.cloudRecording&&n.createElement(bt.Z,{className:Ct.card},n.createElement(bt.Z.Heading,null,"Root route \u2013 default for all alerts"),n.createElement(bt.Z.Description,null,"Without custom labels, your alert will be routed through the root route. To view and edit the root route, go to ",n.createElement(ct.r,{href:"/alerting/routes"},"notification policies")," or contact your admin in case you are using non-Grafana alert management.")),n.createElement(Pt.Z,{dataSourceName:Xe}))))};function Ce(Ct){return Ct.filter(Re=>Re.key&&Re.value)}const Ne=Ct=>({contentWrapper:t.css`
    display: flex;
    align-items: center;
  `,hideButton:t.css`
    color: ${Ct.colors.text.secondary};
    cursor: pointer;
    margin-bottom: ${Ct.spacing(1)};
  `,card:t.css`
    max-width: 500px;
  `,flowChart:t.css`
    margin-right: ${Ct.spacing(3)};
  `});var Ze=e(20091),Qe=e(30979),Le=e(72142),Ue=e(79841),ve=e(61860),Se=e(39904),Fe=e(9405),je=e(79662);const Ge=[{label:"Yaml",value:"yaml"}],gt=({onClose:Ct})=>{const[Re,Te]=(0,n.useState)("yaml"),{setValue:nt}=(0,c.Gc)(),Xe=(0,u.wW)(qe),Nt=zt=>{for(const wt in zt)nt(wt,zt[wt]);Ct()};return n.createElement(Qe.d,{title:"Inspect Alert rule",subtitle:n.createElement("div",{className:Xe.subtitle},n.createElement(mt,{setActiveTab:Te,activeTab:Re})),onClose:Ct},Re==="yaml"&&n.createElement(Ye,{onSubmit:Nt}))},mt=({activeTab:Ct,setActiveTab:Re})=>n.createElement(Le.J,null,Ge.map((Te,nt)=>n.createElement(Ue.O,{key:`${Te.value}-${nt}`,label:Te.label,value:Te.value,onChangeTab:()=>Re(Te.value),active:Ct===Te.value}))),Ye=({onSubmit:Ct})=>{const Re=(0,u.wW)(we),{getValues:Te}=(0,c.Gc)(),nt=(0,b.yh)(Te()),[Xe,Nt]=(0,n.useState)((0,Ze.$w)(nt)),zt=()=>{const wt=(0,Ze.zD)(Xe),on=Te(),qt=St(wt);Ct({...on,...qt})};return n.createElement(n.Fragment,null,n.createElement("div",{className:Re.applyButton},n.createElement(m.zx,{type:"button",onClick:zt},"Apply"),n.createElement(ve.u,{content:n.createElement(ft,null),theme:"info",placement:"left-start",interactive:!0},n.createElement(Se.J,{name:"exclamation-triangle",size:"xl"}))),n.createElement("div",{className:Re.content},n.createElement(q.Z,{disableWidth:!0},({height:wt})=>n.createElement(Fe.p,{width:"100%",height:wt,language:"yaml",value:Xe,onBlur:Nt,monacoOptions:{minimap:{enabled:!1}}}))))};function ft(){return n.createElement("div",null,"The YAML content in the editor only contains alert rule configuration ",n.createElement("br",null),"To configure Prometheus, you need to provide the rest of the"," ",n.createElement("a",{href:"https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/",target:"_blank",rel:"noreferrer"},"configuration file content."))}function St(Ct){return(0,je.cG)(Ct)?(0,b.WL)(Ct):(0,je.yF)(Ct)?(0,b.lN)(Ct):{}}const we=Ct=>({content:t.css`
    flex-grow: 1;
    height: 100%;
    padding-bottom: 16px;
    margin-bottom: ${Ct.spacing(2)};
  `,applyButton:t.css`
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    flex-grow: 0;
    margin-bottom: ${Ct.spacing(2)};
  `}),qe=()=>({subtitle:t.css`
    display: flex;
    align-items: center;
    justify-content: space-between;
  `});var Je=e(68183),ut=e(26418),Mt=e(75e3);function Wt(){const Ct=(0,P._)(Te=>Te.dataSources);return Object.values(Ct).map(Te=>Te.result).filter(Te=>Boolean(Te?.rulerConfig)).map(Te=>(0,ge.c$)(Te.name)).filter(Te=>Boolean(Te))}var ln=e(82897),fn=e(59679),pn=e(47956),An=e(206),Ot=e(34807),Ft=e(61893),Kt=e(45608),Lt=e(46063);function Ut({fields:Ct}){const Re=Ct.filter(wt=>!["State","Info"].includes(wt.name)),Te=Ct.findIndex(wt=>wt.name==="State"),nt=Ct.findIndex(wt=>wt.name==="Info"),Xe=Re.map(wt=>Ct.indexOf(wt)),Nt=Ct[Te]?.values.length??0,zt=[];for(let wt=0;wt<Nt;wt++){const on=Xe.map(tn=>[Ct[tn].name,Ct[tn].values[wt]]),qt=Ct[Te]?.values?.[wt],un=Ct[nt]?.values?.[wt];(0,Lt.Yb)(qt)&&zt.push({state:qt,info:un,labels:Object.fromEntries(on)})}return{instances:zt}}function Rt({preview:Ct}){const Re=(0,u.wW)($t),Te=Ut(Ct);return n.createElement("table",{className:Re.table},n.createElement("caption",null,n.createElement("div",null,"Alerts preview"),n.createElement("span",null,"Preview based on the result of running the query for this moment.")),n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"State"),n.createElement("th",null,"Labels"),n.createElement("th",null,"Info"))),n.createElement("tbody",null,Te.instances.map(({state:nt,info:Xe,labels:Nt},zt)=>{const wt=(0,Ft.P3)(Nt);return n.createElement("tr",{key:zt},n.createElement("td",null,n.createElement(Kt.l,{state:nt})),n.createElement("td",null,n.createElement(Ot.P,{tags:wt,className:Re.tagList})),n.createElement("td",null,Xe&&n.createElement(ve.u,{content:Xe},n.createElement(Se.J,{name:"info-circle"}))))})))}const $t=Ct=>({table:t.css`
    width: 100%;
    margin: ${Ct.spacing(2,0)};

    caption {
      caption-side: top;
      color: ${Ct.colors.text.primary};

      & > span {
        font-size: ${Ct.typography.bodySmall.fontSize};
        color: ${Ct.colors.text.secondary};
      }
    }

    td,
    th {
      padding: ${Ct.spacing(1,1)};
    }

    td + td,
    th + th {
      padding-left: ${Ct.spacing(3)};
    }

    thead th {
      &:nth-child(1) {
        width: 80px;
      }

      &:nth-child(2) {
        width: auto;
      }

      &:nth-child(3) {
        width: 40px;
      }
    }

    td:nth-child(3) {
      text-align: center;
    }

    tbody tr:nth-child(2n + 1) {
      background-color: ${Ct.colors.background.secondary};
    }
  `,tagList:t.css`
    justify-content: flex-start;
  `}),_t=({value:Ct,onChange:Re,dataSourceName:Te,showPreviewAlertsButton:nt=!0})=>{const Xe=(0,u.wW)(jt),{mapToValue:Nt,mapToQuery:zt}=an(Te),wt=zt({refId:"A",hide:!1},Ct),{error:on,loading:qt,value:un}=(0,fn.Z)(()=>(0,L.F)().get(Te),[Te]),tn=(0,n.useCallback)(ma=>{Re(Nt(ma))},[Re,Nt]),[yt,jn]=Ie(),ra=async()=>{jn()};if(qt||un?.name!==Te)return null;const Da=(0,L.F)().getInstanceSettings(Te);if(on||!un||!un?.components?.QueryEditor||!Da){const ma=on?.message||"Data source plugin does not export any Query Editor component";return n.createElement("div",null,"Could not load query editor due to: ",ma)}const Ea=yt?.data.state===K.Gu.Done,ba=un?.components?.QueryEditor,$n=yt?.data?.series?.find(ma=>ma.name==="evaluation results"),zn=$n&&$n.fields.some(ma=>ma.values.length>0);return n.createElement(n.Fragment,null,n.createElement(pn.n,{instanceSettings:Da},n.createElement(ba,{query:wt,queries:[wt],app:An.zj.CloudAlerting,onChange:tn,onRunQuery:ln.noop,datasource:un})),nt&&n.createElement("div",{className:Xe.preview},n.createElement(m.zx,{type:"button",onClick:ra,disabled:yt?.data.state===K.Gu.Loading},"Preview alerts"),Ea&&!zn&&n.createElement(V.b,{title:"Alerts preview",severity:"info",className:Xe.previewAlert},"There are no firing alerts for your query."),zn&&n.createElement(Rt,{preview:$n})))},jt=Ct=>({preview:t.css`
    padding: ${Ct.spacing(2,0)};
    max-width: ${Ct.breakpoints.values.xl}px;
  `,previewAlert:t.css`
    margin: ${Ct.spacing(1,0)};
  `});function an(Ct){return(0,n.useMemo)(()=>{switch((0,L.F)().getInstanceSettings(Ct)?.type){case"loki":case"prometheus":return{mapToValue:Te=>Te.expr,mapToQuery:(Te,nt)=>({...Te,expr:nt})};default:throw new Error(`${Ct} is not supported as an expression editor`)}},[Ct])}var cn=e(97201);const rn=({condition:Ct,onSetCondition:Re,queries:Te,panelData:nt,onUpdateRefId:Xe,onRemoveExpression:Nt,onUpdateExpressionType:zt,onUpdateQueryExpression:wt})=>{const on=(0,n.useMemo)(()=>Te.reduce((qt,un)=>(0,Mt.j)(un.model)?qt.concat(un.model):qt,[]),[Te]);return n.createElement(ut.Stack,{direction:"row",alignItems:"stretch"},on.map(qt=>{const un=nt[qt.refId],tn=Ct===qt.refId,yt=tn&&un?(0,be.Vp)(un.series):void 0,jn=tn&&un?(0,be.Yq)(un.series):void 0;return n.createElement(cn.A2,{key:qt.refId,isAlertCondition:tn,data:un,error:yt,warning:jn,queries:Te,query:qt,onSetCondition:Re,onRemoveExpression:Nt,onUpdateRefId:Xe,onUpdateExpressionType:zt,onChangeQuery:wt})}))};var hn=e(36826),Dn=e(67254),Rn=e(91162),ea=e(19115),Fn=e(19426),Vn=e(36584),aa=e(50362),Sa=e(78679);const la=43200,Yn=({data:Ct,error:Re,dsSettings:Te,index:nt,onChangeDataSource:Xe,onChangeQuery:Nt,onChangeTimeRange:zt,onRunQueries:wt,onRemoveQuery:on,onDuplicateQuery:qt,query:un,queries:tn,thresholds:yt,thresholdsType:jn,onChangeThreshold:ra,condition:Da,onSetCondition:Ea,onChangeQueryOptions:ba})=>{const $n=(0,u.wW)(ha),[zn,ma]=(0,n.useState)(),fa=zn?.getDefaultQuery?zn.getDefaultQuery(An.zj.UnifiedAlerting):{};function kn(){const Fa=(0,u.wW)(ha);return n.createElement("div",{className:Fa.dsTooltip},n.createElement(ve.u,{content:n.createElement(n.Fragment,null,"Not finding the data source you want? Some data sources are not supported for alerting. Click on the icon for more information.")},n.createElement(Se.J,{name:"info-circle",onClick:()=>window.open(" https://grafana.com/docs/grafana/latest/alerting/fundamentals/data-source-alerting/","_blank")})))}function ga({query:Fa,error:bs,index:ir}){const Sr={maxDataPoints:{maxDataPoints:Fa.model.maxDataPoints}.maxDataPoints};return n.createElement(ut.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement(kn,null),zt&&n.createElement(ea.x,{timeRange:Fa.relativeTimeRange??(0,re.Rr)(),onChange:Oa=>zt(Oa,ir)}),n.createElement("div",{className:$n.queryOptions},n.createElement(Ia,{options:Sr,onChange:Oa=>ba(Oa,ir)})),n.createElement(aa._,{onSetCondition:()=>Ea(Fa.refId),enabled:Da===Fa.refId,error:bs}))}return n.createElement(ut.Stack,{direction:"column",gap:.5},n.createElement("div",{className:$n.wrapper},n.createElement(Vn.x,{alerting:!0,dataSource:Te,onDataSourceLoaded:ma,onChangeDataSource:Fa=>Xe(Fa,nt),id:un.refId,index:nt,key:un.refId,data:Ct,query:{...fa,...(0,ln.cloneDeep)(un.model)},onChange:Fa=>Nt(Fa,nt),onRemoveQuery:on,onAddQuery:()=>qt((0,ln.cloneDeep)(un)),onRunQuery:wt,queries:tn,renderHeaderExtras:()=>n.createElement(ga,{query:un,index:nt,error:Re}),app:An.zj.UnifiedAlerting,hideDisableQuery:!0})),Ct.state!==K.Gu.NotStarted&&n.createElement(Sa.l,{data:Ct,thresholds:yt,thresholdsType:jn,onThresholdsChange:ra?Fa=>ra(Fa,nt):void 0}))},ia=({children:Ct})=>{const Re=(0,u.wW)(ha);return n.createElement("div",{className:Re.wrapper},Ct)};function Ia({options:Ct,onChange:Re}){const Te=Ct.maxDataPoints??"",nt=Xe=>{const Nt=parseInt(Xe.target.value,10),zt=isNaN(Nt)||Nt===0?void 0:Nt;zt!==Ct.maxDataPoints&&Re({...Ct,maxDataPoints:zt})};return n.createElement(ut.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement(Fn.c,{width:8,tooltip:n.createElement(n.Fragment,null,"The maximum data points per series. Used directly by some data sources and used in calculation of auto interval. With streaming data this value is used for the rolling buffer.")},"Max data points"),n.createElement(d.I,{type:"number",className:"width-6",placeholder:la.toLocaleString(),spellCheck:!1,onBlur:nt,defaultValue:Te}))}const ha=Ct=>({wrapper:t.css`
    label: AlertingQueryWrapper;
    margin-bottom: ${Ct.spacing(1)};
    border: 1px solid ${Ct.colors.border.medium};
    border-radius: ${Ct.shape.borderRadius(1)};
  `,queryOptions:t.css`
    margin-bottom: -${Ct.spacing(2)};
  `,dsTooltip:t.css`
    display: flex;
    align-items: center;
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `});class xa extends n.PureComponent{constructor(Re){super(Re),this.onRemoveQuery=Te=>{const{queries:nt,onQueriesChange:Xe}=this.props;Xe(nt.filter(Nt=>Nt.refId!==Te.refId))},this.onChangeTimeRange=(Te,nt)=>{const{queries:Xe,onQueriesChange:Nt}=this.props;Nt(Xe.map((zt,wt)=>wt!==nt?zt:{...zt,relativeTimeRange:Te}))},this.onChangeQueryOptions=(Te,nt)=>{const{queries:Xe,onQueriesChange:Nt}=this.props;Nt(Xe.map((zt,wt)=>wt!==nt?zt:{...zt,model:{...zt.model,maxDataPoints:Te.maxDataPoints}}))},this.onChangeDataSource=(Te,nt)=>{const{queries:Xe,onQueriesChange:Nt}=this.props,zt=Xe.map((wt,on)=>{if(on!==nt)return wt;const qt=this.getDataSourceSettings(wt);return Te.type===qt?.type?Wa(wt,Te):as(wt,Te)});Nt(zt)},this.onChangeQuery=(Te,nt)=>{const{queries:Xe,onQueriesChange:Nt}=this.props;Nt(Xe.map((zt,wt)=>wt!==nt?zt:{...zt,refId:Te.refId,queryType:zt.model.queryType??"",model:{...zt.model,...Te,datasource:Te.datasource}}))},this.onDragEnd=Te=>{const{queries:nt,onQueriesChange:Xe}=this.props;if(!Te||!Te.destination)return;const Nt=Te.source.index,zt=Te.destination.index;if(Nt===zt)return;const wt=Array.from(nt),[on]=wt.splice(Nt,1);wt.splice(zt,0,on),Xe(wt)},this.getDataSourceSettings=Te=>(0,L.F)().getInstanceSettings(Te.datasourceUid)}render(){const{queries:Re,expressions:Te}=this.props,nt=(0,be.Fu)([...Re,...Te]);return n.createElement(hn.Z5,{onDragEnd:this.onDragEnd},n.createElement(hn.bK,{droppableId:"alerting-queries",direction:"vertical"},Xe=>n.createElement("div",{ref:Xe.innerRef,...Xe.droppableProps},Re.map((Nt,zt)=>{const wt=this.props.data?.[Nt.refId]??{series:[],state:K.Gu.NotStarted},on=this.getDataSourceSettings(Nt),un=this.props.condition===Nt.refId?(0,be.Vp)(wt.series):void 0;return on?n.createElement(Yn,{index:zt,key:Nt.refId,dsSettings:on,data:wt,error:un,query:Nt,onChangeQuery:this.onChangeQuery,onRemoveQuery:this.onRemoveQuery,queries:Re,onChangeDataSource:this.onChangeDataSource,onDuplicateQuery:this.props.onDuplicateQuery,onChangeTimeRange:this.onChangeTimeRange,onChangeQueryOptions:this.onChangeQueryOptions,thresholds:nt[Nt.refId]?.config,thresholdsType:nt[Nt.refId]?.mode,onRunQueries:this.props.onRunQueries,condition:this.props.condition,onSetCondition:this.props.onSetCondition}):n.createElement(Xa,{key:`${Nt.refId}-${zt}`,index:zt,model:Nt.model,onUpdateDatasource:()=>{const tn=(0,Rn.ak)().getInstanceSettings(null);tn&&this.onChangeDataSource(tn,zt)},onRemoveQuery:()=>{this.onRemoveQuery(Nt)}})}),Xe.placeholder)))}}function Wa(Ct,Re){return{...Ct,model:{...(0,ln.omit)(Ct.model,"datasource"),datasource:{type:Re.type,uid:Re.uid}},datasourceUid:Re.uid}}function as(Ct,Re){return{refId:Ct.refId,relativeTimeRange:Ct.relativeTimeRange,queryType:"",datasourceUid:Re.uid,model:{refId:Ct.refId,hide:!1,datasource:{type:Re.type,uid:Re.uid}}}}const Xa=({index:Ct,onUpdateDatasource:Re,onRemoveQuery:Te,model:nt})=>{const Xe=nt.refId,[Nt,zt]=(0,n.useState)(!1),wt=()=>{zt(qt=>!qt)},on=()=>{Re()};return n.createElement(ia,null,n.createElement(Dn.t,{title:Xe,draggable:!0,index:Ct,id:Xe,isOpen:!0},n.createElement(bt.Z,null,n.createElement(bt.Z.Heading,null,"This datasource has been removed"),n.createElement(bt.Z.Description,null,"The datasource for this query was not found, it was either removed or is not installed correctly."),n.createElement(bt.Z.Figure,null,n.createElement(Se.J,{name:"question-circle"})),n.createElement(bt.Z.Actions,null,n.createElement(m.zx,{key:"update",variant:"secondary",onClick:on},"Update datasource"),n.createElement(m.zx,{key:"remove",variant:"destructive",onClick:Te},"Remove query")),n.createElement(bt.Z.SecondaryActions,null,n.createElement(m.zx,{key:"details",onClick:wt,icon:Nt?"angle-up":"angle-down",fill:"text",size:"sm"},"Show details"))),Nt&&n.createElement("div",null,n.createElement("pre",null,n.createElement("code",null,JSON.stringify(nt,null,2))))))},Ba=({queries:Ct,expressions:Re,panelData:Te,onRunQueries:nt,onChangeQueries:Xe,onDuplicateQuery:Nt,condition:zt,onSetCondition:wt})=>{const on=(0,u.wW)(ca);return n.createElement("div",{className:on.container},n.createElement(xa,{data:Te,queries:Ct,expressions:Re,onRunQueries:nt,onQueriesChange:Xe,onDuplicateQuery:Nt,condition:zt,onSetCondition:wt}))},ca=Ct=>({container:t.css`
    background-color: ${Ct.colors.background.primary};
    height: 100%;
    max-width: ${Ct.breakpoints.values.xxl}px;
  `});var ss=e(85596),Ya=e(19349);const sa=({queries:Ct,onChangeQuery:Re,runQueries:Te,panelData:nt,dataSourceName:Xe})=>{const[Nt,zt]=(0,n.useState)({series:[],state:ss.Gu.NotStarted,timeRange:(0,Ya.$t)().timeRange()}),wt=(0,u.wW)(ja);(0,n.useEffect)(()=>{zt(nt?.[Ct[0]?.refId])},[nt,Ct]);const{error:on,loading:qt,value:un}=(0,fn.Z)(()=>(0,L.F)().get(Xe),[Xe]),tn=ra=>{const Da=Ct[0],Ea=(0,L.F)().getInstanceSettings(Xe)?.uid;if(!(0,b.tO)(ra)||!Ea)return;const ba=ra.expr,$n={...Da,refId:ra.refId,queryType:ra.queryType??"",datasourceUid:Ea,expr:ba,model:{refId:ra.refId,expr:ba,editorMode:"code"}};Re([$n])};if(qt||un?.name!==Xe)return null;const yt=(0,L.F)().getInstanceSettings(Xe);if(on||!un||!un?.components?.QueryEditor||!yt){const ra=on?.message||"Data source plugin does not export any Query Editor component";return n.createElement("div",null,"Could not load query editor due to: ",ra)}const jn=un.components.QueryEditor;return n.createElement(n.Fragment,null,Ct.length&&n.createElement(jn,{query:Ct[0],queries:Ct,app:An.zj.UnifiedAlerting,onChange:tn,onRunQuery:Te,datasource:un}),Nt&&n.createElement("div",{className:wt.vizWrapper},n.createElement(Sa.l,{data:Nt})))},ja=Ct=>({vizWrapper:t.css`
    margin: ${Ct.spacing(1,0)};
  `});var da=e(82002),Ga=e(53117),qa=e(3153);function Ka({value:Ct,...Re}){const Te=Wt(),{loading:nt=!0}=(0,fn.Z)(()=>(0,qa.WI)((0,D.dV)()),[qa.WI]),Xe=(0,n.useCallback)(Nt=>!!Te.find(({id:zt})=>zt===Nt.id),[Te]);return n.createElement(Ga.q,{disabled:nt,isLoading:nt,noDefault:!0,alerting:!0,filter:Xe,current:Ct,...Re})}const ts=Ct=>{const{name:Re,description:Te,image:nt,selected:Xe=!1,value:Nt,onClick:zt,disabled:wt=!1}=Ct,on=(0,u.wW)(va),qt=(0,t.cx)({[on.wrapper]:!0,[on.disabled]:wt});return n.createElement(bt.Z,{className:qt,isSelected:Xe,onClick:()=>zt(Nt),disabled:wt},n.createElement(bt.Z.Figure,null,n.createElement("img",{src:nt,alt:""})),n.createElement(bt.Z.Heading,null,Re),n.createElement(bt.Z.Description,null,Te))},va=Ct=>({wrapper:t.css`
    width: 380px;
    cursor: pointer;
    user-select: none;
  `,disabled:t.css`
    opacity: 0.5;
  `}),ns=({selected:Ct=!1,disabled:Re,onClick:Te})=>n.createElement(ts,{name:"Grafana managed alert",description:n.createElement("span",null,"Supports multiple data sources of any kind.",n.createElement("br",null),"Transform data with expressions."),image:"public/img/grafana_icon.svg",selected:Ct,disabled:Re,value:x.$.grafana,onClick:Te}),xs=({children:Ct,visible:Re=!1})=>Re?n.createElement(ve.u,{content:"You do not appear to have any compatible datasources.",placement:"top"},n.createElement("div",null,Ct)):n.createElement(n.Fragment,null,Ct),hs=({selected:Ct=!1,disabled:Re=!1,onClick:Te})=>n.createElement(xs,{visible:Re},n.createElement(ts,{name:"Mimir or Loki alert",description:n.createElement("span",null,"Use a Mimir, Loki or Cortex datasource.",n.createElement("br",null),"Expressions are not supported."),image:"public/img/alerting/mimir_logo.svg",selected:Ct,disabled:Re,value:x.$.cloudAlerting,onClick:Te})),rr=({selected:Ct=!1,disabled:Re=!1,onClick:Te})=>n.createElement(xs,{visible:Re},n.createElement(ts,{name:"Mimir or Loki recording rule",description:n.createElement("span",null,"Precompute expressions.",n.createElement("br",null),"Should be combined with an alert rule."),image:"public/img/alerting/mimir_logo_recording.svg",selected:Ct,disabled:Re,value:x.$.cloudRecording,onClick:Te})),Is=({selected:Ct,onChange:Re,enabledTypes:Te})=>{const nt=Wt(),Xe=!(0,ln.isEmpty)(nt);(0,n.useEffect)(()=>{(0,qa.WI)((0,D.dV)())},[]);const Nt=(0,u.wW)(ur);return n.createElement(n.Fragment,null,n.createElement(ut.Stack,{direction:"row",gap:2},Te.includes(x.$.grafana)&&n.createElement(ns,{selected:Ct===x.$.grafana,onClick:Re}),Te.includes(x.$.cloudAlerting)&&n.createElement(hs,{selected:Ct===x.$.cloudAlerting,onClick:Re,disabled:!Xe}),Te.includes(x.$.cloudRecording)&&n.createElement(rr,{selected:Ct===x.$.cloudRecording,onClick:Re,disabled:!Xe})),Te.includes(x.$.grafana)&&n.createElement("small",{className:Nt.meta},"Select \u201CGrafana managed\u201D unless you have a Mimir, Loki or Cortex data source with the Ruler API enabled."))},ur=Ct=>({meta:t.css`
    color: ${Ct.colors.text.disabled};
  `}),mr=({editingExistingRule:Ct})=>{const{enabledRuleTypes:Re,defaultRuleType:Te}=os(),{control:nt,formState:{errors:Xe},getValues:Nt,setValue:zt,watch:wt}=(0,c.Gc)(),on=(0,u.wW)(Vs),qt=wt("type");return n.createElement(n.Fragment,null,!Ct&&n.createElement(r.g,{error:Xe.type?.message,invalid:!!Xe.type?.message,"data-testid":"alert-type-picker"},n.createElement(S.g,{render:({field:{onChange:un}})=>n.createElement(Is,{"aria-label":"Rule type",selected:Nt("type")??Te,onChange:un,enabledTypes:Re}),name:"type",control:nt,rules:{required:{value:!0,message:"Please select alert type"}}})),n.createElement("div",{className:on.flexRow},(qt===x.$.cloudAlerting||qt===x.$.cloudRecording)&&n.createElement(r.g,{className:on.formInput,label:"Select data source",error:Xe.dataSourceName?.message,invalid:!!Xe.dataSourceName?.message,"data-testid":"datasource-picker"},n.createElement(S.g,{render:({field:{onChange:un,ref:tn,...yt}})=>n.createElement(Ka,{...yt,onChange:jn=>{zt("location",void 0),zt("expression",""),un(jn?.name??null)}}),name:"dataSourceName",control:nt,rules:{required:{value:!0,message:"Please select a data source"}}}))))};function os(){const Ct=da.Vt.hasAccess(C.AccessControlAction.AlertingRuleCreate,da.Vt.hasEditPermissionInFolders),Re=da.Vt.hasAccess(C.AccessControlAction.AlertingRuleExternalWrite,da.Vt.isEditor),Te=Ct?x.$.grafana:x.$.cloudAlerting,nt=[];return Ct&&nt.push(x.$.grafana),Re&&nt.push(x.$.cloudAlerting,x.$.cloudRecording),{enabledRuleTypes:nt,defaultRuleType:Te}}const Vs=Ct=>({formInput:t.css`
    width: 330px;
    & + & {
      margin-left: ${Ct.spacing(3)};
    }
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-end;
  `});var is=e(62992),zs=e(99822),ls=e(97573);const ws=Ct=>{try{return JSON.stringify(Ct),!1}catch{return!0}},Ws=(Ct,Re)=>{if(ws(Ct))return null;if(Re.datasourceUid!==ls.Yq)return Re;{const Te=Ct.find(nt=>nt.refId===Re.model.expression);return Te?Ws(Ct,Te):null}};var fr=e(47471),Js=e(51935);const Xs=(Ct,Re)=>{const Te=Ct.find(Xe=>Xe.refId===Re);return Te&&Ws(Ct,Te)},Hs={queries:[]},or=(0,is.PH)("duplicateQuery"),gr=(0,is.PH)("addNewDataQuery"),ks=(0,is.PH)("setDataQueries"),pr=(0,is.PH)("addNewExpression"),hr=(0,is.PH)("removeExpression"),qs=(0,is.PH)("updateExpression"),vr=(0,is.PH)("updateExpressionRefId"),us=(0,is.PH)("rewireExpressions"),_s=(0,is.PH)("updateExpressionType"),Er=(0,is.PH)("updateExpressionTimeRange"),er=(0,is.PH)("updateMaxDataPoints"),ms=(0,is.PH)("setRecordingRulesQueries"),Gt=(0,is.Lq)(Hs,Ct=>{Ct.addCase(or,(Re,{payload:Te})=>{Re.queries=He(Re.queries,Te)}).addCase(gr,Re=>{const Te=(0,ge.P)();Te&&(Re.queries=He(Re.queries,{datasourceUid:Te.uid,model:{refId:"",datasource:{type:Te.type,uid:Te.uid}}}))}).addCase(ks,(Re,{payload:Te})=>{const nt=Re.queries.filter(Xe=>(0,Mt.j)(Xe.model));Re.queries=[...Te,...nt]}).addCase(ms,(Re,{payload:Te})=>{const nt=Te.recordingRuleQueries[0],Xe={...nt,expr:Te.expression,model:{expr:Te.expression,refId:nt.model.refId}};Re.queries=[Xe]}).addCase(er,(Re,Te)=>{Re.queries=Re.queries.map(nt=>nt.refId===Te.payload.refId?{...nt,model:{...nt.model,maxDataPoints:Te.payload.maxDataPoints}}:nt)}),Ct.addCase(pr,Re=>{Re.queries=He(Re.queries,{datasourceUid:ls.Yq,model:fr.mV.newQuery({type:ls.Us.math,conditions:[{...Js.R,query:{params:[]}}],expression:""})})}).addCase(hr,(Re,{payload:Te})=>{Re.queries=Re.queries.filter(nt=>nt.refId!==Te)}).addCase(qs,(Re,{payload:Te})=>{Re.queries=Re.queries.map(nt=>{const Xe=Xs(Re.queries,Te.expression),Nt=Xe?Xe.relativeTimeRange:(0,re.Rr)();return nt.refId===Te.refId&&(nt.model=Te,Te.type===ls.Us.resample&&(nt.relativeTimeRange=Nt)),nt})}).addCase(Er,Re=>{const Te=Re.queries.map(nt=>{if(nt.datasourceUid===ls.Yq){const Xe=Xs(Re.queries,nt.model.expression),Nt=Xe?Xe.relativeTimeRange:(0,re.Rr)();nt.relativeTimeRange=Nt}return nt});Re.queries=Te}).addCase(vr,(Re,{payload:Te})=>{const{newRefId:nt,oldRefId:Xe}=Te;if((0,be.Dr)(Re.queries,nt))return;const zt=(0,be.Ry)(Re.queries,Xe,nt);Re.queries=zt.map(wt=>wt.refId===Xe?{...wt,refId:nt,model:{...wt.model,refId:nt}}:wt)}).addCase(us,(Re,{payload:Te})=>{Re.queries=(0,be.Ry)(Re.queries,Te.oldRefId,Te.newRefId)}).addCase(_s,(Re,Te)=>{Re.queries=Re.queries.map(nt=>nt.refId===Te.payload.refId?{...nt,model:{...fr.mV.newQuery({type:Te.payload.type,conditions:[{...Js.R,query:{params:[]}}],expression:""}),refId:Te.payload.refId}}:nt)})}),He=(Ct,Re)=>{const Te=(0,zs.Hs)(Ct),nt={...Re,refId:Te,queryType:"",model:{...Re.model,hide:!1,refId:Te},relativeTimeRange:Re.relativeTimeRange??it(Re.model)};return[...Ct,nt]},it=Ct=>{if(!(0,Mt.j)(Ct))return(0,re.Rr)()};var xt=e(81001);function Vt(){const[Ct,Re]=(0,n.useState)({}),Te=(0,n.useRef)(new xt.v);(0,n.useEffect)(()=>{const wt=Te.current;return wt.get().subscribe(on=>{Re(on)}),()=>{wt.destroy()}},[]);const nt=(0,n.useCallback)(()=>{Re({})},[]),Xe=(0,n.useCallback)(()=>{Te.current.cancel()},[]),Nt=(0,n.useCallback)(wt=>{Te.current.run(wt)},[]),zt=(0,n.useMemo)(()=>Object.values(Ct).some(wt=>wt.state===K.Gu.Loading),[Ct]);return{queryPreviewData:Ct,runQueries:Nt,cancelQueries:Xe,isPreviewLoading:zt,clearPreviewData:nt}}const sn=({editingExistingRule:Ct,onDataChange:Re})=>{const{setValue:Te,getValues:nt,watch:Xe,formState:{errors:Nt},control:zt}=(0,c.Gc)(),{queryPreviewData:wt,runQueries:on,cancelQueries:qt,isPreviewLoading:un,clearPreviewData:tn}=Vt(),yt={queries:nt("queries")},[{queries:jn},ra]=(0,n.useReducer)(Gt,yt),[Da,Ea,ba]=Xe(["type","condition","dataSourceName"]),$n=Da===x.$.grafana,zn=Da===x.$.cloudRecording,ma=Da===x.$.cloudAlerting,fa=Wt(),kn=(0,n.useCallback)(()=>{on(nt("queries"))},[on,nt]);(0,n.useEffect)(()=>{Te("queries",jn,{shouldValidate:!1})},[jn,on,Te]);const ga=(0,ge.P)()===void 0,Fa=(0,n.useMemo)(()=>jn.filter(Ca=>!(0,Mt.j)(Ca.model)),[jn]),bs=(0,n.useMemo)(()=>jn.filter(Ca=>(0,Mt.j)(Ca.model)),[jn]),ir=jn.length===0;(0,n.useEffect)(()=>{const Ca=nt("condition");if(!Ca||x.$.cloudRecording)return;const fs=(0,be.Vp)(wt[Ca]?.series||[]);Re(fs?.message||"")},[wt,nt,Re]);const Gs=(0,n.useCallback)(Ca=>{Ca&&(kn(),Te("condition",Ca))},[kn,Te]),Sr=(0,n.useCallback)((Ca,fs)=>{(0,be.Dr)(jn,fs)||(ra(vr({oldRefId:Ca,newRefId:fs})),Ea===Ca&&Gs(fs))},[Ea,jn,Gs]),Oa=(0,n.useCallback)(Ca=>{Te("queries",Ca,{shouldValidate:!1}),ra(ks(Ca)),ra(Er()),Ca.forEach((fs,Ms)=>{const Vr=jn[Ms].refId,Ss=fs.refId;Vr!==Ss&&ra(us({oldRefId:Vr,newRefId:Ss}))})},[jn,Te]),Rr=(0,n.useCallback)(Ca=>{const fs=Ca[0],Ms=(0,L.F)().getInstanceSettings(fs.datasourceUid);if(!Ms)throw new Error("The Data source has not been defined.");if(!(0,b.tO)(fs.model))return;const Vr=fs.model.expr;Te("queries",Ca,{shouldValidate:!1}),Te("dataSourceName",Ms.name),Te("expression",Vr),ra(ms({recordingRuleQueries:Ca,expression:Vr})),kn()},[kn,Te]),Es=fa[0];(0,n.useEffect)(()=>{if(tn(),Da===x.$.cloudRecording){const Ca=nt("expression"),Ms={refId:"A",datasourceUid:Ct&&(0,L.F)().getInstanceSettings(ba)?.uid||Es.uid,queryType:"",relativeTimeRange:(0,re.Rr)(),expr:Ca,model:{refId:"A",hide:!1,expr:Ca}};ra(ms({recordingRuleQueries:[Ms],expression:Ca}))}},[Da,Es,Ct,nt,ba,tn]);const ys=(0,n.useCallback)(Ca=>{ra(or(Ca))},[]);return(0,n.useEffect)(()=>{if(!(0,be.Dr)(jn,Ea)){const Ca=jn.at(-1)?.refId??null;Gs(Ca)}},[Ea,jn,Gs]),n.createElement(dt.z,{stepNo:2,title:"Set a query and alert condition"},n.createElement(mr,{editingExistingRule:Ct}),zn&&ba&&n.createElement(r.g,{error:Nt.expression?.message,invalid:!!Nt.expression?.message},n.createElement(sa,{dataSourceName:ba,queries:jn,runQueries:kn,onChangeQuery:Rr,panelData:wt})),ma&&ba&&n.createElement(r.g,{error:Nt.expression?.message,invalid:!!Nt.expression?.message},n.createElement(S.g,{name:"expression",render:({field:{ref:Ca,...fs}})=>n.createElement(_t,{...fs,dataSourceName:ba,showPreviewAlertsButton:!zn}),control:zt,rules:{required:{value:!0,message:"A valid expression is required"}}})),$n&&n.createElement(ut.Stack,{direction:"column"},n.createElement(Ba,{queries:Fa,expressions:bs,onRunQueries:kn,onChangeQueries:Oa,onDuplicateQuery:ys,panelData:wt,condition:Ea,onSetCondition:Gs}),n.createElement(rn,{queries:jn,panelData:wt,condition:Ea,onSetCondition:Gs,onRemoveExpression:Ca=>{ra(hr(Ca))},onUpdateRefId:Sr,onUpdateExpressionType:(Ca,fs)=>{ra(_s({refId:Ca,type:fs}))},onUpdateQueryExpression:Ca=>{ra(qs(Ca))}}),n.createElement(ut.Stack,{direction:"row"},n.createElement(ve.u,{content:"You appear to have no compatible data sources",show:ga},n.createElement(m.zx,{type:"button",icon:"plus",onClick:()=>{ra(gr())},variant:"secondary","aria-label":Je.wl.components.QueryTab.addQuery,disabled:ga},"Add query")),i.v.expressionsEnabled&&n.createElement(m.zx,{type:"button",icon:"plus",onClick:()=>{ra(pr())},variant:"secondary"},"Add expression"),un&&n.createElement(m.zx,{icon:"fa fa-spinner",type:"button",variant:"destructive",onClick:qt},"Cancel"),!un&&n.createElement(m.zx,{icon:"sync",type:"button",onClick:kn,disabled:ir},"Preview")),ir&&n.createElement(V.b,{title:"No queries or expressions have been configured",severity:"warning"},"Create at least one query or expression to be alerted on")))},en={message:"Recording rule name must be valid metric name. It may only contain letters, numbers, and colons. It may not contain whitespace.",value:/^[a-zA-Z_:][a-zA-Z0-9_:]*$/},vn=()=>{const Ct=(0,u.wW)(Xn),{register:Re,watch:Te,formState:{errors:nt}}=(0,c.Gc)(),Xe=Te("type");return n.createElement(dt.z,{stepNo:1,title:"Set an alert rule name"},n.createElement(r.g,{className:Ct.formInput,label:"Rule name",description:"Name for the alert rule.",error:nt?.name?.message,invalid:!!nt.name?.message},n.createElement(d.I,{id:"name",...Re("name",{required:{value:!0,message:"Must enter an alert name"},pattern:Xe===x.$.cloudRecording?en:void 0}),placeholder:"Give your alert rule a name."})))},On="1m",yn=({existing:Ct,prefill:Re})=>{const Te=(0,u.wW)(Xn),nt=(0,C.useDispatch)(),Xe=(0,y.iG)(),[Nt]=(0,h.K)(),[zt,wt]=(0,n.useState)(!1),[on,qt]=(0,n.useState)(Ct?.group.interval??On),un=Nt.returnTo??"/alerting/list",[tn,yt]=(0,n.useState)(!1),jn=(0,n.useMemo)(()=>Ct?(0,b.DQ)(Ct):Re?{...(0,b.uZ)(),...Re}:{...(0,b.uZ)(),queries:(0,b.s0)(),condition:"C",...Nt.defaults?JSON.parse(Nt.defaults):{},type:x.$.grafana,evaluateEvery:on},[Ct,Re,Nt,on]),ra=(0,c.cI)({mode:"onSubmit",defaultValues:jn,shouldFocusError:!0}),{handleSubmit:Da,watch:Ea}=ra,ba=Ea("type"),$n=Ea("dataSourceName"),zn=Boolean(ba&&(ba===x.$.grafana||!!$n)),ma=(0,P._)(Oa=>Oa.ruleForm.saveRule)||M.oq;(0,E.x)(Oa=>Oa.unifiedAlerting.ruleForm.saveRule=M.oq);const[fa,kn]=(0,n.useState)(""),ga=(Oa="")=>{kn(Oa)},Fa=(Oa,Rr)=>{if(fa!==""){Xe.error(fa);return}nt((0,D.wy)({values:{...jn,...Oa,annotations:Oa.annotations?.map(({key:Es,value:ys})=>({key:Es.trim(),value:ys.trim()})).filter(({key:Es,value:ys})=>!!Es&&!!ys)??[],labels:Oa.labels?.map(({key:Es,value:ys})=>({key:Es.trim(),value:ys.trim()})).filter(({key:Es})=>!!Es)??[]},existing:Ct,redirectOnSave:Rr?un:void 0,initialAlertRuleName:jn.name,evaluateEvery:on}))},bs=()=>{if(Ct){const Oa=R.Zk(Ct.ruleSourceName,Ct.namespace,Ct.group.name,Ct.rule);nt((0,D.hS)(Oa,{navigateTo:"/alerting/list"}))}},ir=Oa=>{Ct||(0,a.Z0)({grafana_version:i.v.buildInfo.version,org_id:v.Vt.user.orgId,user_id:v.Vt.user.id,error:Object.keys(Oa).toString()}),Xe.error("There are errors in the form. Please correct them and try again!")},Gs=()=>{(0,f.PN)(a.z7.cancelSavingAlertRule),Ct||(0,a.Hc)({grafana_version:i.v.buildInfo.version,org_id:v.Vt.user.orgId,user_id:v.Vt.user.id})},Sr=Ea("evaluateEvery");return(0,n.useEffect)(()=>qt(Sr),[Sr]),n.createElement(c.RV,{...ra},n.createElement("form",{onSubmit:Oa=>Oa.preventDefault(),className:Te.form},n.createElement(o.Lh,{height:"auto",justify:"flex-end"},n.createElement(m.zx,{variant:"primary",type:"button",onClick:Da(Oa=>Fa(Oa,!1),ir),disabled:ma.loading},ma.loading&&n.createElement(l.$,{className:Te.buttonSpinner,inline:!0}),"Save rule"),n.createElement(m.zx,{variant:"primary",type:"button",onClick:Da(Oa=>Fa(Oa,!0),ir),disabled:ma.loading},ma.loading&&n.createElement(l.$,{className:Te.buttonSpinner,inline:!0}),"Save rule and exit"),n.createElement(s.Link,{to:un},n.createElement(m.zx,{variant:"secondary",disabled:ma.loading,type:"button",onClick:Gs},"Cancel")),Ct?n.createElement(m.zx,{variant:"destructive",type:"button",onClick:()=>yt(!0)},"Delete"):null,bn(Ea)&&n.createElement(m.zx,{variant:"secondary",type:"button",onClick:()=>wt(!0),disabled:ma.loading},"Edit YAML")),n.createElement("div",{className:Te.contentOuter},n.createElement(p.$,{autoHeightMin:"100%",hideHorizontalTrack:!0},n.createElement("div",{className:Te.contentInner},n.createElement(vn,null),n.createElement(sn,{editingExistingRule:!!Ct,onDataChange:ga}),zn&&n.createElement(n.Fragment,null,ba===x.$.grafana?n.createElement(vt.wO,{evaluateEvery:on,setEvaluateEvery:qt,existing:Boolean(Ct)}):n.createElement(Oe,null),n.createElement(ht,null),n.createElement(ie,null)))))),tn?n.createElement(g.s,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:bs,onDismiss:()=>yt(!1)}):null,zt?n.createElement(gt,{onClose:()=>wt(!1)}):null)},bn=Ct=>{const[Re,Te]=Ct(["type","dataSourceName"]);return(Re===x.$.cloudAlerting||Re===x.$.cloudRecording)&&Te!==""},Xn=Ct=>({buttonSpinner:t.css`
      margin-right: ${Ct.spacing(1)};
    `,form:t.css`
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    `,contentInner:t.css`
      flex: 1;
      padding: ${Ct.spacing(2)};
    `,contentOuter:t.css`
      background: ${Ct.colors.background.primary};
      border: 1px solid ${Ct.colors.border.weak};
      border-radius: ${Ct.shape.borderRadius()};
      overflow: hidden;
      flex: 1;
      margin-top: ${Ct.spacing(1)};
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;
    `,formInput:t.css`
      width: 275px;

      & + & {
        margin-left: ${Ct.spacing(3)};
      }
    `})},16808:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>L});var t=e(9892),n=e(39493),c=e(66111),s=e(66698),i=e(95831),f=e(26418),u=e(72648),r=e(64353),d=e(46967),o=e(97379),m=e(24799),l=e(63619),p=e(31403),g=e(37190),y=e(8581);const v=({value:V,onChange:H,options:j,className:A,placeholder:_,width:k,custom:Q,onCustomChange:re,disabled:Z=!1,addLabel:oe="+ Add new","aria-label":G,getOptionLabel:le})=>{const[ge,ne]=(0,c.useState)(Q);(0,c.useEffect)(()=>{ne(Q)},[Q]);const ue=(0,c.useMemo)(()=>[...j,{value:"__add__",label:oe}],[j,oe]),te=(0,c.useRef)(null);return(0,c.useEffect)(()=>{te.current&&ge&&te.current.focus()},[ge]),ge?c.createElement(d.I,{"aria-label":G,width:k,autoFocus:!Q,value:V||"",placeholder:_,className:A,disabled:Z,ref:te,onChange:me=>H(me.currentTarget.value)}):c.createElement(y.Ph,{"aria-label":G,width:k,options:ue,value:V,className:A,placeholder:_,getOptionLabel:le,disabled:Z,onChange:me=>{const q=me?.value;q==="__add__"?(ne(!0),re&&re(!0),H("")):H(q)}})},E=({value:V,existingKeys:H,"aria-label":j,...A})=>{const _=(0,c.useMemo)(()=>Object.values(g.q6).filter(k=>!H.includes(k)).map(k=>({value:k,label:g.vY[k]})),[H]);return c.createElement(v,{"aria-label":j,value:V,options:_,custom:!!V&&!Object.values(g.q6).includes(V),...A})};var h=e(93006),C=e(89050),a=e(32436),P=e(39904),D=e(61860),x=e(35029),M=e(45253),b=e(14747),R=e(61744),S=e(29427);const O=S.C.injectEndpoints({endpoints:V=>({search:V.query({query:({query:H})=>{const j=new URLSearchParams({type:"dash-db",limit:"1000",page:"1",sort:"name_sort"});return H&&j.set("query",H),{url:`/api/search?${j.toString()}`}}}),dashboard:V.query({query:({uid:H})=>({url:`/api/dashboards/uid/${H}`})})})});function U(V,H){return V.title&&H.title?V.title.localeCompare(H.title):V.title&&!H.title?1:!V.title&&H.title?-1:0}const I=({dashboardUid:V,panelId:H,isOpen:j,onChange:A,onDismiss:_})=>{const k=(0,u.wW)(F),[Q,re]=(0,c.useState)(V),[Z,oe]=(0,c.useState)(H),[G,le]=(0,c.useState)(""),[ge,ne]=(0,c.useState)(""),[ue,te]=(0,c.useState)(""),{useSearchQuery:me,useDashboardQuery:q}=O,{currentData:se=[],isFetching:ae}=me({query:ge}),{currentData:pe,isFetching:de}=q({uid:Q??""},{skip:!Q}),Me=(0,c.useCallback)(ye=>{re(ye),oe(void 0)},[]),Ke=pe?.dashboard?.panels?.filter(ye=>typeof ye.id=="number"&&typeof ye.type=="string")?.filter(ye=>ye.title?.toLowerCase().includes(ue.toLowerCase())).sort(U)??[],st=pe?.dashboard?.panels?.find(ye=>ye.id.toString()===Z),Ie=(0,c.useMemo)(()=>se.map(ye=>ye.uid).indexOf(Q??""),[se,Q]),Ve=V&&V===Q,_e=Ie>=0,tt=(0,c.useCallback)(ye=>{const Pe=Ie>=0;Ve&&Pe&&ye?.scrollToItem(Ie,"smart")},[Ve,Ie]);(0,h.Z)(()=>{ne(G)},500,[G]);const dt=({index:ye,style:Pe})=>{const be=se[ye],Be=Q===be.uid;return c.createElement("button",{type:"button",title:be.title,style:Pe,className:(0,t.cx)(k.rowButton,{[k.rowOdd]:ye%2===1,[k.rowSelected]:Be}),onClick:()=>Me(be.uid)},c.createElement("div",{className:(0,t.cx)(k.dashboardTitle,k.rowButtonTitle)},be.title),c.createElement("div",{className:k.dashboardFolder},c.createElement(P.J,{name:"folder"})," ",be.folderTitle??"General"))},Oe=({index:ye,style:Pe})=>{const be=Ke[ye],Be=be.title||"<No title>",ze=Z===be.id.toString(),lt=be.type==="graph"||be.type==="timeseries";return c.createElement("button",{type:"button",style:Pe,className:(0,t.cx)(k.rowButton,k.panelButton,{[k.rowOdd]:ye%2===1,[k.rowSelected]:ze}),onClick:()=>oe(be.id.toString())},c.createElement("div",{className:k.rowButtonTitle,title:Be},Be),!lt&&c.createElement(D.u,{content:"Alert tab will be disabled for this panel. It is only supported on graph and timeseries panels"},c.createElement(P.J,{name:"exclamation-triangle",className:k.warnIcon,"data-testid":"warning-icon"})))};return c.createElement(x.u,{title:"Select dashboard and panel",closeOnEscape:!0,isOpen:j,onDismiss:_,className:k.modal,contentClassName:k.modalContent},!_e&&V&&c.createElement(M.b,{title:"Current selection",severity:"info",topSpacing:0,bottomSpacing:1,className:k.modalAlert},c.createElement("div",null,"Dashboard: ",pe?.dashboard.title," (",pe?.dashboard.uid,") in folder"," ",pe?.meta.folderTitle??"General"),Boolean(st)&&c.createElement("div",null,"Panel: ",st.title," (",st.id,")")),c.createElement("div",{className:k.container},c.createElement(b.H,{value:G,onChange:le,title:"Search dashboard",placeholder:"Search dashboard",autoFocus:!0}),c.createElement(b.H,{value:ue,onChange:te,title:"Search panel",placeholder:"Search panel"}),c.createElement("div",{className:k.column},ae&&c.createElement(R.u,{text:"Loading dashboards...",className:k.loadingPlaceholder}),!ae&&c.createElement(C.Z,null,({height:ye,width:Pe})=>c.createElement(a.t7,{ref:tt,itemSize:50,height:ye,width:Pe,itemCount:se.length},dt))),c.createElement("div",{className:k.column},!Q&&!de&&c.createElement("div",{className:k.selectDashboardPlaceholder},c.createElement("div",null,"Select a dashboard to get a list of available panels")),de&&c.createElement(R.u,{text:"Loading dashboard...",className:k.loadingPlaceholder}),Q&&!de&&c.createElement(C.Z,null,({width:ye,height:Pe})=>c.createElement(a.t7,{itemSize:32,height:Pe,width:ye,itemCount:Ke.length},Oe)))),c.createElement(x.u.ButtonRow,null,c.createElement(p.zx,{type:"button",variant:"primary",disabled:!(Q&&Z),onClick:()=>{Q&&Z&&A(Q,Z)}},"Confirm"),c.createElement(p.zx,{type:"button",variant:"secondary",onClick:_},"Cancel")))},F=V=>{const H=(0,p.gN)(V);return{container:t.css`
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: min-content auto;
      gap: ${V.spacing(2)};
      flex: 1;
    `,column:t.css`
      flex: 1 1 auto;
    `,dashboardTitle:t.css`
      height: 22px;
      font-weight: ${V.typography.fontWeightBold};
    `,dashboardFolder:t.css`
      height: 20px;
      font-size: ${V.typography.bodySmall.fontSize};
      color: ${V.colors.text.secondary};
      display: flex;
      flex-direction: row;
      justify-content: flex-start;
      column-gap: ${V.spacing(1)};
      align-items: center;
    `,rowButton:t.css`
      ${H};
      padding: ${V.spacing(.5)};
      overflow: hidden;
      text-overflow: ellipsis;
      text-align: left;
      white-space: nowrap;
      cursor: pointer;
      border: 2px solid transparent;

      &:disabled {
        cursor: not-allowed;
        color: ${V.colors.text.disabled};
      }
    `,rowButtonTitle:t.css`
      text-overflow: ellipsis;
      overflow: hidden;
    `,rowSelected:t.css`
      border-color: ${V.colors.primary.border};
    `,rowOdd:t.css`
      background-color: ${V.colors.background.secondary};
    `,panelButton:t.css`
      display: flex;
      gap: ${V.spacing(1)};
      justify-content: space-between;
      align-items: center;
    `,loadingPlaceholder:t.css`
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    `,selectDashboardPlaceholder:t.css`
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      text-align: center;
      font-weight: ${V.typography.fontWeightBold};
    `,modal:t.css`
      height: 100%;
    `,modalContent:t.css`
      flex: 1;
      display: flex;
      flex-direction: column;
    `,modalAlert:t.css`
      flex-grow: 0;
    `,warnIcon:t.css`
      fill: ${V.colors.warning.main};
    `}},w=()=>{const V=(0,u.wW)(K),[H,j]=(0,i.Z)(!1),{control:A,register:_,watch:k,formState:{errors:Q},setValue:re}=(0,s.Gc)(),Z=k("annotations"),oe=(0,c.useCallback)(me=>Z.filter((q,se)=>se!==me).map(({key:q})=>q),[Z]),{fields:G,append:le,remove:ge}=(0,s.Dq)({control:A,name:"annotations"}),ne=Z.find(me=>me.key===g.q6.dashboardUID)?.value,ue=Z.find(me=>me.key===g.q6.panelID)?.value,te=(me,q)=>{const se=(0,n.ZP)(Z,ae=>{const pe=ae.find(Me=>Me.key===g.q6.dashboardUID),de=ae.find(Me=>Me.key===g.q6.panelID);pe?pe.value=me:ae.push({key:g.q6.dashboardUID,value:me}),de?de.value=q:ae.push({key:g.q6.panelID,value:q})});re("annotations",se),j(!1)};return c.createElement(c.Fragment,null,c.createElement(r._,null,"Summary and annotations"),c.createElement("div",{className:V.flexColumn},G.map((me,q)=>{const se=Z[q]?.key?.toLocaleLowerCase().endsWith("url"),ae=se?d.I:o.K;return c.createElement("div",{key:me.id,className:V.flexRow},c.createElement(m.g,{className:V.field,invalid:!!Q.annotations?.[q]?.key?.message,error:Q.annotations?.[q]?.key?.message,"data-testid":`annotation-key-${q}`},c.createElement(l.g,{name:`annotations.${q}.key`,defaultValue:me.key,render:({field:{ref:pe,...de}})=>c.createElement(E,{...de,"aria-label":`Annotation detail ${q+1}`,existingKeys:oe(q),width:18}),control:A,rules:{required:{value:!!Z[q]?.value,message:"Required."}}})),c.createElement(m.g,{className:(0,t.cx)(V.flexRowItemMargin,V.field),invalid:!!Q.annotations?.[q]?.value?.message,error:Q.annotations?.[q]?.value?.message},c.createElement(ae,{"data-testid":`annotation-value-${q}`,className:(0,t.cx)(V.annotationValueInput,{[V.textarea]:!se}),..._(`annotations.${q}.value`),placeholder:se?"https://":"Text",defaultValue:me.value})),c.createElement(p.zx,{type:"button",className:V.flexRowItemMargin,"aria-label":"delete annotation",icon:"trash-alt",variant:"secondary",onClick:()=>ge(q)}))}),c.createElement(f.Stack,{direction:"row",gap:1},c.createElement(p.zx,{className:V.addAnnotationsButton,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{le({key:"",value:""})}},"Add annotation"),c.createElement(p.zx,{type:"button",variant:"secondary",icon:"dashboard",onClick:()=>j(!0)},"Set dashboard and panel")),H&&c.createElement(I,{isOpen:!0,dashboardUid:ne,panelId:ue,onChange:te,onDismiss:()=>j(!1)})))},K=V=>({annotationValueInput:t.css`
    width: 394px;
  `,textarea:t.css`
    height: 76px;
  `,addAnnotationsButton:t.css`
    flex-grow: 0;
    align-self: flex-start;
    margin-left: 148px;
  `,flexColumn:t.css`
    display: flex;
    flex-direction: column;
  `,field:t.css`
    margin-bottom: ${V.spacing(.5)};
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
  `,flexRowItemMargin:t.css`
    margin-left: ${V.spacing(.5)};
  `}),L=w},56412:(Y,T,e)=>{"use strict";e.d(T,{wO:()=>q,Xr:()=>le});var t=e(9892),n=e(66111),c=e(66698),s=e(26418),i=e(72648),f=e(24799),u=e(77117),r=e(46967),d=e(31403),o=e(63619),m=e(8944),l=e(61860),p=e(39904),g=e(41904),y=e(61627),v=e(69945),E=e(45849),h=e(20383),C=e(33950),a=e(61068),P=e(32139),D=e(82897),x=e(64353),M=e(8581),b=e(19985),R=e(77582),S=e(27876),O=e(72004),U=e(79662),I=e(63613),F=e(79658);const w=()=>{const ae=(0,i.wW)(V),pe=()=>window.open("https://github.com/grafana/grafana/issues/42947","_blank");return n.createElement(s.Stack,{gap:.5},n.createElement("div",{className:ae.slashNotAllowed},"Folders with '/' character are not allowed."),n.createElement(l.u,{placement:"top",content:"Link to the Github issue",theme:"info"},n.createElement(p.J,{name:"info-circle",size:"xs",className:ae.infoIcon,onClick:pe})))},K=ae=>ae.indexOf("/")!==-1;function L(ae){const{value:pe}=ae,Me={warningCondition:st=>K(st),warningComponent:w},Ke={disallowValues:!0,isAllowedValue:st=>!K(st)};return n.createElement(F.Es,{showRoot:!1,rootName:"",allowEmpty:!0,initialTitle:pe?.title,initialFolderUid:pe?.uid,searchQueryType:S.SearchQueryType.AlertFolder,...ae,permissionLevel:S.PermissionLevelString.Edit,customAdd:Ke,folderWarning:Me})}const V=ae=>({slashNotAllowed:t.css`
    color: ${ae.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
  `,infoIcon:t.css`
    color: ${ae.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
    cursor: pointer;
  `});var H=e(20700);const j=1e3,A=ae=>{const pe=(0,S.useDispatch)();(0,n.useEffect)(()=>{pe((0,O.UR)({rulesSourceName:E.GC}))},[pe]);const Me=(0,v._)(_e=>_e.rulerRules)[E.GC];return{groupOptions:((0,y.Zo)(E.GC).find(_e=>_e.name===ae)?.groups??[]).filter(_e=>_e.rules.every(tt=>(0,U.Pc)(tt.rulerRule)&&Boolean(tt.rulerRule.grafana_alert.provenance)===!1)).map(_e=>({label:_e.name,value:_e.name,description:_e.interval??P.E})),loading:Me?.loading}},_=(ae,pe)=>ae.label?.toLowerCase().includes(pe.toLowerCase());function k(){const{formState:{errors:ae},watch:pe,setValue:de,control:Me}=(0,c.Gc)(),Ke=(0,i.wW)(Q),st=pe("folder"),Ie=pe("group"),{groupOptions:Ve,loading:_e}=A(st?.title??""),tt=(0,n.useCallback)(()=>{de("group","")},[de]),dt=(0,n.useCallback)(async Pe=>{const be=Pe?Ve.filter(Be=>_(Be,Pe)):Ve;return(0,D.take)(be,j)},[Ve]),Oe=(0,n.useMemo)(()=>(0,D.debounce)(dt,300,{leading:!0}),[dt]),ye=Ie?{value:Ie,label:Ie}:void 0;return n.createElement("div",{className:Ke.container},n.createElement(f.g,{label:n.createElement(x._,{htmlFor:"folder",description:"Select a folder for your rule."},n.createElement(s.Stack,{gap:.5},"Folder",n.createElement(I.s,{text:"Each folder has unique folder permission. When you store multiple rules in a folder, the folder access permissions are assigned to the rules."}))),className:Ke.formInput,error:ae.folder?.message,invalid:!!ae.folder?.message,"data-testid":"folder-picker"},n.createElement(o.g,{render:({field:{ref:Pe,...be}})=>n.createElement(L,{inputId:"folder",...be,enableCreateNew:R.Vt.hasPermission(S.AccessControlAction.FoldersCreate),enableReset:!0,onChange:({title:Be,uid:ze})=>{be.onChange({title:Be,uid:ze}),tt()}}),name:"folder",rules:{required:{value:!0,message:"Select a folder"},validate:{pathSeparator:Pe=>(0,H.p0)(Pe.title)}}})),n.createElement(f.g,{label:"Evaluation group (interval)","data-testid":"group-picker",description:"Select a group to evaluate all rules in the same group over the same time interval.",className:Ke.formInput,error:ae.group?.message,invalid:!!ae.group?.message},n.createElement(o.g,{render:({field:{ref:Pe,...be},fieldState:Be})=>n.createElement(M.qb,{disabled:!st||_e,inputId:"group",key:(0,D.uniqueId)(),...be,onChange:ze=>{be.onChange(ze.label??"")},isLoading:_e,invalid:Boolean(st)&&!Ie&&Boolean(Be.error),loadOptions:Oe,cacheOptions:!0,loadingMessage:"Loading groups...",defaultValue:ye,defaultOptions:Ve,getOptionLabel:ze=>n.createElement("div",null,n.createElement("span",null,ze.label),ze.isDisabled&&n.createElement(n.Fragment,null," ",n.createElement(b.C,{color:"purple",text:"Provisioned"}))),placeholder:"Evaluation group name",allowCustomValue:!0,formatCreateLabel:ze=>"+ Add new ",noOptionsMessage:"Start typing to create evaluation group"}),name:"group",control:Me,rules:{required:{value:!0,message:"Must enter a group name"},validate:{pathSeparator:Pe=>(0,H.p0)(Pe)}}})))}const Q=ae=>({container:t.css`
    display: flex;
    flex-direction: row;
    align-items: baseline;
    max-width: ${ae.breakpoints.values.sm}px;
    justify-content: space-between;
  `,formInput:t.css`
    width: 275px;
    & + & {
      margin-left: ${ae.spacing(3)};
    }
  `});var re=e(46063);const Z=[{value:re.g0.Alerting,label:"Alerting"},{value:re.g0.NoData,label:"No Data"},{value:re.g0.OK,label:"OK"},{value:re.g0.Error,label:"Error"}],oe=({includeNoData:ae,includeError:pe,...de})=>{const Me=(0,n.useMemo)(()=>ae?pe?Z:Z.filter(Ke=>Ke.value!==re.g0.Error):Z.filter(Ke=>Ke.value!==re.g0.NoData),[ae,pe]);return n.createElement(M.Ph,{options:Me,...de})};var G=e(36894);const le=10,ge=ae=>({required:{value:!0,message:"Required."},validate:pe=>{if(pe==="0")return!0;try{const de=(0,h.nd)(pe);if(de===0)return!0;try{const Me=(0,h.nd)(ae);return de>=Me?!0:"For duration must be greater than or equal to the evaluation interval."}catch{return!0}}catch(de){return de instanceof Error?de.message:"Failed to parse duration"}}}),ne=(ae,pe)=>{const{groupOptions:de}=A(ae);return!(0,n.useCallback)(Ke=>de.some(st=>st.label===Ke),[de])(pe)},ue=({rules:ae})=>{const{watch:pe,register:de,formState:{errors:Me}}=(0,c.Gc)(),Ke=(0,i.wW)(se),st="eval-every-input",[Ie,Ve]=pe(["group","folder.title"]),_e=(ae&&ae[Ve]?.find(tt=>tt.name===Ie)?.rules)??[];return n.createElement(f.g,{label:"Evaluation interval",description:"Applies to every rule within a group. It can overwrite the interval of an existing alert rule."},n.createElement("div",{className:Ke.alignInterval},n.createElement(s.Stack,{direction:"row","justify-content":"left","align-items":"baseline",gap:0},n.createElement(u.W,{htmlFor:st,width:16,tooltip:"How often the alert will be evaluated to see if it fires"},"Evaluate every"),n.createElement(f.g,{className:Ke.inlineField,error:Me.evaluateEvery?.message,invalid:!!Me.evaluateEvery,validationMessageHorizontalOverflow:!0},n.createElement(r.I,{id:st,width:8,...de("evaluateEvery",(0,a.MD)(_e))})))))};function te({evaluateEvery:ae,setEvaluateEvery:pe}){const de=(0,i.wW)(se),{watch:Me,setValue:Ke}=(0,c.Gc)(),[st,Ie]=(0,n.useState)(!1),[Ve,_e]=Me(["group","folder.title"]),dt=(0,v._)(bt=>bt.rulerRules)[E.GC],ye=(0,y.Zo)(E.GC).find(bt=>bt.name===_e),Pe=ye?.groups.find(bt=>bt.name===Ve),be=ne(_e??"",Ve);(0,n.useEffect)(()=>{!be&&Pe?.interval?pe(Pe.interval):(pe(P.E),Ke("evaluateEvery",P.E))},[pe,be,Ke,Pe]);const Be=(bt=!1)=>{bt||(0,g.PN)(g.z7.leavingRuleGroupEdit),Ie(!1)},ze=()=>Ie(!0),lt=dt?.loading||be||!_e||!Ve,ht={name:_e,rulesSource:E.GC,groups:[]},vt={name:Ve,interval:ae,rules:[],totals:{}};return n.createElement("div",null,n.createElement(k,null),_e&&st&&n.createElement(a.vq,{namespace:ye??ht,group:Pe??vt,onClose:()=>Be(),intervalEditOnly:!0}),_e&&Ve&&n.createElement("div",{className:de.evaluationContainer},n.createElement(s.Stack,{direction:"column",gap:0},n.createElement("div",{className:de.marginTop},be&&Ve?n.createElement(ue,{rules:dt?.result}):n.createElement(s.Stack,{direction:"column",gap:1},n.createElement("div",{className:de.evaluateLabel},"Alert rules in the "," ",n.createElement("span",{className:de.bold},Ve)," group are evaluated every"," ",n.createElement("span",{className:de.bold},ae),"."),!be&&n.createElement("div",null,"Evaluation group interval applies to every rule within a group. It overwrites intervals defined for existing alert rules."))),n.createElement(s.Stack,{direction:"row","justify-content":"right","align-items":"center"},!be&&n.createElement("div",{className:de.marginTop},n.createElement(d.zx,{icon:"edit",type:"button",variant:"secondary",disabled:lt,onClick:ze},n.createElement("span",null,"Edit evaluation group")))))))}function me({evaluateEvery:ae}){const pe=(0,i.wW)(se),{register:de,formState:{errors:Me}}=(0,c.Gc)(),Ke="eval-for-input";return n.createElement(s.Stack,{direction:"row","justify-content":"flex-start","align-items":"flex-start"},n.createElement(u.W,{htmlFor:Ke,width:7,tooltip:'Once the condition is breached, the alert goes into pending state. If the alert is pending longer than the "for" value, it becomes a firing alert.'},"for"),n.createElement(f.g,{className:pe.inlineField,error:Me.evaluateFor?.message,invalid:!!Me.evaluateFor?.message,validationMessageHorizontalOverflow:!0},n.createElement(r.I,{id:Ke,width:8,...de("evaluateFor",ge(ae))})))}function q({evaluateEvery:ae,setEvaluateEvery:pe,existing:de}){const Me=(0,i.wW)(se),[Ke,st]=(0,n.useState)(!1),{watch:Ie,setValue:Ve}=(0,c.Gc)(),_e=Ie("isPaused");return n.createElement(G.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(s.Stack,{direction:"column","justify-content":"flex-start","align-items":"flex-start"},n.createElement(te,{setEvaluateEvery:pe,evaluateEvery:ae}),n.createElement(me,{evaluateEvery:ae}),de&&n.createElement(f.g,{htmlFor:"pause-alert-switch"},n.createElement(o.g,{render:()=>n.createElement(s.Stack,{gap:1,direction:"row",alignItems:"center"},n.createElement(m.r,{id:"pause-alert",onChange:tt=>{Ve("isPaused",tt.currentTarget.checked)},value:Boolean(_e)}),n.createElement("label",{htmlFor:"pause-alert",className:Me.switchLabel},"Pause evaluation",n.createElement(l.u,{placement:"top",content:"Turn on to pause evaluation for this alert rule.",theme:"info"},n.createElement(p.J,{tabIndex:0,name:"info-circle",size:"sm",className:Me.infoIcon})))),name:"isPaused"}))),n.createElement(C.U,{isCollapsed:!Ke,onToggle:tt=>st(!tt),text:"Configure no data and error handling",className:Me.collapseToggle}),Ke&&n.createElement(n.Fragment,null,n.createElement(f.g,{htmlFor:"no-data-state-input",label:"Alert state if no data or all values are null"},n.createElement(o.g,{render:({field:{onChange:tt,ref:dt,...Oe}})=>n.createElement(oe,{...Oe,inputId:"no-data-state-input",width:42,includeNoData:!0,includeError:!1,onChange:ye=>tt(ye?.value)}),name:"noDataState"})),n.createElement(f.g,{htmlFor:"exec-err-state-input",label:"Alert state if execution error or timeout"},n.createElement(o.g,{render:({field:{onChange:tt,ref:dt,...Oe}})=>n.createElement(oe,{...Oe,inputId:"exec-err-state-input",width:42,includeNoData:!1,includeError:!0,onChange:ye=>tt(ye?.value)}),name:"execErrState"}))))}const se=ae=>({inlineField:t.css`
    margin-bottom: 0;
  `,collapseToggle:t.css`
    margin: ${ae.spacing(2,0,2,-1)};
  `,evaluateLabel:t.css`
    margin-right: ${ae.spacing(1)};
  `,evaluationContainer:t.css`
    background-color: ${ae.colors.background.secondary};
    padding: ${ae.spacing(2)};
    max-width: ${ae.breakpoints.values.sm}px;
    font-size: ${ae.typography.size.sm};
  `,intervalChangedLabel:t.css`
    margin-bottom: ${ae.spacing(1)};
  `,warningIcon:t.css`
    justify-self: center;
    margin-right: ${ae.spacing(1)};
    color: ${ae.colors.warning.text};
  `,infoIcon:t.css`
    margin-left: 10px;
  `,warningMessage:t.css`
    color: ${ae.colors.warning.text};
  `,bold:t.css`
    font-weight: bold;
  `,alignInterval:t.css`
    margin-top: ${ae.spacing(1)};
    margin-left: -${ae.spacing(1)};
  `,marginTop:t.css`
    margin-top: ${ae.spacing(1)};
  `,switchLabel:(0,t.css)(`
    color: ${ae.colors.text.primary},
    cursor: 'pointer',
    fontSize: ${ae.typography.bodySmall.fontSize},
  `)})},19191:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>K});var t=e(9892),n=e(82897),c=e(66111),s=e(66698),i=e(26418),f=e(31403),u=e(72648),r=e(61744),d=e(24799),o=e(77117),m=e(46967),l=e(64353),p=e(61860),g=e(39904),y=e(27876),v=e(69945),E=e(72004),h=e(93900),C=e(8581);const a=(0,h.c)({ignoreCase:!1});function P(L,V){return a({label:L.label??"",value:L.value??"",data:{}},V)}const D=(L,V,H)=>{const j=H.some(_=>_.label===L),A=L.trim().length;return!Boolean(j)&&Boolean(A)},M=c.forwardRef(function({onChange:V,options:H,defaultValue:j,type:A,onOpenMenu:_=()=>{}},k){return c.createElement("div",{ref:k},c.createElement(d.g,{disabled:!1,"data-testid":`alertlabel-${A}-picker`},c.createElement(C.Ph,{placeholder:`Choose ${A}`,width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:V,onOpenMenu:_,filterOption:P,isValidNewOption:D,options:H,maxMenuHeight:500,noOptionsMessage:"No labels found",defaultValue:j,allowCustomValue:!0})))}),b=L=>{const V=(0,y.useDispatch)();(0,c.useEffect)(()=>{V((0,E.IA)(L))},[V,L]);const j=(0,v._)(Q=>Q.rulerRules)[L],A=j?.result||{},_=(0,n.compact)((0,n.flattenDeep)(Object.keys(A).map(Q=>A[Q].map(re=>re.rules.map(Z=>Z.labels))))),k={};return _.forEach(Q=>{Object.entries(Q).forEach(([re,Z])=>{k[re]=[...new Set([...k[re]||[],Z])]})}),{loading:j?.loading,labelsByKey:k}};function R(L=[]){return L.map(V=>({label:V,value:V}))}const S=({remove:L,className:V,index:H})=>c.createElement(f.zx,{className:V,"aria-label":"delete label",icon:"trash-alt","data-testid":`delete-label-${H}`,variant:"secondary",onClick:()=>{L(H)}}),O=({append:L,className:V})=>c.createElement(f.zx,{className:V,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{L({key:"",value:""})}},"Add label"),U=({dataSourceName:L})=>{const V=(0,u.wW)(w),{register:H,control:j,watch:A,formState:{errors:_},setValue:k}=(0,s.Gc)(),Q=A("labels"),{fields:re,remove:Z,append:oe}=(0,s.Dq)({control:j,name:"labels"}),{loading:G,labelsByKey:le}=b(L),[ge,ne]=(0,c.useState)(""),ue=(0,c.useMemo)(()=>R(Object.keys(le)),[le]),te=(0,c.useCallback)(q=>R(le[q]),[le]),me=(0,c.useMemo)(()=>te(ge),[ge,te]);return c.createElement(c.Fragment,null,G&&c.createElement(r.u,{text:"Loading"}),!G&&c.createElement(c.Fragment,null,re.map((q,se)=>c.createElement("div",{key:q.id},c.createElement("div",{className:(0,t.cx)(V.flexRow,V.centerAlignRow)},c.createElement(d.g,{className:V.labelInput,invalid:Boolean(_.labels?.[se]?.key?.message),error:_.labels?.[se]?.key?.message,"data-testid":`label-key-${se}`},c.createElement(M,{...H(`labels.${se}.key`,{required:{value:Boolean(Q[se]?.value),message:"Required."}}),defaultValue:q.key?{label:q.key,value:q.key}:void 0,options:ue,onChange:ae=>{k(`labels.${se}.key`,ae.value),ne(ae.value)},type:"key"})),c.createElement(o.W,{className:V.equalSign},"="),c.createElement(d.g,{className:V.labelInput,invalid:Boolean(_.labels?.[se]?.value?.message),error:_.labels?.[se]?.value?.message,"data-testid":`label-value-${se}`},c.createElement(M,{...H(`labels.${se}.value`,{required:{value:Boolean(Q[se]?.key),message:"Required."}}),defaultValue:q.value?{label:q.value,value:q.value}:void 0,options:me,onChange:ae=>{k(`labels.${se}.value`,ae.value)},onOpenMenu:()=>{ne(Q[se].key)},type:"value"})),c.createElement(S,{className:V.deleteLabelButton,index:se,remove:Z})))),c.createElement(O,{className:V.addLabelButton,append:oe})))},I=()=>{const L=(0,u.wW)(w),{register:V,control:H,watch:j,formState:{errors:A}}=(0,s.Gc)(),_=j("labels"),{fields:k,remove:Q,append:re}=(0,s.Dq)({control:H,name:"labels"});return c.createElement(c.Fragment,null,k.map((Z,oe)=>c.createElement("div",{key:Z.id},c.createElement("div",{className:(0,t.cx)(L.flexRow,L.centerAlignRow),"data-testid":"alertlabel-input-wrapper"},c.createElement(d.g,{className:L.labelInput,invalid:!!A.labels?.[oe]?.key?.message,error:A.labels?.[oe]?.key?.message},c.createElement(m.I,{...V(`labels.${oe}.key`,{required:{value:!!_[oe]?.value,message:"Required."}}),placeholder:"key","data-testid":`label-key-${oe}`,defaultValue:Z.key})),c.createElement(o.W,{className:L.equalSign},"="),c.createElement(d.g,{className:L.labelInput,invalid:!!A.labels?.[oe]?.value?.message,error:A.labels?.[oe]?.value?.message},c.createElement(m.I,{...V(`labels.${oe}.value`,{required:{value:!!_[oe]?.key,message:"Required."}}),placeholder:"value","data-testid":`label-value-${oe}`,defaultValue:Z.value})),c.createElement(S,{className:L.deleteLabelButton,index:oe,remove:Q})))),c.createElement(O,{className:L.addLabelButton,append:re}))},F=({className:L,dataSourceName:V})=>{const H=(0,u.wW)(w);return c.createElement("div",{className:(0,t.cx)(L,H.wrapper)},c.createElement(l._,null,c.createElement(i.Stack,{gap:.5},c.createElement("span",null,"Custom Labels"),c.createElement(p.u,{content:c.createElement("div",null,"The dropdown only displays labels that you have previously used for alerts. Select a label from the dropdown or type in a new one.")},c.createElement(g.J,{className:H.icon,name:"info-circle",size:"sm"})))),c.createElement(c.Fragment,null,c.createElement("div",{className:H.flexRow},c.createElement(o.W,{width:18},"Labels"),c.createElement("div",{className:H.flexColumn},V&&c.createElement(U,{dataSourceName:V}),!V&&c.createElement(I,null)))))},w=L=>({icon:t.css`
      margin-right: ${L.spacing(.5)};
    `,wrapper:t.css`
      margin-bottom: ${L.spacing(4)};
    `,flexColumn:t.css`
      display: flex;
      flex-direction: column;
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;

      & + button {
        margin-left: ${L.spacing(.5)};
      }
    `,deleteLabelButton:t.css`
      margin-left: ${L.spacing(.5)};
      align-self: flex-start;
    `,addLabelButton:t.css`
      flex-grow: 0;
      align-self: flex-start;
    `,centerAlignRow:t.css`
      align-items: baseline;
    `,equalSign:t.css`
      align-self: flex-start;
      width: 28px;
      justify-content: center;
      margin-left: ${L.spacing(.5)};
    `,labelInput:t.css`
      width: 175px;
      margin-bottom: ${L.spacing(1)};
      & + & {
        margin-left: ${L.spacing(1)};
      }
    `}),K=F},36894:(Y,T,e)=>{"use strict";e.d(T,{z:()=>i});var t=e(9892),n=e(66111),c=e(72648),s=e(13393);const i=({title:u,stepNo:r,children:d,description:o})=>{const m=(0,c.wW)(f);return n.createElement("div",{className:m.parent},n.createElement("div",null,n.createElement("span",{className:m.stepNo},r)),n.createElement("div",{className:m.content},n.createElement(s.C,{label:u,className:m.fieldset},o&&n.createElement("p",{className:m.description},o),d)))},f=u=>({fieldset:t.css`
    legend {
      font-size: 16px;
      padding-top: ${u.spacing(.5)};
    }
  `,parent:t.css`
    display: flex;
    flex-direction: row;
    max-width: ${u.breakpoints.values.xl};
    & + & {
      margin-top: ${u.spacing(4)};
    }
  `,description:t.css`
    margin-top: -${u.spacing(2)};
    color: ${u.colors.text.secondary};
  `,stepNo:t.css`
    display: inline-block;
    width: ${u.spacing(4)};
    height: ${u.spacing(4)};
    line-height: ${u.spacing(4)};
    border-radius: 100%;
    text-align: center;
    color: ${u.colors.text.maxContrast};
    background-color: ${u.colors.background.canvas};
    font-size: ${u.typography.size.lg};
    margin-right: ${u.spacing(2)};
  `,content:t.css`
    flex: 1;
  `})},78679:(Y,T,e)=>{"use strict";e.d(T,{l:()=>o});var t=e(9892),n=e(66111),c=e(89050),s=e(19447),i=e(72648),f=e(18271),u=e(56041),r=e(97201),d=e(20700);const o=({data:l,thresholds:p,thresholdsType:g})=>{const y=(0,i.wW)(m),v=(0,s.xI)(l.series),E=(0,d._4)(l),h=g?{mode:g}:void 0,C={from:l.timeRange.from.valueOf(),to:l.timeRange.to.valueOf()};return n.createElement("div",{className:y.wrapper},n.createElement(c.Z,{disableHeight:!0},({width:a})=>n.createElement("div",{style:{width:a}},v?n.createElement(u.F,{statusMessage:E,data:l.series,eventBus:f.Z,height:300,width:a,absoluteRange:C,timeZone:"browser",onChangeTime:()=>{},splitOpenFn:()=>{},loadingState:l.state,thresholdsConfig:p,thresholdsStyle:h}):n.createElement("div",{className:y.instantVectorResultWrapper},n.createElement("header",{className:y.title},"Table"),n.createElement(r.bw,{series:l.series})))))},m=l=>({wrapper:t.css`
    width: 100%;
    position: relative;
  `,instantVectorResultWrapper:t.css`
    border: solid 1px ${l.colors.border.medium};
    border-radius: ${l.shape.borderRadius()};
    padding: 0;

    display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
  `,title:(0,t.css)({label:"panel-title",padding:l.spacing(),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:l.typography.h6.fontSize,fontWeight:l.typography.h6.fontWeight})})},20700:(Y,T,e)=>{"use strict";e.d(T,{p0:()=>D,Vp:()=>x,_4:()=>S,Fu:()=>b,Ry:()=>C,Dr:()=>P,Yq:()=>M});var t=e(19447),n=e(69098),c=e(40538),s=e(85596),i=e(47694),f=e(67162),u=e(75e3),r=e(97573),d=e(82897),o=e(58635),m=e(28630);const l=(0,o.Z)(p,(O,U)=>h(O[0])===h(U[0]));function p(O){const U=new m.kJ,I=O.map(F=>F.refId);return U.createNodes(I),O.forEach(F=>{const w=F.refId;((0,u.j)(F.model)&&F.model.type==="math"?g(F.model.expression??""):[F.model.expression]).forEach(V=>{w&&V&&!(w===V)&&U.link(V,w)})}),U}function g(O){const U=new RegExp(/\$\{(?<var>[a-zA-Z0-9_ ]+?)\}/gm),I=new RegExp(/\$(?<var>[a-zA-Z0-9_]+)/gm),F=Array.from(O.matchAll(U)).map(K=>K.groups?.var),w=Array.from(O.matchAll(I)).map(K=>K.groups?.var);return(0,d.compact)((0,d.uniq)([...F,...w]))}const y=(0,d.memoize)(v,(O,U)=>O+E(U));function v(O,U){const I=U.getNode(O);let F=[];function w(K){const L=K.inputEdges;L.length>0?L.forEach(V=>{V.inputNode&&w(V.inputNode)}):F?.push(K)}return w(I),F.map(K=>K.name)}function E(O){return Object.keys(O.nodes).map(U=>{const I=O.nodes[U];let F=I.outputEdges.map(K=>K.outputNode?.name).join(", "),w=I.inputEdges.map(K=>K.inputNode?.name).join(", ");return`${I.name}:${F}:${w}`}).join(" ")}function h(O){return O.map(U=>{const I=(0,u.j)(U.model)?U.model.type:U.queryType;return U.refId+(U.model.expression??"")+I}).join()}function C(O,U,I){return O.map(F=>{if(U===I||!(0,u.j)(F.model))return F;const w=F.model.type==="math",K=F.model.type==="reduce",L=F.model.type==="resample",V=F.model.type==="classic_conditions",H=F.model.type==="threshold";if(w)return{...F,model:{...F.model,expression:a(F.model.expression??"",U,I)}};if(L||K||H){const j=F.model.expression===U;return{...F,model:{...F.model,expression:j?I:F.model.expression}}}if(V){const j=F.model.conditions?.map(A=>({...A,query:{...A.query,params:A.query.params.map(_=>_===U?I:_)}}));return{...F,model:{...F.model,conditions:j}}}return F})}function a(O,U,I){const F=new RegExp("(\\$"+U+"\\b)|(\\${"+U+"})","gm"),w="${"+I+"}";return O.replace(F,w)}function P(O,U){return O.find(I=>I.refId===U)!==void 0}function D(O){return O.includes("/")||O.includes("\\")?'Cannot contain "/" or "\\" characters':!0}function x(O){if(O.length===0)return;const U=(0,t.xI)(O);let I;return U&&(I=new Error("You cannot use time series data as an alert condition, consider adding a reduce expression.")),I}function M(O){const I=(O[0]?.meta?.notices??[]).find(F=>F.severity==="warning")?.text;return I?new Error(I):void 0}function b(O){const U={},I=[r.Us.threshold,r.Us.classic];for(const K of O){if(!(0,u.j)(K.model)||!I.includes(K.model.type)||!Array.isArray(K.model.conditions))continue;const L=K.model.conditions.some(R);K.model.conditions.forEach(V=>{const H=V.evaluator.params,j=V.query?.params[0]??K.model.expression;if(!j)return;const A=R(V);try{const _=l(O),k=y(j,_);O.filter(re=>k.includes(re.refId)).forEach(re=>{const Z=re.refId,oe=!(0,u.j)(re?.model),G=Boolean(oe&&Z);Z&&!U[Z]&&(U[Z]={config:{mode:n.H.Absolute,steps:[]},mode:c.i3.Line}),Z&&G&&!A&&!L?F(Z,H[0]):Z&&G&&A&&(w(Z,H,V.evaluator.type),U[Z].mode=c.i3.LineAndArea)})}catch(_){console.error("Failed to parse thresholds",_);return}})}function F(K,L){U[K].config.steps.push({value:-1/0,color:"transparent"},{value:L,color:i.vc.theme2.colors.error.main})}function w(K,L,V){V===f.$.IsWithinRange&&U[K].config.steps.push({value:-1/0,color:"transparent"},{value:L[0],color:i.vc.theme2.colors.error.main},{value:L[1],color:i.vc.theme2.colors.error.main},{value:L[1],color:"transparent"}),V===f.$.IsOutsideRange&&U[K].config.steps.push({value:-1/0,color:i.vc.theme2.colors.error.main},{value:L[0],color:i.vc.theme2.colors.error.main},{value:L[0],color:"transparent"},{value:L[1],color:i.vc.theme2.colors.error.main}),U[K].config.steps.sort((H,j)=>H.value-j.value),U[K].config.steps=U[K].config.steps.filter(H=>H.value!==void 0)}return U}function R(O){return O.evaluator.type===f.$.IsWithinRange||O.evaluator.type===f.$.IsOutsideRange}function S(O){const U="Failed to fetch data";if(O.state!==s.Gu.Error)return;const I=O.errors;return I?.length?I.map(F=>F.message??U).join(", "):O.error?.message??U}},48563:(Y,T,e)=>{"use strict";e.d(T,{o:()=>m});var t=e(66111),n=e(67483),c=e(79662),s=e(52694),i=e(53731),f=e(99085),u=e(78543),r=e(80498);const d=({instance:p})=>{const g=(0,f.$9)(p.annotations),y=(0,f.XW)(g);return t.createElement("div",null,p.value&&t.createElement(r.C,{label:"Value",horizontal:!0},p.value),g.map(([v,E])=>t.createElement(u.a,{key:v,annotationKey:v,value:E,valueLink:y.get(v)})))};var o=e(45608);const m=({instances:p,pagination:g,footerRow:y})=>{const v=(0,t.useMemo)(()=>p.map(E=>({data:E,id:(0,c.pB)(E)})),[p]);return t.createElement(i.t,{cols:l,isExpandable:!0,items:v,renderExpandedContent:({data:E})=>t.createElement(d,{instance:E}),pagination:g,footerRow:y})},l=[{id:"state",label:"State",renderCell:({data:{state:p}})=>t.createElement(o.l,{state:p}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{labels:p}})=>t.createElement(s.s,{labels:p})},{id:"created",label:"Created",renderCell:({data:{activeAt:p}})=>t.createElement(t.Fragment,null,p.startsWith("0001")?"-":(0,n.CQ)(p).format("YYYY-MM-DD HH:mm:ss")),size:"150px"}]},45608:(Y,T,e)=>{"use strict";e.d(T,{l:()=>s});var t=e(66111),n=e(79662),c=e(79453);const s=t.memo(({state:i,isPaused:f=!1,size:u="md",muted:r=!1})=>t.createElement(c.i,{state:(0,n.Aq)(i),size:u,muted:r},(0,n.SS)(i)," ",f?" (Paused)":""));s.displayName="AlertStateTag"},41273:(Y,T,e)=>{"use strict";e.d(T,{E:()=>d});var t=e(9892),n=e(66111),c=e(37932),s=e(72648),i=e(31403),f=e(98102),u=e(60048),r=e(93411);const d=n.forwardRef(({text:m,ruleIdentifier:l,isProvisioned:p,className:g},y)=>{const[v,E]=(0,n.useState)(void 0),h=(0,s.wW)(o),C=(0,r.u)("/alerting/new",{copyFrom:u.$V(l)});return n.createElement(n.Fragment,null,n.createElement(i.Qj,{title:"Copy",className:g,size:"sm",key:"clone",variant:"secondary",icon:"copy",href:p?void 0:C,onClick:p?()=>E(C):void 0,ref:y},m),n.createElement(f.s,{isOpen:!!v,title:"Copy provisioned alert rule",body:n.createElement("div",null,n.createElement("p",null,"The new rule will ",n.createElement("span",{className:h.bold},"NOT")," be marked as a provisioned rule."),n.createElement("p",null,"You will need to set a new alert group for the copied rule because the original one has been provisioned and cannot be used for rules created in the UI.")),confirmText:"Copy",onConfirm:()=>v&&c.E1.push(v),onDismiss:()=>E(void 0)}))});d.displayName="CloneRuleButton";const o=m=>({bold:t.css`
    font-weight: ${m.typography.fontWeightBold};
  `})},61068:(Y,T,e)=>{"use strict";e.d(T,{vq:()=>A,MD:()=>j,qd:()=>w,Bg:()=>V});var t=e(9892),n=e(82897),c=e(66111),s=e(66698),i=e(26418),f=e(19985),u=e(72648),r=e(35029),d=e(24799),o=e(64353),m=e(46967),l=e(31403),p=e(60499),g=e(40014),y=e(27876),v=e(69945),E=e(72004),h=e(82963),C=e(45849),a=e(46818),P=e(79662),D=e(20383),x=e(53731),M=e(63613),b=e(35645),R=e(45253);const S=()=>c.createElement(R.b,{severity:"warning",title:"Global evalutation interval limit exceeded"},"A minimum evaluation interval of ",c.createElement("strong",null,b.v.unifiedAlerting.minInterval)," has been configured in Grafana.",c.createElement("br",null),"Please contact the administrator to configure a lower interval.");var O=e(56412);const U=10;function I({message:k,error:Q}){return Q?c.createElement(f.C,{color:"red",icon:"exclamation-circle",text:"Error",tooltip:k}):c.createElement(f.C,{color:"orange",icon:"exclamation-triangle",text:"Unknown",tooltip:k})}const F=(k,Q)=>{const re=V(Q),Z=V(k);return Z===0&&re!==0?1:re===0||Z/re<1?0:Math.ceil(Z/re)+1},w=(k,Q)=>{const re={alertName:"",forDuration:"0s",evaluationsToFire:0};return(0,P.Pc)(k)?{alertName:k.grafana_alert.title,forDuration:k.for,evaluationsToFire:F(k.for,Q)}:(0,P.cG)(k)?{alertName:k.alert,forDuration:k.for??"1m",evaluationsToFire:F(k.for??"1m",Q)}:re},K=k=>{try{const Q=(0,D.nd)(k);return!(Q<O.Xr*1e3||Q%(O.Xr*1e3)!==0)}catch{return!1}},L=(k,Q,re)=>(k?k[re]:[])?.find(oe=>oe.name===Q),V=k=>{try{return(0,D.nd)(k)}catch{return 0}},H=({rulesWithoutRecordingRules:k})=>{const Q=(0,u.wW)(_),{watch:re}=(0,s.Gc)(),Z=re("groupInterval"),oe=!Boolean(Z),G=k.slice().map((ge,ne)=>({id:ne,data:w(ge,Z)})).sort((ge,ne)=>V(ge.data.forDuration)-V(ne.data.forDuration)),le=(0,c.useMemo)(()=>[{id:"alertName",label:"Alert",renderCell:({data:{alertName:ge}})=>c.createElement(c.Fragment,null,ge),size:"330px"},{id:"for",label:"For",renderCell:({data:{forDuration:ge}})=>c.createElement(c.Fragment,null,ge),size:.5},{id:"numberEvaluations",label:"#Eval",renderCell:({data:{evaluationsToFire:ge}})=>oe?c.createElement(I,{message:"#Evaluations not available."}):K(Z)?ge===0?c.createElement(I,{message:"Invalid 'For' value: it should be greater or equal to evaluation interval.",error:!0}):c.createElement(c.Fragment,null,ge):c.createElement(I,{message:"Invalid evaluation interval format",error:!0}),size:.4}],[Z,oe]);return c.createElement("div",{className:Q.tableWrapper},c.createElement(x.t,{items:G,cols:le,pagination:{itemsPerPage:U}}))},j=k=>({required:{value:!0,message:"Required."},validate:Q=>{try{const re=(0,D.nd)(Q);return re<O.Xr*1e3?`Cannot be less than ${O.Xr} seconds.`:re%(O.Xr*1e3)!==0?`Must be a multiple of ${O.Xr} seconds.`:(0,E.iH)(k,Q).length===0?!0:"Invalid evaluation interval. Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."}catch(re){return re instanceof Error?re.message:"Failed to parse duration"}}});function A(k){const{namespace:Q,group:re,onClose:Z,intervalEditOnly:oe}=k,G=(0,u.wW)(_),le=(0,y.useDispatch)(),{loading:ge,error:ne,dispatched:ue}=(0,v._)(ye=>ye.updateLotexNamespaceAndGroup)??a.oq,te=(0,p.iG)(),me=(0,c.useMemo)(()=>({namespaceName:Q.name,groupName:re.name,groupInterval:re.interval??""}),[Q,re]),q=(0,C.EG)(Q.rulesSource),se=q===C.GC,ae=se?"Folder":"Namespace";(0,c.useEffect)(()=>{ue&&!ge&&!ne&&Z(!0)},[ue,ge,Z,ne]),(0,g.x)(ye=>ye.unifiedAlerting.updateLotexNamespaceAndGroup=a.oq);const pe=ye=>{le((0,E.hv)({rulesSourceName:q,groupName:re.name,newGroupName:ye.groupName,namespaceName:Q.name,newNamespaceName:ye.namespaceName,groupInterval:ye.groupInterval||void 0}))},de=(0,s.cI)({mode:"onBlur",defaultValues:me,shouldFocusError:!0}),{handleSubmit:Me,register:Ke,watch:st,formState:{isDirty:Ie,errors:Ve}}=de,_e=()=>{te.error("There are errors in the form. Correct the errors and retry.")},tt=(0,n.compact)(re.rules.map(ye=>ye.rulerRule).filter(ye=>!(0,P.yF)(ye))),dt=tt.length>0,Oe=oe||se?"Edit evaluation group":"Edit namespace or evaluation group";return c.createElement(r.u,{className:G.modal,isOpen:!0,title:Oe,onDismiss:Z,onClickBackdrop:Z},c.createElement(s.RV,{...de},c.createElement("form",{onSubmit:ye=>ye.preventDefault(),key:JSON.stringify(me)},c.createElement(c.Fragment,null,c.createElement(d.g,{label:c.createElement(o._,{htmlFor:"namespaceName",description:!se&&"Change the current namespace name. Moving groups between namespaces is not supported"},ae),invalid:!!Ve.namespaceName,error:Ve.namespaceName?.message},c.createElement(i.Stack,{gap:1,direction:"row"},c.createElement(m.I,{id:"namespaceName",readOnly:oe||se,...Ke("namespaceName",{required:"Namespace name is required."}),className:G.formInput}),se&&k.folderUrl&&c.createElement(l.Qj,{href:k.folderUrl,title:"Go to folder",variant:"secondary",icon:"folder-open",target:"_blank"}))),c.createElement(d.g,{label:c.createElement(o._,{htmlFor:"groupName",description:`Evaluation group name needs to be unique within a ${ae.toLocaleLowerCase()}`},"Evaluation group name"),invalid:!!Ve.groupName,error:Ve.groupName?.message},c.createElement(m.I,{id:"groupName",readOnly:oe,...Ke("groupName",{required:"Evaluation group name is required."})})),c.createElement(d.g,{label:c.createElement(o._,{htmlFor:"groupInterval",description:"Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."},c.createElement(i.Stack,{gap:.5},"Rule group evaluation interval",c.createElement(M.s,{text:"How frequently to evaluate rules."}))),invalid:!!Ve.groupInterval,error:Ve.groupInterval?.message},c.createElement(m.I,{id:"groupInterval",placeholder:"1m",...Ke("groupInterval",j(tt))})),(0,h.f)(st("groupInterval")).exceedsLimit&&c.createElement(S,null),c.createElement("div",{className:G.modalButtons},c.createElement(r.u.ButtonRow,null,c.createElement(l.zx,{type:"button",disabled:!Ie||ge,onClick:Me(ye=>pe(ye),_e)},ge?"Saving...":"Save evaluation interval"),c.createElement(l.zx,{variant:"secondary",type:"button",disabled:ge,onClick:()=>Z(!1)},"Cancel"))),!dt&&c.createElement("div",null,"This group does not contain alert rules."),dt&&c.createElement(c.Fragment,null,c.createElement("div",null,"List of rules that belong to this group"),c.createElement("div",{className:G.evalRequiredLabel},"#Eval column represents the number of evaluations needed before alert starts firing."),c.createElement(H,{rulesWithoutRecordingRules:tt}))))))}const _=k=>({modal:t.css`
    max-width: 560px;
  `,modalButtons:t.css`
    top: -24px;
    position: relative;
  `,formInput:t.css`
    flex: 1;
  `,tableWrapper:t.css`
    margin-top: ${k.spacing(2)};
    margin-bottom: ${k.spacing(2)};
    height: 100%;
  `,evalRequiredLabel:t.css`
    font-size: ${k.typography.bodySmall.fontSize};
  `})},89149:(Y,T,e)=>{"use strict";e.d(T,{Ii:()=>C,gr:()=>h});var t=e(9892),n=e(66111),c=e(77258),s=e(67483),i=e(72648),f=e(61860),u=e(53739),r=e(99085),d=e(79662),o=e(20383),m=e(52694),l=e(80498),p=e(28371),g=e(68854),y=e(24990),v=e(8674),E=e(78443);const h=15,C=({rule:D})=>{const x=(0,i.wW)(P),{namespace:{rulesSource:M}}=D,b=(0,r.$9)(D.annotations);return n.createElement("div",null,n.createElement(p.f,{rule:D,rulesSource:M,isViewMode:!1}),n.createElement("div",{className:x.wrapper},n.createElement("div",{className:x.leftSide},n.createElement(a,{rule:D}),!!D.labels&&!!Object.keys(D.labels).length&&n.createElement(l.C,{label:"Labels",horizontal:!0},n.createElement(m.s,{labels:D.labels})),n.createElement(v.C,{rulesSource:M,rule:D,annotations:b}),n.createElement(g.J,{annotations:b})),n.createElement("div",{className:x.rightSide},n.createElement(y.C,{rulesSource:M,rule:D}))),n.createElement(E.M,{rule:D,itemsDisplayLimit:h}))},a=({rule:D})=>{let x,M=D.group.interval,b=D.promRule?.lastEvaluation,R=D.promRule?.evaluationTime;return(0,d.yF)(D.rulerRule)||(x=D.rulerRule?.for),n.createElement(n.Fragment,null,M&&n.createElement(l.C,{label:"Evaluate",horizontal:!0},"Every ",M),x&&n.createElement(l.C,{label:"For",horizontal:!0},x),b&&!(0,o.gV)(b)&&n.createElement(l.C,{label:"Last evaluation",horizontal:!0},n.createElement(f.u,{placement:"top",content:`${(0,c.dq)(b,{format:"YYYY-MM-DD HH:mm:ss"})}`,theme:"info"},n.createElement("span",null,`${(0,s.CQ)(b).locale("en").fromNow(!0)} ago`))),b&&!(0,o.gV)(b)&&R!==void 0&&n.createElement(l.C,{label:"Evaluation time",horizontal:!0},n.createElement(f.u,{placement:"top",content:`${R}s`,theme:"info"},n.createElement("span",null,(0,u.q)({timeInMs:R*1e3,humanize:!0})))))},P=D=>({wrapper:t.css`
    display: flex;
    flex-direction: row;

    ${D.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,leftSide:t.css`
    flex: 1;
  `,rightSide:t.css`
    ${D.breakpoints.up("md")} {
      padding-left: 90px;
      width: 300px;
    }
  `})},28371:(Y,T,e)=>{"use strict";e.d(T,{f:()=>Q});var t=e(9892),n=e(66111),c=e(56895),s=e(63418),i=e(49187),f=e(59959),u=e(35645),r=e(72648),d=e(31403),o=e(94599),m=e(52081),l=e(98102),p=e(60499),g=e(82002),y=e(39031),v=e(27876),E=e(46063),h=e(30173),C=e(44391),a=e(35029);const P=(0,n.lazy)(()=>e.e(7520).then(e.bind(e,87520))),D=(0,n.lazy)(()=>e.e(4394).then(e.bind(e,4394)));var x=(G=>(G.Loki="loki",G.Annotations="annotations",G))(x||{});function M(){const[G,le]=(0,n.useState)(!1),[ge,ne]=(0,n.useState)(),ue=(0,r.wW)(b),te=u.v.unifiedAlerting.alertStateHistoryBackend,me=u.v.unifiedAlerting.alertStateHistoryPrimary,se=[te,me].some(Me=>Me==="loki")?"loki":"annotations",ae=(0,n.useCallback)(()=>{ne(void 0),le(!1)},[]),pe=(0,n.useCallback)(Me=>{ne(Me),le(!0)},[]);return{StateHistoryModal:(0,n.useMemo)(()=>ge?n.createElement(a.u,{isOpen:G,onDismiss:ae,closeOnBackdropClick:!0,closeOnEscape:!0,title:"State history",className:ue.modal,contentClassName:ue.modalContent},n.createElement(n.Suspense,{fallback:"Loading..."},se==="loki"&&n.createElement(D,{ruleUID:ge.grafana_alert.uid}),se==="annotations"&&n.createElement(P,{alertId:ge.grafana_alert.id??""}))):null,[ge,G,ae,se,ue]),showStateHistoryModal:pe,hideStateHistoryModal:ae}}const b=G=>({modal:t.css`
    width: 80%;
    height: 80%;
    min-width: 800px;
  `,modalContent:t.css`
    height: 100%;
    width: 100%;
    padding: ${G.spacing(2)};
  `});var R=e(72004),S=e(97953),O=e(20194),U=e(37190),I=e(45849),F=e(10505),w=e(60048),K=e(79662),L=e(61860),V=e(58509),H=e(2390);const j=({children:G,plugin:le,loadingComponent:ge,notInstalledFallback:ne})=>{const{loading:ue,installed:te}=usePluginBridge(le);return ue?ge??null:te?React.createElement(React.Fragment,null,G):ne??null};function A(G,le,ge){const ne=new URLSearchParams(ge).toString();return`/a/${G}${le}`+(ne?"?"+ne:"")}const _=({title:G="",severity:le="",url:ge=""})=>{const ne=A(H.W.Incident,"/incidents/declare",{title:G,severity:le,url:ge}),{loading:ue,installed:te,settings:me}=(0,V.n)(H.W.Incident);return n.createElement(n.Fragment,null,ue===!0&&n.createElement(d.zx,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident"),te===!1&&n.createElement(L.u,{content:"Grafana Incident is not installed or is not configured correctly"},n.createElement(d.zx,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident")),me&&n.createElement(d.Qj,{icon:"fire",size:"sm",type:"button",href:ne},"Declare Incident"))};var k=e(41273);const Q=({rule:G,rulesSource:le,isViewMode:ge})=>{const ne=(0,r.wW)(oe),{namespace:ue,group:te,rulerRule:me}=G,{StateHistoryModal:q,showStateHistoryModal:se}=M(),ae=(0,v.useDispatch)(),pe=(0,c.TH)(),de=(0,p.iG)(),[Me,Ke]=(0,n.useState)(),st=(0,I.HY)(le)?le:(0,O.Xy)(le.jsonData.alertmanagerUid)?.name,Ie=g.Vt.hasPermission(v.AccessControlAction.DataSourcesExplore),Ve=[],_e=[],tt=()=>{if(Me&&Me.rulerRule){const ct=w.Zk((0,I.EG)(Me.namespace.rulesSource),Me.namespace.name,Me.group.name,Me.rulerRule);ae((0,R.hS)(ct,{navigateTo:ge?"/alerting/list":void 0})),Ke(void 0)}},dt=(0,K.Jq)(te),Oe=(0,I.EG)(le),ye=(0,K.Pc)(G.rulerRule)&&Boolean(G.rulerRule.grafana_alert.provenance),Pe=(0,K.x_)(G.promRule)&&G.promRule.state===E.x_.Firing,be=(0,S.Bz)(Oe),Be=g.Vt.hasPermission(be.create),{isEditable:ze,isRemovable:lt}=(0,C.M)(Oe,me),ht=Z(G),vt=()=>(0,F.t6)(le,G),bt=pe.pathname+pe.search;if((0,I.jq)(le)&&Ie&&!dt&&Ve.push(n.createElement(d.Qj,{size:"sm",key:"explore",variant:"primary",icon:"chart-line",target:"__blank",href:(0,F.mH)(le.name,G.query)},"See graph")),G.annotations[U.q6.runbookURL]&&Ve.push(n.createElement(d.Qj,{size:"sm",key:"runbook",variant:"primary",icon:"book",target:"__blank",href:s.QX.sanitizeUrl(G.annotations[U.q6.runbookURL])},"View runbook")),G.annotations[U.q6.dashboardUID]){const ct=G.annotations[U.q6.dashboardUID];if(ct){Ve.push(n.createElement(d.Qj,{size:"sm",key:"dashboard",variant:"primary",icon:"apps",target:"__blank",href:`d/${encodeURIComponent(ct)}`},"Go to dashboard"));const Pt=G.annotations[U.q6.panelID];Pt&&Ve.push(n.createElement(d.Qj,{size:"sm",key:"panel",variant:"primary",icon:"apps",target:"__blank",href:`d/${encodeURIComponent(ct)}?viewPanel=${encodeURIComponent(Pt)}`},"Go to panel"))}}if(ht&&st&&Ve.push(n.createElement(d.Qj,{size:"sm",key:"silence",icon:"bell-slash",target:"__blank",href:(0,F.Vv)(st,G)},"Silence")),(0,K.Pc)(G.rulerRule)&&Ve.push(n.createElement(n.Fragment,{key:"history"},n.createElement(d.zx,{size:"sm",icon:"history",onClick:()=>(0,K.Pc)(G.rulerRule)&&se(G.rulerRule)},"Show state history"),q)),Pe&&re()&&Ve.push(n.createElement(n.Fragment,{key:"declare-incident"},n.createElement(_,{title:G.name,url:vt()}))),ge&&me){const ct=(0,I.EG)(le),Pt=w.Zk(ct,ue.name,te.name,me);if(ze&&!dt&&(_e.push(n.createElement(o.m,{key:"copy",icon:"copy",onClipboardError:ie=>{de.error("Error while copying URL",ie)},size:"sm",getText:vt},"Copy link to rule")),!ye)){const ie=i.Cj.renderUrl(`${u.v.appSubUrl}/alerting/${encodeURIComponent(w.$V(Pt))}/edit`,{returnTo:bt});_e.push(n.createElement(d.Qj,{size:"sm",key:"edit",variant:"secondary",icon:"pen",href:ie},"Edit"))}Be&&!dt&&_e.push(n.createElement(k.E,{key:"clone",text:"Copy",ruleIdentifier:Pt,isProvisioned:ye})),lt&&!dt&&!ye&&_e.push(n.createElement(d.zx,{size:"sm",type:"button",key:"delete",variant:"secondary",icon:"trash-alt",onClick:()=>Ke(G)},"Delete"))}return Ve.length||_e.length?n.createElement(n.Fragment,null,n.createElement("div",{className:ne.wrapper},n.createElement(m.Lh,{width:"auto"},Ve.length?Ve:n.createElement("div",null)),n.createElement(m.Lh,{width:"auto"},_e.length?_e:n.createElement("div",null))),!!Me&&n.createElement(l.s,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:tt,onDismiss:()=>Ke(void 0)})):null};function re(){const G=u.v.buildInfo,le=G.edition===f.e.OpenSource,ge=G.env==="development";return!le||ge}function Z(G){const le=(0,K.Pc)(G.rulerRule),{useGetAlertmanagerChoiceStatusQuery:ge}=h.h,{currentData:ne,isLoading:ue}=ge(void 0,{skip:!le});if(!le||ue)return!1;const te=g.Vt.hasAccess(v.AccessControlAction.AlertingInstanceCreate,g.Vt.isEditor),me=ne?.alertmanagersChoice===y.TE.External,q=ne?.alertmanagersChoice===y.TE.All;return te&&(!me||q)}const oe=G=>({wrapper:t.css`
    padding: ${G.spacing(2)} 0;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    flex-wrap: wrap;
    border-bottom: solid 1px ${G.colors.border.medium};
  `})},68854:(Y,T,e)=>{"use strict";e.d(T,{J:()=>f});var t=e(9892),n=e(66111),c=e(72648),s=e(99085),i=e(78543);function f(r){const d=(0,c.wW)(u),{annotations:o}=r,m=(0,s.XW)(o);return o.length===0?null:n.createElement("div",{className:d.annotations},o.map(([l,p])=>n.createElement(i.a,{key:l,annotationKey:l,value:p,valueLink:m.get(l)})))}const u=()=>({annotations:t.css`
    margin-top: 46px;
  `})},24990:(Y,T,e)=>{"use strict";e.d(T,{C:()=>d});var t=e(9892),n=e(66111),c=e(86647),s=e(72648),i=e(97573),f=e(45849),u=e(79662),r=e(80498);function d(m){const{rulesSource:l,rule:p}=m,g=(0,s.wW)(o),y=(0,n.useMemo)(()=>{if((0,f.jq)(l))return[{name:l.name,icon:l.meta.info.logos.small}];if((0,u.Pc)(p.rulerRule)){const{data:v}=p.rulerRule.grafana_alert,E=v.reduce((h,C)=>{const a=(0,c.F)().getInstanceSettings(C.datasourceUid);return!a||a.uid===i.Yq||(h[a.name]={name:a.name,icon:a.meta.info.logos.small}),h},{});return Object.values(E)}return[]},[p,l]);return y.length===0?null:n.createElement(r.C,{label:"Data source"},y.map(({name:v,icon:E},h)=>n.createElement("div",{key:v},E&&n.createElement(n.Fragment,null,n.createElement("img",{alt:`${v} datasource logo`,className:g.dataSourceIcon,src:E})," "),v)))}function o(m){const l=m.spacing(2);return{dataSourceIcon:t.css`
      width: ${l};
      height: ${l};
    `}}},8674:(Y,T,e)=>{"use strict";e.d(T,{C:()=>v});var t=e(9892),n=e(66111),c=e(45849),s=e(80498),i=e(57706),f=e(56975),u=e(67660),r=e(12724),d=e(72648),o=e(19370),m=e(21899),l=e(94884);const p=({language:h,expr:C})=>{const a=(0,n.useMemo)(()=>[(0,u.Z)({onlyIn:D=>D.type==="code_block",getSyntax:()=>h},{...i.languages,[h]:h==="logql"?o.ZP:m.ZP})],[h]),P=(0,n.useMemo)(()=>(0,r.l1)(C),[C]);return n.createElement(f.ML,{"data-testid":"expression-editor",plugins:a,value:P})},g=({expression:h,rulesSource:C})=>{const a=(0,d.wW)(y);return n.createElement(l.t,{className:(0,t.cx)(a.well,"slate-query-field")},(0,c.jq)(C)?n.createElement(p,{expr:h,language:C.type===c.ye.Loki?"logql":"promql"}):h)},y=h=>({well:t.css`
    font-family: ${h.typography.fontFamilyMonospace};
  `});function v(h){const{annotations:C,rulesSource:a,rule:P}=h,D=E();return(0,c.jq)(a)?n.createElement(s.C,{label:"Expression",horizontal:!0,className:(0,t.cx)({[D.exprRow]:!!C.length})},n.createElement(g,{expression:P.query,rulesSource:a})):null}const E=()=>({exprRow:t.css`
    margin-bottom: 46px;
  `})},78443:(Y,T,e)=>{"use strict";e.d(T,{M:()=>x});var t=e(9892),n=e(82897),c=e(66111),s=e(56895),i=e(72648),f=e(31403),u=e(30151),r=e(34719),d=e(64353),o=e(2594),m=e(46063);const l=({className:R,onStateFilterChange:S,stateFilter:O,filterType:U,itemPerStateStats:I})=>{const F=(0,i.wW)(p),w=j=>function(){return I&&I[j]?c.createElement(r.V,{name:I[j].toFixed(0),colorIndex:9,className:F.tag}):null},K=Object.values(m.bj).map(j=>({label:j,value:j,component:w(j)})),V=[m.x_.Firing,m.x_.Pending].map(j=>({label:(0,n.capitalize)(j),value:j,component:w(j)})),H=U==="grafana"?K:V;return c.createElement("div",{className:R,"data-testid":"alert-instance-state-filter"},c.createElement(d._,null,"State"),c.createElement(o.S,{options:H,value:O,onChange:S,onClick:j=>{j===O&&S(void 0)}}))};function p(R){return{tag:t.css`
      font-size: 11px;
      font-weight: normal;
      padding: ${R.spacing(.25,.5)};
      vertical-align: middle;
      margin-left: ${R.spacing(.5)};
    `}}var g=e(20194),y=e(10505),v=e(40286),E=e(45849),h=e(79662),C=e(80498),a=e(48563),P=e(46253);function D(R){const S=(0,i.wW)(b),{onClick:O,stats:U}=R;return c.createElement("div",{className:S.footerRow},c.createElement("div",null,"Showing ",U.visibleItemsCount," out of ",U.totalItemsCount," instances"),c.createElement(f.zx,{size:"sm",variant:"secondary","data-testid":"show-all",onClick:O},"Show all ",U.totalItemsCount," alert instances"))}function x(R){const S=(0,s.k6)(),{rule:{promRule:O,namespace:U,instanceTotals:I},itemsDisplayLimit:F=Number.POSITIVE_INFINITY,pagination:w,enableFiltering:K=!1}=R,[L,V]=(0,c.useState)(),[H,j]=(0,c.useState)(),[A]=(0,c.useState)(Math.floor(Math.random()*100)),_=`queryString-${A}`,k=(0,i.wW)(b),Q=(0,E.HY)(U.rulesSource)?E.GC:"prometheus",re=(0,c.useMemo)(()=>(0,h.x_)(O)&&O.alerts?.length?M(L,H,(0,y.Zl)(v.As.Importance,O.alerts)):[],[O,H,L]);if(!(0,h.x_)(O))return null;const Z=re.slice(0,F),oe=(0,n.countBy)(O.alerts,ae=>(0,m.ED)(ae.state)),G=(0,n.sum)(Object.values(I)),le=G-Z.length,ge={totalItemsCount:G,visibleItemsCount:Z.length},ne=(0,y.V2)(U.rulesSource,R.rule,location.pathname+location.search),ue=(0,P.r0)(I),q=K?()=>j(void 0):()=>S.push(ne),se=le?c.createElement(D,{stats:ge,onClick:q}):void 0;return c.createElement(C.C,{label:"Matching instances",horizontal:!0},K&&c.createElement("div",{className:(0,t.cx)(k.flexRow,k.spaceBetween)},c.createElement("div",{className:k.flexRow},c.createElement(u.F,{className:k.rowChild,key:_,defaultQueryString:L,onFilterChange:ae=>V(ae)}),c.createElement(l,{className:k.rowChild,filterType:Q,stateFilter:H,onStateFilterChange:j,itemPerStateStats:oe}))),!K&&c.createElement("div",{className:k.stats},ue),c.createElement(a.o,{instances:Z,pagination:w,footerRow:se}))}function M(R,S,O){let U=[...O];if(R){const I=(0,g.Zh)(R||"");U=U.filter(({labels:F})=>(0,g.eD)(F,I))}return S&&(U=U.filter(I=>(0,m.ED)(I.state)===S)),U}const b=R=>({flexRow:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      width: 100%;
      flex-wrap: wrap;
      margin-bottom: ${R.spacing(1)};
    `,spaceBetween:t.css`
      justify-content: space-between;
    `,rowChild:t.css`
      margin-right: ${R.spacing(1)};
    `,footerRow:t.css`
      display: flex;
      flex-direction: column;
      gap: ${R.spacing(1)};
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,instancesContainer:t.css`
      margin-bottom: ${R.spacing(2)};
    `,stats:t.css`
      display: flex;
      gap: ${R.spacing(1)};
      padding: ${R.spacing(1,0)};
    `})},46253:(Y,T,e)=>{"use strict";e.d(T,{Pb:()=>l,WN:()=>m,r0:()=>p});var t=e(82897),n=e.n(t),c=e(64681),s=e.n(c),i=e(66111),f=e(26418),u=e(19985),r=e(43055),d=e(46063);const o={recording:0,alerting:0,[d.x_.Pending]:0,[d.x_.Inactive]:0,paused:0,error:0,nodata:0},m=({namespaces:g})=>{const y={...o};g.forEach(({groups:C})=>{C.forEach(a=>{const P=(0,t.omitBy)(a.totals,t.isUndefined);for(let D in P)y[D]+=P[D]})});const v=p(y),E=Boolean(v.length),h=(0,t.sum)(Object.values(y));return v.unshift(i.createElement(i.Fragment,{key:"total"},h," ",s()("rule",h))),i.createElement(f.Stack,{direction:"row"},E&&i.createElement("div",null,i.createElement(f.Stack,{gap:.5},v)))},l=({group:g})=>{const y=g.totals,v=g?.interval,E=p(y),h=Boolean(E.length);return i.createElement(f.Stack,{direction:"row"},h&&i.createElement("div",null,i.createElement(f.Stack,{gap:.5},E)),v&&i.createElement(i.Fragment,null,i.createElement("div",null,"|"),i.createElement(u.C,{text:v,icon:"clock-nine",color:"blue"})))};function p(g){const y=[];return g[r.P.Alerting]&&y.push(i.createElement(u.C,{color:"red",key:"firing",text:`${g[r.P.Alerting]} firing`})),g.error&&y.push(i.createElement(u.C,{color:"red",key:"errors",text:`${g.error} errors`})),g.nodata&&y.push(i.createElement(u.C,{color:"blue",key:"nodata",text:`${g.nodata} no data`})),g[r.P.Pending]&&y.push(i.createElement(u.C,{color:"orange",key:"pending",text:`${g[r.P.Pending]} pending`})),g[r.P.Normal]&&g.paused&&y.push(i.createElement(u.C,{color:"green",key:"paused",text:`${g[r.P.Normal]} normal (${g.paused} paused)`})),g[r.P.Normal]&&!g.paused&&y.push(i.createElement(u.C,{color:"green",key:"inactive",text:`${g[r.P.Normal]} normal`})),g.recording&&y.push(i.createElement(u.C,{color:"purple",key:"recording",text:`${g.recording} recording`})),y}},69369:(Y,T,e)=>{"use strict";e.d(T,{S:()=>s});var t=e(66111),n=e(86647),c=e(22069);function s(i){return{allDataSourcesAvailable:(0,t.useMemo)(()=>i.filter(u=>!(0,c.Pr)(u.datasourceUid)).every(u=>{const r=(0,n.F)().getInstanceSettings(u.datasourceUid);return Boolean(r)}),[i])}}},61627:(Y,T,e)=>{"use strict";e.d(T,{DD:()=>v,Fm:()=>g,Kd:()=>o,ZP:()=>y,Zo:()=>d});var t=e(82897),n=e.n(t),c=e(66111),s=e(43055),i=e(46063),f=e(45849),u=e(79662),r=e(69945);function d(x,M){const b=(0,r._)(U=>U.promRules),R=(0,r._)(U=>U.rulerRules),S=(0,c.useRef)({}),O=(0,c.useMemo)(()=>{if(x){const U=(0,f.o_)(x);if(!U)throw new Error(`Unknown rules source: ${x}`);return[U]}return(0,f.h_)()},[x]);return(0,c.useMemo)(()=>O.map(U=>{const I=(0,f.jq)(U)?U.name:U,F=R[I]?.result;let w=b[I]?.result;I===f.GC&&M&&(w=M);const K=S.current[I];if(K&&K.promRules===w&&K.rulerRules===F)return K.result;const L={};Object.entries(F||{}).forEach(([H,j])=>{const A={rulesSource:U,name:H,groups:[]};L[H]=A,l(A,j)}),w?.forEach(({name:H,groups:j})=>{const A=L[H]=L[H]||{rulesSource:U,name:H,groups:[]};p(A,j)});const V=Object.values(L);return S.current[I]={promRules:w,rulerRules:F,result:V},V}).flat(),[b,R,O,M])}function o(x){return x.map(M=>{const b={...M,groups:[]};return b.groups.push({name:"default",rules:m(M.groups.flatMap(R=>R.rules)),totals:E(M.groups)}),b})}function m(x){return x.sort((M,b)=>M.name.localeCompare(b.name))}function l(x,M=[]){x.groups=M.map(b=>{const R=b.rules.filter(U=>(0,u.yF)(U)).length,S=b.rules.filter(U=>(0,u.Pc)(U)&&U.grafana_alert.is_paused).length,O={name:b.name,interval:b.interval,source_tenants:b.source_tenants,rules:[],totals:{paused:S,recording:R}};return O.rules=b.rules.map(U=>C(U,x,O)),O})}function p(x,M){const b=new Map;x.groups.forEach(R=>b.set(R.name,R)),M.forEach(R=>{let S=b.get(R.name);S||(S={name:R.name,rules:[],totals:v(R)},x.groups.push(S),b.set(R.name,S)),S.totals={...S.totals,...v(R)};const O=new Map;S.rules.forEach(U=>{const I=O.get(U.name);I?I.push(U):O.set(U.name,[U])}),(R.rules??[]).forEach(U=>{const I=a(U,O,x.rulesSource);I?(I.promRule=U,I.instanceTotals=(0,u.x_)(U)?g(U):{},I.filteredInstanceTotals=(0,u.x_)(U)?y(U):{}):S.rules.push(h(U,x,S))})})}function g(x){const M=(0,t.countBy)(x.alerts,"state");if(x.totals){const{normal:b,...R}=x.totals;return{...R,inactive:b}}return{alerting:M[s.P.Alerting],pending:M[s.P.Pending],inactive:M[s.P.Normal],nodata:M[s.P.NoData],error:M[s.P.Error]+M.err}}function y(x){if(x.totalsFiltered){const{normal:M,...b}=x.totalsFiltered;return{...b,inactive:M}}return{}}function v(x){if(x.totals){const{firing:S,...O}=x.totals;return{...O,alerting:S}}const M=(0,t.countBy)(x.rules,S=>(0,u.x_)(S)&&S.state),b=(0,t.countBy)(x.rules,S=>S.health),R=x.rules.filter(S=>(0,u.OP)(S)).length;return{alerting:M[i.x_.Firing],error:b.error,nodata:b.nodata,inactive:M[i.x_.Inactive],pending:M[i.x_.Pending],recording:R}}function E(x){const M={};return x.forEach(b=>{const R=b.totals;Object.entries(R).forEach(([S,O])=>{M[S]||(M[S]=0),M[S]+=O})}),M}function h(x,M,b){return{name:x.name,query:x.query,labels:x.labels||{},annotations:(0,u.x_)(x)?x.annotations||{}:{},promRule:x,namespace:M,group:b,instanceTotals:(0,u.x_)(x)?g(x):{},filteredInstanceTotals:(0,u.x_)(x)?y(x):{}}}function C(x,M,b){return(0,u.cG)(x)?{name:x.alert,query:x.expr,labels:x.labels||{},annotations:x.annotations||{},rulerRule:x,namespace:M,group:b,instanceTotals:{},filteredInstanceTotals:{}}:(0,u.yF)(x)?{name:x.record,query:x.expr,labels:x.labels||{},annotations:{},rulerRule:x,namespace:M,group:b,instanceTotals:{},filteredInstanceTotals:{}}:{name:x.grafana_alert.title,query:"",labels:x.labels||{},annotations:x.annotations||{},rulerRule:x,namespace:M,group:b,instanceTotals:{},filteredInstanceTotals:{}}}function a(x,M,b){const R=M.get(x.name);if(!R)return;if((0,f.HY)(b))return R[0];const S=R.find(U=>!U.promRule&&P(U,x,!0));if(S)return S;const O=R.find(U=>!U.promRule&&P(U,x,!1));if(O)return O}function P(x,M,b=!0){return x.name===M.name?(0,t.isEqual)([b?D(x.query):"",x.labels,x.annotations],[b?D(M.query):"",M.labels||{},(0,u.x_)(M)?M.annotations||{}:{}]):!1}function D(x){return x.length>1&&x[0]==="("&&x[x.length-1]===")"&&(x=x.slice(1,-1)),x=x.replace(/\s|\n/g,""),x.split("").sort().join("")}},55485:(Y,T,e)=>{"use strict";e.d(T,{W:()=>f});var t=e(66111),n=e(27876),c=e(72004),s=e(46818),i=e(69945);function f(u){const r=(0,n.useDispatch)(),d=(0,i._)(o=>o.folders);if((0,t.useEffect)(()=>{u&&r((0,c.sw)(u))},[r,u]),u){const o=d[u]||s.oq;return{folder:o.result,loading:o.loading}}return{loading:!1}}},44391:(Y,T,e)=>{"use strict";e.d(T,{M:()=>f});var t=e(82002),n=e(97953),c=e(79662),s=e(55485),i=e(69945);function f(u,r){const d=(0,i._)(E=>E.dataSources),o=r&&(0,c.Pc)(r)?r.grafana_alert.namespace_uid:void 0,m=(0,n.Bz)(u),{folder:l,loading:p}=(0,s.W)(o);if(!r)return{isEditable:!1,isRemovable:!1,loading:!1};if((0,c.Pc)(r)){if(!o)throw new Error(`Rule ${r.grafana_alert.title} does not have a folder uid, cannot determine if it is editable.`);if(!l)return{isEditable:!1,isRemovable:!1,loading:p};const E=l.canSave,h=t.Vt.hasAccessInMetadata(m.update,l,E),C=t.Vt.hasAccessInMetadata(m.delete,l,E);return{isEditable:h,isRemovable:C,loading:p}}const g=Boolean(d[u]?.result?.rulerConfig),y=t.Vt.hasAccess(m.update,t.Vt.isEditor),v=t.Vt.hasAccess(m.delete,t.Vt.isEditor);return{isEditable:y&&g,isRemovable:v&&g,loading:d[u]?.loading}}},25724:(Y,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(82897),n=e.n(t),c=e(66111);function s(i,f=1,u){const[r,d]=(0,c.useState)(f),o=(0,c.useMemo)(()=>(0,t.chunk)(i,u),[i,u]),m=o.length,l=o[r-1]??[],p=(r-1)*u+1,g=(0,t.clamp)(r*u,i.length),y=(0,c.useCallback)(h=>{d((0,t.clamp)(h,1,o.length))},[d,o]),v=(0,c.useCallback)(()=>y(r+1),[r,y]),E=(0,c.useCallback)(()=>y(r-1),[r,y]);return(0,c.useEffect)(()=>d(1),[m]),{page:r,onPageChange:y,numberOfPages:m,pageItems:l,pageStart:p,pageEnd:g,nextPage:v,previousPage:E}}},58509:(Y,T,e)=>{"use strict";e.d(T,{n:()=>c});var t=e(59679),n=e(13011);function c(s){const{loading:i,error:f,value:u}=(0,t.Z)(()=>(0,n.a)(s,{showErrorAlert:!1})),r=u&&!f&&!i,d=u?.enabled;return i&&!u?{loading:!0}:!r||!d?{loading:!1,installed:!1}:{loading:i,installed:!0,settings:u}}},69945:(Y,T,e)=>{"use strict";e.d(T,{_:()=>n});var t=e(27876);function n(c,s){return(0,t.useSelector)(i=>c(i.unifiedAlerting),s)}},734:(Y,T,e)=>{"use strict";e.d(T,{VG:()=>V,HY:()=>j,ug:()=>H});var t=e(46063),n=e(79662);const c=1,s=2,i=3,f=4,u=5,r=6,d=7,o=8,m=9,l=10,p=11,g=12,y=0,v=1,E=2,h=3,C=4,a=5,P=6,D=7;var x=e(82897),M=e(25181);const b=M.WQ.deserialize({version:14,states:"!vOQOPOOOrOPO'#ChOOOO'#Ch'#ChOQOPO'#ClOOOO'#Ci'#CiQQOPOOO!gOQO'#C^O!lOPO'#CjO!qOPO,59SOOOO,59W,59WOOOO-E6g-E6gOOOO,58x,58xOOOO,59U,59UOOOO-E6h-E6h",stateData:"$O~ORUOTUOUUOVUOWUOXUOYUOZUOaPOcQO~ObVOR[XT[XU[XV[XW[XX[XY[XZ[Xa[Xc[X~OSZO~Oa[O~ObVOR[aT[aU[aV[aW[aX[aY[aZ[aa[ac[a~OR~T~U~V~W~Y~Z~RZYXWVUTa~",goto:"zaPPbPPPPPPPPPbgmPsVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken FreeFormExpression",maxTerm:19,skippedNodes:[0],repeatNodeCount:2,tokenData:"#$QRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[=b#[#]F[#]#`#Y#`#a!!n#a#b#Y#b#c!+h#c#f#Y#f#g!:f#g#h!Av#h#i!Jp#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQcPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQbPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i/|#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0TeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U1f#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h3O#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4h#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j6Q#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7j#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W9S#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y:l#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:scSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]<O!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR<VcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR=ieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g>z#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@d#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jA|#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBTeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#eCf#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCmcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]Dx!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREPcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRFceSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YGt#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRG{eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#UI^#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRIeeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#aJv#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRJ}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#iL`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]Mx#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNPcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]! [!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! ccSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!!ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!$W#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!$_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!%p#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%weSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!'Y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'aeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(r#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(ycSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!*U!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*]cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!+oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!-Q#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!.j#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!.qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!0S#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!1l#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1seSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!3U#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3]eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!4n#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!6W#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!7p#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!7wcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!9S!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9ZcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!:meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!<O#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!=h#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!?Q#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?XcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!@d!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@kcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!A}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!C`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!Dx#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EPeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!Fb#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!FieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Gz#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HRcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!I^!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IecSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!JweSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n!LY#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LaeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!Mr#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!MyeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y# [#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# ccSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#!n!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#!ucSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:114,nameSpaceFilter:116,labelFilter:118,groupFilter:120,ruleFilter:122,stateFilter:66,typeFilter:124,healthFilter:126},tokenPrec:128}),R={[i]:"datasource",[u]:"namespace",[r]:"label",[o]:"rule",[d]:"group",[m]:"state",[l]:"type",[p]:"health"};var S=(_=>(_.dataSource="dataSourceFilter",_.nameSpace="nameSpaceFilter",_.label="labelFilter",_.group="groupFilter",_.rule="ruleFilter",_.state="stateFilter",_.type="typeFilter",_.health="healthFilter",_))(S||{});function O(_,k,Q){w(_,k,re=>{if(re.type.id===s){const Z=U(_,re);if(Z.type&&Z.value){const oe=Q[Z.type];oe&&oe(Z.value)}}else if(re.type.id===g){const Z=Q[g];Z&&Z(I(_,re))}})}function U(_,k){if(k.type.id!==s)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const Q=k.firstChild;if(!Q)return{type:void 0,value:void 0};const re=k.getChild(f),Z=re?(0,x.trim)(I(_,re),'"'):void 0;return{type:Q.type.id,value:Z}}function I(_,k){return _.slice(k.from,k.to).trim().replace(/\"/g,"")}function F(_,k,Q){const re=[];w(_,k,oe=>{oe.type.id===s&&oe.firstChild&&re.push(oe.firstChild),oe.type.id===g&&re.push(oe)});let Z=[];return re.forEach(oe=>{const G=Q.findIndex(le=>le.type===oe.type.id);if(G!==-1){if(oe.parent?.type.is(s)){const le=R[oe.type.id],ge=Q.splice(G,1)[0];Z.push(`${le}:${K(ge.value)}`)}if(oe.type.is(g)){const le=Q.splice(G,1)[0];Z.push(le.value)}}}),Q.forEach(oe=>{oe.type===g?Z.push(oe.value):Z.push(`${R[oe.type]}:${K(oe.value)}`)}),Z.join(" ")}function w(_,k,Q){const re=k.join(" ");let oe=b.configure({dialect:re}).parse(_).cursor();do Q(oe.node);while(oe.next())}function K(_){return/\s/.test(_)?`"${_}"`:_}const L=[S.dataSource,S.nameSpace,S.label,S.group,S.rule,S.state,S.type,S.health];var V=(_=>(_.Ok="ok",_.Error="error",_.NoData="nodata",_.Unknown="unknown",_))(V||{});function H(_){const k={labels:[],freeFormWords:[],dataSourceNames:[]},Q={[i]:re=>k.dataSourceNames.push(re),[u]:re=>k.namespace=re,[d]:re=>k.groupName=re,[o]:re=>k.ruleName=re,[r]:re=>k.labels.push(re),[m]:re=>k.ruleState=A(re),[l]:re=>(0,n.Wd)(re)?k.ruleType=re:void 0,[p]:re=>k.ruleHealth=(0,n.vU)(re),[g]:re=>k.freeFormWords.push(re)};return O(_,L,Q),k}function j(_,k){const Q=[];return k.dataSourceNames&&Q.push(...k.dataSourceNames.map(re=>({type:i,value:re}))),k.namespace&&Q.push({type:u,value:k.namespace}),k.groupName&&Q.push({type:d,value:k.groupName}),k.ruleName&&Q.push({type:o,value:k.ruleName}),k.ruleState&&Q.push({type:m,value:k.ruleState}),k.ruleType&&Q.push({type:l,value:k.ruleType}),k.ruleHealth&&Q.push({type:p,value:k.ruleHealth}),k.labels&&Q.push(...k.labels.map(re=>({type:r,value:re}))),k.freeFormWords&&Q.push(...k.freeFormWords.map(re=>({type:g,value:re}))),F(_,L,Q)}function A(_){if(_==="normal")return t.x_.Inactive;if((0,t.I9)(_))return _}},81001:(Y,T,e)=>{"use strict";e.d(T,{v:()=>S});var t=e(46528),n=e(59980),c=e(59724),s=e(57027),i=e(9471),f=e(44288),u=e(52666),r=e(83881),d=e(32921),o=e(47891),m=e(75849),l=e(59957),p=e(86647),g=e(77599),y=e(29930),v=e(75e3),E=e(88039),h=e(59584),C=e(97573);const a={from:21600,to:0},P=(L,V)=>{const H=D(L,V);if(!H)return a;const{from:j,to:A}=M(H,V);return!j.length&&!A.length?a:{from:Math.max(...j),to:Math.min(...A)}},D=(L,V)=>{switch(L.type){case C.Us.classic:return x(L);case C.Us.math:return b(L,V);case C.Us.resample:case C.Us.reduce:case C.Us.threshold:return R(L)}},x=L=>L.conditions?.map(V=>V.query.params[0]),M=(L,V)=>{let H=[],j=[a.to];for(const A of L){const _=V.find(k=>k.refId===A);!_||!_.relativeTimeRange||(H.push(_.relativeTimeRange.from),j.push(_.relativeTimeRange.to))}return{from:H,to:j}},b=(L,V)=>V.filter(H=>H.queryType==="query"&&L.expression?.includes(H.refId)).map(H=>H.refId),R=L=>L.expression?[L.expression]:void 0;class S{constructor(V=(0,y.i)(),H=(0,p.F)()){this.backendSrv=V,this.dataSourceSrv=H,this.subject=new t.t(1),this.lastResult={}}get(){return this.subject.asObservable()}async run(V){if(V.length===0){const H=U(V,u.Gu.Done);return this.subject.next(H)}for(const H of V)if(!(0,v.j)(H.model)){const j=await this.dataSourceSrv.get(H.datasourceUid);if(j.filterQuery&&!j.filterQuery(H.model)){const A=U(V,u.Gu.Done);return this.subject.next(A)}}this.subscription=O(this.backendSrv,V).subscribe({next:H=>{const j=K(H,(A,_)=>{const k=this.lastResult[A],Q=(0,r.zR)(_,k);return(0,h.C)(Q,k)});this.lastResult=j,this.subject.next(this.lastResult)},error:H=>{this.lastResult=w(this.lastResult,H),this.subject.next(this.lastResult)}})}cancel(){if(!this.subscription)return;this.subscription.unsubscribe();let V=!1;const H=K(this.lastResult,(j,A)=>(A.state===u.Gu.Loading&&(V=!0),{...A,state:u.Gu.Done}));V&&this.subject.next(H)}destroy(){this.subject&&this.subject.complete(),this.cancel()}}const O=(L,V)=>{const H=U(V,u.Gu.Loading),j={data:{data:V},url:"/api/v1/eval",method:"POST",requestId:(0,f.Z)()};return(0,d.x)({whileLoading:H,source:L.fetch(j).pipe(F(H),(0,c.K)(A=>(0,n.of)(w(H,A))),(0,E.V)(L,j.requestId),(0,s.B)())})},U=(L,V)=>L.reduce((H,j)=>(H[j.refId]={state:V,series:[],timeRange:I(j,L)},H),{}),I=(L,V)=>{if((0,v.j)(L.model)){const H=P(L.model,V);return o.relativeToTimeRange(H)}return L.relativeTimeRange?o.relativeToTimeRange(L.relativeTimeRange):(console.warn(`Query with refId: ${L.refId} did not have any relative time range, using default.`),(0,m.JK)())},F=L=>(0,i.U)(V=>{const{data:H}=V,j={};for(const[A,_]of Object.entries(H.results))j[A]={timeRange:L[A].timeRange,state:u.Gu.Done,series:_.frames.map(l.vP)};return j}),w=(L,V)=>{const H=(0,g.P)(V);return K(L,(j,A)=>({...A,state:u.Gu.Error,error:H}))},K=(L,V)=>{const H={};for(const[j,A]of Object.entries(L))H[j]=V(j,A);return H}},72004:(Y,T,e)=>{"use strict";e.d(T,{QY:()=>lt,Nc:()=>ie,r0:()=>Ce,X4:()=>ht,hS:()=>dt,oE:()=>tt,S6:()=>vt,yO:()=>ze,mS:()=>Pt,Yh:()=>me,ei:()=>Ie,dV:()=>Ke,lB:()=>Ve,dB:()=>Be,on:()=>_e,zy:()=>q,wE:()=>se,vL:()=>bt,sw:()=>ct,Ms:()=>Pe,Vj:()=>ye,dn:()=>pe,y6:()=>te,UR:()=>ae,IA:()=>Me,nw:()=>st,je:()=>de,iH:()=>Ze,wy:()=>Oe,D8:()=>Ne,mM:()=>be,hv:()=>Qe,tg:()=>Le});var t=e(62992),n=e(82897),c=e(37932),s=e(35645),i=e(46063),f=e(77582),u=e(29930),r=e(41904),d=e(65583),o=e(49187),m=e(54899),l=e(45849);async function p(ve){try{const Se=await(0,d.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,l.gt)(ve)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:Se.data.template_files??{},template_file_provenances:Se.data.template_file_provenances??{},alertmanager_config:Se.data.alertmanager_config??{},last_applied:Se.data.last_applied,id:Se.data.id}}catch(Se){if(ve===l.GC&&(0,m.kW)(Se)&&Se.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw Se}}async function g(ve,Se){await(0,d.n)((0,m.i)().fetch({method:"POST",url:`/api/alertmanager/${(0,l.gt)(ve)}/config/api/v1/alerts`,data:Se,showErrorAlert:!1,showSuccessAlert:!1}))}async function y(ve){await(0,d.n)((0,m.i)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,l.gt)(ve)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function v(ve){return(await(0,d.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,l.gt)(ve)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function E(ve,Se){return(await(0,d.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,l.gt)(ve)}/api/v2/silences`,data:Se,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function h(ve,Se){await(0,m.i)().delete(`/api/alertmanager/${(0,l.gt)(ve)}/api/v2/silence/${encodeURIComponent(Se)}`)}async function C(ve,Se,Fe=!0,je=!0,Ge=!0){const gt=o.Cj.toUrlParams({silenced:Fe,active:je,inhibited:Ge})+Se?.map(Ye=>`filter=${encodeURIComponent(`${U(Ye.name)}=${Ye.isRegex?"~":""}"${U(Ye.value)}"`)}`).join("&")||"";return(await(0,d.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,l.gt)(ve)}/api/v2/alerts`+(gt?"?"+gt:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function a(ve){return(await(0,d.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,l.gt)(ve)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function P(ve){return(await(0,d.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,l.gt)(ve)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function D(ve,Se,Fe){const je={receivers:Se,alert:Fe};try{const Ge=await(0,d.n)((0,m.i)().fetch({method:"POST",data:je,url:`/api/alertmanager/${(0,l.gt)(ve)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(x(Ge.data))throw new Error(b(Ge.data))}catch(Ge){throw(0,m.kW)(Ge)&&M(Ge.data)&&x(Ge.data)?new Error(b(Ge.data)):Ge}}function x(ve){return ve.receivers.some(Se=>Se.grafana_managed_receiver_configs.some(Fe=>Fe.status==="failed"))}function M(ve){const Se=ve?.receivers;return Array.isArray(Se)?Se.every(Fe=>typeof Fe.name=="string"&&Array.isArray(Fe.grafana_managed_receiver_configs)):!1}function b(ve){return ve.receivers.flatMap(Se=>Se.grafana_managed_receiver_configs.filter(Fe=>Fe.status==="failed").map(Fe=>Fe.error??"Unknown error.")).join("; ")}async function R(ve){await(0,d.n)((0,m.i)().fetch({method:"POST",data:ve,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{O()})}async function S(){return(await(0,d.n)((0,m.i)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function O(){return(await(0,d.n)((0,m.i)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function U(ve){return ve.replace(/"/g,'\\"')}function I(ve){return(0,m.i)().get("/api/annotations",{alertId:ve}).then(Se=>Se?.sort(F))}function F(ve,Se){const Fe=(gt,mt)=>gt>mt?-1:mt>gt?1:0,je=Fe(ve.timeEnd,Se.timeEnd);if(je)return je;const Ge=Fe(ve.time,Se.time);return Ge||Fe(ve.id,Se.id)}var w=e(44737),K=e(79572),L=e(644),V=e(95454),H=e(49011),j=e(61068),A=e(94617),_=e(20194),k=e(10505),Q=e(46818),re=e(60048),Z=e(21767),oe=e(79662);function G(ve){const Se=async ft=>{if((0,oe.Kl)(ft)){const St=await(0,H.m6)(ve);for(const[we,qe]of Object.entries(St))for(const Je of qe){const ut=Je.rules.find(Mt=>(0,oe.Pc)(Mt)&&Mt.grafana_alert?.uid===ft.uid);if(ut)return{group:Je,ruleSourceName:l.GC,namespace:we,rule:ut}}}if((0,oe.E4)(ft)){const{ruleSourceName:St,namespace:we,groupName:qe}=ft,Je=await(0,H.jJ)(ve,we,qe);if(!Je)return null;const ut=Je.rules.find(Mt=>{const Wt=re.Zk(St,we,Je.name,Mt);return re.Dg(Wt,ft)});return ut?{group:Je,ruleSourceName:St,namespace:we,rule:ut}:null}if((0,oe.qE)(ft))throw new Error("Native prometheus rules can not be edited in grafana.");return null},Fe=async ft=>{const{namespace:St,group:we,rule:qe}=ft;if(we.rules.length===1){await(0,H.BC)(ve,St,we.name);return}await(0,H.P4)(ve,St,{...we,rules:we.rules.filter(Je=>Je!==qe)})},je=async(ft,St,we)=>{const{dataSourceName:qe,group:Je,namespace:ut}=ft,Mt=(0,Z.yh)(ft);if(qe&&Je&&ut){if(we){const fn=await Se(re.CK(we));if(!fn)throw new Error("Rule not found.");if(fn.namespace!==ut||fn.group.name!==Je)await Fe(fn);else{const pn={...fn.group,rules:fn.group.rules.map(An=>An===fn.rule?Mt:An),evaluateEvery:St};return await(0,H.P4)(ve,ut,pn),re.Zk(qe,ut,Je,Mt)}}const Wt=await(0,H.jJ)(ve,ut,Je),ln=Wt?{...Wt,rules:[...Wt.rules,Mt]}:{name:Je,rules:[Mt]};return await(0,H.P4)(ve,ut,ln),re.Zk(qe,ut,Je,Mt)}else throw new Error("Data source and location must be specified")},Ge=async(ft,St,we)=>{const{folder:qe,group:Je}=ft;if(!qe)throw new Error("Folder must be specified");const ut=(0,Z.mI)(ft),Mt=qe.title,Wt={name:Je,interval:St};if(!we)return gt(Mt,Wt,ut);const ln=await Se(re.CK(we));if(!ln)throw new Error("Rule not found.");const fn=ln.namespace===Mt,pn=ln.group.name===ft.group;return fn&&pn?Ye(ln,ut,St):mt(Mt,Wt,ln,ut)},gt=async(ft,St,we)=>{const qe=await(0,H.jJ)(ve,ft,St.name);if(!qe)throw new Error(`No group found with name "${St.name}"`);const Je={name:St.name,interval:St.interval,rules:(qe.rules??[]).concat(we)};return await(0,H.P4)(ve,ft,Je),{uid:we.grafana_alert.uid??"",ruleSourceName:l.GC}},mt=async(ft,St,we,qe)=>(le(we,qe),await gt(ft,St,qe)),Ye=async(ft,St,we)=>{le(ft,St);const qe=ft.group.rules.map(Je=>(0,oe.Pc)(Je)&&Je.grafana_alert.uid===ft.rule.grafana_alert.uid?St:Je);return await(0,H.P4)(ve,ft.namespace,{name:ft.group.name,interval:we,rules:qe}),{uid:ft.rule.grafana_alert.uid,ruleSourceName:l.GC}};return{findEditableRule:Se,deleteRule:Fe,saveLotexRule:je,saveGrafanaRule:Ge}}function le(ve,Se){if(!(0,oe.Pc)(ve.rule))throw new Error("The rule is not a Grafana managed rule");const Fe=ve.rule.grafana_alert.uid;Se.grafana_alert.uid=Fe}const ge=30*1e3;function ne(ve,Se){const je=ve().unifiedAlerting.dataSources[Se]?.result;if(!je)throw new Error(`Data source configuration is not available for "${Se}" data source`);return je}function ue(ve,Se){const Fe=ne(ve,Se);if(!Fe.rulerConfig)throw new Error(`Ruler API is not available for ${Se}`);return Fe.rulerConfig}const te=(0,t.hg)("unifiedalerting/fetchPromRules",async({rulesSourceName:ve,filter:Se,limitAlerts:Fe,matcher:je,state:Ge,identifier:gt},mt)=>{await mt.dispatch(st({rulesSourceName:ve}));const Ye=(0,r.pM)(V.j,`[${ve}] Prometheus rules loaded`,{dataSourceName:ve,thunk:"unifiedalerting/fetchPromRules"});return await(0,Q.$b)(Ye(ve,Se,Fe,je,Ge,gt))}),me=(0,t.hg)("unifiedalerting/fetchAmConfig",(ve,Se)=>(0,Q.$b)((async()=>{if((0,l.RY)(ve))return P(ve).then(gt=>({alertmanager_config:gt.config,template_files:{}}));const{data:Fe}=await Se.dispatch(K.T.endpoints.discoverAmFeatures.initiate({amSourceName:ve})),je=Fe?.lazyConfigInit??!1,Ge=(0,r.pM)(p,`[${ve}] Alertmanager config loaded`,{dataSourceName:ve,thunk:"unifiedalerting/fetchAmConfig"});return(0,k.fm)(()=>Ge(ve),gt=>!!(0,Q.kk)(gt)?.includes("alertmanager storage object not found")&&!je,ge).then(gt=>(0,n.isEmpty)(gt.alertmanager_config)&&(0,n.isEmpty)(gt.template_files)&&ve!==l.GC?P(ve).then(mt=>({alertmanager_config:mt.config,template_files:{},template_file_provenances:gt.template_file_provenances,last_applied:gt.last_applied,id:gt.id})):gt).catch(gt=>{if(je&&(0,Q.kk)(gt)?.includes("alertmanager storage object not found"))return Promise.resolve({alertmanager_config:{},template_files:{},template_file_provenances:{}});throw gt})})())),q=(0,t.hg)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,Q.$b)(S())),se=(0,t.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,Q.$b)(O())),ae=(0,t.hg)("unifiedalerting/fetchRulerRules",async({rulesSourceName:ve,filter:Se},{dispatch:Fe,getState:je})=>{await Fe(st({rulesSourceName:ve}));const Ge=ue(je,ve),gt=(0,r.pM)(H.m6,`[${ve}] Ruler rules loaded`,{dataSourceName:ve,thunk:"unifiedalerting/fetchRulerRules"});return await(0,Q.$b)(gt(Ge,Se))});function pe({rulesSourceName:ve,identifier:Se}){return async(Fe,je)=>{await Fe(st({rulesSourceName:ve}));const Ge=ne(je,ve);await Fe(te({rulesSourceName:ve,identifier:Se})),Ge.rulerConfig&&await Fe(ae({rulesSourceName:ve}))}}const de=(0,t.hg)("unifiedalerting/fetchSilences",ve=>{const Se=(0,r.pM)(v,`[${ve}] Silences loaded`,{dataSourceName:ve,thunk:"unifiedalerting/fetchSilences"});return(0,Q.$b)(Se(ve))});function Me(ve){return(Se,Fe)=>{const{rulerRules:je}=Fe().unifiedAlerting,Ge=je[ve];(0,n.isEmpty)(Ge?.result)&&!(Ge&&(0,oe.m$)(Ge))&&!Ge?.loading&&Se(ae({rulesSourceName:ve}))}}function Ke(){return async ve=>{const Se=(0,l.mA)().map(Fe=>ve(st({rulesSourceName:Fe})));await Promise.allSettled(Se)}}const st=(0,t.hg)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:ve})=>(0,Q.$b)((async()=>{if(ve===l.GC)return{name:l.GC,id:l.GC,rulerConfig:{dataSourceName:l.GC,apiVersion:"legacy"}};const Se=(0,l.VX)(ve);if(!Se)throw new Error(`Missing data source configuration for ${ve}`);const{id:Fe,name:je}=Se,gt=await(0,r.pM)(w.C$,`[${ve}] Rules source features discovered`,{dataSourceName:ve,thunk:"unifiedalerting/fetchPromBuildinfo"})(je),mt=gt.features.rulerApiEnabled?{dataSourceName:je,apiVersion:gt.application===i.T8.Cortex?"legacy":"config"}:void 0;return{name:je,id:Fe,rulerConfig:mt}})()),{condition:({rulesSourceName:ve},{getState:Se})=>{const Fe=Se().unifiedAlerting.dataSources,je=Boolean(Fe[ve]?.result),Ge=Boolean(Fe[ve]?.error);return!(je||Ge)}});function Ie(ve=!1,Se={}){return async(Fe,je)=>{const Ge=performance.now();await Promise.allSettled((0,l.mA)().map(async gt=>{await Fe(st({rulesSourceName:gt}));const{promRules:mt,rulerRules:Ye,dataSources:ft}=je().unifiedAlerting,St=ft[gt].result;if(!St)return;const we=ve||!mt[gt]?.loading,qe=(ve||!Ye[gt]?.loading)&&Boolean(St.rulerConfig);await Promise.allSettled([we&&Fe(te({rulesSourceName:gt,...Se})),qe&&Fe(ae({rulesSourceName:gt}))])})),(0,r.PN)("All Prom and Ruler rules loaded",{loadTimeMs:(performance.now()-Ge).toFixed(0)})}}function Ve(ve=!1){return async(Se,Fe)=>{const{promRules:je}=Fe().unifiedAlerting;(0,l.mA)().map(Ge=>{(ve||!je[Ge]?.loading)&&Se(te({rulesSourceName:Ge}))})}}const _e=(0,t.hg)("unifiedalerting/fetchEditableRule",(ve,Se)=>{const Fe=ue(Se.getState,ve.ruleSourceName);return(0,Q.$b)(G(Fe).findEditableRule(ve))});function tt(ve,Se){return async(Fe,je)=>{(0,Q.Ez)((async()=>{const Ge=(0,l.EG)(ve.rulesSource),gt=ue(je,Ge);await(0,H.BC)(gt,ve.name,Se.name),await Fe(pe({rulesSourceName:Ge}))})(),{successMessage:"Group deleted"})}}function dt(ve,Se={}){return async(Fe,je)=>{(0,Q.Ez)((async()=>{const Ge=ue(je,ve.ruleSourceName),gt=G(Ge),mt=await gt.findEditableRule(ve);if(!mt)throw new Error("Rule not found.");await gt.deleteRule(mt),await Fe(pe({rulesSourceName:mt.ruleSourceName})),Se.navigateTo&&c.E1.replace(Se.navigateTo)})(),{successMessage:"Rule deleted."})}}const Oe=(0,t.hg)("unifiedalerting/saveRuleForm",({values:ve,existing:Se,redirectOnSave:Fe,evaluateEvery:je},Ge)=>(0,Q.Ez)((0,Q.$b)((async()=>{const{type:gt}=ve;let mt;if(gt===A.$.cloudAlerting||gt===A.$.cloudRecording){if(!ve.dataSourceName)throw new Error("The Data source has not been defined.");const Ye=ue(Ge.getState,ve.dataSourceName);mt=await G(Ye).saveLotexRule(ve,je,Se),await Ge.dispatch(ae({rulesSourceName:ve.dataSourceName}))}else if(gt===A.$.grafana){const Ye=ue(Ge.getState,l.GC);mt=await G(Ye).saveGrafanaRule(ve,je,Se),await Ge.dispatch(ae({rulesSourceName:l.GC}))}else throw new Error("Unexpected rule form type");if((0,r.PN)(r.z7.successSavingAlertRule,{type:gt,isNew:(!Se).toString()}),Se||(0,r.I5)({grafana_version:s.v.buildInfo.version,org_id:f.Vt.user.orgId,user_id:f.Vt.user.id}),Fe)c.E1.push(Fe);else{const Ye=re.$V(mt);if(!Ye){c.E1.push("/alerting/list");return}const ft=`/alerting/${encodeURIComponent(Ye)}/edit`;c.E1.getLocation().pathname!==ft?c.E1.replace(ft):Ge.dispatch(_e(mt))}})()),{successMessage:Se?`Rule "${ve.name}" updated.`:`Rule "${ve.name}" saved.`,errorMessage:"Failed to save rule"})),ye=(0,t.hg)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,Q.$b)((0,L.i9)())),Pe=(0,t.hg)("unifiedalerting/fetchGrafanaAnnotations",ve=>(0,Q.$b)(I(ve))),be=(0,t.hg)("unifiedalerting/updateAMConfig",({alertManagerSourceName:ve,oldConfig:Se,newConfig:Fe,successMessage:je,redirectPath:Ge,refetch:gt},mt)=>(0,Q.Ez)((0,Q.$b)((async()=>{const Ye=await mt.dispatch(me(ve)).unwrap(),ft=(0,n.isEmpty)(Ye.alertmanager_config)&&(0,n.isEmpty)(Ye.template_files),St=JSON.stringify(Ye)!==JSON.stringify(Se);if(!ft&&St)throw new Error("It seems configuration has been recently updated. Please reload page and try again to make sure that recent changes are not overwritten.");await g(ve,(0,_.X4)(Fe)),gt&&await mt.dispatch(me(ve)),Ge&&c.E1.push((0,k.eQ)(Ge,ve))})()),{successMessage:je})),Be=(0,t.hg)("unifiedalerting/fetchAmAlerts",ve=>(0,Q.$b)(C(ve,[],!0,!0,!0))),ze=(ve,Se)=>async Fe=>{await(0,Q.Ez)(h(ve,Se),{successMessage:"Silence expired."}),Fe(de(ve)),Fe(Be(ve))},lt=(0,t.hg)("unifiedalerting/updateSilence",({alertManagerSourceName:ve,payload:Se,exitOnSave:Fe,successMessage:je})=>(0,Q.Ez)((0,Q.$b)((async()=>{await E(ve,Se),Fe&&c.E1.push("/alerting/silences")})()),{successMessage:je})),ht=(ve,Se)=>(Fe,je)=>{const Ge=je().unifiedAlerting.amConfigs?.[Se]?.result;if(!Ge)throw new Error(`Config for ${Se} not found`);if(!Ge.alertmanager_config.receivers?.find(mt=>mt.name===ve))throw new Error(`Cannot delete receiver ${ve}: not found in config.`);const gt={...Ge,alertmanager_config:{...Ge.alertmanager_config,receivers:Ge.alertmanager_config.receivers.filter(mt=>mt.name!==ve)}};return Fe(be({newConfig:gt,oldConfig:Ge,alertManagerSourceName:Se,successMessage:"Contact point deleted.",refetch:!0}))},vt=(ve,Se)=>(Fe,je)=>{const Ge=je().unifiedAlerting.amConfigs?.[Se]?.result;if(!Ge)throw new Error(`Config for ${Se} not found`);if(typeof Ge.template_files?.[ve]!="string")throw new Error(`Cannot delete template ${ve}: not found in config.`);const gt={...Ge.template_files};delete gt[ve];const mt={...Ge,alertmanager_config:{...Ge.alertmanager_config,templates:Ge.alertmanager_config.templates?.filter(Ye=>Ye!==ve)},template_files:gt};return Fe(be({newConfig:mt,oldConfig:Ge,alertManagerSourceName:Se,successMessage:"Template deleted.",refetch:!0}))},bt=(0,t.hg)("unifiedalerting/fetchFolder",ve=>(0,Q.$b)(u.ae.getFolderByUid(ve,{withAccessControl:!0}))),ct=ve=>(Se,Fe)=>{Fe().unifiedAlerting.folders[ve]?.dispatched||Se(bt(ve))},Pt=(0,t.hg)("unifiedalerting/fetchAlertGroups",ve=>(0,Q.$b)(a(ve))),ie=(0,t.hg)("unifiedalerting/deleteAlertManagerConfig",async(ve,Se)=>(0,Q.Ez)((0,Q.$b)((async()=>{await y(ve),await Se.dispatch(me(ve))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),Ce=(ve,Se)=>async(Fe,je)=>{const Ge=je().unifiedAlerting.amConfigs[ve].result,gt=Ge?.alertmanager_config?.mute_time_intervals?.filter(({name:mt})=>mt!==Se)??[];Ge&&(0,Q.Ez)(Fe(be({alertManagerSourceName:ve,oldConfig:Ge,newConfig:{...Ge,alertmanager_config:{...Ge.alertmanager_config,route:Ge.alertmanager_config.route?(0,_.rU)(Se,Ge.alertmanager_config?.route):void 0,mute_time_intervals:gt}},refetch:!0})),{successMessage:`Deleted "${Se}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},Ne=(0,t.hg)("unifiedalerting/testReceivers",({alertManagerSourceName:ve,receivers:Se,alert:Fe})=>(0,Q.Ez)((0,Q.$b)(D(ve,Se,Fe)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),Ze=(ve,Se)=>ve.filter(Fe=>{const{forDuration:je}=(0,j.qd)(Fe,Se),Ge=(0,j.Bg)(je),gt=(0,j.Bg)(Se);return Ge!==0&&Ge<gt}),Qe=(0,t.hg)("unifiedalerting/updateLotexNamespaceAndGroup",async(ve,Se)=>(0,Q.Ez)((0,Q.$b)((async()=>{const{rulesSourceName:Fe,namespaceName:je,groupName:Ge,newNamespaceName:gt,newGroupName:mt,groupInterval:Ye}=ve,ft=ue(Se.getState,Fe),St=await(0,H.m6)(ft);if(!Boolean(St[je]))throw new Error(`Namespace "${je}" not found.`);const qe=St[je].find(Mt=>Mt.name===Ge);if(!qe)throw new Error(`Group "${Ge}" not found.`);const Je=Boolean(St[je].find(Mt=>Mt.name===mt));if(mt!==Ge&&Je)throw new Error(`Group "${mt}" already exists in namespace "${je}".`);const ut=Boolean(St[gt]);if(gt!==je&&ut)throw new Error(`Namespace "${gt}" already exists.`);if(gt===je&&Ge===mt&&Ye===qe.interval)throw new Error("Nothing changed.");if(Ye!==qe.interval){const Mt=Ze(qe.rules,Ye??"1m");if(Mt.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${Mt.map(Wt=>{const{alertName:ln}=(0,j.qd)(Wt,Ye??"");return ln}).join(",")}`)}if(gt!==je){for(const Mt of St[je])await(0,H.P4)(ft,gt,Mt.name===Ge?{...Mt,name:mt,interval:Ye}:Mt);await(0,H.sz)(ft,je)}else await(0,H.P4)(ft,je,{...qe,name:mt,interval:Ye}),mt!==Ge&&await(0,H.BC)(ft,je,Ge);await Se.dispatch(ae({rulesSourceName:Fe}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Le=(0,t.hg)("unifiedalerting/updateRulesOrderForGroup",async(ve,Se)=>(0,Q.Ez)((0,Q.$b)((async()=>{const{rulesSourceName:Fe,namespaceName:je,groupName:Ge,newRules:gt}=ve,mt=ue(Se.getState,Fe),ft=(await(0,H.m6)(mt))[je].find(we=>we.name===Ge);if(!ft)throw new Error(`Group "${Ge}" not found.`);const St={name:ft.name,interval:ft.interval,rules:gt};await(0,H.P4)(mt,je,St),await Se.dispatch(ae({rulesSourceName:Fe}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Ue=(0,t.hg)("unifiedAlerting/addExternalAlertmanagers",async(ve,Se)=>(0,Q.Ez)((0,Q.$b)((async()=>{await R(ve),Se.dispatch(se())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},53715:(Y,T,e)=>{"use strict";e.d(T,{r:()=>c});var t=e(9892),n=e(39031);const c=s=>({[n.Z9.Active]:t.css`
    color: ${s.colors.error.text};
  `,[n.Z9.Suppressed]:t.css`
    color: ${s.colors.primary.text};
  `,[n.Z9.Unprocessed]:t.css`
    color: ${s.colors.secondary.text};
  `})},1562:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>n});var t=e(9892);const n=c=>t.css`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${c.spacing(2,0)};
  `},2390:(Y,T,e)=>{"use strict";e.d(T,{W:()=>t});var t=(n=>(n.Incident="grafana-incident-app",n.OnCall="grafana-oncall-app",n.MachineLearning="grafana-ml-app",n))(t||{})},94617:(Y,T,e)=>{"use strict";e.d(T,{$:()=>t});var t=(n=>(n.grafana="grafana",n.cloudAlerting="cloud-alerting",n.cloudRecording="cloud-recording",n))(t||{})},4528:(Y,T,e)=>{"use strict";e.d(T,{t:()=>t});var t=(n=>(n.seconds="s",n.minutes="m",n.hours="h",n.days="d",n.weeks="w",n))(t||{})},97953:(Y,T,e)=>{"use strict";e.d(T,{Bz:()=>l,Fo:()=>u,Ko:()=>m,Ob:()=>f,QX:()=>o,Rv:()=>g,ql:()=>p});var t=e(82002),n=e(84532),c=e(27876),s=e(45849);function i(y){return(0,s.HY)(y)?"grafana":"external"}const f={read:{grafana:c.AccessControlAction.AlertingInstanceRead,external:c.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:c.AccessControlAction.AlertingInstanceCreate,external:c.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:c.AccessControlAction.AlertingInstanceUpdate,external:c.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:c.AccessControlAction.AlertingInstanceUpdate,external:c.AccessControlAction.AlertingInstancesExternalWrite}},u={read:{grafana:c.AccessControlAction.AlertingNotificationsRead,external:c.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:c.AccessControlAction.AlertingNotificationsWrite,external:c.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:c.AccessControlAction.AlertingNotificationsWrite,external:c.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:c.AccessControlAction.AlertingNotificationsWrite,external:c.AccessControlAction.AlertingNotificationsExternalWrite}},r={read:c.AccessControlAction.AlertingProvisioningRead,write:c.AccessControlAction.AlertingProvisioningWrite},d={read:{grafana:c.AccessControlAction.AlertingRuleRead,external:c.AccessControlAction.AlertingRuleExternalRead},create:{grafana:c.AccessControlAction.AlertingRuleCreate,external:c.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:c.AccessControlAction.AlertingRuleUpdate,external:c.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:c.AccessControlAction.AlertingRuleDelete,external:c.AccessControlAction.AlertingRuleExternalWrite}};function o(y){const v=i(y);return{read:f.read[v],create:f.create[v],update:f.update[v],delete:f.delete[v]}}function m(y){const v=i(y);return{read:u.read[v],create:u.create[v],update:u.update[v],delete:u.delete[v]}}function l(y){const v=i(y);return{read:d.read[v],create:d.create[v],update:d.update[v],delete:d.delete[v]}}function p(y,v){return()=>t.Vt.evaluatePermission(()=>v,y)}function g(){return{canCreateGrafanaRules:t.Vt.hasAccess(c.AccessControlAction.FoldersRead,t.Vt.hasEditPermissionInFolders)&&t.Vt.hasAccess(d.create.grafana,t.Vt.hasEditPermissionInFolders),canCreateCloudRules:t.Vt.hasAccess(c.AccessControlAction.DataSourcesRead,t.Vt.isEditor)&&t.Vt.hasAccess(d.create.external,t.Vt.isEditor),canEditRules:y=>{const v=y===s.GC?t.Vt.hasEditPermissionInFolders:t.Vt.isEditor;return t.Vt.hasAccess(l(y).update,v)},canReadProvisioning:t.Vt.hasAccess(r.read,(0,n.RN)())}}},20194:(Y,T,e)=>{"use strict";e.d(T,{FM:()=>r,J8:()=>U,X4:()=>f,Xy:()=>b,Zh:()=>a,_J:()=>g,cm:()=>p,eD:()=>D,m8:()=>I,nv:()=>o,qw:()=>F,rU:()=>u,tA:()=>v,tC:()=>h,u6:()=>S,uK:()=>R,v7:()=>O,vB:()=>x,xz:()=>C,zy:()=>m});var t=e(82897),n=e.n(t),c=e(39031),s=e(82963),i=e(45849);function f(w){return w.alertmanager_config.receivers||(w.alertmanager_config.receivers=[{name:"default "}]),w.alertmanager_config.route||(w.alertmanager_config.route={receiver:w.alertmanager_config.receivers[0].name}),w.template_files||(w.template_files={}),w}function u(w,K){return{...K,mute_time_intervals:K.mute_time_intervals?.filter(V=>V!==w)??[],routes:K.routes?.map(V=>u(w,V))}}function r(w,K,L){return{...L,mute_time_intervals:L.mute_time_intervals?.map(V=>V===K?w:V),routes:L.routes?.map(V=>r(w,K,V))}}function d(w,K){return(K.receiver===w||K.routes?.some(L=>d(w,L)))??!1}function o(w,K){return(K.alertmanager_config.route&&d(w,K.alertmanager_config.route))??!1}function m(w){return w.isEqual?w.isRegex?c._M.regex:c._M.equal:w.isRegex?c._M.notRegex:c._M.notEqual}function l(w){switch(w){case c._M.equal:return{isEqual:!0,isRegex:!1};case c._M.notEqual:return{isEqual:!1,isRegex:!1};case c._M.regex:return{isEqual:!0,isRegex:!0};case c._M.notRegex:return{isEqual:!1,isRegex:!0}}}function p(w){return{name:w.name,value:w.value,operator:m(w)}}function g(w){return{name:w.name,value:w.value,...l(w.operator)}}function y(w){return`{${w.map(p).reduce((V,H)=>{const j=`${H.name}${H.operator}"${H.value}"`;return V?`${V},${j}`:j},"")}}`}const v=[{label:c._M.equal,description:"Equals",value:c._M.equal},{label:c._M.notEqual,description:"Does not equal",value:c._M.notEqual},{label:c._M.regex,description:"Matches regex",value:c._M.regex},{label:c._M.notRegex,description:"Does not match regex",value:c._M.notRegex}],E=[c._M.regex,c._M.notRegex,c._M.notEqual,c._M.equal];function h(w){const K=w.trim();if(K.startsWith("{")&&K.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${K}`);const L=E.map(_=>[_,K.indexOf(_)]).filter(([_,k])=>k>-1).sort((_,k)=>_[1]-k[1]);if(!L.length)throw new Error(`Invalid matcher: ${K}`);const[V,H]=L[0],j=K.slice(0,H).trim(),A=K.slice(H+V.length).trim();if(!j)throw new Error(`Invalid matcher: ${K}`);return{name:j,value:A,isRegex:V===c._M.regex||V===c._M.notRegex,isEqual:V===c._M.equal||V===c._M.regex}}function C(w){const K=m(w);return[w.name,K,w.value]}function a(w){const K=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,}]*)"?/g,L=[];return w.replace(K,(V,H,j,A)=>{const _=j===c._M.equal||j===c._M.regex,k=j===c._M.regex||j===c._M.notRegex;return L.push({name:H,value:k?P(A.trim()):A.trim(),isEqual:_,isRegex:k}),""}),L}function P(w){try{return new RegExp(w),w}catch{return""}}function D(w,K){return K.every(({name:L,value:V,isRegex:H,isEqual:j})=>Object.entries(w).some(([A,_])=>{const k=L===A;let Q;return j&&!H&&(Q=V===_),!j&&!H&&(Q=V!==_),j&&H&&(Q=new RegExp(V).test(_)),!j&&H&&(Q=!new RegExp(V).test(_)),k&&Q}))}function x(...w){const K=w.map(a).flat(),L=(0,t.uniqWith)(K,t.isEqual);return y(L)}function M(){return(0,s.x)().filter(w=>w.type===i.ye.Alertmanager)}function b(w){return M().find(K=>w===K.uid)}function R(w){const{times:K,weekdays:L,days_of_month:V,months:H,years:j}=w,A=S(K),_=O(L),k=U(V),Q=I(H),re=F(j);return[A,_,k,Q,re].join(", ")}function S(w){return"Times: "+(w?w?.map(({start_time:K,end_time:L})=>`${K} - ${L} UTC`).join(" and "):"All")}function O(w){return"Weekdays: "+(w?.map(K=>{if(K.includes(":"))return K.split(":").map(L=>{const V=L.slice(0,3);return V[0].toLocaleUpperCase()+V.slice(1)}).join("-");{const L=K.slice(0,3);return L[0].toLocaleUpperCase()+L.slice(1)}}).join(", ")??"All")}function U(w){return"Days of the month: "+(w?.join(", ")??"All")}function I(w){return"Months: "+(w?.join(", ")??"All")}function F(w){return"Years: "+(w?.join(", ")??"All")}},99085:(Y,T,e)=>{"use strict";e.d(T,{$9:()=>i,XW:()=>f});var t=e(66111),n=e(37190),c=e(10505);function s(u){return{dashboardUID:u.find(([r])=>r===n.q6.dashboardUID)?.[1],panelId:u.find(([r])=>r===n.q6.panelID)?.[1]}}function i(u){return(0,t.useMemo)(()=>Object.entries(u||{}).filter(([r,d])=>!!d.trim()),[u])}function f(u){const r=new Map,{panelId:d,dashboardUID:o}=s(u);return o&&r.set(n.q6.dashboardUID,(0,c.RQ)(o)),o&&d&&r.set(n.q6.panelID,(0,c.yM)(o,d)),r}},82963:(Y,T,e)=>{"use strict";e.d(T,{f:()=>s,x:()=>c});var t=e(35645),n=e(20383);function c(){return Object.values(t.v.datasources)}function s(i){if(!(0,n.wd)(t.v.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const f=(0,n.nd)(t.v.unifiedAlerting.minInterval);if(!i||!(0,n.wd)(i))return{globalLimit:f,exceedsLimit:!1};const u=(0,n.nd)(i),r=f>u&&u>0;return{globalLimit:f,exceedsLimit:r}}},37190:(Y,T,e)=>{"use strict";e.d(T,{c4:()=>c,cm:()=>i,de:()=>s,iF:()=>f,jZ:()=>t,m4:()=>u,p4:()=>n,q6:()=>m,vY:()=>l});const t="ruler not supported",n=2e4,c="alertmanager",s="alerting-alertmanager",i=2e4,f=2e4,u=2e4,r="timeseries",d="table",o="stat";var m=(p=>(p.description="description",p.summary="summary",p.runbookURL="runbook_url",p.alertId="__alertId__",p.dashboardUID="__dashboardUid__",p.panelID="__panelId__",p))(m||{});const l={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"}},45849:(Y,T,e)=>{"use strict";e.d(T,{EG:()=>a,Eu:()=>m,GC:()=>u,G_:()=>F,HY:()=>M,JY:()=>r,LE:()=>v,P:()=>I,RY:()=>x,VX:()=>l,aM:()=>p,c$:()=>b,gt:()=>O,h_:()=>C,jq:()=>D,mA:()=>h,o_:()=>R,v_:()=>P,ye:()=>d,z3:()=>y});var t=e(86647),n=e(82002),c=e(39031),s=e(27876),i=e(97953),f=e(82963);const u="grafana",r="-- Grafana --";var d=(w=>(w.Alertmanager="alertmanager",w.Loki="loki",w.Prometheus="prometheus",w))(d||{});const o=["loki","prometheus"];function m(){return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleExternalRead)?(0,f.x)().filter(w=>o.includes(w.type)&&w.jsonData.manageAlerts!==!1).sort((w,K)=>w.name.localeCompare(K.name)):[]}function l(w){return m().find(K=>K.name===w)}function p(){return(0,f.x)().filter(w=>w.type==="alertmanager").sort((w,K)=>w.name.localeCompare(K.name))}const g={name:u,imgUrl:"public/img/grafana_icon.svg"};function y(){return[g,...p().map(w=>({name:w.name,displayName:w.name,imgUrl:w.meta.info.logos.small,meta:w.meta}))]}function v(w){const K=[],L={instance:i.Ob.read,notification:i.Fo.read};if(n.Vt.hasPermission(L[w].grafana)&&K.push(g),n.Vt.hasPermission(L[w].external)){const V=p().map(H=>({name:H.name,displayName:H.name,imgUrl:H.meta.info.logos.small,meta:H.meta}));K.push(...V)}return K}function E(w){const K=b(w);if(!K)throw new Error(`Data source ${w} not found`);if(K.type!=="loki"&&K.type!=="prometheus")throw new Error(`Unexpected data source type ${K.type}`);return K}function h(){const w=m().map(K=>K.name);return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&w.push(u),w}function C(){const w=m();return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&w.push(u),w}function a(w){return D(w)?w.name:w}function P(w){return D(w)?w.uid:u}function D(w){return w!==u}function x(w){return w!==u&&b(w)?.jsonData?.implementation===c.sK.prometheus}function M(w){return w===u}function b(w){return(0,f.x)().find(K=>K.name===w)}function R(w){return w===u?u:b(w)}function S(w){if(w===u)return u;const K=b(w);if(!K)throw new Error(`Datasource "${w}" not found`);return String(K.id)}function O(w){if(w===u)return u;const K=b(w);if(!K)throw new Error(`Datasource "${w}" not found`);return K.uid}function U(){return(0,t.F)().getList({alerting:!0})[0]}function I(){const w=(0,t.F)().getInstanceSettings("default");return w?.meta.alerting??!1?w:U()}function F(w){return w.jsonData.manageAlerts!==!1}},61893:(Y,T,e)=>{"use strict";e.d(T,{P3:()=>t,cH:()=>n,nW:()=>c});function t(s){return Object.entries(s).map(([i,f])=>`${i}=${f}`).sort()}function n(s){return Object.entries(s).map(([i,f])=>[i,f])}function c(s){const i={};return s.forEach(f=>{i[f[0]]=f[1]}),i}},66367:(Y,T,e)=>{"use strict";e.d(T,{R:()=>s,r:()=>i});var t=e(82897),n=e.n(t),c=e(20194);function s(f){const u=f.filter(r=>!!r.trim()).map(r=>(0,c.tC)(r.trim()));return(0,t.uniqBy)(u,r=>r.name)}const i=f=>{const u=Object.entries(f).filter(([d])=>!(d.startsWith("__")&&d.endsWith("__"))),r=new URLSearchParams;return u.forEach(([d,o])=>r.append("matcher",`${d}=${o}`)),r}},10505:(Y,T,e)=>{"use strict";e.d(T,{ET:()=>g,GV:()=>p,HV:()=>b,J8:()=>a,RQ:()=>S,S0:()=>v,V2:()=>m,VN:()=>x,Vv:()=>D,Zl:()=>F,__:()=>M,aH:()=>R,eQ:()=>P,fm:()=>U,lC:()=>E,mH:()=>l,pF:()=>C,t6:()=>y,yM:()=>O});var t=e(82897),n=e.n(t),c=e(79662),s=e(40286),i=e(46063),f=e(37190),u=e(45849),r=e(66367),d=e(60048),o=e(93411);function m(w,K,L){const V=(0,u.EG)(w),H=d.Yd(V,K),j=encodeURIComponent(d.$V(H)),A=encodeURIComponent(V);return(0,o.u)(`/alerting/${A}/${j}/view`,{returnTo:L})}function l(w,K){return(0,o.u)("/explore",{left:JSON.stringify({datasource:w,queries:[{refId:"A",datasource:w,expr:K}],range:{from:"now-1h",to:"now"}})})}function p(w,K=""){return(0,o.u)(`/alerting/notifications/receivers/${encodeURIComponent(w)}/edit`,{alertmanager:K})}function g(w,K=""){return(0,o.u)("/alerting/routes/mute-timing/edit",{muteName:w,alertmanager:K})}function y(w,K){return(0,u.jq)(w)?(0,o._)(`/alerting/${encodeURIComponent(w.name)}/${encodeURIComponent(K.name)}/find`):window.location.href.split("?")[0]}function v(w){return w.reduce((K,{key:L,value:V})=>(K[L]=V,K),{})}const E=w=>{const K=w.queryString===void 0?void 0:String(w.queryString),L=w.alertState===void 0?void 0:String(w.alertState),V=w.dataSource===void 0?void 0:String(w.dataSource),H=w.ruleType===void 0?void 0:String(w.ruleType),j=w.groupBy===void 0?void 0:String(w.groupBy).split(",");return{queryString:K,alertState:L,dataSource:V,groupBy:j,ruleType:H}},h=w=>({queryString:w.get("queryString")??void 0,contactPoint:w.get("contactPoint")??void 0}),C=w=>{const K=w.queryString===void 0?void 0:String(w.queryString),L=w.silenceState===void 0?void 0:String(w.silenceState);return{queryString:K,silenceState:L}};function a(w){return Object.entries(w).map(([K,L])=>({key:K,value:L}))}function P(w,K,L){const V=new URLSearchParams(L);return K&&V.append(f.c4,K),`${w}?${V.toString()}`}function D(w,K){const L={alertname:K.name,...K.labels};return x(w,L)}function x(w,K){const L=new URLSearchParams;return L.append("alertmanager",w),(0,r.r)(K).forEach((H,j)=>L.append(j,H)),(0,o.u)("/alerting/silence/new",L)}function M(w){return(0,o.u)(`/datasources/edit/${w.uid}`)}function b(w){return(0,o.u)(`/dashboards/f/${w}`)}function R(w){return(0,o.u)(`/dashboards/f/${w.uid}/${w.title}/settings`)}function S(w){return(0,o.u)(`/d/${encodeURIComponent(w)}`)}function O(w,K){return(0,o.u)(`/d/${encodeURIComponent(w)}`,{viewPanel:K})}function U(w,K,L,V=1e3){const H=new Date().getTime(),j=()=>w().catch(A=>{if(K(A)&&new Date().getTime()-H<L)return new Promise(_=>setTimeout(_,V)).then(j);throw A});return j()}const I={[i.bj.Alerting]:1,[i.x_.Firing]:1,[i.bj.Error]:1,[i.bj.Pending]:2,[i.x_.Pending]:2,[i.x_.Inactive]:2,[i.bj.NoData]:3,[i.bj.Normal]:4};function F(w,K){if(w===s.As.Importance)return(0,t.sortBy)(K,V=>[I[(0,i.ED)(V.state)],(0,c.pB)(V).toLocaleLowerCase()]);if(w===s.As.TimeAsc)return(0,t.sortBy)(K,V=>[new Date(V.activeAt)||new Date,(0,c.pB)(V).toLocaleLowerCase()]);if(w===s.As.TimeDesc)return(0,t.sortBy)(K,V=>[new Date(V.activeAt)||new Date,(0,c.pB)(V).toLocaleLowerCase()]).reverse();const L=(0,t.sortBy)(K,V=>(0,c.pB)(V).toLocaleLowerCase());return w===s.As.AlphaDesc&&L.reverse(),L}},46818:(Y,T,e)=>{"use strict";e.d(T,{$b:()=>o,Ez:()=>m,PE:()=>g,i6:()=>r,jK:()=>d,kk:()=>p,op:()=>C,oq:()=>f,yR:()=>h});var t=e(62992),n=e(4063),c=e(54899),s=e(77582),i=e(41904);const f=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function u(a,P=f,D){if(a.pending.match(D))return{result:P.result,loading:!0,error:P.error,dispatched:!0,requestId:D.meta.requestId};if(a.fulfilled.match(D)){if(P.requestId===void 0||P.requestId===D.meta.requestId)return{...P,result:D.payload,loading:!1,error:void 0}}else if(a.rejected.match(D)&&P.requestId===D.meta.requestId)return{...P,loading:!1,error:D.error};return P}function r(a,P){return(0,t.oM)({name:a,initialState:f,reducers:{},extraReducers:D=>D.addDefaultCase((x,M)=>u(P,x,M))})}function d(a,P,D){return(0,t.oM)({name:a,initialState:{},reducers:{},extraReducers:x=>x.addDefaultCase((M,b)=>{if((0,t.Gx)(P)(b)){const R=b,S=D(R.meta.arg);return{...M,[S]:u(P,M[S],R)}}return M})})}function o(a){return a.catch(P=>{throw{message:p(P),code:P.statusCode}})}function m(a,P){return a.then(D=>(P.successMessage&&s.h$.emit(n.SI.alertSuccess,[P.successMessage]),D)).catch(D=>{const x=p(D);throw s.h$.emit(n.SI.alertError,[`${P.errorMessage??"Error"}: ${x}`]),D})}const l="Unknown Error";function p(a){if((0,c.kW)(a))if(a.data?.message){let D=a.data?.message;return typeof a.data?.error=="string"&&(D+=`; ${a.data.error}`),D}else{if(Array.isArray(a.data)&&a.data.length&&a.data[0]?.message)return a.data.map(D=>D?.message).filter(D=>!!D).join(" ");if(a.statusText)return a.statusText}const P=a?.message;return P||((0,i.PN)(i.z7.unknownMessageFromError,{error:JSON.stringify(a)}),l)}function g(a){return Object.values(a).every(y)}function y(a){return a.dispatched&&!a.loading}function v(a){return Object.values(a).every(E)}function E(a){return a.dispatched&&!a.loading&&!a.error}function h(a){return Object.values(a).some(C)}function C(a){return a?a.dispatched&&a.loading:!1}},21767:(Y,T,e)=>{"use strict";e.d(T,{DQ:()=>P,WL:()=>D,aR:()=>O,lN:()=>x,mI:()=>a,s0:()=>M,tO:()=>w,uZ:()=>E,yh:()=>h});var t=e(75849),n=e(47891),c=e(86647),s=e(22069),i=e(99822),f=e(97573),u=e(46063),r=e(67162),d=e(32139),o=e(94617),m=e(97953),l=e(37190),p=e(45849),g=e(10505),y=e(79662),v=e(20383);const E=()=>{const{canCreateGrafanaRules:K,canCreateCloudRules:L}=(0,m.Rv)();return Object.freeze({name:"",labels:[{key:"",value:""}],annotations:[{key:l.q6.summary,value:""},{key:l.q6.description,value:""},{key:l.q6.runbookURL,value:""}],dataSourceName:null,type:K?o.$.grafana:L?o.$.cloudAlerting:void 0,group:"",folder:null,queries:[],recordingRulesQueries:[],condition:"",noDataState:u.g0.NoData,execErrState:u.g0.Error,evaluateFor:"5m",evaluateEvery:d.E,namespace:"",expression:"",forTime:1,forTimeUnit:"m"})};function h(K){const{name:L,expression:V,forTime:H,forTimeUnit:j,type:A}=K;if(A===o.$.cloudAlerting)return{alert:L,for:`${H}${j}`,annotations:(0,g.S0)(K.annotations||[]),labels:(0,g.S0)(K.labels||[]),expr:V};if(A===o.$.cloudRecording)return{record:L,labels:(0,g.S0)(K.labels||[]),expr:V};throw new Error(`unexpected rule type: ${A}`)}function C(K){return[...(0,g.J8)(K||{}),{key:"",value:""}]}function a(K){const{name:L,condition:V,noDataState:H,execErrState:j,evaluateFor:A,queries:_,isPaused:k}=K;if(V)return{grafana_alert:{title:L,condition:V,no_data_state:H,exec_err_state:j,data:_.map(I),is_paused:Boolean(k)},for:A,annotations:(0,g.S0)(K.annotations||[]),labels:(0,g.S0)(K.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function P(K){const{ruleSourceName:L,namespace:V,group:H,rule:j}=K,A=E();if((0,p.HY)(L))if((0,y.Pc)(j)){const _=j.grafana_alert;return{...A,name:_.title,type:o.$.grafana,group:H.name,evaluateEvery:H.interval||A.evaluateEvery,evaluateFor:j.for||"0",noDataState:_.no_data_state,execErrState:_.exec_err_state,queries:_.data,condition:_.condition,annotations:C(j.annotations),labels:C(j.labels),folder:{title:V,id:_.namespace_id},isPaused:_.is_paused}}else throw new Error("Unexpected type of rule for grafana rules source");else if((0,y.cG)(j)){const _=D(j);return{...A,..._,type:o.$.cloudAlerting,dataSourceName:L,namespace:V,group:H.name}}else if((0,y.yF)(j)){const _=x(j);return{...A,..._,type:o.$.cloudRecording,dataSourceName:L,namespace:V,group:H.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function D(K){const L=E(),[V,H]=K.for?(0,v.bG)(K.for):[L.forTime,L.forTimeUnit];return{name:K.alert,expression:K.expr,forTime:V,forTimeUnit:H,annotations:C(K.annotations),labels:C(K.labels)}}function x(K){return{name:K.record,expression:K.expr,labels:C(K.labels)}}const M=()=>{const K=(0,p.P)();if(!K)return[...R("A","B")];const L=(0,t.Rr)();return[{refId:"A",datasourceUid:K.uid,queryType:"",relativeTimeRange:L,model:{refId:"A",hide:!1}},...R("B","C")]},b=K=>{const L=getDefaultRelativeTimeRange();return[{refId:"A",datasourceUid:K[0]?.uid||"",queryType:"",relativeTimeRange:L,model:{refId:"A",hide:!1}}]},R=(...K)=>{const L=K[0],V=K[1],H={refId:K[0],hide:!1,type:f.Us.reduce,datasource:{uid:f.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[],type:r.$.IsAbove},operator:{type:"and"},query:{params:[L]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},j={refId:V,hide:!1,type:f.Us.threshold,datasource:{uid:f.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[0],type:r.$.IsAbove},operator:{type:"and"},query:{params:[V]},reducer:{params:[],type:"last"}}],expression:L};return[{refId:L,datasourceUid:f.Yq,queryType:"",model:H},{refId:V,datasourceUid:f.Yq,queryType:"",model:j}]},S=async(K,L,V,H,j,A)=>{const _=[];for(const k of K){const Q=await(0,c.F)().get(k.datasource?.uid?k.datasource:H),re={uid:Q.uid,type:Q.type},Z=n.relativeToTimeRange(L),{interval:oe,intervalMs:G}=U(Z,A??Q.interval,j),le={__interval:{text:oe,value:oe},__interval_ms:{text:G,value:G},...V},ge=Q.interpolateVariablesInQueries?await Q.interpolateVariablesInQueries([k],le)[0]:k;if(re.uid===f.Yq){const ne={refId:ge.refId,queryType:"",relativeTimeRange:L,datasourceUid:f.Yq,model:ge};_.push(ne)}else{const ne=(0,c.F)().getInstanceSettings(re);if(ne&&ne.meta.alerting){const ue={refId:ge.refId,queryType:ge.queryType??"",relativeTimeRange:L,datasourceUid:ne.uid,model:{...ge,maxDataPoints:j,intervalMs:G}};_.push(ue)}}}return _},O=async(K,L)=>{const{targets:V}=K;if(!K.id||!L.uid)return;const H=n.timeRangeToRelative(n.convertRawToRange(L.time)),j=await S(V,H,K.scopedVars||{},K.datasource??void 0,K.maxDataPoints??void 0,K.interval??void 0);if(!j.length||!j.find(Q=>Q.datasourceUid!==f.Yq))return;if(!j.find(Q=>Q.datasourceUid===f.Yq)){const[Q,re]=R((0,i.Hs)(j),"-");j.push(Q);const[Z,oe]=R(Q.refId,(0,i.Hs)(j));j.push(oe)}const{folderId:A,folderTitle:_}=L.meta;return{type:o.$.grafana,folder:A&&_?{id:A,title:_}:void 0,queries:j,name:K.title,condition:j[j.length-1].refId,annotations:[{key:l.q6.dashboardUID,value:L.uid},{key:l.q6.panelID,value:String(K.id)}]}};function U(K,L,V){return V?n.calculateInterval(K,V,L):L&&n.intervalToMs(L)>1e3?{interval:L,intervalMs:n.intervalToMs(L)}:{interval:"1s",intervalMs:1e3}}function I(K){const L=K.model;return F(L)&&L.instant&&L.range?{...K,model:{...L,range:!0,instant:!1}}:K}function F(K){return"expr"in K&&"instant"in K&&"range"in K}function w(K){return"expr"in K}},60048:(Y,T,e)=>{"use strict";e.d(T,{$V:()=>v,CK:()=>f,Dg:()=>u,OA:()=>y,Om:()=>h,Yd:()=>i,Zk:()=>c,s0:()=>P});var t=e(45849),n=e(79662);function c(D,x,M,b){return(0,n.Pc)(b)?{uid:b.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:D,namespace:x,groupName:M,rulerRuleHash:h(b)}}function s(D,x,M,b){return{ruleSourceName:D,namespace:x,groupName:M,ruleHash:C(b)}}function i(D,x){const M=x.namespace.name,b=x.group.name;if(x.rulerRule)return c(D,M,b,x.rulerRule);if(x.promRule)return s(D,M,b,x.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function f(D){return c(D.ruleSourceName,D.namespace,D.group.name,D.rule)}function u(D,x){return(0,n.Kl)(D)&&(0,n.Kl)(x)?D.uid===x.uid:(0,n.E4)(D)&&(0,n.E4)(x)?D.groupName===x.groupName&&D.namespace===x.namespace&&D.rulerRuleHash===x.rulerRuleHash&&D.ruleSourceName===x.ruleSourceName:(0,n.qE)(D)&&(0,n.qE)(x)?D.groupName===x.groupName&&D.namespace===x.namespace&&D.ruleHash===x.ruleHash&&D.ruleSourceName===x.ruleSourceName:!1}const r="cri",d="pri";function o(D){return D.replace(/\$/g,"_DOLLAR_")}function m(D){return D.replace(/\_DOLLAR\_/g,"$")}function l(D){return D.replace(/\//g,"").replace(/\\/g,"")}function p(D){return D.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function g(D,x=!1){const b=(x?decodeURIComponent(D):D).split("$");if(b.length===1)return{uid:D,ruleSourceName:"grafana"};if(b.length===5){const[R,S,O,U,I]=b.map(m).map(p);if(R===r)return{ruleSourceName:S,namespace:O,groupName:U,rulerRuleHash:I};if(R===d)return{ruleSourceName:S,namespace:O,groupName:U,ruleHash:I}}throw new Error(`Failed to parse rule location: ${D}`)}function y(D,x=!1){if(D)try{return g(D,x)}catch{return}}function v(D){return(0,n.Kl)(D)?D.uid:(0,n.E4)(D)?[r,D.ruleSourceName,D.namespace,D.groupName,D.rulerRuleHash].map(String).map(o).map(l).join("$"):[d,D.ruleSourceName,D.namespace,D.groupName,D.ruleHash].map(String).map(o).map(l).join("$")}function E(D){let x=0;if(D.length===0)return x;for(let M=0;M<D.length;M++){const b=D.charCodeAt(M);x=(x<<5)-x+b,x=x&x}return x}function h(D){if((0,n.yF)(D))return E(JSON.stringify([D.record,D.expr,a(D.labels)])).toString();if((0,n.cG)(D))return E(JSON.stringify([D.alert,D.expr,a(D.annotations),a(D.labels)])).toString();if((0,n.Pc)(D))return D.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function C(D){if((0,n.OP)(D))return E(JSON.stringify([D.type,D.query,a(D.labels)])).toString();if((0,n.x_)(D))return E(JSON.stringify([D.type,D.query,a(D.annotations),a(D.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function a(D){return JSON.stringify(Object.entries(D||{}).sort((x,M)=>x[0].localeCompare(M[0])))}function P(D){return(0,n.Kl)(D)?t.GC:D.ruleSourceName}},79662:(Y,T,e)=>{"use strict";e.d(T,{Aq:()=>b,C7:()=>M,E:()=>p,E4:()=>E,Jq:()=>O,Kl:()=>v,OP:()=>d,PW:()=>U,Pc:()=>l,Re:()=>x,SS:()=>P,Wd:()=>h,cG:()=>o,m$:()=>y,pB:()=>g,qE:()=>C,ub:()=>S,vU:()=>a,x_:()=>r,yF:()=>m});var t=e(82897),n=e.n(t),c=e(97865),s=e(46063),i=e(734),f=e(37190),u=e(45849);function r(I){return typeof I=="object"&&I.type===s.pz.Alerting}function d(I){return typeof I=="object"&&I.type===s.pz.Recording}function o(I){return typeof I=="object"&&"alert"in I}function m(I){return typeof I=="object"&&"record"in I}function l(I){return typeof I=="object"&&"grafana_alert"in I}function p(I){return I.rulerRule&&l(I.rulerRule)&&Boolean(I.rulerRule.grafana_alert.is_paused)}function g(I){return JSON.stringify(I.labels)}function y(I){return I.error&&I.error?.message?.includes(f.jZ)}function v(I){return"uid"in I}function E(I){return"rulerRuleHash"in I}function h(I){return Object.values(s.pz).includes(I)}function C(I){return"ruleHash"in I}function a(I){switch(I){case"ok":return i.VG.Ok;case"nodata":return i.VG.NoData;case"error":case"err":return i.VG.Error;case"unknown":return i.VG.Unknown;default:return}}function P(I){return I===s.x_.Inactive?"Normal":(0,t.capitalize)(I)}const D=I=>I.reduce((F,{dataSourceName:w,name:K,groups:L})=>(L.forEach(({name:V,rules:H})=>{H.forEach(j=>{r(j)&&F.push({dataSourceName:w,namespaceName:K,groupName:V,rule:j})})}),F),[]),x=I=>r(I.promRule)?I.promRule:null,M=I=>I.reduce((F,{rulesSource:w,name:K,groups:L})=>(L.forEach(({name:V,rules:H})=>{H.forEach(j=>{j.promRule&&r(j.promRule)&&F.push({dataSourceName:(0,u.EG)(w),namespaceName:K,groupName:V,...j})})}),F),[]);function b(I){let F;return Object.values(c.Z).includes(I)?F=I:F=(0,s.ED)(I),R[F]}const R={[s.x_.Inactive]:"good",[s.x_.Firing]:"bad",[s.x_.Pending]:"warning",[s.bj.Alerting]:"bad",[s.bj.Error]:"bad",[s.bj.NoData]:"info",[s.bj.Normal]:"good",[s.bj.Pending]:"warning",[c.Z.NoData]:"info",[c.Z.Paused]:"warning",[c.Z.Alerting]:"bad",[c.Z.OK]:"good",[c.Z.Pending]:"warning",[c.Z.Unknown]:"info"};function S(I){return I?.alerts?I.alerts.reduce((F,w)=>{const K=(0,s.ED)(w.state)!==s.bj.Normal;if(w.activeAt&&K){const L=new Date(w.activeAt);if(F===null||F.getTime()>L.getTime())return L}return F},null):null}function O(I){return Array.isArray(I.source_tenants)}function U(I){return l(I)?I.grafana_alert.title:o(I)?I.alert:m(I)?I.record:""}},20383:(Y,T,e)=>{"use strict";e.d(T,{bG:()=>n,gV:()=>o,nd:()=>d,qr:()=>s,wd:()=>i});var t=e(4528);function n(m){const l=m.match(/(\d+)(\w+)/);if(l)return[Number(l[1]),l[2]];throw new Error(`Invalid interval description: ${m}`)}function c(m){const{sec:l,count:p}=describeInterval(m);return l*p}const s=Object.entries(t.t).map(([m,l])=>({label:m[0].toUpperCase()+m.slice(1),value:l}));function i(m){try{return d(m),!0}catch{return!1}}const f={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},u=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),r=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(t.t).join(", ")}`);function d(m){let l=m,p=[];function g(v){const E=u.exec(v),h=E?.groups?.value&&E?.groups?.type;if(!E||!h)throw r;E&&E.groups?.value&&E.groups?.type&&(l=l.replace(E[0],""),p.push([Number(E.groups.value),E.groups.type])),l&&g(l)}if(g(m),!p.length)throw r;return p.reduce((v,[E,h])=>{const C=E*f[h];return v+C},0)}const o=m=>m.includes("0001-01-01T00")},93411:(Y,T,e)=>{"use strict";e.d(T,{_:()=>c,u:()=>n});var t=e(35645);function n(s,i){const u=new URLSearchParams(i).toString();return`${t.v.appSubUrl}${s}${u?`?${u}`:""}`}function c(s,i){const u=new URLSearchParams(i).toString();try{const r=new URL(t.v.appSubUrl,t.v.appUrl);return r.pathname=s,`${r.href}${u?`?${u}`:""}`}catch{return n(s,i)}}},70659:(Y,T,e)=>{"use strict";e.d(T,{Dl:()=>s,_E:()=>c,lK:()=>i,xD:()=>n});var t=e(54899);function n(f){return(0,t.i)().post("/api/annotations",f)}function c(f){return(0,t.i)().put(`/api/annotations/${f.id}`,f)}function s(f){return(0,t.i)().delete(`/api/annotations/${f.id}`)}async function i(){return(await(0,t.i)().get("/api/annotations/tags")).result.tags.map(({tag:u,count:r})=>({term:u,count:r}))}},86953:(Y,T,e)=>{"use strict";e.d(T,{r:()=>o});var t=e(59980),n=e(39859),c=e(9471),s=e(47891),i=e(206),f=e(75434),u=e(573);let r=100;function d(){return"AQ"+r++}function o(m,l,p){const g={...u.yA,...l.annotations},y={...g.getDefaultQuery?.(),...p},v=g.prepareAnnotation(y);if(!v)return(0,t.of)({});const E=g.prepareQuery(v);if(!E)return(0,t.of)({});const h=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,C=s.calculateInterval(m.range,h,l.interval),a={__interval:{text:C.interval,value:C.interval},__interval_ms:{text:C.intervalMs.toString(),value:C.intervalMs},__annotation:{text:v.name,value:v}},P={startTime:Date.now(),requestId:d(),range:m.range,maxDataPoints:h,scopedVars:a,...C,app:i.zj.Dashboard,publicDashboardAccessToken:m.dashboard.meta.publicDashboardAccessToken,timezone:m.dashboard.timezone,targets:[{...E,refId:"Anno"}]};return(0,f.v7)(l,P).pipe((0,n.z)(D=>{const x=D?.series.length?D.series:D.annotations;return x?.length?g.processEvents(v,x).pipe((0,c.U)(M=>({panelData:D,events:M}))):(0,t.of)({panelData:D,events:[]})}))}},573:(Y,T,e)=>{"use strict";e.d(T,{$w:()=>h,r0:()=>p,yA:()=>m,yr:()=>C});var t=e(82897),n=e.n(t),c=e(59980),s=e(39859),i=e(9471),f=e(50928),u=e(99098),r=e(30471),d=e(39834),o=e(47694);const m={prepareAnnotation:a=>{if((0,t.isString)(a?.query)){const{query:P,...D}=a;return{...D,target:{refId:"annotation_query",query:P},mappings:{}}}return a},prepareQuery:a=>a.target,processEvents:(a,P)=>v(P,a.mappings)};function l(){return a=>a.pipe((0,s.z)(P=>{if(!P?.length)return(0,c.of)(void 0);if(P.length===1)return(0,c.of)(P[0]);const D={interpolate:x=>x};return(0,c.of)(P).pipe(f.Y.mergeTransformer.operator({},D),(0,i.U)(x=>x[0]))}))}const p=[{key:"time",field:a=>a.fields.find(P=>P.type===u.fS.time),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:a=>a.fields.find(P=>P.type===u.fS.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],g=[{key:"color"},{key:"isRegion"},{key:"source"}],y=[...o.vc.isPublicDashboardView?g:[],...p,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function v(a,P){return(0,c.of)(a).pipe(l(),(0,i.U)(D=>{if(!D?.length)return[];let x=!1,M=!1;const b={};for(const O of D.fields){const U=(0,r.CZ)(O,D);b[U.toLowerCase()]=O}P||(P={});const R=[];for(const O of y){const U=P[O.key]||{};if(U.source===d.L.Skip)continue;const I={key:O.key,split:O.split};if(U.source===d.L.Text)I.text=U.value;else{const F=(U.value||O.key).toLowerCase();I.field=b[F],!I.field&&O.field&&(I.field=O.field(D))}(I.field||I.text)&&(R.push(I),I.key==="time"?x=!0:I.key==="text"&&(M=!0))}if(!x||!M)return console.error("Cannot process annotation fields. No time or text present."),[];const S=[];for(let O=0;O<D.length;O++){const U={type:"default",color:"red"};for(const I of R){let F;if(I.text)F=I.text;else if(I.field&&(F=I.field.values[O],F!==void 0&&I.regex)){const w=I.regex.exec(F);w&&(F=w[1]?w[1]:w[0])}F!=null&&(I.split&&typeof F=="string"&&(F=F.split(",")),U[I.key]=F)}S.push(U)}return S}))}const E=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];function h(a){const{type:P}=a;return!(P==="datasource"||E.includes(P))}function C(a){const{type:P}=a;return E.includes(P)}},56777:(Y,T,e)=>{"use strict";e.d(T,{ZP:()=>o,dF:()=>f,iK:()=>s,j4:()=>i,nQ:()=>r,ql:()=>u});var t=e(62992);const n={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",migrationResult:{total:0,migrated:0,failed:0,failedApikeyIDs:[0],failedDetails:[]}},c=(0,t.oM)({name:"apiKeys",initialState:n,reducers:{apiKeysLoaded:(m,l)=>{const{keys:p,keysIncludingExpired:g}=l.payload,y=l.payload.keys.length===0&&l.payload.keysIncludingExpired.length>0?!0:m.includeExpired;return{...m,hasFetched:!0,keys:p,keysIncludingExpired:g,includeExpired:y}},setSearchQuery:(m,l)=>({...m,searchQuery:l.payload}),includeExpiredToggled:m=>({...m,includeExpired:!m.includeExpired}),isFetching:m=>({...m,hasFetched:!1}),setMigrationResult:(m,l)=>({...m,migrationResult:l.payload})}}),{apiKeysLoaded:s,includeExpiredToggled:i,isFetching:f,setSearchQuery:u,setMigrationResult:r}=c.actions,o={apiKeys:c.reducer}},85389:(Y,T,e)=>{"use strict";e.d(T,{AB:()=>i,AW:()=>s,ZP:()=>p,_E:()=>u,uX:()=>f});var t=e(62992);const n={settings:{},providerStatuses:{},isLoading:!1},c=(0,t.oM)({name:"authConfig",initialState:n,reducers:{settingsUpdated:(g,y)=>({...g,settings:y.payload}),providerStatusesLoaded:(g,y)=>({...g,providerStatuses:y.payload}),loadingBegin:g=>({...g,isLoading:!0}),loadingEnd:g=>({...g,isLoading:!1}),setError:(g,y)=>({...g,updateError:y.payload}),resetError:g=>({...g,updateError:void 0}),setWarning:(g,y)=>({...g,warning:y.payload}),resetWarning:g=>({...g,warning:void 0})}}),{settingsUpdated:s,providerStatusesLoaded:i,loadingBegin:f,loadingEnd:u,setError:r,resetError:d,setWarning:o,resetWarning:m}=c.actions,p={authConfig:c.reducer}},24290:(Y,T,e)=>{"use strict";e.d(T,{CN:()=>i.CN,Zi:()=>u,t4:()=>d,zs:()=>r});var t=e(90701),n=e(65583),c=e(52666),s=e(54899),i=e(31545);function f({baseURL:o}){async function m(l){try{const{data:p,...g}=await(0,n.n)((0,s.i)().fetch({...l,url:o+l.url,showErrorAlert:l.showErrorAlert}));return{data:p,meta:g}}catch(p){return l.manageError?l.manageError(p):{error:p}}}return m}const u=(0,t.LC)({reducerPath:"browseDashboardsAPI",baseQuery:f({baseURL:"/api"}),endpoints:o=>({getFolder:o.query({query:m=>({url:`/folders/${m}`,params:{accesscontrol:!0}})}),getAffectedItems:o.query({queryFn:async m=>{const p=Object.keys(m.folder).filter(v=>m.folder[v]).map(v=>(0,s.i)().get(`/api/folders/${v}/counts`)),g=await Promise.all(p),y={folder:Object.values(m.folder).filter(c.fQ).length,dashboard:Object.values(m.dashboard).filter(c.fQ).length,libraryPanel:0,alertRule:0};for(const v of g)y.folder+=v.folder,y.dashboard+=v.dashboard,y.alertRule+=v.alertrule??0;return{data:y}}})})}),{useGetAffectedItemsQuery:r,useGetFolderQuery:d}=u},3918:(Y,T,e)=>{"use strict";e.d(T,{Go:()=>u,J1:()=>d,hn:()=>r,iM:()=>f,qs:()=>i});var t=e(54899),n=e(10216),c=e(55185),s=e(27876);const i=(0,s.createAsyncThunk)("browseDashboards/fetchChildren",async o=>{const m=o===n.YQ?void 0:o;return await(0,c.o)(m,void 0,!0)}),f=(0,s.createAsyncThunk)("browseDashboards/deleteDashboard",async o=>(0,t.i)().delete(`/api/dashboards/uid/${o}`)),u=(0,s.createAsyncThunk)("browseDashboards/deleteFolder",async o=>(0,t.i)().delete(`/api/folders/${o}`,void 0,{params:{forceDeleteRules:!1}})),r=(0,s.createAsyncThunk)("browseDashboards/moveDashboard",async({dashboardUID:o,destinationUID:m})=>{const p={dashboard:(await(0,t.i)().get(`/api/dashboards/uid/${o}`)).dashboard,folderUid:m,overwrite:!1};return(0,t.i)().post("/api/dashboards/db",{message:"",...p})}),d=(0,s.createAsyncThunk)("browseDashboards/moveFolder",async({folderUID:o,destinationUID:m})=>(0,t.i)().post(`/api/folders/${o}/move`,{parentUID:m}))},88612:(Y,T,e)=>{"use strict";e.d(T,{ZP:()=>h,u6:()=>E,xm:()=>y,wk:()=>v});var t={};e.r(t),e.d(t,{extraReducerFetchChildrenFulfilled:()=>f,setAllSelection:()=>d,setFolderOpenState:()=>u,setItemSelectionState:()=>r});var n=e(62992),c=e(3918),s=e(10216),i=e(29910);function f(C,a){const P=a.meta.arg,D=a.payload;if(!P||P===s.YQ){C.rootItems=D;return}if(C.childrenByParentUID[P]=D,C.selectedItems.folder[P])for(const M of D)C.selectedItems[M.kind][M.uid]=!0}function u(C,a){const{folderUID:P,isOpen:D}=a.payload;C.openFolders[P]=D}function r(C,a){const{item:P,isSelected:D}=a.payload;function x(b,R){if(C.selectedItems[b][R]=D,b!=="folder")return;let S=C.childrenByParentUID[R]??[];for(const O of S)x(O.kind,O.uid)}x(P.kind,P.uid);let M=P.parentUID;for(;M;){const b=(0,i.i)(C.rootItems??[],C.childrenByParentUID,M);if(!b)break;D||(C.selectedItems[b.kind][b.uid]=!1),M=b.parentUID}C.selectedItems.$all=C.rootItems?.every(b=>C.selectedItems[b.kind][b.uid])??!1}function d(C,a){const{isSelected:P,folderUID:D}=a.payload;if(C.selectedItems.$all=P,P){let M=function(b){const R=b?C.childrenByParentUID[b]:C.rootItems;if(R)for(const S of R)C.selectedItems[S.kind][S.uid]=P,S.kind==="folder"&&M(S.uid)};var x=M;M(D)}else for(const M in C.selectedItems){if(!(M==="dashboard"||M==="panel"||M==="folder"))continue;const b=C.selectedItems[M];for(const R in b)b[R]=P}}const{extraReducerFetchChildrenFulfilled:o,...m}=t,l={rootItems:void 0,childrenByParentUID:{},openFolders:{},selectedItems:{dashboard:{},folder:{},panel:{},$all:!1}},p=(0,n.oM)({name:"browseDashboards",initialState:l,reducers:m,extraReducers:C=>{C.addCase(c.qs.fulfilled,o)}}),g=p.reducer,{setFolderOpenState:y,setItemSelectionState:v,setAllSelection:E}=p.actions,h={browseDashboards:g}},29910:(Y,T,e)=>{"use strict";e.d(T,{i:()=>t});function t(n,c,s){for(const i of n)if(i.uid===s)return i;for(const i in c){const f=c[i];if(f){for(const u of f)if(u.uid===s)return u}}}},86475:(Y,T,e)=>{"use strict";e.d(T,{D:()=>t,Z:()=>n});const t="connections",n={Base:`/${t}`,DataSources:`/${t}/datasources`,DataSourcesNew:`/${t}/datasources/new`,DataSourcesEdit:`/${t}/datasources/edit/:uid`,DataSourcesDashboards:`/${t}/datasources/edit/:uid/dashboards`,AddNewConnection:`/${t}/add-new-connection`,DataSourcesDetails:`/${t}/datasources/:id`}},10655:(Y,T,e)=>{"use strict";e.d(T,{Bl:()=>C,FJ:()=>y,Mi:()=>l,RS:()=>E,Rh:()=>d,WJ:()=>g,Ym:()=>o,bS:()=>p,jI:()=>h,r5:()=>v,zZ:()=>m});var t=e(90701),n=e(65583),c=e(54899),s=e(659),i=e(60499);function f(a){return typeof a=="object"&&a!=null&&"error"in a}const u=({baseUrl:a})=>async P=>{try{const{data:D,...x}=await(0,n.n)((0,c.i)().fetch({...P,url:a+P.url,showErrorAlert:P.showErrorAlert}));return{data:D,meta:x}}catch(D){return P.manageError?P.manageError(D):{error:D}}},r=a=>({error:(0,c.kW)(a)&&a.status!==404?a:null}),d=(0,t.LC)({reducerPath:"publicDashboardApi",baseQuery:u({baseUrl:"/api"}),tagTypes:["PublicDashboard","AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"],refetchOnMountOrArgChange:!0,endpoints:a=>({getPublicDashboard:a.query({query:P=>({url:`/dashboards/uid/${P}/public-dashboards`,manageError:r,showErrorAlert:!1}),async onQueryStarted(P,{dispatch:D,queryFulfilled:x}){try{await x}catch(M){f(M)&&(0,c.kW)(M.error)&&D((0,s.$l)((0,i.t_)(M.error.data.message)))}},providesTags:(P,D,x)=>[{type:"PublicDashboard",id:x}]}),createPublicDashboard:a.mutation({query:P=>({url:`/dashboards/uid/${P.dashboard.uid}/public-dashboards`,method:"POST",data:P.payload}),async onQueryStarted({dashboard:P,payload:D},{dispatch:x,queryFulfilled:M}){const{data:b}=await M;x((0,s.$l)((0,i.AT)("Dashboard is public!"))),P.updateMeta({publicDashboardUid:b.uid,publicDashboardEnabled:b.isEnabled})},invalidatesTags:(P,D,{dashboard:x})=>[{type:"PublicDashboard",id:x.uid}]}),updatePublicDashboard:a.mutation({query:P=>({url:`/dashboards/uid/${P.dashboard.uid}/public-dashboards/${P.payload.uid}`,method:"PUT",data:P.payload}),async onQueryStarted({dashboard:P,payload:D},{dispatch:x,queryFulfilled:M}){const{data:b}=await M;x((0,s.$l)((0,i.AT)("Public dashboard updated!"))),P.updateMeta({publicDashboardUid:b.uid,publicDashboardEnabled:b.isEnabled})},invalidatesTags:(P,D,{payload:x})=>[{type:"PublicDashboard",id:x.dashboardUid}]}),addRecipient:a.mutation({query:()=>({url:""})}),deleteRecipient:a.mutation({query:()=>({url:""})}),reshareAccessToRecipient:a.mutation({query:()=>({url:""})}),getActiveUsers:a.query({query:()=>({url:"/"}),providesTags:["UsersWithActiveSessions"]}),getActiveUserDashboards:a.query({query:()=>({url:""}),providesTags:(P,D,x)=>[{type:"ActiveUserDashboards",id:x}]}),listPublicDashboards:a.query({query:()=>({url:"/dashboards/public-dashboards"}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:a.mutation({query:P=>({url:`/dashboards/uid/${P.dashboardUid}/public-dashboards/${P.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:P,uid:D},{dispatch:x,queryFulfilled:M}){await M,x((0,s.$l)((0,i.AT)("Public dashboard deleted!"))),P?.updateMeta({publicDashboardUid:D,publicDashboardEnabled:!1})},invalidatesTags:(P,D,{dashboardUid:x})=>[{type:"PublicDashboard",id:x},"AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"]})})}),{useGetPublicDashboardQuery:o,useCreatePublicDashboardMutation:m,useUpdatePublicDashboardMutation:l,useDeletePublicDashboardMutation:p,useListPublicDashboardsQuery:g,useAddRecipientMutation:y,useDeleteRecipientMutation:v,useReshareAccessToRecipientMutation:E,useGetActiveUsersQuery:h,useGetActiveUserDashboardsQuery:C}=d},134:(Y,T,e)=>{"use strict";e.d(T,{E:()=>o});var t=e(82897),n=e(86647),c=e(47694),s=e(86648),i=e(6297),f=e(59096),u=e(15546),r=e(10672);function d(m){return m.libraryPanel&&typeof m.libraryPanel.name=="string"&&typeof m.libraryPanel.uid=="string"}class o{async makeExportable(l){l.cleanUpRepeats();const p=l.getSaveModelClone();p.id=null,l.processRepeats();const g=[],y={},v={},E={},h=new Map;for(const D of p.getVariables())E[D.name]=D;const C=(D,x)=>{if(D.datasource===void 0){D.datasource=x;return}let M=D.datasource,b=null;const R=M?.uid;return R&&R.indexOf("$")===0&&(b=E[R.substring(1)],b&&b.current&&(M=b.current.value)),(0,n.F)().get(M).then(S=>{if(S.meta?.builtIn||(y["datasource"+S.meta?.id]={type:"datasource",id:S.meta.id,name:S.meta.name,version:S.meta.info.version||"1.0.0"},b))return;const O="DS_"+S.name.replace(" ","_").toUpperCase();v[O]={name:O,label:S.name,description:"",type:"datasource",pluginId:S.meta?.id,pluginName:S.meta?.name},D.datasource={type:S.meta.id,uid:"${"+O+"}"}})},a=async D=>{if(D.type!=="row"){if(await C(D),D.targets)for(const M of D.targets)await C(M,D.datasource);const x=c.ZP.panels[D.type];x&&(y["panel"+x.id]={type:"panel",id:x.id,name:x.name,version:x.info.version})}},P=async D=>{if((0,i.V)(D)){const{name:x,uid:M}=D.libraryPanel;let b=D.libraryPanel.model;b||(b=(await(0,s.Mh)(M,!0)).model),await C(b);const{gridPos:R,id:S,...O}=b;h.has(M)||h.set(M,{name:x,uid:M,kind:f.V.Panel,model:O})}};try{for(const M of p.panels)if(await a(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const b of M.panels)await a(b);for(const M of p.getVariables())(0,u.Xh)(M)&&(await C(M),M.options=[],M.current={},M.refresh=M.refresh!==r.Bd.never?M.refresh:r.Bd.onDashboardLoad);for(const M of p.annotations.list)await C(M);y.grafana={type:"grafana",id:"grafana",name:"Grafana",version:c.ZP.buildInfo.version};for(const M of p.panels)if(await P(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const b of M.panels)await P(b);(0,t.each)(v,M=>{g.push(M)});for(const M of p.getVariables())if((0,u.VC)(M)){const b="VAR_"+M.name.replace(" ","_").toUpperCase();g.push({name:b,type:"constant",label:M.label||M.name,value:M.query,description:""}),M.query="${"+b+"}",M.current={value:M.query,text:M.query,selected:!1},M.options=[M.current]}const D=[...h.entries()].reduce((M,[b,R])=>(M[b]=R,M),{}),x=(0,t.defaults)({__inputs:g,__elements:D,__requires:(0,t.sortBy)(y,["id"])},p);for(let M=0;M<x.panels.length;M++){const b=x.panels[M];d(b)&&(x.panels[M]={gridPos:b.gridPos,id:b.id,libraryPanel:{uid:b.libraryPanel.uid,name:b.libraryPanel.name}})}return x}catch(D){return console.error("Export failed:",D),{error:D}}}}},64503:(Y,T,e)=>{"use strict";e.d(T,{u:()=>i});var t=e(9892),n=e(66111),c=e(72648),s=e(8180);const i=({icon:u,iconType:r,iconSize:d,tooltip:o,onClick:m,children:l})=>{const p=(0,c.wW)(f);return n.createElement("div",{className:p.noBorderContainer},u&&n.createElement(s.h,{name:u,size:d,iconType:r,tooltip:o,tooltipPlacement:"bottom",onClick:m}),l)},f=u=>({noBorderContainer:t.css`
    padding: 0 ${u.spacing(.5)};
    display: flex;
  `})},37877:(Y,T,e)=>{"use strict";e.d(T,{C:()=>o});var t=e(66111),n=e(47406),c=e(82378),s=e(5562),i=e(32873),f=e(77582),u=e(35287),r=e(19349),d=e(45984);class o extends t.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=l=>{(0,r.$t)().setAutoRefresh(l),this.forceUpdate()},this.onRefresh=()=>((0,r.$t)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{f.h$.publish(new d.Qt({direction:d.Im.Left}))},this.onMoveForward=()=>{f.h$.publish(new d.Qt({direction:d.Im.Right}))},this.onChangeTimePicker=l=>{const{dashboard:p}=this.props,g=p.timepicker,y=g.nowDelay&&l.raw.to==="now",v=n.isMathString(l.raw.from)?l.raw.from:l.from,E=n.isMathString(l.raw.to)?l.raw.to:l.to,h={from:v,to:y?"now-"+g.nowDelay:E};(0,r.$t)().setTime(h)},this.onChangeTimeZone=l=>{this.props.dashboard.timezone=l,this.props.onChangeTimeZone(l),this.onRefresh()},this.onChangeFiscalYearStartMonth=l=>{this.props.dashboard.fiscalYearStartMonth=l,this.onRefresh()},this.onZoom=()=>{f.h$.publish(new d.p8({scale:2}))}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(c.md,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:l,isOnCanvas:p}=this.props,{refresh_intervals:g}=l.timepicker,y=(0,r.$t)().getValidIntervals(g||s.o5),v=(0,r.$t)().timeRange(),E=l.getTimezone(),h=l.fiscalYearStartMonth,C=l.panelInEdit?.isEditing;return t.createElement(t.Fragment,null,t.createElement(i.a,{value:v,onChange:this.onChangeTimePicker,timeZone:E,fiscalYearStartMonth:h,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:p}),t.createElement(s.dP,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefresh,value:l.refresh,intervals:y,isOnCanvas:p,tooltip:(0,u.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:C}))}}},15678:(Y,T,e)=>{"use strict";e.d(T,{t:()=>se});var t=e(9892),n=e(66111),c=e(67948),s=e(56895),i=e(63418),f=e(68183),u=e(37932),r=e(32434),d=e(98102),o=e(34719),m=e(26202),l=e(64319),p=e(5191),g=e(8125),y=e(95379),v=e(9956),E=e(47694),h=e(60499),C=e(77582);function a(pe,de){const[Me,Ke]=(0,n.useState)();return(0,n.useEffect)(()=>{const st=pe.subscribe(de,Ke);return()=>st.unsubscribe()},[pe,de]),Me}var P=e(35287),D=e(61962),x=e(72648),M=e(71698),b=e(31403),R=e(39904),S=e(41818),O=e(95130),U=e(663),I=e(27876),F=e(58790);const w=({dashboard:pe})=>{const de=(0,n.useMemo)(()=>(0,U.uZ)(),[]),Me=(0,I.useDispatch)(),Ke=(0,I.useSelector)(st=>st.dashboard.initialDatasource);return n.createElement(O.v,null,n.createElement(O.v.Item,{key:"add-visualisation",label:(0,P.t)("dashboard.add-menu.visualization","Visualization"),testId:f.wl.components.PageToolbar.itemButton("Add new visualization menu item"),onClick:()=>{const st=(0,U.LU)(pe,Ke);(0,S.ff)("dashboards_toolbar_add_clicked",{item:"add_visualization"}),u.E1.partial({editPanel:st}),Me((0,F.Rd)(void 0))}}),n.createElement(O.v.Item,{key:"add-row",label:(0,P.t)("dashboard.add-menu.row","Row"),testId:f.wl.components.PageToolbar.itemButton("Add new row menu item"),onClick:()=>{(0,S.ff)("dashboards_toolbar_add_clicked",{item:"add_row"}),(0,U.L_)(pe)}}),n.createElement(O.v.Item,{key:"add-panel-lib",label:(0,P.t)("dashboard.add-menu.import","Import from library"),testId:f.wl.components.PageToolbar.itemButton("Add new panel from panel library menu item"),onClick:()=>{(0,S.ff)("dashboards_toolbar_add_clicked",{item:"import_from_library"}),(0,U.RB)(pe)}}),n.createElement(O.v.Item,{key:"add-panel-clipboard",label:(0,P.t)("dashboard.add-menu.paste-panel","Paste panel"),testId:f.wl.components.PageToolbar.itemButton("Add new panel from clipboard menu item"),onClick:()=>{(0,S.ff)("dashboards_toolbar_add_clicked",{item:"paste_panel"}),(0,U.Dh)(pe,de)},disabled:!de}))},K=({dashboard:pe})=>{const de=L((0,x.l4)()),[Me,Ke]=(0,n.useState)(!1);return n.createElement(M.L,{overlay:()=>n.createElement(w,{dashboard:pe}),placement:"bottom",offset:[0,6],onVisibleChange:Ke},n.createElement(b.zx,{icon:"panel-add",size:"lg",fill:"text",className:(0,t.cx)(de.button,de.buttonIcon,de.buttonText),"data-testid":f.wl.components.PageToolbar.itemButton("Add panel button")},n.createElement(P.cC,{i18nKey:"dashboard.toolbar.add"},"Add"),n.createElement(R.J,{name:Me?"angle-up":"angle-down",size:"lg"})))};function L(pe){return{button:(0,t.css)({label:"add-panel-button",padding:pe.spacing(.5,.5,.5,.75),height:pe.spacing((pe.components.height.sm+pe.components.height.md)/2),borderRadius:pe.shape.radius.default}),buttonIcon:(0,t.css)({svg:{margin:0}}),buttonText:(0,t.css)({label:"add-panel-button-text",fontSize:pe.typography.body.fontSize,span:{marginLeft:pe.spacing(.67)}})}}var V=e(63205),H=e(9398),j=e(10079),A=e(54294),_=e(45984),k=e(64503),Q=e(37877),re=e(96044),Z=e(53818);const oe=({dashboard:pe})=>{const[de]=(0,re.K)(),{showModal:Me,hideModal:Ke}=(0,n.useContext)(p.kr);return(0,n.useEffect)(()=>(de.shareView&&Me(Z.ShareModal,{dashboard:pe,onDismiss:Ke,activeTab:String(de.shareView)}),()=>{Ke()}),[Me,Ke,pe,de.shareView]),n.createElement(k.u,{tooltip:(0,P.t)("dashboard.toolbar.share","Share dashboard or panel"),icon:"share-alt",iconSize:"lg",onClick:()=>{Me(Z.ShareModal,{dashboard:pe,onDismiss:Ke})}})},G={setStarred:D.OQ,updateTimeZoneForSession:A.YT},le=(0,c.connect)(null,G),ge=f.wl.pages.Dashboard.DashNav,ne=[],ue=[];function te(pe){ne.push(pe)}function me(pe){ue.push(pe)}const q=n.memo(pe=>{(0,s.TH)();const de=(0,r.N)();a(pe.dashboard.events,_.hS);const Me=pe.dashboard.snapshot?.originalUrl??"",Ke=()=>{window.location.href=i.QX.sanitizeUrl(pe.dashboard.snapshot.originalUrl)},st=(0,h.iG)(),Ie=()=>{try{const ht=new URL(i.QX.sanitizeUrl(Me),E.ZP.appUrl),vt=new URL(E.ZP.appUrl);ht.host!==vt.host?C.h$.publish(new _.Dn({component:d.s,props:{title:"Proceed to external site?",modalClass:ae,body:n.createElement(n.Fragment,null,n.createElement("p",null,"This link connects to an external website at"," ",n.createElement("code",null,Me)),n.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:Ke}})):Ke()}catch(ht){st.error("Invalid URL",ht instanceof Error?ht.message:void 0)}},Ve=()=>{const ht=(0,H.h4)(),{dashboard:vt,setStarred:bt}=pe;ht.starDashboard(vt.uid,Boolean(vt.meta.isStarred)).then(ct=>{bt({id:vt.uid,title:vt.title,url:vt.meta.url??"",isStarred:ct}),vt.meta.isStarred=ct,de()})},_e=()=>{u.E1.partial({editview:"settings"})},tt=()=>{j.r0.prev()},dt=()=>{j.r0.next()},Oe=()=>{j.r0.stop(),de()},ye=(ht,vt)=>{ht.map((bt,ct)=>{const Pt=bt.component,ie=n.createElement(Pt,{...pe,key:`button-custom-${ct}`});typeof bt.index=="number"?vt.splice(bt.index,0,ie):vt.push(ie)})},Pe=()=>j.r0.isPlaying,be=()=>{const{dashboard:ht,kioskMode:vt}=pe,{canStar:bt,canShare:ct,isStarred:Pt}=ht.meta,ie=[];if(vt||Pe())return[];if(bt){let Ce=Pt?(0,P.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,P.t)("dashboard.toolbar.mark-favorite","Mark as favorite");ie.push(n.createElement(k.u,{tooltip:Ce,icon:Pt?"favorite":"star",iconType:Pt?"mono":"default",iconSize:"lg",onClick:Ve,key:"button-star"}))}return ct&&ie.push(n.createElement(oe,{key:"button-share",dashboard:ht})),ht.meta.publicDashboardEnabled&&ie.push(n.createElement(o.V,{key:"public-dashboard",name:"Public",colorIndex:5,"data-testid":ge.publicDashboardTag})),ye(ne,ie),ie},Be=()=>n.createElement(m.h,{key:"playlist-buttons"},n.createElement(l.h,{tooltip:(0,P.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:tt,narrow:!0}),n.createElement(l.h,{onClick:Oe},n.createElement(P.cC,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist")),n.createElement(l.h,{tooltip:(0,P.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:dt,narrow:!0})),ze=()=>{const{dashboard:ht,updateTimeZoneForSession:vt,hideTimePicker:bt}=pe;return bt?null:n.createElement(Q.C,{dashboard:ht,onChangeTimeZone:vt,key:"time-controls"})},lt=()=>{const{dashboard:ht,onAddPanel:vt,isFullscreen:bt,kioskMode:ct}=pe,{canSave:Pt,canEdit:ie,showSettings:Ce}=ht.meta,{snapshot:Ne}=ht,Ze=Ne&&Ne.originalUrl,Qe=[];return Pe()?[Be(),ze()]:ct===I.KioskMode.TV?[ze()]:(ie&&!bt&&(E.ZP.featureToggles.emptyDashboardPage?Qe.push(n.createElement(K,{dashboard:ht,key:"panel-add-dropdown"})):Qe.push(n.createElement(l.h,{tooltip:(0,P.t)("dashboard.toolbar.add-panel","Add panel"),icon:"panel-add",iconSize:"xl",onClick:vt,key:"button-panel-add"}))),Pt&&!bt&&Qe.push(n.createElement(p.JY,{key:"button-save"},({showModal:Le,hideModal:Ue})=>n.createElement(l.h,{tooltip:(0,P.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{Le(V.d,{dashboard:ht,onDismiss:Ue})}}))),Ze&&Qe.push(n.createElement(l.h,{tooltip:(0,P.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:Ie,icon:"link",key:"button-snapshot"})),Ce&&Qe.push(n.createElement(l.h,{tooltip:(0,P.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:_e,key:"button-settings"})),ye(ue,Qe),Qe.push(ze()),E.ZP.featureToggles.scenes&&Qe.push(n.createElement(l.h,{key:"button-scenes",tooltip:"View as Scene",icon:"apps",onClick:()=>u.E1.push(`/scenes/dashboard/${ht.uid}`)})),Qe)};return n.createElement(y.A,{actions:n.createElement(n.Fragment,null,be(),n.createElement(v.M,{leftActionsSeparator:!0}),n.createElement(g.R,{alignment:"right"},lt()))})});q.displayName="DashNav";const se=le(q),ae=(0,t.css)({width:"max-content",maxWidth:"80vw"})},42557:(Y,T,e)=>{"use strict";e.d(T,{P:()=>v});var t=e(82897),n=e(66111),c=e(47891),s=e(68183),i=e(20941),f=e(24799),u=e(52566),r=e(80124),d=e(46967),o=e(8944),m=e(5562),l=e(19349);const p=({refreshIntervals:E,onRefreshIntervalChange:h,getIntervalsFunc:C=y,validateIntervalsFunc:a=g})=>{const[P,D]=(0,n.useState)(C(E??m.o5)),[x,M]=(0,n.useState)(null);(0,n.useEffect)(()=>{const O=C(E??m.o5);D(O)},[C,E]);const b=(0,n.useMemo)(()=>Array.isArray(P)?P.join(","):"",[P]),R=(0,n.useCallback)(O=>{const U=O.currentTarget.value?O.currentTarget.value.split(","):[];D(U)},[D]),S=(0,n.useCallback)(O=>{const U=a(P);U===null&&h(C(P)),M(U)},[C,P,h,a]);return n.createElement(f.g,{label:"Auto refresh",description:"Define the auto refresh intervals that should be available in the auto refresh list.",error:x,invalid:!!x},n.createElement(d.I,{id:"auto-refresh-input",invalid:!!x,value:b,onChange:R,onBlur:S}))},g=(E,h={getTimeSrv:l.$t})=>{try{return y(E,h),null}catch(C){return C instanceof Error?C.message:"Invalid intervals"}},y=(E,h={getTimeSrv:l.$t})=>{const C=E.filter(a=>a.trim()!=="").map(a=>a.replace(/\s+/g,""));return[...new Set(h.getTimeSrv().getValidIntervals(C))]};class v extends n.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=h=>{const C=h.currentTarget.value;if((0,t.isEmpty)(C))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(C);if(c.isValidTimeSpan(C))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(C);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=h=>{typeof h=="string"&&this.props.onTimeZoneChange(h)},this.onWeekStartChange=h=>{this.props.onWeekStartChange(h)}}render(){return n.createElement(i.s,{label:"Time options",isOpen:!0},n.createElement(f.g,{label:"Time zone","data-testid":s.wl.components.TimeZonePicker.containerV2},n.createElement(u.O,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})),n.createElement(f.g,{label:"Week start","data-testid":s.wl.components.WeekStartPicker.containerV2},n.createElement(r.z,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})),n.createElement(p,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),n.createElement(f.g,{label:"Now delay",description:"Exclude recent data that may be incomplete."},n.createElement(d.I,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})),n.createElement(f.g,{label:"Hide time picker"},n.createElement(o.r,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})),n.createElement(f.g,{label:"Refresh live dashboards",description:"Continuously re-draw panels where the time range references 'now'"},n.createElement(o.r,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})))}}},82557:(Y,T,e)=>{"use strict";e.d(T,{D:()=>vn});var t=e(66111),n=e(56895),c=e(72196),s=e(68183),i=e(37932),f=e(31403),u=e(8125),r=e(95379),d=e(8412),o=e(47694),m=e(82002),l=e(27876),p=e(45984),g=e(67948),y=e(83829),v=e(9892),E=e(59679),h=e(41818),C=e(72648),a=e(20941),P=e(52081),D=e(67487),x=e(61860),M=e(39904),b=e(8180),R=e(35029);const S=({nodes:Re,edges:Te,direction:nt,width:Xe,height:Nt,onDoubleClick:zt})=>{const wt=(0,t.useRef)(null),on=(0,t.useRef)(null),qt=(0,t.useCallback)(un=>{zt&&zt(un.nodes[0])},[zt]);return(0,t.useEffect)(()=>((async()=>{const tn=await e.e(8271).then(e.t.bind(e,47137,23)),yt={nodes:O(tn,Re),edges:U(tn,Te)},jn={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:nt??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};wt.current=new tn.Network(on.current,yt,jn),wt.current?.on("doubleClick",qt)})(),()=>{wt.current&&wt.current.off("doubleClick")}),[nt,Te,Re,qt]),t.createElement("div",null,t.createElement("div",{ref:on,style:{width:Xe??"100%",height:Nt??"60vh"}}))};function O(Re,Te){const nt=Te.map(Xe=>({...Xe,shape:"box"}));return new Re.DataSet(nt)}function U(Re,Te){const nt=Te.map(Xe=>({...Xe,arrows:"to",dashes:!0}));return new Re.DataSet(nt)}function I({edges:Re,nodes:Te,show:nt,title:Xe,children:Nt}){const[zt,wt]=(0,t.useState)(nt),on=(0,t.useCallback)(()=>wt(!0),[wt]),qt=(0,t.useCallback)(()=>wt(!1),[wt]);return t.createElement(t.Fragment,null,t.createElement(R.u,{isOpen:zt,title:Xe,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:qt,onDismiss:qt},t.createElement(S,{nodes:Te,edges:Re})),Nt({showModal:on}))}const F=({id:Re,usages:Te})=>{const nt=(0,t.useMemo)(()=>Te.find(Nt=>Nt.variable.id===Re),[Re,Te]);if(!nt)return null;const Xe=nt.nodes.map(Nt=>Nt.label.includes(`$${Re}`)?{...Nt,color:"#FB7E81"}:Nt);return t.createElement(I,{show:!1,title:`Showing usages for: $${Re}`,nodes:Xe,edges:nt.edges},({showModal:Nt})=>t.createElement(b.h,{onClick:()=>Nt(),name:"code-branch",title:"Show usages","data-testid":"VariablesUnknownButton"}))};var w=e(19248);const K=1e3;function L({variables:Re,dashboard:Te}){const[nt,Xe]=(0,t.useState)(!1),[Nt,zt]=(0,t.useState)(0),[wt,on]=(0,t.useState)([]),qt=(0,C.wW)(A);(0,t.useEffect)(()=>zt(yt=>yt+1),[Re,Te]);const{loading:un}=(0,E.Z)(async()=>{if(nt&&Nt>0){const yt=Date.now(),jn=await(0,w.Yg)(Re,Te),Da=Date.now()-yt;return Da>=K&&(0,h.ff)("Slow unknown variables expansion",{elapsed:Da}),zt(0),on(jn),jn}return[]},[Re,Te,nt,Nt]),tn=yt=>{yt&&(0,h.ff)("Unknown variables section expanded"),Xe(yt)};return t.createElement("div",{className:qt.container},t.createElement(a.s,{label:t.createElement(V,null),isOpen:nt,onToggle:tn},un&&t.createElement(P.wc,{justify:"center"},t.createElement(P.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(D.$,{size:16}))),!un&&wt&&t.createElement(t.Fragment,null,wt.length===0&&t.createElement(H,null),wt.length>0&&t.createElement(j,{usages:wt}))))}function V(){const Re=(0,C.wW)(A);return t.createElement("h5",null,"Renamed or missing variables",t.createElement(x.u,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard."},t.createElement(M.J,{name:"info-circle",className:Re.infoIcon})))}function H(){return t.createElement("span",null,"No renamed or missing variables found.")}function j({usages:Re}){const Te=(0,C.wW)(A);return t.createElement("table",{className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",{colSpan:5}))),t.createElement("tbody",null,Re.map(nt=>{const{variable:Xe}=nt,{id:Nt,name:zt}=Xe;return t.createElement("tr",{key:Nt},t.createElement("td",{className:Te.firstColumn},t.createElement("span",null,zt)),t.createElement("td",{className:Te.defaultColumn}),t.createElement("td",{className:Te.defaultColumn}),t.createElement("td",{className:Te.defaultColumn}),t.createElement("td",{className:Te.lastColumn},t.createElement(F,{id:Xe.id,usages:Re})))})))}const A=Re=>({container:v.css`
    margin-top: ${Re.spacing(4)};
    padding-top: ${Re.spacing(4)};
  `,infoIcon:v.css`
    margin-left: ${Re.spacing(1)};
  `,defaultColumn:v.css`
    width: 1%;
  `,firstColumn:v.css`
    width: 1%;
    vertical-align: top;
    color: ${Re.colors.text.maxContrast};
  `,lastColumn:v.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var _=e(7240),k=e(87095),Q=e(92990),re=e(92624),Z=e(98102);function oe({varName:Re,isOpen:Te=!1,onConfirm:nt,onDismiss:Xe}){return t.createElement(Z.s,{title:"Delete variable",isOpen:Te,onConfirm:nt,onDismiss:Xe,body:`
      Are you sure you want to delete variable "${Re}"?
    `,modalClass:G.modal,confirmText:"Delete"})}const G={modal:(0,v.css)({width:"max-content",maxWidth:"80vw"})};var le=e(52666),ge=e(22323),ne=e(15546),ue=e(85803),te=e(69273),me=e(24799),q=e(2594);const se=[{label:"Label and value",value:te.bU.dontHide},{label:"Value",value:te.bU.hideLabel},{label:"Nothing",value:te.bU.hideVariable}];function ae({onChange:Re,hide:Te,type:nt}){const Xe=(0,t.useMemo)(()=>se.find(Nt=>Nt.value===Te)?.value??se[0].value,[Te]);return nt==="constant"?null:t.createElement(me.g,{label:"Show on dashboard"},t.createElement(q.S,{options:se,onChange:Re,value:Xe}))}var pe=e(41624),de=e(49993),Me=e(57052),Ke=e(83704);function st({onChange:Re,type:Te}){const nt=(0,t.useMemo)(()=>(0,re.bi)(),[]),Xe=(0,t.useMemo)(()=>nt.find(Nt=>Nt.value===Te)??nt[0],[nt,Te]);return t.createElement(Ke.u,{name:"Select variable type",value:Xe,options:nt,onChange:Re,testId:s.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var Ie=e(11543),Ve=e(77117);const _e=({variable:{options:Re}})=>{const[Te,nt]=(0,t.useState)(20),[Xe,Nt]=(0,t.useState)([]),zt=(0,t.useCallback)(on=>{on.preventDefault(),nt(Te+20)},[Te,nt]),wt=(0,C.wW)(tt);return(0,t.useEffect)(()=>Nt(Re.slice(0,Te)),[Te,Re]),Xe.length?t.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"}},t.createElement("h5",null,"Preview of values"),t.createElement(Ie.Z,null,Xe.map((on,qt)=>t.createElement(Ie.Z,{key:`${on.value}-${qt}`,className:wt.optionContainer},t.createElement(Ve.W,{"aria-label":s.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption},t.createElement("div",{className:wt.label},on.text))))),Re.length>Te&&t.createElement(Ie.Z,{className:wt.optionContainer},t.createElement(f.zx,{onClick:zt,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link"},"Show more"))):null};_e.displayName="VariableValuesPreview";function tt(Re){return{wrapper:(0,v.css)({display:"flex",flexDirection:"column",marginTop:Re.spacing(2)}),optionContainer:(0,v.css)({marginLeft:Re.spacing(.5),marginBottom:Re.spacing(.5)}),label:(0,v.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}var dt=e(82897),Oe=e(37737),ye=e(50678);const Pe=Re=>async Te=>{const{rootStateKey:nt}=Re;Te((0,_.mb)(nt,(0,ye.wJ)({name:(0,k.E0)(Re).name,id:Re.id})))},be=Re=>async(Te,nt)=>{const{rootStateKey:Xe}=Re;Te((0,_.mb)(Xe,(0,ye.qe)((0,re.Y6)(Re))))},Be=(Re,Te)=>(nt,Xe)=>{const{id:Nt,rootStateKey:zt}=Re;let wt=null;if(Te.match(/^(?!__).*$/)||(wt="Template names cannot begin with '__', that's reserved for Grafana's global variables"),Te.match(/^\w+$/)||(wt="Only word and digit characters are allowed in variable names"),(0,k.gt)(zt,Xe()).filter(un=>un.name===Te&&un.id!==Nt).length&&(wt="Variable with the same name already exists"),wt){nt((0,_.mb)(zt,(0,ye.y8)({newName:Te,errorText:wt})));return}nt(ze(Re,Te))},ze=(Re,Te)=>(nt,Xe)=>{const{rootStateKey:Nt}=Re,zt=(0,k.E0)(Re,Xe());if(zt.name===Te){nt((0,_.mb)(Nt,(0,ye.Yo)((0,re.Y6)(Re,{newName:Te}))));return}const wt={...(0,dt.cloneDeep)(zt),name:Te,id:Te},on=zt.global,qt=zt.index,un=(0,re.yQ)(wt);nt((0,_.mb)(Nt,(0,Q.VN)((0,re.Y6)(un,{global:on,index:qt,model:wt})))),nt((0,_.mb)(Nt,(0,ye.Yo)((0,re.Y6)(un,{newName:Te})))),nt((0,_.mb)(Nt,(0,Q.mZ)((0,re.Y6)(Re,{reIndex:!1}))))},lt=(Re,Te="query")=>(nt,Xe)=>{const Nt=(0,re.mn)(Re),zt=(0,k.gt)(Nt,Xe()),wt=vt(Te,zt),on={type:Te,id:wt},qt=!1,un=(0,k.Eo)(Nt,Xe()),tn=(0,dt.cloneDeep)(ge.z.get(Te).initialState);tn.id=wt,tn.name=wt,tn.rootStateKey=Nt,nt((0,_.mb)(Nt,(0,Q.VN)((0,re.Y6)(on,{global:qt,model:tn,index:un})))),i.E1.partial({editIndex:zt.length})},ht=Re=>(Te,nt)=>{const Xe=(0,re.mn)(Re),Nt=nt(),zt=(0,k.xD)(Xe,Nt),wt=Nt.dashboard.getModel(),{usages:on}=(0,w.V)(zt,wt),qt=(0,w.vI)(on);Te((0,_.mb)(Xe,(0,Oe.j4)({usages:on,usagesNetwork:qt})))};function vt(Re,Te){let nt=0,Xe=`${Re}${nt}`;for(;Te.find(Nt=>Nt.id===Xe);)Xe=`${Re}${++nt}`;return Xe}var bt=(Re=>(Re[Re.MaxSize=50]="MaxSize",Re))(bt||{});const ct=(Re,Te)=>({editor:(0,k.AE)(Te.identifier.rootStateKey,Re).editor,variable:(0,k.E0)(Te.identifier,Re)}),Pt=Re=>({...(0,y.bindActionCreators)({variableEditorMount:Pe,variableEditorUnMount:be,changeVariableName:Be,updateOptions:ue.Rk},Re),changeVariableProp:(Te,nt,Xe)=>Re((0,_.mb)(Te.rootStateKey,(0,Q.Pl)((0,re.Y6)(Te,{propName:nt,propValue:Xe})))),changeVariableType:(Te,nt)=>Re((0,_.mb)(Te.rootStateKey,(0,Q.Be)((0,re.Y6)(Te,{newType:nt})))),removeVariable:Te=>{Re((0,_.mb)(Te.rootStateKey,(0,Q.mZ)((0,re.Y6)(Te,{reIndex:!0}))))}}),ie=(0,g.connect)(ct,Pt);class Ce extends t.PureComponent{constructor(){super(...arguments),this.state={showDeleteModal:!1},this.onNameChange=Te=>{Te.preventDefault(),this.props.changeVariableName(this.props.identifier,Te.currentTarget.value)},this.onTypeChange=Te=>{Te.value&&this.props.changeVariableType(this.props.identifier,Te.value)},this.onLabelChange=Te=>{Te.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",Te.currentTarget.value)},this.onDescriptionChange=Te=>{this.props.changeVariableProp(this.props.identifier,"description",Te.currentTarget.value)},this.onHideChange=Te=>{this.props.changeVariableProp(this.props.identifier,"hide",Te)},this.onPropChanged=({propName:Te,propValue:nt,updateOptions:Xe=!1})=>{this.props.changeVariableProp(this.props.identifier,Te,nt),Xe&&this.props.updateOptions((0,re.yQ)(this.props.variable))},this.onHandleSubmit=async Te=>{Te.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,re.yQ)(this.props.variable))},this.onModalOpen=()=>{this.setState({showDeleteModal:!0})},this.onModalClose=()=>{this.setState({showDeleteModal:!1})},this.onDelete=()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),i.E1.partial({editIndex:null})},this.onApply=()=>{i.E1.partial({editIndex:null})}}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){const{variable:Te}=this.props,nt=ge.z.get(this.props.variable.type).editor;if(!nt)return null;const Xe=Te.state===le.Gu.Loading;return t.createElement(t.Fragment,null,t.createElement("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit},t.createElement(st,{onChange:this.onTypeChange,type:this.props.variable.type}),t.createElement(pe.e,null,"General"),t.createElement(Me.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:s.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:bt.MaxSize,required:!0}),t.createElement(Me.V,{name:"Label",description:"Optional display name",value:this.props.variable.label??"",placeholder:"Label name",onChange:this.onLabelChange,testId:s.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),t.createElement(de.W,{name:"Description",value:Te.description??"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),t.createElement(ae,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),nt&&t.createElement(nt,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,ne.eL)(this.props.variable)?t.createElement(_e,{variable:this.props.variable}):null,t.createElement("div",{style:{marginTop:"16px"}},t.createElement(P.Lh,{spacing:"md",height:"inherit"},t.createElement(f.zx,{variant:"destructive",fill:"outline",onClick:this.onModalOpen},"Delete"),t.createElement(f.zx,{type:"submit","aria-label":s.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:Xe,variant:"secondary"},"Run query",Xe&&t.createElement(M.J,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})),t.createElement(f.zx,{variant:"primary",onClick:this.onApply,"data-testid":s.wl.pages.Dashboard.Settings.Variables.Edit.General.applyButton},"Apply")))),t.createElement(oe,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose}))}}const Ne=ie(Ce);var Ze=e(36826),Qe=e(26418),Le=e(69142),Ue=e(3153);const ve=({variables:Re})=>{const Te=(0,t.useMemo)(()=>(0,w.GQ)(Re),[Re]),nt=(0,t.useMemo)(()=>(0,w.MJ)(Re),[Re]);return nt.length?t.createElement(I,{show:!1,title:"Dependencies",nodes:(0,w.Of)(Te,nt),edges:nt},({showModal:Xe})=>t.createElement(f.zx,{onClick:()=>{(0,h.ff)("Show variable dependencies"),Xe()},icon:"channel-add",variant:"secondary"},"Show dependencies")):null},Se=Re=>t.createElement(g.Provider,{store:Ue.h},t.createElement(ve,{...Re})),Fe=({id:Re,usages:Te,isAdhoc:nt})=>{const Xe=(0,t.useMemo)(()=>Te.find(zt=>zt.variable.id===Re),[Te,Re]);if(Te.length===0||nt||!Xe)return null;const Nt=Xe.nodes.map(zt=>zt.label.includes(`$${Re}`)?{...zt,color:"#FB7E81"}:zt);return t.createElement(I,{show:!1,title:`Showing usages for: $${Re}`,nodes:Nt,edges:Xe.edges},({showModal:zt})=>t.createElement(b.h,{onClick:()=>{(0,h.ff)("Show variable usages"),zt()},name:"code-branch",title:"Show usages"}))};function je({index:Re,variable:Te,usageTree:nt,usagesNetwork:Xe,onEdit:Nt,onDuplicate:zt,onDelete:wt}){const on=(0,C.l4)(),qt=(0,C.wW)(mt),un=Ge(Te),yt=(0,w.Rv)(Te.id,nt)>0||(0,ne.Kn)(Te),jn=(0,re.yQ)(Te);return t.createElement(Ze._l,{draggableId:JSON.stringify(jn),index:Re},(ra,Da)=>t.createElement("tr",{ref:ra.innerRef,...ra.draggableProps,style:{userSelect:Da.isDragging?"none":"auto",background:Da.isDragging?on.colors.background.secondary:void 0,...ra.draggableProps.style}},t.createElement("td",{role:"gridcell",className:qt.column},t.createElement(f.zx,{size:"xs",fill:"text",onClick:Ea=>{Ea.preventDefault(),Nt(jn)},className:qt.nameLink,"aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(Te.name)},Te.name)),t.createElement("td",{role:"gridcell",className:qt.definitionColumn,onClick:Ea=>{Ea.preventDefault(),Nt(jn)},"aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(Te.name)},un),t.createElement("td",{role:"gridcell",className:qt.column},t.createElement(gt,{passed:yt})),t.createElement("td",{role:"gridcell",className:qt.column},t.createElement(Fe,{id:Te.id,isAdhoc:(0,ne.Kn)(Te),usages:Xe})),t.createElement("td",{role:"gridcell",className:qt.column},t.createElement(b.h,{onClick:Ea=>{Ea.preventDefault(),(0,h.ff)("Duplicate variable"),zt(jn)},name:"copy",title:"Duplicate variable","aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(Te.name)})),t.createElement("td",{role:"gridcell",className:qt.column},t.createElement(b.h,{onClick:Ea=>{Ea.preventDefault(),(0,h.ff)("Delete variable"),wt(jn)},name:"trash-alt",title:"Remove variable","aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(Te.name)})),t.createElement("td",{role:"gridcell",className:qt.column},t.createElement("div",{...ra.dragHandleProps,className:qt.dragHandle},t.createElement(M.J,{name:"draggabledots",size:"lg"})))))}function Ge(Re){let Te="";return(0,ne.Xh)(Re)?Re.definition?Te=Re.definition:typeof Re.query=="string"&&(Te=Re.query):(0,ne.eL)(Re)&&(Te=Re.query),Te}function gt({passed:Re}){const Te=(0,C.wW)(mt);return Re?t.createElement(M.J,{name:"check",className:Te.iconPassed,title:"This variable is referenced by other variables or dashboard."}):t.createElement(M.J,{name:"exclamation-triangle",className:Te.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function mt(Re){return{dragHandle:v.css`
      cursor: grab;
    `,column:v.css`
      width: 1%;
    `,nameLink:v.css`
      cursor: pointer;
      color: ${Re.colors.primary.text};
    `,definitionColumn:v.css`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:v.css`
      color: ${Re.v1.palette.greenBase};
    `,iconFailed:v.css`
      color: ${Re.v1.palette.orange};
    `}}function Ye({variables:Re,usages:Te,usagesNetwork:nt,onChangeOrder:Xe,onAdd:Nt,onEdit:zt,onDelete:wt,onDuplicate:on}){const qt=un=>{if(!un.destination||!un.source)return;(0,h.ff)("Variable drag and drop");const tn=JSON.parse(un.draggableId);Xe(tn,Re[un.source.index].index,Re[un.destination.index].index)};return t.createElement("div",null,t.createElement("div",null,Re.length===0&&t.createElement(ft,{onAdd:Nt}),Re.length>0&&t.createElement(Qe.Stack,{direction:"column",gap:4},t.createElement("table",{className:"filter-table filter-table--hover","aria-label":s.wl.pages.Dashboard.Settings.Variables.List.table,role:"grid"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",null,"Definition"),t.createElement("th",{colSpan:5}))),t.createElement(Ze.Z5,{onDragEnd:qt},t.createElement(Ze.bK,{droppableId:"variables-list",direction:"vertical"},un=>t.createElement("tbody",{ref:un.innerRef,...un.droppableProps},Re.map((tn,yt)=>t.createElement(je,{index:yt,key:`${tn.name}-${yt}`,variable:tn,usageTree:Te,usagesNetwork:nt,onDelete:wt,onDuplicate:on,onEdit:zt})),un.placeholder)))),t.createElement(Qe.Stack,null,t.createElement(Se,{variables:Re}),t.createElement(f.zx,{"aria-label":s.wl.pages.Dashboard.Settings.Variables.List.newButton,onClick:Nt,icon:"plus"},"New variable")))))}function ft({onAdd:Re}){return t.createElement("div",null,t.createElement(Le.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:Te=>{Te.preventDefault(),Re()}}))}const St=(Re,Te)=>{const{uid:nt}=Te.dashboard,Xe=(0,k.AE)(nt,Re);return{variables:(0,k.xD)(nt,Re),idInEditor:Xe.editor.id,usagesNetwork:Xe.inspect.usagesNetwork,usages:Xe.inspect.usages}},we=Re=>({...(0,y.bindActionCreators)({createNewVariable:lt,initListMode:ht},Re),changeVariableOrder:(Te,nt,Xe)=>Re((0,_.mb)(Te.rootStateKey,(0,Q.gE)((0,re.Y6)(Te,{fromIndex:nt,toIndex:Xe})))),duplicateVariable:Te=>Re((0,_.mb)(Te.rootStateKey,(0,Q.Y9)((0,re.Y6)(Te,{newId:void 0})))),removeVariable:Te=>{Re((0,_.mb)(Te.rootStateKey,(0,Q.mZ)((0,re.Y6)(Te,{reIndex:!0}))))}}),qe=(0,g.connect)(St,we);class Je extends t.PureComponent{constructor(){super(...arguments),this.state={variableId:void 0},this.onEditVariable=Te=>{const nt=this.props.variables.findIndex(Xe=>Xe.id===Te.id);i.E1.partial({editIndex:nt})},this.onNewVariable=()=>{this.props.createNewVariable(this.props.dashboard.uid)},this.onChangeVariableOrder=(Te,nt,Xe)=>{this.props.changeVariableOrder(Te,nt,Xe)},this.onDuplicateVariable=Te=>{this.props.duplicateVariable(Te)},this.onModalOpen=Te=>{this.setState({variableId:Te})},this.onModalClose=()=>{this.setState({variableId:void 0})},this.onRemoveVariable=()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){const{editIndex:Te,variables:nt}=this.props,Xe=Te!=null?nt[Te]:void 0,Nt=Xe?{text:Xe.name}:void 0;return t.createElement(d.T,{navModel:this.props.sectionNav,pageNav:Nt},!Xe&&t.createElement(Ye,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!Xe&&this.props.variables.length>0&&t.createElement(L,{variables:this.props.variables,dashboard:this.props.dashboard}),Xe&&t.createElement(Ne,{identifier:(0,re.yQ)(Xe)}),t.createElement(oe,{isOpen:this.state.variableId!==void 0,varName:this.state.variableId?.id??"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose}))}}const ut=qe(Je);var Mt=e(73546),Wt=e(77582);const ln=({dashboard:Re,sectionNav:Te})=>{const nt=Wt.Vt.hasPermission(l.AccessControlAction.DashboardsPermissionsWrite);return t.createElement(d.T,{navModel:Te},t.createElement(Mt.P,{resource:"dashboards",resourceId:Re.uid,canSetPermissions:nt}))};var fn=e(1108),pn=e(6645),An=e(92158),Ot=e(54630),Ft=e(61986),Kt=e(86977);const Lt=Re=>({permissions:Re.dashboard.permissions,canViewFolderPermissions:Re.folder.canViewFolderPermissions}),Ut={getDashboardPermissions:Kt.qm,addDashboardPermission:Kt.Yq,removeDashboardPermission:Kt.Qk,updateDashboardPermission:Kt.RF,checkFolderPermissions:Ft.J6},Rt=(0,g.connect)(Lt,Ut);class $t extends t.PureComponent{constructor(Te){super(Te),this.onOpenAddPermissions=()=>{this.setState({isAdding:!0})},this.onRemoveItem=nt=>{this.props.removeDashboardPermission(this.props.dashboard.id,nt)},this.onPermissionChanged=(nt,Xe)=>{this.props.updateDashboardPermission(this.props.dashboard.id,nt,Xe)},this.onAddPermission=nt=>this.props.addDashboardPermission(this.props.dashboard.id,nt),this.onCancelAddPermission=()=>{this.setState({isAdding:!1})},this.state={isAdding:!1}}componentDidMount(){this.props.getDashboardPermissions(this.props.dashboard.id),this.props.dashboard.meta.folderUid&&this.props.checkFolderPermissions(this.props.dashboard.meta.folderUid)}getFolder(){const{dashboard:Te,canViewFolderPermissions:nt}=this.props;return{id:Te.meta.folderId,title:Te.meta.folderTitle,url:Te.meta.folderUrl,canViewFolderPermissions:nt}}render(){const{permissions:Te,dashboard:nt,sectionNav:Xe}=this.props,{isAdding:Nt}=this.state;return nt.meta.hasUnsavedFolderChange?t.createElement(d.T,{navModel:Xe},t.createElement("h5",null,"You have changed a folder, please save to view permissions.")):t.createElement(d.T,{navModel:Xe},t.createElement("div",{className:"page-action-bar"},t.createElement(x.u,{placement:"auto",content:t.createElement(Ot.Z,null)},t.createElement(M.J,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})),t.createElement("div",{className:"page-action-bar__spacer"}),t.createElement(f.zx,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:Nt},"Add permission")),t.createElement(fn.s,{in:Nt},t.createElement(pn.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})),t.createElement(An.Z,{items:Te,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:this.getFolder()}))}}const _t=Rt($t);var jt=e(84135),an=e(73446),cn=e(86647),rn=e(53117),hn=e(13393),Dn=e(46967),Rn=e(58255),ea=e(8581),Fn=e(13355),Vn=e(65583),aa=e(47956),Sa=e(9398),la=e(19349),Yn=e(86899),ia=e(86953),Ia=e(573),ha=e(30471),xa=e(39834),Wa=e(2703);class as extends t.PureComponent{constructor(Te){super(Te),this.updateFields=()=>{const nt=this.props.response?.panelData,Xe=nt?.series?.[0]??nt?.annotations?.[0];if(Xe&&Xe.fields){const Nt=Xe.fields.map(zt=>{const wt=(0,ha.CZ)(zt,Xe);let on="";for(let qt=0;qt<Xe.length;qt++){if(qt>0&&(on+=", "),qt>2){on+="...";break}on+=zt.values[qt]}return on.length>50&&(on=on.substring(0,50)+"..."),{label:`${wt} (${zt.type})`,value:wt,description:on}});this.setState({fieldNames:Nt})}},this.onFieldSourceChange=(nt,Xe)=>{const Nt=this.props.mappings||{},zt=Nt[nt]||{};this.props.change({...Nt,[nt]:{...zt,source:Xe.value||xa.L.Field}})},this.onFieldNameChange=(nt,Xe)=>{const Nt=this.props.mappings||{},zt=Nt[nt]||{};this.props.change({...Nt,[nt]:{...zt,value:Xe.value,source:xa.L.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(Te){Te.response!==this.props.response&&this.updateFields()}renderRow(Te,nt,Xe){const{fieldNames:Nt}=this.state;let zt=Nt;const wt=nt.value;let on=Nt.find(un=>wt===un.value);wt&&(zt=[...Nt],on||zt.push({label:wt,value:wt}));let qt=Xe?Xe[Te.key]:"";if(qt&&Te.key.startsWith("time")){const un=(0,Wa.Cf)("dateTimeAsIso");qt=(0,Wa.zc)(un(qt))}return qt==null&&(qt=""),t.createElement("tr",{key:Te.key},t.createElement("td",null,Te.key," ",Te.help&&t.createElement(x.u,{content:Te.help},t.createElement(M.J,{name:"info-circle"}))),t.createElement("td",null,t.createElement(ea.Ph,{value:on,options:zt,placeholder:Te.placeholder||Te.key,onChange:un=>{this.onFieldNameChange(Te.key,un)},noOptionsMessage:"Unknown field names",allowCustomValue:!0})),t.createElement("td",null,`${qt}`))}render(){const Te=this.props.response?.events?.[0],nt=this.props.mappings||{};return t.createElement("table",{className:"filter-table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Annotation"),t.createElement("th",null,"From"),t.createElement("th",null,"First Value"))),t.createElement("tbody",null,Ia.r0.map(Xe=>this.renderRow(Xe,nt[Xe.key]||{},Te))))}}class Xa extends t.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:Te,annotation:nt}=this.props;if((0,Ia.yr)(Te))return;const Xe=(0,Sa.h4)().getCurrent();if(!Xe)return;this.setState({running:!0});const Nt=await(0,Vn.n)((0,ia.r)({range:(0,la.$t)().timeRange(),panel:new Yn.r({}),dashboard:Xe},Te,nt));this.setState({running:!1,response:Nt})},this.onQueryChange=Te=>{this.props.onChange({...this.props.annotation,target:Te})},this.onMappingChange=Te=>{this.props.onChange({...this.props.annotation,mappings:Te})},this.onAnnotationChange=Te=>{this.props.onChange(Te)}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(Te){this.props.annotation!==Te.annotation&&!(0,Ia.yr)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:Te,annotation:nt}=this.props,Nt={...Ia.yA,...Te.annotations}.prepareAnnotation(nt);Nt!==nt?this.props.onChange(Nt):this.onRunQuery()}renderStatus(){const{response:Te,running:nt}=this.state;let Xe="alert-info",Nt="...",zt;if(nt||Te?.panelData?.state===le.Gu.Loading||!Te)Nt="loading...";else{const{events:wt,panelData:on}=Te;if(on?.error)Xe="alert-error",zt="exclamation-triangle",Nt=on.error.message??"error";else if(!wt?.length)Xe="alert-warning",zt="exclamation-triangle",Nt="No events found";else{const qt=on?.series?.[0]??on?.annotations?.[0];Nt=`${wt.length} events (from ${qt?.fields.length} fields)`}}return t.createElement("div",{className:(0,v.cx)(Xe,v.css`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `)},t.createElement("div",null,zt&&t.createElement(t.Fragment,null,t.createElement(M.J,{name:zt}),"\xA0"),Nt),t.createElement("div",null,nt?t.createElement(D.$,null):t.createElement(f.zx,{variant:"secondary",size:"xs",onClick:this.onRunQuery},"TEST")))}render(){const{datasource:Te,annotation:nt,datasourceInstanceSettings:Xe}=this.props,{response:Nt}=this.state;let zt=Te.annotations?.QueryEditor||Te.components?.QueryEditor;if(!zt)return t.createElement("div",null,"Annotations are not supported. This datasource needs to export a QueryEditor");const wt={...Te.annotations?.getDefaultQuery?.(),...nt.target??{refId:"Anno"}};return t.createElement(t.Fragment,null,t.createElement(aa.n,{instanceSettings:Xe},t.createElement(zt,{key:Te?.name,query:wt,datasource:Te,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:Nt?.panelData,range:(0,la.$t)().timeRange(),annotation:nt,onAnnotationChange:this.onAnnotationChange})),(0,Ia.$w)(Te)&&t.createElement(t.Fragment,null,this.renderStatus(),t.createElement(as,{response:Nt,mappings:nt.mappings,change:this.onMappingChange})))}}var Ba=e(11484);class ca extends t.PureComponent{constructor(){super(...arguments),this.ref=null}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(Te){Te.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,this.angularComponent?.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const Te=(0,Ba.w)(),nt='<plugin-component type="annotations-query-ctrl"> </plugin-component>',Xe={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=Te.load(this.ref,Xe,nt),this.angularComponent.digest(),this.angularComponent.getScope().$watch(()=>{if(Xe.ctrl.ignoreNextWatcherFiring){Xe.ctrl.ignoreNextWatcherFiring=!1;return}this.props.onChange(Xe.ctrl.currentAnnotation)}),this.scopeProps=Xe}render(){return t.createElement("div",{ref:Te=>this.ref=Te})}}const ss="New annotation",Ya=({editIdx:Re,dashboard:Te})=>{const nt=(0,C.wW)(sa),[Xe,Nt]=(0,t.useState)(Te.annotations.list[Re]),zt=(0,t.useMemo)(()=>Xe.filter?Xe.filter.exclude?da.ExcludePanels:da.IncludePanels:da.AllPanels,[Xe.filter]),{value:wt}=(0,E.Z)(()=>(0,cn.F)().get(Xe.datasource),[Xe.datasource]),on=(0,cn.F)().getInstanceSettings(Xe.datasource),qt=kn=>{const ga=[...Te.annotations.list];ga.splice(Re,1,kn),Nt(kn),Te.annotations.list=ga},un=kn=>{qt({...Xe,name:kn.currentTarget.value})},tn=kn=>{qt({...Xe,datasource:(0,an.iU)(kn)})},yt=kn=>{const ga=kn.currentTarget;qt({...Xe,[ga.name]:ga.type==="checkbox"?ga.checked:ga.value})},jn=kn=>{qt({...Xe,iconColor:kn})},ra=kn=>{let ga=kn.value===da.AllPanels?void 0:{exclude:kn.value===da.ExcludePanels,ids:Xe.filter?.ids??[]};qt({...Xe,filter:ga})},Da=kn=>{if(!Array.isArray(kn))return;const ga={exclude:zt===da.ExcludePanels,ids:[]};kn.forEach(Fa=>Fa.value&&ga.ids.push(Fa.value)),qt({...Xe,filter:ga})},Ea=ja,ba=()=>{i.E1.partial({editview:null,editIndex:null})},$n=()=>{const kn=Te.annotations.list;Te.annotations.list=[...kn.slice(0,Re),...kn.slice(Re+1)],ja()},zn=Xe.name===ss,ma=(kn,ga)=>kn.label&&ga.label?kn.label.toLowerCase().localeCompare(ga.label.toLowerCase()):-1,fa=(0,t.useMemo)(()=>Te?.panels.filter(kn=>o.ZP.panels[kn.type]).map(kn=>({value:kn.id,label:kn.title??`Panel ${kn.id}`,description:kn.description,imgUrl:o.ZP.panels[kn.type].info.logos.small})).sort(ma)??[],[Te]);return t.createElement("div",null,t.createElement(hn.C,{className:nt.settingsForm},t.createElement(me.g,{label:"Name"},t.createElement(Dn.I,{"aria-label":s.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:zn,value:Xe.name,onChange:un})),t.createElement(me.g,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(rn.q,{annotations:!0,variables:!0,current:Xe.datasource,onChange:tn})),t.createElement(me.g,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},t.createElement(Rn.X,{name:"enable",id:"enable",value:Xe.enable,onChange:yt})),t.createElement(me.g,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},t.createElement(Rn.X,{name:"hide",id:"hide",value:Xe.hide,onChange:yt})),t.createElement(me.g,{label:"Color",description:"Color to use for the annotation event markers"},t.createElement(P.Lh,null,t.createElement(Fn.B,{value:Xe?.iconColor,onChange:jn}))),t.createElement(me.g,{label:"Show in","aria-label":s.wl.pages.Dashboard.Settings.Annotations.NewAnnotation.showInLabel},t.createElement(t.Fragment,null,t.createElement(ea.Ph,{options:Ga,value:zt,onChange:ra,"aria-label":s.wl.components.Annotations.annotationsTypeInput}),zt!==da.AllPanels&&t.createElement(ea.NU,{options:fa,value:fa.filter(kn=>Xe.filter?.ids.includes(kn.value)),onChange:Da,isClearable:!0,placeholder:"Choose panels",width:100,closeMenuOnSelect:!1,className:nt.select,"aria-label":s.wl.components.Annotations.annotationsChoosePanelInput})))),t.createElement(hn.C,null,t.createElement("h3",{className:"page-heading"},"Query"),wt?.annotations&&on&&t.createElement(Xa,{datasource:wt,datasourceInstanceSettings:on,annotation:Xe,onChange:qt}),wt&&!wt.annotations&&t.createElement(ca,{datasource:wt,annotation:Xe,onChange:qt})),t.createElement(Qe.Stack,null,!Xe.builtIn&&t.createElement(f.zx,{variant:"destructive",onClick:$n},"Delete"),t.createElement(f.zx,{variant:"secondary",onClick:ba,"data-testid":s.wl.pages.Dashboard.Settings.Annotations.NewAnnotation.previewInDashboard},"Preview in dashboard"),t.createElement(f.zx,{variant:"primary",onClick:Ea},"Apply")))},sa=Re=>({settingsForm:(0,v.css)({maxWidth:Re.spacing(60),marginBottom:Re.spacing(2)}),select:v.css`
      margin-top: 8px;
    `});function ja(){i.E1.partial({editIndex:null})}var da=(Re=>(Re[Re.AllPanels=0]="AllPanels",Re[Re.IncludePanels=1]="IncludePanels",Re[Re.ExcludePanels=2]="ExcludePanels",Re))(da||{});const Ga=[{label:"All panels",value:0,description:"Send the annotation data to all panels that support annotations"},{label:"Selected panels",value:1,description:"Send the annotations to the explicitly listed panels"},{label:"All panels except",value:2,description:"Do not send annotation data to the following panels"}];var qa=e(574),Ka=e(13626);const ts=({children:Re,...Te})=>{const nt=(0,C.wW)(va);return t.createElement("div",{className:nt.buttonWrapper},t.createElement(f.zx,{icon:"plus",variant:"secondary",...Te},Re))},va=Re=>({buttonWrapper:v.css`
    padding: ${Re.spacing(3)} 0;
  `}),ns=({dashboard:Re,onNew:Te,onEdit:nt})=>{const[Xe,Nt]=(0,t.useState)(Re.annotations.list),zt=(tn,yt)=>{Re.annotations.list=qa.moveItemImmutably(Xe,tn,tn+yt),Nt(Re.annotations.list)},wt=tn=>{Re.annotations.list=[...Xe.slice(0,tn),...Xe.slice(tn+1)],Nt(Re.annotations.list)},on=Xe.length===0||Xe.length===1&&Xe[0].builtIn,qt=tn=>tn.enable===!1?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},"(Disabled) \xA0 ",tn.name)):tn.builtIn?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},tn.name," \xA0 (Built-in)")):t.createElement(t.Fragment,null,tn.name),un=(0,cn.F)();return t.createElement(P.wc,null,Xe.length>0&&t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Query name"),t.createElement("th",null,"Data source"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,Re.annotations.list.map((tn,yt)=>t.createElement("tr",{key:`${tn.name}-${yt}`},tn.builtIn?t.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>nt(yt)},t.createElement(f.zx,{size:"sm",fill:"text",variant:"secondary"},qt(tn))):t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>nt(yt)},t.createElement(f.zx,{size:"sm",fill:"text",variant:"secondary"},qt(tn))),t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>nt(yt)},un.getInstanceSettings(tn.datasource)?.name||tn.datasource?.uid),t.createElement("td",{role:"gridcell",style:{width:"1%"}},yt!==0&&t.createElement(b.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>zt(yt,-1)})),t.createElement("td",{role:"gridcell",style:{width:"1%"}},Re.annotations.list.length>1&&yt!==Re.annotations.list.length-1?t.createElement(b.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>zt(yt,1)}):null),t.createElement("td",{role:"gridcell",style:{width:"1%"}},!tn.builtIn&&t.createElement(Ka.m,{size:"sm",onConfirm:()=>wt(yt),"aria-label":`Delete query with title "${tn.name}"`})))))),on&&t.createElement(Le.Z,{onClick:Te,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!on&&t.createElement(ts,{onClick:Te},"New query"))};function xs({dashboard:Re,editIndex:Te,sectionNav:nt}){const Xe=()=>{const wt={name:ss,enable:!0,datasource:(0,an.iU)((0,cn.F)().getInstanceSettings(null)),iconColor:"red"};Re.annotations.list=[...Re.annotations.list,{...wt}],i.E1.partial({editIndex:Re.annotations.list.length-1})},Nt=wt=>{i.E1.partial({editIndex:wt})},zt=Te!=null&&Te<Re.annotations.list.length;return t.createElement(d.T,{navModel:nt,pageNav:hs(Re,Te)},!zt&&t.createElement(ns,{dashboard:Re,onNew:Xe,onEdit:Nt}),zt&&t.createElement(Ya,{dashboard:Re,editIdx:Te}))}function hs(Re,Te){if(Te==null)return;const nt=Re.annotations.list[Te];if(nt)return{text:nt.name}}var rr=e(43339),Is=e(79658),ur=e(5191),mr=e(55986),os=e(13821),Vs=e(60499),is=e(50946);const zs=(Re,Te)=>{const[nt,Xe]=(0,os.Z)(()=>(0,is.iM)(Re,!1),[]),Nt=(0,Vs.iG)();return(0,t.useEffect)(()=>{nt.value&&(Te(),i.E1.replace("/"),Nt.success("Dashboard Deleted",`${nt.value.title} has been deleted`))},[nt,Nt,Te]),{state:nt,onDeleteDashboard:Xe}},ls={cleanUpDashboardAndVariables:Kt.lw},ws=(0,g.connect)(null,ls),Ws=({hideModal:Re,cleanUpDashboardAndVariables:Te,dashboard:nt})=>{const Xe=nt.meta.provisioned,{onDeleteDashboard:Nt}=zs(nt.uid,Te),[,zt]=(0,mr.default)(async()=>{await Nt(),Re()},[Re]),wt=fr(nt.panels,nt.title);return Xe?t.createElement(Js,{hideModal:Re,provisionedId:nt.meta.provisionedExternalId}):t.createElement(Z.s,{isOpen:!0,body:wt,onConfirm:zt,onDismiss:Re,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},fr=(Re,Te)=>{const nt=(0,dt.sumBy)(Re,Xe=>Xe.alert?1:0);return nt>0&&!o.vc.unifiedAlertingEnabled?t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,"This dashboard contains ",nt," alert",nt>1?"s":"",". Deleting this dashboard also deletes those alerts.")):t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,Te))},Js=({hideModal:Re,provisionedId:Te})=>t.createElement(R.u,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:Re,className:v.css`
      width: 500px;
    `},t.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),t.createElement("p",null,t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null),"File path: ",Te),t.createElement(R.u.ButtonRow,null,t.createElement(f.zx,{variant:"primary",onClick:Re},"OK"))),Xs=ws(Ws),Hs=({dashboard:Re})=>t.createElement(ur.JY,null,({showModal:Te,hideModal:nt})=>t.createElement(f.zx,{variant:"destructive",onClick:()=>{Te(Xs,{dashboard:Re,hideModal:nt})},"aria-label":"Dashboard settings page delete dashboard button"},"Delete Dashboard"));var or=e(42557);const gr=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];function ks({dashboard:Re,updateTimeZone:Te,updateWeekStart:nt,sectionNav:Xe}){const[Nt,zt]=(0,t.useState)(0),wt=zn=>{Re.meta.folderUid=zn.uid,Re.meta.folderTitle=zn.title,Re.meta.hasUnsavedFolderChange=!0},on=zn=>{(zn.currentTarget.name==="title"||zn.currentTarget.name==="description")&&(Re[zn.currentTarget.name]=zn.currentTarget.value)},qt=zn=>{Re.graphTooltip=zn,zt(Nt+1)},un=zn=>{Re.timepicker.refresh_intervals=zn.filter(ma=>ma.trim()!=="")},tn=zn=>{Re.timepicker.nowDelay=zn},yt=zn=>{Re.timepicker.hidden=zn,zt(Nt+1)},jn=zn=>{Re.liveNow=zn,zt(Nt+1)},ra=zn=>{Re.timezone=zn,zt(Nt+1),Te(zn)},Da=zn=>{Re.weekStart=zn,zt(Nt+1),nt(zn)},Ea=zn=>{Re.tags=zn,zt(Nt+1)},ba=zn=>{Re.editable=zn,zt(Nt+1)},$n=[{label:"Editable",value:!0},{label:"Read-only",value:!1}];return t.createElement(d.T,{navModel:Xe},t.createElement("div",{style:{maxWidth:"600px"}},t.createElement("div",{className:"gf-form-group"},t.createElement(me.g,{label:"Name"},t.createElement(Dn.I,{id:"title-input",name:"title",onBlur:on,defaultValue:Re.title})),t.createElement(me.g,{label:"Description"},t.createElement(Dn.I,{id:"description-input",name:"description",onBlur:on,defaultValue:Re.description})),t.createElement(me.g,{label:"Tags"},t.createElement(rr.B,{id:"tags-input",tags:Re.tags,onChange:Ea,width:40})),t.createElement(me.g,{label:"Folder"},t.createElement(Is.Es,{inputId:"dashboard-folder-input",initialTitle:Re.meta.folderTitle,initialFolderUid:Re.meta.folderUid,onChange:wt,enableCreateNew:!0,dashboardId:Re.id,skipInitialLoad:!0})),t.createElement(me.g,{label:"Editable",description:"Set to read-only to disable all editing. Reload the dashboard for changes to take effect"},t.createElement(q.S,{value:Re.editable,options:$n,onChange:ba}))),t.createElement(or.P,{onTimeZoneChange:ra,onWeekStartChange:Da,onRefreshIntervalChange:un,onNowDelayChange:tn,onHideTimePickerChange:yt,onLiveNowChange:jn,refreshIntervals:Re.timepicker.refresh_intervals,timePickerHidden:Re.timepicker.hidden,nowDelay:Re.timepicker.nowDelay,timezone:Re.timezone,weekStart:Re.weekStart,liveNow:Re.liveNow}),t.createElement(a.s,{label:"Panel options",isOpen:!0},t.createElement(me.g,{label:"Graph tooltip",description:"Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect"},t.createElement(q.S,{onChange:qt,options:gr,value:Re.graphTooltip}))),t.createElement("div",{className:"gf-form-button-row"},Re.meta.canDelete&&t.createElement(Hs,{dashboard:Re}))))}const pr={updateTimeZone:Kt.tM,updateWeekStart:Kt.f4},qs=(0,g.connect)(null,pr)(ks);var vr=e(9405),us=e(30992);function _s({dashboard:Re,sectionNav:Te}){const[nt,Xe]=(0,t.useState)(JSON.stringify(Re.getSaveModelClone(),null,2)),Nt=async()=>{await(0,Sa.h4)().saveJSONDashboard(nt),us.H.reloadPage()},zt=(0,C.wW)(Er),wt="The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on";return t.createElement(d.T,{navModel:Te,subTitle:wt},t.createElement("div",{className:zt.wrapper},t.createElement(vr.p,{value:nt,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:Xe,containerStyles:zt.codeEditor}),Re.meta.canSave&&t.createElement("div",null,t.createElement(f.zx,{type:"submit",onClick:Nt},"Save changes"))))}const Er=Re=>({wrapper:(0,v.css)({display:"flex",height:"100%",flexDirection:"column",gap:Re.spacing(2)}),codeEditor:(0,v.css)({flexGrow:1})});var er=e(18428),ms=e(34807);const Gt=({dashboard:Re,onNew:Te,onEdit:nt})=>{const[Xe,Nt]=(0,t.useState)(Re.links),zt=(un,tn)=>{Re.links=qa.moveItemImmutably(Xe,un,un+tn),Nt(Re.links)},wt=(un,tn)=>{Re.links=[...Xe,{...un}],Nt(Re.links)},on=un=>{Re.links=[...Xe.slice(0,un),...Xe.slice(un+1)],Nt(Re.links)};return Re.links.length===0?t.createElement("div",null,t.createElement(Le.Z,{onClick:Te,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})):t.createElement(t.Fragment,null,t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Type"),t.createElement("th",null,"Info"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,Xe.map((un,tn)=>t.createElement("tr",{key:`${un.title}-${tn}`},t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>nt(tn)},t.createElement(M.J,{name:"external-link-alt"})," \xA0 ",un.type),t.createElement("td",{role:"gridcell"},t.createElement(P.Lh,null,un.title&&t.createElement("span",null,un.title),un.type==="link"&&t.createElement("span",null,un.url),un.type==="dashboards"&&t.createElement(ms.P,{tags:un.tags??[]}))),t.createElement("td",{style:{width:"1%"},role:"gridcell"},tn!==0&&t.createElement(b.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>zt(tn,-1)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},Xe.length>1&&tn!==Xe.length-1?t.createElement(b.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>zt(tn,1)}):null),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(b.h,{"aria-label":"copy",name:"copy",onClick:()=>wt(un,tn)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(Ka.m,{"aria-label":`Delete link with title "${un.title}"`,size:"sm",onConfirm:()=>on(tn)})))))),t.createElement(ts,{onClick:Te},"New link"))};function He({dashboard:Re,sectionNav:Te,editIndex:nt}){const[Xe,Nt]=(0,t.useState)(!1),zt=()=>{Nt(!1),i.E1.partial({editIndex:void 0})},wt=()=>{Re.links=[...Re.links,{...er.zA}],Nt(!0),i.E1.partial({editIndex:Re.links.length-1})},on=tn=>{Nt(!1),i.E1.partial({editIndex:tn})},qt=nt!==void 0;let un;return qt&&(un={text:Xe?"New link":"Edit link",subTitle:Xe?"Create a new link on your dashboard":"Edit a specific link of your dashboard"}),t.createElement(d.T,{navModel:Te,pageNav:un},!qt&&t.createElement(Gt,{dashboard:Re,onNew:wt,onEdit:on}),qt&&t.createElement(er.fD,{dashboard:Re,editLinkIdx:nt,onGoBack:zt}))}var it=e(99714);const xt=10;class Vt extends t.PureComponent{constructor(Te){super(Te),this.getVersions=(nt=!1)=>{this.setState({isAppending:nt}),it.K8.getHistoryList(this.props.dashboard,{limit:this.limit,start:this.start}).then(Xe=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(Xe)]}),this.start+=this.limit}).catch(Xe=>console.log(Xe)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const nt=this.state.versions.filter(qt=>qt.checked),[Xe,Nt]=nt,zt=Xe.version===this.props.dashboard.version;this.setState({isLoading:!0});const wt=await it.K8.getDashboardVersion(this.props.dashboard.uid,Nt.version),on=await it.K8.getDashboardVersion(this.props.dashboard.uid,Xe.version);this.setState({baseInfo:Nt,isLoading:!1,isNewLatest:zt,newInfo:Xe,viewMode:"compare",diffData:{lhs:wt.data,rhs:on.data}})},this.decorateVersions=nt=>nt.map(Xe=>({...Xe,createdDateString:this.props.dashboard.formatDate(Xe.created),ageString:this.props.dashboard.getRelativeTime(Xe.created),checked:!1})),this.onCheck=(nt,Xe)=>{this.setState({versions:this.state.versions.map(Nt=>Nt.id===Xe?{...Nt,checked:nt.currentTarget.checked}:Nt)})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map(nt=>({...nt,checked:!1})),viewMode:"list"})},this.limit=xt,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find(Te=>Te.version===1)}render(){const{versions:Te,viewMode:nt,baseInfo:Xe,newInfo:Nt,isNewLatest:zt,isLoading:wt,diffData:on}=this.state,qt=Te.filter(yt=>yt.checked).length===2,un=Te.length>1,tn=Te.length>=this.limit;return nt==="compare"?t.createElement(d.T,{navModel:this.props.sectionNav},t.createElement(it.Cs,{onClick:this.reset,baseVersion:Xe?.version,newVersion:Nt?.version,isNewLatest:zt}),wt?t.createElement(sn,{msg:"Fetching changes\u2026"}):t.createElement(it.U$,{newInfo:Nt,baseInfo:Xe,isNewLatest:zt,diffData:on})):t.createElement(d.T,{navModel:this.props.sectionNav},wt?t.createElement(sn,{msg:"Fetching history list\u2026"}):t.createElement(it.Sd,{versions:Te,onCheck:this.onCheck,canCompare:qt}),this.state.isAppending&&t.createElement(sn,{msg:"Fetching more entries\u2026"}),un&&t.createElement(it.R1,{hasMore:tn,canCompare:qt,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()}))}}const sn=({msg:Re})=>t.createElement(P.Lh,null,t.createElement(D.$,null),t.createElement("em",null,Re)),en=()=>i.E1.partial({editview:null,editIndex:null});function vn({dashboard:Re,editview:Te,pageNav:nt,sectionNav:Xe}){const[Nt,zt]=(0,t.useState)(0);(0,t.useEffect)(()=>{Re.events.subscribe(p.hS,()=>zt(ba=>ba+1))},[Re]);const wt=(0,t.useMemo)(()=>On(Re),[Re,Nt]),on=()=>{Re.meta.hasUnsavedFolderChange=!1},qt=wt.find(ba=>ba.id===Te)??wt[0],un=m.Vt.hasEditPermissionInFolders,tn=Re.meta.canSave,yt=(0,n.TH)(),jn=Ct(yt),ra=bn(nt,Xe,wt,qt,yt),Da="sm",Ea=[t.createElement(f.zx,{"data-testid":s.wl.pages.Dashboard.Settings.Actions.close,variant:"secondary",key:"close",fill:"outline",size:Da,onClick:en},"Close"),un&&t.createElement(jt.t,{dashboard:Re,onSaveSuccess:on,variant:"secondary",key:"save as",size:Da}),tn&&t.createElement(jt.i,{dashboard:Re,onSaveSuccess:on,key:"Save",size:Da})];return t.createElement(t.Fragment,null,t.createElement(r.A,{actions:t.createElement(u.R,{alignment:"right"},Ea)}),t.createElement(qt.component,{sectionNav:ra,dashboard:Re,editIndex:jn}))}function On(Re){const Te=[];return Re.meta.canEdit&&(Te.push({title:"General",id:"settings",icon:"sliders-v-alt",component:qs}),Te.push({title:"Annotations",id:"annotations",icon:"comment-alt",component:xs,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),Te.push({title:"Variables",id:"templating",icon:"calculator-alt",component:ut,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),Te.push({title:"Links",id:"links",icon:"link",component:He})),Re.meta.canMakeEditable&&Te.push({title:"General",icon:"sliders-v-alt",id:"settings",component:Xn}),Re.id&&Re.meta.canSave&&Te.push({title:"Versions",id:"versions",icon:"history",component:Vt}),Re.id&&Re.meta.canAdmin&&(o.ZP.rbacEnabled?m.Vt.hasPermission(l.AccessControlAction.DashboardsPermissionsRead)&&Te.push({title:"Permissions",id:"permissions",icon:"lock",component:ln}):Te.push({title:"Permissions",id:"permissions",icon:"lock",component:_t})),Te.push({title:"JSON Model",id:"dashboard_json",icon:"arrow",component:_s}),Te}function yn(Re,Te){return{...Re,parentItem:Re.parentItem?yn(Re.parentItem,Te):Te}}function bn(Re,Te,nt,Xe,Nt){const zt={text:"Settings",children:[],icon:"apps",hideFromBreadcrumbs:!0};zt.children=nt.map(on=>({text:on.title,icon:on.icon,id:on.id,url:c.u.getUrlForPartial(Nt,{editview:on.id,editIndex:null}),active:on===Xe,parentItem:zt,subTitle:on.subTitle}));const wt=yn(Re,Te.node);return zt.parentItem=wt,{main:zt,node:zt.children.find(on=>on.active)}}function Xn({dashboard:Re,sectionNav:Te}){return t.createElement(d.T,{navModel:Te},t.createElement("div",{className:"dashboard-settings__header"},"Dashboard not editable"),t.createElement(f.zx,{type:"submit",onClick:()=>Re.makeEditable()},"Make editable"))}function Ct(Re){const Te=new URLSearchParams(Re.search).get("editIndex");if(Te!=null)return parseInt(Te,10)}},18428:(Y,T,e)=>{"use strict";e.d(T,{fD:()=>p,xy:()=>m,zA:()=>d});var t=e(66111),n=e(24799),c=e(46967),s=e(8581),i=e(43339),f=e(20941),u=e(58255),r=e(31403);const d={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},o=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],m={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},l=Object.keys(m).map(g=>({label:g,value:g})),p=({editLinkIdx:g,dashboard:y,onGoBack:v})=>{const[E,h]=(0,t.useState)(g!==null?y.links[g]:d),C=b=>{const R=[...y.links];R.splice(g,1,b),y.links=R,h(b)},a=b=>{C({...E,tags:b})},P=b=>{const R={...E,type:b.value};R.type==="dashboards"?(R.url="",R.tooltip=""):R.tags=[],C(R)},D=b=>{C({...E,icon:b.value})},x=b=>{const R=b.currentTarget;C({...E,[R.name]:R.type==="checkbox"?R.checked:R.value})},M=E.title===d.title;return t.createElement("div",{style:{maxWidth:"600px"}},t.createElement(n.g,{label:"Title"},t.createElement(c.I,{name:"title",id:"title",value:E.title,onChange:x,autoFocus:M})),t.createElement(n.g,{label:"Type"},t.createElement(s.Ph,{inputId:"link-type-input",value:E.type,options:o,onChange:P})),E.type==="dashboards"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"With tags"},t.createElement(i.B,{tags:E.tags,onChange:a}))),E.type==="link"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"URL"},t.createElement(c.I,{name:"url",value:E.url,onChange:x})),t.createElement(n.g,{label:"Tooltip"},t.createElement(c.I,{name:"tooltip",value:E.tooltip,onChange:x,placeholder:"Open dashboard"})),t.createElement(n.g,{label:"Icon"},t.createElement(s.Ph,{value:E.icon,options:l,onChange:D}))),t.createElement(f.s,{label:"Options",isOpen:!0},E.type==="dashboards"&&t.createElement(n.g,null,t.createElement(u.X,{label:"Show as dropdown",name:"asDropdown",value:E.asDropdown,onChange:x})),t.createElement(n.g,null,t.createElement(u.X,{label:"Include current time range",name:"keepTime",value:E.keepTime,onChange:x})),t.createElement(n.g,null,t.createElement(u.X,{label:"Include current template variable values",name:"includeVars",value:E.includeVars,onChange:x})),t.createElement(n.g,null,t.createElement(u.X,{label:"Open link in new tab",name:"targetBlank",value:E.targetBlank,onChange:x}))),t.createElement(r.zx,{onClick:v},"Apply"))}},91183:(Y,T,e)=>{"use strict";e.d(T,{u:()=>m});var t=e(9892),n=e(66111),c=e(23934),s=e(68183),i=e(72648),f=e(51275),u=e(31403),r=e(96044),d=e(36281);const o="showCategory",m=n.memo(({id:g,title:y,children:v,forceOpen:E,isOpenDefault:h,renderTitle:C,className:a,itemsCount:P,isNested:D=!1})=>{const x=h!==!1,[M,b]=(0,c.Z)(p(g),{isExpanded:x}),R=(0,i.wW)(l),[S,O]=(0,r.K)(),[U,I]=(0,n.useState)(M?.isExpanded??x),F=(0,n.useRef)(0),w=(0,n.useRef)(null),K=S[o]===g;(0,n.useEffect)(()=>{F.current&&Date.now()-F.current<200||(K||E)&&(U||I(!0),K&&w.current?.scrollIntoView())},[E,U,K]);const L=(0,n.useCallback)(()=>{F.current=Date.now(),O({[o]:U?void 0:g},!0),b({isExpanded:!U}),I(!U)},[b,I,O,U,g]);C||(C=function(_){return _||P===void 0||P===0?y:n.createElement("span",null,y," ",n.createElement(f.A,{value:P}))});const V=(0,t.cx)({[R.box]:!0,[R.boxNestedExpanded]:D&&U},a,"options-group"),H=(0,t.cx)(R.header,{[R.headerExpanded]:U,[R.headerNested]:D}),j=(0,t.cx)(R.body,{[R.bodyNested]:D});return n.createElement("div",{className:V,"data-testid":"options-category","aria-label":s.wl.components.OptionsGroup.group(g),ref:w},n.createElement("div",{className:H,onClick:L},n.createElement(u.zx,{"aria-label":s.wl.components.OptionsGroup.toggle(g),type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":U,className:R.toggleButton,icon:U?"angle-down":"angle-right",onClick:L}),n.createElement("h6",{id:`button-${g}`,className:R.title},C(U))),U&&n.createElement("div",{className:j,id:g,"aria-labelledby":`button-${g}`},v))});m.displayName="OptionsPaneCategory";const l=g=>({box:t.css`
      border-top: 1px solid ${g.colors.border.weak};
    `,boxNestedExpanded:t.css`
      margin-bottom: ${g.spacing(2)};
    `,title:t.css`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      padding-left: 6px;
      font-weight: ${g.typography.fontWeightMedium};
      margin: 0;
    `,header:t.css`
      display: flex;
      cursor: pointer;
      align-items: center;
      padding: ${g.spacing(.5)};
      color: ${g.colors.text.primary};
      font-weight: ${g.typography.fontWeightMedium};

      &:hover {
        background: ${g.colors.emphasize(g.colors.background.primary,.03)};
      }
    `,toggleButton:t.css`
      align-self: baseline;
    `,headerExpanded:t.css`
      color: ${g.colors.text.primary};
    `,headerNested:t.css`
      padding: ${g.spacing(.5,0,.5,0)};
    `,body:t.css`
      padding: ${g.spacing(1,2,1,4)};
    `,bodyNested:t.css`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${g.colors.border.weak};
      }
    `}),p=g=>`${d.jy}.optionGroup[${g}]`},91752:(Y,T,e)=>{"use strict";e.d(T,{j:()=>c});var t=e(66111),n=e(91183);class c{constructor(i){this.props=i,this.items=[],this.categories=[]}addItem(i){return i.parent=this,this.items.push(i),this}addCategory(i){return i.props.isNested=!0,i.parent=this,this.categories.push(i),this}getCategory(i){let f=this.categories.find(u=>u.props.id===i);return f||(f=new c({title:i,id:i}),this.addCategory(f),f)}render(i){return this.props.customRender?this.props.customRender():t.createElement(n.u,{key:this.props.title,...this.props},this.items.map(f=>f.render(i)),this.categories.map(f=>f.render(i)))}}},66352:(Y,T,e)=>{"use strict";e.d(T,{a:()=>l});var t=e(66111),n=e(55271),c=e.n(n),s=e(68183),i=e(64353),f=e(24799),u=e(9892),r=e(72648),d=e(61860);function o({overrides:p}){const g=(0,r.wW)(m);return t.createElement("div",{className:g.wrapper},p.map((y,v)=>t.createElement(d.u,{content:y.tooltip,key:v.toString(),placement:"top"},t.createElement("div",{"aria-label":y.description,className:g[y.type]}))))}const m=p=>{const g={width:8,height:8,borderRadius:"50%",marginLeft:p.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,u.css)({display:"flex"}),rule:(0,u.css)({...g,backgroundColor:p.colors.primary.main}),data:(0,u.css)({...g,backgroundColor:p.colors.warning.main})}};class l{constructor(g){this.props=g}getLabel(g){const{title:y,description:v,overrides:E}=this.props;if(!g)return this.parent.props.title===y&&!E?.length?null:t.createElement(i._,{description:v},y,E&&E.length>0&&t.createElement(o,{overrides:E}));const h=[];return this.parent.parent&&h.push(this.highlightWord(this.parent.parent.props.title,g)),this.parent.props.title!==y&&h.push(this.highlightWord(this.parent.props.title,g)),t.createElement(i._,{description:v&&this.highlightWord(v,g),category:h},this.highlightWord(y,g),E&&E.length>0&&t.createElement(o,{overrides:E}))}highlightWord(g,y){return t.createElement(c(),{textToHighlight:g,searchWords:[y],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:g}=this.props;!g||g.length}render(g){const{title:y,description:v,render:E,showIf:h,skipField:C}=this.props,a=`${this.parent.props.id} ${y}`;return h&&!h()?null:C?E():t.createElement(f.g,{label:this.getLabel(g),description:v,key:a,"aria-label":s.wl.components.PanelEditor.OptionsPane.fieldLabel(a)},E())}}},57054:(Y,T,e)=>{"use strict";e.d(T,{HZ:()=>p,AL:()=>l});var t=e(82897),n=e(66111),c=e(91353),s=e(64703),i=e(91752),f=e(66352);const u="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",r="An override rule exists for this property";function d(g,y,v){const E=[];if(v){for(const C of v)for(const a of C.fields)if((0,t.get)(a.config,g.path)!=null){E.push({type:"data",description:u,tooltip:u});break}}return y.overrides.some(C=>C.properties.some(a=>a.id===g.id))&&E.push({type:"rule",description:r,tooltip:r}),E}var o=e(13505);function m({data:g,replaceVariables:y,options:v,eventBus:E,instanceState:h}){const C=g?.series??[];return{data:C,replaceVariables:y,options:v,eventBus:E,getSuggestions:P=>(0,s.PW)(C,P),instanceState:h}}function l(g){const{plugin:y,panel:v,onPanelOptionsChanged:E,onFieldConfigsChange:h,data:C,dashboard:a,instanceState:P}=g,D=v.getOptions(),x=v.fieldConfig,M={},b=m({data:C,replaceVariables:v.replaceVariables,options:D,eventBus:a.events,instanceState:P}),R=O=>{const U=(O&&O[0])??`${y.meta.name}`,I=M[U];return I||(M[U]=new i.j({title:U,id:U}))},S={getValue:O=>(0,t.get)(D,O),onChange:(O,U)=>{const I=(0,o.hs)(D,O,U);E(I)}};p(y.getPanelOptionsSupplier(),S,R,b);for(const O of y.fieldConfigRegistry.list()){if(O.isCustom&&O.showIf&&!O.showIf(x.defaults.custom,C?.series)||O.hideFromDefaults)continue;const U=R(O.category),I=O.editor,F=x.defaults,w=O.isCustom?F.custom?(0,t.get)(F.custom,O.path):void 0:(0,t.get)(F,O.path);O.getItemsCount&&(U.props.itemsCount=O.getItemsCount(w)),U.addItem(new f.a({title:O.name,description:O.description,overrides:d(O,x,C?.series),render:function(){const L=V=>{h((0,o.uJ)(x,O.path,V,O.isCustom))};return n.createElement(I,{value:w,onChange:L,item:O,context:b,id:O.id})}}))}return Object.values(M)}function p(g,y,v,E,h){const C=new c.rt;g(C,E);for(const a of C.getItems()){if(a.showIf&&!a.showIf(E.options,E.data))continue;let P=h;if(P?a.category?.[0]?.length&&(P=P.getCategory(a.category[0])):P=v(a.category),(0,c.j)(a)){const x=a.getNestedValueAccess(y),M=x.getContext?x.getContext(E):{...E,options:y.getValue(a.path)};p(a.getBuilder(),x,v,M,P);continue}const D=a.editor;P.addItem(new f.a({title:a.name,description:a.description,render:function(){return n.createElement(D,{value:y.getValue(a.path),onChange:M=>{y.onChange(a.path,M)},item:a,context:E,id:a.id})}}))}}},36281:(Y,T,e)=>{"use strict";e.d(T,{Hl:()=>m,K9:()=>y,OT:()=>E,ZP:()=>C,g_:()=>v,jy:()=>u,my:()=>g,yi:()=>p});var t=e(62992),n=e(52666),c=e(75849),s=e(58379),i=e(96161),f=e(16200);const u="grafana.dashboard.editor.ui",r={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:f.d1.Fill},d=()=>{const a=s.Z.getObject(u,r);let P={...a};return typeof a.topPaneSize=="string"&&(P={...a,topPaneSize:parseFloat(a.topPaneSize)/100}),{getPanel:()=>new i.rY({}),getSourcePanel:()=>new i.rY({}),getData:()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,c.JK)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...r,...P}}},o=(0,t.oM)({name:"panelEditor",initialState:d(),reducers:{updateEditorInitState:(a,P)=>{a.getPanel=()=>P.payload.panel,a.getSourcePanel=()=>P.payload.sourcePanel,a.initDone=!0,a.isOpen=!0,a.shouldDiscardChanges=!1},setEditorPanelData:(a,P)=>{a.getData=()=>P.payload},setDiscardChanges:(a,P)=>{a.shouldDiscardChanges=P.payload},setPanelEditorUIState:(a,P)=>{a.ui={...a.ui,...P.payload},!a.ui.isPanelOptionsVisible&&a.isVizPickerOpen&&(a.isVizPickerOpen=!1)},toggleVizPicker:(a,P)=>{a.isVizPickerOpen=P.payload,a.isVizPickerOpen&&(a.ui.isPanelOptionsVisible=!0)},toggleTableView(a){a.tableViewEnabled=!a.tableViewEnabled},closeEditor:a=>{a.getPanel=()=>new i.rY({}),a.getSourcePanel=()=>new i.rY({}),a.isOpen=!1,a.initDone=!1,a.isVizPickerOpen=!1,a.tableViewEnabled=!1}}}),{updateEditorInitState:m,setEditorPanelData:l,setDiscardChanges:p,closeEditor:g,setPanelEditorUIState:y,toggleVizPicker:v,toggleTableView:E}=o.actions,C={panelEditor:o.reducer}},16200:(Y,T,e)=>{"use strict";e.d(T,{Ip:()=>t,Ok:()=>f,d1:()=>n,d7:()=>s});var t=(u=>(u.Query="query",u.Transform="transform",u.Visualize="visualize",u.Alert="alert",u))(t||{}),n=(u=>(u[u.Fill=0]="Fill",u[u.Fit=1]="Fit",u[u.Exact=2]="Exact",u))(n||{}),c=(u=>(u[u.Off=0]="Off",u[u.Table=1]="Table",u))(c||{});const s=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],i=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var f=(u=>(u[u.Visualizations=0]="Visualizations",u[u.LibraryPanels=1]="LibraryPanels",u[u.Suggestions=2]="Suggestions",u))(f||{})},13505:(Y,T,e)=>{"use strict";e.d(T,{hs:()=>r,jF:()=>i,sY:()=>f,uJ:()=>u});var t=e(82897),n=e.n(t),c=e(84952),s=e(16200);function i(d,o,m,l){if(d===s.d1.Fill)return{width:o,height:m};const p=8*6,g=60,v=(window.innerWidth-g-c.hD*4)/c.cz*l.gridPos.w,E=c.K3*l.gridPos.h+p,h=Math.min(o/v,m/E);return v<=o&&E<=m?{width:v,height:E}:{width:v*h,height:E*h}}function f(d){return d?.meta.skipDataQuery===!1}const u=(d,o,m,l)=>{let p={...d.defaults};const g=m==null||m==="";return l?p.custom?g?p.custom=(0,t.omit)(p.custom,o):p.custom=r(p.custom,o,m):g||(p.custom=r(p.custom,o,m)):g?p=(0,t.omit)(p,o):p=r(p,o,m),{...d,defaults:p}};function r(d,o,m){const l=Array.isArray(o)?o:o.split("."),p=l.shift();if(p.endsWith("]")){const y=p.lastIndexOf("["),v=+p.substring(y+1,p.length-1),E=p.substring(0,y);let h=d[E];const C=Array.isArray(h)?[...h]:[];return l.length&&(h=C[v],(h==null||typeof h!="object")&&(h={}),m=r(h,l,m)),C[v]=m,{...d,[E]:C}}if(!l.length)return{...d,[p]:m};let g=d[p];return(g==null||typeof g!="object")&&(g={}),{...d,[p]:r(g,l,m)}}},84135:(Y,T,e)=>{"use strict";e.d(T,{i:()=>u,t:()=>r});var t=e(66111),n=e(68183),c=e(41818),s=e(5191),i=e(31403),f=e(63205);const u=({dashboard:d,onSaveSuccess:o,size:m})=>t.createElement(s.JY,null,({showModal:l,hideModal:p})=>t.createElement(i.zx,{size:m,onClick:()=>{l(f.d,{dashboard:d,onSaveSuccess:o,onDismiss:p})},"aria-label":n.wl.pages.Dashboard.Settings.General.saveDashBoard},"Save dashboard")),r=({dashboard:d,onSaveSuccess:o,variant:m,size:l})=>t.createElement(s.JY,null,({showModal:p,hideModal:g})=>t.createElement(i.zx,{size:l,onClick:()=>{(0,c.ff)("grafana_dashboard_save_as_clicked"),p(f.d,{dashboard:d,onSaveSuccess:o,onDismiss:g,isCopy:!0})},variant:m,"aria-label":n.wl.pages.Dashboard.Settings.General.saveAsDashBoard},"Save as"))},63205:(Y,T,e)=>{"use strict";e.d(T,{d:()=>Ve});var t=e(66111),n=e(59679),c=e(54899),s=e(35645),i=e(67487),f=e(30979),u=e(72142),r=e(79841),d=e(29930),o=e(15092),m=e(9892),l=e(72648),p=e(45253);function g({dashboard:_e}){const tt=(0,l.wW)(y),{loading:dt,value:Oe,error:ye}=(0,n.Z)(async()=>{const be=_e.getSaveModelClone();return d.ae.validateDashboard(be).catch(ze=>{if(ze.status>=500)throw ze;return ze.data})},[_e]);let Pe;if(dt)Pe=t.createElement(p.b,{severity:"info",title:"Checking dashboard validity"});else if(Oe)Oe.isValid||(Pe=t.createElement(p.b,{severity:"warning",title:"Dashboard failed schema validation"},t.createElement("p",null,"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"),t.createElement("div",{className:tt.error},Oe.message)));else{const be=ye?.message??"Unknown error";Pe=t.createElement(p.b,{severity:"info",title:"Error checking dashboard validity"},t.createElement("p",{className:tt.error},be))}return Pe?t.createElement("div",{className:tt.root},Pe):null}const y=_e=>({root:(0,m.css)({marginTop:_e.spacing(1)}),error:(0,m.css)({fontFamily:_e.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),v=g;var E=e(64687),h=e(61017);const C=({diff:_e,oldValue:tt,newValue:dt})=>{const Oe=(0,l.wW)(a),ye=(0,n.Z)(async()=>{const be=JSON.stringify(tt??{},null,2),Be=JSON.stringify(dt??{},null,2);let ze;const lt=[];let ht=0;if(_e)for(const[vt,bt]of Object.entries(_e)){const ct=t.createElement(E.B,{diffs:bt,key:vt,title:vt});vt==="schemaVersion"?ze=ct:lt.push(ct),ht+=bt.length}return{schemaChange:ze,diffs:lt,count:ht,showDiffs:ht<15,jsonView:t.createElement(h.Z,{oldValue:be,newValue:Be})}},[_e,tt,dt]),{value:Pe}=ye;return!Pe||!tt?t.createElement(i.$,null):Pe.count<1?t.createElement("div",null,"No changes in this dashboard"):t.createElement("div",null,Pe.schemaChange&&t.createElement("div",{className:Oe.spacer},Pe.schemaChange),Pe.showDiffs&&t.createElement("div",{className:Oe.spacer},Pe.diffs),t.createElement("h4",null,"JSON Model"),Pe.jsonView)},a=_e=>({spacer:m.css`
    margin-bottom: ${_e.v1.spacing.xl};
  `});var P=e(98102),D=e(35029),x=e(31403),M=e(84135),b=e(13821),R=e(72196),S=e(41818),O=e(37932),U=e(18271),I=e(60499),F=e(77582),w=e(61962),K=e(50946),L=e(27876),V=e(45984);const H=async(_e,tt,dt)=>{let Oe=tt.folderUid;Oe===void 0&&(Oe=dt.meta.folderUid??_e.folderUid);const ye=await(0,K.uC)({...tt,folderUid:Oe,dashboard:_e});return await F.Vt.fetchUserPermissions(),ye},j=(_e,tt=!1)=>{const dt=(0,L.useDispatch)(),Oe=(0,I.iG)(),[ye,Pe]=(0,b.Z)(async(be,Be,ze)=>{try{const lt=await H(be,Be,ze);ze.version=lt.version,ze.clearUnsavedChanges(),U.Z.publish(new V.Jd),Oe.success("Dashboard saved"),tt?(0,S.ff)("grafana_dashboard_copied",{name:ze.title,url:lt.url}):(0,S.ff)(`grafana_dashboard_${ze.id?"saved":"created"}`,{name:ze.title,url:lt.url});const ht=O.E1.getLocation().pathname,vt=R.u.stripBaseFromUrl(lt.url);return vt!==ht&&setTimeout(()=>O.E1.replace(vt)),ze.meta.isStarred&&dt((0,w.gd)({id:ze.uid,title:ze.title,url:vt})),lt}catch(lt){throw lt instanceof Error&&Oe.error(lt.message??"Error saving dashboard"),lt}},[dt,Oe]);return{state:ye,onDashboardSave:Pe}},A=({dashboard:_e,dashboardSaveModel:tt,error:dt,onDismiss:Oe})=>{const{onDashboardSave:ye}=j(_e);return(0,t.useEffect)(()=>{dt.data&&k(dt.data.status)&&(dt.isHandled=!0)},[dt]),t.createElement(t.Fragment,null,dt.data&&dt.data.status==="version-mismatch"&&t.createElement(P.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"Someone else has updated this dashboard ",t.createElement("br",null)," ",t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await ye(tt,{overwrite:!0},_e),Oe()},onDismiss:Oe}),dt.data&&dt.data.status==="name-exists"&&t.createElement(P.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"A dashboard with the same name in selected folder already exists. ",t.createElement("br",null),t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await ye(tt,{overwrite:!0},_e),Oe()},onDismiss:Oe}),dt.data&&dt.data.status==="plugin-dashboard"&&t.createElement(_,{dashboard:_e,onDismiss:Oe}))},_=({onDismiss:_e,dashboard:tt})=>{const{onDashboardSave:dt}=j(tt),Oe=(0,l.wW)(Q);return t.createElement(D.u,{className:Oe.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:_e},t.createElement("div",{className:Oe.modalText},"Your changes will be lost when you update the plugin.",t.createElement("br",null),t.createElement("small",null,"Use ",t.createElement("strong",null,"Save As")," to create custom version.")),t.createElement(D.u.ButtonRow,null,t.createElement(x.zx,{variant:"secondary",onClick:_e,fill:"outline"},"Cancel"),t.createElement(M.t,{dashboard:tt,onSaveSuccess:_e}),t.createElement(x.zx,{variant:"destructive",onClick:async()=>{await dt(tt.getSaveModelClone(),{overwrite:!0},tt),_e()}},"Overwrite")))},k=_e=>{switch(_e){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},Q=_e=>({modal:m.css`
    width: 500px;
  `,modalText:m.css`
    font-size: ${_e.typography.h4.fontSize};
    color: ${_e.colors.text.primary};
    margin-bottom: ${_e.spacing(4)}
    padding-top: ${_e.spacing(2)};
  `,modalButtonRow:m.css`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${_e.spacing(2)};
    }
  `});var re=e(94270),Z=e(24799),oe=e(46967),G=e(63619),le=e(8944),ge=e(52081),ne=e(79658),ue=e(85385);const te=_e=>{const tt=_e.getSaveModelClone();return tt.id=null,tt.uid="",tt.title+=" Copy",tt.editable=!0,_e.id>0&&tt.panels.forEach(dt=>{dt.type==="graph"&&dt.alert&&delete dt.thresholds,delete dt.alert}),tt},me=({dashboard:_e,isNew:tt,onSubmit:dt,onCancel:Oe,onSuccess:ye})=>{const Pe={title:tt?_e.title:`${_e.title} Copy`,$folder:{uid:_e.meta.folderUid,title:_e.meta.folderTitle},copyTags:!1},be=Be=>async ze=>{if(ze&&ze===Be().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await ue.t.validateNewDashboardName(Be().$folder.uid,ze),!0}catch(lt){return lt instanceof Error?lt.message:"Dashboard name is invalid"}};return t.createElement(re.l,{defaultValues:Pe,onSubmit:async Be=>{if(!dt)return;const ze=te(_e);ze.title=Be.title,Be.copyTags||(ze.tags=[]),(await dt(ze,{folderUid:Be.$folder.uid},_e)).status==="success"&&ye()}},({register:Be,control:ze,errors:lt,getValues:ht})=>t.createElement(t.Fragment,null,t.createElement(Z.g,{label:"Dashboard name",invalid:!!lt.title,error:lt.title?.message},t.createElement(oe.I,{...Be("title",{validate:be(ht)}),"aria-label":"Save dashboard title field",autoFocus:!0})),t.createElement(Z.g,{label:"Folder"},t.createElement(G.g,{render:({field:{ref:vt,...bt}})=>t.createElement(ne.Es,{...bt,dashboardId:_e.id,initialFolderUid:_e.meta.folderUid,initialTitle:_e.meta.folderTitle,enableCreateNew:!0}),control:ze,name:"$folder"})),!tt&&t.createElement(Z.g,{label:"Copy tags"},t.createElement(le.r,{...Be("copyTags")})),t.createElement(ge.Lh,null,t.createElement(x.zx,{type:"button",variant:"secondary",onClick:Oe,fill:"outline"},"Cancel"),t.createElement(x.zx,{type:"submit","aria-label":"Save dashboard button"},"Save"))))};var q=e(68183),se=e(26418),ae=e(58255),pe=e(97379);const de=({dashboard:_e,saveModel:tt,options:dt,onSubmit:Oe,onCancel:ye,onSuccess:Pe,onOptionsChange:be})=>{const Be=(0,t.useMemo)(()=>_e.hasTimeChanged(),[_e]),ze=(0,t.useMemo)(()=>_e.hasVariableValuesChanged(),[_e]),[lt,ht]=(0,t.useState)(!1);return t.createElement(re.l,{onSubmit:async vt=>{if(!Oe)return;ht(!0),dt={...dt,message:vt.message},(await Oe(tt.clone,dt,_e)).status==="success"?(dt.saveVariables&&_e.resetOriginalVariables(),dt.saveTimerange&&_e.resetOriginalTime(),Pe()):ht(!1)}},({register:vt,errors:bt})=>{const ct=vt("message");return t.createElement(se.Stack,{direction:"column",gap:2},Be&&t.createElement(ae.X,{checked:!!dt.saveTimerange,onChange:()=>be({...dt,saveTimerange:!dt.saveTimerange}),label:"Save current time range as dashboard default","aria-label":q.wl.pages.SaveDashboardModal.saveTimerange}),ze&&t.createElement(ae.X,{checked:!!dt.saveVariables,onChange:()=>be({...dt,saveVariables:!dt.saveVariables}),label:"Save current variable values as dashboard default","aria-label":q.wl.pages.SaveDashboardModal.saveVariables}),t.createElement(pe.K,{...ct,"aria-label":"message",value:dt.message,onChange:Pt=>{be({...dt,message:Pt.currentTarget.value}),ct.onChange(Pt)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5}),t.createElement(se.Stack,{alignItems:"center"},t.createElement(x.zx,{variant:"secondary",onClick:ye,fill:"outline"},"Cancel"),t.createElement(x.zx,{type:"submit",disabled:!tt.hasChanges,icon:lt?"fa fa-spinner":void 0,"aria-label":q.wl.pages.SaveDashboardModal.save},"Save"),!tt.hasChanges&&t.createElement("div",null,"No changes to save")))})};var Me=e(3574),Ke=e(94599);const st=({dashboard:_e,onCancel:tt})=>{const[dt,Oe]=(0,t.useState)(()=>{const Pe=_e.getSaveModelClone();return delete Pe.id,JSON.stringify(Pe,null,2)}),ye=(0,t.useCallback)(()=>{const Pe=new Blob([dt],{type:"application/json;charset=utf-8"});(0,Me.saveAs)(Pe,_e.title+"-"+new Date().getTime()+".json")},[_e.title,dt]);return t.createElement(t.Fragment,null,t.createElement(se.Stack,{direction:"column",gap:2},t.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",t.createElement("br",null),t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null)," ",t.createElement("br",null),t.createElement("strong",null,"File path: ")," ",_e.meta.provisionedExternalId),t.createElement(pe.K,{spellCheck:!1,value:dt,onChange:Pe=>{Oe(Pe.currentTarget.value)},className:Ie.json}),t.createElement(ge.Lh,null,t.createElement(x.zx,{variant:"secondary",onClick:tt,fill:"outline"},"Cancel"),t.createElement(Ke.m,{icon:"copy",getText:()=>dt},"Copy JSON to clipboard"),t.createElement(x.zx,{type:"submit",onClick:ye},"Save JSON to file"))))},Ie={json:m.css`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `},Ve=({dashboard:_e,onDismiss:tt,onSaveSuccess:dt,isCopy:Oe})=>{const[ye,Pe]=(0,t.useState)({}),be=_e.meta.provisioned,Be=_e.version===0,ze=(0,n.Z)(async()=>Be?void 0:(await d.ae.getDashboardByUid(_e.uid)).dashboard,[_e,Be]),lt=(0,t.useMemo)(()=>{const Ne=_e.getSaveModelClone({saveTimerange:Boolean(ye.saveTimerange),saveVariables:Boolean(ye.saveVariables)});if(!ze.value)return{clone:Ne,diff:{},diffCount:0,hasChanges:!1};const Ze=JSON.stringify(Ne,null,2),Qe=JSON.parse(Ze),Le=(0,o.Q$)(ze.value,Qe);let Ue=0;for(const ve of Object.values(Le))Ue+=ve.length;return{clone:Ne,diff:Le,diffCount:Ue,hasChanges:Ue>0&&!Be}},[_e,ze.value,ye,Be]),[ht,vt]=(0,t.useState)(!1),{state:bt,onDashboardSave:ct}=j(_e,Oe),Pt=dt?()=>{tt(),dt()}:tt,ie=()=>ht?t.createElement(C,{diff:lt.diff,oldValue:ze.value,newValue:lt.clone}):bt.loading?t.createElement("div",null,t.createElement(i.$,null)):Be||Oe?t.createElement(me,{dashboard:_e,onCancel:tt,onSuccess:Pt,onSubmit:ct,isNew:Be}):be?t.createElement(st,{dashboard:_e,onCancel:tt,onSuccess:Pt}):t.createElement(de,{dashboard:_e,saveModel:lt,onCancel:tt,onSuccess:Pt,onSubmit:ct,options:ye,onOptionsChange:Pe});if(bt.error&&(0,c.kW)(bt.error)&&!bt.error.isHandled)return t.createElement(A,{error:bt.error,dashboard:_e,dashboardSaveModel:lt.clone,onDismiss:tt});let Ce="Save dashboard";return Oe?Ce="Save dashboard copy":be&&(Ce="Provisioned dashboard"),t.createElement(f.d,{title:Ce,onClose:tt,subtitle:_e.title,tabs:t.createElement(u.J,null,t.createElement(r.O,{label:"Details",active:!ht,onChangeTab:()=>vt(!1)}),lt.hasChanges&&t.createElement(r.O,{label:"Changes",active:ht,onChangeTab:()=>vt(!0),counter:lt.diffCount})),scrollableContent:!0},ie(),s.v.featureToggles.showDashboardValidationWarnings&&t.createElement(v,{dashboard:_e}))}},80882:(Y,T,e)=>{"use strict";e.d(T,{Jd:()=>c,_H:()=>s,Ez:()=>r,_M:()=>u,ek:()=>f,Gt:()=>i,C2:()=>d});var t=e(47694);const n=new Set(["__expr__","aquaqanalytics-kdbbackend-datasource","cloudwatch","datasource","dlopes7-appdynamics-datasource","doitintl-bigquery-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-db2-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-github-datasource","grafana-gitlab-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","marcusolsson-csv-datasource","marcusolsson-ynab-datasource","mssql","mysql","nagasudhirpulla-api-datasource","opentsdb","postgres","prometheus","redis-datasource","sentinelone-dataset-datasource","tdengine-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","yesoreyeram-infinity-datasource"]);var c=(o=>(o.PUBLIC="public",o.EMAIL="email",o))(c||{});const s=o=>o.length>0,i=o=>o?.uid!==""&&o?.uid!==void 0,f=o=>{let m=new Set;for(const l of o)for(const p of l.targets){let g=p?.datasource?.type;g&&!n.has(g)&&m.add(g)}return Array.from(m).sort()},u=o=>`${(0,t.iE)().appUrl}public-dashboards/${o}`,r=o=>`/d/${o}?shareView=public-dashboard`,d=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i},53818:(Y,T,e)=>{"use strict";e.d(T,{ShareModal:()=>Kt});var t=e(66111),n=e(41818),c=e(88683),s=e(35029),i=e(94893),f=e(47694),u=e(77582),r=e(35287),d=e(9892),o=e(72648),m=e(67487),l=e(10655),p=e(80882),g=e(21048),y=e(9085),v=e.n(y),E=e(66698),h=e(68183),C=e(35645),a=e(66121),P=e(5191),D=e(52081),x=e(24799),M=e(46967),b=e(94599),R=e(8944),S=e(64353),O=e(82002),U=e(27876),I=e(80600),F=e(84532),w=e(830);const K=()=>{const{width:Lt}=(0,w.Z)();return Lt>1024};var L=e(45253);const V=h.wl.pages.ShareDashboardModal.PublicDashboard,H=({mode:Lt})=>t.createElement(L.b,{severity:"info",title:`You don\u2019t have permission to ${Lt} a public dashboard`,"data-testid":V.NoUpsertPermissionsWarningAlert},"Contact your admin to get permission to ",Lt," create public dashboards"),j=()=>t.createElement(L.b,{title:"Please save your dashboard changes before updating the public configuration",severity:"warning"}),A=h.wl.pages.ShareDashboardModal.PublicDashboard,_=({unsupportedDataSources:Lt})=>{const Ut=(0,o.wW)(k);return t.createElement(L.b,{severity:"warning",title:"Unsupported data sources","data-testid":A.UnsupportedDataSourcesWarningAlert},t.createElement("p",{className:Ut.unsupportedDataSourceDescription},"There are data sources in this dashboard that are unsupported for public dashboards. Panels that use these data sources may not function properly: ",Lt,"."),t.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",className:v()("text-link",Ut.unsupportedDataSourceDescription)},"Read more about supported data sources"))},k=Lt=>({unsupportedDataSourceDescription:d.css`
    color: ${Lt.colors.text.secondary};
    margin-bottom: ${Lt.spacing(1)};
  `}),Q=h.wl.pages.ShareDashboardModal.PublicDashboard,re=()=>t.createElement(L.b,{severity:"warning",title:"Template variables are not supported","data-testid":Q.TemplateVariablesWarningAlert},"This public dashboard may not work since it uses template variables");var Z=e(13393),oe=e(95794),G=e(74124);const le=h.wl.pages.ShareDashboardModal.PublicDashboard,ge=({disabled:Lt,onChange:Ut,register:Rt})=>{const $t=(0,o.wW)(ne),jt=(0,U.useSelector)(cn=>cn.dashboard).getModel(),an=(0,G.O)(jt.getDefaultTime(),jt);return t.createElement(t.Fragment,null,t.createElement(Z.C,{disabled:Lt,className:$t.dashboardConfig},t.createElement(D.wc,{spacing:"md"},t.createElement(D.Ar,{orientation:1,spacing:"xs",justify:"space-between"},t.createElement(S._,{description:"The public dashboard uses the default time range settings of the dashboard"},"Default time range"),t.createElement(oe.K,{value:an,disabled:!0,onChange:()=>{}})),t.createElement(D.Ar,{orientation:0,spacing:"sm"},t.createElement(R.r,{...Rt("isTimeSelectionEnabled"),"data-testid":le.EnableTimeRangeSwitch,onChange:cn=>{(0,n.ff)("grafana_dashboards_public_time_selection_clicked",{action:cn.currentTarget.checked?"enable":"disable"}),Ut("isTimeSelectionEnabled",cn.currentTarget.checked)}}),t.createElement(S._,{description:"Allow viewers to change time range"},"Time range picker enabled")),t.createElement(D.Ar,{orientation:0,spacing:"sm"},t.createElement(R.r,{...Rt("isAnnotationsEnabled"),onChange:cn=>{(0,n.ff)("grafana_dashboards_public_annotations_clicked",{action:cn.currentTarget.checked?"enable":"disable"}),Ut("isAnnotationsEnabled",cn.currentTarget.checked)},"data-testid":le.EnableAnnotationsSwitch}),t.createElement(S._,{description:"Show annotations on public dashboard"},"Show annotations")))))},ne=Lt=>({dashboardConfig:d.css`
    margin: ${Lt.spacing(0,0,3,0)};
  `});var ue=e(26202),te=e(31403),me=e(63619),q=e(2594);const se=[{label:"Anyone with a link",value:p.Jd.PUBLIC},{label:"Only specified people",value:p.Jd.EMAIL}],ae=h.wl.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,pe=({recipients:Lt,dashboardUid:Ut,publicDashboardUid:Rt})=>{const $t=(0,o.wW)(Me),[_t,{isLoading:jt}]=(0,l.r5)(),[an,{isLoading:cn}]=(0,l.RS)(),rn=jt||cn,hn=Rn=>{(0,n.ff)("grafana_dashboards_public_delete_sharing_email_clicked"),_t({recipientUid:Rn,dashboardUid:Ut,uid:Rt})},Dn=Rn=>{(0,n.ff)("grafana_dashboards_public_reshare_email_clicked"),an({recipientUid:Rn,uid:Rt})};return t.createElement("table",{className:$t.table,"data-testid":ae.EmailSharingList},t.createElement("tbody",null,Lt.map((Rn,ea)=>t.createElement("tr",{key:Rn.uid},t.createElement("td",null,Rn.recipient),t.createElement("td",null,t.createElement(ue.h,{className:$t.tableButtonsContainer},t.createElement(te.zx,{type:"button",variant:"destructive",fill:"text","aria-label":"Revoke",title:"Revoke",size:"sm",disabled:rn,onClick:()=>hn(Rn.uid),"data-testid":`${ae.DeleteEmail}-${ea}`},"Revoke"),t.createElement(te.zx,{type:"button",variant:"primary",fill:"text","aria-label":"Resend",title:"Resend",size:"sm",disabled:rn,onClick:()=>Dn(Rn.uid),"data-testid":`${ae.ReshareLink}-${ea}`},"Resend")))))))},de=()=>{const{width:Lt}=(0,w.Z)(),Ut=(0,o.wW)(Me),$t=(0,U.useSelector)(la=>la.dashboard).getModel(),{data:_t}=(0,l.Ym)($t.uid),[jt]=(0,l.Mi)(),[an,{isLoading:cn}]=(0,l.FJ)(),{register:rn,setValue:hn,control:Dn,watch:Rn,handleSubmit:ea,formState:{errors:Fn},reset:Vn}=(0,E.cI)({defaultValues:{shareType:_t?.share||p.Jd.PUBLIC,email:""},mode:"onSubmit"}),aa=la=>{const Yn={dashboard:$t,payload:{..._t,share:la}};jt(Yn)},Sa=async la=>{(0,n.ff)("grafana_dashboards_public_add_share_email_clicked"),await an({recipient:la.email,uid:_t.uid,dashboardUid:$t.uid}).unwrap(),Vn({email:"",shareType:p.Jd.EMAIL})};return t.createElement("form",{"data-testid":ae.Container,className:Ut.container,onSubmit:ea(Sa)},t.createElement(x.g,{label:"Can view dashboard"},t.createElement(me.g,{name:"shareType",control:Dn,render:({field:la})=>{const{ref:Yn,...ia}=la;return t.createElement(q.S,{...ia,size:Lt<480?"sm":"md",options:se,onChange:Ia=>{(0,n.ff)("grafana_dashboards_public_share_type_clicked",{type:Ia}),hn("shareType",Ia),aa(Ia)}})}})),Rn("shareType")===p.Jd.EMAIL&&t.createElement(t.Fragment,null,t.createElement(x.g,{label:"Invite",description:"Invite people by email",error:Fn.email?.message,invalid:!!Fn.email?.message||void 0},t.createElement("div",{className:Ut.emailContainer},t.createElement(M.I,{className:Ut.emailInput,placeholder:"email",autoCapitalize:"none",...rn("email",{required:"Email is required",pattern:{value:p.C2,message:"Invalid email"}}),"data-testid":ae.EmailSharingInput}),t.createElement(te.zx,{type:"submit",variant:"primary",disabled:cn,"data-testid":ae.EmailSharingInviteButton},"Invite ",cn&&t.createElement(m.$,null)))),!!_t?.recipients?.length&&t.createElement(pe,{recipients:_t.recipients,dashboardUid:$t.uid,publicDashboardUid:_t.uid})))},Me=Lt=>({container:d.css`
    margin-bottom: ${Lt.spacing(2)};
  `,emailContainer:d.css`
    display: flex;
    gap: ${Lt.spacing(1)};
  `,emailInput:d.css`
    flex-grow: 1;
  `,table:d.css`
    display: flex;
    max-height: 220px;
    overflow-y: scroll;
    margin-bottom: ${Lt.spacing(1)};

    & tbody {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    & tr {
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: ${Lt.spacing(.5,1)};

      :nth-child(odd) {
        background: ${Lt.colors.background.secondary};
      }
    }
  `,tableButtonsContainer:d.css`
    display: flex;
    justify-content: end;
  `}),Ke=h.wl.pages.ShareDashboardModal.PublicDashboard,st=()=>{const Lt=(0,o.wW)(Ie),{showModal:Ut,hideModal:Rt}=(0,t.useContext)(P.kr),$t=K(),_t=O.Vt.hasAccess(U.AccessControlAction.DashboardsPublicWrite,(0,F.RN)()),jt=!!C.v.featureToggles.publicDashboardsEmailSharing&&(0,a.v)("publicDashboardsEmailSharing"),cn=(0,U.useSelector)(ha=>ha.dashboard).getModel(),rn=cn.getVariables(),hn=(0,p.ek)(cn.panels),{data:Dn,isFetching:Rn}=(0,l.Ym)(cn.uid),[ea,{isLoading:Fn}]=(0,l.Mi)(),Vn=!_t||Fn||Rn,{handleSubmit:aa,setValue:Sa,register:la}=(0,E.cI)({defaultValues:{isAnnotationsEnabled:Dn?.annotationsEnabled,isTimeSelectionEnabled:Dn?.timeSelectionEnabled,isPaused:!Dn?.isEnabled}}),Yn=async ha=>{const{isAnnotationsEnabled:xa,isTimeSelectionEnabled:Wa,isPaused:as}=ha,Xa={dashboard:cn,payload:{...Dn,annotationsEnabled:xa,timeSelectionEnabled:Wa,isEnabled:!as}};ea(Xa)},ia=async(ha,xa)=>{Sa(ha,xa),await aa(Wa=>Yn(Wa))()},Ia=()=>{Ut(Kt,{dashboard:cn,onDismiss:Rt,activeTab:"public-dashboard"})};return t.createElement("div",null,_t&&cn.hasUnsavedChanges()&&t.createElement(j,null),!_t&&t.createElement(H,{mode:"edit"}),(0,p._H)(rn)&&t.createElement(re,null),!!hn.length&&t.createElement(_,{unsupportedDataSources:hn.join(", ")}),t.createElement("div",{className:Lt.titleContainer},t.createElement(D.Lh,{spacing:"sm",align:"center"},t.createElement("h4",{className:Lt.title},"Settings"),(Fn||Rn)&&t.createElement(m.$,{size:14}))),t.createElement(ge,{disabled:Vn,onChange:ia,register:la}),t.createElement("hr",null),jt&&t.createElement(de,null),t.createElement(x.g,{label:"Dashboard URL",className:Lt.publicUrl},t.createElement(M.I,{value:(0,p._M)(Dn.accessToken),readOnly:!0,disabled:!Dn?.isEnabled,"data-testid":Ke.CopyUrlInput,addonAfter:t.createElement(b.m,{"data-testid":Ke.CopyUrlButton,variant:"primary",disabled:!Dn?.isEnabled,getText:()=>(0,p._M)(Dn.accessToken)},"Copy")})),t.createElement(D.Ar,{orientation:$t?0:1,justify:$t?"flex-end":"flex-start",align:$t?"center":"normal"},t.createElement(D.Lh,{spacing:"sm"},t.createElement(R.r,{...la("isPaused"),disabled:Vn,onChange:ha=>{(0,n.ff)("grafana_dashboards_public_enable_clicked",{action:ha.currentTarget.checked?"disable":"enable"}),ia("isPaused",ha.currentTarget.checked)},"data-testid":Ke.PauseSwitch}),t.createElement(S._,{className:d.css`
              margin-bottom: 0;
            `},"Pause sharing dashboard")),t.createElement(D.Lh,{justify:"flex-end"},t.createElement(I.H,{className:v()(Lt.deleteButton,{[Lt.deleteButtonMobile]:!$t}),type:"button",disabled:Vn,"data-testid":Ke.DeleteButton,onDismiss:Ia,variant:"destructive",fill:"outline",dashboard:cn,publicDashboard:{uid:Dn.uid,dashboardUid:cn.uid,title:cn.title}},"Revoke public URL"))))},Ie=Lt=>({titleContainer:d.css`
    margin-bottom: ${Lt.spacing(2)};
  `,title:d.css`
    margin: 0;
  `,publicUrl:d.css`
    width: 100%;
    padding-top: ${Lt.spacing(1)};
    margin-bottom: ${Lt.spacing(3)};
  `,deleteButton:d.css`
    margin-left: ${Lt.spacing(3)};
  `,deleteButtonMobile:d.css`
    margin-top: ${Lt.spacing(2)};
  `}),Ve=st;var _e=e(94270),tt=e(58255);const dt=h.wl.pages.ShareDashboardModal.PublicDashboard,Oe=[{type:"publicAcknowledgment",description:"Your entire dashboard will be public*",testId:dt.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:"Learn more about public dashboards"}},{type:"dataSourcesAcknowledgment",description:"Publishing currently only works with a subset of data sources*",testId:dt.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:"Learn more about public datasources"}},{type:"usageAcknowledgment",description:"Making a dashboard public will cause queries to run each time is viewed, which may increase costs*",testId:dt.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:"Learn more about query caching"}}],ye=({disabled:Lt,register:Ut})=>{const Rt=(0,o.wW)(Pe);return t.createElement(t.Fragment,null,t.createElement("p",{className:Rt.title},"Before you make the dashboard public, acknowledge the following:"),t.createElement(Z.C,{disabled:Lt},t.createElement(D.wc,{spacing:"md"},Oe.map($t=>t.createElement(D.Lh,{key:$t.type,spacing:"none",align:"center"},t.createElement(tt.X,{...Ut($t.type,{required:!0}),label:$t.description,"data-testid":$t.testId}),t.createElement(te.Qj,{variant:"primary",href:$t.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:$t.info.tooltip}))))))},Pe=Lt=>({title:d.css`
    font-weight: ${Lt.typography.fontWeightBold};
  `}),be=()=>{const Lt=(0,o.wW)(Be);return t.createElement("div",{className:Lt.container},t.createElement("p",{className:Lt.description},"Currently, we don\u2019t support template variables or frontend data sources"),t.createElement("p",{className:Lt.description},"We'd love your feedback. To share, please comment on this"," ",t.createElement("a",{href:"https://github.com/grafana/grafana/discussions/49253",target:"_blank",rel:"noreferrer",className:v()("text-link",Lt.description)},"GitHub discussion"),"."))},Be=Lt=>({container:d.css`
    margin-bottom: ${Lt.spacing(3)};
  `,description:d.css`
    color: ${Lt.colors.text.secondary};
    margin-bottom: ${Lt.spacing(1)};
  `}),ze=h.wl.pages.ShareDashboardModal.PublicDashboard,lt=({isError:Lt})=>{const Ut=(0,o.wW)(ht),Rt=O.Vt.hasAccess(U.AccessControlAction.DashboardsPublicWrite,(0,F.RN)()),_t=(0,U.useSelector)(Dn=>Dn.dashboard).getModel(),jt=(0,p.ek)(_t.panels),[an,{isLoading:cn}]=(0,l.zZ)(),rn=!Rt||cn||Lt,hn=async()=>{(0,n.ff)("grafana_dashboards_public_create_clicked"),an({dashboard:_t,payload:{isEnabled:!0}})};return t.createElement("div",null,t.createElement("p",{className:Ut.title},"Welcome to public dashboards public preview!"),t.createElement(be,null),!Rt&&t.createElement(H,{mode:"create"}),(0,p._H)(_t.getVariables())&&t.createElement(re,null),!!jt.length&&t.createElement(_,{unsupportedDataSources:jt.join(", ")}),t.createElement(_e.l,{onSubmit:hn,validateOn:"onChange",maxWidth:"none"},({register:Dn,formState:{isValid:Rn}})=>t.createElement(t.Fragment,null,t.createElement("div",{className:Ut.checkboxes},t.createElement(ye,{disabled:rn,register:Dn})),t.createElement("div",{className:Ut.buttonContainer},t.createElement(te.zx,{type:"submit",disabled:rn||!Rn,"data-testid":ze.CreateButton},"Generate public URL ",cn&&t.createElement(m.$,{className:Ut.loadingSpinner}))))))},ht=Lt=>({title:d.css`
    font-size: ${Lt.typography.h4.fontSize};
    margin: ${Lt.spacing(0,0,2)};
  `,checkboxes:d.css`
    margin: ${Lt.spacing(0,0,4)};
  `,buttonContainer:d.css`
    display: flex;
    justify-content: end;
  `,loadingSpinner:d.css`
    margin-left: ${Lt.spacing(1)};
  `}),vt=lt,bt=()=>{const Lt=(0,o.wW)(Pt);return t.createElement(g.L,{className:Lt.loadingContainer},t.createElement(t.Fragment,null,"Loading configuration",t.createElement(m.$,{size:20,className:Lt.spinner})))},ct=Lt=>{const{data:Ut,isLoading:Rt,isError:$t}=(0,l.Ym)(Lt.dashboard.uid);return(0,t.useEffect)(()=>{(0,n.ff)("grafana_dashboards_public_share_viewed")},[]),t.createElement(t.Fragment,null,Rt?t.createElement(bt,null):(0,p.Gt)(Ut)?t.createElement(Ve,null):t.createElement(vt,{isError:$t}))},Pt=Lt=>({loadingContainer:d.css`
    height: 280px;
    align-items: center;
    justify-content: center;
    gap: ${Lt.spacing(1)};
  `,spinner:d.css`
    margin-bottom: ${Lt.spacing(0)};
  `});var ie=e(6297),Ce=e(97379);const Ne=({selectedTheme:Lt="current",onChange:Ut})=>{const Rt=[{label:(0,r.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,r.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,r.t)("share-modal.theme-picker.light","Light"),value:"light"}];return t.createElement(x.g,{label:(0,r.t)("share-modal.theme-picker.field-name","Theme")},t.createElement(q.S,{options:Rt,value:Lt,onChange:Ut}))};var Ze=e(89346);class Qe extends t.PureComponent{constructor(Ut){super(Ut),this.buildIframeHtml=()=>{const{panel:Rt,dashboard:$t}=this.props,{useCurrentTimeRange:_t,selectedTheme:jt}=this.state,an=(0,Ze.S_)(_t,$t.uid,jt,Rt);this.setState({iframeHtml:an})},this.onIframeHtmlChange=Rt=>{this.setState({iframeHtml:Rt.currentTarget.value})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange},this.buildIframeHtml)},this.onThemeChange=Rt=>{this.setState({selectedTheme:Rt},this.buildIframeHtml)},this.getIframeHtml=()=>this.state.iframeHtml,this.state={useCurrentTimeRange:!0,selectedTheme:"current",iframeHtml:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_embed_share_viewed"),this.buildIframeHtml()}render(){const{useCurrentTimeRange:Ut,selectedTheme:Rt,iframeHtml:$t}=this.state,jt=(this.props.dashboard?this.props.dashboard.time.to==="now":!1)?(0,r.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.cC,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),t.createElement(x.g,{label:(0,r.t)("share-modal.embed.time-range","Current time range"),description:jt},t.createElement(R.r,{id:"share-current-time-range",value:Ut,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(Ne,{selectedTheme:Rt,onChange:this.onThemeChange}),t.createElement(x.g,{label:(0,r.t)("share-modal.embed.html","Embed HTML"),description:(0,r.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},t.createElement(Ce.K,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:$t,onChange:this.onIframeHtmlChange})),t.createElement(s.u.ButtonRow,null,t.createElement(b.m,{icon:"copy",variant:"primary",getText:this.getIframeHtml},t.createElement(r.cC,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}}var Le=e(3574),Ue=e(29930),ve=e(134),Se=e(45984),Fe=e(89050),je=e(9405);function Ge({json:Lt,onDismiss:Ut}){const Rt=(0,t.useCallback)(()=>Lt,[Lt]);return t.createElement(s.u,{title:"JSON",onDismiss:Ut,onClickBackdrop:Ut,isOpen:!0},t.createElement(Fe.Z,{disableHeight:!0},({width:$t})=>t.createElement(je.p,{value:Lt,language:"json",showMiniMap:!1,height:"500px",width:$t})),t.createElement(s.u.ButtonRow,null,t.createElement(b.m,{icon:"copy",getText:Rt},t.createElement(r.cC,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class gt extends t.PureComponent{constructor(Ut){super(Ut),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onTrimDefaultsChange=()=>{this.setState({trimDefaults:!this.state.trimDefaults})},this.onSaveAsFile=()=>{const{dashboard:Rt}=this.props,{shareExternally:$t}=this.state,{trimDefaults:_t}=this.state;$t?this.exporter.makeExportable(Rt).then(jt=>{_t?(0,Ue.i)().post("/api/dashboards/trim",{dashboard:jt}).then(an=>{this.openSaveAsDialog(an.dashboard)}):this.openSaveAsDialog(jt)}):_t?(0,Ue.i)().post("/api/dashboards/trim",{dashboard:Rt.getSaveModelClone()}).then(jt=>{this.openSaveAsDialog(jt.dashboard)}):this.openSaveAsDialog(Rt.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:Rt}=this.props,{shareExternally:$t}=this.state,{trimDefaults:_t}=this.state;$t?this.exporter.makeExportable(Rt).then(jt=>{_t?(0,Ue.i)().post("/api/dashboards/trim",{dashboard:jt}).then(an=>{this.openJsonModal(an.dashboard)}):this.openJsonModal(jt)}):_t?(0,Ue.i)().post("/api/dashboards/trim",{dashboard:Rt.getSaveModelClone()}).then(jt=>{this.openJsonModal(jt.dashboard)}):this.openJsonModal(Rt.getSaveModelClone())},this.openSaveAsDialog=Rt=>{const $t=JSON.stringify(Rt,null,2),_t=new Blob([$t],{type:"application/json;charset=utf-8"}),jt=new Date().getTime();(0,Le.saveAs)(_t,`${Rt.title}-${jt}.json`)},this.openJsonModal=Rt=>{u.h$.publish(new Se.Dn({props:{json:JSON.stringify(Rt,null,2)},component:Ge})),this.props.onDismiss?.()},this.state={shareExternally:!1,trimDefaults:!1},this.exporter=new ve.E}componentDidMount(){(0,n.ff)("grafana_dashboards_export_share_viewed")}render(){const{onDismiss:Ut}=this.props,{shareExternally:Rt}=this.state,{trimDefaults:$t}=this.state,_t=(0,r.t)("share-modal.export.share-externally-label","Export for sharing externally"),jt=(0,r.t)("share-modal.export.share-default-label","Export with default values removed");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.cC,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),t.createElement(x.g,{label:_t},t.createElement(R.r,{id:"share-externally-toggle",value:Rt,onChange:this.onShareExternallyChange})),C.v.featureToggles.trimDefaults&&t.createElement(x.g,{label:jt},t.createElement(R.r,{id:"trim-defaults-toggle",value:$t,onChange:this.onTrimDefaultsChange})),t.createElement(s.u.ButtonRow,null,t.createElement(te.zx,{variant:"secondary",onClick:Ut,fill:"outline"},t.createElement(r.cC,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),t.createElement(te.zx,{variant:"secondary",onClick:this.onViewJson},t.createElement(r.cC,{i18nKey:"share-modal.export.view-button"},"View JSON")),t.createElement(te.zx,{variant:"primary",onClick:this.onSaveAsFile},t.createElement(r.cC,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var mt=e(76647);const Ye=({panel:Lt,initialFolderUid:Ut,onDismiss:Rt})=>((0,t.useEffect)(()=>{(0,n.ff)("grafana_dashboards_library_panel_share_viewed")},[]),Lt?t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.cC,{i18nKey:"share-modal.library.info"},"Create library panel.")),t.createElement(mt.T,{panel:Lt,initialFolderUid:Ut,onDismiss:Rt})):null);var ft=e(39904);class St extends t.PureComponent{constructor(Ut){super(Ut),this.buildUrl=async()=>{const{panel:Rt,dashboard:$t}=this.props,{useCurrentTimeRange:_t,useShortUrl:jt,selectedTheme:an}=this.state,cn=await(0,Ze.bl)(_t,an,Rt,jt),rn=(0,Ze.Sc)(_t,$t.uid,an,Rt);this.setState({shareUrl:cn,imageUrl:rn})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=Rt=>{this.setState({selectedTheme:Rt})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_link_share_viewed"),this.buildUrl()}componentDidUpdate(Ut,Rt){const{useCurrentTimeRange:$t,useShortUrl:_t,selectedTheme:jt}=this.state;(Rt.useCurrentTimeRange!==$t||Rt.selectedTheme!==jt||Rt.useShortUrl!==_t)&&this.buildUrl()}render(){const{panel:Ut,dashboard:Rt}=this.props,$t=Rt?Rt.time.to==="now":!1,{useCurrentTimeRange:_t,useShortUrl:jt,selectedTheme:an,shareUrl:cn,imageUrl:rn}=this.state,hn=h.wl.pages.SharePanelModal,Dn=Boolean(Rt.id),Rn=(0,r.t)("share-modal.link.time-range-label","Lock time range"),ea=(0,r.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),Fn=(0,r.t)("share-modal.link.shorten-url","Shorten URL"),Vn=(0,r.t)("share-modal.link.link-url","Link URL");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.cC,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),t.createElement(Z.C,null,t.createElement(x.g,{label:Rn,description:$t?ea:""},t.createElement(R.r,{id:"share-current-time-range",value:_t,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(Ne,{selectedTheme:an,onChange:this.onThemeChange}),t.createElement(x.g,{label:Fn},t.createElement(R.r,{id:"share-shorten-url",value:jt,onChange:this.onUrlShorten})),t.createElement(x.g,{label:Vn},t.createElement(M.I,{id:"link-url-input",value:cn,readOnly:!0,addonAfter:t.createElement(b.m,{icon:"copy",variant:"primary",getText:this.getShareUrl},t.createElement(r.cC,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),Ut&&f.ZP.rendererAvailable&&t.createElement(t.Fragment,null,Dn&&t.createElement("div",{className:"gf-form"},t.createElement("a",{href:rn,target:"_blank",rel:"noreferrer","aria-label":hn.linkToRenderedImage},t.createElement(ft.J,{name:"camera"}),"\xA0",t.createElement(r.cC,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!Dn&&t.createElement(L.b,{severity:"info",title:(0,r.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},t.createElement(r.cC,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),Ut&&!f.ZP.rendererAvailable&&t.createElement(L.b,{severity:"info",title:(0,r.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},t.createElement(r.cC,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the\xA0",t.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var we=e(54899),qe=e(8581),Je=e(19349),ut=e(10672);const Mt="/api/snapshots";class Wt extends t.PureComponent{constructor(Ut){super(Ut),this.createSnapshot=Rt=>()=>{const{timeoutSeconds:$t}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,Rt)},$t*1e3)},this.saveSnapshot=async(Rt,$t)=>{const{snapshotExpires:_t}=this.state,jt=this.dashboard.getSaveModelClone();this.scrubDashboard(jt);const an={dashboard:jt,name:jt.title,expires:_t,external:$t};try{const cn=await(0,we.i)().post(Mt,an);this.setState({deleteUrl:cn.deleteUrl,snapshotUrl:cn.url,step:2})}finally{(0,n.ff)("grafana_dashboards_snapshot_created",{location:$t?"raintank":"local"}),this.setState({isLoading:!1})}},this.scrubDashboard=Rt=>{const{panel:$t}=this.props,{snapshotName:_t}=this.state;Rt.title=_t,Rt.time=(0,Je.$t)().timeRange(),Rt.links=[],Rt.panels.forEach(an=>{an.targets=[],an.links=[],an.datasource=null});const jt=Rt.annotations.list.filter(an=>an.enable);if(Rt.annotations.list=jt.map(an=>({name:an.name,enable:an.enable,iconColor:an.iconColor,snapshotData:an.snapshotData,type:an.type,builtIn:an.builtIn,hide:an.hide})),Rt.getVariables().forEach(an=>{an.query="",an.options=an.current?[an.current]:[],an.refresh=ut.Bd.never}),$t){const an=$t.getSaveModel();an.gridPos.w=24,an.gridPos.x=0,an.gridPos.y=0,an.gridPos.h=20,Rt.panels=[an]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(an=>{delete an.snapshotData}),this.dashboard.annotations.list.forEach(an=>{delete an.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:Rt}=this.state;await(0,we.i)().get(Rt),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=Rt=>{this.setState({snapshotName:Rt.target.value})},this.onTimeoutChange=Rt=>{this.setState({timeoutSeconds:Number(Rt.target.value)})},this.onExpireChange=Rt=>{this.setState({selectedExpireOption:Rt,snapshotExpires:Rt.value})},this.dashboard=Ut.dashboard,this.expireOptions=[{label:(0,r.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,r.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,r.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,r.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:Ut.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_snapshot_share_viewed"),this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const Ut=await(0,we.i)().get("/api/snapshot/shared-options");this.setState({sharingButtonText:Ut.externalSnapshotName,externalEnabled:Ut.externalEnabled})}renderStep1(){const{onDismiss:Ut}=this.props,{snapshotName:Rt,selectedExpireOption:$t,timeoutSeconds:_t,isLoading:jt,sharingButtonText:an,externalEnabled:cn}=this.state,rn=(0,r.t)("share-modal.snapshot.name","Snapshot name"),hn=(0,r.t)("share-modal.snapshot.expire","Expire"),Dn=(0,r.t)("share-modal.snapshot.timeout","Timeout (seconds)"),Rn=(0,r.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",t.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),t.createElement(x.g,{label:rn},t.createElement(M.I,{id:"snapshot-name-input",width:30,value:Rt,onChange:this.onSnapshotNameChange})),t.createElement(x.g,{label:hn},t.createElement(qe.Ph,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:$t,onChange:this.onExpireChange})),t.createElement(x.g,{label:Dn,description:Rn},t.createElement(M.I,{id:"timeout-input",type:"number",width:21,value:_t,onChange:this.onTimeoutChange})),t.createElement(s.u.ButtonRow,null,t.createElement(te.zx,{variant:"secondary",onClick:Ut,fill:"outline"},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),cn&&t.createElement(te.zx,{variant:"secondary",disabled:jt,onClick:this.createSnapshot(!0)},an),t.createElement(te.zx,{variant:"primary",disabled:jt,onClick:this.createSnapshot()},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot"))))}renderStep2(){const{snapshotUrl:Ut}=this.state;return t.createElement(t.Fragment,null,t.createElement(x.g,{label:(0,r.t)("share-modal.snapshot.url-label","Snapshot URL")},t.createElement(M.I,{id:"snapshot-url-input",value:Ut,readOnly:!0,addonAfter:t.createElement(b.m,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),t.createElement("div",{className:"pull-right",style:{padding:"5px"}},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",t.createElement(te.Qj,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return t.createElement("div",{className:"share-modal-header"},t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.cC,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:Ut,step:Rt}=this.state;return t.createElement(t.Fragment,null,Rt===1&&this.renderStep1(),Rt===2&&this.renderStep2(),Rt===3&&this.renderStep3(),Ut&&t.createElement(m.$,{inline:!0}))}}const ln=[],fn=[];function pn(Lt){ln.push(Lt)}function An(Lt){fn.push(Lt)}function Ot(Lt,Ut){const $t=[{label:(0,r.t)("share-modal.tab-title.link","Link"),value:"link",component:St}];if(u.Vt.isSignedIn&&f.vc.snapshotEnabled){const jt=(0,r.t)("share-modal.tab-title.snapshot","Snapshot");$t.push({label:jt,value:"snapshot",component:Wt})}if(Lt){const jt=(0,r.t)("share-modal.tab-title.embed","Embed");if($t.push({label:jt,value:"embed",component:Qe}),!(0,ie.V)(Lt)){const an=(0,r.t)("share-modal.tab-title.library-panel","Library panel");$t.push({label:an,value:"library_panel",component:Ye})}$t.push(...fn)}else{const jt=(0,r.t)("share-modal.tab-title.export","Export");$t.push({label:jt,value:"export",component:gt}),$t.push(...ln)}Boolean(f.vc.featureToggles.publicDashboards)&&$t.push({label:"Public dashboard",value:"public-dashboard",component:ct});const _t=$t.find(jt=>jt.value===Ut);return{tabs:$t,activeTab:_t?.value??$t[0].value}}function Ft(Lt){const{tabs:Ut,activeTab:Rt}=Ot(Lt.panel,Lt.activeTab);return{tabs:Ut,activeTab:Rt}}class Kt extends t.Component{constructor(Ut){super(Ut),this.onSelectTab=Rt=>{this.setState($t=>({...$t,activeTab:Rt.value}))},this.state=Ft(Ut)}componentDidMount(){(0,n.ff)("grafana_dashboards_share_modal_viewed")}getActiveTab(){const{tabs:Ut,activeTab:Rt}=this.state;return Ut.find($t=>$t.value===Rt)}renderTitle(){const{panel:Ut}=this.props,{activeTab:Rt}=this.state,$t=Ut?(0,r.t)("share-modal.panel.title","Share Panel"):(0,r.t)("share-modal.dashboard.title","Share"),_t=Ot(this.props.panel,this.state.activeTab).tabs;return t.createElement(c.H,{title:$t,icon:"share-alt",tabs:_t,activeTab:Rt,onChangeTab:this.onSelectTab})}render(){const{dashboard:Ut,panel:Rt}=this.props,_t=this.getActiveTab().component;return t.createElement(s.u,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss},t.createElement(i.I,null,t.createElement(_t,{dashboard:Ut,panel:Rt,onDismiss:this.props.onDismiss})))}}},89346:(Y,T,e)=>{"use strict";e.d(T,{OS:()=>r,S_:()=>l,Sc:()=>m,bl:()=>d});var t=e(49187),n=e(72196),c=e(67483),s=e(35645),i=e(57465),f=e(19349);function u({useCurrentTimeRange:g,selectedTheme:y,panel:v,search:E=window.location.search,range:h=(0,f.$t)().timeRange(),orgId:C=s.v.bootData.user.orgId}){const a=new URLSearchParams(E);return a.set("from",String(h.from.valueOf())),a.set("to",String(h.to.valueOf())),a.set("orgId",String(C)),g||(a.delete("from"),a.delete("to")),y!=="current"&&a.set("theme",y),v&&!a.has("editPanel")&&a.set("viewPanel",String(v.id)),a}function r(){let g=window.location.href;const y=g.indexOf("?");return y!==-1&&(g=g.substring(0,y)),g}async function d(g,y,v,E){const h=r(),C=u({useCurrentTimeRange:g,selectedTheme:y,panel:v}),a=t.Cj.appendQueryToUrl(h,C.toString());return E?await(0,i.D)(a):a}function o(g,y,v,E){const h=r(),C=u({useCurrentTimeRange:g,selectedTheme:v,panel:E});let a=h.replace(s.v.appSubUrl+"/dashboard/",s.v.appSubUrl+"/dashboard-solo/");a=a.replace(s.v.appSubUrl+"/d/",s.v.appSubUrl+"/d-solo/"),n.u.stripBaseFromUrl(h)==="/"&&(a=`${s.v.appUrl}d-solo/${y}`);const D=C.get("editPanel")??C.get("viewPanel")??"";return C.set("panelId",D),C.delete("editPanel"),C.delete("viewPanel"),t.Cj.appendQueryToUrl(a,C.toString())}function m(g,y,v,E){let C=o(g,y,v,E).replace(s.v.appSubUrl+"/dashboard-solo/",s.v.appSubUrl+"/render/dashboard-solo/");return C=C.replace(s.v.appSubUrl+"/d-solo/",s.v.appSubUrl+"/render/d-solo/"),C+="&width=1000&height=500"+p(),C}function l(g,y,v,E){return'<iframe src="'+o(g,y,v,E)+'" width="450" height="200" frameborder="0"></iframe>'}function p(){const g="&tz=UTC"+encodeURIComponent((0,c.CQ)().format("Z"));if(!window.Intl)return g;const y=window.Intl.DateTimeFormat();if(!y.resolvedOptions)return g;const v=y.resolvedOptions();return v.timeZone?"&tz="+encodeURIComponent(v.timeZone):g}},64687:(Y,T,e)=>{"use strict";e.d(T,{B:()=>l});var t=e(9892),n=e(82897),c=e(66111),s=e(72648),i=e(39904);const f=({diff:g})=>{const y=(0,s.wW)(u),v=!(0,n.isUndefined)(g.originalValue)&&!(0,n.isArray)(g.originalValue)&&!(0,n.isObject)(g.originalValue),E=!(0,n.isUndefined)(g.value)&&!(0,n.isArray)(g.value)&&!(0,n.isObject)(g.value);return c.createElement(c.Fragment,null,v&&c.createElement("span",{className:y},String(g.originalValue)),v&&E?c.createElement(i.J,{name:"arrow-right"}):null,E&&c.createElement("span",{className:y},String(g.value)))},u=g=>t.css`
  background-color: ${g.colors.action.hover};
  border-radius: ${g.shape.borderRadius()};
  color: ${g.colors.text.primary};
  font-size: ${g.typography.body.fontSize};
  margin: 0 ${g.spacing(.5)};
  padding: ${g.spacing(.5,1)};
`;var r=e(15092);const d={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},o=({diff:g,title:y})=>{const v=(0,s.wW)(m);return g?c.createElement(c.Fragment,null,c.createElement(i.J,{type:"mono",name:"circle",className:v[g.op]})," ",c.createElement("span",{className:v.embolden},y)," ",c.createElement("span",null,(0,r.dW)(g,g.path.length>1))," ",c.createElement(f,{diff:g})):c.createElement("div",{className:v.withoutDiff},c.createElement(i.J,{type:"mono",name:"circle",className:v.replace})," ",c.createElement("span",{className:v.embolden},y)," ",c.createElement("span",null,(0,r.dW)(d,!1)))},m=g=>({embolden:t.css`
    font-weight: ${g.typography.fontWeightBold};
  `,add:t.css`
    color: ${g.colors.success.main};
  `,replace:t.css`
    color: ${g.colors.success.main};
  `,move:t.css`
    color: ${g.colors.success.main};
  `,copy:t.css`
    color: ${g.colors.success.main};
  `,_get:t.css`
    color: ${g.colors.success.main};
  `,test:t.css`
    color: ${g.colors.success.main};
  `,remove:t.css`
    color: ${g.colors.success.main};
  `,withoutDiff:t.css`
    margin-bottom: ${g.spacing(2)};
  `}),l=({diffs:g,title:y})=>{const v=(0,s.wW)(p);return g.length===1?c.createElement("div",{className:v.container,"data-testid":"diffGroup"},c.createElement(o,{title:y,diff:g[0]})):c.createElement("div",{className:v.container,"data-testid":"diffGroup"},c.createElement(o,{title:y}),c.createElement("ul",{className:v.list},g.map((E,h)=>c.createElement("li",{className:v.listItem,key:`${(0,n.last)(E.path)}__${h}`},c.createElement("span",null,(0,r.dW)(E))," ",c.createElement(f,{diff:E})))))},p=g=>({container:t.css`
    background-color: ${g.colors.background.secondary};
    font-size: ${g.typography.h6.fontSize};
    margin-bottom: ${g.spacing(2)};
    padding: ${g.spacing(2)};
  `,list:t.css`
    margin-left: ${g.spacing(4)};
  `,listItem:t.css`
    margin-bottom: ${g.spacing(1)};
  `})},61017:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>u});var t=e(9892),n=e(66111),c=e(28072),s=e.n(c),i=e(28550),f=e(72648);const u=({oldValue:r,newValue:d})=>{const o=(0,f.l4)(),m={variables:{dark:{diffViewerBackground:o.colors.background.canvas,diffViewerColor:o.colors.text.primary,addedBackground:(0,i.Z)(o.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:(0,i.Z)(o.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:(0,i.Z)(o.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:(0,i.Z)(o.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:(0,i.Z)(o.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:(0,i.Z)(o.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:o.colors.background.primary,gutterBackgroundDark:o.colors.background.primary,highlightBackground:(0,i.Z)(o.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:(0,i.Z)(o.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:o.colors.background.secondary,codeFoldBackground:o.colors.background.secondary,emptyLineBackground:o.colors.background.secondary,gutterColor:o.colors.text.disabled,addedGutterColor:o.colors.text.primary,removedGutterColor:o.colors.text.primary,codeFoldContentColor:o.colors.text.disabled,diffViewerTitleBackground:o.colors.background.secondary,diffViewerTitleColor:o.colors.text.disabled,diffViewerTitleBorderColor:o.colors.border.strong}},codeFold:{fontSize:o.typography.bodySmall.fontSize},gutter:`
      pre {
        color: ${(0,i.Z)(o.colors.text.disabled).setAlpha(1).toString()};
        opacity: 0.61;
      }
    `};return n.createElement("div",{className:t.css`
        font-size: ${o.typography.bodySmall.fontSize};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `},n.createElement(s(),{styles:m,oldValue:r,newValue:d,splitView:!1,compareMethod:c.DiffMethod.CSS,useDarkTheme:o.isDark}))}},99714:(Y,T,e)=>{"use strict";e.d(T,{U$:()=>L,Cs:()=>M,Sd:()=>a,R1:()=>O,K8:()=>s});var t=e(82897),n=e(54899);class c{getHistoryList(j,A){const _=j&&j.uid?j.uid:void 0;return _?(0,n.i)().get(`api/dashboards/uid/${_}/versions`,A):Promise.resolve([])}getDashboardVersion(j,A){return(0,n.i)().get(`api/dashboards/uid/${j}/versions/${A}`)}restoreDashboard(j,A){const _=j&&j.uid?j.uid:void 0,k=`api/dashboards/uid/${_}/restore`;return _&&(0,t.isNumber)(A)?(0,n.i)().post(k,{version:A}):Promise.resolve({})}}const s=new c;var i=e(9892),f=e(66111),u=e(58255),r=e(34719),d=e(5191),o=e(31403),m=e(98102),l=e(13821),p=e(72196),g=e(37932),y=e(60499),v=e(27876);const E=async(H,j)=>await s.restoreDashboard(j,H),h=H=>{const j=(0,v.useSelector)(Q=>Q.dashboard.getModel()),[A,_]=(0,l.Z)(async()=>await E(H,j),[]),k=(0,y.iG)();return(0,f.useEffect)(()=>{if(A.value){const Q=g.E1.getLocation(),re=p.u.stripBaseFromUrl(A.value.url),Z=Q.state?.routeReloadCounter;g.E1.replace({...Q,pathname:re,state:{routeReloadCounter:Z?Z+1:1}}),k.success("Dashboard restored",`Restored from version ${H}`)}},[A,H,k]),{state:A,onRestoreDashboard:_}},C=({hideModal:H,version:j})=>{const{state:A,onRestoreDashboard:_}=h(j);return(0,f.useEffect)(()=>{A.loading===!1&&A.value&&H()},[A,H]),f.createElement(m.s,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:H,onConfirm:_,body:f.createElement("p",null,"Are you sure you want to restore the dashboard to version ",j,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${j}`})},a=({versions:H,canCompare:j,onCheck:A})=>f.createElement("table",{className:"filter-table gf-form-group"},f.createElement("thead",null,f.createElement("tr",null,f.createElement("th",{className:"width-4"}),f.createElement("th",{className:"width-4"},"Version"),f.createElement("th",{className:"width-14"},"Date"),f.createElement("th",{className:"width-10"},"Updated by"),f.createElement("th",null,"Notes"),f.createElement("th",null))),f.createElement("tbody",null,H.map((_,k)=>f.createElement("tr",{key:_.id},f.createElement("td",null,f.createElement(u.X,{"aria-label":`Toggle selection of version ${_.version}`,className:i.css`
                display: inline;
              `,checked:_.checked,onChange:Q=>A(Q,_.id),disabled:!_.checked&&j})),f.createElement("td",null,_.version),f.createElement("td",null,_.createdDateString),f.createElement("td",null,_.createdBy),f.createElement("td",null,_.message),f.createElement("td",{className:"text-right"},k===0?f.createElement(r.V,{name:"Latest",colorIndex:17}):f.createElement(d.JY,null,({showModal:Q,hideModal:re})=>f.createElement(o.zx,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{Q(C,{version:_.version,hideModal:re})}},"Restore")))))));var P=e(72648),D=e(8180),x=e(39904);const M=({onClick:H=t.noop,baseVersion:j=0,newVersion:A=0,isNewLatest:_=!1})=>{const k=(0,P.wW)(b);return f.createElement("h3",{className:k.header},f.createElement(D.h,{name:"arrow-left",size:"xl",onClick:H}),f.createElement("span",null,"Comparing ",j," ",f.createElement(x.J,{name:"arrows-h"})," ",A," ",_&&f.createElement("cite",{className:"muted"},"(Latest)")))},b=H=>({header:i.css`
    font-size: ${H.typography.h3.fontSize};
    display: flex;
    gap: ${H.spacing(2)};
    margin-bottom: ${H.spacing(3)};
  `});var R=e(26418),S=e(61860);const O=({hasMore:H,canCompare:j,getVersions:A,getDiff:_,isLastPage:k})=>f.createElement(R.Stack,null,H&&f.createElement(o.zx,{type:"button",onClick:()=>A(!0),variant:"secondary",disabled:k},"Show more versions"),f.createElement(S.u,{content:"Select two versions to start comparing",placement:"bottom"},f.createElement(o.zx,{type:"button",disabled:!j,onClick:_,icon:"code-branch"},"Compare versions")));var U=e(52081),I=e(20941),F=e(64687),w=e(61017),K=e(15092);const L=({baseInfo:H,newInfo:j,diffData:A,isNewLatest:_})=>{const k=(0,K.Q$)(A.lhs,A.rhs),Q=(0,P.wW)(V);return f.createElement("div",null,f.createElement("div",{className:Q.spacer},f.createElement(U.Lh,{justify:"space-between",align:"center"},f.createElement("div",null,f.createElement("p",{className:Q.versionInfo},f.createElement("strong",null,"Version ",j.version)," updated by ",j.createdBy," ",j.ageString," -"," ",j.message),f.createElement("p",{className:(0,i.cx)(Q.versionInfo,Q.noMarginBottom)},f.createElement("strong",null,"Version ",H.version)," updated by ",H.createdBy," ",H.ageString," -"," ",H.message)),_&&f.createElement(d.JY,null,({showModal:re,hideModal:Z})=>f.createElement(o.zx,{variant:"destructive",icon:"history",onClick:()=>{re(C,{version:H.version,hideModal:Z})}},"Restore to version ",H.version)))),f.createElement("div",{className:Q.spacer},Object.entries(k).map(([re,Z])=>f.createElement(F.B,{diffs:Z,key:re,title:re}))),f.createElement(I.s,{isOpen:!1,label:"View JSON Diff"},f.createElement(w.Z,{oldValue:JSON.stringify(A.lhs,null,2),newValue:JSON.stringify(A.rhs,null,2)})))},V=H=>({spacer:i.css`
    margin-bottom: ${H.spacing(4)};
  `,versionInfo:i.css`
    color: ${H.colors.text.secondary};
    font-size: ${H.typography.bodySmall.fontSize};
  `,noMarginBottom:i.css`
    margin-bottom: 0;
  `})},15092:(Y,T,e)=>{"use strict";e.d(T,{Q$:()=>i,dW:()=>f});var t=e(92497),n=e(56070),c=e(82897),s=e.n(c);const i=(d,o)=>{const m=(0,t.qu)(d,o),l=n.stringify(d,null,2),p=n.stringify(o,null,2),g=E=>E.map(h=>{let C,a,P=0;const D=(0,c.tail)(h.path.split("/"));return h.op==="replace"&&(C=(0,c.get)(d,D),a=h.value,P=p.pointers[h.path].value.line),h.op==="add"&&(a=h.value,P=p.pointers[h.path].value.line),h.op==="remove"&&(C=(0,c.get)(d,D),P=l.pointers[h.path].value.line),{op:h.op,value:a,path:D,originalValue:C,startLineNumber:P}}),y=E=>(0,c.sortBy)(E,"startLineNumber"),v=E=>E.reduce((h,C)=>{const a=C.path[0];return h[a]||(h[a]=[]),h[a].push(C),h},{});return(0,c.flow)([g,y,v])(m)},f=(d,o=!0)=>{const m=(0,c.last)(d.path),l=u(m),p=d.op==="remove"?d.originalValue:d.value;let g=r(d.op);return o&&(l?g+=` item ${m}`:(0,c.isArray)(p)&&!(0,c.isEmpty)(p)?g+=` ${p.length} ${m}`:g+=` ${m}`),g},u=d=>!(0,c.isNaN)((0,c.toNumber)(d)),r=d=>d==="add"?"added":d==="remove"?"deleted":"changed"},91551:(Y,T,e)=>{"use strict";e.d(T,{N:()=>o});var t=e(3947),n=e(73567),c=e(90748),s=e(99098),i=e(30471),f=e(50035),u=e(17882);const r="hideSeriesFrom",d=(0,t.Y4)(r);function o(E,h,C,a){const{overrides:P}=C,D=E,x=P.findIndex(d);if(x<0){if(h===u.R.ToggleSelection){const U=m([D,...v(P,a)]);return{...C,overrides:[...C.overrides,U]}}const S=y(a,D),O=m(S);return{...C,overrides:[...C.overrides,O]}}const M=Array.from(P),[b]=M.splice(x,1);if(h===u.R.ToggleSelection){let S=p(b);const O=v(M,a);if(O.length>0&&(S=S.filter(I=>O.indexOf(I)<0)),S[0]===D&&S.length===1)return{...C,overrides:M};const U=m([D,...O]);return{...C,overrides:[...M,U]}}const R=l(b,D);return g(R,a)?{...C,overrides:M}:{...C,overrides:[...M,R]}}function m(E,h=n.Ys.exclude,C){return C=C??{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:r,matcher:{id:c.mi.byNames,options:{mode:h,names:E,prefix:h===n.Ys.exclude?"All except:":void 0,readOnly:!0}},properties:[{...C,value:{viz:!0,legend:!1,tooltip:!1}}]}}const l=(E,h,C=n.Ys.exclude)=>{const a=E.properties.find(x=>x.id==="custom.hideFrom"),P=p(E),D=P.findIndex(x=>x===h);return D<0?P.push(h):P.splice(D,1),m(P,C,a)},p=E=>{const h=E.matcher.options?.names;return Array.isArray(h)?[...h]:[]},g=(E,h)=>p(E).length===y(h).length,y=(E,h)=>{const C=new Set;for(const a of E)for(const P of a.fields){if(P.type!==s.fS.number)continue;const D=(0,i.CZ)(P,a,E);D!==h&&C.add(D)}return Array.from(C)},v=(E,h)=>{let C=[];for(const a of E){const P=a.properties.find(D=>D.id==="custom.hideFrom");if(P!==void 0&&P.value?.legend===!0){const x=f.Ls.get(a.matcher.id).get(a.matcher.options);for(const M of h)for(const b of M.fields){if(b.type!==s.fS.number)continue;const R=(0,i.CZ)(b,M,h);x(b,M,h)&&C.push(R)}}}return C}},6911:(Y,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(924),n=e(67483),c=e(47406);const s=100;class i{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new t.X(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const o=Date.now();this.budget=(o-this.lastUpdate)/s;const m=this.ok.getValue(),l=this.budget<=this.threshold;if(m!==l&&this.ok.next(l),this.lastUpdate=o,this.isLive&&this.ok.getValue()&&this.timeRange){let p;for(const g of this.listeners){if(!g.panel.props.isInView)continue;if(o-g.last>=g.intervalMs){if(!p){const{raw:v}=this.timeRange;p={raw:v,from:(0,n.CQ)(o-this.liveTimeOffset),to:(0,n.CQ)(o)}}g.panel.liveTimeChanged(p),g.last=o}}}}}setLiveTimeRange(o){if(this.timeRange=o,this.isLive=o?.raw?.to==="now",this.isLive){const m=c.parse(o.raw.from,!1)?.valueOf(),l=c.parse(o.raw.to,!0)?.valueOf();this.liveTimeOffset=l-m;for(const p of this.listeners)p.intervalMs=u(this.liveTimeOffset,p.panel.props.width)}}listen(o){this.listeners.push({last:this.lastUpdate,panel:o,intervalMs:u(6e4,o.props.width)})}remove(o){this.listeners=this.listeners.filter(m=>m.panel!==o)}updateInterval(o){if(!(!this.timeRange||!this.isLive)){for(const m of this.listeners)if(m.panel===o){m.intervalMs=u(this.liveTimeOffset,m.panel.props.width);return}}}}const f=5*60*1e3;function u(d,o){const m=Math.ceil(d/o/100)*100;return m>f?f:m}const r=new i;setInterval(r.measure,s)},87449:(Y,T,e)=>{"use strict";e.d(T,{Bg:()=>E,pD:()=>h});var t=e(24259),n=e.n(t),c=e(82897),s=e.n(c),i=e(36365),f=e.n(i),u=e(4063),r=e(47406),d=e(54899),o=e(37932),m=e(29930),l=e(13019),p=e(24816),g=e(91162),y=e(77582),v=e(9398);class E{constructor(){}_dashboardLoadFailed(P,D){return D=D||!1,{meta:{canStar:!1,isSnapshot:D,canDelete:!1,canSave:!1,canEdit:!1,dashboardNotFound:!0},dashboard:{title:P}}}loadDashboard(P,D,x){let M;return P==="script"?M=this._loadScriptedDashboard(D):P==="snapshot"?M=m.ae.get("/api/snapshots/"+D).catch(()=>this._dashboardLoadFailed("Snapshot not found",!0)):P==="ds"?M=this._loadFromDatasource(D):P==="public"?M=m.ae.getPublicDashboardByUid(x).then(b=>b).catch(b=>{const R=b.data.statusCode===403&&b.data.messageId==="publicdashboards.notEnabled",S=b.data.statusCode===404&&b.data.messageId==="publicdashboards.notFound",O=this._dashboardLoadFailed(R?"Public Dashboard paused":"Public Dashboard Not found",!0);return{...O,meta:{...O.meta,publicDashboardEnabled:S?void 0:!R,dashboardNotFound:S}}}):M=m.ae.getDashboardByUid(x).then(b=>{if(b.meta.isFolder)throw y.h$.emit(u.SI.alertError,["Dashboard not found"]),new Error("Dashboard not found");return b}).catch(()=>this._dashboardLoadFailed("Not found",!0)),M.then(b=>(b.meta.dashboardNotFound!==!0&&l.Z.addDashboardImpression(b.dashboard.uid),b)),M}_loadScriptedDashboard(P){const D="public/dashboards/"+P.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,d.i)().get(D).then(this._executeScript.bind(this)).then(x=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:x.data}),x=>(console.error("Script dashboard error "+x),y.h$.emit(u.SI.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard")))}async _loadFromDatasource(P){const D=await(0,g.ak)().get(P);if(!D)return Promise.reject("can not find datasource: "+P);const x=new URLSearchParams(window.location.search),M=x.get("path");if(!M)return Promise.reject("expecting path parameter");const b={};return x.forEach((R,S)=>{b[S]=R}),(0,d.i)().get(`/api/datasources/uid/${D.uid}/resources/${M}`,b).then(R=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:R}))}_executeScript(P){const D={dashboardSrv:(0,v.h4)(),datasourceSrv:(0,g.ak)()},M=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",P)(o.E1.getSearchObject(),p.Z,r,s(),f(),window,document,n(),n(),D);return(0,c.isFunction)(M)?new Promise(b=>{M(R=>{b({data:R})})}):{data:M}}}let h=new E;const C=a=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},9398:(Y,T,e)=>{"use strict";e.d(T,{h4:()=>p});var t=e(65583),n=e(4063),c=e(18271),s=e(35287),i=e(29930),f=e(50946),u=e(45984),r=e(82302),d=e(2476);class o{constructor(){this.onRemovePanel=y=>{const v=this.getCurrent();v&&(0,d.WJ)(v,v.getPanelById(y),!0)},c.h.subscribe(u.Eb,y=>this.onRemovePanel(y.payload))}create(y,v){return new r.f(y,v)}setCurrent(y){this.dashboard=y}getCurrent(){return this.dashboard||console.warn("Calling getDashboardSrv().getCurrent() without calling getDashboardSrv().setCurrent() first."),this.dashboard}saveJSONDashboard(y){const v=JSON.parse(y);return(0,f.uC)({dashboard:v,folderUid:this.dashboard?.meta.folderUid||v.folderUid})}saveDashboard(y,v){return(0,t.n)((0,i.i)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...y,dashboard:y.dashboard.getSaveModelClone()},...v}))}starDashboard(y,v){const E=(0,i.i)(),h={showSuccessAlert:!1,url:"/api/user/stars/dashboard/uid/"+y,method:v?"DELETE":"POST"};return E.request(h).then(()=>{const C=!v;this.dashboard?.uid===y&&(this.dashboard.meta.isStarred=C);const a=C?(0,s.t)("notifications.starred-dashboard","Dashboard starred"):(0,s.t)("notifications.unstarred-dashboard","Dashboard unstarred");return c.h.emit(n.SI.alertSuccess,[a]),C})}}let m;function l(g){m=g}function p(){return m||(m=new o),m}},17424:(Y,T,e)=>{"use strict";e.d(T,{Qi:()=>l,lh:()=>g});var t=e(59980),n=e(49372),c=e(53704),s=e(59724),i=e(89424),f=e(83881),u=e(54899),r=e(32689),d=e(7832),o=e(63496),m=e(45849);const l="-- Public --",p="1min";class g extends i.MF{constructor(v){let E={};g.isMixedDatasource(v)&&(E.mixed=!0),super({name:"public-ds",id:0,type:"public-ds",meta:E,uid:g.resolveUid(v),jsonData:{},access:"proxy",readOnly:!0}),this.interval=g.resolveInterval(v),this.annotations={prepareQuery(h){return{...h,queryType:d.hR.Annotations,refId:"anno"}}}}static resolveUid(v){return typeof v=="string"?v:v?.uid??l}static isMixedDatasource(v){return typeof v=="string"||v==null?!1:v?.uid===o.D}static resolveInterval(v){return typeof v=="string"||v==null?p:("interval"in v?v.interval:void 0)??p}query(v){const{intervalMs:E,maxDataPoints:h,requestId:C,publicDashboardAccessToken:a,panelId:P,queryCachingTTL:D,range:{from:x,to:M}}=v;let b;if(!v.targets.length)return(0,t.of)({data:[]});const R=v.targets[0];if(R.queryType===d.hR.Annotations)return R?.datasource?.uid===m.JY?(0,n.D)(this.getAnnotations(v)):(0,t.of)({data:[]});{const S={intervalMs:E,maxDataPoints:h,queryCachingTTL:D,timeRange:{from:x.valueOf().toString(),to:M.valueOf().toString()}};return(0,u.i)().fetch({url:`/api/public/dashboards/${a}/panels/${P}/query`,method:"POST",data:S,requestId:C}).pipe((0,c.w)(O=>(0,t.of)((0,r.z1)(O,b))),(0,s.K)(O=>(0,t.of)((0,r.z1)(O))))}}async getAnnotations(v){const{publicDashboardAccessToken:E,range:{to:h,from:C}}=v,a={from:C.valueOf(),to:h.valueOf()},P=E?await(0,u.i)().get(`/api/public/dashboards/${E}/annotations`,a):[];return{data:[(0,f.g0)(P)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}},19349:(Y,T,e)=>{"use strict";e.d(T,{$t:()=>h});var t=e(82897),n=e(67483),c=e(75849),s=e(47891),i=e(47406),f=e(37932),u=e(18271),r=e(47694),d=e(82002),o=e(5242),m=e(74124),l=e(45984),p=e(5562);function g({urlRefresh:C,currentRefresh:a,isAllowedIntervalFn:P,minRefreshInterval:D,refreshIntervals:x=p.o5}){if(!C)return a;const M=P(C),b=x.find(R=>R===C);if(!M||!b){const R=D?x.find(O=>O===D):void 0,S=x?.length?x[0]:void 0;return R??S??a}return C||a}class y{constructor(a){this.contextSrv=a,this.timeRangeForUrl=()=>{const P=this.timeRange().raw;return(0,n.v9)(P.from)&&(P.from=P.from.valueOf().toString()),(0,n.v9)(P.to)&&(P.to=P.to.valueOf().toString()),P},this.time=(0,c.JK)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),u.Z.subscribe(l.p8,P=>{this.zoomOut(P.payload.scale,P.payload.updateUrl)}),u.Z.subscribe(l.Qt,P=>{this.shiftTime(P.payload.direction,P.payload.updateUrl)}),u.Z.subscribe(l.QI,()=>{this.makeAbsoluteTime()}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(a){this.timeModel=a,this.time=a.time,this.refresh=a.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,t.cloneDeep)(this.time);const P=s.convertRawToRange(this.time,this.timeModel?.getTimezone(),this.timeModel?.fiscalYearStartMonth);P.to.isBefore(P.from)&&this.setTime({from:P.raw.to,to:P.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(a){return this.contextSrv.minRefreshInterval?a.filter(P=>P!=="").filter(this.contextSrv.isAllowedInterval):a}parseTime(){(0,t.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,n.CQ)(this.time.from).utc()),(0,t.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,n.CQ)(this.time.to).utc())}parseUrlParam(a){if(a.indexOf("now")!==-1)return a;if(a.length===8){const P=(0,n.zh)(a,"YYYYMMDD");if(P.isValid())return P}else if(a.length===15){const P=(0,n.zh)(a,"YYYYMMDDTHHmmss");if(P.isValid())return P}if(!isNaN(a)){const P=parseInt(a,10);return(0,n.zh)(P)}return null}getTimeWindow(a,P){const D=parseInt(a,10);let x;return P.match(/^\d+$/)&&parseInt(P,10)?x=parseInt(P,10):x=s.intervalToMs(P),{from:(0,n.zh)(D-x/2),to:(0,n.zh)(D+x/2)}}initTimeFromUrl(){if(r.vc.isPublicDashboardView&&this.timeModel?.timepicker?.hidden)return;const a=f.E1.getSearch();a.get("time")&&a.get("time.window")&&(this.time=this.getTimeWindow(a.get("time"),a.get("time.window"))),a.get("from")&&(this.time.from=this.parseUrlParam(a.get("from"))||this.time.from),a.get("to")&&(this.time.to=this.parseUrlParam(a.get("to"))||this.time.to),a.get("to")&&a.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=!1)),this.refresh=g({urlRefresh:a.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:r.vc.minRefreshInterval})}updateTimeRangeFromUrl(){const a=f.E1.getSearch();if(a.get("left"))return;const P=this.timeRangeForUrl(),D=a.get("from"),x=a.get("to");D&&x?(D!==P.from||x!==P.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(a){this.timeModel&&(this.timeModel.refresh=a),this.stopAutoRefresh();const P=f.E1.getSearchObject();if(!a){P.refresh&&f.E1.partial({refresh:null},!0);return}const D=this.contextSrv.getValidInterval(a),x=s.intervalToMs(D);this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(x),this.refreshTimeModel()},x);const M=this.contextSrv.getValidInterval(a);P.refresh!==M&&f.E1.partial({refresh:M},!0)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(a){this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(a),this.contextSrv.isGrafanaVisible()?this.refreshTimeModel():this.autoRefreshBlocked=!0},a)}stopAutoRefresh(){clearTimeout(this.refreshTimer),this.refreshTimer=void 0}resumeAutoRefresh(){this.timeModel?.refresh&&this.setAutoRefresh(this.timeModel.refresh)}setTime(a,P=!0){if((0,t.extend)(this.time,a),(0,n.v9)(a.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=null),P===!0){const D=this.timeRangeForUrl(),x=f.E1.getSearchObject();if(x.from===D.from.toString()&&x.to===D.to.toString())return;x.from=D.from.toString(),x.to=D.to.toString(),f.E1.partial(x)}this.refreshTimeModel()}timeRange(){return(0,m.O)(this.time,this.timeModel)}zoomOut(a,P=!0){const D=this.timeRange(),{from:x,to:M}=(0,o.h)(D,a);this.setTime({from:(0,n.zh)(x),to:(0,n.zh)(M)},P)}shiftTime(a,P=!0){const D=this.timeRange(),{from:x,to:M}=(0,o.e)(a,D);this.setTime({from:(0,n.zh)(x),to:(0,n.zh)(M)},P)}makeAbsoluteTime(){if(f.E1.getSearch().get("left"))return;const{from:P,to:D}=this.timeRange();this.setTime({from:P,to:D},!0)}isRefreshOutsideThreshold(a,P=.05){const D=this.timeRange();if(i.isMathString(D.raw.from)){const x=D.to.diff(D.from),M=Date.now()-a,b=x*P;return M>=b}return!1}}let v;function E(C){v=C}function h(){return v||(v=new y(d.Vt)),v}},7592:(Y,T,e)=>{"use strict";e.d(T,{o:()=>L,p:()=>k});var t=e(82897),n=e(30779),c=e(61618),s=e(73446),i=e(49187),f=e(94976),u=e(32195),r=e(92103),d=e(90748),o=e(99098),m=e(31568),l=e(18820),p=e(86647),g=e(40538),y=e(48010),v=e(52974),E=e(47694),h=e(84952);function C(ne){return Array.from(new Array(ne+1),(ue,te)=>te).filter(ue=>ne%ue===0)}var a=e(24816),P=e(91162),D=e(15546),x=e(96188),M=e(63496),b=e(7149),R=e(98967),S=e(99822),O=e(2868);function U(ne,ue){const te=[];if(ne?.statistics&&ne?.statistics.length){ne.statistic=ne.statistics[0];for(const me of ne.statistics.splice(1))te.push({...ne,statistic:me})}for(const me of te)me.refId=(0,S.Hs)(ue),delete me.statistics,ue.push(me);return delete ne.statistics,te}function I(ne){const ue=[];if(ne&&"statistics"in ne&&ne?.statistics?.length){for(const te of ne.statistics.splice(1)){const{statistics:me,name:q,...se}=ne;ue.push({...se,statistic:te,name:`${q} - ${te}`})}ne.statistic=ne.statistics[0],ue.length!==0&&(ne.name=`${ne.name} - ${ne.statistic}`),delete ne.statistics}return ue}function F(ne){ne.hasOwnProperty("metricQueryType")||(ne.metricQueryType=O.$5.Search),ne.hasOwnProperty("metricEditorMode")||(ne.metricQueryType===O.$5.Query?ne.metricEditorMode=O.MQ.Code:ne.metricEditorMode=ne.expression?O.MQ.Code:O.MQ.Builder)}var w=e(10672),K=e(96161);n.S.setInit(v.u),n.N.setInit(v.l);class L{constructor(ue){this.dashboard=ue,(0,p.F)()||(0,p.w)(new P.ND)}updateSchema(ue){let te,me,q,se;const ae=this.dashboard.schemaVersion,pe=[];if(this.dashboard.schemaVersion=38,ae!==this.dashboard.schemaVersion){if(ae<2&&(ue.services&&ue.services.filter&&(this.dashboard.time=ue.services.filter.time,this.dashboard.templating.list=ue.services.filter.list||[]),pe.push(de=>(de.type==="graphite"&&(de.type="graph"),de.type!=="graph"||((0,t.isBoolean)(de.legend)&&(de.legend={show:de.legend}),de.grid&&(de.grid.min&&(de.grid.leftMin=de.grid.min,delete de.grid.min),de.grid.max&&(de.grid.leftMax=de.grid.max,delete de.grid.max)),de.y_format&&(de.y_formats||(de.y_formats=[]),de.y_formats[0]=de.y_format,delete de.y_format),de.y2_format&&(de.y_formats||(de.y_formats=[]),de.y_formats[1]=de.y2_format,delete de.y2_format)),de))),ae<3){let de=this.dashboard.getNextPanelId();pe.push(Me=>(Me.id||(Me.id=de,de+=1),Me))}if(ae<4&&pe.push(de=>(de.type!=="graph"||((0,t.each)(de.aliasYAxis,(Me,Ke)=>{de.seriesOverrides=[{alias:Ke,yaxis:Me}]}),delete de.aliasYAxis),de)),ae<6){const de=(0,t.find)(ue.pulldowns,{type:"annotations"});for(de&&(this.dashboard.annotations={list:de.annotations||[]}),te=0;te<this.dashboard.templating.list.length;te++){const Me=this.dashboard.templating.list[te];Me.datasource===void 0&&(Me.datasource=null),Me.type==="filter"&&(Me.type="query"),Me.type===void 0&&(Me.type="query"),Me.allFormat===void 0&&(Me.allFormat="glob")}}if(ae<7&&(ue.nav&&ue.nav.length&&(this.dashboard.timepicker=ue.nav[0]),pe.push(de=>((0,t.each)(de.targets,Me=>{Me.refId||(Me.refId=de.getNextQueryLetter&&de.getNextQueryLetter())}),de))),ae<8&&pe.push(de=>((0,t.each)(de.targets,Me=>{Me.fields&&Me.tags&&Me.groupBy&&(Me.rawQuery?(delete Me.fields,delete Me.fill):(Me.select=(0,t.map)(Me.fields,Ke=>{const st=[];return st.push({type:"field",params:[Ke.name]}),st.push({type:Ke.func,params:[]}),Ke.mathExpr&&st.push({type:"math",params:[Ke.mathExpr]}),Ke.asExpr&&st.push({type:"alias",params:[Ke.asExpr]}),st}),delete Me.fields,(0,t.each)(Me.groupBy,Ke=>{Ke.type==="time"&&Ke.interval&&(Ke.params=[Ke.interval],delete Ke.interval),Ke.type==="tag"&&Ke.key&&(Ke.params=[Ke.key],delete Ke.key)}),Me.fill&&(Me.groupBy.push({type:"fill",params:[Me.fill]}),delete Me.fill)))}),de)),ae<9&&pe.push(de=>{if(de.type!=="singlestat"&&de.thresholds!=="")return de;if(de.thresholds){const Me=de.thresholds.split(",");Me.length>=3&&(Me.shift(),de.thresholds=Me.join(","))}return de}),ae<10&&pe.push(de=>(de.type!=="table"||(0,t.each)(de.styles,Me=>{if(Me.thresholds&&Me.thresholds.length>=3){const Ke=Me.thresholds;Ke.shift(),Me.thresholds=Ke}}),de)),ae<12&&(0,t.each)(this.dashboard.getVariables(),de=>{de.refresh&&(de.refresh=1),de.refresh||(de.refresh=0),de.hideVariable?de.hide=2:de.hideLabel&&(de.hide=1)}),ae<12&&pe.push(de=>(de.type!=="graph"||!de.grid||de.yaxes||(de.yaxes=[{show:de["y-axis"],min:de.grid.leftMin,max:de.grid.leftMax,logBase:de.grid.leftLogBase,format:de.y_formats[0],label:de.leftYAxisLabel},{show:de["y-axis"],min:de.grid.rightMin,max:de.grid.rightMax,logBase:de.grid.rightLogBase,format:de.y_formats[1],label:de.rightYAxisLabel}],de.xaxis={show:de["x-axis"]},delete de.grid.leftMin,delete de.grid.leftMax,delete de.grid.leftLogBase,delete de.grid.rightMin,delete de.grid.rightMax,delete de.grid.rightLogBase,delete de.y_formats,delete de.leftYAxisLabel,delete de.rightYAxisLabel,delete de["y-axis"],delete de["x-axis"]),de)),ae<13&&pe.push(de=>{if(de.type!=="graph"||!de.grid)return de;de.thresholds||(de.thresholds=[]);const Me={},Ke={};return de.grid.threshold1!==null&&(Me.value=de.grid.threshold1,de.grid.thresholdLine?(Me.line=!0,Me.lineColor=de.grid.threshold1Color,Me.colorMode="custom"):(Me.fill=!0,Me.fillColor=de.grid.threshold1Color,Me.colorMode="custom")),de.grid.threshold2!==null&&(Ke.value=de.grid.threshold2,de.grid.thresholdLine?(Ke.line=!0,Ke.lineColor=de.grid.threshold2Color,Ke.colorMode="custom"):(Ke.fill=!0,Ke.fillColor=de.grid.threshold2Color,Ke.colorMode="custom")),(0,t.isNumber)(Me.value)&&((0,t.isNumber)(Ke.value)?Me.value>Ke.value?(Me.op=Ke.op="lt",de.thresholds.push(Me),de.thresholds.push(Ke)):(Me.op=Ke.op="gt",de.thresholds.push(Me),de.thresholds.push(Ke)):(Me.op="gt",de.thresholds.push(Me))),delete de.grid.threshold1,delete de.grid.threshold1Color,delete de.grid.threshold2,delete de.grid.threshold2Color,delete de.grid.thresholdLine,de}),ae<14&&(this.dashboard.graphTooltip=ue.sharedCrosshair?1:0),ae<16&&this.upgradeToGridLayout(ue),ae<17&&pe.push(de=>{if(de.minSpan){const Me=h.cz/de.minSpan,Ke=C(h.cz);de.maxPerRow=Ke[(0,t.findIndex)(Ke,st=>st>Me)-1]}return delete de.minSpan,de}),ae<18&&pe.push(de=>(de["options-gauge"]&&(de.options=de["options-gauge"],de.options.valueOptions={unit:de.options.unit,stat:de.options.stat,decimals:de.options.decimals,prefix:de.options.prefix,suffix:de.options.suffix},de.options.thresholds&&de.options.thresholds.reverse(),delete de.options.options,delete de.options.unit,delete de.options.stat,delete de.options.decimals,delete de.options.prefix,delete de.options.suffix,delete de["options-gauge"]),de)),ae<19&&pe.push(de=>(de.links&&(0,t.isArray)(de.links)&&(de.links=de.links.map(j)),de)),ae<20){const de=Me=>({...Me,url:A(Me.url)});pe.push(Me=>(Me.options&&Me.options.dataLinks&&(0,t.isArray)(Me.options.dataLinks)&&(Me.options.dataLinks=Me.options.dataLinks.map(de)),Me.options&&Me.options.fieldOptions&&Me.options.fieldOptions.defaults&&(Me.options.fieldOptions.defaults.links&&(0,t.isArray)(Me.options.fieldOptions.defaults.links)&&(Me.options.fieldOptions.defaults.links=Me.options.fieldOptions.defaults.links.map(de)),Me.options.fieldOptions.defaults.title&&(Me.options.fieldOptions.defaults.title=A(Me.options.fieldOptions.defaults.title))),Me))}if(ae<21){const de=Me=>({...Me,url:Me.url.replace(/__series.labels/g,"__field.labels")});pe.push(Me=>(Me.options&&Me.options.dataLinks&&(0,t.isArray)(Me.options.dataLinks)&&(Me.options.dataLinks=Me.options.dataLinks.map(de)),Me.options&&Me.options.fieldOptions&&Me.options.fieldOptions.defaults&&Me.options.fieldOptions.defaults.links&&(0,t.isArray)(Me.options.fieldOptions.defaults.links)&&(Me.options.fieldOptions.defaults.links=Me.options.fieldOptions.defaults.links.map(de)),Me))}if(ae<22&&pe.push(de=>(de.type!=="table"||(0,t.each)(de.styles,Me=>{Me.align="auto"}),de)),ae<23)for(const de of this.dashboard.templating.list){if(!(0,D.U4)(de))continue;const{multi:Me,current:Ke}=de;(0,c.Q)(Ke)||(de.current=(0,x.x)(Ke,Me))}if(ae<24&&pe.push(de=>{const Me=de.type==="table";if(Me&&!de.styles)return de;const Ke=de.table==="table2";return!Me||Ke||(de.type=Me?"table-old":"table"),de}),ae<25,ae<26&&pe.push(de=>(de.type==="text2"&&(de.type="text",delete de.options.angular),de)),ae<27&&(this.dashboard.templating.list=this.dashboard.templating.list.map(de=>{if(!(0,D.VC)(de))return de;const Me={...de};return Me.current={selected:!0,text:Me.query??"",value:Me.query??""},Me.options=[Me.current],Me.hide===w.bU.dontHide||Me.hide===w.bU.hideLabel?{...Me,type:"textbox"}:Me})),ae<28){pe.push(de=>de.type==="singlestat"?_(de):de);for(const de of this.dashboard.templating.list)de.tags&&delete de.tags,de.tagsQuery&&delete de.tagsQuery,de.tagValuesQuery&&delete de.tagValuesQuery,de.useTags&&delete de.useTags}if(ae<29)for(const de of this.dashboard.templating.list)de.type==="query"&&(de.refresh!==1&&de.refresh!==2&&(de.refresh=1),de.options?.length&&(de.options=[]));if(ae<30&&(pe.push(re),pe.push(le)),ae<31&&pe.push(de=>{if(de.transformations){for(const Me of de.transformations)if(Me.id===m.r.id)return Q(de,m.r.id,{id:l.R.id,options:{}})}return de}),ae<32,ae<33&&pe.push(de=>{if(de.datasource=k(de.datasource,{returnDefaultAsNull:!0}),!de.targets)return de;for(const Me of de.targets){const Ke=k(Me.datasource,{returnDefaultAsNull:!0});Ke!=null&&(Me.datasource=Ke)}return de}),ae<34&&(pe.push(de=>(this.migrateCloudWatchQueries(de),de)),this.migrateCloudWatchAnnotationQuery()),ae<35&&pe.push(ge),ae<36){for(const Me of this.dashboard.annotations.list)Me.datasource=k(Me.datasource,{returnDefaultAsNull:!1});const de=(0,p.F)().getInstanceSettings(null);if(de){for(const Me of this.dashboard.templating.list)Me.type==="query"&&Me.datasource===null&&(Me.datasource=(0,s.iU)(de));pe.push(Me=>{if(Me.targets){let Ke=!1;Me.datasource==null&&Me.targets.length>0&&(Me.datasource=(0,s.iU)(de),Ke=!0);for(const st of Me.targets)(st.datasource==null||st.datasource.uid==null)&&(Me.datasource?.uid!==M.D?st.datasource={...Me.datasource}:st.datasource=k(st.datasource,{returnDefaultAsNull:!1})),Ke&&st.datasource?.uid!=="__expr__"&&(Me.datasource=st.datasource)}return Me})}}if(ae<37&&pe.push(de=>(de.options?.legend&&(de.options.legend.displayMode==="hidden"||de.options.legend.showLegend===!1)?(de.options.legend.displayMode="list",de.options.legend.showLegend=!1):de.options?.legend&&(de.options.legend={...de.options?.legend,showLegend:!0}),de)),ae<38&&pe.push(de=>{if(de.type==="table"&&de.fieldConfig!==void 0){const Me=de.fieldConfig.defaults?.custom?.displayMode;if(Me!==void 0&&(de.fieldConfig.defaults.custom.cellOptions=(0,y.q7)(Me),delete de.fieldConfig.defaults.custom.displayMode),de.fieldConfig?.overrides)for(const Ke of de.fieldConfig.overrides)for(let st=0;st<Ke.properties?.length;st++){let Ie=Ke.properties[st].value;Ke.properties[st].id==="custom.displayMode"&&(Ke.properties[st].id="custom.cellOptions",Ke.properties[st].value=(0,y.q7)(Ie))}}return de}),pe.length!==0)for(me=0;me<this.dashboard.panels.length;me++)for(q=0;q<pe.length;q++){this.dashboard.panels[me]=pe[q].call(this,this.dashboard.panels[me]);const de=this.dashboard.panels[me].panels;if(de)for(se=0;se<de.length;se++)de[se]=pe[q].call(this,de[se])}}}migrateCloudWatchQueries(ue){for(const te of ue.targets||[])if(Z(te)&&(F(te),te.hasOwnProperty("statistics"))){const me=U(te,[...ue.targets]);for(const q of me)ue.targets.push(q)}}migrateCloudWatchAnnotationQuery(){for(const ue of this.dashboard.annotations.list)if(oe(ue)){const te=I(ue);for(const me of te)this.dashboard.annotations.list.push(me)}}upgradeToGridLayout(ue){let te=0;const me=h.cz/12;let se=(0,t.max)((0,t.flattenDeep)((0,t.map)(ue.rows,pe=>(0,t.map)(pe.panels,"id"))))+1;if(!ue.rows)return;const ae=(0,t.some)(ue.rows,pe=>pe.collapse||pe.showTitle||pe.repeat);for(const pe of ue.rows){if(pe.repeatIteration)continue;const de=pe.height||h.b0,Me=V(de),Ke={};let st;ae&&(Ke.id=se,Ke.type="row",Ke.title=pe.title,Ke.collapsed=pe.collapse,Ke.repeat=pe.repeat,Ke.panels=[],Ke.gridPos={x:0,y:te,w:h.cz,h:Me},st=new K.rY(Ke),se++,te++);const Ie=new H(Me,h.cz,te);for(const Ve of pe.panels){Ve.span=Ve.span||h.kh,Ve.minSpan&&(Ve.minSpan=Math.min(h.cz,h.cz/12*Ve.minSpan));const _e=Math.floor(Ve.span)*me,tt=Ve.height?V(Ve.height):Me,dt=Ie.getPanelPosition(tt,_e);te=Ie.yPos,Ve.gridPos={x:dt.x,y:te+dt.y,w:_e,h:tt},Ie.addPanel(Ve.gridPos),delete Ve.span,st&&Ke.collapsed?st.panels?.push(Ve):this.dashboard.panels.push(new K.rY(Ve))}st&&this.dashboard.panels.push(st),st&&Ke.collapsed||(te+=Me)}}}function V(ne){return(0,t.isString)(ne)&&(ne=parseInt(ne.replace("px",""),10)),ne<h.AV&&(ne=h.AV),Math.ceil(ne/(h.K3+h.hD))}class H{constructor(ue,te=h.cz,me=0){this.area=new Array(te).fill(0),this.yPos=me,this.height=ue}reset(){this.area.fill(0)}addPanel(ue){for(let te=ue.x;te<ue.x+ue.w;te++)(!this.area[te]||ue.y+ue.h-this.yPos>this.area[te])&&(this.area[te]=ue.y+ue.h-this.yPos);return this.area}getPanelPosition(ue,te,me=!1){let q,se,ae;for(let pe=this.area.length-1;pe>=0&&this.height-this.area[pe]>0;pe--)if(se===void 0)se=pe;else if(pe<this.area.length-1&&this.area[pe]<=this.area[pe+1])q=pe;else break;if(q!==void 0&&se!==void 0&&se-q>=te-1){const pe=(0,t.max)(this.area.slice(q));ae={x:q,y:pe}}else return me?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(ue,te,!0));return ae}}function j(ne){let ue=ne.url;return!ue&&ne.dashboard&&(ue=`dashboard/db/${a.Z.slugifyForUrl(ne.dashboard)}`),!ue&&ne.dashUri&&(ue=`dashboard/${ne.dashUri}`),ue||(ue="/"),ne.keepTime&&(ue=i.Cj.appendQueryToUrl(ue,`$${f.W.keepTime}`)),ne.includeVars&&(ue=i.Cj.appendQueryToUrl(ue,`$${f.W.includeVars}`)),ne.params&&(ue=i.Cj.appendQueryToUrl(ue,ne.params)),{url:ue,title:ne.title,targetBlank:ne.targetBlank}}function A(ne){const ue=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return ne.replace(ue,(te,me,q,se,ae,pe)=>me?"__series.name":q?"${__series.name}":se?"__value.time":ae?"__field.name":pe?"${__field.name}":te)}function _(ne){if(E.vc.panels["grafana-singlestat-panel"])return ne.type="grafana-singlestat-panel",ne;let ue=!1;return ne.changePlugin||(ue=!0,ne=new K.rY(ne)),ne.plugin={angularPanelCtrl:{}},ne.gauge?.show?(b.plugin.meta=E.vc.panels.gauge,ne.changePlugin(b.plugin)):(R.plugin.meta=E.vc.panels.stat,ne.changePlugin(R.plugin)),ue?ne.getSaveModel():ne}function k(ne,ue){if(ue.returnDefaultAsNull&&(ne==null||ne==="default"))return null;if((0,s.cv)(ne))return ne;const te=(0,p.F)().getInstanceSettings(ne);return te?(0,s.iU)(te):{uid:ne}}function Q(ne,ue,te){if(ne.transformations){const me=[];for(const q of ne.transformations)me.push(q),q.id===ue&&me.push({...te});ne.transformations=me}return ne}function re(ne){const ue=ne.fieldConfig;if(!ue)return ne;if(ue.defaults&&ue.defaults.mappings&&(ue.defaults.mappings=G(ue.defaults.mappings,ue.defaults.thresholds)),Array.isArray(ue.overrides))for(const te of ue.overrides)for(const me of te.properties)me.id==="mappings"&&(me.value=G(me.value));return ne}function Z(ne){return ne.hasOwnProperty("dimensions")&&ne.hasOwnProperty("namespace")&&ne.hasOwnProperty("region")&&ne.hasOwnProperty("metricName")}function oe(ne){return ne.hasOwnProperty("dimensions")&&ne.hasOwnProperty("namespace")&&ne.hasOwnProperty("region")&&ne.hasOwnProperty("prefixMatching")&&ne.hasOwnProperty("statistics")}function G(ne,ue){if(!ne)return;const te={type:u.H.ValueToText,options:{}},me=[];for(const q of ne){if(q.type&&q.options){q.type===u.H.ValueToText?te.options={...te.options,...q.options}:me.push(q);continue}let se;const ae=parseFloat(q.text);if(ue&&!isNaN(ae)){const pe=(0,r.m1)(ae,ue.steps);pe&&pe.color&&(se=pe.color)}switch(q.type){case 1:q.value!=null&&(q.value==="null"?me.push({type:u.H.SpecialValue,options:{match:u.e.Null,result:{text:q.text,color:se}}}):te.options[String(q.value)]={text:q.text,color:se});break;case 2:me.push({type:u.H.RangeToText,options:{from:+q.from,to:+q.to,result:{text:q.text,color:se}}});break}}return Object.keys(te.options).length>0&&me.unshift(te),me}function le(ne){return(ne.type==="timeseries"||ne.type==="xychart")&&ne.options.tooltipOptions&&(ne.options={...ne.options,tooltip:ne.options.tooltipOptions},delete ne.options.tooltipOptions),ne}function ge(ne){return ne.type==="timeseries"&&ne.fieldConfig?.defaults.custom?.axisPlacement===g.LB.Hidden&&(ne.fieldConfig={...ne.fieldConfig,overrides:[...ne.fieldConfig.overrides,{matcher:{id:d.mi.byType,options:o.fS.time},properties:[{id:"custom.axisPlacement",value:g.LB.Auto}]}]}),ne}},82302:(Y,T,e)=>{"use strict";e.d(T,{f:()=>w});var t=e(82897),n=e(53376),c=e(50444),s=e(77258),i=e(67483),f=e(35645),u=e(82378),r=e(16514),d=e(84952),o=e(82002);function m(L){return(0,t.isArray)(L)?L.map(m):(0,t.isPlainObject)(L)?Object.keys(L).sort().reduce((V,H)=>{const j=L[H];return j!=null&&(V[H]=m(j)),V},{}):L}var l=e(22323),p=e(85803),g=e(87095),y=e(27876),v=e(45984),E=e(77582),h=e(3153),C=e(10672),a=e(92624),P=e(19349),D=e(86899);const x=new Set(["gridPos","title","description","transparent"]);function M(L,V){const H=[],j={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:H};let A=0;const _=new Map;for(let k of V){let{id:Q}=k;Q||(A||(A=R([L,V])),Q=A++,k={...k,id:Q}),_.set(Q,k)}for(const k of L){const Q=_.get(k.id);if(!Q){j.changed=!0,j.actions.remove.push(k.id),k.destroy();continue}if(_.delete(k.id),Q===k){H.push(k),j.actions.noop.push(k.id);continue}if(k.type===Q.type){const Z=k.getSaveModel();let oe=!0,G=!1;for(const[le,ge]of Object.entries(Q))if(!(0,t.isEqualWith)(ge,Z[le],b))if(j.changed=!0,oe=!1,x.has(le))k[le]=ge,G=!0;else{G=!1;break}if(oe){H.push(k),j.actions.noop.push(k.id);continue}if(G){H.push(k),j.actions.update.push(k.id);continue}}k.destroy();const re=new D.r(Q);re.key=`${re.id}-update-${Date.now()}`,H.push(re),j.changed=!0,j.actions.replace.push(k.id)}for(const k of _.values())H.push(new D.r(k)),j.changed=!0,j.actions.add.push(k.id);return j}function b(L,V){if(L==null&&(V===1/0||V===-1/0||V==null)||V==null&&(L===1/0||L===-1/0||L==null))return!0}function R(L){let V=0;for(const H of L)for(const j of H)j.id>V&&(V=j.id);return V+1}var S=e(7592),O=e(96161);function U(L,V){return L.repeatDirection===d.yM?!1:V.gridPos.x>=L.gridPos.x+L.gridPos.w&&V.gridPos.y===L.gridPos.y}function I(L){for(const V of L)if(delete V.scopedVars,V.panels?.length)for(const H of V.panels)delete H.scopedVars}const F=class{constructor(L,V,H){this.timeRangeUpdatedDuringEdit=!1,this.getVariablesFromState=H?.getVariablesFromState??g.gt,this.events=new c.F,this.id=L.id||null,this.uid=L.uid||null,this.revision=L.revision??void 0,this.title=L.title??"No Title",this.description=L.description,this.tags=L.tags??[],this.style=L.style??"dark",this.timezone=L.timezone??"",this.weekStart=L.weekStart??"",this.editable=L.editable!==!1,this.graphTooltip=L.graphTooltip||0,this.time=L.time??{from:"now-6h",to:"now"},this.timepicker=L.timepicker??{},this.liveNow=Boolean(L.liveNow),this.templating=this.ensureListExist(L.templating),this.annotations=this.ensureListExist(L.annotations),this.refresh=L.refresh||"",this.snapshot=L.snapshot,this.schemaVersion=L.schemaVersion??0,this.fiscalYearStartMonth=L.fiscalYearStartMonth??0,this.version=L.version??0,this.links=L.links??[],this.gnetId=L.gnetId||null,this.panels=(0,t.map)(L.panels??[],j=>new O.rY(j)),this.ensurePanelsHaveUniqueIds(),this.formatDate=this.formatDate.bind(this),this.resetOriginalVariables(!0),this.resetOriginalTime(),this.initMeta(V),this.updateSchema(L),(H?.autoMigrateOldPanels||!f.v.angularSupportEnabled||f.v.featureToggles.autoMigrateOldPanels)&&this.panels.forEach(j=>{const A=O.G7[j.type];!j.autoMigrateFrom&&A&&(j.autoMigrateFrom=j.type,j.type=A)}),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new n.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(E.h$.subscribe(C.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(E.h$.subscribe(C.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(E.h$.subscribe(C.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some(V=>V.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:r.Jx,enable:!0,hide:!0,builtIn:1})}initMeta(L){L=L||{},L.canShare=L.canShare!==!1,L.canSave=L.canSave!==!1,L.canStar=L.canStar!==!1,L.canEdit=L.canEdit!==!1,L.canDelete=L.canDelete!==!1,L.showSettings=L.canEdit,L.canMakeEditable=L.canSave&&!this.editable,L.hasUnsavedFolderChange=!1,this.editable||(L.canEdit=!1,L.canDelete=!1,L.canSave=!1),this.meta=L}getSaveModelClone(L){const V=(0,t.defaults)(L||{},{saveVariables:!0,saveTimerange:!0});let H={};for(const j in this)F.nonPersistedProperties[j]||!this.hasOwnProperty(j)||(H[j]=(0,t.cloneDeep)(this[j]));return this.updateTemplatingSaveModelClone(H,V),V.saveTimerange||(H.time=this.originalTime),H.panels=this.getPanelSaveModels(),H=m(H),H.getVariables=()=>H.templating.list,H}updatePanels(L){const V=M(this.panels,L??[]);return V.changed&&(this.panels=V.panels??[],this.sortPanelsByGridPos(),this.events.publish(new v._B)),V}getPanelSaveModels(){return this.panels.filter(L=>this.isSnapshotTruthy()||!(L.type==="add-panel"||L.repeatPanelId||L.repeatedByRow)).map(L=>{if(L.libraryPanel){const{id:V,title:H,libraryPanel:j,gridPos:A}=L;return{id:V,title:H,gridPos:A,libraryPanel:{uid:j.uid,name:j.name}}}return this.panelInEdit&&this.panelInEdit.id===L.id?this.panelInEdit.getSaveModel():L.getSaveModel()}).map(L=>(this.isSnapshotTruthy()||(delete L.scopedVars,L.type==="row"&&L.panels&&L.panels.length>0&&(L.panels=L.panels.filter(V=>!V.repeatPanelId).map(V=>(delete V.scopedVars,V)))),L))}updateTemplatingSaveModelClone(L,V){const H=this.originalTemplating,j=this.getVariablesFromState(this.uid);if(L.templating={list:j.map(A=>l.z.get(A.type).getSaveModel(A,V.saveVariables))},!V.saveVariables)for(const A of L.templating.list){const _=H.find(({name:k,type:Q})=>k===A.name&&Q===A.type);_&&(A.type==="adhoc"?A.filters=_.filters:A.current=_.current)}}timeRangeUpdated(L){this.events.publish(new u.md(L)),(0,h.WI)((0,p.DU)(this.uid,L)),this.panelInEdit&&(this.timeRangeUpdatedDuringEdit=!0)}startRefresh(L={refreshAll:!0,panelIds:[]}){if(this.events.publish(new u.U5),this.lastRefresh=Date.now(),this.panelInEdit&&(L.refreshAll||L.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}for(const V of this.panels)!this.otherPanelInFullscreen(V)&&(L.refreshAll||L.panelIds.includes(V.id))&&V.refresh()}render(){this.events.publish(new v._z);for(const L of this.panels)L.render()}panelInitialized(L){const V=L.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(L)&&!V&&L.refresh()}otherPanelInFullscreen(L){return(this.panelInEdit||this.panelInView)&&!(L.isViewing||L.isEditing)}initEditPanel(L){return(0,P.$t)().stopAutoRefresh(),this.panelInEdit=L.getEditClone(),this.timeRangeUpdatedDuringEdit=!1,this.panelInEdit}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,P.$t)().resumeAutoRefresh(),(this.panelsAffectedByVariableChange||this.timeRangeUpdatedDuringEdit)&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange??[],refreshAll:this.timeRangeUpdatedDuringEdit}),this.panelsAffectedByVariableChange=null,this.timeRangeUpdatedDuringEdit=!1)}initViewPanel(L){this.panelInView=L,L.setIsViewing(!0)}exitViewPanel(L){this.panelInView=void 0,L.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveUniqueIds(){const L=new Set;let V=this.getNextPanelId();for(const H of this.panelIterator())(!H.id||L.has(H.id))&&(H.id=V++),L.add(H.id)}ensureListExist(L={}){return L.list??=[],L}getNextPanelId(){let L=0;for(const V of this.panelIterator())V.id>L&&(L=V.id);return L+1}*panelIterator(){for(const L of this.panels){yield L;const V=L.panels??[];for(const H of V)yield H}}forEachPanel(L){for(let V=0;V<this.panels.length;V++)L(this.panels[V],V)}getPanelById(L){return this.panelInEdit&&this.panelInEdit.id===L?this.panelInEdit:this.panels.find(V=>V.id===L)??null}canEditPanel(L){return Boolean(this.meta.canEdit&&L&&!L.repeatPanelId&&L.type!=="row")}canEditPanelById(L){return this.canEditPanel(this.getPanelById(L))}addPanel(L){L.id=this.getNextPanelId(),this.panels.unshift(new O.rY(L)),this.sortPanelsByGridPos(),this.events.publish(new v._B)}updateMeta(L){this.meta={...this.meta,...L},this.events.publish(new v.hS)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((L,V)=>L.gridPos.y===V.gridPos.y?L.gridPos.x-V.gridPos.x:L.gridPos.y-V.gridPos.y)}clearUnsavedChanges(){for(const L of this.panels)L.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0)}hasUnsavedChanges(){const L=this.panels.find(V=>V.hasChanged);return Boolean(L)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;I(this.panels);const L=this.panels.filter(V=>(!V.repeat||V.repeatedByRow)&&V.repeatPanelId);(0,t.pull)(this.panels,...L),L.map(V=>V.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables()||this.panelInView)){this.cleanUpRepeats();for(let L=0;L<this.panels.length;L++){const V=this.panels[L];V.repeat&&this.repeatPanel(V,L)}this.sortPanelsByGridPos(),this.events.publish(new v._B)}}cleanUpRowRepeats(L){const V=L.map(j=>j.id),H=L.filter(j=>!j.repeat&&j.repeatPanelId&&V.includes(j.repeatPanelId));(0,t.pull)(L,...H),(0,t.pull)(this.panels,...H)}processRowRepeats(L){if(this.isSnapshotTruthy()||!this.hasVariables())return;let V=L.panels??[];if(!L.collapsed){const H=this.panels.findIndex(j=>j.id===L.id);V=this.getRowPanels(H)}this.cleanUpRowRepeats(V);for(const H of V)if(H.repeat){const j=this.panels.findIndex(A=>A.id===H.id);this.repeatPanel(H,j)}}getPanelRepeatClone(L,V,H){if(V===0)return L;const j=L.getSaveModel();j.id=this.getNextPanelId();const A=new O.rY(j);return this.panels.splice(H+V,0,A),A.repeatPanelId=L.id,A.repeat=void 0,this.panelInView?.id===A.id&&(A.setIsViewing(!0),this.panelInView=A),A}getRowRepeatClone(L,V,H){if(V===0){if(!L.collapsed){const k=this.getRowPanels(H);L.panels=k}return L}const j=new O.rY(L.getSaveModel());let A,_;return L.collapsed?(A=(0,t.cloneDeep)(L.panels)??[],j.panels=A,_=H+V):(A=this.getRowPanels(H),j.panels=A.map(k=>k.getSaveModel()),_=H+(A.length+1)*V),this.panels.splice(_,0,j),this.updateRepeatedPanelIds(j),j}repeatPanel(L,V){const H=this.getPanelRepeatVariable(L);if(!H)return;if(L.type==="row"){this.repeatRow(L,V,H);return}const j=this.getSelectedVariableOptions(H),A=L.maxPerRow||4;let _=0,k=L.gridPos.y;for(let re=0;re<j.length;re++){const Z=j[re];let oe;oe=this.getPanelRepeatClone(L,re,V),oe.scopedVars??={},oe.scopedVars[H.name]=Z,L.repeatDirection===d.OA?(re>0&&(k+=oe.gridPos.h),oe.gridPos.y=k):(oe.gridPos.w=Math.max(d.cz/j.length,d.cz/A),oe.gridPos.x=_,oe.gridPos.y=k,_+=oe.gridPos.w,_+oe.gridPos.w>d.cz&&(_=0,k+=oe.gridPos.h))}const Q=k-L.gridPos.y;if(Q>0){const re=V+j.length;for(const Z of this.panels.slice(re))U(L,Z)||(Z.gridPos.y+=Q)}}repeatRow(L,V,H){const j=this.getSelectedVariableOptions(H);let A=L.gridPos.y;function _(k,Q){k.scopedVars??={},k.scopedVars[H.name]=Q}for(let k=0;k<j.length;k++){const Q=j[k],re=this.getRowRepeatClone(L,k,V);_(re,Q);const Z=this.getRowHeight(re),oe=re.panels||[];let G;if(L.collapsed){for(const le of oe)_(le,Q),k>0&&this.updateRepeatedPanelIds(le,!0);re.gridPos.y+=k,A+=k,G=V+k+1}else{const le=V+(oe.length+1)*k+1;oe.forEach((ge,ne)=>{if(_(ge,Q),k>0){const ue=new O.rY(ge);this.updateRepeatedPanelIds(ue,!0),ue.gridPos.y+=Z*k,this.panels.splice(le+ne,0,ue)}}),re.panels=[],re.gridPos.y+=Z*k,A+=Z,G=le+oe.length}if(j.length>1)for(const le of this.panels.slice(G))le.gridPos.y+=A}}updateRepeatedPanelIds(L,V){return L.repeatPanelId=L.id,L.id=this.getNextPanelId(),V?L.repeatedByRow=!0:L.repeat=void 0,L}getSelectedVariableOptions(L){let V;return(0,a.HY)(L)?V=L.options.slice(1,L.options.length):V=(0,t.filter)(L.options,{selected:!0}),V}getRowHeight(L){if(!L.panels||L.panels.length===0)return 0;const V=L.gridPos.y,H=(0,t.map)(L.panels,"gridPos"),j=(0,t.maxBy)(H,A=>A.y+A.h);return j.y+j.h-V}removePanel(L){this.panels=this.panels.filter(V=>V!==L),this.events.publish(new v._B)}removeRow(L,V){(!V&&L.collapsed||V&&!L.collapsed)&&this.toggleRow(L),this.removePanel(L)}expandRows(){const L=this.panels.filter(V=>V.type==="row"&&V.collapsed);for(const V of L)this.toggleRow(V)}collapseRows(){const L=this.panels.filter(V=>V.type==="row"&&!V.collapsed);for(const V of L)this.toggleRow(V)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(L=>L.hide!==2)||this.annotations.list.some(L=>!L.hide)}getPanelInfoById(L){const V=this.panels.findIndex(H=>H.id===L);return V>=0?{panel:this.panels[V],index:V}:null}duplicatePanel(L){const V=L.getSaveModel();return V.id=this.getNextPanelId(),delete V.repeat,delete V.repeatIteration,delete V.repeatPanelId,delete V.scopedVars,V.alert&&delete V.thresholds,delete V.alert,L.gridPos.x+L.gridPos.w*2<=d.cz?V.gridPos.x+=L.gridPos.w:V.gridPos.y+=L.gridPos.h,this.addPanel(V),V}formatDate(L,V){return(0,s.dq)(L,{format:V,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const L of this.panels)L.destroy()}toggleRow(L){const V=(0,t.indexOf)(this.panels,L);if(!L.collapsed){const A=this.getRowPanels(V);(0,t.pull)(this.panels,...A),L.panels=A.map(_=>_.getSaveModel()),L.collapsed=!0,A.some(_=>_.hasChanged)&&L.configRev++,this.events.publish(new v._B);return}L.collapsed=!1;const H=L.panels??[],j=H.some(A=>A.repeat);if(H.length>0){const _=(H[0].gridPos.y??L.gridPos.y)-(L.gridPos.y+L.gridPos.h);let k=V+1,Q=L.gridPos.y;for(const Z of H)Z.gridPos.y??(Z.gridPos.y=L.gridPos.y),Z.gridPos.y-=_,this.panels.splice(k,0,new O.rY(Z)),k+=1,Q=Math.max(Q,Z.gridPos.y+Z.gridPos.h);const re=Q-L.gridPos.y-1;for(const Z of this.panels.slice(k))Z.gridPos.y+=re;L.panels=[],j&&this.processRowRepeats(L)}this.sortPanelsByGridPos(),this.events.publish(new v._B)}getRowPanels(L){const V=this.panels.slice(L+1),H=V.findIndex(A=>A.type==="row");return V.slice(0,H>=0?H:this.panels.length)}on(L,V){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(L,V)}off(L,V){console.log("DashboardModel.off is deprecated"),this.events.off(L,V)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(L){return(0,s.E8)(L,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:o.Vt?.user?.timezone}updateSchema(L){new S.o(this).updateSchema(L)}resetOriginalTime(){this.originalTime=(0,t.cloneDeep)(this.time)}hasTimeChanged(){const{time:L,originalTime:V}=this;return!((0,t.isEqual)(L,V)||(0,t.isEqual)((0,i.CQ)(L?.from),(0,i.CQ)(V?.from))&&(0,t.isEqual)((0,i.CQ)(L?.to),(0,i.CQ)(V?.to)))}resetOriginalVariables(L=!1){if(L){this.originalTemplating=this.cloneVariablesFrom(this.templating.list);return}this.originalTemplating=this.cloneVariablesFrom(this.getVariablesFromState(this.uid))}hasVariableValuesChanged(){return this.hasVariablesChanged(this.originalTemplating,this.getVariablesFromState(this.uid))}autoFitPanels(L,V){const H=Math.max(...this.panels.map(re=>re.gridPos.h+re.gridPos.y)),j=55,A=20;let _=L-j-A;V&&V!==y.KioskMode.TV&&(_+=j);const k=Math.floor(_/(d.K3+d.hD)),Q=H/k;for(const re of this.panels)re.gridPos.y=Math.round(re.gridPos.y/Q)||1,re.gridPos.h=Math.round(re.gridPos.h/Q)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(y.CoreEvents.nq)}getPanelByUrlId(L){const V=parseInt(L??"0",10),H=this.panels.filter(j=>j.collapsed);for(const j of H)j.panels?.some(_=>_.id===V)&&this.toggleRow(j);return this.getPanelById(V)}toggleLegendsForAll(){const L=this.panels.filter(K),V=L.filter(A=>A.legend.show).length,H=L.length-V,j=V>=H;for(const A of L)A.legend.show=!j,A.render()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(L){let V=!0;return o.Vt.accessControlEnabled()&&(L?V=!!this.meta.annotationsPermissions?.dashboard.canEdit:V=!!this.meta.annotationsPermissions?.organization.canEdit),this.canEditDashboard()&&V}canDeleteAnnotations(L){let V=!0;return o.Vt.accessControlEnabled()&&(L?V=!!this.meta.annotationsPermissions?.dashboard.canDelete:V=!!this.meta.annotationsPermissions?.organization.canDelete),V&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(V=>V.builtIn===1)?.enable===!1||!this.canEditDashboard()?!1:!o.Vt.accessControlEnabled()||Boolean(this.meta.annotationsPermissions?.dashboard.canAdd)}canEditDashboard(){return Boolean(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(L,V){!(0,t.isEqual)(L?.gridPos,V?.gridPos)&&this.events.publish(new v._B)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(L){return this.getVariablesFromState(this.uid).find(V=>V.name===L.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(L,V){if(L.length!==V.length)return!1;const H=V.map(j=>({name:j.name,type:j.type,current:(0,t.cloneDeep)(j.current),filters:(0,t.cloneDeep)(j.filters)}));return!(0,t.isEqual)(H,L)}cloneVariablesFrom(L){return L.map(V=>({name:V.name,type:V.type,current:(0,t.cloneDeep)(V.current),filters:(0,t.cloneDeep)(V.filters)}))}variablesTimeRangeProcessDoneHandler(L){const V=L.payload.variableIds.length>0;this.variablesChangedHandler(new C.x9({panelIds:[],refreshAll:!0}),V)}variablesChangedHandler(L,V=!0){if(V&&this.processRepeats(),L.payload.refreshAll||(0,P.$t)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=L.payload.panelIds.filter(H=>H!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(L.payload)}variablesChangedInUrlHandler(L){this.templateVariableValueUpdated(),this.startRefresh(L.payload)}};let w=F;w.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0,timeRangeUpdatedDuringEdit:!0};function K(L){return Boolean(L.legend)}},96161:(Y,T,e)=>{"use strict";e.d(T,{G7:()=>E,Jg:()=>P,rY:()=>C});var t=e(82897),n=e.n(t),c=e(44288),s=e(50444),i=e(206),f=e(16936),u=e(82378),r=e(20308),d=e(47694),o=e(55935),m=e(99822),l=e(45984),p=e(49003);const g={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0,isNew:!0},y={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,queryCachingTTL:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},v={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},title:""},E={graph:"timeseries","table-old":"table",singlestat:"stat","grafana-singlestat-panel":"stat","grafana-piechart-panel":"piechart","grafana-worldmap-panel":"geomap"},h={"heatmap-new":"heatmap"};class C{constructor(x){this.datasource=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.cachedPluginOptions={},this.events=new s.F,this.restoreModel(x),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,c.Z)()}restoreModel(x){for(const b in this)g[b]||!this.hasOwnProperty(b)||x[b]||typeof this[b]!="function"&&typeof this[b]!="symbol"&&delete this[b];for(const b in x)this[b]=x[b];const M=h[this.type];M&&(this.autoMigrateFrom=this.type,this.type=M),(0,t.defaultsDeep)(this,(0,t.cloneDeep)(v)),this.ensureQueryIds()}generateNewKey(){this.key=(0,c.Z)()}ensureQueryIds(){if(this.targets&&(0,t.isArray)(this.targets))for(const x of this.targets)x.refId||(x.refId=(0,m.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(x){this.options=x,this.configRev++,this.events.publish(new l.Wj),this.render()}updateFieldConfig(x){this.fieldConfig=x,this.configRev++,this.events.publish(new l.Wj),this.resendLastResult(),this.render()}getSaveModel(){const x={};for(const M in this)g[M]||!this.hasOwnProperty(M)||(0,t.isEqual)(this[M],v[M])||(x[M]=(0,t.cloneDeep)(this[M]));return this.type==="row"&&this.panels&&this.panels.length>0&&(x.panels=this.panels.map(M=>{if(M.libraryPanel){const{id:b,title:R,libraryPanel:S,gridPos:O}=M;return{id:b,title:R,gridPos:O,libraryPanel:{uid:S.uid,name:S.name}}}return M})),x}setIsViewing(x){this.isViewing=x}updateGridPos(x,M=!0){x.x===this.gridPos.x&&x.y===this.gridPos.y&&x.h===this.gridPos.h&&x.w===this.gridPos.w||(this.gridPos.x=x.x,this.gridPos.y=x.y,this.gridPos.w=x.w,this.gridPos.h=x.h,M&&this.configRev++,this.render())}runAllPanelQueries({dashboardUID:x,dashboardTimezone:M,timeData:b,width:R,publicDashboardAccessToken:S}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardUID:x,publicDashboardAccessToken:S,timezone:M,timeRange:b.timeRange,timeInfo:b.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(R),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,queryCachingTTL:this.queryCachingTTL,transformations:this.transformations,app:this.isEditing?i.zj.PanelEditor:this.isViewing?i.zj.PanelViewer:i.zj.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new u.U5)}render(){this.hasRefreshed?this.events.publish(new l._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((x,M)=>g[M]||y[M]?x:{...x,[M]:this[M]},{})}restorePanelOptions(x){const M=this.cachedPluginOptions[x];M&&(Object.keys(M.properties).map(b=>{this[b]=M.properties[b]}),this.fieldConfig=(0,f.__)(this.fieldConfig,M.fieldConfig))}applyPluginOptionDefaults(x,M){const b=(0,f.d4)({plugin:x,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:M});this.fieldConfig=b.fieldConfig,this.options=b.options}pluginLoaded(x){this.plugin=x;const M=a(x);if(this.autoMigrateFrom){const b=E[this.autoMigrateFrom]!=null,R=this.getOptionsToRemember(),S=this.autoMigrateFrom,O=this.type;this.clearPropertiesBeforePluginChange(),this.type=O,this.plugin=x,this.callPanelTypeChangeHandler(x,S,R,b)}x.onPanelMigration&&M!==this.pluginVersion&&(this.options=x.onPanelMigration(this),this.pluginVersion=M),this.applyPluginOptionDefaults(x,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const x of(0,t.keys)(this))y[x]||delete this[x];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,f.aS)(this.fieldConfig.overrides,f._k)}}callPanelTypeChangeHandler(x,M,b,R){if(x.onPanelTypeChanged){const S=R?{angular:b}:b.options;Object.assign(this.options,x.onPanelTypeChanged(this,M,S,this.fieldConfig))}}changePlugin(x){const M=x.meta.id,b=this.getOptionsToRemember(),R=this.fieldConfig,S=this.type,O=this.isAngularPlugin()||Boolean(E[S]);this.cachedPluginOptions[S]={properties:b,fieldConfig:R},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(M),this.callPanelTypeChangeHandler(x,S,b,O),this.type=M,this.plugin=x,this.configRev++,this.applyPluginOptionDefaults(x,!0),x.onPanelMigration&&(this.pluginVersion=a(x))}updateQueries(x){const{dataSource:M}=x;this.datasource={uid:M.uid,type:M.type},this.cacheTimeout=x.cacheTimeout,this.queryCachingTTL=x.queryCachingTTL,this.timeFrom=x.timeRange?.from,this.timeShift=x.timeRange?.shift,this.hideTimeOverride=x.timeRange?.hide,this.interval=x.minInterval,this.maxDataPoints=x.maxDataPoints,this.targets=x.queries,this.configRev++,this.events.publish(new l.pO)}addQuery(x){x=x||{refId:"A"},x.refId=(0,m.Hs)(this.targets),this.targets.push(x),this.configRev++}changeQuery(x,M){x.refId=this.targets[M].refId,this.configRev++,this.targets=this.targets.map((b,R)=>R===M?x:b)}getEditClone(){const x=this.getSaveModel(),M=new C(x);M.isEditing=!0,M.plugin=this.plugin;const b=this.getQueryRunner();return M.getQueryRunner().useLastResultFrom(b),M}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:d.ZP.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new p.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(x){this.transformations=x,this.resendLastResult(),this.configRev++,this.events.publish(new l.Xw)}setProperty(x,M){this[x]=M,this.configRev++,x==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(x,M,b){const R=this.getQueryRunner().getLastRequest(),S=Object.assign({},this.scopedVars,R?.scopedVars,M);return(0,r.J)().replace(x,S,b)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(x){for(const[M,b]of Object.entries(x.model)){switch(M){case"id":case"gridPos":case"libraryPanel":continue}this[M]=b}this.libraryPanel=x}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function a(D){return D&&D.meta.info.version?D.meta.info.version:d.ZP.buildInfo.version}function P(D){const x={};return Object.entries(D).filter(([M,b])=>!g[M]&&D.hasOwnProperty(M)&&!(0,t.isEqual)(b,v[M])).forEach(([M,b])=>{x[M]=b}),(0,o.Xh)(x)}},86977:(Y,T,e)=>{"use strict";e.d(T,{$j:()=>v,Qk:()=>g,RF:()=>p,Yq:()=>y,f4:()=>a,fG:()=>E,lw:()=>h,qm:()=>m,tM:()=>C});var t=e(54899),n=e(659),c=e(60499),s=e(30992),i=e(46732),f=e(54294),u=e(85805),r=e(85803),d=e(19349),o=e(58790);function m(P){return async D=>{const x=await(0,t.i)().get(`/api/dashboards/id/${P}/permissions`);D((0,o.O0)(x))}}function l(P){return{userId:P.userId,teamId:P.teamId,role:P.role,permission:P.permission}}function p(P,D,x){return async(M,b)=>{const{dashboard:R}=b(),S=[];for(const O of R.permissions){if(O.inherited)continue;const U=l(O);D===O&&(U.permission=x),S.push(U)}await(0,t.i)().post(`/api/dashboards/id/${P}/permissions`,{items:S}),await M(m(P))}}function g(P,D){return async(x,M)=>{const b=M().dashboard,R=[];for(const S of b.permissions)S.inherited||S===D||R.push(l(S));await(0,t.i)().post(`/api/dashboards/id/${P}/permissions`,{items:R}),await x(m(P))}}function y(P,D){return async(x,M)=>{const{dashboard:b}=M(),R=[];for(const S of b.permissions)S.inherited||R.push(l(S));R.push({userId:D.userId,teamId:D.teamId,role:D.role,permission:D.permission}),await(0,t.i)().post(`/api/dashboards/id/${P}/permissions`,{items:R}),await x(m(P))}}function v(P,D){return async x=>{await(0,t.i)().post("/api/dashboards/import",P),x((0,n.$l)((0,c.AT)("Dashboard Imported",D))),x((0,u.m3)())}}function E(P){return async D=>{await(0,t.i)().delete(`/api/dashboards/uid/${P}`),D((0,u.m3)())}}const h=()=>(P,D)=>{const M=D().dashboard.getModel();M&&(M.destroy(),P((0,r.wX)(M.uid))),(0,d.$t)().stopAutoRefresh(),P((0,o.sG)()),P((0,i.Vl)()),s.H.leave()},C=P=>D=>{D((0,f.YT)(P)),(0,d.$t)().refreshTimeModel()},a=P=>D=>{D((0,f.zW)(P)),(0,d.$t)().refreshTimeModel()}},86899:(Y,T,e)=>{"use strict";e.d(T,{f:()=>t.f,r:()=>n.rY});var t=e(82302),n=e(96161)},58790:(Y,T,e)=>{"use strict";e.d(T,{Nv:()=>l,O0:()=>r,Rd:()=>y,ZP:()=>E,dS:()=>m,jA:()=>o,sG:()=>p,sf:()=>d,tq:()=>g});var t=e(62992),n=e(30670),c=e(2024),s=e(27876),i=e(82302);const f={initPhase:s.DashboardInitPhase.NotStarted,getModel:()=>null,permissions:[],initError:null,initialDatasource:void 0},u=(0,t.oM)({name:"dashboard",initialState:f,reducers:{loadDashboardPermissions:(h,C)=>{h.permissions=(0,c.A)(C.payload)},dashboardInitFetching:h=>{h.initPhase=s.DashboardInitPhase.Fetching},dashboardInitServices:h=>{h.initPhase=s.DashboardInitPhase.Services},dashboardInitCompleted:(h,C)=>{h.getModel=()=>C.payload,h.initPhase=s.DashboardInitPhase.Completed},dashboardInitFailed:(h,C)=>{h.initPhase=s.DashboardInitPhase.Failed,h.initError=C.payload,h.getModel=()=>new i.f({...n.Ql,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:h=>{h.initPhase=s.DashboardInitPhase.NotStarted,h.initError=null,h.getModel=()=>null},addPanel:(h,C)=>{},setInitialDatasource:(h,C)=>{h.initialDatasource=C.payload}}}),{loadDashboardPermissions:r,dashboardInitFetching:d,dashboardInitFailed:o,dashboardInitCompleted:m,dashboardInitServices:l,cleanUpDashboard:p,addPanel:g,setInitialDatasource:y}=u.actions,E={dashboard:u.reducer}},663:(Y,T,e)=>{"use strict";e.d(T,{Dh:()=>o,LU:()=>u,L_:()=>r,RB:()=>d,uZ:()=>m});var t=e(82897),n=e.n(t),c=e(47694),s=e(84952),i=e(58379),f=e(2476);function u(l,p){const g={type:"timeseries",title:"Panel Title",gridPos:(0,f.lg)(l),datasource:p?{uid:p}:null,isNew:!0};return l.addPanel(g),g.id}function r(l){const p={type:"row",title:"Row title",gridPos:{x:0,y:0}};l.addPanel(p)}function d(l){const p={type:"add-library-panel",gridPos:(0,f.lg)(l)};l.addPanel(p)}function o(l,p){if(!p)return;const g=(0,f.lg)(l),y={type:p.id,title:"Panel Title",gridPos:{x:g.x,y:g.y,w:p.defaults.gridPos.w,h:p.defaults.gridPos.h}};p.defaults&&((0,t.defaults)(y,p.defaults),y.title=p.defaults.title,i.Z.delete(s.zF)),l.addPanel(y)}function m(){const l=(0,t.chain)(c.ZP.panels).filter({hideFromList:!1}).map(g=>g).value(),p=i.Z.get(s.zF);if(p){const g=JSON.parse(p),y=(0,t.find)(l,{id:g.type});if(y){const v=(0,t.cloneDeep)(y);return v.name=g.title,v.sort=-1,{...v,defaults:{...g}}}}}},2476:(Y,T,e)=>{"use strict";e.d(T,{Kq:()=>D,Po:()=>P,W1:()=>R,WJ:()=>h,bY:()=>a,jN:()=>C,lg:()=>U,oe:()=>x,qw:()=>b});var t=e(82897),n=e.n(t),c=e(4063),s=e(47891),i=e(47406),f=e(20308),u=e(18271),r=e(47694),d=e(84952),o=e(58379),m=e(53818),l=e(96161),p=e(76647),g=e(81283),y=e(32294),v=e(3153),E=e(45984);const h=(I,F,w)=>{if(w!==!1){const K=F.alert&&!r.ZP.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,L=F.alert?"YES":void 0;u.Z.publish(new E.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:K,icon:"trash-alt",confirmText:L,yesText:"Remove",onConfirm:()=>h(I,F,!1)}));return}I.removePanel(F),(0,v.WI)((0,y.qj)(F.key))},C=(I,F)=>{I.duplicatePanel(F)},a=I=>{let F=I;I instanceof l.rY&&(F=I.getSaveModel()),o.Z.set(d.zF,JSON.stringify(F)),u.Z.emit(c.SI.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},P=(I,F)=>{u.Z.publish(new E.Dn({component:m.ShareModal,props:{dashboard:I,panel:F}}))},D=(I,F)=>{u.Z.publish(new E.Dn({component:p.c,props:{panel:F,initialFolderUid:I.meta.folderUid,isOpen:!0}}))},x=I=>{u.Z.publish(new E.Dn({component:g.i,props:{onConfirm:()=>I.unlinkLibraryPanel(),isOpen:!0}}))},M=I=>{I.refresh()},b=I=>{const F={...I.options};F.legend.showLegend===!0?F.legend.showLegend=!1:F.legend.showLegend=!0,I.updateOptions(F)};function R(I,F){const w={timeInfo:"",timeRange:F};if(I.timeFrom){const K=(0,f.J)().replace(I.timeFrom,I.scopedVars),L=s.describeTextRange(K);if(L.invalid)return w.timeInfo="invalid time override",w;if((0,t.isString)(F.raw.from)){const V=i.parse(L.from);w.timeInfo=L.display,w.timeRange={from:V,to:i.parse(L.to),raw:{from:L.from,to:L.to}}}}if(I.timeShift){const K=(0,f.J)().replace(I.timeShift,I.scopedVars);if(s.describeTextRange(K).invalid)return w.timeInfo="invalid timeshift",w;const V="-"+K;w.timeInfo+=" timeshift "+V;const H=i.parseDateMath(V,w.timeRange.from,!1),j=i.parseDateMath(V,w.timeRange.to,!0);w.timeRange={from:H,to:j,raw:{from:H,to:j}}}return I.hideTimeOverride&&(w.timeInfo=""),w}function S(I){const w=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return I.maxDataPoints?I.maxDataPoints:Math.ceil(w*(I.gridPos.w/24))}function O(I,F){const w=I.plugin&&I.plugin.noPadding?0:config.theme.panelPadding*2,K=I.hasTitle()?config.theme.panelHeaderHeight:0;return F-K-w-PANEL_BORDER}function U(I){for(const w of I.panelIterator())w.gridPos.y+=8;return{x:0,y:0,w:12,h:8}}},74124:(Y,T,e)=>{"use strict";e.d(T,{O:()=>c});var t=e(67483),n=e(47406);const c=(s,i)=>{const f={from:(0,t.v9)(s.from)?(0,t.CQ)(s.from):s.from,to:(0,t.v9)(s.to)?(0,t.CQ)(s.to):s.to},u=i?i.getTimezone():void 0;return{from:n.parse(f.from,!1,u,i?.fiscalYearStartMonth),to:n.parse(f.to,!0,u,i?.fiscalYearStartMonth),raw:f}}},3597:(Y,T,e)=>{"use strict";e.d(T,{n:()=>t});const t={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},41632:(Y,T,e)=>{"use strict";e.d(T,{Aq:()=>D,BX:()=>p,CT:()=>C,Ht:()=>l,MP:()=>i,Nu:()=>y,Ww:()=>r,ZP:()=>M,be:()=>f,fk:()=>E,iZ:()=>h,jS:()=>u,j_:()=>a,ng:()=>P,rl:()=>s,wZ:()=>d,yr:()=>g,zT:()=>o});var t=e(62992),n=e(89974);const c={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:n.l.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},s=(0,t.PH)("dataSources/dataSourceLoaded"),i=(0,t.PH)("dataSources/dataSourcesLoad"),f=(0,t.PH)("dataSources/dataSourcesLoaded"),u=(0,t.PH)("dataSources/dataSourceMetaLoaded"),r=(0,t.PH)("dataSources/dataSourcePluginsLoad"),d=(0,t.PH)("dataSources/dataSourcePluginsLoaded"),o=(0,t.PH)("dataSources/setDataSourcesSearchQuery"),m=(0,t.PH)("dataSources/setDataSourcesLayoutMode"),l=(0,t.PH)("dataSources/setDataSourceTypeSearchQuery"),p=(0,t.PH)("dataSources/setDataSourceName"),g=(0,t.PH)("dataSources/setIsDefault"),y=(0,t.PH)("dataSources/setIsSortAscending"),v=(b=c,R)=>i.match(R)?{...b,isLoadingDataSources:!0}:f.match(R)?{...b,isLoadingDataSources:!1,dataSources:R.payload,dataSourcesCount:R.payload.length}:s.match(R)?{...b,dataSource:R.payload}:o.match(R)?{...b,searchQuery:R.payload}:m.match(R)?{...b,layoutMode:R.payload}:r.match(R)?{...b,plugins:[],isLoadingDataSourcePlugins:!0}:d.match(R)?{...b,plugins:R.payload.plugins,categories:R.payload.categories,isLoadingDataSourcePlugins:!1}:l.match(R)?{...b,dataSourceTypeSearchQuery:R.payload}:u.match(R)?{...b,dataSourceMeta:R.payload}:p.match(R)?{...b,dataSource:{...b.dataSource,name:R.payload}}:g.match(R)?{...b,dataSource:{...b.dataSource,isDefault:R.payload}}:y.match(R)?{...b,isSortAscending:R.payload}:b,E={testingStatus:{},loadError:null,loading:!0,plugin:null},h=(0,t.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),C=(0,t.PH)("dataSourceSettings/initDataSourceSettingsFailed"),a=(0,t.PH)("dataSourceSettings/testDataSourceStarting"),P=(0,t.PH)("dataSourceSettings/testDataSourceSucceeded"),D=(0,t.PH)("dataSourceSettings/testDataSourceFailed"),M={dataSources:v,dataSourceSettings:(b=E,R)=>h.match(R)?{...b,plugin:R.payload,loadError:null,loading:!1}:C.match(R)?{...b,plugin:null,loadError:R.payload.message,loading:!1}:a.match(R)?{...b,testingStatus:{message:"Testing... this could take up to a couple of minutes",status:"info"}}:P.match(R)?{...b,testingStatus:{status:R.payload?.status,message:R.payload?.message,details:R.payload?.details}}:D.match(R)?{...b,testingStatus:{status:"error",message:R.payload?.message,details:R.payload?.details}}:b}},97934:()=>{"use strict"},30785:(Y,T,e)=>{"use strict";e.d(T,{L:()=>r});var t=e(9892),n=e(66111),c=e(72648),s=e(8581),i=e(90208),f=e(80760);const u={label:"Fixed color",value:"_____fixed_____"},r=o=>{const{value:m,context:l,onChange:p}=o,g="dark-green",y=(0,c.wW)(d),v=m?.field,E=Boolean(!v),h=(0,f.IX)(l.data),C=(0,f.nw)(h,v,u),a=(0,n.useCallback)(x=>{const M=x.value;if(M&&M!==u.value)p({...m,field:M});else{const b=m?.fixed??g;p({...m,field:void 0,fixed:b})}},[p,m]),P=(0,n.useCallback)(x=>{p({field:void 0,fixed:x??g})},[p]),D=E?u:C.find(x=>x.value===v);return n.createElement(n.Fragment,null,n.createElement("div",{className:y.container},n.createElement(s.Ph,{value:D,options:C,onChange:a,noOptionsMessage:"No fields found"}),E&&n.createElement("div",{className:y.picker},n.createElement(i.zH,{color:m?.fixed??g,onChange:P,enableNamedColors:!0}))))},d=o=>({container:t.css`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:t.css`
    padding-left: 8px;
  `})},26786:(Y,T,e)=>{"use strict";e.d(T,{E:()=>y});var t=e(9892),n=e(66111),c=e(72648),s=e(31403),i=e(11543),f=e(81764),u=e(46967),r=e(39604),d=e(56921),o=e(66120),m=e(16964),l=e(59961),p=e(92484),g=e(26260);const y=E=>{const{value:h,src:C,name:a,placeholder:P,onChange:D,onClear:x,mediaType:M,folderName:b,size:R,color:S}=E,O=(0,c.wW)(v),U=(0,c.l4)(),I=(0,n.createRef)(),F=n.createElement(g.Y,{onChange:D,value:h,mediaType:M,folderName:b});let w=C;!w&&h&&(w=(0,l.t)(h));const K=S&&{fill:U.visualization.getColorByName(S)},L=()=>h&&w?n.createElement(m.V,{src:w,className:O.icon,style:{...K}}):n.createElement(s.Qj,{variant:"primary",fill:"text",size:"sm"},"Set icon"),V=()=>n.createElement(i.Z,null,n.createElement(f._,{label:null,grow:!0},n.createElement(u.I,{value:a,placeholder:P,readOnly:!0,prefix:w&&n.createElement(m.V,{src:w,className:O.icon,style:{...K}}),suffix:n.createElement(s.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:x})})));return n.createElement(r.D,{content:F},(H,j,A)=>n.createElement(n.Fragment,null,I.current&&n.createElement(d.J,{...A,referenceElement:I.current,onMouseEnter:H,onKeyDown:_=>{(0,o.i)(_,j)}}),n.createElement("div",{ref:I,onClick:H,className:O.pointer},R===p.zc.SMALL&&L(),R===p.zc.NORMAL&&V())))},v=E=>({pointer:t.css`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:t.css`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},26260:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>V});var t=e(9892),n=e(29952),c=e(83962),s=e(86922),i=e(66111),f=e(54899),u=e(72648),r=e(31403),d=e(47694),o=e(92484),m=e(24799),l=e(30784),p=e(16964);function g({secondaryText:j="Drag and drop here or browse"}){const A=(0,u.wW)(v);return i.createElement("div",{className:A.iconWrapper},i.createElement("small",{className:A.small},j),i.createElement(r.zx,{type:"button",icon:"upload"},"Upload"))}const y=({mediaType:j,setFormData:A,setUpload:_,error:k})=>{const Q=(0,u.wW)(v),[re,Z]=(0,i.useState)(!1),[oe,G]=(0,i.useState)(""),le=()=>i.createElement(m.g,{label:"Preview"},i.createElement("div",{className:Q.iconPreview},j===o.DD.Icon&&i.createElement(p.V,{src:oe,className:Q.img}),j===o.DD.Image&&i.createElement("img",{src:oe,alt:"Preview of the uploaded file",className:Q.img}))),ge=ue=>{fetch(`/api/storage/delete/upload/${ue.file.name}`,{method:"DELETE"}).catch(te=>console.error("cannot delete file",te))},ne=j==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return i.createElement(l.Yo,{readAs:"readAsBinaryString",onFileRemove:ge,options:{accept:ne,multiple:!1,onDrop:ue=>{let te=new FormData;te.append("file",ue[0]),G(URL.createObjectURL(ue[0])),Z(!0),A(te),_(!0)}}},k.message!==""&&re?i.createElement("p",null,k.message):re?i.createElement(le,null):i.createElement(g,null))};function v(j,A){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:t.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${j.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${j.colors.border.medium};
      background-color: ${A?j.colors.background.secondary:j.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:t.css`
      margin: ${j.spacing(2,0,1)};
    `,small:t.css`
      color: ${j.colors.text.secondary};
      margin-bottom: ${j.spacing(2)};
    `,iconContainer:t.css`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:t.css`
      width: 238px;
      height: 198px;
      border: 1px solid ${j.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:t.css`
      width: 147px;
      height: 147px;
      fill: ${j.colors.text.primary};
    `}}var E=e(8581),h=e(14747),C=e(91162),a=e(89050),P=e(32436),D=e(7804);const x=(0,i.memo)(function(A){const{columnIndex:_,rowIndex:k,style:Q,data:re}=A,{cards:Z,columnCount:oe,onChange:G,selected:le}=re,ge=_+k*oe,ne=Z[ge],ue=(0,u.l4)(),te=M(ue);return i.createElement("div",{style:Q},ne&&i.createElement("div",{key:ne.value,className:le===ne.value?(0,t.cx)(te.card,te.selected):te.card,onClick:()=>G(ne.value)},ne.imgUrl.endsWith(".svg")?i.createElement(p.V,{src:ne.imgUrl,className:te.img}):i.createElement("img",{src:ne.imgUrl,alt:"",className:te.img}),i.createElement("h6",{className:te.text},ne.label.slice(0,-4))))},P.wy),M=(0,D.B)(j=>({card:t.css`
      display: inline-block;
      width: 90px;
      height: 90px;
      margin: 0.75rem;
      margin-left: 15px;
      text-align: center;
      cursor: pointer;
      position: relative;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: 8px;
      padding-top: 6px;
      :hover {
        border-color: ${j.colors.action.hover};
        box-shadow: ${j.shadows.z2};
      }
    `,selected:t.css`
      border: 2px solid ${j.colors.primary.main};
      :hover {
        border-color: ${j.colors.primary.main};
      }
    `,img:t.css`
      width: 40px;
      height: 40px;
      object-fit: cover;
      vertical-align: middle;
      fill: ${j.colors.text.primary};
    `,text:t.css`
      color: ${j.colors.text.primary};
      white-space: nowrap;
      font-size: 12px;
      text-overflow: ellipsis;
      display: block;
      overflow: hidden;
    `,grid:t.css`
      border: 1px solid ${j.colors.border.medium};
    `})),b=j=>{const{onChange:A,cards:_,value:k}=j,Q=(0,u.l4)(),re=M(Q);return i.createElement(a.Z,{defaultWidth:680},({width:Z,height:oe})=>{const ge=Math.floor(Z/90),ne=Math.ceil(_.length/ge);return i.createElement(P.Ym,{width:Z,height:oe,columnCount:ge,columnWidth:90,rowCount:ne,rowHeight:90,itemData:{cards:_,columnCount:ge,onChange:A,selected:k},className:re.grid},x)})},R=j=>j===o.DD.Icon?[o.QS.Icon,o.QS.IOT,o.QS.Marker]:[o.QS.BG],S=(j,A)=>j.find(_=>A.startsWith(_.value))??j[0],O=j=>{const{value:A,mediaType:_,folderName:k,newValue:Q,setNewValue:re}=j,Z=(0,u.wW)(U),oe=R(_).map(ae=>({label:ae,value:ae})),[G,le]=(0,i.useState)(),[ge,ne]=(0,i.useState)(S(oe,A?.length?A:k)),[ue,te]=(0,i.useState)([]),[me,q]=(0,i.useState)([]),se=ae=>{ae?(ae=ae.toLowerCase(),q(ue.filter(pe=>pe.search.includes(ae)))):q(ue)};return(0,i.useEffect)(()=>{const ae=ge?.value;if(ae){const pe=_===o.DD.Icon?de=>de.name.endsWith(".svg"):de=>de.name.endsWith(".png")||de.name.endsWith(".gif");(0,C.ak)().get("-- Grafana --").then(de=>{de.listFiles(ae).subscribe({next:Me=>{const Ke=[];Me.forEach(st=>{if(pe(st)){const Ie=st.name.lastIndexOf(".");Ke.push({value:`${ae}/${st.name}`,label:st.name,search:(Ie?st.name.substring(0,Ie):st.name).toLowerCase(),imgUrl:`public/${ae}/${st.name}`})}}),te(Ke),q(Ke)}})})}},[_,ge]),i.createElement(i.Fragment,null,i.createElement(m.g,null,i.createElement(E.Ph,{options:oe,onChange:ne,value:ge,menuShouldPortal:!1})),i.createElement(m.g,null,i.createElement(h.H,{value:G??"",placeholder:"Search",onChange:ae=>{se(ae),le(ae)}})),me&&i.createElement("div",{className:Z.cardsWrapper},i.createElement(b,{cards:me,onChange:ae=>re(ae),value:Q})))},U=j=>({cardsWrapper:t.css`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var I=e(46967),F=e(64353),w=e(59961);const K=j=>{const{newValue:A,setNewValue:_,mediaType:k}=j,Q=(0,u.wW)(L),re=(0,w.t)(A);let Z=A?.substring(A.lastIndexOf("/")+1,A.lastIndexOf("."));return Z.length>20&&(Z=Z.substring(0,20)+"..."),i.createElement(i.Fragment,null,i.createElement(m.g,null,i.createElement(I.I,{onChange:oe=>_(oe.currentTarget.value),value:A})),i.createElement("div",{className:Q.iconContainer},i.createElement(m.g,{label:"Preview"},i.createElement("div",{className:Q.iconPreview},k===o.DD.Icon&&i.createElement(p.V,{src:re,className:Q.img}),k===o.DD.Image&&A&&i.createElement("img",{src:re,alt:"Preview of the selected URL",className:Q.img}))),i.createElement(F._,null,Z)))},L=j=>({iconContainer:t.css`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:t.css`
    width: 238px;
    height: 198px;
    border: 1px solid ${j.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:t.css`
    width: 147px;
    height: 147px;
    fill: ${j.colors.text.primary};
  `}),V=j=>{const{value:A,onChange:_,mediaType:k,folderName:Q}=j,re=(0,u.wW)(H),Z=()=>{_(A)},oe=(0,i.createRef)(),{dialogProps:G}=(0,n.R)({},oe),{overlayProps:le}=(0,s.Ir)({onClose:Z,isDismissable:!0,isOpen:!0},oe),ge=A&&A.includes("://"),[ne,ue]=(0,i.useState)(A??""),[te,me]=(0,i.useState)(ge?o.hQ.URL:o.hQ.Folder),[q,se]=(0,i.useState)(new FormData),[ae,pe]=(0,i.useState)(!1),[de,Me]=(0,i.useState)({message:""}),Ke=tt=>`${re.resourcePickerPopoverTab} ${te===tt&&re.resourcePickerPopoverActiveTab}`,st=()=>i.createElement(O,{value:A,mediaType:k,folderName:Q,newValue:ne,setNewValue:ue}),Ie=()=>i.createElement(K,{newValue:ne,setNewValue:ue,mediaType:k}),Ve=()=>i.createElement(y,{mediaType:k,setFormData:se,setUpload:pe,newValue:ne,error:de}),_e=()=>{switch(te){case o.hQ.Folder:return st();case o.hQ.URL:return Ie();case o.hQ.Upload:return Ve();default:return st()}};return i.createElement(c.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("section",{ref:oe,...le,...G},i.createElement("div",{className:re.resourcePickerPopover},i.createElement("div",{className:re.resourcePickerPopoverTabs},i.createElement("button",{className:Ke(o.hQ.Folder),onClick:()=>me(o.hQ.Folder)},"Folder"),i.createElement("button",{className:Ke(o.hQ.URL),onClick:()=>me(o.hQ.URL)},"URL")),i.createElement("div",{className:re.resourcePickerPopoverContent},_e(),i.createElement("div",{className:re.buttonRow},i.createElement(r.zx,{variant:"secondary",onClick:()=>Z(),fill:"outline"},"Cancel"),i.createElement(r.zx,{variant:ne&&ne!==A?"primary":"secondary",onClick:()=>{ae?fetch("/api/storage/upload",{method:"POST",body:q}).then(tt=>{if(tt.status>=400){tt.json().then(dt=>Me(dt));return}else return tt.json()}).then(tt=>{(0,f.i)().get(`api/storage/read/${tt.path}`).then(()=>ue(`${d.vc.appUrl}api/storage/read/${tt.path}`)).then(()=>_(`${d.vc.appUrl}api/storage/read/${tt.path}`))}).catch(tt=>console.error(tt)):_(ne)}},"Select"))))))},H=j=>({resourcePickerPopover:t.css`
    border-radius: ${j.shape.borderRadius()};
    box-shadow: ${j.shadows.z3};
    background: ${j.colors.background.primary};
    border: 1px solid ${j.colors.border.weak};
  `,resourcePickerPopoverTab:t.css`
    width: 50%;
    text-align: center;
    padding: ${j.spacing(1,0)};
    background: ${j.colors.background.secondary};
    color: ${j.colors.text.secondary};
    font-size: ${j.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:t.css`
    color: ${j.colors.text.primary};
    font-weight: ${j.typography.fontWeightMedium};
    background: ${j.colors.background.primary};
  `,resourcePickerPopoverContent:t.css`
    width: 315px;
    font-size: ${j.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${j.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:t.css`
    display: flex;
    width: 100%;
    border-radius: ${j.shape.borderRadius()} ${j.shape.borderRadius()} 0 0;
  `,buttonRow:(0,t.css)({display:"flex",justifyContent:"center",gap:j.spacing(2),padding:j.spacing(1)})})},38647:(Y,T,e)=>{"use strict";e.d(T,{$:()=>l});var t=e(66111),n=e(40538),c=e(11543),s=e(81764),i=e(2594),f=e(31403),u=e(15448),r=e(37565);const d=[{label:"Fixed",value:n.xy.Fixed,description:"Fixed value"},{label:"Field",value:n.xy.Field,description:"Display field value"}],o={settings:{}},m={settings:{}},l=({value:p,context:g,onChange:y})=>{const E=(0,t.useCallback)(D=>{y({...p,mode:D})},[y,p]),h=(0,t.useCallback)(D=>{y({...p,field:D})},[y,p]),C=(0,t.useCallback)((D="")=>{y({...p,fixed:D})},[y,p]),a=()=>{C("")},P=p?.mode??n.xy.Fixed;return t.createElement(t.Fragment,null,t.createElement(c.Z,null,t.createElement(s._,{label:"Source",labelWidth:9,grow:!0},t.createElement(i.S,{value:P,options:d,onChange:E,fullWidth:!0}))),P!==n.xy.Fixed&&t.createElement(c.Z,null,t.createElement(s._,{label:"Field",labelWidth:9,grow:!0},t.createElement(u.b,{context:g,value:p.field??"",onChange:h,item:o}))),P===n.xy.Fixed&&t.createElement(c.Z,{key:p?.fixed},t.createElement(s._,{label:"Value",labelWidth:9,grow:!0},t.createElement(r.A,{context:g,value:p?.fixed,onChange:C,item:m,suffix:p?.fixed&&t.createElement(f.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:a})}))),P===n.xy.Template&&t.createElement(c.Z,null,t.createElement(s._,{label:"Template",labelWidth:9,grow:!0},t.createElement(r.A,{context:g,value:p?.fixed,onChange:C,item:m}))))}},54643:(Y,T,e)=>{"use strict";e.d(T,{Lm:()=>t.L,Lv:()=>y,k9:()=>U,cL:()=>M,$2:()=>F.$});var t=e(30785),n=e(66111);const c=({value:w,onChange:K})=>{const[L,V]=useState(w?[{value:w,label:w}]:[]),[H,j]=useState(),A=window.__grafana_public_path__+"img/icons/unicons/",_=k=>{K(k),j(k)};return useEffect(()=>{getBackendSrv().get(`${A}/index.json`).then(k=>{V(k.files.map(Q=>({value:Q,label:Q})))})},[A]),React.createElement(Select,{options:L,value:H,onChange:k=>{_(k.value)}})},s=null;var i=e(40538),f=e(11543),u=e(81764),r=e(2594),d=e(15448),o=e(25532),m=e(92484),l=e(26786);const p=[{label:"Fixed",value:i.Q8.Fixed,description:"Fixed value"},{label:"Field",value:i.Q8.Field,description:"Use a string field result"}],g={settings:{}},y=w=>{const{value:K,context:L,onChange:V,item:H}=w,j=9,A=(0,n.useCallback)(ge=>{V({...K,mode:ge})},[V,K]),_=(0,n.useCallback)((ge="")=>{V({...K,field:ge})},[V,K]),k=(0,n.useCallback)(ge=>{V({...K,fixed:ge??""})},[V,K]),Q=ge=>{ge.stopPropagation(),V({mode:i.Q8.Fixed,fixed:"",field:""})},re=K?.mode??i.Q8.Fixed,Z=H.settings?.showSourceRadio??!0,oe=H.settings?.resourceType??m.DD.Icon,G=H.settings?.folderName??o.ResourceFolderName.Icon;let le="";return oe===m.DD.Icon&&(K?.fixed?le=(0,o.getPublicOrAbsoluteUrl)(K.fixed):H.settings?.placeholderValue&&(le=(0,o.getPublicOrAbsoluteUrl)(H.settings.placeholderValue))),n.createElement(n.Fragment,null,Z&&n.createElement(f.Z,null,n.createElement(u._,{label:"Source",labelWidth:j,grow:!0},n.createElement(r.S,{value:re,options:p,onChange:A,fullWidth:!0}))),re!==i.Q8.Fixed&&n.createElement(f.Z,null,n.createElement(u._,{label:"Field",labelWidth:j,grow:!0},n.createElement(d.b,{context:L,value:K.field??"",onChange:_,item:g}))),re===i.Q8.Fixed&&n.createElement(l.E,{onChange:k,onClear:Q,value:K?.fixed,src:le,placeholder:H.settings?.placeholderText??"Select a value",name:v(K?.fixed)??"",mediaType:oe,folderName:G,size:m.zc.NORMAL}),re===i.Q8.Mapping&&n.createElement(f.Z,null,n.createElement(u._,{label:"Mappings",labelWidth:j,grow:!0},n.createElement("div",null,"TODO mappings editor!"))))};function v(w){if(!w)return;const K=w.lastIndexOf("/");return K>0?w.substring(K+1):w}var E=e(9892),h=e(72648),C=e(8581),a=e(80760),P=e(45458),D=e(33048);const x={label:"Fixed value",value:"_____fixed_____"},M=w=>{const{value:K,context:L,onChange:V,item:H}=w,{settings:j}=H,A=(0,h.wW)(b),_=K?.field,k=Boolean(!_),Q=(0,a.IX)(L.data),re=(0,a.nw)(Q,_,x),Z=(0,n.useMemo)(()=>(0,D.x5)(j),[j]),oe=(0,n.useCallback)(me=>{V((0,D.C)(me,Z))},[V,Z]),G=(0,n.useCallback)(me=>{const q=me.value;q&&q!==x.value?oe({...K,field:q}):oe({...K,field:void 0})},[oe,K]),le=(0,n.useCallback)(me=>{me!==void 0&&oe({...K,min:me})},[oe,K]),ge=(0,n.useCallback)(me=>{me!==void 0&&oe({...K,max:me})},[oe,K]),ne=(0,n.useCallback)(me=>{me!==void 0&&oe({...K,fixed:me})},[oe,K]),ue=K??{},te=k?x:re.find(me=>me.value===_);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(C.Ph,{value:te,options:re,onChange:G,noOptionsMessage:"No fields found"})),n.createElement("div",{className:A.range},k&&n.createElement(f.Z,null,n.createElement(u._,{label:"Value",labelWidth:8,grow:!0},n.createElement(P.Y,{value:ue.fixed,...Z,onChange:ne}))),!k&&!Z.hideRange&&n.createElement(n.Fragment,null,n.createElement(f.Z,null,n.createElement(u._,{label:"Min",labelWidth:8,grow:!0},n.createElement(P.Y,{value:ue.min,...Z,onChange:le}))),n.createElement(f.Z,null,n.createElement(u._,{label:"Max",labelWidth:8,grow:!0},n.createElement(P.Y,{value:ue.max,...Z,onChange:ge}))))))},b=w=>({range:E.css`
    padding-top: 8px;
  `});var R=e(99098);const S={label:"Fixed value",value:"_____fixed_____"},O=[{label:"Mod",value:i.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:i.eK.Clamped,description:"Use field values, clamped to max and min"}],U=({value:w,context:K,onChange:L,item:V})=>{const{settings:H}=V,j=0,A=w?.field,_=Boolean(!A),k=(0,a.IX)(K.data),Q=(0,a.nw)(k,A,S,R.fS.number),re=(0,h.wW)(I),Z=(0,n.useCallback)(ue=>{const te=ue.value;if(te&&te!==S.value)L({...w,field:te});else{const me=w.fixed??j;L({...w,field:void 0,fixed:me})}},[L,w]),oe=(0,n.useCallback)(ue=>{L({...w,mode:ue})},[L,w]),G=(0,n.useCallback)(ue=>{L({...w,field:void 0,fixed:ue??j})},[L,w]),le=w??{},ge=w?.mode??i.eK.Mod,ne=_?S:Q.find(ue=>ue.value===A);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(f.Z,null,n.createElement(u._,{label:"Limit",labelWidth:8,grow:!0},n.createElement(r.S,{value:ge,options:O,onChange:oe,fullWidth:!0}))),n.createElement(C.Ph,{value:ne,options:Q,onChange:Z,noOptionsMessage:"No fields found"})),n.createElement("div",{className:re.range},_&&n.createElement(f.Z,null,n.createElement(u._,{label:"Value",labelWidth:8,grow:!0},n.createElement(P.Y,{value:le?.fixed??j,onChange:G,max:H?.max,min:H?.min})))))},I=w=>({range:E.css`
    padding-top: 8px;
  `});var F=e(38647)},25532:(Y,T,e)=>{"use strict";e.d(T,{MediaType:()=>t.DD,ResourceFolderName:()=>t.QS,findField:()=>i.PI,findFieldIndex:()=>i.rj,getColorDimension:()=>f,getColorDimensionFromData:()=>i.FP,getPublicOrAbsoluteUrl:()=>g.t,getResourceDimension:()=>g.I,getResourceDimensionFromData:()=>i.Qz,getScalarDimension:()=>v.y,getScalarDimensionFromData:()=>i.z2,getScaleDimensionFromData:()=>i.pb,getScaledDimension:()=>r.W8,getScaledDimensionForField:()=>r.A,getTextDimension:()=>l,getTextDimensionFromData:()=>i.WO});var t=e(92484),n=e(72990),c=e(99601),s=e(6194),i=e(20927);function f(E,h,C){return u((0,i.PI)(E,h.field),h,C)}function u(E,h,C){if(!E){const D=C.visualization.getColorByName(h.fixed??"grey");return{isAssumed:Boolean(h.field?.length)||!h.fixed,fixed:D,value:()=>D,get:x=>D}}const a=(0,n.fD)(E);if(a.isByValue||E.config.mappings?.length){const D=(0,c.xD)(E,!0);D!==E.config&&(E={...E,config:D},E.state=void 0);const x=(0,s.U_)({field:E,theme:C}),M=b=>x(b).color??"#ccc";return{field:E,get:b=>M(E.values[b]),value:()=>M((0,i.cR)(E))}}const P=a.getCalculator(E,C)(0,0);return{fixed:P,value:()=>P,get:D=>P,field:E}}var r=e(33048),d=e(99098),o=e(2703),m=e(40538);function l(E,h){const C=h.field?(0,i.PI)(E,h.field):E?.fields.find(a=>a.type===d.fS.string);return p(C,h)}function p(E,h){let C=h.fixed;const a=h.mode??m.xy.Fixed;if(a===m.xy.Fixed)return{isAssumed:!Boolean(C),fixed:C,value:()=>C,get:D=>C};if(a===m.xy.Template){const D=x=>`TEMPLATE[${h.fixed} // ${x}]`;return E?{field:E,get:x=>D(E.values[x]),value:()=>D((0,i.cR)(E))}:(C=D(""),{isAssumed:!0,fixed:C,value:()=>C,get:x=>C})}if(!E)return{isAssumed:!0,fixed:C,value:()=>C,get:D=>C};let P=D=>(0,o.zc)(E.display(D));return{field:E,get:D=>P(E.values[D]),value:()=>P((0,i.cR)(E))}}var g=e(59961),y=e(97934),v=e(86682)},59961:(Y,T,e)=>{"use strict";e.d(T,{I:()=>s,t:()=>c});var t=e(40538),n=e(20927);function c(i){return i?i.indexOf(":/")>0?i:window.__grafana_public_path__+i:""}function s(i,f){const u=f.mode??t.Q8.Fixed;if(u===t.Q8.Fixed){const o=c(f.fixed);return{isAssumed:!Boolean(o),fixed:o,value:()=>o,get:m=>o}}const r=(0,n.PI)(i,f.field);if(!r){const o="";return{isAssumed:!0,fixed:o,value:()=>o,get:m=>o}}if(u===t.Q8.Mapping){const o=m=>c(`${m}`);return{field:r,get:m=>o(r.values[m]),value:()=>o((0,n.cR)(r))}}const d=o=>{if(r&&r.display){const m=r.display(o).icon;return c(m??"")}return""};return{field:r,get:o=>d(r.values[o]),value:()=>d((0,n.cR)(r))}}},86682:(Y,T,e)=>{"use strict";e.d(T,{y:()=>c});var t=e(40538),n=e(20927);function c(i,f){return s((0,n.PI)(i,f?.field),f)}function s(i,f){if(!i){const d=f.fixed??0;return{isAssumed:Boolean(f.field?.length)||!f.fixed,fixed:d,value:()=>d,get:()=>d}}let u=d=>d%f.max;return f.mode===t.eK.Clamped&&(u=d=>d<f.min?f.min:d>f.max?f.max:d),{field:i,get:d=>{const o=i.values[d];return o===null||typeof o!="number"?0:u(o)},value:()=>(0,n.cR)(i)}}},33048:(Y,T,e)=>{"use strict";e.d(T,{A:()=>i,C:()=>u,W8:()=>s,x5:()=>f});var t=e(99601),n=e(40538),c=e(20927);function s(r,d){return i((0,c.PI)(r,d?.field),d)}function i(r,d,o){if(!r){const v=d.fixed??0;return{isAssumed:Boolean(d.field?.length)||!d.fixed,fixed:v,value:()=>v,get:()=>v}}const m=(0,t.dz)(r),l=d.max-d.min;if(r.values.length<1||l<=0||m.delta<=0)return{fixed:d.min,value:()=>d.min,get:()=>d.min};let g=v=>d.min+v*l;if(o===n.B5.Quad){const v=Math.PI*(d.max/2)**2,E=Math.PI*(d.min/2)**2,h=v-E;g=C=>{let a=E+h*C;return Math.sqrt(a/Math.PI)*2}}const y=v=>{const E=r.values[v];let h=0;return E!==-1/0&&(h=(E-m.min)/m.delta),h>1?h=1:h<0&&(h=0),g(h)};return{get:y,value:()=>y((0,c.cR)(r)),field:r}}function f(r){return r||(r={min:0,max:1}),r.min==null&&(r.min=0),r.max==null&&(r.max=1),r}function u(r,d){let{min:o,max:m}=f(d);if(r||(r={}),r.max==null&&(r.max=m),r.min==null&&(r.min=o),r.min>r.max){const l=r.max;r.max=r.min,r.min=l}return r.min<o&&(r.min=o),r.max>m&&(r.max=m),r.fixed==null&&(r.fixed=r.min+(r.max-r.min)/2),r.field||(r.fixed>m?r.fixed=m:r.fixed<o&&(r.fixed=o)),r}},92484:(Y,T,e)=>{"use strict";e.d(T,{DD:()=>s,QS:()=>c,hQ:()=>i,qj:()=>n,zc:()=>f});var t=e(40538);const n=Object.freeze({fixed:"",mode:t.xy.Field,field:""});var c=(u=>(u.Icon="img/icons/unicons",u.IOT="img/icons/iot",u.Marker="img/icons/marker",u.BG="img/bg",u))(c||{}),s=(u=>(u.Icon="icon",u.Image="image",u))(s||{}),i=(u=>(u.Folder="folder",u.URL="url",u.Upload="upload",u))(i||{}),f=(u=>(u.SMALL="small",u.NORMAL="normal",u))(f||{})},20927:(Y,T,e)=>{"use strict";e.d(T,{FP:()=>f,PI:()=>m,Qz:()=>d,WO:()=>o,cR:()=>p,pb:()=>u,rj:()=>l,z2:()=>r});var t=e(30471),n=e(33750),c=e(35645),s=e(25532),i=e(86682);function f(g,y){if(g?.series&&y.field)for(const v of g.series){const E=(0,s.getColorDimension)(v,y,c.v.theme2);if(!E.isAssumed||g.series.length===1)return E}return(0,s.getColorDimension)(void 0,y,c.v.theme2)}function u(g,y){if(g?.series&&y.field)for(const v of g.series){const E=(0,s.getScaledDimension)(v,y);if(!E.isAssumed||g.series.length===1)return E}return(0,s.getScaledDimension)(void 0,y)}function r(g,y){if(g?.series&&y.field)for(const v of g.series){const E=(0,i.y)(v,y);if(!E.isAssumed||g.series.length===1)return E}return(0,i.y)(void 0,y)}function d(g,y){if(g?.series&&y.field)for(const v of g.series){const E=(0,s.getResourceDimension)(v,y);if(!E.isAssumed||g.series.length===1)return E}return(0,s.getResourceDimension)(void 0,y)}function o(g,y){if(g?.series&&y.field)for(const v of g.series){const E=(0,s.getTextDimension)(v,y);if(!E.isAssumed||g.series.length===1)return E}return(0,s.getTextDimension)(void 0,y)}function m(g,y){const v=l(g,y);return v==null?void 0:g.fields[v]}function l(g,y){if(!(!g||!y?.length))for(let v=0;v<g.fields.length;v++){const E=g.fields[v];if(y===E.name)return v;const h=(0,t.CZ)(E,g);if(y===h)return v}}function p(g){const y=g.state?.calcs;if(y){const h=y[n.gz.lastNotNull];if(h!=null)return h}const v=g.values;let E=v.length-1;for(;E>=0;){const h=v[E--];if(h!=null)return h}}},64563:(Y,T,e)=>{"use strict";e.d(T,{y:()=>R});var t=e(9892),n=e(82897),c=e(66111),s=e(67483),i=e(59472),f=e(53768),u=e(76095),r=e(30471),d=e(56632),o=e(98825),m=e(40538),l=e(72648),p=e(60325),g=e(39904),y=e(31403),v=e(56703),E=e(91551),h=e(39493);function C(O,U,I){return(0,h.ZP)(O,F=>{F.defaults.custom===void 0&&(F.defaults.custom={}),F.defaults.max=I;const{custom:w}=F.defaults;switch(w.stacking===void 0&&(w.stacking={group:"A"}),U){case"lines":w.drawStyle=m.l8.Line,w.stacking.mode=m.o0.None,w.fillOpacity=0;break;case"bars":w.drawStyle=m.l8.Bars,w.stacking.mode=m.o0.None,w.fillOpacity=100;break;case"points":w.drawStyle=m.l8.Points,w.stacking.mode=m.o0.None,w.fillOpacity=0;break;case"stacked_lines":w.drawStyle=m.l8.Line,w.stacking.mode=m.o0.Normal,w.fillOpacity=100;break;case"stacked_bars":w.drawStyle=m.l8.Bars,w.stacking.mode=m.o0.Normal,w.fillOpacity=100;break;default:{const K=U;throw new Error(`Invalid graph-style: ${K}`)}}})}function a(O,U,I){return(0,h.ZP)(O,F=>{F.defaults.thresholds=I,F.defaults.custom=F.defaults.custom??{},F.defaults.custom.thresholdsStyle=U})}var P=e(8243),D=e(82965),x=e(96905);function M(O){const[U,{inc:I}]=(0,P.Z)(0),F=(0,D.Z)(O);return(0,c.useMemo)(()=>{F&&!(0,x.nl)(O,F,x.Ch)&&I()},[O,F,I]),U}const b=20;function R({data:O,height:U,width:I,timeZone:F,absoluteRange:w,onChangeTime:K,loadingState:L,annotations:V,onHiddenSeriesChanged:H,splitOpenFn:j,graphStyle:A,tooltipDisplayMode:_=m.f3.Single,anchorToZero:k=!1,yAxisMaximum:Q,thresholdsConfig:re,thresholdsStyle:Z,eventBus:oe}){const G=(0,l.l4)(),le=(0,l.wW)(S),[ge,ne]=(0,c.useState)(!1),ue={from:(0,s.CQ)(w.from),to:(0,s.CQ)(w.to),raw:{from:(0,s.CQ)(w.from),to:(0,s.CQ)(w.to)}},te=(0,c.useMemo)(()=>(0,i.j)((0,v.F)(v.r),"Explore"),[]),[me,q]=(0,c.useState)({defaults:{min:k?0:void 0,max:Q||void 0,color:{mode:f.S.PaletteClassic},custom:{drawStyle:m.l8.Line,fillOpacity:0,pointSize:5}},overrides:[]}),se=(0,c.useMemo)(()=>{const Ke=C(me,A,Q);return a(Ke,Z,re)},[me,A,Q,re,Z]),ae=(0,c.useMemo)(()=>(0,u.SM)({fieldConfig:se,data:ge?O:O.slice(0,b),timeZone:F,replaceVariables:Ke=>Ke,theme:G,fieldConfigRegistry:te}),[te,O,F,G,se,ge]),pe=M(ae);(0,c.useEffect)(()=>{if(H){const Ke=[];ae.forEach(st=>{st.fields.map(Ve=>Ve.config?.custom?.hideFrom?.viz).every(n.identity)&&Ke.push((0,r.nf)(st))}),H(Ke)}},[ae,H]);const de={eventBus:oe,sync:()=>d.m.Crosshair,onSplitOpen:j,onToggleSeriesVisibility(Ke,st){q((0,E.N)(Ke,st,me,O))}},Me=(0,c.useMemo)(()=>({tooltip:{mode:_,sort:m.As.None},legend:{displayMode:m.jK.List,showLegend:!0,placement:"bottom",calcs:[]}}),[_]);return c.createElement(p._w,{value:de},O.length>b&&!ge&&c.createElement("div",{className:le.timeSeriesDisclaimer},c.createElement(g.J,{className:le.disclaimerIcon,name:"exclamation-triangle"}),"Showing only ",b," time series.",c.createElement(y.zx,{variant:"primary",fill:"text",onClick:()=>ne(!0),className:le.showAllButton},"Show all ",O.length)),c.createElement(o.$,{data:{series:ae,timeRange:ue,state:L,annotations:V,structureRev:pe},pluginId:"timeseries",title:"",width:I,height:U,onChangeTimeRange:K,timeZone:F,options:Me}))}const S=O=>({timeSeriesDisclaimer:t.css`
    label: time-series-disclaimer;
    margin: ${O.spacing(1)} auto;
    padding: 10px 0;
    text-align: center;
  `,disclaimerIcon:t.css`
    label: disclaimer-icon;
    color: ${O.colors.warning.main};
    margin-right: ${O.spacing(.5)};
  `,showAllButton:t.css`
    margin-left: ${O.spacing(.5)};
  `})},56041:(Y,T,e)=>{"use strict";e.d(T,{F:()=>y});var t=e(66111),n=e(38208),c=e(16983),s=e(64563),i=e(2594),f=e(27876);const u=f.EXPLORE_GRAPH_STYLES.map(v=>({value:v,label:v[0].toUpperCase()+v.slice(1).replace(/_/," ")}));function r(v){const{graphStyle:E,onChangeGraphStyle:h}=v;return t.createElement(i.S,{size:"sm",options:u,value:E,onChange:h})}var d=e(58379);const o="grafana.explore.style.graph",m=v=>{store.set(o,v)},l=()=>g(d.Z.get(o)),p="lines",g=v=>f.EXPLORE_GRAPH_STYLES.find(h=>h===v)??p,y=({data:v,eventBus:E,height:h,width:C,absoluteRange:a,timeZone:P,annotations:D,onChangeTime:x,splitOpenFn:M,thresholdsConfig:b,thresholdsStyle:R,loadingState:S,statusMessage:O})=>{const[U,I]=(0,t.useState)(l),F=(0,t.useCallback)(w=>{(0,c.FG)(w),I(w)},[]);return t.createElement(n.fm,{title:"Graph",width:C,height:h,loadingState:S,statusMessage:O,actions:t.createElement(r,{graphStyle:U,onChangeGraphStyle:F})},(w,K)=>t.createElement(s.y,{graphStyle:U,data:v,height:K,width:w,absoluteRange:a,onChangeTime:x,timeZone:P,annotations:D,splitOpenFn:M,loadingState:S,thresholdsConfig:b,thresholdsStyle:R,eventBus:E}))}},53739:(Y,T,e)=>{"use strict";e.d(T,{q:()=>c});var t=e(66111),n=e(67483);const c=({timeInMs:i,className:f,humanize:u})=>t.createElement("span",{className:f},s(i,u)),s=(i,f=!1)=>{const u=i/1e3;if(!f)return`${u.toFixed(1)}s`;const r=(0,n.Ks)(u,"seconds"),d=r.hours(),o=r.minutes(),m=r.seconds();return d?`${d}h ${o}m ${m}s`:o?`${o}m ${m}s`:`${m}s`}},94619:(Y,T,e)=>{"use strict";e.d(T,{m:()=>Q});var t=e(9892),n=e(66111),c=e(95831),s=e(206),i=e(94976),f=e(35645),u=e(20308),r=e(72648),d=e(83437),o=e(91162),m=e(25405),l=e(27876),p=e(93713),g=e(95638),y=e(13532),v=e(47891),E=e(67483),h=e(39904),C=e(41611);function a({splitOpenFn:Z,traceToLogsOptions:oe,traceToMetricsOptions:G,dataFrame:le,createFocusSpanLink:ge,trace:ne}){if(!le)return;let ue=I(ne);const te=le.fields.some(q=>Boolean(q.config.links?.length));if(le.fields.length===1||!te)return D(Z,le.fields[0],oe,G,ge,ue);if(te)return function(se){ue={...ue,...F(se)};const ae=le.fields.find(pe=>Boolean(pe.config.links?.length));try{const pe=(0,C.a_)({field:ae,rowIndex:se.dataFrameRowIndex,splitOpenFn:Z,range:O(se),dataFrame:le,vars:ue});return{logLinks:[{href:pe[0].href,onClick:pe[0].onClick,content:n.createElement(h.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:pe[0].origin}]}}catch(pe){console.error(pe);return}}}const P=["cluster","hostname","namespace","pod"].map(Z=>({key:Z}));function D(Z,oe,G,le,ge,ne){let ue;G?.datasourceUid&&(ue=(0,o.ak)().getInstanceSettings(G.datasourceUid));const te=ue?.type==="grafana-splunk-datasource";let me;return le?.datasourceUid&&(me=(0,o.ak)().getInstanceSettings(le.datasourceUid)),function(se){ne={...ne,...F(se)};const ae={traceLinks:[]};let pe,de="";if(ue&&G){const Me=G.customQuery?G.query:void 0,Ke=G.tags||P;switch(ue?.type){case"loki":de=S(se,Ke),pe=x(se,G,de,Me);break;case"grafana-splunk-datasource":de=S(se,Ke,{joinBy:" "}),pe=b(se,G,de,Me);break;case"elasticsearch":case"grafana-opensearch-datasource":de=S(se,Ke,{labelValueSign:":",joinBy:" AND "}),pe=M(se,G,de,Me);break;case"grafana-falconlogscale-datasource":de=S(se,Ke,{joinBy:" OR "}),pe=R(se,G,de,Me)}if(pe){const st={title:ue.name,url:"",internal:{datasourceUid:ue.uid,datasourceName:ue.name,query:pe}};if(ne={...ne,__tags:{text:"Tags",value:de}},(0,C.lt)(st.internal.query,ne).allVariablesDefined){const Ie=(0,i._)({link:st,internalLink:st.internal,scopedVars:ne,range:O(se,{startMs:G.spanStartTimeShift?v.intervalToMs(G.spanStartTimeShift):0,endMs:G.spanEndTimeShift?v.intervalToMs(G.spanEndTimeShift):0},te),field:{},onClickFn:Z,replaceVariables:(0,u.J)().replace.bind((0,u.J)())});ae.logLinks=[{href:Ie.href,onClick:Ie.onClick,content:n.createElement(h.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:oe}]}}}if(me&&le?.queries){ae.metricLinks=[];for(const Me of le.queries){const Ke=U(Me,le?.tags||[],se),st={title:me.name,url:"",internal:{datasourceUid:me.uid,datasourceName:me.name,query:{expr:Ke,refId:"A"}}},Ie=(0,i._)({link:st,internalLink:st.internal,scopedVars:{},range:O(se,{startMs:le.spanStartTimeShift?v.intervalToMs(le.spanStartTimeShift):0,endMs:le.spanEndTimeShift?v.intervalToMs(le.spanEndTimeShift):0}),field:{},onClickFn:Z,replaceVariables:(0,u.J)().replace.bind((0,u.J)())});ae.metricLinks.push({title:Me?.name,href:Ie.href,onClick:Ie.onClick,content:n.createElement(h.J,{name:"chart-line",title:"Explore metrics for this span"}),field:oe})}}if(se.references&&ge)for(const Me of se.references){if(Me.refType==="CHILD_OF")continue;const Ke=ge(Me.traceID,Me.spanID);ae.traceLinks.push({href:Ke.href,title:Me.span?Me.span.operationName:"View linked span",content:n.createElement(h.J,{name:"link",title:"View linked span"}),onClick:Ke.onClick,field:Ke.origin})}if(se.subsidiarilyReferencedBy&&ge)for(const Me of se.subsidiarilyReferencedBy){const Ke=ge(Me.traceID,Me.spanID);ae.traceLinks.push({href:Ke.href,title:Me.span?Me.span.operationName:"View linked span",content:n.createElement(h.J,{name:"link",title:"View linked span"}),onClick:Ke.onClick,field:Ke.origin})}return ae}}function x(Z,oe,G,le){const{filterByTraceID:ge,filterBySpanID:ne}=oe;if(le)return{expr:le,refId:""};if(!G)return;let ue="{${__tags}}";return ge&&Z.traceID&&(ue+=' |="${__span.traceId}"'),ne&&Z.spanID&&(ue+=' |="${__span.spanId}"'),{expr:ue,refId:""}}function M(Z,oe,G,le){const{filterByTraceID:ge,filterBySpanID:ne}=oe;if(le)return{query:le,refId:"",metrics:[{id:"1",type:"logs"}]};let ue=[];return ne&&Z.spanID&&ue.push('"${__span.spanId}"'),ge&&Z.traceID&&ue.push('"${__span.traceId}"'),G&&ue.push("${__tags}"),{query:ue.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function b(Z,oe,G,le){const{filterByTraceID:ge,filterBySpanID:ne}=oe;if(le)return{query:le,refId:""};let ue="";return G&&(ue+="${__tags}"),ge&&Z.traceID&&(ue+=' "${__span.traceId}"'),ne&&Z.spanID&&(ue+=' "${__span.spanId}"'),{query:ue,refId:""}}function R(Z,oe,G,le){const{filterByTraceID:ge,filterBySpanID:ne}=oe;if(le)return{lsql:le,refId:""};if(!G)return;let ue="${__tags}";return ge&&Z.traceID&&(ue+=' or "${__span.traceId}"'),ne&&Z.spanID&&(ue+=' or "${__span.spanId}"'),{lsql:ue,refId:""}}function S(Z,oe,{labelValueSign:G="=",joinBy:le=", "}={}){return[...Z.process.tags,...Z.tags,{key:"spanId",value:Z.spanID},{key:"traceId",value:Z.traceID},{key:"name",value:Z.operationName},{key:"duration",value:Z.duration}].map(ge=>{const ne=oe.find(ue=>ue.key===ge.key);if(ne)return`${ne.value?ne.value:ne.key}${G}"${ge.value}"`}).filter(ge=>Boolean(ge)).join(le)}function O(Z,oe={startMs:0,endMs:0},G=!1){const le=Math.floor(Z.startTime/1e3+oe.startMs),ge=(0,E.CQ)(le),ne=(Z.startTime+Z.duration)/1e3;let ue=Math.floor(ne+oe.endMs);G&&ue-le<1e3?ue=le+1e3:le===ue&&ue++;const te=(0,E.CQ)(ue);return{from:ge,to:te,raw:{from:ge,to:te}}}function U(Z,oe=[],G){if(!Z.query)return`histogram_quantile(0.5, sum(rate(traces_spanmetrics_latency_bucket{service="${G.process.serviceName}"}[5m])) by (le))`;let le=Z.query;if(oe.length&&le.indexOf("$__tags")!==-1){const ge=[...G.process.tags,...G.tags],ue=oe.reduce((te,me)=>{const q=ge.find(se=>se.key===me.key)?.value;return q&&te.push(`${me.value?me.value:me.key}="${q}"`),te},[])?.join(", ");le=le.replace(/\$__tags/g,ue)}return le}function I(Z){return{__trace:{text:"Trace",value:{duration:Z.duration,name:Z.traceName,traceId:Z.traceID}}}}function F(Z){const oe={};for(const G of Z.process.tags)oe[G.key]=G.value;for(const G of Z.tags)oe[G.key]=G.value;return{__span:{text:"Span",value:{spanId:Z.spanID,traceId:Z.traceID,duration:Z.duration,name:Z.operationName,tags:oe}}}}function w(){const[Z,oe]=(0,n.useState)(new Set),G=(0,n.useCallback)(function(me){if(Z.size===0)return;let q=-1,se=!0;const ae=me.reduce((pe,de)=>(de.depth<=q&&(se=!0),se&&pe.has(de.spanID)&&(pe.delete(de.spanID),se=!1,q=de.depth),pe),new Set(Z));oe(ae)},[Z]),le=(0,n.useCallback)(function(me){if(K(me,Z))return;let q;const se=me.reduce((ae,pe)=>(q&&pe.depth<=q.depth?(ae.add(q.spanID),pe.hasChildren&&(q=pe)):pe.hasChildren&&!ae.has(pe.spanID)&&(q=pe),ae),new Set(Z));q&&se.add(q.spanID),oe(se)},[Z]),ge=(0,n.useCallback)(function(){oe(new Set)},[]),ne=(0,n.useCallback)(function(me){if(K(me,Z))return;const q=me.reduce((se,ae)=>(ae.hasChildren&&se.add(ae.spanID),se),new Set);oe(q)},[Z]),ue=(0,n.useCallback)(function(me){const q=new Set(Z);Z.has(me)?q.delete(me):q.add(me),oe(q)},[Z]);return{childrenHiddenIDs:Z,expandOne:G,collapseOne:le,expandAll:ge,collapseAll:ne,childrenToggle:ue}}function K(Z,oe){return Z.filter(le=>le.hasChildren).length===oe.size}function L(Z){const[oe,G]=(0,n.useState)(new Map);(0,n.useEffect)(()=>{G(new Map)},[Z,G]);const le=(0,n.useCallback)(function(te){const me=new Map(oe);me.has(te)?me.delete(te):me.set(te,new g.DetailState),G(me)},[oe]),ge=(0,n.useCallback)(function(te,me){const q=oe.get(te);if(!q)return;const se=q.toggleLogItem(me),ae=new Map(oe);return ae.set(te,se),G(ae)},[oe]),ne=(0,n.useCallback)(function(te,me){const q=oe.get(te);if(!q)return;const se=q.toggleReferenceItem(me),ae=new Map(oe);return ae.set(te,se),G(ae)},[oe]);return{detailStates:oe,toggleDetail:le,detailLogItemToggle:ge,detailLogsToggle:(0,n.useCallback)(ue=>V("logs",oe,G)(ue),[oe]),detailWarningsToggle:(0,n.useCallback)(ue=>V("warnings",oe,G)(ue),[oe]),detailStackTracesToggle:(0,n.useCallback)(ue=>V("stackTraces",oe,G)(ue),[oe]),detailReferenceItemToggle:ne,detailReferencesToggle:(0,n.useCallback)(ue=>V("references",oe,G)(ue),[oe]),detailProcessToggle:(0,n.useCallback)(ue=>V("process",oe,G)(ue),[oe]),detailTagsToggle:(0,n.useCallback)(ue=>V("tags",oe,G)(ue),[oe])}}function V(Z,oe,G){return le=>{const ge=oe.get(le);if(!ge)return;let ne;Z==="tags"?ne=ge.toggleTags():Z==="process"?ne=ge.toggleProcess():Z==="warnings"?ne=ge.toggleWarnings():Z==="references"?ne=ge.toggleReferences():Z==="stackTraces"?ne=ge.toggleStackTraces():ne=ge.toggleLogs();const ue=new Map(oe);ue.set(le,ne),G(ue)}}function H(){const[Z,oe]=(0,n.useState)(new Set),G=(0,n.useCallback)(function(ne){oe(ue=>{const te=new Set(ue);return te.add(ne),te})},[]),le=(0,n.useCallback)(function(ne){oe(ue=>{const te=new Set(ue);return te.delete(ne),te})},[]);return{hoverIndentGuideIds:Z,addHoverIndentGuideId:G,removeHoverIndentGuideId:le}}var j=e(75151);function A(){const[Z,oe]=(0,n.useState)({time:{current:[0,1]}}),G=(0,n.useCallback)(function(ne){oe(ue=>{const te={...ue.time,...ne};return{...ue,time:te}})},[]),le=(0,n.useCallback)(function(ne,ue){const me={current:[ne,ue]};oe(q=>({...q,time:me}))},[]);return{viewRange:Z,updateViewRangeTime:le,updateNextViewRangeTime:G}}const _=Z=>({noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${Z.typography.h4.fontSize};
    color: ${Z.colors.text.secondary};
  `});function k(){return{}}function Q(Z){const{spanFindMatches:oe,traceProp:G,datasource:le,topOfViewRef:ge,topOfViewRefType:ne,exploreId:ue}=Z,{detailStates:te,toggleDetail:me,detailLogItemToggle:q,detailLogsToggle:se,detailProcessToggle:ae,detailReferencesToggle:pe,detailReferenceItemToggle:de,detailTagsToggle:Me,detailWarningsToggle:Ke,detailStackTracesToggle:st}=L(Z.dataFrames[0]),{removeHoverIndentGuideId:Ie,addHoverIndentGuideId:Ve,hoverIndentGuideIds:_e}=H(),{viewRange:tt,updateViewRangeTime:dt,updateNextViewRangeTime:Oe}=A(),{expandOne:ye,collapseOne:Pe,childrenToggle:be,collapseAll:Be,childrenHiddenIDs:ze,expandAll:lt}=w(),{newTraceViewHeaderSearch:ht,setNewTraceViewHeaderSearch:vt,spanFilterMatches:bt}=(0,j.F4)(G?.spans),[ct,Pt]=(0,n.useState)(""),[ie,Ce]=(0,c.Z)(!1),[Ne,Ze]=(0,n.useState)(!1),[Qe,Le]=(0,n.useState)(0),Ue=(0,r.wW)(_),[ve,Se]=(0,n.useState)(.25),[Fe,je]=re({refId:Z.dataFrames[0]?.refId,exploreId:Z.exploreId,datasource:le,splitOpenFn:Z.splitOpenFn}),Ge=(0,n.useMemo)(()=>({childrenHiddenIDs:ze,detailStates:te,hoverIndentGuideIds:_e,shouldScrollToFirstUiFindMatch:!1,spanNameColumnWidth:ve,traceID:Z.traceProp?.traceID}),[ze,te,_e,ve,Z.traceProp?.traceID]),gt=(0,o.ak)().getInstanceSettings(le?.name),mt=(0,d.p)(gt?.jsonData),Ye=gt?.jsonData?.tracesToMetrics,ft=gt?.jsonData,St=(0,n.useMemo)(()=>a({splitOpenFn:Z.splitOpenFn,traceToLogsOptions:mt,traceToMetricsOptions:Ye,dataFrame:Z.dataFrames[0],createFocusSpanLink:je,trace:G}),[Z.splitOpenFn,mt,Ye,Z.dataFrames,je,G]),we=(0,l.useSelector)(ut=>(0,m.Z)(ut.user)),qe=le?le?.type:"unknown",Je=Z.scrollElement?Z.scrollElement:document.getElementsByClassName(Z.scrollElementClass??"")[0];return n.createElement(n.Fragment,null,Z.dataFrames?.length&&G?n.createElement(n.Fragment,null,f.v.featureToggles.newTraceViewHeader?n.createElement(n.Fragment,null,n.createElement(g.NewTracePageHeader,{trace:G,data:Z.dataFrames[0],timeZone:we,search:ht,setSearch:vt,showSpanFilters:ie,setShowSpanFilters:Ce,showSpanFilterMatchesOnly:Ne,setShowSpanFilterMatchesOnly:Ze,setFocusedSpanIdForSearch:Pt,spanFilterMatches:bt,datasourceType:qe,setHeaderHeight:Le,app:ue?s.zj.Explore:s.zj.Unknown}),n.createElement(y.Z,{trace:G,viewRange:tt,updateNextViewRangeTime:Oe,updateViewRangeTime:dt})):n.createElement(g.TracePageHeader,{trace:G,updateNextViewRangeTime:Oe,updateViewRangeTime:dt,viewRange:tt,timeZone:we}),n.createElement(g.TraceTimelineViewer,{registerAccessors:k,scrollToFirstVisibleSpan:k,findMatchesIDs:f.v.featureToggles.newTraceViewHeader?bt:oe,trace:G,datasourceType:qe,spanBarOptions:ft?.spanBar,traceTimeline:Ge,updateNextViewRangeTime:Oe,updateViewRangeTime:dt,viewRange:tt,timeZone:we,setSpanNameColumnWidth:Se,collapseAll:Be,collapseOne:Pe,expandAll:lt,expandOne:ye,childrenToggle:be,clearShouldScrollToFirstUiFindMatch:k,detailLogItemToggle:q,detailLogsToggle:se,detailWarningsToggle:Ke,detailStackTracesToggle:st,detailReferencesToggle:pe,detailReferenceItemToggle:de,detailProcessToggle:ae,detailTagsToggle:Me,detailToggle:me,setTrace:k,addHoverIndentGuideId:Ve,removeHoverIndentGuideId:Ie,linksGetter:()=>[],uiFind:Z.search,createSpanLink:St,scrollElement:Je,focusedSpanId:Fe,focusedSpanIdForSearch:f.v.featureToggles.newTraceViewHeader?ct:Z.focusedSpanIdForSearch,showSpanFilterMatchesOnly:Ne,createFocusSpanLink:je,topOfViewRef:ge,topOfViewRefType:ne,headerHeight:Qe})):n.createElement("div",{className:Ue.noDataMsg},"No data"))}function re(Z){const oe=(0,l.useSelector)(te=>te.explore[Z.exploreId]?.panelsState.trace),G=oe?.spanId,le=(0,l.useDispatch)(),ge=te=>le((0,p.km)(Z.exploreId,"trace",{...oe,spanId:te})),ne=(0,l.useSelector)(te=>te.explore[Z.exploreId]?.queries.find(me=>me.refId===Z.refId));return[G,(te,me)=>{const q={title:"Deep link to this span",url:"",internal:{datasourceUid:Z.datasource?.uid,datasourceName:Z.datasource?.name,query:{...ne,query:te},panelsState:{trace:{spanId:me}}}},se=ne?.queryType==="traceql"&&ne.query===te;return(0,i._)({link:q,internalLink:q.internal,scopedVars:{},range:{},field:{},onClickFn:se?()=>ge(G===me?void 0:me):Z.splitOpenFn?()=>Z.splitOpenFn({datasourceUid:Z.datasource?.uid,query:{...ne,query:te},panelsState:{trace:{spanId:me}}}):void 0,replaceVariables:(0,u.J)().replace.bind((0,u.J)())})}]}},99746:(Y,T,e)=>{"use strict";e.d(T,{h:()=>n});var t=e(28550);function n(c,s,i){if(c.isLight)return s;{if(i){const r=(0,t.Z)(s);return t.Z.mostReadable(i,[r.clone().lighten(25),r.clone().lighten(10),r,r.clone().darken(10),r.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const f=(0,t.Z)(s).toHsl();f.l=1-f.l;const u=(0,t.Z)(f);return u.isLight()?u.darken(5).toHex8String():u.lighten(5).toHex8String()}}},13532:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>k});var t=e(9085),n=e.n(t),c=e(58635),s=e(66111),i=e(42413),f=e(9892),u=e(7804),r=e(72648),d=e(99746),o=e(9096);const m=.8,l=2,p=200,g=10,y=60,v=6;function E(Q,re,Z,oe,G){const le=new Map,ge=re.length<y?y:Math.min(re.length,p),ne=window.innerWidth*2;Q.width=ne,Q.height=ge;const ue=Math.min(v,Math.max(l,ge/re.length)),te=ge/re.length,me=Q.getContext("2d",{alpha:!1});if(me){me.fillStyle=G,me.fillRect(0,0,ne,ge);for(let q=0;q<re.length;q++){const{valueWidth:se,valueOffset:ae,serviceName:pe}=re[q],de=ae/Z*ne;let Me=se/Z*ne;Me<g&&(Me=g);let Ke=le.get(pe);Ke||(Ke=`rgba(${oe(pe).concat(m).join()})`,le.set(pe,Ke)),me.fillStyle=Ke,me.fillRect(de,q*te,Me,ue)}}}const h=(0,u.B)(Q=>({CanvasSpanGraph:f.css`
      label: CanvasSpanGraph;
      background: ${(0,d.h)(Q,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class C extends s.PureComponent{constructor(re){super(re),this.getColor=Z=>(0,o.e6)(Z,this.props.theme),this._setCanvasRef=Z=>{this._canvasElm=Z},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:re,items:Z}=this.props;E(this._canvasElm,Z,re,this.getColor,(0,d.h)(this.props.theme,"#fff"))}}render(){return s.createElement("canvas",{className:h(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const a=(0,r.HE)(C);var P=e(320);const D=()=>({TickLabels:f.css`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:f.css`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function x(Q){const{numTicks:re,duration:Z}=Q,oe=(0,r.wW)(D),G=[];for(let le=0;le<re+1;le++){const ge=le/re,ne=ge===1?{right:"0%"}:{left:`${ge*100}%`};G.push(s.createElement("div",{key:ge,className:oe.TickLabelsLabel,style:ne,"data-testid":"tick"},(0,P.LU)(Z*ge)))}return s.createElement("div",{className:oe.TickLabels,"data-testid":"TickLabels"},G)}var M=e(31403),b=e(54373);const R=()=>({GraphTick:f.css`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function S(Q){const{numTicks:re}=Q,Z=(0,r.wW)(R),oe=[];for(let G=1;G<re;G++){const le=`${G/re*100}%`;oe.push(s.createElement("line",{className:Z.GraphTick,x1:le,y1:"0%",x2:le,y2:"100%",key:G/re}))}return s.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},oe)}const O=()=>({ScrubberHandleExpansion:n()(f.css`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:n()(f.css`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:n()(f.css`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:f.css`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:f.css`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function U({isDragging:Q,onMouseDown:re,onMouseEnter:Z,onMouseLeave:oe,position:G}){const le=`${G*100}%`,ge=(0,r.wW)(O),ne=n()({[ge.ScrubberDragging]:Q});return s.createElement("g",{className:ne,"data-testid":"scrubber-component"},s.createElement("g",{"data-testid":"scrubber-component-g",className:ge.ScrubberHandles,onMouseDown:re,onMouseEnter:Z,onMouseLeave:oe},s.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:le,className:ge.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),s.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:le,className:ge.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),s.createElement("line",{className:ge.ScrubberLine,y2:"100%",x1:le,x2:le,"data-testid":"scrubber-component-line"}))}const I=(0,u.B)(Q=>{const re="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",Z=f.css`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:f.css`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${re} {
        display: unset;
      }
    `,ViewingLayerGraph:f.css`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,d.h)(Q,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:f.css`
      label: ViewingLayerInactive;
      fill: ${(0,d.h)(Q,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:f.css`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,d.h)(Q,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:f.css`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:f.css`
      label: ViewingLayerDrag;
      fill: ${(0,d.h)(Q,"#44f")};
    `,ViewingLayerFullOverlay:f.css`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:Z,ViewingLayerResetZoomHoverClassName:re}}),F={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function w(Q,re){const[Z,oe]=Q<re?[Q,re]:[re,Q];return{x:`${Z*100}%`,width:`${(oe-Z)*100}%`,leadingX:`${re*100}%`}}class K extends s.PureComponent{constructor(re){super(re),this._setRoot=Z=>{this._root=Z},this._getDraggingBounds=Z=>{if(!this._root)throw new Error("invalid state");const{left:oe,width:G}=this._root.getBoundingClientRect(),[le,ge]=this.props.viewRange.time.current;let ne=1,ue=0;return Z===F.SHIFT_START?ne=ge:Z===F.SHIFT_END&&(ue=le),{clientXLeft:oe,maxValue:ne,minValue:ue,width:G}},this._handleReframeMouseMove=({value:Z})=>{this.props.updateNextViewRangeTime({cursor:Z})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:Z})=>{const oe=Z,{time:G}=this.props.viewRange,ge={reframe:{anchor:G.reframe?G.reframe.anchor:oe,shift:oe}};this.props.updateNextViewRangeTime(ge)},this._handleReframeDragEnd=({manager:Z,value:oe})=>{const{time:G}=this.props.viewRange,le=G.reframe?G.reframe.anchor:oe,[ge,ne]=oe<le?[oe,le]:[le,oe];Z.resetBounds(),this.props.updateViewRangeTime(ge,ne,"minimap")},this._handleScrubberEnterLeave=({type:Z})=>{const oe=Z===b.EUpdateTypes.MouseEnter;this.setState({preventCursorLine:oe})},this._handleScrubberDragUpdate=({event:Z,tag:oe,type:G,value:le})=>{G===b.EUpdateTypes.DragStart&&Z.stopPropagation(),oe===F.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:le}):oe===F.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:le})},this._handleScrubberDragEnd=({manager:Z,tag:oe,value:G})=>{const[le,ge]=this.props.viewRange.time.current;let ne;if(oe===F.SHIFT_START)ne=[G,ge];else if(oe===F.SHIFT_END)ne=[le,G];else throw new Error("bad state");Z.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(ne[0],ne[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new b.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:F.REFRAME}),this._draggerStart=new b.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:F.SHIFT_START}),this._draggerEnd=new b.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:F.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(re,Z){const oe=I(this.props.theme),G=w(re,Z);return[s.createElement("rect",{key:"fill",className:n()(oe.ViewingLayerDraggedShift,oe.ViewingLayerDrag),x:G.x,y:"0",width:G.width,height:this.props.height-2}),s.createElement("rect",{key:"edge",className:n()(oe.ViewingLayerDrag),x:G.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:re,viewRange:Z,numTicks:oe,theme:G}=this.props,{preventCursorLine:le}=this.state,{current:ge,cursor:ne,shiftStart:ue,shiftEnd:te,reframe:me}=Z.time,q=ue!=null||te!=null||me!=null,[se,ae]=ge;let pe=0;se&&(pe=se*100);let de=100;ae&&(de=100-ae*100);let Me;!q&&ne!=null&&!le&&(Me=`${ne*100}%`);const Ke=I(G);return s.createElement("div",{"aria-hidden":!0,className:Ke.ViewingLayer,style:{height:re}},(se!==0||ae!==1)&&s.createElement(M.zx,{onClick:this._resetTimeZoomClickHandler,className:n()(Ke.ViewingLayerResetZoom,Ke.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),s.createElement("svg",{height:re,className:Ke.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},pe>0&&s.createElement("rect",{x:0,y:0,height:"100%",width:`${pe}%`,className:Ke.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),de>0&&s.createElement("rect",{x:`${100-de}%`,y:0,height:"100%",width:`${de}%`,className:Ke.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),s.createElement(S,{numTicks:oe}),Me&&s.createElement("line",{className:Ke.ViewingLayerCursorGuide,x1:Me,y1:"0",x2:Me,y2:re-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),ue!=null&&this._getMarkers(se,ue),te!=null&&this._getMarkers(ae,te),s.createElement(U,{isDragging:ue!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:se||0}),s.createElement(U,{isDragging:te!=null,position:ae||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),me!=null&&this._getMarkers(me.anchor,me.shift)),q&&s.createElement("div",{className:Ke.ViewingLayerFullOverlay}))}}const L=(0,r.HE)(K),V=60,H=4;function j(Q){return{valueOffset:Q.relativeStartTime,valueWidth:Q.duration,serviceName:Q.process.serviceName}}function A(Q){return Q.spans.map(j)}const _=(0,c.Z)(A);class k extends s.PureComponent{render(){const{height:re,trace:Z,viewRange:oe,updateNextViewRangeTime:G,updateViewRangeTime:le}=this.props;if(!Z)return s.createElement("div",null);const ge=_(Z);return s.createElement("div",{className:n()(i.GL,i.H3)},s.createElement(x,{numTicks:H,duration:Z.duration}),s.createElement("div",{className:i.WW},s.createElement(a,{valueWidth:Z.duration,items:ge}),s.createElement(L,{viewRange:oe,numTicks:H,height:re||V,updateViewRangeTime:le,updateNextViewRangeTime:G})))}}k.defaultProps={height:V}},72861:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>g});var t=e(9892),n=e(9085),c=e.n(n),s=e(66111),i=e(41818),f=e(35645),u=e(72648),r=e(31403),d=e(8180),o=e(46967);class m extends s.PureComponent{constructor(){super(...arguments),this.clearUiFind=()=>{this.props.onChange("")}}render(){const{allowClear:v,inputProps:E,value:h}=this.props,C=s.createElement(s.Fragment,null,E.suffix,v&&h&&h.length&&s.createElement(d.h,{name:"times",onClick:this.clearUiFind}));return s.createElement(o.I,{placeholder:"Find...",...E,onChange:a=>this.props.onChange(a.currentTarget.value),suffix:C,value:h})}}m.defaultProps={inputProps:{},trackFindFunction:void 0,value:void 0};var l=e(42413);const p=y=>({TracePageSearchBar:t.css`
      label: TracePageSearchBar;
      float: right;
      position: absolute;
      top: 0;
      right: 0;
      z-index: ${y.zIndex.navbarFixed};
      background: ${y.colors.background.primary};
      margin-bottom: -48px;
      padding: 8px;
      margin-right: 2px;
      border-radius: ${y.shape.radius.default};
      box-shadow: ${y.shadows.z2};
    `,TracePageSearchBarBar:t.css`
      label: TracePageSearchBarBar;
      max-width: 20rem;
      transition: max-width 0.5s;
      &:focus-within {
        max-width: 100%;
      }
    `,TracePageSearchBarSuffix:t.css`
      label: TracePageSearchBarSuffix;
      opacity: 0.6;
    `,TracePageSearchBarBtn:t.css`
      label: TracePageSearchBarBtn;
      transition: 0.2s;
      margin-left: 8px;
    `,TracePageSearchBarBtnDisabled:t.css`
      label: TracePageSearchBarBtnDisabled;
      opacity: 0.5;
    `,TracePageSearchBarLocateBtn:t.css`
      label: TracePageSearchBarLocateBtn;
      padding: 1px 8px 4px;
    `}),g=(0,s.memo)(function(v){const{navigable:E,setSearch:h,searchValue:C,searchBarSuffix:a,spanFindMatches:P,focusedSpanIdForSearch:D,setSearchBarSuffix:x,setFocusedSpanIdForSearch:M,datasourceType:b}=v,R=(0,u.wW)(p),S=C?s.createElement("span",{className:R.TracePageSearchBarSuffix,"aria-label":"Search bar suffix"},a):null,O=c()(R.TracePageSearchBarBtn,{[R.TracePageSearchBarBtnDisabled]:!C}),U={className:c()(R.TracePageSearchBarBar,l.A4),name:"search",suffix:S},I=L=>{M(""),x(""),h(L)},F=()=>{(0,i.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:b,grafana_version:f.v.buildInfo.version,direction:"next"});const L=Array.from(P),V=L.indexOf(D)?L.indexOf(D):0;if(V===-1||V===L.length-1){M(L[0]),x(K(1));return}M(L[V+1]),x(K(V+2))},w=()=>{(0,i.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:b,grafana_version:f.v.buildInfo.version,direction:"prev"});const L=Array.from(P),V=L.indexOf(D)?L.indexOf(D):0;if(V===-1||V===0){M(L[L.length-1]),x(K(L.length));return}M(L[V-1]),x(K(V))},K=L=>P?.size&&P?.size>0?L+" of "+P?.size:"";return s.createElement("div",{className:R.TracePageSearchBar},s.createElement("span",{className:l.NY,style:{display:"flex"}},s.createElement(m,{onChange:I,value:C,inputProps:U,allowClear:!0}),s.createElement(s.Fragment,null,E&&s.createElement(s.Fragment,null,s.createElement(r.zx,{className:O,variant:"secondary",disabled:!C,type:"button",icon:"arrow-down","aria-label":"Next results button",onClick:F}),s.createElement(r.zx,{className:O,variant:"secondary",disabled:!C,type:"button",icon:"arrow-up","aria-label":"Prev results button",onClick:w})))))})},55478:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>d});var t=e(9892),n=e(9085),c=e.n(n),s=e(66111),i=e(72648),f=e(99746),u=e(5861);const r=o=>({Ticks:t.css`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:t.css`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,f.h)(o,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:t.css`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:t.css`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function d(o){const{endTime:m,numTicks:l,showLabels:p,startTime:g}=o;let y;if(p){y=[];const h=(m||0)-(g||0);for(let C=0;C<l;C++){const a=(g||0)+C/(l-1)*h;y.push((0,u.LU)(a))}}const v=(0,i.wW)(r),E=[];for(let h=0;h<l;h++){const C=h/(l-1);E.push(s.createElement("div",{"data-testid":"TicksID",key:C,className:v.TicksTick,style:{left:`${C*100}%`}},y&&s.createElement("span",{className:c()(v.TicksTickLabel,{[v.TicksTickLabelEndAnchor]:C>=1})},y[h])))}return s.createElement("div",{className:v.Ticks},E)}d.defaultProps={endTime:null,showLabels:null,startTime:null}},93804:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>r});var t=e(9892),n=e(9085),c=e.n(n),s=e(66111),i=e(72648),f=e(42413);const u=()=>({flexRow:t.css`
      display: flex;
      flex: 0 1 auto;
      flex-direction: row;
    `});function r(o){const{children:m,className:l="",...p}=o,g=(0,i.wW)(u);return s.createElement("div",{className:c()(g.flexRow,l),...p},m)}r.defaultProps={className:""};function d(o){const{children:m,className:l="",width:p,style:g,...y}=o,v=`${p*100}%`,E={...g,flexBasis:v,maxWidth:v};return s.createElement("div",{className:c()(f.WW,l),style:E,"data-testid":"TimelineRowCell",...y},m)}d.defaultProps={className:"",style:{}},r.Cell=d},93183:(Y,T,e)=>{"use strict";e.d(T,{l4:()=>St,ZP:()=>An});var t=e(9892),n=e(82897),c=e(58635),s=e(66111),i=e(41818),f=e(35645),u=e(7804),r=e(64319),d=e(72648);const o="peer.service";var m=e(9096);class l{constructor(Ft){this.ys=[],this.heights=[],this.bufferLen=Ft,this.dataLen=-1,this.lastI=-1}profileData(Ft){Ft!==this.dataLen&&(this.dataLen=Ft,this.ys.length=Ft,this.heights.length=Ft,this.lastI>=Ft&&(this.lastI=Ft-1))}calcHeights(Ft,Kt,Lt){Lt!=null&&(this.lastI=Lt);let Ut=Ft+this.bufferLen;if(Ut<=this.lastI)return;Ut>=this.heights.length&&(Ut=this.heights.length-1);let Rt=this.lastI;for(this.lastI===-1&&(Rt=0,this.ys[0]=0);Rt<=Ut;){const $t=this.heights[Rt]=Kt(Rt);this.ys[Rt+1]=this.ys[Rt]+$t,Rt++}this.lastI=Ut}calcYs(Ft,Kt){for(;(this.ys[this.lastI]==null||Ft>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,Kt)}confirmHeight(Ft,Kt){let Lt=Ft;if(Lt>this.lastI){this.calcHeights(Lt,Kt);return}const Ut=Kt(Lt);if(Ut===this.heights[Lt])return;const Rt=Ut-this.heights[Lt];for(this.heights[Lt]=Ut;++Lt<=this.lastI;)this.ys[Lt]+=Rt;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=Rt)}findFloorIndex(Ft,Kt){this.calcYs(Ft,Kt);let Lt=0,Ut=this.lastI;if(this.ys.length<2||Ft<this.ys[1])return 0;if(Ft>this.ys[Ut])return Ut;let Rt;for(;Lt<Ut;)if(Rt=Lt+.5*(Ut-Lt)|0,Ft>this.ys[Rt]){if(Ft<=this.ys[Rt+1])return Rt;Lt=Rt}else if(Ft<this.ys[Rt]){if(Ft>=this.ys[Rt-1])return Rt-1;Ut=Rt}else return Rt;throw new Error(`unable to find floor index for y=${Ft}`)}getRowPosition(Ft,Kt){return this.confirmHeight(Ft,Kt),{height:this.heights[Ft],y:this.ys[Ft]}}getEstimatedHeight(){const Ft=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?Ft|0:Ft/(this.lastI+1)*this.heights.length|0}}const p=100;class g extends s.Component{constructor(Ft){super(Ft),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const Kt=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(Kt,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=Kt=>this._yPositions.getRowPosition(Kt,this._getHeight),this.scrollToIndex=(Kt,Lt)=>{const{scrollElement:Ut}=this.props,Rt=Ut?.getBoundingClientRect().top||0,_t=(Ut?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-Rt,jt=this.getRowPosition(Kt).y;this.props.scrollElement?.scrollTo({top:jt+_t-Lt-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const Kt=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,Lt=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(Kt<this._startIndexDrawn||Lt>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=Kt=>{this.props.windowScroller&&(this._wrapperElm=Kt,Kt&&(this._viewHeight=Kt.clientHeight))},this._initItemHolder=Kt=>{this._itemHolderElm=Kt,this._scanItemHeights()},this._scanItemHeights=()=>{const Kt=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let Lt=null,Ut=null,Rt=!1;const $t=this._itemHolderElm.childNodes,_t=$t.length;for(let jt=0;jt<_t;jt++){const an=$t[jt],cn=an.getAttribute("data-item-key");if(!cn){console.warn("itemKey not found");continue}const hn=(an.firstElementChild||an).clientHeight,Dn=this._knownHeights.get(cn);hn!==Dn&&(this._knownHeights.set(cn,hn),Rt?Ut=cn:(Rt=!0,Lt=Ut=cn))}if(Lt!=null&&Ut!=null){const jt=Kt(Lt),an=Ut===Lt?jt:Kt(Ut);this._yPositions.calcHeights(an,this._getHeight,jt),this.forceUpdate()}},this._getHeight=Kt=>{const Lt=this.props.getKeyFromIndex(Kt),Ut=this._knownHeights.get(Lt);return Ut!=null&&Ut===Ut?Ut:this.props.itemHeightGetter(Kt,Lt)},this._yPositions=new l(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:Ft}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=Ft+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(Ft){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&Ft.scrollElement!==this.props.scrollElement&&(Ft.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const Ft=this.props.windowScroller,Kt=Ft?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,Lt=Ft?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return Kt!==this._viewHeight||Lt!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const Kt=this._scrollTop,Lt=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(Kt,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(Lt,this._getHeight)}render(){const{dataLength:Ft,getKeyFromIndex:Kt,initialDraw:Lt=p,itemRenderer:Ut,viewBuffer:Rt,viewBufferMin:$t}=this.props,_t=this._getHeight,jt=[];let an,cn;if(this._yPositions.profileData(Ft),!this._wrapperElm)an=0,cn=(Lt<Ft?Lt:Ft)-1;else{this._isViewChanged()&&this._calcViewIndexes();const Dn=$t>this._startIndex?0:this._startIndex-$t,Rn=$t<Ft-this._endIndex?this._endIndex+$t:Ft-1;Dn<this._startIndexDrawn||Rn>this._endIndexDrawn?(an=Rt>this._startIndex?0:this._startIndex-Rt,cn=this._endIndex+Rt,cn>=Ft&&(cn=Ft-1)):(an=this._startIndexDrawn>Ft-1?0:this._startIndexDrawn,cn=this._endIndexDrawn>Ft-1?Ft-1:this._endIndexDrawn)}this._yPositions.calcHeights(cn,_t,an||-1),this._startIndexDrawn=an,this._endIndexDrawn=cn,jt.length=cn-an+1;for(let Dn=an;Dn<=cn;Dn++){const{y:Rn,height:ea}=this._yPositions.getRowPosition(Dn,_t),Fn={height:ea,top:Rn,position:"absolute"},Vn=Kt(Dn),aa={"data-item-key":Vn};jt.push(Ut(Vn,Fn,Dn,aa))}const rn={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(rn.onScroll=this._onScroll,rn.style.height="100%",rn.style.overflowY="auto");const hn={position:"relative",height:this._yPositions.getEstimatedHeight()};return s.createElement("div",{...rn,"data-testid":"ListView"},s.createElement("div",{style:hn},s.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},jt)))}}g.defaultProps={initialDraw:p,itemsWrapperClassName:"",windowScroller:!1};var y=e(9085),v=e.n(y),E=e(39904),h=e(99746),C=e(52541),a=e(68183),P=e(39604),D=e(56921);function x({children:Ot,content:Ft,overlayClassName:Kt}){const Lt=(0,s.useRef)(null);return s.createElement(P.D,{content:Ft,hideAfter:300},(Ut,Rt,$t)=>s.createElement(s.Fragment,null,Lt.current&&s.createElement(D.J,{...$t,referenceElement:Lt.current,wrapperClassName:Kt,onMouseLeave:Rt,onMouseEnter:Ut}),s.cloneElement(Ot,{ref:Lt,onMouseEnter:Ut,onMouseLeave:Rt})))}var M=e(42413),b=e(5861);const R="label";var S=e(61860),O=e(31403);const U=()=>({CopyIcon:t.css`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function I(Ot){const Ft=(0,d.wW)(U),[Kt,Lt]=(0,s.useState)(!1),Ut=()=>{navigator.clipboard.writeText(Ot.copyText),Lt(!0)};return s.createElement(S.u,{content:Kt?"Copied":Ot.tooltipTitle},s.createElement(O.zx,{className:v()(Ft.CopyIcon),type:"button",icon:Ot.icon,onClick:Ut}))}I.defaultProps={icon:"copy",className:void 0};var F=e(23932),w=e.n(F);const K="copyIcon",L=Ot=>({KeyValueTable:t.css`
      label: KeyValueTable;
      background: ${(0,h.h)(Ot,"#fff")};
      border: 1px solid ${(0,h.h)(Ot,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,body:t.css`
      label: body;
      vertical-align: baseline;
    `,row:t.css`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,h.h)(Ot,"#f5f5f5")};
      }
      &:not(:hover) .${K} {
        visibility: hidden;
      }
    `,keyColumn:t.css`
      label: keyColumn;
      color: ${(0,h.h)(Ot,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:t.css`
      label: copyColumn;
      text-align: right;
    `,linkIcon:t.css`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `}),V=/^(\[|\{)/;function H(Ot){if(typeof Ot=="string"&&V.test(Ot))try{return JSON.parse(Ot)}catch{}return Ot}const j=Ot=>s.createElement("a",{href:Ot.href,title:Ot.title,target:"_blank",rel:"noopener noreferrer"},Ot.children," ",s.createElement(E.J,{name:"external-link-alt"}));j.defaultProps={title:""};function A(Ot){const{data:Ft,linksGetter:Kt}=Ot,Lt=(0,d.wW)(L);return s.createElement("div",{className:v()(Lt.KeyValueTable),"data-testid":"KeyValueTable"},s.createElement("table",{className:M.K9},s.createElement("tbody",{className:Lt.body},Ft.map((Ut,Rt)=>{const $t={__html:w()(H(Ut.value))},_t=s.createElement("div",{className:M.b$,dangerouslySetInnerHTML:$t}),jt=Kt?Kt(Ft,Rt):null;let an;return jt&&jt.length?an=s.createElement("div",null,s.createElement(j,{href:jt[0].url,title:jt[0].text},_t)):an=_t,s.createElement("tr",{className:Lt.row,key:`${Ut.key}-${Rt}`},s.createElement("td",{className:Lt.keyColumn,"data-testid":"KeyValueTable--keyColumn"},Ut.key),s.createElement("td",null,an),s.createElement("td",{className:Lt.copyColumn},s.createElement(I,{className:K,copyText:JSON.stringify(Ut,null,2),tooltipTitle:"Copy JSON"})))}))))}const _=Ot=>({header:t.css`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,h.h)(Ot,"#e8e8e8")};
      }
    `,headerEmpty:t.css`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:t.css`
      label: headerHighContrast;
      &:hover {
        background: ${(0,h.h)(Ot,"#ddd")};
      }
    `,emptyIcon:t.css`
      label: emptyIcon;
      color: ${(0,h.h)(Ot,"#aaa")};
    `,summary:t.css`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:t.css`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,h.h)(Ot,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:t.css`
      label: summaryLabel;
      color: ${(0,h.h)(Ot,"#777")};
    `,summaryDelim:t.css`
      label: summaryDelim;
      color: ${(0,h.h)(Ot,"#bbb")};
      padding: 0 0.2em;
    `});function k(Ot){const{data:Ft}=Ot,Kt=(0,d.wW)(_);return!Array.isArray(Ft)||!Ft.length?null:s.createElement("ul",{className:Kt.summary},Ft.map((Lt,Ut)=>s.createElement("li",{className:Kt.summaryItem,key:`${Lt.key}-${Ut}`},s.createElement("span",{className:Kt.summaryLabel},Lt.key),s.createElement("span",{className:Kt.summaryDelim},"="),String(Lt.value))))}k.defaultProps={data:null};function Q(Ot){const{className:Ft,data:Kt,highContrast:Lt,interactive:Ut,isOpen:Rt,label:$t,linksGetter:_t,onToggle:jt}=Ot,an=!Array.isArray(Kt)||!Kt.length,cn=(0,d.wW)(_),rn=v()(M.Im,{[cn.emptyIcon]:an});let hn=null,Dn=null;return Ut&&(hn=Rt?s.createElement(E.J,{name:"angle-down",className:rn}):s.createElement(E.J,{name:"angle-right",className:rn}),Dn={"aria-checked":Rt,onClick:an?null:jt,role:"switch"}),s.createElement("div",{className:v()(Ft,M.ty)},s.createElement("div",{className:v()(cn.header,{[cn.headerEmpty]:an,[cn.headerHighContrast]:Lt&&!an}),...Dn,"data-testid":"AccordianKeyValues--header"},hn,s.createElement("strong",{"data-test":R},$t,Rt||":"),!Rt&&s.createElement(k,{data:Kt})),Rt&&s.createElement(A,{data:Kt,linksGetter:_t}))}Q.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const re=Ot=>({AccordianLogs:t.css`
      label: AccordianLogs;
      border: 1px solid ${(0,h.h)(Ot,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:t.css`
      label: AccordianLogsHeader;
      background: ${(0,h.h)(Ot,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,h.h)(Ot,"#dadada")};
      }
    `,AccordianLogsContent:t.css`
      label: AccordianLogsContent;
      background: ${(0,h.h)(Ot,"#f0f0f0")};
      border-top: 1px solid ${(0,h.h)(Ot,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:t.css`
      label: AccordianLogsFooter;
      color: ${(0,h.h)(Ot,"#999")};
    `});function Z(Ot){const{interactive:Ft,isOpen:Kt,linksGetter:Lt,logs:Ut,openedItems:Rt,onItemToggle:$t,onToggle:_t,timestamp:jt}=Ot;let an=null,cn="span",rn=null;Ft&&(an=Kt?s.createElement(E.J,{name:"angle-down",className:M.Im}):s.createElement(E.J,{name:"angle-right",className:"u-align-icon"}),cn="a",rn={"aria-checked":Kt,onClick:_t,role:"switch"});const hn=(0,d.wW)(re);return s.createElement("div",{className:hn.AccordianLogs},s.createElement(cn,{className:hn.AccordianLogsHeader,...rn},an," ",s.createElement("strong",null,"Events")," (",Ut.length,")"),Kt&&s.createElement("div",{className:hn.AccordianLogsContent},(0,n.sortBy)(Ut,"timestamp").map((Dn,Rn)=>s.createElement(Q,{key:`${Dn.timestamp}-${Rn}`,className:Rn<Ut.length-1?M.bi:null,data:Dn.fields||[],highContrast:!0,interactive:Ft,isOpen:Rt?Rt.has(Dn):!1,label:`${(0,b.LU)(Dn.timestamp-jt)}`,linksGetter:Lt,onToggle:Ft&&$t?()=>$t(Dn):null})),s.createElement("small",{className:hn.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}Z.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const oe=Ot=>({wrapper:t.css`
      label: wrapper;
      bottom: 0;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
      overflow: hidden;
      z-index: 0;
    `,bar:t.css`
      label: bar;
      border-radius: 3px;
      min-width: 2px;
      position: absolute;
      height: 36%;
      top: 32%;
    `,rpc:t.css`
      label: rpc;
      position: absolute;
      top: 35%;
      bottom: 35%;
      z-index: 1;
    `,label:t.css`
      label: label;
      color: #aaa;
      font-size: 12px;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      line-height: 1em;
      white-space: nowrap;
      padding: 0 0.5em;
      position: absolute;
    `,logMarker:t.css`
      label: logMarker;
      background-color: ${(0,h.h)(Ot,"#2c3235")};
      cursor: pointer;
      height: 60%;
      min-width: 1px;
      position: absolute;
      top: 20%;
      &:hover {
        background-color: ${(0,h.h)(Ot,"#464c54")};
      }
      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        border: 1px solid transparent;
      }
      &::after {
        left: 0;
      }
    `});function G(Ot){return`${(Ot*100).toFixed(1)}%`}function le({viewEnd:Ot,viewStart:Ft,getViewedBounds:Kt,color:Lt,shortLabel:Ut,longLabel:Rt,onClick:$t,rpc:_t,traceStartTime:jt,span:an,className:cn,labelClassName:rn}){const[hn,Dn]=(0,s.useState)(Ut),Rn=()=>Dn(Ut),ea=()=>Dn(Rt),Fn=(0,n.groupBy)(an.logs,aa=>{const Sa=Kt(aa.timestamp,aa.timestamp).start;return G(Math.round(Sa*500)/500)}),Vn=(0,d.wW)(oe);return s.createElement("div",{className:v()(Vn.wrapper,cn),onBlur:Rn,onClick:$t,onFocus:ea,onMouseOut:Rn,onMouseOver:ea,"aria-hidden":!0,"data-testid":a.wl.components.TraceViewer.spanBar},s.createElement("div",{"aria-label":hn,className:Vn.bar,style:{background:Lt,left:G(Ft),width:G(Ot-Ft)}},s.createElement("div",{className:v()(Vn.label,rn),"data-testid":"SpanBar--label"},hn)),s.createElement("div",null,Object.keys(Fn).map(aa=>s.createElement(x,{key:aa,content:s.createElement(Z,{interactive:!1,isOpen:!0,logs:Fn[aa],timestamp:jt})},s.createElement("div",{"data-testid":"SpanBar--logMarker",className:Vn.logMarker,style:{left:aa}})))),_t&&s.createElement("div",{className:Vn.rpc,style:{background:_t.color,left:G(_t.viewStart),width:G(_t.viewEnd-_t.viewStart)}}))}const ge=s.memo(le);var ne=e(14391),ue=e(42044),te=e(30909);const me=(Ot,Ft,Kt,Lt)=>s.createElement(s.Fragment,null,Ot.logLinks?.length?s.createElement(ne.k,{label:"Logs"},Ot.logLinks.map((Ut,Rt)=>s.createElement(ue.s,{key:Rt,label:"Logs for this span",onClick:Ut.onClick?$t=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Lt,grafana_version:f.v.buildInfo.version,type:"log",location:"menu"}),$t?.preventDefault(),Ut.onClick($t),Kt()}:void 0,url:Ut.href,className:Ft.menuItem}))):null,Ot.metricLinks?.length?s.createElement(ne.k,{label:"Metrics"},Ot.metricLinks.map((Ut,Rt)=>s.createElement(ue.s,{key:Rt,label:Ut.title??"Metrics for this span",onClick:Ut.onClick?$t=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Lt,grafana_version:f.v.buildInfo.version,type:"metric",location:"menu"}),$t?.preventDefault(),Ut.onClick($t),Kt()}:void 0,url:Ut.href,className:Ft.menuItem}))):null,Ot.traceLinks?.length?s.createElement(ne.k,{label:"Traces"},Ot.traceLinks.map((Ut,Rt)=>s.createElement(ue.s,{key:Rt,label:Ut.title??"View linked span",onClick:Ut.onClick?$t=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Lt,grafana_version:f.v.buildInfo.version,type:"trace",location:"menu"}),$t?.preventDefault(),Ut.onClick($t),Kt()}:void 0,url:Ut.href,className:Ft.menuItem}))):null),q=({links:Ot,datasourceType:Ft})=>{const Kt=(0,d.wW)(se),[Lt,Ut]=(0,s.useState)(!1),[Rt,$t]=(0,s.useState)({x:0,y:0}),_t=()=>Ut(!1);return s.createElement("div",{"data-testid":"SpanLinksMenu"},s.createElement("button",{onClick:jt=>{Ut(!0),$t({x:jt.pageX,y:jt.pageY})},className:Kt.button},s.createElement(E.J,{name:"link",className:Kt.button})),Lt?s.createElement(te.x,{onClose:()=>Ut(!1),renderMenuItems:()=>me(Ot,Kt,_t,Ft),focusOnOpen:!0,x:Rt.x,y:Rt.y}):null)},se=()=>({button:t.css`
      background: transparent;
      border: none;
      padding: 0;
      margin: 0 3px 0 0;
    `,menuItem:t.css`
      max-width: 60ch;
      overflow: hidden;
    `});function ae(Ot){return(0,n.get)((0,n.find)(Ot.references,({span:Ft,refType:Kt})=>Ft&&Ft.spanID&&(Kt==="CHILD_OF"||Kt==="FOLLOWS_FROM")),"span")}function pe(Ot){const Ft=[];if(!Ot)return Ft;let Kt=ae(Ot);for(;Kt;)Ft.push(Kt.spanID),Kt=ae(Kt);return Ft}const de=(0,u.B)(Ot=>({SpanTreeOffset:t.css`
      label: SpanTreeOffset;
      color: ${(0,h.h)(Ot,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:t.css`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:t.css`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: calc(0.5rem + 12px);
      height: 100%;
      border-left: 3px solid transparent;
      display: inline-flex;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,h.h)(Ot,"lightgrey")};
      }
    `,indentGuideActive:t.css`
      label: indentGuideActive;
      border-color: ${(0,h.h)(Ot,"darkgrey")};
      &::before {
        background-color: transparent;
      }
    `,iconWrapper:t.css`
      label: iconWrapper;
      position: absolute;
      right: 0.25rem;
    `}));class Me extends s.PureComponent{constructor(Ft){super(Ft),this.handleMouseLeave=(Kt,Lt)=>{(!(Kt.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(Kt,"relatedTarget.dataset.ancestorId")!==Lt)&&this.props.removeHoverIndentGuideId(Lt)},this.handleMouseEnter=(Kt,Lt)=>{(!(Kt.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(Kt,"relatedTarget.dataset.ancestorId")!==Lt)&&this.props.addHoverIndentGuideId(Lt)},this.ancestorIds=pe(Ft.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:Ft,onClick:Kt,showChildrenIcon:Lt,span:Ut,theme:Rt}=this.props,{hasChildren:$t,spanID:_t}=Ut,jt=$t?{onClick:Kt,role:"switch","aria-checked":Ft}:null,an=Lt&&$t&&(Ft?s.createElement(E.J,{name:"angle-down","data-testid":"icon-arrow-down"}):s.createElement(E.J,{name:"angle-right","data-testid":"icon-arrow-right"})),cn=de(Rt);return s.createElement("span",{className:v()(cn.SpanTreeOffset,{[cn.SpanTreeOffsetParent]:$t}),...jt},this.ancestorIds.map(rn=>s.createElement("span",{key:rn,className:v()(cn.indentGuide,{[cn.indentGuideActive]:this.props.hoverIndentGuideIds.has(rn)}),"data-ancestor-id":rn,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:hn=>this.handleMouseEnter(hn,rn),onMouseLeave:hn=>this.handleMouseLeave(hn,rn)})),an&&s.createElement("span",{className:cn.iconWrapper,onMouseEnter:rn=>this.handleMouseEnter(rn,_t),onMouseLeave:rn=>this.handleMouseLeave(rn,_t),"data-testid":"icon-wrapper"},an))}}Me.displayName="UnthemedSpanTreeOffset",Me.defaultProps={childrenVisible:!1,showChildrenIcon:!0};const Ke=(0,d.HE)(Me);var st=e(55478),Ie=e(93804);const Ve="spanBar",_e="spanBarLabel",tt="nameWrapper",dt="nameWrapperMatchingFilter",Oe="jaegerView",ye="nameColumn",Pe=(0,u.B)((Ot,Ft)=>{const Kt={label:"flash",flash:t.keyframes`
    from {
      background-color: ${(0,h.h)(Ot,"#68b9ff")};
    }
    to {
      background-color: 'default';
    }
  `},Lt=Ft?"":(0,h.h)(Ot,"#fffce4");return{nameWrapper:t.css`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:t.css`
      label: nameWrapperMatchingFilter;
      background-color: ${Lt};
    `,nameColumn:t.css`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:t.css`
      label: endpointName;
      color: ${(0,h.h)(Ot,"#808080")};
    `,view:t.css`
      label: view;
      position: relative;
    `,viewExpanded:t.css`
      label: viewExpanded;
      background: ${(0,h.h)(Ot,"#f8f8f8")};
      outline: 1px solid ${(0,h.h)(Ot,"#ddd")};
    `,viewExpandedAndMatchingFilter:t.css`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,h.h)(Ot,"#fff3d7")};
      outline: 1px solid ${(0,h.h)(Ot,"#ddd")};
    `,row:t.css`
      label: row;
      &:hover .${Ve} {
        opacity: 1;
      }
      &:hover .${_e} {
        color: ${(0,h.h)(Ot,"#000")};
      }
      &:hover .${tt} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,h.h)(Ot,"#fafafa")},
          ${(0,h.h)(Ot,"#f8f8f8")} 75%,
          ${(0,h.h)(Ot,"#eee")}
        );
      }
      &:hover .${Oe} {
        background-color: ${(0,h.h)(Ot,"#f5f5f5")};
        outline: 1px solid ${(0,h.h)(Ot,"#ddd")};
      }
    `,rowClippingLeft:t.css`
      label: rowClippingLeft;
      & .${ye}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,h.h)(Ot,"rgba(25, 25, 25, 0.25)")},
          ${(0,h.h)(Ot,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:t.css`
      label: rowClippingRight;
      & .${Oe}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,h.h)(Ot,"rgba(25, 25, 25, 0.25)")},
          ${(0,h.h)(Ot,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:t.css`
      label: rowExpanded;
      & .${Ve} {
        opacity: 1;
      }
      & .${_e} {
        color: ${(0,h.h)(Ot,"#000")};
      }
      & .${tt}, &:hover .${tt} {
        background: ${(0,h.h)(Ot,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,h.h)(Ot,"#ddd")};
      }
      & .${dt} {
        background: ${(0,h.h)(Ot,"#fff3d7")};
      }
      &:hover .${Oe} {
        background: ${(0,h.h)(Ot,"#eee")};
      }
    `,rowMatchingFilter:t.css`
      label: rowMatchingFilter;
      // background-color: ${(0,h.h)(Ot,"#fffbde")};
      &:hover .${tt} {
        background: linear-gradient(
          90deg,
          ${(0,h.h)(Ot,"#fffbde")},
          ${(0,h.h)(Ot,"#fffbde")} 75%,
          ${(0,h.h)(Ot,"#f7f1c6")}
        );
      }
      &:hover .${Oe} {
        background-color: ${(0,h.h)(Ot,"#f7f1c6")};
        outline: 1px solid ${(0,h.h)(Ot,"#ddd")};
      }
    `,rowFocused:t.css`
      label: rowFocused;
      background-color: ${(0,h.h)(Ot,"#cbe7ff")};
      animation: ${Kt.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${tt}, .${Oe}, .${dt} {
        background-color: ${(0,h.h)(Ot,"#cbe7ff")};
        animation: ${Kt.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${Ve} {
        opacity: 1;
      }
      & .${_e} {
        color: ${(0,h.h)(Ot,"#000")};
      }
      &:hover .${tt}, :hover .${Oe} {
        background: ${(0,h.h)(Ot,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,h.h)(Ot,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:t.css`
      label: rowExpandedAndMatchingFilter;
      &:hover .${Oe} {
        background: ${(0,h.h)(Ot,"#ffeccf")};
      }
    `,name:t.css`
      label: name;
      color: ${(0,h.h)(Ot,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      margin-right: 8px;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &::before {
        content: ' ';
        position: absolute;
        top: 4px;
        bottom: 4px;
        left: 0;
        border-left: 4px solid;
        border-left-color: inherit;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > small {
        color: ${(0,h.h)(Ot,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
    `,nameDetailExpanded:t.css`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:t.css`
      label: svcName;
      padding: 0 0.25rem 0 0.5rem;
      font-size: 1.05em;
    `,svcNameChildrenCollapsed:t.css`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:t.css`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,h.h)(Ot,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:t.css`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:t.css`
      label: labelRight;
      left: 100%;
    `,labelLeft:t.css`
      label: labelLeft;
      right: 100%;
    `}});class be extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(Ft,Kt,Lt)=>{const Ut=Kt?.type??"";if(Ut===C.Hn)return"";if(Ut===""||Ut===C.th)return`(${Lt})`;if(Ut===C.Kg){const Rt=Kt?.tag?.trim()??"";if(Rt!==""&&Ft.tags){const $t=Ft.tags?.find(jt=>jt.key===Rt),_t=Ft.process?.tags?.find(jt=>jt.key===Rt);if($t)return`(${$t.value})`;if(_t)return`(${_t.value})`}}return""}}render(){const{className:Ft,color:Kt,spanBarOptions:Lt,columnDivision:Ut,isChildrenExpanded:Rt,isDetailExpanded:$t,isMatchingFilter:_t,showSpanFilterMatchesOnly:jt,isFocused:an,numTicks:cn,rpc:rn,noInstrumentedServer:hn,showErrorIcon:Dn,getViewedBounds:Rn,traceStartTime:ea,span:Fn,hoverIndentGuideIds:Vn,addHoverIndentGuideId:aa,removeHoverIndentGuideId:Sa,clippingLeft:la,clippingRight:Yn,theme:ia,createSpanLink:Ia,datasourceType:ha}=this.props,{duration:xa,hasChildren:Wa,operationName:as,process:{serviceName:Xa}}=Fn,Ba=(0,b.LU)(xa),ca=Rn(Fn.startTime,Fn.startTime+Fn.duration),ss=ca.start,Ya=ca.end,sa=Pe(ia,jt),ja=`${Xa}::${as}`;let da,Ga;ss>1-Ya?(da=`${ja} | ${Ba}`,Ga=sa.labelLeft):(da=`${Ba} | ${ja}`,Ga=sa.labelRight);const qa=Ka=>Ka?Object.values(Ka).reduce((ts,va)=>ts+va.length,0):0;return s.createElement(Ie.Z,{className:v()(sa.row,{[sa.rowExpanded]:$t,[sa.rowMatchingFilter]:_t,[sa.rowExpandedAndMatchingFilter]:_t&&$t,[sa.rowFocused]:an,[sa.rowClippingLeft]:la,[sa.rowClippingRight]:Yn},Ft)},s.createElement(Ie.Z.Cell,{className:v()(sa.nameColumn,ye),width:Ut},s.createElement("div",{className:v()(sa.nameWrapper,tt,{[sa.nameWrapperMatchingFilter]:_t,nameWrapperMatchingFilter:_t})},s.createElement(Ke,{onClick:Wa?this._childrenToggle:void 0,childrenVisible:Rt,span:Fn,hoverIndentGuideIds:Vn,addHoverIndentGuideId:aa,removeHoverIndentGuideId:Sa}),s.createElement("button",{type:"button",className:v()(sa.name,{[sa.nameDetailExpanded]:$t}),"aria-checked":$t,title:ja,onClick:this._detailToggle,role:"switch",style:{borderColor:Kt},tabIndex:0},s.createElement("span",{className:v()(sa.svcName,{[sa.svcNameChildrenCollapsed]:Wa&&!Rt})},Dn&&s.createElement(E.J,{name:"exclamation-circle",style:{backgroundColor:Fn.errorIconColor?(0,h.h)(ia,Fn.errorIconColor):(0,h.h)(ia,"#db2828")},className:sa.errorIcon}),Xa," ",rn&&s.createElement("span",null,s.createElement(E.J,{name:"arrow-right"})," ",s.createElement("i",{className:sa.rpcColorMarker,style:{background:rn.color}}),rn.serviceName),hn&&s.createElement("span",null,s.createElement(E.J,{name:"arrow-right"})," ",s.createElement("i",{className:sa.rpcColorMarker,style:{background:hn.color}}),hn.serviceName)),s.createElement("small",{className:sa.endpointName},rn?rn.operationName:as),s.createElement("small",{className:sa.endpointName}," ",this.getSpanBarLabel(Fn,Lt,Ba))),Ia&&(()=>{const Ka=Ia(Fn),ts=qa(Ka);if(Ka&&ts===1){const va=Ka.logLinks?.[0]??Ka.metricLinks?.[0]??Ka.traceLinks?.[0]??void 0;return va?s.createElement("a",{href:va.href,target:"_blank",style:{marginRight:"5px"},rel:"noopener noreferrer",onClick:va.onClick?ns=>{!(ns.ctrlKey||ns.metaKey||ns.shiftKey)&&va.onClick&&(ns.preventDefault(),va.onClick(ns))}:void 0},va.content):null}else return Ka&&ts>1?s.createElement(q,{links:Ka,datasourceType:ha}):null})())),s.createElement(Ie.Z.Cell,{className:v()(sa.view,Oe,{[sa.viewExpanded]:$t,[sa.viewExpandedAndMatchingFilter]:_t&&$t}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-Ut,onClick:this._detailToggle},s.createElement(st.Z,{numTicks:cn}),s.createElement(ge,{rpc:rn,viewStart:ss,viewEnd:Ya,getViewedBounds:Rn,color:Kt,shortLabel:Ba,longLabel:da,traceStartTime:ea,span:Fn,labelClassName:`${_e} ${Ga}`,className:Ve})))}}be.displayName="UnthemedSpanBarRow",be.defaultProps={className:"",rpc:null};const Be=(0,d.HE)(be);var ze=e(77258),lt=e(89719),ht=e(97379);const vt=Ot=>({Divider:t.css`
      background: ${(0,h.h)(Ot,"#ddd")};
    `,DividerVertical:t.css`
      label: DividerVertical;
      display: inline-block;
      width: 1px;
      height: 0.9em;
      margin: 0 8px;
      vertical-align: middle;
    `,DividerHorizontal:t.css`
      label: DividerHorizontal;
      display: block;
      height: 1px;
      width: 100%;
      margin: 24px 0;
      clear: both;
      vertical-align: middle;
      position: relative;
      top: -0.06em;
    `});function bt({className:Ot,style:Ft,type:Kt}){const Lt=(0,d.wW)(vt);return s.createElement("div",{style:Ft,className:(0,t.cx)(Lt.Divider,Kt==="horizontal"?Lt.DividerHorizontal:Lt.DividerVertical,Ot)})}var ct=e(82736);function Pt(Ot){const{reference:Ft,children:Kt,createFocusSpanLink:Lt}=Ot,Ut=Lt(Ft.traceID,Ft.spanID);return s.createElement("a",{href:Ut.href,target:Ut.target,rel:"noopener noreferrer",onClick:Ut.onClick?Rt=>{Rt.preventDefault(),Ut.onClick(Rt)}:void 0},Kt)}const ie=Ot=>({AccordianReferenceItem:t.css`
      border-bottom: 1px solid ${(0,h.h)(Ot,"#d8d8d8")};
    `,AccordianKeyValues:t.css`
      margin-left: 10px;
    `,AccordianReferences:t.css`
      label: AccordianReferences;
      border: 1px solid ${(0,h.h)(Ot,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:t.css`
      label: AccordianReferencesHeader;
      background: ${(0,h.h)(Ot,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,h.h)(Ot,"#dadada")};
      }
    `,AccordianReferencesContent:t.css`
      label: AccordianReferencesContent;
      background: ${(0,h.h)(Ot,"#f0f0f0")};
      border-top: 1px solid ${(0,h.h)(Ot,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:t.css`
      label: AccordianReferencesFooter;
      color: ${(0,h.h)(Ot,"#999")};
    `,ReferencesList:t.css`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:t.css`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:t.css`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:t.css`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:t.css`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:t.css`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:t.css`
      margin-right: 8px;
    `,title:t.css`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function Ce(Ot){const{data:Ft,createFocusSpanLink:Kt,openedItems:Lt,onItemToggle:Ut,interactive:Rt}=Ot,$t=(0,d.wW)(ie);return s.createElement("div",{className:$t.AccordianReferencesContent},Ft.map((_t,jt)=>s.createElement("div",{className:jt<Ft.length-1?$t.AccordianReferenceItem:void 0,key:jt},s.createElement("div",{className:$t.item,key:`${_t.spanID}`},s.createElement(Pt,{reference:_t,createFocusSpanLink:Kt},s.createElement("span",{className:$t.itemContent},_t.span?s.createElement("span",null,s.createElement("span",{className:(0,t.cx)("span-svc-name",$t.serviceName)},_t.span.process.serviceName),s.createElement("small",{className:"endpoint-name"},_t.span.operationName)):s.createElement("span",{className:(0,t.cx)("span-svc-name",$t.title)},"View Linked Span ",s.createElement(E.J,{name:"external-link-alt"})),s.createElement("small",{className:$t.debugInfo},s.createElement("span",{className:$t.debugLabel,"data-label":"TraceID:"},_t.traceID),s.createElement("span",{className:$t.debugLabel,"data-label":"SpanID:"},_t.spanID))))),!!_t.tags?.length&&s.createElement("div",{className:$t.AccordianKeyValues},s.createElement(Q,{className:jt<Ft.length-1?M.bi:null,data:_t.tags||[],highContrast:!0,interactive:Rt,isOpen:Lt?Lt.has(_t):!1,label:"attributes",linksGetter:null,onToggle:Rt&&Ut?()=>Ut(_t):null})))))}const Ne=({data:Ot,interactive:Ft=!0,isOpen:Kt,onToggle:Lt,onItemToggle:Ut,openedItems:Rt,createFocusSpanLink:$t})=>{const _t=!Array.isArray(Ot)||!Ot.length;let jt=null,an="span",cn=null;Ft&&(jt=Kt?s.createElement(E.J,{name:"angle-down",className:M.Im}):s.createElement(E.J,{name:"angle-right",className:M.Im}),an="a",cn={"aria-checked":Kt,onClick:_t?null:Lt,role:"switch"});const rn=(0,d.wW)(ie);return s.createElement("div",{className:rn.AccordianReferences},s.createElement(an,{className:rn.AccordianReferencesHeader,...cn},jt,s.createElement("strong",null,s.createElement("span",null,"References"))," ","(",Ot.length,")"),Kt&&s.createElement(Ce,{data:Ot,openedItems:Rt,createFocusSpanLink:$t,onItemToggle:Ut,interactive:Ft}))},Ze=s.memo(Ne),Qe=()=>({TextList:t.css`
      max-height: 450px;
      overflow: auto;
    `,List:t.css`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:t.css`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function Le(Ot){const{data:Ft}=Ot,Kt=(0,d.wW)(Qe);return s.createElement("div",{className:v()(Kt.TextList),"data-testid":"TextList"},s.createElement("ul",{className:Kt.List},Ft.map((Lt,Ut)=>s.createElement("li",{className:Kt.item,key:`${Ut}`},Lt))))}const Ue=Ot=>({header:t.css`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,h.h)(Ot,"#e8e8e8")};
      }
    `});function ve({data:Ot}){return s.createElement(Le,{data:Ot})}function Se(Ot){const{className:Ft,data:Kt,headerClassName:Lt,interactive:Ut,isOpen:Rt,label:$t,onToggle:_t,TextComponent:jt=ve}=Ot,an=!Array.isArray(Kt)||!Kt.length,cn=(0,d.wW)(_),rn=v()(M.Im,{[cn.emptyIcon]:an});let hn=null,Dn=null;Ut&&(hn=Rt?s.createElement(E.J,{name:"angle-down",className:rn}):s.createElement(E.J,{name:"angle-right",className:rn}),Dn={"aria-checked":Rt,onClick:an?null:_t,role:"switch"});const Rn=(0,d.wW)(Ue);return s.createElement("div",{className:Ft||""},s.createElement("div",{className:v()(Rn.header,Lt),...Dn,"data-testid":"AccordianText--header"},hn,s.createElement("strong",null,$t)," (",Kt.length,")"),Rt&&s.createElement(jt,{data:Kt}))}Se.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const Fe=Ot=>({header:t.css`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:t.css`
      overflow: hidden;
    `,debugInfo:t.css`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:t.css`
      label: debugLabel;
      &::before {
        color: ${(0,h.h)(Ot,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:t.css`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,h.h)(Ot,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,h.h)(Ot,"#333")};
      }
    `,AccordianWarnings:t.css`
      label: AccordianWarnings;
      background: ${(0,h.h)(Ot,"#fafafa")};
      border: 1px solid ${(0,h.h)(Ot,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:t.css`
      label: AccordianWarningsHeader;
      background: ${(0,h.h)(Ot,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,h.h)(Ot,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:t.css`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,h.h)(Ot,"#e8e8e8")};
    `,AccordianWarningsLabel:t.css`
      label: AccordianWarningsLabel;
      color: ${(0,h.h)(Ot,"#d36c08")};
    `,Textarea:t.css`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:t.css`
      font-size: 1.5em;
    `});function je(Ot){const{detailState:Ft,linksGetter:Kt,logItemToggle:Lt,logsToggle:Ut,processToggle:Rt,span:$t,tagsToggle:_t,traceStartTime:jt,warningsToggle:an,stackTracesToggle:cn,referencesToggle:rn,referenceItemToggle:hn,createSpanLink:Dn,createFocusSpanLink:Rn,topOfViewRefType:ea,datasourceType:Fn}=Ot,{isTagsOpen:Vn,isProcessOpen:aa,logs:Sa,isWarningsOpen:la,references:Yn,isStackTracesOpen:ia}=Ft,{operationName:Ia,process:ha,duration:xa,relativeStartTime:Wa,startTime:as,traceID:Xa,spanID:Ba,logs:ca,tags:ss,warnings:Ya,references:sa,stackTraces:ja}=$t,{timeZone:da}=Ot,Ga=[{key:"svc",label:"Service:",value:ha.serviceName},{key:"duration",label:"Duration:",value:(0,b.LU)(xa)},{key:"start",label:"Start Time:",value:(0,b.LU)(Wa)+Ge(as,da)},...$t.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:$t.childSpanCount}]:[]],qa=(0,d.wW)(Fe);let Ka;if(Dn){const va=Dn($t);va?.logLinks?Ka=s.createElement(lt.k,{link:{...va.logLinks[0],title:"Logs for this span",target:"_blank",origin:va.logLinks[0].field,onClick:ns=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Fn,grafana_version:f.v.buildInfo.version,type:"log",location:"spanDetails"}),va?.logLinks?.[0].onClick?.(ns)}},buttonProps:{icon:"gf-logs"}}):Ka=s.createElement(O.zx,{variant:"primary",size:"sm",icon:"gf-logs",disabled:!0,tooltip:"We did not match any variables between the link and this span. Check your configuration or this span attributes."},"Logs for this span")}const ts=Rn(Xa,Ba);return s.createElement("div",{"data-testid":"span-detail-component"},s.createElement("div",{className:qa.header},s.createElement("h2",{className:v()(M.h2)},Ia),s.createElement("div",{className:qa.listWrapper},s.createElement(ct.Z,{className:M.xb,divider:!0,items:Ga}))),Ka,s.createElement(bt,{className:M.im,type:"horizontal"}),s.createElement("div",null,s.createElement("div",null,s.createElement(Q,{data:ss,label:"Attributes",linksGetter:Kt,isOpen:Vn,onToggle:()=>_t(Ba)}),ha.tags&&s.createElement(Q,{className:M.bi,data:ha.tags,label:"Resource",linksGetter:Kt,isOpen:aa,onToggle:()=>Rt(Ba)})),ca&&ca.length>0&&s.createElement(Z,{linksGetter:Kt,logs:ca,isOpen:Sa.isOpen,openedItems:Sa.openedItems,onToggle:()=>Ut(Ba),onItemToggle:va=>Lt(Ba,va),timestamp:jt}),Ya&&Ya.length>0&&s.createElement(Se,{className:qa.AccordianWarnings,headerClassName:qa.AccordianWarningsHeader,label:s.createElement("span",{className:qa.AccordianWarningsLabel},"Warnings"),data:Ya,isOpen:la,onToggle:()=>an(Ba)}),ja&&ja.length&&s.createElement(Se,{label:"Stack trace",data:ja,isOpen:ia,TextComponent:va=>{let ns;return va.data?.length>1?ns=va.data.map((xs,hs)=>`StackTrace ${hs+1}:
${xs}`).join(`
`):ns=va.data?.[0],s.createElement(ht.K,{className:qa.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:ns})},onToggle:()=>cn(Ba)}),sa&&sa.length>0&&(sa.length>1||sa[0].refType!=="CHILD_OF")&&s.createElement(Ze,{data:sa,isOpen:Yn.isOpen,openedItems:Yn.openedItems,onToggle:()=>rn(Ba),onItemToggle:va=>hn(Ba,va),createFocusSpanLink:Rn}),ea===St.Explore&&s.createElement("small",{className:qa.debugInfo},s.createElement("a",{...ts,onClick:va=>{ts.onClick&&va.button===0&&(!va.currentTarget.target||va.currentTarget.target==="_self")&&!(va.metaKey||va.altKey||va.ctrlKey||va.shiftKey)&&(va.preventDefault(),ts.onClick(va))}},s.createElement(E.J,{name:"link",className:v()(M.Im,qa.LinkIcon)})),s.createElement("span",{className:qa.debugLabel,"data-label":"SpanID:"})," ",Ba)))}const Ge=(Ot,Ft)=>{const Kt=(0,ze.dq)(Ot/1e3,{timeZone:Ft,defaultWithMS:!0}),Lt=Kt.split(" ");return` (${Lt[1]?Lt[1]:Kt})`},gt=(0,u.B)(Ot=>({expandedAccent:t.css`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 4px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:t.css`
      label: infoWrapper;
      border: 1px solid ${(0,h.h)(Ot,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class mt extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(Ft,Kt)=>{const{linksGetter:Lt,span:Ut}=this.props;return Lt(Ut,Ft,Kt)}}render(){const{color:Ft,columnDivision:Kt,detailState:Lt,logItemToggle:Ut,logsToggle:Rt,processToggle:$t,referenceItemToggle:_t,referencesToggle:jt,warningsToggle:an,stackTracesToggle:cn,span:rn,timeZone:hn,tagsToggle:Dn,traceStartTime:Rn,hoverIndentGuideIds:ea,addHoverIndentGuideId:Fn,removeHoverIndentGuideId:Vn,theme:aa,createSpanLink:Sa,focusedSpanId:la,createFocusSpanLink:Yn,topOfViewRefType:ia,datasourceType:Ia}=this.props,ha=gt(aa);return s.createElement(Ie.Z,null,s.createElement(Ie.Z.Cell,{width:Kt,style:{overflow:"hidden"}},s.createElement(Ke,{span:rn,showChildrenIcon:!1,hoverIndentGuideIds:ea,addHoverIndentGuideId:Fn,removeHoverIndentGuideId:Vn}),s.createElement(O.zx,{fill:"text",onClick:this._detailToggle,className:v()(ha.expandedAccent,(0,O.gN)(aa)),style:{borderColor:Ft},"data-testid":"detail-row-expanded-accent"})),s.createElement(Ie.Z.Cell,{width:1-Kt},s.createElement("div",{className:ha.infoWrapper,style:{borderTopColor:Ft}},s.createElement(je,{detailState:Lt,linksGetter:this._linksGetter,logItemToggle:Ut,logsToggle:Rt,processToggle:$t,referenceItemToggle:_t,referencesToggle:jt,warningsToggle:an,stackTracesToggle:cn,span:rn,timeZone:hn,tagsToggle:Dn,traceStartTime:Rn,createSpanLink:Sa,focusedSpanId:la,createFocusSpanLink:Yn,topOfViewRefType:ia,datasourceType:Ia}))))}}const Ye=(0,d.HE)(mt),ft=(0,u.B)(Ot=>{const{topOfViewRefType:Ft}=Ot,Kt=Ft===St.Explore?"fixed":"absolute";return{rowsWrapper:t.css`
      width: 100%;
    `,row:t.css`
      width: 100%;
    `,scrollToTopButton:t.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: ${Kt};
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `}});var St=(Ot=>(Ot.Explore="Explore",Ot.Panel="Panel",Ot))(St||{});const we={bar:28,detail:161,detailWithLogs:197},qe=5;function Je(Ot,Ft,Kt,Lt,Ut){if(!Ot)return[];Ut&&Lt&&(Ot=Ot.filter(_t=>Lt.has(_t.spanID)));let Rt=null;const $t=[];for(let _t=0;_t<Ot.length;_t++){const jt=Ot[_t],{spanID:an,depth:cn}=jt;let rn=!1;Rt!=null&&(cn>=Rt?rn=!0:Rt=null),!rn&&(Ft.has(an)&&(Rt=cn+1),$t.push({span:jt,isDetail:!1,spanIndex:_t}),Kt.has(an)&&$t.push({span:jt,isDetail:!0,spanIndex:_t}))}return $t}function ut(Ot){const[Ft,Kt]=Ot;return{left:Ft>0,right:Kt<1}}function Mt(Ot,Ft,Kt,Lt,Ut){return Ot?Je(Ot.spans,Ft,Kt,Lt,Ut):[]}const Wt=(0,c.Z)(Mt),ln=(0,c.Z)(b._h,n.isEqual),fn=(0,c.Z)(ut,n.isEqual);class pn extends s.Component{constructor(Ft){super(Ft),this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=Rt=>this.getRowStates()[Rt].spanIndex,this.mapSpanIndexToRowIndex=Rt=>{const $t=this.getRowStates().length;for(let _t=0;_t<$t;_t++){const{spanIndex:jt}=this.getRowStates()[_t];if(jt===Rt)return _t}throw new Error(`unable to find row for span index: ${Rt}`)},this.setListView=Rt=>{const $t=this.listView!==Rt;this.listView=Rt,Rt&&$t&&this.props.registerAccessors(this.getAccessors())},this.getKeyFromIndex=Rt=>{const{isDetail:$t,span:_t}=this.getRowStates()[Rt];return`${_t.traceID}--${_t.spanID}--${$t?"detail":"bar"}`},this.getIndexFromKey=Rt=>{const $t=Rt.split("--"),_t=$t[0],jt=$t[1],an=$t[2]==="detail",cn=this.getRowStates().length;for(let rn=0;rn<cn;rn++){const{span:hn,isDetail:Dn}=this.getRowStates()[rn];if(hn.spanID===jt&&hn.traceID===_t&&Dn===an)return rn}return-1},this.getRowHeight=Rt=>{const{span:$t,isDetail:_t}=this.getRowStates()[Rt];return _t?Array.isArray($t.logs)&&$t.logs.length?we.detailWithLogs:we.detail:we.bar},this.renderRow=(Rt,$t,_t,jt)=>{const{isDetail:an,span:cn,spanIndex:rn}=this.getRowStates()[_t];return an?this.renderSpanDetailRow(cn,Rt,$t,jt):this.renderSpanBarRow(cn,rn,Rt,$t,jt)},this.scrollToSpan=(Rt,$t)=>{if($t==null)return;const _t=this.getRowStates().findIndex(jt=>jt.span.spanID===$t);_t>=0&&this.listView?.scrollToIndex(_t,Rt)},this.scrollToTop=()=>{const{topOfViewRef:Rt,datasourceType:$t,trace:_t}=this.props;Rt?.current?.scrollIntoView({behavior:"smooth"}),(0,i.ff)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:$t,grafana_version:f.v.buildInfo.version,numServices:_t.services.length,numSpans:_t.spans.length})};const{setTrace:Kt,trace:Lt,uiFind:Ut}=Ft;Kt(Lt,Ut)}componentDidMount(){this.scrollToSpan(this.props.headerHeight,this.props.focusedSpanId)}shouldComponentUpdate(Ft){let Kt;for(Kt in Ft)if(Ft[Kt]!==this.props[Kt])if(Kt==="shouldScrollToFirstUiFindMatch"){if(Ft[Kt])return!0}else return!0;return!1}componentDidUpdate(Ft){const{registerAccessors:Kt,trace:Lt,headerHeight:Ut}=Ft,{shouldScrollToFirstUiFindMatch:Rt,clearShouldScrollToFirstUiFindMatch:$t,scrollToFirstVisibleSpan:_t,registerAccessors:jt,setTrace:an,trace:cn,uiFind:rn,focusedSpanId:hn,focusedSpanIdForSearch:Dn}=this.props;Lt!==cn&&an(cn,rn),this.listView&&Kt!==jt&&jt(this.getAccessors()),Rt&&(_t(),$t()),hn!==Ft.focusedSpanId&&this.scrollToSpan(Ut,hn),Dn!==Ft.focusedSpanIdForSearch&&this.scrollToSpan(Ut,Dn)}getRowStates(){const{childrenHiddenIDs:Ft,detailStates:Kt,trace:Lt,findMatchesIDs:Ut,showSpanFilterMatchesOnly:Rt}=this.props;return Wt(Lt,Ft,Kt,Ut,Rt)}getClipping(){const{currentViewRangeTime:Ft}=this.props;return fn(Ft)}getViewedBounds(){const{currentViewRangeTime:Ft,trace:Kt}=this.props,[Lt,Ut]=Ft;return ln({min:Kt.startTime,max:Kt.endTime,viewStart:Lt,viewEnd:Ut})}getAccessors(){const Ft=this.listView;if(!Ft)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:Ft.getViewHeight,getBottomRowIndexVisible:Ft.getBottomVisibleIndex,getTopRowIndexVisible:Ft.getTopVisibleIndex,getRowPosition:Ft.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(Ft,Kt,Lt,Ut,Rt){const{spanID:$t}=Ft,{serviceName:_t}=Ft.process,{childrenHiddenIDs:jt,childrenToggle:an,detailStates:cn,detailToggle:rn,findMatchesIDs:hn,spanNameColumnWidth:Dn,trace:Rn,spanBarOptions:ea,hoverIndentGuideIds:Fn,addHoverIndentGuideId:Vn,removeHoverIndentGuideId:aa,createSpanLink:Sa,focusedSpanId:la,focusedSpanIdForSearch:Yn,showSpanFilterMatchesOnly:ia,theme:Ia,datasourceType:ha}=this.props;if(!Rn)return null;const xa=(0,m._K)(_t,Ia),Wa=jt.has($t),as=cn.has($t),Xa=hn?hn.has($t):!1,Ba=$t===la||$t===Yn,ca=(0,b.yM)(Ft)||Wa&&(0,b.Qx)(Rn.spans,Kt);let ss=null;if(Wa){const da=(0,b.s2)(Rn.spans.slice(Kt));if(da){const Ga=this.getViewedBounds()(da.startTime,da.startTime+da.duration);ss={color:(0,m._K)(da.process.serviceName,Ia),operationName:da.operationName,serviceName:da.process.serviceName,viewEnd:Ga.end,viewStart:Ga.start}}}const Ya=Ft.tags.find(da=>da.key===o);let sa=null;!Ft.hasChildren&&Ya&&(0,b.JE)(Ft)&&(sa={serviceName:Ya.value,color:(0,m._K)(Ya.value,Ia)});const ja=ft(this.props);return s.createElement("div",{className:ja.row,key:Lt,style:Ut,...Rt},s.createElement(Be,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:xa,spanBarOptions:ea,columnDivision:Dn,isChildrenExpanded:!Wa,isDetailExpanded:as,isMatchingFilter:Xa,isFocused:Ba,showSpanFilterMatchesOnly:ia,numTicks:qe,onDetailToggled:rn,onChildrenToggled:an,rpc:ss,noInstrumentedServer:sa,showErrorIcon:ca,getViewedBounds:this.getViewedBounds(),traceStartTime:Rn.startTime,span:Ft,hoverIndentGuideIds:Fn,addHoverIndentGuideId:Vn,removeHoverIndentGuideId:aa,createSpanLink:Sa,datasourceType:ha}))}renderSpanDetailRow(Ft,Kt,Lt,Ut){const{spanID:Rt}=Ft,{serviceName:$t}=Ft.process,{detailLogItemToggle:_t,detailLogsToggle:jt,detailProcessToggle:an,detailReferencesToggle:cn,detailReferenceItemToggle:rn,detailWarningsToggle:hn,detailStackTracesToggle:Dn,detailStates:Rn,detailTagsToggle:ea,detailToggle:Fn,spanNameColumnWidth:Vn,trace:aa,timeZone:Sa,hoverIndentGuideIds:la,addHoverIndentGuideId:Yn,removeHoverIndentGuideId:ia,linksGetter:Ia,createSpanLink:ha,focusedSpanId:xa,createFocusSpanLink:Wa,topOfViewRefType:as,theme:Xa,datasourceType:Ba}=this.props,ca=Rn.get(Rt);if(!aa||!ca)return null;const ss=(0,m._K)($t,Xa),Ya=ft(this.props);return s.createElement("div",{className:Ya.row,key:Kt,style:{...Lt,zIndex:1},...Ut},s.createElement(Ye,{color:ss,columnDivision:Vn,onDetailToggled:Fn,detailState:ca,linksGetter:Ia,logItemToggle:_t,logsToggle:jt,processToggle:an,referenceItemToggle:rn,referencesToggle:cn,warningsToggle:hn,stackTracesToggle:Dn,span:Ft,timeZone:Sa,tagsToggle:ea,traceStartTime:aa.startTime,hoverIndentGuideIds:la,addHoverIndentGuideId:Yn,removeHoverIndentGuideId:ia,createSpanLink:ha,focusedSpanId:xa,createFocusSpanLink:Wa,topOfViewRefType:as,datasourceType:Ba}))}render(){const Ft=ft(this.props),{scrollElement:Kt}=this.props;return s.createElement(s.Fragment,null,s.createElement(g,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:50,viewBufferMin:50,itemsWrapperClassName:Ft.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:Kt}),s.createElement(r.h,{className:Ft.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const An=(0,d.HE)(pn)},88989:()=>{"use strict"},5861:(Y,T,e)=>{"use strict";e.d(T,{JE:()=>m,LU:()=>t.LU,Qx:()=>d,_h:()=>n,s2:()=>o,yM:()=>r});var t=e(320);function n(l){const{min:p,max:g,viewStart:y,viewEnd:v}=l,E=g-p,h=p+y*E,a=g-(1-v)*E-h;return(P,D)=>({start:(P-h)/a,end:(D-h)/a})}function c(l,p,g){return!Array.isArray(g.tags)||!g.tags.length?!1:g.tags.some(y=>y.key===l&&y.value===p)}const s=c.bind(null,"span.kind","client"),i=c.bind(null,"span.kind","server"),f=c.bind(null,"error",!0),u=c.bind(null,"error","true"),r=l=>f(l)||u(l);function d(l,p){const{depth:g}=l[p];let y=p+1;for(;y<l.length&&l[y].depth>g;y++)if(r(l[y]))return!0;return!1}function o(l){if(l.length<=1||!s(l[0]))return!1;const g=l[0].depth+1;let y=1;for(;y<l.length&&l[y].depth===g;){if(i(l[y]))return l[y];y++}return null}const m=l=>l.tags.some(({key:p,value:g})=>p==="span.kind"&&g==="client")},82736:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>r});var t=e(9892),n=e(9085),c=e.n(n),s=e(66111),i=e(72648),f=e(99746);const u=d=>o=>({LabeledList:t.css`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${d&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:t.css`
      label: LabeledListItem;
      display: inline-block;
      ${d&&`
        border-right: 1px solid ${(0,f.h)(o,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:t.css`
      label: LabeledListLabel;
      color: ${o.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:t.css`
      label: LabeledListValue;
      margin-right: 0.55rem;
    `});function r(d){const{className:o,divider:m=!1,items:l}=d,p=(0,i.wW)(u(m));return s.createElement("ul",{className:c()(p.LabeledList,o)},l.map(({key:g,label:y,value:v})=>s.createElement("li",{className:p.LabeledListItem,key:`${g}`},s.createElement("span",{className:p.LabeledListLabel},y),s.createElement("strong",{className:p.LabeledListValue},v))))}},95638:(Y,T,e)=>{"use strict";e.d(T,{DetailState:()=>la,NewTracePageHeader:()=>Fn,SpanBarSettings:()=>aa.ZP,TracePageHeader:()=>Fe,TraceTimelineViewer:()=>k,autoColor:()=>u.h,filterSpans:()=>rn,filterSpansNewTraceViewHeader:()=>Kt,transformTraceData:()=>Gt});var t=e(9892),n=e(66111),c=e(41818),s=e(35645),i=e(7804),f=e(72648),u=e(99746),r=e(21710),d=e.n(r);const m={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let l;function p(){if(l)return l;const He=new(d())(document.body);return l=He,He}function g(He){const it=p();Object.keys(He).forEach(xt=>{const Vt=He[xt];Vt&&it.bind(m[xt].binding,Vt)})}function y(){p().reset()}var v=e(9085),E=e.n(v),h=e(42413),C=e(55478),a=e(93804),P=e(8180);const D=()=>({TimelineCollapser:t.css`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function x(He){const{onExpandAll:it,onExpandOne:xt,onCollapseAll:Vt,onCollapseOne:sn}=He,en=(0,f.wW)(D);return n.createElement("div",{className:en.TimelineCollapser,"data-testid":"TimelineCollapser"},n.createElement(P.h,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:xt}),n.createElement(P.h,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:sn}),n.createElement(P.h,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:it}),n.createElement(P.h,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:Vt}))}var M=e(54373);const b=(0,i.B)(()=>({TimelineColumnResizer:t.css`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:t.css`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:t.css`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:t.css`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:t.css`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:t.css`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:t.css`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:t.css`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `}));class R extends n.PureComponent{constructor(it){super(it),this._setRootElm=xt=>{this._rootElm=xt},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:xt,width:Vt}=this._rootElm.getBoundingClientRect(),{min:sn,max:en}=this.props;return{clientXLeft:xt,width:Vt,maxValue:en,minValue:sn}},this._handleDragUpdate=({value:xt})=>{this.setState({dragPosition:xt})},this._handleDragEnd=({manager:xt,value:Vt})=>{xt.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(Vt)},this._dragManager=new M.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let it,xt;const{position:Vt,columnResizeHandleHeight:sn}=this.props,{dragPosition:en}=this.state;it=`${Vt*100}%`;const vn={left:it};let On=!1,yn=!1;const bn=b();if(this._dragManager.isDragging()&&this._rootElm&&en!=null){On=en<Vt,yn=en>Vt;const Ct=`${Math.min(Vt,en)*100}%`,Re=`calc(${(1-Math.max(Vt,en))*100}% - 1px)`;xt={left:Ct,right:Re}}else xt=vn;xt.height=sn;const Xn=On||yn;return n.createElement("div",{className:bn.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},n.createElement("div",{className:E()(bn.gripIcon,Xn&&bn.gripIconDragging),style:vn,"data-testid":"TimelineColumnResizer--gripIcon"}),n.createElement("div",{"aria-hidden":!0,className:E()(bn.dragger,Xn&&bn.draggerDragging,yn&&bn.draggerDraggingRight,On&&bn.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:xt,"data-testid":"TimelineColumnResizer--dragger"}))}}const S=(0,i.B)(()=>({TimelineViewingLayer:t.css`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:t.css`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:t.css`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:t.css`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:t.css`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:t.css`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:t.css`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:t.css`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function O(He){return Reflect.has(He,"isOutOfView")}function U(He,it,xt){return He+xt*(it-He)}function I(He,it,xt){return(xt-He)/(it-He)}function F(He,it){let[xt,Vt]=He<it?[He,it]:[it,He];return xt>=1||Vt<=0?{isOutOfView:!0}:(xt<0&&(xt=0),Vt>1&&(Vt=1),{isDraggingLeft:He>it,left:`${xt*100}%`,width:`${(Vt-xt)*100}%`})}function w(He,it,xt,Vt,sn){const en=I(He,it,xt),vn=I(He,it,Vt),On=F(en,vn);if(O(On))return null;const{isDraggingLeft:yn,left:bn,width:Xn}=On,Ct=S(),Re=(0,t.cx)({[Ct.TimelineViewingLayerDraggedDraggingRight]:!yn,[Ct.TimelineViewingLayerDraggedReframeDrag]:!sn,[Ct.TimelineViewingLayerDraggedShiftDrag]:sn});return n.createElement("div",{className:(0,t.cx)(Ct.TimelineViewingLayerDragged,Ct.TimelineViewingLayerDraggedDraggingLeft,Re),style:{left:bn,width:Xn},"data-testid":"Dragged"})}class K extends n.PureComponent{constructor(it){super(it),this._setRoot=xt=>{this._root=xt},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:xt,width:Vt}=this._root.getBoundingClientRect();return{clientXLeft:xt,width:Vt}},this._handleReframeMouseMove=({value:xt})=>{const[Vt,sn]=this.props.viewRangeTime.current,en=U(Vt,sn,xt);this.props.updateNextViewRangeTime({cursor:en})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:xt})=>{const{current:Vt,reframe:sn}=this.props.viewRangeTime,[en,vn]=Vt,On=U(en,vn,xt),bn={reframe:{anchor:sn?sn.anchor:On,shift:On}};this.props.updateNextViewRangeTime(bn)},this._handleReframeDragEnd=({manager:xt,value:Vt})=>{const{current:sn,reframe:en}=this.props.viewRangeTime,[vn,On]=sn,yn=U(vn,On,Vt),bn=en?en.anchor:yn,[Xn,Ct]=yn<bn?[yn,bn]:[bn,yn];xt.resetBounds(),this.props.updateViewRangeTime(Xn,Ct,"timeline-header")},this._draggerReframe=new M.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(it){const{boundsInvalidator:xt}=this.props;xt!==it.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:it}=this.props,{current:xt,cursor:Vt,reframe:sn,shiftEnd:en,shiftStart:vn}=it,[On,yn]=xt,bn=sn!=null||en!=null||vn!=null;let Xn;!bn&&Vt!=null&&Vt>=On&&Vt<=yn&&(Xn=`${I(On,yn,Vt)*100}%`);const Ct=S();return n.createElement("div",{"aria-hidden":!0,className:Ct.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},Xn!=null&&n.createElement("div",{className:Ct.TimelineViewingLayerCursorGuide,style:{left:Xn},"data-testid":"TimelineViewingLayer--cursorGuide"}),sn!=null&&w(On,yn,sn.anchor,sn.shift,!1),en!=null&&w(On,yn,yn,en,!0),vn!=null&&w(On,yn,On,vn,!0))}}const L=He=>({TimelineHeaderRow:t.css`
      label: TimelineHeaderRow;
      background: ${(0,u.h)(He,"#ececec")};
      border-bottom: 1px solid ${(0,u.h)(He,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:t.css`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:t.css`
      label: TimelineHeaderWrapper;
      align-items: center;
    `});function V(He){const{duration:it,nameColumnWidth:xt,numTicks:Vt,onCollapseAll:sn,onCollapseOne:en,onColummWidthChange:vn,onExpandAll:On,onExpandOne:yn,updateViewRangeTime:bn,updateNextViewRangeTime:Xn,viewRangeTime:Ct,columnResizeHandleHeight:Re}=He,[Te,nt]=Ct.current,Xe=(0,f.wW)(L);return n.createElement(a.Z,{className:Xe.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},n.createElement(a.Z.Cell,{className:E()(h.oD,h.H3,Xe.TimelineHeaderWrapper),width:xt},n.createElement("h4",{className:Xe.TimelineHeaderRowTitle},"Service & Operation"),n.createElement(x,{onCollapseAll:sn,onExpandAll:On,onCollapseOne:en,onExpandOne:yn})),n.createElement(a.Z.Cell,{width:1-xt},n.createElement(K,{boundsInvalidator:xt,updateNextViewRangeTime:Xn,updateViewRangeTime:bn,viewRangeTime:Ct}),n.createElement(C.Z,{numTicks:Vt,startTime:Te*it,endTime:nt*it,showLabels:!0})),n.createElement(R,{columnResizeHandleHeight:Re,position:xt,onChange:vn,min:.2,max:.85}))}var H=e(93183);const j=(0,i.B)(He=>({TraceTimelineViewer:t.css`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,u.h)(He,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,u.h)(He,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,u.h)(He,"teal")};
      }

      & .json-markup-null {
        color: ${(0,u.h)(He,"teal")};
      }

      & .json-markup-number {
        color: ${(0,u.h)(He,"blue","black")};
      }
    `})),A=5;class _ extends n.PureComponent{constructor(it){super(it),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,c.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,c.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,c.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,c.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"expandOne"})},this.state={height:0}}componentDidMount(){g({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:it,updateNextViewRangeTime:xt,updateViewRangeTime:Vt,viewRange:sn,traceTimeline:en,theme:vn,topOfViewRef:On,focusedSpanIdForSearch:yn,...bn}=this.props,{trace:Xn}=bn,Ct=j(vn);return n.createElement("div",{className:Ct.TraceTimelineViewer,ref:Re=>Re&&this.setState({height:Re.getBoundingClientRect().height})},n.createElement(V,{duration:Xn.duration,nameColumnWidth:en.spanNameColumnWidth,numTicks:A,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:it,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:sn.time,updateNextViewRangeTime:xt,updateViewRangeTime:Vt,columnResizeHandleHeight:this.state.height}),n.createElement(H.ZP,{...bn,...en,setSpanNameColumnWidth:it,currentViewRangeTime:sn.time.current,topOfViewRef:On,focusedSpanIdForSearch:yn,datasourceType:this.props.datasourceType}))}}const k=(0,f.HE)(_);var Q=e(82897),re=e(77258),Z=e(39904);const oe=()=>({NewWindowIconLarge:t.css`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function G(He){const{isLarge:it,className:xt,...Vt}=He,sn=(0,f.wW)(oe),en=E()({[sn.NewWindowIconLarge]:it},xt);return n.createElement(Z.J,{className:en,name:"anchor",...Vt})}G.defaultProps={isLarge:!1};const le=He=>n.createElement("a",{href:He.href,title:He.title,target:"_blank",rel:"noopener noreferrer",className:He.className},He.children," ",n.createElement(G,null));function ge(He){const{links:it}=He;return n.createElement(le,{href:it[0].url,title:it[0].text,className:He.className})}var ne=e(82736);const ue=100,te="<trace-without-root-span>",me=()=>({BreakableText:t.css`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),q=/\W*\w+\W*/g;function se(He){const{className:it,text:xt,wordRegexp:Vt=q}=He,sn=(0,f.wW)(me);if(!xt)return null;const en=[];Vt.exec("");let vn=Vt.exec(xt)||[xt];for(;vn;)en.push(n.createElement("span",{key:`${xt}-${en.length}`,className:it||sn.BreakableText},vn[0])),vn=Vt.exec(xt);return en}se.defaultProps={wordRegexp:q};const ae=He=>({TraceName:t.css`
      label: TraceName;
      font-size: ${He.typography.size.lg};
    `});function pe(He){const{className:it,traceName:xt}=He,Vt=(0,f.wW)(ae),sn=String(xt||te),en=n.createElement(se,{text:sn});return n.createElement("span",{className:E()(Vt.TraceName,it)},en)}var de=e(87855);const Me=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:ue,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function Ke(){return Me}function st(He){return(0,Q.get)(Ke(),He)}function Ie(He){const it=He.references?He.references.find(xt=>xt.refType==="CHILD_OF"):null;return it?it.span:null}const Ve=/#\{([^{}]*)\}/g;function _e(He){const it=new Set;return He.replace(Ve,(xt,Vt)=>(it.add(Vt),xt)),Array.from(it)}function tt(He,it,xt){return He.replace(Ve,(Vt,sn)=>{const en=xt[sn];return en==null?"":it(en)})}function dt(He,it){if(typeof He!="string")throw new Error("Invalid template");return{parameters:_e(He),template:tt.bind(null,He,it)}}function Oe(He){if(typeof He=="string")return it=>it===He;if(Array.isArray(He))return it=>He.indexOf(it)>-1;if(He==null)return()=>!0;throw new Error(`Invalid value: ${He}`)}const ye=He=>He;function Pe(He){try{const it=dt(He.url,encodeURIComponent),xt=dt(He.text,ye);return{object:He,type:Oe(He.type),key:Oe(He.key),value:Oe(He.value),url:it,text:xt,parameters:(0,Q.uniq)(it.parameters.concat(xt.parameters))}}catch(it){return console.error(`Ignoring invalid link pattern: ${it}`,He),null}}function be(He,it){if(it)return it.find(xt=>xt.key===He)}function Be(He,it){let xt=it;for(;xt;){const Vt=be(He,xt.tags)||be(He,xt.process.tags);if(Vt)return Vt;xt=Ie(xt)}}function ze(He,it){return He.template(it)}function lt(He,it){const xt=[],Vt=Object.keys(it).filter(sn=>typeof it[sn]=="string"||it[sn]==="number");return He?.filter(sn=>sn?.type("traces")).forEach(sn=>{const en={};sn?.parameters.every(On=>{const yn=On;return Vt.includes(yn)?(en[On]=it[yn],!0):!1})&&xt.push({url:ze(sn.url,en),text:ze(sn.text,en)})}),xt}function ht(He,it,xt,Vt){const sn=xt[Vt];let en="logs";const vn=it.process.tags===xt;vn&&(en="process"),it.tags===xt&&(en="tags");const yn=[];return He.forEach(bn=>{if(bn.type(en)&&bn.key(sn.key)&&bn.value(sn.value)){const Xn={};bn.parameters.every(Re=>{let Te=be(Re,xt);return!Te&&!vn&&(Te=Be(Re,it)),Te?(Xn[Re]=Te.value,!0):(console.warn(`Skipping link pattern, missing parameter ${Re} for key ${sn.key} in ${en}.`,bn.object),!1)})&&yn.push({url:ze(bn.url,Xn),text:ze(bn.text,Xn)})}}),yn}function vt(He,it){return(xt,Vt,sn)=>{if(He.length===0)return[];const en=Vt[sn];let vn=it.get(en);return vn||(vn=ht(He,xt,Vt,sn),it.set(en,vn)),vn}}const bt=(st("linkPatterns")||[]).map(Pe).filter(He=>Boolean(He)),ct=(0,de.Z)(10)(He=>{const it=[];return He?lt(bt,He):it}),Pt=vt(bt,new WeakMap);function ie(He){let it;const xt=new Set(He.map(({spanID:Vt})=>Vt));for(let Vt=0;Vt<He.length;Vt++){if(He[Vt].references&&He[Vt].references.some(({traceID:On,spanID:yn})=>On===He[Vt].traceID&&xt.has(yn)))continue;if(!it){it=He[Vt];continue}const en=He[Vt].references&&He[Vt].references.length||0,vn=it.references&&it.references.length||0;(en<vn||en===vn&&He[Vt].startTime<it.startTime)&&(it=He[Vt])}return it?`${it.process.serviceName}: ${it.operationName}`:""}const Ce=(0,Q.memoize)(ie,He=>He.length?He[0].traceID:0);function Ne(He){for(let it=0;it<He.length;it++){const xt=He[it].tags.filter(en=>en.key==="http.method"),Vt=He[it].tags.filter(en=>en.key==="http.status_code"),sn=He[it].tags.filter(en=>en.key==="http.url"||en.key==="http.target"||en.key==="http.path");if(xt.length>0||Vt.length>0||sn.length>0)return{method:xt,status:Vt,url:sn}}return{}}const Ze=(0,Q.memoize)(Ne,He=>He.length?He[0].traceID:0);var Qe=e(320),Le=e(13532);const Ue=He=>({theme:He,TracePageHeader:t.css`
      label: TracePageHeader;
      & > :last-child {
        border-bottom: 1px solid ${(0,u.h)(He,"#ccc")};
      }
    `,TracePageHeaderTitleRow:t.css`
      label: TracePageHeaderTitleRow;
      align-items: center;
      display: flex;
    `,TracePageHeaderBack:t.css`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderTitle:t.css`
      label: TracePageHeaderTitle;
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
      margin: 0 0 0 0.3em;
      padding-bottom: 0.5em;
    `,TracePageHeaderOverviewItems:t.css`
      label: TracePageHeaderOverviewItems;
      background-color: ${(0,u.h)(He,"#eee")};
      border-bottom: 1px solid ${(0,u.h)(He,"#e4e4e4")};
      padding: 0.25rem 0.5rem !important;
    `,TracePageHeaderOverviewItemValueDetail:E()(t.css`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:t.css`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,TracePageHeaderArchiveIcon:t.css`
      label: TracePageHeaderArchiveIcon;
      font-size: 1.78em;
      margin-right: 0.15em;
    `,TracePageHeaderTraceId:t.css`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
    `,titleBorderBottom:t.css`
      border-bottom: 1px solid ${(0,u.h)(He,"#e8e8e8")};
    `}),ve=(He,it,xt)=>{const Vt=(0,re.dq)(He.startTime/1e3,{timeZone:it,defaultWithMS:!0}),sn=Vt.match(/^(.+)(:\d\d\.\d+)$/);return sn?n.createElement("span",{className:xt.TracePageHeaderOverviewItemValue},sn[1],n.createElement("span",{className:xt.TracePageHeaderOverviewItemValueDetail},sn[2])):Vt},Se=[{key:"timestamp",label:"Trace Start:",renderer:ve},{key:"duration",label:"Duration:",renderer:He=>(0,Qe.LU)(He.duration)},{key:"service-count",label:"Services:",renderer:He=>new Set((0,Q.values)(He.processes).map(it=>it.serviceName)).size},{key:"depth",label:"Depth:",renderer:He=>(0,Q.get)((0,Q.maxBy)(He.spans,"depth"),"depth",0)+1},{key:"span-count",label:"Total Spans:",renderer:He=>He.spans.length}];function Fe(He){const{trace:it,updateNextViewRangeTime:xt,updateViewRangeTime:Vt,viewRange:sn,timeZone:en}=He,vn=(0,f.wW)(Ue),On=n.useMemo(()=>it?ct(it):[],[it]);if(!it)return null;const yn=Se.map(Xn=>{const{renderer:Ct,...Re}=Xn;return{...Re,value:Ct(it,en,vn)}}),bn=n.createElement("h1",{className:vn.TracePageHeaderTitle},n.createElement(pe,{traceName:Ce(it.spans)})," ",n.createElement("small",{className:E()(vn.TracePageHeaderTraceId,h.pQ)},it.traceID));return n.createElement("header",{className:vn.TracePageHeader},n.createElement("div",{className:E()(vn.TracePageHeaderTitleRow,vn.titleBorderBottom)},On&&On.length>0&&n.createElement(ge,{links:On,className:vn.TracePageHeaderBack}),bn),yn&&n.createElement(ne.Z,{className:vn.TracePageHeaderOverviewItems,items:yn}),n.createElement(Le.Z,{trace:it,viewRange:sn,updateNextViewRangeTime:xt,updateViewRangeTime:Vt}))}var je=e(61860),Ge=e(19985),gt=e(47694),mt=e(65066),Ye=e(31403);const ft=He=>({ActionButton:t.css`
      label: ActionButton;
      overflow: hidden;
      position: relative;
      width: 110px;
      justify-content: center;
      &:after {
        content: '';
        background: ${He.colors.primary.main};
        display: block;
        position: absolute;
        right: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: all 0.8s;
      }
      &:active:after {
        margin: 0;
        opacity: 0.3;
        transition: 0s;
      }
    `});function St(He){const{onClick:it,ariaLabel:xt,label:Vt,icon:sn}=He,en=(0,f.wW)(ft);return n.createElement(Ye.zx,{className:en.ActionButton,variant:"secondary",fill:"outline",type:"button",icon:sn,"aria-label":xt,onClick:it},Vt)}const we=He=>({TracePageActions:t.css`
      label: TracePageActions;
      display: flex;
      gap: 4px;
      margin-top: 2px;
    `,feedback:t.css`
      margin: 6px;
      color: ${He.colors.text.secondary};
      font-size: ${He.typography.bodySmall.fontSize};
      &:hover {
        color: ${He.colors.text.link};
      }
    `});function qe(He){const{traceId:it,data:xt,app:Vt}=He,sn=(0,f.l4)(),en=we(sn),[vn,On]=(0,n.useState)(!1),yn=()=>{navigator.clipboard.writeText(it),On(!0),setTimeout(()=>{On(!1)},5e3)},bn=()=>{const Xn=(0,mt.gb)(xt,"Trace-"+it.substring(it.length-6));(0,c.ff)("grafana_traces_download_traces_clicked",{app:Vt,grafana_version:gt.vc.buildInfo.version,trace_format:Xn,location:"trace-view"})};return n.createElement("div",{className:en.TracePageActions},n.createElement("a",{href:"https://forms.gle/RZDEx8ScyZNguDoC8",className:en.feedback,title:"Share your thoughts about tracing in Grafana.",target:"_blank",rel:"noreferrer noopener"},n.createElement(Z.J,{name:"comment-alt-message"})," Give feedback"),n.createElement(St,{onClick:yn,ariaLabel:"Copy Trace ID",label:vn?"Copied!":"Trace ID",icon:"copy"}),n.createElement(St,{onClick:bn,ariaLabel:"Export Trace",label:"Export",icon:"save"}))}var Je=e(13572),ut=e(26418),Mt=e(2352),Wt=e(11543),ln=e(81764),fn=e(52081),pn=e(8581),An=e(46967),Ot=e(75151),Ft=e(8944);function Kt(He,it){if(!it)return;let xt=!1;He.serviceName&&(it=_t(it,He),xt=!0),He.spanName&&(it=jt(it,He),xt=!0),(He.from||He.to)&&(it=an(it,He),xt=!0);const Vt=Lt(it,He.tags);return Vt&&(it=Vt,xt=!0),xt?new Set(it.map(sn=>sn.spanID)):void 0}const Lt=(He,it)=>{if(it=it.filter(xt=>xt.key&&xt.key!==""||xt.value),it.length>0)return He.filter(xt=>it.every(Vt=>{if(Vt.key&&Vt.value){if(xt.tags.some(sn=>Rt(Vt,sn)))return $t(Vt.operator,!0);if(xt.process.tags.some(sn=>Rt(Vt,sn)))return $t(Vt.operator,!0);if(xt.logs.some(sn=>sn.fields.some(en=>Rt(Vt,en))))return $t(Vt.operator,!0)}else if(Vt.key){if(xt.tags.some(sn=>Ut(Vt.key,sn.key)))return $t(Vt.operator,!0);if(xt.process.tags.some(sn=>Ut(Vt.key,sn.key)))return $t(Vt.operator,!0);if(xt.logs&&xt.logs.some(sn=>sn.fields.some(en=>Ut(Vt.key,en.key))))return $t(Vt.operator,!0)}return $t(Vt.operator,!1)}))},Ut=(He,it)=>He===it.toString(),Rt=(He,it)=>He.key===it.key.toString()&&He.value===it.value.toString(),$t=(He,it)=>He==="="?it:!it,_t=(He,it)=>He.filter(xt=>it.serviceNameOperator==="="?xt.process.serviceName===it.serviceName:xt.process.serviceName!==it.serviceName),jt=(He,it)=>He.filter(xt=>it.spanNameOperator==="="?xt.operationName===it.spanName:xt.operationName!==it.spanName),an=(He,it)=>{const xt=cn(it?.from||""),Vt=cn(it?.to||"");let sn=[];if(xt&&(sn=He.filter(en=>it.fromOperator===">"?en.duration>xt:en.duration>=xt)),Vt){const en=vn=>it.toOperator==="<"?vn.duration<Vt:vn.duration<=Vt;sn=sn.length>0?sn.filter(vn=>en(vn)):He.filter(vn=>en(vn))}return sn},cn=He=>{if(He.includes("\u03BCs"))return parseFloat(He.split("\u03BCs")[0]);if(He.includes("ms"))return parseFloat(He.split("ms")[0])*1e3;if(He.includes("s"))return parseFloat(He.split("s")[0])*1e3*1e3;if(He.includes("m"))return parseFloat(He.split("m")[0])*1e3*1e3*60;if(He.includes("h"))return parseFloat(He.split("h")[0])*1e3*1e3*60*60};function rn(He,it){if(!it)return;const xt=[],Vt=[];He.split(/\s+/).filter(Boolean).forEach(yn=>{yn[0]==="-"?Vt.push(yn.slice(1).toLowerCase()):xt.push(yn.toLowerCase())});const sn=(yn,bn)=>yn.some(Xn=>bn.toLowerCase().includes(Xn)),en=yn=>yn?yn.some(bn=>sn(Vt,bn.key)?!1:sn(xt,bn.key)||sn(xt,bn.value.toString())):!1,vn=yn=>sn(xt,yn.operationName)||sn(xt,yn.process.serviceName)||en(yn.tags)||yn.logs!==null&&yn.logs.some(bn=>en(bn.fields))||en(yn.process.tags)||xt.some(bn=>bn===yn.spanID);return new Set(it.filter(vn).map(yn=>yn.spanID))}const hn=(0,n.memo)(function(it){const{search:xt,spanFilterMatches:Vt,showSpanFilterMatchesOnly:sn,setShowSpanFilterMatchesOnly:en,setFocusedSpanIdForSearch:vn,datasourceType:On,reset:yn,totalSpans:bn}=it,[Xn,Ct]=(0,n.useState)(-1),Re=(0,f.wW)(Dn);(0,n.useEffect)(()=>{Ct(-1),vn("")},[vn,Vt]),(0,n.useEffect)(()=>{if(Vt){const on=Array.from(Vt);vn(on[Xn])}},[Xn,vn,Vt]);const Te=()=>{if((0,c.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:On,grafana_version:s.v.buildInfo.version,direction:"next"}),Xn===-1||Vt&&Xn===Vt.size-1){Ct(0);return}Ct(Xn+1)},nt=()=>{if((0,c.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:On,grafana_version:s.v.buildInfo.version,direction:"prev"}),Vt&&(Xn===-1||Xn===0)){Ct(Vt.size-1);return}Ct(Xn-1)},Xe=Vt&&Vt?.size>0,Nt=(0,n.useMemo)(()=>xt.serviceName&&xt.serviceName!==""||xt.spanName&&xt.spanName!==""||cn(xt.from||"")||cn(xt.to||"")||xt.tags.length>1||xt.tags.some(on=>on.key),[xt.serviceName,xt.spanName,xt.from,xt.to,xt.tags]),zt=Vt?.size===1?"match":"matches",wt=Vt?.size===0?n.createElement(n.Fragment,null,n.createElement("span",null,"0 matches"),n.createElement(je.u,{content:"There are 0 span matches for the filters selected. Please try removing some of the selected filters.",placement:"left"},n.createElement("span",{className:Re.matchesTooltip},n.createElement(Z.J,{name:"info-circle",size:"lg"})))):Xn!==-1?`${Xn+1}/${Vt?.size} ${zt}`:`${Vt?.size} ${zt}`;return n.createElement("div",{className:Re.searchBar},n.createElement("div",{className:Re.buttons},n.createElement(n.Fragment,null,n.createElement("div",{className:Re.resetButton},n.createElement(Ye.zx,{variant:"destructive",disabled:!Nt,type:"button",fill:"outline","aria-label":"Reset filters button",onClick:yn},"Reset"),n.createElement("div",{className:Re.matchesOnly},n.createElement(Ft.r,{value:sn,onChange:on=>en(on.currentTarget.checked??!1),label:"Show matches only switch"}),n.createElement("span",{onClick:()=>en(!sn)},"Show matches only"))),n.createElement("div",{className:Re.nextPrevButtons},n.createElement("span",{className:Re.matches},Vt?wt:`${bn} spans`),n.createElement(Ye.zx,{variant:"secondary",disabled:!Xe,type:"button",fill:"outline","aria-label":"Prev result button",onClick:nt},"Prev"),n.createElement(Ye.zx,{variant:"secondary",disabled:!Xe,type:"button",fill:"outline","aria-label":"Next result button",onClick:Te},"Next")))))}),Dn=()=>({searchBar:t.css`
      display: inline;
    `,matchesOnly:t.css`
      display: inline-flex;
      margin: 0 0 0 10px;
      vertical-align: middle;

      span {
        cursor: pointer;
        margin: -3px 0 0 5px;
      }
    `,buttons:t.css`
      display: flex;
      justify-content: flex-end;
      margin: 5px 0 0 0;
    `,resetButton:t.css`
      order: 1;
    `,nextPrevButtons:t.css`
      margin-left: auto;
      order: 2;

      button {
        margin-left: 8px;
      }
    `,matches:t.css`
      margin-right: 5px;
    `,matchesTooltip:t.css`
      color: #aaa;
      margin: -2px 0 0 10px;
    `}),Rn=(0,n.memo)(He=>{const{trace:it,search:xt,setSearch:Vt,showSpanFilters:sn,setShowSpanFilters:en,showSpanFilterMatchesOnly:vn,setShowSpanFilterMatchesOnly:On,setFocusedSpanIdForSearch:yn,spanFilterMatches:bn,datasourceType:Xn}=He,Ct={...(0,f.wW)(ea)},[Re,Te]=(0,n.useState)(),[nt,Xe]=(0,n.useState)(),[Nt,zt]=(0,n.useState)(),[wt,on]=(0,n.useState)({}),qt=(0,n.useCallback)(()=>{Te(void 0),Xe(void 0),zt(void 0),on({}),Vt(Ot.js)},[Vt]);if((0,n.useEffect)(()=>{qt()},[qt,it]),!it)return null;const un=()=>{if(!Re){const $n=it.spans.map(zn=>zn.process.serviceName);Te((0,Q.uniq)($n).sort().map(Je.E))}},tn=()=>{if(!nt){const $n=it.spans.map(zn=>zn.operationName);Xe((0,Q.uniq)($n).sort().map(Je.E))}},yt=()=>{if(!Nt){let $n=[],zn=[];it.spans.forEach(ma=>{ma.tags.forEach(fa=>{$n.push(fa.key)}),ma.process.tags.forEach(fa=>{$n.push(fa.key)}),ma.logs!==null&&ma.logs.forEach(fa=>{fa.fields.forEach(kn=>{zn.push(kn.key)})})}),$n=(0,Q.uniq)($n).sort(),zn=(0,Q.uniq)(zn).sort(),zt([...$n,...zn].map(Je.E))}},jn=async $n=>{const zn=[];return it.spans.forEach(ma=>{const fa=ma.tags.find(ga=>ga.key===$n)?.value;fa&&zn.push(fa.toString());const kn=ma.process.tags.find(ga=>ga.key===$n)?.value;kn&&zn.push(kn.toString()),ma.logs!==null&&ma.logs.forEach(ga=>{const Fa=ga.fields.find(bs=>bs.key===$n)?.value;Fa&&zn.push(Fa.toString())})}),(0,Q.uniq)(zn).sort().map(Je.E)},ra=($n,zn)=>{Vt({...xt,tags:xt.tags?.map(fa=>fa.id===$n.id?{...fa,key:zn?.value||"",value:void 0}:fa)}),(async()=>{if(zn?.value)on({...wt,[$n.id]:await jn(zn.value)});else{const fa={...wt};fa[$n.id]&&delete fa[$n.id],on(fa)}})()},Da=()=>{const $n={id:(0,Ot.kb)(),operator:"="};Vt({...xt,tags:[...xt.tags,$n]})},Ea=$n=>{let zn=xt.tags.filter(ma=>ma.id!==$n);zn.length===0&&(zn=[{id:(0,Ot.kb)(),operator:"="}]),Vt({...xt,tags:zn})},ba=n.createElement(je.u,{content:"Filter your spans below. The more filters, the more specific the filtered spans.",placement:"right"},n.createElement("span",{className:Ct.collapseLabel},"Span Filters",n.createElement(Z.J,{size:"md",name:"info-circle"})));return n.createElement("div",{className:Ct.container},n.createElement(Mt.U,{label:ba,collapsible:!0,isOpen:sn,onToggle:en},n.createElement(Wt.Z,null,n.createElement(ln._,{label:"Service Name",labelWidth:16},n.createElement(fn.Lh,{spacing:"xs"},n.createElement(pn.Ph,{"aria-label":"Select service name operator",onChange:$n=>Vt({...xt,serviceNameOperator:$n.value}),options:[(0,Je.E)("="),(0,Je.E)("!=")],value:xt.serviceNameOperator}),n.createElement(pn.Ph,{"aria-label":"Select service name",isClearable:!0,onChange:$n=>Vt({...xt,serviceName:$n?.value||""}),onOpenMenu:un,options:Re,placeholder:"All service names",value:xt.serviceName||null})))),n.createElement(Wt.Z,null,n.createElement(ln._,{label:"Span Name",labelWidth:16},n.createElement(fn.Lh,{spacing:"xs"},n.createElement(pn.Ph,{"aria-label":"Select span name operator",onChange:$n=>Vt({...xt,spanNameOperator:$n.value}),options:[(0,Je.E)("="),(0,Je.E)("!=")],value:xt.spanNameOperator}),n.createElement(pn.Ph,{"aria-label":"Select span name",isClearable:!0,onChange:$n=>Vt({...xt,spanName:$n?.value||""}),onOpenMenu:tn,options:nt,placeholder:"All span names",value:xt.spanName||null})))),n.createElement(Wt.Z,null,n.createElement(ln._,{label:"Duration",labelWidth:16},n.createElement(fn.Lh,{spacing:"xs"},n.createElement(pn.Ph,{"aria-label":"Select from operator",onChange:$n=>Vt({...xt,fromOperator:$n.value}),options:[(0,Je.E)(">"),(0,Je.E)(">=")],value:xt.fromOperator}),n.createElement(An.I,{"aria-label":"Select from value",onChange:$n=>Vt({...xt,from:$n.currentTarget.value}),placeholder:"e.g. 100ms, 1.2s",value:xt.from||"",width:18}),n.createElement(pn.Ph,{"aria-label":"Select to operator",onChange:$n=>Vt({...xt,toOperator:$n.value}),options:[(0,Je.E)("<"),(0,Je.E)("<=")],value:xt.toOperator}),n.createElement(An.I,{"aria-label":"Select to value",onChange:$n=>Vt({...xt,to:$n.currentTarget.value}),placeholder:"e.g. 100ms, 1.2s",value:xt.to||"",width:18})))),n.createElement(Wt.Z,null,n.createElement(ln._,{label:"Tags",labelWidth:16,tooltip:"Filter by tags, process tags or log fields in your spans."},n.createElement("div",null,xt.tags.map(($n,zn)=>n.createElement("div",{key:zn},n.createElement(fn.Lh,{spacing:"xs",width:"auto"},n.createElement(pn.Ph,{"aria-label":"Select tag key",isClearable:!0,key:$n.key,onChange:ma=>ra($n,ma),onOpenMenu:yt,options:Nt,placeholder:"Select tag",value:$n.key||null}),n.createElement(pn.Ph,{"aria-label":"Select tag operator",onChange:ma=>{Vt({...xt,tags:xt.tags?.map(fa=>fa.id===$n.id?{...fa,operator:ma.value}:fa)})},options:[(0,Je.E)("="),(0,Je.E)("!=")],value:$n.operator}),n.createElement("span",{className:Ct.tagValues},n.createElement(pn.Ph,{"aria-label":"Select tag value",isClearable:!0,key:$n.value,onChange:ma=>{Vt({...xt,tags:xt.tags?.map(fa=>fa.id===$n.id?{...fa,value:ma?.value||""}:fa)})},options:wt[$n.id]?wt[$n.id]:[],placeholder:"Select value",value:$n.value})),n.createElement(ut.AccessoryButton,{"aria-label":"Remove tag",variant:"secondary",icon:"times",onClick:()=>Ea($n.id),title:"Remove tag"}),n.createElement("span",{className:Ct.addTag},xt?.tags?.length&&zn===xt.tags.length-1&&n.createElement(ut.AccessoryButton,{"aria-label":"Add tag",variant:"secondary",icon:"plus",onClick:Da,title:"Add tag"})))))))),n.createElement(hn,{search:xt,spanFilterMatches:bn,showSpanFilterMatchesOnly:vn,setShowSpanFilterMatchesOnly:On,setFocusedSpanIdForSearch:yn,datasourceType:Xn,reset:qt,totalSpans:it.spans.length})))});Rn.displayName="SpanFilters";const ea=()=>({container:t.css`
      margin: 0.5em 0 -8px 0;
      z-index: 5;

      & > div {
        border-left: none;
        border-right: none;
      }
    `,collapseLabel:t.css`
      svg {
        color: #aaa;
        margin: -2px 0 0 10px;
      }
    `,addTag:t.css`
      margin: 0 0 0 10px;
    `,tagValues:t.css`
      max-width: 200px;
    `}),Fn=(0,n.memo)(He=>{const{trace:it,data:xt,app:Vt,timeZone:sn,search:en,setSearch:vn,showSpanFilters:On,setShowSpanFilters:yn,showSpanFilterMatchesOnly:bn,setShowSpanFilterMatchesOnly:Xn,setFocusedSpanIdForSearch:Ct,spanFilterMatches:Re,datasourceType:Te,setHeaderHeight:nt}=He,Xe={...(0,f.wW)(Ue),...(0,f.wW)(Vn)};(0,n.useEffect)(()=>{nt(document.querySelector("."+Xe.header)?.scrollHeight??0)},[nt,On,Xe.header]);const Nt=(0,n.useMemo)(()=>it?ct(it):[],[it]);if(!it)return null;const zt=n.createElement("h1",{className:E()(Xe.title)},n.createElement(pe,{traceName:Ce(it.spans)}),n.createElement("small",{className:Xe.duration},(0,Qe.LU)(it.duration))),{method:wt,status:on,url:qt}=Ze(it.spans);let un="green";return on&&on.length>0&&(on[0].value.toString().charAt(0)==="4"?un="orange":on[0].value.toString().charAt(0)==="5"&&(un="red")),n.createElement("header",{className:Xe.header},n.createElement("div",{className:Xe.titleRow},Nt&&Nt.length>0&&n.createElement(ge,{links:Nt,className:Xe.TracePageHeaderBack}),zt,n.createElement(qe,{traceId:it.traceID,data:xt,app:Vt})),n.createElement("div",{className:Xe.subtitle},n.createElement("span",{className:Xe.timestamp},ve(it,sn,Xe)),n.createElement("span",{className:Xe.tagMeta},wt&&wt.length>0&&n.createElement(je.u,{content:"http.method",interactive:!0},n.createElement("span",{className:Xe.tag},n.createElement(Ge.C,{text:wt[0].value,color:"blue"}))),on&&on.length>0&&n.createElement(je.u,{content:"http.status_code",interactive:!0},n.createElement("span",{className:Xe.tag},n.createElement(Ge.C,{text:on[0].value,color:un}))),qt&&qt.length>0&&n.createElement(je.u,{content:"http.url or http.target or http.path",interactive:!0},n.createElement("span",{className:Xe.url},qt[0].value)))),n.createElement(Rn,{trace:it,showSpanFilters:On,setShowSpanFilters:yn,showSpanFilterMatchesOnly:bn,setShowSpanFilterMatchesOnly:Xn,search:en,setSearch:vn,spanFilterMatches:Re,setFocusedSpanIdForSearch:Ct,datasourceType:Te}))});Fn.displayName="NewTracePageHeader";const Vn=He=>({header:t.css`
      label: TracePageHeader;
      background-color: ${He.colors.background.primary};
      padding: 0.5em 0 0 0;
      position: sticky;
      top: 0;
      z-index: 5;
    `,titleRow:t.css`
      align-items: flex-start;
      display: flex;
      padding: 0 8px;
    `,title:t.css`
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
    `,subtitle:t.css`
      flex: 1;
      line-height: 1em;
      margin: -0.5em 0.5em 0.75em 0.5em;
    `,tag:t.css`
      margin: 0 0.5em 0 0;
    `,duration:t.css`
      color: #aaa;
      margin: 0 0.75em;
    `,timestamp:t.css`
      vertical-align: middle;
    `,tagMeta:t.css`
      margin: 0 0.75em;
      vertical-align: text-top;
    `,url:t.css`
      margin: -2.5px 0.3em;
      height: 15px;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
      max-width: 30%;
      display: inline-block;
    `});var aa=e(52541),Sa=e(88989);class la{constructor(it){const{isTagsOpen:xt,isProcessOpen:Vt,isReferencesOpen:sn,isWarningsOpen:en,isStackTracesOpen:vn,logs:On,references:yn}=it||{};this.isTagsOpen=Boolean(xt),this.isProcessOpen=Boolean(Vt),this.isReferencesOpen=Boolean(sn),this.isWarningsOpen=Boolean(en),this.isStackTracesOpen=Boolean(vn),this.logs={isOpen:Boolean(On&&On.isOpen),openedItems:On&&On.openedItems?new Set(On.openedItems):new Set},this.references={isOpen:Boolean(yn&&yn.isOpen),openedItems:yn&&yn.openedItems?new Set(yn.openedItems):new Set}}toggleTags(){const it=new la(this);return it.isTagsOpen=!this.isTagsOpen,it}toggleProcess(){const it=new la(this);return it.isProcessOpen=!this.isProcessOpen,it}toggleReferences(){const it=new la(this);return it.references.isOpen=!this.references.isOpen,it}toggleReferenceItem(it){const xt=new la(this);return xt.references.openedItems.has(it)?xt.references.openedItems.delete(it):xt.references.openedItems.add(it),xt}toggleWarnings(){const it=new la(this);return it.isWarningsOpen=!this.isWarningsOpen,it}toggleStackTraces(){const it=new la(this);return it.isStackTracesOpen=!this.isStackTracesOpen,it}toggleLogs(){const it=new la(this);return it.logs.isOpen=!this.logs.isOpen,it}toggleLogItem(it){const xt=new la(this);return xt.logs.openedItems.has(it)?xt.logs.openedItems.delete(it):xt.logs.openedItems.add(it),xt}}var Yn=e(90158);class ia{static iterFunction(it,xt=0){return Vt=>it(Vt.value,Vt,xt)}static searchFunction(it){return typeof it=="function"?it:(xt,Vt)=>it instanceof ia?Vt===it:xt===it}constructor(it,xt=[]){this.value=it,this.children=xt}get depth(){return this.children?.reduce((it,xt)=>Math.max(xt.depth+1,it),1)}get size(){let it=0;return this.walk(()=>it++),it}addChild(it){return this.children?.push(it instanceof ia?it:new ia(it)),this}find(it){if(ia.iterFunction(ia.searchFunction(it))(this))return this;for(let Vt=0;Vt<this.children.length;Vt++){const sn=this.children[Vt].find(it);if(sn)return sn}return null}getPath(it){const xt=ia.iterFunction(ia.searchFunction(it)),Vt=(sn,en)=>{const vn=en.concat([sn]);if(xt(sn))return vn;for(let On=0;On<sn.children.length;On++){const yn=sn.children[On],bn=Vt(yn,vn);if(bn)return bn}return null};return Vt(this,[])}walk(it,xt=0){const Vt=[];let sn=xt;for(Vt.push({node:this,depth:sn});Vt.length;){const en=Vt.pop();if(en){const{node:vn,depth:On}=en;it(vn.value,vn,On),sn=(On||0)+1;let yn=vn.children.length-1;for(;yn>=0;)Vt.push({node:vn.children[yn],depth:sn}),yn--}}}}function Ia(He,it){return He.localeCompare(it)}function ha(He,it){return He-it}function xa(He){return`sorted ${He===1?"ascending":"descending"}`}function Wa(He,it){const{defaultDir:xt=1}=it;return{key:it.name,dir:He.key===it.name?-1*He.dir:xt}}const as=He=>He.serviceName,Xa=He=>He.tags;var Ba=e(27303);const ca=He=>He.spanID,ss=He=>He.operationName,Ya=He=>He.duration,sa=He=>He.startTime,ja=He=>He.processID,da=He=>He.references||[],Ga=(0,Yn.P1)((0,Yn.P1)(({span:He})=>He,da),({type:He})=>He,(He,it)=>He.find(xt=>xt.refType===it)),qa=(0,Yn.P1)(He=>Ga({span:He,type:"CHILD_OF"}),He=>He?He.spanID:null),Ka=He=>{if(!He.process)throw new Error(`
      you must hydrate the spans with the processes, perhaps
      using hydrateSpansWithProcesses(), before accessing a span's process
    `);return He.process},ts=(0,Yn.P1)(Ka,as),va=(0,Yn.P1)(({spans:He})=>He,({leftBound:He})=>He,({rightBound:He})=>He,(He,it,xt)=>He.filter(Vt=>sa(Vt)>=it&&sa(Vt)<=xt)),ns=(0,Yn.P1)(({spans:He})=>He,({text:He})=>He,(He,it)=>He.filter(xt=>xt?(0,Ba.C)(`${ts(xt)} ${ss(xt)}`,it).found:!1)),xs=He=>He.traceID,hs=He=>He.spans,rr=He=>He.processes,Is=(0,Yn.P1)(He=>He.span,He=>He.processes,(He,it)=>({...He,process:it[ja(He)]})),ur=(0,Yn.P1)(hs,He=>He.reduce((it,xt)=>it.set(ca(xt),xt),new Map)),mr="__root__";function os(He){const it=new Map(He.spans.map(en=>[en.spanID,new ia(en.spanID)])),xt=new Map(He.spans.map(en=>[en.spanID,en])),Vt=new ia(mr);He.spans.forEach(en=>{const vn=it.get(en.spanID);if(Array.isArray(en.references)&&en.references.length){const{refType:On,spanID:yn}=en.references[0];if(On==="CHILD_OF"||On==="FOLLOWS_FROM")(it.get(yn)||Vt).children?.push(vn);else throw new Error(`Unrecognized ref type: ${On}`)}else Vt.children.push(vn)});const sn=(en,vn)=>{const On=en?.value?xt.get(en.value.toString()):void 0,yn=vn?.value?xt.get(vn.value.toString()):void 0;return+(On?.startTime>yn?.startTime)||+(On?.startTime===yn?.startTime)-1};return He.spans.forEach(en=>{const vn=it.get(en.spanID);vn.children.length>1&&vn?.children.sort(sn)}),Vt.children.sort(sn),Vt}const Vs=He=>{const it=hs(He),xt=rr(He);return{...He,spans:it.map(Vt=>Is({span:Vt,processes:xt}))}},is=(0,Yn.P1)(hs,He=>He.length),zs=(0,Yn.P1)(hs,He=>He.reduce((it,xt)=>it?Math.min(it,sa(xt)):sa(xt),0)),ls=(0,Yn.P1)(hs,zs,(He,it)=>He.reduce((xt,Vt)=>xt?Math.max(sa(Vt)-it+Ya(Vt),xt):Ya(Vt),0)),ws=(0,Yn.P1)(os,ur,(He,it)=>He.children.map(xt=>it.get(xt.value)).sort((xt,Vt)=>ha(sa(xt),sa(Vt)))[0]),Ws=(0,Yn.P1)(os,He=>He.depth-1),fr=(0,Yn.P1)((0,Yn.P1)(He=>He.trace,os),(0,Yn.P1)(He=>He.span,ca),(He,it)=>He.getPath(it).length-1),Js=(0,Yn.P1)(rr,He=>Object.keys(He).reduce((it,xt)=>it.add(as(He[xt])),new Set)),Xs=(0,Yn.P1)(Js,He=>He.size),Hs={ms:Qe.Cz,s:Qe.Gk},or=(0,Yn.P1)(ls,He=>He>=Qe.WT?Hs.s:Hs.ms),gr=(0,Yn.P1)(({duration:He})=>He,({unit:He})=>Hs[He],(He,it)=>it(He)),ks=(0,Yn.P1)(({duration:He})=>He,(0,Yn.P1)(({trace:He})=>He,or),(He,it)=>it(He)),pr=(0,Yn.P1)(({trace:He})=>He,({spans:He})=>He,({sort:He})=>He,(He,it,{dir:xt,comparator:Vt,selector:sn})=>[...it].sort((en,vn)=>xt*Vt(sn(en,He),sn(vn,He)))),hr=(0,Yn.P1)((0,Yn.P1)(He=>He.trace,os),(0,Yn.P1)(He=>He.span,ca),(He,it)=>{const xt=He.find(it);return xt?xt.size-1:-1}),qs=(0,Yn.P1)((0,Yn.P1)((0,Yn.P1)(Vs,ws),(0,Yn.zB)({name:ss,serviceName:ts})),({name:He,serviceName:it})=>`${it}: ${He}`),vr=(0,Yn.P1)(({spans:He})=>He,(0,Yn.P1)(({trace:He})=>He,os),({collapsed:He})=>He,(He,it,xt)=>{const Vt=xt.reduce((sn,en)=>(it.find(en).walk(vn=>vn!==en&&sn.add(vn)),sn),new Set);return Vt.size>0?He.filter(sn=>!Vt.has(ca(sn))):He}),us=4,_s=3,Er=(0,Yn.P1)(({trace:He})=>He,({interval:He=us})=>He,({width:He=_s})=>He,(He,it,xt)=>[...Array(it+1).keys()].map(Vt=>({timestamp:zs(He)+ls(He)*(Vt/it),width:xt})));function er(He){const it=new Map,xt=He.reduce((sn,en)=>(sn.some(vn=>vn.key===en.key&&vn.value===en.value)?it.set(`${en.key}:${en.value}`,`Duplicate tag "${en.key}:${en.value}"`):sn.push(en),sn),[]),Vt=Array.from(it.values());return{tags:xt,warnings:Vt}}function ms(He,it){const xt=He?.slice()??[],Vt=(it||[]).map(sn=>sn.toLowerCase());return xt.sort((sn,en)=>{const vn=sn.key.toLowerCase(),On=en.key.toLowerCase();for(let yn=0;yn<Vt.length;yn++){const bn=Vt[yn];if(vn.startsWith(bn)&&!On.startsWith(bn))return-1;if(!vn.startsWith(bn)&&On.startsWith(bn))return 1}return vn>On?1:vn<On?-1:0}),xt}function Gt(He){if(!He?.traceID)return null;const it=He.traceID.toLowerCase();let xt=0,Vt=Number.MAX_SAFE_INTEGER;const sn=new Map,en=new Map;He.spans=He.spans.filter(Re=>Boolean(Re.startTime)),He.processes=Object.entries(He.processes).reduce((Re,[Te,nt])=>(Re[Te]={...nt,tags:ms(nt.tags)},Re),{});const vn=He.spans.length;for(let Re=0;Re<vn;Re++){const Te=He.spans[Re],{startTime:nt,duration:Xe,processID:Nt}=Te;let zt=Te.spanID;nt<Vt&&(Vt=nt),nt+Xe>xt&&(xt=nt+Xe);const wt=sn.get(zt);wt!=null?(console.warn(`Dupe spanID, ${wt+1} x ${zt}`,Te,en.get(zt)),(0,Q.isEqual)(Te,en.get(zt))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),sn.set(zt,wt+1),zt=`${zt}_${wt}`,Te.spanID=zt):sn.set(zt,1),Te.process=He.processes[Nt],en.set(zt,Te)}const On=os(He),yn=[],bn={};On.walk((Re,Te,nt=0)=>{if(Re==="__root__"||typeof Re!="string")return;const Xe=en.get(Re);if(!Xe)return;const{serviceName:Nt}=Xe.process;bn[Nt]=(bn[Nt]||0)+1,Xe.relativeStartTime=Xe.startTime-Vt,Xe.depth=nt-1,Xe.hasChildren=Te.children.length>0,Xe.childSpanCount=Te.children.length,Xe.warnings=Xe.warnings||[],Xe.tags=Xe.tags||[],Xe.references=Xe.references||[];const zt=er(Xe.tags);Xe.tags=ms(zt.tags,st("topTagPrefixes")),Xe.warnings=Xe.warnings.concat(zt.warnings),Xe.references.forEach((wt,on)=>{const qt=en.get(wt.spanID);qt&&(wt.span=qt,on>0&&(qt.subsidiarilyReferencedBy=qt.subsidiarilyReferencedBy||[],qt.subsidiarilyReferencedBy.push({spanID:Re,traceID:it,span:Xe,refType:wt.refType})))}),yn.push(Xe)});const Xn=Ce(yn);return{services:Object.keys(bn).map(Re=>({name:Re,numberOfSpans:bn[Re]})),spans:yn,traceID:it,traceName:Xn,processes:He.processes,duration:xt-Vt,startTime:Vt,endTime:xt}}},52541:(Y,T,e)=>{"use strict";e.d(T,{Hn:()=>m,Kg:()=>p,ZP:()=>g,th:()=>l});var t=e(9892),n=e(66111),c=e(13572),s=e(73446),i=e(72648),f=e(11543),u=e(81764),r=e(8581),d=e(46967),o=e(62911);const m="None",l="Duration",p="Tag";function g({options:v,onOptionsChange:E}){const h=(0,i.wW)(y),C=[m,l,p].map(c.E);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Span bar"),n.createElement("div",{className:h.infoText},"Add additional info next to the service and operation on a span bar row in the trace view",n.createElement(o.j,{hrefSuffix:`${v.type}/#span-bar`})),n.createElement(f.Z,{className:h.row},n.createElement(u._,{label:"Label",labelWidth:26,tooltip:"Default: duration",grow:!0},n.createElement(r.Ph,{inputId:"label",options:C,value:v.jsonData.spanBar?.type||"",onChange:a=>{(0,s.tp)({onOptionsChange:E,options:v},"spanBar",{...v.jsonData.spanBar,type:a?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:40}))),v.jsonData.spanBar?.type===p&&n.createElement(f.Z,{className:h.row},n.createElement(u._,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key"},n.createElement(d.I,{type:"text",placeholder:"Enter tag key",onChange:a=>(0,s.tp)({onOptionsChange:E,options:v},"spanBar",{...v.jsonData.spanBar,tag:a.currentTarget.value}),value:v.jsonData.spanBar?.tag||"",width:40}))))}const y=v=>({infoText:t.css`
    label: infoText;
    padding-bottom: ${v.spacing(2)};
    color: ${v.colors.text.secondary};
  `,row:t.css`
    label: row;
    align-items: baseline;
  `})},42413:(Y,T,e)=>{"use strict";e.d(T,{A4:()=>m,GL:()=>u,H3:()=>f,Im:()=>g,K9:()=>v,NY:()=>h,WW:()=>n,b$:()=>p,bi:()=>c,h2:()=>i,im:()=>s,oD:()=>r,pQ:()=>E,ty:()=>y,xb:()=>l});var t=e(9892);const n=t.css`
  position: relative;
`,c=t.css`
  margin-bottom: 0.25rem;
`,s=t.css`
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
`,i=t.css`
  margin: 0;
`,f=t.css`
  padding-left: 0.5rem;
  padding-right: 0.5rem;
`,u=t.css`
  padding-bottom: 0.5rem;
`,r=t.css`
  display: flex;
`,d=t.css`
  align-items: center;
`,o=t.css`
  align-items: start;
`,m=t.css`
  flex: 1 1 auto;
  min-width: 0; /* 1 */
  min-height: 0; /* 1 */
`,l=t.css`
  text-align: right;
`,p=t.css`
  display: inline-block;
`,g=t.css`
  margin: -0.2rem 0.25rem 0 0;
`,y=t.css`
  text-overflow: ellipsis;
`,v=t.css`
  width: 100%;
`,E=t.css`
  color: #aaa;
`,h=t.css`
  justify-content: flex-end;
`},54373:(Y,T,e)=>{"use strict";e.d(T,{EUpdateTypes:()=>n,default:()=>i});var t=(f=>(f.DragEnd="DragEnd",f.DragMove="DragMove",f.DragStart="DragStart",f.MouseEnter="MouseEnter",f.MouseLeave="MouseLeave",f.MouseMove="MouseMove",f))(t||{});const n=t;var c=e(82897);const s=0;class i{constructor({getBounds:u,tag:r,resetBoundsOnResize:d=!0,...o}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=m=>{const{button:l,clientX:p,type:g}=m;if(this._isDragging||l!==s)return;let y=null,v;if(g==="mouseenter")y=n.MouseEnter,v=this._onMouseEnter;else if(g==="mouseleave")y=n.MouseLeave,v=this._onMouseLeave;else if(g==="mousemove")y=n.MouseMove,v=this._onMouseMove;else throw new Error(`invalid event type: ${g}`);if(!v)return;const{value:E,x:h}=this._getPosition(p);v({event:m,type:y,value:E,x:h,manager:this,tag:this.tag})},this._handleDragEvent=m=>{const{button:l,clientX:p,type:g}=m;let y=null,v;if(g==="mousedown"){if(this._isDragging||l!==s)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const C=(0,c.get)(document,"body.style");C&&(C.userSelect="none"),this._isDragging=!0,y=n.DragStart,v=this._onDragStart}else if(g==="mousemove"){if(!this._isDragging)return;y=n.DragMove,v=this._onDragMove}else if(g==="mouseup"){if(!this._isDragging)return;this._stopDragging(),y=n.DragEnd,v=this._onDragEnd}else throw new Error(`invalid event type: ${g}`);if(!v)return;const{value:E,x:h}=this._getPosition(p);v({event:m,type:y,value:E,x:h,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=u,this.tag=r,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=Boolean(d),this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=o.onMouseEnter,this._onMouseLeave=o.onMouseLeave,this._onMouseMove=o.onMouseMove,this._onDragStart=o.onDragStart,this._onDragMove=o.onDragMove,this._onDragEnd=o.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(u){const{clientXLeft:r,maxValue:d,minValue:o,width:m}=this._getBounds();let l=u-r,p=l/m;return o!=null&&p<o?(p=o,l=o*m):d!=null&&p>d&&(p=d,l=d*m),{value:p,x:l}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const u=(0,c.get)(document,"body.style");u&&(u.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}},9096:(Y,T,e)=>{"use strict";e.d(T,{_K:()=>r,e6:()=>d});var t=e(58635),n=e(28550),c=e(16514);function s(m){if(m.length!==7)return[0,0,0];const l=m.slice(1,3),p=m.slice(3,5),g=m.slice(5);return[parseInt(l,16),parseInt(p,16),parseInt(g,16)]}class i{constructor(l,p){const g=o(l,p);this.colorsHex=g,this.colorsRgb=g.map(s),this.cache=new Map}_getColorIndex(l){let p=this.cache.get(l);if(p==null){const g=this.hashCode(l.toLowerCase());p=Math.abs(g%this.colorsHex.length);const y=Array.from(this.cache).pop();if(y&&y[1]){y[1]===p&&(p=this.getNextIndex(p));const v=this.colorsHex[y[1]];if(n.Z.readability(v,this.colorsHex[p])<1.5){let E=p;for(let h=0;h<this.colorsHex.length;h++)if(E=this.getNextIndex(E),n.Z.readability(v,this.colorsHex[E])>1.5){p=E;break}}}this.cache.set(l,p)}return p}getNextIndex(l){return l+1<this.colorsHex.length?l+1:0}hashCode(l){let p=0,g,y;for(g=0;g<l.length;g++)y=l.charCodeAt(g),p=(p<<5)-p+y;return p}getColorByKey(l){const p=this._getColorIndex(l);return this.colorsHex[p]}getRgbColorByKey(l){const p=this._getColorIndex(l);return this.colorsRgb[p]}clear(){this.cache.clear()}}const f=(0,t.Z)((m,l)=>new i(m,l));function u(m){f([],m)}function r(m,l){return f(c.O9,l).getColorByKey(m)}function d(m,l){return f(c.O9,l).getRgbColorByKey(m)}function o(m,l){const p=m.indexOf("#E24D42");p>-1&&m.splice(p,1);const g=m.indexOf("#BF1B00");g>-1&&m.splice(g,1);let y=[];for(const v of m)n.Z.readability(l.colors.background.primary,v)>=3&&y.push(v);return y}},320:(Y,T,e)=>{"use strict";e.d(T,{WT:()=>r,LU:()=>C,Cz:()=>E,Gk:()=>h});var t=e(82897),n=e(6835),c=e.n(n);function s(a,P){const D=Math.floor(Math.log10(Math.abs(a)))+1,x=P+D;return x<=0?Math.trunc(a):Number(a.toPrecision(x))}const i="YYYY-MM-DD",f="HH:mm",u=1e3,r=1e3*u,d=60*r,o=60*d,m=24*o,l=Math.log10(u),p=[{unit:"d",microseconds:m,ofPrevious:24},{unit:"h",microseconds:o,ofPrevious:60},{unit:"m",microseconds:d,ofPrevious:60},{unit:"s",microseconds:r,ofPrevious:1e3},{unit:"ms",microseconds:u,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}],g=(a,P,D)=>s(a/D,P)*D;function y(a){return moment(a/u).format(i)}function v(a){return moment(a/u).format(f)}function E(a){const P=g(a,l,u);return`${c().duration(P/u).asMilliseconds()}ms`}function h(a){const P=g(a,l,r);return`${c().duration(P/u).asSeconds()}s`}function C(a){const[P,D]=(0,t.dropWhile)(p,({microseconds:S},O)=>O<p.length-1&&S>a);if(P.ofPrevious===1e3)return`${(0,t.round)(a/P.microseconds,2)}${P.unit}`;const M=`${Math.floor(a/P.microseconds)}${P.unit}`,b=Math.round(a/D.microseconds%P.ofPrevious),R=`${b}${D.unit}`;return b===0?M:`${M} ${R}`}},75151:(Y,T,e)=>{"use strict";e.d(T,{F4:()=>u,Rx:()=>r,js:()=>f,kb:()=>s});var t=e(66111),n=e(44288),c=e(95638);const s=()=>(0,n.Z)().slice(0,12),f={spanNameOperator:"=",serviceNameOperator:"=",fromOperator:">",toOperator:"<",tags:[{id:s(),operator:"="}]};function u(d){const[o,m]=(0,t.useState)(f),l=(0,t.useMemo)(()=>d&&(0,c.filterSpansNewTraceViewHeader)(o,d),[o,d]);return{newTraceViewHeaderSearch:o,setNewTraceViewHeaderSearch:m,spanFilterMatches:l}}function r(d){const[o,m]=(0,t.useState)(""),l=(0,t.useMemo)(()=>o&&d?(0,c.filterSpans)(o,d):void 0,[o,d]);return{search:o,setSearch:m,spanFindMatches:l}}},335:(Y,T,e)=>{"use strict";e.d(T,{N:()=>c});var t=e(12115),n=e(95638);function c(i){if(!i)return null;let f=i.fields.length===1?i.fields[0].values[0]:s(i);return(0,n.transformTraceData)(f)}function s(i){const f=new t.U(i),u={};for(let r=0;r<f.length;r++){const d=f.get(r);u[d.spanID]||(u[d.spanID]={serviceName:d.serviceName,tags:d.serviceTags})}return{traceID:f.get(0).traceID,processes:u,spans:f.toArray().map((r,d)=>{const o=[];return r.parentSpanID&&o.push({refType:"CHILD_OF",spanID:r.parentSpanID,traceID:r.traceID}),r.references&&o.push(...r.references.map(m=>({refType:"FOLLOWS_FROM",...m}))),{...r,duration:r.duration*1e3,startTime:r.startTime*1e3,processID:r.spanID,flags:0,references:o,logs:r.logs?.map(m=>({...m,timestamp:m.timestamp*1e3}))||[],dataFrameRowIndex:d}})}}},46526:(Y,T,e)=>{"use strict";e.d(T,{eX:()=>m,zU:()=>o});var t=e(62992),n=e(41818),c=e(5562),s=e(55935),i=e(98589),f=e(73257),u=e(86297),r=e(16983);const d=(0,t.PH)("explore/updateDatasourceInstance");function o(l,p,g){return async(y,v)=>{const E=v().user.orgId,{history:h,instance:C}=await(0,r.r_)(E,{uid:p}),a=v().explore[l].datasourceInstance;if((0,n.ff)("explore_change_ds",{from:(a?.meta?.mixed?"mixed":a?.type)||"unknown",to:C.meta.mixed?"mixed":C.type,exploreId:l}),y(d({exploreId:l,datasourceInstance:C,history:h})),g?.importQueries){const P=v().explore[l].queries;await y((0,f.GJ)(l,P,a,C))}v().explore[l].isLive&&y((0,u.oz)(l,c.dP.offOption.value)),g?.importQueries&&y((0,f.aA)(l))}}const m=(l,p)=>{if(d.match(p)){const{datasourceInstance:g,history:y}=p.payload;return(0,s.RZ)(l.querySubscription),{...l,datasourceInstance:g,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,i.DK)(),queryResponse:(0,r.lp)(),queryKeys:[],history:y,datasourceMissing:!1}}return l}},93713:(Y,T,e)=>{"use strict";e.d(T,{CK:()=>C,Om:()=>a,iz:()=>P,km:()=>y,qN:()=>h});var t=e(62992),n=e(82897),c=e.n(n),s=e(86647),i=e(55935),f=e(25405),u=e(46526),r=e(13582),d=e(48197),o=e(73257),m=e(86297),l=e(16983);const p=(0,t.PH)("explore/changeSize"),g=(0,t.PH)("explore/changePanels");function y(x,M,b){return async(R,S)=>{const O=S().explore[x];if(O===void 0)return;const{panelsState:U}=O;R(g({exploreId:x,panelsState:{...U,[M]:b}})),R((0,d.og)())}}const v=(0,t.PH)("explore/initializeExplore"),E=(0,t.PH)("explore/setUrlReplaced");function h(x,{height:M,width:b}){return p({exploreId:x,height:M,width:b})}function C(x,M,b,R,S,O,U,I){return async(F,w)=>{const K=(0,s.F)().getList();let L,V=[];if(K.length>=1){const H=w().user.orgId,j=await(0,l.r_)(H,M);L=j.instance,V=j.history}F(v({exploreId:x,containerWidth:S,eventBridge:O,queries:b,range:R,datasourceInstance:L,history:V,isFromCompactUrl:I})),U!==void 0&&F(g({exploreId:x,panelsState:U})),F((0,m.b3)({exploreId:x})),L&&F((0,o.aA)(x,{replaceUrl:!0}))}}function a(x,M){return async(b,R)=>{const S=R().explore[x];if(!S?.initialized)return;const O=(0,i.J5)(M),U=D(O,(0,l.D)(S)),{containerWidth:I,eventBridge:F}=S,{datasource:w,queries:K,range:L,panelsState:V}=O,H=[];for(let k=0;k<K.length;k++){const Q=K[k];H.push((0,i.fR)(Q,H,k))}const j=(0,f.Z)(R().user),A=(0,f.i)(R().user),_=(0,i.vP)(L,j,A);if(U.datasource){const k=await(0,i.Z8)(K);await b(C(x,w,k,_,I,F,V));return}U.range&&b((0,m.b3)({exploreId:x,rawRange:_.raw})),U.queries&&b((0,o.SE)({exploreId:x,queries:H})),U.panelsState&&V!==void 0&&b(g({exploreId:x,panelsState:V})),(U.queries||U.range)&&b((0,o.aA)(x))}}const P=(x=(0,l.t5)(),M)=>{if(x=(0,o.Y)(x,M),x=(0,u.eX)(x,M),x=(0,m.ok)(x,M),x=(0,r.Oo)(x,M),d.ZU.match(M)){const{richHistory:b,total:R}=M.payload.richHistoryResults;return{...x,richHistory:b,richHistoryTotal:R}}if(d.Zy.match(M)){const b=M.payload.filters;return{...x,richHistorySearchFilters:b}}if(p.match(M)){const b=M.payload.width;return{...x,containerWidth:b}}if(g.match(M)){const{panelsState:b}=M.payload;return{...x,panelsState:b}}if(v.match(M)){const{containerWidth:b,eventBridge:R,queries:S,range:O,datasourceInstance:U,history:I,isFromCompactUrl:F}=M.payload;return{...x,containerWidth:b,eventBridge:R,range:O,queries:S,initialized:!0,queryKeys:(0,i.$$)(S),datasourceInstance:U,history:I,datasourceMissing:!U,queryResponse:(0,l.lp)(),cache:[],isFromCompactUrl:F||!1}}return x},D=(x,M)=>{const b=!(0,n.isEqual)(M?.datasource,x?.datasource),R=!(0,n.isEqual)(M?.queries,x?.queries),S=!(0,n.isEqual)(M?.range||i.UI,x?.range||i.UI),O=!(0,n.isEqual)(M?.panelsState,x?.panelsState);return{datasource:b,queries:R,range:S,panelsState:O}}},13582:(Y,T,e)=>{"use strict";e.d(T,{Cs:()=>v,Ff:()=>m,KZ:()=>C,NV:()=>l,Oo:()=>a,TV:()=>g,WY:()=>d,ch:()=>h,ev:()=>o,fM:()=>f,ik:()=>p,io:()=>y,sO:()=>E});var t=e(62992),n=e(51424),c=e(27876),s=e(4219),i=e(48197);const f=(0,t.PH)("explore/historyUpdated"),u=({updatedQuery:P,deletedId:D})=>async(x,M)=>{r(M().explore,(b,R)=>{const S=b.richHistory.map(U=>U.id===P?.id?P:U).filter(U=>U.id!==D),O=b.richHistory.length-S.length;x((0,i.ZU)({richHistoryResults:{richHistory:S,total:b.richHistoryTotal-O},exploreId:R}))})},r=(P,D)=>{D(P.left,c.ExploreId.left),P.right&&D(P.right,c.ExploreId.right)},d=(P,D,x)=>async(M,b)=>{const{richHistoryStorageFull:R,limitExceeded:S}=await(0,n.au)(P,D,x,!1,"",!b().explore.richHistoryStorageFull,!b().explore.richHistoryLimitExceededWarningShown);R&&M((0,i.fm)()),S&&M((0,i.QN)())},o=(P,D)=>async(x,M)=>{const b=await(0,n.VI)(P,D);x(u({updatedQuery:b}))},m=(P,D)=>async x=>{const M=await(0,n.gt)(P,D);x(u({updatedQuery:M}))},l=P=>async D=>{const x=await(0,n.y9)(P);D(u({deletedId:x}))},p=()=>async P=>{await(0,n.HK)(),P((0,i.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:c.ExploreId.left})),P((0,i.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:c.ExploreId.right}))},g=P=>async(D,x)=>{const M=x().explore[P]?.richHistorySearchFilters;if(M){const b=await(0,n.ub)(M);D((0,i.ZU)({richHistoryResults:b,exploreId:P}))}},y=P=>async(D,x)=>{const M=x().explore[P]?.richHistorySearchFilters,b=x().explore[P]?.richHistory;if(M&&b){const R={...M,page:(M?.page||1)+1},S=await(0,n.ub)(R),O=[...b,...S.richHistory];D((0,i.Zy)({filters:R,exploreId:P})),D((0,i.ZU)({richHistoryResults:{richHistory:O,total:S.total},exploreId:P}))}},v=P=>async D=>{D((0,i.Zy)({filters:void 0,exploreId:P})),D((0,i.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:P}))},E=()=>async(P,D)=>{let x=D().explore.richHistorySettings;x||(x=await(0,n.di)(),P((0,i.e8)(x)))},h=P=>async D=>{D((0,i.e8)(P)),await(0,n.kg)(P)},C=(P,D)=>async(x,M)=>{await x((0,i.Zy)({exploreId:P,filters:{...D}}));const b=M().explore.richHistorySettings;(0,s.X)().lastUsedDataSourcesAvailable&&await x(h({...b,lastUsedDatasourceFilters:D.datasourceFilters}))},a=(P,D)=>f.match(D)?{...P,history:D.payload.history}:P},48197:(Y,T,e)=>{"use strict";e.d(T,{AP:()=>E,CL:()=>g,IS:()=>P,QN:()=>m,Sx:()=>y,WK:()=>h,YV:()=>x,ZP:()=>O,ZU:()=>d,Zy:()=>p,bW:()=>D,e8:()=>l,fm:()=>o,m$:()=>M,nL:()=>v,og:()=>a,tl:()=>r});var t=e(62992),n=e(49187),c=e(37932),s=e(55935),i=e(3032),f=e(93713),u=e(16983);const r=(0,t.PH)("explore/syncTimes"),d=(0,t.PH)("explore/richHistoryUpdated"),o=(0,t.PH)("explore/richHistoryStorageFullAction"),m=(0,t.PH)("explore/richHistoryLimitExceededAction"),l=(0,t.PH)("explore/richHistorySettingsUpdated"),p=(0,t.PH)("explore/richHistorySearchFiltersUpdatedAction"),g=(0,t.PH)("explore/saveCorrelationsAction"),y=(0,t.PH)("explore/splitSizeUpdateAction"),v=(0,t.PH)("explore/maximizePaneAction"),E=(0,t.PH)("explore/evenPaneResizeAction"),h=(0,t.PH)("explore/resetExplore"),C=(0,t.PH)("explore/splitClose"),a=U=>(I,F)=>{const{left:w,right:K}=F().explore,V={orgId:F().user.orgId.toString()};V.left=(0,n.S)((0,u.D)(w)),K?V.right=(0,n.S)((0,u.D)(K)):V.right=null,P.right=V.right,P.left=V.left,c.E1.partial({...V},U?.replace)},P={},D=U=>async(I,F)=>{const w=F().explore[i.Kd.left];let L=(0,u.D)(w);if(U){const{query:H,queries:j}=U;L={datasource:U.datasourceUid,queries:j??(H?[H]:[]),range:U.range||w.range,panelsState:U.panelsState}}const V=(0,n.S)(L);c.E1.partial({right:V},!0)};function x(U){return(I,F)=>{I(C({itemId:U})),I(a())}}const M=(U,I)=>async F=>{const{getDataSourceSrv:w,getTimeSrv:K,getExploreUrl:L,openInNewWindow:V}=I,H=w(),j=await L({panel:U,datasourceSrv:H,timeSrv:K()});if(V&&j){V(j);return}c.E1.push(j)},b=(0,u.t5)(),R={syncedTimes:!1,left:b,right:void 0,correlations:void 0,richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},O={explore:(U=R,I)=>{if(C.match(I)){const{itemId:F}=I.payload,w={left:F===i.Kd.left?U.right:U.left,right:void 0};return{...U,...w,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(y.match(I)){const{largerExploreId:F}=I.payload;return{...U,largerExploreId:F,maxedExploreId:void 0,evenSplitPanes:F===void 0}}if(v.match(I)){const{exploreId:F}=I.payload;return{...U,largerExploreId:F,maxedExploreId:F,evenSplitPanes:!1}}if(E.match(I))return{...U,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(g.match(I))return{...U,correlations:I.payload};if(r.match(I))return{...U,syncedTimes:I.payload.syncedTimes};if(o.match(I))return{...U,richHistoryStorageFull:!0};if(m.match(I))return{...U,richHistoryLimitExceededWarningShown:!0};if(h.match(I)){const F=U[i.Kd.left],w=U[i.Kd.right];return(0,s.RZ)(F.querySubscription),w&&(0,s.RZ)(w.querySubscription),{...R,left:{...b,queries:U.left.queries}}}if(l.match(I)){const F=I.payload;return{...U,richHistorySettings:F}}if(I.payload){const{exploreId:F}=I.payload;if(F!==void 0){const w=U[F];return{...U,[F]:(0,f.iz)(w,I)}}}return U}}},73257:(Y,T,e)=>{"use strict";e.d(T,{CS:()=>vt,K8:()=>je,ci:()=>bt,qV:()=>ie,LK:()=>Ge,Sv:()=>be,GJ:()=>Ce,W1:()=>gt,sK:()=>Ne,Y:()=>Ye,aA:()=>Qe,EA:()=>Fe,P4:()=>ze,$9:()=>q,sQ:()=>Pe,KO:()=>Se,SE:()=>Oe,z0:()=>mt});var t=e(62992),n=e(10322),c=e.n(n),s=e(82897),i=e(23351),f=e(59980),u=e(11572),r=e(84946),d=e(39859),o=e(98803),m=e(52666),l=e(89749),p=e(13787),g=e(89424),y=e(4063),v=e(83881),E=e(35645),h=e(86647),C=e(41818),a=e(55935),P=e(5242),D=e(25405),x=e(63496),M=e(3153),b=e(27876),R=e(3032),S=e(659),O=e(60499),U=e(75434),I=e(9471),F=e(50928),w=e(6194),K=e(99098),L=e(20053),V=e(3281);const H=(we,qe,Je)=>(we.forEach(ut=>{const Mt=ut.refId;if(!Mt)return;const Wt=Je[Mt],ln=qe.filter(fn=>fn.source.uid===Wt);j(ut,ln)}),we),j=(we,qe)=>{we.fields.forEach(Je=>{Je.config.links=Je.config.links?.filter(ut=>ut.origin!==V.n1.Correlations)||[],qe.map(ut=>{ut.config?.field===Je.name&&Je.config.links.push({internal:{query:ut.config?.target,datasourceUid:ut.target.uid,datasourceName:ut.target.name,transformations:ut.config?.transformations},url:"",title:ut.label||ut.target.name,origin:V.n1.Correlations})})})};var A=e(81042);const _=we=>{const qe=[],Je=[],ut=[],Mt=[],Wt=[],ln=[],fn=[];for(const pn of we.series)switch(pn.meta?.preferredVisualisationType){case"logs":Mt.push(pn);break;case"graph":qe.push(pn);break;case"trace":Wt.push(pn);break;case"table":Je.push(pn);break;case"rawPrometheus":ut.push(pn);break;case"nodeGraph":ln.push(pn);break;case"flamegraph":fn.push(pn);break;default:le(pn)&&qe.push(pn),Je.push(pn)}return{...we,graphFrames:qe,tableFrames:Je,logsFrames:Mt,traceFrames:Wt,nodeGraphFrames:ln,flameGraphFrames:fn,rawPrometheusFrames:ut,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},k=({queries:we,correlations:qe})=>Je=>{if(we?.length&&qe?.length){const ut=(0,s.mapValues)((0,s.groupBy)(we,"refId"),"0.datasource.uid");H(Je.series,qe,ut)}return Je},Q=we=>we.graphFrames.length?{...we,graphResult:we.graphFrames}:{...we,graphResult:null},re=we=>{if(we.tableFrames.length===0)return(0,f.of)({...we,tableResult:null});we.tableFrames.sort((Mt,Wt)=>{const ln=Mt.refId,fn=Wt.refId;return ln>fn?1:ln<fn?-1:0});const qe=we.tableFrames.every(Mt=>le(Mt)),Je={interpolate:Mt=>Mt};return(qe?(0,f.of)(we.tableFrames).pipe(F.Y.joinByFieldTransformer.operator({},Je)):(0,f.of)(we.tableFrames).pipe(F.Y.mergeTransformer.operator({},Je))).pipe((0,I.U)(Mt=>{for(const Wt of Mt)for(const ln of Wt.fields)ln.display=ln.display??(0,w.U_)({field:ln,theme:E.v.theme2,timeZone:we.request?.timezone??"browser"});return{...we,tableResult:Mt}}))},Z=we=>{const qe=we.rawPrometheusFrames;if(!qe||qe.length===0)return(0,f.of)({...we,tableResult:null});qe.sort((Wt,ln)=>{const fn=Wt.refId,pn=ln.refId;return fn>pn?1:fn<pn?-1:0});const Je=qe.every(Wt=>le(Wt)),ut={interpolate:Wt=>Wt};return(Je?(0,f.of)(qe).pipe(F.Y.joinByFieldTransformer.operator({},ut)):(0,f.of)(qe).pipe(F.Y.mergeTransformer.operator({},ut))).pipe((0,I.U)(Wt=>{const ln=Wt[0];for(const fn of ln.fields)fn.display=fn.display??(0,w.U_)({field:fn,theme:E.v.theme2,timeZone:we.request?.timezone??"browser"});return{...we,rawPrometheusResult:ln}}))},oe=(we={})=>qe=>{if(qe.logsFrames.length===0)return{...qe,logsResult:null};const Je=qe.request?.intervalMs,ut=(0,L.aB)(qe.logsFrames,Je,we.absoluteRange,we.queries),Mt=(0,a.Oy)(we.refreshInterval),Wt=(0,A.j0)(ut,Mt),ln=Wt.rows,fn=Wt.series,pn={...Wt,rows:ln,series:fn};return{...qe,logsResult:pn}};function G(we,qe,Je,ut,Mt,Wt){return(0,f.of)(we).pipe((0,I.U)(ln=>(0,v.zR)(ln,qe)),(0,I.U)(k({queries:Mt,correlations:Wt})),(0,I.U)(_),(0,I.U)(Q),(0,I.U)(Q),(0,I.U)(oe({absoluteRange:Je,refreshInterval:ut,queries:Mt})),(0,d.z)(Z),(0,d.z)(re))}function le(we){const qe=(0,s.groupBy)(we.fields,Je=>Je.type);return Boolean(Object.keys(qe).length===2&&qe[K.fS.time]?.length===1&&qe[K.fS.number])}var ge=e(98589),ne=e(13582),ue=e(48197),te=e(86297),me=e(16983);const q=we=>qe=>{const Je=qe.explore[we];return Je&&Je.queryResponse?Je.queryResponse.state===m.Gu.Loading||Je.queryResponse.state===m.Gu.Streaming:!1},se=(0,t.PH)("explore/addQueryRow"),ae=(0,t.PH)("explore/changeQueries"),pe=(0,t.PH)("explore/cancelQueries"),de=(0,t.PH)("explore/queriesImported"),Me=(0,t.PH)("explore/queryStoreSubscription"),Ke=(0,t.PH)("explore/setSupplementaryQueryEnabledAction"),st=(0,t.PH)("explore/storeSupplementaryQueryDataProviderAction"),Ie=(0,t.PH)("explore/cleanSupplementaryQueryDataProviderAction"),Ve=(0,t.PH)("explore/cleanSupplementaryQueryAction"),_e=(0,t.PH)("explore/storeSupplementaryQueryDataSubscriptionAction"),tt=(0,t.PH)("explore/updateSupplementaryQueryDataAction"),dt=(0,t.PH)("explore/queryStreamUpdated"),Oe=(0,t.PH)("explore/setQueries"),ye=(0,t.PH)("changeLoadingState"),Pe=(0,t.PH)("explore/setPausedState"),be=(0,t.PH)("explore/clearLogs"),Be=(0,t.PH)("explore/scanStart"),ze=(0,t.PH)("explore/scanStop"),lt=(0,t.PH)("explore/addResultsToCache"),ht=(0,t.PH)("explore/clearCache");function vt(we,qe){return async(Je,ut)=>{const Mt=ut().explore[we].queries;let Wt;if(Mt.length===0){const fn=ut().explore[we].datasourceInstance;(!E.v.featureToggles.exploreMixedDatasource||!fn?.meta.mixed)&&(Wt=fn)}const ln=await(0,a.Xk)(Mt,qe,Wt?.getRef());Je(se({exploreId:we,index:qe,query:ln}))}}function bt(we){return(qe,Je)=>{qe(ze({exploreId:we})),qe(pe({exploreId:we}));const ut=Je().explore[we].supplementaryQueries;for(const Mt of ge.SY)qe(Ie({exploreId:we,type:Mt})),ut[Mt]?.data?.state!==m.Gu.Done&&qe(Ve({exploreId:we,type:Mt}));qe((0,ue.og)())}}const ct=(we,qe)=>{const Je=we.getRef();return qe.map(ut=>({...ut,datasource:Je}))},Pt=async(we,qe,Je)=>{let ut=[];if(qe.meta?.id===we.meta?.id)ut=Je;else if((0,l.p)(qe)&&(0,l.CZ)(we)){const Mt=await qe.exportToAbstractQueries(Je);ut=await we.importFromAbstractQueries(Mt)}else we.importQueries&&(ut=await we.importQueries(Je,qe));return ct(we,ut)},ie=(0,b.createAsyncThunk)("explore/changeQueries",async({queries:we,exploreId:qe},{getState:Je,dispatch:ut})=>{let Mt=!1;const Wt=Je().explore[qe].queries;for(const ln of we)for(const fn of Wt)if(ln.refId===fn.refId&&ln.datasource?.type!==fn.datasource?.type){const pn=await(0,h.F)().get(fn.datasource),An=await(0,h.F)().get({uid:ln.datasource?.uid});await ut(Ce(qe,Wt,pn,An,ln.refId)),Mt=!0}Mt||ut(ae({queries:we,exploreId:qe})),we.length<Wt.length&&ut(Qe(qe))}),Ce=(we,qe,Je,ut,Mt)=>async Wt=>{if(!Je){Wt(de({exploreId:we,queries:qe}));return}let ln=qe;if(ut.uid===x.D)ln=qe.map(pn=>({...pn,datasource:Je.getRef()}));else if(Je.uid===x.D){const pn=(0,s.groupBy)(qe,Ot=>Ot.datasource?.uid),An=await Promise.all(Object.keys(pn).map(async Ot=>{const Ft=await(0,h.F)().get({uid:Ot});return await Pt(ut,Ft,pn[Ot])}));ln=(0,s.flatten)(An.filter(Ot=>Ot.length>0))}else{let pn=qe;if(Mt!==void 0){const An=qe.find(Ot=>Ot.refId===Mt);An&&(pn=[An])}ln=await Pt(ut,Je,pn)}let fn=await(0,a.Z8)(ln,ut.getRef());if(Mt!==void 0){ln.length===0&&(ln=[await(0,a.Xk)([],void 0,ut.getRef())]);const pn=qe.findIndex(Ot=>Ot.refId===Mt),An={...fn[0],refId:qe[pn].refId};fn=[...qe],fn[pn]=An}return Wt(de({exploreId:we,queries:fn})),fn};function Ne(we,qe,Je){return async(ut,Mt)=>{const Wt=Mt().explore[we],{queries:ln}=Wt,pn=(await Promise.all(ln.map(An=>Je({...An},qe)))).map((An,Ot)=>(0,a.fR)(An,ln,Ot));ut(Oe({exploreId:we,queries:pn})),qe.preventSubmit||ut(Qe(we))}}async function Ze(we,qe,Je,ut,Mt,Wt){const ln=ut.meta.id,fn=(0,a._Q)(Je,ln,Mt);we((0,ne.fM)({exploreId:Wt,history:fn})),we((0,ne.WY)(ut.uid,ut.name,Mt)),await we((0,ne.TV)(R.Kd.left)),await we((0,ne.TV)(R.Kd.right))}const Qe=(we,qe)=>(Je,ut)=>{Je((0,te.b3)({exploreId:we}));const Mt=ft();qe?.preserveCache===!0||Je(Ge(we));const ln=ut().explore[we],{datasourceInstance:fn,containerWidth:pn,isLive:An,range:Ot,scanning:Ft,queryResponse:Kt,querySubscription:Lt,refreshInterval:Ut,absoluteRange:Rt,cache:$t,supplementaryQueries:_t}=ln;let jt,an;const cn=ln.queries.map(hn=>({...hn,datasource:hn.datasource||fn?.getRef()}));fn!=null&&Ze(Je,ut().explore,ln.history,fn,cn,we),Je((0,ue.og)({replace:qe?.replaceUrl}));const rn=(0,me.M0)($t,Rt);if(rn)jt=(0,i.a)([(0,f.of)(rn),Mt]).pipe((0,d.z)(([hn,Dn])=>G(hn,Kt,Rt,Ut,cn,Dn))),an=jt.subscribe(hn=>{hn.error||Je((0,ue.og)()),Je(dt({exploreId:we,response:hn}))});else{if(!(0,a.z_)(cn)){Je((0,ue.og)({replace:qe?.replaceUrl}));return}if(!fn)return;const hn=fn?.interval;(0,a.RZ)(Lt);const Dn={minInterval:hn,maxDataPoints:pn,liveStreaming:An},Rn=(0,D.Z)(ut().user),ea=(0,a.Zf)(we,cn,Dn,Ot,Ft,Rn);if(Je(ye({exploreId:we,loadingState:m.Gu.Loading})),jt=(0,i.a)([(0,U.v7)(fn,ea.request).pipe(An?(0,o.p)(500):u.y),Mt]).pipe((0,d.z)(([Fn,Vn])=>G(Fn,Kt,Rt,Ut,cn,Vn))),an=jt.subscribe({next(Fn){if(Fn.logsResult!==null&&(0,C.ff)("grafana_explore_logs_result_displayed",{datasourceType:fn.type}),Je(dt({exploreId:we,response:Fn})),ut().explore[we].scanning)if(Fn.state===m.Gu.Done&&Fn.series.length===0){const Vn=(0,P.e)(-1,ut().explore[we].range);Je((0,te.b3)({exploreId:we,absoluteRange:Vn})),Je(Qe(we))}else Je(ze({exploreId:we}))},error(Fn){Je((0,S.$l)((0,O.t_)("Query processing error",Fn))),Je(ye({exploreId:we,loadingState:m.Gu.Error})),console.error(Fn)},complete(){ut().explore[we].queryResponse.state===m.Gu.Loading&&Je(ye({exploreId:we,loadingState:m.Gu.Done}))}}),An)for(const Fn of ge.SY)Je(Ie({exploreId:we,type:Fn})),Je(Ve({exploreId:we,type:Fn}));else Je(Ue({exploreId:we,datasourceInstance:fn,transaction:ea,newQuerySource:jt,supplementaryQueries:_t,queries:cn,absoluteRange:Rt}))}Je(Me({exploreId:we,querySubscription:an}))},Le=async(we,qe)=>{const Je=we.filter(Mt=>Mt.datasource?.uid!==x.D),ut=(0,s.groupBy)(Je,"datasource.uid");return await Promise.all(Object.values(ut).map(async Mt=>({datasource:await(0,h.F)().get(Mt[0].datasource,qe),targets:Mt})))},Ue=(0,b.createAsyncThunk)("explore/handleSupplementaryQueries",async({datasourceInstance:we,exploreId:qe,transaction:Je,newQuerySource:ut,supplementaryQueries:Mt,queries:Wt,absoluteRange:ln},{dispatch:fn})=>{let pn;we.meta.mixed?pn=await Le(Je.request.targets,Je.request.scopedVars):pn=[{datasource:we,targets:Je.request.targets}];for(const An of ge.SY){const Ot=(0,ge.Z9)(pn,An,{...Je.request,requestId:`${Je.request.requestId}_${(0,s.snakeCase)(An)}`},ut);Ot?(fn(st({exploreId:qe,type:An,dataProvider:Ot})),ve(Mt[An].data,Wt,ln)||(fn(Ve({exploreId:qe,type:An})),Mt[An].enabled&&fn(gt(qe,An)))):fn(Ie({exploreId:qe,type:An}))}});function ve(we,qe,Je){if(!we)return!1;const ut=(0,s.zipObject)((0,s.map)(qe,"refId"),qe),Mt=(0,s.mapValues)((0,s.groupBy)(we.data.map(pn=>pn.meta?.custom?.sourceQuery),"refId"),s.head),Wt=we.data.every(pn=>pn.meta?.custom?.logsVolumeType===p.o8.FullRange),ln=c()(ut,Mt),fn=we.data.every(pn=>{const An=pn.meta?.custom?.absoluteRange;return An?An&&An.from<=Je.from&&Je.to<=An.to:!0});return Wt&&ln&&fn}function Se(we,qe){return(Je,ut)=>{const Mt=ut().explore[we].queries,Wt=qe.map((ln,fn)=>(0,a.fR)(ln,Mt,fn));Je(Oe({exploreId:we,queries:Wt})),Je(Qe(we))}}function Fe(we){return(qe,Je)=>{qe(Be({exploreId:we}));const ut=(0,P.e)(-1,Je().explore[we].range);qe((0,te.b3)({exploreId:we,absoluteRange:ut})),qe(Qe(we))}}function je(we){return(qe,Je)=>{const ut=Je().explore[we].queryResponse,Mt=Je().explore[we].absoluteRange,Wt=(0,me.M7)(Mt);ut.state===m.Gu.Done&&qe(lt({exploreId:we,cacheKey:Wt,queryResponse:ut}))}}function Ge(we){return(qe,Je)=>{qe(ht({exploreId:we}))}}function gt(we,qe){return(Je,ut)=>{const{supplementaryQueries:Mt}=ut().explore[we],Wt=Mt[qe].dataProvider;if(Wt){const ln=Wt.subscribe({next:fn=>{Je(tt({exploreId:we,type:qe,data:fn}))}});Je(_e({exploreId:we,type:qe,dataSubscription:ln}))}}}function mt(we,qe,Je){return(ut,Mt)=>{ut(Ke({exploreId:we,enabled:qe,type:Je})),(0,ge.B9)(qe,Je),qe&&ut(gt(we,Je))}}const Ye=(we,qe)=>{if(se.match(qe)){const{queries:Je}=we,{index:ut,query:Mt}=qe.payload,Wt=[...Je.slice(0,ut+1),{...Mt},...Je.slice(ut+1)];return{...we,queries:Wt,queryKeys:(0,a.$$)(Wt)}}if(ae.match(qe)){const{queries:Je}=qe.payload;return{...we,queries:Je}}if(pe.match(qe))return(0,a.RZ)(we.querySubscription),{...we,queryResponse:{...we.queryResponse,state:m.Gu.Done}};if(Oe.match(qe)){const{queries:Je}=qe.payload;return{...we,queries:Je.slice(),queryKeys:(0,a.$$)(Je)}}if(Me.match(qe)){const{querySubscription:Je}=qe.payload;return{...we,querySubscription:Je}}if(Ke.match(qe)){const{enabled:Je,type:ut}=qe.payload,{supplementaryQueries:Mt}=we,Wt=Mt[ut].dataSubscription;!Je&&Wt&&Wt.unsubscribe();const ln={...Mt,[ut]:{...Mt[ut],enabled:Je,data:void 0}};return{...we,supplementaryQueries:ln}}if(st.match(qe)){const{dataProvider:Je,type:ut}=qe.payload,{supplementaryQueries:Mt}=we,Wt=Mt[ut];Wt?.dataSubscription&&Wt.dataSubscription.unsubscribe();const ln={...Mt,[ut]:{...Wt,dataProvider:Je,dataSubscription:void 0}};return{...we,supplementaryQueries:ln}}if(Ie.match(qe)){const{type:Je}=qe.payload,{supplementaryQueries:ut}=we,Mt=ut[Je];Mt?.dataSubscription&&Mt.dataSubscription.unsubscribe();const Wt={...ut,[Je]:{...Mt,dataProvider:void 0,dataSubscription:void 0}};return{...we,supplementaryQueries:Wt}}if(Ve.match(qe)){const{type:Je}=qe.payload,{supplementaryQueries:ut}=we,Mt={...ut,[Je]:{...ut[Je],data:void 0}};return{...we,supplementaryQueries:Mt}}if(_e.match(qe)){const{dataSubscription:Je,type:ut}=qe.payload,{supplementaryQueries:Mt}=we,Wt={...Mt,[ut]:{...Mt[ut],dataSubscription:Je}};return{...we,supplementaryQueries:Wt}}if(tt.match(qe)){let{data:Je,type:ut}=qe.payload;const{supplementaryQueries:Mt}=we,Wt={...Mt,[ut]:{...Mt[ut],data:Je}};return{...we,supplementaryQueries:Wt}}if(dt.match(qe))return St(we,qe);if(de.match(qe)){const{queries:Je}=qe.payload;return{...we,queries:Je,queryKeys:(0,a.$$)(Je)}}if(ye.match(qe)){const{loadingState:Je}=qe.payload;return{...we,queryResponse:{...we.queryResponse,state:Je}}}if(Pe.match(qe)){const{isPaused:Je}=qe.payload;return{...we,isPaused:Je}}if(Be.match(qe))return{...we,scanning:!0};if(ze.match(qe))return{...we,scanning:!1,scanRange:void 0};if(lt.match(qe)){const{cache:ut}=we,{queryResponse:Mt,cacheKey:Wt}=qe.payload;let ln=[...ut];return ln.some(pn=>pn.key===Wt)||(ln=[{key:Wt,value:Mt},...ln].slice(0,5)),{...we,cache:ln}}if(ht.match(qe))return{...we,cache:[]};if(be.match(qe)){if(!we.logsResult)return{...we,clearedAtIndex:null};if(we.queryResponse.state===m.Gu.Loading)return{...we,clearedAtIndex:null,logsResult:{...we.logsResult,rows:[]}};const Je=we.clearedAtIndex?we.clearedAtIndex+we.logsResult.rows.length:we.logsResult.rows.length-1;return{...we,clearedAtIndex:Je,logsResult:{...we.logsResult,rows:[]}}}return we},ft=()=>new r.y(we=>{const qe=M.h.getState().explore.correlations;if(qe)we.next(qe),we.complete();else{const Je=M.h.subscribe(()=>{const{correlations:ut}=M.h.getState().explore;ut&&(Je(),we.next(ut),we.complete())})}}),St=(we,qe)=>{const{response:Je}=qe.payload,{request:ut,series:Mt,error:Wt,graphResult:ln,logsResult:fn,tableResult:pn,rawPrometheusResult:An,traceFrames:Ot,nodeGraphFrames:Ft,flameGraphFrames:Kt,rawPrometheusFrames:Lt}=Je;if(Wt){if(Wt.type===g.eA.Timeout||Wt.type===g.eA.Cancelled)return{...we};E.v.angularSupportEnabled&&we.datasourceInstance?.components?.QueryCtrl&&we.eventBridge.emit(y.Kh.dataError,Wt)}if(!ut)return{...we};if(E.v.angularSupportEnabled&&we.datasourceInstance?.components?.QueryCtrl){const Ut=Mt.map(Rt=>(0,v.Zr)(Rt));we.eventBridge.emit(y.Kh.dataReceived,Ut)}return{...we,queryResponse:Je,graphResult:ln,tableResult:pn,rawPrometheusResult:An,logsResult:we.isLive&&fn?{...fn,rows:(0,me.bG)(we.clearedAtIndex,fn.rows)}:fn,showLogs:!!fn,showMetrics:!!ln,showTable:!!pn?.length,showTrace:!!Ot.length,showNodeGraph:!!Ft.length,showRawPrometheus:!!Lt.length,showFlameGraph:!!Kt.length,clearedAtIndex:we.isLive?we.clearedAtIndex:null}}},86297:(Y,T,e)=>{"use strict";e.d(T,{F9:()=>C,b3:()=>E,cD:()=>y,mG:()=>h,ok:()=>a,oz:()=>v});var t=e(62992),n=e(67483),c=e(52666),s=e(20308),i=e(5562),f=e(55935),u=e(81042),r=e(25405),d=e(3032),o=e(19349),m=e(48197),l=e(73257);const p=(0,t.PH)("explore/changeRange"),g=(0,t.PH)("explore/changeRefreshInterval"),y=P=>(D,x)=>{const{syncedTimes:M}=x().explore;M?(D(E({...P,exploreId:d.Kd.left})),D((0,l.aA)(d.Kd.left,{preserveCache:!0})),D(E({...P,exploreId:d.Kd.right})),D((0,l.aA)(d.Kd.right,{preserveCache:!0}))):(D(E({...P})),D((0,l.aA)(P.exploreId,{preserveCache:!0})))};function v(P,D){return g({exploreId:P,refreshInterval:D})}const E=P=>(D,x)=>{const{exploreId:M,absoluteRange:b,rawRange:R}=P,S=x().explore[M],O=(0,r.Z)(x().user),U=(0,r.i)(x().user),{range:I}=S;let F=I.raw;b&&(F={from:(0,n.GY)(O,b.from),to:(0,n.GY)(O,b.to)}),R&&(F=R);const w=(0,f.OQ)(O,F,U),K={from:w.from.valueOf(),to:w.to.valueOf()},L={time:w.raw,refresh:!1,timepicker:{},getTimezone:()=>O,timeRangeUpdated:V=>{D(y({exploreId:M,rawRange:V}))}};(0,o.$t)().init(L),(0,s.J)().updateTimeRange((0,o.$t)().timeRange()),D(p({exploreId:M,range:w,absoluteRange:K}))};function h(P){return(D,x)=>{if(P===d.Kd.left){const b=x().explore.left;D(y({exploreId:d.Kd.right,rawRange:b.range.raw}))}else{const b=x().explore.right;D(y({exploreId:d.Kd.left,rawRange:b.range.raw}))}const M=x().explore.syncedTimes;D((0,m.tl)({syncedTimes:!M})),D((0,m.og)())}}function C(){return(P,D)=>{const x=(0,r.Z)(D().user),M=(0,r.i)(D().user),b=D().explore.left,R=(0,f.OQ)(x,b.range.raw,M),S={from:R.from.valueOf(),to:R.to.valueOf()};P(E({exploreId:d.Kd.left,absoluteRange:S}));const O=D().explore.right;if(O){const U=(0,f.OQ)(x,O.range.raw,M),I={from:U.from.valueOf(),to:U.to.valueOf()};P(E({exploreId:d.Kd.right,absoluteRange:I}))}P((0,m.og)())}}const a=(P,D)=>{if(g.match(D)){const{refreshInterval:x}=D.payload,M=i.dP.isLive(x),b=(0,f.Oy)(x),R=(0,u.j0)(P.logsResult,b);return i.dP.isLive(P.refreshInterval)&&!M&&(0,f.RZ)(P.querySubscription),{...P,refreshInterval:x,queryResponse:{...P.queryResponse,state:M?c.Gu.Streaming:c.Gu.Done},isLive:M,isPaused:M?!1:P.isPaused,logsResult:R}}if(p.match(D)){const{range:x,absoluteRange:M}=D.payload;return{...P,range:x,absoluteRange:M}}return P}},16983:(Y,T,e)=>{"use strict";e.d(T,{M7:()=>h,lp:()=>g,bG:()=>a,M0:()=>C,D:()=>E,r_:()=>y,t5:()=>p,FG:()=>l});var t=e(82897),n=e(52666),c=e(75849),s=e(58379),i=e(55935),f=e(91162),u=e(98589),r=e(67483);const d=P=>{let D=P.raw.from;(0,r.v9)(D)&&(D=D.valueOf().toString(10));let x=P.raw.to;return(0,r.v9)(x)&&(x=x.valueOf().toString(10)),{from:D,to:x}},o={from:"now-6h",to:"now"},m="grafana.explore.style.graph",l=P=>{s.Z.set(m,P)},p=()=>({containerWidth:0,datasourceInstance:null,datasourceMissing:!1,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:o},absoluteRange:{from:null,to:null},scanning:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:g(),tableResult:null,graphResult:null,logsResult:null,clearedAtIndex:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,u.DK)(),panelsState:{}}),g=()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,c.JK)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function y(P,D){let x;try{x=await(0,f.ak)().get(D)}catch{x=await(0,f.ak)().get()}if(x.init)try{x.init()}catch(R){console.error(R)}const M=`grafana.explore.history.${x.meta?.id}`,b=s.Z.getObject(M,[]);return s.Z.set((0,i.I$)(P),x.uid),{history:b,instance:x}}function v(P){let D=(0,t.mapValues)(P,x=>(0,t.isObject)(x)?v(x):x);if(D=(0,t.omitBy)(D,t.isEmpty),!(0,t.isEmpty)(D))return D}function E(P){return{datasource:P.datasourceInstance?.uid||"",queries:P.queries.map(i.uC),range:d(P.range),panelsState:v(P.panelsState)}}function h(P){const D={from:P.from,to:P.to};return Object.entries(D).map(([M,b])=>`${encodeURIComponent(M)}=${encodeURIComponent(b.toString())}`).join("&")}function C(P,D){const x=h(D),M=P.findIndex(R=>R.key===x);return M>=0?P[M].value:void 0}const a=(P,D)=>D?P?D.slice(P+1):D:[]},41611:(Y,T,e)=>{"use strict";e.d(T,{a_:()=>h,Rb:()=>C,lt:()=>P,u8:()=>a});var t=e(82897),n=e(66111),c=e(72769),s=e(3281),i=e(206),f=e(94976),u=e(20308),r=e(41818),d=e(82002),o=e(27854),m=e.n(o),l=e(55935);const p=(x,M,b)=>{let R={},S={};if(x.type===s.sN.Regex&&x.expression){const O=new RegExp(x.expression,"gi"),U=M.matchAll(O);for(const I of U)I.groups?S=I.groups:S[x.mapValue||b]=I[1]||I[0]}else x.type===s.sN.Logfmt&&(S=m().parse(M));return Object.keys(S).forEach(O=>{const U=typeof S[O]=="string"?S[O]:(0,l.Xh)(S[O]);R[O]={value:U}}),R};var g=e(64703);const v=[x=>!x.internal||d.Vt.hasAccessToExplore()],E="grafana_data_link_clicked",h=x=>{const{field:M,vars:b,splitOpenFn:R,range:S,rowIndex:O,dataFrame:U}=x,I={...b||{}};I.__value={value:{raw:M.values[O]},text:"Raw value"};let F;return U&&(F=(0,c.z)({frame:U,rowIndex:O}),I.__data={value:{name:U.name,refId:U.refId,fields:F},text:"Data"},U.fields.forEach(w=>{F&&F[w.name]&&(I[w.name]={value:F[w.name]})}),I.__targetField={value:F[M.name]}),M.config.links?M.config.links.filter(L=>v.every(V=>V(L,I))).map(L=>{if(L.internal){let V={};L.internal?.transformations&&L.internal?.transformations.forEach(k=>{let Q;k.field?Q=U?.fields.find(Z=>Z.name===k.field)?.values[O]:Q=M.values[O],V={...V,...p(k,Q,M.name)}});const H={...I,...V},j=P(L,H);let A=[];if(j.variables.length===0){const k=M.name.toString();A.push({variableName:k,value:"",match:""})}else A=j.variables;const _=k=>{(0,r.ff)(E,{origin:L.origin||s.n1.Datasource,app:i.zj.Explore,internal:!0}),R?.(k)};return j.allVariablesDefined?{...(0,f._)({link:L,internalLink:L.internal,scopedVars:H,range:S,field:M,onClickFn:x.splitOpenFn?Q=>_(Q):void 0,replaceVariables:(0,u.J)().replace.bind((0,u.J)())}),variables:A}:void 0}else{const V=(j,A)=>(0,u.J)().replace(j,{...A,...I}),H=(0,g.Bq)().getDataLinkUIModel(L,V,M);return H.title||(H.title=C(H.href)),H}}).filter(L=>!!L):[]};function C(x){x.indexOf("://")<0&&(x=`http://${x}`);let M;try{M=new URL(x).hostname}catch{M=x}return M}function a(x,M){return(0,n.useCallback)((b,R)=>b.fields.flatMap(S=>S.config?.links&&S.config?.links.length?h({field:S,rowIndex:R,range:x,dataFrame:b,splitOpenFn:M}):[]),[x,M])}function P(x,M){let b=[];return(0,u.J)().replace.bind((0,u.J)())(D(x),M,void 0,b),b=(0,t.uniqBy)(b,"variableName"),{variables:b,allVariablesDefined:b.every(S=>S.found)}}function D(x){let M="",b;for(b in x)typeof x[b]=="string"?M+=" "+x[b]:typeof x[b]=="object"&&(M+=" "+D(x[b]));return M}},98589:(Y,T,e)=>{"use strict";e.d(T,{B9:()=>p,DK:()=>g,SY:()=>m,Z9:()=>E});var t=e(82897),n=e.n(t),c=e(84946),s=e(12877),i=e(95515),f=e(446),u=e(13787),r=e(52666),d=e(20053),o=e(58379);const m=[u.v8.LogsVolume,u.v8.LogsSample],l=h=>`grafana.explore.logs.enable${h}`,p=(h,C)=>{o.Z.set(l(C),h?"true":"false")},g=()=>{let h={[u.v8.LogsVolume]:{enabled:!0},[u.v8.LogsSample]:{enabled:!1}};for(const C of m){if(C===u.v8.LogsVolume){const P="grafana.explore.logs.enableVolumeHistogram",D=o.Z.get(P);if(D){h[C]={enabled:D==="true"},p(D==="true",u.v8.LogsVolume),localStorage.removeItem(P);continue}}if(C===u.v8.LogsSample)continue;o.Z.get(l(C))==="false"&&(h[C]={enabled:!1})}return h},y=(h,C,a)=>new c.y(P=>h.subscribe(D=>{if(D.logsResult&&D.logsResult.rows&&D.logsResult.visibleRange&&D.logsResult.bucketSize!==void 0&&D.state===r.Gu.Done){const x=D.logsResult.bucketSize,M=C.map(S=>S.refId),b=(0,t.groupBy)(D.logsResult.rows,"dataFrame.refId");let R=[];M.forEach(S=>{if(b[S]?.length){const O=(0,d.Nw)(b[S],x);R=[...R,...O];const U={logsVolumeType:u.o8.Limited,absoluteRange:D.logsResult?.visibleRange,datasourceName:a,sourceQuery:C.find(I=>I.refId===S)};P.next({data:R.map(I=>{const F=I.meta?.custom||{};return{...I,meta:{custom:{...F,...U}}}}),state:D.state})}}),P.complete()}})),v=(h,C,a,P)=>{if(h===u.v8.LogsVolume)return y(C,a,P)},E=(h,C,a,P)=>{const x=h.map(({datasource:M,targets:b},R)=>{const S=(0,t.cloneDeep)(a);return S.requestId=`${S.requestId||""}_${R}`,S.targets=b,(0,u.mN)(M,C)?M.getDataProvider(C,S):v(C,P,b,M.name)}).filter(r.fQ);if(x.length!==0)return x.length===1?x[0]:(0,s.T)(...x).pipe((0,f.R)((M,b)=>M.errors&&M.errors.length||b.state===r.Gu.NotStarted?M:b.state===r.Gu.Loading&&M.state===r.Gu.NotStarted?{...M,state:r.Gu.Loading}:b.state&&b.state!==r.Gu.Done?M:{...M,data:[...M.data,...b.data],state:r.Gu.Done},{data:[],state:r.Gu.NotStarted}),(0,i.E)())}},47471:(Y,T,e)=>{"use strict";e.d(T,{mV:()=>D,bE:()=>P});var t=e(49372),n=e(39859),c=e(59250),s=e(22069),i=e(20308),f=e(86647),u=e(66111),r=e(81764),d=e(8581),o=e(5076),m=e(71263),l=e(75897),p=e(436),g=e(17349),y=e(97573),v=e(51935);const E=14;function h(){const x=(0,u.useRef)({}),M=(0,u.useCallback)(R=>{switch(R){case y.Us.math:case y.Us.reduce:case y.Us.resample:case y.Us.threshold:return x.current[R];case y.Us.classic:return}},[]),b=(0,u.useCallback)((R,S)=>{switch(R){case y.Us.math:x.current.math=S;break;case y.Us.reduce:case y.Us.resample:case y.Us.resample:x.current.reduce=S,x.current.resample=S,x.current.threshold=S;break}},[]);return{getCachedExpression:M,setCachedExpression:b}}function C(x){const{query:M,queries:b,onRunQuery:R,onChange:S}=x,{getCachedExpression:O,setCachedExpression:U}=h();(0,u.useEffect)(()=>{U(M.type,M.expression)},[M.expression,M.type,U]);const I=(0,u.useCallback)(K=>{const L=O(K.value),V=(0,v.J)({...M,type:K.value});S({...V,expression:L??V.expression})},[M,S,O]),F=()=>{const K=b.filter(L=>M.refId!==L.refId).map(L=>({value:L.refId,label:L.refId}));switch(M.type){case y.Us.math:return u.createElement(m.Z,{onChange:S,query:M,labelWidth:E,onRunQuery:R});case y.Us.reduce:return u.createElement(l.v,{refIds:K,onChange:S,labelWidth:E,query:M});case y.Us.resample:return u.createElement(p.p,{query:M,labelWidth:E,onChange:S,refIds:K});case y.Us.classic:return u.createElement(o.I,{onChange:S,query:M,refIds:K});case y.Us.threshold:return u.createElement(g.M,{onChange:S,query:M,labelWidth:E,refIds:K})}},w=y._M.find(K=>K.value===M.type);return u.createElement("div",null,u.createElement(r._,{label:"Operation",labelWidth:E},u.createElement(d.Ph,{options:y._M,value:w,onChange:I,width:25})),F())}class a extends s.CK{constructor(M){super(M),this.instanceSettings=M}applyTemplateVariables(M,b){const R=(0,i.J)();return{...M,expression:R.replace(M.expression,b),window:R.replace(M.window,b)}}getCollapsedText(M){return`Expression: ${M.type}`}query(M){let b=M.targets.map(async S=>{const O=await(0,f.F)().get(S.datasource);return O.interpolateVariablesInQueries?O?.interpolateVariablesInQueries([S],M.scopedVars)[0]:S});return(0,t.D)(Promise.all(b)).pipe((0,n.z)(S=>super.query({...M,targets:S})))}newQuery(M){return{refId:"--",datasource:s.hr,type:M?.type??y.Us.math,...M}}}const P={id:-100,uid:y.Yq,name:s.hr.name,type:s.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:c.zV.datasource,name:s.hr.type,id:s.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},D=new a(P);D.meta={id:s.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},D.components={QueryEditor:C}},5076:(Y,T,e)=>{"use strict";e.d(T,{I:()=>C});var t=e(66111),n=e(11543),c=e(81764),s=e(31403),i=e(39904),f=e(51935),u=e(9892),r=e(26418),d=e(72648),o=e(44342),m=e(8581),l=e(46967),p=e(67162);const g=p.Z.reducerTypes.map(a=>({label:a.text,value:a.value})),y=p.Z.evalOperators.map(a=>({label:a.text,value:a.value})),v=p.Z.evalFunctions.map(a=>({label:a.text,value:a.value})),E=({condition:a,index:P,onChange:D,onRemoveCondition:x,refIds:M})=>{const b=(0,d.wW)(h),R=K=>{D({...a,operator:{type:K.value}})},S=K=>{D({...a,reducer:{type:K.value,params:[]}})},O=K=>{D({...a,query:{params:[K.value]}})},U=K=>{D({...a,evaluator:{params:a.evaluator.params,type:K.value}})},I=(K,L)=>{const V=parseFloat(K.currentTarget.value),H=[...a.evaluator.params];H[L]=V,D({...a,evaluator:{...a.evaluator,params:H}})},F=u.css`
    width: 60px;
  `,w=a.evaluator.type===p.$.IsWithinRange||a.evaluator.type===p.$.IsOutsideRange;return t.createElement(r.Stack,{direction:"row"},t.createElement("div",{style:{flex:1}},t.createElement(n.Z,null,P===0?t.createElement("div",{className:(0,u.cx)(b.button,F)},"WHEN"):t.createElement(o.d,{className:(0,u.cx)(b.buttonSelectText,F),options:y,onChange:R,value:y.find(K=>K.value===a.operator.type)}),t.createElement(m.Ph,{options:g,onChange:S,width:20,value:g.find(K=>K.value===a.reducer.type)}),t.createElement("div",{className:b.button},"OF"),t.createElement(m.Ph,{onChange:O,options:M,width:"auto",value:M.find(K=>K.value===a.query.params[0])})),t.createElement(n.Z,null,t.createElement(o.d,{className:b.buttonSelectText,options:v,onChange:U,value:v.find(K=>K.value===a.evaluator.type)}),w?t.createElement(t.Fragment,null,t.createElement(l.I,{type:"number",width:10,onChange:K=>I(K,0),value:a.evaluator.params[0]}),t.createElement("div",{className:b.button},"TO"),t.createElement(l.I,{type:"number",width:10,onChange:K=>I(K,1),value:a.evaluator.params[1]})):a.evaluator.type!==p.$.HasNoValue?t.createElement(l.I,{type:"number",width:10,onChange:K=>I(K,0),value:a.evaluator.params[0]}):null)),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:()=>x(P)},t.createElement(i.J,{name:"trash-alt"})))},h=a=>{const P=u.css`
    color: ${a.colors.primary.text};
    font-size: ${a.typography.bodySmall.fontSize};
  `;return{buttonSelectText:P,button:(0,u.cx)(u.css`
        display: flex;
        align-items: center;
        border-radius: ${a.shape.borderRadius(1)};
        font-weight: ${a.typography.fontWeightMedium};
        border: 1px solid ${a.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${a.spacing(1)};
        background-color: ${a.colors.background.canvas};
      `,P)}},C=({onChange:a,query:P,refIds:D})=>{const x=(R,S)=>{P.conditions&&a({...P,conditions:[...P.conditions.slice(0,S),R,...P.conditions.slice(S+1)]})},M=()=>{if(P.conditions){const R=P.conditions.at(-1)?.query?.params??[],S={...f.R,query:{params:R}};a({...P,conditions:P.conditions.length>0?[...P.conditions,S]:[S]})}},b=R=>{if(P.conditions){const S=P.conditions[R],O=P.conditions.filter(U=>U!==S).map((U,I)=>I===0?{...U,operator:{type:"when"}}:U);a({...P,conditions:O})}};return t.createElement("div",null,t.createElement(n.Z,null,t.createElement(c._,{label:"Conditions",labelWidth:14},t.createElement("div",null,P.conditions?.map((R,S)=>{if(R)return t.createElement(E,{key:S,index:S,condition:R,onChange:O=>x(O,S),onRemoveCondition:b,refIds:D})})))),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:M},t.createElement(i.J,{name:"plus-circle"})))}},71263:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>m});var t=e(9892),n=e(66111),c=e(26418),s=e(72648),i=e(81764),f=e(77117),u=e(39904),r=e(97379),d=e(42042);const o="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",m=({labelWidth:y,onChange:v,query:E,onRunQuery:h})=>{const C=D=>{v({...E,expression:D.target.value})},a=(0,s.wW)(p),P=()=>{E.expression&&h()};return n.createElement(c.Stack,{direction:"row"},n.createElement(i._,{label:n.createElement(f.W,{width:"auto"},n.createElement(d.z,{content:n.createElement("div",{className:a.documentationContainer},n.createElement("header",{className:a.documentationHeader},n.createElement(u.J,{name:"book-open"})," Math operator"),n.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",n.createElement("br",null),"Example: ",n.createElement("code",null,"$A + $B")),n.createElement("header",{className:a.documentationHeader},"Available Math functions"),n.createElement("div",{className:a.documentationFunctions},n.createElement(l,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),n.createElement(l,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(l,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(l,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(l,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),n.createElement(l,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),n.createElement(l,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),n.createElement(l,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),n.createElement(l,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),n.createElement(l,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."})),n.createElement("div",null,"See our additional documentation on"," ",n.createElement("a",{className:a.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},n.createElement(u.J,{size:"xs",name:"external-link-alt"})," Math expressions"),"."))},n.createElement("span",null,"Expression ",n.createElement(u.J,{name:"info-circle"})))),labelWidth:y,grow:!0,shrink:!0},n.createElement(r.K,{value:E.expression,onChange:C,rows:1,placeholder:o,onBlur:P,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},l=({name:y,description:v})=>{const E=(0,s.wW)(g);return n.createElement(n.Fragment,null,n.createElement("span",{className:E.name},y),n.createElement("span",{className:E.description},v))},p=y=>({documentationHeader:t.css`
    font-size: ${y.typography.h5.fontSize};
    font-weight: ${y.typography.h5.fontWeight};
  `,documentationLink:t.css`
    color: ${y.colors.text.link};
  `,documentationContainer:t.css`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${y.spacing(2)};

    padding: ${y.spacing(1)} ${y.spacing(2)};
  `,documentationFunctions:t.css`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${y.spacing(2)};
  `}),g=y=>({name:t.css`
    font-weight: ${y.typography.fontWeightBold};
  `,description:t.css`
    font-size: ${y.typography.bodySmall.fontSize};
    color: ${y.colors.text.disabled};
  `})},75897:(Y,T,e)=>{"use strict";e.d(T,{v:()=>u});var t=e(66111),n=e(81764),c=e(46967),s=e(11543),i=e(8581),f=e(97573);const u=({labelWidth:r="auto",onChange:d,refIds:o,query:m})=>{const l=f.SQ.find(a=>a.value===m.reducer),p=a=>{d({...m,expression:a.value})},g=a=>{d({...m,reducer:a.value})},y=a=>{d({...m,settings:a})},v=a=>{let P;switch(a.value){case f.kN.ReplaceNonNumbers:let D=0;m.settings?.mode===f.kN.ReplaceNonNumbers&&(D=m.settings?.replaceWithValue??0),P={mode:f.kN.ReplaceNonNumbers,replaceWithValue:D};break;default:P={mode:a.value}}y(P)},E=a=>{const P=a.currentTarget.valueAsNumber;y({mode:f.kN.ReplaceNonNumbers,replaceWithValue:P??0})},h=m.settings?.mode??f.kN.Strict,C=()=>{if(h===f.kN.ReplaceNonNumbers)return t.createElement(n._,{label:"Replace With",labelWidth:r},t.createElement(c.I,{type:"number",width:10,onChange:E,value:m.settings?.replaceWithValue??0}))};return t.createElement(t.Fragment,null,t.createElement(s.Z,null,t.createElement(n._,{label:"Function",labelWidth:r},t.createElement(i.Ph,{options:f.SQ,value:l,onChange:g,width:20})),t.createElement(n._,{label:"Input",labelWidth:r},t.createElement(i.Ph,{onChange:p,options:o,value:m.expression,width:"auto"}))),t.createElement(s.Z,null,t.createElement(n._,{label:"Mode",labelWidth:r},t.createElement(i.Ph,{onChange:v,options:f.YM,value:h,width:25})),C()))}},436:(Y,T,e)=>{"use strict";e.d(T,{p:()=>u});var t=e(66111),n=e(11543),c=e(81764),s=e(8581),i=e(46967),f=e(97573);const u=({labelWidth:r="auto",onChange:d,refIds:o,query:m})=>{const l=f.Fr.find(h=>h.value===m.downsampler),p=f.r8.find(h=>h.value===m.upsampler),g=h=>{d({...m,window:h.target.value})},y=h=>{d({...m,expression:h.value})},v=h=>{d({...m,downsampler:h.value})},E=h=>{d({...m,upsampler:h.value})};return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(c._,{label:"Input",labelWidth:r},t.createElement(s.Ph,{onChange:y,options:o,value:m.expression,width:20}))),t.createElement(n.Z,null,t.createElement(c._,{label:"Resample to",labelWidth:r,tooltip:"10s, 1m, 30m, 1h"},t.createElement(i.I,{onChange:g,value:m.window,width:15})),t.createElement(c._,{label:"Downsample"},t.createElement(s.Ph,{options:f.Fr,value:l,onChange:v,width:25})),t.createElement(c._,{label:"Upsample"},t.createElement(s.Ph,{options:f.r8,value:p,onChange:E,width:25}))))}},17349:(Y,T,e)=>{"use strict";e.d(T,{M:()=>l});var t=e(9892),n=e(66111),c=e(72648),s=e(11543),i=e(81764),f=e(8581),u=e(44342),r=e(46967),d=e(67162),o=e(97573);const m=d.$.IsAbove,l=({labelWidth:y,onChange:v,refIds:E,query:h})=>{const C=(0,c.wW)(g),a={type:"query",evaluator:{type:m,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},P=h.conditions?.length?h.conditions:[a],D=P[0],x=o.Mi.find(O=>O.value===P[0].evaluator?.type),M=O=>{v({...h,expression:O.value})},b=O=>{const U=O.value??m;v({...h,conditions:p(P,{type:U})})},R=(O,U)=>{const I=parseFloat(O.currentTarget.value),F=[...D.evaluator.params];F[U]=I,v({...h,conditions:p(P,{params:F})})},S=D.evaluator.type===d.$.IsWithinRange||D.evaluator.type===d.$.IsOutsideRange;return n.createElement(s.Z,null,n.createElement(i._,{label:"Input",labelWidth:y},n.createElement(f.Ph,{onChange:M,options:E,value:h.expression,width:20})),n.createElement(u.d,{className:C.buttonSelectText,options:o.Mi,onChange:b,value:x}),S?n.createElement(n.Fragment,null,n.createElement(r.I,{type:"number",width:10,onChange:O=>R(O,0),defaultValue:D.evaluator.params[0]}),n.createElement("div",{className:C.button},"TO"),n.createElement(r.I,{type:"number",width:10,onChange:O=>R(O,1),defaultValue:D.evaluator.params[1]})):n.createElement(r.I,{type:"number",width:10,onChange:O=>R(O,0),defaultValue:P[0].evaluator.params[0]||0}))};function p(y,v){return[{...y[0],evaluator:{...y[0].evaluator,...v}}]}const g=y=>({buttonSelectText:t.css`
    color: ${y.colors.primary.text};
    font-size: ${y.typography.bodySmall.fontSize};
    text-transform: uppercase;
  `,button:t.css`
    height: 32px;

    color: ${y.colors.primary.text};
    font-size: ${y.typography.bodySmall.fontSize};
    text-transform: uppercase;

    display: flex;
    align-items: center;
    border-radius: ${y.shape.borderRadius(1)};
    font-weight: ${y.typography.fontWeightBold};
    border: 1px solid ${y.colors.border.medium};
    white-space: nowrap;
    padding: 0 ${y.spacing(1)};
    background-color: ${y.colors.background.primary};
  `})},75e3:(Y,T,e)=>{"use strict";e.d(T,{j:()=>c});var t=e(22069),n=e(97573);const c=s=>{if(!s)return!1;if((0,t.Pr)(s.datasource))return!0;const i=s;return typeof i.type!="string"?!1:Object.values(n.Us).includes(i.type)}},97573:(Y,T,e)=>{"use strict";e.d(T,{Fr:()=>d,Mi:()=>m,SQ:()=>f,Us:()=>s,YM:()=>r,Yq:()=>c,_M:()=>i,kN:()=>u,r8:()=>o});var t=e(33750),n=e(67162);const c="__expr__";var s=(l=>(l.math="math",l.reduce="reduce",l.resample="resample",l.classic="classic_conditions",l.threshold="threshold",l))(s||{});const i=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."}],f=[{value:t.gz.min,label:"Min",description:"Get the minimum value"},{value:t.gz.max,label:"Max",description:"Get the maximum value"},{value:t.gz.mean,label:"Mean",description:"Get the average value"},{value:t.gz.sum,label:"Sum",description:"Get the sum of all values"},{value:t.gz.count,label:"Count",description:"Get the number of values"},{value:t.gz.last,label:"Last",description:"Get the last value"}];var u=(l=>(l.Strict="",l.ReplaceNonNumbers="replaceNN",l.DropNonNumbers="dropNN",l))(u||{});const r=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],d=[{value:t.gz.last,label:"Last",description:"Fill with the last value"},{value:t.gz.min,label:"Min",description:"Fill with the minimum value"},{value:t.gz.max,label:"Max",description:"Fill with the maximum value"},{value:t.gz.mean,label:"Mean",description:"Fill with the average value"},{value:t.gz.sum,label:"Sum",description:"Fill with the sum of all values"}],o=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],m=[{value:n.$.IsAbove,label:"Is above"},{value:n.$.IsBelow,label:"Is below"},{value:n.$.IsWithinRange,label:"Is within range"},{value:n.$.IsOutsideRange,label:"Is outside range"}]},51935:(Y,T,e)=>{"use strict";e.d(T,{J:()=>s,R:()=>i});var t=e(33750),n=e(67162),c=e(97573);const s=f=>{switch(f.type){case c.Us.reduce:f.reducer||(f.reducer=t.gz.mean);break;case c.Us.resample:f.downsampler||(f.downsampler=t.gz.mean),f.upsampler||(f.upsampler="fillna"),f.reducer=void 0;break;case c.Us.math:f.expression=void 0;break;case c.Us.classic:f.conditions||(f.conditions=[i]);break;default:f.reducer=void 0}return f},i={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:n.$.IsAbove}}},61986:(Y,T,e)=>{"use strict";e.d(T,{Go:()=>p,J6:()=>y,OD:()=>l,Pb:()=>m,Uk:()=>h,W7:()=>a,a:()=>g,pz:()=>C,v7:()=>E});var t=e(65583),n=e(72196),c=e(37932),s=e(54899),i=e(659),f=e(60499),u=e(77582),r=e(29930),d=e(60492),o=e(15932);function m(P){return async D=>{const x=await r.ae.getFolderByUid(P);return D((0,o.G3)(x)),D((0,i.RL)((0,d.B1)(x))),x}}function l(P){return async D=>{const x=await r.ae.put(`/api/folders/${P.uid}`,{title:P.title,version:P.version});D((0,i.$l)((0,f.AT)("Folder saved"))),D((0,o.G3)(x)),c.E1.push(n.u.stripBaseFromUrl(`${x.url}/settings`))}}function p(P){return async()=>{await r.ae.delete(`/api/folders/${P}?forceDeleteRules=false`),c.E1.push("/dashboards")}}function g(P){return async D=>{const x=await r.ae.get(`/api/folders/${P}/permissions`);D((0,o.R7)(x))}}function y(P){return async D=>{try{await(0,t.n)(r.ae.fetch({method:"GET",showErrorAlert:!1,showSuccessAlert:!1,url:`/api/folders/${P}/permissions`})),D((0,o.$$)(!0))}catch(x){(0,s.kW)(x)&&x.status!==403&&D((0,i.$l)((0,f.ZR)("Error checking folder permissions",x.data?.message))),D((0,o.$$)(!1))}}}function v(P){return{userId:P.userId,teamId:P.teamId,role:P.role,permission:P.permission}}function E(P,D){return async(x,M)=>{const b=M().folder,R=[];for(const S of b.permissions){if(S.inherited)continue;const O=v(S);P===S&&(O.permission=D),R.push(O)}await r.ae.post(`/api/folders/${b.uid}/permissions`,{items:R}),await x(g(b.uid))}}function h(P){return async(D,x)=>{const M=x().folder,b=[];for(const R of M.permissions)R.inherited||R===P||b.push(v(R));await r.ae.post(`/api/folders/${M.uid}/permissions`,{items:b}),await D(g(M.uid))}}function C(P){return async(D,x)=>{const M=x().folder,b=[];for(const R of M.permissions)R.inherited||b.push(v(R));b.push({userId:P.userId,teamId:P.teamId,role:P.role,permission:P.permission}),await r.ae.post(`/api/folders/${M.uid}/permissions`,{items:b}),await D(g(M.uid))}}function a(P,D){return async x=>{const M=await(0,s.i)().post("/api/folders",{title:P,parentUid:D});await u.Vt.fetchUserPermissions(),x((0,i.$l)((0,f.AT)("Folder Created","OK"))),c.E1.push(n.u.stripBaseFromUrl(M.url))}}},60492:(Y,T,e)=>{"use strict";e.d(T,{B1:()=>o,Pr:()=>i,_l:()=>m,y3:()=>s});var t=e(35645),n=e(82002),c=e(27876);const s="manage-folder",i=l=>`folder-dashboards-${l}`,f=l=>`folder-library-panels-${l}`,u=l=>`folder-alerting-${l}`,r=l=>`folder-permissions-${l}`,d=l=>`folder-settings-${l}`;function o(l,p=l.parents){const g={icon:"folder",id:s,subTitle:"Manage folder dashboards and permissions",url:l.url,text:l.title,breadcrumbs:[{title:"Dashboards",url:"dashboards"}],children:[{active:!1,icon:"apps",id:i(l.uid),text:"Dashboards",url:l.url}]};if(p&&p.length>0){const y=p[p.length-1],v=p.slice(0,p.length-1);g.parentItem=o(y,v)}return g.children.push({active:!1,icon:"library-panel",id:f(l.uid),text:"Panels",url:`${l.url}/library-panels`}),n.Vt.hasPermission(c.AccessControlAction.AlertingRuleRead)&&t.v.unifiedAlertingEnabled&&g.children.push({active:!1,icon:"bell",id:u(l.uid),text:"Alert rules",url:`${l.url}/alerting`}),l.canAdmin&&g.children.push({active:!1,icon:"lock",id:r(l.uid),text:"Permissions",url:`${l.url}/permissions`}),l.canSave&&g.children.push({active:!1,icon:"cog",id:d(l.uid),text:"Settings",url:`${l.url}/settings`}),g}function m(l){const p=o({created:"",createdBy:"",hasAcl:!1,updated:"",updatedBy:"",id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return p.children[l].active=!0,{main:p,node:p.children[l]}}},15932:(Y,T,e)=>{"use strict";e.d(T,{$$:()=>r,G3:()=>f,R7:()=>i,Ss:()=>u,ZP:()=>o});var t=e(62992),n=e(2024);const c={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1,permissions:[],canViewFolderPermissions:!1},s=(0,t.oM)({name:"folder",initialState:c,reducers:{loadFolder:(m,l)=>({...m,...l.payload,hasChanged:!1}),setFolderTitle:(m,l)=>({...m,title:l.payload,hasChanged:l.payload.trim().length>0}),loadFolderPermissions:(m,l)=>({...m,permissions:(0,n.A)(l.payload)}),setCanViewFolderPermissions:(m,l)=>(m.canViewFolderPermissions=l.payload,m)}}),{loadFolderPermissions:i,loadFolder:f,setFolderTitle:u,setCanViewFolderPermissions:r}=s.actions,o={folder:s.reducer}},74311:(Y,T,e)=>{"use strict";e.d(T,{Q:()=>d});var t=e(9892),n=e(66111),c=e(72648),s=e(8581),i=e(45253),f=e(7804),u=e(73063);const r=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:u.LI},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],d=({value:m,onChange:l,context:p,item:g})=>{const y=o((0,c.l4)()),[v,E]=(0,n.useState)(),h=g.settings;(0,n.useEffect)(()=>{async function P(){const D=await(0,u.so)(m);E(D)}P()},[m,E]);const{current:C,options:a}=(0,n.useMemo)(()=>{let P=h?.options?[...h.options]:[...r],D=P?.find(x=>x.value===v?.path);return!D&&v&&(D={label:v.path,value:v.path},P.push(D)),{options:P,current:D}},[v,h?.options]);return n.createElement(n.Fragment,null,n.createElement(s.Ph,{value:C,options:a,onChange:P=>l(P.value),allowCustomValue:!0,formatCreateLabel:P=>`Load from URL: ${P}`}),v&&n.createElement(n.Fragment,null,v.error&&n.createElement(i.b,{title:v.error,severity:"warning"}),v.count&&n.createElement("div",{className:y.keys},n.createElement("b",null,"(",v.count,")"),v.examples(10).map(P=>n.createElement("span",{key:P},P,",")),v.count>10&&" ...")))},o=(0,f.B)(m=>({keys:t.css`
      margin-top: 4px;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;

      > span {
        margin-left: 4px;
      }
    `}))},71575:(Y,T,e)=>{"use strict";e.d(T,{C:()=>E});var t=e(99098),n=e(40538),c=e(74311),s=e(9892),i=e(66111),f=e(68183),u=e(72648),r=e(45253),d=e(39904),o=e(8581),m=e(52081),l=e(43524);const p=[{value:n.q1.Auto,label:"Auto",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:n.q1.Coords,label:"Coords",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:n.q1.Geohash,label:"Geohash",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:n.q1.Lookup,label:"Lookup",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],g="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",y=({value:h,onChange:C,context:a,item:P})=>{const[D,x]=(0,i.useState)();(0,i.useEffect)(()=>{P.settings?.source&&P.settings?.data?.length&&P.settings.data[0]&&(0,l.cJ)(P.settings.source).then(R=>{P.settings&&P.settings.data&&x((0,l.g6)(P.settings.data[0],R))})},[P.settings]);const M=(0,u.wW)(v),b=()=>{if(D){if(D.warning)return i.createElement(r.b,{title:D.warning,severity:"warning",buttonContent:i.createElement(d.J,{name:"question-circle",size:"xl"}),className:M.alert,onRemove:()=>{const R=window.open(g,"_blank","noopener,noreferrer");R&&(R.opener=null)}});if(h===n.q1.Auto&&D.description)return i.createElement("span",null,D.description)}return null};return i.createElement(i.Fragment,null,i.createElement(o.Ph,{options:p,value:h,onChange:R=>{C(R.value)}}),i.createElement(m.Lh,{className:M.hGroup},b()))},v=h=>({alert:s.css`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:s.css`
      & div {
        width: 100%;
      }
    `});function E(h,C,a,P,D){switch(a.addCustomEditor({id:"modeEditor",path:`${C}mode`,name:"Location Mode",editor:y,settings:{data:D,source:P}}),P?.mode){case n.q1.Coords:a.addFieldNamePicker({path:`${C}latitude`,name:"Latitude field",settings:{filter:x=>x.type===t.fS.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${C}longitude`,name:"Longitude field",settings:{filter:x=>x.type===t.fS.number,noFieldsMessage:"No numeric fields found"}});break;case n.q1.Geohash:a.addFieldNamePicker({path:`${C}geohash`,name:"Geohash field",settings:{filter:x=>x.type===t.fS.string,noFieldsMessage:"No strings fields found"}});break;case n.q1.Lookup:a.addFieldNamePicker({path:`${C}lookup`,name:"Lookup field",settings:{filter:x=>x.type===t.fS.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${C}gazetteer`,name:"Gazetteer",editor:c.Q})}}},50466:(Y,T,e)=>{"use strict";e.d(T,{EK:()=>l,Fh:()=>p,ie:()=>m,uZ:()=>d,zS:()=>o});var t=e(63897),n=e(30292),c=e(17792),s=e(29501),i=e(99098),f=e(14573);function u(y){if(!y?.length)return;const v=[16,8,4,2,1],E="0123456789bcdefghjkmnpqrstuvwxyz";let h=!0;const C=[],a=[];C[0]=-90,C[1]=90,a[0]=-180,a[1]=180;let P;y.split("").forEach(M=>{P=E.indexOf(M),v.forEach(b=>{r(h?a:C,P,b),h=!h})});const D=(C[0]+C[1])/2;return[(a[0]+a[1])/2,D]}function r(y,v,E){v&E?y[0]=(y[0]+y[1])/2:y[1]=(y[0]+y[1])/2}function d(y){return{name:y.name??"Point",type:i.fS.geo,values:y.values.map(v=>{const E=u(v);if(E)return new t.Z((0,s.mi)(E))}),config:g}}function o(y,v){const E=new Array(y.values.length);for(let h=0;h<y.values.length;h++){const C=y.values[h],a=v.values[h];C===null||a===null||(E[h]=new t.Z((0,s.mi)([C,a])))}return{name:"Point",type:i.fS.geo,values:E,config:g}}function m(y,v){const E=v.values.length,h=new Array(E);for(let C=0;C<E;C++)h[C]=y.find(v.values[C])?.geometry();return{name:"Geometry",type:i.fS.geo,values:h,config:g}}function l(y,v){const E=y.values,h=v.values;if(!E||!h)throw"missing src/dest";if(E.length!==h.length)throw"Source and destination field lengths do not match";const C=y.values.length,a=new Array(C);for(let P=0;P<C;P++){const D=E[P],x=h[P];D&&x?a[P]=new n.Z([D,x]):D?a[P]=D:x&&(a[P]=x)}return{name:"Geometry",type:i.fS.geo,values:a,config:g}}function p(y,v){const E=y.values,h=v.values;if(!E||!h)throw"missing src/dest";if(E.length!==h.length)throw"Source and destination field lengths do not match";const C=y.values.length,a=new Array(C);for(let P=0;P<C;P++){const D=E[P],x=h[P];D&&x&&(a[P]=new c.Z([(0,f.Lb)(D),(0,f.Lb)(x)]))}return{name:"Geometry",type:i.fS.geo,values:a,config:g}}const g=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},73063:(Y,T,e)=>{"use strict";e.d(T,{LI:()=>y,so:()=>v});var t=e(55839),n=e(63897),c=e(83881),s=e(99098),i=e(54899),f=e(69396);function u(E){const h=new f.Z().readFeatures(E,{featureProjection:"EPSG:3857"}),C=h.length,a=new Array(C).fill(null),P=[],D=new Map,x=S=>{let O=D.get(S);return O||(O={types:new Set,values:new Array(C).fill(null),count:0},P.push(S),D.set(S,O)),O},M=(...S)=>{for(const O of S)if(!D.has(O))return O;return"___"+S[0]},b={types:new Set,values:new Array(C).fill(null),count:0};for(let S=0;S<C;S++){const O=h[S];a[S]=O.getGeometry();const U=O.getId();U!=null&&(b.values[S]=U,b.types.add((0,c.DP)(U)),b.count++);for(const I of O.getKeys()){const F=O.get(I);if(F===a[S]||F==null)continue;const w=x(I);w.values[S]=F,w.types.add((0,c.DP)(F)),w.count++}}const R=[];if(b.count>0){const S=r(b);R.push({name:M("id","_id","__id"),type:S,values:b.values,config:{}})}R.push({name:M("geo","geometry"),type:s.fS.geo,values:a,config:{}});for(const S of P){const O=D.get(S);if(!O)continue;const U=r(O);R.push({name:S,type:U,values:O.values,config:{}})}return{fields:R,length:C}}function r(E){return E.count<1?s.fS.other:E.types.size>1?(E.values=E.values.map(h=>h!=null?`${h}`:h),s.fS.string):E.types.values().next().value}var d=e(50466),o=e(29501);function m(E,h){let C=0;const a=new Map;for(const P of h){const D=new n.Z((0,o.mi)([P.longitude,P.latitude])),x={point:()=>D,geometry:()=>D};if(P.name&&(a.set(P.name,x),a.set(P.name.toUpperCase(),x)),P.key&&(a.set(P.key,x),a.set(P.key.toUpperCase(),x)),P.keys)for(const M of P.keys)a.set(M,x),a.set(M.toUpperCase(),x);C++}return{path:E,find:P=>{let D=a.get(P);return!D&&typeof P=="string"&&(D=a.get(P.toUpperCase())),D},count:C,examples:P=>{const D=[];if(a.size<1)D.push("no values found");else for(const x of a.keys())if(D.push(x),D.length>=P)break;return D}}}function l(E,h){let C;if(Array.isArray(h)){const a=h[0];if(a.latitude&&a.longitude&&(a.key||a.keys))return m(E,h)}else Array.isArray(h?.features)&&h?.type==="FeatureCollection"&&(C=u(h));if(!C)try{C=(0,c.g0)(h)}catch(a){return{path:E,error:`${a}`,find:P=>{},examples:P=>[]}}return p(C,{path:E})}function p(E,h){const C=[];let a,P,D,x,M;for(const S of E.fields)if(S.type===s.fS.geo&&(a=S),!M&&S.type===s.fS.string&&(M=S),S.name){h.keys&&h.keys.includes(S.name)&&C.push(S);const O=S.name.toUpperCase();switch(O){case"LAT":case"LATITUTE":P=S;break;case"LON":case"LNG":case"LONG":case"LONGITUE":D=S;break;case"GEOHASH":x=S;break;case"ID":case"UID":case"KEY":case"CODE":h.keys||C.push(S);break;default:h.keys||(O.endsWith("_ID")||O.endsWith("_CODE"))&&C.push(S)}}!C.length&&M&&C.push(M);let b=!1;a?b=a.values[0]?.getType()==="Point":x?(a=(0,d.uZ)(x),b=!0):P&&D&&(a=(0,d.zS)(D,P),b=!0);const R=new Map;return C.forEach(S=>{S.values.forEach((O,U)=>{const I=`${O}`;R.set(I.toUpperCase(),U),R.set(I,U)})}),{path:h.path,find:S=>{const O=R.get(S);if(O!=null){const U=a?.values[O];return{frame:E,index:O,point:()=>!U||b?U:new n.Z((0,t.qg)(U.getExtent())),geometry:()=>U}}},examples:S=>{const O=[];for(let U of R.keys())if(O.push(U),O.length>S)break;return O},frame:()=>E,count:E.length}}const g={},y="public/gazetteer/countries.json";async function v(E){E||(E=y);let h=g[E];if(!h){try{const C=await(0,i.i)().get(E);h=l(E,C)}catch(C){console.warn("Error loading placename lookup",E,C),h={path:E,error:"Error loading URL",find:a=>{},examples:a=>[]}}g[E]=h}return h}},43524:(Y,T,e)=>{"use strict";e.d(T,{cJ:()=>m,g6:()=>p});var t=e(30471),n=e(99098),c=e(50035),s=e(90748),i=e(40538),f=e(50466),u=e(73063);function r(g){return y=>{for(const v of y.fields)if(g(v,y,[]))return v}}function d(g){return y=>{for(const v of y.fields){if(g.has(v.name.toLowerCase()))return v;const E=(0,t.CZ)(v,y);if(g.has(E))return v}}}const o={mode:i.q1.Auto,geohash:d(new Set(["geohash"])),latitude:d(new Set(["latitude","lat"])),longitude:d(new Set(["longitude","lon","lng"])),h3:d(new Set(["h3"])),wkt:d(new Set(["wkt"])),lookup:d(new Set(["lookup"])),geo:g=>g.fields.find(y=>y.type===n.fS.geo)};async function m(g){const y={...o,mode:g?.mode??i.q1.Auto};switch(y.gazetteer=await(0,u.so)(g?.gazetteer),y.mode){case i.q1.Geohash:g?.geohash?y.geohash=r((0,c.sq)({id:s.mi.byName,options:g.geohash})):y.geohash=()=>{};break;case i.q1.Lookup:const v=g?.lookup?.length?(0,c.sq)({id:s.mi.byName,options:g.lookup}):(0,c.sq)({id:s.mi.byType,options:n.fS.string});y.lookup=r(v);break;case i.q1.Coords:g?.latitude?y.latitude=r((0,c.sq)({id:s.mi.byName,options:g.latitude})):y.latitude=()=>{},g?.longitude?y.longitude=r((0,c.sq)({id:s.mi.byName,options:g.longitude})):y.longitude=()=>{};break}return y}function l(g,y){const v={mode:y.mode??i.q1.Auto};if(v.mode===i.q1.Auto){if(v.geo=y.geo(g),v.geo)return v;if(v.latitude=y.latitude(g),v.longitude=y.longitude(g),v.latitude&&v.longitude)return v.mode=i.q1.Coords,v;if(v.geohash=y.geohash(g),v.geohash)return v.mode=i.q1.Geohash,v;if(v.lookup=y.lookup(g),v.lookup)return v.mode=i.q1.Lookup,v}switch(v.mode){case i.q1.Coords:v.latitude=y.latitude(g),v.longitude=y.longitude(g);break;case i.q1.Geohash:v.geohash=y.geohash(g);break;case i.q1.Lookup:v.lookup=y.lookup(g);break}return v}function p(g,y){const v=l(g,y);switch(v.mode){case i.q1.Auto:return v.geo?{field:v.geo}:{warning:"Unable to find location fields"};case i.q1.Coords:return v.latitude&&v.longitude?{field:(0,f.zS)(v.longitude,v.latitude),derived:!0,description:`${v.mode}: ${v.latitude.name}, ${v.longitude.name}`}:{warning:"Select latitude/longitude fields"};case i.q1.Geohash:return v.geohash?{field:(0,f.uZ)(v.geohash),derived:!0,description:`${v.mode}`}:{warning:"Select geohash field"};case i.q1.Lookup:return v.lookup?y.gazetteer?{field:(0,f.ie)(y.gazetteer,v.lookup),derived:!0,description:`${v.mode}: ${y.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},65066:(Y,T,e)=>{"use strict";e.d(T,{Fc:()=>o,KO:()=>l,gb:()=>p,gv:()=>m});var t=e(3574),n=e.n(t),c=e(77258),s=e(13512),i=e(76015),f=e(53678),u=e(96606),r=e(86146),d=e(26991);function o(g,y){let v="";g.meta?.forEach(C=>{const a=`${C.label}: ${JSON.stringify(C.value)}
`;v=v+a}),v=v+`

`,g.rows.forEach(C=>{const a=(0,c.lf)(C.timeEpochMs)+"	"+C.entry+`
`;v=v+a});const E=new Blob([v],{type:"text/plain;charset=utf-8"}),h=`${y}-logs-${(0,c.dq)(new Date)}.txt`;n()(E,h)}function m(g,y,v,E=s.W.noop){const h=(0,i.MJ)([g],v),C=new Blob([String.fromCharCode(65279),h],{type:"text/csv;charset=utf-8"}),a=E!==s.W.noop?"-as-"+E.toLocaleLowerCase():"",P=`${y}-data${a}-${(0,c.dq)(new Date)}.csv`;n()(C,P)}function l(g,y){const v=new Blob([JSON.stringify(g)],{type:"application/json"}),E=`${y}-${(0,c.dq)(new Date)}.json`;n()(v,E)}function p(g,y){let v="otlp";switch(g.meta?.custom?.traceFormat){case"jaeger":{let E=(0,u.c6)(new f.v(g));l(E,y),v="jaeger";break}case"zipkin":{let E=(0,d.H)(new f.v(g));l(E,y),v="zipkin";break}case"otlp":default:{let E=(0,r.g9)(new f.v(g));l(E,y);break}}return v}},90336:(Y,T,e)=>{"use strict";e.d(T,{GY:()=>f,MA:()=>i,nW:()=>s});var t=e(54899),n=e(77582),c=e(27876);const s=(0,c.createAsyncThunk)("users/fetchInvitees",async()=>n.Vt.hasPermission(c.AccessControlAction.OrgUsersAdd)?await(0,t.i)().get("/api/org/invites"):[]),i=(0,c.createAsyncThunk)("users/addInvitee",async(u,{dispatch:r})=>{await(0,t.i)().post("/api/org/invites",u),await r(s())}),f=(0,c.createAsyncThunk)("users/revokeInvite",async u=>(await(0,t.i)().patch(`/api/org/invites/${u}/revoke`,{}),u))},75804:(Y,T,e)=>{"use strict";e.d(T,{ZP:()=>r,wl:()=>s});var t=e(62992),n=e(90336);const c=(0,t.HF)({selectId:d=>d.code}),s=c.getSelectors(),i=c.getInitialState({status:"idle"}),r={invites:(0,t.oM)({name:"invites",initialState:i,reducers:{},extraReducers:d=>{d.addCase(n.nW.pending,o=>{o.status="loading"}).addCase(n.nW.fulfilled,(o,{payload:m})=>{c.setAll(o,m),o.status="succeeded"}).addCase(n.nW.rejected,o=>{o.status="failed"}).addCase(n.GY.fulfilled,(o,{payload:m})=>{c.removeOne(o,m),o.status="succeeded"})}}).reducer}},76647:(Y,T,e)=>{"use strict";e.d(T,{T:()=>p,c:()=>g});var t=e(66111),n=e(93006),c=e(59679),s=e(54899),i=e(24799),f=e(46967),u=e(35029),r=e(31403),d=e(79658),o=e(35287),m=e(86648),l=e(2313);const p=({panel:y,initialFolderUid:v,onDismiss:E})=>{const[h,C]=(0,t.useState)(v),[a,P]=(0,t.useState)(y.title),[D,x]=(0,t.useState)(y.title),[M,b]=(0,t.useState)(!1);(0,t.useEffect)(()=>b(!0),[a]),(0,n.Z)(()=>x(a),350,[a]);const{saveLibraryPanel:R}=(0,l.E)(),S=(0,t.useCallback)(()=>{y.libraryPanel={uid:"",name:a},R(y,h).then(I=>{I instanceof Error||E()})},[y,a,h,E,R]),O=(0,c.Z)(async()=>{try{return!(await(0,m.jh)(a)).some(I=>I.folderUid===h)}catch(I){return(0,s.kW)(I)&&(I.isHandled=!0),!0}finally{b(!1)}},[D,h]),U=!O?.value&&O.value!==void 0&&a===D&&!M;return t.createElement(t.Fragment,null,t.createElement(i.g,{label:(0,o.t)("library-panel.add-modal.name","Library panel name"),invalid:U,error:U?(0,o.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},t.createElement(f.I,{id:"share-panel-library-panel-name-input",name:"name",value:a,onChange:I=>P(I.currentTarget.value)})),t.createElement(i.g,{label:(0,o.t)("library-panel.add-modal.folder","Save in folder"),description:(0,o.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},t.createElement(d.Es,{onChange:({uid:I})=>C(I),initialFolderUid:v,inputId:"share-panel-library-panel-folder-picker"})),t.createElement(u.u.ButtonRow,null,t.createElement(r.zx,{variant:"secondary",onClick:E,fill:"outline"},t.createElement(o.cC,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),t.createElement(r.zx,{onClick:S,disabled:U},t.createElement(o.cC,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},g=({isOpen:y=!1,panel:v,initialFolderUid:E,...h})=>t.createElement(u.u,{title:"Create library panel",isOpen:y,onDismiss:h.onDismiss},t.createElement(p,{panel:v,initialFolderUid:E,onDismiss:h.onDismiss}))},81283:(Y,T,e)=>{"use strict";e.d(T,{i:()=>c});var t=e(66111),n=e(98102);const c=({isOpen:s,onConfirm:i,onDismiss:f})=>t.createElement(n.s,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{i(),f()},onDismiss:f,isOpen:s})},6297:(Y,T,e)=>{"use strict";e.d(T,{V:()=>t});function t(n){return Boolean(n.libraryPanel?.uid)}},86648:(Y,T,e)=>{"use strict";e.d(T,{E8:()=>p,Ef:()=>l,Kq:()=>d,Mh:()=>u,Ob:()=>o,Pq:()=>f,UO:()=>m,jh:()=>r});var t=e(65583),n=e(30670),c=e(86899),s=e(29930),i=e(59096);async function f({searchString:g="",perPage:y=100,page:v=1,excludeUid:E="",sortDirection:h="",typeFilter:C=[],folderFilterUIDs:a=[]}={}){const P=new URLSearchParams;P.append("searchString",g),P.append("sortDirection",h),P.append("typeFilter",C.join(",")),P.append("folderFilterUIDs",a.join(",")),P.append("excludeUid",E),P.append("perPage",y.toString(10)),P.append("page",v.toString(10)),P.append("kind",i.V.Panel.toString(10));const{result:D}=await(0,s.i)().get(`/api/library-elements?${P.toString()}`);return D}async function u(g,y=!1){const v=await(0,t.n)((0,s.i)().fetch({method:"GET",url:`/api/library-elements/${g}`,showSuccessAlert:!y,showErrorAlert:!y})),{result:E}=v.data,h=new c.f({...n.Ql,schemaVersion:35,panels:[E.model]}),C=h.panels[0].getSaveModel();return h.destroy(),{...E,model:C}}async function r(g){const{result:y}=await(0,s.i)().get(`/api/library-elements/name/${g}`);return y}async function d(g,y){const{result:v}=await(0,s.i)().post("/api/library-elements",{folderUid:y,name:g.libraryPanel.name,model:g,kind:i.V.Panel});return v}async function o(g){const{libraryPanel:y,...v}=g,{uid:E,name:h,version:C,folderUid:a}=y,P=i.V.Panel,{result:D}=await(0,s.i)().patch(`/api/library-elements/${E}`,{folderUid:a,name:h,model:v,version:C,kind:P});return D}function m(g){return(0,s.i)().delete(`/api/library-elements/${g}`)}async function l(g){const{result:y}=await(0,s.i)().get(`/api/library-elements/${g}/connections`);return y}async function p(g){const y=await l(g);return y.length===0?[]:await(0,s.i)().search({dashboardUIDs:y.map(E=>E.connectionUid)})}},59096:(Y,T,e)=>{"use strict";e.d(T,{V:()=>t});var t=(c=>(c[c.Panel=1]="Panel",c))(t||{}),n=(c=>(c[c.Dashboard=1]="Dashboard",c))(n||{})},2313:(Y,T,e)=>{"use strict";e.d(T,{E:()=>y});var t=e(66111),n=e(55986),c=e(54899),s=e(659),i=e(35287),f=e(27876),u=e(60499),r=e(86648);function d(v){return(0,u.t_)(v)}function o(v){return(0,u.AT)(v)}async function m(v,E){const h=l(v),C=await g(h,E);return p(v,C),C}function l(v){let E=v.getSaveModel();return E={libraryPanel:{name:v.title,uid:void 0},...E},E}function p(v,E){v.restoreModel({...E.model,configRev:0,libraryPanel:E,title:v.title}),v.hasSavedPanelEditChange=!0,v.refresh()}function g(v,E){return v.libraryPanel?v.libraryPanel&&v.libraryPanel.uid===""?(0,r.Kq)(v,E):(0,r.Ob)(v):Promise.reject()}const y=()=>{const v=(0,f.useDispatch)(),[E,h]=(0,n.default)(async(C,a)=>{try{return await m(C,a)}catch(P){throw(0,c.kW)(P)?(P.isHandled=!0,new Error(P.data.message)):P}},[]);return(0,t.useEffect)(()=>{if(E.error){const C=E.error.message;v((0,s.$l)(d((0,i.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:C}))))}E.value&&v((0,s.$l)(o((0,i.t)("library-panels.save.success","Library panel saved"))))},[v,E]),{state:E,saveLibraryPanel:h}}},30992:(Y,T,e)=>{"use strict";e.d(T,{H:()=>a});var t=e(44288),n=e(8891),c=e(4063),s=e(75118),i=e(37932),f=e(77582),u=e(45984),r=e(9398),d=e(9892),o=e(66111),m=e(72648),l=e(35029),p=e(31403),g=e(7804),y=(P=>(P.Saved="saved",P.EditingStarted="editing-started",P.EditingCanceled="editing-cancelled",P.Deleted="deleted",P))(y||{});function v({onDismiss:P,event:D}){const x=(0,m.wW)(E),M=()=>{if(D?.action===y.Deleted){i.E1.push("/");return}a.reloadPage(),P()};return o.createElement(l.u,{isOpen:!0,title:"Dashboard changed",icon:"copy",onDismiss:P,onClickBackdrop:()=>{},className:x.modal},o.createElement("div",{className:x.description},"The dashboad has been updated by another session. Do you want to continue editing or discard your local changes?"),o.createElement(l.u.ButtonRow,null,o.createElement(p.zx,{onClick:P,variant:"secondary",fill:"outline"},"Continue editing"),o.createElement(p.zx,{onClick:M,variant:"destructive"},"Discard local changes")))}const E=(0,g.B)(P=>({modal:(0,d.css)({width:"600px"}),description:(0,d.css)({color:P.colors.text.secondary,paddingBottom:P.spacing(1)})})),h=(0,t.Z)();class C{constructor(){this.editing=!1,this.observer={next:D=>{if((0,n.se)(D)&&this.editing&&D.state===n.yS.Connected&&this.sendEditingState(),(0,n.RL)(D)){if(D.message.sessionId===h)return;const{action:x}=D.message;switch(x){case y.EditingStarted:case y.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const M=(0,r.h4)().getCurrent();if(M?.uid!==D.message.uid){console.log("dashboard event for different dashboard?",D,M);return}const b=this.editing||M.hasUnsavedChanges();if(x===y.Saved)b?f.h$.publish(new u.Dn({component:v,props:{event:D}})):(f.h$.emit(c.SI.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(b&&x===y.EditingStarted&&!this.hasSeenNotice){const R=D.message,S=this.getRecentEditingEvent();(!S||S.message!==R.message)&&(this.hasSeenNotice=!0,f.h$.emit(c.SI.alertWarning,["Another session is editing this dashboard",R.message])),this.lastEditing=R}return}}}}}}setEditingState(D){const x=this.editing=D;this.editing=D,this.hasSeenNotice=!1,x&&f.Vt.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:D,uid:x}=this;D&&x&&(0,s.gj)().publish(D,{sessionId:h,uid:x,action:this.editing?y.EditingStarted:y.EditingCanceled,timestamp:Date.now()})}watch(D){const x=(0,s.gj)();x&&D!==this.uid&&(this.channel={scope:n.z.Grafana,namespace:"dashboard",path:`uid/${D}`},this.leave(),D&&(this.subscription=x.getStream(this.channel).subscribe(this.observer)),this.uid=D)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){i.E1.reload()}}const a=new C},28625:(Y,T,e)=>{"use strict";e.d(T,{Av:()=>m,Ko:()=>g,MB:()=>v,_A:()=>l});var t=e(83881),n=e(99098),c=e(59957),s=e(7569),i=e(17587),f=e(75118),u=e(44332);const r="__name__";var d=(P=>(P[P.wide=0]="wide",P[P.labels=1]="labels",P))(d||{});const o=class{constructor(P){this.options=P,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:f.T0.Replace,length:0},this.serialize=(D,x,M)=>{const b=x?Object.assign({},{...this.options,...x}):this.options,R=(0,t.Aw)(this,D),S=C(R.fields.map(U=>U.values),typeof M?.maxLength=="number"?Math.min(M.maxLength,b.maxLength):b.maxLength,this.timeFieldIndex,b.maxDelta);R.fields=R.fields.map(U=>({...U,values:U.values.slice(S)}));const O=R.fields[0]?.values?.length??0;return{...R,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:O,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:b}},this.initFromSerialized=D=>{this.name=D.name,this.refId=D.refId,this.meta=D.meta,this.length=D.length,this.labels=D.labels,this.schemaFields=D.schemaFields,this.timeFieldIndex=D.timeFieldIndex,this.pushMode=D.pushMode,this.packetInfo.length=D.packetInfo.length,this.packetInfo.number=D.packetInfo.number,this.packetInfo.action=f.T0.Replace,this.packetInfo.schemaChanged=!0,this.fields=D.fields.map(x=>({...x,type:x.type??n.fS.other,config:x.config??{},values:x.values??[]})),h(this.fields.map(x=>x.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:D,maxDelta:x})=>{const M=D&&this.options.maxLength<D,b=x&&this.options.maxDelta<x,R=x&&this.options.maxDelta===1/0;return Boolean(M||b||R)},this.resize=({maxLength:D,maxDelta:x})=>{x&&(this.options.maxDelta===1/0?this.options.maxDelta=x:this.options.maxDelta=Math.max(x,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,D??0)},this.pushNewValues=D=>{if(!D?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=D[0].length,this.packetInfo.schemaChanged=!1,this.options.action===f.T0.Append?E(this.fields.map(M=>M.values),D,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(D.forEach((M,b)=>{this.fields[b]&&(this.fields[b].values=M)}),h(this.fields.map(M=>M.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const x=this.fields?.[0]?.values.length;x!==void 0&&(this.length=x)},this.resetStateCalculations=()=>{this.fields.forEach(D=>{D.state={...D.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=D=>this.fields.map((x,M)=>D(x)?M:void 0).filter(x=>x!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(D=>{const x=D.values;return x.slice(Math.max(x.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>Boolean(this.packetInfo.length),this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action===f.T0.Replace}push(P){const{schema:D,data:x}=P;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,D){this.pushMode=0,this.timeFieldIndex=D.fields.findIndex(S=>S.type===n.fS.time);const M=D.fields[0];this.timeFieldIndex===1&&M.type===n.fS.string&&(M.name==="labels"||M.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const b=this.pushMode===1?D.fields.slice(1):D.fields;this.refId=D.refId,D.meta&&(this.meta={...D.meta});const{displayNameFormat:R}=this.options;if(a(this.schemaFields,b)){const S=b.length;this.fields.forEach((O,U)=>{const I=b[U%S];O.config=I.config??{},O.labels=I.labels}),R&&this.fields.forEach(O=>{const U={[r]:O.name,...O.labels};O.config.displayNameFromDS=(0,u.W)(R,U)})}else{this.packetInfo.schemaChanged=!0;const S=this.pushMode===0;this.fields=b.map(O=>{const U=O.config??{};if(R){const I={[r]:O.name,...O.labels};U.displayNameFromDS=(0,u.W)(R,I)}return{config:U,name:O.name,labels:O.labels,type:O.type??n.fS.other,values:S?this.fields.find(I=>I.name===O.name&&O.type===I.type)?.values??Array(this.length).fill(void 0):[]}})}this.schemaFields=b}if(x&&x.values.length&&x.values[0].length){let{values:M,entities:b}=x;if(b&&b.forEach((S,O)=>{S&&(0,c.Jy)(S,M[O])}),this.pushMode===1){const S=p(M);for(const I of S.keys())this.labels.has(I)||(this.packetInfo.schemaChanged=!0,this.addLabel(I));let O=Array(this.schemaFields.length).fill([]),U=[];this.labels.forEach(I=>{U.push(S.get(I)??O)}),M=(0,i.v_)(U)}if(M.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${M.length} (labels=${this.pushMode===1})`);this.fields=M.map((S,O)=>{let U=`Field ${O}`,I=(0,t.LI)(S[0]);return O===0&&I===n.fS.number&&S[0]>1600016688632&&(I=n.fS.time,U="Time"),{name:U,type:I,config:{},values:[]}})}let R=M;this.packetInfo.length=M[0].length,this.alwaysReplace||!this.length?this.packetInfo.action=f.T0.Replace:(this.packetInfo.action=f.T0.Append,R=this.fields.map(S=>S.values),E(R,M,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),R.forEach((S,O)=>{const U=this.fields[O],{state:I}=U;U.values=S,I&&(I.calcs=void 0)}),this.length=R[0].length}return{...this.packetInfo}}addLabel(P){const{displayNameFormat:D}=this.options,x=this.labels.size,M=y(P);if(x===0)this.fields.forEach((b,R)=>{if(R>0&&(b.labels=M,D)){const S={[r]:b.name,...M};b.config.displayNameFromDS=(0,u.W)(D,S)}});else for(let b=1;b<this.schemaFields.length;b++){let R=this.schemaFields[b];const S=R.config??{};if(D){const O={[r]:R.name,...M};S.displayNameFromDS=(0,u.W)(D,O)}this.fields.push({...R,config:S,labels:M,values:Array(this.length).fill(void 0)})}this.labels.add(P)}};let m=o;m.deserialize=P=>{const D=new o(P.options);return D.initFromSerialized(P),D},m.empty=P=>new o(l(P)),m.fromDataFrameJSON=(P,D)=>{const x=new o(l(D));return x.push(P),x};function l(P){return{maxLength:P?.maxLength??1e3,maxDelta:P?.maxDelta??1/0,action:P?.action??f.T0.Append,displayNameFormat:P?.displayNameFormat}}function p(P){let D=new Set(P[0]),x=new Map;D.forEach(M=>{let b=Array(P.length-1).fill(null).map(()=>[]);x.set(M,b)});for(let M=0;M<P[0].length;M++){let b=x.get(P[0][M]);for(let R=1;R<P.length;R++)b[R-1].push(P[R][M])}return x}function g(P,D,x,M){let b;x=x||0,M=M||D.length-1;let R=M<=2147483647;for(;M-x>1;)b=R?x+M>>1:Math.floor((x+M)/2),D[b]<P?x=b:M=b;return P-D[x]<=D[M]-P?x:M}function y(P){if(!P.length)return{};if(P.charAt(0)==="{")return(0,s.J8)(P);const D={};return P.split(",").forEach(x=>{const[M,b]=x.trim().split("=");D[M]=b}),D}function v(P){const D=P.packetInfo;return D?.action?D:void 0}function E(P,D,x=1/0,M=0,b=1/0){for(let R=0;R<P.length;R++)for(let S=0;S<D[R].length;S++)P[R].push(D[R][S]);return h(P,x,M,b)}function h(P,D=1/0,x=0,M=1/0){const b=C(P,D,x,M);if(b)for(let R=0;R<P.length;R++)P[R].splice(0,b);return b}function C(P,D=1/0,x=0,M=1/0){if(!P[0]?.length)return 0;const b=P[0].length;let R=0;if(b>D&&(R=b-D),M!==1/0&&x>=0){const S=P[x],O=S[R],U=S[b-1];U-O>M&&(R=g(U-M,S,R))}return R}function a(P,D){if(P?.length!==D.length)return!1;for(let x=0;x<P.length;x++){const M=P[x],b=D[x];if(M.name!==b.name||M.type!==b.type)return!1}return!0}},14035:(Y,T,e)=>{"use strict";e.d(T,{A1:()=>c,g0:()=>n,iL:()=>f});var t=e(83881),n=(u=>(u.NewValuesSameSchema="NewValuesSameSchema",u.FullFrame="FullFrame",u))(n||{});const c=(u,r)=>"type"in u&&u.type===r,s=Object.values(n),i=u=>"type"in u&&s.includes(u.type),f=u=>(0,t.aY)(u)&&"packetInfo"in u},54972:(Y,T,e)=>{"use strict";e.d(T,{j:()=>i});var t=e(9892),n=e(66111),c=e(72648);const s=["level","lvl","filename"],i=({labels:u})=>{const r=(0,c.wW)(f),d=Object.keys(u).filter(o=>!o.startsWith("_")&&!s.includes(o));return d.length===0?n.createElement("span",{className:(0,t.cx)([r.logsLabels])},n.createElement("span",{className:(0,t.cx)([r.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([r.logsLabels])},d.sort().map(o=>{const m=u[o];if(!m)return;const l=`${o}: ${m}`;return n.createElement("span",{key:o,className:(0,t.cx)([r.logsLabel])},n.createElement("span",{className:(0,t.cx)([r.logsLabelValue]),title:l},m))}))},f=u=>({logsLabels:t.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${u.typography.size.xs};
    `,logsLabel:t.css`
      label: logs-label;
      display: flex;
      padding: ${u.spacing(0,.25)};
      background-color: ${u.colors.background.secondary};
      border-radius: ${u.shape.borderRadius(1)};
      margin: ${u.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:t.css`
      label: logs-label__value;
      display: inline-block;
      max-width: ${u.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},25287:(Y,T,e)=>{"use strict";e.d(T,{Q:()=>d});var t=e(2525),n=e(66111),c=e(55271),s=e.n(c),i=e(52216),f=e(72648);function u(o,m){return m.split(/;\s*/).reduce((l,p)=>{if(p==="color:rgba(0,0,0,0.5)")return{color:o.colors.text.secondary};const g=p.match(/([^:\s]+)\s*:\s*(.+)/);if(g&&g[1]&&g[2]){const y=g[1].replace(/-([a-z])/g,(v,E)=>E.toUpperCase());l[y]=g[2]}return l},{})}class r extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(m,l){return m.value===l.prevValue?null:{chunks:t.ZP.parse(m.value).spans.map(g=>g.css?{style:u(m.theme,g.css),text:g.text}:{text:g.text}),prevValue:m.value}}render(){const{chunks:m}=this.state;return m.map((l,p)=>{const g=this.props.highlight?.searchWords?n.createElement(s(),{key:p,textToHighlight:l.text,searchWords:this.props.highlight.searchWords,findChunks:i.Xt,highlightClassName:this.props.highlight.highlightClassName}):l.text;return l.style?n.createElement("span",{key:p,style:l.style,"data-testid":"ansiLogLine"},g):g})}}const d=(0,f.HE)(r);d.displayName="LogMessageAnsi"},70821:(Y,T,e)=>{"use strict";e.d(T,{n:()=>o,r:()=>p});var t=e(9892),n=e(58635),c=e(66111),s=e(55271),i=e.n(s),f=e(52216),u=e(8180),r=e(61860),d=e(25287);const o=1e5;function m(g,y,v,E){const h=v&&v.length>0&&v[0]&&v[0].length>0&&y.length<o,C=v??[];if(g){const a=h?{searchWords:C,highlightClassName:E}:void 0;return c.createElement(d.Q,{value:y,highlight:a})}else return h?c.createElement(i(),{textToHighlight:y,searchWords:C,findChunks:f.Xt,highlightClassName:E}):y}const l=(0,n.Z)((g,y)=>{if(y)try{return JSON.stringify(JSON.parse(g),void 0,2)}catch{return g}return g});class p extends c.PureComponent{constructor(){super(...arguments),this.onShowContextClick=y=>{const{onOpenContext:v}=this.props;y.stopPropagation(),v(this.props.row)}}render(){const{row:y,wrapLogMessage:v,prettifyLogMessage:E,showContextToggle:h,styles:C}=this.props,{hasAnsi:a,raw:P}=y,D=l(P,E),x=h?h(y):!1;return c.createElement(c.Fragment,null,c.createElement("td",{className:C.logsRowMessage},c.createElement("div",{className:(0,t.cx)({[C.positionRelative]:v},{[C.horizontalScroll]:!v})},c.createElement("button",{className:(0,t.cx)(C.logLine,C.positionRelative)},m(a,D,y.searchWords,C.logsRowMatchHighLight)))),c.createElement("td",{className:(0,t.cx)("log-row-menu-cell",C.logRowMenuCell)},c.createElement("span",{className:(0,t.cx)("log-row-menu",C.rowMenu),onClick:M=>M.stopPropagation()},x&&c.createElement(u.h,{tooltip:"Show context",tooltipPlacement:"top",size:"md",name:"gf-show-context",onClick:this.onShowContextClick}),c.createElement(r.u,{placement:"top",content:"Copy"},c.createElement(u.h,{size:"md",name:"copy",onClick:()=>navigator.clipboard.writeText(D)})))))}}},59985:(Y,T,e)=>{"use strict";e.d(T,{w:()=>j});var t=e(58635),n=e(66111),c=e(40538),s=e(72648),i=e(81042),f=e(9892),u=e(82897),r=e(77258),d=e(41818),o=e(61860),m=e(39904),l=e(94599),p=e(8180),g=e(89719),y=e(7804);const v=A=>({logsStatsRow:f.css`
    label: logs-stats-row;
    margin: ${parseInt(A.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:f.css`
    label: logs-stats-row--active;
    color: ${A.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:f.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:f.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:f.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${A.spacing(.75)};
  `,logsStatsRowPercent:f.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${A.spacing(.75)};
    width: ${A.spacing(4.5)};
  `,logsStatsRowBar:f.css`
    label: logs-stats-row__bar;
    height: ${A.spacing(.5)};
    overflow: hidden;
    background: ${A.colors.text.disabled};
  `,logsStatsRowInnerBar:f.css`
    label: logs-stats-row__innerbar;
    height: ${A.spacing(.5)};
    overflow: hidden;
    background: ${A.colors.primary.main};
  `}),E=({active:A,count:_,proportion:k,value:Q})=>{const re=(0,s.wW)(v),Z=`${Math.round(k*100)}%`,oe={width:Z},G=A?(0,f.cx)([re.logsStatsRow,re.logsStatsRowActive]):(0,f.cx)([re.logsStatsRow]);return n.createElement("div",{className:G},n.createElement("div",{className:(0,f.cx)([re.logsStatsRowLabel])},n.createElement("div",{className:(0,f.cx)([re.logsStatsRowValue]),title:Q},Q),n.createElement("div",{className:(0,f.cx)([re.logsStatsRowCount])},_),n.createElement("div",{className:(0,f.cx)([re.logsStatsRowPercent])},Z)),n.createElement("div",{className:(0,f.cx)([re.logsStatsRowBar])},n.createElement("div",{className:(0,f.cx)([re.logsStatsRowInnerBar]),style:oe})))};E.displayName="LogLabelStatsRow";const h=5,C=(0,y.B)(A=>({logsStats:f.css`
      label: logs-stats;
      background: inherit;
      color: ${A.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:f.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${A.colors.border.medium};
      display: flex;
    `,logsStatsTitle:f.css`
      label: logs-stats__title;
      font-weight: ${A.typography.fontWeightMedium};
      padding-right: ${A.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:f.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:f.css`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class a extends n.PureComponent{render(){const{label:_,rowCount:k,stats:Q,value:re,theme:Z,isLabel:oe}=this.props,G=C(Z),le=Q.slice(0,h);let ge=le.find(ae=>ae.value===re),ne=Q.slice(h);const ue=!ge;ue&&(ge=ne.find(ae=>ae.value===re),ne=ne.filter(ae=>ae.value!==re));const te=ne.reduce((ae,pe)=>ae+pe.count,0),q=le.reduce((ae,pe)=>ae+pe.count,0)+te,se=te/q;return n.createElement("div",{className:G.logsStats,"data-testid":"logLabelStats"},n.createElement("div",{className:G.logsStatsHeader},n.createElement("div",{className:G.logsStatsTitle},_,": ",q," of ",k," rows have that ",oe?"label":"field")),n.createElement("div",{className:G.logsStatsBody},le.map(ae=>n.createElement(E,{key:ae.value,...ae,active:ae.value===re})),ue&&ge&&n.createElement(E,{key:ge.value,...ge,active:!0}),te>0&&n.createElement(E,{key:"__OTHERS__",count:te,value:"Other",proportion:se})))}}const P=(0,s.HE)(a);P.displayName="LogLabelStats";var D=e(34282);const x=(0,t.Z)(A=>({wordBreakAll:f.css`
      label: wordBreakAll;
      word-break: break-all;
    `,copyButton:f.css`
      & > button {
        color: ${A.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: 50%;
        height: ${A.spacing(A.components.height.sm)};
        width: ${A.spacing(A.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${A.colors.success.main};
          }
        }
      }
    `,adjoiningLinkButton:f.css`
      margin-left: ${A.spacing(1)};
    `,wrapLine:f.css`
      label: wrapLine;
      white-space: pre-wrap;
    `,logDetailsStats:f.css`
      padding: 0 ${A.spacing(1)};
    `,logDetailsValue:f.css`
      display: flex;
      align-items: center;
      line-height: 22px;

      .show-on-hover {
        display: inline;
        visibility: hidden;
      }
      &:hover {
        .show-on-hover {
          visibility: visible;
        }
      }
    `,buttonRow:f.css`
      display: flex;
      flex-direction: row;
      gap: ${A.spacing(.5)};
      margin-left: ${A.spacing(.5)};
    `}));class M extends n.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:_,parsedKeys:k,row:Q}=this.props;_&&_(k[0]),(0,d.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:Q.datasourceType,logRowUid:Q.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:_,parsedKeys:k,row:Q}=this.props;_&&_(k[0]),(0,d.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:Q.datasourceType,logRowUid:Q.uid,type:"disable"})},this.filterLabel=()=>{const{onClickFilterLabel:_,parsedKeys:k,parsedValues:Q,row:re}=this.props;_&&_(k[0],Q[0]),(0,d.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:re.datasourceType,filterType:"include",logRowUid:re.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:_,parsedKeys:k,parsedValues:Q,row:re}=this.props;_&&_(k[0],Q[0]),(0,d.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:re.datasourceType,filterType:"exclude",logRowUid:re.uid})},this.updateStats=()=>{const{getStats:_}=this.props,k=_(),Q=k?k.reduce((re,Z)=>re+Z.count,0):0;(!(0,u.isEqual)(this.state.fieldStats,k)||Q!==this.state.fieldCount)&&this.setState({fieldStats:k,fieldCount:Q})},this.showStats=()=>{const{isLabel:_,row:k,app:Q}=this.props,{showFieldsStats:re}=this.state;re||this.updateStats(),this.toggleFieldsStats(),(0,d.ff)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:k.datasourceType,fieldType:_?"label":"detectedField",type:re?"close":"open",logRowUid:k.uid,app:Q})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(_=>({showFieldsStats:!_.showFieldsStats}))}generateClipboardButton(_){const{theme:k}=this.props,Q=x(k);return n.createElement("div",{className:(0,f.cx)("show-on-hover",Q.copyButton)},n.createElement(l.m,{getText:()=>_,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"}))}generateMultiVal(_,k){return n.createElement("table",null,n.createElement("tbody",null,_?.map((Q,re)=>n.createElement("tr",{key:`${Q}-${re}`},n.createElement("td",null,Q,k&&Q!==""&&this.generateClipboardButton(Q))))))}render(){const{theme:_,parsedKeys:k,parsedValues:Q,isLabel:re,links:Z,displayedFields:oe,wrapLogMessage:G,onClickFilterLabel:le,onClickFilterOutLabel:ge,disableActions:ne}=this.props,{showFieldsStats:ue,fieldStats:te,fieldCount:me}=this.state,q=x(_),se=(0,D.h)(_),ae=k==null?!1:k.length===1,pe=Q==null?!1:Q.length===1,de=!ne&&le&&ge,Me=!pe&&Q!=null&&!Q.every(st=>st===""),Ke=oe&&k!=null&&oe.includes(k[0])?n.createElement(p.h,{variant:"primary",tooltip:"Hide this field",name:"eye",onClick:this.hideField}):n.createElement(p.h,{tooltip:"Show this field instead of the message",name:"eye",onClick:this.showField});return n.createElement(n.Fragment,null,n.createElement("tr",{className:(0,f.cx)(se.logDetailsValue)},n.createElement("td",{className:se.logsDetailsIcon},n.createElement("div",{className:q.buttonRow},de&&n.createElement(p.h,{name:"search-plus",tooltip:"Filter for value",onClick:this.filterLabel}),de&&n.createElement(p.h,{name:"search-minus",tooltip:"Filter out value",onClick:this.filterOutLabel}),!ne&&oe&&Ke,!ne&&n.createElement(p.h,{variant:ue?"primary":"secondary",name:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",disabled:!ae,onClick:this.showStats}))),n.createElement("td",{className:se.logDetailsLabel},ae?k[0]:this.generateMultiVal(k)),n.createElement("td",{className:(0,f.cx)(q.wordBreakAll,G&&q.wrapLine)},n.createElement("div",{className:q.logDetailsValue},pe?Q[0]:this.generateMultiVal(Q,!0),pe&&this.generateClipboardButton(Q[0]),n.createElement("div",{className:(0,f.cx)((pe||Me)&&q.adjoiningLinkButton)},Z?.map((st,Ie)=>n.createElement("span",{key:`${st.title}-${Ie}`},n.createElement(g.k,{link:st}))))))),ue&&ae&&pe&&n.createElement("tr",null,n.createElement("td",null,n.createElement(p.h,{variant:ue?"primary":"secondary",name:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats})),n.createElement("td",{colSpan:2},n.createElement("div",{className:q.logDetailsStats},n.createElement(P,{stats:te,label:k[0],value:Q[0],rowCount:me,isLabel:re})))))}}const b=(0,s.HE)(M);b.displayName="LogDetailsRow";var R=e(35160);class S extends n.PureComponent{render(){const{app:_,row:k,theme:Q,hasError:re,onClickFilterOutLabel:Z,onClickFilterLabel:oe,getRows:G,showDuplicates:le,className:ge,onClickShowField:ne,onClickHideField:ue,displayedFields:te,getFieldLinks:me,wrapLogMessage:q,styles:se}=this.props,ae=(0,D.p)(Q,k.logLevel),pe=k.labels?k.labels:{},de=Object.keys(pe).length>0,Me=(0,R.YD)(k,me);let Ke=Me.filter(ye=>ye.links?.length);const st=Ke.filter(ye=>ye.fieldIndex!==k.entryFieldIndex).sort(),Ie=Ke.filter(ye=>ye.fieldIndex===k.entryFieldIndex).sort(),Ve=(0,R.DC)(Ie),_e=Me.filter(ye=>ye.links?.length===0&&ye.fieldIndex!==k.entryFieldIndex).sort(),tt=_e&&_e.length>0,dt=st&&st.length>0||Ve&&Ve.length>0,Oe=re?"":`${ae.logsRowLevelColor} ${se.logsRowLevel} ${se.logsRowLevelDetails}`;return n.createElement("tr",{className:(0,f.cx)(ge,se.logDetails)},le&&n.createElement("td",null),n.createElement("td",{className:Oe,"aria-label":"Log level"}),n.createElement("td",{colSpan:4},n.createElement("div",{className:se.logDetailsContainer},n.createElement("table",{className:se.logDetailsTable},n.createElement("tbody",null,(de||tt)&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:se.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys(pe).sort().map((ye,Pe)=>{const be=pe[ye];return n.createElement(b,{key:`${ye}=${be}-${Pe}`,parsedKeys:[ye],parsedValues:[be],isLabel:!0,getStats:()=>(0,i.lL)(G(),ye),onClickFilterOutLabel:Z,onClickFilterLabel:oe,onClickShowField:ne,onClickHideField:ue,row:k,app:_,wrapLogMessage:q,displayedFields:te,disableActions:!1})}),_e.map((ye,Pe)=>{const{keys:be,values:Be,fieldIndex:ze}=ye;return n.createElement(b,{key:`${be[0]}=${Be[0]}-${Pe}`,parsedKeys:be,parsedValues:Be,onClickShowField:ne,onClickHideField:ue,onClickFilterOutLabel:Z,onClickFilterLabel:oe,getStats:()=>(0,i.i6)(k.dataFrame.fields[ze].values),displayedFields:te,wrapLogMessage:q,row:k,app:_,disableActions:!1})}),dt&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:se.logDetailsHeading,"aria-label":"Data Links"},"Links")),st.map((ye,Pe)=>{const{keys:be,values:Be,links:ze,fieldIndex:lt}=ye;return n.createElement(b,{key:`${be[0]}=${Be[0]}-${Pe}`,parsedKeys:be,parsedValues:Be,links:ze,onClickShowField:ne,onClickHideField:ue,getStats:()=>(0,i.i6)(k.dataFrame.fields[lt].values),displayedFields:te,wrapLogMessage:q,row:k,app:_,disableActions:!1})}),Ve?.map((ye,Pe)=>{const{keys:be,values:Be,links:ze,fieldIndex:lt}=ye;return n.createElement(b,{key:`${be[0]}=${Be[0]}-${Pe}`,parsedKeys:be,parsedValues:Be,links:ze,onClickShowField:ne,onClickHideField:ue,getStats:()=>(0,i.i6)(k.dataFrame.fields[lt].values),displayedFields:te,wrapLogMessage:q,row:k,app:_,disableActions:!0})}),!tt&&!de&&!dt&&n.createElement("tr",null,n.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const O=(0,s.HE)(S);O.displayName="LogDetails";var U=e(54972),I=e(70821);class F extends n.PureComponent{render(){const{row:_,showDetectedFields:k,getFieldLinks:Q,wrapLogMessage:re}=this.props,Z=(0,R.YD)(_,Q),oe=re?"":f.css`
          white-space: nowrap;
        `,G=k.map(le=>{const ge=Z.find(ne=>{const{keys:ue}=ne;return ue[0]===le});return ge!=null?`${le}=${ge.values}`:_.labels[le]!==void 0&&_.labels[le]!==null?`${le}=${_.labels[le]}`:null}).filter(le=>le!==null).join(" ");return n.createElement("td",{className:oe},G)}}const w=(0,s.HE)(F);w.displayName="LogRowMessageDisplayedFields";class K extends n.PureComponent{constructor(){super(...arguments),this.state={showContext:!1,showDetails:!1},this.debouncedContextClose=(0,u.debounce)(()=>{this.setState({showContext:!1})},3e3),this.onOpenContext=_=>{this.setState({showContext:!0}),this.props.onOpenContext(_,this.debouncedContextClose)},this.toggleDetails=()=>{this.props.enableLogDetails&&((0,d.ff)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(_=>({showDetails:!_.showDetails})))},this.onMouseEnter=()=>{this.props.onLogRowHover&&this.props.onLogRowHover(this.props.row)},this.onMouseLeave=()=>{this.props.onLogRowHover&&this.props.onLogRowHover(void 0)}}renderTimeStamp(_){return(0,r.dq)(_,{timeZone:this.props.timeZone,defaultWithMS:!0})}render(){const{getRows:_,onClickFilterLabel:k,onClickFilterOutLabel:Q,onClickShowField:re,onClickHideField:Z,enableLogDetails:oe,row:G,showDuplicates:le,showContextToggle:ge,showLabels:ne,showTime:ue,displayedFields:te,wrapLogMessage:me,prettifyLogMessage:q,theme:se,getFieldLinks:ae,forceEscape:pe,app:de,styles:Me}=this.props,{showDetails:Ke,showContext:st}=this.state,Ie=(0,D.p)(se,G.logLevel),{errorMessage:Ve,hasError:_e}=(0,i.Mi)(G),tt=(0,f.cx)(Me.logsRow,{[Me.errorLogRow]:_e,[Me.contextBackground]:st}),dt=G.hasUnescapedContent&&pe?{...G,entry:(0,i.l3)(G.entry),raw:(0,i.l3)(G.raw)}:G;return n.createElement(n.Fragment,null,n.createElement("tr",{className:tt,onClick:this.toggleDetails,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},le&&n.createElement("td",{className:Me.logsRowDuplicates},dt.duplicates&&dt.duplicates>0?`${dt.duplicates+1}x`:null),n.createElement("td",{className:_e?"":`${Ie.logsRowLevelColor} ${Me.logsRowLevel}`},_e&&n.createElement(o.u,{content:`Error: ${Ve}`,placement:"right",theme:"error"},n.createElement(m.J,{className:Me.logIconError,name:"exclamation-triangle",size:"xs"}))),oe&&n.createElement("td",{title:Ke?"Hide log details":"See log details",className:Me.logsRowToggleDetails},n.createElement(m.J,{className:Me.topVerticalAlign,name:Ke?"angle-down":"angle-right"})),ue&&n.createElement("td",{className:Me.logsRowLocalTime},this.renderTimeStamp(G.timeEpochMs)),ne&&dt.uniqueLabels&&n.createElement("td",{className:Me.logsRowLabels},n.createElement(U.j,{labels:dt.uniqueLabels})),te&&te.length>0?n.createElement(w,{row:dt,showDetectedFields:te,getFieldLinks:ae,wrapLogMessage:me}):n.createElement(I.r,{row:dt,showContextToggle:ge,wrapLogMessage:me,prettifyLogMessage:q,onOpenContext:this.onOpenContext,app:de,styles:Me})),this.state.showDetails&&n.createElement(O,{className:tt,showDuplicates:le,getFieldLinks:ae,onClickFilterLabel:k,onClickFilterOutLabel:Q,onClickShowField:re,onClickHideField:Z,getRows:_,row:dt,wrapLogMessage:me,hasError:_e,displayedFields:te,app:de,styles:Me}))}}const L=(0,s.HE)(K);L.displayName="LogRow";const V=100;class H extends n.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1},this.openContext=(_,k)=>{this.props.onOpenContext&&this.props.onOpenContext(_,k)},this.makeGetRows=(0,t.Z)(_=>()=>_),this.sortLogs=(0,t.Z)((_,k)=>(0,i.$u)(_,k))}componentDidMount(){const{logRows:_,previewLimit:k}=this.props,re=(_?_.length:0)<=k*2;re?this.setState({renderAll:re}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:_,showContextToggle:k,showLabels:Q,showTime:re,wrapLogMessage:Z,prettifyLogMessage:oe,logRows:G,deduplicatedRows:le,timeZone:ge,onClickFilterLabel:ne,onClickFilterOutLabel:ue,theme:te,enableLogDetails:me,previewLimit:q,getFieldLinks:se,logsSortOrder:ae,displayedFields:pe,onClickShowField:de,onClickHideField:Me,forceEscape:Ke,onLogRowHover:st,app:Ie,getLogRowContextUi:Ve}=this.props,{renderAll:_e}=this.state,tt=(0,D.h)(te),dt=le||G,Oe=G&&G.length>0,ye=dt?dt.reduce((bt,ct)=>ct.duplicates?bt+ct.duplicates:bt,0):0,Pe=_!==c.Y4.none&&ye>0,be=dt||[],Be=ae?this.sortLogs(be,ae):be,ze=Be.slice(0,q),lt=Be.slice(q,Be.length),ht=this.makeGetRows(Be),vt=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve({data:[]});return n.createElement("table",{className:tt.logsRowsTable},n.createElement("tbody",null,Oe&&ze.map((bt,ct)=>n.createElement(L,{key:bt.uid,getRows:ht,getRowContext:vt,getLogRowContextUi:Ve,row:bt,showContextToggle:k,showDuplicates:Pe,showLabels:Q,showTime:re,displayedFields:pe,wrapLogMessage:Z,prettifyLogMessage:oe,timeZone:ge,enableLogDetails:me,onClickFilterLabel:ne,onClickFilterOutLabel:ue,onClickShowField:de,onClickHideField:Me,getFieldLinks:se,logsSortOrder:ae,forceEscape:Ke,onOpenContext:this.openContext,onLogRowHover:st,app:Ie,styles:tt})),Oe&&_e&&lt.map((bt,ct)=>n.createElement(L,{key:bt.uid,getRows:ht,getRowContext:vt,getLogRowContextUi:Ve,row:bt,showContextToggle:k,showDuplicates:Pe,showLabels:Q,showTime:re,displayedFields:pe,wrapLogMessage:Z,prettifyLogMessage:oe,timeZone:ge,enableLogDetails:me,onClickFilterLabel:ne,onClickFilterOutLabel:ue,onClickShowField:de,onClickHideField:Me,getFieldLinks:se,logsSortOrder:ae,forceEscape:Ke,onOpenContext:this.openContext,onLogRowHover:st,app:Ie,styles:tt})),Oe&&!_e&&n.createElement("tr",null,n.createElement("td",{colSpan:5},"Rendering ",Be.length-q," rows..."))))}}H.defaultProps={previewLimit:V};const j=(0,s.HE)(H);j.displayName="LogsRows"},34282:(Y,T,e)=>{"use strict";e.d(T,{h:()=>u,p:()=>f});var t=e(9892),n=e(58635),c=e(28550),s=e(13787),i=e(85419);const f=(r,d)=>{let o=r.isLight?r.v1.palette.gray5:r.v1.palette.gray2;switch(d){case s.in.crit:case s.in.critical:o="#705da0";break;case s.in.error:case s.in.err:o="#e24d42";break;case s.in.warning:case s.in.warn:o=r.colors.warning.main;break;case s.in.info:o="#7eb26d";break;case s.in.debug:o="#1f78c1";break;case s.in.trace:o="#6ed0e0";break}return{logsRowLevelColor:t.css`
      &::after {
        background-color: ${o};
      }
    `}},u=(0,n.Z)(r=>{const d=i.hoverColor(r.colors.background.secondary,r),o=(0,c.Z)(r.components.dashboard.background).setAlpha(.7).toRgbString();return{logsRowLevel:t.css`
      label: logs-row__level;
      max-width: ${r.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${r.spacing(.5)};
      }
    `,logsRowMatchHighLight:t.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${r.components.textHighlight.text}
      background-color: ${r.components.textHighlight};
    `,logsRowsTable:t.css`
      label: logs-rows;
      font-family: ${r.typography.fontFamilyMonospace};
      font-size: ${r.typography.bodySmall.fontSize};
      width: 100%;
      margin-bottom: ${r.spacing(2.25)}; /* This is to make sure the last row's LogRowMenu is not cut off. */
    `,contextBackground:t.css`
      background: ${d};
    `,logsRow:t.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          visibility: visible;
          z-index: 1;
        }

        background: ${d};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${r.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:t.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logIconError:t.css`
      color: ${r.colors.warning.main};
    `,logsRowToggleDetails:t.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:t.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:t.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:t.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,logDetailsContainer:t.css`
      label: logs-row-details-table;
      border: 1px solid ${r.colors.border.medium};
      padding: 0 ${r.spacing(1)} ${r.spacing(1)};
      border-radius: ${r.shape.radius.default};
      margin: ${r.spacing(2.5)} ${r.spacing(1)} ${r.spacing(2.5)} ${r.spacing(2)};
      cursor: default;
    `,logDetailsTable:t.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:t.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${r.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${r.spacing(.75)};
    `,logDetailsLabel:t.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${r.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:t.css`
      label: logs-row-details__heading;
      font-weight: ${r.typography.fontWeightBold};
      padding: ${r.spacing(1)} 0 ${r.spacing(.5)};
    `,logDetailsValue:t.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${d};
      }
    `,topVerticalAlign:t.css`
      label: topVerticalAlign;
      margin-top: -${r.spacing(.9)};
      margin-left: -${r.spacing(.25)};
    `,detailsOpen:t.css`
      &:hover {
        background-color: ${i.hoverColor(r.colors.background.primary,r)};
      }
    `,errorLogRow:t.css`
      label: erroredLogRow;
      color: ${r.colors.text.secondary};
    `,positionRelative:t.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:t.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${o};
      display: inherit;
    `,horizontalScroll:t.css`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:t.css`
      display: block;
      margin-left: 0px;
    `,rowMenu:t.css`
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      background: ${r.colors.background.primary};
      box-shadow: ${r.shadows.z3};
      padding: ${r.spacing(.5,.5,.5,1)};
      z-index: 100;
      visibility: hidden;
      gap: ${r.spacing(.5)};
    `,logRowMenuCell:t.css`
      position: sticky;
      z-index: ${r.zIndex.dropdown};
      margin-top: -${r.spacing(.125)};
      right: 0px;

      & > span {
        transform: translateX(-100%);
      }
    `,logLine:t.css`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${r.typography.fontFamilyMonospace};
      font-size: ${r.typography.bodySmall.fontSize};
      letter-spacing: ${r.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `,logsRowLevelDetails:t.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:t.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${r.colors.background.primary};
      }
    `}})},35160:(Y,T,e)=>{"use strict";e.d(T,{B2:()=>i,DC:()=>s,YD:()=>c});var t=e(58635),n=e(99098);const c=(0,t.Z)((u,r)=>{const d=i(u,r);return Object.values(d)}),s=(0,t.Z)(u=>{let r=[];return u.forEach(d=>{d.links?.forEach(o=>{if(o.variables){const m=o.variables.map(p=>{const g=p.variableName,y=p.fieldPath?`.${p.fieldPath}`:"";return`${g}${y}`}),l=o.variables.map(p=>p.found?p.value:"");r.push({keys:m,values:l,links:[o],fieldIndex:d.fieldIndex})}})}),r}),i=(0,t.Z)((u,r)=>u.dataFrame.fields.map((d,o)=>({...d,index:o})).filter((d,o)=>!f(d,o,u)).map(d=>{const o=r?r(d,u.rowIndex,u.dataFrame):[];return{keys:[d.name],values:[d.values[u.rowIndex].toString()],links:o,fieldIndex:d.index}}));function f(u,r,d){if(u.name==="labels"&&u.type===n.fS.other||u.name==="id"||u.name==="tsNs")return!0;const o=d.dataFrame.fields.find(m=>m.type===n.fS.time);return!!(u.name===o?.name&&u.type===n.fS.time&&u.values[0]===o.values[0]||u.config.custom?.hidden||u.values[d.rowIndex]==null)}},81042:(Y,T,e)=>{"use strict";e.d(T,{$u:()=>E,DA:()=>g,Di:()=>a,FP:()=>M,Js:()=>x,Mi:()=>h,ZO:()=>d,_c:()=>D,hY:()=>P,i6:()=>l,j0:()=>v,jx:()=>o,l3:()=>C,lL:()=>m});var t=e(82897),n=e.n(t),c=e(13787),s=e(40538),i=e(5109),f=e(99098),u=e(53678),r=e(35160);function d(b){if(!b)return c.in.unknown;let R=c.in.unknown,S;for(const O of Object.keys(c.in)){const I=new RegExp(`\\b${O}\\b`,"i").exec(b);I&&(S===void 0||I.index<S)&&(R=c.in[O],S=I.index)}return R}function o(b){const R=c.in[b.toString().toLowerCase()];return R||c.in.unknown}function m(b,R){const S=b.filter(I=>I.labels[R]!==void 0),O=S.length,U=(0,t.countBy)(S,I=>I.labels[R]);return p(U,O)}function l(b){const R=b.filter(O=>O!=null),S=(0,t.countBy)(R);return p(S,R.length)}const p=(b,R)=>(0,t.chain)(b).map((S,O)=>({count:S,value:O,proportion:S/R})).sortBy("count").reverse().value(),g=(b,R)=>b.timeEpochMs<R.timeEpochMs?-1:b.timeEpochMs>R.timeEpochMs?1:b.timeEpochNs<R.timeEpochNs?-1:b.timeEpochNs>R.timeEpochNs?1:0,y=(b,R)=>b.timeEpochMs>R.timeEpochMs?-1:b.timeEpochMs<R.timeEpochMs?1:b.timeEpochNs>R.timeEpochNs?-1:b.timeEpochNs<R.timeEpochNs?1:0,v=(b,R)=>{const S=b?E(b.rows,R):[];return b?{...b,rows:S}:{hasUniqueLabels:!1,rows:S}},E=(b,R)=>R===s.UV.Ascending?b.sort(g):b.sort(y),h=b=>b.labels.__error__?{hasError:!0,errorMessage:b.labels.__error__}:{hasError:!1},C=b=>b.replace(/\\r\\n|\\n|\\t|\\r/g,R=>R.slice(1)==="t"?"	":`
`);function a(b){return b.map(R=>{const S=(0,r.B2)(R).reduce((O,U)=>{const I=U.keys[0];return O[I]=U.values[0],O},{});return{line:R.entry,timestamp:R.timeEpochNs,fields:{...S,...R.labels}}})}const P=b=>{let R={from:1/0,to:-1/0};return b.forEach(S=>{const O=S.meta?.custom||{};O.absoluteRange?.from&&O.absoluteRange?.to&&(R={from:Math.min(R.from,O.absoluteRange.from),to:Math.max(R.to,O.absoluteRange.to)})}),R},D=b=>{if(b.length===0)throw new Error("Cannot aggregate data frames: there must be at least one data frame to aggregate");const R={},S={};let O=-1/0;const U={};let I=[];return b.forEach(F=>{const w=new i.N(F),K=w.getFirstFieldOfType(f.fS.time),L=w.getFirstFieldOfType(f.fS.number);if(!K)throw new Error("Missing time field");if(!L)throw new Error("Missing value field");const V=L.config.displayNameFromDS||F.name||"logs",H=L.values.length;U[V]={meta:F.meta,valueFieldConfig:L.config,timeFieldConfig:K.config};for(let j=0;j<H;j++){const A=K.values[j],_=L.values[j];R[V]??={},R[V][A]=(R[V][A]||0)+_,S[A]=(S[A]||0)+_,O=Math.max(S[A],O)}}),Object.keys(R).forEach(F=>{const w=new u.v,{meta:K,timeFieldConfig:L,valueFieldConfig:V}=U[F];w.name=F,w.meta=K,w.addField({name:"Time",type:f.fS.time,config:L}),w.addField({name:"Value",type:f.fS.number,config:V});for(const H in R[F]){const j=R[F][H];w.add({Time:Number(H),Value:j})}I.push(w)}),{dataFrames:I,maximum:O}},x=b=>{const R=b[0]?.meta?.custom;return R&&R.datasourceName?{name:R.datasourceName}:null},M=b=>b[0]?.meta?.custom?.logsVolumeType===c.o8.Limited},80600:(Y,T,e)=>{"use strict";e.d(T,{H:()=>m});var t=e(66111),n=e(5191),c=e(31403),s=e(10655),i=e(9892),f=e(72648),u=e(98102);const r=({title:l})=>{const p=(0,f.wW)(o);return t.createElement("p",{className:p.description},l?"Are you sure you want to revoke this URL? The dashboard will no longer be public.":"Orphaned public dashboard will no longer be public.")},d=({dashboardTitle:l,onConfirm:p,onDismiss:g})=>t.createElement(u.s,{isOpen:!0,body:t.createElement(r,{title:l}),onConfirm:p,onDismiss:g,title:"Revoke public URL",icon:"trash-alt",confirmText:"Revoke public URL"}),o=l=>({title:i.css`
    margin-bottom: ${l.spacing(1)};
  `,description:i.css`
    font-size: ${l.typography.body.fontSize};
  `}),m=({dashboard:l,publicDashboard:p,loader:g,children:y,onDismiss:v,...E})=>{const[h,{isLoading:C}]=(0,s.bS)(),a=(P,D)=>{h({dashboard:l,uid:P.uid,dashboardUid:P.dashboardUid}),D()};return t.createElement(n.JY,null,({showModal:P,hideModal:D})=>t.createElement(c.zx,{"aria-label":"Revoke public URL",title:"Revoke public URL",onClick:()=>P(d,{dashboardTitle:p.title,onConfirm:()=>a(p,D),onDismiss:()=>{v?v():D()}}),...E},C&&g?g:y))}},85385:(Y,T,e)=>{"use strict";e.d(T,{t:()=>i});var t=e(29930);const n={FOLDER:"dash-folder",DASHBOARD:"dash-db"};class c extends Error{constructor(u,r){super(r),this.type=u}}class s{constructor(){this.rootName="general"}validateNewDashboardName(u,r){return this.validate(u,r,"A dashboard or a folder with the same name already exists")}validateNewFolderName(u){return this.validate(0,u,"A folder or dashboard in the general folder with the same name already exists")}async validate(u,r,d){r=(r||"").trim();const o=r.toLowerCase();if(r.length===0)throw new c("REQUIRED","Name is required");if(u===0&&o===this.rootName)throw new c("EXISTING","This is a reserved name and cannot be used for a folder.");const m=[];m.push(t.ae.search({type:n.FOLDER,folderIds:[u],query:r})),m.push(t.ae.search({type:n.DASHBOARD,folderIds:[u],query:r}));const l=await Promise.all(m);let p=[];l.length>0&&l[0].length>0&&(p=l[0]),l.length>1&&l[1].length>0&&(p=p.concat(l[1]));for(const g of p)if(o===g.title.toLowerCase())throw new c("EXISTING",d)}}const i=new s},50946:(Y,T,e)=>{"use strict";e.d(T,{$j:()=>E,EW:()=>F,Fd:()=>x,Jx:()=>C,L6:()=>R,Pb:()=>I,ZL:()=>U,ct:()=>a,iM:()=>w,nQ:()=>p,q_:()=>l,uC:()=>M,ys:()=>v});var t=e(72196),n=e(54899),c=e(37932),s=e(86647),i=e(659),f=e(60499),u=e(30992),r=e(27876),d=e(86648),o=e(59096),m=e(24693);function l(L){return async V=>{try{V((0,m.AK)());const H=await(0,n.i)().get(`/api/gnet/dashboards/${L}`);V((0,m.S9)(H)),V(g(H.json)),V(y(H.json))}catch(H){V((0,m.eh)()),(0,n.kW)(H)&&V((0,i.$l)((0,f.t_)(H.data.message||H)))}}}function p(L){return async V=>{V((0,m.Nw)(L)),V(g(L)),V(y(L))}}function g(L){return V=>{if(L&&L.__inputs){const H=[];L.__inputs.forEach(j=>{const A={name:j.name,label:j.label,info:j.description,value:j.value,type:j.type,pluginId:j.pluginId,options:[]};j.type===m.n$.DataSource?h(j,A):A.info||(A.info="Specify a string constant"),H.push(A)}),V((0,m.Zc)(H))}}}function y(L){return async function(V){if(!L||!L.__elements)return;const H=[];for(const j of Object.values(L.__elements)){if(j.kind!==o.V.Panel)continue;const A=j.model,{type:_,description:k}=A,{uid:Q,name:re}=j,Z={model:{model:A,uid:Q,name:re,version:0,type:_,kind:o.V.Panel,description:k},state:m.KQ.New};try{const oe=await(0,d.Mh)(Q,!0);Z.state=m.KQ.Exists,Z.model=oe}catch(oe){if(oe.status!==404)throw oe}H.push(Z)}V((0,m.C2)(H))}}function v(){return L=>{L((0,m.MO)())}}function E(L){return async(V,H)=>{const j=H().importDashboard.dashboard,A=H().importDashboard.inputs;let _=[];L.dataSources?.forEach((re,Z)=>{const oe=A.dataSources[Z];_.push({name:oe.name,type:oe.type,pluginId:oe.pluginId,value:re.uid})}),L.constants?.forEach((re,Z)=>{const oe=A.constants[Z];_.push({value:re,name:oe.name,type:oe.type})});const k=await(0,n.i)().post("api/dashboards/import",{dashboard:{...j,title:L.title,uid:L.uid||j.uid},overwrite:!0,inputs:_,folderUid:L.folder.uid}),Q=t.u.stripBaseFromUrl(k.importedUrl);c.E1.push(Q)}}const h=(L,V)=>{(0,s.F)().getList({pluginId:L.pluginId}).length===0?V.info="No data sources of type "+L.pluginName+" found":V.info||(V.info="Select a "+L.pluginName+" data source")};async function C(L,V){const H={totalCount:L.length,successCount:0};for(const j of L)try{await S(j,V)!==null&&(H.successCount+=1)}catch(A){console.error("Failed to move a folder",A)}return H}function a(L,V){const H=[];for(const j of L)H.push(D(P,!0,j,V));return K(H).then(j=>({totalCount:j.length,successCount:j.filter(A=>A.succeeded).length,alreadyInFolderCount:j.filter(A=>A.alreadyInFolder).length}))}async function P(L,V){const H=await(0,n.i)().get(`/api/dashboards/uid/${L}`);if((H.meta.folderUid===void 0||H.meta.folderUid===null)&&V.uid===""||H.meta.folderUid===V.uid)return{alreadyInFolder:!0};const j={dashboard:H.dashboard,folderUid:V.uid,overwrite:!1};try{return await M(j),{succeeded:!0}}catch(A){if((0,n.kW)(A)){if(A.data?.status!=="plugin-dashboard")return{succeeded:!1};A.isHandled=!0}j.overwrite=!0;try{return await M(j),{succeeded:!0}}catch{return{succeeded:!1}}}}function D(L,V,...H){return async j=>{try{const A=await L(...H);return Array.prototype.concat(j,[A])}catch(A){if(V)return j;throw A}}}function x(L,V){const H=[];for(const j of L)H.push(D(b,!0,j,!0));for(const j of V)H.push(D(w,!0,j,!0));return K(H)}function M(L){return u.H.ignoreNextSave(),(0,n.i)().post("/api/dashboards/db/",{dashboard:L.dashboard,message:L.message??"",overwrite:L.overwrite??!1,folderUid:L.folderUid})}function b(L,V){return(0,n.i)().delete(`/api/folders/${L}?forceDeleteRules=false`,void 0,{showSuccessAlert:V})}function R(L){return(0,n.i)().post("/api/folders",L)}function S(L,V){const H={parentUid:V.uid};return(0,n.i)().post(`/api/folders/${L}/move`,H,{showErrorAlert:!1})}const O=1e3;function U(L,V,H=r.SearchQueryType.Folder){return(0,n.i)().get("/api/search",{query:L,type:H,permission:V,limit:O})}function I(L){return(0,n.i)().get(`/api/folders/${L}`)}function F(L){return(0,n.i)().get(`/api/folders/id/${L}`)}function w(L,V){return(0,n.i)().delete(`/api/dashboards/uid/${L}`,{showSuccessAlert:V})}function K(L){return L.reduce((V,H)=>Promise.resolve(V).then(H),[])}},24693:(Y,T,e)=>{"use strict";e.d(T,{AK:()=>g,C2:()=>l,G7:()=>c,KQ:()=>i,MO:()=>r,Nw:()=>m,S9:()=>o,ZP:()=>v,Zc:()=>d,eh:()=>p,n$:()=>s,wg:()=>f});var t=e(62992),n=e(52666),c=(E=>(E[E.Gcom=0]="Gcom",E[E.Json=1]="Json",E))(c||{}),s=(E=>(E.DataSource="datasource",E.Constant="constant",E.LibraryPanel="libraryPanel",E))(s||{}),i=(E=>(E.New="new",E.Exists="exists",E.Different="different",E))(i||{});const f={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:n.Gu.NotStarted},u=(0,t.oM)({name:"manageDashboards",initialState:f,reducers:{setGcomDashboard:(E,h)=>{E.dashboard={...h.payload.json,id:null},E.meta={updatedAt:h.payload.updatedAt,orgName:h.payload.orgName},E.source=0,E.state=n.Gu.Done},setJsonDashboard:(E,h)=>{E.dashboard={...h.payload,id:null},E.meta=f.meta,E.source=1,E.state=n.Gu.Done},clearDashboard:E=>{E.dashboard={},E.state=n.Gu.NotStarted},setInputs:(E,h)=>{E.inputs={dataSources:h.payload.filter(C=>C.type==="datasource"),constants:h.payload.filter(C=>C.type==="constant"),libraryPanels:[]}},setLibraryPanelInputs:(E,h)=>{E.inputs.libraryPanels=h.payload},fetchFailed:E=>{E.dashboard={},E.state=n.Gu.Error},fetchDashboard:E=>{E.state=n.Gu.Loading}}}),{clearDashboard:r,setInputs:d,setGcomDashboard:o,setJsonDashboard:m,setLibraryPanelInputs:l,fetchFailed:p,fetchDashboard:g}=u.actions,v={importDashboard:u.reducer}},2183:(Y,T,e)=>{"use strict";e.d(T,{FV:()=>i,JE:()=>r,Q$:()=>f,RF:()=>s,Yi:()=>u});var t=e(54899),n=e(659),c=e(17283);function s(d={getBackendSrv:t.i}){return async o=>{const m=await d.getBackendSrv().get("/api/org");return o((0,c.jR)(m)),m}}function i(d={getBackendSrv:t.i}){return async(o,m)=>{const l=m().organization.organization;await d.getBackendSrv().put("/api/org",{name:l.name}),o((0,n.H7)(l.name)),o(s(d))}}function f(d,o={getBackendSrv:t.i}){return async m=>{const l=await o.getBackendSrv().post("/api/user/using/"+d);m((0,n.H7)(l.name))}}function u(d,o={getBackendSrv:t.i}){return async m=>{const l=await o.getBackendSrv().post("/api/orgs/",d);m(f(l.orgId))}}function r(d={getBackendSrv:t.i}){return async o=>{const m=await d.getBackendSrv().get("/api/user/orgs");return o((0,c.IM)(m)),m}}},17283:(Y,T,e)=>{"use strict";e.d(T,{IM:()=>f,ZP:()=>r,jR:()=>i,xR:()=>s});var t=e(62992);const n={organization:{},userOrgs:[]},c=(0,t.oM)({name:"organization",initialState:n,reducers:{organizationLoaded:(d,o)=>({...d,organization:o.payload}),setOrganizationName:(d,o)=>({...d,organization:{...d.organization,name:o.payload}}),userOrganizationsLoaded:(d,o)=>({...d,userOrgs:o.payload})}}),{setOrganizationName:s,organizationLoaded:i,userOrganizationsLoaded:f}=c.actions,r={organization:c.reducer}},51927:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>v});var t=e(9892),n=e(66111),c=e(82229),s=e(206),i=e(37932),f=e(72648),u=e(60325),r=e(52822),d=e(84952),o=e(58379),m=e(36281),l=e(16200),p=e(9398),g=e(27876),y=e(32294);function v(C){const a=(0,f.wW)(h),P=(0,u.R9)(),D=new c.mi(C.data),{dataSummary:x}=D,M=E(C,x),b=(0,g.useDispatch)(),R=(0,p.h4)().getCurrent()?.getPanelById(C.panelId),S=()=>{o.Z.setObject(d.FL,l.Ok.Suggestions),b((0,m.g_)(!0))},O=()=>{R&&b((0,y.Kc)({panel:R,pluginId:"table"}))},U=I=>{R&&(b((0,y.Kc)({...I,panel:R})),I.transformations&&setTimeout(()=>{i.E1.partial({tab:"transform"})},100))};return n.createElement("div",{className:a.wrapper},n.createElement("div",{className:a.message},M),P.app===s.zj.PanelEditor&&x.hasData&&R&&n.createElement("div",{className:a.actions},C.suggestions&&n.createElement(n.Fragment,null,C.suggestions.map(I=>n.createElement(r.x,{key:I.name,icon:"process",onClick:()=>U(I)},I.name))),n.createElement(r.x,{icon:"table",onClick:O},"Switch to table"),n.createElement(r.x,{icon:"chart-line",onClick:S},"Open visualization suggestions")))}function E({data:C,fieldConfig:a,message:P,needsNumberField:D,needsTimeField:x,needsStringField:M},b){return P||(!C.series||C.series.length===0||C.series.every(R=>R.length===0)?a?.defaults.noValue??"No data":M&&!b.hasStringField?"Data is missing a string field":D&&!b.hasNumberField?"Data is missing a number field":x&&!b.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const h=C=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,t.css)({textAlign:"center",color:C.colors.text.secondary,fontSize:C.typography.size.lg,width:"100%"}),actions:(0,t.css)({marginTop:C.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:C.spacing(1),rowGap:C.spacing(1),width:"100%",maxWidth:"600px"})})},35974:(Y,T,e)=>{"use strict";e.d(T,{F:()=>u,X:()=>r});var t=e(66111),n=e(36873),c=e(59250),s=e(45253),i=e(27876);class f extends t.PureComponent{constructor(o){super(o)}render(){const o={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return t.createElement("div",{style:o},t.createElement(s.b,{severity:i.AppNotificationSeverity.Error,...this.props}))}}function u(d,o){const m=class extends t.PureComponent{render(){const g=t.createElement(t.Fragment,null,"Check the server startup logs for more information. ",t.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return t.createElement(f,{title:`Error loading: ${d.id}`,text:g})}},l=new n.c(m);return l.meta=d,l.loadError=!0,l}function r(d,o){const m=class extends t.PureComponent{render(){return t.createElement(f,{title:`Panel plugin not found: ${d}`})}},l=new n.c(o?()=>null:m);return l.meta={id:d,name:d,sort:100,type:c.zV.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},l}},98141:(Y,T,e)=>{"use strict";e.d(T,{$:()=>l});var t=e(66111),n=e(10753),c=e(76095),s=e(75363),i=e(16936),f=e(20308),u=e(72648),r=e(53546),d=e(77582),o=e(38490);const m={defaults:{},overrides:[]};function l(g){const{pluginId:y,data:v,timeZone:E=(0,n.Z)(),options:h={},width:C,height:a,title:P,onOptionsChange:D=()=>{},onChangeTimeRange:x=()=>{},onFieldConfigChange:M=()=>{},fieldConfig:b=m}=g,R=(0,u.l4)(),S=(0,f.J)(),O=(0,t.useMemo)(()=>S.replace.bind(S),[S]),[U,I]=(0,t.useState)((0,o.q1)(y)),[F,w]=(0,t.useState)(),K=p(U,h,b),L=(0,c.Cc)(U,K?.fieldConfig,v,E,R,O);if((0,t.useEffect)(()=>{U&&U.hasPluginId(y)||(0,o.Ub)(y).then(H=>I(H)).catch(H=>{w(H.message)})},[y,U]),F)return t.createElement("div",null,"Failed to load plugin: ",F);if(!U||!U.hasPluginId(y))return t.createElement("div",null,"Loading plugin panel...");if(!U.panel)return t.createElement("div",null,"Seems like the plugin you are trying to load does not have a panel component.");if(!L)return t.createElement("div",null,"No panel data");const V=U.panel;return t.createElement(r.z4,{dependencies:[U,v]},t.createElement(s.b,{meta:U.meta},t.createElement(V,{id:1,data:L,title:P,timeRange:L.timeRange,timeZone:E,options:K.options,fieldConfig:b,transparent:!1,width:C,height:a,renderCounter:0,replaceVariables:H=>H,onOptionsChange:D,onFieldConfigChange:M,onChangeTimeRange:x,eventBus:d.h$})))}function p(g,y,v){return(0,t.useMemo)(()=>{if(g)return(0,i.d4)({plugin:g,currentOptions:y,currentFieldConfig:v,isAfterPluginChange:!1})},[g,v,y])}},64703:(Y,T,e)=>{"use strict";e.d(T,{Bq:()=>O,PR:()=>a,PW:()=>x});var t=e(82897),n=e.n(t),c=e(94976),s=e(3281),i=e(30471),f=e(99098),u=e(72196),r=e(63418),d=e(49187),o=e(55024),m=e(20308),l=e(40538),p=e(47694),g=e(19349),y=e(69155);const v=[{value:`${c.W.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:s.L8.BuiltIn},{value:`${c.W.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:s.L8.BuiltIn},{value:`${c.W.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:s.L8.BuiltIn}],E=[{value:`${c.W.seriesName}`,label:"Name",documentation:"Name of the series",origin:s.L8.Series}],h=[{value:`${c.W.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:s.L8.Value},{value:`${c.W.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:s.L8.Value},{value:`${c.W.valueRaw}`,label:"Raw",documentation:"Raw value",origin:s.L8.Value}],C=U=>U.includes(".")||U.trim().includes(" ")?`["${U}"]`:`.${U}`,a=()=>[...(0,m.J)().getVariables().map(U=>({value:U.name,label:U.name,origin:s.L8.Template})),{value:`${c.W.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:s.L8.Template},...v],P=U=>{const I=[];for(const w of U)for(const K of w.fields)if(K.labels)for(const L of Object.keys(K.labels))I.push(L);const F=(0,t.chain)(I).flatten().uniq().value();return[{value:`${c.W.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:s.L8.Field},...F.map(w=>({value:`__field.labels${C(w)}`,label:`labels.${w}`,documentation:`${w} label value`,origin:s.L8.Field}))]},D=U=>{let I,F;const w=[],K={};if(U.length!==1)return[];const L=U[0];for(const V of L.fields){const H=(0,i.CZ)(V,L,U);K[H]||(w.push({value:`__data.fields${C(H)}`,label:`${H}`,documentation:`Formatted value for ${H} on the same row`,origin:s.L8.Fields}),K[H]=!0,!I&&V.type===f.fS.number&&(I={...V,name:H}),!F&&V.config.displayName&&V.config.displayName!==V.name&&(F={...V,name:H}))}return w.length&&w.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:s.L8.Fields}),I&&(w.push({value:`__data.fields${C(I.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:s.L8.Fields}),w.push({value:`__data.fields${C(I.name)}.text`,label:"Show text value",documentation:"the text value",origin:s.L8.Fields})),F&&w.push({value:`__data.fields${C(F.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:s.L8.Fields}),w},x=(U,I)=>{const F={value:`${c.W.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:s.L8.Value};return I===s.o3.Values?[...E,...P(U),...h,F,...D(U),...a()]:[...E,...P(U),...D(U),...a()]},M=U=>{const I=P(U),F={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...E,...I,...h,F,...a()]};class b{constructor(){this.getDataLinkUIModel=(I,F,w)=>{let K=I.url;I.onBuildUrl&&(K=I.onBuildUrl({origin:w,replaceVariables:F}));const L={href:u.u.assureBaseUrl(K.replace(/\n/g,"")),title:I.title??"",target:I.targetBlank?"_blank":void 0,origin:w};return F&&(L.href=F(L.href,void 0,l.b8.UriEncode),L.title=F(I.title)),I.onClick&&(L.onClick=V=>{I.onClick({origin:w,replaceVariables:F,e:V})}),L.href=(0,p.iE)().disableSanitizeHtml?L.href:r.QX.sanitizeUrl(L.href),L}}getLinkUrl(I){let F=u.u.assureBaseUrl((0,m.J)().replace(I.url||"")),w={};if(I.keepTime){const K=(0,g.$t)().timeRangeForUrl();w.from=K.from,w.to=K.to}return I.includeVars&&(w={...w,...(0,y.c)()}),F=d.Cj.appendQueryToUrl(F,d.Cj.toUrlParams(w)),(0,p.iE)().disableSanitizeHtml?F:r.QX.sanitizeUrl(F)}getAnchorInfo(I){const F=(0,m.J)(),w={};return w.href=this.getLinkUrl(I),w.title=F.replace(I.title||""),w.tooltip=F.replace(I.tooltip||""),w}getPanelLinkAnchorInfo(I,F){(0,o.d)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const w=(K,L,V)=>(0,m.J)().replace(K,{...F,...L},V);return this.getDataLinkUIModel(I,w,{})}}let R;function S(U){R=U}function O(){return R||(R=new b),R}},32294:(Y,T,e)=>{"use strict";e.d(T,{JI:()=>u,Kc:()=>d,ih:()=>o,qj:()=>r});var t=e(16936),n=e(86648),c=e(35974),s=e(85805),i=e(45984),f=e(46732);function u(l){return async(p,g)=>{if(l.libraryPanel?.uid&&!("model"in l.libraryPanel)){p(m(l));return}let y=l.type,v=g().plugins.panels[y];if(!v)try{v=await p((0,s.Ro)(y))}catch{v=(0,c.X)(y,y==="row")}l.plugin||l.pluginLoaded(v),p((0,f.bc)({key:l.key,plugin:v}))}}function r(l){return p=>{p((0,f.WJ)({key:l}))}}function d({panel:l,pluginId:p,options:g,fieldConfig:y,transformations:v}){return async(E,h)=>{if(l.type===p&&!g&&!y&&!v)return;let a=h().plugins.panels[p];if(a||(a=await E((0,s.Ro)(p))),l.type!==p&&l.changePlugin(a),g||y||v){const P=(0,t.d4)({plugin:a,currentOptions:g||l.options,currentFieldConfig:y||l.fieldConfig,isAfterPluginChange:!1});l.options=P.options,l.fieldConfig=P.fieldConfig,l.transformations=v||l.transformations,l.configRev++}l.generateNewKey(),E((0,f.bc)({key:l.key,plugin:a}))}}function o(l,p){return async(g,y)=>{const v=p.model.type,E=l.type;if(l.restoreModel({...p.model,gridPos:l.gridPos,id:l.id,libraryPanel:p}),l.getQueryRunner().clearLastResult(),E!==v){let C=y().plugins.panels[v];C||(C=await g((0,s.Ro)(v))),l.pluginLoaded(C),l.generateNewKey(),await g((0,f.bc)({key:l.key,plugin:C}))}else{const h=l.key;l.generateNewKey(),g((0,f.mr)({oldKey:h,newKey:l.key}))}l.configRev=0,l.hasSavedPanelEditChange=!0,l.refresh(),l.events.publish(i.pO),l.events.publish(i.Wj)}}function m(l){return async p=>{const g=l.libraryPanel.uid;try{const y=await(0,n.Mh)(g,!0);l.initLibraryPanel(y),p(u(l))}catch(y){console.log("ERROR: ",y),p((0,f.bc)({key:l.key,plugin:(0,c.X)("Unable to load library panel: "+g,!1)}))}}}},46732:(Y,T,e)=>{"use strict";e.d(T,{Vl:()=>d,WJ:()=>r,ZP:()=>m,bc:()=>s,mr:()=>u,o8:()=>i,pC:()=>f});var t=e(62992);const n={},c=(0,t.oM)({name:"panels",initialState:n,reducers:{panelModelAndPluginReady:(l,p)=>{l[p.payload.key]={plugin:p.payload.plugin}},changePanelKey:(l,p)=>{l[p.payload.newKey]=l[p.payload.oldKey],delete l[p.payload.oldKey]},removePanel:(l,p)=>{delete l[p.payload.key]},removeAllPanels:l=>{Object.keys(l).forEach(p=>delete l[p])},setPanelInstanceState:(l,p)=>{l[p.payload.key].instanceState=p.payload.value},setPanelAngularComponent:(l,p)=>{const g=l[p.payload.key];g.angularComponent=p.payload.angularComponent}}}),{panelModelAndPluginReady:s,setPanelAngularComponent:i,setPanelInstanceState:f,changePanelKey:u,removePanel:r,removeAllPanels:d}=c.actions,m={panels:c.reducer}},10079:(Y,T,e)=>{"use strict";e.d(T,{r0:()=>o});var t=e(82897),n=e.n(t),c=e(72196),s=e(49187),i=e(47891),f=e(37932),u=e(6129);const r={kiosk:!0,autofitpanels:!0,orgId:!0};class d{constructor(){this.urls=[],this.index=0,this.numberOfLoops=0,this.isPlaying=!1,this.locationUpdated=this.locationUpdated.bind(this)}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}const p=this.urls[this.index],g=f.E1.getSearchObject(),y=(0,t.pickBy)(g,(E,h)=>r[h]),v=c.u.stripBaseFromUrl(p);this.index++,this.validPlaylistUrl=v,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval),f.E1.push(v+"?"+s.Cj.toUrlParams(y))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(l){l.pathname!==this.validPlaylistUrl&&this.stop()}async start(l){this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=f.E1.getHistory().listen(this.locationUpdated);const p=[];let g=await(0,u.A5)(l);if(!g.items?.length)return;this.interval=i.intervalToMs(g.interval);const y=await(0,u.jc)(g.items);for(const v of y)if(v.dashboards)for(const E of v.dashboards)p.push(E.url);p.length&&(this.urls=p,this.isPlaying=!0,this.next())}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),f.E1.getSearchObject().kiosk&&f.E1.partial({kiosk:null}))}}const o=new d},6129:(Y,T,e)=>{"use strict";e.d(T,{A5:()=>g,CE:()=>l,Ds:()=>C,Dv:()=>y,cg:()=>m,d5:()=>h,jc:()=>E,l8:()=>p});var t=e(65583),n=e(12115),c=e(54899),s=e(35645),i=e(659),f=e(60499),u=e(35821),r=e(7832),d=e(3153),o=e(82e3);async function m(a){await v(()=>(0,c.i)().post("/api/playlists",a))}async function l(a,P){await v(()=>(0,c.i)().put(`/api/playlists/${a}`,P))}async function p(a){await v(()=>(0,c.i)().delete(`/api/playlists/${a}`),"Playlist deleted")}async function g(a){const P=await(0,c.i)().get(`/api/playlists/${a}`);if(P.items){for(const D of P.items)if(D.type==="dashboard_by_id"){D.type="dashboard_by_uid";const x=await(0,c.i)().get(`/api/dashboards/ids/${D.value}`);x.length&&(D.value=x[0])}}return P}async function y(){return(0,c.i)().get("/api/playlists/")}async function v(a,P="Playlist saved"){try{await a(),(0,d.WI)((0,i.$l)((0,f.AT)(P)))}catch(D){D instanceof Error&&(0,d.WI)((0,i.$l)((0,f.t_)("Unable to save playlist",D)))}}async function E(a){let P=0;if(!a?.length)return[];const D=[];for(const b of a){const R={query:"*",kind:["dashboard"],limit:1e3};switch(b.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":R.uid=[b.value];break;case"dashboard_by_tag":R.tags=[b.value];break}D.push({refId:`${P++}`,queryType:r.hR.Search,search:R})}if(!s.v.featureToggles.panelTitleSearch){const b=(0,o.getGrafanaSearcher)(),R=[];for(let S=0;S<D.length;S++){const O=(await b.search(D[S].search)).view;R.push({...a[S],dashboards:O.map(U=>({...U}))})}return R}const x=await(0,u.e)(),M=await(0,t.n)(x.query({targets:D}));if(M.data.length!==a.length)throw new Error("unexpected result size");return a.map((b,R)=>{const S=new n.U(M.data[R]);return{...b,dashboards:S.map(O=>({...O}))}})}function h(){return{items:[],interval:"5m",name:"",uid:""}}function C(a,P){return P?.length?(P=P.toLowerCase(),a.filter(D=>D.name.toLowerCase().includes(P))):a}},73354:(Y,T,e)=>{"use strict";e.d(T,{$F:()=>u,E1:()=>l,GP:()=>g,GV:()=>f,P6:()=>y,Tk:()=>p,jL:()=>r});var t=e(2631),n=e(54899),c=e(95156),s=e(11212),i=e(59210);async function f(E){const h=await d(E),C=Boolean(h),[a,P,D]=await Promise.all([l(),o(E,C),m(E)]),x=a.find(b=>b.id===E),M=x?.dependencies||h?.json?.dependencies;return{grafanaDependency:M?.grafanaDependency??M?.grafanaVersion??"",pluginDependencies:M?.plugins||[],links:x?.info.links||h?.json?.info.links||[],readme:D||h?.readme,versions:P}}async function u(){const{items:E}=await(0,n.i)().get(`${s.tB}/plugins`);return E.filter(i.wB)}async function r(){try{return await(0,n.i)().get(`${s.O2}/errors`)}catch{return[]}}async function d(E){try{return await(0,n.i)().get(`${s.tB}/plugins/${E}`,{})}catch(h){(0,n.kW)(h)&&(h.isHandled=!0);return}}async function o(E,h){try{return h?((await(0,n.i)().get(`${s.tB}/plugins/${E}/versions`)).items||[]).map(a=>({version:a.version,createdAt:a.createdAt,isCompatible:a.isCompatible,grafanaDependency:a.grafanaDependency})):[]}catch(C){return(0,n.kW)(C)&&(C.isHandled=!0),[]}}async function m(E){try{const h=await(0,n.i)().get(`${s.O2}/${E}/markdown/README`);return h?(0,t.a)(h):""}catch(h){return(0,n.kW)(h)&&(h.isHandled=!0),""}}async function l(){return(await(0,n.i)().get(`${s.O2}`,(0,c.y)({embedded:0}))).filter(i.EP)}async function p(E){return await(0,n.i)().post(`${s.O2}/${E}/install`,void 0,{showErrorAlert:!1})}async function g(E){return await(0,n.i)().post(`${s.O2}/${E}/uninstall`)}async function y(E,h){return(await(0,n.i)().datasourceRequest({url:`/api/plugins/${E}/settings`,method:"POST",data:h}))?.data}const v={getRemotePlugins:u,getInstalledPlugins:l,installPlugin:p,uninstallPlugin:g}},21048:(Y,T,e)=>{"use strict";e.d(T,{L:()=>s});var t=e(9892),n=e(66111),c=e(72648);const s=({children:f,wrap:u,className:r})=>{const d=(0,c.l4)(),o=i(d,u);return n.createElement("div",{className:(0,t.cx)(o.container,r)},f)},i=(f,u)=>({container:t.css`
    display: flex;
    flex-direction: row;
    flex-wrap: ${u?"wrap":"no-wrap"};
    & > * {
      margin-bottom: ${f.spacing()};
      margin-right: ${f.spacing()};
    }
    & > *:last-child {
      margin-right: 0;
    }
  `})},11212:(Y,T,e)=>{"use strict";e.d(T,{O2:()=>t,tB:()=>n,uJ:()=>c});const t="/api/plugins",n="/api/gnet",c="plugins"},59210:(Y,T,e)=>{"use strict";e.d(T,{AA:()=>v,EP:()=>x,HT:()=>D,Nh:()=>y,RU:()=>a,Uj:()=>g,XB:()=>C,ZG:()=>l,fG:()=>P,uR:()=>d,wB:()=>M});var t=e(59250),n=e(29826),c=e(35645),s=e(66121),i=e(77582),f=e(29930),u=e(27876),r=e(84532);function d(O=[],U=[],I){const F=[],w=E(I);return O.forEach(K=>{const L=U.find(H=>H.slug===K.id),V=w[K.id];L||F.push(o(K,void 0,V))}),U.forEach(K=>{const L=O.find(H=>H.id===K.slug),V=w[K.slug];F.push(o(L,K,V))}),F}function o(O,U,I){return!O&&U?m(U,I):O&&!U?l(O,I):p(O,U,I)}function m(O,U){const{name:I,slug:F,description:w,version:K,orgName:L,popularity:V,downloads:H,typeCode:j,updatedAt:A,createdAt:_,status:k}=O,Q=!!U||R(j);return{description:w,downloads:H,id:F,info:{logos:{small:`https://grafana.com/api/plugins/${F}/versions/${K}/logos/small`,large:`https://grafana.com/api/plugins/${F}/versions/${K}/logos/large`}},name:I,orgName:L,popularity:V,publishedAt:_,signature:h({remote:O,error:U}),updatedAt:A,hasUpdate:!1,isPublished:!0,isInstalled:Q,isDisabled:Q,isCore:O.internal,isDev:!1,isEnterprise:k==="enterprise",type:j,error:U?.errorCode}}function l(O,U){const{name:I,info:{description:F,version:w,logos:K,updated:L,author:V},id:H,dev:j,type:A,signature:_,signatureOrg:k,signatureType:Q,hasUpdate:re,accessControl:Z}=O,oe=!!U||R(A);return{description:F,downloads:0,id:H,info:{logos:K},name:I,orgName:V.name,popularity:0,publishedAt:"",signature:h({local:O,error:U}),signatureOrg:k,signatureType:Q,updatedAt:L,installedVersion:w,hasUpdate:re,isInstalled:!0,isDisabled:oe,isCore:_==="internal",isPublished:!1,isDev:Boolean(j),isEnterprise:!1,type:A,error:U?.errorCode,accessControl:Z}}function p(O,U,I){const F=O?.info.version,w=U?.slug||O?.id||"",K=O?.type||U?.typeCode,L=!!I||R(K);let V={small:`/public/img/icn-${K}.svg`,large:`/public/img/icn-${K}.svg`};return U?V={small:`https://grafana.com/api/plugins/${w}/versions/${U.version}/logos/small`,large:`https://grafana.com/api/plugins/${w}/versions/${U.version}/logos/large`}:O&&O.info.logos&&(V=O.info.logos),{description:O?.info.description||U?.description||"",downloads:U?.downloads||0,hasUpdate:O?.hasUpdate||!1,id:w,info:{logos:V},isCore:Boolean(U?.internal||O?.signature===t.Xy.internal),isDev:Boolean(O?.dev),isEnterprise:U?.status==="enterprise",isInstalled:Boolean(O)||L,isDisabled:L,isPublished:!0,name:U?.name||O?.name||"",orgName:U?.orgName||O?.info.author.name||"",popularity:U?.popularity||0,publishedAt:U?.createdAt||"",type:K,signature:h({local:O,remote:U,error:I}),signatureOrg:O?.signatureOrg||U?.versionSignedByOrgName,signatureType:O?.signatureType||U?.versionSignatureType||U?.signatureType||void 0,updatedAt:U?.updatedAt||O?.info.updated||"",installedVersion:F,error:I?.errorCode,accessControl:O?.accessControl}}const g=O=>`${c.v.pluginCatalogURL}${O}`;var y=(O=>(O.nameAsc="nameAsc",O.nameDesc="nameDesc",O.updated="updated",O.published="published",O.downloads="downloads",O))(y||{});const v=(O,U)=>{const I={nameAsc:(F,w)=>F.name.localeCompare(w.name),nameDesc:(F,w)=>w.name.localeCompare(F.name),updated:(F,w)=>(0,n.J)(w.updatedAt).valueOf()-(0,n.J)(F.updatedAt).valueOf(),published:(F,w)=>(0,n.J)(w.publishedAt).valueOf()-(0,n.J)(F.publishedAt).valueOf(),downloads:(F,w)=>w.downloads-F.downloads};return I[U]?O.sort(I[U]):O};function E(O=[]){return O.reduce((U,I)=>(U[I.pluginId]=I,U),{})}function h(O){const{error:U,local:I,remote:F}=O;if(U)switch(U.errorCode){case t.w2.invalidSignature:return t.Xy.invalid;case t.w2.missingSignature:return t.Xy.missing;case t.w2.modifiedSignature:return t.Xy.modified}return I?.signature?I.signature:F?.signatureType||F?.versionSignatureType?t.Xy.valid:t.Xy.missing}const C=()=>(0,f.i)().get("/api/frontend/settings").then(O=>{c.v.panels=O.panels});function a(O){if(!O)return;const[U]=O.filter(I=>Boolean(I.isCompatible));return U}const P=()=>c.v.pluginAdminEnabled,D=(O,U,I)=>{const F=c.v.pluginAdminExternalManageEnabled,w=i.Vt.hasAccess(u.AccessControlAction.PluginsInstall,(0,r.bO)()),K=Boolean(I);return O.type===t.zV.renderer||O.type===t.zV.secretsmanager||O.isEnterprise&&!(0,s.v)("enterprise.plugins")||O.isDev||!w&&!F||!O.isPublished||!K||!U},x=O=>b(O.id),M=O=>b(O.slug);function b(O){const{pluginCatalogHiddenPlugins:U}=c.v;return!U.includes(O)}function R(O){return O===t.zV.secretsmanager&&!c.v.secretsManagerPluginEnabled}function S(O){return Boolean(O?.signature==="internal")}},84532:(Y,T,e)=>{"use strict";e.d(T,{Gg:()=>f,RN:()=>i,bO:()=>s});var t=e(47694),n=e(82002),c=e(27876);function s(){return t.vc.bootData.user.isGrafanaAdmin}function i(){return n.Vt.hasRole("Admin")}function f(){return n.Vt.hasPermission(c.AccessControlAction.DataSourcesCreate)&&n.Vt.hasPermission(c.AccessControlAction.DataSourcesWrite)}},85805:(Y,T,e)=>{"use strict";e.d(T,{DD:()=>m,LP:()=>v,N9:()=>l,Qd:()=>r,Ro:()=>E,Tz:()=>g,bQ:()=>p,bp:()=>d,m3:()=>y,tQ:()=>o});var t=e(62992),n=e(54899),c=e(38490),s=e(82907),i=e(73354),f=e(11212),u=e(59210);const r=(0,t.hg)(`${f.uJ}/fetchAll`,async(h,C)=>{try{const{dispatch:a}=C,[P,D,{payload:x}]=await Promise.all([(0,i.E1)(),(0,i.jL)(),a(o())]);return(0,u.uR)(P,x,D)}catch{return C.rejectWithValue("Unknown error.")}}),d=(0,t.hg)(`${f.uJ}/fetchAllLocal`,async(h,C)=>{try{return(await(0,i.E1)()).map(P=>(0,u.ZG)(P))}catch{return C.rejectWithValue("Unknown error.")}}),o=(0,t.hg)(`${f.uJ}/fetchRemotePlugins`,async(h,C)=>{try{return await(0,i.$F)()}catch(a){return(0,n.kW)(a)&&(a.isHandled=!0),C.rejectWithValue([])}}),m=(0,t.hg)(`${f.uJ}/fetchDetails`,async(h,C)=>{try{const a=await(0,i.GV)(h);return{id:h,changes:{details:a}}}catch{return C.rejectWithValue("Unknown error.")}}),l=(0,t.hg)(`${f.uJ}/install`,async({id:h,version:C,isUpdating:a=!1},P)=>{const D=a?{isInstalled:!0,installedVersion:C,hasUpdate:!1}:{isInstalled:!0,installedVersion:C};try{return await(0,i.Tk)(h),await(0,u.XB)(),a&&(0,s.Hl)(h),{id:h,changes:D}}catch(x){return console.error(x),(0,n.kW)(x)?P.rejectWithValue(x.data):P.rejectWithValue("Unknown error.")}}),p=(0,t.hg)(`${f.uJ}/install`,async()=>({})),g=(0,t.hg)(`${f.uJ}/uninstall`,async(h,C)=>{try{return await(0,i.GP)(h),await(0,u.XB)(),(0,s.Hl)(h),{id:h,changes:{isInstalled:!1,installedVersion:void 0}}}catch(a){return console.error(a),C.rejectWithValue("Unknown error.")}}),y=(0,t.hg)(`${f.uJ}/loadPluginDashboards`,async(h,C)=>{const D=`api/plugins/${C.getState().dataSources.dataSource.type}/dashboards`;return(0,n.i)().get(D)}),v=(0,t.PH)(`${f.uJ}/panelPluginLoaded`),E=h=>async(C,a)=>{let P=a().plugins.panels[h];return P||(P=await(0,c.Ub)(h),a().plugins.panels[h]||C(v(P))),P}},66552:(Y,T,e)=>{"use strict";e.d(T,{CD:()=>i,I6:()=>p,UC:()=>l});var t=e(62992),n=e(11212),c=e(48996),s=e(85805);const i=(0,t.HF)(),f=g=>new RegExp(`${n.uJ}/(.*)/pending`).test(g.type),u=g=>new RegExp(`${n.uJ}/(.*)/fulfilled`).test(g.type),r=g=>new RegExp(`${n.uJ}/(.*)/rejected`).test(g.type),d=g=>{const y=g.lastIndexOf("/");return g.substring(0,y)},o={items:i.getInitialState(),requests:{},settings:{displayMode:c.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},m=(0,t.oM)({name:"plugins",initialState:o,reducers:{setDisplayMode(g,y){g.settings.displayMode=y.payload}},extraReducers:g=>g.addCase(s.Qd.fulfilled,(y,v)=>{i.upsertMany(y.items,v.payload)}).addCase(s.bp.fulfilled,(y,v)=>{i.upsertMany(y.items,v.payload)}).addCase(s.DD.fulfilled,(y,v)=>{i.updateOne(y.items,v.payload)}).addCase(s.N9.fulfilled,(y,v)=>{i.updateOne(y.items,v.payload)}).addCase(s.Tz.fulfilled,(y,v)=>{i.updateOne(y.items,v.payload)}).addCase(s.LP,(y,v)=>{y.panels[v.payload.meta.id]=v.payload}).addCase(s.m3.pending,(y,v)=>{y.isLoadingPluginDashboards=!0,y.dashboards=[]}).addCase(s.m3.fulfilled,(y,v)=>{y.isLoadingPluginDashboards=!1,y.dashboards=v.payload}).addMatcher(f,(y,v)=>{y.requests[d(v.type)]={status:c.eE.Pending}}).addMatcher(u,(y,v)=>{y.requests[d(v.type)]={status:c.eE.Fulfilled}}).addMatcher(r,(y,v)=>{y.requests[d(v.type)]={status:c.eE.Rejected,error:v.payload}})}),{setDisplayMode:l}=m.actions,p=m.reducer},48996:(Y,T,e)=>{"use strict";e.d(T,{Co:()=>c,cd:()=>n,eE:()=>u,lL:()=>t,tu:()=>f,vF:()=>s,xc:()=>i});var t=(r=>(r.Grid="grid",r.List="list",r))(t||{}),n=(r=>(r.Home="plugins-home",r.Browse="plugins-browse",r.Details="plugins-details",r))(n||{}),c=(r=>(r.app="apps",r.datasource="database",r.panel="credit-card",r.renderer="capture",r.secretsmanager="key-skeleton-alt",r))(c||{}),s=(r=>(r.INSTALL="INSTALL",r.UNINSTALL="UNINSTALL",r.UPDATE="UPDATE",r.REINSTALL="REINSTALL",r))(s||{}),i=(r=>(r.OVERVIEW="Overview",r.VERSIONS="Version history",r.CONFIG="Config",r.DASHBOARDS="Dashboards",r.USAGE="Usage",r))(i||{}),f=(r=>(r.OVERVIEW="overview",r.VERSIONS="version-history",r.CONFIG="config",r.DASHBOARDS="dashboards",r.USAGE="usage",r))(f||{}),u=(r=>(r.Pending="Pending",r.Fulfilled="Fulfilled",r.Rejected="Rejected",r))(u||{})},52889:(Y,T,e)=>{"use strict";e.d(T,{a:()=>s,v:()=>n});var t=e(66111);const n=t.createContext(c());n.displayName="PluginPageContext";function c(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function s(i){return{sectionNav:i??c().sectionNav}}},91162:(Y,T,e)=>{"use strict";e.d(T,{ND:()=>p,ak:()=>v});var t=e(89424),n=e(4063),c=e(20308),s=e(70926),i=e(54899),f=e(86647),u=e(22069),r=e(18271),d=e(47694),o=e(47471),m=e(97573),l=e(97888);class p{constructor(h=(0,c.J)()){this.templateSrv=h,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(h,C){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=h,this.defaultName=C;for(const a of Object.values(h))a.uid||(a.uid=a.name),this.settingsMapByUid[a.uid]=a,this.settingsMapById[a.id]=a;this.datasources[u.hr.type]=o.mV,this.datasources[m.Yq]=o.mV,this.settingsMapByUid[u.hr.uid]=o.bE,this.settingsMapByUid[m.Yq]=o.bE}getDataSourceSettingsByUid(h){return this.settingsMapByUid[h]}getInstanceSettings(h,C){let a=g(h);if((0,u.Pr)(a))return o.bE;if(a==="default"||a==null)return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName];if(a[0]==="$"){const P=this.templateSrv.replace(a,C,y);let D;return P==="default"?D=this.settingsMapByName[this.defaultName]:D=this.settingsMapByUid[P]??this.settingsMapByName[P],D?{...D,isDefault:!1,name:a,uid:a,rawRef:{type:D.type,uid:D.uid}}:void 0}return this.settingsMapByUid[a]??this.settingsMapByName[a]??this.settingsMapById[a]}get(h,C){let a=g(h);if(!a)return this.get(this.defaultName);if((0,u.Pr)(h))return Promise.resolve(this.datasources[m.Yq]);const P=this.settingsMapByName[a];return P&&(a=P.uid),this.datasources[a]?Promise.resolve(this.datasources[a]):(a=this.templateSrv.replace(a,C,y),a==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[a]?Promise.resolve(this.datasources[a]):this.loadDatasource(a))}async loadDatasource(h){if(this.datasources[h])return Promise.resolve(this.datasources[h]);const C=this.getInstanceSettings(h);if(!C)return Promise.reject({message:`Datasource ${h} was not found`});try{const a=await(0,l.nL)(C.meta);if(this.datasources[h])return this.datasources[h];const P=a.DataSourceClass.length!==1;let D;if(P?D=(0,s.V)().instantiate(a.DataSourceClass,{instanceSettings:C}):D=new a.DataSourceClass(C),D.components=a.components,!(D instanceof t.MF)){const x=D;x.name=C.name,x.id=C.id,x.type=C.type,x.meta=C.meta,x.uid=C.uid,D.getRef=t.MF.prototype.getRef}return this.datasources[h]=D,this.datasources[D.uid]=D,D}catch(a){return a instanceof Error&&r.Z.emit(n.SI.alertError,[C.name+" plugin failed",a.toString()]),Promise.reject({message:`Datasource: ${h} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(h={}){const C=Object.values(this.settingsMapByName).filter(P=>!(P.meta.id==="grafana"||P.meta.id==="mixed"||P.meta.id==="dashboard"||h.metrics&&!P.meta.metrics||h.tracing&&!P.meta.tracing||h.logs&&P.meta.category!=="logging"&&!P.meta.logs||h.annotations&&!P.meta.annotations||h.alerting&&!P.meta.alerting||h.pluginId&&P.meta.id!==h.pluginId||h.filter&&!h.filter(P)||h.type&&(Array.isArray(h.type)?!h.type.includes(P.type):h.type!==P.type)||!h.all&&P.meta.metrics!==!0&&P.meta.annotations!==!0&&P.meta.tracing!==!0&&P.meta.logs!==!0&&P.meta.alerting!==!0));if(h.variables)for(const P of this.templateSrv.getVariables()){if(P.type!=="datasource")continue;let D=P.current.value==="default"?this.defaultName:P.current.value;Array.isArray(D)&&D.length===1&&(D=D[0]);const x=!Array.isArray(D)&&this.settingsMapByName[D];if(x){const M=`\${${P.name}}`;C.push({...x,name:M,uid:M})}}const a=C.sort((P,D)=>P.name.toLowerCase()>D.name.toLowerCase()?1:P.name.toLowerCase()<D.name.toLowerCase()?-1:0);if(!h.pluginId&&!h.alerting){if(h.mixed){const P=this.getInstanceSettings("-- Mixed --");P&&C.push(P)}if(h.dashboard){const P=this.getInstanceSettings("-- Dashboard --");P&&C.push(P)}if(!h.tracing){const P=this.getInstanceSettings("-- Grafana --");P&&C.push(P)}}return a}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(h=>({name:h.name,value:h.name,meta:h.meta}))}getMetricSources(h){return this.getList({metrics:!0,variables:!h?.skipVariables}).map(C=>({name:C.name,value:C.name,meta:C.meta}))}async reload(){const h=await(0,i.i)().get("/api/frontend/settings");d.ZP.datasources=h.datasources,d.ZP.defaultDatasource=h.defaultDatasource,this.init(h.datasources,h.defaultDatasource)}}function g(E){return(0,u.Pr)(E)?u.hr.uid:typeof E=="string"?E:E?.uid}function y(E){return Array.isArray(E)?E[0]:E}const v=()=>(0,f.F)()},38490:(Y,T,e)=>{"use strict";e.d(T,{Ub:()=>u,_2:()=>r,q1:()=>d});var t=e(36873),n=e(47694),c=e(35974),s=e(97888);const i={},f={};function u(m){const l=i[m];if(l)return l;const p=n.ZP.panels[m];if(!p)throw new Error(`Plugin ${m} not found`);return i[m]=o(p),i[m]}function r(m){return o(m)}function d(m){return f[m]}function o(m){return(0,s.N$)(m.module,m.info?.version).then(l=>{if(l.plugin)return l.plugin;if(l.PanelCtrl){const p=new t.c(null);return p.angularPanelCtrl=l.PanelCtrl,p}throw new Error("missing export: plugin or PanelCtrl")}).then(l=>(l.meta=m,f[m.id]=l,l)).catch(l=>(console.warn("Error loading panel plugin: "+m.id,l),(0,c.F)(m,l)))}},13011:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>s,a:()=>c});var t=e(54899);const n={};function c(i,f){const u=n[i];return u?Promise.resolve(u):(0,t.i)().get(`/api/plugins/${i}/settings`,void 0,void 0,f).then(r=>(n[i]=r,r)).catch(r=>Promise.reject(new Error("Unknown Plugin")))}const s=i=>i?delete n[i]:Object.keys(n).forEach(f=>delete n[f])},97888:(Y,T,e)=>{"use strict";e.d(T,{kY:()=>Ta,Av:()=>tg,nL:()=>bd,N$:()=>yl});var t={};e.r(t),e.d(t,{plugin:()=>gt});var n={};e.r(n),e.d(n,{plugin:()=>er});var c={};e.r(c),e.d(c,{plugin:()=>Nt});var s={};e.r(s),e.d(s,{plugin:()=>xi});var i={};e.r(i),e.d(i,{plugin:()=>wo});var f={};e.r(f),e.d(f,{plugin:()=>su});var u={};e.r(u),e.d(u,{plugin:()=>uu});var r={};e.r(r),e.d(r,{plugin:()=>bu});var d={};e.r(d),e.d(d,{plugin:()=>Ru});var o={};e.r(o),e.d(o,{plugin:()=>rc});var m={};e.r(m),e.d(m,{plugin:()=>zu});var l={};e.r(l),e.d(l,{plugin:()=>Hu});var p={};e.r(p),e.d(p,{plugin:()=>Ji});var g={};e.r(g),e.d(g,{plugin:()=>tm});var y={};e.r(y),e.d(y,{plugin:()=>am});var v={};e.r(v),e.d(v,{plugin:()=>lm});var E={};e.r(E),e.d(E,{plugin:()=>Om});var h={};e.r(h),e.d(h,{plugin:()=>oi});var C={};e.r(C),e.d(C,{plugin:()=>Nm});var a={};e.r(a),e.d(a,{plugin:()=>Qm});var P={};e.r(P),e.d(P,{plugin:()=>of});var D={};e.r(D),e.d(D,{plugin:()=>Df});var x={};e.r(x),e.d(x,{plugin:()=>Tf});var M={};e.r(M),e.d(M,{plugin:()=>If});var b={};e.r(b),e.d(b,{plugin:()=>Ao});var R={};e.r(R),e.d(R,{plugin:()=>zf});var S=e(9892),O=e(71667),U=e(47700),I=e(24259),F=e.n(I),w=e(82897),K=e.n(w),L=e(36365),V=e.n(L),H=e(57706),j=e.n(H),A=e(66111),_=e(15638),k=e(67948),Q=e(51947),re=e(6260),Z=e(83829),oe=e(43031),G=e(20674),le=e(95787),ge=e(43809),ne=e(56975),ue=e(36873),te=e(89424),me=e(206),q=e(38412),se=e(47406),ae=e(19920),pe=e(35670),de=e(40419),Me=e(37219),Ke=e(47694),st=e(77582),Ie=e(29930),Ve=e(13019),_e=e(4050),tt=e(40229),dt=e(24816),Oe=e(97724),ye=e(94984),Pe=e(45849),be=e(35645),Be=e(68226),ze=e(69945),lt=e(72004),ht=e(20194),vt=e(37190),bt=e(46818),ct=e(27876),Pt=e(76282),ie=e(72648),Ce=e(31403),Ne=e(52694),Ze=e(33950),Qe=e(96308),Le=e(53715),Ue=e(10505),ve=e(39031);const Se=({alertManagerSourceName:N,group:X,expandAll:ee})=>{const[fe,Ee]=(0,A.useState)(ee),xe=(0,ie.wW)(Fe),Ae=(0,ie.wW)(Le.r);return(0,A.useEffect)(()=>Ee(ee),[ee]),A.createElement("div",{className:xe.group,"data-testid":"alert-group"},Object.keys(X.labels).length>0?A.createElement(Ne.s,{labels:X.labels}):A.createElement("div",{className:xe.noGroupingText},"No grouping"),A.createElement("div",{className:xe.row},A.createElement(Ze.U,{isCollapsed:!fe,onToggle:()=>Ee(!fe)})," ",A.createElement(Qe.Z,{group:X})),fe&&A.createElement("div",{className:xe.alerts},X.alerts.map((We,ke)=>{const rt=We.status.state.toUpperCase(),at=(0,Pt.vT)({start:new Date(We.startsAt),end:Date.now()});return A.createElement("div",{"data-testid":"alert-group-alert",className:xe.alert,key:`${We.fingerprint}-${ke}`},A.createElement("div",null,A.createElement("span",{className:Ae[We.status.state]},rt," "),"for ",at),A.createElement("div",null,A.createElement(Ne.s,{labels:We.labels})),A.createElement("div",{className:xe.actionsRow},We.status.state===ve.Z9.Suppressed&&A.createElement(Ce.Qj,{href:`${(0,Ue.eQ)("/alerting/silences",N)}&silenceIds=${We.status.silencedBy.join(",")}`,className:xe.button,icon:"bell",size:"sm"},"Manage silences"),We.status.state===ve.Z9.Active&&A.createElement(Ce.Qj,{href:(0,Ue.VN)(N,We.labels),className:xe.button,icon:"bell-slash",size:"sm"},"Silence"),We.generatorURL&&A.createElement(Ce.Qj,{className:xe.button,href:We.generatorURL,icon:"chart-line",size:"sm"},"See source")))})))},Fe=N=>({noGroupingText:S.css`
    height: ${N.spacing(4)};
  `,group:S.css`
    background-color: ${N.colors.background.secondary};
    margin: ${N.spacing(.5,1,.5,1)};
    padding: ${N.spacing(1)};
  `,row:S.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${N.spacing(1)};
  `,alerts:S.css`
    margin: ${N.spacing(0,2,0,4)};
  `,alert:S.css`
    padding: ${N.spacing(1,0)};
    & + & {
      border-top: 1px solid ${N.colors.border.medium};
    }
  `,button:S.css`
    & + & {
      margin-left: ${N.spacing(1)};
    }
  `,actionsRow:S.css`
    padding: ${N.spacing(1,0)};
  `}),je=(N,X)=>(0,A.useMemo)(()=>N.filter(ee=>(0,ht.eD)(ee.labels,X)||ee.alerts.some(fe=>(0,ht.eD)(fe.labels,X))),[N,X]),Ge=N=>{const X=(0,ct.useDispatch)(),ee=be.v.unifiedAlertingEnabled,fe=N.options.expandAll,Ee=N.options.alertmanager,Ae=((0,ze._)(at=>at.amAlertGroups)||bt.oq)[Ee||""]?.result||[],We=N.options.labels?(0,ht.Zh)(N.options.labels):[],ke=je(Ae,We);(0,A.useEffect)(()=>{function at(){Ee&&X((0,lt.mS)(Ee))}at();const Et=setInterval(at,vt.iF);return()=>{clearInterval(Et)}},[X,Ee]);const rt=ke.length>0;return A.createElement(Be.$,{autoHeightMax:"100%",autoHeightMin:"100%"},ee&&A.createElement("div",null,rt&&ke.map(at=>A.createElement(Se,{alertManagerSourceName:Ee,key:JSON.stringify(at.labels),group:at,expandAll:fe})),!rt&&"No alerts"))},gt=new ue.c(Ge).setPanelOptions(N=>N.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:Pe.GC,category:["Options"],editor:function(ee){const fe=(0,A.useMemo)(Pe.z3,[]);return A.createElement(ye.P,{current:ee.value,onChange:Ee=>ee.onChange(Ee),dataSources:fe})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}));var mt=e(53117),Ye=e(43339),ft=e(79658),St=e(99151),we=e.n(St),qe=e(68183),Je=e(8581),ut=e(10216),Mt=e(50946);async function Wt({query:N,permissionLevel:X}){return(await(0,Mt.ZL)(N,X)).map(Ee=>({id:Ee.id,title:Ee.title,url:Ee.url}))}async function ln({query:N,permissionLevel:X,extraFolders:ee}){const fe=await Wt({query:N,permissionLevel:X}),Ee=ee??[],xe=N?Ee.filter(Ae=>Ae.title?.toLowerCase().includes(N.toLowerCase())):Ee;return fe?xe.concat(fe):xe}async function fn({query:N,permissionLevel:X=ct.PermissionLevelString.View,extraFolders:ee=[]}){return(await ln({query:N,permissionLevel:X,extraFolders:ee})).map(Ee=>({value:Ee,label:Ee.title}))}function pn(N,X){return N?.find(ee=>ee.value?.id===X)}async function An(N){if(N!=null)try{const{id:X,title:ee}=await(0,Mt.EW)(N);return{value:{id:X,title:ee},label:ee}}catch{console.error(`Could not find folder with id:${N}`)}}const Ot={id:void 0,title:"All"},Ft={id:ut.pW,title:ut.fy};function Kt({onChange:N,extraFolders:X=[],initialFolderId:ee,permissionLevel:fe=ct.PermissionLevelString.View}){const[Ee,xe]=(0,A.useState)(!1),[Ae,We]=(0,A.useState)(void 0),[ke,rt]=(0,A.useState)(void 0),at=(0,A.useCallback)(async At=>{let kt=pn(At,ee);kt||(kt=await An(ee)??At[0],N(kt.value)),xe(!0),rt(At),We(kt)},[ee,N]),Et=(0,A.useCallback)(async At=>{const kt=await fn({query:At,permissionLevel:fe,extraFolders:X});return Ee||await at(kt),kt},[fe,X,Ee,at]),Tt=we()(Et,300,{leading:!0}),pt=(0,A.useCallback)(({value:At})=>{const kt=pn(ke,At?.id);We(kt),N(At)},[ke,N]);return A.createElement("div",{"data-testid":qe.wl.components.ReadonlyFolderPicker.container},A.createElement(Je.qb,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:Ae,value:Ae,loadOptions:Tt,onChange:pt}))}var Lt=e(59679),Ut=e(67483),Rt=e(20308),$t=e(54899),_t=e(72948),jt=e(39904),an=e(67162),cn=e(9398),rn=e(40286);function hn(N){const[X,ee]=(0,A.useState)(""),fe=(0,Lt.Z)(async()=>{if(N.options.showOptions!==rn.kx.Current)return;const Ae={state:Rn(N.options.stateFilter)},We=(0,cn.h4)().getCurrent()?.getPanelById(N.id);N.options.alertName&&(Ae.query=(0,Rt.J)().replace(N.options.alertName,We.scopedVars)),N.options.folderId>=0&&(Ae.folderId=N.options.folderId),N.options.dashboardTitle&&(Ae.dashboardQuery=N.options.dashboardTitle),N.options.dashboardAlerts&&(Ae.dashboardId=(0,cn.h4)().getCurrent()?.id),N.options.tags&&(Ae.dashboardTag=N.options.tags);const ke=await(0,$t.i)().get("/api/alerts",Ae,`alert-list-get-current-alert-state-${N.id}`);let rt=Dn(N.options.sortOrder,ke.map(at=>({...at,stateModel:an.Z.getStateDisplayModel(at.state),newStateDateAgo:(0,Ut.CQ)(at.newStateDate).locale("en").fromNow(!0)})));return rt.length>N.options.maxItems&&(rt=rt.slice(0,N.options.maxItems)),ee(rt.length===0?"No alerts":""),rt},[N.options.showOptions,N.options.stateFilter.alerting,N.options.stateFilter.execution_error,N.options.stateFilter.no_data,N.options.stateFilter.ok,N.options.stateFilter.paused,N.options.stateFilter.pending,N.options.maxItems,N.options.tags,N.options.dashboardAlerts,N.options.dashboardTitle,N.options.folderId,N.options.alertName,N.options.sortOrder,N.timeRange]),Ee=(0,Lt.Z)(async()=>{if(N.options.showOptions!==rn.kx.RecentChanges)return;const Ae={limit:N.options.maxItems,type:"alert",newState:Rn(N.options.stateFilter)},We=(0,cn.h4)().getCurrent();N.options.dashboardAlerts&&(Ae.dashboardId=We?.id),Ae.from=se.parse(We?.time.from).unix()*1e3,Ae.to=se.parse(We?.time.to).unix()*1e3;const ke=await(0,$t.i)().get("/api/annotations",Ae,`alert-list-get-state-changes-${N.id}`),rt=Dn(N.options.sortOrder,ke.map(at=>({...at,time:We?.formatDate(at.time,"MMM D, YYYY HH:mm:ss"),stateModel:an.Z.getStateDisplayModel(at.newState),info:an.Z.getAlertAnnotationInfo(at)})));return ee(rt.length===0?"No alerts in current time range":""),rt},[N.options.showOptions,N.options.maxItems,N.options.stateFilter.alerting,N.options.stateFilter.execution_error,N.options.stateFilter.no_data,N.options.stateFilter.ok,N.options.stateFilter.paused,N.options.stateFilter.pending,N.options.dashboardAlerts,N.options.sortOrder]),xe=(0,ie.wW)(ea);return A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},A.createElement("div",{className:xe.container},X&&A.createElement("div",{className:xe.noAlertsMessage},X),A.createElement("section",null,A.createElement("ol",{className:xe.alertRuleList},N.options.showOptions===rn.kx.Current?!fe.loading&&fe.value&&fe.value.map(Ae=>A.createElement("li",{className:xe.alertRuleItem,key:`alert-${Ae.id}`},A.createElement(_t.Z,{href:`${Ae.url}?viewPanel=${Ae.panelId}`,className:xe.cardContainer},A.createElement(_t.Z.Heading,null,Ae.name),A.createElement(_t.Z.Figure,{className:(0,S.cx)(xe.alertRuleItemIcon,Ae.stateModel.stateClass)},A.createElement(jt.J,{name:Ae.stateModel.iconClass,size:"xl",className:xe.alertIcon})),A.createElement(_t.Z.Meta,null,A.createElement("div",{className:xe.alertRuleItemText},A.createElement("span",{className:Ae.stateModel.stateClass},Ae.stateModel.text),A.createElement("span",{className:xe.alertRuleItemTime}," for ",Ae.newStateDateAgo)))))):!Ee.loading&&Ee.value&&Ee.value.map(Ae=>A.createElement("li",{className:xe.alertRuleItem,key:`alert-${Ae.id}`},A.createElement(_t.Z,{className:xe.cardContainer},A.createElement(_t.Z.Heading,null,Ae.alertName),A.createElement(_t.Z.Figure,{className:(0,S.cx)(xe.alertRuleItemIcon,Ae.stateModel.stateClass)},A.createElement(jt.J,{name:Ae.stateModel.iconClass,size:"xl"})),A.createElement(_t.Z.Meta,null,A.createElement("span",{className:(0,S.cx)(xe.alertRuleItemText,Ae.stateModel.stateClass)},Ae.stateModel.text),A.createElement("span",null,Ae.time),Ae.info&&A.createElement("span",{className:xe.alertRuleItemInfo},Ae.info)))))))))}function Dn(N,X){if(N===rn.As.Importance)return(0,w.sortBy)(X,fe=>an.Z.alertStateSortScore[fe.state||fe.newState]);if(N===rn.As.TimeAsc)return(0,w.sortBy)(X,fe=>new Date(fe.newStateDate||fe.time));if(N===rn.As.TimeDesc)return(0,w.sortBy)(X,fe=>new Date(fe.newStateDate||fe.time)).reverse();const ee=(0,w.sortBy)(X,fe=>(fe.name||fe.alertName).toLowerCase());return N===rn.As.AlphaDesc&&ee.reverse(),ee}function Rn(N){return Object.entries(N).filter(([X,ee])=>ee).map(([X,ee])=>X)}const ea=N=>({cardContainer:S.css`
    padding: ${N.spacing(.5)} 0 ${N.spacing(.25)} 0;
    line-height: ${N.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:S.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:S.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:S.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${N.colors.background.secondary};
    padding: ${N.spacing(.5)} ${N.spacing(1)};
    border-radius: ${N.shape.borderRadius()};
    margin-bottom: ${N.spacing(.5)};
  `,alertRuleItemIcon:S.css`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${N.spacing(4)};
    padding: 0 ${N.spacing(.5)} 0 ${N.spacing(.25)};
    margin-right: 0px;
  `,alertRuleItemText:S.css`
    font-weight: ${N.typography.fontWeightBold};
    font-size: ${N.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:S.css`
    color: ${N.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:S.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:S.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:S.css`
    margin-right: ${N.spacing(.5)};
  `}),Fn=N=>{const X={showOptions:N.options.showOptions??N.show??rn.kx.Current,maxItems:N.options.maxItems??N.limit??10,sortOrder:N.options.sortOrder??N.sortOrder??rn.As.AlphaAsc,dashboardAlerts:N.options.dashboardAlerts??N.onlyAlertsOnDashboard??!1,alertName:N.options.alertName??N.nameFilter??"",dashboardTitle:N.options.dashboardTitle??N.dashboardFilter??"",folderId:N.options.folderId??N.folderId,tags:N.options.tags??N.dashboardTags??[],stateFilter:N.options.stateFilter??N.stateFilter?.reduce((fe,Ee)=>({...fe,[Ee]:!0}),{})??{}};return parseFloat(N.pluginVersion||"7.4")<7.5&&["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach(Ee=>delete N[Ee]),X};var Vn=e(46063),aa=e(43055);function Sa(N,X){const ee=(0,ht.Zh)(N);return(0,ht.eD)(X,ee)}function la(N,X){const{stateFilter:ee,alertInstanceLabelFilter:fe}=N;return(0,w.isEmpty)(ee)?X:X.filter(Ee=>(ee.firing&&((0,aa.j)(Ee,Vn.bj.Alerting)||(0,aa.j)(Ee,Vn.x_.Firing))||ee.pending&&((0,aa.j)(Ee,Vn.bj.Pending)||(0,aa.j)(Ee,Vn.x_.Pending))||ee.noData&&(0,aa.j)(Ee,Vn.bj.NoData)||ee.normal&&(0,aa.j)(Ee,Vn.bj.Normal)||ee.error&&(0,aa.j)(Ee,Vn.bj.Error)||ee.inactive&&(0,aa.j)(Ee,Vn.x_.Inactive))&&(fe?Sa(N.alertInstanceLabelFilter,Ee.labels):!0))}function Yn(N){return!(N.startsWith("__")&&N.endsWith("__"))}const ia=N=>{const{onChange:X,id:ee,defaultValue:fe}=N,Ee=(0,ct.useDispatch)();(0,A.useEffect)(()=>{Ee((0,lt.lB)())},[Ee]);const xe=(0,ze._)(rt=>rt.promRules),Ae=(0,bt.PE)(xe),We=(0,bt.yR)(xe),ke=(0,A.useMemo)(()=>{if((0,w.isEmpty)(xe))return[];if(!Ae)return[];const rt=Object.keys(xe).flatMap(at=>xe[at].result??[]).flatMap(at=>at.groups).flatMap(at=>at.rules.filter(Et=>Et.type===Vn.pz.Alerting)).flatMap(at=>at.alerts??[]).map(at=>Object.keys(at.labels??{})).flatMap(at=>at.filter(Yn));return(0,w.uniq)(rt)},[Ae,xe]);return A.createElement(Je.NU,{id:ee,isLoading:We,defaultValue:fe,"aria-label":"group by label keys",placeholder:"Group by",prefix:A.createElement(jt.J,{name:"tag-alt"}),onChange:rt=>{X(rt.map(at=>at.value??""))},options:ke.map(rt=>({label:rt,value:rt}))})};var Ia=e(95831),ha=e(49380),xa=e(82378),Wa=e(45253),as=e(61744),Xa=e(57426),Ba=e(82002),ca=e(79662),ss=e(29427),Ya=e(95454);const sa="/api/v1/rule/test/grafana",ja="api/prometheus/grafana/api/v1/rules",da=ss.C.injectEndpoints({endpoints:N=>({prometheusRulesByNamespace:N.query({query:({limitAlerts:X,identifier:ee,filter:fe,state:Ee,matcher:xe})=>{const Ae=new URLSearchParams;X&&Ae.set("limit_alerts",String(X)),ee&&((0,ca.qE)(ee)||(0,ca.E4)(ee))&&(Ae.set("file",ee.namespace),Ae.set("rule_group",ee.groupName));const We=(0,Ya.hd)(Ae,fe);return{url:ja,params:(0,Ya.Tb)(We,Ee,xe)}},transformResponse:X=>(0,Ya.lL)(X.data.groups,Pe.GC)})})});var Ga=e(89149),qa=e(61627),Ka=e(24782),ts=e(64681),va=e.n(ts),ns=e(48563),xs=e(84952);const hs=({alerts:N,options:X,grafanaTotalInstances:ee,handleInstancesLimit:fe,limitInstances:Ee,grafanaFilteredInstancesTotal:xe})=>{const Ae=X.groupMode===rn.LM.Custom?!0:X.showInstances,[We,ke]=(0,A.useState)(Ae),rt=(0,ie.wW)(rr),at=(0,ie.wW)(Ce.gN),Et=(0,A.useCallback)(()=>{ke(ta=>!ta)},[]),Tt=(0,A.useMemo)(()=>la(X,(0,Ue.Zl)(X.sortOrder,N))??[],[N,X]),pt=ee!==void 0,At=ee&&xe?ee-xe:0,kt=N.length-Tt.length,It=pt?At:kt,Bt=Tt.length>0,Xt=Bt?Et:w.noop;(0,A.useEffect)(()=>{Tt.length===0&&ke(!1)},[Tt]);const Zt=async()=>{fe&&(fe(!1),ke(!0))},Qt=async()=>{fe&&(fe(!0),ke(!0))},dn=Ee?xe:Tt.length,Yt=Tt.length,En=pt?dn:Yt,Sn=Ee?`Showing ${Ga.gr} of ${ee} instances`:`Showing all ${ee} instances`,xn=Ee?"View all instances":`Limit the result to ${Ga.gr} instances`,Tn=ee&&Ga.gr===Tt.length&&ee>Tt.length,Kn=ee&&Ga.gr<Tt.length&&!Ee,Ln=Tn||Kn?A.createElement("div",{className:rt.footerRow},A.createElement("div",null,Sn),A.createElement(Ce.zx,{size:"sm",variant:"secondary",onClick:Ee?Zt:Qt},xn)):void 0;return A.createElement("div",null,X.groupMode===rn.LM.Default&&A.createElement("button",{className:(0,S.cx)(at,Bt?rt.clickable:""),onClick:()=>Xt()},Bt&&A.createElement(jt.J,{name:We?"angle-down":"angle-right",size:"md"}),A.createElement("span",null,`${En} ${va()("instance",En)}`),It>0&&A.createElement("span",null,", ",`${It} hidden by filters`)),We&&A.createElement(ns.o,{instances:Tt,pagination:{itemsPerPage:2*xs.gN},footerRow:Ln}))},rr=N=>({clickable:S.css`
    cursor: pointer;
  `,footerRow:S.css`
    display: flex;
    flex-direction: column;
    gap: ${N.spacing(1)};
    justify-content: space-between;
    align-items: center;
    width: 100%;
  `}),Is="__ungrouped__",ur=({rules:N,options:X})=>{const ee=(0,ie.wW)(qs),fe=X.groupBy,Ee=(0,A.useMemo)(()=>{const xe=new Map,Ae=rt=>fe?Vs(rt,fe):!0;N.forEach(rt=>{const at=(0,ca.Re)(rt),Et=Ae(rt);(at?.alerts??[]).forEach(Tt=>{const pt=Et?mr(fe,Tt.labels):Is,At=xe.get(pt)??[];xe.set(pt,[...At,Tt])})});const We=xe.get(Is)??[];return xe.delete(Is),xe.set(Is,We),Array.from(xe.entries()).reduce((rt,[at,Et])=>{const Tt=la(X,Et);return Tt.length>0&&rt.set(at,Tt),rt},new Map)},[fe,N,X]);return A.createElement(A.Fragment,null,Array.from(Ee).map(([xe,Ae])=>A.createElement("li",{className:ee.alertRuleItem,key:xe,"data-testid":xe},A.createElement("div",null,A.createElement("div",{className:ee.customGroupDetails},A.createElement("div",{className:ee.alertLabels},xe!==Is&&os(xe).map(([We,ke])=>A.createElement(Ka.i,{key:We,labelKey:We,value:ke})),xe===Is&&"No grouping")),A.createElement(hs,{alerts:Ae,options:X})))))};function mr(N,X){return new URLSearchParams(N.map(ee=>[ee,X[ee]])).toString()}function os(N){return[...new URLSearchParams(N)]}function Vs(N,X){const ee=(0,ca.Re)(N);return X.every(fe=>(ee?.alerts??[]).some(Ee=>Ee.labels[fe]))}const is=ur;var zs=e(16753),ls=e(26418),ws=e(63029),Ws=e(60048),fr=e(93411);function Js(N){return Object.values(N).filter(X=>X!==void 0).reduce((X,ee)=>X+ee,0)}const Xs=({rules:N,options:X,handleInstancesLimit:ee,limitInstances:fe})=>{const Ee=(0,ie.wW)(qs),xe=(0,ie.wW)(Hs),{href:Ae}=(0,zs.Z)(),We=N.length<=X.maxItems?N:N.slice(0,X.maxItems);return A.createElement(A.Fragment,null,A.createElement("ol",{className:Ee.alertRuleList},We.map((ke,rt)=>{const{namespaceName:at,groupName:Et,dataSourceName:Tt}=ke,pt=(0,ca.x_)(ke.promRule)?ke.promRule:void 0,At=(0,ca.ub)(pt),kt=(0,Ws.Yd)(ke.dataSourceName,ke),It=(0,Ws.$V)(kt),Bt=ke.dataSourceName===Pe.GC?Js(ke.instanceTotals):void 0,Xt=ke.dataSourceName===Pe.GC?Js(ke.filteredInstanceTotals):void 0,Zt=(0,fr.u)(`/alerting/${encodeURIComponent(Tt)}/${encodeURIComponent(It)}/view`,{returnTo:Ae??""});return pt?A.createElement("li",{className:Ee.alertRuleItem,key:`alert-${at}-${Et}-${ke.name}-${rt}`},A.createElement("div",{className:xe.icon},A.createElement(jt.J,{name:an.Z.getStateDisplayModel(pt.state).iconClass,className:xe[(0,ca.Aq)(pt.state)],size:"lg"})),A.createElement("div",{className:Ee.alertNameWrapper},A.createElement("div",{className:Ee.instanceDetails},A.createElement(ls.Stack,{direction:"row",gap:1,wrap:!1},A.createElement("div",{className:Ee.alertName,title:ke.name},ke.name),A.createElement(ws.L,null),Zt&&A.createElement("a",{href:Zt,target:"__blank",className:Ee.link,rel:"noopener"},A.createElement(ls.Stack,{alignItems:"center",gap:1},"View alert rule",A.createElement(jt.J,{name:"external-link-alt",size:"sm"})))),A.createElement("div",{className:Ee.alertDuration},A.createElement("span",{className:xe[(0,ca.Aq)(pt.state)]},(0,ca.SS)(pt.state))," ",At&&pt.state!==Vn.x_.Inactive&&A.createElement(A.Fragment,null,"for"," ",A.createElement("span",null,(0,Pt.vT)({start:At,end:Date.now()}))))),A.createElement(hs,{alerts:pt.alerts??[],options:X,grafanaTotalInstances:Bt,grafanaFilteredInstancesTotal:Xt,handleInstancesLimit:ee,limitInstances:fe}))):null})))},Hs=N=>({common:S.css`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${N.shape.borderRadius()};
    font-size: ${N.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:S.css`
    margin-top: ${N.spacing(2.5)};
    align-self: flex-start;
  `,good:S.css`
    color: ${N.colors.success.main};
  `,bad:S.css`
    color: ${N.colors.error.main};
  `,warning:S.css`
    color: ${N.colors.warning.main};
  `,neutral:S.css`
    color: ${N.colors.secondary.main};
  `,info:S.css`
    color: ${N.colors.primary.main};
  `}),or=Xs;function gr(N){const X=(ee,[fe,Ee])=>Boolean(Ee)?[...ee,fe]:ee;return Object.entries(N).reduce(X,[])}function ks(N){const X=(0,ct.useDispatch)(),ee=(0,A.useMemo)(Pe.mA,[]),[fe,Ee]=(0,Ia.Z)(!0),{usePrometheusRulesByNamespaceQuery:xe}=da;(0,A.useEffect)(()=>{N.options.stateFilter.inactive===!0&&(N.options.stateFilter.normal=!0),N.options.stateFilter.inactive=void 0},[N.options.stateFilter]);let Ae;(0,ha.Z)(()=>{Ae=(0,cn.h4)().getCurrent()});const We=(0,A.useMemo)(()=>gr(N.options.stateFilter),[N.options.stateFilter]),{options:ke,replaceVariables:rt}=N,at={...N.options,alertName:rt(ke.alertName),alertInstanceLabelFilter:rt(ke.alertInstanceLabelFilter)},Et=(0,A.useMemo)(()=>(0,ht.Zh)(at.alertInstanceLabelFilter),[at.alertInstanceLabelFilter]);(0,A.useEffect)(()=>{N.options.groupMode===rn.LM.Default&&X((0,lt.ei)(!1,{limitAlerts:fe?Ga.gr:void 0,matcher:Et,state:We}))},[N.options.groupMode,fe,X,Et,We]),(0,A.useEffect)(()=>{X((0,lt.ei)(!1,{limitAlerts:fe?Ga.gr:void 0,matcher:Et,state:We}));const Un=Ae?.events.subscribe(xa.md,()=>X((0,lt.ei)(!1,{limitAlerts:fe?Ga.gr:void 0,matcher:Et,state:We})));return()=>{Un?.unsubscribe()}},[X,Ae,Et,We,Ee,fe]);const Tt=Un=>{Un?(X((0,lt.ei)(!1,{limitAlerts:Ga.gr,matcher:Et,state:We})),Ee(!0)):(X((0,lt.ei)(!1,{matcher:Et,state:We})),Ee(!1))},{prom:pt,ruler:At}=(0,ze._)(Un=>({prom:Un.promRules[Pe.GC]||bt.oq,ruler:Un.rulerRules[Pe.GC]||bt.oq})),kt=pt.loading||At.loading,It=!!pt.result||!!At.result,Bt=(0,ze._)(Un=>Un.promRules),Xt=(0,ze._)(Un=>Un.rulerRules),Zt=ee.some(Un=>Bt[Un]?.dispatched),{currentData:Qt=[],isLoading:dn}=xe({limitAlerts:fe?Ga.gr:void 0,matcher:Et,state:We}),Yt=(0,qa.Zo)(void 0,Qt),En=ee.some(Un=>Xt[Un]?.dispatched),Sn=Zt||En,xn=(0,ie.wW)(qs),Tn=(0,ca.C7)(Yt),Kn=N.options.sortOrder,Ln=(0,A.useMemo)(()=>hr(N,pr(Kn,Tn)),[Tn,Kn,N]),ta=Ln.length===0?"No alerts matching filters":void 0;return!Ba.Vt.hasPermission(ct.AccessControlAction.AlertingRuleRead)&&!Ba.Vt.hasPermission(ct.AccessControlAction.AlertingRuleExternalRead)?A.createElement(Wa.b,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules"):A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},A.createElement("div",{className:xn.container},(dn||Sn&&kt&&!It)&&A.createElement(as.u,{text:"Loading..."}),ta&&A.createElement("div",{className:xn.noAlertsMessage},ta),A.createElement("section",null,N.options.viewMode===rn.wO.Stat&&It&&A.createElement(Xa.w6,{width:N.width,height:N.height,graphMode:Xa.IG.None,textMode:Xa.jG.Auto,justifyMode:Xa.ap.Auto,theme:Ke.vc.theme2,value:{text:`${Ln.length}`,numeric:Ln.length}}),N.options.viewMode===rn.wO.List&&N.options.groupMode===rn.LM.Custom&&It&&A.createElement(is,{rules:Ln,options:at}),N.options.viewMode===rn.wO.List&&N.options.groupMode===rn.LM.Default&&It&&A.createElement(or,{rules:Ln,options:at,handleInstancesLimit:Tt,limitInstances:fe}))))}function pr(N,X){if(N===rn.As.Importance)return(0,w.sortBy)(X,fe=>an.Z.alertStateSortScore[fe.state]);if(N===rn.As.TimeAsc)return(0,w.sortBy)(X,fe=>{const Ee=(0,ca.Re)(fe)??void 0;return(0,ca.ub)(Ee)||new Date});if(N===rn.As.TimeDesc)return(0,w.sortBy)(X,fe=>{const Ee=(0,ca.Re)(fe)??void 0;return(0,ca.ub)(Ee)||new Date}).reverse();const ee=(0,w.sortBy)(X,fe=>fe.name.toLowerCase());return N===rn.As.AlphaDesc&&ee.reverse(),ee}function hr(N,X){const{options:ee,replaceVariables:fe}=N;let Ee=[...X];if(ee.dashboardAlerts){const xe=(0,cn.h4)().getCurrent()?.uid;Ee=Ee.filter(({annotations:Ae={}})=>Object.entries(Ae).some(([We,ke])=>We===vt.q6.dashboardUID&&ke===xe))}if(ee.alertName){const xe=fe(ee.alertName);Ee=Ee.filter(({name:Ae})=>Ae.toLocaleLowerCase().includes(xe.toLocaleLowerCase()))}if(Ee=Ee.filter(xe=>{const Ae=(0,ca.Re)(xe);return Ae?ee.stateFilter.firing&&Ae.state===Vn.x_.Firing||ee.stateFilter.pending&&Ae.state===Vn.x_.Pending||ee.stateFilter.normal&&Ae.state===Vn.x_.Inactive:!1}),ee.folder&&(Ee=Ee.filter(xe=>xe.namespaceName===ee.folder.title)),ee.datasource){const xe=ee.datasource===Pe.JY;Ee=Ee.filter(xe?({dataSourceName:Ae})=>Ae===Pe.GC:({dataSourceName:Ae})=>Ae===ee.datasource)}return Ee=Ee.reduce((xe,Ae)=>{const We=(0,ca.Re)(Ae);return(We?la({stateFilter:ee.stateFilter,alertInstanceLabelFilter:fe(ee.alertInstanceLabelFilter)},We.alerts??[]):[]).length&&xe.push(Ae),xe},[]),Ee}const qs=N=>({cardContainer:S.css`
    padding: ${N.spacing(.5)} 0 ${N.spacing(.25)} 0;
    line-height: ${N.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:S.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:S.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:S.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${N.colors.background.secondary};
    padding: ${N.spacing(.5)} ${N.spacing(1)};
    border-radius: ${N.shape.borderRadius()};
    margin-bottom: ${N.spacing(.5)};

    gap: ${N.spacing(2)};
  `,alertName:S.css`
    font-size: ${N.typography.h6.fontSize};
    font-weight: ${N.typography.fontWeightBold};

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,alertNameWrapper:S.css`
    display: flex;
    flex: 1;
    flex-wrap: nowrap;
    flex-direction: column;

    min-width: 100px;
  `,alertLabels:S.css`
    > * {
      margin-right: ${N.spacing(.5)};
    }
  `,alertDuration:S.css`
    font-size: ${N.typography.bodySmall.fontSize};
  `,alertRuleItemText:S.css`
    font-weight: ${N.typography.fontWeightBold};
    font-size: ${N.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:S.css`
    color: ${N.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:S.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:S.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:S.css`
    margin-right: ${N.spacing(.5)};
  `,instanceDetails:S.css`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:S.css`
    margin-bottom: ${N.spacing(.5)};
  `,link:S.css`
    word-break: break-all;
    color: ${N.colors.primary.text};
  `});class vr{getSuggestionsForData(X){const{dataSummary:ee}=X;if(ee.hasData)return;X.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}function us(N){return N.showOptions===rn.kx.Current}const _s=new ue.c(hn).setPanelOptions(N=>{N.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:rn.kx.Current},{label:"Recent state changes",value:rn.kx.RecentChanges}]},defaultValue:rn.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:rn.As.AlphaAsc},{label:"Alphabetical (desc)",value:rn.As.AlphaDesc},{label:"Importance",value:rn.As.Importance},{label:"Time (asc)",value:rn.As.TimeAsc},{label:"Time (desc)",value:rn.As.TimeDesc}]},defaultValue:rn.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:us}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:us}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function({value:ee,onChange:fe}){return A.createElement(Kt,{initialFolderId:ee,onChange:Ee=>fe(Ee?.id),extraFolders:[Ot,Ft]})},category:["Filter"],showIf:us}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor(X){return A.createElement(Ye.B,{tags:X.value,onChange:X.onChange})},category:["Filter"],showIf:us}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:us}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:us}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:us}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:us}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:us}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:us})}).setMigrationHandler(Fn).setSuggestionsSupplier(new vr),Er=new ue.c(ks).setPanelOptions(N=>{N.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:rn.wO.List,settings:{options:[{label:"List",value:rn.wO.List},{label:"Stat",value:rn.wO.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:rn.LM.Default,settings:{options:[{value:rn.LM.Default,label:"Default grouping"},{value:rn.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:X=>X.groupMode===rn.LM.Custom,category:["Options"],editor:X=>A.createElement(ia,{id:X.id??"groupBy",defaultValue:X.value.map(ee=>({label:ee,value:ee})),onChange:X.onChange})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:rn.As.AlphaAsc},{label:"Alphabetical (desc)",value:rn.As.AlphaDesc},{label:"Importance",value:rn.As.Importance},{label:"Time (asc)",value:rn.As.TimeAsc},{label:"Time (desc)",value:rn.As.TimeDesc}]},defaultValue:rn.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",description:"Show alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(ee){return A.createElement(ft.Es,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:ee.value?.title,initialFolderUid:ee.value?.uid,permissionLevel:ct.PermissionLevelString.View,onClear:()=>ee.onChange(""),...ee})},category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter alerts from selected datasource",id:"datasource",defaultValue:null,editor:function(ee){return A.createElement(mt.q,{...ee,type:["prometheus","loki","grafana"],noDefault:!0,current:ee.value,onChange:fe=>ee.onChange(fe.name),onClear:()=>ee.onChange(null)})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})}),er=be.v.unifiedAlertingEnabled?Er:_s;var ms=e(53376),Gt=e(72196),He=e(4063),it=e(23588),xt=e(37932),Vt=e(34807),sn=e(7804),en=e(398),vn=e(18271),On=e(39856),yn=e(61860);const bn=({options:N,annotation:X,formatDate:ee,onClick:fe,onAvatarClick:Ee,onTagClick:xe})=>{const Ae=(0,ie.wW)(Re),{showUser:We,showTags:ke,showTime:rt}=N,{text:at="",login:Et,email:Tt,avatarUrl:pt,tags:At,time:kt,timeEnd:It}=X,Bt=()=>{fe(X)},Xt=()=>{Ee(X)},Zt=Et&&We,Qt=kt&&rt,dn=It&&It!==kt&&rt;return A.createElement(_t.Z,{className:Ae.card,onClick:Bt},A.createElement(_t.Z.Heading,null,A.createElement(On.D,{className:Ae.heading,onClick:Yt=>{Yt.stopPropagation()},content:at})),Qt&&A.createElement(_t.Z.Description,{className:Ae.timestamp},A.createElement(Ct,{formatDate:ee,time:kt}),dn&&A.createElement(A.Fragment,null,A.createElement("span",{className:Ae.time},"-"),A.createElement(Ct,{formatDate:ee,time:It})," ")),Zt&&A.createElement(_t.Z.Meta,{className:Ae.meta},A.createElement(Xn,{email:Tt,login:Et,avatarUrl:pt,onClick:Xt})),ke&&At&&A.createElement(_t.Z.Tags,null,A.createElement(Vt.P,{tags:At,onClick:Yt=>xe(Yt,!1)})))},Xn=({onClick:N,avatarUrl:X,login:ee,email:fe})=>{const Ee=(0,ie.wW)(Re),xe=We=>{We.stopPropagation(),N()},Ae=A.createElement("span",null,"Created by:",A.createElement("br",null)," ",fe);return A.createElement(yn.u,{content:Ae,theme:"info",placement:"top"},A.createElement("button",{onClick:xe,className:Ee.avatar,"aria-label":`Created by ${fe}`},A.createElement("img",{src:X,alt:"avatar icon"})))},Ct=({time:N,formatDate:X})=>{const ee=(0,ie.wW)(Re);return A.createElement("span",{className:ee.time},A.createElement("span",null,X(N)))};function Re(N){return{card:(0,S.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:N.spacing(1),margin:N.spacing(.5),width:"inherit"}),heading:(0,S.css)({a:{zIndex:1,position:"relative",color:N.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,S.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,S.css)({margin:0,alignSelf:"center"}),time:(0,S.css)({marginLeft:N.spacing(1),marginRight:N.spacing(1),fontSize:N.typography.bodySmall.fontSize,color:N.colors.text.secondary}),avatar:(0,S.css)({border:"none",background:"inherit",margin:0,padding:N.spacing(.5),img:{borderRadius:"50%",width:N.spacing(2),height:N.spacing(2)}})}}class Te extends A.PureComponent{constructor(X){super(X),this.style=nt(be.v.theme2),this.subs=new ms.w0,this.tagListRef=A.createRef(),this.onAnnoClick=async ee=>{if(!ee.time)return;const{options:fe}=this.props,xe=(0,cn.h4)().getCurrent(),Ae={from:this._timeOffset(ee.time,fe.navigateBefore,!0),to:this._timeOffset(ee.timeEnd??ee.time,fe.navigateAfter,!1)};if(fe.navigateToPanel&&(Ae.viewPanel=ee.panelId),xe?.uid===ee.dashboardUID){xt.E1.partial(Ae);return}const We=await(0,$t.i)().get("/api/search",{dashboardUIDs:ee.dashboardUID});if(We&&We.length&&We[0].uid===ee.dashboardUID){const ke=We[0],rt=new URL(ke.url,window.location.origin);rt.searchParams.set("from",Ae.from),rt.searchParams.set("to",Ae.to),xt.E1.push(Gt.u.stripBaseFromUrl(rt.toString()));return}vn.Z.emit(He.SI.alertWarning,["Unknown Dashboard: "+ee.dashboardUID])},this.onTagClick=(ee,fe)=>{if(!fe&&this.state.queryTags.includes(ee))return;const Ee=fe?this.state.queryTags.filter(Ae=>Ae!==ee):[...this.state.queryTags,ee];let xe;if(fe){const Ae=document.activeElement,We=Ae?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(Ae)&&We){const ke=Number.parseInt(We,10),rt=this.tagListRef.current.querySelector(`[data-tag-id="${ke+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${ke-1}"]`);rt instanceof HTMLElement&&(xe=rt)}}this.setState({queryTags:Ee},()=>xe?.focus())},this.onUserClick=ee=>{this.setState({queryUser:{id:ee.userId,login:ee.login,email:ee.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(ee,fe)=>{const{options:Ee}=this.props,xe=(0,cn.h4)().getCurrent();return xe?A.createElement(bn,{annotation:ee,formatDate:xe.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:Ee}):A.createElement(A.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(it.n1).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(X,ee){const{options:fe,timeRange:Ee}=this.props;(fe!==X.options||this.state.queryTags!==ee.queryTags||this.state.queryUser!==ee.queryUser||X.renderCounter!==this.props.renderCounter||fe.onlyInTimeRange&&Ee!==X.timeRange)&&this.doSearch()}async doSearch(){const{options:X}=this.props,{queryUser:ee,queryTags:fe}=this.state,Ee={tags:X.tags,limit:X.limit,type:"annotation"};X.onlyFromThisDashboard&&(Ee.dashboardUID=(0,cn.h4)().getCurrent()?.uid);let xe="";if(X.onlyInTimeRange){const{timeRange:We}=this.props;Ee.from=We.from.valueOf(),Ee.to=We.to.valueOf()}else xe="All Time";ee&&(Ee.userId=ee.id),X.tags&&X.tags.length&&(Ee.tags=X.tags.map(We=>this.props.replaceVariables(We))),fe.length&&(Ee.tags=Ee.tags?[...Ee.tags,...fe]:fe);const Ae=await(0,$t.i)().get("/api/annotations",Ee,`anno-list-panel-${this.props.id}`);this.setState({annotations:Ae,timeInfo:xe,loaded:!0})}_timeOffset(X,ee,fe=!1){let Ee=5,xe="m";const Ae=/^(\d+)(\w)/.exec(ee);Ae&&Ae.length===3&&(Ee=parseInt(Ae[1],10),xe=Ae[2]);const We=(0,Ut.CQ)(X);return fe&&(Ee*=-1),We.add(Ee,xe).valueOf()}render(){const{loaded:X,annotations:ee,queryUser:fe,queryTags:Ee}=this.state;if(!X)return A.createElement("div",null,"loading...");const xe=fe||Ee.length>0;return A.createElement(Be.$,{autoHeightMin:"100%"},xe&&A.createElement("div",{className:this.style.filter},A.createElement("b",null,"Filter:"),fe&&A.createElement(Ce.zx,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${fe.email}`},fe.email),Ee.length>0&&A.createElement(Vt.P,{icon:"times",tags:Ee,onClick:Ae=>this.onTagClick(Ae,!0),getAriaLabel:Ae=>`Remove ${Ae} tag`,className:this.style.tagList,ref:this.tagListRef})),ee.length<1&&A.createElement("div",{className:this.style.noneFound},"No Annotations Found"),A.createElement(en.L,{items:ee,renderItem:this.renderItem,getItemKey:Ae=>`${Ae.id}`}))}}const nt=(0,sn.B)(N=>({noneFound:S.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,S.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:N.spacing(.5),padding:N.spacing(.5)}),tagList:(0,S.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),Xe={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},Nt=new ue.c(Te).setPanelOptions(N=>{N.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:Xe.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:Xe.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(X){return A.createElement(Ye.B,{tags:X.value,onChange:X.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:Xe.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:Xe.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:Xe.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:Xe.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:Xe.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:Xe.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:Xe.navigateAfter,description:""})}).setPanelChangeHandler((N,X,ee)=>X==="ryantxu-annolist-panel"?ee:N.options);var zt=e(3947),wt=e(53768),on=e(72293),qt=e(30471),un=e(82229),tn=e(99098),yt=e(40538),jn=e(26372),ra=e(34315),Da=e(91511),Ea=e(77587),ba=e(31911),$n=e(25272),zn=e(74855),ma=e(96905),fa=e(87670),kn=e(60325),ga=e(4176),Fa=e(23888),bs=e(729),ir=e(78056),Gs=e(68416),Sr=e(72269),Oa=e(85511),Rr=e(20888),Es=e(56632),ys=e(1105);const Ca=({config:N,onUPlotClick:X,setFocusedSeriesIdx:ee,setFocusedPointIdx:fe,setCoords:Ee,setHover:xe,isToolTipOpen:Ae,isActive:We,setIsActive:ke,sync:rt})=>{Ae.current=!1;const at=()=>{ke&&ke(!0)},Et=()=>{Ae.current||(Ee(null),ke&&ke(!1))};let Tt=null,pt=null;N.addHook("init",Bt=>{Tt=Bt.root.parentElement,pt=Bt.over,Tt?.addEventListener("click",X),pt.addEventListener("mouseleave",Et),pt.addEventListener("mouseenter",at),rt&&rt()===Es.m.Crosshair&&Bt.root.classList.add("shared-crosshair")});const At=()=>{Ae.current&&(Ee(null),X())};N.addHook("drawClear",At),N.addHook("destroy",()=>{Tt?.removeEventListener("click",X),pt?.removeEventListener("mouseleave",Et),pt?.removeEventListener("mouseenter",at),At()});let kt;N.addHook("syncRect",(Bt,Xt)=>{kt=Xt});const It=N.getTooltipInterpolator();return It&&N.addHook("setCursor",Bt=>{Ae.current||It(ee,fe,Xt=>{if(Xt){Ee(null);return}if(!kt)return;const{x:Zt,y:Qt}=(0,ys._)(Bt,kt);Zt!==void 0&&Qt!==void 0&&Ee({canvas:{x:Bt.cursor.left,y:Bt.cursor.top},viewport:{x:Zt,y:Qt}})},Bt)}),N.addHook("setLegend",Bt=>{if(!Ae.current&&!It&&fe(Bt.legend.idx),Bt.cursor.idxs!=null)for(let Xt=0;Xt<Bt.cursor.idxs.length;Xt++){const Zt=Bt.cursor.idxs[Xt];if(Zt!=null){const Qt={xIndex:Zt,yIndex:0,pageX:kt.left+Bt.cursor.left,pageY:kt.top+Bt.cursor.top};(!Ae.current||!Qt)&&xe(Qt);return}}}),N.addHook("setSeries",(Bt,Xt)=>{Ae.current||ee(Xt)}),N};var fs=e(50796),Ms=e(97551),Vr=e(16225),Ss=e(75974),Rs=e(2703),jr=e(72990),fo=e(17587),Ys=e(6194),Fs=e(33750),yi=e(13347),Qr=e(2445),lr=e(25532),ao=e(5680),Zr=e(28586),so=e(60892);const ro=Zr.Gj,Pi=Zr.Gj,Td=8,Ci=30,Jr=.65,Cl=.1,Od=.15,oo=5,Id=10,Dl=.1;function Rd(N,X,ee,fe,Ee){const xe=(0,ga.X1)(N,14),Ae=X/(xe.width+2)*14,We=ee/fe,ke=Math.min(We,Ae);return{fontSize:Math.min(ke,Ee??ke),textMetrics:xe}}function go(N,X){const{xOri:ee,xDir:fe,rawValue:Ee,getColor:xe,formatValue:Ae,formatShortValue:We,fillOpacity:ke=1,showValue:rt,xSpacing:at=0}=N,Et=ee===yt.wN.Horizontal,Tt=!Boolean(N.text?.valueSize),pt=N.stacking!==yt.o0.None,At=N.stacking===yt.o0.Percent;let{groupWidth:kt,barWidth:It,barRadius:Bt=0}=N;pt&&([kt,It]=[It,kt]);let Xt,Zt;const Qt=Mn=>Array.from(Mn.data[0].map((Bn,wn)=>wn)),dn=at===0?void 0:(Mn,Bn)=>{const wn=Mn.bbox.width,Zn=fe*(Et?1:-1);let Jn=Bn.length,Pa=Jn-1,ua=0,Qa=wn/Ss.Z.pxRatio,wa=Math.abs(Math.floor(Qa/at));ua=Jn<wa?0:Math.ceil(Jn/wa);let br=Bn.map((Ds,$r)=>ua!==0&&(at>0?$r:Pa-$r)%ua>0?null:Ds);return Zn===1?br:br.reverse()},Yt=(Mn,Bn,wn,Zn,Jn)=>{if(N.xTimeAuto){let Pa=Mn.scales.x,ua=Pa.min,Qa=Pa.max;Pa.min=Mn.data[0][0],Pa.max=Mn.data[0][Mn.data[0].length-1];let wa=(0,Fa.mr)(Mn,Bn,wn,Zn,Jn);return Pa.min=ua,Pa.max=Qa,wa}return Bn.map(Pa=>Et?We(0,Pa):Ae(0,Pa))},En=(Mn,Bn,wn)=>{Bn=0,wn=Math.max(1,Mn.data[0].length-1);let Zn=0;(0,Zr.Qm)(Mn.data[0].length,kt,ro,0,(Pa,ua,Qa)=>{Zn=ua+Qa/2});let Jn=wn-Bn;if(Zn===.5)Bn-=Jn;else{let ua=(1/(1-Zn*2)*Jn-Jn)/2;Bn-=ua,wn+=ua}return[Bn,wn]};let Sn=(Mn,Bn)=>{let wn=Array.from({length:Bn},()=>({offs:Array(Mn).fill(0),size:Array(Mn).fill(0)}));return(0,Zr.Qm)(Mn,kt,ro,null,(Zn,Jn,Pa)=>{(0,Zr.Qm)(Bn,It,Pi,null,(ua,Qa,wa)=>{wn[ua].offs[Zn]=Jn+Pa*Qa,wn[ua].size[Zn]=Pa*wa})}),wn},xn=(Mn,Bn)=>{let wn=Array.from({length:Bn},()=>({offs:Array(Mn).fill(0),size:Array(Mn).fill(0)}));return(0,Zr.Qm)(Mn,kt,ro,null,(Zn,Jn,Pa)=>{(0,Zr.Qm)(Bn,It,Pi,null,(ua,Qa,wa)=>{wn[ua].offs[Zn]=Jn,wn[ua].size[Zn]=Pa})}),wn};const Tn=Et?Cl:Od,Kn=Et?oo:Id;let Ln=[],ta=[],Un=1,In,Qn=N.text?.valueSize??Ci,oa=Kn,$a=1/0,ka=1/0,Aa=xe!=null,_a=Aa?{fill:{unit:3,values:(Mn,Bn)=>ta[Bn].fill},stroke:{unit:3,values:(Mn,Bn)=>ta[Bn].stroke}}:{},Gn=Ss.Z.paths.bars({radius:At?0:pt?(Mn,Bn)=>Bn===Mn.data.length-1?[Bt,0]:[0,0]:Bt,disp:{x0:{unit:2,values:(Mn,Bn)=>Ln[Bn].offs},size:{unit:2,values:(Mn,Bn)=>Ln[Bn].size},..._a},each:(Mn,Bn,wn,Zn,Jn,Pa,ua)=>{Zn-=Mn.bbox.left,Jn-=Mn.bbox.top;let Qa=Mn.data[Bn][wn];Et?($a=Math.min($a,Qa<0?Mn.bbox.height-(Jn+ua):Jn),ka=Pa):($a=ua,ka=Math.min(ka,Qa<0?Zn:Mn.bbox.width-(Zn+Pa)));let wa={x:Zn,y:Jn,w:Pa,h:ua,sidx:Bn,didx:wn};if(N.fullHighlight&&(N.xOri===yt.wN.Horizontal?(wa.y=0,wa.h=Mn.bbox.height):(wa.x=0,wa.w=Mn.bbox.width)),Xt.add(wa),rt!==yt.Jp.Never){const br=Ee(Bn,wn);let Ds=1;At&&Ua[Bn][wn]&&(Ds=Ua[Bn][wn]);const $r=Ds===0?0:br/Ds,Mr=Ae(Bn,$r);if(oa=Math.min(oa,Math.round(Tn*(Et?Pa:ua))),In[wn]===void 0&&(In[wn]={}),In[wn][Bn]={text:Mr,value:Ee(Bn,wn),hidden:!1},Tt){const{fontSize:dr,textMetrics:Os}=Rd(In[wn][Bn].text,ka*(Et?Jr:1)-(Et?0:oa),$a*(Et?1:Jr)-(Et?oa:0),1);In[wn][Bn].textMetrics=Os;let es=Math.round(Math.min(Qn,Ci,dr));Un=es/Qn*(es/14),Qn=es}else In[wn][Bn].textMetrics=(0,ga.X1)(In[wn][Bn].text,Qn);let mo=Et?0:-Math.round(Dl*Qn),Us=Ee(Bn,wn);if(N.negY?.[Bn]&&Us!=null&&(Us*=-1),Us!=null){const dr=Mn.bbox.left+(Et?Zn+Pa/2:Us<0?Zn-oa:Zn+Pa+oa),Os=Mn.bbox.top+(Et?Us<0?Jn+ua+oa:Jn-oa:Jn+ua/2-mo),{textMetrics:es={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=In[wn][Bn];let sr=0,Ks=0;Et?(sr=es.width*Un/2,Ks=Us>0?(es.actualBoundingBoxAscent+es.actualBoundingBoxDescent)*Un:0):(Ks=(es.actualBoundingBoxAscent+es.actualBoundingBoxDescent)*Un/2,sr=Us<0?es.width*Un:0),In[wn][Bn].x=dr,In[wn][Bn].y=Os,In[wn][Bn].bbox={x:dr-sr,y:Os-Ks,w:es.width*Un,h:(es.actualBoundingBoxAscent+es.actualBoundingBoxDescent)*Un}}}}});const Nn=Mn=>{let Bn=Mn.over;Bn.style.overflow="hidden",Mn.root.querySelectorAll(".u-cursor-pt").forEach(wn=>{wn instanceof HTMLElement&&(wn.style.borderRadius="0",N.fullHighlight&&(wn.style.zIndex="-1"))})},Hn={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(Mn,Bn)=>{if(Bn===1){Zt=null;let wn=Mn.cursor.left*Ss.Z.pxRatio,Zn=Mn.cursor.top*Ss.Z.pxRatio;Xt.get(wn,Zn,1,1,Jn=>{(0,so.Pn)(wn,Zn,Jn.x,Jn.y,Jn.x+Jn.w,Jn.y+Jn.h)&&(pt?(Zt==null||Jn.h*Jn.w<Zt.h*Zt.w)&&(Zt=Jn):Zt=Jn)})}return Zt&&Bn===Zt.sidx?Zt.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(Mn,Bn)=>{let wn=Zt&&Bn===Zt.sidx,Zn=0,Jn=0;if(pt&&wn){const Pa=Zt&&Zt.sidx>1&&(0,so.zZ)(Xt,Zt.sidx-1,Zt.didx);Pa&&(Et?Zn=Pa.h:Jn=Pa.w)}return{left:wn?(Zt.x+Jn)/Ss.Z.pxRatio:-10,top:wn?Zt.y/Ss.Z.pxRatio:-10,width:wn?(Zt.w-Jn)/Ss.Z.pxRatio:0,height:wn?(Zt.h-Zn)/Ss.Z.pxRatio:0}}}},qn=Mn=>{if(Xt=Xt||new so.lW(0,0,Mn.bbox.width,Mn.bbox.height),Xt.clear(),Mn.series.forEach(Bn=>{Bn._paths=null}),pt?Ln=[null].concat(xn(Mn.data[0].length,Mn.data.length-1)):Ln=[null].concat(Sn(Mn.data[0].length,Mn.data.length-1)),Aa){ta=[null];for(let Bn=1;Bn<Mn.data.length;Bn++){let wn=Mn.data[Bn].map((Zn,Jn)=>Zn!=null?xe(Bn,Jn,Zn):null);ta.push({fill:ke<1?wn.map(Zn=>Zn!=null?(0,ao.alpha)(Zn,ke):null):wn,stroke:wn})}}In={},Qn=N.text?.valueSize??Ci,oa=Kn,$a=ka=1/0},ya=Mn=>{if(rt===yt.Jp.Never||Qn<Td)return;Mn.ctx.save(),Mn.ctx.fillStyle=X.colors.text.primary,Mn.ctx.font=`${Qn}px ${X.typography.fontFamily}`;let Bn,wn;for(const Zn in In){let Jn=!0;for(const Pa in In[Zn]){const ua=In[Zn][Pa],{text:Qa,x:wa=0,y:br=0}=ua;let{value:Ds}=ua;N.negY?.[Pa]&&Ds!=null&&(Ds*=-1);let $r=Et?"center":Ds!==null&&Ds<0?"right":"left",Mr=Et?Ds!==null&&Ds<0?"top":"alphabetic":"middle";if($r!==Bn&&(Mn.ctx.textAlign=Bn=$r),Mr!==wn&&(Mn.ctx.textBaseline=wn=Mr),rt===yt.Jp.Always)Mn.ctx.fillText(Qa,wa,br);else if(rt===yt.Jp.Auto){let{bbox:mo}=ua,Us=!1;if(mo==null)Us=!0,ua.hidden=!0;else if(!Jn)for(const dr in In[Zn]){if(dr===Pa)continue;const Os=In[Zn][dr],{bbox:es,hidden:sr}=Os;if(!sr&&es&&(0,so.kK)(mo,es)){Us=!0,ua.hidden=!0;break}}Jn=!1,!Us&&Mn.ctx.fillText(Qa,wa,br)}}}Mn.ctx.restore()},na=(Mn,Bn,wn,Zn)=>{Zt?(Mn(Zt.sidx),Bn(Zt.didx),wn()):wn(!0)};let Ua=null;function pa(Mn,Bn){return Ua=null,(0,Qr.Bj)(Mn[0],Bn,({totals:wn})=>{Ua=wn})}return{cursor:Hn,xRange:En,xValues:Yt,xSplits:Qt,hFilter:dn,barsBuilder:Gn,init:Nn,drawClear:qn,draw:ya,interpolateTooltip:na,prepData:pa}}const Ar={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:yt.wm.Auto,showValue:yt.Jp.Auto,stacking:yt.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},xl={fillOpacity:80,gradientMode:yt.FI.None,lineWidth:1};function Ad(N){return N===un.wm.Vertical?{xOri:yt.wN.Horizontal,xDir:yt.bQ.Right,yOri:yt.wN.Vertical,yDir:yt.bQ.Up}:{xOri:yt.wN.Vertical,xDir:yt.bQ.Down,yOri:yt.wN.Horizontal,yDir:yt.bQ.Right}}const po=({frame:N,theme:X,orientation:ee,showValue:fe,groupWidth:Ee,barWidth:xe,barRadius:Ae=0,stacking:We,text:ke,rawValue:rt,getColor:at,fillOpacity:Et,allFrames:Tt,xTickLabelRotation:pt,xTickLabelMaxLength:At,xTickLabelSpacing:kt=0,legend:It,timeZone:Bt,fullHighlight:Xt})=>{const Zt=new yi.U,Qt=(Un,In)=>(0,Rs.zc)(N.fields[Un].display(In)),dn=(Un,In)=>No(Qt(Un,In),At),Yt=Ad(ee);N.fields.length===2&&(Ee=xe,xe=1);const En={xOri:Yt.xOri,xDir:Yt.xDir,groupWidth:Ee,barWidth:xe,barRadius:Ae,stacking:We,rawValue:rt,getColor:at,fillOpacity:Et,formatValue:Qt,formatShortValue:dn,timeZone:Bt,text:ke,showValue:fe,legend:It,xSpacing:kt,xTimeAuto:N.fields[0]?.type===tn.fS.time&&!N.fields[0].config.unit?.startsWith("time:"),negY:N.fields.map(Un=>Un.config.custom?.transform===yt.pR.NegativeY),fullHighlight:Xt},Sn=go(En,X);if(Zt.setCursor(Sn.cursor),Zt.addHook("init",Sn.init),Zt.addHook("drawClear",Sn.drawClear),Zt.addHook("draw",Sn.draw),Zt.setTooltipInterpolator(Sn.interpolateTooltip),pt!==0){let Un=50,In=Yt.xOri===yt.wN.Horizontal?14:5;Zt.setPadding(Ld(N,pt,At,Un,In))}Zt.setPrepData(Sn.prepData),Zt.addScale({scaleKey:"x",isTime:!1,range:Sn.xRange,distribution:yt.wf.Ordinal,orientation:Yt.xOri,direction:Yt.xDir});const xn=N.fields[0].config.custom?.axisPlacement!==yt.LB.Hidden?Yt.xOri===yt.wN.Horizontal?yt.LB.Bottom:yt.LB.Left:yt.LB.Hidden,Tn=N.fields[0].config.custom?.axisPlacement!==yt.LB.Hidden;Zt.addAxis({scaleKey:"x",isTime:!1,placement:xn,label:N.fields[0].config.custom?.axisLabel,splits:Sn.xSplits,filter:Yt.xOri===0?Sn.hFilter:void 0,values:Sn.xValues,timeZone:Bt,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:Yt.xOri===0?pt*-1:0,theme:X,show:Tn});let Kn=0;const Ln=ho(It);for(let Un=1;Un<N.fields.length;Un++){const In=N.fields[Un];Kn++;const Qn={...xl,...In.config.custom},oa=In.config.unit||Sr.j,$a=(0,jr.fD)(In),Aa=(0,jr.YO)(In,X).color;let _a=Qn.axisSoftMin,Gn=Qn.axisSoftMax;if(_a==null&&In.config.min==null&&(_a=0),Gn==null&&In.config.max==null&&(Gn=0),Qn.thresholdsStyle&&In.config.thresholds&&(Qn.thresholdsStyle.mode??yt.i3.Off)!==yt.i3.Off&&Zt.addThresholds({config:Qn.thresholdsStyle,thresholds:In.config.thresholds,scaleKey:oa,theme:X,hardMin:In.config.min,hardMax:In.config.max,softMin:Qn.axisSoftMin,softMax:Qn.axisSoftMax}),Zt.addSeries({scaleKey:oa,pxAlign:!0,lineWidth:Qn.lineWidth,lineColor:Aa,fillOpacity:Qn.fillOpacity,theme:X,colorMode:$a,pathBuilder:Sn.barsBuilder,show:!Qn.hideFrom?.viz,gradientMode:Qn.gradientMode,thresholds:In.config.thresholds,hardMin:In.config.min,hardMax:In.config.max,softMin:_a,softMax:Gn,dataFrameFieldIndex:{fieldIndex:Ln?Un:Tt[0].fields.findIndex(Nn=>Nn.type===tn.fS.number&&Nn.state?.seriesIndex===Kn-1),frameIndex:0}}),Zt.addScale({scaleKey:oa,min:In.config.min,max:In.config.max,softMin:_a,softMax:Gn,orientation:Yt.yOri,direction:Yt.yDir,distribution:Qn.scaleDistribution?.type,log:Qn.scaleDistribution?.log}),Qn.axisPlacement!==yt.LB.Hidden){let Nn=Qn.axisPlacement;(!Nn||Nn===yt.LB.Auto)&&(Nn=yt.LB.Left),Yt.xOri===1&&(Nn===yt.LB.Left&&(Nn=yt.LB.Bottom),Nn===yt.LB.Right&&(Nn=yt.LB.Top)),Zt.addAxis({scaleKey:oa,label:Qn.axisLabel,size:Qn.axisWidth,placement:Nn,formatValue:(Hn,qn)=>(0,Rs.zc)(In.display(Hn,qn)),filter:Yt.yOri===0?Sn.hFilter:void 0,tickLabelRotation:Yt.xOri===1?pt*-1:0,theme:X,grid:{show:Qn.axisGridShow}})}}let ta=(0,Qr.i7)(N);return Zt.setStackingGroups(ta),Zt};function No(N,X){return N.length>X?N.substring(0,X).concat("..."):N}function Ld(N,X,ee,fe=0,Ee=0){const xe=N.fields[0].values,Ae=Fa.gD,We=N.fields[0].display,ke=pt=>We?We(xe[pt]):xe[pt];let rt=0;for(let pt=0;pt<xe.length;pt++){let At=(0,ga.X1)(No((0,Rs.zc)(ke(pt)),ee),Ae);rt=At.width>rt?At.width:rt}const at=X>0?Math.cos(X*Math.PI/180)*(0,ga.X1)(No((0,Rs.zc)(ke(xe.length-1)),ee),Ae).width:0,Et=X<0?Math.cos(X*-1*Math.PI/180)*(0,ga.X1)(No((0,Rs.zc)(ke(0)),ee),Ae).width:0,Tt=Math.sin((X>=0?X:X*-1)*Math.PI/180)*rt-Ee;return[Math.round(Fa.gD*Ss.Z.pxRatio),at,Tt,Math.max(0,Et-fe)]}function bl(N,X,ee){if(!N?.length)return{warn:"No data in response"};const fe=N.length===1?(0,fo.Y3)(N[0],N[0].fields.findIndex(Et=>Et.type===tn.fS.time)):(0,fo._9)({frames:N});if(!fe)return{warn:"Unable to join data"};let Ee;if(ee.colorByField&&(Ee=(0,lr.findField)(fe,ee.colorByField),!Ee))return{warn:"Color field not found"};let xe;if(ee.xField&&(xe=(0,lr.findField)(fe,ee.xField),!xe))return{warn:"Configured x field not found"};let Ae,We,ke=[];for(const Et of fe.fields)if(Et!==xe)switch(Et.type){case tn.fS.string:Ae||(Ae=Et);break;case tn.fS.time:We||(We=Et);break;case tn.fS.number:{const Tt={...Et,state:{...Et.state,seriesIndex:ke.length},config:{...Et.config,custom:{...Et.config.custom,stacking:{group:"_",mode:ee.stacking}}},values:Et.values.map(pt=>Number.isFinite(pt)||pt==null?pt:null)};ee.stacking===yt.o0.Percent&&(Tt.config.unit="percentunit",Tt.display=(0,Ys.U_)({field:Tt,theme:X})),ke.push(Tt)}}let rt=xe;if(rt||(rt=Ae||We),!rt)return{warn:"Bar charts requires a string or time field"};if(!ke.length)return{warn:"No numeric fields found"};if(Ee&&ke.length>1){const Et=ke.find(Tt=>Tt!==Ee);Et&&(ke=[Et])}if(ho(ee.legend)){const Et=ee.legend.sortBy.toLowerCase(),Tt=ee.legend.calcs??[Et];ke=(0,w.orderBy)(ke,pt=>(0,Fs.Kx)({field:pt,reducers:Tt})[Et],ee.legend.sortDesc?"desc":"asc")}let at=ke;return ee.stacking===yt.o0.Percent&&(at=ke.map(Et=>{const Tt=fe.fields.find(At=>At.name===Et.name),pt={...Et,config:{...Tt.config},values:Et.values};return pt.display=(0,Ys.U_)({field:pt,theme:X}),pt}),at.unshift(rt)),ke.unshift(rt),{aligned:fe,colorByField:Ee,viz:[{length:rt.values.length,fields:ke}],legend:{fields:at,length:rt.values.length}}}const ho=N=>Boolean(N?.sortBy&&N.sortDesc!==null),Ml=10,Bd=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(N,X)=>X.text?.valueSize===N.text?.valueSize],Nd=({data:N,options:X,fieldConfig:ee,width:fe,height:Ee,timeZone:xe,id:Ae})=>{const We=(0,ie.l4)(),{eventBus:ke}=(0,kn.R9)(),rt=(0,A.useRef)(void 0),at=(0,A.useRef)(!1),[Et,Tt]=(0,A.useState)(void 0),[pt,At]=(0,A.useState)(null),[kt,It]=(0,A.useState)(null),[Bt,Xt]=(0,A.useState)(null),[Zt,Qt]=(0,A.useState)(!1),[dn,Yt]=(0,A.useState)(!1),En=()=>{at.current=!1,At(null),Yt(!1)},Sn=()=>{at.current=!at.current,Yt(at.current)},xn=(0,A.useRef)(),Tn=(0,A.useRef)(),Kn=(0,A.useMemo)(()=>bl(N.series,We,X),[N.series,We,X]),Ln="viz"in Kn?Kn:null;Tn.current=Ln?.colorByField;const ta=(0,A.useRef)(1e4);(0,A.useMemo)(()=>{ta.current++},[X]);const Un=(0,A.useMemo)(()=>{const Nn=Ln?.viz[0],Hn=xn.current;return Nn&&Hn&&(0,ma.Ch)(Nn,Hn,!0)||ta.current++,xn.current=Nn,(N.structureRev??0)+ta.current},[Ln,N.structureRev]),In=(0,A.useMemo)(()=>!X.orientation||X.orientation===un.wm.Auto?fe<Ee?un.wm.Horizontal:un.wm.Vertical:X.orientation,[fe,Ee,X.orientation]),Qn=(0,A.useMemo)(()=>{if(X.xTickLabelMaxLength)return X.xTickLabelMaxLength;{const Nn=X.xTickLabelRotation,Hn=(0,ga.X1)("M",Fa.gD).width;return Ee/2/(Math.sin((Nn>=0?Nn:Nn*-1)*Math.PI/180)*Hn)-3}},[Ee,X.xTickLabelRotation,X.xTickLabelMaxLength]);if("warn"in Kn)return A.createElement(fa.Z,{panelId:Ae,fieldConfig:ee,data:N,message:Kn.warn,needsNumberField:!0});const oa=(Nn,Hn,qn)=>{const ya=Hn==null?null:Nn.fields[Hn];if(ya){const pa=(0,qt.CZ)(ya,Nn);Hn=Kn.aligned.fields.findIndex(Mn=>pa===(0,qt.CZ)(Mn,Kn.aligned))}const na=X.fullHighlight&&X.stacking!==yt.o0.None?yt.f3.Multi:X.tooltip.mode,Ua=X.tooltip.mode===yt.f3.Multi?X.tooltip.sort:yt.As.None;return A.createElement(A.Fragment,null,dn&&A.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},A.createElement(fs.P,{onClick:En,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),A.createElement(Vr.H,{data:Kn.aligned,rowIndex:qn,columnIndex:Hn,sortOrder:Ua,mode:na}))},$a=Nn=>{const{legend:Hn}=X;if(!Nn||Hn.showLegend===!1)return null;if(Kn.colorByField){const qn=(0,Ms.$m)([Kn.colorByField],We);if(qn?.length)return A.createElement(bs.AY.Legend,{placement:Hn.placement},A.createElement(ir.l,{placement:Hn.placement,items:qn,displayMode:Hn.displayMode}))}return A.createElement(Gs.l,{data:[Kn.legend],config:Nn,maxHeight:"35%",maxWidth:"60%",...X.legend})},ka=(Nn,Hn)=>xn.current.fields[Nn].values[Hn];let Aa,_a=1;if(Kn.colorByField){const Nn=Kn.colorByField,Hn=Nn.display;_a=(Nn.config.custom.fillOpacity??100)/100,Aa=(qn,ya)=>Hn(Tn.current?.values[ya]).color}else xn.current.fields.some(Hn=>Hn.config.custom?.gradientMode===yt.FI.Scheme&&Hn.config.color?.mode===wt.S.Thresholds||Hn.config.mappings?.some(ya=>ya.type==="value"?Object.values(ya.options).some(na=>na.color!=null):ya.options.result.color!=null))&&(_a=(xn.current.fields.find(qn=>qn.type===tn.fS.number).config.custom.fillOpacity??100)/100,Aa=(qn,ya)=>{let na=xn.current.fields[qn];return na.display(na.values[ya]).color});const Gn=(Nn,Hn,qn)=>{const{barWidth:ya,barRadius:na=0,showValue:Ua,groupWidth:pa,stacking:Mn,legend:Bn,tooltip:wn,text:Zn,xTickLabelRotation:Jn,xTickLabelSpacing:Pa,fullHighlight:ua}=X;return po({frame:Nn,getTimeRange:qn,timeZone:xe,theme:We,timeZones:[xe],eventBus:ke,orientation:In,barWidth:ya,barRadius:na,showValue:Ua,groupWidth:pa,xTickLabelRotation:Jn,xTickLabelMaxLength:Qn,xTickLabelSpacing:Pa,stacking:Mn,legend:Bn,tooltip:wn,text:Zn,rawValue:ka,getColor:Aa,fillOpacity:_a,allFrames:Kn.viz,fullHighlight:ua})};return A.createElement(Sr.d,{theme:We,frames:Kn.viz,prepConfig:Gn,propsToDiff:Bd,preparePlotFrame:Nn=>Nn[0],renderLegend:$a,legend:X.legend,timeZone:xe,timeRange:{from:1,to:1},structureRev:Un,width:fe,height:Ee},Nn=>(rt.current!==Nn&&(rt.current=Ca({config:Nn,onUPlotClick:Sn,setFocusedSeriesIdx:It,setFocusedPointIdx:Xt,setCoords:At,setHover:Tt,isToolTipOpen:at,isActive:Zt,setIsActive:Qt})),X.tooltip.mode===yt.f3.None?null:A.createElement(Oa.h_,null,Et&&pt&&kt&&A.createElement(Rr.S,{position:{x:pt.viewport.x,y:pt.viewport.y},offset:{x:Ml,y:Ml},allowPointerEvents:at.current},oa(Kn.viz[0],kt,Bt)))))};var Xr=e(52081),vo=e(2594),Di=e(58255);const gs=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],Sl=N=>{let X=N.value??0;const ee=X<0;ee&&(X*=-1);let fe=gs[0];for(const Ae of gs)if(fe=Ae,X<=fe.value)break;const Ee=Ae=>{N.onChange(Ae*(ee?-1:1))},xe=()=>{N.onChange(N.value*-1)};return A.createElement(Xr.Lh,null,A.createElement(vo.S,{value:fe.value,options:gs,onChange:Ee}),X!==0&&A.createElement(yn.u,{content:"Require space from the right side",placement:"top"},A.createElement("div",null,A.createElement(Di.X,{value:ee,onChange:xe,label:"RTL"}))))};var Ma=e(26410);class Tl{getListWithDefaults(X){return X.getListAppender({name:Ma.y.BarChart,pluginId:"barchart",options:{showValue:yt.Jp.Never,legend:{calcs:[],displayMode:yt.jK.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:ee=>{ee.options.barWidth=.8}}})}getSuggestionsForData(X){const ee=this.getListWithDefaults(X),{dataSummary:fe}=X;fe.frameCount===1&&(!fe.hasNumberField||!fe.hasStringField||fe.rowCountTotal>50||(ee.append({name:Ma.y.BarChart}),fe.numberFieldCount>1&&(ee.append({name:Ma.y.BarChartStacked,options:{stacking:yt.o0.Normal}}),ee.append({name:Ma.y.BarChartStackedPercent,options:{stacking:yt.o0.Percent}})),ee.append({name:Ma.y.BarChartHorizontal,options:{orientation:un.wm.Horizontal}}),fe.numberFieldCount>1&&(ee.append({name:Ma.y.BarChartHorizontalStacked,options:{stacking:yt.o0.Normal,orientation:un.wm.Horizontal}}),ee.append({name:Ma.y.BarChartHorizontalStackedPercent,options:{orientation:un.wm.Horizontal,stacking:yt.o0.Percent}}))))}}const xi=new ue.c(Nd).useFieldConfig({standardOptions:{[zt.qb.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:wt.S.PaletteClassic}}},useCustomConfig:N=>{const X=xl;N.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:X.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:X.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:jn.q.fillGradient[0].value,settings:{options:jn.q.fillGradient}}),N.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:yt.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:yt.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),N.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:yt.i3.Off},settings:{options:jn.q.thresholdsDisplayModes},editor:zn.F,override:zn.F,process:on.kG,shouldApply:()=>!0}),ra.r(N,X,!1),Da.B(N)}}).setPanelOptions((N,X)=>{const ee=bl(X.data,be.v.theme2,X.options??{});let fe="First string or time field";const Ee="viz"in ee?ee.viz[0]:void 0;if(Ee?.fields?.length){const xe=Ee.fields[0];fe+=` (${(0,qt.CZ)(xe,Ee)})`}N.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:fe}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:un.wm.Auto,label:"Auto"},{value:un.wm.Horizontal,label:"Horizontal"},{value:un.wm.Vertical,label:"Vertical"}]},defaultValue:Ar.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:Ar.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:xe=>xe.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:Ar.xTickLabelSpacing,editor:Sl}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:yt.Jp.Auto,label:"Auto"},{value:yt.Jp.Always,label:"Always"},{value:yt.Jp.Never,label:"Never"}]},defaultValue:Ar.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:jn.q.stacking},defaultValue:Ar.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Ar.groupWidth,settings:{min:0,max:1,step:.01},showIf:(xe,Ae)=>xe.stacking&&xe.stacking!==yt.o0.None?!1:Ol(Ae)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Ar.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Ar.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:Ar.fullHighlight}),N.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),(!X.options?.fullHighlight||X.options?.stacking===yt.o0.None)&&Ea.L(N),ba.J(N),$n.Z(N,!1)}).setSuggestionsSupplier(new Tl);function Ol(N){let X=0;if(N)for(const ee of N)for(const fe of ee.fields)fe.type===tn.fS.number&&X++;return X}var Il=e(50954),Uo=e(30383);const Ud=N=>(0,Il.rD)(N);var wd=e(63992);const Eo={displayMode:yt.QH.Gradient,minVizHeight:10,minVizWidth:0,showUnfilled:!0,valueMode:yt.M8.Color};class Rl{getSuggestionsForData(X){const{dataSummary:ee}=X;if(!ee.hasData||!ee.hasNumberField)return;const fe=X.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});ee.numberFieldCount>50||(ee.hasStringField&&ee.frameCount===1&&ee.rowCountTotal<30?(fe.append({name:Ma.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:yt.QH.Basic,orientation:un.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),fe.append({name:Ma.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:yt.QH.Lcd,orientation:un.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(fe.append({name:Ma.y.BarGaugeBasic,options:{displayMode:yt.QH.Basic,orientation:un.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),fe.append({name:Ma.y.BarGaugeLCD,options:{displayMode:yt.QH.Lcd,orientation:un.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const wo=new ue.c(wd.M).useFieldConfig().setPanelOptions(N=>{(0,Uo.j)(N),(0,Uo.h)(N),$n.Z(N),N.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:yt.QH.Gradient,label:"Gradient"},{value:yt.QH.Lcd,label:"Retro LCD"},{value:yt.QH.Basic,label:"Basic"}]},defaultValue:Eo.displayMode}).addRadio({path:"valueMode",name:"Value display",settings:{options:[{value:yt.M8.Color,label:"Value color"},{value:yt.M8.Text,label:"Text color"},{value:yt.M8.Hidden,label:"Hidden"}]},defaultValue:Eo.valueMode}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:Eo.showUnfilled,showIf:X=>X.displayMode!=="lcd"}).addNumberInput({path:"minVizWidth",name:"Min width",description:"Minimum column width",defaultValue:Eo.minVizWidth,showIf:X=>X.orientation===un.wm.Vertical}).addNumberInput({path:"minVizHeight",name:"Min height",description:"Minimum row height",defaultValue:Eo.minVizHeight,showIf:X=>X.orientation===un.wm.Horizontal})}).setPanelChangeHandler(Il.ZH).setMigrationHandler(Ud).setSuggestionsSupplier(new Rl);var Lr=e(56703),bi=e(76095),Mi=e(68948),Wo=e(99375),yo=e(41611),Wd=e(41213),Fo=e(10092),Si=e(16514);const Al=N=>X=>{const ee=N.visualization.getColorByName(X?.color||Si.Jx);return{markerTriangle:S.css`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${ee};
      `,markerBar:S.css`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${ee};
      `}};var ps=e(55986),yr=e(53165),tr=e(94270),As=e(24799),zr=e(97379),Ll=e(63619),$o=e(24357),Fd=e(70659);const Ti=A.forwardRef(({annotation:N,onSave:X,onDismiss:ee,timeFormatter:fe,className:Ee,...xe},Ae)=>{const We=(0,ie.wW)(Ps),ke=(0,kn.R9)(),rt=(0,A.useRef)(null);(0,yr.Z)(rt,()=>{ee()});const[at,Et]=(0,ps.default)(async dn=>{const Yt=await ke.onAnnotationCreate(dn);return X&&X(),Yt}),[Tt,pt]=(0,ps.default)(async dn=>{const Yt=await ke.onAnnotationUpdate(dn);return X&&X(),Yt}),At=N.id!==void 0,kt=N.time!==N.timeEnd,It=At?pt:Et,Bt=At?Tt:at,Xt=kt?`${fe(N.time)} - ${fe(N.timeEnd)}`:fe(N.time),Zt=({tags:dn,description:Yt})=>{It({id:N.id,tags:dn,description:Yt,from:Math.round(N.time),to:Math.round(N.timeEnd)})},Qt=A.createElement("div",{ref:Ae,className:(0,S.cx)(We.editor,Ee),...xe},A.createElement("div",{className:We.header},A.createElement(Xr.Lh,{justify:"space-between",align:"center"},A.createElement("div",{className:We.title},"Add annotation"),A.createElement("div",{className:We.ts},Xt))),A.createElement("div",{className:We.editorForm},A.createElement(tr.l,{onSubmit:Zt,defaultValues:{description:N?.text,tags:N?.tags||[]}},({register:dn,errors:Yt,control:En})=>A.createElement(A.Fragment,null,A.createElement(As.g,{label:"Description",invalid:!!Yt.description,error:Yt?.description?.message},A.createElement(zr.K,{...dn("description",{required:"Annotation description is required"})})),A.createElement(As.g,{label:"Tags"},A.createElement(Ll.g,{control:En,name:"tags",render:({field:{ref:Sn,onChange:xn,...Tn}})=>A.createElement($o.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:xn,tagOptions:Fd.lK,tags:Tn.value})})),A.createElement(Xr.Lh,{justify:"flex-end"},A.createElement(Ce.zx,{size:"sm",variant:"secondary",onClick:ee,fill:"outline"},"Cancel"),A.createElement(Ce.zx,{size:"sm",type:"submit",disabled:Bt?.loading},Bt?.loading?"Saving":"Save"))))));return A.createElement(A.Fragment,null,A.createElement("div",{className:We.backdrop}),A.createElement("div",{ref:rt},Qt))});Ti.displayName="AnnotationEditorForm";const Ps=N=>({backdrop:S.css`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${N.zIndex.navbarFixed};
    `,editorContainer:S.css`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:S.css`
      background: ${N.colors.background.primary};
      box-shadow: ${N.shadows.z3};
      z-index: ${N.zIndex.dropdown};
      border: 1px solid ${N.colors.border.weak};
      border-radius: ${N.shape.borderRadius()};
      width: 460px;
    `,editorForm:S.css`
      padding: ${N.spacing(1)};
    `,header:S.css`
      border-bottom: 1px solid ${N.colors.border.weak};
      padding: ${N.spacing(1.5,1)};
    `,title:S.css`
      font-weight: ${N.typography.fontWeightMedium};
    `,ts:S.css`
      font-size: ${N.typography.bodySmall.fontSize};
      color: ${N.colors.text.secondary};
    `}),Oi=({onDismiss:N,onSave:X,timeZone:ee,data:fe,selection:Ee,annotation:xe,style:Ae})=>{const We=(0,ie.l4)(),ke=(0,ie.wW)($d),rt=(0,ie.wW)(Al),[at,Et]=(0,A.useState)(null),[Tt,pt]=(0,A.useState)(null),At=(0,Fo.D)(at,Tt,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let kt=fe.fields[0];if(!kt)return null;const It=kt.display||(0,Ys.U_)({field:kt,timeZone:ee,theme:We}),Bt=Ee.min!==Ee.max;return A.createElement(Oa.h_,null,A.createElement(A.Fragment,null,A.createElement("div",{style:Ae},A.createElement("div",{className:(0,S.cx)(S.css`
                position: absolute;
                top: ${Ee.bbox.top}px;
                left: ${Ee.bbox.left}px;
                width: ${Ee.bbox.width}px;
                height: ${Ee.bbox.height}px;
              `,Bt?ke.overlayRange(xe):ke.overlay(xe))},A.createElement("div",{ref:Et,className:Bt?(0,S.cx)(rt(xe).markerBar,ke.markerBar):(0,S.cx)(rt(xe).markerTriangle,ke.markerTriangle)}))),A.createElement(Ti,{annotation:xe||{time:Ee.min,timeEnd:Ee.max},timeFormatter:Xt=>It(Xt).text,onSave:X,onDismiss:N,ref:pt,style:At.styles.popper,...At.attributes.popper})))},$d=N=>({overlay:X=>{const ee=N.visualization.getColorByName(X?.color||Si.Jx);return S.css`
        border-left: 1px dashed ${ee};
      `},overlayRange:X=>{const ee=N.visualization.getColorByName(X?.color||Si.Jx);return S.css`
        background: ${ao.alpha(ee,.1)};
        border-left: 1px dashed ${ee};
        border-right: 1px dashed ${ee};
      `},markerTriangle:S.css`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:S.css`
      top: 100%;
      left: 0;
      position: absolute;
    `}),Ii=({data:N,timeZone:X,config:ee,children:fe})=>{const Ee=(0,A.useRef)(),[xe,Ae]=(0,A.useState)(),[We,ke]=(0,A.useState)(!1),[rt,at]=(0,A.useState)(null),Et=(0,Wd.Z)(),Tt=(0,A.useCallback)(()=>{at(null),Ee.current&&Ee.current.setSelect({top:0,left:0,width:0,height:0}),ke(!1)},[ke,at]);(0,A.useLayoutEffect)(()=>{let At=!1;ee.addHook("init",It=>{Ee.current=It;const Bt=It.hooks.setSelect;if(Bt)for(let Xt=0;Xt<Bt.length;Xt++){const Zt=Bt[Xt];Zt!==kt&&(Bt[Xt]=(...Qt)=>{!At&&Zt(...Qt)})}}),ee.addHook("syncRect",(It,Bt)=>{Et()&&Ae(Bt)});const kt=It=>{At&&(ke(!0),at({min:It.posToVal(It.select.left,"x"),max:It.posToVal(It.select.left+It.select.width,"x"),bbox:{left:It.select.left,top:0,height:It.select.height,width:It.select.width}}),At=!1)};ee.addHook("setSelect",kt),ee.setCursor({bind:{mousedown:(It,Bt,Xt)=>Zt=>(At=Zt.button===0&&(Zt.metaKey||Zt.ctrlKey),Xt(Zt),null),mouseup:(It,Bt,Xt)=>Zt=>(At&&It.select.width===0&&(It.select.left=It.cursor.left,It.select.height=It.bbox.height/window.devicePixelRatio),Xt(Zt),null)}})},[ee,Ae,Et]);const pt=(0,A.useCallback)(({coords:At})=>{if(!Ee.current||!xe||!At)return;const kt=Ee.current.posToVal(At.plotCanvas.x,"x");kt&&(at({min:kt,max:kt,bbox:{left:At.plotCanvas.x,top:0,height:xe.height,width:0}}),ke(!0))},[xe]);return A.createElement(A.Fragment,null,We&&rt&&xe&&A.createElement(Oi,{selection:rt,onDismiss:Tt,onSave:Tt,data:N,timeZone:X,style:{position:"absolute",top:`${xe.top}px`,left:`${xe.left}px`,width:`${xe.width}px`,height:`${xe.height}px`}}),fe?fe({startAnnotating:pt}):null)};var Ri=e(12115),Ko=e(66243),Bl=e(77258),Nl=e(82410),Vo=e(85419),Ai=e(63418),qr=e(8180),Kd=e(34719);const Ul=({annotation:N,timeFormatter:X,canEdit:ee,canDelete:fe,onEdit:Ee,onDelete:xe})=>{const Ae=(0,ie.wW)(Vd),We=X(N.time),ke=X(N.timeEnd);let rt=N.text;const at=N.tags;let Et="",Tt,pt,At=null;const kt=A.createElement("span",{className:Ae.time},Boolean(N.isRegion)?`${We} - ${ke}`:We);if(N.login&&N.avatarUrl&&(Tt=A.createElement("img",{className:Ae.avatar,alt:"Annotation avatar",src:N.avatarUrl})),N.alertId!==void 0&&N.newState){const It=an.Z.getStateDisplayModel(N.newState);At=A.createElement("div",{className:Ae.alertState},A.createElement("i",{className:It.stateClass},It.text)),Et=an.Z.getAlertAnnotationInfo(N)}else N.title&&(rt=N.title+"<br />"+(typeof rt=="string"?rt:""));return(ee||fe)&&(pt=A.createElement("div",{className:Ae.editControls},ee&&A.createElement(qr.h,{name:"pen",size:"sm",onClick:Ee}),fe&&A.createElement(qr.h,{name:"trash-alt",size:"sm",onClick:xe}))),A.createElement("div",{className:Ae.wrapper},A.createElement("div",{className:Ae.header},A.createElement(Xr.Lh,{justify:"space-between",align:"center",spacing:"md"},A.createElement("div",{className:Ae.meta},A.createElement("span",null,Tt,At),kt),pt)),A.createElement("div",{className:Ae.body},rt&&A.createElement("div",{dangerouslySetInnerHTML:{__html:Ai.QX.sanitize(rt)}}),Et,A.createElement(A.Fragment,null,A.createElement(Xr.Lh,{spacing:"xs",wrap:!0},at?.map((It,Bt)=>A.createElement(Kd.V,{name:It,key:`${It}-${Bt}`}))))))};Ul.displayName="AnnotationTooltip";const Vd=N=>({wrapper:S.css`
      max-width: 400px;
    `,commentWrapper:S.css`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:S.css`
      padding: ${N.spacing(.5,1)};
      border-bottom: 1px solid ${N.colors.border.weak};
      font-size: ${N.typography.bodySmall.fontSize};
      display: flex;
    `,meta:S.css`
      display: flex;
      justify-content: space-between;
    `,editControls:S.css`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:S.css`
      border-radius: 50%;
      width: 16px;
      height: 16px;
      margin-right: ${N.spacing(1)};
    `,alertState:S.css`
      padding-right: ${N.spacing(1)};
      font-weight: ${N.typography.fontWeightMedium};
    `,time:S.css`
      color: ${N.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:S.css`
      padding: ${N.spacing(1)};

      a {
        color: ${N.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),zd=6,Ls={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function Hd({annotation:N,timeZone:X,width:ee}){const{canAddAnnotations:fe,canEditAnnotations:Ee,canDeleteAnnotations:xe,...Ae}=(0,kn.R9)(),We=(0,ie.wW)(Al),ke=(0,ie.wW)(Li),[rt,at]=(0,A.useState)(!1),[Et,Tt]=(0,A.useState)(!1),[pt,At]=(0,A.useState)(null),[kt,It]=(0,A.useState)(null),[Bt,Xt]=(0,A.useState)(null),Zt=(0,A.useRef)(),Qt=(0,Fo.D)(pt,kt,Ls),dn=(0,Fo.D)(pt,Bt,Ls),Yt=(0,A.useCallback)(()=>{Tt(!0),at(!1)},[Tt,at]),En=(0,A.useCallback)(()=>{Ae.onAnnotationDelete&&Ae.onAnnotationDelete(N.id)},[N,Ae]),Sn=(0,A.useCallback)(()=>{Zt.current&&clearTimeout(Zt.current),at(!0)},[at]),xn=(0,A.useCallback)(()=>{Zt.current&&clearTimeout(Zt.current)},[]),Tn=(0,A.useCallback)(()=>{Zt.current=setTimeout(()=>{at(!1)},100)},[at]),Kn=(0,A.useCallback)(Qn=>(0,Bl.dq)(Qn,{format:Nl.U6.fullDate,timeZone:X}),[X]),Ln=(0,A.useCallback)(()=>A.createElement(Ul,{annotation:N,timeFormatter:Kn,onEdit:Yt,onDelete:En,canEdit:Ee(N.dashboardUID),canDelete:xe(N.dashboardUID)}),[Ee,xe,En,Yt,Kn,N]),ta=Boolean(N.isRegion)&&ee>zd;let Un=`${ee/2}px`,In=A.createElement("div",{className:We(N).markerTriangle,style:{left:Un,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return ta&&(In=A.createElement("div",{className:We(N).markerBar,style:{width:`${ee}px`,transform:"translate3d(0,-50%, 0)"}})),A.createElement(A.Fragment,null,A.createElement("div",{ref:At,onMouseEnter:Sn,onMouseLeave:Tn,className:ta?void 0:ke.markerWrapper,"data-testid":qe.wl.pages.Dashboard.Annotations.marker},In),rt&&A.createElement(Oa.h_,null,A.createElement("div",{ref:It,style:Qt.styles.popper,...Qt.attributes.popper,className:ke.tooltip,onMouseEnter:xn,onMouseLeave:Tn},Ln())),Et&&A.createElement(Oa.h_,null,A.createElement(Ti,{onDismiss:()=>Tt(!1),onSave:()=>Tt(!1),timeFormatter:Kn,annotation:N,ref:Xt,style:dn.styles.popper,...dn.attributes.popper})))}const Li=N=>({markerWrapper:S.css`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:S.css`
      max-width: 400px;
    `,tooltip:S.css`
      ${(0,Vo.getTooltipContainerStyles)(N)};
      padding: 0;
    `}),Bi=({annotations:N,timeZone:X,config:ee})=>{const fe=(0,ie.l4)(),Ee=(0,A.useRef)(),xe=(0,A.useRef)();(0,A.useEffect)(()=>{const ke=[];for(const rt of N)ke.push(new Ri.U(rt));return xe.current=ke,()=>{xe.current=[]}},[N]),(0,A.useLayoutEffect)(()=>{ee.addHook("init",ke=>{Ee.current=ke}),ee.addHook("draw",ke=>{if(!xe.current)return null;const rt=ke.ctx;if(!rt)return;rt.save(),rt.beginPath(),rt.rect(ke.bbox.left,ke.bbox.top,ke.bbox.width,ke.bbox.height),rt.clip();const at=(Et,Tt)=>{rt.beginPath(),rt.lineWidth=2,rt.strokeStyle=Tt,rt.setLineDash([5,5]),rt.moveTo(Et,ke.bbox.top),rt.lineTo(Et,ke.bbox.top+ke.bbox.height),rt.stroke(),rt.closePath()};for(let Et=0;Et<xe.current.length;Et++){const Tt=xe.current[Et];for(let pt=0;pt<Tt.length;pt++){const At=Tt.get(pt);if(!At.time)continue;let kt=ke.valToPos(At.time,"x",!0);const It=fe.visualization.getColorByName(At.color);if(at(kt,It),At.isRegion&&At.timeEnd){let Bt=ke.valToPos(At.timeEnd,"x",!0);at(Bt,It),rt.fillStyle=ao.alpha(It,.1),rt.rect(kt,ke.bbox.top,Bt-kt,ke.bbox.height),rt.fill()}}}rt.restore()})},[ee,fe]);const Ae=(0,A.useCallback)((ke,rt)=>{const Et=new Ri.U(ke).get(rt.fieldIndex);if(!Et.time||!Ee.current)return;let Tt=Ee.current.valToPos(Et.time,"x");return Tt<0&&(Tt=0),{x:Tt,y:Ee.current.bbox.height/window.devicePixelRatio+4}},[]),We=(0,A.useCallback)((ke,rt)=>{let at=0;const Tt=new Ri.U(ke).get(rt.fieldIndex);if(Boolean(Tt.isRegion)&&Ee.current){let At=Ee.current.valToPos(Tt.time,"x"),kt=Ee.current.valToPos(Tt.timeEnd,"x");At<0&&(At=0),kt>Ee.current.bbox.width/window.devicePixelRatio&&(kt=Ee.current.bbox.width/window.devicePixelRatio),at=kt-At}return A.createElement(Hd,{annotation:Tt,timeZone:X,width:at})},[X]);return A.createElement(Ko.T,{id:"annotations",config:ee,events:N,renderEventMarker:We,mapEventToXYCoords:Ae})};var wl=e(65788),Tr=e(17650),kd=e(65987),io=e(14391),$s=e(42044),Wl=e(30909);const Va=({data:N,config:X,onClose:ee,timeZone:fe,replaceVariables:Ee,...xe})=>{const Ae=(0,A.useRef)(),[We,ke]=(0,A.useState)(null),[rt,at]=(0,A.useState)(null),[Et,Tt]=(0,A.useState)(!1),pt=(0,A.useCallback)(()=>{Tt(!0)},[Tt]),At=(0,A.useCallback)(()=>{Tt(!1)},[Tt]),kt=(0,A.useCallback)(()=>{(0,Qr.Zp)("ContextMenuPlugin",!1,"clearing click selection"),at(null)},[at]);(0,A.useLayoutEffect)(()=>{let Bt;const Xt=Zt=>{let Qt={viewport:{x:Zt.clientX,y:Zt.clientY},plotCanvas:{x:0,y:0}};Bt&&(Qt={...Qt,plotCanvas:{x:Zt.clientX-Bt.left,y:Zt.clientY-Bt.top}}),ke(Qt)};X.addHook("syncRect",(Zt,Qt)=>{Bt=Qt}),X.addHook("init",Zt=>{const Qt=Zt.over;Ae.current=Qt||void 0,Ae.current?.addEventListener("mousedown",Xt),(0,Qr.Zp)("ContextMenuPlugin",!1,"init");let dn=!1,Yt=Array.from(Zt.root.querySelectorAll(".u-cursor-pt"));Ae.current?.addEventListener("mousedown",()=>{dn=!0}),Ae.current?.addEventListener("mousemove",()=>{dn=!1}),Ae.current?.addEventListener("mouseup",En=>{if(!dn||En.metaKey||En.ctrlKey){at(null);return}dn=!0,En.target instanceof HTMLElement&&(En.target.classList.contains("u-cursor-pt")||((0,Qr.Zp)("ContextMenuPlugin",!1,"canvas click"),at({seriesIdx:null,dataIdx:null}))),pt()}),Yt.length>0&&Yt.forEach((En,Sn)=>{En.addEventListener("click",()=>{const xn=Sn+1,Tn=Zt.cursor.idx;(0,Qr.Zp)("ContextMenuPlugin",!1,xn,Tn),at({seriesIdx:xn,dataIdx:Tn??null})})})})},[X,pt,ke,at]);const It=(0,A.useMemo)(()=>xe.defaultItems?xe.defaultItems.map(Bt=>({...Bt,items:Bt.items.map(Xt=>({...Xt,onClick:Zt=>{We&&Xt.onClick?.(Zt,{coords:We})}}))})):[],[We,xe.defaultItems]);return A.createElement(A.Fragment,null,A.createElement(wl.Global,{styles:wl.css`
        .uplot .u-cursor-pt {
          pointer-events: auto !important;
        }
      `}),Et&&We&&A.createElement(Fl,{data:N,frames:xe.frames,defaultItems:It,timeZone:fe,selection:{point:rt,coords:We},replaceVariables:Ee,onClose:()=>{kt(),At(),ee&&ee()}}))},Fl=({selection:N,timeZone:X,defaultItems:ee,replaceVariables:fe,data:Ee,...xe})=>{const Ae=(0,A.useRef)(null),We=()=>{xe.onClose&&xe.onClose()};(0,Tr.Z)(Ae,()=>{We()});const ke=Ee.fields[0];if(!ke)return null;const rt=ee?[...ee]:[];let at=()=>null;if(N.point){const{seriesIdx:Tt,dataIdx:pt}=N.point,At=ke.display;if(Tt&&pt!==null){const kt=Ee.fields[Tt],It=kt.display(kt.values[pt]);kt.config.links&&kt.config.links.length>0&&kt.getLinks&&rt.push({items:kt.getLinks({valueRowIndex:pt}).map(Xt=>({label:Xt.title,ariaLabel:Xt.title,url:Xt.href,target:Xt.target,icon:Xt.target==="_self"?"link":"external-link-alt",onClick:Xt.onClick}))}),at=()=>A.createElement(kd.b,{timestamp:At(ke.values[pt]).text,displayValue:It,seriesColor:It.color,displayName:(0,qt.CZ)(kt,Ee,xe.frames)})}}const Et=()=>rt?.map((Tt,pt)=>A.createElement(io.k,{key:`${Tt.label}${pt}`,label:Tt.label},(Tt.items||[]).map(At=>A.createElement($s.s,{key:At.label,url:At.url,label:At.label,target:At.target,icon:At.icon,active:At.active,onClick:At.onClick}))));return A.createElement(Wl.x,{renderMenuItems:Et,renderHeader:at,x:N.coords.viewport.x,y:N.coords.viewport.y,onClose:We})};var za=e(45576),Cn=e(7211);const $l=({timeZone:N,dataFrame:X,dataFrameFieldIndex:ee,config:fe,getFieldLinks:Ee,exemplarColor:xe,clickedExemplarFieldIndex:Ae,setClickedExemplarFieldIndex:We})=>{const ke=(0,ie.wW)(_d),[rt,at]=(0,A.useState)(!1),[Et,Tt]=(0,A.useState)(!1),[pt,At]=A.useState(null),[kt,It]=A.useState(null),{styles:Bt,attributes:Xt}=(0,Fo.D)(pt,kt,{modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top","left-start"]}}]}),Zt=(0,A.useRef)();(0,A.useEffect)(()=>{Ae?.fieldIndex===ee.fieldIndex&&Ae?.frameIndex===ee.frameIndex||Tt(!1)},[Ae,ee]);const Qt=()=>{const Tn=[A.createElement("rect",{fill:xe,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),A.createElement("path",{fill:xe,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),A.createElement("path",{fill:xe,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),A.createElement("rect",{fill:xe,key:"rectangle",width:"5",height:"5"}),A.createElement("path",{fill:xe,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),A.createElement("path",{fill:xe,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return Tn[ee.frameIndex%Tn.length]},dn=(0,A.useCallback)(()=>{Ae===void 0&&(Zt.current&&clearTimeout(Zt.current),at(!0))},[at,Ae]),Yt=()=>{Tt(!0)},En=(0,A.useCallback)(()=>{Zt.current=setTimeout(()=>{at(!1)},150)},[at]),Sn=(0,A.useCallback)(()=>{const Tn=X.fields.find(Un=>Un.name==="traceID")||X.fields[0],Kn=[Tn,...X.fields.filter(Un=>Tn!==Un)],Ln=Un=>(0,Bl.dq)(Un,{format:Nl.U6.fullDate,timeZone:N}),ta=()=>{Tt(!1),at(!1),We(void 0)};return A.createElement("div",{onMouseEnter:dn,onMouseLeave:En,className:ke.tooltip,ref:It,style:Bt.popper,...Xt.popper},A.createElement("div",{className:ke.wrapper},Et&&A.createElement(Cn.o,{onClick:ta}),A.createElement("div",{className:ke.body},A.createElement("div",{className:ke.header},A.createElement("span",{className:ke.title},"Exemplars")),A.createElement("div",null,A.createElement("table",{className:ke.exemplarsTable},A.createElement("tbody",null,Kn.map((Un,In)=>{const Qn=Un.values[ee.fieldIndex],oa=Un.config.links?.length?Ee(Un,ee.fieldIndex):void 0;return A.createElement("tr",{key:In},A.createElement("td",{valign:"top"},Un.name),A.createElement("td",null,A.createElement("div",{className:ke.valueWrapper},A.createElement("span",null,Un.type===tn.fS.time?Ln(Qn):Qn),oa&&A.createElement(za.Z,{links:oa}))))})))))))},[Xt.popper,X.fields,Ee,ee,dn,En,Bt.popper,ke,N,Et,We]),xn=fe.getSeries().find(Tn=>Tn.props.dataFrameFieldIndex?.frameIndex===ee.frameIndex)?.props.lineColor;return A.createElement(A.Fragment,null,A.createElement("div",{ref:At,onClick:()=>{We(ee),Yt()},onMouseEnter:dn,onMouseLeave:En,className:ke.markerWrapper,"aria-label":qe.wl.components.DataSource.Prometheus.exemplarMarker},A.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:xn},className:(0,S.cx)(ke.marble,(rt||Et)&&ke.activeMarble)},Qt())),(rt||Et)&&A.createElement(Oa.h_,null,Sn()))},_d=N=>{const X=N.isDark?N.v1.palette.dark2:N.v1.palette.white,ee=N.isDark?N.v1.palette.dark9:N.v1.palette.gray5,fe=N.isDark?N.v1.palette.black:N.v1.palette.white,Ee=N.isDark?N.v1.palette.dark3:N.v1.palette.gray6;return{markerWrapper:S.css`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:S.css`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${N.v1.palette.red};
      pointer-events: none;
    `,wrapper:S.css`
      background: ${X};
      border: 1px solid ${ee};
      border-radius: ${N.shape.borderRadius(2)};
      box-shadow: 0 0 20px ${fe};
      padding: ${N.spacing(1)};
    `,exemplarsTable:S.css`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${N.components.panel.background};
      }

      tr {
        background-color: ${N.colors.background.primary};

        &:nth-child(even) {
          background-color: ${Ee};
        }
      }
    `,valueWrapper:S.css`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${N.spacing(1)};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:S.css`
      background: none;
      padding: 0;
      overflow-y: auto;
      max-height: 95vh;
    `,header:S.css`
      background: ${ee};
      padding: 6px 10px;
      display: flex;
    `,title:S.css`
      font-weight: ${N.typography.fontWeightMedium};
      padding-right: ${N.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:S.css`
      font-weight: ${N.typography.fontWeightMedium};
      border-radius: ${N.shape.borderRadius(2)};
      overflow: hidden;
    `,marble:S.css`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:S.css`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},Kl=({exemplars:N,timeZone:X,getFieldLinks:ee,config:fe,visibleSeries:Ee})=>{const xe=(0,A.useRef)(),[Ae,We]=(0,A.useState)();(0,A.useLayoutEffect)(()=>{fe.addHook("init",at=>{xe.current=at})},[fe]);const ke=(0,A.useCallback)((at,Et)=>{const Tt=at.fields.find(Xt=>Xt.name===tn.Ls),pt=at.fields.find(Xt=>Xt.name===tn.M5);if(!Tt||!pt||!xe.current)return;const At=Object.keys(xe.current.scales).find(Xt=>!["x","y"].some(Zt=>Zt===Xt))??Sr.j,kt=xe.current.scales[At].min,It=xe.current.scales[At].max;let Bt=pt.values[Et.fieldIndex];return kt!=null&&Bt<kt&&(Bt=kt),It!=null&&Bt>It&&(Bt=It),{x:xe.current.valToPos(Tt.values[Et.fieldIndex],"x"),y:xe.current.valToPos(Bt,At)}},[]),rt=(0,A.useCallback)((at,Et)=>{const Tt=Ee!==void 0?Ni(Ee,at,Et):!0,pt=Ee!==void 0?Po(at,Et,Ee):void 0;return Tt?A.createElement($l,{setClickedExemplarFieldIndex:We,clickedExemplarFieldIndex:Ae,timeZone:X,getFieldLinks:ee,dataFrame:at,dataFrameFieldIndex:Et,config:fe,exemplarColor:pt}):A.createElement(A.Fragment,null)},[fe,X,ee,Ee,We,Ae]);return A.createElement(Ko.T,{config:fe,id:"exemplars",events:N,renderEventMarker:rt,mapEventToXYCoords:ke})},Gd=(N,X)=>{const ee=N.series.filter(Ee=>Ee.props.show),fe=[];return X?.length&&ee.forEach(Ee=>{const xe=Ee.props?.dataFrameFieldIndex?.frameIndex,Ae=Ee.props?.dataFrameFieldIndex?.fieldIndex;if(xe!==void 0&&Ae!==void 0){const We=X[xe]?.fields[Ae];We?.labels&&fe.push({labels:We.labels,color:Ee.props?.lineColor??""})}}),{labels:fe,totalSeriesCount:N.series.length}},Po=(N,X,ee)=>{let fe;return ee.labels.some(Ee=>{const xe=Object.keys(Ee.labels),Ae=N.fields.filter(We=>xe.find(ke=>ke===We.name));return Ae.length&&Ae.every((ke,rt,at)=>{const Et=ke.values[X.fieldIndex];return Ee.labels[ke.name]===Et})?(fe=Ee.color,!0):!1}),fe},Ni=(N,X,ee)=>{let fe=!1;return N.labels.length===N.totalSeriesCount?fe=!0:N.labels.some(Ee=>{const xe=Object.keys(Ee.labels);if(Object.keys(Ee.labels).length===0)fe=!0;else{const Ae=X.fields.filter(We=>xe.find(ke=>ke===We.name));Ae.length&&(fe=N.labels.some(We=>Object.keys(We.labels).every(ke=>{const rt=We.labels[ke];return Ae.find(at=>at.values[ee.fieldIndex]===rt)})))}return fe}),fe},Pr=({config:N,onChangeTimeRange:X})=>{const ee=(0,A.useRef)(),[fe,Ee]=(0,A.useState)([]),[xe,Ae]=(0,A.useState)();if((0,A.useLayoutEffect)(()=>{N.addHook("init",pt=>{ee.current=pt}),N.addHook("setScale",pt=>{Ee(pt.data?.[0]??[]),Ae(pt.scales.x??void 0)})},[N]),fe.length<2||!X||!xe||!xe.time||!xe.min||!xe.max)return null;let We=0,ke=fe.length-1;for(;We<=ke&&fe[We]==null;)We++;for(;ke>=0&&fe[ke]==null;)ke--;const rt=fe[We],at=fe[ke],Et=xe.min,Tt=xe.max;return rt==null||at==null||rt<=Tt&&at>=Et?null:A.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},A.createElement("div",null,A.createElement("div",null,"Data outside time range"),A.createElement(Ce.zx,{onClick:pt=>X({from:rt,to:at}),variant:"secondary","data-testid":"time-series-zoom-to-data"},"Zoom to data")))};Pr.displayName="OutsideRangePlugin";var Vl=e(86979),Ui=e(53004),Yd=e.n(Ui);const Co=({step:N,y:X,dragBounds:ee,mapPositionToValue:fe,formatValue:Ee,onChange:xe})=>{const Ae=(0,ie.l4)();let We=X,ke="none";X<(ee.top??0)&&(ke="top"),X>(ee.bottom??0)+22&&(ke="bottom"),ke==="bottom"&&(We=ee.bottom??X),ke==="top"&&(We=ee.top??X);const rt=typeof xe!="function",at=(0,ie.wW)(At=>jd(At,N,ke,rt)),[Et,Tt]=(0,A.useState)(N.value),pt=(0,A.useMemo)(()=>Ae.colors.getContrastText(Ae.visualization.getColorByName(N.color)),[N.color,Ae]);return A.createElement(Yd(),{axis:"y",grid:[1,1],disabled:rt,onStop:rt?w.noop:(At,kt)=>(xe(fe(kt.lastY)),!1),onDrag:(At,kt)=>Tt(fe(kt.lastY)),position:{x:0,y:We},bounds:ee},A.createElement("div",{className:at.handle,style:{color:pt}},A.createElement("span",{className:at.handleText},Ee(Et))))};Co.displayName="ThresholdDragHandle";const jd=(N,X,ee,fe)=>{const Ee=N.visualization.getColorByName(X.color),xe=zl(ee),Ae=ee!=="none";return{handle:S.css`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${Ee};
      cursor: ${fe?"initial":"grab"};
      border-top-right-radius: ${N.shape.borderRadius(1)};
      border-bottom-right-radius: ${N.shape.borderRadius(1)};
      ${Ae&&S.css`
        margin-top: 0;
        border-radius: ${N.shape.borderRadius(1)};
      `}
      background: ${Ee};
      font-size: ${N.typography.bodySmall.fontSize};
      &:before {
        ${xe};
      }
    `,handleText:S.css`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function zl(N){const X=N==="none",ee=fe=>S.css`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${fe}px;
    border-right-color: inherit;
    border-top: ${fe}px solid transparent;
    border-bottom: ${fe}px solid transparent;
  `;return X?S.css`
      ${ee(9)};
      left: -9px;
    `:N==="top"?S.css`
      ${ee(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:N==="bottom"?S.css`
      ${ee(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const Hl=60,wi=({config:N,fieldConfig:X,onThresholdsChange:ee})=>{const fe=(0,A.useRef)(),[Ee,xe]=(0,A.useState)(0);(0,A.useLayoutEffect)(()=>{N.setPadding([0,Hl,0,0]),N.addHook("init",We=>{fe.current=We}),N.addHook("draw",()=>{xe(We=>We+1)})},[N]);const Ae=(0,A.useMemo)(()=>{const We=fe.current;if(!We)return null;const ke=X.defaults.thresholds;if(!ke)return null;const rt=(0,Vl.z)(X.defaults),at=X.defaults.decimals,Et=[];for(let Tt=0;Tt<ke.steps.length;Tt++){const pt=ke.steps[Tt],At=We.valToPos(pt.value,rt);if(Number.isNaN(At)||!Number.isFinite(At))continue;const kt=We.bbox.height/window.devicePixelRatio,Bt=typeof ee=="function"?Zt=>{const Qt=[...ke.steps.slice(0,Tt),...ke.steps.slice(Tt+1),{...ke.steps[Tt],value:Zt}].sort((dn,Yt)=>dn.value-Yt.value);ee({...ke,steps:Qt})}:void 0,Xt=A.createElement(Co,{key:`${pt.value}-${Tt}`,step:pt,y:At,dragBounds:{top:0,bottom:kt},mapPositionToValue:Zt=>We.posToVal(Zt,rt),formatValue:Zt=>(0,Rs.Cf)(rt)(Zt,at).text,onChange:Bt});Et.push(Xt)}return Et},[Ee,X,ee]);return fe.current?A.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(fe.current.bbox.left+fe.current.bbox.width)/window.devicePixelRatio}px`,top:`${fe.current.bbox.top/window.devicePixelRatio}px`,width:`${Hl}px`,height:`${fe.current.bbox.height/window.devicePixelRatio}px`}},Ae):null};wi.displayName="ThresholdControlsPlugin";var kl=e(88971),_l=e(49052),Qd=e(45778),Zd=e(45389);function Wi(N,X,ee,fe){if(!N?.length)return null;let Ee=fe!=null;fe!=null&&fe>0&&(N=[{...N[0],fields:[N[0].fields[fe],...N[0].fields.filter((We,ke)=>ke!==fe)]}]);for(let We of N)for(let ke of We.fields)ke.type===tn.fS.time&&typeof ke.values[0]!="number"&&(ke.values=(0,_l.p8)(ke,{destinationType:tn.fS.time}).values);let xe;const Ae=[];for(let We of N){const ke=[];let rt=!1,at=!1,Et=Ee?We:(0,Qd.w)({frame:We,refFieldPseudoMin:ee?.from.valueOf(),refFieldPseudoMax:ee?.to.valueOf()});const Tt=(0,Zd.I)(Et).fields;for(let pt=0;pt<Tt?.length;pt++){const At=Tt[pt];switch(At.type){case tn.fS.time:rt=!0,ke.push(At);break;case tn.fS.number:at=Ee?pt>0:!0,xe={...At,values:At.values.map(Bt=>Number.isFinite(Bt)||Bt==null?Bt:null)},ke.push(xe);break;case tn.fS.string:xe={...At,values:At.values},ke.push(xe);break;case tn.fS.boolean:at=!0;const kt=At.config?.custom??{},It={...At.config,max:1,min:0,custom:kt};kt.lineInterpolation!==yt.KC.StepBefore&&(kt.lineInterpolation=yt.KC.StepAfter),xe={...At,config:It,type:tn.fS.number,values:At.values.map(Bt=>Bt==null?Bt:Boolean(Bt)?1:0)},(0,Rs.br)(It.unit)||(It.unit="bool",xe.display=(0,Ys.U_)({field:xe,theme:X})),ke.push(xe);break}}(Ee||rt)&&at&&Ae.push({...We,length:Et.length,fields:ke})}return Ae.length?(Jd(Ae,X,0),Ae):null}const Jd=(N,X,ee)=>{let fe=0;N.forEach(Ee=>{Ee.fields.forEach((xe,Ae)=>{Ae!==ee&&(xe.type===tn.fS.number||xe.type===tn.fS.boolean)&&(xe.state={...xe.state,seriesIndex:fe++},xe.display=(0,Ys.U_)({field:xe,theme:X}))})})};function Fi(N,X){return!N||!N.length?[X]:N.map(ee=>ee?.length?ee:X)}function Gl(N,X,ee,fe){return N.fields.forEach(Ee=>{if(Ee.state?.origin?.frameIndex===void 0||X[Ee.state?.origin?.frameIndex]===void 0)return;const xe=[];for(const We of X[Ee.state?.origin?.frameIndex].fields)if(We.type===tn.fS.string)if(Ee.values instanceof kl.o){const ke={...We};ke.values=new kl.o(We.values,Ee.values.getOrderArray()),xe.push(ke)}else xe.push(We);const Ae={fields:[...N.fields,...xe],length:N.fields.length+xe.length};Ee.getLinks=(0,bi.oB)(Ae,Ee,Ee.state.scopedVars,ee,fe)}),N}var js=(N=>(N.Candles="candles",N.CandlesVolume="candles+volume",N.Volume="volume",N))(js||{}),zo=(N=>(N.Candles="candles",N.OHLCBars="ohlcbars",N))(zo||{}),Cr=(N=>(N.CloseClose="close-close",N.OpenClose="open-close",N))(Cr||{});const Ho={down:"red",flat:"gray",up:"green"},eo={...{candleStyle:"candles",colorStrategy:"open-close",colors:{down:"red",up:"green",flat:"gray"},fields:{},includeAllFields:!1,mode:"candles+volume"},legend:{displayMode:yt.jK.List,showLegend:!0,placement:"bottom",calcs:[]}},Dr={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function Xd(N,X,ee){const fe=(0,lr.findField)(N,ee[X.key]);if(!fe)for(const Ee of N.fields){const xe=(0,qt.CZ)(Ee,N).toLowerCase();if(X.defaults.includes(xe)||X.defaults.includes(Ee.name))return Ee}return fe}function Na(N,X,ee,fe){if(!N?.length)return null;const Ee=X.fields??{},xe=N.length===1?(0,fo.Y3)(N[0],N[0].fields.findIndex(pt=>pt.type===tn.fS.time)):(0,fo._9)({frames:N});if(!xe?.length)return null;const Ae={aligned:xe,frame:xe,names:{}},We=Wi([xe],ee,fe);if(!We)return null;const ke=Ae.frame=We[0],rt=ke.fields.findIndex(pt=>pt.type===tn.fS.time);if(rt<0)return null;const at=new Set;for(const pt of Object.values(Dr)){const At=Xd(ke,pt,Ee);At&&(Ae[pt.key]=At,at.add(At))}if(!Ae.open&&!Ae.close&&(Ae.open=ke.fields.find(pt=>pt.type===tn.fS.number),Ae.open&&at.add(Ae.open)),Ae.open&&!Ae.close&&!Ee.close){const pt=Ae.open.values.slice(1);pt.push(pt[pt.length-1]),Ae.close={...Ae.open,values:pt,name:"Next open",state:void 0},at.add(Ae.close),ke.fields.push(Ae.close),Ae.autoOpenClose=!0}if(Ae.close&&!Ae.open&&!Ee.open){const pt=Ae.close.values.slice();pt.unshift(pt[0]),pt.length=ke.length,Ae.open={...Ae.close,values:pt,name:"Previous close",state:void 0},at.add(Ae.open),ke.fields.push(Ae.open),Ae.autoOpenClose=!0}!Ae.high&&!Ee.high&&(Ae.high=Ae.open),!Ae.low&&!Ee.low&&(Ae.low=Ae.open),X.mode===js.Volume?(Ae.high&&(Ae.high!==Ae.open&&at.delete(Ae.high),Ae.high=void 0),Ae.low&&(Ae.low!==Ae.open&&at.delete(Ae.low),Ae.low=void 0)):X.mode===js.Candles&&Ae.volume&&(at.delete(Ae.volume),Ae.volume=void 0);for(const pt of Object.values(Dr)){const At=Ae[pt.key];At&&(Ae.names[pt.key]=(0,qt.CZ)(At,Ae.frame))}const Et=ke.fields[rt],Tt=[Et];X.includeAllFields?Tt.push(...ke.fields.filter(pt=>pt!==Et)):Tt.push(...at),Ae.frame={...Ae.frame,fields:Tt};for(let pt=0;pt<Ae.frame.fields.length;pt++){const At=Ae.frame.fields[pt];At.state={...At.state,seriesIndex:pt-1,origin:{fieldIndex:pt,frameIndex:0}}}return Ae}const{alpha:$i}=ao;function qd(N){let{mode:X,candleStyle:ee,fields:fe,colorStrategy:Ee,upColor:xe,downColor:Ae,flatColor:We,volumeAlpha:ke,flatAsUp:rt=!0}=N;const at=X!==js.Volume&&fe.high!=null&&fe.low!=null,Et=at&&ee===zo.Candles,Tt=X!==js.Candles&&fe.volume!=null;function pt(Qt,dn,Yt,En,Sn){return Qt>0?Yt:Qt<0?En:Sn?Yt:dn}let At=0,kt=fe.open,It=fe.high,Bt=fe.low,Xt=fe.close,Zt=fe.volume;return Qt=>{let dn,Yt,En,Sn,xn,Tn;at&&(En=new Path2D,Yt=new Path2D,dn=new Path2D),Tt&&(Sn=new Path2D,xn=new Path2D,Tn=new Path2D);let Kn=new Path2D,Ln=Qt.ctx,ta=Qt.data[At],Un=Qt.data[kt],In=Qt.data[Xt],Qn=at?Qt.data[It]:null,oa=at?Qt.data[Bt]:null,$a=Tt?Qt.data[Zt]:null,ka=Zt!=null?Math.round(Qt.valToPos(0,Qt.series[Zt].scale,!0)):null,[Aa,_a]=Qt.series[0].idxs,Gn=Qt.data[0],Nn=Un,Hn=Qt.bbox.width;if(Gn.length>1){let pa=null;for(let Mn=0,Bn=1/0;Mn<Gn.length;Mn++)if(Nn[Mn]!==void 0){if(pa!=null){let wn=Math.abs(Gn[Mn]-Gn[pa]);wn<Bn&&(Bn=wn,Hn=Math.abs(Qt.valToPos(Gn[Mn],"x",!0)-Qt.valToPos(Gn[pa],"x",!0)))}pa=Mn}}let qn=Math.round(.6*Hn),ya=2,na=2;qn<=12&&(ya=na=1);let Ua=Math.floor(qn/2);for(let pa=Aa;pa<=_a;pa++){let Mn=Math.round(Qt.valToPos(ta[pa],"x",!0)),Bn=pa===Aa?0:Math.sign(In[pa]-In[pa-1]),wn=Math.sign(In[pa]-Un[pa]);if(Tt){let Zn=pt(Ee===Cr.CloseClose?Bn:wn,Tn,xn,Sn,pa===Aa&&Cr.CloseClose?!1:rt),Jn=Math.round(Qt.valToPos($a[pa],Qt.series[Zt].scale,!0));Zn.rect(Mn-Ua,Jn,qn,ka-Jn)}if(at){let Zn=pt(Ee===Cr.CloseClose?Bn:wn,En,Yt,dn,pa===Aa&&Cr.CloseClose?!1:rt),Jn=Math.round(Qt.valToPos(Qn[pa],Qt.series[It].scale,!0)),Pa=Math.round(Qt.valToPos(oa[pa],Qt.series[Bt].scale,!0));Zn.rect(Mn-Math.floor(ya/2),Jn,ya,Pa-Jn);let ua=Math.round(Qt.valToPos(Un[pa],Qt.series[kt].scale,!0)),Qa=Math.round(Qt.valToPos(In[pa],Qt.series[Xt].scale,!0));if(Et){let wa=Math.min(ua,Qa),br=Math.max(ua,Qa),Ds=Math.max(1,br-wa);Zn.rect(Mn-Ua,wa,qn,Ds),Ee===Cr.CloseClose&&wn>=0&&Ds>na*2&&Kn.rect(Mn-Ua+na,wa+na,qn-na*2,Ds-na*2)}else Zn.rect(Mn-Ua,ua,Ua,ya),Zn.rect(Mn,Qa,Ua,ya)}}Ln.save(),Ln.rect(Qt.bbox.left,Qt.bbox.top,Qt.bbox.width,Qt.bbox.height),Ln.clip(),Tt&&(Ln.fillStyle=$i(xe,ke),Ln.fill(xn),Ln.fillStyle=$i(Ae,ke),Ln.fill(Sn),Ln.fillStyle=$i(We,ke),Ln.fill(Tn)),at&&(Ln.fillStyle=xe,Ln.fill(Yt),Ln.fillStyle=Ae,Ln.fill(dn),Ln.fillStyle=We,Ln.fill(En),Ln.globalCompositeOperation="destination-out",Ln.fill(Kn)),Ln.restore()}}const Cs=({data:N,id:X,timeRange:ee,timeZone:fe,width:Ee,height:xe,options:Ae,fieldConfig:We,onChangeTimeRange:ke,replaceVariables:rt})=>{const{sync:at,canAddAnnotations:Et,onThresholdsChange:Tt,canEditThresholds:pt,showThresholds:At,onSplitOpen:kt}=(0,kn.R9)(),It=(Sn,xn)=>(0,yo.a_)({field:Sn,rowIndex:xn,splitOpenFn:kt,range:ee}),Bt=(0,ie.l4)(),Xt=(0,A.useMemo)(()=>Na(N.series,Ae,Bt,ee),[N.series,Ae,Bt,ee]),{renderers:Zt,tweakScale:Qt,tweakAxis:dn,shouldRenderPrice:Yt}=(0,A.useMemo)(()=>{let Sn=(na,Ua)=>na,xn=(na,Ua)=>na,Tn={renderers:[],tweakScale:Sn,tweakAxis:xn,shouldRenderPrice:!1};if(!Xt)return Tn;const Kn=Xt.names;if(!Object.keys(Kn).length)return Tn;const{mode:Ln,candleStyle:ta,colorStrategy:Un}=Ae,In={...Ho,...Ae.colors};let{open:Qn,high:oa,low:$a,close:ka,volume:Aa}=Kn;if(Qn==null||ka==null)return Tn;let _a=.5,Gn=-1,Nn=!1;if(Aa!=null&&Ln!==js.Candles){let na=Xt.volume;if(na!=null){Nn=!0;let{fillOpacity:Ua}=na.config.custom;Ua&&(_a=Ua/100),Ln!==js.Volume&&(na.config={...na.config},na.config.unit="short",na.display=(0,Ys.U_)({field:na,theme:Ke.vc.theme2}),xn=(pa,Mn)=>{if(Mn.name===Xt.volume?.name){let Bn=(wn,Zn)=>{let Jn=[],Pa=wn.series[Gn].max;for(let ua=0;ua<Zn.length&&(Jn.push(Zn[ua]),!(Zn[ua]>Pa));ua++);return Jn};pa.space=20,pa.filter=Bn,pa.ticks={...pa.ticks,filter:Bn}}return pa},Sn=(pa,Mn)=>(Mn.name===Xt.volume?.name&&(pa.range=(Bn,wn,Zn)=>[0,Zn*7]),pa))}}let Hn=Ln!==js.Volume&&oa!=null&&$a!=null;if(!Hn&&!Nn)return Tn;let qn={},ya=[];return Hn?qn={open:Qn,high:oa,low:$a,close:ka}:ya.push(Qn,ka),Nn&&(qn.volume=Aa,qn.open=Qn,qn.close=ka),{shouldRenderPrice:Hn,renderers:[{fieldMap:qn,indicesOnly:ya,init:(na,Ua)=>{Gn=Ua.volume,na.addHook("drawAxes",qd({mode:Ln,fields:Ua,upColor:Ke.vc.theme2.visualization.getColorByName(In.up),downColor:Ke.vc.theme2.visualization.getColorByName(In.down),flatColor:Ke.vc.theme2.visualization.getColorByName(In.flat),volumeAlpha:_a,colorStrategy:Un,candleStyle:ta,flatAsUp:!0}))}}],tweakScale:Sn,tweakAxis:xn}},[Ae,N.structureRev,N.series.length]);if(!Xt)return A.createElement(fa.Z,{panelId:X,fieldConfig:We,data:N,needsTimeField:!0,needsNumberField:!0});if(Yt)for(let Sn in Zt[0].fieldMap){let xn=Xt[Sn];xn.config={...xn.config,custom:{...xn.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const En=Boolean(Et&&Et());return A.createElement(Mi.p,{frames:[Xt.frame],structureRev:N.structureRev,timeRange:ee,timeZone:fe,width:Ee,height:xe,legend:Ae.legend,renderers:Zt,tweakAxis:dn,tweakScale:Qt,options:Ae},(Sn,xn)=>(xn.fields.forEach(Tn=>{Tn.getLinks=(0,bi.oB)(xn,Tn,Tn.state.scopedVars,rt,fe)}),A.createElement(A.Fragment,null,A.createElement(Wo.R,{config:Sn,onZoom:ke}),A.createElement(ys.i,{data:xn,config:Sn,mode:yt.f3.Multi,sync:at,timeZone:fe}),N.annotations&&A.createElement(Bi,{annotations:N.annotations,config:Sn,timeZone:fe}),En?A.createElement(Ii,{data:xn,timeZone:fe,config:Sn},({startAnnotating:Tn})=>A.createElement(Va,{data:xn,config:Sn,timeZone:fe,replaceVariables:rt,defaultItems:En?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Kn,Ln)=>{Ln&&Tn({coords:Ln.coords})}}]}]:[]})):A.createElement(Va,{data:xn,config:Sn,timeZone:fe,replaceVariables:rt,defaultItems:[]}),N.annotations&&A.createElement(Kl,{config:Sn,exemplars:N.annotations,timeZone:fe,getFieldLinks:It}),(pt&&Tt||At)&&A.createElement(wi,{config:Sn,fieldConfig:We,onThresholdsChange:pt?Tt:void 0}),A.createElement(Pr,{config:Sn,onChangeTimeRange:ke}))))};class eu{getSuggestionsForData(X){const{dataSummary:ee}=X;if(!X.data?.series||!ee.hasData||ee.timeFieldCount<1||ee.numberFieldCount<2||ee.numberFieldCount>10)return;const fe=Na(X.data.series,eo,be.v.theme2);if(!fe||fe.open===fe.high&&fe.open===fe.low)return;X.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Ma.y.Candlestick,options:eo,fieldConfig:{defaults:{},overrides:[]},score:fe.autoOpenClose?un._.Good:un._.Best})}}const tu=[{label:"Candles",value:js.Candles},{label:"Volume",value:js.Volume},{label:"Both",value:js.CandlesVolume}],nu=[{label:"Candles",value:zo.Candles},{label:"OHLC Bars",value:zo.OHLCBars}],mg=[{label:"Since Open",value:Cr.OpenClose},{label:"Since Prior Close",value:Cr.CloseClose}],au=N=>N.type===tn.fS.number;function lo(N,X,ee){let fe="Auto ";if(ee){const Ee=ee[X.key];Ee?.config?(fe+="= "+(0,qt.CZ)(Ee),Ee===ee?.open&&X.key!=="open"&&(fe+=` (${X.defaults.join(",")})`)):fe+=`(${X.defaults.join(",")})`}N.addFieldNamePicker({path:`fields.${X.key}`,name:X.name,description:X.description,settings:{filter:au,placeholderText:fe}})}const su=new ue.c(Cs).useFieldConfig((0,Lr.F)(Lr.r)).setPanelOptions((N,X)=>{const ee=X.options??eo,fe=Na(X.data,ee,be.v.theme2);N.addRadio({path:"mode",name:"Mode",description:"",defaultValue:eo.mode,settings:{options:tu}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:eo.candleStyle,settings:{options:nu},showIf:Ee=>Ee.mode!==js.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:eo.colorStrategy,settings:{options:mg}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:Ho.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:Ho.down}),lo(N,Dr.open,fe),ee.mode!==js.Volume&&(lo(N,Dr.high,fe),lo(N,Dr.low,fe)),lo(N,Dr.close,fe),ee.mode!==js.Candles&&lo(N,Dr.volume,fe),N.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:eo.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),ba.J(N)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new eu);var Yl=e(49187),jl=e(61962),Ql=e(19349),ru=e(69155);const ou=N=>({dashlistSectionHeader:S.css`
    padding: ${N.spacing(.25,1)};
    margin-right: ${N.spacing(1)};
  `,dashlistSection:S.css`
    margin-bottom: ${N.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:S.css`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${N.colors.border.weak};
    margin-right: ${N.spacing(1)};
    padding: ${N.spacing(1)};

    &:hover {
      a {
        color: ${N.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistStar:S.css`
    align-self: center;
    margin-right: 0px;
    color: ${N.colors.secondary.text};
    z-index: 1;
  `,dashlistFolder:S.css`
    color: ${N.colors.text.secondary};
    font-size: ${N.typography.bodySmall.fontSize};
    line-height: ${N.typography.body.lineHeight};
  `,dashlistTitle:S.css`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:S.css`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:S.css`
    position: relative;
    list-style: none;
  `,gridContainer:S.css`
    display: grid;
    gap: ${N.spacing(1)};
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    list-style: none;
    margin-bottom: ${N.spacing(1)};
  `});async function iu(N,X){let ee=Promise.resolve([]);if(N.showStarred){const at={limit:N.maxItems,starred:"true"};ee=(0,Ie.i)().search(at)}let fe=Promise.resolve([]),Ee=[];if(N.showRecentlyViewed){let at=await Ve.Z.getDashboardOpened();Ee=(0,w.take)(at,N.maxItems),fe=(0,Ie.i)().search({dashboardUIDs:Ee,limit:N.maxItems})}let xe=Promise.resolve([]);if(N.showSearch){const at={limit:N.maxItems,query:X(N.query,{},"text"),folderIds:N.folderId,tag:N.tags.map(Et=>X(Et,{},"text")),type:"dash-db"};xe=(0,Ie.i)().search(at)}const[Ae,We,ke]=await Promise.all([ee,xe,fe]);let rt=new Map;for(const at of Ee){const Et=ke.find(Tt=>Tt.uid===at);Et&&rt.set(at,{...Et,isRecent:!0})}return We.forEach(at=>{at.uid&&(rt.has(at.uid)?rt.get(at.uid).isSearchResult=!0:rt.set(at.uid,{...at,isSearchResult:!0}))}),Ae.forEach(at=>{at.uid&&(rt.has(at.uid)?rt.get(at.uid).isStarred=!0:rt.set(at.uid,{...at,isStarred:!0}))}),rt}function lu(N){const[X,ee]=(0,A.useState)(new Map),fe=(0,ct.useDispatch)();(0,A.useEffect)(()=>{iu(N.options,N.replaceVariables).then(kt=>{ee(kt)})},[N.options,N.replaceVariables,N.renderCounter]);const Ee=async(kt,It)=>{const{uid:Bt,title:Xt,url:Zt}=It;kt.preventDefault(),kt.stopPropagation();const Qt=await(0,cn.h4)().starDashboard(It.uid,It.isStarred),dn=new Map(X);dn.set(It?.uid??"",{...It,isStarred:Qt}),ee(dn),fe((0,jl.OQ)({id:Bt??"",title:Xt,url:Zt,isStarred:Qt}))},[xe,Ae,We]=(0,A.useMemo)(()=>{const kt=[...X.values()];return[kt.filter(It=>It.isStarred).sort((It,Bt)=>It.title.localeCompare(Bt.title)),kt.filter(It=>It.isRecent),kt.filter(It=>It.isSearchResult).sort((It,Bt)=>It.title.localeCompare(Bt.title))]},[X]),{showStarred:ke,showRecentlyViewed:rt,showHeadings:at,showSearch:Et}=N.options,Tt=[{header:"Starred dashboards",dashboards:xe,show:ke},{header:"Recently viewed dashboards",dashboards:Ae,show:rt},{header:"Search",dashboards:We,show:Et}],pt=(0,ie.wW)(ou),At=kt=>A.createElement("ul",null,kt.map(It=>{let Bt=It.url,Xt={};if(N.options.keepTime){const Zt=(0,Ql.$t)().timeRangeForUrl();Xt.from=Zt.from,Xt.to=Zt.to}return N.options.includeVars&&(Xt={...Xt,...(0,ru.c)()}),Bt=Yl.Cj.appendQueryToUrl(Bt,Yl.Cj.toUrlParams(Xt)),Bt=(0,Ke.iE)().disableSanitizeHtml?Bt:Ai.QX.sanitizeUrl(Bt),A.createElement("li",{className:pt.dashlistItem,key:`dash-${It.uid}`},A.createElement("div",{className:pt.dashlistLink},A.createElement("div",{className:pt.dashlistLinkBody},A.createElement("a",{className:pt.dashlistTitle,href:Bt},It.title),It.folderTitle&&A.createElement("div",{className:pt.dashlistFolder},It.folderTitle)),A.createElement(cu,{"aria-label":`Star dashboard "${It.title}".`,className:pt.dashlistStar,enabled:{name:"favorite",type:"mono"},disabled:{name:"star",type:"default"},checked:It.isStarred,onClick:Zt=>Ee(Zt,It)})))}));return A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Tt.map(({show:kt,header:It,dashboards:Bt},Xt)=>kt&&A.createElement("div",{className:pt.dashlistSection,key:`dash-group-${Xt}`},at&&A.createElement("h6",{className:pt.dashlistSectionHeader},It),At(Bt))))}function cu({enabled:N,disabled:X,checked:ee,onClick:fe,className:Ee,"aria-label":xe,...Ae}){const We=(0,A.useCallback)(Et=>{Et.preventDefault(),Et.stopPropagation(),fe?.(Et)},[fe]),rt={...Ae,...ee?N:X},at=(0,ie.wW)(du);return A.createElement("label",{className:at.wrapper},A.createElement("input",{type:"checkbox",defaultChecked:ee,onClick:We,className:at.checkBox,"aria-label":xe}),A.createElement(jt.J,{className:(0,S.cx)(at.icon,Ee),...rt}))}const du=(0,sn.B)(N=>({wrapper:(0,S.css)({display:"flex",alignSelf:"center",cursor:"pointer",zIndex:1}),checkBox:(0,S.css)({appearance:"none","&:focus-visible + *":{...(0,Vo.getFocusStyles)(N),borderRadius:N.shape.borderRadius(1)}}),icon:(0,S.css)({marginBottom:0,verticalAlign:"baseline",display:"flex"})})),Br={includeVars:!1,keepTime:!1,maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},uu=new ue.c(lu).setPanelOptions(N=>{N.addBooleanSwitch({path:"keepTime",name:"Include current time range",defaultValue:Br.keepTime}).addBooleanSwitch({path:"includeVars",name:"Include current template variable values",defaultValue:Br.includeVars}).addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:Br.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:Br.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:Br.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:Br.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:Br.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:Br.query}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:void 0,editor:function({value:ee,onChange:fe}){return A.createElement(Kt,{initialFolderId:ee,onChange:Ee=>fe(Ee?.id),extraFolders:[Ot,Ft]})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:Br.tags,editor(X){return A.createElement(Ye.B,{tags:X.value,onChange:X.onChange})}})}).setMigrationHandler(N=>{const X={showStarred:N.options.showStarred??N.starred,showRecentlyViewed:N.options.showRecentlyViewed??N.recent,showSearch:N.options.showSearch??N.search,showHeadings:N.options.showHeadings??N.headings,maxItems:N.options.maxItems??N.limit,query:N.options.query??N.query,folderId:N.options.folderId??N.folderId,tags:N.options.tags??N.tags};return parseFloat(N.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(Ee=>delete N[Ee]),X});var nr=e(51385),fg=e(50387);const gg=({onBlur:N,placeholder:X})=>{const ee=(0,A.useRef)(null);(0,A.useEffect)(()=>{ee.current&&ee.current.focus()});const fe=Ee=>{Ee.key==="Enter"&&Ee.currentTarget.blur()};return A.createElement("input",{type:"text",placeholder:X,onBlur:N,ref:ee,onKeyDown:fe,"data-testid":"column-input"})},mu=({divStyle:N,onColumnInputBlur:X})=>{const[ee,fe]=(0,A.useState)(!1),Ee=()=>{fe(!0)},xe=Ae=>{const We=Ae.target.value;We&&X(We),fe(!1)};return A.createElement("div",{className:N},ee?A.createElement(gg,{placeholder:"Column Name",onBlur:xe}):A.createElement("button",{onClick:Ee},"+"))};var rs=e(97456);const gn=()=>be.v.featureToggles.enableDatagridEditing,Ts="600 13px Inter",Zl="400 13px Inter",Jl=document.createElement("canvas"),Xl=20,fu=300,gu=65,pu="both",ko="number",Ki={isContextMenuOpen:!1},hu={isInputOpen:!1},vu={name:"A",fields:[],length:0},Hr={kind:nr.p6.Text,data:"",allowOverlay:!0,readonly:!1,displayData:""},to={columns:nr.EV.empty(),rows:nr.EV.empty()},Eu={sticky:!1,tint:!0},Do={fill:!0,sticky:!1};async function Nr(N,X){if(X&&gn()){for(let ee=0;ee<N.fields.length;ee++)delete N.fields[ee].config.displayName,delete N.fields[ee].config.displayNameFromDS;return await X([N])}return!1}const ql=(N,X=!1)=>{const ee=Jl.getContext("2d");return ee.font=X?Ts:Zl,ee.measureText(N).width},_o=N=>Math.max(ql(N.name,!0)+gu,Math.min(fu,N.values.toArray().reduce((X,ee)=>{const fe=ql(ee?.toString()??"");return fe>X?fe:X},0)+Xl)),Go=(N,X,ee=!1)=>{const fe={...N,fields:N.fields.map(Ee=>({...Ee,values:Ee.values.slice()}))};for(const Ee of fe.fields){const xe=Ee.values.toArray();for(let Ae=X.length-1;Ae>=0;Ae--)ee?xe.splice(X[Ae],1):xe.splice(X[Ae],1,null);Ee.values=[...xe]}return{...fe,length:fe.fields[0]?.values.length??0}},Vi=(N,X)=>{const ee=X.x,fe=X.y,Ee=X.x+X.width-1,xe={...N,fields:N.fields.map(Ae=>({...Ae,values:Ae.values.slice()}))};for(let Ae=ee;Ae<=Ee;Ae++){const We=xe.fields[Ae],ke=We.values.toArray();ke.splice(fe,X.height,...new Array(X.height).fill(null)),We.values=[...ke]}return{...xe,length:xe.fields[0]?.values.length??0}},yu=N=>{const X=N.values.toArray();N.values=X.map(ee=>ee==="undefined"||ee==="null"?null:ee)};function zi(N){return{accentColor:N.colors.primary.main,accentFg:N.colors.secondary.main,textDark:N.colors.text.primary,textMedium:N.colors.text.secondary,textLight:N.colors.text.secondary,textBubble:N.colors.text.primary,textHeader:N.colors.text.primary,bgCell:N.colors.background.primary,bgCellMedium:N.colors.background.primary,bgHeader:N.colors.background.primary,bgHeaderHasFocus:N.colors.background.secondary,bgHeaderHovered:N.colors.background.secondary,linkColor:N.colors.text.link,fontFamily:N.typography.fontFamily,headerFontStyle:`${N.typography.fontWeightMedium} ${N.typography.fontSize}px`,fgIconHeader:N.colors.secondary.contrastText,bgIconHeader:N.colors.secondary.main}}const ec=(N,X,ee=!1)=>{const fe=N.values.get(X);switch(N.type){case tn.fS.boolean:return{kind:nr.p6.Boolean,data:fe||!1,allowOverlay:!1,readonly:!1};case tn.fS.number:return{kind:nr.p6.Number,data:fe||0,allowOverlay:gn()&&!ee,readonly:!1,displayData:fe!=null?fe.toString():""};case tn.fS.string:return{kind:nr.p6.Text,data:fe||"",allowOverlay:gn()&&!ee,readonly:!1,displayData:fe!=null?fe.toString():""};default:return{kind:nr.p6.Text,data:fe||"",allowOverlay:gn()&&!ee,readonly:!1,displayData:fe!=null?fe.toString():""}}},Pu=(N,X)=>({dataEditor:S.css`
      .dvn-scroll-inner > div:nth-child(2) {
        pointer-events: none !important;
      }
      scrollbar-color: ${N.colors.background.secondary} ${N.colors.background.primary};
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: ${N.colors.background.primary};
      }
      ::-webkit-scrollbar-thumb {
        border-radius: 10px;
      }
      ::-webkit-scrollbar-corner {
        display: none;
      }
    `,addColumnDiv:S.css`
      width: 120px;
      display: flex;
      flex-direction: column;
      background-color: ${N.colors.background.primary};
      button {
        pointer-events: ${X?"none":"auto"};
        border: none;
        outline: none;
        height: 37px;
        font-size: 20px;
        background-color: ${N.colors.background.primary};
        color: ${N.colors.text.primary};
        border-right: 1px solid ${N.components.panel.borderColor};
        border-bottom: 1px solid ${N.components.panel.borderColor};
        transition: background-color 200ms;
        cursor: pointer;
        :hover {
          background-color: ${N.colors.background.secondary};
        }
      }
      input {
        height: 37px;
        border: 1px solid ${N.colors.primary.main};
        :focus {
          outline: none;
        }
      }
    `,renameColumnInput:S.css`
      height: 37px;
      border: 1px solid ${N.colors.primary.main};
      :focus {
        outline: none;
      }
    `}),co=N=>N.rows.length||N.columns.length?!0:N.current===void 0?!1:N.current.range&&!(N.current.range.height===1&&N.current.range.width===1);var vs=(N=>(N.columnResizeStart="columnResizeStart",N.columnResizeEnd="columnResizeEnd",N.columnMove="columnMove",N.updateColumns="updateColumns",N.showColumnRenameInput="showColumnRenameInput",N.hideColumnRenameInput="hideColumnRenameInput",N.openCellContextMenu="openCellContextMenu",N.openHeaderContextMenu="openHeaderContextMenu",N.openHeaderDropdownMenu="openHeaderDropdownMenu",N.closeContextMenu="closeContextMenu",N.multipleCellsSelected="multipleCellsSelected",N.gridSelectionCleared="gridSelectionCleared",N.columnFreezeReset="columnFreezeReset",N.columnFreezeChanged="columnFreezeChanged",N.openSearch="openSearch",N.closeSearch="closeSearch",N))(vs||{});const Cu={columns:[],contextMenuData:Ki,renameColumnInputData:hu,gridSelection:to,columnFreezeIndex:0,toggleSearch:!1,isResizeInProgress:!1},tc=new Map([[tn.fS.number,nr.PE.HeaderNumber],[tn.fS.string,nr.PE.HeaderTextTemplate],[tn.fS.boolean,nr.PE.HeaderBoolean],[tn.fS.time,nr.PE.HeaderDate],[tn.fS.other,nr.PE.HeaderReference]]),Ha=(N,X)=>{let ee=[];switch(X.type){case"columnResizeStart":ee=[...N.columns];const fe=X.payload;return ee[fe.columnIndex]={...N.columns[fe.columnIndex],width:fe.width},{...N,columns:ee,isResizeInProgress:!0};case"columnMove":ee=[...N.columns];const Ee=X.payload,xe=N.columns[Ee.from].width;let Ae=ee.splice(Ee.from,1)[0];return Ae={...Ae,width:xe},ee.splice(Ee.to,0,Ae),{...N,columns:ee};case"columnResizeEnd":return{...N,isResizeInProgress:!1};case"updateColumns":const We=X.payload;return ee=[...We.frame.fields.map((Bt,Xt)=>{const Zt=N.columns.find(dn=>dn.title===Bt.name)?.width;return{title:(0,qt.CZ)(Bt,We.frame),width:Zt??_o(Bt),icon:tc.get(Bt.type),hasMenu:gn(),trailingRowOptions:{targetColumn:--Xt}}})],{...N,columns:ee};case"showColumnRenameInput":return{...N,renameColumnInputData:{...N.renameColumnInputData,isInputOpen:!0}};case"hideColumnRenameInput":return{...N,renameColumnInputData:{...N.renameColumnInputData,isInputOpen:!1}};case"openCellContextMenu":const ke=X.payload,rt=ke.event,at=ke.cell;return{...N,contextMenuData:{x:rt.bounds.x+rt.localEventX,y:rt.bounds.y+rt.localEventY,column:at[0]===-1?void 0:at[0],row:at[1],isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderContextMenu":const Et=X.payload,Tt=Et.event;return{...N,contextMenuData:{x:Tt.bounds.x+Tt.localEventX,y:Tt.bounds.y+Tt.localEventY,column:Et.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderDropdownMenu":const pt=X.payload,At=pt.screenPosition;return{...N,contextMenuData:{x:At.x+At.width,y:At.y+At.height,column:pt.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!0},renameColumnInputData:{x:At.x,y:At.y,width:At.width,height:At.height,columnIdx:pt.columnIndex,isInputOpen:!1,inputValue:pt.value}};case"closeContextMenu":return{...N,contextMenuData:{isContextMenuOpen:!1}};case"closeSearch":return{...N,toggleSearch:!1};case"openSearch":return{...N,toggleSearch:!0};case"multipleCellsSelected":const kt=X.payload;return{...N,gridSelection:kt.selection};case"gridSelectionCleared":return{...N,gridSelection:to};case"columnFreezeReset":return{...N,columnFreezeIndex:0};case"columnFreezeChanged":const It=X.payload;return{...N,columnFreezeIndex:It.columnIndex};default:return N}},Du=({menuData:N,data:X,saveData:ee,closeContextMenu:fe,dispatch:Ee,gridSelection:xe,columnFreezeIndex:Ae,renameColumnClicked:We})=>{let ke=[],rt=[];const{row:at,column:Et,x:Tt,y:pt,isHeaderMenu:At}=N;xe.rows&&(ke=xe.rows.toArray()),xe.columns&&(rt=xe.columns.toArray());let kt="Delete row";ke.length&&ke.length>1&&(kt=`Delete ${ke.length} rows`);let It="Delete column";rt.length&&rt.length>1&&(It=`Delete ${rt.length} columns`);const Bt=at!==void 0&&at>=0||ke.length,Xt=Et!==void 0&&Et>=0&&at!==void 0||rt.length,Zt=at!==void 0&&at>=0&&!ke.length,Qt=Et!==void 0&&Et>=0&&at!==void 0&&!rt.length,dn=()=>A.createElement(A.Fragment,null,Bt?A.createElement($s.s,{label:kt,onClick:()=>{if(ke.length){ee(Go(X,ke,!0)),Ee({type:vs.gridSelectionCleared});return}at!==void 0&&at>=0&&ee(Go(X,[at],!0))}}):null,Xt?A.createElement($s.s,{label:It,onClick:()=>{if(rt.length){ee({...X,fields:X.fields.filter((En,Sn)=>!rt.includes(Sn))}),Ee({type:vs.gridSelectionCleared});return}Et!==void 0&&Et>=0&&ee({...X,fields:X.fields.filter((En,Sn)=>Sn!==Et)})}}):null,Xt||Bt?A.createElement(rs.R,null):null,Zt?A.createElement($s.s,{label:"Clear row",onClick:()=>{ee(Go(X,[at]))}}):null,Qt?A.createElement($s.s,{label:"Clear column",onClick:()=>{const En=X.fields[Et];En.values=En.values.map(()=>null),ee({...X})}}):null,Zt||Qt?A.createElement(rs.R,null):null,A.createElement($s.s,{label:"Remove all data",onClick:()=>{ee(vu)}}),A.createElement($s.s,{label:"Search...",onClick:()=>Ee({type:vs.openSearch})})),Yt=()=>{if(Et==null)return null;const En=X.fields[Et].type,Sn=[],xn=Ln=>{Sn.push({label:(0,w.capitalize)(Ln),options:{targetField:X.fields[Et].name,destinationType:Ln}})};En===tn.fS.string?(xn(tn.fS.number),xn(tn.fS.boolean)):En===tn.fS.number?(xn(tn.fS.string),xn(tn.fS.boolean)):En===tn.fS.boolean?(xn(tn.fS.number),xn(tn.fS.string)):(xn(tn.fS.string),xn(tn.fS.number),xn(tn.fS.boolean));let Tn="Set column freeze position";const Kn=Et+1;return Ae===Kn&&(Tn="Unset column freeze"),A.createElement(A.Fragment,null,Sn.length?A.createElement(io.k,{label:"Set field type"},Sn.map((Ln,ta)=>A.createElement($s.s,{key:ta,label:Ln.label,onClick:()=>{const Un=(0,_l.p8)(X.fields[Et],Ln.options);Ln.options.destinationType===tn.fS.string&&yu(Un);const In={name:X.name,fields:[...X.fields],length:X.length};In.fields[Et]=Un,ee(In)}}))):null,A.createElement(rs.R,null),A.createElement($s.s,{label:Tn,onClick:()=>{Ee(Ae===Kn?{type:vs.columnFreezeReset}:{type:vs.columnFreezeChanged,payload:{columnIndex:Kn}})}}),A.createElement($s.s,{label:"Rename column",onClick:We}),A.createElement(rs.R,null),A.createElement($s.s,{label:"Delete column",onClick:()=>{ee({...X,fields:X.fields.filter((Ln,ta)=>ta!==Et)}),Ee({type:vs.gridSelectionCleared})}}),A.createElement($s.s,{label:"Clear column",onClick:()=>{const Ln=X.fields[Et];Ln.values=Ln.values.map(()=>null),ee({...X})}}))};return A.createElement(Wl.x,{renderMenuItems:At?Yt:dn,x:Tt,y:pt,onClose:fe})},nc=({renameColumnData:N,onColumnInputBlur:X,classStyle:ee})=>{const{x:fe,y:Ee,width:xe,height:Ae,inputValue:We,columnIdx:ke}=N,[rt,at]=(0,A.useState)({}),[Et,Tt]=(0,A.useState)(We),pt=(0,A.useRef)(null);(0,A.useLayoutEffect)(()=>{pt.current?.focus();const Bt=pt.current?.getBoundingClientRect();if(Bt){const Xt={right:window.innerWidth<fe+Bt.width,bottom:window.innerHeight<Ee+Bt.height};at({position:"fixed",left:Xt.right?fe-Bt.width:fe,top:Xt.bottom?Ee-Bt.height:Ee,width:xe,height:Ae})}},[Ae,xe,fe,Ee]);const At=Bt=>{const Xt=Bt.target.value;Xt&&X(Xt,ke)},kt=Bt=>{Tt(Bt.target.value)},It=Bt=>{Bt.key==="Enter"&&Bt.currentTarget.blur()};return A.createElement(Oa.h_,null,A.createElement("input",{type:"text",className:ee,value:Et,onBlur:At,ref:pt,style:rt,onChange:kt,onKeyDown:It}))};function xu({options:N,data:X,id:ee,fieldConfig:fe,width:Ee,height:xe}){const[Ae,We]=(0,A.useReducer)(Ha,Cu),{onUpdateData:ke}=(0,kn.R9)(),{columns:rt,contextMenuData:at,renameColumnInputData:Et,gridSelection:Tt,columnFreezeIndex:pt,toggleSearch:At,isResizeInProgress:kt}=Ae,It=X.series[N.selectedSeries??0],Bt=(0,ie.l4)(),Xt=zi(Bt);(0,A.useEffect)(()=>{It&&We({type:vs.updateColumns,payload:{frame:It}})},[It]);const Zt=([Gn,Nn])=>{const Hn=It.fields[Gn];return!Hn||Nn>It.length?Hr:ec(Hn,Nn,co(Tt))},Qt=(Gn,Nn)=>{if(co(Tt))return;const[Hn,qn]=Gn,ya={...It,fields:It.fields.map(pa=>({...pa,values:[...pa.values]}))},na=ya.fields[Hn];if(!na)return;const Ua=na.values.toArray();Ua[qn]=Nn.data,na.values=[...Ua],Nr(ya,ke)},dn=Gn=>{const Nn=It.length??0;Nr({...It,fields:[...It.fields,{name:Gn,type:tn.fS.string,config:{},values:new Array(Nn).fill("")}]},ke)},Yt=()=>{const Gn=It.fields.map(Nn=>{const Hn=Nn.values.slice();return Hn.push(null),{...Nn,values:Hn}});Nr({...It,fields:Gn,length:It.length+1},ke)},En=(Gn,Nn,Hn,qn)=>{We({type:vs.columnResizeStart,payload:{columnIndex:Hn,width:Nn}})},Sn=(Gn,Nn,Hn,qn)=>{We({type:vs.columnResizeEnd})},xn=()=>{We({type:vs.closeContextMenu})},Tn=Gn=>{if(Gn.current&&Gn.current.range)return Nr(Vi(It,Gn.current.range),ke),!0;const Nn=Gn.rows.toArray(),Hn=Gn.columns.toArray();if(Nn.length)return Nr(Go(It,Nn),ke),!0;if(Hn.length){const qn={...It,fields:It.fields.map((ya,na)=>Hn.includes(na)?{...ya,values:new Array(It.length).fill(null)}:ya)};return Nr(qn,ke),!0}return!1},Kn=(Gn,Nn)=>{Nn.preventDefault(),We({type:vs.openCellContextMenu,payload:{event:Nn,cell:Gn}})},Ln=(Gn,Nn)=>{Nn.preventDefault(),We({type:vs.openHeaderContextMenu,payload:{event:Nn,columnIndex:Gn}})},ta=(Gn,Nn)=>{We({type:vs.openHeaderDropdownMenu,payload:{screenPosition:Nn,columnIndex:Gn,value:Ae.columns[Gn].title}})},Un=async(Gn,Nn)=>{const Hn=It.fields.map(na=>na),qn=Hn[Gn];Hn.splice(Gn,1),Hn.splice(Nn,0,qn),await Nr({...It,fields:Hn},ke)&&We({type:vs.columnMove,payload:{from:Gn,to:Nn}})},In=(Gn,Nn)=>{const Hn=It.fields.map(qn=>({...qn,values:qn.values.slice()}));for(const qn of Hn){const ya=qn.values[Gn];qn.values.splice(Gn,1),qn.values.splice(Nn,0,ya)}Nr({...It,fields:Hn},ke)},Qn=()=>{We({type:vs.showColumnRenameInput})},oa=(Gn,Nn)=>{const Hn=It.fields.map(qn=>qn);Hn[Nn].name=Gn,We({type:vs.hideColumnRenameInput}),Nr({...It,fields:Hn},ke)},$a=()=>{We({type:vs.closeSearch})},ka=Gn=>{We({type:vs.multipleCellsSelected,payload:{selection:Gn}})},Aa=Gn=>{Nr(Gn,ke)};if(!It)return A.createElement(fa.Z,{panelId:ee,fieldConfig:fe,data:X});if(!gn())return A.createElement(fa.Z,{panelId:ee,message:"Datagrid is not enabled",fieldConfig:fe,data:X});if(!document.getElementById("portal")){const Gn=document.createElement("div");Gn.id="portal",document.body.appendChild(Gn)}const _a=Pu(Bt,kt);return A.createElement(A.Fragment,null,A.createElement(nr.ZP,{className:_a.dataEditor,getCellContent:Zt,columns:rt,rows:It.length,width:Ee,height:xe,initialSize:[Ee,xe],theme:Xt,smoothScrollX:!0,smoothScrollY:!0,overscrollY:50,onCellEdited:gn()?Qt:void 0,getCellsForSelection:gn()?!0:void 0,showSearch:gn()?At:!1,onSearchClose:$a,gridSelection:Tt,onGridSelectionChange:gn()?ka:void 0,onRowAppended:gn()?Yt:void 0,onDelete:gn()?Tn:void 0,rowMarkers:gn()?pu:ko,onColumnResize:En,onColumnResizeEnd:Sn,onCellContextMenu:gn()?Kn:void 0,onHeaderContextMenu:gn()?Ln:void 0,onHeaderMenuClick:gn()?ta:void 0,trailingRowOptions:Eu,rightElement:gn()?A.createElement(mu,{onColumnInputBlur:dn,divStyle:_a.addColumnDiv}):null,rightElementProps:Do,freezeColumns:pt,onRowMoved:gn()?In:void 0,onColumnMoved:gn()?Un:void 0}),at.isContextMenuOpen&&A.createElement(Du,{menuData:at,data:It,saveData:Aa,closeContextMenu:xn,dispatch:We,gridSelection:Tt,columnFreezeIndex:pt,renameColumnClicked:Qn}),Et.isInputOpen?A.createElement(nc,{onColumnInputBlur:oa,renameColumnData:Et,classStyle:_a.renameColumnInput}):null)}const ac={selectedSeries:0},bu=new ue.c(xu).setPanelOptions((N,X)=>{const ee=X.data.map((fe,Ee)=>({value:Ee,label:fe.refId}));return X.options&&!ee.map(fe=>fe.value).includes(X.options.selectedSeries??0)&&(X.options.selectedSeries=ac.selectedSeries),N.addSelect({path:"selectedSeries",name:"Select series",defaultValue:ac.selectedSeries,settings:{options:ee}})});class Mu extends A.Component{constructor(){super(...arguments),this.subscription=new ms.w0,this.state={}}componentDidMount(){const{eventBus:X}=this.props;this.subscription.add(X.subscribe(it.es,ee=>{this.setState({event:ee})})),this.subscription.add(X.subscribe(it.xH,ee=>{this.setState({event:ee})})),this.subscription.add(X.subscribe(He.IA,ee=>{this.setState({event:ee})})),this.subscription.add(X.subscribe(He.oi,ee=>{this.setState({event:ee})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:X}=this.state;if(!X)return A.createElement("div",null,"no events yet");const{type:ee,payload:fe,origin:Ee}=X;return A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},A.createElement("h3",null,"Origin: ",Ee?.path),A.createElement("span",null,"Type: ",ee),Boolean(fe)&&A.createElement(A.Fragment,null,A.createElement("pre",null,JSON.stringify(fe.point,null,"  ")),fe.data&&A.createElement(Vr.H,{data:fe.data,rowIndex:fe.rowIndex,columnIndex:fe.columnIndex})))}}var Su=e(74911);let Hi=100;class sc extends A.PureComponent{constructor(X){super(X),this.history=new Su.d({capacity:40,append:"head"}),this.eventObserver={next:fe=>{const Ee=fe.origin;this.history.add({key:Hi++,type:fe.type,path:Ee?.path,payload:fe.payload}),this.setState({counter:Hi})}},this.state={counter:Hi};const ee=[];ee.push(X.eventBus.getStream(it.es).subscribe(this.eventObserver)),ee.push(X.eventBus.getStream(it.xH).subscribe(this.eventObserver)),ee.push(X.eventBus.getStream(it.v9).subscribe(this.eventObserver)),this.subs=ee}componentWillUnmount(){for(const X of this.subs)X.unsubscribe()}render(){return A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((X,ee)=>A.createElement("div",{key:X.key},JSON.stringify(X.path)," ",X.type," / X:",JSON.stringify(X.payload.x)," / Y:",JSON.stringify(X.payload.y))))}}class kr extends A.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(X){const{data:ee,options:fe}=this.props;if(X.data!==ee&&(this.counters.dataChanged++,fe.counters?.schemaChanged)){const Ee=X.data?.series,xe=ee.series;xe&&Ee&&((0,ma.nl)(xe,Ee,ma.Ch)||this.counters.schemaChanged++)}return!0}render(){const{data:X,options:ee}=this.props,fe=ee.counters??{render:!1,dataChanged:!1,schemaChanged:!1};this.counters.render++;const Ee=Date.now(),xe=Ee-this.lastRender;this.lastRender=Ee;const Ae=Fs.TB.get(Fs.gz.lastNotNull);return A.createElement("div",null,A.createElement("div",null,A.createElement(qr.h,{name:"step-backward",title:"reset counters",onClick:this.resetCounters}),A.createElement("span",null,fe.render&&A.createElement("span",null,"Render: ",this.counters.render,"\xA0"),fe.dataChanged&&A.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),fe.schemaChanged&&A.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),A.createElement("span",null,"TIME: ",xe,"ms"))),X.series&&X.series.map((We,ke)=>A.createElement("div",{key:`${ke}/${We.refId}`},A.createElement("h4",null,(0,qt.nf)(We,ke)," (",We.length,")"),A.createElement("table",{className:"filter-table"},A.createElement("thead",null,A.createElement("tr",null,A.createElement("td",null,"Field"),A.createElement("td",null,"Type"),A.createElement("td",null,"Last"))),A.createElement("tbody",null,We.fields.map((rt,at)=>{const Et=Ae.reduce(rt,!1,!1)[Ae.id];return A.createElement("tr",{key:`${at}/${rt.name}`},A.createElement("td",null,(0,qt.CZ)(rt,We,X.series)),A.createElement("td",null,rt.type),A.createElement("td",null,`${Et}`))}))))))}}var Tu=e(46967);function Ou(N){const X=(0,kn.R9)(),ee=fe=>{X.onInstanceStateChange({name:fe.currentTarget.value})};return A.createElement(A.Fragment,null,A.createElement(As.g,{label:"State name"},A.createElement(Tu.I,{value:X.instanceState?.name??"",onChange:ee})))}function xo({value:N,context:X,onChange:ee,item:fe}){return A.createElement("div",null,"Current value: ",X.instanceState?.name," ")}var cs=(N=>(N.Cursor="cursor",N.Events="events",N.Render="render",N.State="State",N.ThrowError="ThrowError",N))(cs||{});class Iu extends A.Component{render(){const{options:X}=this.props;switch(X.mode){case cs.Events:return A.createElement(sc,{eventBus:this.props.eventBus});case cs.Cursor:return A.createElement(Mu,{eventBus:this.props.eventBus});case cs.State:return A.createElement(Ou,{...this.props});case cs.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return A.createElement(kr,{...this.props})}}}const Ru=new ue.c(Iu).useFieldConfig().setPanelOptions(N=>{N.addSelect({path:"mode",name:"Mode",defaultValue:cs.Render,settings:{options:[{label:"Render",value:cs.Render},{label:"Events",value:cs.Events},{label:"Cursor",value:cs.Cursor},{label:"Cursor",value:cs.Cursor},{label:"Share state",value:cs.State},{label:"Throw error",value:cs.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:X})=>X===cs.State,editor:xo}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:X})=>X===cs.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:X})=>X===cs.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:X})=>X===cs.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var Au=e(19919);const Lu=N=>A.createElement(Au.Z,{data:N.data.series[0],app:me.zj.Unknown}),rc=new ue.c(Lu);var oc=e(7149),ic=e(67487);const Yo=(N,X)=>{const ee="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",fe=X?ee:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",Ee=X?ee:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",xe=N.isDark?fe:Ee;return`
      background-color: ${N.colors.background.secondary};
      margin-right: ${N.spacing(4)};
      border: 1px solid ${N.colors.border.weak};
      border-bottom-left-radius: ${N.shape.borderRadius(2)};
      border-bottom-right-radius: ${N.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${N.breakpoints.down("xxl")} {
        margin-right: ${N.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${xe};
      }
`},ki=(N,X)=>S.css`
  color: ${X?N.v1.palette.blue95:N.colors.text.secondary};

  ${N.breakpoints.down("sm")} {
    display: none;
  }
`,lc=S.css`
  padding: 16px;
`,jo=({card:N})=>{const X=(0,ie.wW)((0,A.useCallback)(fe=>Bu(fe,N.done),[N.done])),ee=(0,ie.wW)((0,A.useCallback)(fe=>ki(fe,N.done),[N.done]));return A.createElement("div",{className:X.card},A.createElement("div",{className:lc},A.createElement("a",{href:`${N.href}?utm_source=grafana_gettingstarted`,className:X.url},A.createElement("div",{className:X.heading},N.done?"complete":N.heading),A.createElement("h4",{className:X.title},N.title),A.createElement("div",null,A.createElement(jt.J,{className:ee,name:N.icon,size:"xxl"})))),A.createElement("a",{href:`${N.learnHref}?utm_source=grafana_gettingstarted`,className:X.learnUrl,target:"_blank",rel:"noreferrer"},"Learn how in the docs ",A.createElement(jt.J,{name:"external-link-alt"})))},Bu=(N,X)=>({card:S.css`
      ${Yo(N,X)}

      min-width: 230px;

      ${N.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:S.css`
      text-transform: uppercase;
      color: ${X?N.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${N.spacing(2)};
    `,title:S.css`
      margin-bottom: ${N.spacing(2)};
    `,url:S.css`
      display: inline-block;
    `,learnUrl:S.css`
      border-top: 1px solid ${N.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var bo=e(58379);const Nu=({card:N})=>{const X=(0,ie.wW)((0,A.useCallback)(fe=>wu(fe,N.done),[N.done])),ee=(0,ie.wW)((0,A.useCallback)(fe=>ki(fe,N.done),[N.done]));return A.createElement("a",{className:X.card,target:"_blank",rel:"noreferrer",href:`${N.href}?utm_source=grafana_gettingstarted`,onClick:fe=>Uu(fe,N)},A.createElement("div",{className:lc},A.createElement("div",{className:X.type},N.type),A.createElement("div",{className:X.heading},N.done?"complete":N.heading),A.createElement("h4",{className:X.cardTitle},N.title),A.createElement("div",{className:X.info},N.info),A.createElement(jt.J,{className:ee,name:N.icon,size:"xxl"})))},Uu=(N,X)=>{N.preventDefault(),bo.Z.get(X.key)||bo.Z.set(X.key,!0)},wu=(N,X)=>({card:S.css`
      ${Yo(N,X)}
      width: 460px;
      min-width: 460px;

      ${N.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${N.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:S.css`
      color: ${N.colors.primary.text};
      text-transform: uppercase;
    `,heading:S.css`
      text-transform: uppercase;
      color: ${N.colors.primary.text};
      margin-bottom: ${N.spacing(1)};
    `,cardTitle:S.css`
      margin-bottom: ${N.spacing(2)};
    `,info:S.css`
      margin-bottom: ${N.spacing(2)};
    `,status:S.css`
      display: flex;
      justify-content: flex-end;
    `}),Wu=({step:N})=>{const X=(0,ie.wW)(cc);return A.createElement("div",{className:X.setup},A.createElement("div",{className:X.info},A.createElement("h2",{className:X.title},N.title),A.createElement("p",null,N.info)),A.createElement("div",{className:X.cards},N.cards.map((ee,fe)=>{const Ee=`${ee.title}-${fe}`;return ee.type==="tutorial"?A.createElement(Nu,{key:Ee,card:ee}):A.createElement(jo,{key:Ee,card:ee})})))},cc=N=>({setup:S.css`
      display: flex;
      width: 95%;
    `,info:S.css`
      width: 172px;
      margin-right: 5%;

      ${N.breakpoints.down("xxl")} {
        margin-right: ${N.spacing(4)};
      }
      ${N.breakpoints.down("sm")} {
        display: none;
      }
    `,title:S.css`
      color: ${N.v1.palette.blue95};
    `,cards:S.css`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      ${N.breakpoints.down("xxl")} {
        justify-content: flex-start;
      }
    `});var Fu=e(91162);const dc="Grafana fundamentals",$u="Create users and teams",Qo="getting.started.",uc=`${Qo}${dc.replace(" ","-").trim().toLowerCase()}`,mc=`${Qo}${$u.replace(" ","-").trim().toLowerCase()}`,fc=()=>[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:dc,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(bo.Z.get(uc)),key:uc,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(N=>{N((0,Fu.ak)().getMetricSources().filter(X=>X.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,Ie.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:mc,check:()=>Promise.resolve(bo.Z.get(mc)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const N=await(0,Ie.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(N.length>0)},done:!1}]}];class Ku extends A.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:fc()},this.onForwardClick=()=>{this.setState(X=>({currentStep:X.currentStep+1}))},this.onPreviousClick=()=>{this.setState(X=>({currentStep:X.currentStep-1}))},this.dismiss=()=>{const{id:X}=this.props,ee=(0,cn.h4)().getCurrent(),fe=ee?.getPanelById(X);ee?.removePanel(fe),Ie.ae.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(Ee=>{st.Vt.user.helpFlags1=Ee.helpFlags1})}}async componentDidMount(){const{steps:X}=this.state,ee=X.map(async Ee=>{const xe=Ee.cards.map(async We=>We.check().then(ke=>({...We,done:ke}))),Ae=await Promise.all(xe);return{...Ee,done:Ae.every(We=>We.done),cards:Ae}}),fe=await Promise.all(ee);this.setState({currentStep:fe[0].done?1:0,steps:fe,checksDone:!0})}render(){const{checksDone:X,currentStep:ee,steps:fe}=this.state,Ee=Vu(),xe=fe[ee];return A.createElement("div",{className:Ee.container},X?A.createElement(A.Fragment,null,A.createElement(Ce.zx,{variant:"secondary",fill:"text",className:Ee.dismiss,onClick:this.dismiss},"Remove this panel"),ee===fe.length-1&&A.createElement(Ce.zx,{className:(0,S.cx)(Ee.backForwardButtons,Ee.previous),onClick:this.onPreviousClick,"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}),A.createElement("div",{className:Ee.content},A.createElement(Wu,{step:xe})),ee<fe.length-1&&A.createElement(Ce.zx,{className:(0,S.cx)(Ee.backForwardButtons,Ee.forward),onClick:this.onForwardClick,"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"})):A.createElement("div",{className:Ee.loading},A.createElement("div",{className:Ee.loadingText},"Checking completed setup steps"),A.createElement(ic.$,{size:24,inline:!0})))}}const Vu=(0,sn.B)(()=>{const N=be.v.theme2;return{container:S.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${N.colors.mode}.svg) no-repeat;
      background-size: cover;
      padding: ${N.spacing(4)} ${N.spacing(2)} 0;
    `,content:S.css`
      label: content;
      display: flex;
      justify-content: center;

      ${N.breakpoints.down("xxl")} {
        margin-left: ${N.spacing(3)};
        justify-content: flex-start;
      }
    `,header:S.css`
      label: header;
      margin-bottom: ${N.spacing(3)};
      display: flex;
      flex-direction: column;

      ${N.breakpoints.down("lg")} {
        flex-direction: row;
      }
    `,headerLogo:S.css`
      height: 58px;
      padding-right: ${N.spacing(2)};
      display: none;

      ${N.breakpoints.up("md")} {
        display: block;
      }
    `,heading:S.css`
      label: heading;
      margin-right: ${N.spacing(3)};
      margin-bottom: ${N.spacing(3)};
      flex-grow: 1;
      display: flex;

      ${N.breakpoints.up("md")} {
        margin-bottom: 0;
      }
    `,backForwardButtons:S.css`
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `,previous:S.css`
      left: 10px;

      ${N.breakpoints.down("md")} {
        left: 0;
      }
    `,forward:S.css`
      right: 10px;

      ${N.breakpoints.down("md")} {
        right: 0;
      }
    `,dismiss:S.css`
      align-self: flex-end;
      text-decoration: underline;
      margin-bottom: ${N.spacing(1)};
    `,loading:S.css`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:S.css`
      margin-right: ${N.spacing(1)};
    `}}),zu=new ue.c(Ku).setNoPadding();var Qs=e(75133),Bs=e(3200);const ds={bucketOffset:0},gc={fillOpacity:80,gradientMode:yt.FI.None,lineWidth:1};function _i(N,X){return Math.floor(N/X)*X}function Gi(N,X){return Math.ceil(N/X)*X}function Zo(N){return N.fields[1].values[0]-N.fields[0].values[0]}const pc=(N,X)=>{let{min:ee,max:fe}=N.fields[2].config,Ee=new yi.U,xe=Zo(N),Ae=(pt,At,kt,It,Bt,Xt)=>{let Zt=pt.axes[At]._space,Qt=pt.valToPos(pt.data[0][0]+xe,"x")-pt.valToPos(pt.data[0][0],"x"),dn=_i(ee??pt.data[0][0],xe),Yt=Gi(fe??pt.data[0][pt.data[0].length-1]+xe,xe),En=[],Sn=Math.ceil(Zt/Qt);for(let xn=0,Tn=dn;Tn<=Yt;xn++,Tn+=xe)!(xn%Sn)&&En.push(Tn);return En};Ee.addScale({scaleKey:"x",isTime:!1,distribution:yt.wf.Linear,orientation:yt.wN.Horizontal,direction:yt.bQ.Right,range:(pt,At,kt)=>{ee!=null&&(At=ee),fe!=null&&(kt=fe);let It=pt.data[0][0],Bt=pt.data[0][pt.data[0].length-1];return kt===Bt?kt+=xe:kt=Gi(kt,xe),At>It&&(At=_i(At,xe)),[At,kt]}}),Ee.addScale({scaleKey:"y",isTime:!1,distribution:yt.wf.Linear,orientation:yt.wN.Vertical,direction:yt.bQ.Up});const We=N.fields[0].display,ke=pt=>(0,Rs.zc)(We(pt));Ee.addAxis({scaleKey:"x",isTime:!1,placement:yt.LB.Bottom,incrs:Qs.Zi,splits:Ae,values:(pt,At)=>{const kt=At.map(ke),It=kt.reduce((Qt,dn)=>Math.max((0,ga.X1)(dn,Fa.gD).width,Qt),0),Bt=10,Xt=pt.bbox.width/((It+Bt)*devicePixelRatio),Zt=Math.ceil(kt.length/Xt);return kt.map((Qt,dn)=>dn%Zt===0?Qt:null)},theme:X});let at=N.fields[2].display;Ee.addAxis({scaleKey:"y",isTime:!1,placement:yt.LB.Left,formatValue:(pt,At)=>(0,Rs.zc)(at(pt,At)),theme:X}),Ee.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let Et=Ss.Z.paths.bars({align:1,size:[1,1/0]}),Tt=0;for(let pt=2;pt<N.fields.length;pt++){const At=N.fields[pt];At.state=At.state??{},At.state.seriesIndex=Tt++;const kt={...gc,...At.config.custom},It="y",Bt=(0,jr.fD)(At),Zt=(0,jr.YO)(At,X).color;Ee.addSeries({scaleKey:It,lineWidth:kt.lineWidth,lineColor:Zt,fillOpacity:kt.fillOpacity,theme:X,colorMode:Bt,pathBuilder:Et,show:!kt.hideFrom?.viz,gradientMode:kt.gradientMode,thresholds:At.config.thresholds,hardMin:At.config.min,hardMax:At.config.max,softMin:kt.axisSoftMin,softMax:kt.axisSoftMax,dataFrameFieldIndex:At.state.origin})}return Ee},Yi=N=>{let X=[];for(const ee of N.fields)ee.name!==Qs.cO&&X.push(ee.values);for(let ee=1;ee<X.length;ee++){let fe=X[ee];for(let Ee=0;Ee<fe.length;Ee++)fe[Ee]===0&&(fe[Ee]=null)}return X};class Jo extends A.Component{constructor(X){super(X),this.state=this.prepState(X)}prepState(X,ee=!0){let fe=null;const{alignedFrame:Ee}=X;return Ee&&(fe={alignedData:Yi(Ee)},ee&&(fe.config=pc(Ee,this.props.theme))),fe}renderLegend(X){const{legend:ee}=this.props;return!X||ee.showLegend===!1?null:A.createElement(Gs.l,{data:this.props.rawSeries,config:X,maxHeight:"35%",maxWidth:"60%",...ee})}componentDidUpdate(X){const{structureRev:ee,alignedFrame:fe,bucketSize:Ee}=this.props;if(fe!==X.alignedFrame){let xe=this.prepState(this.props,!1);xe&&(Ee!==X.bucketSize||this.props.options!==X.options||this.state.config===void 0||ee!==X.structureRev||!ee)&&(xe.config=pc(fe,this.props.theme)),xe&&this.setState(xe)}}render(){const{width:X,height:ee,children:fe,alignedFrame:Ee}=this.props,{config:xe}=this.state;return xe?A.createElement(bs.AY,{width:X,height:ee,legend:this.renderLegend(xe)},(Ae,We)=>A.createElement(Bs.N,{config:this.state.config,data:this.state.alignedData,width:Ae,height:We,timeRange:null},fe?fe(xe,Ee):null)):null}}const hc=({data:N,options:X,width:ee,height:fe})=>{const Ee=(0,ie.l4)(),xe=(0,A.useMemo)(()=>{if(!N.series.length)return;if(N.series.forEach((ke,rt)=>{ke.fields.forEach((at,Et)=>{at.state={...at.state,origin:{frameIndex:rt,fieldIndex:Et}}})}),N.series.length===1){const ke=(0,Qs.qr)(N.series[0]);if(ke)return(0,Qs.zM)(ke)}const We=(0,Qs.gY)(N.series,X);if(We)return(0,Qs.zM)(We,Ee)},[N.series,X,Ee]);if(!xe||!xe.fields.length)return A.createElement("div",{className:"panel-empty"},A.createElement("p",null,"No histogram found in response"));const Ae=Zo(xe);return A.createElement(Jo,{options:X,theme:Ee,legend:X.legend,rawSeries:N.series,structureRev:N.structureRev,width:ee,height:fe,alignedFrame:xe,bucketSize:Ae},(We,ke)=>null)};function Mo(N){if(N?.length!==1)return!1;const X=N[0];if(X.fields.length<3||!(0,Qs.Ok)(X.fields[0].name)||!(0,Qs.kl)(X.fields[1].name))return!1;for(const ee of X.fields)if(ee.type!==tn.fS.number)return!1;return!0}const Hu=new ue.c(hc).setPanelOptions(N=>{N.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(X,ee)=>Mo(ee)}).addNumberInput({path:"bucketSize",name:Qs.py.bucketSize.name,description:Qs.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:ds.bucketSize,showIf:(X,ee)=>!Mo(ee)}).addNumberInput({path:"bucketOffset",name:Qs.py.bucketOffset.name,description:Qs.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:ds.bucketOffset,showIf:(X,ee)=>!Mo(ee)}).addBooleanSwitch({path:"combine",name:Qs.py.combine.name,description:Qs.py.combine.description,defaultValue:ds.combine,showIf:(X,ee)=>!Mo(ee)}),ba.J(N)}).useFieldConfig({standardOptions:{[zt.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:wt.S.PaletteClassic}}},useCustomConfig:N=>{const X=gc;N.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:X.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:X.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:jn.q.fillGradient[0].value,settings:{options:jn.q.fillGradient}}),Da.B(N)}});var ar=e(8891),ji=e(64353);const Xo=[{label:"Grafana",value:ar.z.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:ar.z.DataSource,description:"Data sources with live support"},{label:"Plugins",value:ar.z.Plugin,description:"Plugins with live support"}];class vc extends A.PureComponent{constructor(){super(...arguments),this.state={namespaces:[],paths:[]},this.onScopeChanged=X=>{X.value&&this.props.onChange({scope:X.value,namespace:void 0,path:void 0})},this.onNamespaceChanged=X=>{const ee={scope:this.props.value?.scope,path:void 0};X.value&&(ee.namespace=X.value),this.props.onChange(ee)},this.onPathChanged=X=>{const{value:ee,onChange:fe}=this.props,Ee={scope:ee.scope,namespace:ee.namespace};X.value&&(Ee.path=X.value),fe(Ee)}}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(X){this.props.value!==X.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){const{namespaces:X,paths:ee}=this.state,{scope:fe,namespace:Ee,path:xe}=this.props.value,Ae=yc(Ke.vc.theme2);return A.createElement(A.Fragment,null,A.createElement(Wa.b,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),A.createElement("div",null,A.createElement("div",{className:Ae.dropWrap},A.createElement(ji._,null,"Scope"),A.createElement(Je.Ph,{options:Xo,value:Xo.find(We=>We.value===fe),onChange:this.onScopeChanged})),fe&&A.createElement("div",{className:Ae.dropWrap},A.createElement(ji._,null,"Namespace"),A.createElement(Je.Ph,{options:X,value:X.find(We=>We.value===Ee)??(Ee?{label:Ee,value:Ee}:void 0),onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})),fe&&Ee&&A.createElement("div",{className:Ae.dropWrap},A.createElement(ji._,null,"Path"),A.createElement(Je.Ph,{options:ee,value:Ec(ee,xe),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0}))))}}function Ec(N,X){const ee=N.find(fe=>fe.value===X);if(ee)return ee;if(X)return{label:X,value:X}}const yc=(0,sn.B)(N=>({dropWrap:S.css`
    margin-bottom: ${N.spacing(1)};
  `}));var Pc=e(52666),Qi=e(75118),ku=e(16065),qo=e(9405),ei=e(28625),Ur=e(90748),_u=e(88144);function Cc(N){const{data:X,height:ee,width:fe,options:Ee,fieldConfig:xe,id:Ae,timeRange:We}=N,ke=(0,ie.l4)(),rt=(0,kn.R9)(),at=X.series,Et=at.filter(dn=>dn.meta?.custom?.parentRowIndex===void 0),Tt=at.filter(dn=>dn.meta?.custom?.parentRowIndex!==void 0),pt=Et?.length,At=Et[0]?.fields.length,kt=Gu(Et,Ee),It=Et[kt];let Bt=ee,Xt=Tt;if(!pt||!At)return A.createElement(fa.Z,{panelId:Ae,fieldConfig:xe,data:X});if(pt>1){const dn=ke.spacing.gridSize*ke.components.height.md,Yt=ke.spacing.gridSize;Bt=ee-dn-Yt,Xt=Tt.filter(En=>En.refId===It.refId)}const Zt=A.createElement(_u.i,{height:Bt,width:fe,data:It,noHeader:!Ee.showHeader,showTypeIcons:Ee.showTypeIcons,resizable:!0,initialSortBy:Ee.sortBy,onSortByChange:dn=>ju(dn,N),onColumnResize:(dn,Yt)=>Yu(dn,Yt,N),onCellFilterAdded:rt.onAddAdHocFilter,footerOptions:Ee.footer,enablePagination:Ee.footer?.enablePagination,subData:Xt,cellHeight:Ee.cellHeight,timeRange:We});if(pt===1)return Zt;const Qt=Et.map((dn,Yt)=>({label:(0,qt.nf)(dn),value:Yt}));return A.createElement("div",{className:Zi.wrapper},Zt,A.createElement("div",{className:Zi.selectWrapper},A.createElement(Je.Ph,{options:Qt,value:Qt[kt],onChange:dn=>Dc(dn,N)})))}function Gu(N,X){return X.frameIndex>0&&X.frameIndex<N.length?X.frameIndex:0}function Yu(N,X,ee){const{fieldConfig:fe}=ee,{overrides:Ee}=fe,xe=Ur.mi.byName,Ae="custom.width",We=Ee.find(ke=>ke.matcher.id===xe&&ke.matcher.options===N);if(We){const ke=We.properties.find(rt=>rt.id===Ae);ke?ke.value=X:We.properties.push({id:Ae,value:X})}else Ee.push({matcher:{id:xe,options:N},properties:[{id:Ae,value:X}]});ee.onFieldConfigChange({...fe,overrides:Ee})}function ju(N,X){X.onOptionsChange({...X.options,sortBy:N})}function Dc(N,X){X.onOptionsChange({...X.options,frameIndex:N.value||0})}const Zi={wrapper:S.css`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,selectWrapper:S.css`
    padding: 8px 8px 0px 8px;
  `};var xr=(N=>(N.Raw="raw",N.JSON="json",N.Auto="auto",N.None="none",N))(xr||{});class _r extends A.PureComponent{constructor(X){super(X),this.styles=Qu(be.v.theme2),this.streamObserver={next:ee=>{(0,ar.se)(ee)?this.setState({status:ee,changed:Date.now()}):(0,ar.RL)(ee)?this.setState({message:ee.message,changed:Date.now()}):console.log("ignore",ee)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.onSaveJSON=ee=>{const{options:fe,onOptionsChange:Ee}=this.props;try{const xe=JSON.parse(ee);Ee({...fe,json:xe})}catch(xe){console.log("Error reading JSON",xe)}},this.onPublishClicked=async()=>{const{addr:ee}=this.state;if(!ee){console.log("invalid address");return}const fe=this.props.options?.json;if(!fe){console.log("nothing to publish");return}const Ee=await(0,Qi.gj)().publish(ee,fe);console.log("onPublishClicked (response from publish)",Ee)},this.isValid=!!(0,Qi.gj)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(X){this.props.options?.channel!==X.options?.channel&&this.loadChannel()}async loadChannel(){const X=this.props.options?.channel;if(!(0,ar.nU)(X)){console.log("INVALID",X),this.unsubscribe(),this.setState({addr:void 0});return}if((0,w.isEqual)(X,this.state.addr)){console.log("Same channel",this.state.addr);return}const ee=(0,Qi.gj)();if(!ee){console.log("INVALID",X),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",X);try{this.subscription=ee.getStream(X).subscribe(this.streamObserver),this.setState({addr:X,error:void 0})}catch(fe){this.setState({addr:void 0,error:fe})}}renderNotEnabled(){const X=`[feature_toggles]
    enable = live`;return A.createElement(Wa.b,{title:"Grafana Live",severity:"info"},A.createElement("p",null,"Grafana live requires a feature flag to run"),A.createElement("b",null,"custom.ini:"),A.createElement("pre",null,X))}renderMessage(X){const{options:ee}=this.props,{message:fe}=this.state;if(!fe)return A.createElement("div",null,A.createElement("h4",null,"Waiting for data:"),ee.channel?.scope,"/",ee.channel?.namespace,"/",ee.channel?.path);if(ee.message===xr.JSON)return A.createElement(ku.g,{json:fe,open:5});if(ee.message===xr.Auto&&fe instanceof ei.Av){const Ee={series:(0,bi.SM)({data:[fe],theme:be.v.theme2,replaceVariables:Ae=>Ae,fieldConfig:{defaults:{},overrides:[]}}),state:Pc.Gu.Streaming},xe={...this.props,options:{frameIndex:0,showHeader:!0}};return A.createElement(Cc,{...xe,data:Ee,height:X})}return A.createElement("pre",null,JSON.stringify(fe))}renderPublish(X){const{options:ee}=this.props;return A.createElement(A.Fragment,null,A.createElement(qo.p,{height:X-32,language:"json",value:ee.json?JSON.stringify(ee.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),A.createElement("div",{style:{height:32}},A.createElement(Ce.zx,{onClick:this.onPublishClicked},"Publish")))}renderStatus(){const{status:X}=this.state;if(X?.state===ar.yS.Connected)return;let ee="";return X&&(ee=this.styles.status[X.state]),A.createElement("div",{className:(0,S.cx)(ee,this.styles.statusWrap)},X?.state)}renderBody(){const{status:X}=this.state,{options:ee,height:fe}=this.props;if(ee.publish){if(ee.message===xr.None)return A.createElement("div",null,this.renderPublish(fe));const Ee=fe/2;return A.createElement("div",null,A.createElement("div",{style:{height:Ee,overflow:"hidden"}},A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Ee))),A.createElement("div",null,this.renderPublish(Ee)))}return ee.message===xr.None?A.createElement("pre",null,JSON.stringify(X)):A.createElement("div",{style:{overflow:"hidden",height:fe}},A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(fe)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:X,error:ee}=this.state;return X?ee?A.createElement("div",null,A.createElement("h2",null,"ERROR"),A.createElement("div",null,JSON.stringify(ee))):A.createElement(A.Fragment,null,this.renderStatus(),this.renderBody()):A.createElement(Wa.b,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const Qu=(0,sn.B)(N=>({statusWrap:S.css`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${N.components.panel.background};
    padding: 10px;
    z-index: ${N.zIndex.modal};
  `,status:{[ar.yS.Pending]:S.css`
      border: 1px solid ${N.v1.palette.orange};
    `,[ar.yS.Connected]:S.css`
      border: 1px solid ${N.colors.success.main};
    `,[ar.yS.Connecting]:S.css`
      border: 1px solid ${N.v1.palette.brandWarning};
    `,[ar.yS.Disconnected]:S.css`
      border: 1px solid ${N.colors.warning.main};
    `,[ar.yS.Shutdown]:S.css`
      border: 1px solid ${N.colors.error.main};
    `,[ar.yS.Invalid]:S.css`
      border: 1px solid red;
    `}})),Ji=new ue.c(_r).setPanelOptions(N=>{N.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:vc,defaultValue:{}}),N.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:xr.Raw,label:"Raw Text"},{value:xr.JSON,label:"JSON"},{value:xr.Auto,label:"Auto"},{value:xr.None,label:"None"}]},defaultValue:xr.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})});var ti=e(13787),ni=e(20053),Zu=e(51927),Ju=e(54972),Xu=e(59985);const qu=({data:N,timeZone:X,fieldConfig:ee,options:{showLabels:fe,showTime:Ee,wrapLogMessage:xe,showCommonLabels:Ae,prettifyLogMessage:We,sortOrder:ke,dedupStrategy:rt,enableLogDetails:at},title:Et,id:Tt})=>{const pt=ke===yt.UV.Ascending,At=(0,ie.wW)(em(Et,pt)),[kt,It]=(0,A.useState)(0),Bt=(0,A.useRef)(null),{eventBus:Xt}=(0,kn.R9)(),Zt=(0,A.useCallback)(xn=>{xn?Xt.publish(new it.es({point:{time:xn.timeEpochMs}})):Xt.publish(new it.xH)},[Xt]),[Qt,dn,Yt]=(0,A.useMemo)(()=>{const xn=N?(0,ni.aB)(N.series,N.request?.intervalMs,void 0,N.request?.targets):null,Tn=xn?.rows||[],Kn=xn?.meta?.find(ta=>ta.label===ni.Qp),Ln=(0,ni.UW)(Tn,rt);return[Tn,Ln,Kn]},[N,rt]);(0,A.useLayoutEffect)(()=>{pt&&Bt.current?It(Bt.current.offsetHeight):It(0)},[pt,Qt]);const En=(0,A.useCallback)((xn,Tn)=>(0,yo.a_)({field:xn,rowIndex:Tn,range:N.timeRange}),[N]);if(!N||Qt.length===0)return A.createElement(Zu.Z,{fieldConfig:ee,panelId:Tt,data:N,needsStringField:!0});const Sn=()=>A.createElement("div",{className:At.labelContainer},A.createElement("span",{className:At.label},"Common labels:"),A.createElement(Ju.j,{labels:Yt?Yt.value:{labels:"(no common labels)"}}));return A.createElement(Be.$,{autoHide:!0,scrollTop:kt},A.createElement("div",{className:At.container,ref:Bt},Ae&&!pt&&Sn(),A.createElement(Xu.w,{logRows:Qt,deduplicatedRows:dn,dedupStrategy:rt,showLabels:fe,showTime:Ee,wrapLogMessage:xe,prettifyLogMessage:We,timeZone:X,getFieldLinks:En,logsSortOrder:ke,enableLogDetails:at,previewLimit:pt?Qt.length:void 0,onLogRowHover:Zt,app:me.zj.Dashboard}),Ae&&pt&&Sn()))},em=(N,X)=>ee=>({container:S.css`
    margin-bottom: ${ee.spacing(1.5)};
    //We can remove this hot-fix when we fix panel menu with no title overflowing top of all panels
    margin-top: ${ee.spacing(N?0:2.5)};
  `,labelContainer:S.css`
    margin: ${X?ee.spacing(.5,0,.5,0):ee.spacing(0,0,.5,.5)};
    display: flex;
    align-items: center;
  `,label:S.css`
    margin-right: ${ee.spacing(.5)};
    font-size: ${ee.typography.bodySmall.fontSize};
    font-weight: ${ee.typography.fontWeightMedium};
  `});class xc{getSuggestionsForData(X){const ee=X.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:fe}=X;!fe.hasData||!fe.hasTimeField||!fe.hasStringField||(fe.preferredVisualisationType==="logs"?ee.append({name:Ma.y.Logs,score:un._.Best}):ee.append({name:Ma.y.Logs}))}}const tm=new ue.c(qu).setPanelOptions(N=>{N.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:yt.Y4.none,label:"None",description:ti.Uv[yt.Y4.none]},{value:yt.Y4.exact,label:"Exact",description:ti.Uv[yt.Y4.exact]},{value:yt.Y4.numbers,label:"Numbers",description:ti.Uv[yt.Y4.numbers]},{value:yt.Y4.signature,label:"Signature",description:ti.Uv[yt.Y4.signature]}]},defaultValue:yt.Y4.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:yt.UV.Descending,label:"Newest first"},{value:yt.UV.Ascending,label:"Oldest first"}]},defaultValue:yt.UV.Descending})}).setSuggestionsSupplier(new xc);var nm=e(53764),bc=e(6981),Mc=e(13724);function Xi(N){const{width:X,options:{feedUrl:ee=bc.k,showImage:fe}}=N,{state:Ee,getNews:xe}=(0,Mc.j)(ee);return(0,A.useEffect)(()=>{const Ae=N.eventBus.subscribe(xa.U5,xe);return()=>{Ae.unsubscribe()}},[xe,N.eventBus]),(0,A.useEffect)(()=>{xe()},[xe]),Ee.error?A.createElement("div",null,"Error loading RSS feed."):Ee.loading?A.createElement("div",null,"Loading..."):Ee.value?A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Ee.value.map((Ae,We)=>A.createElement(nm.S,{key:We,index:We,width:X,showImage:fe,data:Ee.value}))):null}const qi={showImage:!0},am=new ue.c(Xi).setPanelOptions(N=>{N.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:bc.k},defaultValue:qi.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:qi.showImage})});var sm=e(58635),Sc=e(74538),rm=e(68545);const el=({width:N,height:X,data:ee,options:fe})=>{const Ee=(0,yo.u8)(ee.timeRange);if(!ee||!ee.series.length)return A.createElement("div",{className:"panel-empty"},A.createElement("p",null,"No data found in response"));const xe=(0,sm.Z)(rm.Ee);return A.createElement("div",{style:{width:N,height:X}},A.createElement(Sc.E,{dataFrames:xe(ee.series,fe),getLinks:Ee}))};var no=e(90208),So=e(15448);const om=({value:N,onChange:X,context:ee})=>{const fe=(0,ie.wW)(im),Ee=()=>{const We={field:"",color:""};X(N?[...N,We]:[We])},xe=We=>{const ke=N?.slice();ke.splice(We,1),X(ke)},Ae=(We,ke,rt)=>{let at=N?.slice()??[];at[We][ke]=rt,X(at)};return A.createElement(A.Fragment,null,N?.map((We,ke)=>A.createElement("div",{className:fe.section,key:ke},A.createElement(So.b,{context:ee,value:We.field??"",onChange:rt=>{Ae(ke,"field",rt)},item:{settings:{filter:rt=>rt.name.includes("arc__")},id:`arc-field-${ke}`,name:`arc-field-${ke}`,editor:()=>null}}),A.createElement(no.zH,{color:We.color||"#808080",onChange:rt=>{Ae(ke,"color",rt)}}),A.createElement(Ce.zx,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>xe(ke),title:"Remove arc"}))),A.createElement(Ce.zx,{size:"sm",icon:"plus",onClick:Ee,variant:"secondary"},"Add arc"))},im=()=>({section:S.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `}),lm=new ue.c(el).setPanelOptions((N,X)=>{N.addNestedOptions({category:["Nodes"],path:"nodes",build:ee=>{ee.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),ee.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),ee.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:om})}}),N.addNestedOptions({category:["Edges"],path:"edges",build:ee=>{ee.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),ee.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})});var cm=e(92156),dm=e(26993),Tc=e(9521),um=e(32567),mm=e(68970),Oc=e(66838),fm=e(46495),Ic=e(95670),tl=e(28550),gm=e(18543),nl=e(50800);let pm=0;const al=()=>pm++;function hm(N){const X=(0,A.useRef)(null);return X.current===null&&(X.current=N+al()),X.current.toString()}var wr=(N=>(N.Donut="donut",N.Pie="pie",N))(wr||{}),cr=(N=>(N.Name="name",N.Percent="percent",N.Value="value",N))(cr||{}),Gr=(N=>(N.Percent="percent",N.Value="value",N))(Gr||{});const pg={values:[]},vm={displayLabels:[]};function Rc(N){return!N.field.custom?.hideFrom?.viz&&!isNaN(N.display.numeric)}function Ac(N,X){return X.display.numeric+N}const Em=({fieldDisplayValues:N,pieType:X,width:ee,height:fe,highlightedTitle:Ee,displayLabels:xe=[],tooltipOptions:Ae})=>{const We=(0,ie.l4)(),ke=hm("PieChart"),rt=(0,ie.wW)(To),at=(0,fm.Z)(),{containerRef:Et,TooltipInPortal:Tt}=(0,Ic.Z)({detectBounds:!0,scroll:!0}),pt=N.filter(Rc),At=Yt=>Yt.display.numeric,kt=Yt=>`${ke}-${(0,tl.Z)(Yt).toHex()}`,It=Yt=>`url(#${kt(Yt)})`,Bt=xe.length>0,Xt=Ae.mode!=="none"&&at.tooltipOpen,Zt=pt.reduce(Ac,0),Qt=Dm(ee,fe,X),dn=[...new Set(pt.map(Yt=>Yt.display.color??wt.R))];return A.createElement("div",{className:rt.container},A.createElement("svg",{width:Qt.size,height:Qt.size,ref:Et,style:{overflow:"visible"}},A.createElement(mm.Z,{top:Qt.position,left:Qt.position},dn.map(Yt=>A.createElement(um.Z,{key:Yt,id:kt(Yt),from:Bc(Yt,We),to:Cm(Yt,We),fromOffset:Qt.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:Qt.outerRadius})),A.createElement(Oc.Z,{data:pt,pieValue:At,outerRadius:Qt.outerRadius,innerRadius:Qt.innerRadius,cornerRadius:3,padAngle:.005},Yt=>A.createElement(A.Fragment,null,Yt.arcs.map(En=>{const Sn=En.data.display.color??wt.R,xn=Nc(Ee,En);return En.data.hasLinks&&En.data.getLinks?A.createElement(gm.V,{key:En.index,links:En.data.getLinks},Tn=>A.createElement(Lc,{tooltip:at,highlightState:xn,arc:En,pie:Yt,fill:It(Sn),openMenu:Tn.openMenu,tooltipOptions:Ae})):A.createElement(Lc,{key:En.index,highlightState:xn,tooltip:at,arc:En,pie:Yt,fill:It(Sn),tooltipOptions:Ae})}),Bt&&Yt.arcs.map(En=>{const Sn=Nc(Ee,En);return A.createElement(ym,{arc:En,key:En.index,highlightState:Sn,outerRadius:Qt.outerRadius,innerRadius:Qt.innerRadius,displayLabels:xe,total:Zt,color:We.colors.text.primary})}))))),Xt?A.createElement(Tt,{key:Math.random(),top:at.tooltipTop,className:rt.tooltipPortal,left:at.tooltipLeft,unstyled:!0,applyPositionStyle:!0},A.createElement(nl.c,{series:at.tooltipData})):null)};function Lc({arc:N,pie:X,highlightState:ee,openMenu:fe,fill:Ee,tooltip:xe,tooltipOptions:Ae}){const We=(0,ie.l4)(),ke=(0,ie.wW)(To),{eventBus:rt}=(0,kn.R9)(),at=(0,A.useCallback)(pt=>{rt?.publish({type:it.xH.type,payload:{raw:pt,x:0,y:0,dataId:N.data.display.title}}),xe.hideTooltip()},[rt,N,xe]),Et=(0,A.useCallback)(pt=>{rt?.publish({type:it.es.type,payload:{raw:pt,x:0,y:0,dataId:N.data.display.title}});const At=pt.currentTarget.ownerSVGElement;if(At){const kt=(0,Tc.Z)(At,pt);xe.showTooltip({tooltipLeft:kt.x,tooltipTop:kt.y,tooltipData:Pm(X,N,Ae)})}},[rt,N,xe,X,Ae]),Tt=Uc(ee,ke);return A.createElement("g",{key:N.data.display.title,className:Tt,onMouseMove:Ae.mode!=="none"?Et:void 0,onMouseOut:at,onClick:fe,"aria-label":qe.wl.components.Panels.Visualization.PieChart.svgSlice},A.createElement("path",{d:X.path({...N}),fill:Ee,stroke:We.colors.background.primary,strokeWidth:1}))}function ym({arc:N,outerRadius:X,innerRadius:ee,displayLabels:fe,total:Ee,color:xe,highlightState:Ae}){const We=(0,ie.wW)(To),ke=ee===0?X/6:ee,[rt,at]=ai(N,X,ke);if(!(N.endAngle-N.startAngle>=.3))return null;let Tt=fe.includes(cr.Name)?Math.min(Math.max(X/150*14,12),30):Math.min(Math.max(X/100*14,12),36);return A.createElement("g",{className:Uc(Ae,We)},A.createElement("text",{fill:xe,x:rt,y:at,dy:".33em",fontSize:Tt,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},fe.includes(cr.Name)&&A.createElement("tspan",{x:rt,dy:"1.2em"},N.data.display.title),fe.includes(cr.Value)&&A.createElement("tspan",{x:rt,dy:"1.2em"},(0,Rs.zc)(N.data.display)),fe.includes(cr.Percent)&&A.createElement("tspan",{x:rt,dy:"1.2em"},(N.data.display.numeric/Ee*100).toFixed(N.data.field.decimals??0)+"%")))}function Pm(N,X,ee){return ee.mode==="multi"?N.arcs.filter(fe=>{const Ee=fe.data.field;return Ee&&!Ee.custom?.hideFrom?.tooltip&&!Ee.custom?.hideFrom?.viz}).map(fe=>({color:fe.data.display.color??wt.R,label:fe.data.display.title,value:(0,Rs.zc)(fe.data.display),isActive:fe.index===X.index})):[{color:X.data.display.color??wt.R,label:X.data.display.title,value:(0,Rs.zc)(X.data.display)}]}function ai(N,X,ee){const fe=(X+ee)/2,Ee=(+N.startAngle+ +N.endAngle)/2-Math.PI/2;return[Math.cos(Ee)*fe,Math.sin(Ee)*fe]}function Bc(N,X){return(0,tl.Z)(N).darken(20*(X.isDark?1:-.7)).spin(4).toRgbString()}function Cm(N,X){return(0,tl.Z)(N).darken(10*(X.isDark?1:-.7)).spin(-4).toRgbString()}function Dm(N,X,ee,fe=16){const Ee=Math.min(X,N),xe=(Ee-fe*2)/2,Ae=ee===wr.Pie?xe:Math.max(xe/3,20),We=xe-Ae,ke=(Ee-fe*2)/2,rt=1-(xe-We)/xe;return{position:ke+fe,size:Ee,outerRadius:xe,innerRadius:We,gradientFromOffset:rt}}var xm=(N=>(N[N.Highlighted=0]="Highlighted",N[N.Deemphasized=1]="Deemphasized",N[N.Normal=2]="Normal",N))(xm||{});function Nc(N,X){return N?N===X.data.display.title?0:1:2}function Uc(N,X){switch(N){case 0:return X.svgArg.highlighted;case 1:return X.svgArg.deemphasized;case 2:default:return X.svgArg.normal}}const To=N=>({container:S.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:S.css`
        transition: all 200ms ease-in-out;
      `,highlighted:S.css`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:S.css`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:S.css`
      ${(0,Vo.getTooltipContainerStyles)(N)}
    `}),wc={displayMode:yt.jK.List,showLegend:!0,placement:"right",calcs:[],values:[Gr.Percent]};function bm(N){const{data:X,timeZone:ee,fieldConfig:fe,replaceVariables:Ee,width:xe,height:Ae,options:We,id:ke}=N,rt=(0,ie.l4)(),at=Tm(),Et=(0,cm.nG)({fieldConfig:fe,reduceOptions:We.reduceOptions,data:X.series,theme:rt,replaceVariables:Ee,timeZone:ee});return Sm(Et)?A.createElement(bs.AY,{width:xe,height:Ae,legend:Mm(N,Et)},(Tt,pt)=>A.createElement(Em,{width:Tt,height:pt,highlightedTitle:at,fieldDisplayValues:Et,tooltipOptions:We.tooltip,pieType:We.pieType,displayLabels:We.displayLabels})):A.createElement(fa.Z,{panelId:ke,fieldConfig:fe,data:X})}function Mm(N,X){const ee=N.options.legend??wc;if(ee.showLegend===!1)return;const fe=X.filter(Rc).reduce(Ac,0),Ee=X.sort((xe,Ae)=>isNaN(xe.display.numeric)?1:isNaN(Ae.display.numeric)?-1:Ae.display.numeric-xe.display.numeric).map((xe,Ae)=>{const We=xe.field.custom?.hideFrom??{};if(We.legend)return;const ke=Boolean(We.viz),rt=xe.display;return{label:rt.title??"",color:rt.color??wt.R,yAxis:1,disabled:ke,getItemKey:()=>(rt.title??"")+Ae,getDisplayValues:()=>{const at=ee.values??[];let Et=[];if(at.includes(Gr.Value)&&Et.push({numeric:rt.numeric,text:(0,Rs.zc)(rt),title:"Value"}),at.includes(Gr.Percent)){const Tt=ke?0:rt.numeric/fe,pt=Tt*100;Et.push({numeric:Tt,percent:pt,text:ke||isNaN(Tt)?N.fieldConfig.defaults.noValue??"-":pt.toFixed(xe.field.decimals??0)+"%",title:at.length>1?"Percent":""})}return Et}}}).filter(xe=>!!xe);return A.createElement(ir.l,{items:Ee,seriesVisibilityChangeBehavior:dm.Y.Hide,placement:ee.placement,displayMode:ee.displayMode})}function Sm(N){return N.some(X=>X.view?.dataFrame.length)}function Tm(){const[N,X]=(0,A.useState)(),{eventBus:ee}=(0,kn.R9)();return(0,A.useEffect)(()=>{const fe=Ae=>{X(Ae.payload.dataId)},Ee=Ae=>{X(void 0)},xe=new ms.w0;return xe.add(ee.getStream(it.es).subscribe({next:fe})),xe.add(ee.getStream(it.xH).subscribe({next:Ee})),()=>{xe.unsubscribe()}},[X,ee]),N}const Wc=(N,X,ee)=>{if(X==="grafana-piechart-panel"&&ee.angular){const fe=ee.angular,Ee=[];let xe=N.options;if(fe.aliasColors)for(const Ae of Object.keys(fe.aliasColors)){const We=fe.aliasColors[Ae];We&&Ee.push({matcher:{id:Ur.mi.byName,options:Ae},properties:[{id:zt.qb.Color,value:{mode:wt.S.Fixed,fixedColor:We}}]})}if(N.fieldConfig={overrides:Ee,defaults:{unit:fe.format,decimals:fe.decimals?fe.decimals:0}},xe.legend={placement:"right",values:[],displayMode:yt.jK.Table,showLegend:!0,calcs:[]},fe.valueName)switch(xe.reduceOptions={calcs:[]},fe.valueName){case"current":xe.reduceOptions.calcs=["lastNotNull"];break;case"min":xe.reduceOptions.calcs=["min"];break;case"max":xe.reduceOptions.calcs=["max"];break;case"avg":xe.reduceOptions.calcs=["mean"];break;case"total":xe.reduceOptions.calcs=["sum"];break}switch(fe.legendType){case"Under graph":xe.legend.placement="bottom";break;case"Right side":xe.legend.placement="right";break}switch(fe.pieType){case"pie":xe.pieType=wr.Pie;break;case"donut":xe.pieType=wr.Donut;break}return fe.legend&&(fe.legend.show||(xe.legend.showLegend=!1),fe.legend.values&&xe.legend.values.push(Gr.Value),fe.legend.percentage&&xe.legend.values.push(Gr.Percent)),fe.legendType==="On graph"&&(xe.legend.showLegend=!1,xe.displayLabels=[cr.Name],fe.legend.values&&xe.displayLabels.push(cr.Value),fe.legend.percentage&&xe.displayLabels.push(cr.Percent)),xe}return{}};class Fc{getSuggestionsForData(X){const ee=X.getListAppender({name:Ma.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[cr.Percent],legend:{placement:"right",values:[]}},cardOptions:{previewModifier:Ee=>{Ee.options.legend.showLegend=!1}}}),{dataSummary:fe}=X;if(fe.hasNumberField){if(fe.hasStringField&&fe.frameCount===1){if(fe.rowCountTotal>30||fe.rowCountTotal<2)return;ee.append({name:Ma.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),ee.append({name:Ma.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:wr.Donut}});return}fe.numberFieldCount>30||fe.numberFieldCount<2||(ee.append({name:Ma.y.PieChart}),ee.append({name:Ma.y.PieChartDonut,options:{pieType:wr.Donut}}))}}}const Om=new ue.c(bm).setPanelChangeHandler(Wc).useFieldConfig({disableStandardOptions:[zt.qb.Thresholds],standardOptions:{[zt.qb.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:wt.S.PaletteClassic}}},useCustomConfig:N=>{Da.B(N)}}).setPanelOptions(N=>{(0,Uo.j)(N),N.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:wr.Pie,label:"Pie"},{value:wr.Donut,label:"Donut"}]},defaultValue:wr.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:cr.Percent,label:"Percent"},{value:cr.Name,label:"Name"},{value:cr.Value,label:"Value"}]}}),Ea.L(N),ba.J(N,!1),N.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:Gr.Percent,label:"Percent"},{value:Gr.Value,label:"Value"}]},showIf:X=>X.legend.showLegend!==!1})}).setSuggestionsSupplier(new Fc);var Im=e(98967),$c=e(49616),Kc=e(59420);const Vc=({data:N,alignedData:X,seriesIdx:ee,datapointIdx:fe,timeZone:Ee,onAnnotationAdd:xe})=>{const Ae=(0,ie.l4)();if(!N||fe==null)return null;const We=X.fields[ee],ke=[],rt=new Set;if(We.getLinks){const Yt=We.values[fe],En=We.display?We.display(Yt):{text:`${Yt}`,numeric:+Yt};We.getLinks({calculatedValue:En,valueRowIndex:fe}).forEach(Sn=>{const xn=`${Sn.title}/${Sn.href}`;rt.has(xn)||(ke.push(Sn),rt.add(xn))})}const at=X.fields[0],Et=at.display||(0,Ys.U_)({field:at,timeZone:Ee,theme:Ae}),Tt=We.state?.origin,pt=We.display||(0,Ys.U_)({field:We,timeZone:Ee,theme:Ae}),At=We.values[fe],kt=pt(At),It=Tt?(0,qt.CZ)(N[Tt.frameIndex].fields[Tt.fieldIndex],N[Tt.frameIndex],N):null,Bt=(0,Ms.iK)(We,fe);let Xt;Bt&&(Xt=at.values[Bt]);const Zt=at.values[fe];let Qt=null,dn=null;if(Xt){const Yt=Xt&&(0,Ms.Y)(Xt-Zt);dn=A.createElement(A.Fragment,null,A.createElement("br",null),A.createElement("strong",null,"Duration:")," ",Yt),Qt=A.createElement(A.Fragment,null," to"," ",A.createElement("strong",null,Et(at.values[Bt]).text))}return A.createElement("div",null,A.createElement("div",{style:{fontSize:Ae.typography.bodySmall.fontSize}},It,A.createElement("br",null),A.createElement(nl.V,{label:kt.text,color:kt.color||wt.R,isActive:!0}),"From ",A.createElement("strong",null,Et(at.values[fe]).text),Qt,dn),A.createElement("div",{style:{margin:Ae.spacing(1,-1,-1,-1),borderTop:`1px solid ${Ae.colors.border.weak}`}},xe&&A.createElement($s.s,{label:"Add annotation",icon:"comment-alt",onClick:xe}),ke.length>0&&ke.map((Yt,En)=>A.createElement($s.s,{key:En,icon:"external-link-alt",target:Yt.target,label:Yt.title,url:Yt.href,onClick:Yt.onClick}))))};Vc.displayName="StateTimelineTooltip";const si=10,sl=({data:N,timeRange:X,timeZone:ee,options:fe,width:Ee,height:xe,replaceVariables:Ae,onChangeTimeRange:We})=>{const ke=(0,ie.l4)(),rt=(0,A.useRef)(void 0),at=(0,A.useRef)(!1),[Et,Tt]=(0,A.useState)(void 0),[pt,At]=(0,A.useState)(null),[kt,It]=(0,A.useState)(null),[Bt,Xt]=(0,A.useState)(null),[Zt,Qt]=(0,A.useState)(!1),[dn,Yt]=(0,A.useState)(!1),{sync:En,canAddAnnotations:Sn}=(0,kn.R9)(),xn=()=>{at.current=!1,At(null),Yt(!1)},Tn=()=>{at.current=!at.current,Yt(at.current)},{frames:Kn,warn:Ln}=(0,A.useMemo)(()=>(0,Ms.AR)(N.series,fe.mergeValues??!0,X,ke),[N.series,fe.mergeValues,X,ke]),ta=(0,A.useMemo)(()=>(0,Ms.SA)(Kn,fe.legend,ke),[Kn,fe.legend,ke]),Un=(0,A.useMemo)(()=>Fi(fe.timezone,ee),[fe.timezone,ee]),In=(0,A.useCallback)((oa,$a,ka,Aa)=>{const _a=Kn??[],Gn=_a.reduce((Nn,Hn)=>Nn+Hn.fields.filter(qn=>qn.type!==tn.fS.time).length,0);return $a===null||ka===null||!oa.meta?.transformations?.length&&oa.fields.length-1!==Gn||!oa.fields[$a]?null:A.createElement(A.Fragment,null,dn&&A.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},A.createElement(fs.P,{onClick:xn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),A.createElement(Vc,{data:_a,alignedData:oa,seriesIdx:$a,datapointIdx:ka,timeZone:ee,onAnnotationAdd:Aa}))},[ee,Kn,dn]);if(!Kn||Ln)return A.createElement("div",{className:"panel-empty"},A.createElement("p",null,Ln??"No data found in response"));if(Kn.length===1){const oa=(0,ei.MB)(Kn[0])}const Qn=Boolean(Sn&&Sn());return A.createElement(Kc.K,{theme:ke,frames:Kn,structureRev:N.structureRev,timeRange:X,timeZone:Un,width:Ee,height:xe,legendItems:ta,...fe,mode:Ms.KN.Changes},(oa,$a)=>(rt.current!==oa&&(rt.current=Ca({config:oa,onUPlotClick:Tn,setFocusedSeriesIdx:It,setFocusedPointIdx:Xt,setCoords:At,setHover:Tt,isToolTipOpen:at,isActive:Zt,setIsActive:Qt,sync:En})),A.createElement(A.Fragment,null,A.createElement(Wo.R,{config:oa,onZoom:We}),A.createElement(Pr,{config:oa,onChangeTimeRange:We}),N.annotations&&A.createElement(Bi,{annotations:N.annotations,config:oa,timeZone:ee}),Qn?A.createElement(Ii,{data:$a,timeZone:ee,config:oa},({startAnnotating:ka})=>fe.tooltip.mode===yt.f3.None||Bt===null||!Zt&&En&&En()===Es.m.Crosshair?null:A.createElement(Oa.h_,null,Et&&pt&&kt&&A.createElement(Rr.S,{position:{x:pt.viewport.x,y:pt.viewport.y},offset:{x:si,y:si},allowPointerEvents:at.current},In($a,kt,Bt,()=>{ka({coords:{plotCanvas:pt.canvas,viewport:pt.viewport}}),xn()})))):A.createElement(Oa.h_,null,fe.tooltip.mode!==yt.f3.None&&Et&&pt&&A.createElement(Rr.S,{position:{x:pt.viewport.x,y:pt.viewport.y},offset:{x:si,y:si},allowPointerEvents:at.current},In($a,kt,Bt))))))};var zc=e(32195);const Rm=(N,X,ee)=>{let fe=N.options??{};if(X==="natel-discrete-panel"&&ee.angular){const Ee=ee.angular,xe=N.fieldConfig??{defaults:{},overrides:[]};Ee.units&&(xe.defaults.unit=Ee.units);const Ae={fillOpacity:100,lineWidth:0};xe.defaults.custom=Ae,fe.mergeValues=!0;const We={type:zc.H.ValueToText,options:{}};if(xe.defaults.mappings=[We],(0,w.isArray)(Ee.colorMaps))for(const ke of Ee.colorMaps){const rt=ke.color;rt&&(We.options[ke.text]={color:rt})}if((0,w.isArray)(Ee.valueMaps))for(const ke of Ee.valueMaps){const rt=ke.text,at=ke.value;if(rt&&at){let Et=We.options[at];Et?Et.text=rt:We.options[at]={text:rt}}}if((0,w.isArray)(Ee.rangeMaps))for(const ke of Ee.rangeMaps){let rt=+ke.from,at=+ke.to;const Et=ke.text;Et&&xe.defaults.mappings.push({type:zc.H.RangeToText,options:{from:rt,to:at,result:{text:Et}}})}N.fieldConfig=xe}return fe},ri={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:yt.Jp.Auto},Hc={fillOpacity:70,lineWidth:0};class Am{getSuggestionsForData(X){const{dataSummary:ee}=X;if(!ee.hasData||!ee.hasTimeField||!ee.hasStringField&&!ee.hasNumberField||ee.numberFieldCount>=30||ee.preferredVisualisationType==="logs")return;X.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Ma.y.StateTimeline})}}const oi=new ue.c(sl).setPanelChangeHandler(Rm).useFieldConfig({standardOptions:{[zt.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:wt.S.ContinuousGrYlRd}}},useCustomConfig:N=>{N.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Hc.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:Hc.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:$c.c,override:$c.c,shouldApply:X=>X.type!==tn.fS.time,process:on.kG})}}).setPanelOptions(N=>{N.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:ri.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:yt.Jp.Auto,label:"Auto"},{value:yt.Jp.Always,label:"Always"},{value:yt.Jp.Never,label:"Never"}]},defaultValue:ri.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:ri.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:ri.rowHeight}),ba.J(N,!1),Ea.L(N,!0)}).setSuggestionsSupplier(new Am).setDataSupport({annotations:!0}),rl=({data:N,alignedData:X,seriesIdx:ee,datapointIdx:fe,timeZone:Ee})=>{const xe=(0,ie.l4)();if(!N||fe==null)return null;const Ae=X.fields[ee],We=[],ke=new Set;if(Ae.getLinks){const It=Ae.values[fe],Bt=Ae.display?Ae.display(It):{text:`${It}`,numeric:+It};Ae.getLinks({calculatedValue:Bt,valueRowIndex:fe}).forEach(Xt=>{const Zt=`${Xt.title}/${Xt.href}`;ke.has(Zt)||(We.push(Xt),ke.add(Zt))})}const rt=X.fields[0],at=rt.display||(0,Ys.U_)({field:rt,timeZone:Ee,theme:xe}),Et=Ae.state?.origin,Tt=Ae.display||(0,Ys.U_)({field:Ae,timeZone:Ee,theme:xe}),pt=Ae.values[fe],At=Tt(pt),kt=Et?(0,qt.CZ)(N[Et.frameIndex].fields[Et.fieldIndex],N[Et.frameIndex],N):null;return A.createElement("div",null,A.createElement("div",{style:{fontSize:xe.typography.bodySmall.fontSize}},A.createElement("strong",null,at(rt.values[fe]).text),A.createElement("br",null),A.createElement(nl.V,{label:At.text,color:At.color||wt.R,isActive:!0}),kt),We.length>0&&A.createElement("div",{style:{margin:xe.spacing(1,-1,-1,-1),borderTop:`1px solid ${xe.colors.border.weak}`}},We.map((It,Bt)=>A.createElement($s.s,{key:Bt,icon:"external-link-alt",target:It.target,label:It.title,url:It.href,onClick:It.onClick}))))};rl.displayName="StatusHistoryTooltip";const ii=10,Lm=({data:N,timeRange:X,timeZone:ee,options:fe,width:Ee,height:xe,onChangeTimeRange:Ae})=>{const We=(0,ie.l4)(),ke=(0,A.useRef)(void 0),rt=(0,A.useRef)(!1),[at,Et]=(0,A.useState)(void 0),[Tt,pt]=(0,A.useState)(null),[At,kt]=(0,A.useState)(null),[It,Bt]=(0,A.useState)(null),[Xt,Zt]=(0,A.useState)(!1),[Qt,dn]=(0,A.useState)(!1),{sync:Yt}=(0,kn.R9)(),En=()=>{rt.current=!1,pt(null),dn(!1)},Sn=()=>{rt.current=!rt.current,dn(rt.current)},{frames:xn,warn:Tn}=(0,A.useMemo)(()=>(0,Ms.AR)(N.series,!1,X,We),[N.series,X,We]),Kn=(0,A.useMemo)(()=>(0,Ms.SA)(xn,fe.legend,We),[xn,fe.legend,We]),Ln=(0,A.useCallback)((In,Qn,oa)=>{const $a=xn??[],ka=$a.reduce((Aa,_a)=>Aa+_a.fields.filter(Gn=>Gn.type!==tn.fS.time).length,0);return Qn===null||oa===null||!In.meta?.transformations?.length&&In.fields.length-1!==ka||!In.fields[Qn]?null:A.createElement(A.Fragment,null,Qt&&A.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},A.createElement(fs.P,{onClick:En,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),A.createElement(rl,{data:$a,alignedData:In,seriesIdx:Qn,datapointIdx:oa,timeZone:ee}))},[ee,xn,Qt]),ta=In=>fe.tooltip.mode===yt.f3.None||It===null||!Xt&&Yt&&Yt()===Es.m.Crosshair?null:A.createElement(Oa.h_,null,at&&Tt&&At&&A.createElement(Rr.S,{position:{x:Tt.viewport.x,y:Tt.viewport.y},offset:{x:ii,y:ii},allowPointerEvents:rt.current},Ln(In,At,It))),Un=(0,A.useMemo)(()=>Fi(fe.timezone,ee),[fe.timezone,ee]);return!xn||Tn?A.createElement("div",{className:"panel-empty"},A.createElement("p",null,Tn??"No data found in response")):xn[0].length>Ee/2?A.createElement("div",{className:"panel-empty"},A.createElement("p",null,"Too many points to visualize properly. ",A.createElement("br",null),"Update the query to return fewer points. ",A.createElement("br",null),"(",xn[0].length," points received)")):A.createElement(Kc.K,{theme:We,frames:xn,structureRev:N.structureRev,timeRange:X,timeZone:Un,width:Ee,height:xe,legendItems:Kn,...fe,mode:Ms.KN.Samples},(In,Qn)=>(ke.current!==In&&(ke.current=Ca({config:In,onUPlotClick:Sn,setFocusedSeriesIdx:kt,setFocusedPointIdx:Bt,setCoords:pt,setHover:Et,isToolTipOpen:rt,isActive:Xt,setIsActive:Zt})),A.createElement(A.Fragment,null,A.createElement(Wo.R,{config:In,onZoom:Ae}),ta(Qn),A.createElement(Pr,{config:In,onChangeTimeRange:Ae}))))},hg={colWidth:.9,rowHeight:.9,showValue:yt.Jp.Auto},kc={fillOpacity:70,lineWidth:1};class Bm{getSuggestionsForData(X){const{dataSummary:ee}=X;if(!ee.hasData||!ee.hasTimeField||!ee.hasStringField&&!ee.hasNumberField||ee.numberFieldCount>=30||ee.rowCountMax>100||ee.preferredVisualisationType==="logs")return;X.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:wt.S.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:Ee=>{Ee.options.colWidth=.7}}}).append({name:Ma.y.StatusHistory})}}const Nm=new ue.c(Lm).useFieldConfig({standardOptions:{[zt.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:wt.S.Thresholds}}},useCustomConfig:N=>{N.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:kc.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:kc.fillOpacity,settings:{min:0,max:100,step:1}})}}).setPanelOptions(N=>{N.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:yt.Jp.Auto,label:"Auto"},{value:yt.Jp.Always,label:"Always"},{value:yt.Jp.Never,label:"Never"}]},defaultValue:yt.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),ba.J(N,!1),Ea.L(N,!0)}).setSuggestionsSupplier(new Bm);var Um=e(30779);const Oo={align:"auto",inspect:!1,cellOptions:{type:yt.h2.Auto}};var _c=e(8944);function wm({onChange:N,value:X,context:ee}){const fe=Ee=>{Ee?.currentTarget.checked&&(ee.options.footer.show=!1),N(Ee?.currentTarget.checked)};return A.createElement(_c.r,{value:Boolean(X),onChange:fe})}function Wm({cellOptions:N,onChange:X}){const ee=Ee=>{N.mode=Ee,X(N)},fe=Ee=>{N.valueDisplayMode=Ee,X(N)};return A.createElement(ls.Stack,{direction:"column",gap:0},A.createElement(As.g,{label:"Gauge display mode"},A.createElement(vo.S,{value:N?.mode??yt.QH.Gradient,onChange:ee,options:Fm})),A.createElement(As.g,{label:"Value display"},A.createElement(vo.S,{value:N?.valueDisplayMode??yt.M8.Text,onChange:fe,options:$m})))}const Fm=[{value:yt.QH.Basic,label:"Basic"},{value:yt.QH.Gradient,label:"Gradient"},{value:yt.QH.Lcd,label:"Retro LCD"}],$m=[{value:yt.M8.Color,label:"Value color"},{value:yt.M8.Text,label:"Text color"},{value:yt.M8.Hidden,label:"Hidden"}],Km=[{value:yt.v7.Basic,label:"Basic"},{value:yt.v7.Gradient,label:"Gradient"}],Vm=({cellOptions:N,onChange:X})=>{const ee=fe=>{N.mode=fe,X(N)};return A.createElement(As.g,{label:"Background display mode"},A.createElement(vo.S,{value:N?.mode??yt.v7.Gradient,onChange:ee,options:Km}))};var Gc=e(59472),ol=e(24115);const il=["drawStyle","lineInterpolation","barAlignment","lineWidth","fillOpacity","gradientMode","lineStyle","spanNulls","showPoints","pointSize"],Yc=N=>{const{cellOptions:X,onChange:ee}=N,fe=(0,A.useMemo)(()=>{const Ae=(0,Lr.F)(ol.U);return(0,Gc.j)(Ae,"ChartCell")},[]),Ee=(0,ie.wW)(Hm),xe={...ol.U,...X};return A.createElement(Xr.wc,null,fe.list(il.map(Ae=>`custom.${Ae}`)).map(Ae=>{if(Ae.showIf&&!Ae.showIf(xe))return null;const We=Ae.editor,ke=Ae.path;return A.createElement(As.g,{label:Ae.name,key:Ae.id,className:Ee.field},A.createElement(We,{onChange:rt=>ee({...X,[ke]:rt}),value:(zm(ke,xe)?xe[ke]:void 0)??Ae.defaultValue,item:Ae,context:{data:[]}}))}))};function zm(N,X){return N in X}const Hm=()=>({field:S.css`
    width: 100%;

    // @TODO don't show "scheme" option for custom gradient mode.
    // it needs thresholds to work, which are not supported
    // for area chart cell right now
    [title='Use color scheme to define gradient'] {
      display: none;
    }
  `}),ll=({value:N,onChange:X})=>{const ee=N.type,fe=(0,ie.wW)(vg),Ee=km.find(rt=>rt.value.type===ee);let[xe,Ae]=(0,A.useState)({});const We=rt=>{rt.value!==void 0&&(N=rt.value,xe[N.type]!==void 0&&Object.keys(xe[N.type]).length>1&&(N=(0,w.merge)(N,xe[N.type])),X(N))},ke=rt=>{xe[N.type]=(0,w.merge)(N,rt),Ae(xe),X(xe[N.type])};return A.createElement("div",{className:fe.fixBottomMargin},A.createElement(As.g,null,A.createElement(Je.Ph,{options:km,value:Ee,onChange:We})),ee===yt.h2.Gauge&&A.createElement(Wm,{cellOptions:N,onChange:ke}),ee===yt.h2.ColorBackground&&A.createElement(Vm,{cellOptions:N,onChange:ke}),ee===yt.h2.Sparkline&&A.createElement(Yc,{cellOptions:N,onChange:ke}))},jc={value:{type:yt.h2.Sparkline},label:"Sparkline"},km=[{value:{type:yt.h2.Auto},label:"Auto"},...be.v.featureToggles.timeSeriesTable?[jc]:[],{value:{type:yt.h2.ColorText},label:"Colored text"},{value:{type:yt.h2.ColorBackground},label:"Colored background"},{value:{type:yt.h2.Gauge},label:"Gauge"},{value:{type:yt.h2.JSONView},label:"JSON View"},{value:{type:yt.h2.Image},label:"Image"}],vg=N=>({fixBottomMargin:(0,S.css)({marginBottom:N.spacing(-2)})});var cl=e(69098);const _m=N=>(!N.pluginVersion&&N.columns&&console.log("Was angular table",N),N.options),Qc={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},Zc={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},Jc={cell:"color-background",row:"color-background",value:"color-text"},Xc=(N,X)=>[-1/0,...N].map((ee,fe)=>({color:X[fe],value:(0,w.isNumber)(ee)?ee:parseInt(ee,10)})),qc=(N,X)=>{const ee=N.transformations??[];if(Object.keys(Qc).includes(X.transform)){const fe={reducers:[]};X.transform==="timeseries_aggregations"&&(fe.includeTimeField=!1,fe.reducers=X.columns.map(Ee=>Zc[Ee.value])),ee.push({id:Qc[X.transform],options:fe})}return ee},ed=N=>{const ee={matcher:{id:/^\/.*\/$/.test(N.pattern)?Ur.mi.byRegexp:Ur.mi.byName,options:N.pattern},properties:[]};return N.alias&&ee.properties.push({id:"displayName",value:N.alias}),N.unit&&ee.properties.push({id:"unit",value:N.unit}),N.decimals&&ee.properties.push({id:"decimals",value:N.decimals}),N.type==="date"&&ee.properties.push({id:"unit",value:`time: ${N.dateFormat}`}),N.link&&ee.properties.push({id:"links",value:[{title:(0,w.defaultTo)(N.linkTooltip,""),url:(0,w.defaultTo)(N.linkUrl,""),targetBlank:(0,w.defaultTo)(N.linkTargetBlank,!1)}]}),N.colorMode&&ee.properties.push({id:"custom.cellOptions",value:{type:Jc[N.colorMode]}}),N.align&&ee.properties.push({id:"custom.align",value:N.align==="auto"?null:N.align}),N.thresholds?.length&&ee.properties.push({id:"thresholds",value:{mode:cl.H.Absolute,steps:Xc(N.thresholds,N.colors)}}),ee},Gm=N=>{let X={custom:{}};if(N){if(X=(0,w.omitBy)({unit:N.unit,decimals:N.decimals,displayName:N.alias,custom:{align:N.align==="auto"?null:N.align}},w.isNil),N.thresholds.length){const ee={mode:cl.H.Absolute,steps:Xc(N.thresholds,N.colors)};X.thresholds=ee}N.colorMode&&(X.custom.cellOptions={type:Jc[N.colorMode]})}return X},Ym=(N,X,ee)=>{if(X==="table-old"&&ee.angular){const fe=ee.angular,Ee=qc(N,fe),xe=fe.styles.find(ke=>ke.pattern==="/.*/"),Ae=Gm(xe),We=fe.styles.filter(ke=>ke.pattern!=="/.*/").map(ed);N.transformations=Ee,N.fieldConfig={defaults:Ae,overrides:We}}return{}},li={cellHeight:yt.Ss.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]};class jm{getSuggestionsForData(X){const ee=X.getListAppender({name:Ma.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:fe=>{fe.fieldConfig.defaults.custom.minWidth=50}}});X.dataSummary.fieldCount===0?ee.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):ee.append({})}}const ci="Table footer",td=["Cell options"],Qm=new ue.c(Cc).setPanelChangeHandler(Ym).setMigrationHandler(_m).useFieldConfig({useCustomConfig:N=>{N.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:Oo.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:Oo.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:Oo.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell type",editor:ll,override:ll,defaultValue:Oo.cellOptions,process:on.kG,category:td,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:td,showIf:X=>X.cellOptions.type===yt.h2.Auto||X.cellOptions.type===yt.h2.JSONView||X.cellOptions.type===yt.h2.ColorText||X.cellOptions.type===yt.h2.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:Oo.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(N=>{N.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:li.showHeader}).addRadio({path:"cellHeight",name:"Cell height",defaultValue:li.cellHeight,settings:{options:[{value:yt.Ss.Sm,label:"Small"},{value:yt.Ss.Md,label:"Medium"},{value:yt.Ss.Lg,label:"Large"}]}}).addBooleanSwitch({path:"footer.show",category:[ci],name:"Show table footer",defaultValue:li.footer?.show}).addCustomEditor({id:"footer.reducer",category:[ci],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:Um.S.get("stats-picker").editor,defaultValue:[Fs.gz.sum],showIf:X=>X.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[ci],name:"Count rows",description:"Display a single count for all data rows",defaultValue:li.footer?.countRows,showIf:X=>X.footer?.reducer?.length===1&&X.footer?.reducer[0]===Fs.gz.count}).addMultiSelect({path:"footer.fields",category:[ci],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async X=>{const ee=[];if(X&&X.data&&X.data.length>0){const fe=X.data[0];for(const Ee of fe.fields)if(Ee.type===tn.fS.number){const xe=(0,qt.CZ)(Ee,fe,X.data),Ae=Ee.name;ee.push({value:Ae,label:xe})}}return ee}},defaultValue:"",showIf:X=>X.footer?.show&&!X.footer?.countRows||X.footer?.reducer?.length===1&&X.footer?.reducer[0]!==Fs.gz.count}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:wm})}).setSuggestionsSupplier(new jm);var nd=e(54391),Zm=e(93006),Jm=e(2631),Ns=(N=>(N.Code="code",N.HTML="html",N.Markdown="markdown",N))(Ns||{}),Io=(N=>(N.Go="go",N.Html="html",N.Json="json",N.Markdown="markdown",N.Plaintext="plaintext",N.Sql="sql",N.Typescript="typescript",N.Xml="xml",N.Yaml="yaml",N))(Io||{});const Xm="plaintext",uo={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},ad={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function qm(N){const X=(0,ie.wW)(tf),[ee,fe]=(0,A.useState)({mode:N.options.mode,content:ef(N.options,N.replaceVariables,Ke.ZP.disableSanitizeHtml)});if((0,Zm.Z)(()=>{const{options:Ee,replaceVariables:xe}=N,Ae=ef(Ee,xe,Ke.ZP.disableSanitizeHtml);(Ae!==ee.content||Ee.mode!==ee.mode)&&fe({mode:Ee.mode,content:Ae})},100,[N]),ee.mode===Ns.Code){const Ee=N.options.code??uo;return A.createElement(qo.p,{key:`${Ee.showLineNumbers}/${Ee.showMiniMap}`,value:ee.content,language:Ee.language??uo.language,width:N.width,height:N.height,containerStyles:X.codeEditorContainer,showMiniMap:Ee.showMiniMap,showLineNumbers:Ee.showLineNumbers,readOnly:!0})}return A.createElement(Be.$,{autoHeightMin:"100%"},A.createElement(nd.Z,{html:ee.content,className:X.markdown,"data-testid":"TextPanel-converted-content"}))}function ef(N,X,ee){let{mode:fe,content:Ee}=N;if(!Ee)return"";switch(Ee=X(Ee,{},N.code?.language==="json"?"json":"html"),fe){case Ns.Code:break;case Ns.HTML:ee||(Ee=Ai.QX.sanitizeTextPanelContent(Ee));break;case Ns.Markdown:default:Ee=(0,Jm.x)(Ee,{noSanitize:ee})}return Ee}const tf=N=>({codeEditorContainer:S.css`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${N.colors.background.primary};
    }
  `,markdown:(0,S.cx)("markdown-html",S.css`
      height: 100%;
    `)});var Ro=e(89050),nf=e(25503);const af=({value:N,onChange:X,context:ee})=>{const fe=(0,A.useMemo)(()=>ee.options?.mode??Ns.Markdown,[ee]),Ee=(0,ie.wW)(sf),xe=()=>ee.getSuggestions?ee.getSuggestions().map(Ae=>(0,nf.T)(Ae)):[];return A.createElement("div",{className:(0,S.cx)(Ee.editorBox)},A.createElement(Ro.Z,{disableHeight:!0},({width:Ae})=>Ae===0?null:A.createElement(qo.p,{value:N,onBlur:X,onSave:X,language:fe,width:Ae,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:xe})))},sf=N=>({editorBox:S.css`
    label: editorBox;
    border: 1px solid ${N.colors.border.medium};
    border-radius: ${N.shape.borderRadius(1)};
    margin: ${N.spacing(.5)} 0;
    width: 100%;
  `}),rf=N=>{const X=parseFloat(N.pluginVersion||"6.1");let ee=N.options;if(N.hasOwnProperty("content")&&N.hasOwnProperty("mode")){const Ee=N,xe=Ee.content,Ae=Ee.mode;delete Ee.content,delete Ee.mode,X<7.1&&(ee={content:xe,mode:Ae})}return[Ns.Code,Ns.HTML,Ns.Markdown].find(Ee=>Ee===ee.mode)||(ee={...ee,mode:Ns.Markdown}),ee},of=new ue.c(qm).setPanelOptions(N=>{N.addRadio({path:"mode",name:"Mode",settings:{options:[{value:Ns.Markdown,label:"Markdown"},{value:Ns.HTML,label:"HTML"},{value:Ns.Code,label:"Code"}]},defaultValue:ad.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(Io).map(X=>({value:X,label:X}))},defaultValue:uo.language,showIf:X=>X.mode===Ns.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:uo.showLineNumbers,showIf:X=>X.mode===Ns.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:uo.showMiniMap,showIf:X=>X.mode===Ns.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:af,defaultValue:ad.content})}).setMigrationHandler(rf);var lf=e(39393),sd=e(16366),cf=e(13512);class df{getSuggestionsForData(X){const{dataSummary:ee}=X;if(!ee.hasTimeField||!ee.hasNumberField||ee.rowCountTotal<2)return;const fe=X.getListAppender({name:Ma.y.LineChart,pluginId:"timeseries",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:xe=>{xe.options.legend.showLegend=!1,xe.fieldConfig?.defaults.custom?.drawStyle!==yt.l8.Bars&&(xe.fieldConfig.defaults.custom.lineWidth=Math.max(xe.fieldConfig.defaults.custom.lineWidth??1,2))}}}),Ee=100;if(fe.append({name:Ma.y.LineChart}),ee.rowCountMax<200&&fe.append({name:Ma.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:yt.KC.Smooth}},overrides:[]}}),ee.numberFieldCount===1){fe.append({name:Ma.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),fe.append({name:Ma.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:wt.S.ContinuousGrYlRd},custom:{gradientMode:yt.FI.Scheme,lineInterpolation:yt.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),ee.rowCountMax<Ee&&(fe.append({name:Ma.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:yt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:yt.FI.Hue}},overrides:[]}}),fe.append({name:Ma.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:wt.S.ContinuousGrYlRd},custom:{drawStyle:yt.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:yt.FI.Scheme}},overrides:[]}}));return}fe.append({name:Ma.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:yt.o0.Normal,group:"A"}}},overrides:[]}}),fe.append({name:Ma.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:yt.o0.Percent,group:"A"}}},overrides:[]}}),ee.rowCountTotal/ee.numberFieldCount<Ee&&(fe.append({name:Ma.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:yt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:yt.FI.Hue,stacking:{mode:yt.o0.Normal,group:"A"}}},overrides:[]}}),fe.append({name:Ma.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:yt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:yt.FI.Hue,stacking:{mode:yt.o0.Percent,group:"A"}}},overrides:[]}}))}}function uf(N){const X=(0,cn.h4)().getCurrent()?.getPanelById(N);if(X){const ee=X.transformations?[...X.transformations]:[];return ee.push({id:cf.W.prepareTimeSeries,options:{format:"wide"}}),{name:"Transform to wide time series format",pluginId:"timeseries",transformations:ee}}}const mf=({data:N,timeRange:X,timeZone:ee,width:fe,height:Ee,options:xe,fieldConfig:Ae,onChangeTimeRange:We,replaceVariables:ke,id:rt})=>{const{sync:at,canAddAnnotations:Et,onThresholdsChange:Tt,canEditThresholds:pt,showThresholds:At,onSplitOpen:kt}=(0,kn.R9)(),It=(dn,Yt)=>(0,yo.a_)({field:dn,rowIndex:Yt,splitOpenFn:kt,range:X}),Bt=(0,A.useMemo)(()=>Wi(N.series,Ke.vc.theme2,X),[N.series,X]),Xt=(0,A.useMemo)(()=>Fi(xe.timezone,ee),[xe.timezone,ee]),Zt=(0,A.useMemo)(()=>{if(Bt?.length&&Bt.every(dn=>dn.meta?.type===lf.P.TimeSeriesLong)){const dn=uf(rt);return{message:"Long data must be converted to wide",suggestions:dn?[dn]:void 0}}},[Bt,rt]);if(!Bt||Zt)return A.createElement(fa.Z,{panelId:rt,message:Zt?.message,fieldConfig:Ae,data:N,needsTimeField:!0,needsNumberField:!0,suggestions:Zt?.suggestions});const Qt=Boolean(Et&&Et());return A.createElement(Mi.p,{frames:Bt,structureRev:N.structureRev,timeRange:X,timeZone:Xt,width:fe,height:Ee,legend:xe.legend,options:xe},(dn,Yt)=>(Yt.fields.some(En=>Boolean(En.config.links?.length))&&(Yt=Gl(Yt,Bt,ke,ee)),A.createElement(A.Fragment,null,A.createElement(sd.C,{config:dn}),A.createElement(Wo.R,{config:dn,onZoom:We}),xe.tooltip.mode===yt.f3.None||A.createElement(ys.i,{frames:Bt,data:Yt,config:dn,mode:xe.tooltip.mode,sortOrder:xe.tooltip.sort,sync:at,timeZone:ee}),N.annotations&&A.createElement(Bi,{annotations:N.annotations,config:dn,timeZone:ee}),Qt?A.createElement(Ii,{data:Yt,timeZone:ee,config:dn},({startAnnotating:En})=>A.createElement(Va,{data:Yt,config:dn,timeZone:ee,replaceVariables:ke,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Sn,xn)=>{xn&&En({coords:xn.coords})}}]}]})):A.createElement(Va,{data:Yt,frames:Bt,config:dn,timeZone:ee,replaceVariables:ke,defaultItems:[]}),N.annotations&&A.createElement(Kl,{visibleSeries:Gd(dn,Bt),config:dn,exemplars:N.annotations,timeZone:ee,getFieldLinks:It}),(pt&&Tt||At)&&A.createElement(wi,{config:dn,fieldConfig:Ae,onThresholdsChange:pt?Tt:void 0}),A.createElement(Pr,{config:dn,onChangeTimeRange:We}))))};var dl=e(56808),ff=e(52566);const gf=({value:N,onChange:X})=>{const ee=(0,ie.wW)(pf);(!N||N.length<1)&&(N=[""]);const fe=()=>{X([...N,dl.RQ.default])},Ee=Ae=>{const We=N.slice();We.splice(Ae,1),X(We)},xe=(Ae,We)=>{const ke=N.slice();ke[Ae]=We??dl.RQ.default,ke.length===0||ke.length===1&&ke[0]===""?X(void 0):X(ke)};return A.createElement("div",null,N.map((Ae,We)=>A.createElement("div",{className:ee.wrapper,key:`${We}.${Ae}`},A.createElement("span",{className:ee.first},A.createElement(ff.O,{onChange:ke=>xe(We,ke),includeInternal:!0,value:Ae??dl.RQ.default})),We===N.length-1?A.createElement(qr.h,{ariaLabel:"Add timezone",name:"plus",onClick:fe}):A.createElement(qr.h,{ariaLabel:"Remove timezone",name:"times",onClick:()=>Ee(We)}))))},pf=N=>({wrapper:S.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:S.css`
    margin-right: 8px;
    flex-grow: 2;
  `});var rd=e(7832);let di=null;const hf=(N,X,ee,fe)=>{if(X==="graph"&&ee.angular){const{fieldConfig:Ee,options:xe,annotations:Ae}=vf({...ee.angular,fieldConfig:fe,panel:N}),We=(0,cn.h4)().getCurrent();return We&&Ae?.length>0&&(We.annotations.list=[...We.annotations.list,...Ae],di==null&&(di=setTimeout(()=>{di=null,(0,Ql.$t)().refreshTimeModel()}))),N.fieldConfig=Ee,N.alert=ee.angular.alert,xe}return Pf(N),{}};function vf(N){let X=[];const ee=N.fieldConfig?.overrides??[],fe=N.yaxes??[];let Ee=od(fe[0]);N.fieldConfig?.defaults&&(Ee={...N.fieldConfig?.defaults,...Ee});const xe={fill:N.dashes?"dash":"solid",dash:[N.dashLength??10,N.spaceLength??10]};if(N.aliasColors)for(const Et of Object.keys(N.aliasColors)){const Tt=N.aliasColors[Et];Tt&&ee.push({matcher:{id:Ur.mi.byName,options:Et},properties:[{id:zt.qb.Color,value:{mode:wt.S.Fixed,fixedColor:Tt}}]})}let Ae=!1;if(N.seriesOverrides?.length)for(const Et of N.seriesOverrides){if(!Et.alias)continue;const pt={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(Et.alias)?Ur.mi.byRegexp:Ur.mi.byName,options:Et.alias},properties:[]};let At;for(const kt of Object.keys(Et)){const It=Et[kt];switch(kt){case"alias":case"$$hashKey":break;case"yaxis":if(It===2){const Bt=od(fe[1]);Ef(Ee,Bt,pt.properties)}break;case"fill":pt.properties.push({id:"custom.fillOpacity",value:It*10});break;case"fillBelowTo":Ae=!0,pt.properties.push({id:"custom.fillBelowTo",value:It});break;case"fillGradient":It&&(pt.properties.push({id:"custom.fillGradient",value:"opacity"}),pt.properties.push({id:"custom.fillOpacity",value:It*10}));break;case"points":pt.properties.push({id:"custom.showPoints",value:It?yt.Jp.Always:yt.Jp.Never});break;case"bars":It?(pt.properties.push({id:"custom.drawStyle",value:yt.l8.Bars}),pt.properties.push({id:"custom.fillOpacity",value:100})):pt.properties.push({id:"custom.drawStyle",value:yt.l8.Line});break;case"lines":pt.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":pt.properties.push({id:"custom.lineWidth",value:It});break;case"pointradius":pt.properties.push({id:"custom.pointSize",value:2+It*2});break;case"dashLength":case"spaceLength":case"dashes":switch(At||(At={fill:xe.fill,dash:[...xe.dash]}),kt){case"dashLength":At.dash[0]=It;break;case"spaceLength":At.dash[1]=It;break;case"dashes":At.fill=It?"dash":"solid";break}break;case"stack":pt.properties.push({id:"custom.stacking",value:Cf(It)});break;case"color":pt.properties.push({id:"color",value:{fixedColor:It,mode:wt.S.Fixed}});break;case"transform":pt.properties.push({id:"custom.transform",value:It==="negative-Y"?yt.pR.NegativeY:yt.pR.Constant});break;default:console.log("Ignore override migration:",Et.alias,kt,It)}}At&&pt.properties.push({id:"custom.lineStyle",value:At}),pt.properties.length&&ee.push(pt)}const We=Ee.custom??{};We.drawStyle=N.bars?yt.l8.Bars:N.lines?yt.l8.Line:yt.l8.Points,N.points?(We.showPoints=yt.Jp.Always,(0,w.isNumber)(N.pointradius)&&(We.pointSize=2+N.pointradius*2)):We.drawStyle!==yt.l8.Points&&(We.showPoints=yt.Jp.Never),We.lineWidth=N.linewidth,xe.fill!=="solid"&&(We.lineStyle=xe),Ae?We.fillOpacity=35:(0,w.isNumber)(N.fill)&&(We.fillOpacity=N.fill*10),(0,w.isNumber)(N.fillGradient)&&N.fillGradient>0&&(We.gradientMode=yt.FI.Opacity,We.fillOpacity=N.fillGradient*10),We.spanNulls=N.nullPointMode===Pc.Gl.Ignore,N.steppedLine&&(We.lineInterpolation=yt.KC.StepAfter),We.drawStyle===yt.l8.Bars&&(We.fillOpacity=100),N.stack&&(We.stacking={mode:yt.o0.Normal,group:Lr.r.stacking.group}),Ee.custom=(0,w.omitBy)(We,w.isNil),Ee.nullValueMode=N.nullPointMode;const ke={legend:{displayMode:yt.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:yt.f3.Single,sort:yt.As.None}},rt=N.legend;if(rt){if(rt.show?ke.legend.displayMode=rt.alignAsTable?yt.jK.Table:yt.jK.List:ke.legend.showLegend=!1,rt.rightSide&&(ke.legend.placement="right"),N.legend.values){const Et=(0,w.pickBy)(N.legend);ke.legend.calcs=yf(Et)}N.legend.sideWidth&&(ke.legend.width=N.legend.sideWidth),rt.hideZero&&ee.push(fl(Fs.gz.allIsZero)),rt.hideEmpty&&ee.push(fl(Fs.gz.allIsNull))}N.timeRegions?.length&&N.timeRegions.map((Tt,pt)=>({name:`T${pt+1}`,color:Tt.colorMode!=="custom"?Tt.colorMode:Tt.fillColor,line:Tt.line,fill:Tt.fill,fromDayOfWeek:Tt.fromDayOfWeek,toDayOfWeek:Tt.toDayOfWeek,from:Tt.from,to:Tt.to})).forEach((Tt,pt)=>{const At={datasource:{type:"datasource",uid:"grafana"},enable:!0,hide:!0,filter:{exclude:!1,ids:[N.panel.id]},iconColor:Tt.fillColor??Tt.color,name:`T${pt+1}`,target:{queryType:rd.hR.TimeRegions,refId:"Anno",timeRegion:{fromDayOfWeek:Tt.fromDayOfWeek,toDayOfWeek:Tt.toDayOfWeek,from:Tt.from,to:Tt.to,timezone:"utc"}}};Tt.fill?X.push(At):Tt.line&&(At.iconColor=Tt.lineColor??"white",X.push(At))});const at=N.tooltip;if(at&&(at.shared!==void 0&&(ke.tooltip.mode=at.shared?yt.f3.Multi:yt.f3.Single),at.sort!==void 0&&at.shared))switch(at.sort){case 1:ke.tooltip.sort=yt.As.Ascending;break;case 2:ke.tooltip.sort=yt.As.Descending;break;default:ke.tooltip.sort=yt.As.None}if(N.thresholds&&N.thresholds.length>0){let Et=[],Tt=!1,pt=!1;const At=N.thresholds.sort((It,Bt)=>It.value>Bt.value?1:-1);for(let It=0;It<At.length;It++){const Bt=At[It],Xt=At.length>It+1?At[It+1]:null;Bt.fill&&(Tt=!0),Bt.line&&(pt=!0),Bt.op==="gt"&&Et.push({value:Bt.value,color:ul(Bt)}),Bt.op==="lt"&&(Et.length===0&&Et.push({value:-1/0,color:ul(Bt)}),Xt&&Xt.op==="gt"&&Xt.value>Bt.value?Et.push({value:Bt.value,color:"transparent"}):Xt&&Xt.op==="lt"?Et.push({value:Bt.value,color:ul(Xt)}):Et.push({value:Bt.value,color:"transparent"}))}Et.length>0&&Et[0].value!==-1/0&&Et.unshift({color:"transparent",value:-1/0});let kt=Tt?yt.i3.Area:yt.i3.Line;pt&&Tt&&(kt=yt.i3.LineAndArea),Ee.custom.thresholdsStyle={mode:kt},Ee.thresholds={mode:cl.H.Absolute,steps:Et}}return N.xaxis&&N.xaxis.show===!1&&N.xaxis.mode==="time"&&ee.push({matcher:{id:Ur.mi.byType,options:tn.fS.time},properties:[{id:"custom.axisPlacement",value:yt.LB.Hidden}]}),{fieldConfig:{defaults:(0,w.omitBy)(Ee,w.isNil),overrides:ee},options:ke,annotations:X}}function ul(N){return N.colorMode==="critical"?"red":N.colorMode==="warning"?"orange":N.colorMode==="custom"?N.fillColor||N.lineColor:"red"}function od(N){if(!N)return{};const X={axisPlacement:N.show?yt.LB.Auto:yt.LB.Hidden};if(N.label&&(X.axisLabel=N.label),N.logBase){const ee=N.logBase;(ee===2||ee===10)&&(X.scaleDistribution={type:yt.wf.Log,log:ee})}return(0,w.omitBy)({unit:N.format,decimals:ml(N.decimals),min:ml(N.min),max:ml(N.max),custom:X},w.isNil)}function Ef(N,X,ee){for(const xe of Object.keys(X)){const Ae=X[xe];xe!=="custom"&&Ae!==N[xe]&&ee.push({id:xe,value:Ae})}const fe=N.custom??{},Ee=X.custom??{};for(const xe of Object.keys(Ee)){const Ae=Ee[xe];Ae!==fe[xe]&&ee.push({id:`custom.${xe}`,value:Ae})}}function ml(N){if((0,w.isNumber)(N))return N;if((0,w.isString)(N)){const X=Number(N);if(!isNaN(X))return X}}function yf(N){const X=[];for(const ee of Object.keys(N)){const fe=Fs.TB.getIfExists(ee);fe&&X.push(fe.id)}return X}function Pf(N){N.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(N.fieldConfig.defaults.custom.hideFrom.viz=N.fieldConfig.defaults.custom.hideFrom.graph,delete N.fieldConfig.defaults.custom.hideFrom.graph),N.fieldConfig?.overrides&&(N.fieldConfig.overrides=N.fieldConfig.overrides.map(X=>(X.properties=X.properties.map(ee=>(ee.id==="custom.hideFrom"&&ee.value.graph&&(ee.value.viz=ee.value.graph,delete ee.value.graph),ee)),X)))}function fl(N){return{matcher:{id:Ur.mi.byValue,options:{reducer:N,op:yt.Bd.GTE,value:0}},properties:[{id:"custom.hideFrom",value:{tooltip:!0,viz:!1,legend:!0}}]}}function Cf(N){const X=Lr.r.stacking?.group;return{mode:N?yt.o0.Normal:yt.o0.None,group:(0,w.isString)(N)?N:X}}const Df=new ue.c(mf).setPanelChangeHandler(hf).useFieldConfig((0,Lr.F)(Lr.r)).setPanelOptions(N=>{Ea.L(N),ba.J(N),N.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:gf,defaultValue:void 0})}).setSuggestionsSupplier(new df).setDataSupport({annotations:!0,alertStates:!0});var xf=e(86647),bf=e(94619),ui=e(72861),Eg=e(93183),yg=e(75151),Mf=e(335);const id={wrapper:S.css`
    height: 100%;
    overflow: scroll;
  `},Sf=({data:N})=>{const X=(0,A.createRef)(),ee=(0,A.useMemo)(()=>(0,Mf.N)(N.series[0]),[N.series]),{search:fe,setSearch:Ee,spanFindMatches:xe}=(0,yg.Rx)(ee?.spans),[Ae,We]=(0,A.useState)(""),[ke,rt]=(0,A.useState)(""),at=(0,Lt.Z)(async()=>await(0,xf.F)().get(N.request?.targets[0].datasource?.uid)),Et=at&&at.value?at.value.type:"unknown";return!N||!N.series.length||!ee?A.createElement("div",{className:"panel-empty"},A.createElement("p",null,"No data found in response")):A.createElement("div",{className:id.wrapper},A.createElement("div",{ref:X}),be.v.featureToggles.newTraceViewHeader?null:A.createElement(ui.Z,{navigable:!0,searchValue:fe,setSearch:Ee,spanFindMatches:xe,searchBarSuffix:ke,setSearchBarSuffix:rt,focusedSpanIdForSearch:Ae,setFocusedSpanIdForSearch:We,datasourceType:Et}),A.createElement(bf.m,{dataFrames:N.series,scrollElementClass:id.wrapper,traceProp:ee,spanFindMatches:xe,search:fe,focusedSpanIdForSearch:Ae,queryResponse:N,datasource:at.value,topOfViewRef:X,topOfViewRefType:Eg.l4.Panel}))},Tf=new ue.c(Sf),Of=({data:N,timeRange:X,timeZone:ee,width:fe,height:Ee,options:xe,fieldConfig:Ae,replaceVariables:We,id:ke})=>{const{sync:rt}=(0,kn.R9)(),at=(0,A.useMemo)(()=>{if(N.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:N.series};let Et=N.series,Tt;if(xe.xField){if(Tt=(0,lr.findFieldIndex)(Et[0],xe.xField),Tt==null)return{warning:"Unable to find field: "+xe.xField,frames:N.series}}else if(Tt=Et[0].fields.findIndex(pt=>pt.type===tn.fS.number),Tt===-1)return{warning:"No numeric fields found for X axis",frames:Et};if(Tt!=null){const pt=Et[0].fields[Tt];if(pt.type===tn.fS.number&&!(0,fo.lP)(pt.values))return{warning:"Values must be in ascending order",frames:Et}}return{frames:Wi(Et,be.v.theme2,void 0,Tt)}},[N.series,xe.xField]);return at.warning||!at.frames?A.createElement(fa.Z,{panelId:ke,fieldConfig:Ae,data:N,message:at.warning,needsNumberField:!0}):A.createElement(Mi.p,{frames:at.frames,structureRev:N.structureRev,timeRange:X,timeZone:ee,width:fe,height:Ee,legend:xe.legend,options:xe},(Et,Tt)=>(Tt.fields.some(pt=>Boolean(pt.config.links?.length))&&(Tt=Gl(Tt,at.frames,We,ee)),A.createElement(A.Fragment,null,A.createElement(sd.C,{config:Et}),xe.tooltip.mode===yt.f3.None||A.createElement(ys.i,{frames:at.frames,data:Tt,config:Et,mode:xe.tooltip.mode,sortOrder:xe.tooltip.sort,sync:rt,timeZone:ee}),A.createElement(Va,{data:Tt,frames:at.frames,config:Et,timeZone:ee,replaceVariables:We,defaultItems:[]}))))};class Pg{getSuggestionsForData(X){const{dataSummary:ee}=X;return ee.numberFieldCount<2||ee.rowCountTotal<2||ee.rowCountTotal<2?void 0:X.getListAppender({name:Ma.y.LineChart,pluginId:"trend",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ee=>{Ee.options.legend.showLegend=!1,Ee.fieldConfig?.defaults.custom?.drawStyle!==yt.l8.Bars&&(Ee.fieldConfig.defaults.custom.lineWidth=Math.max(Ee.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const If=new ue.c(Of).useFieldConfig((0,Lr.F)(Lr.r)).setPanelOptions(N=>{const X=["X Axis"];N.addFieldNamePicker({path:"xField",name:"X Field",description:"An increasing numeric value",category:X,defaultValue:void 0,settings:{isClearable:!0,placeholderText:"First numeric value",filter:ee=>ee.type===tn.fS.number}}),Ea.L(N),ba.J(N)}).setSuggestionsSupplier(new Pg),Rf=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],Af=()=>{const N=(0,ie.wW)(Cg);return A.createElement("div",{className:N.container},A.createElement("h1",{className:N.title},"Welcome to Grafana"),A.createElement("div",{className:N.help},A.createElement("h3",{className:N.helpText},"Need help?"),A.createElement("div",{className:N.helpLinks},Rf.map((X,ee)=>A.createElement("a",{key:`${X.label}-${ee}`,className:N.helpLink,href:`${X.href}?utm_source=grafana_gettingstarted`},X.label)))))},Cg=N=>({container:S.css`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${N.spacing(3)};

      ${N.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${N.breakpoints.down("sm")} {
        padding: 0 ${N.spacing(1)};
      }
    `,title:S.css`
      margin-bottom: 0;

      ${N.breakpoints.down("lg")} {
        margin-bottom: ${N.spacing(1)};
      }

      ${N.breakpoints.down("md")} {
        font-size: ${N.typography.h2.fontSize};
      }
      ${N.breakpoints.down("sm")} {
        font-size: ${N.typography.h3.fontSize};
      }
    `,help:S.css`
      display: flex;
      align-items: baseline;
    `,helpText:S.css`
      margin-right: ${N.spacing(2)};
      margin-bottom: 0;

      ${N.breakpoints.down("md")} {
        font-size: ${N.typography.h4.fontSize};
      }

      ${N.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:S.css`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:S.css`
      margin-right: ${N.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${N.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),Ao=new ue.c(Af).setNoPadding();var Lf=(N=>(N[N.NoData=0]="NoData",N[N.BadFrameSelection=1]="BadFrameSelection",N[N.XNotFound=2]="XNotFound",N))(Lf||{});function mi(N){return N.type===tn.fS.number}function Bf(N,X){if(!X||!X.length)return{error:0};N||(N={frame:0});let ee=X[N.frame??0];if(!ee)return{error:1};let fe=-1;for(let We=0;We<ee.fields.length;We++){const ke=ee.fields[We];if(N.x&&N.x===(0,qt.CZ)(ke,ee,X)){fe=We;break}if(mi(ke)&&!N.x){fe=We;break}}let Ee=!1;const xe=ee.fields[fe],Ae=[xe];for(const We of ee.fields)if(We.type===tn.fS.time&&(Ee=!0),!(We===xe||!mi(We))){if(N.exclude){const ke=(0,qt.CZ)(We,ee,X);if(N.exclude.includes(ke))continue}Ae.push(We)}return{x:xe,fields:{x:ld(xe),y:Nf(xe)},frame:{...ee,fields:Ae},hasData:ee.fields.length>0,hasTime:Ee}}function ld(N){return N?X=>N===X||!!(N.state&&N.state===X.state):()=>!1}function Nf(N){if(!N)return()=>!1;const X=ld(N);return ee=>!X(ee,void 0,void 0)}const cd=({value:N,onChange:X,context:ee})=>{const fe=(0,A.useMemo)(()=>ee?.data?.length?ee.data.map((We,ke)=>({value:ke,label:(0,qt.nf)(We,ke)})):[{value:0,label:"First result"}],[ee.data]),Ee=(0,A.useMemo)(()=>Bf(N,ee.data),[ee.data,N]),xe=(0,A.useMemo)(()=>{const We={label:"?",value:void 0},ke={numberFields:[We],yFields:[],xAxis:N?.x?{label:`${N.x} (Not found)`,value:N.x}:We},rt=ee.data?ee.data[N?.frame??0]:void 0;if(rt){const at=Ee.x?(0,qt.CZ)(Ee.x,Ee.frame,ee.data):void 0;for(let Et of rt.fields)if(mi(Et)){const Tt=(0,qt.CZ)(Et,rt,ee.data),pt={label:Tt,value:Tt};ke.numberFields.push(pt),We.label==="?"&&(We.label=`${Tt} (First)`),N?.x&&Tt===N.x&&(ke.xAxis=pt),at!==Tt&&ke.yFields.push({label:Tt,value:N?.exclude?.includes(Tt)})}}return ke},[Ee,ee.data,N]),Ae=(0,ie.wW)(Uf);return ee.data?A.createElement("div",null,A.createElement(As.g,{label:"Data"},A.createElement(Je.Ph,{options:fe,value:fe.find(We=>We.value===N?.frame)??fe[0],onChange:We=>{X({...N,frame:We.value})}})),A.createElement(As.g,{label:"X Field"},A.createElement(Je.Ph,{options:xe.numberFields,value:xe.xAxis,onChange:We=>{X({...N,x:We.value})}})),A.createElement(As.g,{label:"Y Fields"},A.createElement("div",null,xe.yFields.map(We=>A.createElement("div",{key:We.label,className:Ae.row},A.createElement(qr.h,{name:We.value?"eye-slash":"eye",onClick:()=>{const ke=N?.exclude?[...N.exclude]:[];let rt=ke.indexOf(We.label);rt<0?ke.push(We.label):ke.splice(rt,1),X({...N,exclude:ke})}}),We.label))))):A.createElement("div",null,"No data...")},Uf=N=>({sorter:S.css`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:S.css`
    padding: ${N.spacing(.5,1)};
    border-radius: ${N.shape.borderRadius(1)};
    background: ${N.colors.background.secondary};
    min-height: ${N.spacing(4)};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${N.components.input.borderColor};
  `});var gl=e(93022),dd=e(54643),wf=(N=>(N.Auto="auto",N.Manual="manual",N))(wf||{}),Wr=(N=>(N.Lines="lines",N.Points="points",N.PointsAndLines="points+lines",N))(Wr||{});const Wf={exclude:[]},ud={label:yt.Jp.Auto,show:"points"},pl={series:[]},hl={...ud},Ff=({value:N,onChange:X,context:ee})=>{const[fe,Ee]=(0,A.useState)(0),xe=(0,ie.wW)(Dg),Ae=(at,Et,Tt)=>{X(N.map((pt,At)=>At===Et?{...pt,[Tt]:at}:pt))},We=()=>{X([...N,{pointColor:{},pointSize:hl.pointSize}]),Ee(N.length)};(0,A.useEffect)(()=>{N?.length||We()},[]);const ke=at=>{X(N.filter((Et,Tt)=>Tt!==at))},rt=at=>at===fe?`${xe.row} ${xe.sel}`:xe.row;return A.createElement(A.Fragment,null,A.createElement(Ce.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:We,className:xe.marginBot},"Add series"),A.createElement("div",{className:xe.marginBot},N.map((at,Et)=>A.createElement("div",{key:`series/${Et}`,className:rt(Et),onMouseDown:()=>Ee(Et)},A.createElement(gl.X,{name:at.name??`Series ${Et+1}`,onChange:Tt=>Ae(Tt,Et,"name")}),A.createElement(qr.h,{name:"trash-alt",title:"remove",className:(0,S.cx)(xe.actionIcon),onClick:()=>ke(Et)})))),fe>=0&&N[fe]&&A.createElement(A.Fragment,null,A.createElement("div",{key:`series/${fe}`},A.createElement(As.g,{label:"X Field"},A.createElement(So.b,{value:N[fe].x??"",context:ee,onChange:at=>Ae(at,fe,"x"),item:{}})),A.createElement(As.g,{label:"Y Field"},A.createElement(So.b,{value:N[fe].y??"",context:ee,onChange:at=>Ae(at,fe,"y"),item:{}})),A.createElement(As.g,{label:"Point color"},A.createElement(dd.Lm,{value:N[fe].pointColor,context:ee,onChange:at=>Ae(at,fe,"pointColor"),item:{}})),A.createElement(As.g,{label:"Point size"},A.createElement(dd.cL,{value:N[fe].pointSize,context:ee,onChange:at=>Ae(at,fe,"pointSize"),item:{settings:{min:1,max:100}}})))))},Dg=N=>({marginBot:S.css`
    margin-bottom: 20px;
  `,row:S.css`
    padding: ${N.spacing(.5,1)};
    border-radius: ${N.shape.borderRadius(1)};
    background: ${N.colors.background.secondary};
    min-height: ${N.spacing(4)};
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3px;
    cursor: pointer;

    border: 1px solid ${N.components.input.borderColor};
    &:hover {
      border: 1px solid ${N.components.input.borderHover};
    }
  `,sel:S.css`
    border: 1px solid ${N.colors.primary.border};
    &:hover {
      border: 1px solid ${N.colors.primary.border};
    }
  `,actionIcon:S.css`
    color: ${N.colors.text.secondary};
    &:hover {
      color: ${N.colors.text};
    }
  `});var md=e(82965),$f=(N=>(N.Points="points",N.Lines="lines",N.PointsAndLines="points+lines",N))($f||{}),fi=(N=>(N.Auto="auto",N.Manual="manual",N))(fi||{});const xg={show:"points",lineWidth:1,lineStyle:{fill:"solid"},pointSize:{fixed:5,min:1,max:20},axisPlacement:yt.LB.Auto},fd=({allSeries:N,data:X,manualSeriesConfigs:ee,seriesMapping:fe,rowIndex:Ee,hoveredPointIndex:xe,options:Ae,range:We})=>{const ke=(0,ie.wW)(gd);if(!N||Ee==null)return null;const rt=N[xe],at=rt.frame(X),Et=rt.x(at),Tt=rt.y(at);let pt;if(Tt.getLinks){const Bt=Tt.values[Ee],Xt=Tt.display?Tt.display(Bt):{text:`${Bt}`,numeric:+Bt};pt=Tt.getLinks({calculatedValue:Xt,valueRowIndex:Ee}).map(Zt=>(Zt.title||(Zt.title=(0,yo.Rb)(Zt.href)),Zt))}let At=at.fields.filter(Bt=>Bt!==Et&&Bt!==Tt),kt=null,It=null;if(fe===fi.Manual&&ee){const Bt=ee[xe].pointColor?.field??"",Xt=ee[xe].pointSize?.field??"",Zt=Bt?(0,lr.findField)(at,Bt):void 0,Qt=Xt?(0,lr.findField)(at,Xt):void 0;It={colorFacetFieldName:Bt,sizeFacetFieldName:Xt,colorFacetValue:Zt?.values[Ee],sizeFacetValue:Qt?.values[Ee]},At=At.filter(dn=>dn!==Zt&&dn!==Qt)}return kt={name:(0,qt.CZ)(Tt,at),val:Tt.values[Ee],field:Tt,color:rt.pointColor(at)},A.createElement(A.Fragment,null,A.createElement("table",{className:ke.infoWrap},A.createElement("tr",null,A.createElement("th",{colSpan:2,style:{backgroundColor:kt.color}})),A.createElement("tbody",null,A.createElement("tr",null,A.createElement("th",null,(0,qt.CZ)(Et,at)),A.createElement("td",null,Or(Et,Et.values[Ee]))),A.createElement("tr",null,A.createElement("th",null,kt.name,":"),A.createElement("td",null,Or(kt.field,kt.val))),It!==null&&It.colorFacetFieldName&&A.createElement("tr",null,A.createElement("th",null,It.colorFacetFieldName,":"),A.createElement("td",null,It.colorFacetValue)),It!==null&&It.sizeFacetFieldName&&A.createElement("tr",null,A.createElement("th",null,It.sizeFacetFieldName,":"),A.createElement("td",null,It.sizeFacetValue)),At.map((Bt,Xt)=>A.createElement("tr",{key:Xt},A.createElement("th",null,(0,qt.CZ)(Bt,at),":"),A.createElement("td",null,Or(Bt,Bt.values[Ee])))),pt&&pt.length>0&&A.createElement("tr",null,A.createElement("td",{colSpan:2},A.createElement(Xr.wc,null,pt.map((Bt,Xt)=>A.createElement(Ce.Qj,{key:Xt,icon:"external-link-alt",target:Bt.target,href:Bt.href,onClick:Bt.onClick,fill:"text",style:{width:"100%"}},Bt.title))))))))};function Or(N,X){return N.display?(0,Rs.zc)(N.display(X)):`${X}`}const gd=N=>({infoWrap:S.css`
    padding: 8px;
    width: 100%;
    th {
      font-weight: ${N.typography.fontWeightMedium};
      padding: ${N.spacing(.25,2)};
    }
  `,highlight:S.css`
    background: ${N.colors.action.hover};
  `,xVal:S.css`
    font-weight: ${N.typography.fontWeightBold};
  `,icon:S.css`
    margin-right: ${N.spacing(1)};
    vertical-align: middle;
  `});function bg(N,X,ee,fe,Ee,xe){let Ae,We;try{Ae=Kf(N,X()),We=gi(X,Ae,ee,fe,Ee,xe)}catch(ke){let rt="Unknown error in prepScatter";return typeof ke=="string"?rt=ke:ke instanceof Error&&(rt=ke.message),{error:rt,series:[]}}return{series:Ae,builder:We}}function pd(N,X,ee,fe,Ee,xe){const Ae=X[ee],We=Ae.fields[Ee];let ke=We.state??{};ke.seriesIndex=N,We.state=ke;let rt=xe.pointColorFixed?be.v.theme2.visualization.getColorByName(xe.pointColorFixed):(0,jr.YO)(We,be.v.theme2).color,at=()=>rt;const Et={...hl,...We.config.custom};let Tt=jr.WO.get(wt.S.PaletteClassic);if(xe.pointColorIndex){const Bt=X[ee].fields[xe.pointColorIndex];if(Bt)if(Tt=(0,jr.fD)(We),Tt.isByValue){const Xt=xe.pointColorIndex;at=Zt=>{const Qt=Zt.fields[Xt];return Qt.state?.range&&(Qt.state.range=void 0),Qt.display=(0,Ys.U_)({field:Qt,theme:be.v.theme2}),Qt.values.map(dn=>Qt.display(dn).color)}}else rt=Tt.getCalculator(Bt,be.v.theme2)(Bt.values[0],1),at=()=>rt}let pt=xe.pointSizeConfig,At=xe.pointSizeConfig?.fixed??We.config.custom?.pointSize?.fixed??5,kt=()=>At;xe.pointSizeIndex?kt=Bt=>{const Xt=(0,lr.getScaledDimensionForField)(Bt.fields[xe.pointSizeIndex],xe.pointSizeConfig,yt.B5.Quad),Zt=Array(Bt.length);for(let Qt=0;Qt<Bt.length;Qt++)Zt[Qt]=Xt.get(Qt);return Zt}:pt={fixed:At,min:At,max:At};const It=(0,qt.CZ)(We,Ae,X);return{name:It,frame:Bt=>Bt[ee],x:Bt=>Bt.fields[fe],y:Bt=>Bt.fields[Ee],legend:()=>[{label:It,color:rt,getItemKey:()=>It,yAxis:Ee}],showLine:Et.show!==Wr.Points,lineWidth:Et.lineWidth??2,lineStyle:Et.lineStyle,lineColor:()=>rt,showPoints:Et.show!==Wr.Lines?yt.Jp.Always:yt.Jp.Never,pointSize:kt,pointColor:at,pointSymbol:(Bt,Xt)=>"circle",label:yt.Jp.Never,labelValue:()=>"",show:!Ae.fields[Ee].config.custom.hideFrom?.viz,hints:{pointSize:pt,pointColor:{mode:Tt}}}}function Kf(N,X){let ee=0;if(!X.length)throw"Missing data";if(N.seriesMapping==="manual"){if(!N.series?.length)throw"Missing series config";const ke=[];for(const rt of N.series){if(!rt?.x)throw"Select X dimension";if(!rt?.y)throw"Select Y dimension";for(let at=0;at<X.length;at++){const Et=X[at],Tt=(0,lr.findFieldIndex)(Et,rt.x);if(Tt!=null){const pt=(0,lr.findFieldIndex)(Et,rt.y);if(pt==null)throw"Y must be in the same frame as X";const At={pointColorFixed:rt.pointColor?.fixed,pointColorIndex:(0,lr.findFieldIndex)(Et,rt.pointColor?.field),pointSizeConfig:rt.pointSize,pointSizeIndex:(0,lr.findFieldIndex)(Et,rt.pointSize?.field)};ke.push(pd(ee++,X,at,Tt,pt,At))}}}return ke}const fe=N.dims??{},Ee=fe.frame??0,xe=X[Ee],Ae=[];let We=(0,lr.findFieldIndex)(xe,fe.x);for(let ke=0;ke<xe.fields.length;ke++)if(mi(xe.fields[ke])){if(We==null||ke===We){We=ke;continue}if(fe.exclude&&fe.exclude.includes((0,qt.CZ)(xe.fields[ke],xe,X)))continue;Ae.push(ke)}if(We==null)throw"Missing X dimension";if(!Ae.length)throw"No Y values";return Ae.map(ke=>pd(ee++,X,Ee,We,ke,{}))}const gi=(N,X,ee,fe,Ee,xe)=>{let Ae,We;function ke(Qt){return(Yt,En,Sn,xn)=>(Ss.Z.orient(Yt,En,(Tn,Kn,Ln,ta,Un,In,Qn,oa,$a,ka,Aa,_a,Gn,Nn,Hn)=>{const qn=Ss.Z.pxRatio,ya=X[En-1];let na=Yt.data[En],Ua=ya.showLine,pa=ya.showPoints===yt.Jp.Always;!pa&&ya.showPoints===yt.Jp.Auto&&(pa=na[0].length<1e3),!pa&&!Ua&&(Ua=!0);let Mn=1;Yt.ctx.save(),Yt.ctx.rect(Yt.bbox.left,Yt.bbox.top,Yt.bbox.width,Yt.bbox.height),Yt.ctx.clip(),Yt.ctx.fillStyle=Tn.fill(),Yt.ctx.strokeStyle=Tn.stroke(),Yt.ctx.lineWidth=Mn;let Bn=2*Math.PI,wn=ta.key,Zn=Un.key,Jn=ya.hints.pointSize;const Pa=ya.hints.pointColor.mode.isByValue;let ua=(Jn.max??Jn.fixed)*qn,Qa=Yt.posToVal(-ua/2,wn),wa=Yt.posToVal(Yt.bbox.width/qn+ua/2,wn),br=Yt.posToVal(Yt.bbox.height/qn+ua/2,Zn),Ds=Yt.posToVal(-ua/2,Zn),$r=Qt.disp.size.values(Yt,En),Mr=Qt.disp.color.values(Yt,En),mo=Qt.disp.color.alpha,Us=Ua?new Path2D:null,dr=null;for(let Os=0;Os<na[0].length;Os++){let es=na[0][Os],sr=na[1][Os],Ks=$r[Os]*qn;if(es>=Qa&&es<=wa&&sr>=br&&sr<=Ds){let hi=In(es,ta,ka,oa),vi=Qn(sr,Un,Aa,$a);Ua&&Us.lineTo(hi,vi),pa&&(Yt.ctx.moveTo(hi+Ks/2,vi),Yt.ctx.beginPath(),Yt.ctx.arc(hi,vi,Ks/2,0,Bn),Pa&&Mr[Os]!==dr&&(dr=Mr[Os],Yt.ctx.fillStyle=(0,ao.alpha)(dr,mo),Yt.ctx.strokeStyle=dr),Yt.ctx.fill(),Yt.ctx.stroke(),Qt.each(Yt,En,Os,hi-Ks/2-Mn/2,vi-Ks/2-Mn/2,Ks+Mn,Ks+Mn))}}if(Ua){let Os=ya.frame(N());Yt.ctx.strokeStyle=ya.lineColor(Os),Yt.ctx.lineWidth=ya.lineWidth*qn;const{lineStyle:es}=ya;es&&es.fill!=="solid"&&(es.fill==="dot"&&(Yt.ctx.lineCap="round"),Yt.ctx.setLineDash(es.dash??[10,10])),Yt.ctx.stroke(Us)}Yt.ctx.restore()}),null)}let rt=ke({disp:{size:{values:(Qt,dn)=>Qt.data[dn][2]},color:{values:(Qt,dn)=>Qt.data[dn][3],alpha:.5}},each:(Qt,dn,Yt,En,Sn,xn,Tn)=>{En-=Qt.bbox.left,Sn-=Qt.bbox.top,Ae.add({x:En,y:Sn,w:xn,h:Tn,sidx:dn,didx:Yt})}});const at=new yi.U;at.setCursor({drag:{setScale:!0},dataIdx:(Qt,dn)=>{if(dn===1){const Yt=Ss.Z.pxRatio;We=null;let En=1/0,Sn=Qt.cursor.left*Yt,xn=Qt.cursor.top*Yt;Ae.get(Sn,xn,1,1,Tn=>{if((0,so.Pn)(Sn,xn,Tn.x,Tn.y,Tn.x+Tn.w,Tn.y+Tn.h)){let Kn=Tn.x+Tn.w/2,Ln=Tn.y+Tn.h/2,ta=Kn-Sn,Un=Ln-xn,In=Math.sqrt(ta**2+Un**2);In<=Tn.w/2&&In<=En&&(En=In,We=Tn)}})}return We&&dn===We.sidx?We.didx:null},points:{size:(Qt,dn)=>We&&dn===We.sidx?We.w/Ss.Z.pxRatio:0,fill:(Qt,dn)=>"rgba(255,255,255,0.4)"}});const Et=()=>{xe.current&&(fe(void 0),Ee&&Ee())};let Tt=null;at.addHook("init",(Qt,dn)=>{Qt.over.style.overflow="hidden",Tt=Qt.root.parentElement,Ee&&Tt?.addEventListener("click",Ee)}),at.addHook("destroy",Qt=>{Ee&&(Tt?.removeEventListener("click",Ee),Et())});let pt;at.addHook("syncRect",(Qt,dn)=>{pt=dn}),at.addHook("setLegend",Qt=>{if(Qt.cursor.idxs!=null)for(let dn=0;dn<Qt.cursor.idxs.length;dn++){const Yt=Qt.cursor.idxs[dn];if(Yt!=null&&!xe.current){fe({scatterIndex:dn-1,xIndex:Yt,pageX:pt.left+Qt.cursor.left,pageY:pt.top+Qt.cursor.top});return}}xe.current||fe(void 0)}),at.addHook("drawClear",Qt=>{Et(),Ae=Ae||new so.lW(0,0,Qt.bbox.width,Qt.bbox.height),Ae.clear(),Qt.series.forEach((dn,Yt)=>{Yt>0&&(dn._paths=null)})}),at.setMode(2);const At=N();let kt=X[0].x(X[0].frame(At)),It=kt.config,Bt=It.custom,Xt=Bt?.scaleDistribution;at.addScale({scaleKey:"x",isTime:!1,orientation:yt.wN.Horizontal,direction:yt.bQ.Right,distribution:Xt?.type,log:Xt?.log,linearThreshold:Xt?.linearThreshold,min:It.min,max:It.max,softMin:Bt?.axisSoftMin,softMax:Bt?.axisSoftMax,centeredZero:Bt?.axisCenteredZero,decimals:It.decimals});let Zt=Bt.axisLabel;return at.addAxis({scaleKey:"x",placement:Bt?.axisPlacement!==yt.LB.Hidden?yt.LB.Bottom:yt.LB.Hidden,show:Bt?.axisPlacement!==yt.LB.Hidden,theme:ee,label:Zt==null||Zt===""?(0,qt.CZ)(kt,X[0].frame(At),At):Zt,formatValue:(Qt,dn)=>(0,Rs.zc)(kt.display(Qt,dn))}),X.forEach((Qt,dn)=>{let Yt=Qt.frame(At),En=Qt.y(Yt);const Sn=Qt.lineColor(Yt),xn=Sg(Yt,Qt.pointColor);let Tn=En.config.unit??"y",Kn=En.config,Ln=Kn.custom,ta=Ln?.scaleDistribution;if(at.addScale({scaleKey:Tn,orientation:yt.wN.Vertical,direction:yt.bQ.Up,distribution:ta?.type,log:ta?.log,linearThreshold:ta?.linearThreshold,min:Kn.min,max:Kn.max,softMin:Ln?.axisSoftMin,softMax:Ln?.axisSoftMax,centeredZero:Ln?.axisCenteredZero,decimals:Kn.decimals}),Ln?.axisPlacement!==yt.LB.Hidden){let Un=Ln?.axisLabel;at.addAxis({scaleKey:Tn,theme:ee,placement:Ln?.axisPlacement,label:Un==null||Un===""?(0,qt.CZ)(En,X[dn].frame(At),At):Un,formatValue:(In,Qn)=>(0,Rs.zc)(En.display(In,Qn))})}at.addSeries({facets:[{scale:"x",auto:!0},{scale:Tn,auto:!0}],pathBuilder:rt,theme:ee,scaleKey:"",lineColor:Sn,fillColor:(0,ao.alpha)(xn,.5),show:!Ln.hideFrom?.viz})}),at};function hd(N,X,ee){return N.error||!X.length?[null]:[null,...N.series.map((fe,Ee)=>{const xe=fe.frame(X);let Ae;const We=fe.pointColor(xe);return Array.isArray(We)?Ae=We:Ae=Array(xe.length).fill(We),[fe.x(xe).values,fe.y(xe).values,Mg(xe,fe.pointSize),Ae]})]}function Mg(N,X){const ee=X(N);return Array.isArray(ee)?ee:Array(N.length).fill(ee)}function Sg(N,X){const ee=X(N);return Array.isArray(ee)?ee[0]:ee}const vl=10,Vf=N=>{const[X,ee]=(0,A.useState)(),[fe,Ee]=(0,A.useState)([]),[xe,Ae]=(0,A.useState)(),[We,ke]=(0,A.useState)(),[rt,at]=(0,A.useState)(),[Et,Tt]=(0,A.useState)(!1),pt=(0,A.useRef)(!1),At=(0,md.Z)(N.options),kt=(0,md.Z)(N.data),It=()=>{pt.current=!1,Tt(!1),Xt(void 0)},Bt=()=>{pt.current=!pt.current,Tt(pt.current)},Xt=Yt=>{at(Yt)},Zt=(0,A.useCallback)(()=>{const Yt=()=>N.data.series,En=bg(N.options,Yt,be.v.theme2,Xt,Bt,pt);En.error?ee(En.error):En.series.length&&N.data.series&&(Ae(En.builder),Ee(En.series),ke(()=>hd(En,N.data.series)),ee(void 0))},[N.data.series,N.options]),Qt=(0,A.useCallback)(()=>{ke(()=>hd({error:X,series:fe},N.data.series))},[N.data.series,X,fe]);(0,A.useEffect)(()=>{At!==N.options||kt?.structureRev!==N.data.structureRev?Zt():kt?.series!==N.data.series&&Qt()},[N]);const dn=()=>{const Yt=[],En=Tn=>Tn==null?"-":Tn.toFixed(1),Sn=be.v.theme2;for(let Tn=0;Tn<fe.length;Tn++){const Kn=fe[Tn],Ln=Kn.frame(N.data.series);if(Ln)for(const ta of Kn.legend())ta.getDisplayValues=()=>{const Un=N.options.legend.calcs;if(!Un?.length)return[];const In=Kn.y(Ln),Qn=In.display??En;let oa=null;const $a=(0,Fs.Kx)({field:In,reducers:Un});return Un.map(ka=>{const Aa=Fs.TB.get(ka);let _a=Qn;return Aa.id===Fs.gz.diffperc&&(_a=(0,Ys.U_)({field:{...In,config:{...In.config,unit:"percent"}},theme:Sn})),(Aa.id===Fs.gz.count||Aa.id===Fs.gz.changeCount||Aa.id===Fs.gz.distinctCount)&&(oa||(oa=(0,Ys.U_)({field:{...In,config:{...In.config,unit:"none"}},theme:Sn})),_a=oa),{..._a($a[ka]),title:Aa.name,description:Aa.description}})},ta.disabled=!(Kn.show??!0),N.options.seriesMapping===fi.Manual&&(ta.label=N.options.series?.[Tn]?.name??`Series ${Tn+1}`),Yt.push(ta)}if(!N.options.legend.showLegend)return null;const xn={flexStart:S.css`
        div {
          justify-content: flex-start !important;
        }
      `};return A.createElement(bs.AY.Legend,{placement:N.options.legend.placement,width:N.options.legend.width},A.createElement(ir.l,{className:xn.flexStart,placement:N.options.legend.placement,items:Yt,displayMode:N.options.legend.displayMode}))};return X||!xe||!We?A.createElement("div",{className:"panel-empty"},A.createElement("p",null,X)):A.createElement(A.Fragment,null,A.createElement(bs.AY,{width:N.width,height:N.height,legend:dn()},(Yt,En)=>A.createElement(Bs.N,{config:xe,data:We,width:Yt,height:En,timeRange:N.timeRange})),A.createElement(Oa.h_,null,rt&&N.options.tooltip.mode!==yt.f3.None&&A.createElement(Rr.S,{position:{x:rt.pageX,y:rt.pageY},offset:{x:vl,y:vl},allowPointerEvents:pt.current},Et&&A.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},A.createElement(fs.P,{onClick:It,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),A.createElement(fd,{options:N.options.tooltip,allSeries:fe,manualSeriesConfigs:N.options.series,seriesMapping:N.options.seriesMapping,rowIndex:rt.xIndex,hoveredPointIndex:rt.scatterIndex,data:N.data.series,range:N.timeRange}))))};var vd=e(66683);function Ed(N){return{standardOptions:{[zt.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:wt.S.PaletteClassic}}},useCustomConfig:X=>{X.addRadio({path:"show",name:"Show",defaultValue:N.show,settings:{options:[{label:"Points",value:Wr.Points},{label:"Lines",value:Wr.Lines},{label:"Both",value:Wr.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:N.pointSize?.fixed,settings:{min:1,max:100,step:1},showIf:ee=>ee.show!==Wr.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:ee=>ee.show!==Wr.Points,editor:vd.j,override:vd.j,process:on.kG,shouldApply:ee=>ee.type===tn.fS.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:N.lineWidth,settings:{min:0,max:10,step:1},showIf:ee=>ee.show!==Wr.Points}),ra.r(X,N),Da.B(X)}}}const zf=new ue.c(Vf).useFieldConfig(Ed(hl)).setPanelOptions(N=>{N.addRadio({path:"seriesMapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto",description:"No changes to saved model since 8.0"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"",editor:cd,showIf:X=>X.seriesMapping==="auto"}).addCustomEditor({id:"series",path:"series",name:"",defaultValue:[],editor:Ff,showIf:X=>X.seriesMapping==="manual"}),Ea.L(N),ba.J(N)}),Pd={"app/plugins/datasource/graphite/module":async()=>await e.e(7494).then(e.bind(e,86069)),"app/plugins/datasource/cloudwatch/module":async()=>await Promise.all([e.e(4761),e.e(678),e.e(8831)]).then(e.bind(e,20678)),"app/plugins/datasource/dashboard/module":async()=>await e.e(2557).then(e.bind(e,32557)),"app/plugins/datasource/elasticsearch/module":async()=>await Promise.all([e.e(4761),e.e(5048),e.e(4601),e.e(9897)]).then(e.bind(e,14601)),"app/plugins/datasource/opentsdb/module":async()=>await e.e(3168).then(e.bind(e,80808)),"app/plugins/datasource/grafana/module":async()=>await Promise.all([e.e(3755),e.e(7537)]).then(e.bind(e,265)),"app/plugins/datasource/influxdb/module":async()=>await e.e(5783).then(e.bind(e,9722)),"app/plugins/datasource/loki/module":async()=>await Promise.all([e.e(4254),e.e(4666),e.e(6196),e.e(4712),e.e(1598)]).then(e.bind(e,34712)),"app/plugins/datasource/jaeger/module":async()=>await e.e(890).then(e.bind(e,94053)),"app/plugins/datasource/zipkin/module":async()=>await e.e(4023).then(e.bind(e,86098)),"app/plugins/datasource/mixed/module":async()=>await e.e(2001).then(e.bind(e,40336)),"app/plugins/datasource/mysql/module":async()=>await Promise.all([e.e(9243),e.e(4251)]).then(e.bind(e,93157)),"app/plugins/datasource/postgres/module":async()=>await Promise.all([e.e(9243),e.e(534)]).then(e.bind(e,18821)),"app/plugins/datasource/mssql/module":async()=>await Promise.all([e.e(9243),e.e(5032)]).then(e.bind(e,21264)),"app/plugins/datasource/prometheus/module":async()=>await Promise.all([e.e(6488),e.e(4254),e.e(4761),e.e(5048),e.e(8366),e.e(6196),e.e(7004)]).then(e.bind(e,71682)),"app/plugins/datasource/testdata/module":async()=>await e.e(319).then(e.bind(e,50747)),"app/plugins/datasource/cloud-monitoring/module":async()=>await Promise.all([e.e(2773),e.e(3549)]).then(e.bind(e,43737)),"app/plugins/datasource/azuremonitor/module":async()=>await Promise.all([e.e(9046),e.e(2364)]).then(e.bind(e,20172)),"app/plugins/datasource/tempo/module":async()=>await Promise.all([e.e(5644),e.e(295)]).then(e.bind(e,25644)),"app/plugins/datasource/alertmanager/module":async()=>await Promise.all([e.e(4761),e.e(6795)]).then(e.bind(e,98548)),"app/plugins/datasource/phlare/module":async()=>await Promise.all([e.e(4254),e.e(9704)]).then(e.bind(e,61674)),"app/plugins/datasource/parca/module":async()=>await e.e(2015).then(e.bind(e,74775)),"app/plugins/panel/text/module":P,"app/plugins/panel/timeseries/module":D,"app/plugins/panel/trend/module":M,"app/plugins/panel/state-timeline/module":h,"app/plugins/panel/status-history/module":C,"app/plugins/panel/candlestick/module":f,"app/plugins/panel/graph/module":async()=>await Promise.all([e.e(6093),e.e(1260)]).then(e.bind(e,4048)),"app/plugins/panel/xychart/module":R,"app/plugins/panel/geomap/module":async()=>await Promise.all([e.e(8537),e.e(8096)]).then(e.bind(e,88763)),"app/plugins/panel/canvas/module":async()=>await Promise.all([e.e(7638),e.e(8528),e.e(3330)]).then(e.bind(e,2321)),"app/plugins/panel/icon/module":async()=>await Promise.all([e.e(8528),e.e(53)]).then(e.bind(e,10529)),"app/plugins/panel/dashlist/module":u,"app/plugins/panel/alertlist/module":n,"app/plugins/panel/annolist/module":c,"app/plugins/panel/heatmap/module":async()=>await e.e(6987).then(e.bind(e,77899)),"app/plugins/panel/table/module":a,"app/plugins/panel/table-old/module":async()=>await e.e(6784).then(e.bind(e,8414)),"app/plugins/panel/news/module":y,"app/plugins/panel/live/module":p,"app/plugins/panel/stat/module":Im,"app/plugins/panel/datagrid/module":r,"app/plugins/panel/debug/module":d,"app/plugins/panel/flamegraph/module":o,"app/plugins/panel/gettingstarted/module":m,"app/plugins/panel/gauge/module":oc,"app/plugins/panel/piechart/module":E,"app/plugins/panel/bargauge/module":i,"app/plugins/panel/barchart/module":s,"app/plugins/panel/logs/module":g,"app/plugins/panel/traces/module":x,"app/plugins/panel/welcome/module":b,"app/plugins/panel/nodeGraph/module":v,"app/plugins/panel/histogram/module":l,"app/plugins/panel/alertGroups/module":t};function Cd(N){const ee=new URL(N).pathname.split("/");return{id:ee[3],version:ee[4]}}function El(N){const{address:X}=N,ee=X.split("/public/plugin-cdn/");return`${be.v.pluginsCDNBaseURL}/${ee[1]}`}function Ra(N){const{id:X,version:ee}=Cd(N.name),fe=`${be.v.pluginsCDNBaseURL}/${X}/${ee}`;return N.source=N.source.replace(/(\/?)(public\/plugins)/g,`${fe}/$2`),N.source=N.source.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${fe}/public/$2$3`),N.source=N.source.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${fe}/public/plugins/${X}/$2.map`),N.source}function Lo(N){return N.metadata.loader==="cdn-loader"&&N.address.startsWith(`${location.origin}/public/plugin-cdn`)&&(N.address=N.address.replace(`${location.origin}/public/plugin-cdn`,be.v.pluginsCDNBaseURL)),N.address}function Qf(N){const X=document.getElementsByTagName("link");return Array.from(X).map(fe=>fe.href).includes(N.address)?"":Xf(N.address)}const Zf="?_cache="+Date.now(),Jf=100;function Xf(N){return new Promise(function(X,ee){const fe=setTimeout(function(){ee("Unable to load CSS")},Jf*1e3),Ee=function(Ae){clearTimeout(fe),xe.onload=xe.onerror=w.noop,setTimeout(function(){Ae?ee(Ae):X("")},7)},xe=document.createElement("link");xe.type="text/css",xe.rel="stylesheet",xe.href=N,xe.href.startsWith(be.v.pluginsCDNBaseURL)||(xe.href=xe.href+Zf),xe.onload=function(){Ee()},xe.onerror=function(Ae){Ee(Ae instanceof ErrorEvent?Ae.message:new Error("Error loading CSS file."))},document.head.appendChild(xe)})}var Dd=e(82907),_g=e(89377),Gg=e(4027),Yg=e(59554),jg=e(65103),qf=e(85095),eg=e(28844),Qg=e(26189),Zg=e(47825),Jg=e(7540);const Bo=de;Bo.PanelPlugin=ue.c,Bo.DataSourcePlugin=te.hf,Bo.AppPlugin=me.k8,Bo.DataSourceApi=te.MF,ae.i3.registry.set("css",ae.i3.newModule({locate:Lo,fetch:Qf})),ae.i3.registry.set("plugin-loader",ae.i3.newModule({locate:Dd.hf})),ae.i3.registry.set("cdn-loader",ae.i3.newModule({locate:El,translate:Ra})),ae.i3.config({baseURL:"public",defaultExtension:"js",packages:{plugins:{defaultExtension:"js"},"plugin-cdn":{defaultExtension:"js"}},map:{text:"vendor/plugin-text/text.js"},meta:{"/*":{esModule:!0,authorization:!0,loader:"plugin-loader"},"*.css":{loader:"css"},"plugin-cdn/*":{esModule:!0,authorization:!1,loader:"cdn-loader"}}});function Ta(N,X){ae.i3.registerDynamic(N,[],!0,(ee,fe,Ee)=>{Ee.exports=X})}Ta("@grafana/data",q),Ta("@grafana/ui",Bo),Ta("@grafana/runtime",pe),Ta("lodash",K()),Ta("moment",V()),Ta("jquery",F()),Ta("d3",U),Ta("rxjs",oe),Ta("rxjs/operators",G),Ta("react-router",re),Ta("react-router-dom",Q),Ta("prismjs",j()),Ta("slate",le.ZP),Ta("slate-react",ne.ZP),Ta("@grafana/slate-react",ne.ZP),Ta("slate-plain-serializer",ge.Z),Ta("react",A),Ta("react-dom",_),Ta("react-redux",k),Ta("redux",Z),Ta("emotion",S),Ta("@emotion/css",S),Ta("@emotion/react",O),Ta("app/features/dashboard/impression_store",{impressions:Ve.Z,__esModule:!0}),Ta("app/core/services/backend_srv",{BackendSrv:Ie.y$,getBackendSrv:Ie.i}),Ta("app/core/utils/datemath",se),Ta("app/core/utils/flatten",tt),Ta("app/core/utils/kbn",dt.Z),Ta("app/core/utils/ticks",Oe),Ta("app/core/config",Ke.ZP),Ta("app/core/time_series",_e.Z),Ta("app/core/time_series2",_e.Z),Ta("app/core/table_model",Me.Z),Ta("app/core/app_events",st.h$),Ta("app/core/core",{appEvents:st.h$,contextSrv:st.Vt,__esModule:!0});const xd=["jquery.flot","jquery.flot.pie","jquery.flot.time","jquery.flot.fillbelow","jquery.flot.crosshair","jquery.flot.stack","jquery.flot.selection","jquery.flot.stackpercent","jquery.flot.events","jquery.flot.gauge"];for(const N of xd)Ta(N,{fakeDep:1});async function yl(N,X){X&&(0,Dd.Vf)({path:N,version:X});const ee=Pd[N];return ee?typeof ee=="function"?await ee():ee:ae.i3.import(N)}function bd(N){return yl(N.module,N.info?.version).then(X=>{if(X.plugin){const ee=X.plugin;return ee.meta=N,ee}if(X.Datasource){const ee=new te.hf(X.Datasource);return ee.setComponentsFromLegacyExports(X),ee.meta=N,ee}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function tg(N){return yl(N.module,N.info?.version).then(X=>{const ee=X.plugin?X.plugin:new me.k8;return ee.init(N),ee.meta=N,ee.setComponentsFromLegacyExports(X),ee})}},82907:(Y,T,e)=>{"use strict";e.d(T,{Hl:()=>i,Vf:()=>s,hf:()=>f});var t=e(13011);const n={},c=Date.now();function s({path:r,version:d}){n[r]||(n[r]=encodeURI(d))}function i(r){const d=`plugins/${r}/module`;n[d]&&delete n[d],(0,t.Z)(r)}function f(r,d=c){const{address:o}=r,m=u(o);if(!m)return`${o}?_cache=${d}`;const p=n[m]||d;return`${o}?_cache=${p}`}function u(r){const d=/\/public\/(plugins\/.+\/module)\.js/i.exec(r);if(!d)return;const[o,m]=d;if(m)return m}},55111:(Y,T,e)=>{"use strict";e.d(T,{O:()=>i,d:()=>f});var t=e(59250),n=e(38490),c=e(13011),s=e(97888);async function i(u){const r=await(0,c.a)(u);let d;if(r.type===t.zV.app&&(d=await(0,s.Av)(r)),r.type===t.zV.datasource&&(d=await(0,s.nL)(r)),r.type===t.zV.panel&&(d=await(0,n._2)(r)),r.type===t.zV.renderer&&(d={meta:r}),!d)throw new Error("Unknown Plugin type: "+r.type);return d}function f(u,r,d){let o={...u},m;function l(p,g){return!g.startsWith(p.url??"")||m&&(m.url?.length??0)>(p.url?.length??0)?p:(m&&(m.active=!1),m={...p,active:!0},m)}return o.children=(o?.children??[]).map(p=>{if(p.children){const g=p.children.map(y=>l(y,d));return{...l(p,d),children:g}}return l(p,d)}),{main:o,node:m??o}}},54294:(Y,T,e)=>{"use strict";e.d(T,{$S:()=>g,Ns:()=>y,PL:()=>E,Uk:()=>a,YT:()=>m,ZP:()=>R,aw:()=>h,p$:()=>C,qD:()=>v,rf:()=>o,z0:()=>P,zW:()=>l,zc:()=>p});var t=e(62992),n=e(82897),c=e.n(n),s=e(77258),i=e(67483),f=e(47694),u=e(77582);const r={orgId:f.ZP.bootData.user.orgId,timeZone:f.ZP.bootData.user.timezone,weekStart:f.ZP.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},d=(0,t.oM)({name:"user/profile",initialState:r,reducers:{updateTimeZone:(S,O)=>{S.timeZone=O.payload.timeZone},updateWeekStart:(S,O)=>{S.weekStart=O.payload.weekStart},updateFiscalYearStartMonth:(S,O)=>{S.fiscalYearStartMonth=O.payload.fiscalYearStartMonth},setUpdating:(S,O)=>{S.isUpdating=O.payload.updating},userLoaded:(S,O)=>{S.user=O.payload.user},initLoadTeams:(S,O)=>{S.teamsAreLoading=!0},teamsLoaded:(S,O)=>{S.teams=O.payload.teams,S.teamsAreLoading=!1},initLoadOrgs:(S,O)=>{S.orgsAreLoading=!0},orgsLoaded:(S,O)=>{S.orgs=O.payload.orgs,S.orgsAreLoading=!1},initLoadSessions:(S,O)=>{S.sessionsAreLoading=!0},sessionsLoaded:(S,O)=>{const U=O.payload.sessions.sort((I,F)=>Number(F.isActive)-Number(I.isActive));S.sessions=U.map(I=>({id:I.id,isActive:I.isActive,seenAt:(0,s.E8)(I.seenAt),createdAt:I.createdAt,clientIp:I.clientIp,browser:I.browser,browserVersion:I.browserVersion,os:I.os,osVersion:I.osVersion,device:I.device})),S.sessionsAreLoading=!1},userSessionRevoked:(S,O)=>{S.sessions=S.sessions.filter(U=>U.id!==O.payload.tokenId),S.isUpdating=!1}}}),o=S=>async O=>{(0,n.set)(u.Vt,"user.fiscalYearStartMonth",S),O(M({fiscalYearStartMonth:S}))},m=S=>async O=>{(!(0,n.isString)(S)||(0,n.isEmpty)(S))&&(S=f.ZP?.bootData?.user?.timezone),(0,n.set)(u.Vt,"user.timezone",S),O(D({timeZone:S}))},l=S=>async O=>{(!(0,n.isString)(S)||(0,n.isEmpty)(S))&&(S=f.ZP?.bootData?.user?.weekStart),(0,n.set)(u.Vt,"user.weekStart",S),O(x({weekStart:S})),(0,i.Ls)(S)},{setUpdating:p,initLoadOrgs:g,orgsLoaded:y,initLoadTeams:v,teamsLoaded:E,userLoaded:h,userSessionRevoked:C,initLoadSessions:a,sessionsLoaded:P,updateTimeZone:D,updateWeekStart:x,updateFiscalYearStartMonth:M}=d.actions,b=d.reducer,R={user:d.reducer}},25405:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>t,i:()=>n});const t=c=>c.timeZone,n=c=>c.fiscalYearStartMonth},9386:(Y,T,e)=>{"use strict";e.d(T,{S:()=>n,f:()=>c});class t{constructor(){this.extraRenderActions=[]}addExtraRenderAction(i){this.extraRenderActions=this.extraRenderActions.concat(i)}getAllExtraRenderAction(){return this.extraRenderActions}}const n=new t,c=new t},36584:(Y,T,e)=>{"use strict";e.d(T,{x:()=>j,t:()=>_});var t=e(9085),n=e.n(t),c=e(82897),s=e(64681),i=e.n(s),f=e(66111),u=e(206),r=e(47956),d=e(50444),o=e(52666),m=e(83881),l=e(4063),p=e(68183),g=e(86647),y=e(11484),v=e(19985),E=e(52081),h=e(53546),C=e(19117),a=e(1029),P=e(67254),D=e(19349),x=e(96161),M=e(9386),b=e(9892),R=e(53117),S=e(72648),O=e(39904),U=e(46967),I=e(57227);const F=k=>{const{query:Q,queries:re,onChange:Z,collapsedText:oe,renderExtras:G,disabled:le}=k,ge=(0,S.wW)(K),[ne,ue]=(0,f.useState)(!1),[te,me]=(0,f.useState)(null),q=Ke=>{ue(!0)},se=Ke=>{if(ue(!1),te){me(null);return}Q.refId!==Ke&&Z({...Q,refId:Ke})},ae=Ke=>{const st=Ke.currentTarget.value.trim();if(st.length===0){me("An empty query name is not allowed");return}for(const Ie of re)if(Ie!==Q&&st===Ie.refId){me("Query name already exists");return}te&&me(null)},pe=Ke=>{se(Ke.currentTarget.value.trim())},de=Ke=>{Ke.key==="Enter"&&se(Ke.target.value)},Me=Ke=>{Ke.target.select()};return f.createElement(f.Fragment,null,f.createElement("div",{className:ge.wrapper},!ne&&f.createElement("button",{className:ge.queryNameWrapper,"aria-label":p.wl.components.QueryEditorRow.title(Q.refId),title:"Edit query name",onClick:q,"data-testid":"query-name-div",type:"button"},f.createElement("span",{className:ge.queryName},Q.refId),f.createElement(O.J,{name:"pen",className:ge.queryEditIcon,size:"sm"})),ne&&f.createElement(f.Fragment,null,f.createElement(U.I,{type:"text",defaultValue:Q.refId,onBlur:pe,autoFocus:!0,onKeyDown:de,onFocus:Me,invalid:te!==null,onChange:ae,className:ge.queryNameInput,"data-testid":"query-name-input"}),te&&f.createElement(I.S,{horizontal:!0},te)),w(k,ge),G&&f.createElement("div",{className:ge.itemWrapper},G()),le&&f.createElement("em",{className:ge.contextInfo},"Disabled")),oe&&f.createElement("div",{className:ge.collapsedText},oe))},w=(k,Q)=>{const{alerting:re,dataSource:Z,onChangeDataSource:oe}=k;return oe?f.createElement("div",{className:Q.itemWrapper},f.createElement(R.q,{variables:!0,alerting:re,current:Z.name,onChange:oe})):f.createElement("em",{className:Q.contextInfo},"(",Z.name,")")},K=k=>({wrapper:b.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${k.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:b.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${k.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${k.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${k.colors.action.hover};
        border: 1px dashed ${k.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${k.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:b.css`
      font-weight: ${k.typography.fontWeightMedium};
      color: ${k.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${k.spacing(.5)};
    `,queryEditIcon:(0,b.cx)(b.css`
        margin-left: ${k.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:b.css`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:b.css`
      font-weight: ${k.typography.fontWeightRegular};
      font-size: ${k.typography.bodySmall.fontSize};
      color: ${k.colors.text.secondary};
      padding-left: ${k.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:b.css`
      font-size: ${k.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${k.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:b.css`
      display: flex;
      margin-left: 4px;
    `});var L=e(35645);function V({error:k}){const Q=(0,S.wW)(H),re=k?.message??k?.data?.message??"Query error";return f.createElement("div",{className:Q.wrapper},f.createElement("div",{className:Q.icon},f.createElement(O.J,{name:"exclamation-triangle"})),f.createElement("div",{className:Q.message},re,L.v.featureToggles.showTraceId&&k.traceId!=null&&f.createElement(f.Fragment,null,f.createElement("br",null)," ",f.createElement("span",null,"(Trace ID: ",k.traceId,")"))))}const H=k=>({wrapper:(0,b.css)({marginTop:k.spacing(.5),background:k.colors.background.secondary,display:"flex"}),icon:(0,b.css)({background:k.colors.error.main,color:k.colors.error.contrastText,padding:k.spacing(1)}),message:(0,b.css)({fontSize:k.typography.bodySmall.fontSize,fontFamily:k.typography.fontFamilyMonospace,padding:k.spacing(1)})});class j extends f.PureComponent{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.dataSourceSrv=(0,g.F)(),this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const Q=(0,y.w)(),re='<plugin-component type="query-ctrl" />',Z={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=Q.load(this.element,Z,re),this.angularScope=Z.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:Q,onChange:re,queries:Z,onRunQuery:oe,onAddQuery:G,app:le=u.zj.PanelEditor,history:ge}=this.props,{datasource:ne,data:ue}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(ne?.components?.QueryCtrl)return f.createElement("div",{ref:te=>this.element=te});if(ne){let te=this.getReactQueryEditor(ne);if(te)return f.createElement(r.n,{instanceSettings:this.props.dataSource},f.createElement(te,{key:ne?.name,query:Q,datasource:ne,onChange:re,onRunQuery:oe,onAddQuery:G,data:ue,range:(0,D.$t)().timeRange(),queries:Z,app:le,history:ge}))}return f.createElement("div",null,"Data source plugin does not export any Query Editor component")},this.onToggleEditMode=(Q,re)=>{Q.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),re.isOpen||re.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:Q,query:re,onQueryRemoved:Z}=this.props;Q(re),Z&&Z()},this.onCopyQuery=()=>{const{query:Q,onAddQuery:re,onQueryCopied:Z}=this.props,oe=(0,c.cloneDeep)(Q);re(oe),Z&&Z()},this.onDisableQuery=()=>{const{query:Q,onChange:re,onRunQuery:Z,onQueryToggled:oe}=this.props;re({...Q,hide:!Q.hide}),Z(),oe&&oe(Q.hide)},this.onToggleHelp=()=>{this.setState(Q=>({showingHelp:!Q.showingHelp}))},this.onClickExample=Q=>{Q.datasource===void 0&&(Q.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...Q,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:Q,query:re}=this.props,oe=(_(Q,re.refId)?.series??[]).reduce((ne,ue)=>{if(!ue.meta?.notices)return ne;const te=(0,c.filter)(ue.meta.notices,{severity:"warning"})??[];return ne.concat(te)},[]),G=(0,c.uniqBy)(oe,"text");if(!(G.length>0))return null;const ge=G.map(ne=>ne.text).join(`
`);return f.createElement(v.C,{color:"orange",icon:"exclamation-triangle",text:f.createElement(f.Fragment,null,G.length," ",i()("warning",G.length)),tooltip:ge})},this.renderExtraActions=()=>{const{query:Q,queries:re,data:Z,onAddQuery:oe,dataSource:G}=this.props,le=M.f.getAllExtraRenderAction().map((ge,ne)=>ge({query:Q,queries:re,timeRange:Z.timeRange,onAddQuery:oe,dataSource:G,key:ne})).filter(Boolean);return le.push(this.renderWarnings()),le},this.renderActions=Q=>{const{query:re,hideDisableQuery:Z=!1}=this.props,{hasTextEditMode:oe,datasource:G,showingHelp:le}=this.state,ge=!!re.hide,ne=G?.components?.QueryEditorHelp;return f.createElement(E.Lh,{width:"auto"},ne&&f.createElement(a.V,{title:"Show data source help",icon:"question-circle",onClick:this.onToggleHelp,active:le}),oe&&f.createElement(a.y,{title:"Toggle text edit mode",icon:"pen",onClick:ue=>{this.onToggleEditMode(ue,Q)}}),this.renderExtraActions(),f.createElement(a.y,{title:"Duplicate query",icon:"copy",onClick:this.onCopyQuery}),Z?null:f.createElement(a.V,{title:"Disable query",icon:ge?"eye-slash":"eye",active:ge,onClick:this.onDisableQuery}),f.createElement(a.y,{title:"Remove query",icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=Q=>{const{alerting:re,query:Z,dataSource:oe,onChangeDataSource:G,onChange:le,queries:ge,renderHeaderExtras:ne}=this.props;return f.createElement(F,{query:Z,queries:ge,onChangeDataSource:G,dataSource:oe,disabled:Z.hide,onClick:ue=>this.onToggleEditMode(ue,Q),onChange:le,collapsedText:Q.isOpen?null:this.renderCollapsedText(),renderExtras:ne,alerting:re})}}componentDidMount(){const{data:Q,query:re,id:Z}=this.props,oe=_(Q,re.refId);this.id=(0,c.uniqueId)(Z+"_"),this.setState({data:oe}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:Q,queries:re}=this.props,{datasource:Z}=this.state,oe=new x.rY({targets:re}),G={},le=this;return{datasource:Z,target:Q,panel:oe,dashboard:G,refresh:()=>{Q.hide!==le.props.query.hide&&(Q.hide=le.props.query.hide),this.props.onChange(Q),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new d.F,range:(0,D.$t)().timeRange()}}getInterpolatedDataSourceUID(){if(this.props.query.datasource){const Q=this.dataSourceSrv.getInstanceSettings(this.props.query.datasource);return Q?.rawRef?.uid??Q?.uid}return this.props.dataSource.rawRef?.uid??this.props.dataSource.uid}async loadDatasource(){let Q;const re=this.getInterpolatedDataSourceUID();try{Q=await this.dataSourceSrv.get(re)}catch{Q=await this.dataSourceSrv.get()}typeof this.props.onDataSourceLoaded=="function"&&this.props.onDataSourceLoaded(Q),this.setState({datasource:Q,queriedDataSourceIdentifier:re,hasTextEditMode:(0,c.has)(Q,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(Q){const{datasource:re,queriedDataSourceIdentifier:Z}=this.state,{data:oe,query:G}=this.props;if(Q.id!==this.props.id&&(this.id=(0,c.uniqueId)(this.props.id+"_")),oe!==Q.data){const le=_(oe,G.refId);this.setState({data:le}),this.angularScope&&(this.angularScope.range=(0,D.$t)().timeRange()),this.angularQueryEditor&&le&&A(this.angularScope,le,this.angularQueryEditor)}if(re&&Z!==this.getInterpolatedDataSourceUID()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(Q){if(Q)switch(this.props.app){case u.zj.Explore:return Q.components?.ExploreMetricsQueryField||Q.components?.ExploreLogsQueryField||Q.components?.ExploreQueryField||Q.components?.QueryEditor;case u.zj.PanelEditor:case u.zj.Dashboard:default:return Q.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.getInterpolatedDataSourceUID()!==this.state.queriedDataSourceIdentifier}renderCollapsedText(){const{datasource:Q}=this.state;return Q?.getQueryDisplayText?Q.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:Q,index:re,visualization:Z}=this.props,{datasource:oe,showingHelp:G,data:le}=this.state,ge=Q.hide,ne=n()("query-editor-row",{"query-editor-row--disabled":ge,"gf-form-disabled":ge});if(!oe)return null;const ue=this.renderPluginEditor(),te=oe.components?.QueryEditorHelp;return f.createElement("div",{"data-testid":"query-editor-row","aria-label":p.wl.components.QueryEditorRows.rows},f.createElement(P.t,{id:this.id,draggable:!0,index:re,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},f.createElement("div",{className:ne,id:this.id},f.createElement(h.z4,null,G&&te&&f.createElement(C.h,null,f.createElement(te,{onClickExample:me=>this.onClickExample(me),query:this.props.query,datasource:oe})),ue),le?.error&&le.error.refId===Q.refId&&f.createElement(V,{error:le.error}),Z)))}}function A(k,Q,re){if(Q.state===o.Gu.Done){const Z=Q.series.map(oe=>(0,m.Zr)(oe));k.events.emit(l.Kh.dataReceived,Z)}else Q.state===o.Gu.Error&&k.events.emit(l.Kh.dataError,Q.error);setTimeout(re.digest)}function _(k,Q){const re=k.series.filter(le=>le.refId===Q);if(k.state!==o.Gu.Loading&&(k.error||k.errors?.length)&&!k.series.length)return{...k,state:o.Gu.Error};let Z=k.state,oe=k.errors?.find(le=>le.refId===Q);!oe&&k.error&&(oe=k.error.refId===Q?k.error:void 0),Z!==o.Gu.Loading&&(oe?Z=o.Gu.Error:k.state===o.Gu.Error&&(Z=o.Gu.Done));const G=k.timeRange;return{...k,state:Z,series:re,error:oe,errors:oe?[oe]:void 0,timeRange:G}}},87865:(Y,T,e)=>{"use strict";e.d(T,{Tl:()=>te,kt:()=>ge});var t=e(46528),n=e(91017),c=e(53376),s=e(12877),i=e(25740),f=e(9471),u=e(82615),r=e(7880),d=e(61474),o=e(86318),m=e(57027),l=e(46978),p=e(82378),g=e(47694),y=e(82897);function v(me){let q=[];const se=(0,y.partition)(me,"id"),ae=(0,y.groupBy)(se[0],"id");return q=(0,y.map)(ae,pe=>pe.length>1&&!(0,y.every)(pe,E)?(0,y.find)(pe,de=>de.eventType!=="panel-alert"):(0,y.head)(pe)),q=(0,y.concat)(q,se[1]),q}function E(me){return me.eventType==="panel-alert"}var h=e(19349),C=e(49372),a=e(59724),P=e(54899),D=e(55197);class x{canWork({dashboard:q,range:se}){return!(!q.id||se.raw.to!=="now"||!q.panels.find(ae=>!!ae.alert))}work(q){if(!this.canWork(q))return(0,D.H_)();const{dashboard:se}=q;return(0,C.D)((0,P.i)().get("/api/alerts/states-for-dashboard",{dashboardId:se.id},`dashboard-query-runner-alert-states-${se.id}`)).pipe((0,f.U)(ae=>({alertStates:ae,annotations:[]})),(0,a.K)(D.Rc))}}var M=e(59980),b=e(39859),R=e(90801),S=e(86647),O=e(45984),U=e(17424),I=e(86953);class F{canRun(q){return q?Boolean(!q.annotationQuery||q.annotations):!1}run({annotation:q,datasource:se,dashboard:ae,range:pe}){if(!this.canRun(se))return(0,M.of)([]);const de={};return(0,I.r)({dashboard:ae,range:pe,panel:de},se,q).pipe((0,f.U)(Me=>Me.events??[]),(0,a.K)(D.h1))}}var w=e(573);class K{canRun(q){return q?(0,w.yr)(q)?!0:Boolean(q.annotationQuery&&!q.annotations):!1}run({annotation:q,datasource:se,dashboard:ae,range:pe}){return this.canRun(se)?(0,C.D)(se.annotationQuery({range:pe,rangeRaw:pe.raw,annotation:q,dashboard:ae})).pipe((0,a.K)(D.h1)):(0,M.of)([])}}class L{constructor(q=[new K,new F]){this.runners=q}canWork({dashboard:q}){const se=q.annotations.list.find(L.getAnnotationsToProcessFilter);return Boolean(se)}work(q){if(!this.canWork(q))return(0,D.H_)();const{dashboard:se,range:ae}=q;let pe=se.annotations.list.filter(L.getAnnotationsToProcessFilter);se.meta.publicDashboardAccessToken&&pe.length>0&&(pe=[pe[0]]);const de=pe.map(Me=>{let Ke;if((0,g.iE)().isPublicDashboardView){const st=new U.lh(U.Qi);Ke=(0,M.of)(st).pipe((0,a.K)(D.hs))}else Ke=(0,C.D)((0,S.F)().get(Me.datasource)).pipe((0,a.K)(D.hs));return Ke.pipe((0,b.z)(st=>{const Ie=this.runners.find(Ve=>Ve.canRun(st));return Ie?(se.events.publish(new O.z(Me)),Ie.run({annotation:Me,datasource:st,dashboard:se,range:ae}).pipe((0,u.R)(ge().cancellations().pipe((0,R.h)(Ve=>Ve===Me))),(0,f.U)(Ve=>(se.snapshot&&(Me.snapshotData=(0,y.cloneDeep)(Ve)),se.meta.publicDashboardAccessToken?Ve:(0,D.pG)(Me,Ve))),(0,o.x)(()=>{se.events.publish(new O.RB(Me))}))):(0,M.of)([])}))});return(0,s.T)(de).pipe((0,r.J)(),(0,d.u)((Me,Ke)=>Me.concat(Ke)),(0,f.U)(Me=>({annotations:Me,alertStates:[]})))}static getAnnotationsToProcessFilter(q){return q.enable&&!Boolean(q.snapshotData)}}var V=e(56422),H=e(97865),j=e(82002),A=e(37190),_=e(79662),k=e(27876),Q=e(46063);class re{constructor(){this.hasAlertRules={}}canWork({dashboard:q,range:se}){return!(!q.uid||q.meta.publicDashboardAccessToken||se.raw.to!=="now"||this.hasAlertRules[q.uid]===!1||!(j.Vt.hasPermission(k.AccessControlAction.AlertingRuleRead)&&j.Vt.hasPermission(k.AccessControlAction.AlertingRuleExternalRead)))}work(q){if(!this.canWork(q))return(0,D.H_)();const{dashboard:se}=q;return(0,C.D)((0,P.i)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:se.uid},`dashboard-query-runner-unified-alert-states-${se.id}`)).pipe((0,f.U)(ae=>{if(ae.status==="success"){this.hasAlertRules[se.uid]=!1;const pe={};return ae.data.groups.forEach(de=>de.rules.forEach(Me=>{if((0,_.x_)(Me)&&Me.annotations&&Me.annotations[A.q6.panelID]){this.hasAlertRules[se.uid]=!0;const Ke=Number(Me.annotations[A.q6.panelID]),st=Z(Me.state);pe[Ke]?st===H.Z.Alerting&&pe[Ke].state!==H.Z.Alerting?pe[Ke].state=H.Z.Alerting:st===H.Z.Pending&&pe[Ke].state!==H.Z.Alerting&&pe[Ke].state!==H.Z.Pending&&(pe[Ke].state=H.Z.Pending):pe[Ke]={state:st,id:Object.keys(pe).length,panelId:Ke,dashboardId:se.id}}})),{alertStates:Object.values(pe),annotations:[]}}throw new Error("Unexpected alert rules response.")}),(0,a.K)(D.Rc))}}function Z(me){return me===Q.x_.Firing?H.Z.Alerting:me===Q.x_.Pending?H.Z.Pending:H.Z.OK}class oe{constructor(q,se=(0,h.$t)(),ae=[g.vc.unifiedAlertingEnabled?new re:new x,new V.g,new L]){this.dashboard=q,this.timeSrv=se,this.workers=ae,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new t.t(1),this.runs=new n.x,this.cancellationStream=new n.x,this.runsSubscription=this.runs.subscribe(pe=>this.executeRun(pe)),this.eventsSubscription=q.events.subscribe(p.U5,pe=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(q){this.runs.next(q)}getResult(q){return this.results.asObservable().pipe((0,f.U)(se=>{const ae=(0,D.tD)(se.annotations,q),pe=se.alertStates.find(de=>Boolean(q)&&de.panelId===q);return{annotations:v(ae),alertState:pe}}))}executeRun(q){const ae=this.workers.filter(st=>st.canWork(q)).map(st=>st.work(q)),pe=new c.w0,de=(0,s.T)(ae).pipe((0,u.R)(this.runs.asObservable()),(0,r.J)(),(0,d.u)((st,Ie)=>(st.annotations=st.annotations.concat(Ie.annotations),st.alertStates=st.alertStates.concat(Ie.alertStates),st)),(0,o.x)(()=>{pe.unsubscribe()}),(0,m.B)()),Me=new c.w0,Ke=(0,i.H)(200).pipe((0,l.h)({annotations:[],alertStates:[]}),(0,u.R)(de),(0,o.x)(()=>{Me.unsubscribe()}));Me.add(Ke.subscribe(st=>{this.results.next(st)})),pe.add(de.subscribe(st=>{this.results.next(st)}))}cancel(q){this.cancellationStream.next(q)}cancellations(){return this.cancellationStream.asObservable().pipe((0,m.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let G;function le(me){G&&G.destroy(),G=me}function ge(){if(!G)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return G}let ne;function ue(me){ne=me}function te(me){ne||(ne=({dashboard:se,timeSrv:ae,workers:pe})=>new oe(se,ae,pe));const q=ne(me);return le(q),q}},56422:(Y,T,e)=>{"use strict";e.d(T,{g:()=>c});var t=e(59980),n=e(55197);class c{canWork({dashboard:i}){return i?.annotations?.list?.some(f=>f.enable&&Boolean(f.snapshotData))}work(i){if(!this.canWork(i))return(0,n.H_)();const f=this.getAnnotationsFromSnapshot(i.dashboard);return(0,t.of)({annotations:f,alertStates:[]})}getAnnotationsFromSnapshot(i){return(i?.annotations?.list?.filter(d=>d.enable)).filter(d=>Boolean(d.snapshotData)).reduce((d,o)=>d.concat((0,n.pG)(o,o.snapshotData)),[])}getAnnotationsInSnapshot(i,f){const u=this.getAnnotationsFromSnapshot(i);return(0,n.tD)(u,f)}}},55197:(Y,T,e)=>{"use strict";e.d(T,{H_:()=>l,Rc:()=>p,em:()=>E,h1:()=>o,hs:()=>m,pG:()=>v,tD:()=>y});var t=e(82897),n=e.n(t),c=e(59980),s=e(12115),i=e(77599),f=e(35645),u=e(3153),r=e(60499),d=e(98864);function o(h){return h.cancelled?(0,c.of)([]):(g("AnnotationQueryRunner failed",h),(0,c.of)([]))}function m(h){return g("Failed to retrieve datasource",h),(0,c.of)(void 0)}const l=()=>(0,c.of)({annotations:[],alertStates:[]});function p(h){return h.cancelled||g("DashboardQueryRunner failed",h),l()}function g(h,C){const a=(0,i.P)(C);console.error("handleAnnotationQueryRunnerError",a);const P=(0,r.t_)(h,a.message);(0,u.WI)((0,d.$l)(P))}function y(h,C){return C==null?h:h.filter(a=>{let P;if(P=a.source,!P)return!0;if(P.filter){const D=(P.filter.ids??[]).includes(C);if(P.filter.exclude){if(D)return!1}else if(!D)return!1}return a.panelId&&a.source.type==="dashboard"?a.panelId===C:!0})}function v(h,C){h.snapshotData&&(h=(0,t.cloneDeep)(h),delete h.snapshotData);for(const a of C)switch(a.source=h,a.color=f.v.theme2.visualization.getColorByName(h.iconColor),a.type=h.name,a.isRegion=Boolean(a.timeEnd&&a.time!==a.timeEnd),a.newState?.toLowerCase()){case"pending":a.color="yellow";break;case"alerting":a.color="red";break;case"ok":a.color="green";break;case"normal":a.color="green";break;case"no_data":a.color="gray";break;case"nodata":a.color="gray";break}return C}function E(h){if(!h||!h.length)return[];const C=[];for(const a of h){const P=new s.U(a);for(let D=0;D<a.length;D++){const x=(0,t.cloneDeep)(P.get(D));C.push(x)}}return C}},49003:(Y,T,e)=>{"use strict";e.d(T,{o:()=>O,t:()=>S});var t=e(82897),n=e(46528),c=e(59980),s=e(39859),i=e(9471),f=e(52666),u=e(83881),r=e(75849),d=e(76095),o=e(96905),m=e(13946),l=e(206),p=e(47891),g=e(20308),y=e(77599),v=e(22069),E=e(14035),h=e(91162),C=e(79543),a=e(17424),P=e(87865),D=e(23351),x=e(86029);function M(I,F){return(0,D.a)([I,F]).pipe((0,s.z)(w=>{const[K,L]=w;if(Boolean(L.annotations?.length)||Boolean(L.alertState)){K.annotations||(K.annotations=[]);const V=K.annotations.concat(new x.i(L.annotations)),H=L.alertState;return(0,c.of)({...K,annotations:V,alertState:H})}return(0,c.of)(K)}))}var b=e(75434);let R=100;function S(){return"Q"+R++}class O{constructor(F){this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new n.t(1),this.dataConfigSource=F}getData(F){const{withFieldConfig:w,withTransforms:K}=F;let L=1,V,H=[],j=[],A,_=!0,k=-1;if(this.dataConfigSource.snapshotData){const Q={state:f.Gu.Done,series:this.dataConfigSource.snapshotData.map(re=>(0,u.g0)(re)),timeRange:(0,r.JK)()};return(0,c.of)(Q)}return this.subject.pipe((0,s.z)(Q=>{let re=this.dataConfigSource.getFieldOverrideOptions(),Z=this.dataConfigSource.getTransformations();if(Q.series===j&&V?.fieldConfig===re?.fieldConfig&&A===Z)return(0,c.of)({...Q,structureRev:L,series:H});V=re,A=Z,j=Q.series;let oe=(0,c.of)(Q);return K&&(oe=this.applyTransformations(Q)),oe.pipe((0,i.U)(G=>{let le=G,ge=!1;if(w&&G.series?.length){if(k===this.dataConfigSource.configRev){const ne=G.series.find(ue=>(0,E.iL)(ue));ne&&!ne.packetInfo.schemaChanged&&H[0].fields.length===ne.fields.length&&(le={...le,series:H.map((ue,te)=>({...ue,length:G.series[te].length,fields:ue.fields.map((me,q)=>({...me,values:G.series[te].fields[q].values,state:{...me.state,calcs:void 0,range:void 0}}))}))},ge=!0)}re!=null&&(_||!ge)&&(k=this.dataConfigSource.configRev,le={...le,series:(0,d.SM)({timeZone:G.request?.timezone??"browser",data:le.series,...re})},_=!1)}return!ge&&!(0,o.nl)(H,le.series,o.Ch)&&L++,H=le.series,{...le,structureRev:L}}))}))}applyTransformations(F){const w=this.dataConfigSource.getTransformations();if(!w||w.length===0)return(0,c.of)(F);const K={interpolate:L=>(0,g.J)().replace(L,F?.request?.scopedVars)};return(0,m.H)(w,F.series,K).pipe((0,i.U)(L=>({...F,series:L})))}async run(F){const{queries:w,timezone:K,datasource:L,panelId:V,dashboardUID:H,publicDashboardAccessToken:j,timeRange:A,timeInfo:_,cacheTimeout:k,queryCachingTTL:Q,maxDataPoints:re,scopedVars:Z,minInterval:oe,app:G}=F;if((0,C.yl)(L)){this.pipeToSubject((0,C.AK)(F,w[0]),V,!0);return}const le={app:G??l.zj.Dashboard,requestId:S(),timezone:K,panelId:V,dashboardUID:H,publicDashboardAccessToken:j,range:A,timeInfo:_,interval:"",intervalMs:0,targets:(0,t.cloneDeep)(w),maxDataPoints:re,scopedVars:Z||{},cacheTimeout:k,queryCachingTTL:Q,startTime:Date.now(),rangeRaw:A.raw};try{const ge=await U(L,le.scopedVars,j),ne=ge.meta?.mixed;le.targets=le.targets.map(me=>{const q=me.datasource?.type===v.hr.type;return(!me.datasource||me.datasource.uid!==ge.uid&&!ne&&!q)&&(me.datasource=ge.getRef()),me});const ue=oe?(0,g.J)().replace(oe,le.scopedVars):ge.interval,te=p.calculateInterval(A,re,ue);le.scopedVars=Object.assign({},le.scopedVars,{__interval:{text:te.interval,value:te.interval},__interval_ms:{text:te.intervalMs.toString(),value:te.intervalMs}}),le.interval=te.interval,le.intervalMs=te.intervalMs,this.lastRequest=le,this.pipeToSubject((0,b.v7)(ge,le),V)}catch(ge){this.pipeToSubject((0,c.of)({state:f.Gu.Error,error:(0,y.P)(ge),series:[],timeRange:le.range}),V)}}pipeToSubject(F,w,K=!1){this.subscription&&this.subscription.unsubscribe();let L=F;const V=this.dataConfigSource.getDataSupport();if(V.alertStates||V.annotations){const H=this.dataConfigSource;L=M(F,(0,P.kt)().getResult(H.id))}this.subscription=L.subscribe({next:H=>{this.lastResult=K?H:(0,u.zR)(H,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&(this.lastResult.state===f.Gu.Loading||this.lastResult.state===f.Gu.Streaming)&&this.subject.next({...this.lastResult,state:f.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new n.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(F){this.lastResult=F.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(F){this.lastResult=F}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}async function U(I,F,w){if(!w&&I&&typeof I=="object"&&"query"in I)return I;const K=await(0,h.ak)().get(I,F);return w?new a.lh(K):K}},88039:(Y,T,e)=>{"use strict";e.d(T,{V:()=>n});var t=e(86318);function n(c,s){return(0,t.x)(()=>{s&&c.resolveCancelerIfExists(s)})}},59584:(Y,T,e)=>{"use strict";e.d(T,{C:()=>n});var t=e(96905);const n=(c,s)=>{let i=1;return s?.structureRev&&s.series&&(i=s.structureRev,(0,t.nl)(c.series,s.series,t.Ch)||i++),c.structureRev=i,c}},75434:(Y,T,e)=>{"use strict";e.d(T,{v7:()=>U});var t=e(82897),n=e(59980),c=e(12877),s=e(25740),i=e(49372),f=e(9471),u=e(59724),r=e(71735),d=e(57027),o=e(46978),m=e(82615),l=e(52666),p=e(89749),g=e(47406),y=e(206),v=e(77599),E=e(22069),h=e(29930),C=e(99822),a=e(47471),P=e(88039),D=e(49187),x=e(75552),M=e(41818),b=e(9398);function R(F){let w=!1;return V=>{if(!V.request||w||D.Cj.getUrlSearchParams().editPanel!=null||V.state!==l.Gu.Done&&V.state!==l.Gu.Error)return;const j={eventName:x.ct.DataRequest,source:V.request.app,datasourceName:F.name,datasourceId:F.id,datasourceUid:F.uid,datasourceType:F.type,dataSize:0,duration:V.request.endTime-V.request.startTime};V.request.app===y.zj.Explore||V.request.app===y.zj.Correlations?K(j,V):L(j,V),V.series&&V.series.length>0&&(j.dataSize=V.series.length),(0,M.r_)(j),w=!0};function K(V,H){const j=Object.keys(H.series).length;V.totalQueries=j}function L(V,H){const j={};for(let Q=0;Q<H.series.length;Q++){const re=H.series[Q].refId;re&&!j[re]&&(j[re]=H.series[Q].meta?.isCachedResponse??!1)}const A=Object.keys(j).length,_=Object.values(j).filter(Q=>Q===!0).length;V.panelId=H.request.panelId,V.totalQueries=A,V.cachedQueries=_;const k=(0,b.h4)().getCurrent();k&&(V.dashboardId=k.id,V.dashboardName=k.title,V.dashboardUid=k.uid,V.folderName=k.meta.folderTitle),H.error&&(V.error=H.error.message)}}function S(F,w){const K=w.panelData.request,L={...w.packets},V=F.key??F.data?.[0]?.refId??"A";L[V]=F;let H=F.state||l.Gu.Done,j,A;const _=[],k=[];for(const oe in L){const G=L[oe];if((G.error||G.errors?.length)&&(H=l.Gu.Error,j=G.error,A=G.errors),G.data&&G.data.length)for(const le of G.data){if(le.meta?.dataTopic===p.w5.Annotations){k.push(le);continue}_.push(le)}}const Q=O(K,H),re={state:H,series:_,annotations:k,error:j,errors:A,request:K,timeRange:Q},Z=new Set([...w.panelData.traceIds??[],...F.traceIds??[]]);return Z.size>0&&(re.traceIds=Array.from(Z)),{packets:L,panelData:re}}function O(F,w){const K=F.range;return!(0,t.isString)(K.raw.from)||w!==l.Gu.Streaming?K:{...K,from:g.parse(K.raw.from,!1),to:g.parse(K.raw.to,!0)}}function U(F,w,K){let L={panelData:{state:l.Gu.Loading,series:[],request:w,timeRange:w.range},packets:{}};if(!w.targets.length)return w.endTime=Date.now(),L.panelData.state=l.Gu.Done,(0,n.of)(L.panelData);const V=I(F,w,K).pipe((0,f.U)(H=>{if(!(0,t.map)(H.data))throw new Error(`Expected response data to be array, got ${typeof H.data}.`);return w.endTime=Date.now(),L=S(H,L),L.panelData}),(0,u.K)(H=>{const j=typeof H=="string"?H:JSON.stringify(H);return console.error("runRequest.catchError",j),(0,n.of)({...L.panelData,state:l.Gu.Error,error:(0,v.P)(H)})}),(0,r.b)(R(F)),(0,P.V)(h.ae,w.requestId),(0,d.B)());return(0,c.T)((0,s.H)(200).pipe((0,o.h)(L.panelData),(0,m.R)(V)),V)}function I(F,w,K){if(w.targets=w.targets.map(V=>(0,C.vH)(V)?{...F?.getDefaultQuery?.(y.zj.PanelEditor),...V}:V),F.type==="public-ds")return(0,i.D)(F.query(w));for(const V of w.targets)if((0,E.Pr)(V.datasource))return a.mV.query(w);const L=K?K(w):F.query(w);return(0,i.D)(L)}},10216:(Y,T,e)=>{"use strict";e.d(T,{CN:()=>c,E_:()=>g,YQ:()=>r,fy:()=>d,pW:()=>u,qb:()=>l,qi:()=>f,rh:()=>m,to:()=>o,xb:()=>p,yw:()=>i});var t=e(1037);const n=null,c=58,s=8,i={label:"A\u2013Z",value:"alpha-asc"},f="search.sections",u=0,r="general",d="General",o="grafana.search.include.panels",m="grafana.search.layout",l="grafana.search.sort",p={dashboard:t.o.DashDB,folder:t.o.DashFolder,home:t.o.DashHome},g=1e3},55185:(Y,T,e)=>{"use strict";e.d(T,{o:()=>i});var t=e(54899),n=e(47694),c=e(58355),s=e(28066);async function i(u,r,d=!1){if(!n.ZP.featureToggles.nestedFolders)return console.error("getFolderChildren requires nestedFolders feature toggle"),[];if(!d&&!u)return await f();const m=await(0,c.O)().search({kind:["dashboard"],query:"*",location:u||"general",limit:1e3}),l=m.view.map(g=>(0,s.f9)(g,m.view));return[...await f(u,r),...l]}async function f(u,r){return(await(0,t.i)().get("/api/folders",{parentUid:u})).map(m=>({kind:"folder",uid:m.uid,title:m.title,parentTitle:r,parentUID:u,url:`/dashboards/f/${m.uid}/`}))}},82e3:(Y,T,e)=>{"use strict";e.d(T,{getGrafanaSearcher:()=>t.O});var t=e(58355)},58355:(Y,T,e)=>{"use strict";e.d(T,{O:()=>R});var t=e(35645),n=e(12115),c=e(83881),s=e(6194),i=e(54899),f=e(28066);const u="Loading",r="api/search-v2",d="name_sort";class o{constructor(O){this.fallbackSearcher=O}async search(O){if(O.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(O)}async starred(O){if(O.facet?.length)throw new Error("facets not supported!");const U=await(0,i.i)().get("api/user/stars");return U?.length?this.doSearchQuery({uid:U,query:O.query??"*"}):{view:new n.U({length:0,fields:[]}),totalRows:0,loadMoreItems:async(I,F)=>{},isItemLoaded:I=>!0}}async tags(O){const U={...O,query:O.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},F=(await(0,i.i)().post(r,U)).frames.map(w=>(0,c.g0)(w));if(F[0]?.name===u)return this.fallbackSearcher.tags(O);for(const w of F)if(w.fields[0].name==="tag")return p(w);return[]}getSortOptions(){const O=[{value:d,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(t.v.licenseInfo.enabledFeatures.analytics){for(const U of g)O.push({value:`-${U.name}`,label:`${U.display} (most)`}),O.push({value:`${U.name}`,label:`${U.display} (least)`});for(const U of y)O.push({value:`-${U.name}`,label:`${U.display} (recent)`}),O.push({value:`${U.name}`,label:`${U.display} (oldest)`})}return Promise.resolve(O)}async doSearchQuery(O){O=await(0,f.Sd)(O);const U={...O,query:O.query??"*",limit:O.limit??m},F=(await(0,i.i)().post(r,U)).frames.map(A=>(0,c.g0)(A)),w=F.length?(0,c.g0)(F[0]):{fields:[],length:0};if(w.name===u)return this.fallbackSearcher.search(O);for(const A of w.fields)A.display=(0,s.U_)({field:A,theme:t.v.theme2});w.meta?.custom||(w.meta={...w.meta,custom:{count:w.length,max_score:1}});const K=w.meta.custom;if(K.locationInfo||(K.locationInfo={}),K.sortBy?.length){const A=w.fields.find(_=>_.name===K.sortBy);if(A){const _=v(A.name);K.sortBy=_,A.name=_}}let L=0,V;const H=async()=>{for(;L>j.dataFrame.length;){const A=j.dataFrame.length;if(A>=K.count)return;const _=await(0,i.i)().post(r,{...U??{},from:A,limit:l}),k=(0,c.g0)(_.frames[0]);if(!k){console.log("no results",k);return}if(k.fields.length!==j.dataFrame.fields.length){console.log("invalid shape",k,j.dataFrame);return}const Q=k.length+j.dataFrame.length;for(let Z=0;Z<k.fields.length;Z++)j.dataFrame.fields[Z].values.push(...k.fields[Z].values);j.dataFrame.length=Q;const re=k.meta?.custom;if(re?.locationInfo&&K)for(const[Z,oe]of Object.entries(re.locationInfo))K.locationInfo[Z]=oe}V=void 0},j=new n.U(w);return{totalRows:K.count??w.length,view:j,loadMoreItems:async(A,_)=>(L=Math.max(L,_),V||(V=H()),V),isItemLoaded:A=>A<j.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const m=50,l=100;function p(S){const O=S.fields[0].values,U=S.fields[1].values,I=[];for(let F=0;F<S.length;F++)I.push({term:O[F],count:U[F]});return I}const g=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],y=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function v(S){for(const O of g)if(O.name===S)return O.display;for(const O of y)if(O.name===S)return O.display;return S}var E=e(22759);class h{constructor(O){this.parent=O,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(O){if(O.facet?.length)throw new Error("facets not supported!");if(O.sort!=null)throw new Error("custom sorting is not supported yet");if(O.tags?.length||O.ds_uid?.length)return this.parent.search(O);const I=(await this.getCache(O.kind)).search(O.query);return{isItemLoaded:()=>!0,loadMoreItems:async(F,w)=>{},totalRows:I.length,view:I}}async getCache(O){const U=O?O.sort().join(","):"*",I=this.cache.get(U);if(I)try{return await I}catch{return this.cache.delete(U),new C(new n.U({name:"error",fields:[],length:0}))}const F=this.parent.search({kind:O,limit:5e3}).then(w=>new C(w.view));return this.cache.set(U,F),F}async starred(O){return this.parent.starred(O)}async getSortOptions(){return this.parent.getSortOptions()}async tags(O){return this.parent.tags(O)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class C{constructor(O){this.full=O,this.ufuzzy=new E.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values,this.empty=new n.U({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(U=>({...U,values:[]})),length:0})}search(O){if(!O?.length||O==="*")return this.full;const U=this.full.dataFrame.fields,I=this.names,F=U.map(V=>[]);let[w,K,L]=this.ufuzzy.search(I,O,!0);for(let V=0;V<U.length;V++){let H=U[V].values,j=F[V];if(K&&L)for(let A=0;A<L.length;A++){let _=K.idx[L[A]];j.push(H[_])}else if(w)for(let A=0;A<w.length;A++){let _=w[A];j.push(H[_])}}return this.empty.dataFrame.fields.forEach((V,H)=>{V.values=F[H]}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var a=e(99098),P=e(29930),D=e(10216),x=e(1037);class M{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards",folderId:0}},this.getFolderViewSort=()=>""}async composeQuery(O,U){const I=await(0,f.Sd)(U);if(I.query==="*"?I.kind?.length===1&&D.xb[I.kind[0]]&&(O.type=D.xb[I.kind[0]]):I.query?.length&&(O.query=I.query),I.uid)O.dashboardUID=I.uid;else if(I.location?.length){let F=this.locationInfo[I.location];F||(await this.doAPIQuery({type:x.o.DashFolder,limit:999}),F=this.locationInfo[I.location]),O.folderIds=[F?.folderId??0]}return O}async search(O){if(O.facet?.length)throw new Error("facets not supported!");const U=await this.composeQuery({limit:O.limit??D.E_,tag:O.tags,sort:O.sort},O);return this.doAPIQuery(U)}async starred(O){if(O.facet?.length)throw new Error("facets not supported!");const U=await this.composeQuery({limit:O.limit??D.E_,tag:O.tags,sort:O.sort,starred:O.starred},O);return this.doAPIQuery(U)}async getSortOptions(){return(await P.ae.get("/api/search/sorting")).sortOptions.map(U=>({value:U.name,label:U.displayName}))}async tags(O){return(await P.ae.get("/api/dashboards/tags")).sort((I,F)=>F.count-I.count)}async doAPIQuery(O){const U=await P.ae.get("/api/search",O),I=[],F=[],w=[],K=[],L=[],V=[],H=[];let j;for(let k of U){const Q=k.type==="dash-folder"?"folder":"dashboard";I.push(Q),F.push(k.title),w.push(k.uid),K.push(k.url),L.push(k.tags),H.push(k.sortMeta);let re=k.folderUid;!re&&Q==="dashboard"&&(re="general"),V.push(re),k.sortMetaName?.length&&(j=k.sortMetaName),k.folderUid&&k.folderTitle?this.locationInfo[k.folderUid]={kind:"folder",name:k.folderTitle,url:k.folderUrl,folderId:k.folderId}:Q==="folder"&&(this.locationInfo[k.uid]={kind:Q,name:k.title,url:k.url,folderId:k.id})}const A={fields:[{name:"kind",type:a.fS.string,config:{},values:I},{name:"name",type:a.fS.string,config:{},values:F},{name:"uid",type:a.fS.string,config:{},values:w},{name:"url",type:a.fS.string,config:{},values:K},{name:"tags",type:a.fS.other,config:{},values:L},{name:"location",type:a.fS.string,config:{},values:V}],length:F.length,meta:{custom:{count:F.length,max_score:1,locationInfo:this.locationInfo}}};j?.length&&H.length&&(A.meta.custom.sortBy=j,A.fields.push({name:j,type:a.fS.number,config:{},values:H}));for(const k of A.fields)k.display=(0,s.U_)({field:k,theme:t.v.theme2});const _=new n.U(A);return{totalRows:A.length,view:_,loadMoreItems:async(k,Q)=>{},isItemLoaded:k=>!0}}}let b;function R(){if(!b){const S=new M,O=t.v.featureToggles.panelTitleSearch;b=O?new o(S):S,O&&location.search.includes("do-frontend-query")&&(b=new h(b))}return b}},28066:(Y,T,e)=>{"use strict";e.d(T,{J6:()=>i,Sd:()=>n,f9:()=>f});var t=e(9398);async function n(u){return u.query&&u.query.indexOf("folder:current")>=0&&(u={...u,location:await c(),query:u.query.replace("folder:current","").trim()},u.query?.length||(u.query="*")),Promise.resolve(u)}async function c(){try{let u=(0,t.h4)().getCurrent();return u||(await s(500),u=(0,t.h4)().getCurrent()),Promise.resolve(u?.meta?.folderUid)}catch(u){console.error(u)}}function s(u){return new Promise(r=>setTimeout(r,u))}function i(u){return u==="dashboard"?"apps":u==="folder"?"folder":"question-circle"}function f(u,r){const d=r?.dataFrame.meta?.custom,o={kind:"dashboard",uid:u.uid,title:u.name,url:u.url,tags:u.tags??[]},m=d?.sortBy;if(m){const l=u[m];(typeof l=="string"||typeof l=="number")&&(o.sortMetaName=m,o.sortMeta=l)}if(u.location){const l=u.location.split("/"),p=l[l.length-1],g=d?.locationInfo[p];g&&(o.parentTitle=g.name,o.parentKind=g.kind,o.parentUID=p)}return o}},1037:(Y,T,e)=>{"use strict";e.d(T,{A:()=>n,o:()=>t});var t=(c=>(c.DashDB="dash-db",c.DashHome="dash-home",c.DashFolder="dash-folder",c))(t||{}),n=(c=>(c.List="list",c.Folders="folders",c))(n||{})},45003:(Y,T,e)=>{"use strict";e.d(T,{Dn:()=>v,LA:()=>d,M4:()=>h,P4:()=>f,Ub:()=>y,ZP:()=>a,aj:()=>C,dt:()=>g,e7:()=>u,pN:()=>p,s3:()=>r});var t=e(62992),n=e(27876);const c={serviceAccount:{},isLoading:!0,tokens:[]},s=(0,t.oM)({name:"serviceaccount",initialState:c,reducers:{serviceAccountFetchBegin:P=>({...P,isLoading:!0}),serviceAccountFetchEnd:P=>({...P,isLoading:!1}),serviceAccountLoaded:(P,D)=>({...P,serviceAccount:D.payload,isLoading:!1}),serviceAccountTokensLoaded:(P,D)=>({...P,tokens:D.payload,isLoading:!1})}}),i=s.reducer,{serviceAccountLoaded:f,serviceAccountTokensLoaded:u,serviceAccountFetchBegin:r,serviceAccountFetchEnd:d}=s.actions,o={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:n.ServiceAccountStateFilter.All},m=(0,t.oM)({name:"serviceaccounts",initialState:o,reducers:{serviceAccountsFetched:(P,D)=>{const{totalCount:x,perPage:M,...b}=D.payload,R=Math.ceil(x/M);return{...P,...b,totalPages:R,perPage:M,showPaging:R>1,isLoading:!1}},serviceAccountsFetchBegin:P=>({...P,isLoading:!0}),serviceAccountsFetchEnd:P=>({...P,isLoading:!1}),acOptionsLoaded:(P,D)=>({...P,roleOptions:D.payload}),queryChanged:(P,D)=>({...P,query:D.payload,page:0}),pageChanged:(P,D)=>({...P,page:D.payload}),stateFilterChanged:(P,D)=>({...P,serviceAccountStateFilter:D.payload})}}),l=m.reducer,{serviceAccountsFetchBegin:p,serviceAccountsFetchEnd:g,serviceAccountsFetched:y,acOptionsLoaded:v,pageChanged:E,stateFilterChanged:h,queryChanged:C}=m.actions,a={serviceAccountProfile:i,serviceAccounts:l}},62295:(Y,T,e)=>{"use strict";e.d(T,{Ii:()=>i,UW:()=>d,ZP:()=>p,cD:()=>u,fT:()=>m,ik:()=>r,ki:()=>f,rI:()=>o,rW:()=>s});var t=e(62992);const n={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},c=(0,t.oM)({name:"supportBundles",initialState:n,reducers:{supportBundlesLoaded:(g,y)=>({...g,supportBundles:y.payload,isLoading:!1}),fetchBegin:g=>({...g,isLoading:!0}),fetchEnd:g=>({...g,isLoading:!1}),collectorsFetchBegin:g=>({...g,createBundlePageLoading:!0}),collectorsFetchEnd:g=>({...g,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(g,y)=>({...g,supportBundleCollectors:y.payload,createBundlePageLoading:!1}),setLoadBundleError:(g,y)=>({...g,loadBundlesError:y.payload,supportBundleCollectors:[]}),setCreateBundleError:(g,y)=>({...g,createBundleError:y.payload})}}),{supportBundlesLoaded:s,fetchBegin:i,fetchEnd:f,supportBundleCollectorsLoaded:u,collectorsFetchBegin:r,collectorsFetchEnd:d,setLoadBundleError:o,setCreateBundleError:m}=c.actions,p={supportBundles:c.reducer}},97189:(Y,T,e)=>{"use strict";e.d(T,{PJ:()=>f,PL:()=>s,UD:()=>p,ZP:()=>y,aj:()=>i,iI:()=>m,n2:()=>l,p3:()=>n,y$:()=>o});var t=e(62992);const n={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},c=(0,t.oM)({name:"teams",initialState:n,reducers:{teamsLoaded:(v,E)=>{const{totalCount:h,perPage:C,...a}=E.payload,P=Math.ceil(h/C);return{...v,...a,totalPages:P,perPage:C,hasFetched:!0}},queryChanged:(v,E)=>({...v,page:1,query:E.payload}),pageChanged:(v,E)=>({...v,page:E.payload})}}),{teamsLoaded:s,queryChanged:i,pageChanged:f}=c.actions,u=c.reducer,r={team:{},members:[],groups:[],searchMemberQuery:""},d=(0,t.oM)({name:"team",initialState:r,reducers:{teamLoaded:(v,E)=>({...v,team:E.payload}),teamMembersLoaded:(v,E)=>({...v,members:E.payload}),setSearchMemberQuery:(v,E)=>({...v,searchMemberQuery:E.payload}),teamGroupsLoaded:(v,E)=>({...v,groups:E.payload})}}),{teamLoaded:o,teamGroupsLoaded:m,teamMembersLoaded:l,setSearchMemberQuery:p}=d.actions,g=d.reducer,y={teams:u,team:g}},28674:(Y,T,e)=>{"use strict";e.d(T,{J:()=>re});var t=e(82897),n=e(55024),c=e(86647),s=e(20308),i=e(57369),f=e(40538),u=e(22323),r=e(82253),d=e(15546),o=e(87095),m=e(92624);let l={};function p(Z){const oe=l[Z];return oe||(l[Z]=(0,t.property)(Z))}class g{constructor(oe,G,le){this.state={name:oe.name,value:G,text:le,type:oe.type}}getValue(oe){let{value:G}=this.state;return G==="string"||G==="number"||G==="boolean"?G:String(G)}getValueText(){const{value:oe,text:G}=this.state;return typeof G=="string"?oe===r.r2?r.xk:G:Array.isArray(G)?G.join(" + "):(console.log("value",G),String(G))}}let y;function v(Z,oe,G){return y?(y.state.name=Z.name,y.state.type=Z.type,y.state.value=oe,y.state.text=G):y=new g(Z,oe,G),y}function E(Z,oe,G,le){if(G=G||{},Z==null||(0,d.Kn)(G)&&oe!==f.b8.QueryParam)return"";if(!Array.isArray(Z)&&typeof Z=="object"&&(Z=`${Z}`),typeof oe=="function")return oe(Z,G,E);oe||(oe=f.b8.Glob);let ge=oe.split(":");ge.length>1?(oe=ge[0],ge=ge.slice(1)):ge=[];let ne=i.Vl.getIfExists(oe);ne||(console.error(`Variable format ${oe} not found. Using glob format as fallback.`),ne=i.Vl.get(f.b8.Glob));const ue=v(G,Z,le??Z);return ne.formatter(Z,ge,ue)}var h=e(94976),C=e(49187),a=e(19349),P=e(69155),D=e(2703),x=e(99098),M=e(72769),b=e(6194),R=e(30471),S=e(7569);function O(Z,oe,G){return new Proxy({},{get:(le,ge)=>{if(ge==="name")return Z.name;if(ge==="displayName")return(0,R.CZ)(Z,oe,G);if(ge==="labels"||ge==="formattedLabels")return Z.labels?{...Z.labels,__values:Object.values(Z.labels).sort().join(", "),toString:()=>(0,S.aA)(Z.labels,"",!0)}:""}})}function U(Z,oe,G,le){const ge=I(Z,oe,G);return E(ge,le)}function I(Z,oe,G){const le=G?.__dataContext;if(!le)return Z;const{frame:ge,rowIndex:ne,field:ue,calculatedValue:te}=le.value;if(te)switch(oe){case"numeric":return te.numeric.toString();case"raw":return te.numeric;case"time":return"";case"text":default:return(0,D.zc)(te)}if(ne===void 0)return Z;if(oe==="time"){const ae=ge.fields.find(pe=>pe.type===x.fS.time);return ae?ae.values[ne]:void 0}const me=ue.values[ne];if(oe==="raw")return me;const se=(ue.display??K())(me);switch(oe){case"numeric":return se.numeric;case"text":return se.text;default:return(0,D.zc)(se)}}function F(Z,oe,G,le){const ge=G?.__dataContext;if(!ge||!oe)return Z;const{frame:ne,rowIndex:ue}=ge.value;if(ue===void 0||oe===void 0)return Z;const te={name:ne.name,refId:ne.refId,fields:(0,M.z)({frame:ne,rowIndex:ue})},me=p(oe)(te)??"";return E(me,le)}let w;function K(){return w||(w=(0,b.U_)()),w}function L(Z,oe,G,le){const ge=G?.__dataContext;if(!ge||oe!=="name")return Z;const{frame:ne,frameIndex:ue}=ge.value,te=(0,R.nf)(ne,ue);return E(te,le)}function V(Z,oe,G,le){const ge=G?.__dataContext;if(!ge||oe===void 0||oe==="")return Z;const{frame:ne,field:ue,data:te}=ge.value,me=O(ue,ne,te),q=p(oe)(me)??"";return E(q,le)}const H={__value:U,__data:F,__series:L,__field:V,[h.W.includeVars]:j,[h.W.keepTime]:A};function j(Z,oe,G){const le=(0,P.c)(G);return C.Cj.toUrlParams(le)}function A(){return C.Cj.toUrlParams((0,a.$t)().timeRangeForUrl())}const _={getFilteredVariables:o.Q4,getVariables:o.ng,getVariableWithName:o._K};class k{constructor(oe=_){this.dependencies=oe,this.regex=m.J7,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this._variables=[]}init(oe,G){this._variables=oe,this.timeRange=G,this.updateIndex()}get variables(){return(0,n.d)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return this.dependencies.getVariables()}updateIndex(){const oe=G=>G||G==="";if(this.index=this._variables.reduce((G,le)=>(le.current&&(le.current.isNone||oe(le.current.value))&&(G[le.name]=le),G),{}),this.timeRange){const G=this.timeRange.from.valueOf().toString(),le=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:G,text:G}},__to:{current:{value:le,text:le}}}}}updateTimeRange(oe){this.timeRange=oe,this.updateIndex()}variableInitialized(oe){this.index[oe.name]=oe}getAdhocFilters(oe){let G=[],le=(0,c.F)().getInstanceSettings(oe);if(!le)return[];for(const ge of this.getAdHocVariables()){const ne=ge.datasource?.uid;(ne===le.uid||ne?.indexOf("$")===0&&this.replace(ne)===oe)&&(G=G.concat(ge.filters))}return G}setGrafanaVariable(oe,G){this.grafanaVariables.set(oe,G)}setGlobalVariable(oe,G){(0,n.d)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[oe]:{current:G}}}getVariableName(oe){this.regex.lastIndex=0;const G=this.regex.exec(oe);return G?G.slice(1).find(ge=>ge!==void 0):null}containsTemplate(oe){if(!oe)return!1;const G=this.getVariableName(oe),le=G&&this.getVariableAtIndex(G);return le!=null}variableExists(oe){return(0,n.d)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(oe)}highlightVariablesAsHtml(oe){return!oe||!(0,t.isString)(oe)?oe:(oe=(0,t.escape)(oe),this._replaceWithVariableRegex(oe,void 0,(G,le)=>this.getVariableAtIndex(le)?'<span class="template-variable">'+G+"</span>":G))}getAllValue(oe){if(oe.allValue)return oe.allValue;const G=[];for(let le=1;le<oe.options.length;le++)G.push(oe.options[le].value);return G}getVariableValue(oe,G){return G?p(G)(oe.value):oe.value}getVariableText(oe,G){return oe.value===G||typeof G!="string"?oe.text:G}replace(oe,G,le,ge){return G&&G.__sceneObject?i.ep.interpolate(G.__sceneObject.value,oe,G,le):oe?(this.regex.lastIndex=0,this._replaceWithVariableRegex(oe,le,(ne,ue,te,me)=>{const q=this._evaluateVariableExpression(ne,ue,te,me,G);return ge&&ge.push({match:ne,variableName:ue,fieldPath:te,format:me,value:q,found:q!==ne}),q})):oe??""}_evaluateVariableExpression(oe,G,le,ge,ne){const ue=this.getVariableAtIndex(G),te=ne?.[G];if(te){const ae=this.getVariableValue(te,le),pe=this.getVariableText(te,ae);if(ae!=null)return E(ae,ge,ue,pe)}if(!ue){const ae=H[G];return ae?ae(oe,le,ne,ge):oe}if(ge===f.b8.QueryParam||(0,d.Kn)(ue)){const ae=u.z.get(ue.type).getValueForUrl(ue),pe=(0,d.Kn)(ue)?ue.id:ue.current.text;return E(ae,ge,ue,pe)}const me=this.grafanaVariables.get(ue.current.value);if(me)return E(me,ge,ue);let q=ue.current.value,se=ue.current.text;if(this.isAllValue(q)&&(q=this.getAllValue(ue),se=r.xk,ue.allValue&&ge!==f.b8.Text&&ge!==f.b8.PercentEncode))return this.replace(q);if(le){const ae=this.getVariableValue({value:q,text:se},le);if(ae!=null)return E(ae,ge,ue,se)}return E(q,ge,ue,se)}_replaceWithVariableRegex(oe,G,le){return this.regex.lastIndex=0,oe.replace(this.regex,(ge,ne,ue,te,me,q,se)=>le(ge,ne||ue||me,q,te||se||G))}isAllValue(oe){return oe===r.r2||Array.isArray(oe)&&oe[0]===r.r2}replaceWithText(oe,G){return(0,n.d)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(oe,G,"text")}getVariableAtIndex(oe){if(oe)return this.index[oe]?this.index[oe]:this.dependencies.getVariableWithName(oe)}getAdHocVariables(){return this.dependencies.getFilteredVariables(d.Kn)}}const Q=new k;(0,s.l)(Q);const re=()=>Q},90024:(Y,T,e)=>{"use strict";e.d(T,{J:()=>o});var t=e(40538),n=e(34315),c=e(66111),s=e(52081),i=e(2594),f=e(46967);const u=[{label:"Size",value:t.kW.Size,description:"Split the buckets based on size"},{label:"Count",value:t.kW.Count,description:"Split the buckets based on count"}],r=[{label:"Split",value:t.kW.Size,description:"Split the buckets based on size"}],d=({value:m,onChange:l,item:p})=>c.createElement(s.Lh,null,c.createElement(i.S,{value:m?.mode||t.kW.Size,options:m?.scale?.type===t.wf.Log?r:u,onChange:g=>{l({...m,mode:g})}}),c.createElement(f.I,{value:m?.value??"",placeholder:"Auto",onChange:g=>{l({...m,value:g.currentTarget.value})}}));function o(m,l,p,g){l.addCustomEditor({id:"xBuckets",path:`${m}xBuckets`,name:"X Bucket",editor:d,category:g,defaultValue:{mode:t.kW.Size}}),l.addCustomEditor({id:"yBuckets",path:`${m}yBuckets`,name:"Y Bucket",editor:d,category:g,defaultValue:{mode:t.kW.Size}}),l.addCustomEditor({id:"yBuckets-scale",path:`${m}yBuckets.scale`,name:"Y Bucket scale",category:g,editor:n.Y,defaultValue:{type:t.wf.Linear}})}},77564:(Y,T,e)=>{"use strict";e.d(T,{xf:()=>H,Oy:()=>U,qJ:()=>K,d8:()=>w,Cj:()=>L});var t=e(9471),n=e(13512),c=e(99098),s=e(30471),i=e(2703),f=e(39393),u=e(76282),r=e(75133),d=e(17587),o=e(40538),m=e(56190);const{abs:l,pow:p}=Math,g=new Map;function y(_,k,Q,re){let Z=[],oe=re.map(m.d);for(let G=k;G<Q;G++){let le=l(G),ge=(0,m.O)(p(_,G),le);for(let ne=0;ne<re.length;ne++){let ue=re[ne]*ge,te=(ue>=0&&G>=0?0:le)+(G>=oe[ne]?0:oe[ne]),me=(0,m.O)(ue,te);Z.push(me),g.set(me,te)}}return Z}const v=_=>_%1===0,E=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],h=y(10,-16,0,E),C=y(10,0,16,E),a=C.filter(v),P=h.concat(C),D=h.concat(a),x=1*1e3,M=60*x,b=60*M,R=24*b,S=365*R,O=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,x,2*x,4*x,5*x,10*x,15*x,20*x,30*x,M,2*M,4*M,5*M,10*M,15*M,20*M,30*M,b,2*b,4*b,6*b,8*b,12*b,18*b,R,2*R,3*R,4*R,5*R,6*R,7*R,10*R,15*R,30*R,45*R,60*R,90*R,180*R,S,2*S,3*S,4*S,5*S,6*S,7*S,8*S,9*S,10*S],U={id:n.W.heatmap,name:"Create heatmap",description:"calculate heatmap from source data",defaultOptions:{},operator:(_,k)=>Q=>Q.pipe((0,t.U)(re=>U.transformer(_,k)(re))),transformer:_=>k=>{const Q=H(k,_);return _.keepOriginalData?[Q,...k]:[Q]}};function I(_){return _==="+Inf"?1/0:_==="-Inf"?-1/0:+(_??0)}function F(_,k){return I(_)-I(k)}function w(_){return _?.meta?.custom??{}}function K(_){let k=!1;for(let Q of _.fields)switch(Q.name){case"y":case"yMin":case"yMax":if(k)return!1;k=!0}return k}function L(_){const k=_.frame.fields[0],Q=k.values,re=_.frame.fields.filter((q,se)=>q.type===c.fS.number&&se>0),Z=Q.length*re.length,oe=new Array(Z),G=new Array(Z),le=new Array(Z),ge=re.map(q=>q.values.slice());ge.forEach((q,se)=>{for(let ae=0;ae<q.length;ae++)le[ge.length*ae+se]=q[ae]});const ne=Array.from({length:re.length},(q,se)=>se);for(let q=0,se=0,ae=0;q<Z;se=++q%ne.length)G[q]=ne[se],se===0&&q>=ne.length&&ae++,oe[q]=Q[ae];let ue=re[0].labels?.le!=null?"yMax":"y";switch(_.layout){case o.kv.le:ue="yMax";break;case o.kv.ge:ue="yMin";break;case o.kv.unknown:ue="y";break}const te={yOrdinalDisplay:re.map(q=>(0,s.CZ)(q,_.frame)),yMatchWithLabel:Object.keys(re[0].labels??{})[0]};if(te.yMatchWithLabel&&(te.yOrdinalLabel=re.map(q=>q.labels?.[te.yMatchWithLabel]??""),te.yMatchWithLabel==="le"&&(te.yMinDisplay="0.0")),_.unit?.length||_.decimals!=null){const q=(0,i.Cf)(_.unit??"short");te.yMinDisplay&&(te.yMinDisplay=(0,i.zc)(q(0,_.decimals))),te.yOrdinalDisplay=te.yOrdinalDisplay.map(se=>{let ae=+se;return Number.isNaN(ae)?se:(0,i.zc)(q(ae,_.decimals))})}const me={...re[0].config};return me.displayNameFromDS&&delete me.displayNameFromDS,{length:oe.length,refId:_.frame.refId,meta:{type:f.P.HeatmapCells,custom:te},fields:[{name:k.type===c.fS.time?"xMax":"x",type:k.type,values:oe,config:k.config},{name:ue,type:c.fS.number,values:G,config:{unit:"short"}},{name:_.value?.length?_.value:"Value",type:c.fS.number,values:le,config:me,display:re[0].display}]}}function V(_){_=_.slice(),_.sort((Q,re)=>F(Q.name,re.name));const k=_.map(Q=>Q.fields[1].values.slice());return k.reverse(),k.forEach((Q,re)=>{if(re<k.length-1)for(let Z=0;Z<Q.length;Z++)Q[Z]-=k[re+1][Z]}),k.reverse(),_.map((Q,re)=>({...Q,fields:[Q.fields[0],{...Q.fields[1],values:k[re]}]}))}function H(_,k){let Q,re,Z=0;for(let q of _)q.fields.find(ae=>ae.type===c.fS.time)&&(Z+=q.length);let oe=Array(Z),G=Array(Z),le=0;for(let q of _){const se=q.fields.find(pe=>pe.type===c.fS.time);if(!se)continue;Q||(Q=se);const ae=se.values;for(let pe of q.fields)if(pe!==se&&pe.type===c.fS.number){const de=pe.values;for(let Me=0;Me<ae.length;Me++,le++)oe[le]=ae[Me],G[le]=de[Me];re||(re=pe)}}if(!Q||!re)throw"no heatmap fields found";if(!oe.length||!G.length)throw"no values found";const ge=k.xBuckets??{},ne=k.yBuckets??{};if(ge.scale?.type===o.wf.Log)throw"X axis only supports linear buckets";const ue=k.yBuckets?.scale??{type:o.wf.Linear},te=j(oe,G,{xSorted:(0,d.lP)(oe),xTime:Q.type===c.fS.time,xMode:ge.mode,xSize:ge.mode===o.kW.Size?(0,u.iX)((0,u.RA)(ge.value??"")):ge.value?+ge.value:void 0,yMode:ne.mode,ySize:ne.value?+ne.value:void 0,yLog:ue?.type===o.wf.Log?ue?.log:void 0});return{length:te.x.length,name:(0,s.CZ)(re),meta:{type:f.P.HeatmapCells},fields:[{name:"xMin",type:Q.type,values:te.x,config:Q.config},{name:"yMin",type:c.fS.number,values:te.y,config:{...re.config,custom:{scaleDistribution:ue}}},{name:"Count",type:c.fS.number,values:te.count,config:{unit:"short"}}]}}function j(_,k,Q){let re=_.length,Z=Q?.xSorted??!1,oe=Q?.ySorted??!1,G=Z?_[0]:1/0,le=oe?k[0]:1/0,ge=Z?_[re-1]:-1/0,ne=oe?k[re-1]:-1/0,ue=Q?.yLog;for(let Oe=0;Oe<re;Oe++)Z||(G=Math.min(G,_[Oe]),ge=Math.max(ge,_[Oe])),oe||(!ue||k[Oe]>0)&&(le=Math.min(le,k[Oe]),ne=Math.max(ne,k[Oe]));let te=Q?.xSize??0,me=Q?.ySize??0,q=Q?.xMode,se=Q?.yMode;if((!Number.isFinite(te)||te<=0)&&(q=o.kW.Count,te=20),(!Number.isFinite(me)||me<=0)&&(se=o.kW.Count,me=10),q===o.kW.Count){let Oe=(ge-G)/Math.max(te-1,1),ye=Q?.xTime?O:D,Pe=ye.findIndex(be=>be>Oe)-1;te=ye[Math.max(Pe,0)]}if(se===o.kW.Count){let Oe=(ne-le)/Math.max(me-1,1),ye=Q?.yTime?O:D,Pe=ye.findIndex(be=>be>Oe)-1;me=ye[Math.max(Pe,0)]}let ae=Q?.xCeil?Oe=>(0,r.UO)(Oe,te):Oe=>(0,r.mB)(Oe,te),pe=Q?.yCeil?Oe=>(0,r.UO)(Oe,me):Oe=>(0,r.mB)(Oe,me);if(ue){me=1/(Q?.ySize??1);let Oe=ue===2?Math.log2:Math.log10;pe=Q?.yCeil?ye=>(0,r.UO)(Oe(ye),me):ye=>(0,r.mB)(Oe(ye),me)}let de=ae(G),Me=ae(ge),Ke=pe(le),st=pe(ne),Ie=Math.round((Me-de)/te)+1,Ve=Math.round((st-Ke)/me)+1,[_e,tt,dt]=A(Ie,Ve,de,te,Ke,me,ue);for(let Oe=0;Oe<re;Oe++){if(ue&&k[Oe]<=0)continue;const ye=(ae(_[Oe])-de)/te,Pe=(pe(k[Oe])-Ke)/me,be=ye*Ve+Pe;dt[be]++}return{x:_e,y:tt,count:dt}}function A(_,k,Q,re,Z,oe,G){const le=_*k,ge=new Array(le),ne=new Array(le),ue=new Array(le);for(let te=0,me=0,q=Q;te<le;me=++te%k)ue[te]=0,G?ne[te]=G**(Z+me*oe):ne[te]=Z+me*oe,me===0&&te>=k&&(q+=re),ge[te]=q;return[ge,ne,ue]}},96366:(Y,T,e)=>{"use strict";e.d(T,{Ii:()=>c,JJ:()=>n,ac:()=>s});var t=e(40538),n=(f=>(f.Prepare="prepare",f.Calculate="calculate",f.Modify="modify",f))(n||{}),c=(f=>(f.Heading="heading",f.Distance="distance",f.Area="area",f))(c||{}),s=(f=>(f.AsLine="asLine",f.LineBuilder="lineBuilder",f))(s||{});const i={action:"prepare",source:{mode:t.q1.Auto}}},14573:(Y,T,e)=>{"use strict";e.d(T,{Lb:()=>o,Lp:()=>r,N7:()=>l});var t=e(55839),n=e(17792),c=e(63897),s=e(29501),i=e(76254),f=e(99098),u=e(96366);function r(p){const g=[];for(const y of p.values)y&&g.push(o(y));return new n.Z(g)}function d(p){const g=new Array(p.length);if(p.length>1){let y=m(p[0]);for(let v=1;v<p.length;v++){let E=m(p[v]);if(y&&E){let h=Math.atan2(E[0]-y[0],E[1]-y[1])*180/Math.PI;h<0&&(h+=360),g[v-1]=g[v]=h}}}else g.fill(0);return g}function o(p){return p instanceof c.Z?p.getCoordinates():(0,t.qg)(p.getExtent())}function m(p){if(p)return(0,s.bU)(o(p))}function l(p,g){const y=p.values,v=new Array(p.values.length),E=g.calc??u.Ii.Heading,h=g.field??E;switch(E){case u.Ii.Area:{for(let C=0;C<y.length;C++){const a=y[C];a&&(v[C]=(0,i.bg)(a))}return{name:h,type:f.fS.number,config:{unit:"areaM2"},values:v}}case u.Ii.Distance:{for(let C=0;C<y.length;C++){const a=y[C];a&&(v[C]=(0,i.xA)(a))}return{name:h,type:f.fS.number,config:{unit:"lengthm"},values:v}}case u.Ii.Heading:default:return{name:h,type:f.fS.number,config:{unit:"degree"},values:d(y)}}}},12142:(Y,T,e)=>{"use strict";e.d(T,{PJ:()=>o,ZP:()=>l,eT:()=>u,k7:()=>d,tZ:()=>r,w4:()=>i});var t=e(62992),n=e(47694);const c={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,canInvite:!n.ZP.externalUserMngLinkName,externalUserMngInfo:n.ZP.externalUserMngInfo,externalUserMngLinkName:n.ZP.externalUserMngLinkName,externalUserMngLinkUrl:n.ZP.externalUserMngLinkUrl,isLoading:!1},s=(0,t.oM)({name:"users",initialState:c,reducers:{usersLoaded:(p,g)=>{const{totalCount:y,perPage:v,page:E,orgUsers:h}=g.payload,C=Math.ceil(y/v);return{...p,isLoading:!0,users:h,perPage:v,page:E,totalPages:C}},searchQueryChanged:(p,g)=>({...p,searchQuery:g.payload,page:c.page}),setUsersSearchPage:(p,g)=>({...p,page:g.payload}),pageChanged:(p,g)=>({...p,page:g.payload}),usersFetchBegin:p=>({...p,isLoading:!0}),usersFetchEnd:p=>({...p,isLoading:!1})}}),{searchQueryChanged:i,setUsersSearchPage:f,usersLoaded:u,usersFetchBegin:r,usersFetchEnd:d,pageChanged:o}=s.actions,l={users:s.reducer}},22323:(Y,T,e)=>{"use strict";e.d(T,{z:()=>n});var t=e(53908);const n=new t.B},30002:(Y,T,e)=>{"use strict";e.d(T,{KJ:()=>v,M6:()=>g,Ue:()=>E,Z$:()=>h,ku:()=>y,m2:()=>p});var t=e(82897),n=e.n(t),c=e(91162),s=e(50678),i=e(15546),f=e(85803),u=e(7240),r=e(87095),d=e(92990),o=e(92624),m=e(79134);const l="Filters",p=P=>async(D,x)=>{let M=a(P,x());if(!M&&(D(C(P)),M=a(P,x()),!M))return;const b=M.filters.findIndex(S=>S.key===P.key&&S.value===P.value);if(b===-1){const{value:S,key:O,operator:U}=P,I={value:S,key:O,operator:U,condition:""};return await D(v((0,o.yQ)(M),I))}const R={...M.filters[b],operator:P.operator};return await D(g((0,o.yQ)(M),{index:b,filter:R}))},g=(P,D)=>async(x,M)=>{const b=(0,r.E0)(P,M());x((0,u.mb)(P.rootStateKey,(0,m.e_)((0,o.Y6)(b,D)))),await x((0,f.MB)((0,o.yQ)(b),!0))},y=(P,D)=>async(x,M)=>{const b=(0,r.E0)(P,M());x((0,u.mb)(P.rootStateKey,(0,m.DO)((0,o.Y6)(b,D)))),await x((0,f.MB)((0,o.yQ)(b),!0))},v=(P,D)=>async(x,M)=>{const b=(0,r.E0)(P,M());x((0,u.mb)(P.rootStateKey,(0,m.QL)((0,o.Y6)(b,D)))),await x((0,f.MB)((0,o.yQ)(b),!0))},E=(P,D)=>async(x,M)=>{const b=(0,r.E0)(P,M());x((0,u.mb)(P.rootStateKey,(0,m.aM)((0,o.Y6)(b,D)))),await x((0,f.MB)((0,o.yQ)(b),!0))},h=(P,D)=>async(x,M)=>{const b=(0,r.E0)(P,M());x((0,u.mb)(P.rootStateKey,(0,d.Pl)((0,o.Y6)(b,{propName:"datasource",propValue:D}))));const S=(await(0,c.ak)().get(D))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";x((0,u.mb)(P.rootStateKey,(0,s.z7)({infoText:S})))},C=P=>(D,x)=>{const M=(0,r.S_)(x()),b={...(0,t.cloneDeep)(m.Js),datasource:P.datasource,name:l,id:l,rootStateKey:M},R=!1,S=(0,r.Eo)(M,x()),O={type:"adhoc",id:b.id,rootStateKey:M};D((0,u.mb)(M,(0,d.VN)((0,o.Y6)(O,{global:R,model:b,index:S}))))},a=(P,D)=>{const x=(0,r.S_)(D),M=(0,r.AE)(x,D);return Object.values(M.variables).find(b=>(0,i.Kn)(b)&&b.datasource?.uid===P.datasource.uid)}},44847:(Y,T,e)=>{"use strict";e.d(T,{F:()=>P});var t=e(66111),n=e(70044),c=e(35287),s=e(68118),i=e(39904),f=e(91162);const u=90,r=({datasource:D,onChange:x,disabled:M,filterKey:b,getTagKeysOptions:R})=>{const S=()=>l(D,R),O=()=>p(D,R);return b===null?t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper"},t.createElement(s.V,{disabled:M,className:"query-segment-key",Component:m,value:b,onChange:x,loadOptions:S,inputMinWidth:u})):t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper"},t.createElement(s.V,{disabled:M,className:"query-segment-key",value:b,onChange:x,loadOptions:O,inputMinWidth:u}))},d="-- remove filter --",o={label:d,value:d},m=t.createElement("span",{className:"gf-form-label query-part","aria-label":"Add Filter"},t.createElement(i.J,{name:"plus"})),l=async(D,x)=>{const M=await(0,f.ak)().get(D);return!M||!M.getTagKeys?[]:(await M.getTagKeys(x)).map(R=>({label:R.text,value:R.text}))},p=async(D,x)=>{const M=await l(D,x);return[o,...M]},g=({datasource:D,disabled:x,onChange:M,filterKey:b,filterValue:R,placeHolder:S})=>{const O=()=>y(D,b);return t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper"},t.createElement(s.V,{className:"query-segment-value",disabled:x,placeholder:S,value:R,onChange:M,loadOptions:O}))},y=async(D,x)=>{const M=await(0,f.ak)().get(D);return!M||!M.getTagValues?[]:(await M.getTagValues({key:x})).map(R=>({label:R.text,value:R.text}))},v=["=","!=","<",">","=~","!~"].map(D=>({label:D,value:D})),E=({value:D,disabled:x,onChange:M})=>t.createElement(n.X,{className:"query-segment-operator",value:D,disabled:x,options:v,onChange:M}),h=({datasource:D,filter:{key:x,operator:M,value:b},onKeyChange:R,onOperatorChange:S,onValueChange:O,placeHolder:U,getTagKeysOptions:I,disabled:F})=>t.createElement(t.Fragment,null,t.createElement(r,{disabled:F,datasource:D,filterKey:x,onChange:R,getTagKeysOptions:I}),t.createElement("div",{className:"gf-form"},t.createElement(E,{disabled:F,value:M,onChange:S})),t.createElement(g,{disabled:F,datasource:D,filterKey:x,filterValue:b,onChange:O,placeHolder:U})),C=({datasource:D,appendBefore:x,onCompleted:M,getTagKeysOptions:b})=>{const[R,S]=(0,t.useState)(null),[O,U]=(0,t.useState)("="),I=(0,t.useCallback)(K=>{if(K.value!==d){S(K.value??"");return}S(null)},[S]),F=(0,t.useCallback)(K=>U(K.value??""),[U]),w=(0,t.useCallback)(K=>{M({value:K.value??"",operator:O,condition:"",key:R}),S(null),U("=")},[M,O,R]);return R===null?t.createElement(r,{datasource:D,filterKey:R,onChange:I,getTagKeysOptions:b}):t.createElement(t.Fragment,{key:"filter-builder"},x,t.createElement(h,{datasource:D,filter:{key:R,value:"",operator:O,condition:""},placeHolder:(0,c.t)("variable.adhoc.placeholder","Select value"),onKeyChange:I,onOperatorChange:F,onValueChange:w,getTagKeysOptions:b}))},a=({label:D})=>t.createElement("div",{className:"gf-form"},t.createElement("span",{className:"gf-form-label query-keyword"},D));class P extends t.PureComponent{constructor(){super(...arguments),this.onChange=(x,M)=>b=>{const{filters:R}=this.props,{value:S}=b;return b.value===d?this.props.removeFilter(x):this.props.changeFilter(x,{...R[x],[M]:S})},this.appendFilterToVariable=x=>{this.props.addFilter(x)}}render(){const{filters:x,disabled:M}=this.props;return t.createElement("div",{className:"gf-form-inline"},this.renderFilters(x,M),!M&&t.createElement(C,{datasource:this.props.datasource,appendBefore:x.length>0?t.createElement(a,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,getTagKeysOptions:this.props.getTagKeysOptions}))}renderFilters(x,M){return x.length===0&&M?t.createElement(n.X,{disabled:M,value:"No filters",options:[],onChange:()=>{}}):x.reduce((b,R,S)=>(b.length>0&&b.push(t.createElement(a,{label:"AND",key:`condition-${S}`})),b.push(this.renderFilterSegments(R,S,M)),b),[])}renderFilterSegments(x,M,b){return t.createElement(t.Fragment,{key:`filter-${M}`},t.createElement(h,{disabled:b,datasource:this.props.datasource,filter:x,onKeyChange:this.onChange(M,"key"),onOperatorChange:this.onChange(M,"operator"),onValueChange:this.onChange(M,"value"),getTagKeysOptions:this.props.getTagKeysOptions}))}}},79134:(Y,T,e)=>{"use strict";e.d(T,{DO:()=>r,Js:()=>i,QL:()=>u,aM:()=>o,e_:()=>d,jo:()=>m});var t=e(62992),n=e(10672),c=e(87095),s=e(63510);const i={...n.Eg,type:"adhoc",datasource:null,filters:[]},f=(0,t.oM)({name:"templating/adhoc",initialState:s.s,reducers:{filterAdded:(l,p)=>{const g=(0,c.ir)(l,p.payload.id);g.type==="adhoc"&&g.filters.push(p.payload.data)},filterRemoved:(l,p)=>{const g=(0,c.ir)(l,p.payload.id);if(g.type!=="adhoc")return;const y=p.payload.data;g.filters.splice(y,1)},filterUpdated:(l,p)=>{const g=(0,c.ir)(l,p.payload.id);if(g.type!=="adhoc")return;const{filter:y,index:v}=p.payload.data;g.filters[v]=y},filtersRestored:(l,p)=>{const g=(0,c.ir)(l,p.payload.id);g.type==="adhoc"&&(g.filters=p.payload.data)}}}),{filterAdded:u,filterRemoved:r,filterUpdated:d,filtersRestored:o}=f.actions,m=f.reducer},82253:(Y,T,e)=>{"use strict";e.d(T,{BH:()=>s,IG:()=>f,QX:()=>i,UY:()=>t,r2:()=>c,xk:()=>n});const t="00000000-0000-0000-0000-000000000000",n="All",c="$__all",s="None",i="",f="var-"},95125:(Y,T,e)=>{"use strict";e.d(T,{R:()=>r,z:()=>u});var t=e(588),n=e(66111),c=e(68183),s=e(72648),i=e(97379),f=e(49993);const u="Grafana-LegacyVariableQueryEditor",r=({onChange:d,query:o})=>{const m=(0,s.wW)(f.w),[l,p]=(0,n.useState)(o),g=E=>{p(E.currentTarget.value)},y=(0,n.useCallback)(E=>{d(E.currentTarget.value,E.currentTarget.value)},[d]),v=(0,t.Me)();return n.createElement(i.K,{id:v,rows:2,value:l,onChange:g,onBlur:y,placeholder:"Metric name or tags query",required:!0,"aria-label":c.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:m.textarea})};r.displayName=u},41624:(Y,T,e)=>{"use strict";e.d(T,{e:()=>i});var t=e(9892),n=e(66111),c=e(72648),s=e(19825);function i({className:u,...r}){const d=(0,c.wW)(f);return n.createElement(s.D,{...r,className:(0,t.cx)(d.legend,u)})}function f(u){return{legend:(0,t.css)({marginTop:u.spacing(3),marginBottom:u.spacing(1)})}}},83704:(Y,T,e)=>{"use strict";e.d(T,{u:()=>u});var t=e(9892),n=e(66111),c=e(72648),s=e(24799),i=e(8581),f=e(56991);function u({name:d,description:o,value:m,options:l,onChange:p,testId:g,width:y}){const v=(0,c.wW)(r),E=(0,f.L)(),h=`variable-select-input-${d}-${E}`;return n.createElement(s.g,{label:d,description:o,htmlFor:h},n.createElement("div",{"data-testid":g},n.createElement(i.Ph,{inputId:h,onChange:p,value:m,width:y??30,options:l,className:v.selectContainer})))}function r(d){return{selectContainer:t.css`
      margin-right: ${d.spacing(.5)};
    `}}},49993:(Y,T,e)=>{"use strict";e.d(T,{W:()=>u,w:()=>r});var t=e(9892),n=e(588),c=e(66111),s=e(72648),i=e(24799),f=e(97379);function u({value:d,name:o,description:m,placeholder:l,onChange:p,onBlur:g,ariaLabel:y,required:v,width:E,testId:h}){const C=(0,s.wW)(r),a=(0,n.Me)();return c.createElement(i.g,{label:o,description:m,htmlFor:a},c.createElement(f.K,{id:a,rows:2,value:d,onChange:p,onBlur:g,placeholder:l,required:v,"aria-label":y,cols:E,className:C.textarea,"data-testid":h}))}function r(d){return{textarea:t.css`
      white-space: pre-wrap;
      min-height: ${d.spacing(4)};
      height: auto;
      overflow: auto;
      padding: ${d.spacing(.75,1)};
      width: inherit;
    `}}},57052:(Y,T,e)=>{"use strict";e.d(T,{V:()=>i});var t=e(588),n=e(66111),c=e(24799),s=e(46967);function i({value:f,name:u,placeholder:r="",onChange:d,testId:o,width:m,required:l,onBlur:p,grow:g,description:y,invalid:v,error:E,maxLength:h}){const C=(0,t.Me)(u);return n.createElement(c.g,{label:u,description:y,invalid:v,error:E,htmlFor:C},n.createElement(s.I,{type:"text",id:C,placeholder:r,value:f,onChange:d,onBlur:p,width:g?void 0:m??30,"data-testid":o,maxLength:h,required:l}))}},50678:(Y,T,e)=>{"use strict";e.d(T,{PF:()=>n,PV:()=>m,QR:()=>l,Sg:()=>o,Yo:()=>i,gl:()=>s,qe:()=>r,wJ:()=>u,y8:()=>f,z7:()=>d});var t=e(62992);const n={id:"",isValid:!0,errors:{},name:"",extended:null},c=(0,t.oM)({name:"templating/editor",initialState:n,reducers:{variableEditorMounted:(p,g)=>{p.name=g.payload.name,p.id=g.payload.id},variableEditorUnMounted:(p,g)=>n,changeVariableNameSucceeded:(p,g)=>{p.name=g.payload.data.newName,delete p.errors.name,p.isValid=Object.keys(p.errors).length===0},changeVariableNameFailed:(p,g)=>{p.name=g.payload.newName,p.errors.name=g.payload.errorText,p.isValid=Object.keys(p.errors).length===0},addVariableEditorError:(p,g)=>{p.errors[g.payload.errorProp]=g.payload.errorText,p.isValid=Object.keys(p.errors).length===0},removeVariableEditorError:(p,g)=>{delete p.errors[g.payload.errorProp],p.isValid=Object.keys(p.errors).length===0},changeVariableEditorExtended:(p,g)=>{p.extended={...p.extended,...g.payload}},cleanEditorState:()=>n}}),s=c.reducer,{changeVariableNameSucceeded:i,changeVariableNameFailed:f,variableEditorMounted:u,variableEditorUnMounted:r,changeVariableEditorExtended:d,addVariableEditorError:o,removeVariableEditorError:m,cleanEditorState:l}=c.actions},69155:(Y,T,e)=>{"use strict";e.d(T,{c:()=>s});var t=e(20308),n=e(22323),c=e(82253);function s(i){const f={},u=(0,t.J)().getVariables();for(let r=0;r<u.length;r++){const d=u[r],o=i&&i[d.name];d.skipUrlSync||(o?f[c.IG+d.name]=o.value:f[c.IG+d.name]=n.z.get(d.type).getValueForUrl(d))}return f}},15546:(Y,T,e)=>{"use strict";e.d(T,{$7:()=>y,Ju:()=>m,Kn:()=>s,Kr:()=>r,NX:()=>g,R:()=>o,U4:()=>f,VC:()=>i,X7:()=>p,Xh:()=>c,d7:()=>l,eL:()=>u});var t=e(48976),n=e(95125);const c=v=>v.type==="query",s=v=>v.type==="adhoc",i=v=>v.type==="constant",f=v=>"multi"in v,u=v=>"options"in v,r=v=>"current"in v;function d(v){return v===null?!1:typeof v=="string"}const o=v=>Boolean(v.metricFindQuery)&&!Boolean(v.variables),m=v=>{if(!v.variables||v.variables.getType()!==t.j2.Standard)return!1;const E=v.variables;return"toDataQuery"in E&&Boolean(E.toDataQuery)},l=v=>{if(!v.variables||v.variables.getType()!==t.j2.Custom)return!1;const E=v.variables;return"query"in E&&"editor"in E&&Boolean(E.query)&&Boolean(E.editor)},p=v=>v.variables?v.variables.getType()===t.j2.Datasource:!1;function g(v,E){return v?v.displayName===n.z||o(E):!1}function y(v,E){return v?v.displayName!==n.z&&(p(E)||m(E)||l(E)):!1}},37737:(Y,T,e)=>{"use strict";e.d(T,{Kf:()=>n,iV:()=>s,j4:()=>i});var t=e(62992);const n={usages:[],usagesNetwork:[]},c=(0,t.oM)({name:"templating/inspect",initialState:n,reducers:{initInspect:(f,u)=>{const{usages:r,usagesNetwork:d}=u.payload;f.usages=r,f.usagesNetwork=d}}}),s=c.reducer,{initInspect:i}=c.actions},19248:(Y,T,e)=>{"use strict";e.d(T,{MJ:()=>m,GQ:()=>d,V:()=>v,Of:()=>o,PQ:()=>C,dH:()=>R,Yg:()=>E,Rv:()=>M,vI:()=>D});var t=e(94976);function n(S,O){const U=new Set;for(const I of S)U.add(O(I));return U}var c=e(96161),s=e(55935),i=e(86899),f=e(22323),u=e(15546),r=e(92624);const d=S=>{const O=[];for(const U of S)O.push({id:U.id,label:`${U.id}`});return O},o=(S,O)=>S.filter(U=>O.some(I=>I.from===U.id||I.to===U.id)),m=S=>{const O=[];for(const U of S)for(const I of S){if(U===I)continue;f.z.get(U.type).dependsOn(U,I)&&O.push({from:U.id,to:I.id})}return O};function l(S){const O=(0,r.a9)(S);return O?O.slice(1).find(I=>I!==void 0):void 0}const p=(S,O)=>{r.J7.lastIndex=0;const U=[],F=(0,s.Xh)(O,2).match(r.J7);if(!F)return U;for(const w of F){if(!w||w.indexOf("$__")!==-1||w.indexOf("${__")!==-1||w.indexOf("$hashKey")!==-1)continue;const K=l(w);S.some(L=>L.id===K)||U.find(L=>L===K)||K&&U.push(K)}return U},g={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},y=(S,O,U)=>{const I=Object.keys(O.value).reduce((w,K)=>{const L=O.value[K];if(!L||typeof L!="string")return w;const V=g[K]?g[K].find(j=>j.test(S)):void 0;let H=(0,r.QI)(L,S);return K==="repeat"&&L===S&&(H=!0),!V&&H&&(w={...w,[K]:L}),w},{}),F=Object.keys(O.value).reduce((w,K)=>{const L=O.value[K];if(L&&typeof L=="object"&&Object.keys(L).length){let V=L.title||L.name||L.id||K;Array.isArray(O.value)&&O.key==="panels"&&(V=`${V}[${L.id}]`);const H=y(S,{key:K,value:L},{});Object.keys(H).length&&(w={...w,[V]:H})}return w},{});return(Object.keys(I).length||Object.keys(F).length)&&(U={...U,...I,...F}),U},v=(S,O)=>{if(!O)return{unUsed:[],usages:[]};const U=[];let I=[];const F=O.getSaveModelClone();for(const w of S){const K=w.id,L=y(K,{key:"model",value:F},{});!Object.keys(L).length&&!(0,u.Kn)(w)&&U.push(w),Object.keys(L).length&&I.push({variable:w,tree:L})}return{unUsed:U,usages:I}};async function E(S,O){return new Promise((U,I)=>{setTimeout(()=>{try{const F=h(S,O);U(D(F))}catch(F){I(F)}},200)})}function h(S,O){if(!O)return[];let U=[];const I=O.getSaveModelClone(),F=p(S,I);for(const w of F){const K=y(w,{key:"model",value:I},{});if(Object.keys(K).length){const L={id:w,name:w};U.push({variable:L,tree:K})}}return U}function C(S,O,U){const I=n(O.descendants(S),w=>w.name);I.add(t.W.includeVars);for(const w of S)I.add(w);return a([...I],U)}function a(S,O){const U=[];for(const I of S)O[I]&&U.push(...O[I]);return new Set(U)}const P=(S,O)=>{const{id:U,value:I}=O,{nodes:F,edges:w}=S;if(I&&typeof I=="string"){const K=`${O.id}-${I}`;return F.push({id:K,label:I}),w.push({from:K,to:U}),S}if(I&&typeof I=="object"){const K=Object.keys(I);for(const L of K){const V=`${O.id}-${L}`;F.push({id:V,label:L}),w.push({from:V,to:U}),S=P(S,{id:V,value:I[L]})}return S}return S},D=S=>{const O=[];for(const U of S){const{variable:I,tree:F}=U,w={variable:I,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};O.push(P(w,{id:"dashboard",value:F}))}return O},x=S=>Object.values(S).reduce((U,I)=>typeof I=="object"?U+x(I):U+1,0),M=(S,O)=>{const U=O.find(I=>I.variable.id===S);return U?x(U.tree):0};function b(S){const O=[];for(const U of S)O.push(U),U.panels?.length&&O.push(...b(U.panels.map(I=>new PanelModel(I))));return O}function R(S){const O={};for(const U of S){const I=(0,c.Jg)(U),F=[...I.matchAll(/"repeat":"([^"]+)"/g)].map(L=>L[1]),w=I.match(r.J7)?.map(L=>l(L))??[],K=[...F,...w];for(const L of K)L in O?O[L].add(U.id):O[L]=new Set([U.id])}return O}},85972:(Y,T,e)=>{"use strict";e.d(T,{XJ:()=>x,nn:()=>E,yy:()=>u,Ew:()=>h,cv:()=>M,aN:()=>v,iQ:()=>C,_M:()=>y,ss:()=>P,wF:()=>D,Ug:()=>a});var t=e(62992),n=e(82897);const c=(b,...R)=>R.reduce((S,O)=>O(S),b);var s=e(82253),i=e(15546),f=e(92624);const u={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},r=1e3,d=b=>Array.isArray(b)?b.reduce((R,S)=>((0,n.isString)(S.value)&&(R[S.value]=S),R),{}):{},o=b=>{if(!Array.isArray(b.options))return b.options=[],b;const R=d(b.selectedValues);return b.selectedValues=Object.values(R),b.options=b.options.map(S=>{if(!(0,n.isString)(S.value))return S;const O=!!R[S.value];return S.selected===O?S:{...S,selected:O}}),b.options=m(b.options),b},m=b=>Array.isArray(b)?b.length<=r?b:b.slice(0,r):[],l=b=>{const{options:R,selectedValues:S}=b;return R.length===0||S.length>0||!R[0]||R[0].value!==s.r2||(b.selectedValues=[{...R[0],selected:!0}]),b},p=b=>{const{selectedValues:R}=b;return R.length>1&&(b.selectedValues=R.filter(S=>S.value!==s.r2)),b},g=(0,t.oM)({name:"templating/optionsPicker",initialState:u,reducers:{showOptions:(b,R)=>{const{query:S,options:O}=R.payload;if(b.highlightIndex=-1,b.options=(0,n.cloneDeep)(O),b.id=R.payload.id,b.queryValue="",b.multi=!1,(0,i.U4)(R.payload)&&(b.multi=R.payload.multi??!1),(0,i.Xh)(R.payload)){const{queryValue:U}=R.payload,I=(0,f.bf)(S);b.queryValue=I&&U?U:""}return b.selectedValues=b.options.filter(U=>U.selected),c(b,l,o)},hideOptions:(b,R)=>({...u}),toggleOption:(b,R)=>{const{option:S,clearOthers:O,forceSelect:U}=R.payload,{multi:I,selectedValues:F}=b;if(S){const w=!F.find(K=>K.value===S.value&&K.text===S.text);if(S.value===s.r2||!I||O)return w||U?b.selectedValues=[{...S,selected:!0}]:b.selectedValues=[],c(b,l,p,o);if(U||w)return b.selectedValues.push({...S,selected:!0}),c(b,l,p,o);b.selectedValues=F.filter(K=>K.value!==S.value&&K.text!==S.text)}else b.selectedValues=[];return c(b,l,p,o)},moveOptionsHighlight:(b,R)=>{let S=b.highlightIndex+R.payload;return S<0?S=-1:S>=b.options.length&&(S=b.options.length-1),{...b,highlightIndex:S}},toggleAllOptions:(b,R)=>b.selectedValues.length>0?(b.selectedValues=[],c(b,o)):(b.selectedValues=b.options.filter(S=>S.value!==s.r2).map(S=>({...S,selected:!0})),c(b,o)),updateSearchQuery:(b,R)=>(b.queryValue=R.payload,b),updateOptionsAndFilter:(b,R)=>{const S=(0,n.trimStart)((b.queryValue??"").toLowerCase());return b.options=R.payload.filter(O=>{const U=O.text??"";return(Array.isArray(U)?U.toString():U).toLowerCase().indexOf(S)!==-1}),b.highlightIndex=0,c(b,l,o)},updateOptionsFromSearch:(b,R)=>(b.options=R.payload,b.highlightIndex=0,c(b,l,o)),cleanPickerState:()=>u}}),{toggleOption:y,showOptions:v,hideOptions:E,moveOptionsHighlight:h,toggleAllOptions:C,updateSearchQuery:a,updateOptionsAndFilter:P,updateOptionsFromSearch:D,cleanPickerState:x}=g.actions,M=g.reducer},96188:(Y,T,e)=>{"use strict";e.d(T,{x:()=>t});const t=(s,i)=>s&&(i&&!Array.isArray(s.value)?{...s,value:c(s.value),text:c(s.text)}:!i&&Array.isArray(s.value)?{...s,value:n(s.value),text:n(s.text)}:s),n=s=>Array.isArray(s)?s.length>0?s[0]:"":s,c=s=>Array.isArray(s)?s:[s]},85803:(Y,T,e)=>{"use strict";e.d(T,{Ci:()=>re,DU:()=>me,Fz:()=>G,LX:()=>de,MB:()=>ge,Rk:()=>Ie,Z7:()=>V,wX:()=>st,xQ:()=>oe,xs:()=>se});var t=e(82897),n=e.n(t),c=e(61618),s=e(52666),i=e(73446),f=e(37932),u=e(35645),r=e(659),d=e(82002),o=e(19349),m=e(3153),l=e(60499),p=e(77582),g=e(29930),y=e(28630),v=e(91162),E=e(28674),h=e(22323),C=e(82253),a=e(50678),P=e(15546),D=e(19248),x=e(85972),M=e(96188),b=e(10672),R=e(92624),S=e(7240),O=e(87095),U=e(92990),I=e(30286),F=e(6942);const w=(Oe,ye)=>(Pe,be)=>{let Be=0;const ze=ye.templating.list;for(let ht=0;ht<ze.length;ht++){const vt=K(ze[ht]);vt.rootStateKey=Oe,h.z.getIfExists(vt.type)&&Pe((0,S.mb)(Oe,(0,U.VN)((0,R.Y6)(vt,{global:!1,index:Be++,model:vt}))))}(0,E.J)().updateTimeRange((0,o.$t)().timeRange());const lt=(0,O.gt)(Oe,be());for(const ht of lt)Pe((0,S.mb)(Oe,(0,U.Mn)((0,R.Y6)(ht))))};function K(Oe){if(!(0,P.eL)(Oe))return Oe;let ye=!1;for(const Pe of Oe.options)if(Pe.selected=!1,Array.isArray(Oe.current.value))for(const be of Oe.current.value)Pe.value===be&&(Pe.selected=ye=!0);else Pe.value===Oe.current.value&&(Pe.selected=ye=!0);return!ye&&Oe.options.length&&(Oe.options[0].selected=!0),Oe}const L=(Oe,ye)=>Pe=>{const be={...b.Eg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:b.bU.hideVariable,current:{value:{name:ye.title,uid:ye.uid,toString:()=>ye.title}}};Pe((0,S.mb)(Oe,(0,U.VN)((0,R.Y6)(be,{global:be.global,index:be.index,model:be}))));const Be={...b.Eg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:b.bU.hideVariable,current:{value:{name:d.Vt.user.orgName,id:d.Vt.user.orgId,toString:()=>d.Vt.user.orgId.toString()}}};Pe((0,S.mb)(Oe,(0,U.VN)((0,R.Y6)(Be,{global:Be.global,index:Be.index,model:Be}))));const ze={...b.Eg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:b.bU.hideVariable,current:{value:{login:d.Vt.user.login,id:d.Vt.user.id,email:d.Vt.user.email,toString:()=>d.Vt.user.id.toString()}}};Pe((0,S.mb)(Oe,(0,U.VN)((0,R.Y6)(ze,{global:ze.global,index:ze.index,model:ze}))))},V=(Oe,ye)=>(Pe,be)=>{const{rootStateKey:Be}=Oe,ze=(0,O.E0)(Oe,be());if(!(0,P.U4)(ze)||(0,c.Q)(ze.current))return;const lt=(0,M.x)(ze.current,ye);Pe((0,S.mb)(Be,(0,U.Pl)((0,R.Y6)(Oe,{propName:"multi",propValue:ye})))),Pe((0,S.mb)(Be,(0,U.Pl)((0,R.Y6)(Oe,{propName:"current",propValue:lt}))))},H=async(Oe,ye)=>{if(!Oe.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${Oe.id}`);if(j(Oe,ye))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const Pe=A(Oe,ye);_(Oe.rootStateKey,Pe,ye)&&await new Promise(be=>{const Be=m.h.subscribe(()=>{if(!Oe.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${Oe.id}`);_(Oe.rootStateKey,Pe,m.h.getState())||(Be(),be())})})},j=(Oe,ye,Pe=new Set)=>Pe.has(Oe.id)?!0:(Pe=new Set([...Pe,Oe.id]),A(Oe,ye).some(be=>j(be,ye,Pe))),A=(Oe,ye)=>{if(!Oe.rootStateKey)return[];const Pe=[];for(const be of(0,O.gt)(Oe.rootStateKey,ye))Oe!==be&&h.z.getIfExists(Oe.type)&&h.z.get(Oe.type).dependsOn(Oe,be)&&Pe.push(be);return Pe},_=(Oe,ye,Pe)=>{if(ye.length===0)return!1;const be=(0,O.gt)(Oe,Pe);return ye.filter(ze=>be.some(lt=>lt.id===ze.id&&(lt.state===s.Gu.NotStarted||lt.state===s.Gu.Loading))).length>0},k=(Oe,ye)=>async(Pe,be)=>{const Be=(0,O.E0)(Oe,be());await H(Be,be());const ze=ye[C.IG+Be.name];if(ze!==void 0){const lt=(0,R.Hi)(ze);await h.z.get(Be.type).setValueFromUrl(Be,lt);return}if(Be.hasOwnProperty("refresh")){const lt=Be;if(lt.refresh===b.Bd.onDashboardLoad||lt.refresh===b.Bd.onTimeRangeChanged){await Pe(Ie((0,R.yQ)(lt)));return}}Pe(_e(Oe))},Q=Oe=>async(ye,Pe)=>{const be=f.E1.getSearchObject(),Be=(0,O.gt)(Oe,Pe()).map(async ze=>await ye(k((0,R.yQ)(ze),be)));await Promise.all(Be)},re=(Oe,ye)=>async(Pe,be)=>{const Be=(0,R.Hi)(ye),ze=(0,O.E0)(Oe,be());(0,R.iD)(ze)!==b.Bd.never&&await Pe(Ie((0,R.yQ)(ze)));const lt=(0,O.E0)((0,R.yQ)(ze),be());if(!(0,P.eL)(lt))return;if(!lt)throw new Error(`Couldn't find variable with name: ${ze.name}`);let ht=lt.options.find(vt=>vt.text===Be||vt.value===Be);if(!ht&&(0,P.U4)(lt)&&lt.allValue&&Be===lt.allValue&&(ht={text:C.xk,value:C.r2,selected:!1}),!ht){let vt=Be;const bt=Be;Array.isArray(Be)&&(vt=Be.reduce((ct,Pt)=>{const ie=lt.options.find(Ce=>Ce.value===Pt);return ie?[].concat(ct,[ie.text]):[].concat(ct,[Pt])},[])),ht={text:vt,value:bt,selected:!1}}(0,P.U4)(lt)&&(ht=(0,M.x)({text:(0,t.castArray)(ht.text),value:(0,t.castArray)(ht.value),selected:!1},lt.multi)),await h.z.get(ze.type).setValue(lt,ht)},Z=Oe=>{let ye,Pe,be,Be;const ze=[];for(ye=0;ye<Oe.options.length;ye++)if(Be={...Oe.options[ye]},Be.selected=!1,Array.isArray(Oe.current.value))for(Pe=0;Pe<Oe.current.value.length;Pe++)be=Oe.current.value[Pe],Be.value===be&&(Be.selected=!0,ze.push(Be));else Be.value===Oe.current.value&&(Be.selected=!0,ze.push(Be));return ze},oe=(Oe,ye)=>(Pe,be)=>{const Be=(0,O.E0)(Oe,be());if(!(0,P.eL)(Be))return Promise.resolve();const ze=Be.current||{},lt=h.z.get(Be.type).setValue;if(Array.isArray(ze.value)){const bt=Z(Be);if(bt.length===0){const Pt=Be.options[0];return lt(Be,Pt)}const ct={value:bt.map(Pt=>Pt.value),text:bt.map(Pt=>Pt.text),selected:!0};return lt(Be,ct)}let ht=null;const vt=(0,R.Tt)(Be);if(ht=Be.options?.find(bt=>bt.text===vt),ht||ye&&(ht=Be.options?.find(bt=>bt.text===ye),ht))return lt(Be,ht);if(Be.options){const bt=Be.options[0];if(bt)return lt(Be,bt)}return Promise.resolve()},G=(Oe,ye,Pe)=>async be=>{const{rootStateKey:Be}=Oe;return be((0,S.mb)(Be,(0,U.Q8)((0,R.Y6)(Oe,{option:ye})))),await be(ge(Oe,Pe))},le=Oe=>{const ye=new y.kJ;return Oe.forEach(Pe=>{ye.createNode(Pe.name)}),Oe.forEach(Pe=>{Oe.forEach(be=>{Pe!==be&&h.z.get(Pe.type).dependsOn(Pe,be)&&ye.link(Pe.name,be.name)})}),ye},ge=(Oe,ye,Pe=p.h$)=>async(be,Be)=>{const ze=Be(),{rootStateKey:lt}=Oe,ht=(0,O.E0)(Oe,ze);if((0,O.AE)(lt,ze).transaction.status===b.LN.Fetching)return(0,R.iD)(ht)===b.Bd.never&&(await be(tt((0,R.yQ)(ht))),be(_e(Oe))),Promise.resolve();const vt=(0,O.gt)(lt,ze),bt=le(vt),ct=ze.dashboard?.getModel()?.panels??[],Pt=(0,D.dH)(ct),ie=(0,P.Kn)(ht)?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,D.PQ)([ht.id],bt,Pt))},Ce=bt.getNode(ht.name);let Ne=[];return Ce&&(Ne=Ce.getOptimizedInputEdges().map(Ze=>{const Qe=vt.find(Le=>Le.name===Ze.inputNode?.name);return Qe?be(Ie((0,R.yQ)(Qe))):Promise.resolve()})),Promise.all(Ne).then(()=>{ye&&(Pe.publish(new b.x9(ie)),f.E1.partial(pe(lt,Be)))})},ne=(Oe,ye,Pe,be)=>(ye.includes(Oe.name)||ye.push(Oe.name),Oe.outputEdges.forEach(Be=>{const ze=Be.outputNode;if(ze&&!ye.includes(ze.name)){const lt=Pe.find(ht=>ht.name===ze.name);lt&&lt.refresh===b.Bd.onTimeRangeChanged&&be.indexOf(lt)===-1?(be.push(lt),ye.push(ze.name)):ne(ze,ye,Pe,be)}}),be),ue=(Oe,ye)=>{const Pe=(0,O.gt)(Oe,ye),be=le(Pe),Be=[],ze=[];return Pe.forEach(lt=>{const ht=be.getNode(lt.name);if(!Be.includes(lt.name)&&ht){const vt=Pe.find(ct=>ct.name===ht.name),bt=vt&&vt.refresh===b.Bd.onTimeRangeChanged;bt&&ht.outputEdges.length===0&&ze.push(vt),bt&&ze.includes(vt)&&ht.outputEdges.length>0&&(ze.push(vt),ne(ht,Be,Pe,ze)),vt&&vt.refresh&&vt.refresh!==b.Bd.onTimeRangeChanged&&ne(ht,Be,Pe,ze)}}),ze},te=(Oe,ye)=>(0,O.gt)(Oe,ye).filter(Be=>Be.hasOwnProperty("refresh")&&Be.hasOwnProperty("options")?Be.refresh===b.Bd.onTimeRangeChanged:!1),me=(Oe,ye,Pe={templateSrv:(0,E.J)(),events:p.h$})=>async(be,Be)=>{Pe.templateSrv.updateTimeRange(ye);let ze=[];u.v.featureToggles.refactorVariablesTimeRange?ze=ue(Oe,Be()):ze=te(Oe,Be());const lt=ze.map(vt=>vt.id),ht=ze.map(vt=>be(q((0,R.yQ)(vt))));try{await Promise.all(ht),Pe.events.publish(new b.eq({variableIds:lt}))}catch(vt){console.error(vt),be((0,r.$l)(Ve("Template variable service failed",vt)))}},q=Oe=>async(ye,Pe)=>{const be=(0,O.E0)(Oe,Pe());if(!(0,P.eL)(be))return;const Be=be.options.slice();await ye(Ie((0,R.yQ)(be),!0));const ze=(0,O.E0)(Oe,Pe());if(!(0,P.eL)(ze))return;const lt=ze.options;JSON.stringify(Be)!==JSON.stringify(lt)&&Pe().dashboard.getModel()?.templateVariableValueUpdated()},se=(Oe,ye,Pe=p.h$)=>async(be,Be)=>{const ze=[],lt=Be().dashboard.getModel(),ht=(0,O.gt)(Oe,Be());for(const ie of ht){const Ce=C.IG+ie.name;if(!ye.hasOwnProperty(Ce)||!ae(ie,ye[Ce].value))continue;let Ne=ye[Ce].value;if(ye[Ce].removed){const Qe=lt?.templating.list.find(Le=>Le.name===ie.name);Qe&&(0,P.Kr)(Qe)&&(Ne=Qe.current.value),Qe&&(0,P.VC)(Qe)&&(Ne=Qe.query)}const Ze=h.z.get(ie.type).setValueFromUrl(ie,Ne);ze.push(Ze)}const vt=ht.filter(ie=>{const Ce=C.IG+ie.name;return ye.hasOwnProperty(Ce)&&ae(ie,ye[Ce].value)&&!(0,P.Kn)(ie)}),bt=le(ht),ct=(0,D.dH)(lt?.panels??[]),Pt=(0,D.PQ)(vt.map(ie=>ie.id),bt,ct);ze.length&&(await Promise.all(ze),Pe.publish(new b.Wy({refreshAll:Pt.size===0,panelIds:Array.from(Pt)})))};function ae(Oe,ye){const Pe=h.z.get(Oe.type).getValueForUrl(Oe);let be=(0,R.Hi)(ye);return Array.isArray(Pe)&&!Array.isArray(be)&&(be=[be]),!(0,t.isEqual)(Pe,be)}const pe=(Oe,ye)=>{const Pe=f.E1.getSearchObject(),be=Object.keys(Pe).filter(Be=>Be.indexOf(C.IG)===-1).reduce((Be,ze)=>(Be[ze]=Pe[ze],Be),{});for(const Be of(0,O.gt)(Oe,ye())){if(Be.skipUrlSync)continue;const ze=h.z.get(Be.type);be[C.IG+Be.name]=ze.getValueForUrl(Be)}return be},de=(Oe,ye)=>async(Pe,be)=>{try{const Be=(0,R.mn)(Oe),ze=be(),lt=(0,O.cp)(ze);lt&&(0,O.AE)(lt,ze).transaction.status===b.LN.Fetching&&Pe(st(lt)),Pe((0,S.mb)(Be,(0,I.Z9)({uid:Be}))),Pe(L(Be,ye)),Pe(w(Be,ye)),Pe(Me(Be)),await Pe(Q(Be)),Pe((0,S.mb)(Be,(0,I.iv)({uid:Be})))}catch(Be){Pe((0,r.$l)(Ve("Templating init failed",Be))),console.error(Be)}};function Me(Oe,ye=v.ak){return(Pe,be)=>{const Be=(0,O.gt)(Oe,be());for(const ze of Be){if(!(0,P.Kn)(ze)&&!(0,P.Xh)(ze))continue;const{datasource:lt}=ze;if((0,i.cv)(lt))continue;const ht=ye().getInstanceSettings(lt),vt=ht?(0,i.iU)(ht):{uid:lt};Pe((0,S.mb)(Oe,(0,U.Pl)((0,R.Y6)(ze,{propName:"datasource",propValue:vt}))))}}}const Ke=Oe=>ye=>{ye((0,S.mb)(Oe,(0,F.S)())),ye((0,S.mb)(Oe,(0,a.QR)())),ye((0,S.mb)(Oe,(0,x.XJ)())),ye((0,S.mb)(Oe,(0,I.p3)()))},st=(Oe,ye={getBackendSrv:g.i})=>Pe=>{ye.getBackendSrv().cancelAllInFlightRequests(),Pe(Ke(Oe))},Ie=(Oe,ye=!1)=>async(Pe,be)=>{const{rootStateKey:Be}=Oe;try{if(!(0,R.A3)(Be,be()))return;const ze=(0,O.E0)(Oe,be());Pe((0,S.mb)(Be,(0,U.$M)((0,R.Y6)(ze)))),await Pe(tt((0,R.yQ)(ze))),await h.z.get(ze.type).updateOptions(ze),Pe(_e(Oe))}catch(ze){if(Pe((0,S.mb)(Be,(0,U.Le)((0,R.Y6)(Oe,{error:ze})))),ye||(console.error(ze),Pe((0,r.$l)(Ve("Error updating options:",ze,Oe)))),ye)throw ze}},Ve=(Oe,ye,Pe)=>(0,l.t_)(`${Pe?`Templating [${Pe.id}]`:"Templating"}`,`${Oe} ${ye.message}`),_e=Oe=>(ye,Pe)=>{const{rootStateKey:be}=Oe;if(!(0,R.A3)(be,Pe()))return;const Be=(0,O.E0)(Oe,Pe());Be.state!==s.Gu.Done&&ye((0,S.mb)(Oe.rootStateKey,(0,U.qQ)((0,R.Y6)(Be))))};function tt(Oe,ye=v.ak){return async function(Pe,be){const{id:Be,rootStateKey:ze}=Oe;if(!(0,R.A3)(ze,be()))return;const lt=(0,O.E0)(Oe,be());if(lt.type==="query")try{const ht=await ye().get(lt.datasource??"");if((0,P.R)(ht)||!(0,P.Ju)(ht)||dt(lt.query))return;const vt={refId:`${ht.name}-${Be}-Variable-Query`,query:lt.query};Pe((0,S.mb)(ze,(0,U.Pl)((0,R.Y6)(Oe,{propName:"query",propValue:vt}))))}catch(ht){Pe((0,r.$l)(Ve("Failed to upgrade legacy queries",ht))),console.error(ht)}}}function dt(Oe){return Oe?Oe.hasOwnProperty("refId")&&typeof Oe.refId=="string":!1}},7240:(Y,T,e)=>{"use strict";e.d(T,{ZP:()=>d,mb:()=>f,qM:()=>s});var t=e(92624),n=e(51511),c=e(30286);const s={keys:{}},i=o=>({type:`templating/keyed/${o.action.type.replace(/^templating\//,"")}`,payload:o});function f(o,m){const l=(0,t.mn)(o);return i({key:l,action:m})}const u=o=>typeof o.type=="string"&&o.type.startsWith("templating/keyed")&&"payload"in o&&typeof o.payload.key=="string";function r(o=s,m){if(u(m)){const{key:l,action:p}=m.payload,g=(0,t.mn)(l),y=c.Z9.match(p)?g:o.lastKey,v=(0,n.Q)(),E=o.keys[g],h=v(E,p);return{...o,lastKey:y,keys:{...o.keys,[g]:h}}}return o}const d={templating:r}},51511:(Y,T,e)=>{"use strict";e.d(T,{L:()=>o,Q:()=>d});var t=e(83829),n=e(50678),c=e(37737),s=e(85972),i=e(30286),f=e(63510),u=e(6942);let r;function d(){return r||(r=(0,t.combineReducers)({editor:n.gl,variables:u.L,optionsPicker:s.cv,transaction:i.vw,inspect:c.iV})),r}function o(){return{editor:n.PF,variables:f.s,optionsPicker:s.yy,transaction:i.xO,inspect:c.Kf}}},87095:(Y,T,e)=>{"use strict";e.d(T,{AE:()=>u,E0:()=>i,Eo:()=>l,IV:()=>o,Q4:()=>E,QT:()=>p,S_:()=>v,_K:()=>C,cp:()=>y,gt:()=>r,ir:()=>a,ng:()=>h,xD:()=>m});var t=e(58635),n=e(3153),c=e(92624),s=e(51511);function i(P,D=(0,n.y0)(),x=!0){const{id:M,rootStateKey:b}=P,S=u(b,D).variables[M];if(!S){if(x)throw new Error(`Couldn't find variable with id:${M}`);return}return S}function f(P,D,x=(0,n.y0)()){return Object.values(u(D,x).variables).filter(P).sort((M,b)=>M.index-b.index)}function u(P,D=(0,n.y0)()){return D.templating.keys[(0,c.mn)(P)]??(0,s.L)()}function r(P,D=(0,n.y0)()){return f(d,P,D)}function d(P){return P.type!=="system"}const o=(0,t.Z)((P,D)=>r(P,(0,n.y0)())),m=(P,D)=>r(P,D);function l(P,D=(0,n.y0)()){return p(Object.values(u(P,D).variables))}function p(P){const D=P.filter(d).sort((x,M)=>x.index-M.index);return D.length>0?D[D.length-1].index+1:0}function g(P,D=getState()){return u(P,D).transaction.isDirty}function y(P=(0,n.y0)()){return P.templating?.lastKey}function v(P=(0,n.y0)()){if(!P.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return P.templating.lastKey}function E(P,D=(0,n.y0)()){const x=y(D);return x?f(P,x,D):[]}function h(P=(0,n.y0)()){const D=y(P);return D?r(D,P):[]}function C(P,D=(0,n.y0)()){const x=y(D);if(x)return i({id:P,rootStateKey:x,type:"query"},D,!1)}function a(P,D){return P[D]}},92990:(Y,T,e)=>{"use strict";e.d(T,{$M:()=>P,Be:()=>C,Le:()=>x,Mn:()=>a,Pl:()=>y,Q8:()=>h,VN:()=>g,Y9:()=>E,b5:()=>l,gE:()=>v,mZ:()=>p,qQ:()=>D});var t=e(62992),n=e(82897),c=e.n(n),s=e(52666),i=e(22323),f=e(50678),u=e(15546),r=e(92624),d=e(87095),o=e(63510);const m=(0,t.oM)({name:"templating/shared",initialState:o.s,reducers:{addVariable:(M,b)=>{const R=b.payload.id??b.payload.data.model.name,S=i.z.get(b.payload.type),O=(0,n.cloneDeep)(S.initialState),U=S.beforeAdding?S.beforeAdding(b.payload.data.model):(0,n.cloneDeep)(b.payload.data.model),I={...(0,n.defaults)({},U,O),id:R,index:b.payload.data.index,global:b.payload.data.global};M[R]=I},variableStateNotStarted:(M,b)=>{const R=(0,d.ir)(M,b.payload.id);R.state=s.Gu.NotStarted,R.error=null},variableStateFetching:(M,b)=>{const R=(0,d.ir)(M,b.payload.id);R.state=s.Gu.Loading,R.error=null},variableStateCompleted:(M,b)=>{const R=(0,d.ir)(M,b.payload.id);R&&(R.state=s.Gu.Done,R.error=null)},variableStateFailed:(M,b)=>{const R=(0,d.ir)(M,b.payload.id);R&&(R.state=s.Gu.Error,R.error=b.payload.data.error)},removeVariable:(M,b)=>{if(delete M[b.payload.id],!b.payload.data.reIndex)return;const R=Object.values(M).sort((S,O)=>S.index-O.index);for(let S=0;S<R.length;S++)R[S].index=S},duplicateVariable:(M,b)=>{function R(V){return V.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const S=(0,n.cloneDeep)(M[b.payload.id]),O=new RegExp(`^copy_of_${R(S.name)}(_(\\d+))?$`),U=Object.values(M).map(({name:V})=>V.match(O)).filter(V=>V!=null),I=U.map(V=>V[2]).filter(V=>V!=null),F=(()=>U.length===0?null:I.length===0?1:I.map(V=>+V).sort((V,H)=>H-V)[0]+1)(),w=`copy_of_${S.name}${F?`_${F}`:""}`,K=b.payload.data?.newId??w,L=(0,d.QT)(Object.values(M));M[K]={...(0,n.cloneDeep)(i.z.get(b.payload.type).initialState),...S,id:K,name:w,index:L}},changeVariableOrder:(M,b)=>{const{toIndex:R,fromIndex:S}=b.payload.data,O=Object.values(M);for(let U=0;U<O.length;U++){const I=O[U];I.index===S?I.index=R:I.index>S&&I.index<=R?I.index--:I.index<S&&I.index>=R&&I.index++}},changeVariableType:(M,b)=>{const{id:R}=b.payload,{label:S,name:O,index:U,description:I,rootStateKey:F}=M[R];M[R]={...(0,n.cloneDeep)(i.z.get(b.payload.data.newType).initialState),id:R,rootStateKey:F,label:S,name:O,index:U,description:I}},setCurrentVariableValue:(M,b)=>{if(!b.payload.data.option)return;const R=(0,d.ir)(M,b.payload.id);if(!(0,u.eL)(R))return;const{option:S}=b.payload.data,O={...S,text:(0,r.Hi)(S?.text),value:(0,r.Hi)(S?.value)};R.current=O,R.options=R.options.map(U=>{U.value=(0,r.Hi)(U.value),U.text=(0,r.Hi)(U.text);let I=!1;if(Array.isArray(O.value))for(let F=0;F<O.value.length;F++){const w=O.value[F];if(U.value===w){I=!0;break}}else U.value===O.value&&(I=!0);return U.selected=I,U})},changeVariableProp:(M,b)=>{const R=(0,d.ir)(M,b.payload.id);R[b.payload.data.propName]=b.payload.data.propValue}},extraReducers:M=>M.addCase(f.Yo,(b,R)=>{const S=(0,d.ir)(b,R.payload.id);S.name=R.payload.data.newName})}),l=m.reducer,{removeVariable:p,addVariable:g,changeVariableProp:y,changeVariableOrder:v,duplicateVariable:E,setCurrentVariableValue:h,changeVariableType:C,variableStateNotStarted:a,variableStateFetching:P,variableStateCompleted:D,variableStateFailed:x}=m.actions},30286:(Y,T,e)=>{"use strict";e.d(T,{Z9:()=>u,iv:()=>d,p3:()=>r,vw:()=>o,xO:()=>s});var t=e(62992),n=e(10672),c=e(92990);const s={uid:null,status:n.LN.NotStarted,isDirty:!1},i=(0,t.oM)({name:"templating/transaction",initialState:s,reducers:{variablesInitTransaction:(m,l)=>{m.uid=l.payload.uid,m.status=n.LN.Fetching},variablesCompleteTransaction:(m,l)=>{m.uid===l.payload.uid&&(m.status=n.LN.Completed)},variablesClearTransaction:(m,l)=>{m.uid=null,m.status=n.LN.NotStarted,m.isDirty=!1}},extraReducers:m=>m.addMatcher(f,(l,p)=>{l.status===n.LN.Completed&&(l.isDirty=!0)})});function f(m){return c.mZ.match(m)||c.VN.match(m)||c.Pl.match(m)||c.gE.match(m)||c.Y9.match(m)||c.Be.match(m)}const{variablesInitTransaction:u,variablesClearTransaction:r,variablesCompleteTransaction:d}=i.actions,o=i.reducer},63510:(Y,T,e)=>{"use strict";e.d(T,{s:()=>t});const t={}},6942:(Y,T,e)=>{"use strict";e.d(T,{L:()=>f,S:()=>i});var t=e(62992),n=e(22323),c=e(92990),s=e(63510);const i=(0,t.PH)("templating/cleanVariables"),f=(u=s.s,r)=>{if(i.match(r)){const d=Object.values(u).filter(m=>m.global);return d?d.reduce((m,l)=>(m[l.id]=l,m),{}):s.s}return r?.payload?.type&&n.z.getIfExists(r?.payload?.type)?n.z.get(r.payload.type).reducer((0,c.b5)(u,r),r):u}},10672:(Y,T,e)=>{"use strict";e.d(T,{$U:()=>t.$U,Bd:()=>t.Bd,Eg:()=>f,LN:()=>i,Wy:()=>d,bU:()=>t.bU,eq:()=>r,x9:()=>u});var t=e(69273),n=e(52666),c=e(55391),s=e(82253),i=(o=>(o.NotStarted="Not started",o.Fetching="Fetching",o.Completed="Completed",o))(i||{});const f={id:s.UY,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:t.bU.dontHide,skipUrlSync:!1,state:n.Gu.NotStarted,error:null,description:null};class u extends c.R{}u.type="variables-changed";class r extends c.R{}r.type="variables-time-range-process-done";class d extends c.R{}d.type="variables-changed-in-url"},92624:(Y,T,e)=>{"use strict";e.d(T,{A3:()=>S,AQ:()=>P,HY:()=>E,Hi:()=>R,J7:()=>m,N9:()=>C,QI:()=>v,Tt:()=>h,Y6:()=>I,_6:()=>y,a9:()=>l,bf:()=>g,bi:()=>x,gR:()=>a,iD:()=>D,mn:()=>O,xT:()=>b,yQ:()=>U});var t=e(82897),n=e.n(t),c=e(20308),s=e(55935),i=e(3153),f=e(19349),u=e(22323),r=e(82253),d=e(87095),o=e(10672);const m=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,l=F=>(m.lastIndex=0,m.exec(F)),p="__searchFilter",g=F=>F&&typeof F=="string"?F.indexOf(p)!==-1:!1,y=F=>{const{query:w,wildcardChar:K}=F;if(!g(w))return{};let{options:L}=F;return L=L||{searchFilter:""},{__searchFilter:{value:L.searchFilter?`${L.searchFilter}${K}`:`${K}`,text:""}}};function v(...F){const w=F[F.length-1];F[0]=typeof F[0]=="string"?F[0]:(0,s.Xh)(F[0]);const L=F.slice(0,-1).join(" ").match(m);return!!(L!==null?L.find(H=>{const j=l(H);return j!==null&&j.indexOf(w)>-1}):!1)}const E=F=>{if(!F||!F.current)return!1;if(F.current.value){const w=Array.isArray(F.current.value);if(w&&F.current.value.length&&F.current.value[0]===r.r2||!w&&F.current.value===r.r2)return!0}if(F.current.text){const w=Array.isArray(F.current.text);if(w&&F.current.text.length&&F.current.text[0]===r.xk||!w&&F.current.text===r.xk)return!0}return!1},h=F=>!F||!F.current||!F.current.text?"":Array.isArray(F.current.text)?F.current.text.toString():typeof F.current.text!="string"?"":F.current.text,C=F=>!F||!F.current||F.current.value===void 0||F.current.value===null?null:Array.isArray(F.current.value)?F.current.value.toString():typeof F.current.value!="string"?null:F.current.value;function a(F,w=(0,c.J)()){return!F||!F.regex?"":w.replace(F.regex,{},"regex")}function P(F,w,K=(0,f.$t)()){const L={range:void 0,variable:F,searchFilter:w};return(F.refresh===o.Bd.onTimeRangeChanged||F.refresh===o.Bd.onDashboardLoad)&&(L.range=K.timeRange()),L}function D(F){if(!F||!F.hasOwnProperty("refresh"))return o.Bd.never;const w=F;return w.refresh!==o.Bd.onTimeRangeChanged&&w.refresh!==o.Bd.onDashboardLoad&&w.refresh!==o.Bd.never?o.Bd.never:w.refresh}function x(){return u.z.list().filter(F=>F.id!=="system").map(({id:F,name:w,description:K})=>({label:w,value:F,description:K}))}function M(F){return(0,t.isArray)(F)&&(F.length===0?F=void 0:F.length===1&&(F=F[0])),F}function b(F,w){let K=0;const L={};for(const V in F){if(!V.startsWith(r.IG))continue;let H=M(w[V]),j=M(F[V]);(0,t.isEqual)(j,H)||(L[V]={value:F[V]},K++)}for(const V in w){if(!V.startsWith(r.IG))continue;const H=w[V];(0,t.isArray)(H)&&H.length===0||F.hasOwnProperty(V)||(L[V]={value:"",removed:!0},K++)}return K?L:void 0}function R(F){return Array.isArray(F)?F.map(String):F==null?"":typeof F=="number"?F.toString(10):typeof F=="string"?F:typeof F=="boolean"?F.toString():""}function S(F,w=(0,i.y0)()){return(0,d.AE)(F,w).transaction.status!==o.LN.NotStarted}function O(F){return String(F)}const U=F=>{if(!F.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${F.id}`);return{type:F.type,id:F.id,rootStateKey:F.rootStateKey}};function I(F,w){return{type:F.type,id:F.id,data:w}}},92077:(Y,T,e)=>{"use strict";var t=e(63418),n=e(35645);const c=n.v.bootData.settings.cspReportOnlyEnabled;n.v.bootData.settings.trustedTypesDefaultPolicyEnabled&&window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",{createHTML:(B,W,z)=>c?(console.error("[HTML not sanitized with Trusted Types]",B,W,z),B):B.replace(/<script/gi,"&lt;script"),createScript:B=>B,createScriptURL:(B,W,z)=>c?(console.error("[ScriptURL not sanitized with Trusted Types]",B,W,z),B):t.QX.sanitizeUrl(B)});var s=e(32478),i=e(88656),f=e(4547),u=e(44032),r=e(63073),d=e(3574),o=e(24259),m=e(91162),l=e(87449),p=e(9398),g=e(134),y=e(15678),v=e(99714),E=e(82557),h=e(82897),C=e.n(h),a=e(66111),P=e(91676),D=e(67483),x=e(10753),M=e(30779),b=e(2653),R=e(8488),S=e(72196),O=e(54899),U=e(47458),I=e(37932),F=e(82378),w=e(36535),K=e(19920),L=e(86647),V=e(54665),H=e(5494),j=e(87670),A=e(98825),_=e(87221),k=e(90771),Q=e(47694),re=e(79378),Z=e(9892),oe=e(99098),G=e(50035),le=e(90748),ge=e(30471),ne=e(13512),ue=e(50928),te=e(91603),me=e(2594),q=e(31403),se=e(7804),ae=e(8581),pe=e(53908),de=e(46967);function Me(B,W){switch(W.type){case oe.fS.boolean:return(0,h.isUndefined)(B)?!1:Ke(B);case oe.fS.number:return isNaN(B)?0:parseFloat(B);case oe.fS.string:return B?String(B):"";default:return B}}const Ke=B=>(0,h.isString)(B)?!(B[0]==="F"||B[0]==="f"||B[0]==="0"):!!B;function st(B){return function({options:z,onChange:J,field:ce}){const{validator:he,converter:De=Me}=B,{value:$e}=z,[et,ot]=(0,a.useState)(!he($e)),Dt=(0,a.useCallback)(Jt=>{ot(!he(Jt.currentTarget.value))},[ot,he]),Ht=(0,a.useCallback)(Jt=>{if(et)return;const{value:nn}=Jt.currentTarget;J({...z,value:De(nn,ce)})},[z,J,et,ce,De]);return a.createElement(de.I,{className:"flex-grow-1",invalid:et,defaultValue:String(z.value),placeholder:"Value",onChange:Dt,onBlur:Ht})}}const Ie=()=>[{name:"Is greater",id:le.mE.greater,component:st({validator:B=>!isNaN(B)})},{name:"Is greater or equal",id:le.mE.greaterOrEqual,component:st({validator:B=>!isNaN(B)})},{name:"Is lower",id:le.mE.lower,component:st({validator:B=>!isNaN(B)})},{name:"Is lower or equal",id:le.mE.lowerOrEqual,component:st({validator:B=>!isNaN(B)})},{name:"Is equal",id:le.mE.equal,component:st({validator:()=>!0})},{name:"Is not equal",id:le.mE.notEqual,component:st({validator:()=>!0})},{name:"Regex",id:le.mE.regex,component:st({validator:()=>!0,converter:B=>String(B)})}],Ve=()=>null,_e=()=>[{name:"Is null",id:le.mE.isNull,component:Ve},{name:"Is not null",id:le.mE.isNotNull,component:Ve}];function tt(B){return function({options:z,onChange:J,field:ce}){const{validator:he}=B,[De,$e]=(0,a.useState)({from:!he(z.from),to:!he(z.to)}),et=(0,a.useCallback)((Dt,Ht)=>{$e({...De,[Ht]:!he(Dt.currentTarget.value)})},[$e,he,De]),ot=(0,a.useCallback)((Dt,Ht)=>{if(De[Ht])return;const{value:Jt}=Dt.currentTarget;J({...z,[Ht]:Me(Jt,ce)})},[z,J,De,ce]);return a.createElement(a.Fragment,null,a.createElement(de.I,{className:"flex-grow-1 gf-form-spacing",invalid:De.from,defaultValue:String(z.from),placeholder:"From",onChange:Dt=>et(Dt,"from"),onBlur:Dt=>ot(Dt,"from")}),a.createElement("div",{className:"gf-form-label"},"and"),a.createElement(de.I,{className:"flex-grow-1",invalid:De.to,defaultValue:String(z.to),placeholder:"To",onChange:Dt=>et(Dt,"to"),onBlur:Dt=>ot(Dt,"to")}))}}const dt=()=>[{name:"Is between",id:le.mE.between,component:tt({validator:B=>!isNaN(B)})}],Oe=new pe.B(()=>[...Ie(),..._e(),...dt()]),ye=B=>{const{onDelete:W,onChange:z,filter:J,fieldsInfo:ce}=B,{fieldsAsOptions:he,fieldByDisplayName:De}=ce,$e=Be(J,he)??"",et=De[$e],ot=et?Pe(et):[],Dt=be(J,ot),Ht=Oe.getIfExists(Dt),Jt=(0,a.useCallback)(Pn=>{Pn?.value&&z({...J,fieldName:Pn.value})},[z,J]),nn=(0,a.useCallback)(Pn=>{if(!Pn?.value)return;const Wn=Pn.value,Za=G.U8.get(Wn).getDefaultOptions(et);z({...J,config:{id:Wn,options:Za}})},[z,J,et]),mn=(0,a.useCallback)(Pn=>{z({...J,config:{...J.config,options:Pn}})},[z,J]);return!et||!Ht||!Ht.component?null:a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form-spacing"},a.createElement("div",{className:"gf-form-label width-7"},"Field"),a.createElement(ae.Ph,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:he,value:J.fieldName,onChange:Jt})),a.createElement("div",{className:"gf-form gf-form-spacing"},a.createElement("div",{className:"gf-form-label"},"Match"),a.createElement(ae.Ph,{className:"width-12",placeholder:"Select test",options:ot,value:Dt,onChange:nn})),a.createElement("div",{className:"gf-form gf-form--grow gf-form-spacing"},a.createElement("div",{className:"gf-form-label"},"Value"),a.createElement(Ht.component,{field:et,options:J.config.options??{},onChange:mn})),a.createElement("div",{className:"gf-form"},a.createElement(q.zx,{icon:"times",onClick:W,variant:"secondary"})))},Pe=B=>{const W=[];for(const z of G.U8.list())!z.isApplicable(B)||!Oe.getIfExists(z.id)||W.push({value:z.id,label:z.name,description:z.description});return W},be=(B,W)=>{const z=W.find(J=>J.value===B.config.id);if(z&&z.value)return z.value;if(W[0]?.value)return W[0]?.value},Be=(B,W)=>{const z=W.find(J=>J.value===B.fieldName);if(z&&z.value)return z.value;if(W[0]?.value)return W[0]?.value},ze=[{label:"Include",value:te.PQ.include},{label:"Exclude",value:te.PQ.exclude}],lt=[{label:"Match all",value:te.ER.all},{label:"Match any",value:te.ER.any}],ht=B=>{const{input:W,options:z,onChange:J}=B,ce=bt(),he=ct(W),De=(0,a.useCallback)(()=>{const Ht=W[0],Jt=Ht.fields.find(Pn=>Pn.type!==oe.fS.time);if(!Jt)return;const nn=(0,h.cloneDeep)(z.filters),mn=G.U8.get(le.mE.greater);nn.push({fieldName:(0,ge.CZ)(Jt,Ht,W),config:{id:mn.id,options:mn.getDefaultOptions(Jt)}}),J({...z,filters:nn})},[J,z,W]),$e=(0,a.useCallback)(Ht=>{let Jt=(0,h.cloneDeep)(z.filters);Jt.splice(Ht,1),J({...z,filters:Jt})},[z,J]),et=(0,a.useCallback)((Ht,Jt)=>{let nn=(0,h.cloneDeep)(z.filters);nn[Jt]=Ht,J({...z,filters:nn})},[z,J]),ot=(0,a.useCallback)(Ht=>{J({...z,type:Ht??te.PQ.include})},[z,J]),Dt=(0,a.useCallback)(Ht=>{J({...z,match:Ht??te.ER.all})},[z,J]);return a.createElement("div",null,a.createElement("div",{className:"gf-form gf-form-inline"},a.createElement("div",{className:"gf-form-label width-8"},"Filter type"),a.createElement("div",{className:"width-15"},a.createElement(me.S,{options:ze,value:z.type,onChange:ot,fullWidth:!0}))),a.createElement("div",{className:"gf-form gf-form-inline"},a.createElement("div",{className:"gf-form-label width-8"},"Conditions"),a.createElement("div",{className:"width-15"},a.createElement(me.S,{options:lt,value:z.match,onChange:Dt,fullWidth:!0}))),a.createElement("div",{className:ce.conditions},z.filters.map((Ht,Jt)=>a.createElement(ye,{key:Jt,filter:Ht,fieldsInfo:he,onChange:nn=>et(nn,Jt),onDelete:()=>$e(Jt)})),a.createElement("div",{className:"gf-form"},a.createElement(q.zx,{icon:"plus",size:"sm",onClick:De,variant:"secondary"},"Add condition"))))},vt={id:ne.W.filterByValue,editor:ht,transformation:ue.Y.filterByValueTransformer,name:ue.Y.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source."},bt=(0,se.B)(()=>({conditions:Z.css`
    padding-left: 16px;
  `})),ct=B=>(0,a.useMemo)(()=>{const W={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(B)?B.reduce((z,J)=>J.fields.reduce((ce,he)=>{const De=(0,ge.CZ)(he,J,B);return ce.fieldByDisplayName[De]||(ce.fieldsAsOptions.push({label:De,value:De,type:he.type}),ce.fieldByDisplayName[De]=he),ce},z),W):W},[B]);var Pt=e(59250),ie=e(91353),Ce=e(91752),Ne=e(57054),Ze=e(13505);function Qe(B,W){const z={data:B.input,options:B.options},J=new Ce.j({id:"root",title:"root"}),ce=De=>{if(De?.length){const $e=De[0];let et=J.categories.find(ot=>ot.props.id===$e);return et||(et=new Ce.j({id:$e,title:$e}),J.categories.push(et)),et}return J},he={getValue:De=>(0,h.get)(B.options,De),onChange:(De,$e)=>{B.onChange((0,Ze.hs)(B.options,De,$e))}};return(0,Ne.HZ)(W,he,ce,z),J}function Le(B){const W={data:[],options:{}},z={},J=new ie.rt;B(J,W);for(const ce of J.getItems())ce.defaultValue!=null&&(0,h.set)(z,ce.path,ce.defaultValue);return z}var Ue=e(90024),ve=e(77564);const Se=(B,W)=>{const z=W.options??{};(0,Ue.J)("",B,z)},Fe=B=>{(0,a.useEffect)(()=>{if(!B.options.xBuckets?.mode){const z=Le(Se);B.onChange({...z,...B.options}),console.log("geometry useEffect",z)}});const W=Qe(B,Se);return a.createElement("div",null,a.createElement("div",null,W.items.map(z=>z.render())))},je={id:ve.Oy.id,editor:Fe,transformation:ve.Oy,name:ve.Oy.name,description:ve.Oy.description,state:Pt.BV.alpha};var Ge=e(72648),gt=e(6058),mt=e(11543),Ye=e(81764),ft=e(33750),St=e(71294),we=e(53768),qe=e(31290),Je=e(69098),ut=e(32195);function Mt(B,W,z){const J={},ce={};for(const he of B.fields){const De=(0,ge.CZ)(he,B),et=z.index[De].handler;if(!et)continue;const ot=he.values[W];if(ot==null)continue;const Dt=et.processor(ot,J,ce);Dt!=null&&(J[et.targetProperty??et.key]=Dt)}return ce.mappingValues&&(J.mappings=fn(ce)),J}var Wt=(B=>(B.Name="field.name",B.Value="field.value",B.Label="field.label",B.Ignore="__ignore",B))(Wt||{});const ln=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:Ot},{key:"min",processor:Ot},{key:"unit",processor:B=>B.toString()},{key:"decimals",processor:Ot},{key:"displayName",name:"Display name",processor:B=>B.toString()},{key:"color",processor:B=>({fixedColor:B,mode:we.S.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(B,W)=>{const z=(0,qe.I)(B);if(!isNaN(z))return W.thresholds||(W.thresholds={mode:Je.H.Absolute,steps:[{value:-1/0,color:"green"}]}),W.thresholds.steps.push({value:z,color:"red"}),W.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:ft.gz.allValues,processor:(B,W,z)=>{if((0,h.isArray)(B))return z.mappingValues=B,W.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:ft.gz.allValues,processor:(B,W,z)=>{if((0,h.isArray)(B))return z.mappingColors=B,W.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:ft.gz.allValues,processor:(B,W,z)=>{if((0,h.isArray)(B))return z.mappingTexts=B,W.mappings}}];function fn(B){const W={type:ut.H.ValueToText,options:{}};if(!B.mappingValues)return[];for(let z=0;z<B.mappingValues.length;z++){const J=B.mappingValues[z];J!=null&&(W.options[J.toString()]={color:B.mappingColors&&B.mappingColors[z],text:B.mappingTexts&&B.mappingTexts[z],index:z})}return[W]}let pn=null;function An(){if(pn===null){pn={};for(const B of ln)pn[B.key]=B}return pn}function Ot(B){const W=(0,qe.I)(B);if(!isNaN(W))return W}function Ft(B,W){for(const z of W)if(B===z.fieldName)return z.handlerKey;return B.toLowerCase()}function Kt(B){return B?An()[B]:null}function Lt(B,W,z){const J={index:{}};let ce=W.find(De=>De.handlerKey==="field.name"),he=W.find(De=>De.handlerKey==="field.value");for(const De of B.fields){const $e=(0,ge.CZ)(De,B),et=W.find(Ht=>Ht.fieldName===$e),ot=et?et.handlerKey:$e.toLowerCase();let Dt=Kt(ot);z&&(Dt?(Dt.key==="field.name"&&(J.nameField=De),Dt.key==="field.value"&&(J.valueField=De)):et||(!J.nameField&&!ce&&De.type===oe.fS.string&&(J.nameField=De,Dt=Kt("field.name")),!J.valueField&&!he&&De.type===oe.fS.number&&(J.valueField=De,Dt=Kt("field.value")))),!Dt&&z&&(Dt=Kt("field.label")),J.index[$e]={automatic:!et,handler:Dt,reducerId:et?.reducerId??Dt?.defaultReducer??ft.gz.lastNotNull}}return J}function Ut({frame:B,mappings:W,onChange:z,withReducers:J,withNameAndValue:ce}){const he=(0,Ge.wW)(_t),De=Rt(B,W,ce),$e=ln.map(Dt=>$t(Dt,!1)),et=(Dt,Ht)=>{const Jt=W.findIndex(nn=>nn.fieldName===Dt.fieldName);if(Ht)if(Jt!==-1){const nn=[...W];nn.splice(Jt,1,{...W[Jt],handlerKey:Ht.value}),z(nn)}else z([...W,{fieldName:Dt.fieldName,handlerKey:Ht.value}]);else z(Jt!==-1?W.filter((nn,mn)=>mn!==Jt):[...W,{fieldName:Dt.fieldName,handlerKey:"__ignore"}])},ot=(Dt,Ht)=>{const Jt=W.findIndex(nn=>nn.fieldName===Dt.fieldName);if(Jt!==-1){const nn=[...W];nn.splice(Jt,1,{...W[Jt],reducerId:Ht}),z(nn)}else z([...W,{fieldName:Dt.fieldName,handlerKey:Dt.handlerKey,reducerId:Ht}])};return a.createElement("table",{className:he.table},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Field"),a.createElement("th",null,"Use as"),J&&a.createElement("th",null,"Select"))),a.createElement("tbody",null,De.map(Dt=>a.createElement("tr",{key:Dt.fieldName},a.createElement("td",{className:he.labelCell},Dt.fieldName),a.createElement("td",{className:he.selectCell,"data-testid":`${Dt.fieldName}-config-key`},a.createElement(ae.Ph,{options:$e,value:Dt.configOption,placeholder:Dt.placeholder,isClearable:!0,onChange:Ht=>et(Dt,Ht)})),J&&a.createElement("td",{"data-testid":`${Dt.fieldName}-reducer`,className:he.selectCell},a.createElement(St.m,{stats:[Dt.reducerId],defaultStat:Dt.reducerId,onChange:Ht=>ot(Dt,Ht[0])}))))))}function Rt(B,W,z){const J=[],ce=Lt(B,W??[],z);for(const he of B.fields){const De=(0,ge.CZ)(he,B),$e=ce.index[De],et=$t($e.handler,$e.automatic);J.push({fieldName:De,configOption:$e.automatic?null:et,placeholder:$e.automatic?et?.label:"Choose",handlerKey:$e.handler?.key??null,reducerId:$e.reducerId})}for(const he of W)if(!J.find(De=>De.fieldName===he.fieldName)){const De=Kt(he.handlerKey);J.push({fieldName:he.fieldName,handlerKey:he.handlerKey,configOption:$t(De,!1),missingInFrame:!0,reducerId:he.reducerId??ft.gz.lastNotNull})}return Object.values(J)}function $t(B,W){if(!B)return null;let z=B.name??(0,h.capitalize)(B.key);return W&&(z=`${z} (auto)`),{label:z,value:B.key}}const _t=B=>({table:Z.css`
    margin-top: ${B.spacing(1)};

    td,
    th {
      border-right: 4px solid ${B.colors.background.primary};
      border-bottom: 4px solid ${B.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${B.typography.bodySmall.fontSize};
      line-height: ${B.spacing(4)};
      padding: ${B.spacing(0,1)};
    }
  `,labelCell:Z.css`
    font-size: ${B.typography.bodySmall.fontSize};
    background: ${B.colors.background.secondary};
    padding: ${B.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:Z.css`
    padding: 0;
    min-width: 161px;
  `});var jt=e(9471);function an(B,W){let z=null;for(const $e of W)if($e.refId===B.configRefId){z=$e;break}if(!z)return W;const J={fields:[],length:1},ce=Lt(z,B.mappings??[],!1);for(const $e of z.fields){const et={...$e},ot=(0,ge.CZ)($e,z),Dt=ce.index[ot],Ht=(0,ft.Kx)({field:$e,reducers:[Dt.reducerId]});et.values=[Ht[Dt.reducerId]],J.fields.push(et)}const he=[],De=(0,G.sq)(B.applyTo||{id:le.mi.numeric});for(const $e of W){if($e===z&&W.length>1)continue;const et={fields:[],length:$e.length};for(const ot of $e.fields)if(De(ot,$e,W)){const Dt=Mt(J,0,ce);et.fields.push({...ot,config:{...ot.config,...Dt}})}else et.fields.push(ot);he.push(et)}return he}const cn={id:ne.W.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data",defaultOptions:{configRefId:"config",mappings:[]},operator:B=>W=>W.pipe((0,jt.U)(z=>an(B,z)))};function rn({input:B,onChange:W,options:z}){const J=(0,Ge.wW)(Dn),ce=B.map(nn=>nn.refId).filter(nn=>nn!=null).map(nn=>({label:nn,value:nn})),he=z.configRefId||"config",De=z.applyTo??{id:le.mi.byType,options:"number"},$e=gt.i.get(De.id),et=B.find(nn=>nn.refId===he),ot=nn=>{W({...z,configRefId:nn.value||"config"})},Dt=nn=>{W({...z,applyTo:{id:nn.value}})},Ht=nn=>{W({...z,applyTo:{id:De.id,options:nn}})},Jt=gt.i.list().filter(nn=>!nn.excludeFromPicker).map(nn=>({label:nn.name,value:nn.id,description:nn.description}));return a.createElement(a.Fragment,null,a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Config query",labelWidth:20},a.createElement(ae.Ph,{onChange:ot,options:ce,value:he,width:30}))),a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Apply to",labelWidth:20},a.createElement(ae.Ph,{onChange:Dt,options:Jt,value:De.id,width:30}))),a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Apply to options",labelWidth:20,className:J.matcherOptions},a.createElement($e.component,{matcher:$e.matcher,data:B,options:De.options,onChange:Ht}))),a.createElement(mt.Z,null,et&&a.createElement(Ut,{frame:et,mappings:z.mappings,onChange:nn=>W({...z,mappings:nn}),withReducers:!0})))}const hn={id:cn.id,editor:rn,transformation:cn,name:cn.name,description:cn.description,state:Pt.BV.beta,help:`
### Use cases

This transformation allows you select one query and from it extract standard options such as
**Min**, **Max**, **Unit**, and **Thresholds** and apply them to other query results.
This enables dynamic query driven visualization configuration.

### Options

- **Config query**: Selet the query that returns the data you want to use as configuration.
- **Apply to**: Select what fields or series to apply the configuration to.
- **Apply to options**: Usually a field type or field name regex depending on what option you selected in **Apply to**.

### Field mapping table

Below the configuration listed above you will find the field table. Here all fields found in the data returned by the config query will be listed along with a **Use as** and **Select** option. This table gives you control over what field should be mapped to which config property and if there are multiple rows which value to select.

## Example

Input[0] (From query: A, name: ServerA)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 10    |
| 1626178119129 | 30    |

Input[1] (From query: B)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 100   |
| 1626178119129 | 100   |

Output (Same as Input[0] but now with config on the Value field)

| Time          | Value (config: Max=100) |
| ------------- | ----------------------- |
| 1626178119127 | 10                      |
| 1626178119129 | 30                      |

Each row in the source data becomes a separate field. Each field now also has a maximum
configuration option set. Options such as **min**, **max**, **unit**, and **thresholds** are all part of field configuration, and if they are set like this, they will be used by the visualization instead of any options that are manually configured.
in the panel editor options pane.

## Value mappings

You can also transform a query result into value mappings. This is is a bit different because every
row in the configuration query result is used to define a single value mapping row. See the following example.

Config query result:

| Value | Text   | Color |
| ----- | ------ | ----- |
| L     | Low    | blue  |
| M     | Medium | green |
| H     | High   | red   |

In the field mapping specify:

| Field | Use as                  | Select     |
| ----- | ----------------------- | ---------- |
| Value | Value mappings / Value  | All values |
| Text  | Value mappings / Text   | All values |
| Color | Value mappings / Ciolor | All values |

Grafana will build the value mappings from you query result and apply it the the real data query results. You should see values being mapped and colored according to the config query results.
`},Dn=B=>({matcherOptions:Z.css`
    min-width: 404px;
  `});var Rn=e(59980),ea=e(66392),Fn=e(62294),Vn=e(52081),aa=e(41165),Sa=e(14835);const la=[{value:Fn.ie.BinaryOperation,label:"Binary operation"},{value:Fn.ie.ReduceRow,label:"Reduce row"},{value:Fn.ie.Index,label:"Row index"}],Yn=new Set([oe.fS.time,oe.fS.number,oe.fS.string]);class ia extends a.PureComponent{constructor(W){super(W),this.onToggleReplaceFields=()=>{const{options:z}=this.props;this.props.onChange({...z,replaceFields:!z.replaceFields})},this.onModeChanged=z=>{const{options:J,onChange:ce}=this.props,he=z.value??Fn.ie.BinaryOperation;ce({...J,mode:he})},this.onAliasChanged=z=>{const{options:J}=this.props;this.props.onChange({...J,alias:z.target.value})},this.updateReduceOptions=z=>{const{options:J,onChange:ce}=this.props;ce({...J,mode:Fn.ie.ReduceRow,reduce:z})},this.onFieldToggle=z=>{const{selected:J}=this.state;J.indexOf(z)>-1?this.onChange(J.filter(ce=>ce!==z)):this.onChange([...J,z])},this.onChange=z=>{this.setState({selected:z});const{reduce:J}=this.props.options;this.updateReduceOptions({...J,include:z})},this.onStatsChange=z=>{const J=z.length?z[0]:ft.gz.sum,{reduce:ce}=this.props.options;this.updateReduceOptions({...ce,reducer:J})},this.updateBinaryOptions=z=>{const{options:J,onChange:ce}=this.props;ce({...J,mode:Fn.ie.BinaryOperation,binary:z})},this.onBinaryLeftChanged=z=>{const{binary:J}=this.props.options;this.updateBinaryOptions({...J,left:z.value})},this.onBinaryRightChanged=z=>{const{binary:J}=this.props.options;this.updateBinaryOptions({...J,right:z.value})},this.onBinaryOperationChanged=z=>{const{binary:J}=this.props.options;this.updateBinaryOptions({...J,operator:z.value})},this.state={include:W.options?.reduce?.include||[],names:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(W){this.props.input!==W.input&&this.initOptions()}initOptions(){const{options:W}=this.props,z=W?.reduce?.include||[],J={interpolate:he=>he},ce=(0,Rn.of)(this.props.input).pipe(ue.Y.ensureColumnsTransformer.operator(null,J),this.extractAllNames(),this.extractNamesAndSelected(z)).subscribe(({selected:he,names:De})=>{this.setState({names:De,selected:he},()=>ce.unsubscribe())})}extractAllNames(){return W=>W.pipe((0,jt.U)(z=>{const J=[],ce={};for(const he of z)for(const De of he.fields){if(!Yn.has(De.type))continue;const $e=(0,ge.CZ)(De,he,z);ce[$e]||(ce[$e]=!0,J.push($e))}return J}))}extractNamesAndSelected(W){return z=>z.pipe((0,jt.U)(J=>{if(!W.length)return{names:J,selected:[]};const ce=[],he=[];for(const De of J)W.includes(De)&&he.push(De),ce.push(De);return{names:ce,selected:he}}))}renderReduceRow(W){const{names:z,selected:J}=this.state;return W=(0,h.defaults)(W,{reducer:ft.gz.sum}),a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Field name"),a.createElement(Vn.Lh,{spacing:"xs",align:"flex-start",wrap:!0},z.map((ce,he)=>a.createElement(aa.B,{key:`${ce}/${he}`,onClick:()=>{this.onFieldToggle(ce)},label:ce,selected:J.indexOf(ce)>-1}))))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Calculation"),a.createElement(St.m,{allowMultiple:!1,className:"width-18",stats:[W.reducer],onChange:this.onStatsChange,defaultStat:ft.gz.sum}))))}renderBinaryOperation(W){W=(0,h.defaults)(W,{reducer:ft.gz.sum});let z=!W?.left,J=!W?.right;const ce=this.state.names.map(et=>(et===W?.left&&(z=!0),et===W?.right&&(J=!0),{label:et,value:et})),he=z?ce:[...ce,{label:W?.left,value:W?.left}],De=J?ce:[...ce,{label:W?.right,value:W?.right}],$e=ea.n.list().map(et=>({label:et.id,value:et.id}));return a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Operation")),a.createElement("div",{className:"gf-form"},a.createElement(ae.Ph,{allowCustomValue:!0,placeholder:"Field or number",options:he,className:"min-width-18 gf-form-spacing",value:W?.left,onChange:this.onBinaryLeftChanged}),a.createElement(ae.Ph,{className:"width-8 gf-form-spacing",options:$e,value:W.operator??$e[0].value,onChange:this.onBinaryOperationChanged}),a.createElement(ae.Ph,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:De,value:W?.right,onChange:this.onBinaryRightChanged})))}render(){const{options:W}=this.props,z=W.mode??Fn.ie.BinaryOperation;return a.createElement("div",null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Mode"),a.createElement(ae.Ph,{className:"width-18",options:la,value:la.find(J=>J.value===z),onChange:this.onModeChanged}))),z===Fn.ie.BinaryOperation&&this.renderBinaryOperation(W.binary),z===Fn.ie.ReduceRow&&this.renderReduceRow(W.reduce),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Alias"),a.createElement(de.I,{className:"width-18",value:W.alias??"",placeholder:(0,Fn.h)(W),onChange:this.onAliasChanged}))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(Sa.LegacyForms.Switch,{label:"Replace all fields",labelClass:"width-8",checked:!!W.replaceFields,onChange:this.onToggleReplaceFields}))))}}const Ia={id:ne.W.calculateField,editor:ia,transformation:ue.Y.calculateFieldTransformer,name:"Add field from calculation",description:"Use the row values to calculate a new field"};var ha=e(32302);const xa=[{value:ha.HO.FieldName,label:"Copy frame name to field name"},{value:ha.HO.Label,label:"Add a label with the frame name"},{value:ha.HO.Drop,label:"Ignore the frame name"}];class Wa extends a.PureComponent{constructor(W){super(W),this.onModeChanged=z=>{const{options:J,onChange:ce}=this.props,he=z.value??ha.HO.FieldName;ce({...J,frameNameMode:he})},this.onLabelChanged=z=>{const{options:J}=this.props;this.props.onChange({...J,frameNameLabel:z.target.value})}}render(){const{options:W}=this.props,z=W.frameNameMode??ha.HO.FieldName;return a.createElement("div",null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Name"),a.createElement(ae.Ph,{className:"width-18",options:xa,value:xa.find(J=>J.value===z),onChange:this.onModeChanged}))),z===ha.HO.Label&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Label"),a.createElement(de.I,{className:"width-18",value:W.frameNameLabel??"",placeholder:"frame",onChange:this.onLabelChanged}))))}}const as={id:ne.W.concatenate,editor:Wa,transformation:ue.Y.concatenateTransformer,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length."};var Xa=e(15448),Ba=e(16453),ca=e(25532);const ss={settings:{width:24,isClearable:!1}},Ya=({input:B,options:W,onChange:z})=>{const J=Ba.OL.filter(ot=>ot.value!==oe.fS.trace),ce=(0,a.useCallback)(ot=>Dt=>{const Ht=W.conversions;Ht[ot]={...Ht[ot],targetField:Dt??"",dateFormat:void 0},z({...W,conversions:Ht})},[z,W]),he=(0,a.useCallback)(ot=>Dt=>{const Ht=W.conversions;Ht[ot]={...Ht[ot],destinationType:Dt.value},z({...W,conversions:Ht})},[z,W]),De=(0,a.useCallback)(ot=>Dt=>{const Ht=W.conversions;Ht[ot]={...Ht[ot],dateFormat:Dt.currentTarget.value},z({...W,conversions:Ht})},[z,W]),$e=(0,a.useCallback)(()=>{z({...W,conversions:[...W.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[z,W]),et=(0,a.useCallback)(ot=>{const Dt=W.conversions;Dt.splice(ot,1),z({...W,conversions:Dt})},[z,W]);return a.createElement(a.Fragment,null,W.conversions.map((ot,Dt)=>a.createElement("div",{key:`${ot.targetField}-${Dt}`},a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Field"},a.createElement(Xa.b,{context:{data:B},value:ot.targetField??"",onChange:ce(Dt),item:ss})),a.createElement(Ye._,{label:"as"},a.createElement(ae.Ph,{options:J,value:ot.destinationType,placeholder:"Type",onChange:he(Dt),width:18})),ot.destinationType===oe.fS.time&&a.createElement(Ye._,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly."},a.createElement(de.I,{value:ot.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:De(Dt),width:24})),ot.destinationType===oe.fS.string&&(ot.dateFormat||(0,ca.findField)(B?.[0],ot.targetField)?.type===oe.fS.time)&&a.createElement(Ye._,{label:"Date format",tooltip:"Specify the output format."},a.createElement(de.I,{value:ot.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:De(Dt),width:24})),a.createElement(q.zx,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>et(Dt),"aria-label":"Remove convert field type transformer"})),ot.destinationType===oe.fS.enum&&Q.Oh&&a.createElement(mt.Z,null,a.createElement(Ye._,{label:"",labelWidth:6},a.createElement("div",null,"TODO... show options here (alpha panels enabled)"))))),a.createElement(q.zx,{size:"sm",icon:"plus",onClick:$e,variant:"secondary","aria-label":"Add a convert field type transformer"},"Convert field type"))},sa={id:ne.W.convertFieldType,editor:Ya,transformation:ue.Y.convertFieldTypeTransformer,name:ue.Y.convertFieldTypeTransformer.name,description:ue.Y.convertFieldTypeTransformer.description};var ja=e(79086),da=e(24799);class Ga extends a.PureComponent{constructor(W){super(W),this.onFieldToggle=z=>{const{selected:J}=this.state;J.indexOf(z)>-1?this.onChange(J.filter(ce=>ce!==z)):this.onChange([...J,z])},this.onChange=z=>{const{regex:J,isRegexValid:ce}=this.state,he={...this.props.options,include:{names:z}};J&&ce&&(he.include=he.include??{},he.include.pattern=J),this.setState({selected:z},()=>{this.props.onChange(he)})},this.onInputBlur=z=>{const{selected:J,regex:ce}=this.state;let he=!0;try{ce&&(0,ja.jO)(ce)}catch{he=!1}he?this.props.onChange({...this.props.options,include:{pattern:ce}}):this.props.onChange({...this.props.options,include:{names:J}}),this.setState({isRegexValid:he})},this.state={include:W.options.include?.names||[],regex:W.options.include?.pattern,options:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(W){this.props.input!==W.input&&this.initOptions()}initOptions(){const{input:W,options:z}=this.props,J=Array.from(z.include?.names??[]),ce=[],he={};for(const De of W)for(const $e of De.fields){const et=(0,ge.CZ)($e,De,W);let ot=he[et];ot||(ot=he[et]={name:et,count:0},ce.push(ot)),ot.count++}if(z.include?.pattern)try{const De=(0,ja.jO)(z.include.pattern);for(const $e of ce)De.test($e.name)&&J.push($e.name)}catch(De){console.error(De)}if(J.length){const De=ce.filter($e=>J.includes($e.name));this.setState({options:ce,selected:De.map($e=>$e.name),regex:z.include?.pattern})}else this.setState({options:ce,selected:ce.map(De=>De.name),regex:z.include?.pattern})}render(){const{options:W,selected:z,isRegexValid:J}=this.state;return a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Identifier"),a.createElement(Vn.Lh,{spacing:"xs",align:"flex-start",wrap:!0},a.createElement(da.g,{invalid:!J,error:J?void 0:"Invalid pattern",className:Z.css`
                margin-bottom: 0;
              `},a.createElement(de.I,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:ce=>this.setState({regex:ce.currentTarget.value}),onBlur:this.onInputBlur,width:25})),W.map((ce,he)=>{const De=`${ce.name}${ce.count>1?" ("+ce.count+")":""}`,$e=z.indexOf(ce.name)>-1;return a.createElement(aa.B,{key:`${ce.name}/${he}`,onClick:()=>{this.onFieldToggle(ce.name)},label:De,selected:$e})}))))}}const qa={id:ne.W.filterFieldsByName,editor:Ga,transformation:ue.Y.filterFieldsByNameTransformer,name:"Filter by name",description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive."};var Ka=e(57227);class ts extends a.PureComponent{constructor(W){super(W),this.onFieldToggle=z=>{const{selected:J}=this.state;J.indexOf(z)>-1?this.onChange(J.filter(ce=>ce!==z)):this.onChange([...J,z])},this.onChange=z=>{this.setState({selected:z}),this.props.onChange({...this.props.options,include:z.join("|")})},this.state={include:W.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(W){this.props.input!==W.input&&this.initOptions()}initOptions(){const{input:W,options:z}=this.props,J=z.include?z.include.split("|"):[],ce=[],he={};for(const De of W)if(De.refId){let $e=he[De.refId];$e||($e=he[De.refId]={refId:De.refId,count:0},ce.push($e)),$e.count++}if(J.length){const De=[],$e=[];for(const et of ce)J.includes(et.refId)&&$e.push(et),De.push(et);this.setState({options:De,selected:$e.map(et=>et.refId)})}else this.setState({options:ce,selected:[]})}render(){const{options:W,selected:z}=this.state,{input:J}=this.props;return a.createElement(a.Fragment,null,J.length<=1&&a.createElement("div",null,a.createElement(Ka.S,null,"Filter data by query expects multiple queries in the input.")),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Series refId"),a.createElement(Vn.Lh,{spacing:"xs",align:"flex-start",wrap:!0},W.map((ce,he)=>{const De=`${ce.refId}${ce.count>1?" ("+ce.count+")":""}`,$e=z.indexOf(ce.refId)>-1;return a.createElement(aa.B,{key:`${ce.refId}/${he}`,onClick:()=>{this.onFieldToggle(ce.refId)},label:De,selected:$e})})))))}}const va={id:ne.W.filterByRefId,editor:ts,transformation:ue.Y.filterFramesByRefIdTransformer,name:"Filter data by query",description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel."};var ns=e(61171);function xs(B){return(0,a.useMemo)(()=>Array.isArray(B)?Object.keys(B.reduce((W,z)=>!z||!Array.isArray(z.fields)?W:z.fields.reduce((J,ce)=>{const he=(0,ge.CZ)(ce,z,B);return J[he]=!0,J},W),{})):[],[B])}function hs(B){const W=new Set;for(const z of B)for(const J of z.fields)if(J.labels)for(const ce of Object.keys(J.labels))W.add(ce);return W}const rr=({input:B,options:W,onChange:z})=>{const J=xs(B),ce=(0,a.useCallback)(he=>De=>{z({...W,fields:{...W.fields,[he]:De}})},[z]);return a.createElement("div",null,J.map(he=>a.createElement(ur,{onConfigChange:ce(he),fieldName:he,config:W.fields[he],key:he})))},Is=[{label:"Group by",value:ns.x.groupBy},{label:"Calculate",value:ns.x.aggregate}],ur=({fieldName:B,config:W,onConfigChange:z})=>{const J=mr(),ce=(0,a.useCallback)(he=>{z({aggregations:W?.aggregations??[],operation:he?.value??null})},[W,z]);return a.createElement("div",{className:(0,Z.cx)("gf-form-inline",J.row)},a.createElement("div",{className:(0,Z.cx)("gf-form",J.fieldName)},a.createElement("div",{className:(0,Z.cx)("gf-form-label",J.rowSpacing)},B)),a.createElement("div",{className:(0,Z.cx)("gf-form",J.cell)},a.createElement("div",{className:(0,Z.cx)("gf-form-spacing",J.rowSpacing)},a.createElement(ae.Ph,{className:"width-12",options:Is,value:W?.operation,placeholder:"Ignored",onChange:ce,isClearable:!0}))),W?.operation===ns.x.aggregate&&a.createElement("div",{className:(0,Z.cx)("gf-form","gf-form--grow",J.calculations)},a.createElement(St.m,{className:(0,Z.cx)("flex-grow-1",J.rowSpacing),placeholder:"Select Stats",allowMultiple:!0,stats:W.aggregations,onChange:he=>{z({...W,aggregations:he})}})))},mr=(0,se.B)(()=>{const B=Z.css`
    display: table-cell;
  `;return{row:Z.css`
      display: table-row;
    `,cell:B,rowSpacing:Z.css`
      margin-bottom: 4px;
    `,fieldName:Z.css`
      ${B}
      min-width: 250px;
      white-space: nowrap;
    `,calculations:Z.css`
      ${B}
      width: 99%;
    `}}),os={id:ne.W.groupBy,editor:rr,transformation:ue.Y.groupByTransformer,name:ue.Y.groupByTransformer.name,description:ue.Y.groupByTransformer.description};var Vs=e(90834);const is=({input:B,options:W,onChange:z})=>{const J=xs(B).map(ot=>({label:ot,value:ot})),ce=(0,a.useCallback)(ot=>{z({...W,columnField:ot?.value})},[z,W]),he=(0,a.useCallback)(ot=>{z({...W,rowField:ot?.value})},[z,W]),De=(0,a.useCallback)(ot=>{z({...W,valueField:ot?.value})},[z,W]),$e=[{label:"Null",value:Vs.U.Null,description:"Null value"},{label:"True",value:Vs.U.True,description:"Boolean true value"},{label:"False",value:Vs.U.False,description:"Boolean false value"},{label:"Empty",value:Vs.U.Empty,description:"Empty string"}],et=(0,a.useCallback)(ot=>{z({...W,emptyValue:ot?.value})},[z,W]);return a.createElement(a.Fragment,null,a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Column",labelWidth:8},a.createElement(ae.Ph,{options:J,value:W.columnField,onChange:ce,isClearable:!0})),a.createElement(Ye._,{label:"Row",labelWidth:8},a.createElement(ae.Ph,{options:J,value:W.rowField,onChange:he,isClearable:!0})),a.createElement(Ye._,{label:"Cell Value",labelWidth:10},a.createElement(ae.Ph,{options:J,value:W.valueField,onChange:De,isClearable:!0})),a.createElement(Ye._,{label:"Empty Value"},a.createElement(ae.Ph,{options:$e,value:W.emptyValue,onChange:et,isClearable:!0}))))},zs={id:ne.W.groupingToMatrix,editor:is,transformation:ue.Y.groupingToMatrixTransformer,name:"Grouping to matrix",description:"Takes a three fields combination and produces a Matrix"};var ls=e(75133),ws=e(8944),Ws=e(45458);const fr=({input:B,options:W,onChange:z})=>{const ce=(0,a.useCallback)($e=>{z({...W,bucketSize:$e})},[z,W]),he=(0,a.useCallback)($e=>{z({...W,bucketOffset:$e})},[z,W]),De=(0,a.useCallback)(()=>{z({...W,combine:!W.combine})},[z,W]);return a.createElement("div",null,a.createElement(mt.Z,null,a.createElement(Ye._,{labelWidth:18,label:ls.py.bucketSize.name,tooltip:ls.py.bucketSize.description},a.createElement(Ws.Y,{value:W.bucketSize,placeholder:"auto",onChange:ce,min:0}))),a.createElement(mt.Z,null,a.createElement(Ye._,{labelWidth:18,label:ls.py.bucketOffset.name,tooltip:ls.py.bucketOffset.description},a.createElement(Ws.Y,{value:W.bucketOffset,placeholder:"none",onChange:he,min:0}))),a.createElement(mt.Z,null,a.createElement(Ye._,{labelWidth:18,label:ls.py.combine.name,tooltip:ls.py.combine.description},a.createElement(ws.x,{value:W.combine??!1,onChange:De}))))},Js={id:ne.W.histogram,editor:fr,transformation:ue.Y.histogramTransformer,name:ue.Y.histogramTransformer.name,description:ue.Y.histogramTransformer.description};var Xs=e(13221);const Hs=[{value:Xs.c.outer,label:"OUTER",description:"Keep all rows from any table with a value"},{value:Xs.c.inner,label:"INNER",description:"Drop rows that do not match a value in all tables"}];function or({input:B,options:W,onChange:z}){const J=xs(B).map(De=>({label:De,value:De})),ce=(0,a.useCallback)(De=>{z({...W,byField:De?.value})},[z,W]),he=(0,a.useCallback)(De=>{z({...W,mode:De?.value})},[z,W]);return a.createElement(a.Fragment,null,a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Mode",labelWidth:8,grow:!0},a.createElement(ae.Ph,{options:Hs,value:W.mode??Xs.c.outer,onChange:he}))),a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Field",labelWidth:8,grow:!0},a.createElement(ae.Ph,{options:J,value:W.byField,onChange:ce,placeholder:"time",isClearable:!0}))))}const gr={id:ne.W.joinByField,aliasIds:[ne.W.seriesToColumns],editor:or,transformation:ue.Y.joinByFieldTransformer,name:ue.Y.joinByFieldTransformer.name,description:ue.Y.joinByFieldTransformer.description};var ks=e(31568),pr=e(26418);const hr=[{value:ks.k.Columns,label:"Columns"},{value:ks.k.Rows,label:"Rows"}],qs=({input:B,options:W,onChange:z})=>{const{labelNames:ce,selected:he}=(0,a.useMemo)(()=>{let et=[],ot={};for(const Ht of B)for(const Jt of Ht.fields)if(Jt.labels)for(const nn of Object.keys(Jt.labels))ot[nn]||(et.push({value:nn,label:nn}),ot[nn]=!0);const Dt=new Set(W.keepLabels?.length?W.keepLabels:Object.keys(ot));return{labelNames:et,selected:Dt}},[W.keepLabels,B]),De=et=>{z({...W,valueLabel:et?.value})},$e=et=>{if(he.has(et)?he.delete(et):he.add(et),he.size===ce.length||!he.size){const{keepLabels:ot,...Dt}=W;z(Dt)}else z({...W,keepLabels:[...he]})};return a.createElement("div",null,a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Mode",labelWidth:20},a.createElement(me.S,{options:hr,value:W.mode??ks.k.Columns,onChange:et=>z({...W,mode:et})}))),a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Labels",labelWidth:20},a.createElement(pr.Stack,{gap:1,wrap:!0},ce.map((et,ot)=>{const Dt=et.label;return a.createElement(aa.B,{key:`${Dt}/${ot}`,onClick:()=>$e(Dt),label:Dt,selected:he.has(Dt)})})))),W.mode!==ks.k.Rows&&a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name"},a.createElement(ae.Ph,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:ce,value:W?.valueLabel,onChange:De,className:"min-width-16"}))))},vr={id:ne.W.labelsToFields,editor:qs,transformation:ue.Y.labelsToFieldsTransformer,name:"Labels to fields",description:`Groups series by time and return labels or tags as fields.
                Useful for showing time series with labels in a table where each label key becomes a separate column`},us=({options:B,onChange:W})=>{const z=(0,a.useCallback)(J=>{W({...B,limitField:Number(J.currentTarget.value)})},[W,B]);return a.createElement(a.Fragment,null,a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Limit",labelWidth:8},a.createElement(de.I,{placeholder:"Limit count",pattern:"[0-9]*",value:B.limitField,onChange:z,width:25}))))},_s={id:ne.W.limit,editor:us,transformation:ue.Y.limitTransformer,name:"Limit",description:"Limit the number of items displayed."},Er=({input:B,options:W,onChange:z})=>B.length<=1?a.createElement(Ka.S,null,"Merge has no effect when applied on a single frame."):null,er={id:ne.W.merge,editor:Er,transformation:ue.Y.mergeTransformer,name:"Merge",description:`Merge many series/tables and return a single table where mergeable values will be combined into the same row.
                Useful for showing multiple series, tables or a combination of both visualized in a table.`};var ms=e(36826),Gt=e(74700),He=e(39904),it=e(8180);const xt=({options:B,input:W,onChange:z})=>{const{indexByName:J,excludeByName:ce,renameByName:he}=B,De=xs(W),$e=(0,a.useMemo)(()=>vn(De,J),[De,J]),et=(0,a.useCallback)((Ht,Jt)=>{z({...B,excludeByName:{...ce,[Ht]:Jt}})},[z,B,ce]),ot=(0,a.useCallback)(Ht=>{if(!Ht||!Ht.destination)return;const Jt=Ht.source.index,nn=Ht.destination.index;Jt!==nn&&z({...B,indexByName:en(De,Jt,nn)})},[z,B,De]),Dt=(0,a.useCallback)((Ht,Jt)=>{z({...B,renameByName:{...B.renameByName,[Ht]:Jt}})},[z,B]);return W.length>1?a.createElement(Ka.S,null,"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."):a.createElement(ms.Z5,{onDragEnd:ot},a.createElement(ms.bK,{droppableId:"sortable-fields-transformer",direction:"vertical"},Ht=>a.createElement("div",{ref:Ht.innerRef,...Ht.droppableProps},$e.map((Jt,nn)=>a.createElement(Vt,{fieldName:Jt,renamedFieldName:he[Jt],index:nn,onToggleVisibility:et,onRenameField:Dt,visible:!ce[Jt],key:Jt})),Ht.placeholder)))};xt.displayName="OrganizeFieldsTransformerEditor";const Vt=({fieldName:B,renamedFieldName:W,index:z,visible:J,onToggleVisibility:ce,onRenameField:he})=>{const De=(0,Ge.wW)(sn);return a.createElement(ms._l,{draggableId:B,index:z},$e=>a.createElement("div",{className:"gf-form-inline",ref:$e.innerRef,...$e.draggableProps},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label gf-form-label--justify-left width-30"},a.createElement(He.J,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:De.draggable,...$e.dragHandleProps}),a.createElement(it.h,{className:De.toggle,size:"md",name:J?"eye":"eye-slash",onClick:()=>ce(B,J)}),a.createElement("span",{className:De.name,title:B},B)),a.createElement(de.I,{className:"flex-grow-1",defaultValue:W||"",placeholder:`Rename ${B}`,onBlur:et=>he(B,et.currentTarget.value)}))))};Vt.displayName="DraggableFieldName";const sn=B=>({toggle:Z.css`
    margin: 0 8px;
    color: ${B.colors.text.secondary};
  `,draggable:Z.css`
    opacity: 0.4;
    &:hover {
      color: ${B.colors.text.maxContrast};
    }
  `,name:Z.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${B.typography.bodySmall.fontSize};
    font-weight: ${B.typography.fontWeightMedium};
  `}),en=(B,W,z)=>{const J=Array.from(B),[ce]=J.splice(W,1);return J.splice(z,0,ce),J.reduce((he,De,$e)=>(he[De]=$e,he),{})},vn=(B,W={})=>{if(!W||Object.keys(W).length===0)return B;const z=(0,Gt.$)(W);return B.sort(z)},On={id:ne.W.organize,editor:xt,transformation:ue.Y.organizeFieldsTransformer,name:"Organize fields",description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data."};var yn=e(27742),bn=e(68183);const Xn=({options:B,onChange:W})=>{const z=[{label:"Series to rows",value:yn.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:yn.AL.ReduceFields,description:"Collapse each field into a single value"}],J=(0,a.useCallback)(De=>{const $e=De.value;W({...B,mode:$e,includeTimeField:$e===yn.AL.ReduceFields?!!B.includeTimeField:!1})},[W,B]),ce=(0,a.useCallback)(()=>{W({...B,includeTimeField:!B.includeTimeField})},[W,B]),he=(0,a.useCallback)(()=>{W({...B,labelsToFields:!B.labelsToFields})},[W,B]);return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8","aria-label":bn.wl.components.Transforms.Reduce.modeLabel},"Mode"),a.createElement(ae.Ph,{options:z,value:z.find(De=>De.value===B.mode)||z[0],onChange:J,className:"flex-grow-1"}))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8","aria-label":bn.wl.components.Transforms.Reduce.calculationsLabel},"Calculations"),a.createElement(St.m,{className:"flex-grow-1",placeholder:"Choose Stat",allowMultiple:!0,stats:B.reducers||[],onChange:De=>{W({...B,reducers:De})}}))),B.mode===yn.AL.ReduceFields&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(Sa.LegacyForms.Switch,{label:"Include time",labelClass:"width-8",checked:!!B.includeTimeField,onChange:ce}))),B.mode!==yn.AL.ReduceFields&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(Sa.LegacyForms.Switch,{label:"Labels to fields",labelClass:"width-8",checked:!!B.labelsToFields,onChange:he}))))},Ct={id:ne.W.reduce,editor:Xn,transformation:ue.Y.reduceTransformer,name:ue.Y.reduceTransformer.name,description:ue.Y.reduceTransformer.description};class Re extends a.PureComponent{constructor(W){super(W),this.handleRegexChange=z=>{const J=z.currentTarget.value;let ce=!0;if(J)try{J&&(0,ja.jO)(J)}catch{ce=!1}this.setState(he=>({...he,regex:J,isRegexValid:ce}))},this.handleRenameChange=z=>{const J=z.currentTarget.value;this.setState(ce=>({...ce,renamePattern:J}))},this.handleRegexBlur=z=>{const J=z.currentTarget.value;let ce=!0;try{J&&(0,ja.jO)(J)}catch{ce=!1}this.setState({isRegexValid:ce},()=>{ce&&this.props.onChange({...this.props.options,regex:J})})},this.handleRenameBlur=z=>{const J=z.currentTarget.value;this.setState({renamePattern:J},()=>this.props.onChange({...this.props.options,renamePattern:J}))},this.state={regex:W.options.regex,renamePattern:W.options.renamePattern,isRegexValid:!0}}render(){const{regex:W,renamePattern:z,isRegexValid:J}=this.state;return a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Match"),a.createElement(da.g,{invalid:!J,error:J?void 0:"Invalid pattern",className:Z.css`
                margin-bottom: 0;
              `},a.createElement(de.I,{placeholder:"Regular expression pattern",value:W||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Replace"),a.createElement(da.g,{className:Z.css`
                margin-bottom: 0;
              `},a.createElement(de.I,{placeholder:"Replacement pattern",value:z||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})))))}}const Te={id:ne.W.renameByRegex,editor:Re,transformation:ue.Y.renameByRegexTransformer,name:"Rename by regex",description:"Renames part of the query result by using regular expression with placeholders."},nt=({input:B,options:W,onChange:z})=>null,Xe={id:ne.W.seriesToRows,editor:nt,transformation:ue.Y.seriesToRowsTransformer,name:"Series to rows",description:`Merge many series and return a single series with time, metric and value as columns.
                Useful for showing multiple time series visualized in a table.`},Nt=({input:B,options:W,onChange:z})=>{const J=xs(B).map(De=>({label:De,value:De})),ce=(0,a.useCallback)((De,$e)=>{z({...W,sort:[$e]})},[z,W]),he=W.sort?.length?W.sort:[{}];return a.createElement("div",null,he.map((De,$e)=>a.createElement(mt.Z,{key:`${De.field}/${$e}`},a.createElement(Ye._,{label:"Field",labelWidth:10,grow:!0},a.createElement(ae.Ph,{options:J,value:De.field,placeholder:"Select field",onChange:et=>{ce($e,{...De,field:et.value})}})),a.createElement(Ye._,{label:"Reverse"},a.createElement(ws.x,{value:!!De.desc,onChange:()=>{ce($e,{...De,desc:!De.desc})}})))))},zt={id:ne.W.sortBy,editor:Nt,transformation:ue.Y.sortByTransformer,name:ue.Y.sortByTransformer.name,description:ue.Y.sortByTransformer.description};function wt({options:B,onChange:W}){const[z,J]=(0,a.useState)(B),ce=on(),he=qt(),De=()=>{z.push({path:""}),J([...z]),ot()},$e=Dt=>{z&&(z.splice(Dt,1),J([...z]),ot())},et=(Dt,Ht,Jt)=>{z&&(Jt==="alias"?z[Ht].alias=Dt.currentTarget.value??"":z[Ht].path=Dt.currentTarget.value??"",J([...z]))},ot=()=>{W(z)};return a.createElement("ol",{className:(0,Z.cx)(he.list)},z&&z.map((Dt,Ht)=>a.createElement("li",{key:Ht},a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Field",tooltip:ce.field,grow:!0},a.createElement(de.I,{onBlur:ot,onChange:Jt=>et(Jt,Ht,"path"),value:Dt.path,placeholder:'A valid json path, e.g. "object.value1" or "object.value2[0]"'})),a.createElement(Ye._,{label:"Alias",tooltip:ce.alias},a.createElement(de.I,{width:12,value:Dt.alias,onBlur:ot,onChange:Jt=>et(Jt,Ht,"alias")})),a.createElement(Ye._,{className:(0,Z.cx)(he.removeIcon)},a.createElement(it.h,{onClick:()=>$e(Ht),name:"trash-alt"}))))),a.createElement(Ye._,null,a.createElement(q.zx,{icon:"plus",onClick:()=>De(),variant:"secondary"},"Add path")))}const on=()=>{const B=[{path:"object",description:"=> extract fields from object"},{path:"object.value1",description:"=> extract value1"},{path:"object.value2",description:"=> extract value2"},{path:"object.value2[0]",description:"=> extract value2 first element"},{path:"object.value2[1]",description:"=> extract value2 second element"}];return{field:a.createElement("div",null,"A valid path of an json object.",a.createElement("div",null,a.createElement("strong",null,"JSON Value:")),a.createElement("pre",null,a.createElement("code",null,["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`))),a.createElement("strong",null,"Valid Paths:"),B.map((W,z)=>a.createElement("p",{key:z},a.createElement("code",null,W.path),a.createElement("i",null,W.description)))),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function qt(){return{list:Z.css`
      margin-left: 20px;
    `,removeIcon:Z.css`
      margin: 0 0 0 4px;
      align-items: center;
    `}}var un=e(83881),tn=(B=>(B.JSON="json",B.KeyValues="kvp",B.Auto="auto",B))(tn||{});const yt={id:tn.JSON,name:"JSON",description:"Parse JSON string",parse:B=>JSON.parse(B)};function jn(B){const W=[];let z="",J="";const ce={};for(let he=0;he<B.length;he++){let De=B[he];De===z&&(z="",De=B[++he]);const $e=De==="\\";if($e&&(De=B[++he]),$e||z.length){W.push(De);continue}switch((De==='"'||De==="'")&&(z=De),De){case":":case"=":W.length&&(J&&(ce[J]=""),J=W.join(""),W.length=0);break;case'"':case"'":case" ":case`
`:case"	":case"\r":case`
`:W.length&&J===""&&(ce[W.join("")]="",W.length=0);case",":case";":case"&":case"{":case"}":if(W.length){const et=W.join("");J.length?(ce[J]=et,J=""):J=et,W.length=0}break;default:W.push(De),he===B.length-1&&J===""&&W.length&&(ce[W.join("")]="",W.length=0)}}return J.length&&(ce[J]=W.join("")),ce}const ra={id:tn.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:jn},Da=[yt,ra],Ea={id:tn.Auto,name:"Auto",description:"parse new fields automatically",parse:B=>{for(const W of Da)try{const z=W.parse(B);if(z!=null)return z}catch{}}},ba=new pe.B(()=>[...Da,Ea]),$n={id:ne.W.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:(B,W)=>z=>z.pipe((0,jt.U)(J=>$n.transformer(B,W)(J))),transformer:B=>W=>W.map(z=>zn(z,B))};function zn(B,W){if(!W.source)return B;const z=(0,ca.findField)(B,W.source);if(!z)return B;const J=ba.getIfExists(W.format??tn.Auto);if(!J)throw new Error("unkonwn extractor");const ce=B.length,he=[],De=new Map;for(let et=0;et<ce;et++){let ot=z.values[et];if((0,h.isString)(ot))try{ot=J.parse(ot)}catch{ot={}}if(W.format===tn.JSON&&W.jsonPaths&&W.jsonPaths?.length>0){const Dt={},Ht=W.jsonPaths.filter(Jt=>Jt.path);Ht.length>0&&(Ht.forEach(Jt=>{const nn=Jt.alias&&Jt.alias.length>0?Jt.alias:Jt.path;Dt[nn]=(0,h.get)(ot,Jt.path)??"Not Found"}),ot=Dt)}for(const[Dt,Ht]of Object.entries(ot)){let Jt=De.get(Dt);Jt==null&&(Jt=new Array(ce),De.set(Dt,Jt),he.push(Dt)),Jt[et]=Ht}}const $e=he.map(et=>{const ot=De.get(et);return{name:et,values:ot,type:ot?(0,un.DP)(ot.find(Dt=>Dt!=null)):oe.fS.other,config:{}}});if(W.keepTime){const et=(0,ca.findField)(B,"Time")||(0,ca.findField)(B,"time");et&&$e.unshift(et)}return W.replace||$e.unshift(...B.fields),{...B,fields:$e}}const ma={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},fa=({input:B,options:W,onChange:z})=>{const J=ot=>{z({...W,source:ot})},ce=ot=>{z({...W,format:ot?.value})},he=ot=>{z({...W,jsonPaths:ot})},De=()=>{W.replace&&(W.keepTime=!1),z({...W,replace:!W.replace})},$e=()=>{z({...W,keepTime:!W.keepTime})},et=ba.selectOptions(W.format?[W.format]:void 0);return a.createElement("div",null,a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Source",labelWidth:16},a.createElement(Xa.b,{context:{data:B},value:W.source??"",onChange:J,item:ma}))),a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Format",labelWidth:16},a.createElement(ae.Ph,{value:et.current[0],options:et.options,onChange:ce,width:24,placeholder:"Auto"}))),W.format==="json"&&a.createElement(wt,{options:W.jsonPaths??[],onChange:he}),a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Replace all fields",labelWidth:16},a.createElement(ws.x,{value:W.replace??!1,onChange:De}))),W.replace&&a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Keep time",labelWidth:16},a.createElement(ws.x,{value:W.keepTime??!1,onChange:$e}))))},kn={id:ne.W.extractFields,editor:fa,transformation:$n,name:"Extract fields",description:"Parse fields from content (JSON, labels, etc)"};var ga=e(45253),Fa=e(15670);const bs={id:ne.W.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels",defaultOptions:{},operator:(B,W)=>z=>z.pipe((0,jt.U)(J=>bs.transformer(B,W)(J))),transformer:B=>W=>!W||!W.length?W:[ir(B,W)]};function ir(B,W){if(!B.value?.length)return Gs("No value labele configured");const z=hs(W);if(z.size<1)return Gs("No labels in result");if(!z.has(B.value))return Gs("Value label not found");let J=B.join?.length?B.join:Array.from(z);J=J.filter(Ht=>Ht!==B.value);const ce=new Set,he=new Map,De={};for(const Ht of W)for(const Jt of Ht.fields)if(Jt.labels&&Jt.type!==oe.fS.time){const nn=J.map(Ja=>Jt.labels[Ja]),mn=nn.join(",");let Pn=he.get(mn);Pn||(Pn={keys:nn,values:{}},he.set(mn,Pn));const Wn=Jt.labels[B.value],Za=Jt.values,La=Pn.values[Wn];La?Pn.values[Wn]=La.concat(Za):Pn.values[Wn]=Za,De[Wn]||(De[Wn]=Jt),ce.add(Wn)}const $e=Array.from(ce),et=J.map(()=>[]),ot=$e.map(()=>[]);for(const Ht of he.values()){let Jt=-1,nn=!1;for(;!nn;){Jt++,nn=!0;for(let mn=0;mn<J.length;mn++)et[mn].push(Ht.keys[mn]);for(let mn=0;mn<$e.length;mn++){const Pn=$e[mn],Wn=Ht.values[Pn]??[];ot[mn].push(Wn[Jt]),Wn.length>Jt+1&&(nn=!1)}}}const Dt={fields:[],length:ot[0].length};for(let Ht=0;Ht<J.length;Ht++)Dt.fields.push({name:J[Ht],config:{},type:oe.fS.string,values:et[Ht]});for(let Ht=0;Ht<$e.length;Ht++){const Jt=De[$e[Ht]];Dt.fields.push({name:$e[Ht],config:{},type:Jt.type??oe.fS.number,values:ot[Ht]})}return Dt}function Gs(B){return{meta:{notices:[{severity:"error",text:B}]},fields:[{name:"Error",type:oe.fS.string,config:{},values:[B]}],length:0}}function Sr({input:B,options:W,onChange:z}){const J=(0,a.useMemo)(()=>{let et;const ot=hs(B),Dt=Array.from(ot).map(Wn=>({label:Wn,value:Wn}));let Ht=Dt.find(Wn=>Wn.value===W.value);!Ht&&W.value&&(Ht={label:`${W.value} (not found)`,value:W.value},Dt.push(Ht)),B.length?ot.size===0&&(et=a.createElement(ga.b,{title:"No labels found"},"The input does not contain any labels")):et=a.createElement(ga.b,{title:"No input found"},"No input (or labels) found"),ot.delete(W.value);const Jt=Array.from(ot).map(Wn=>({label:Wn,value:Wn}));let nn=Jt;const mn=Boolean(W.join?.length);let Pn="Join";return mn?nn=Jt.filter(Wn=>!W.join.includes(Wn.value)):Pn=Jt.map(Wn=>Wn.value).join(", "),{warn:et,valueOptions:Dt,valueOption:Ht,joinOptions:Jt,addOptions:nn,addText:Pn,hasJoin:mn,key:Date.now()}},[W,B]),ce=(et,ot)=>{if(!W.join)return;const Dt=W.join.slice();if(ot)Dt[et]=ot;else if(Dt.splice(et,1),!Dt.length){z({...W,join:void 0});return}const Ht=new Set(Dt);W.value&&Ht.delete(W.value),z({...W,join:Array.from(Ht)})},he=et=>{const ot=et?.value;if(!ot)return;const Dt=W.join?W.join.slice():[];Dt.push(ot),z({...W,join:Dt})},De=10,$e="No labels found";return a.createElement("div",null,J.warn,a.createElement(mt.Z,null,a.createElement(Ye._,{error:"required",invalid:!Boolean(W.value?.length),label:"Value",labelWidth:De,tooltip:"Select the label indicating the values name"},a.createElement(ae.Ph,{options:J.valueOptions,value:J.valueOption,onChange:et=>z({...W,value:et.value}),noOptionsMessage:$e}))),J.hasJoin?W.join.map((et,ot)=>a.createElement(mt.Z,{key:et+ot},a.createElement(Ye._,{label:"Join",labelWidth:De,error:"Unable to join by the value label",invalid:et===W.value},a.createElement(Vn.Lh,null,a.createElement(ae.Ph,{options:J.joinOptions,value:J.joinOptions.find(Dt=>Dt.value===et),isClearable:!0,onChange:Dt=>ce(ot,Dt?.value),noOptionsMessage:$e}),Boolean(J.addOptions.length&&ot===W.join.length-1)&&a.createElement(Fa.b,{icon:"plus",label:"",options:J.addOptions,onChange:he,variant:"secondary"}))))):a.createElement(a.Fragment,null,Boolean(J.addOptions.length)&&a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Join",labelWidth:De},a.createElement(ae.Ph,{options:J.addOptions,placeholder:J.addText,onChange:he,noOptionsMessage:$e})))))}const Oa={id:bs.id,editor:Sr,transformation:bs,name:bs.name,description:bs.description,state:Pt.BV.beta};var Rr=e(74311),Es=e(39859),ys=e(49372),Ca=e(73063);const fs={id:ne.W.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:B=>W=>W.pipe((0,Es.z)(z=>(0,ys.D)(Ms(z,B))))};async function Ms(B,W){const z=G.Ls.get(le.mi.byName).get(W?.lookupField),J=await(0,Ca.so)(W?.gazetteer??Ca.LI);return J.frame?Vr(B,J,z):Promise.reject("missing frame in gazetteer")}function Vr(B,W,z){const J=W.frame()?.fields;return J?B.map(ce=>{const he=ce.length,De=[];for(const $e of ce.fields)if(De.push($e),z($e,ce,B)){const et=$e.values,ot=[];for(const Dt of J){const Ht=new Array(he);ot.push(Ht),De.push({...Dt,values:Ht})}for(let Dt=0;Dt<ot.length;Dt++){const Ht=W.find(et[Dt]);if(Ht?.index!=null)for(let Jt=0;Jt<J.length;Jt++)ot[Jt][Dt]=J[Jt].values[Ht.index]}}return{...ce,fields:De}}):B}const Ss={settings:{width:30,filter:B=>B.type===oe.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},Rs={settings:{}},jr=({input:B,options:W,onChange:z})=>{const J=(0,a.useCallback)(he=>{z({...W,lookupField:he})},[z,W]),ce=(0,a.useCallback)(he=>{z({...W,gazetteer:he})},[z,W]);return a.createElement("div",null,a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Field",labelWidth:12},a.createElement(Xa.b,{context:{data:B},value:W?.lookupField??"",onChange:J,item:Ss}))),a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Lookup",labelWidth:12},a.createElement(Rr.Q,{value:W?.gazetteer??"",context:{data:B},item:Rs,onChange:ce}))))},fo={id:ne.W.fieldLookup,editor:jr,transformation:fs,name:"Field lookup",description:"Use a field value to lookup additional fields from an external source.  This currently supports spatial data, but will eventually support more formats",state:Pt.BV.alpha};var Ys=e(80760),Fs=e(98294),yi=e(43137);const Qr=(B,W,z=[])=>(W===0?z.push(B):B.forEach(J=>{Qr(J,W-1,z)}),z);function lr(B){const W=B[0].length,z=B.length,J=new Map;for(let ce=0;ce<W;ce++){let he=J;for(let De=0;De<z;De++){let $e=B[De][ce],et=he.get($e);et==null&&(et=De===z-1?[]:new Map,he.set($e,et)),he=et}he.push(ce)}return Qr(J,z)}const ao={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function Zr(B,W,z){return W.map((J,ce)=>B.withNames?`${J}${B.separator1}${z[ce]}`:z[ce]).join(B.separator2)}function so(B,W){const z={};return B.forEach((J,ce)=>{z[J]=String(W[ce])}),z}const ro={id:ne.W.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{},operator:(B,W)=>z=>z.pipe((0,jt.U)(J=>ro.transformer(B,W)(J))),transformer:(B,W)=>{const z=(0,Fs.f)({names:B.fields});if(!z)return yi.d.transformer({},W);const J=(0,G.sq)(z);return ce=>ce.length?Pi(ce[0],J,B):ce}};function Pi(B,W,z){const J=B.fields.filter($e=>W($e,B,[B])),ce=J.map($e=>$e.values),he=J.map($e=>$e.name),De={...ao,...z?.naming};return lr(ce).map($e=>{let et=B.name,ot={};if(De.asLabels)ot=so(he,J.map((Ht,Jt)=>ce[Jt][$e[0]]));else{let Ht=Zr(De,he,J.map((Jt,nn)=>ce[nn][$e[0]]));De?.append&&B.name&&(Ht=`${B.name} ${Ht}`),et=Ht}let Dt=B.fields;if(!z?.keepFields){const Ht=new Set(he);Dt=B.fields.filter(Jt=>!Ht.has(Jt.name))}return{name:et,meta:B.meta,length:$e.length,fields:Dt.map(Ht=>{const Jt=Ht.values,nn=Array($e.length);for(let mn=0;mn<$e.length;mn++)nn[mn]=Jt[$e[mn]];return{name:Ht.name,type:Ht.type,config:Ht.config,labels:{...Ht.labels,...ot},values:nn}})}})}function Td({input:B,options:W,onChange:z}){const J=(0,Ys.IX)(B),ce=(0,Ys.nw)(J),he=(0,a.useMemo)(()=>{const ot=new Set(W.fields);return ot.size<1?ce:ce.filter(Dt=>!ot.has(Dt.value))},[ce,W]),De=(0,a.useCallback)(ot=>{if(!ot.value)return;const Dt=new Set(W.fields);Dt.add(ot.value),z({...W,fields:[...Dt]})},[z,W]),$e=(0,a.useCallback)(ot=>{if(!ot)return;const Dt=new Set(W.fields);Dt.delete(ot),z({...W,fields:[...Dt]})},[z,W]);if(B.length>1)return a.createElement(Ka.S,null,"Partition by values only works with a single frame.");const et=[...new Set(W.fields)];return a.createElement("div",null,a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Field",labelWidth:10,grow:!0},a.createElement(Vn.Lh,null,et.map(ot=>a.createElement(q.zx,{key:ot,icon:"times",variant:"secondary",size:"md",onClick:()=>$e(ot)},ot)),he.length&&a.createElement(Fa.b,{variant:"secondary",size:"md",options:he,onChange:De,label:"Select field",icon:"plus"})))))}const Ci={id:ne.W.partitionByValues,editor:Td,transformation:ro,name:ro.name,description:ro.description,state:Pt.BV.alpha};var Jr=e(39393),Cl=e(53678),Od=e(17587),oo=(B=>(B.TimeSeriesWide="wide",B.TimeSeriesLong="long",B.TimeSeriesMulti="multi",B.TimeSeriesMany="many",B))(oo||{});function Id(B){if(!Array.isArray(B)||B.length===0)return B;const W=[];for(const z of Dl(B)){const J=z.fields[0];if(!J||J.type!==oe.fS.time)continue;const ce=[],he=[];for(const De of z.fields)switch(De.type){case oe.fS.number:case oe.fS.boolean:ce.push(De);break;case oe.fS.string:he.push(De);break}for(const De of ce)if(he.length){const $e=new Map;for(let et=0;et<z.length;et++){const ot=J.values[et],Dt=De.values[et];if(Dt===void 0||ot==null)continue;const Ht=he.map(nn=>nn.values[et]).join("/");let Jt=$e.get(Ht);if(!Jt){Jt={key:Ht,time:[],value:[],labels:{}};for(const nn of he)Jt.labels[nn.name]=nn.values[et];$e.set(Ht,Jt)}Jt.time.push(ot),Jt.value.push(Dt)}for(const et of $e.values())W.push({name:z.name,refId:z.refId,meta:{...z.meta,type:Jr.P.TimeSeriesMulti},fields:[{...J,values:et.time},{...De,values:et.value,labels:et.labels}],length:et.time.length})}else W.push({name:z.name,refId:z.refId,meta:{...z.meta,type:Jr.P.TimeSeriesMulti},fields:[J,De],length:z.length})}return W}function Dl(B){if(!Array.isArray(B)||B.length===0)return B;const W=[];for(const z of B){let J;const ce=[],he={},De={},$e={},et={};for(let mn=0;mn<z.fields.length;mn++){const Pn=z.fields[mn];switch(Pn.type){case oe.fS.string:case oe.fS.boolean:Pn.name in et||(et[Pn.name]=mn,De[Pn.name]=!0);break;case oe.fS.time:if(!J){J=Pn;break}default:if(Pn.name in he){const La=he[Pn.name];if(Pn.type!==La)continue}else he[Pn.name]=Pn.type,ce.push(Pn.name);const Wn=JSON.stringify(Pn.labels),Za=$e[Wn];if(Za!==void 0?Za.push(mn):$e[Wn]=[mn],Pn.labels!=null)for(const La in Pn.labels)De[La]=!0}}if(!J)continue;const ot=[],Dt=[],Ht=[],Jt=[];for(let mn=0;mn<z.length;mn++)ot.push({time:J.values[mn],wideRowIndex:mn});for(const mn in $e)Dt.push(mn);for(const mn in De)Ht.push(mn);for(const mn in et)Jt.push(mn);ot.sort((mn,Pn)=>mn.time-Pn.time),Dt.sort(),Ht.sort(),ce.sort();const nn=new Cl.v({...z,meta:{...z.meta,type:Jr.P.TimeSeriesLong},fields:[{name:J.name,type:J.type}]});for(const mn of ce)nn.addField({name:mn,type:he[mn]});for(const mn of Ht)nn.addField({name:mn,type:oe.fS.string});for(const mn of ot){const{time:Pn,wideRowIndex:Wn}=mn;for(const Za of Dt){const La={};for(const Zs of Jt)La[Zs]=z.fields[et[Zs]].values[Wn];let Ja=0;for(const Zs of $e[Za]){const Ir=z.fields[Zs];if(Ja++===0&&Ir.labels!=null)for(const Ei in Ir.labels)La[Ei]=Ir.labels[Ei];La[Ir.name]=Ir.values[Wn]}La[J.name]=Pn,nn.add(La)}}W.push(nn)}return W}function Rd(B){return Pi(B,z=>z.type===oe.fS.string).map(z=>(z.meta||(z.meta={}),z.meta.type=Jr.P.TimeSeriesMulti,z))}const go={id:ne.W.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:(B,W)=>z=>z.pipe((0,jt.U)(J=>go.transformer(B,W)(J))),transformer:B=>{const W=B?.format??"wide";if(W==="many"||W==="multi")return Id;if(W==="long")return Dl;const z=G.Ls.get(le.mi.firstTimeField).get({});return J=>{if(!J.length)return[];const ce=[];for(const De of J)De.meta?.type===Jr.P.TimeSeriesLong?Rd(De).forEach($e=>ce.push($e)):ce.push(De);const he=(0,Od._9)({frames:ce,joinBy:z,keepOriginIndices:!0});return he?(he.meta||(he.meta={}),he.meta.type=Jr.P.TimeSeriesWide,[he]):[]}}},Ar={label:"Wide time series",value:oo.TimeSeriesWide,description:"Creates a single frame joined by time",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is shared time field"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"Multiple value fields of any type"))},xl={label:"Multi-frame time series",value:oo.TimeSeriesMulti,description:"Creates a new frame for each time/number pair",info:a.createElement("ul",null,a.createElement("li",null,"Multiple frames"),a.createElement("li",null,"Each frame has two fields: time, value"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"String values are represented as labels"),a.createElement("li",null,"All values are numeric"))},Ad={label:"Long time series",value:oo.TimeSeriesLong,description:"Convert each frame to long format",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is time field"),a.createElement("li",null,"Time in ascending order, but may have duplictes"),a.createElement("li",null,"String values are represented as separate fields rather than as labels"),a.createElement("li",null,"Multiple value fields may exist"))},po=[Ar,xl,Ad];function No(B){const{options:W,onChange:z}=B,J=(0,Ge.wW)(Ld),ce=(0,a.useCallback)(he=>{z({...W,format:he.value})},[z,W]);return a.createElement(a.Fragment,null,a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Format",labelWidth:12},a.createElement(ae.Ph,{width:35,options:po,value:po.find(he=>he.value===oo.TimeSeriesMulti&&W.format===oo.TimeSeriesMany?!0:he.value===W.format)||po[0],onChange:ce,className:"flex-grow-1"}))),a.createElement(mt.Z,null,a.createElement(Ye._,{label:"Info",labelWidth:12},a.createElement("div",{className:J.info},(po.find(he=>he.value===W.format)||po[0]).info))))}const Ld=B=>({info:Z.css`
    margin-left: 20px;
  `}),bl={id:go.id,editor:No,transformation:go,name:go.name,description:go.description,help:`
  ### Use cases

  This takes query results and transforms them into a predictable timeseries format.
  This transformer may be especially useful when using old panels that only expect the
  many-frame timeseries format.
  `},ho={id:ne.W.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config",defaultOptions:{},operator:B=>W=>W.pipe((0,jt.U)(z=>z.map(J=>Ml(B,J))))};function Ml(B,W){const z=Lt(W,B.mappings??[],!0),{nameField:J,valueField:ce}=z;if(!J||!ce)return W;const he=[];for(let De=0;De<J.values.length;De++){const $e=J.values[De],et=ce.values[De],ot=Mt(W,De,z),Dt=Bd(W,De,z),Ht={name:`${$e}`,type:ce.type,values:[et],config:ot,labels:Dt};he.push(Ht)}return{fields:he,length:1}}function Bd(B,W,z){const J={...z.nameField.labels};for(let ce=0;ce<B.fields.length;ce++){const he=B.fields[ce],De=(0,ge.CZ)(he,B),$e=z.index[De];if($e.handler&&$e.handler.key!==Wt.Label)continue;const et=he.values[W];et!=null&&(J[De]=et)}return J}function Nd({input:B,options:W,onChange:z}){return B.length===0?null:a.createElement("div",null,a.createElement(Ut,{frame:B[0],mappings:W.mappings??[],onChange:J=>z({...W,mappings:J}),withNameAndValue:!0}))}const Xr={id:ho.id,editor:Nd,transformation:ho,name:ho.name,description:ho.description,state:Pt.BV.beta,help:`
### Use cases 

This transforms rows into separate fields. This can be useful as fields can be styled and configured 
individually, something rows cannot. It can also use additional fields as sources for dynamic field 
configuration or map them to field labels. The additional labels can then be used to define better 
display names for the resulting fields.

Useful when visualization data in:
- Gauge
- Stat
- Pie chart

## Example

Input:

| Name    | Value | Max |
| ------- | ----- | --- |
| ServerA | 10    | 100 |
| ServerB | 20    | 200 |
| ServerC | 30    | 300 |

Output:

| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
| ------------------------- | ------------------------- | ------------------------- |
| 10                        | 20                        | 30                        |

As you can see each row in the source data becomes a separate field. Each field now also has a max 
config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field 
configuration and if set like this will be used by the visualization instead of any options manually 
configured in the panel editor options pane.

`};var vo=e(40538),Di=e(71575),gs=e(96366),Sl=e(50466),Ma=e(43524),Tl=e(14573);const xi={id:ne.W.spatial,name:"Spatial operations",description:"Apply spatial operations to query results",defaultOptions:{},operator:B=>W=>W.pipe((0,Es.z)(z=>(0,ys.D)(Il(z,B))))};function Ol(B){return B.action===gs.JJ.Modify&&B.modify?.op===gs.ac.LineBuilder}async function Il(B,W){const z=await(0,Ma.cJ)(W.source);if(Ol(W)){const J=await(0,Ma.cJ)(W.modify?.target);return B.map(ce=>{const he=(0,Ma.g6)(ce,z),De=(0,Ma.g6)(ce,J);if(he.field&&De.field){const $e=[...ce.fields],et=(0,Sl.Fh)(he.field,De.field),ot=$e[0];return ot.type===oe.fS.geo&&ot!==he.field&&ot!==De.field?$e[0]=(0,Sl.EK)(ot,et):$e.unshift(et),{...ce,fields:$e}}return ce})}return B.map(J=>{let ce=(0,Ma.g6)(J,z);if(ce.field){if(W.action===gs.JJ.Modify){switch(W.modify?.op){case gs.ac.AsLine:let De=ce.field.name;return(!De||De==="Point")&&(De="Line"),{...J,length:1,fields:[{...ce.field,name:De,type:oe.fS.geo,values:[(0,Tl.Lp)(ce.field)]}]}}return J}const he=ce.derived?[ce.field,...J.fields]:J.fields.slice(0);if(W.action===gs.JJ.Calculate&&(he.push((0,Tl.N7)(ce.field,W.calculate??{})),ce.derived=!0),ce.derived)return{...J,fields:he}}return J})}const Uo=(B,W)=>{const z=W.options??{};B.addSelect({path:"action",name:"Action",description:"",defaultValue:gs.JJ.Prepare,settings:{options:[{value:gs.JJ.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:gs.JJ.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:gs.JJ.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),z.action===gs.JJ.Calculate?B.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:gs.Ii.Heading,settings:{options:[{value:gs.Ii.Heading,label:"Heading"},{value:gs.Ii.Area,label:"Area"},{value:gs.Ii.Distance,label:"Distance"}]}}):z.action===gs.JJ.Modify&&B.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:gs.ac.AsLine,settings:{options:[{value:gs.ac.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:gs.ac.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),Ol(z)?(B.addNestedOptions({category:["Source"],path:"source",build:(J,ce)=>{const he=z.source??{};he.mode||(he.mode=vo.q1.Auto),(0,Di.C)("Point","",J,he)}}),B.addNestedOptions({category:["Target"],path:"modify",build:(J,ce)=>{const he=z.modify?.target??{};he.mode||(he.mode=vo.q1.Auto),(0,Di.C)("Point","target.",J,he)}})):(0,Di.C)("Location","source.",B,z.source)},Ud=B=>{(0,a.useEffect)(()=>{if(!B.options.source?.mode){const J=Le(Uo);B.onChange({...J,...B.options}),console.log("geometry useEffect",J)}},[]);const W=wd((0,Ge.l4)()),z=Qe(B,Uo);return a.createElement("div",null,a.createElement("div",null,z.items.map(J=>J.render())),a.createElement("div",null,z.categories.map(J=>a.createElement("div",{key:J.props.id,className:W.wrap},a.createElement("h5",null,J.props.title),a.createElement("div",{className:W.item},J.items.map(ce=>ce.render()))))))},wd=B=>({wrap:Z.css`
      margin-bottom: 20px;
    `,item:Z.css`
      border-left: 4px solid ${B.colors.border.strong};
      padding-left: 10px;
    `}),Eo={id:ne.W.spatial,editor:Ud,transformation:xi,name:xi.name,description:xi.description,state:Pt.BV.alpha};var Rl=e(19447);const wo={id:ne.W.timeSeriesTable,name:"Time series to table transform",description:"Time series to table rows",defaultOptions:{},operator:B=>W=>W.pipe((0,jt.U)(z=>Lr(B,z)))};function Lr(B,W){const z=bi(W),J={},ce=[];for(const he of W){if(!(0,Rl.pP)(he)){ce.push(he);continue}const De=he.refId??"",$e=z[De]??{};let et=J[De];if(!et){et={name:"Trend"+(De&&Object.keys(z).length>1?` #${De}`:""),type:oe.fS.frame,config:{},values:[]},J[De]=et;const Dt=new Cl.v;for(const Ht of Object.values($e))Dt.addField(Ht);Dt.addField(et),Dt.refId=De,ce.push(Dt)}const ot=he.fields[1].labels;for(const Dt of Object.keys($e)){const Ht=ot?.[Dt]??null;$e[Dt].values.push(Ht)}et.values.push(he)}return ce}function bi(B){const W={};for(const z of B){if(!(0,Rl.pP)(z))continue;const J=z.refId??"";W[J]||(W[J]={});for(const ce of z.fields)if(ce.labels)for(const he of Object.keys(ce.labels))W[J][he]||(W[J][he]={name:he,type:oe.fS.string,config:{},values:[]})}return W}function Mi({input:B,options:W,onChange:z}){return B.length===0?null:a.createElement("div",null)}const Wo={id:wo.id,editor:Mi,transformation:wo,name:wo.name,description:wo.description,state:Pt.BV.beta,help:""},yo=()=>[Ct,qa,Te,va,vt,On,gr,Xe,as,Ia,vr,os,zt,er,Js,Xr,hn,bl,sa,Eo,fo,kn,je,zs,_s,Oa,Ci,...n.v.featureToggles.timeSeriesTable?[Wo]:[]];function Wd(B){return new Promise((W,z)=>{let J;typeof B=="string"?(J=document.createElement("script"),J.src=B):J=B,J.onload=()=>W(),J.onerror=ce=>z(ce),document.body.appendChild(J)})}const Fo=()=>new Promise(B=>{window.__monacoKustoResolvePromise=B;const W=document.createElement("script");return W.innerHTML=`require(['vs/language/kusto/monaco.contribution'], function() {
      window.__monacoKustoResolvePromise();
    });`,document.body.appendChild(W)});async function Si(){const B=(window.__grafana_public_path__??"public/")+"lib/monaco/min/vs",W=[[`${B}/language/kusto/bridge.min.js`],[`${B}/language/kusto/kusto.javascript.client.min.js`,`${B}/language/kusto/newtonsoft.json.min.js`,`${B}/language/kusto/Kusto.Language.Bridge.min.js`]];let z=Promise.resolve();for(const J of W){await z;const ce=J.filter(he=>!document.querySelector(`script[src="${he}"]`)).map(he=>Wd(he));await Promise.all(ce)}await Fo()}function Al(){return[{id:"kusto",name:"kusto",init:Si}]}var ps=e(58166),yr=e(67948),tr=e(56895),As=e(6260),zr=e(41818),Ll=e(53546),$o=e(5191),Fd=e(29428),Ti=e(85511),Ps=e(52666),Oi=e(36578),$d=e(16534),Ii=e(86824),Ri=e(5080),Ko=e(80472),Bl=e(18111);const Nl=()=>{const B=!!Q.ZP.oauth;return{saml:{bgColor:"#464646",enabled:Q.ZP.samlEnabled,name:Q.ZP.samlName||Bl.bm,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:B&&Boolean(Q.ZP.oauth.google),name:Q.ZP.oauth?.google?.name||"Google",icon:Q.ZP.oauth?.google?.icon||"google"},azuread:{bgColor:"#2f2f2f",enabled:B&&Boolean(Q.ZP.oauth.azuread),name:Q.ZP.oauth?.azuread?.name||"Microsoft",icon:Q.ZP.oauth?.azuread?.icon||"microsoft"},github:{bgColor:"#464646",enabled:B&&Boolean(Q.ZP.oauth.github),name:Q.ZP.oauth?.github?.name||"GitHub",icon:Q.ZP.oauth?.github?.icon||"github"},gitlab:{bgColor:"#fc6d26",enabled:B&&Boolean(Q.ZP.oauth.gitlab),name:Q.ZP.oauth?.gitlab?.name||"GitLab",icon:Q.ZP.oauth?.gitlab?.icon||"gitlab"},grafanacom:{bgColor:"#262628",enabled:B&&Boolean(Q.ZP.oauth.grafana_com),name:Q.ZP.oauth?.grafana_com?.name||"Grafana.com",icon:Q.ZP.oauth?.grafana_com?.icon||"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:B&&Boolean(Q.ZP.oauth.okta),name:Q.ZP.oauth?.okta?.name||"Okta",icon:Q.ZP.oauth?.okta?.icon||"okta"},oauth:{bgColor:"#262628",enabled:B&&Boolean(Q.ZP.oauth.generic_oauth),name:Q.ZP.oauth?.generic_oauth?.name||"OAuth",icon:Q.ZP.oauth?.generic_oauth?.icon||"signin",hrefName:"generic_oauth"}}},Vo=B=>({button:Z.css`
      color: #d8d9da;
      position: relative;
    `,buttonIcon:Z.css`
      position: absolute;
      left: ${B.spacing(1)};
      top: 50%;
      transform: translateY(-50%);
    `,divider:{base:Z.css`
        color: ${B.colors.text};
        display: flex;
        margin-bottom: ${B.spacing(1)};
        justify-content: space-between;
        text-align: center;
        width: 100%;
      `,line:Z.css`
        width: 100px;
        height: 10px;
        border-bottom: 1px solid ${B.colors.text};
      `}}),Ai=()=>{const B=(0,Ge.wW)(Vo);return a.createElement(a.Fragment,null,a.createElement("div",{className:B.divider.base},a.createElement("div",null,a.createElement("div",{className:B.divider.line})),a.createElement("div",null,a.createElement("span",null,!Q.ZP.disableLoginForm&&a.createElement("span",null,"or"))),a.createElement("div",null,a.createElement("div",{className:B.divider.line}))),a.createElement("div",{className:"clearfix"}))};function qr(B,W,z){return(0,Z.cx)(W.button,Z.css`
      background-color: ${B.bgColor};
      color: ${z.colors.getContrastText(B.bgColor)};

      &:hover {
        background-color: ${z.colors.emphasize(B.bgColor,.15)};
        box-shadow: ${z.shadows.z1};
      }
    `)}const Kd=()=>{const B=(0,h.pickBy)(Nl(),ce=>ce.enabled),W=Object.keys(B).length>0,z=(0,Ge.l4)(),J=(0,Ge.wW)(Vo);return W?a.createElement(Vn.wc,null,a.createElement(Ai,null),Object.entries(B).map(([ce,he])=>a.createElement(q.Qj,{key:ce,className:qr(he,J,z),href:`login/${he.hrefName?he.hrefName:ce}`,target:"_self",fullWidth:!0},a.createElement(He.J,{className:J.buttonIcon,name:he.icon}),"Sign in with ",he.name))):null},Ul=()=>{const B=(0,Q.iE)().verifyEmailEnabled?`${(0,Q.iE)().appSubUrl}/verify`:`${(0,Q.iE)().appSubUrl}/signup`,W=(0,Z.css)({paddingTop:"16px"});return a.createElement(Vn.wc,null,a.createElement("div",{className:W},"New to Grafana?"),a.createElement(q.Qj,{className:Z.css`
          width: 100%;
          justify-content: center;
        `,href:B,variant:"secondary",fill:"outline"},"Sign up"))},Vd=Z.css`
  padding: 0;
  margin-top: 4px;
`,zd=()=>(document.title=Oi.c.AppTitle,a.createElement(Ko.dd,null,a.createElement(Ii.Z,null,({loginHint:B,passwordHint:W,disableLoginForm:z,disableUserSignUp:J,login:ce,isLoggingIn:he,changePassword:De,skipPasswordChange:$e,isChangingPassword:et})=>a.createElement(a.Fragment,null,!et&&a.createElement(Ko.$s,null,!z&&a.createElement(Ri.U,{onSubmit:ce,loginHint:B,passwordHint:W,isLoggingIn:he},a.createElement(Vn.Lh,{justify:"flex-end"},a.createElement(q.Qj,{className:Vd,fill:"text",href:`${Q.ZP.appSubUrl}/user/password/send-reset-email`},"Forgot your password?"))),a.createElement(Kd,null),!J&&a.createElement(Ul,null)),et&&a.createElement(Ko.$s,null,a.createElement($d.G,{onSubmit:De,onSkip:()=>$e()}))))));var Ls=e(8412),Hd=e(76770),Li=e(72948);function Bi({description:B,text:W,url:z}){const J=(0,Ge.wW)(wl);return a.createElement(Li.Z,{className:J.card,href:z},a.createElement(Li.Z.Heading,null,W),a.createElement(Li.Z.Description,{className:J.description},B))}const wl=B=>({card:(0,Z.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,Z.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})});function Tr({navId:B}){const{node:W}=(0,Hd.q)(B),z=(0,Ge.wW)(kd),J=W.children?.filter(ce=>!ce.hideFromTabs);return a.createElement(Ls.T,{navId:W.id},a.createElement(Ls.T.Contents,null,a.createElement("div",{className:z.content},J&&J.length>0&&a.createElement("section",{className:z.grid},J?.map(ce=>a.createElement(Bi,{key:ce.id,description:ce.subTitle,text:ce.text,url:ce.url??""}))))))}const kd=B=>({content:(0,Z.css)({display:"flex",flexDirection:"column",gap:B.spacing(2)}),grid:(0,Z.css)({display:"grid",gap:B.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:B.spacing(2,0)})});var io=e(77346),$s=e(98148);function Wl(){return a.createElement(Ls.T,{navId:"home",layout:io.Q.Canvas,pageNav:{text:"Page not found"}},a.createElement($s.j,{entity:"Page"}))}var Va=e(82002),Fl=e(66121),za=e(77582),Cn=e(27876),$l=e(77258);const _d="dddd YYYY-MM-DD HH:mm zz",Kl="/admin/ldap";class Gd extends a.PureComponent{constructor(){super(...arguments),this.onUserSync=()=>{this.props.onUserSync()}}render(){const{ldapSyncInfo:W,user:z}=this.props,ce=W&&W.nextSync?(0,$l.dq)(W.nextSync,{format:_d}):"",he=`${Kl}?user=${z&&z.login}`,De=za.Vt.hasPermission(Cn.AccessControlAction.LDAPUsersRead),$e=za.Vt.hasPermission(Cn.AccessControlAction.LDAPUsersSync);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Synchronisation"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"External sync"),a.createElement("td",null,"User synced via LDAP. Some changes must be done in LDAP or mappings."),a.createElement("td",null,a.createElement("span",{className:"label label-tag"},"LDAP"))),a.createElement("tr",null,W.enabled?a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},ce)):a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},"Not enabled")))))),a.createElement("div",{className:"gf-form-button-row"},$e&&a.createElement(q.zx,{variant:"secondary",onClick:this.onUserSync},"Sync user"),De&&a.createElement(q.Qj,{variant:"secondary",href:he},"Debug LDAP Mapping"))))}}var Po=e(71657),Ni=e(35029),Pr=e(61860),Vl=e(66226),Ui=e(11630),Yd=e(13821),Co=e(29930);function jd({onSelected:B,className:W,inputId:z,autoFocus:J,excludeOrgs:ce}){(0,a.useEffect)(()=>{J&&z&&document.getElementById(z)?.focus()},[J,z]);const[he,De]=(0,Yd.Z)(async()=>{const et=(await(0,Co.i)().get("/api/orgs")).map(ot=>({value:{id:ot.id,name:ot.name},label:ot.name}));if(ce){let ot=ce.map(Ht=>Ht.orgId);return et.filter(Ht=>!ot.includes(Ht.value.id))}else return et});return a.createElement(ae.qb,{inputId:z,className:W,isLoading:he.loading,defaultOptions:!0,isSearchable:!1,loadOptions:De,onChange:B,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var zl=e(65135);class Hl extends a.PureComponent{constructor(){super(...arguments),this.addToOrgButtonRef=a.createRef(),this.state={showAddOrgModal:!1},this.showOrgAddModal=()=>{this.setState({showAddOrgModal:!0})},this.dismissOrgAddModal=()=>{this.setState({showAddOrgModal:!1},()=>{this.addToOrgButtonRef.current?.focus()})}}render(){const{user:W,orgs:z,isExternalUser:J,onOrgRoleChange:ce,onOrgRemove:he,onOrgAdd:De}=this.props,{showAddOrgModal:$e}=this.state,et=Z.css`
      margin-top: 0.8rem;
    `,ot=za.Vt.hasPermission(Cn.AccessControlAction.OrgUsersAdd)&&!J;return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Organizations"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,z.map((Dt,Ht)=>a.createElement(_l,{key:`${Dt.orgId}-${Ht}`,isExternalUser:J,user:W,org:Dt,onOrgRoleChange:ce,onOrgRemove:he}))))),a.createElement("div",{className:et},ot&&a.createElement(q.zx,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef},"Add user to organization")),a.createElement(Zd,{user:W,userOrgs:z,isOpen:$e,onOrgAdd:De,onDismiss:this.dismissOrgAddModal})))}}const wi=(0,se.B)(B=>({removeButton:Z.css`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${B.v1.palette.blue95};
    `,label:Z.css`
      font-weight: 500;
    `,disabledTooltip:Z.css`
      display: flex;
    `,tooltipItem:Z.css`
      margin-left: 5px;
    `,tooltipItemLink:Z.css`
      color: ${B.v1.palette.blue95};
    `,rolePickerWrapper:Z.css`
      display: flex;
    `,rolePicker:Z.css`
      flex: auto;
      margin-right: ${B.spacing(1)};
    `}));class kl extends a.PureComponent{constructor(){super(...arguments),this.state={currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]},this.onOrgRemove=async()=>{const{org:W}=this.props;this.props.onOrgRemove(W.orgId)},this.onChangeRoleClick=()=>{const{org:W}=this.props;this.setState({isChangingRole:!0,currentRole:W.role})},this.onOrgRoleChange=W=>{this.setState({currentRole:W})},this.onOrgRoleSave=()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)},this.onCancelClick=()=>{this.setState({isChangingRole:!1})},this.onBasicRoleChange=W=>{this.props.onOrgRoleChange(this.props.org.orgId,W)}}componentDidMount(){za.Vt.licensedAccessControlEnabled()&&za.Vt.hasPermission(Cn.AccessControlAction.ActionRolesList)&&(0,Ui.ul)(this.props.org.orgId).then(W=>this.setState({roleOptions:W})).catch(W=>console.error(W))}render(){const{user:W,org:z,isExternalUser:J,theme:ce}=this.props,he=W?.authLabels?.length&&W?.authLabels[0],De=he?`Synced via ${he}`:"",{currentRole:$e,isChangingRole:et}=this.state,ot=wi(ce),Dt=(0,Z.cx)("width-16",ot.label),Ht=za.Vt.hasPermission(Cn.AccessControlAction.OrgUsersWrite),Jt=za.Vt.hasPermission(Cn.AccessControlAction.OrgUsersRemove)&&!J,nn=J||!Ht,mn=`${z.name}-input`;return a.createElement("tr",null,a.createElement("td",{className:Dt},a.createElement("label",{htmlFor:mn},z.name)),za.Vt.licensedAccessControlEnabled()?a.createElement("td",null,a.createElement("div",{className:ot.rolePickerWrapper},a.createElement("div",{className:ot.rolePicker},a.createElement(Vl.R,{userId:W?.id||0,orgId:z.orgId,basicRole:z.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:nn})),J&&a.createElement(Fi,{lockMessage:De}))):a.createElement(a.Fragment,null,et?a.createElement("td",null,a.createElement(zl.A,{inputId:mn,value:$e,onChange:this.onOrgRoleChange,autoFocus:!0})):a.createElement("td",{className:"width-25"},z.role),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},Ht&&a.createElement(Jd,{lockMessage:De,isExternalUser:J,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})))),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},Jt&&a.createElement(Po.p,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0},"Remove from organization"))))}}const _l=(0,Ge.HE)(kl),Qd=(0,se.B)(()=>({modal:Z.css`
    width: 500px;
  `,buttonRow:Z.css`
    text-align: center;
  `,modalContent:Z.css`
    overflow: visible;
  `}));class Zd extends a.PureComponent{constructor(){super(...arguments),this.state={selectedOrg:null,role:Cn.OrgRole.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]},this.onOrgSelect=W=>{const z=this.props.userOrgs.find(J=>J.orgId===W.value?.id);this.setState({selectedOrg:W.value,role:z?.role||Cn.OrgRole.Viewer}),za.Vt.licensedAccessControlEnabled()&&za.Vt.hasPermission(Cn.AccessControlAction.ActionRolesList)&&(0,Ui.ul)(W.value?.id).then(J=>this.setState({roleOptions:J})).catch(J=>console.error(J))},this.onOrgRoleChange=W=>{this.setState({role:W})},this.onAddUserToOrg=async()=>{const{selectedOrg:W,role:z}=this.state;this.props.onOrgAdd(W.id,z),za.Vt.licensedAccessControlEnabled()&&za.Vt.hasPermission(Cn.AccessControlAction.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,Ui.hB)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.setState({pendingOrgId:null,pendingRoles:[],pendingUserId:null}))},this.onCancel=()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()},this.onRoleUpdate=async(W,z,J)=>{this.setState({pendingRoles:W,pendingOrgId:J,pendingUserId:z})}}render(){const{isOpen:W,user:z,userOrgs:J}=this.props,{role:ce,roleOptions:he,selectedOrg:De}=this.state,$e=Qd();return a.createElement(Ni.u,{className:$e.modal,contentClassName:$e.modalContent,title:"Add to an organization",isOpen:W,onDismiss:this.onCancel},a.createElement(da.g,{label:"Organization"},a.createElement(jd,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:J,autoFocus:!0})),a.createElement(da.g,{label:"Role",disabled:De===null},za.Vt.accessControlEnabled()?a.createElement(Vl.R,{userId:z?.id||0,orgId:De?.id,basicRole:ce,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:he,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles}):a.createElement(zl.A,{inputId:"new-org-role-input",value:ce,onChange:this.onOrgRoleChange})),a.createElement(Ni.u.ButtonRow,null,a.createElement(Vn.Lh,{spacing:"md",justify:"center"},a.createElement(q.zx,{variant:"secondary",fill:"outline",onClick:this.onCancel},"Cancel"),a.createElement(q.zx,{variant:"primary",disabled:De===null,onClick:this.onAddUserToOrg},"Add to organization"))))}}const Wi=B=>({disabledTooltip:Z.css`
    display: flex;
  `,tooltipItemLink:Z.css`
    color: ${B.v1.palette.blue95};
  `,lockMessageClass:Z.css`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `,icon:Z.css`
    line-height: 2;
  `});function Jd({lockMessage:B,onChangeRoleClick:W,isExternalUser:z,onOrgRoleSave:J,onCancelClick:ce}){const he=(0,Ge.wW)(Wi);return a.createElement("div",{className:he.disabledTooltip},z?a.createElement(a.Fragment,null,a.createElement("span",{className:he.lockMessageClass},B),a.createElement(Pr.u,{placement:"right-end",interactive:!0,content:a.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:he.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement("div",{className:he.icon},a.createElement(He.J,{name:"question-circle"})))):a.createElement(Po.p,{confirmText:"Save",onClick:W,onCancel:ce,onConfirm:J,disabled:z},"Change role"))}const Fi=({lockMessage:B})=>{const W=(0,Ge.wW)(Gl);return a.createElement("div",{className:W.disabledTooltip},a.createElement("span",{className:W.lockMessageClass},B),a.createElement(Pr.u,{placement:"right-end",interactive:!0,content:a.createElement("div",null,"This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:W.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement(He.J,{name:"question-circle"})))},Gl=B=>({disabledTooltip:Z.css`
    display: flex;
  `,tooltipItemLink:Z.css`
    color: ${B.v1.palette.blue95};
  `,lockMessageClass:Z.css`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `}),js=[{label:"Yes",value:!0},{label:"No",value:!1}];function zo({isGrafanaAdmin:B,onGrafanaAdminChange:W}){const[z,J]=(0,a.useState)(!1),[ce,he]=(0,a.useState)(B),De=()=>J(!0),$e=()=>{J(!1),he(B)},et=()=>W(ce),ot=za.Vt.hasPermission(Cn.AccessControlAction.UsersPermissionsUpdate);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Permissions"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Grafana Admin"),z?a.createElement("td",{colSpan:2},a.createElement(me.S,{options:js,value:ce,onChange:he,autoFocus:!0})):a.createElement("td",{colSpan:2},B?a.createElement(a.Fragment,null,a.createElement(He.J,{name:"shield"})," Yes"):a.createElement(a.Fragment,null,"No")),a.createElement("td",null,ot&&a.createElement(Po.p,{onClick:De,onConfirm:et,onCancel:$e,confirmText:"Change"},"Change"))))))))}var Cr=e(98102),Ho=e(50869);function ug({user:B,onUserUpdate:W,onUserDelete:z,onUserDisable:J,onUserEnable:ce,onPasswordChange:he}){const[De,$e]=(0,a.useState)(!1),[et,ot]=(0,a.useState)(!1),Dt=(0,a.useRef)(null),Ht=Kr=>()=>{$e(Kr),!Kr&&Dt.current&&Dt.current.focus()},Jt=(0,a.useRef)(null),nn=Kr=>()=>{ot(Kr),!Kr&&Jt.current&&Jt.current.focus()},mn=()=>z(B.id),Pn=()=>J(B.id),Wn=()=>ce(B.id),Za=Kr=>{W({...B,name:Kr})},La=Kr=>{W({...B,email:Kr})},Ja=Kr=>{W({...B,login:Kr})},Zs=B.authLabels?.length&&B.authLabels[0],Ir=Zs?`Synced via ${Zs}`:"",Ei=B.isExternal||!za.Vt.hasPermissionInMetadata(Cn.AccessControlAction.UsersWrite,B),Jh=B.isExternal||!za.Vt.hasPermissionInMetadata(Cn.AccessControlAction.UsersPasswordUpdate,B),Xh=za.Vt.hasPermissionInMetadata(Cn.AccessControlAction.UsersDelete,B),qh=za.Vt.hasPermissionInMetadata(Cn.AccessControlAction.UsersDisable,B),ev=za.Vt.hasPermissionInMetadata(Cn.AccessControlAction.UsersEnable,B);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"User information"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement(Dr,{label:"Name",value:B.name,locked:Ei,lockMessage:Ir,onChange:Za}),a.createElement(Dr,{label:"Email",value:B.email,locked:Ei,lockMessage:Ir,onChange:La}),a.createElement(Dr,{label:"Username",value:B.login,locked:Ei,lockMessage:Ir,onChange:Ja}),a.createElement(Dr,{label:"Password",value:"********",inputType:"password",locked:Jh,lockMessage:Ir,onChange:he})))),a.createElement("div",{className:eo.buttonRow},Xh&&a.createElement(a.Fragment,null,a.createElement(q.zx,{variant:"destructive",onClick:Ht(!0),ref:Dt},"Delete user"),a.createElement(Cr.s,{isOpen:De,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:mn,onDismiss:Ht(!1)})),B.isDisabled&&ev&&a.createElement(q.zx,{variant:"secondary",onClick:Wn},"Enable user"),!B.isDisabled&&qh&&a.createElement(a.Fragment,null,a.createElement(q.zx,{variant:"secondary",onClick:nn(!0),ref:Jt},"Disable user"),a.createElement(Cr.s,{isOpen:et,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:Pn,onDismiss:nn(!1)})))))}const eo={buttonRow:Z.css`
    margin-top: 0.8rem;
    > * {
      margin-right: 16px;
    }
  `};class Dr extends a.PureComponent{constructor(){super(...arguments),this.state={editing:!1,value:this.props.value||""},this.setInputElem=W=>{this.inputElem=W},this.onEditClick=()=>{this.props.inputType==="password"?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)},this.onCancelClick=()=>{this.setState({editing:!1,value:this.props.value||""})},this.onInputChange=(W,z)=>{z!==Ho.G.Invalid&&this.setState({value:W.target.value})},this.onInputBlur=(W,z)=>{z!==Ho.G.Invalid&&this.setState({value:W.target.value})},this.focusInput=()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()},this.onSave=()=>{this.props.onChange&&this.props.onChange(this.state.value)}}render(){const{label:W,locked:z,lockMessage:J,inputType:ce}=this.props,{value:he}=this.state,De=(0,Z.cx)("width-16",Z.css`
        font-weight: 500;
      `);if(z)return a.createElement(Xd,{label:W,value:he,lockMessage:J});const $e=`${W}-input`;return a.createElement("tr",null,a.createElement("td",{className:De},a.createElement("label",{htmlFor:$e},W)),a.createElement("td",{className:"width-25",colSpan:2},this.state.editing?a.createElement(de.I,{id:$e,type:ce,defaultValue:he,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):a.createElement("span",null,this.props.value)),a.createElement("td",null,a.createElement(Po.p,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick},"Edit")))}}Dr.defaultProps={value:"",locked:!1,lockMessage:"",inputType:"text"};const Xd=({label:B,value:W,lockMessage:z})=>{const J=Z.css`
    font-style: italic;
    margin-right: 0.6rem;
  `,ce=(0,Z.cx)("width-16",Z.css`
      font-weight: 500;
    `);return a.createElement("tr",null,a.createElement("td",{className:ce},B),a.createElement("td",{className:"width-25",colSpan:2},W),a.createElement("td",null,a.createElement("span",{className:J},z)))};var Na=e(35287);class $i extends a.PureComponent{constructor(){super(...arguments),this.forceAllLogoutButton=a.createRef(),this.state={showLogoutModal:!1},this.showLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!0})},this.dismissLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!1},()=>{this.forceAllLogoutButton.current?.focus()})},this.onSessionRevoke=W=>()=>{this.props.onSessionRevoke(W)},this.onAllSessionsRevoke=()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}}render(){const{sessions:W}=this.props,{showLogoutModal:z}=this.state,J=Z.css`
      margin-top: 0.8rem;
    `,ce=za.Vt.hasPermission(Cn.AccessControlAction.UsersLogout);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Sessions"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Last seen"),a.createElement("th",null,"Logged on"),a.createElement("th",null,"IP address"),a.createElement("th",{colSpan:2},"Browser and OS"))),a.createElement("tbody",null,W&&W.map((he,De)=>a.createElement("tr",{key:`${he.id}-${De}`},a.createElement("td",null,he.isActive?"Now":he.seenAt),a.createElement("td",null,(0,Na.$q)(he.createdAt,{dateStyle:"long"})),a.createElement("td",null,he.clientIp),a.createElement("td",null,`${he.browser} on ${he.os} ${he.osVersion}`),a.createElement("td",null,a.createElement("div",{className:"pull-right"},ce&&a.createElement(Po.p,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(he.id),autoFocus:!0},"Force logout")))))))),a.createElement("div",{className:J},ce&&W.length>0&&a.createElement(q.zx,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton},"Force logout from all devices"),a.createElement(Cr.s,{isOpen:z,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal}))))}}const qd=$i;var Cs=e(37592);class eu extends a.PureComponent{constructor(){super(...arguments),this.onUserUpdate=W=>{this.props.updateUser(W)},this.onPasswordChange=W=>{const{user:z,setUserPassword:J}=this.props;z&&J(z.id,W)},this.onUserDelete=W=>{this.props.deleteUser(W)},this.onUserDisable=W=>{this.props.disableUser(W)},this.onUserEnable=W=>{this.props.enableUser(W)},this.onGrafanaAdminChange=W=>{const{user:z,updateUserPermissions:J}=this.props;z&&J(z.id,W)},this.onOrgRemove=W=>{const{user:z,deleteOrgUser:J}=this.props;z&&J(z.id,W)},this.onOrgRoleChange=(W,z)=>{const{user:J,updateOrgUserRole:ce}=this.props;J&&ce(J.id,W,z)},this.onOrgAdd=(W,z)=>{const{user:J,addOrgUser:ce}=this.props;J&&ce(J,W,z)},this.onSessionRevoke=W=>{const{user:z,revokeSession:J}=this.props;z&&J(W,z.id)},this.onAllSessionsRevoke=()=>{const{user:W,revokeAllSessions:z}=this.props;W&&z(W.id)},this.onUserSync=()=>{const{user:W,syncLdapUser:z}=this.props;W&&z(W.id)}}async componentDidMount(){const{match:W,loadAdminUserPage:z}=this.props;z(parseInt(W.params.id,10))}render(){const{user:W,orgs:z,sessions:J,ldapSyncInfo:ce,isLoading:he}=this.props,De=W?.isExternal&&W?.authLabels?.includes("LDAP"),$e=za.Vt.hasPermission(Cn.AccessControlAction.UsersAuthTokenList),et=za.Vt.hasPermission(Cn.AccessControlAction.LDAPStatusRead),ot=!Q.ZP.auth.DisableSyncLock&&W?.isExternallySynced,Dt={text:W?.login??"",icon:"shield",breadcrumbs:[{title:"Users",url:"admin/users"}],subTitle:"Manage settings for an individual user."};return a.createElement(Ls.T,{navId:"global-users",pageNav:Dt},a.createElement(Ls.T.Contents,{isLoading:he},W&&a.createElement(a.Fragment,null,a.createElement(ug,{user:W,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),De&&ot&&(0,Fl.v)("ldapsync")&&ce&&et&&a.createElement(Gd,{ldapSyncInfo:ce,user:W,onUserSync:this.onUserSync}),a.createElement(zo,{isGrafanaAdmin:W.isGrafanaAdmin,onGrafanaAdminChange:this.onGrafanaAdminChange})),z&&a.createElement(Hl,{user:W,orgs:z,isExternalUser:ot,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),J&&$e&&a.createElement(qd,{sessions:J,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke})))}}const tu=B=>({user:B.userAdmin.user,sessions:B.userAdmin.sessions,orgs:B.userAdmin.orgs,ldapSyncInfo:B.ldap.syncInfo,isLoading:B.userAdmin.isLoading,error:B.userAdmin.error}),nu={loadAdminUserPage:Cs.PK,updateUser:Cs.Nq,setUserPassword:Cs.tQ,disableUser:Cs.B9,enableUser:Cs.Dx,deleteUser:Cs.h8,updateUserPermissions:Cs.Xx,addOrgUser:Cs.bN,updateOrgUserRole:Cs.Jk,deleteOrgUser:Cs.uV,revokeSession:Cs._1,revokeAllSessions:Cs.Fm,syncLdapUser:Cs.CP},au=(0,yr.connect)(tu,nu)(eu);var lo=e(86245);const su=({ldapConnectionInfo:B})=>a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Connection"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Host"),a.createElement("th",{colSpan:2},"Port"))),a.createElement("tbody",null,B&&B.map((W,z)=>a.createElement("tr",{key:z},a.createElement("td",null,W.host),a.createElement("td",null,W.port),a.createElement("td",null,W.available?a.createElement(He.J,{name:"check",className:"pull-right"}):a.createElement(He.J,{name:"exclamation-triangle",className:"pull-right"}))))))),a.createElement("div",{className:"gf-form-group"},a.createElement(Yl,{ldapConnectionInfo:B})))),Yl=({ldapConnectionInfo:B})=>{if(!B.some(ce=>ce.error))return null;const z=[];B.forEach(ce=>{ce.error&&z.push(ce)});const J=z.map((ce,he)=>a.createElement("div",{key:he},a.createElement("span",{style:{fontWeight:500}},ce.host,":",ce.port,a.createElement("br",null)),a.createElement("span",null,ce.error),he!==z.length-1&&a.createElement(a.Fragment,null,a.createElement("br",null),a.createElement("br",null))));return a.createElement(ga.b,{title:"Connection error",severity:Cn.AppNotificationSeverity.Error},J)};var jl=e(67487);const Ql="dddd YYYY-MM-DD HH:mm zz";class ru extends a.PureComponent{constructor(){super(...arguments),this.state={isSyncing:!1},this.handleSyncClick=()=>{this.setState({isSyncing:!this.state.isSyncing})}}render(){const{ldapSyncInfo:W}=this.props,{isSyncing:z}=this.state,J=(0,$l.dq)(W.nextSync,{format:Ql});return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Synchronisation",a.createElement(q.zx,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0},a.createElement("span",{className:"btn-title"},"Bulk-sync now"),z&&a.createElement(jl.$,{inline:!0}))),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"Active synchronisation"),a.createElement("td",{colSpan:2},W.enabled?"Enabled":"Disabled")),a.createElement("tr",null,a.createElement("td",null,"Scheduled"),a.createElement("td",null,W.schedule)),a.createElement("tr",null,a.createElement("td",null,"Next scheduled synchronisation"),a.createElement("td",null,J)))))))}}const ou=({groups:B,showAttributeMapping:W})=>{const z=W?B:B.filter(J=>J.orgRole);return a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,W&&a.createElement("th",null,"LDAP Group"),a.createElement("th",null,"Organization",a.createElement(Pr.u,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info"},a.createElement("span",{className:"gf-form-help-icon"},a.createElement(He.J,{name:"info-circle"})))),a.createElement("th",null,"Role"))),a.createElement("tbody",null,z.map((J,ce)=>a.createElement("tr",{key:`${J.orgId}-${ce}`},W&&a.createElement("td",null,J.groupDN),J.orgName&&J.orgRole?a.createElement("td",null,J.orgName):a.createElement("td",null),J.orgRole?a.createElement("td",null,J.orgRole):a.createElement("td",null,a.createElement("span",{className:"text-warning"},"No match",a.createElement(Pr.u,{placement:"top",content:"No matching groups found",theme:"info"},a.createElement("span",{className:"gf-form-help-icon"},a.createElement(He.J,{name:"info-circle"})))))))))))},iu=({info:B,showAttributeMapping:W})=>a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{colSpan:2},"User information"),W&&a.createElement("th",null,"LDAP attribute"))),a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"},"First name"),a.createElement("td",null,B.name.ldapValue),W&&a.createElement("td",null,B.name.cfgAttrValue)),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Surname"),a.createElement("td",null,B.surname.ldapValue),W&&a.createElement("td",null,B.surname.cfgAttrValue)),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Username"),a.createElement("td",null,B.login.ldapValue),W&&a.createElement("td",null,B.login.cfgAttrValue)),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Email"),a.createElement("td",null,B.email.ldapValue),W&&a.createElement("td",null,B.email.cfgAttrValue)))))),lu=({permissions:B})=>a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{colSpan:1},"Permissions"))),a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"}," Grafana admin"),a.createElement("td",null,B.isGrafanaAdmin?a.createElement(a.Fragment,null,a.createElement(He.J,{name:"shield"})," Yes"):"No")),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Status"),a.createElement("td",null,B.isDisabled?a.createElement(a.Fragment,null,a.createElement(He.J,{name:"times"})," Inactive"):a.createElement(a.Fragment,null,a.createElement(He.J,{name:"check"})," Active"))))))),cu=({teams:B,showAttributeMapping:W})=>{const z=W?B:B.filter(J=>J.teamName);return a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,W&&a.createElement("th",null,"LDAP Group"),a.createElement("th",null,"Organisation"),a.createElement("th",null,"Team"))),a.createElement("tbody",null,z.map((J,ce)=>a.createElement("tr",{key:`${J.teamName}-${ce}`},W&&a.createElement(a.Fragment,null,a.createElement("td",null,J.groupDN),!J.orgName&&a.createElement(a.Fragment,null,a.createElement("td",null),a.createElement("td",null,a.createElement("div",{className:"text-warning"},"No match",a.createElement(Pr.u,{placement:"top",content:"No matching teams found",theme:"info"},a.createElement("span",{className:"gf-form-help-icon"},a.createElement(He.J,{name:"info-circle"}))))))),J.orgName&&a.createElement(a.Fragment,null,a.createElement("td",null,J.orgName),a.createElement("td",null,J.teamName))))))))},du=({ldapUser:B,showAttributeMapping:W})=>a.createElement(a.Fragment,null,a.createElement(iu,{info:B.info,showAttributeMapping:W}),a.createElement(lu,{permissions:B.permissions}),B.roles&&B.roles.length>0&&a.createElement(ou,{groups:B.roles,showAttributeMapping:W}),B.teams&&B.teams.length>0?a.createElement(cu,{teams:B.teams,showAttributeMapping:W}):a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"No teams found via LDAP"))))))),{FormField:Br}=Sa.LegacyForms;class uu extends a.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0},this.search=W=>{W.preventDefault();const z=W.target.elements.username.value;z&&this.fetchUserMapping(z)},this.onClearUserError=()=>{this.props.clearUserError()}}async componentDidMount(){const{clearUserMappingInfo:W,queryParams:z}=this.props;await W(),await this.fetchLDAPStatus(),z.username&&await this.fetchUserMapping(z.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:W,loadLdapSyncStatus:z}=this.props;return Promise.all([W(),z()])}async fetchUserMapping(W){const{loadUserMapping:z}=this.props;return await z(W)}render(){const{ldapUser:W,userError:z,ldapError:J,ldapSyncInfo:ce,ldapConnectionInfo:he,navModel:De,queryParams:$e}=this.props,{isLoading:et}=this.state,ot=za.Vt.hasPermission(Cn.AccessControlAction.LDAPUsersRead);return a.createElement(Ls.T,{navModel:De},a.createElement(Ls.T.Contents,{isLoading:et},a.createElement(a.Fragment,null,J&&J.title&&a.createElement("div",{className:"gf-form-group"},a.createElement(ga.b,{title:J.title,severity:Cn.AppNotificationSeverity.Error},J.body)),a.createElement(su,{ldapConnectionInfo:he}),(0,Fl.v)("ldapsync")&&ce&&a.createElement(ru,{ldapSyncInfo:ce}),ot&&a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Test user mapping"),a.createElement("div",{className:"gf-form-group"},a.createElement("form",{onSubmit:this.search,className:"gf-form-inline"},a.createElement(Br,{label:"Username",labelWidth:8,inputWidth:30,type:"text",id:"username",name:"username",defaultValue:$e.username}),a.createElement(q.zx,{type:"submit"},"Run"))),z&&z.title&&a.createElement("div",{className:"gf-form-group"},a.createElement(ga.b,{title:z.title,severity:Cn.AppNotificationSeverity.Error,onRemove:this.onClearUserError},z.body)),W&&a.createElement(du,{ldapUser:W,showAttributeMapping:!0})))))}}const nr=B=>({navModel:(0,lo.ht)(B.navIndex,"ldap"),ldapConnectionInfo:B.ldap.connectionInfo,ldapUser:B.ldap.user,ldapSyncInfo:B.ldap.syncInfo,userError:B.ldap.userError,ldapError:B.ldap.ldapError}),fg={loadLdapState:Cs.Y3,loadLdapSyncStatus:Cs.j4,loadUserMapping:Cs.b_,clearUserError:Cs.V0,clearUserMappingInfo:Cs.IS},mu=(0,yr.connect)(nr,fg)(uu);var rs=e(49969);const gn=B=>a.lazy(B);var Ts=e(97953);const Zl=[],Jl=[...Zl,{path:"/alerting",component:()=>a.createElement(Tr,{navId:"alerting-legacy"})},{path:"/alerting/list",component:gn(()=>Promise.all([e.e(5524),e.e(8347),e.e(2461)]).then(e.bind(e,65007)))},{path:"/alerting/ng/list",component:gn(()=>e.e(4286).then(e.bind(e,65007)))},{path:"/alerting/notifications",roles:Q.vc.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:gn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:gn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:gn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:gn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:gn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:gn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notification/new",component:gn(()=>e.e(476).then(e.bind(e,13915)))},{path:"/alerting/notification/:id/edit",component:gn(()=>e.e(7384).then(e.bind(e,18910)))}],Xl=[...Zl,{path:"/alerting",component:gn(()=>Promise.all([e.e(5524),e.e(6034)]).then(e.bind(e,90237)))},{path:"/alerting/list",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingRuleRead,Cn.AccessControlAction.AlertingRuleExternalRead],[rs.B.Viewer,rs.B.Editor,rs.B.Admin]),component:gn(()=>Promise.all([e.e(5524),e.e(8347),e.e(2461)]).then(e.bind(e,36291)))},{path:"/alerting/routes",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingNotificationsRead,Cn.AccessControlAction.AlertingNotificationsExternalRead],[rs.B.Editor,rs.B.Admin]),component:gn(()=>Promise.all([e.e(5524),e.e(8648)]).then(e.bind(e,11482)))},{path:"/alerting/routes/mute-timing/new",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingNotificationsWrite,Cn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:gn(()=>Promise.all([e.e(5524),e.e(9355)]).then(e.bind(e,89657)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingNotificationsWrite,Cn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:gn(()=>Promise.all([e.e(5524),e.e(9355)]).then(e.bind(e,89657)))},{path:"/alerting/silences",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingInstanceRead,Cn.AccessControlAction.AlertingInstancesExternalRead],["Viewer","Editor","Admin"]),component:gn(()=>Promise.all([e.e(5524),e.e(1783)]).then(e.bind(e,99658)))},{path:"/alerting/silence/new",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingInstanceCreate,Cn.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:gn(()=>Promise.all([e.e(5524),e.e(1783)]).then(e.bind(e,99658)))},{path:"/alerting/silence/:id/edit",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingInstanceUpdate,Cn.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:gn(()=>Promise.all([e.e(5524),e.e(1783)]).then(e.bind(e,99658)))},{path:"/alerting/notifications",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingNotificationsRead,Cn.AccessControlAction.AlertingNotificationsExternalRead],["Editor","Admin"]),component:gn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,79070)))},{path:"/alerting/notifications/:type/new",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingNotificationsWrite,Cn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:gn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,79070)))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingNotificationsWrite,Cn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:gn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,79070)))},{path:"/alerting/notifications/:type/:id/duplicate",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingNotificationsWrite,Cn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:gn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,79070)))},{path:"/alerting/notifications/:type",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingNotificationsWrite,Cn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:gn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,79070)))},{path:"/alerting/groups/",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingInstanceRead,Cn.AccessControlAction.AlertingInstancesExternalRead],[rs.B.Viewer,rs.B.Editor,rs.B.Admin]),component:gn(()=>Promise.all([e.e(5524),e.e(2415)]).then(e.bind(e,48401)))},{path:"/alerting/new",pageClass:"page-alerting",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingRuleCreate,Cn.AccessControlAction.AlertingRuleExternalWrite],[rs.B.Viewer,rs.B.Editor,rs.B.Admin]),component:gn(()=>Promise.all([e.e(5524),e.e(5372)]).then(e.bind(e,85670)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingRuleUpdate,Cn.AccessControlAction.AlertingRuleExternalWrite],[rs.B.Viewer,rs.B.Editor,rs.B.Admin]),component:gn(()=>Promise.all([e.e(5524),e.e(5372)]).then(e.bind(e,85670)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingRuleRead,Cn.AccessControlAction.AlertingRuleExternalRead],[rs.B.Viewer,rs.B.Editor,rs.B.Admin]),component:gn(()=>e.e(4679).then(e.bind(e,77110)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,Ts.ql)([Cn.AccessControlAction.AlertingRuleRead,Cn.AccessControlAction.AlertingRuleExternalRead],[rs.B.Viewer,rs.B.Editor,rs.B.Admin]),component:gn(()=>e.e(7918).then(e.bind(e,29309)))},{path:"/alerting/admin",roles:()=>["Admin"],component:gn(()=>Promise.all([e.e(5524),e.e(6488),e.e(7680)]).then(e.bind(e,30315)))}];function fu(B=Q.vc){return B.unifiedAlertingEnabled?Xl:B.alertingEnabled?Jl:(0,h.uniq)([...Jl,...Xl].map(z=>z.path)).map(z=>({path:z,component:gn(()=>e.e(1333).then(e.bind(e,39597)))}))}var gu=e(86475);function pu(){return Q.vc.featureToggles.dataConnectionsConsole?[{path:`/${gu.D}`,exact:!1,component:gn(()=>Promise.all([e.e(6488),e.e(6526),e.e(6747),e.e(9133),e.e(5981)]).then(e.bind(e,51689)))}]:[]}var ko=e(3597),Ki=e(48996);const hu=[{path:"/plugins",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:Ki.cd.Home,component:gn(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/browse",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:Ki.cd.Browse,component:gn(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:Ki.cd.Details,component:gn(()=>Promise.all([e.e(6488),e.e(6526),e.e(6747),e.e(2417)]).then(e.bind(e,5793)))},{path:"/admin/plugins/*",navId:"admin-plugins",component:()=>a.createElement(tr.l_,{to:"/plugins"})}];function vu(){return hu}var Hr=e(62992),to=e(4063),Eu=e(2555),Do=e(34177);function Nr(B){return console.error(B),_o("Exception thrown","See console for details")}function ql(){return _o("Page not found","404 Error")}function _o(B,W){const z={text:B,subTitle:W,icon:"exclamation-triangle"};return{node:z,main:z}}var Go=e(13011),Vi=e(97888),yu=e(55111),zi=e(52889);const ec={loading:!0,pluginNav:null,plugin:null};function Pu({pluginId:B,pluginNavSection:W}){const z=(0,tr.$B)(),J=(0,tr.TH)(),[ce,he]=(0,a.useReducer)(co.reducer,ec),De=n.v.appSubUrl+J.pathname+J.search,{plugin:$e,loading:et,pluginNav:ot}=ce,Dt=(0,yu.d)(W,ot,De),Ht=(0,a.useMemo)(()=>(0,I.Ox)(J.search),[J.search]),Jt=(0,a.useMemo)(()=>(0,zi.a)(Dt),[Dt]),nn=(0,Do.p)();(0,a.useEffect)(()=>{vs(B,he)},[B]);const mn=(0,a.useCallback)(Wn=>he(co.actions.changeNav(Wn)),[]);if(!$e||B!==$e.meta.id){const Wn=nn.chrome.state.getValue().layout;return a.createElement(Ls.T,{navModel:Dt,pageNav:{text:""},layout:Wn},et&&a.createElement(Eu.Z,null))}if(!$e.root)return a.createElement(Ls.T,{navModel:Dt??_o("Plugin load error")},a.createElement("div",null,"No root app page component found"));const Pn=$e.root&&a.createElement($e.root,{meta:$e.meta,basename:z.url,onNavChanged:mn,query:Ht,path:J.pathname});return ot?a.createElement(a.Fragment,null,Dt?a.createElement(Ls.T,{navModel:Dt,pageNav:ot?.node},a.createElement(Ls.T.Contents,{isLoading:et},Pn)):a.createElement(Ls.T,null,Pn)):a.createElement(zi.v.Provider,{value:Jt},Pn)}const co=(0,Hr.oM)({name:"prom-builder-container",initialState:ec,reducers:{setState:(B,W)=>{Object.assign(B,W.payload)},changeNav:(B,W)=>{let z=W.payload;z&&z.node.children&&(z={...z,node:{...z.main,hideFromBreadcrumbs:!0}}),B.pluginNav=z}}});async function vs(B,W){try{const z=await(0,Go.a)(B).then(J=>{const ce=Cu(J);return ce?(za.h$.emit(to.SI.alertError,[ce]),W(co.actions.setState({pluginNav:_o(ce)})),null):(0,Vi.Av)(J)});W(co.actions.setState({plugin:z,loading:!1,pluginNav:null}))}catch{W(co.actions.setState({plugin:null,loading:!1,pluginNav:ql()}))}}function Cu(B){return B?B.type!==Pt.zV.app?"Plugin must be an app":B.enabled?null:"Application Not Enabled":"Unknown Plugin"}const tc=Pu;var Ha=e(3153);function Du(){const B=(0,Ha.y0)(),{navIndex:W}=B,z=he=>he.startsWith("standalone-plugin-page-/"),J=he=>"pluginId"in he&&"id"in he;return[...Object.values(W).filter(J).map(he=>{const De=(0,lo.vw)(he),$e=`/a/${he.pluginId}`,et=z(he.id)&&he.url||$e,ot=z(he.id)&&!he.url?.startsWith("/a/");return{path:et,exact:!1,sensitive:ot,component:()=>a.createElement(tc,{pluginId:he.pluginId,pluginNavSection:De})}}),{path:"/a/:pluginId",exact:!1,component:({match:he})=>a.createElement(tc,{pluginId:he.params.pluginId,pluginNavSection:W.home})}]}const nc=[{path:"/profile",component:gn(()=>e.e(7323).then(e.bind(e,87807)))},{path:"/profile/password",component:gn(()=>e.e(5771).then(e.bind(e,75771)))},{path:"/profile/select-org",component:gn(()=>e.e(1456).then(e.bind(e,90779)))},{path:"/profile/notifications",component:gn(()=>e.e(743).then(e.bind(e,76137)))}];function xu(B=Q.vc){return B.profileEnabled?nc:(0,h.uniq)(nc.map(z=>z.path)).map(z=>({path:z,component:gn(()=>e.e(3395).then(e.bind(e,92080)))}))}const ac=()=>Q.vc.featureToggles.publicDashboards?[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:Cn.DashboardRoutes.Public,component:gn(()=>e.e(1344).then(e.bind(e,10429)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:Cn.DashboardRoutes.Public,chromeless:!0,component:gn(()=>Promise.all([e.e(3755),e.e(3189),e.e(7638),e.e(7362),e.e(6647),e.e(2613)]).then(e.bind(e,72766)))}]:[],bu=[];function Mu(){return[...Du(),{path:"/",pageClass:"page-dashboard",routeName:Cn.DashboardRoutes.Home,component:gn(()=>Promise.all([e.e(3755),e.e(3189),e.e(7638),e.e(7362),e.e(6647),e.e(2060),e.e(1579),e.e(8347),e.e(6281),e.e(5296)]).then(e.bind(e,25487)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:Cn.DashboardRoutes.Normal,component:gn(()=>Promise.all([e.e(3755),e.e(3189),e.e(7638),e.e(7362),e.e(6647),e.e(2060),e.e(1579),e.e(8347),e.e(6281),e.e(5296)]).then(e.bind(e,25487)))},{path:"/dashboard/new",roles:()=>Va.Vt.evaluatePermission(()=>[],[Cn.AccessControlAction.DashboardsCreate]),pageClass:"page-dashboard",routeName:Cn.DashboardRoutes.New,component:gn(()=>Promise.all([e.e(3755),e.e(3189),e.e(7638),e.e(7362),e.e(6647),e.e(2060),e.e(1579),e.e(8347),e.e(6281),e.e(5296)]).then(e.bind(e,25487)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>Va.Vt.evaluatePermission(()=>["Editor","Admin"],[Cn.AccessControlAction.DashboardsCreate]),component:gn(()=>Promise.all([e.e(3755),e.e(3189),e.e(7638),e.e(7362),e.e(6647),e.e(2060),e.e(1579),e.e(8347),e.e(6281),e.e(5296)]).then(e.bind(e,81704)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:Cn.DashboardRoutes.Normal,component:gn(()=>Promise.all([e.e(3755),e.e(3189),e.e(7638),e.e(7362),e.e(6647),e.e(2060),e.e(1579),e.e(8347),e.e(6281),e.e(5296)]).then(e.bind(e,25487)))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:Cn.DashboardRoutes.Normal,chromeless:!0,component:gn(()=>Promise.all([e.e(3755),e.e(7362),e.e(1034)]).then(e.bind(e,30237)))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:Cn.DashboardRoutes.Normal,chromeless:!0,component:gn(()=>Promise.all([e.e(3755),e.e(7362),e.e(1034)]).then(e.bind(e,30237)))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:Cn.DashboardRoutes.Normal,chromeless:!0,component:gn(()=>Promise.all([e.e(3755),e.e(7362),e.e(1034)]).then(e.bind(e,30237)))},{path:"/dashboard/import",roles:()=>Va.Vt.evaluatePermission(()=>["Editor","Admin"],[Cn.AccessControlAction.DashboardsCreate]),component:gn(()=>e.e(8808).then(e.bind(e,26440)))},{path:ko.n.List,component:gn(()=>Promise.all([e.e(6488),e.e(4620)]).then(e.bind(e,99113)))},{path:ko.n.Edit,component:gn(()=>Promise.all([e.e(6488),e.e(9133),e.e(1477)]).then(e.bind(e,72443)))},{path:ko.n.Dashboards,component:gn(()=>Promise.all([e.e(6488),e.e(2929)]).then(e.bind(e,46144)))},{path:ko.n.New,component:gn(()=>Promise.all([e.e(6488),e.e(4253)]).then(e.bind(e,70594)))},{path:"/datasources/correlations",component:gn(()=>Q.ZP.featureToggles.correlations?e.e(413).then(e.bind(e,84306)):e.e(2093).then(e.bind(e,91598)))},{path:"/dashboards",component:gn(()=>Promise.all([e.e(6526),e.e(4074)]).then(e.bind(e,32722)))},{path:"/dashboards/folder/new",roles:()=>Va.Vt.evaluatePermission(()=>["Editor","Admin"],[Cn.AccessControlAction.FoldersCreate]),component:gn(()=>e.e(8932).then(e.bind(e,94883)))},{path:"/dashboards/f/:uid/:slug/permissions",component:Q.ZP.rbacEnabled?gn(()=>e.e(8431).then(e.bind(e,42524))):gn(()=>e.e(8431).then(e.bind(e,45663)))},{path:"/dashboards/f/:uid/:slug/settings",component:gn(()=>e.e(4827).then(e.bind(e,90315)))},{path:"/dashboards/f/:uid/:slug",component:gn(()=>Promise.all([e.e(6526),e.e(4074)]).then(e.bind(e,32722)))},{path:"/dashboards/f/:uid",component:gn(()=>Promise.all([e.e(6526),e.e(4074)]).then(e.bind(e,32722)))},{path:"/explore",pageClass:"page-explore",roles:()=>Va.Vt.evaluatePermission(()=>Q.ZP.viewersCanEdit?[]:["Editor","Admin"],[Cn.AccessControlAction.DataSourcesExplore]),component:gn(()=>Q.ZP.exploreEnabled?Promise.all([e.e(4254),e.e(5048),e.e(8366),e.e(2060),e.e(6579),e.e(9782)]).then(e.bind(e,72665)):e.e(172).then(e.bind(e,20750)))},{path:"/apps",component:()=>a.createElement(Tr,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>a.createElement(Tr,{navId:"alerts-and-incidents"})},{path:"/monitoring",component:()=>a.createElement(Tr,{navId:"monitoring"})},{path:"/admin/general",component:()=>a.createElement(Tr,{navId:"admin/general"})},{path:"/admin/plugins",component:()=>a.createElement(Tr,{navId:"admin/plugins"})},{path:"/admin/access",component:()=>a.createElement(Tr,{navId:"admin/access"})},{path:"/org",component:gn(()=>e.e(529).then(e.bind(e,23242)))},{path:"/org/new",component:gn(()=>e.e(950).then(e.bind(e,72040)))},{path:"/org/users",component:gn(()=>e.e(8039).then(e.bind(e,71221)))},{path:"/org/users/invite",component:gn(()=>e.e(7707).then(e.bind(e,40509)))},{path:"/org/apikeys",roles:()=>Va.Vt.evaluatePermission(()=>["Admin"],[Cn.AccessControlAction.ActionAPIKeysRead]),component:gn(()=>e.e(3082).then(e.bind(e,91948)))},{path:"/org/serviceaccounts",roles:()=>Va.Vt.evaluatePermission(()=>["Admin"],[Cn.AccessControlAction.ServiceAccountsRead,Cn.AccessControlAction.ServiceAccountsCreate]),component:gn(()=>e.e(1337).then(e.bind(e,50951)))},{path:"/org/serviceaccounts/create",component:gn(()=>e.e(9738).then(e.bind(e,36497)))},{path:"/org/serviceaccounts/:id",component:gn(()=>e.e(687).then(e.bind(e,66446)))},{path:"/org/teams",roles:()=>Va.Vt.evaluatePermission(()=>Q.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[Cn.AccessControlAction.ActionTeamsRead,Cn.AccessControlAction.ActionTeamsCreate]),component:gn(()=>e.e(9671).then(e.bind(e,17721)))},{path:"/org/teams/new",roles:()=>Va.Vt.evaluatePermission(()=>Q.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[Cn.AccessControlAction.ActionTeamsCreate]),component:gn(()=>e.e(8715).then(e.bind(e,39874)))},{path:"/org/teams/edit/:id/:page?",roles:()=>Va.Vt.evaluatePermission(()=>Q.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[Cn.AccessControlAction.ActionTeamsRead,Cn.AccessControlAction.ActionTeamsCreate]),component:gn(()=>e.e(8612).then(e.bind(e,59582)))},{path:"/admin/authentication",roles:()=>Va.Vt.evaluatePermission(()=>["Admin","ServerAdmin"],[Cn.AccessControlAction.SettingsWrite]),component:Q.ZP.featureToggles.authenticationConfigUI&&Q.ZP.licenseInfo.enabledFeatures?.saml?gn(()=>e.e(8741).then(e.bind(e,88075))):()=>a.createElement(tr.l_,{to:"/admin"})},{path:"/admin",component:()=>a.createElement(Tr,{navId:"cfg"})},{path:"/admin/access",component:()=>a.createElement(Tr,{navId:"admin/access"})},{path:"/admin/config",component:()=>a.createElement(Tr,{navId:"admin/config"})},{path:"/admin/settings",component:gn(()=>e.e(9603).then(e.bind(e,55486)))},{path:"/admin/upgrading",component:gn(()=>e.e(2446).then(e.bind(e,62446)))},{path:"/admin/users",component:gn(()=>e.e(7497).then(e.bind(e,51894)))},{path:"/admin/users/create",component:gn(()=>e.e(2508).then(e.bind(e,49562)))},{path:"/admin/users/edit/:id",component:au},{path:"/admin/orgs",component:gn(()=>e.e(3798).then(e.bind(e,61608)))},{path:"/admin/orgs/edit/:id",component:gn(()=>e.e(2721).then(e.bind(e,29209)))},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:gn(()=>e.e(7675).then(e.bind(e,14527)))},{path:"/admin/stats",component:gn(()=>e.e(7641).then(e.bind(e,93976)))},{path:"/admin/ldap",component:mu},{path:"/login",component:zd,pageClass:"login-page",chromeless:!0},{path:"/invite/:code",component:gn(()=>e.e(7429).then(e.bind(e,62887))),chromeless:!0},{path:"/verify",component:Q.ZP.verifyEmailEnabled?gn(()=>e.e(7583).then(e.bind(e,27583))):()=>a.createElement(tr.l_,{to:"/signup"}),pageClass:"login-page",chromeless:!0},{path:"/signup",component:Q.ZP.disableUserSignUp?()=>a.createElement(tr.l_,{to:"/login"}):gn(()=>e.e(615).then(e.bind(e,40615))),pageClass:"login-page",chromeless:!0},{path:"/user/password/send-reset-email",chromeless:!0,component:gn(()=>e.e(133).then(e.bind(e,37673)))},{path:"/user/password/reset",component:gn(()=>e.e(6848).then(e.bind(e,18310))),pageClass:"login-page",chromeless:!0},{path:"/dashboard/snapshots",component:gn(()=>e.e(5295).then(e.bind(e,11155)))},{path:"/playlists",component:gn(()=>e.e(9218).then(e.bind(e,21977)))},{path:"/playlists/play/:uid",component:gn(()=>e.e(3090).then(e.bind(e,48579)))},{path:"/playlists/new",component:gn(()=>e.e(9975).then(e.bind(e,29666)))},{path:"/playlists/edit/:uid",component:gn(()=>e.e(2341).then(e.bind(e,58809)))},{path:"/sandbox/benchmarks",component:gn(()=>e.e(4908).then(e.bind(e,12902)))},{path:"/sandbox/test",component:gn(()=>Promise.all([e.e(3755),e.e(1579),e.e(8595)]).then(e.bind(e,42594)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:gn(()=>Promise.all([e.e(3189),e.e(3778)]).then(e.bind(e,42029)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>Va.Vt.evaluatePermission(()=>["Viewer","Editor","Admin"],[Cn.AccessControlAction.AlertingRuleRead]),component:gn(()=>e.e(1324).then(e.bind(e,30097)))},{path:"/library-panels",component:gn(()=>Promise.all([e.e(3189),e.e(7878)]).then(e.bind(e,45407)))},{path:"/notifications",component:gn(()=>e.e(743).then(e.bind(e,76137)))},...Hi(),...vu(),...Su(),...fu(),...xu(),...bu,...ac(),...pu(),{path:"/*",component:Wl}].filter(Ps.fQ)}function Su(B=Q.ZP){return B.supportBundlesEnabled?[{path:"/support-bundles",component:gn(()=>e.e(9939).then(e.bind(e,57906)))},{path:"/support-bundles/create",component:gn(()=>e.e(539).then(e.bind(e,46190)))}]:[]}function Hi(B=Q.ZP){return B.featureToggles.scenes?[{path:"/scenes",component:gn(()=>e.e(207).then(e.bind(e,13190)))},{path:"/scenes/dashboard/:uid",component:gn(()=>e.e(207).then(e.bind(e,44336)))},{path:"/scenes/grafana-monitoring",exact:!1,component:gn(()=>e.e(207).then(e.bind(e,38282)))},{path:"/scenes/:name",component:gn(()=>e.e(207).then(e.bind(e,23192)))}]:[]}const sc=a.forwardRef((B,W)=>a.createElement("div",{id:"ngRoot",ref:W,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}}));sc.displayName="AngularRoot";var kr=e(55024),Tu=e(11484),Ou=e(70926),xo=e(20308),cs=e(19349),Iu=e(85385),Ru=e(64703);async function Au(){if(n.v.angularSupportEnabled){const{AngularApp:B}=await Promise.all([e.e(6093),e.e(2773),e.e(9974),e.e(4704)]).then(e.bind(e,62459)),W=new B;W.init(),W.bootstrap()}else(0,Tu.W)({load:(B,W,z)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})}),(0,Ou.t)({get:B=>{switch(B){case"backendSrv":return(0,kr.d)("getLegacyAngularInjector","backendSrv","use getBackendSrv() in @grafana/runtime"),(0,O.i)();case"contextSrv":return(0,kr.d)("getLegacyAngularInjector","contextSrv"),za.Vt;case"dashboardSrv":return(0,kr.d)("getLegacyAngularInjector","getDashboardSrv"),(0,p.h4)();case"datasourceSrv":return(0,kr.d)("getLegacyAngularInjector","datasourceSrv","use getDataSourceSrv() in @grafana/runtime"),(0,L.F)();case"linkSrv":return(0,kr.d)("getLegacyAngularInjector","linkSrv"),(0,Ru.Bq)();case"validationSrv":return(0,kr.d)("getLegacyAngularInjector","validationSrv"),Iu.t;case"timeSrv":return(0,kr.d)("getLegacyAngularInjector","timeSrv"),(0,cs.$t)();case"templateSrv":return(0,kr.d)("getLegacyAngularInjector","templateSrv","use getTemplateSrv() in @grafana/runtime"),(0,xo.J)()}throw"Angular is disabled.  Unable to expose: "+B}})}var Lu=e(9085),rc=e.n(Lu),oc=e(29952),ic=e(83962),Yo=e(86922),ki=e(57386),lc=e(56651);const jo=0,Bu=B=>{const W=a.useRef(null),z=a.useRef(null),J=a.useRef(B.items);J.current=B.items;const ce=(0,lc.useVirtual)({size:J.current.length,parentRef:z}),{query:he,search:De,currentRootActionId:$e,activeIndex:et,options:ot}=(0,ps.useKBar)(nn=>({search:nn.searchQuery,currentRootActionId:nn.currentRootActionId,activeIndex:nn.activeIndex}));a.useEffect(()=>{const nn=mn=>{mn.key==="ArrowUp"||mn.ctrlKey&&mn.key==="p"?(mn.preventDefault(),he.setActiveIndex(Pn=>{let Wn=Pn>jo?Pn-1:Pn;if(typeof J.current[Wn]=="string"){if(Wn===0)return Pn;Wn-=1}return Wn})):mn.key==="ArrowDown"||mn.ctrlKey&&mn.key==="n"?(mn.preventDefault(),he.setActiveIndex(Pn=>{let Wn=Pn<J.current.length-1?Pn+1:Pn;if(typeof J.current[Wn]=="string"){if(Wn===J.current.length-1)return Pn;Wn+=1}return Wn})):mn.key==="Enter"&&(mn.preventDefault(),W.current?.click())};return window.addEventListener("keydown",nn),()=>window.removeEventListener("keydown",nn)},[he]);const{scrollToIndex:Dt}=ce;a.useEffect(()=>{Dt(et,{align:et<=1?"end":"auto"})},[et,Dt]),a.useEffect(()=>{he.setActiveIndex(typeof B.items[jo]=="string"?jo+1:jo)},[De,$e,B.items,he]);const Ht=a.useCallback((nn,mn)=>{if(typeof mn=="string")return;const Pn=mn.url;mn.command?(mn.command.perform(mn),he.toggle()):Pn?nn.ctrlKey||nn.metaKey||nn.shiftKey||he.toggle():(he.setSearch(""),he.setCurrentRootAction(mn.id)),ot.callbacks?.onSelectAction?.(mn)},[he,ot]),Jt=(0,ki.usePointerMovedSinceMount)();return a.createElement("div",{ref:z,style:{maxHeight:B.maxHeight||400,position:"relative",overflow:"auto"}},a.createElement("div",{role:"listbox",id:ps.KBAR_LISTBOX,style:{height:`${ce.totalSize}px`,width:"100%"}},ce.virtualItems.map(nn=>{const mn=J.current[nn.index],{target:Pn,url:Wn}=mn,Za=typeof mn!="string"&&{onPointerMove:()=>Jt&&et!==nn.index&&he.setActiveIndex(nn.index),onPointerDown:()=>he.setActiveIndex(nn.index),onClick:Ir=>Ht(Ir,mn)},La=nn.index===et,Ja={id:(0,ps.getListboxItemId)(nn.index),role:"option","aria-selected":La,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${nn.start}px)`},...Za},Zs=a.cloneElement(B.onRender({item:mn,active:La}),{ref:nn.measureRef});return Wn?a.createElement("a",{key:nn.index,href:Wn,target:Pn,ref:La?W:null,...Ja},Zs):a.createElement("div",{key:nn.index,ref:La?W:null,...Ja},Zs)})))},bo=a.forwardRef(({action:B,active:W,currentRootActionId:z},J)=>{const ce=a.useMemo(()=>{if(!z)return B.ancestors;const et=B.ancestors.findIndex(ot=>ot.id===z);return B.ancestors.slice(et+1)},[B.ancestors,z]),he=(0,Ge.wW)(Nu);let De=B.name;const $e=et=>Boolean(et.command?.perform||et.url);return B.children.length&&!$e(B)&&!De.endsWith("...")&&(De+="..."),a.createElement("div",{ref:J,className:(0,Z.cx)(he.row,W&&he.activeRow)},a.createElement("div",{className:he.actionContainer},B.icon,a.createElement("div",{className:he.textContainer},ce.map(et=>a.createElement(a.Fragment,{key:et.id},!$e(et)&&a.createElement(a.Fragment,null,a.createElement("span",{className:he.breadcrumbAncestor},et.name),a.createElement("span",{className:he.breadcrumbSeparator},"\u203A")))),a.createElement("span",null,De)),B.subtitle&&a.createElement("span",{className:he.subtitleText},B.subtitle)))});bo.displayName="ResultItem";const Nu=B=>({row:(0,Z.css)({padding:B.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:B.shape.radius.default,margin:B.spacing(0,1)}),activeRow:(0,Z.css)({color:B.colors.text.maxContrast,background:B.colors.emphasize(B.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:B.spacing(.5),borderRadius:B.shape.radius.default,backgroundImage:B.colors.gradients.brandVertical}}),actionContainer:(0,Z.css)({display:"flex",gap:B.spacing(1),alignItems:"baseline",fontSize:B.typography.fontSize,width:"100%"}),textContainer:(0,Z.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),breadcrumbAncestor:(0,Z.css)({color:B.colors.text.secondary}),breadcrumbSeparator:(0,Z.css)({color:B.colors.text.secondary,marginLeft:B.spacing(1),marginRight:B.spacing(1)}),subtitleText:(0,Z.css)({...B.typography.bodySmall,color:B.colors.text.secondary,display:"block",flexBasis:"20%",flexGrow:1,flexShrink:0,maxWidth:"fit-content",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})});var Uu=e(99151),wu=e.n(Uu),Wu=e(13019),cc=e(82e3);const Fu=5,dc=4,$u=3,Qo=2,uc=1,mc=100,fc=5,Ku=wu()(zu,200);async function Vu(){if(!Va.Vt.user.isSignedIn)return[];const B=(await Wu.Z.getDashboardOpened()).slice(0,fc),z=(await(0,cc.getGrafanaSearcher)().search({kind:["dashboard"],limit:fc,uid:B})).view.toArray();return z.sort((ce,he)=>{const De=B.indexOf(ce.uid),$e=B.indexOf(he.uid);return De-$e}),z.map(ce=>{const{url:he,name:De}=ce;return{id:`recent-dashboards${he}`,name:`${De}`,section:(0,Na.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:Fu,url:he}})}async function zu(B){if(B.length===0||!Va.Vt.user.isSignedIn&&!n.v.bootData.settings.anonymousEnabled)return[];const W=await(0,cc.getGrafanaSearcher)().search({kind:["dashboard","folder"],query:B,limit:mc});return W.view.map(J=>{const{url:ce,name:he,kind:De,location:$e}=J;return{id:`go/${De}${ce}`,name:`${he}`,section:De==="dashboard"?(0,Na.t)("command-palette.section.dashboard-search-results","Dashboards"):(0,Na.t)("command-palette.section.folder-search-results","Folders"),priority:uc,url:ce,subtitle:W.view.dataFrame.meta?.custom?.locationInfo[$e]?.name}})}function Qs(B,W){const[z,J]=(0,a.useState)([]),[ce,he]=(0,a.useState)(!1),De=(0,a.useRef)(0);return(0,a.useEffect)(()=>{const $e=Date.now();W&&B.length>0?(he(!0),Ku(B).then(et=>{$e>De.current&&(J(et),he(!1),De.current=$e)})):(J([]),he(!1),De.current=$e)},[W,B]),{searchResults:z,isFetchingSearchResults:ce}}var Bs=e(45984),ds=e(18271),gc=e(25337),_i=e(41197);const Gi=B=>{let W=B.children||[];if(B.id==="help"){const z=()=>{ds.Z.publish(new Bs.Dn({component:_i.B}))};B.children=[...W,...(0,gc.dP)(),...Hu(),{id:"keyboard-shortcuts",text:(0,Na.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:z}]}return B},Zo=(B,W)=>{const z=B.onClick;return B.onClick=()=>{(0,zr.ff)("grafana_navigation_item_clicked",{path:B.url??B.id,state:W?"expanded":"collapsed"}),z?.()},B.children&&(B.children=B.children.map(J=>Zo(J,W))),B},pc=(B,W)=>Boolean(B===W||Yi(B,W)),Yi=(B,W)=>Boolean(B.children?.some(z=>z===W?!0:Yi(z,W))),Jo=B=>B?.split("?")[0]??"",hc=(B,W)=>{const z=Jo(W?.url),J=Jo(B.url);return J&&J.length>z?.length},Mo=(B,W,z)=>{const J="/dashboards";for(const ce of B){const he=Jo(ce.url),De=S.u.stripBaseFromUrl(he);if(De&&ce.id!=="starred")if(De===W){z=ce;break}else if(De!=="/"&&W.startsWith(De))hc(ce,z)&&(z=ce);else if(De==="/alerting/list"&&W.startsWith("/alerting/notification/")){z=ce;break}else De===J&&W.startsWith("/d/")&&hc(ce,z)&&(z=ce);if(ce.children&&(z=Mo(ce.children,W,z)),Jo(z?.url)===W)return z}return z};function Hu(){const{buildInfo:B,licenseInfo:W}=n.v,z=W.stateInfo?` (${W.stateInfo})`:"",J=[];return J.push({target:"_blank",id:"version",text:`${B.edition}${z}`,url:W.licenseUrl,icon:"external-link-alt"}),B.hasUpdate&&J.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),J}var ar=e(21544),ji=e(42454);async function Xo(B,W){const z=(0,ar.j)({colors:{mode:B}});if(z.flags.topnav=Q.vc.featureToggles.topnav,ds.Z.publish(new F.hD(z)),Q.vc.theme2.isDark=z.isDark,W)return;const J=document.createElement("link");if(J.rel="stylesheet",J.href=Q.vc.bootData.themePaths[z.colors.mode],J.onload=()=>{const De=document.getElementsByTagName("link");for(let $e=0;$e<De.length;$e++){const et=De[$e];et.href&&et.href.includes(`build/grafana.${z.isDark?"light":"dark"}`)&&et.remove()}},document.body.appendChild(J),!za.Vt.isSignedIn)return;const ce=new ji.y("user"),he=await ce.load();await ce.update({...he,theme:z.colors.mode})}async function vc(B){const W=Q.vc.theme2;Xo(W.isDark?"light":"dark",B)}function Ec(B){return"navModel."+B.id}function yc(B,W=[]){const z=[];for(let J of B){J.id==="help"&&(J=Gi({...J}),delete J.url);const{url:ce,target:he,text:De,isCreateAction:$e,children:et,onClick:ot}=J,Dt=Boolean(et?.length);if(!(ce||ot||Dt))continue;const Ht=$e?(0,Na.t)("command-palette.section.actions","Actions"):(0,Na.t)("command-palette.section.pages","Pages"),Jt=$e?dc:$u,nn=W.map(Pn=>Pn.text).join(" > "),mn={id:Ec(J),name:De,section:Ht,url:ce,target:he,parent:W.length>0&&!$e?Ec(W[W.length-1]):void 0,perform:ot,priority:Jt,subtitle:$e?void 0:nn};if(z.push(mn),et?.length){const Pn=yc(et,[...W,J]);z.push(...Pn)}}return z}const Pc=B=>{const W=[{id:"preferences/theme",name:(0,Na.t)("command-palette.action.change-theme","Change theme..."),keywords:"interface color dark light",section:(0,Na.t)("command-palette.section.preferences","Preferences"),priority:Qo},{id:"preferences/dark-theme",name:(0,Na.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>Xo("dark"),parent:"preferences/theme",priority:Qo},{id:"preferences/light-theme",name:(0,Na.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>Xo("light"),parent:"preferences/theme",priority:Qo}],z=yc(B);return[...W,...z]};function Qi(B){const[W,z]=(0,a.useState)([]),[J,ce]=(0,a.useState)([]),{navBarTree:he}=(0,Cn.useSelector)(De=>({navBarTree:De.navBarTree}));return(0,a.useEffect)(()=>{const De=Pc(he);z(De)},[he]),(0,a.useEffect)(()=>{B||Vu().then(De=>ce(De)).catch(De=>{console.error("Error loading recent dashboard actions",De)})},[B]),B?W:[...J,...W]}var ku=e(22759);const qo={name:"none",priority:ps.Priority.NORMAL};function ei(B,W){return W.priority-B.priority}function Ur(){const{search:B,actions:W,rootActionId:z}=(0,ps.useKBar)(Dt=>({search:Dt.searchQuery,actions:Dt.actions,rootActionId:Dt.currentRootActionId})),J=a.useMemo(()=>Object.keys(W).reduce((Dt,Ht)=>{const Jt=W[Ht];if(!Jt.parent&&!z&&Dt.push(Jt),Jt.id===z)for(let nn=0;nn<Jt.children.length;nn++)Dt.push(Jt.children[nn]);return Dt},[]).sort(ei),[W,z]),ce=a.useCallback(Dt=>{let Ht=[];for(let Jt=0;Jt<Dt.length;Jt++)Ht.push(Dt[Jt]);return function Jt(nn,mn=Ht){for(let Pn=0;Pn<nn.length;Pn++)if(nn[Pn].children.length>0){let Wn=nn[Pn].children;for(let Za=0;Za<Wn.length;Za++)mn.push(Wn[Za]);Jt(nn[Pn].children,mn)}return mn}(Dt)},[]),he=!B,De=a.useMemo(()=>he?J:ce(J),[ce,J,he]),$e=_u(De,B),et=a.useMemo(()=>{let Dt={},Ht=[],Jt=[];for(let mn=0;mn<$e.length;mn++){const Pn=$e[mn],Wn=Pn.action,Za=Pn.score||ps.Priority.NORMAL,La={name:typeof Wn.section=="string"?Wn.section:Wn.section?.name||qo.name,priority:typeof Wn.section=="string"?Za:Wn.section?.priority||0+Za};Dt[La.name]||(Dt[La.name]=[],Ht.push(La)),Dt[La.name].push({priority:Wn.priority+Za,action:Wn})}Jt=Ht.sort(ei).map(mn=>({name:mn.name,actions:Dt[mn.name].sort(ei).map(Pn=>Pn.action)}));let nn=[];for(let mn=0;mn<Jt.length;mn++){let Pn=Jt[mn];Pn.name!==qo.name&&nn.push(Pn.name);for(let Wn=0;Wn<Pn.actions.length;Wn++)nn.push(Pn.actions[Wn])}return nn},[$e]),ot=a.useMemo(()=>z,[et]);return a.useMemo(()=>({results:et,rootActionId:ot}),[ot,et])}function _u(B,W){const z=Gu(),J=a.useMemo(()=>({filtered:B,search:W}),[B,W]),{filtered:ce,search:he}=(0,ki.useThrottledValue)(J);return a.useMemo(()=>{if(he.trim()==="")return ce.map(et=>({score:0,action:et}));const De=ce.map(({name:et,keywords:ot,subtitle:Dt})=>`${et} ${ot??""} ${Dt??""}`.toLowerCase()),$e=[];if(he.length>Cc){const et=he.toLowerCase();for(let ot=0;ot<De.length;ot++){const Ht=De[ot].indexOf(et);if(Ht>-1){const Jt=Ht*-1,nn=ce[ot];$e.push({score:Jt,action:nn})}}}else{const et=z.split(he).length,ot=1/0,Dt=et<5,[,Ht,Jt]=z.search(De,he,Dt,ot);if(Ht&&Jt)for(let nn=0;nn<Jt.length;nn++){const mn=Jt[nn],Pn=Jt.length-nn,Wn=ce[Ht.idx[mn]];$e.push({score:Pn,action:Wn})}}return $e},[ce,he,z])}const Cc=25;function Gu(){const B=a.useRef();return B.current||(B.current=new ku.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1})),B.current}function Yu(){const B=(0,Ge.wW)(Dc),{query:W,showing:z,searchQuery:J}=(0,ps.useKBar)(Dt=>({showing:Dt.visualState===ps.VisualState.showing,searchQuery:Dt.searchQuery})),ce=Qi(J);(0,ps.useRegisterActions)(ce,[ce]);const{searchResults:he,isFetchingSearchResults:De}=Qs(J,z),$e=(0,a.useRef)(null),{overlayProps:et}=(0,Yo.Ir)({isOpen:z,onClose:()=>W.setVisualState(ps.VisualState.animatingOut)},$e),{dialogProps:ot}=(0,oc.R)({},$e);return(0,a.useEffect)(()=>{z&&(0,zr.ff)("command_palette_opened")},[z]),ce.length>0?a.createElement(ps.KBarPortal,null,a.createElement(ps.KBarPositioner,{className:B.positioner},a.createElement(ps.KBarAnimator,{className:B.animator},a.createElement(ic.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},a.createElement("div",{...et,...ot},a.createElement("div",{className:B.searchContainer},De?a.createElement(jl.$,{className:B.spinner}):a.createElement(He.J,{name:"search",size:"md"}),a.createElement(ps.KBarSearch,{defaultPlaceholder:(0,Na.t)("command-palette.search-box.placeholder","Search or jump to..."),className:B.search})),a.createElement("div",{className:B.resultsContainer},a.createElement(ju,{searchResults:he}))))))):null}const ju=({searchResults:B})=>{const{results:W,rootActionId:z}=Ur(),J=(0,Ge.wW)(Dc),ce=(0,Na.t)("command-palette.section.dashboard-search-results","Dashboards"),he=(0,Na.t)("command-palette.section.folder-search-results","Folders"),De=(0,a.useMemo)(()=>B.filter(ot=>ot.id.startsWith("go/dashboard")).map(ot=>new ps.ActionImpl(ot,{store:{}})),[B]),$e=(0,a.useMemo)(()=>B.filter(ot=>ot.id.startsWith("go/folder")).map(ot=>new ps.ActionImpl(ot,{store:{}})),[B]),et=(0,a.useMemo)(()=>{const ot=[...W];return $e.length>0&&(ot.push(he),ot.push(...$e)),De.length>0&&(ot.push(ce),ot.push(...De)),ot},[W,ce,De,he,$e]);return a.createElement(Bu,{items:et,maxHeight:650,onRender:({item:ot,active:Dt})=>{const Ht=et[0]===ot;return typeof ot=="string"?a.createElement("div",{className:(0,Z.cx)(J.sectionHeader,Ht&&J.sectionHeaderFirst)},ot):a.createElement(bo,{action:ot,active:Dt,currentRootActionId:z})}})},Dc=B=>({positioner:(0,Z.css)({zIndex:B.zIndex.portal,marginTop:"0px",paddingTop:"4px !important","&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:B.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,Z.css)({maxWidth:B.breakpoints.values.md,width:"100%",background:B.colors.background.primary,color:B.colors.text.primary,borderRadius:B.shape.radius.default,border:`1px solid ${B.colors.border.weak}`,overflow:"hidden",boxShadow:B.shadows.z3}),searchContainer:(0,Z.css)({alignItems:"center",background:B.components.input.background,borderBottom:`1px solid ${B.colors.border.weak}`,display:"flex",gap:B.spacing(1),padding:B.spacing(1,2)}),search:(0,Z.css)({fontSize:B.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:B.components.input.text}),spinner:(0,Z.css)({height:"22px"}),resultsContainer:(0,Z.css)({paddingBottom:B.spacing(1)}),sectionHeader:(0,Z.css)({padding:B.spacing(1.5,2,2,2),fontSize:B.typography.bodySmall.fontSize,fontWeight:B.typography.fontWeightMedium,color:B.colors.text.secondary,borderTop:`1px solid ${B.colors.border.weak}`,marginTop:B.spacing(1)}),sectionHeaderFirst:(0,Z.css)({paddingBottom:B.spacing(1),borderTop:"none",marginTop:0})});var Zi=e(79288),xr=e(68226),_r=e(13211),Qu=e(29460);function Ji({children:B,icon:W,isActive:z,isChild:J,onClick:ce,target:he,url:De}){const $e=(0,Ge.l4)(),et=ti($e,z,J),ot=a.createElement("div",{className:et.linkContent},W&&a.createElement(He.J,{"data-testid":"dropdown-child-icon",name:W}),a.createElement("div",{className:et.linkText},B),he==="_blank"&&a.createElement(He.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:et.externalLinkIcon}));let Dt=a.createElement("button",{"data-testid":bn.wl.components.NavMenu.item,className:(0,Z.cx)(et.button,et.element),onClick:ce},ot);return De&&(Dt=!he&&De.startsWith("/")?a.createElement(Qu.r,{"data-testid":bn.wl.components.NavMenu.item,className:et.element,href:De,target:he,onClick:ce},ot):a.createElement("a",{"data-testid":bn.wl.components.NavMenu.item,href:De,target:he,className:et.element,onClick:ce},ot)),a.createElement("li",{className:et.listItem},Dt)}Ji.displayName="NavBarMenuItem";const ti=(B,W,z)=>({button:(0,Z.css)({backgroundColor:"unset",borderStyle:"unset"}),linkContent:(0,Z.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"}),linkText:(0,Z.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,Z.css)({color:B.colors.text.secondary}),element:(0,Z.css)({alignItems:"center",boxSizing:"border-box",position:"relative",color:W?B.colors.text.primary:B.colors.text.secondary,padding:B.spacing(1,1,1,z?5:0),...z&&{borderRadius:B.shape.borderRadius()},width:"100%","&:hover, &:focus-visible":{...z&&{background:B.colors.emphasize(B.colors.background.primary,.03)},textDecoration:"underline",color:B.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${B.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:W?"block":"none",content:'" "',height:B.spacing(3),position:"absolute",left:B.spacing(1),top:"50%",transform:"translateY(-50%)",width:B.spacing(.5),borderRadius:B.shape.borderRadius(1),backgroundImage:B.colors.gradients.brandVertical}}),listItem:(0,Z.css)({boxSizing:"border-box",position:"relative",display:"flex",width:"100%",...z&&{padding:B.spacing(0,2)}})});var ni=e(23934),Zu=e(40419);function Ju({link:B}){const W=(0,Ge.l4)(),z=Xu(W);if(B.icon==="grafana")return a.createElement(Oi.c.MenuLogo,{className:z.img});if(B.icon){const J=(0,Zu.toIconName)(B.icon);return a.createElement(He.J,{name:J??"link",size:"xl"})}else return a.createElement("img",{className:(0,Z.cx)(z.img,B.roundIcon&&z.round),src:B.img,alt:""})}function Xu(B){return{img:(0,Z.css)({height:B.spacing(3),width:B.spacing(3)}),round:(0,Z.css)({borderRadius:"50%"})}}const qu=({children:B})=>{const W=(0,Ge.wW)(em);return a.createElement("div",null,B,a.createElement("span",{className:W.highlight}))},em=B=>({highlight:Z.css`
      background-color: ${B.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      display: inline-block;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `});function xc({link:B,activeItem:W,children:z,className:J,onClose:ce}){const he=(0,Ge.wW)(tm),De=B.highlightText?qu:a.Fragment,$e=B===W,et=Yi(B,W),[ot,Dt]=(0,ni.Z)(`grafana.navigation.expanded[${B.text}]`,!1)??Boolean(et);return a.createElement(a.Fragment,null,a.createElement("div",{className:(0,Z.cx)(he.collapsibleSectionWrapper,J)},a.createElement(Ji,{isActive:B===W,onClick:()=>{B.onClick?.(),ce?.()},target:B.target,url:B.url},a.createElement("div",{className:(0,Z.cx)(he.labelWrapper,{[he.isActive]:$e,[he.hasActiveChild]:et})},a.createElement(De,null,a.createElement(Ju,{link:B})),B.text)),z&&a.createElement(q.zx,{"aria-label":`${ot?"Collapse":"Expand"} section`,variant:"secondary",fill:"text",className:he.collapseButton,onClick:()=>Dt(!ot)},a.createElement(He.J,{name:ot?"angle-up":"angle-down",size:"xl"}))),ot&&z)}const tm=B=>({collapsibleSectionWrapper:(0,Z.css)({alignItems:"center",display:"flex"}),collapseButton:(0,Z.css)({color:B.colors.text.disabled,padding:B.spacing(0,.5),marginRight:B.spacing(1)}),collapseWrapperActive:(0,Z.css)({backgroundColor:B.colors.action.disabledBackground}),collapseContent:(0,Z.css)({padding:0}),labelWrapper:(0,Z.css)({display:"grid",fontSize:B.typography.pxToRem(14),gridAutoFlow:"column",gridTemplateColumns:`${B.spacing(7)} auto`,placeItems:"center",fontWeight:B.typography.fontWeightMedium}),isActive:(0,Z.css)({color:B.colors.text.primary,"&::before":{display:"block",content:'" "',height:B.spacing(3),position:"absolute",left:B.spacing(1),top:"50%",transform:"translateY(-50%)",width:B.spacing(.5),borderRadius:B.shape.borderRadius(1),backgroundImage:B.colors.gradients.brandVertical}}),hasActiveChild:(0,Z.css)({color:B.colors.text.primary})});function nm({link:B,activeItem:W,onClose:z}){const J=(0,Ge.wW)(bc);return B.emptyMessage&&!Mc(B)?a.createElement(xc,{onClose:z,link:B,activeItem:W},a.createElement("ul",{className:J.children},a.createElement("div",{className:J.emptyMessage},B.emptyMessage))):a.createElement(xc,{onClose:z,link:B,activeItem:W},Mc(B)&&a.createElement("ul",{className:J.children},B.children.map(ce=>!ce.isCreateAction&&a.createElement(Ji,{key:`${B.text}-${ce.text}`,isActive:pc(ce,W),isChild:!0,onClick:()=>{ce.onClick?.(),z()},target:ce.target,url:ce.url},ce.text))))}const bc=B=>({children:(0,Z.css)({display:"flex",flexDirection:"column"}),flex:(0,Z.css)({display:"flex"}),itemWithoutMenu:(0,Z.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,Z.css)({height:"100%",width:"100%"}),iconContainer:(0,Z.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,Z.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${B.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,Z.css)({fontSize:B.typography.pxToRem(14),justifySelf:"start"}),emptyMessage:(0,Z.css)({color:B.colors.text.secondary,fontStyle:"italic",padding:B.spacing(1,1.5,1,7)})});function Mc(B){return Boolean(B.children&&B.children.length>0)}const Xi="350px";function qi({activeItem:B,navItems:W,searchBarHidden:z,onClose:J}){const ce=(0,Ge.l4)(),he=am(ce,z),De=ce.transitions.duration.shortest,$e=sm(ce,De),{chrome:et}=(0,Do.p)(),ot=et.useState(),Dt=(0,a.useRef)(null),Ht=(0,a.useRef)(null),{dialogProps:Jt}=(0,oc.R)({},Dt),[nn,mn]=(0,a.useState)(!1),Pn=()=>mn(!1),{overlayProps:Wn,underlayProps:Za}=(0,Yo.Ir)({isDismissable:!0,isOpen:!0,onClose:Pn},Dt);return(0,a.useEffect)(()=>{ot.megaMenuOpen&&mn(!0)},[ot.megaMenuOpen]),a.createElement(Yo.Xj,null,a.createElement(Zi.Z,{nodeRef:Dt,in:nn,unmountOnExit:!0,classNames:$e.overlay,timeout:{enter:De,exit:0},onExited:J},a.createElement(ic.MT,{contain:!0,autoFocus:!0},a.createElement("div",{"data-testid":"navbarmenu",ref:Dt,...Wn,...Jt,className:he.container},a.createElement("div",{className:he.mobileHeader},a.createElement(He.J,{name:"bars",size:"xl"}),a.createElement(it.h,{"aria-label":"Close navigation menu",name:"times",onClick:Pn,size:"xl",variant:"secondary"})),a.createElement("nav",{className:he.content},a.createElement(xr.$,{showScrollIndicators:!0,hideHorizontalTrack:!0},a.createElement("ul",{className:he.itemList},W.map(La=>a.createElement(nm,{link:La,onClose:Pn,activeItem:B,key:La.text})))))))),a.createElement(Zi.Z,{nodeRef:Ht,in:nn,unmountOnExit:!0,classNames:$e.backdrop,timeout:{enter:De,exit:0}},a.createElement("div",{ref:Ht,className:he.backdrop,...Za})))}qi.displayName="NavBarMenu";const am=(B,W)=>{const z=(W?_r.$:_r.$*2)+1;return{backdrop:(0,Z.css)({backdropFilter:"blur(1px)",backgroundColor:B.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:W?0:_r.$,zIndex:B.zIndex.modalBackdrop,[B.breakpoints.up("md")]:{top:z}}),container:(0,Z.css)({display:"flex",bottom:0,flexDirection:"column",left:0,marginRight:B.spacing(1.5),right:0,zIndex:B.zIndex.modal,position:"fixed",top:W?0:_r.$,backgroundColor:B.colors.background.primary,boxSizing:"content-box",flex:"1 1 0",[B.breakpoints.up("md")]:{borderRight:`1px solid ${B.colors.border.weak}`,right:"unset",top:z}}),content:(0,Z.css)({display:"flex",flexDirection:"column",flexGrow:1,minHeight:0}),mobileHeader:(0,Z.css)({display:"flex",justifyContent:"space-between",padding:B.spacing(1,1,1,2),borderBottom:`1px solid ${B.colors.border.weak}`,[B.breakpoints.up("md")]:{display:"none"}}),itemList:(0,Z.css)({display:"grid",gridAutoRows:`minmax(${B.spacing(6)}, auto)`,gridTemplateColumns:`minmax(${Xi}, auto)`,minWidth:Xi})}},sm=(B,W)=>{const z={transitionDuration:`${W}ms`,transitionTimingFunction:B.transitions.easing.easeInOut,[B.breakpoints.down("md")]:{overflow:"hidden"}},J={...z,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},ce={...z,transitionProperty:"opacity"},he={width:"100%",[B.breakpoints.up("md")]:{boxShadow:B.shadows.z3,width:Xi}},De={boxShadow:"none",width:0},$e={opacity:1},et={opacity:0};return{backdrop:{enter:(0,Z.css)(et),enterActive:(0,Z.css)(ce,$e),enterDone:(0,Z.css)($e)},overlay:{enter:(0,Z.css)(De),enterActive:(0,Z.css)(J,he),enterDone:(0,Z.css)(he)}}},Sc=a.memo(({onClose:B,searchBarHidden:W})=>{const z=(0,Cn.useSelector)(ot=>ot.navBarTree),J=(0,Ge.l4)(),ce=rm(J),he=(0,tr.TH)(),$e=(0,h.cloneDeep)(z).filter(ot=>ot.id!=="profile"&&ot.id!=="help").map(ot=>Zo(ot,!0)),et=Mo($e,he.pathname);return a.createElement("div",{className:ce.menuWrapper},a.createElement(qi,{activeItem:et,navItems:$e,onClose:B,searchBarHidden:W}))});Sc.displayName="MegaMenu";const rm=B=>({menuWrapper:(0,Z.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:B.zIndex.sidemenu})});var el=e(42879),no=e(64319),So=e(14393);function om({href:B,isCurrent:W,text:z}){const J=(0,Ge.wW)(im),ce=()=>{(0,zr.ff)("grafana_breadcrumb_clicked",{url:B})};return a.createElement("li",{className:J.breadcrumbWrapper},W?a.createElement("span",{"data-testid":el.z.Breadcrumbs.breadcrumb(z),className:J.breadcrumb,"aria-current":"page"},z):a.createElement(a.Fragment,null,a.createElement("a",{onClick:ce,"data-testid":el.z.Breadcrumbs.breadcrumb(z),className:(0,Z.cx)(J.breadcrumb,J.breadcrumbLink),href:B},z),a.createElement("div",{className:J.separator,"aria-hidden":!0},a.createElement(He.J,{name:"angle-right"}))))}const im=B=>{const W=(0,Z.css)({color:B.colors.text.secondary});return{breadcrumb:(0,Z.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:B.spacing(0,.5),whiteSpace:"nowrap",color:B.colors.text.secondary}),breadcrumbLink:(0,Z.css)({color:B.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,Z.css)({alignItems:"center",color:B.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[B.breakpoints.down("md")]:{display:"none","&:nth-last-child(2)":{display:"flex",flexDirection:"row-reverse",[`.${W}`]:{transform:"rotate(180deg)"}},"&:first-child&:last-child":{display:"flex",[`.${W}`]:{display:"none"}}}}),separator:W}};function lm({breadcrumbs:B,className:W}){const z=(0,Ge.wW)(cm);return a.createElement("nav",{"aria-label":"Breadcrumbs",className:W},a.createElement("ol",{className:z.breadcrumbs},B.map((J,ce)=>a.createElement(om,{...J,isCurrent:ce===B.length-1,key:ce}))))}const cm=B=>({breadcrumbs:(0,Z.css)({display:"flex",alignItems:"center",flexWrap:"nowrap"})});var dm=e(67345),Tc=e(9956);function um({actions:B,searchBarHidden:W,sectionNav:z,pageNav:J,onToggleMegaMenu:ce,onToggleSearchBar:he,onToggleKioskMode:De}){const $e=(0,Cn.useSelector)(Dt=>Dt.navIndex)[So.Qz],et=(0,Ge.wW)(mm),ot=(0,dm.t)(z,J,$e);return a.createElement("div",{"data-testid":el.z.NavToolbar.container,className:et.pageToolbar},a.createElement("div",{className:et.menuButton},a.createElement(it.h,{name:"bars",tooltip:(0,Na.t)("navigation.toolbar.toggle-menu","Toggle menu"),tooltipPlacement:"bottom",size:"xl",onClick:ce})),a.createElement(lm,{breadcrumbs:ot,className:et.breadcrumbs}),a.createElement("div",{className:et.actions},B,B&&a.createElement(Tc.M,null),W&&a.createElement(no.h,{onClick:De,narrow:!0,title:(0,Na.t)("navigation.toolbar.enable-kiosk","Enable kiosk mode"),icon:"monitor"}),a.createElement(no.h,{onClick:he,narrow:!0,title:(0,Na.t)("navigation.toolbar.toggle-search-bar","Toggle top search bar")},a.createElement(He.J,{name:W?"angle-down":"angle-up",size:"xl"}))))}const mm=B=>({breadcrumbs:(0,Z.css)({maxWidth:"50%"}),pageToolbar:(0,Z.css)({height:_r.$,display:"flex",padding:B.spacing(0,1,0,2),alignItems:"center"}),menuButton:(0,Z.css)({display:"flex",alignItems:"center",marginRight:B.spacing(1)}),actions:(0,Z.css)({label:"NavToolbar-actions",display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:B.spacing(1),flexGrow:1,gap:B.spacing(.5),minWidth:0,".body-drawer-open &":{display:"none"}})});function Oc({item:B,isSectionRoot:W=!1}){const z=(0,Ge.wW)(fm),J=B.children?.filter(et=>!et.hideFromTabs),ce=W&&Boolean(B.children[0].children?.length),he=(0,Z.cx)({[z.link]:!0,[z.activeStyle]:B.active,[z.isSection]:Boolean(J?.length)||B.isSection,[z.isSectionRoot]:W,[z.noRootMargin]:ce});let De=null;B.img?De=a.createElement("img",{"data-testid":"section-image",className:z.sectionImg,src:B.img,alt:""}):B.icon&&(De=a.createElement(He.J,{"data-testid":"section-icon",className:z.sectionImg,name:B.icon}));const $e=()=>{(0,zr.ff)("grafana_navigation_item_clicked",{path:B.url??B.id,sectionNav:!0})};return a.createElement(a.Fragment,null,a.createElement("a",{onClick:$e,href:B.url,className:he,"aria-label":bn.wl.components.Tab.title(B.text),role:"tab","aria-selected":B.active},W&&De,B.text,B.tabSuffix&&a.createElement(B.tabSuffix,{className:z.suffix})),J?.map((et,ot)=>a.createElement(Oc,{item:et,key:ot})))}const fm=B=>({link:Z.css`
      padding: ${B.spacing(1,0,1,1.5)};
      display: flex;
      align-items: flex-start;
      border-radius: ${B.shape.radius.default};
      gap: ${B.spacing(1)};
      height: 100%;
      position: relative;
      color: ${B.colors.text.secondary};

      &:hover,
      &:focus {
        text-decoration: underline;
        z-index: 1;
      }
    `,activeStyle:Z.css`
      label: activeTabStyle;
      color: ${B.colors.text.primary};
      font-weight: ${B.typography.fontWeightMedium};
      background: ${B.colors.emphasize(B.colors.background.canvas,.03)};

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: ${B.shape.radius.default};
        background-image: ${B.colors.gradients.brandVertical};
      }
    `,suffix:Z.css`
      margin-left: ${B.spacing(1)};
    `,sectionImg:(0,Z.css)({margin:"6px 0",width:B.spacing(2)}),isSectionRoot:(0,Z.css)({fontSize:B.typography.h4.fontSize,marginTop:0,marginBottom:B.spacing(2),fontWeight:B.typography.fontWeightMedium}),isSection:(0,Z.css)({color:B.colors.text.primary,fontSize:B.typography.h5.fontSize,marginTop:B.spacing(2),fontWeight:B.typography.fontWeightMedium}),noRootMargin:(0,Z.css)({marginBottom:0})}),Ic=({isExpanded:B,onClick:W})=>{const z=(0,Ge.l4)(),J=tl(z);return a.createElement(q.zx,{title:"Toggle section navigation","aria-label":B?"Close section navigation":"Open section navigation",icon:"arrow-to-right",className:rc()(J.icon,{[J.iconExpanded]:B}),variant:"secondary",fill:"text",size:"md",onClick:W})};Ic.displayName="SectionNavToggle";const tl=B=>({icon:(0,Z.css)({alignSelf:"center",margin:B.spacing(1,0),transform:"rotate(90deg)",transition:B.transitions.create("opacity"),color:B.colors.text.secondary,zIndex:1,[B.breakpoints.up("md")]:{alignSelf:"flex-start",position:"relative",left:0,margin:B.spacing(0,0,0,1),top:B.spacing(2),transform:"none"},"div:hover > &, &:focus":{opacity:1}}),iconExpanded:(0,Z.css)({rotate:"180deg",[B.breakpoints.up("md")]:{opacity:0,margin:0,position:"absolute",right:0,left:"initial"}})});function gm({model:B}){const W=(0,Ge.wW)(pm),{isExpanded:z,onToggleSectionNav:J}=nl();return Boolean(B.main?.children?.length)?a.createElement("div",{className:W.navContainer},a.createElement("nav",{className:(0,Z.cx)(W.nav,{[W.navExpanded]:z})},a.createElement(xr.$,{showScrollIndicators:!0},a.createElement("div",{className:W.items,role:"tablist"},a.createElement(Oc,{item:B.main,isSectionRoot:!0})))),a.createElement(Ic,{isExpanded:z,onClick:J})):null}function nl(){const B=(0,Ge.l4)(),W=window.matchMedia(`(max-width: ${B.breakpoints.values.lg}px)`).matches,[z,J]=(0,ni.Z)("grafana.sectionNav.expanded",!W),[ce,he]=(0,a.useState)(!W&&z);return(0,a.useEffect)(()=>{const $e=window.matchMedia(`(max-width: ${B.breakpoints.values.lg}px)`),et=ot=>he(ot.matches?!1:z);return $e.addEventListener("change",et),()=>$e.removeEventListener("change",et)},[z,B.breakpoints.values.lg]),{isExpanded:ce,onToggleSectionNav:()=>{J(!ce),he(!ce)}}}const pm=B=>({navContainer:(0,Z.css)({display:"flex",flexDirection:"column",position:"relative",[B.breakpoints.up("md")]:{flexDirection:"row"}}),nav:(0,Z.css)({display:"flex",flexDirection:"column",background:B.colors.background.canvas,flexShrink:0,transition:B.transitions.create(["width","max-height"]),maxHeight:0,visibility:"hidden",[B.breakpoints.up("md")]:{width:0,maxHeight:"unset"}}),navExpanded:(0,Z.css)({maxHeight:"50vh",visibility:"visible",[B.breakpoints.up("md")]:{width:"250px",maxHeight:"unset"}}),items:(0,Z.css)({display:"flex",flexDirection:"column",padding:B.spacing(2,1,2,2),minWidth:"250px",[B.breakpoints.up("md")]:{padding:B.spacing(4.5,1,2,2)}})});var al=e(71698),hm=e(95831),wr=e(30979),cr=e(98699),Gr=e(6981),pg=e(27443),vm=e(61744),Rc=e(53764),Ac=e(13724);function Em({feedUrl:B}){const W=(0,Ge.wW)(Lc),{state:z,getNews:J}=(0,Ac.j)(B),[ce,he]=(0,pg.Z)();return(0,a.useEffect)(()=>{J()},[J]),z.loading||z.error?a.createElement("div",{className:W.innerWrapper},z.loading&&a.createElement(vm.u,{text:"Loading..."}),z.error&&z.error.message):z.value?a.createElement("div",{ref:ce},he.width>0&&z.value.map((De,$e)=>a.createElement(Rc.S,{key:$e,index:$e,showImage:!0,width:he.width,data:z.value})),a.createElement("div",{className:W.grot},a.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog"},a.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})))):null}const Lc=B=>({innerWrapper:Z.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,grot:(0,Z.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:B.spacing(5,0),img:{width:"186px",height:"186px"}})});function ym({className:B}){const[W,z]=(0,hm.Z)(!1),J=(0,Ge.wW)(Pm);return a.createElement(a.Fragment,null,a.createElement(no.h,{className:B,onClick:z,iconOnly:!0,icon:"rss","aria-label":"News"}),W&&a.createElement(wr.d,{title:a.createElement("div",{className:J.title},a.createElement(cr.H3,null,(0,Na.t)("news.title","Latest from the blog")),a.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog",className:J.grot},a.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})),a.createElement("div",{className:J.actions},a.createElement(q.zx,{icon:"times",variant:"secondary",fill:"text",onClick:z,"aria-label":bn.wl.components.Drawer.General.close}))),scrollableContent:!0,onClose:z,size:"md"},a.createElement(Em,{feedUrl:Gr.k})))}const Pm=B=>({title:(0,Z.css)({display:"flex",alignItems:"center",justifyContent:"center",gap:B.spacing(2),borderBottom:`1px solid ${B.colors.border.weak}`}),grot:(0,Z.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:B.spacing(2,0),img:{width:"75px",height:"75px"}}),actions:(0,Z.css)({position:"absolute",right:B.spacing(1),top:B.spacing(2)})});function ai({breakpoint:B,onChange:W}){(0,a.useEffect)(()=>{const z=window.matchMedia(`(min-width: ${B}px)`),J=ce=>W(ce);return z.addEventListener("change",J),()=>z.removeEventListener("change",J)},[B,W])}var Bc=e(2183);function Cm({orgs:B,onSelectChange:W}){const z=(0,Ge.wW)(Dm);return a.createElement(Fa.b,{"aria-label":"Change organization",variant:"secondary",buttonCss:z.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:B.map(J=>({label:J.name,description:J.role,value:J})),onChange:W,icon:"building"})}const Dm=B=>({buttonCss:(0,Z.css)({color:B.colors.text.secondary,"&:hover":{color:B.colors.text.primary}})});function xm({orgs:B,onSelectChange:W}){const z=(0,Ge.wW)(Nc),{orgName:J,orgId:ce,orgRole:he}=Va.Vt.user,[De,$e]=(0,a.useState)(()=>({label:J,value:{role:he,orgId:ce,name:J},description:he})),et=ot=>{$e(ot),W(ot)};return a.createElement(ae.Ph,{"aria-label":"Change organization",width:"auto",value:De,prefix:a.createElement(He.J,{className:"prefix-icon",name:"building"}),className:z.select,options:B.map(ot=>({label:ot.name,description:ot.role,value:ot})),onChange:et})}const Nc=B=>({select:(0,Z.css)({border:"none",background:"none",color:B.colors.text.secondary,"&:hover":{color:B.colors.text.primary,"& .prefix-icon":(0,Z.css)({color:B.colors.text.primary})}})});function Uc(){const B=(0,Ge.l4)(),W=(0,Cn.useDispatch)(),z=(0,Cn.useSelector)(et=>et.organization.userOrgs),J=et=>{et.value&&((0,Bc.Q$)(et.value.orgId),I.E1.push(`/?orgId=${et.value.orgId}`),window.location.reload())};(0,a.useEffect)(()=>{Va.Vt.isSignedIn&&W((0,Bc.JE)())},[W]);const ce=B.breakpoints.values.sm,[he,De]=(0,a.useState)(!window.matchMedia(`(min-width: ${ce}px)`).matches);if(ai({breakpoint:ce,onChange:et=>{De(!et.matches)}}),z?.length<=1)return null;const $e=he?Cm:xm;return a.createElement($e,{orgs:z,onSelectChange:J})}var To=e(95130);function wc(B){const W=[];for(const z of B)z.isCreateAction&&W.push(z),z.children&&W.push(...wc(z.children));return W}const bm=({})=>{const B=(0,Ge.wW)(Mm),W=(0,Ge.l4)(),z=(0,Cn.useSelector)(Dt=>Dt.navBarTree),J=W.breakpoints.values.sm,[ce,he]=(0,a.useState)(!1),[De,$e]=(0,a.useState)(!window.matchMedia(`(min-width: ${J}px)`).matches),et=(0,a.useMemo)(()=>wc(z),[z]);ai({breakpoint:J,onChange:Dt=>{$e(!Dt.matches)}});const ot=()=>a.createElement(To.v,null,et.map((Dt,Ht)=>a.createElement(To.v.Item,{key:Ht,url:Dt.url,label:Dt.text,onClick:()=>(0,zr.ff)("grafana_menu_item_clicked",{url:Dt.url,from:"quickadd"})})));return et.length>0?a.createElement(a.Fragment,null,a.createElement(al.L,{overlay:ot,placement:"bottom-end",onVisibleChange:he},a.createElement(no.h,{iconOnly:!0,icon:De?"plus-circle":"plus",isOpen:De?void 0:ce,"aria-label":"New"})),a.createElement(Tc.M,{className:B.separator})):null},Mm=B=>({buttonContent:(0,Z.css)({alignItems:"center",display:"flex"}),buttonText:(0,Z.css)({[B.breakpoints.down("md")]:{display:"none"}}),separator:(0,Z.css)({[B.breakpoints.down("sm")]:{display:"none"}})});function Sm(){const B=(0,tr.TH)(),W=(0,Ge.wW)(Tm),z=t.QX.sanitizeUrl(S.u.getUrlForPartial(B,{forceLogin:"true"}));return a.createElement("a",{className:W.link,href:z,target:"_self"},"Sign in")}const Tm=B=>({link:(0,Z.css)({paddingRight:B.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var Wc=e(42044);function Fc({node:B}){const W=(0,Ge.wW)(Om),z=Zo((0,h.cloneDeep)(B),!1);return z?a.createElement(To.v,{header:a.createElement("div",{onClick:J=>J.stopPropagation(),className:W.header},a.createElement("div",null,z.text),z.subTitle&&a.createElement("div",{className:W.subTitle},z.subTitle))},z.children?.map(J=>J.url?a.createElement(Wc.s,{url:J.url,label:J.text,icon:J.icon,target:J.target,key:J.id}):a.createElement(Wc.s,{icon:J.icon,onClick:J.onClick,label:J.text,key:J.id}))):null}const Om=B=>({header:(0,Z.css)({fontSize:B.typography.h5.fontSize,fontWeight:B.typography.h5.fontWeight,padding:B.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,Z.css)({color:B.colors.text.secondary,fontSize:B.typography.bodySmall.fontSize})});var Im=e(85419),$c=e(43226);function Kc(){const B=(0,Ge.l4)(),{query:W}=(0,ps.useKBar)(De=>({kbarSearchQuery:De.searchQuery,kbarIsOpen:De.visualState===ps.VisualState.showing})),z=B.breakpoints.values.sm,[J,ce]=(0,a.useState)(!window.matchMedia(`(min-width: ${z}px)`).matches);ai({breakpoint:z,onChange:De=>{ce(!De.matches)}});const he=()=>{W.toggle()};return J?a.createElement(no.h,{iconOnly:!0,icon:"search","aria-label":(0,Na.t)("nav.search.placeholderCommandPalette","Search or jump to..."),onClick:he}):a.createElement(Vc,{onClick:he})}function Vc({onClick:B}){const W=(0,Ge.wW)(si),z=(0,a.useMemo)(()=>(0,$c.vl)(),[]);return a.createElement("div",{className:W.wrapper},a.createElement("div",{className:W.inputWrapper},a.createElement("div",{className:W.prefix},a.createElement(He.J,{name:"search"})),a.createElement("button",{className:W.fakeInput,onClick:B},(0,Na.t)("nav.search.placeholderCommandPalette","Search or jump to...")),a.createElement("div",{className:W.suffix},a.createElement(He.J,{name:"keyboard"}),a.createElement("span",{className:W.shortcut},z,"+k"))))}const si=B=>{const W=(0,de.H)({theme:B});return{wrapper:W.wrapper,inputWrapper:W.inputWrapper,prefix:W.prefix,suffix:(0,Z.css)([W.suffix,{display:"flex",gap:B.spacing(.5)}]),shortcut:(0,Z.css)({fontSize:B.typography.bodySmall.fontSize}),fakeInput:(0,Z.css)([W.input,{textAlign:"left",paddingLeft:28,color:B.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":Z.css`
          ${(0,Im.focusCss)(B)}
        `}]),button:(0,Z.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}};function sl({children:B,align:W="left"}){const z=(0,Ge.wW)(zc),ce=(0,Ge.l4)().breakpoints.values.sm,[he,De]=(0,a.useState)(!window.matchMedia(`(min-width: ${ce}px)`).matches);return ai({breakpoint:ce,onChange:$e=>{De(!$e.matches)}}),he?a.createElement(a.Fragment,null,B):a.createElement("div",{"data-test-id":"wrapper",className:(0,Z.cx)(z.wrapper,{[z[W]]:W==="right"})},B)}const zc=B=>({wrapper:(0,Z.css)({display:"flex",gap:B.spacing(.5),alignItems:"center"}),right:(0,Z.css)({justifyContent:"flex-end"}),left:(0,Z.css)({}),center:(0,Z.css)({})}),Rm=a.memo(function(){const W=(0,Ge.wW)(ri),z=(0,Cn.useSelector)(et=>et.navIndex),J=(0,tr.TH)(),ce=(0,h.cloneDeep)(z.help),he=ce?Gi(ce):void 0,De=z.profile;let $e=Q.vc.appSubUrl||"/";return!Q.vc.bootData.user.isSignedIn&&!Q.vc.anonymousEnabled&&($e=t.QX.sanitizeUrl(S.u.getUrlForPartial(J,{forceLogin:"true"}))),a.createElement("div",{className:W.layout},a.createElement(sl,null,a.createElement("a",{className:W.logo,href:$e,title:"Go to home"},a.createElement(Oi.c.MenuLogo,{className:W.img})),a.createElement(Uc,null)),a.createElement(sl,null,a.createElement(Kc,null)),a.createElement(sl,{align:"right"},a.createElement(bm,null),he&&a.createElement(al.L,{overlay:()=>a.createElement(Fc,{node:he}),placement:"bottom-end"},a.createElement(no.h,{iconOnly:!0,icon:"question-circle","aria-label":"Help"})),a.createElement(ym,{className:W.newsButton}),!za.Vt.user.isSignedIn&&a.createElement(Sm,null),De&&a.createElement(al.L,{overlay:()=>a.createElement(Fc,{node:De}),placement:"bottom-end"},a.createElement(no.h,{className:W.profileButton,imgSrc:za.Vt.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"}))))}),ri=B=>({layout:(0,Z.css)({height:_r.$,display:"flex",gap:B.spacing(1),alignItems:"center",padding:B.spacing(0,1,0,2),borderBottom:`1px solid ${B.colors.border.weak}`,justifyContent:"space-between",[B.breakpoints.up("sm")]:{gridTemplateColumns:"1.5fr minmax(240px, 1fr) 1.5fr",display:"grid",justifyContent:"flex-start"}}),img:(0,Z.css)({height:B.spacing(3),width:B.spacing(3)}),logo:(0,Z.css)({display:"flex"}),profileButton:(0,Z.css)({padding:B.spacing(0,.25),img:{borderRadius:"50%",height:"24px",marginRight:0,width:"24px"}}),newsButton:(0,Z.css)({[B.breakpoints.down("sm")]:{display:"none"}})});function Hc({children:B}){const W=(0,Ge.wW)(Am),{chrome:z}=(0,Do.p)(),J=z.useState(),ce=J.searchBarHidden||J.kioskMode===Cn.KioskMode.TV,he=(0,Z.cx)({[W.content]:!0,[W.contentNoSearchBar]:ce,[W.contentChromeless]:J.chromeless});return a.createElement("main",{className:rc()("main-view",ce&&"main-view--search-bar-hidden")},!J.chromeless&&a.createElement("div",{className:(0,Z.cx)(W.topNav)},!ce&&a.createElement(Rm,null),a.createElement(um,{searchBarHidden:ce,sectionNav:J.sectionNav.node,pageNav:J.pageNav,actions:J.actions,onToggleSearchBar:z.onToggleSearchBar,onToggleMegaMenu:z.onToggleMegaMenu,onToggleKioskMode:z.onToggleKioskMode})),a.createElement("div",{className:he},a.createElement("div",{className:W.panes},J.layout===io.Q.Standard&&J.sectionNav&&a.createElement(gm,{model:J.sectionNav}),a.createElement("div",{className:W.pageContainer},B))),!J.chromeless&&a.createElement(a.Fragment,null,a.createElement(Sc,{searchBarHidden:ce,onClose:()=>z.setMegaMenu(!1)}),a.createElement(Yu,null)))}const Am=B=>{const W=B.isDark?"0 0.6px 1.5px rgb(0 0 0), 0 2px 4px rgb(0 0 0 / 40%), 0 5px 10px rgb(0 0 0 / 23%)":"0 4px 8px rgb(0 0 0 / 4%)";return{content:(0,Z.css)({display:"flex",flexDirection:"column",paddingTop:_r.$*2,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,Z.css)({paddingTop:_r.$}),contentChromeless:(0,Z.css)({paddingTop:0}),topNav:(0,Z.css)({display:"flex",position:"fixed",zIndex:B.zIndex.navbarFixed,left:0,right:0,boxShadow:W,background:B.colors.background.primary,flexDirection:"column",borderBottom:`1px solid ${B.colors.border.weak}`}),panes:(0,Z.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[B.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,Z.css)({label:"page-container",flexGrow:1,minHeight:0})}};var oi=e(659),rl=e(98864),ii=e(60499),Lm=e(49380);function hg({appNotification:B,onClearNotification:W}){const z=(0,Ge.wW)(kc);(0,Lm.Z)(()=>{setTimeout(()=>{W(B.id)},Cn.timeoutMap[B.severity])});const J=B.component||B.text||B.traceId;return a.createElement(ga.b,{severity:B.severity,title:B.title,onRemove:()=>W(B.id),elevated:!0},J&&a.createElement("div",{className:z.wrapper},a.createElement("span",null,B.component||B.text),B.traceId&&a.createElement("span",{className:z.trace},"Trace ID: ",B.traceId)))}function kc(B){return{wrapper:(0,Z.css)({display:"flex",flexDirection:"column"}),trace:(0,Z.css)({fontSize:B.typography.pxToRem(10)})}}function Bm(){const B=(0,Cn.useSelector)(ce=>(0,rl.vo)(ce.appNotifications)),W=(0,Cn.useDispatch)(),z=(0,Ge.wW)(Nm);(0,a.useEffect)(()=>{ds.Z.on(to.SI.alertWarning,ce=>W((0,oi.$l)((0,ii.ZR)(...ce)))),ds.Z.on(to.SI.alertSuccess,ce=>W((0,oi.$l)((0,ii.AT)(...ce)))),ds.Z.on(to.SI.alertError,ce=>W((0,oi.$l)((0,ii.t_)(...ce))))},[W]);const J=ce=>{W((0,oi.ad)(ce))};return a.createElement("div",{className:z.wrapper},a.createElement(Vn.wc,null,B.map((ce,he)=>a.createElement(hg,{key:`${ce.id}-${he}`,appNotification:ce,onClearNotification:J}))))}function Nm(B){return{wrapper:(0,Z.css)({label:"app-notifications-list",zIndex:B.zIndex.portal,minWidth:400,maxWidth:600,position:"fixed",right:6,top:88})}}var Um=e(13426),Oo=e.n(Um),_c=e(39198);function wm({error:B,errorInfo:W}){const z=(0,tr.TH)(),J=B?.name==="ChunkLoadError";return(0,a.useEffect)(()=>{J&&z.search.indexOf("chunkNotFound")===-1&&(window.location.href=S.u.getUrlForPartial(z,{chunkNotFound:!0}))},[z,J]),a.createElement(Ls.T,{navId:"error",layout:io.Q.Canvas},a.createElement("div",{className:Wm()},J&&a.createElement("div",null,a.createElement("h2",null,"Unable to find application file"),a.createElement("br",null),a.createElement("h2",{className:"page-heading"},"Grafana has likely been updated. Please try reloading the page."),a.createElement("br",null),a.createElement("div",{className:"gf-form-group"},a.createElement(q.zx,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload()},"Reload")),a.createElement(_c.X,{title:"Error details",error:B,errorInfo:W})),!J&&a.createElement(_c.X,{title:"An unexpected error happened",error:B,errorInfo:W})))}const Wm=(0,se.B)(()=>Z.css`
    width: 500px;
    margin: 64px auto;
  `);function Fm(){const B=(0,Ge.wW)($m);return a.createElement("div",{className:B.loadingPage},a.createElement(vm.u,{text:"Loading..."}))}const $m=()=>({loadingPage:(0,Z.css)({height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function Km(B){const{chrome:W,keybindings:z}=(0,Do.p)();return W.setMatchedRoute(B.route),(0,a.useLayoutEffect)(()=>{z.clearAndInitGlobalBindings(B.route)},[z,B.route]),(0,a.useEffect)(()=>(Gc(B.route),ol(),(0,I.GQ)("GrafanaRoute",!1,"Mounted",B.match),()=>{(0,I.GQ)("GrafanaRoute",!1,"Unmounted",B.route),Gc(B.route,!0)}),[]),(0,a.useEffect)(()=>{ol(),(0,zr.sm)(),(0,I.GQ)("GrafanaRoute",!1,"Updated",B)}),(0,I.GQ)("GrafanaRoute",!1,"Rendered",B.route),a.createElement(Ll.SV,null,({error:J,errorInfo:ce})=>J?a.createElement(wm,{error:J,errorInfo:ce}):a.createElement(a.Suspense,{fallback:a.createElement(Fm,null)},a.createElement(B.route.component,{...B,queryParams:(0,I.Ox)(B.location.search)})))}function Vm(B){return B.pageClass?B.pageClass.split(" "):[]}function Gc(B,W=!1){for(const z of Vm(B))W?document.body.classList.remove(z):document.body.classList.add(z)}function ol(){document.body.classList.remove("sidemenu-open--xs");const B=document.getElementById("tooltip");B?.parentElement?.removeChild(B);const W=document.querySelectorAll(".tooltip");for(let z=0;z<W.length;z++){const J=W[z];J.parentElement?.removeChild(J)}for(const z of Oo().drops)z.destroy()}var il=e(92973),Yc=e(75118);class zm extends a.PureComponent{constructor(){super(...arguments),this.styles=Hm(n.v.theme2),this.state={},this.initListener=()=>{const W=(0,Yc.gj)();W&&(this.subscription=W.getConnectionState().subscribe({next:z=>{this.setState({show:!z})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:W}=this.state;return W?!Va.Vt.isSignedIn||!n.v.liveEnabled||Va.Vt.user.orgRole===""?null:a.createElement("div",{className:this.styles.foot},a.createElement(ga.b,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})):null}}const Hm=(0,se.B)(B=>({foot:Z.css`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:Z.css`
      max-width: 400px;
      margin: auto;
    `}));let ll=[],jc=[];function km(B){ll.push(B)}function vg(B){jc.push(B)}class cl extends a.Component{constructor(W){super(W),this.renderRoute=z=>{const J=z.roles?z.roles():[];return a.createElement(As.CompatRoute,{exact:z.exact===void 0?!0:z.exact,sensitive:z.sensitive===void 0?!1:z.sensitive,path:z.path,key:z.path,render:ce=>J?.length&&!J.some(he=>Va.Vt.hasRole(he))?a.createElement(tr.l_,{to:"/"}):a.createElement(Km,{...ce,route:z})})},this.state={}}async componentDidMount(){await Au(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return a.createElement(tr.rs,null,Mu().map(W=>this.renderRoute(W)))}render(){const{app:W}=this.props,{ready:z}=this.state;(0,I.GQ)("AppWrapper",!1,"rendering");const J=ce=>{(0,zr.ff)("command_palette_action_selected",{actionId:ce.id,actionName:ce.name})};return a.createElement(yr.Provider,{store:Ha.h},a.createElement(Ll.z4,{style:"page"},a.createElement(Do.h.Provider,{value:W.context},a.createElement(il.f,{value:n.v.theme2},a.createElement(ps.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:J}}},a.createElement($o.$i,null,a.createElement(Fd.n,null),a.createElement("div",{className:"grafana-app"},a.createElement(tr.F0,{history:I.E1.getHistory()},a.createElement(As.CompatRouter,null,a.createElement(Hc,null,jc.map((ce,he)=>a.createElement(ce,{key:he.toString()})),a.createElement(sc,null),a.createElement(Bm,null),z&&this.renderRoutes(),ll.map((ce,he)=>a.createElement(ce,{key:he.toString()})))))),a.createElement(zm,null),a.createElement($o.Y0,null),a.createElement(Ti.lO,null)))))))}}var _m=e(81653),Qc=e(924),Zc=e(58379);function Jc(B,W){if(B===W)return!0;if(!(B instanceof Object)||!(W instanceof Object))return!1;const z=Object.keys(B),J=z.length;for(let ce=0;ce<J;ce++)if(!(z[ce]in W))return!1;for(let ce=0;ce<J;ce++)if(B[z[ce]]!==W[z[ce]])return!1;return J===Object.keys(W).length}class Xc{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.routeChangeHandled=!0,this.state=new Qc.X({chromeless:!0,sectionNav:{node:{text:(0,Na.t)("nav.home.title","Home")},main:{text:""}},searchBarHidden:Zc.Z.getBool(this.searchBarStorageKey,!1),kioskMode:null,layout:io.Q.Canvas}),this.onToggleMegaMenu=()=>{const W=!this.state.getValue().megaMenuOpen;(0,zr.ff)("grafana_toggle_menu_clicked",{action:W?"open":"close"}),this.update({megaMenuOpen:W})},this.setMegaMenu=W=>{this.update({megaMenuOpen:W})},this.onToggleSearchBar=()=>{const W=!this.state.getValue().searchBarHidden;Zc.Z.set(this.searchBarStorageKey,W),this.update({searchBarHidden:W})},this.onToggleKioskMode=()=>{const W=this.getNextKioskMode();this.update({kioskMode:W}),I.E1.partial({kiosk:this.getKioskUrlValue(W)})}}setMatchedRoute(W){this.currentRoute!==W&&(this.currentRoute=W,this.routeChangeHandled=!1)}update(W){const z=this.state.getValue(),J={...z};this.routeChangeHandled||(J.actions=void 0,J.pageNav=void 0,J.sectionNav={node:{text:(0,Na.t)("nav.home.title","Home")},main:{text:""}},J.chromeless=this.currentRoute?.chromeless,J.layout=io.Q.Standard,this.routeChangeHandled=!0),Object.assign(J,W),J.chromeless=J.kioskMode===Cn.KioskMode.Full||this.currentRoute?.chromeless,this.ignoreStateUpdate(J,z)||this.state.next(J)}ignoreStateUpdate(W,z){return!!(Jc(W,z)||(W.sectionNav!==z.sectionNav||W.pageNav!==z.pageNav)&&W.actions===z.actions&&W.layout===z.layout&&qc(W.sectionNav.node,z.sectionNav.node)&&qc(W.pageNav,z.pageNav))}useState(){return(0,_m.Z)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),I.E1.partial({kiosk:null})}setKioskModeFromUrl(W){switch(W){case"tv":this.update({kioskMode:Cn.KioskMode.TV});break;case"1":case!0:this.update({kioskMode:Cn.KioskMode.Full})}}getKioskUrlValue(W){switch(W){case Cn.KioskMode.TV:return"tv";case Cn.KioskMode.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:W,searchBarHidden:z}=this.state.getValue();return z||W===Cn.KioskMode.TV?(ds.Z.emit(to.SI.alertSuccess,[(0,Na.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),Cn.KioskMode.Full):W?null:Cn.KioskMode.TV}}function qc(B,W){if(B===W)return!0;const z=B?.children?.find(ce=>ce.active),J=W?.children?.find(ce=>ce.active);return B?.text===W?.text&&B?.url===W?.url&&z?.url===J?.url}var ed=e(52974);function Gm({actions:B,children:W,info:z,pageNav:J,layout:ce,renderTitle:he,subTitle:De}){const $e=(0,a.useContext)(zi.v);return a.createElement(Ls.T,{navModel:$e.sectionNav,pageNav:J,layout:ce,actions:B,renderTitle:he,info:z,subTitle:De},a.createElement(Ls.T.Contents,null,W))}var Ym=e(49187);function li(B){const W=B.target instanceof Element&&jm(B.target);if(!(B.ctrlKey||B.metaKey||B.defaultPrevented)&&W){let z=W.getAttribute("href");const J=W.getAttribute("target");if(z&&!J){const ce=Ym.Cj.parseKeyValue(z.split("?")[1]),he=ce.orgId&&Number(ce.orgId)!==Q.vc.bootData.user.orgId;if((0,I.GQ)("utils",!1,"intercepting link click",B),B.preventDefault(),z=S.u.stripBaseFromUrl(z),z[0]!=="/"||he)if(z.indexOf("://")>0||z.indexOf("mailto:")===0||he){window.location.href=z;return}else if(z.indexOf("#")===0){window.location.hash=z;return}else z=`/${z}`;I.E1.push(z)}}}function jm(B){for(;B!==null&&B.tagName;){if(B.tagName.toUpperCase()==="A")return B;B=B.parentElement}return null}var ci=e(2476);function td(B,...W){const z=(0,yr.connect)(...W)(B);return J=>a.createElement(z,{...J,store:Ha.h})}function Qm(B,...W){const z=(0,yr.connect)(...W)(B);return J=>a.createElement(yr.Provider,{store:Ha.h},a.createElement(z,{...J,store:Ha.h}))}const nd=Qm(B=>a.createElement(a.Fragment,null,a.createElement($o.$i,{...B},a.createElement($o.Y0,null))));class Zm{constructor(){this.reactModalRoot=document.body,this.reactModalNode=document.createElement("div"),this.root=(0,P.s)(this.reactModalNode),this.onReactModalDismiss=()=>{this.root.render(null),this.reactModalRoot.removeChild(this.reactModalNode)}}init(){ds.Z.subscribe(Bs.VJ,W=>this.showConfirmModal(W.payload)),ds.Z.subscribe(Bs.Dn,W=>this.showModalReact(W.payload)),ds.Z.subscribe(F.EK,W=>(0,ci.bY)(W.payload))}showModalReact(W){const{component:z,props:J}=W,ce={component:z,props:{...J,isOpen:!0,onDismiss:this.onReactModalDismiss}},he=a.createElement((0,il.E)(nd,n.v.theme2),ce);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(he)}showConfirmModal(W){const{confirmText:z,onConfirm:J=()=>{},onDismiss:ce,text2:he,altActionText:De,onAltAction:$e,noText:et,text:ot,text2htmlBind:Dt,yesText:Ht="Yes",icon:Jt,title:nn="Confirm",yesButtonVariant:mn}=W,Pn={confirmText:Ht,confirmButtonVariant:mn,confirmationText:z,icon:Jt,title:nn,body:ot,description:he&&Dt?t.QX.sanitize(he):he,isOpen:!0,dismissText:et,onConfirm:()=>{J(),this.onReactModalDismiss()},onDismiss:()=>{ce?.(),this.onReactModalDismiss()},onAlternative:$e?()=>{$e(),this.onReactModalDismiss()}:void 0,alternativeText:De},Wn={component:Cr.s,props:Pn},Za=a.createElement((0,il.E)(nd,n.v.theme2),Wn);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(Za)}}var Jm=e(88383),Ns=e(73289);function Io(B,W=!1){return new Promise(z=>{const J=document.createElement("script");J.onload=z,J.src=B,J.async=W,document.head.appendChild(J)})}const Xm=(0,Jm.h)("EchoSrv"),uo=Xm.logger;(0,Ns.x)("echo",void 0,Xm);class ad{constructor(W){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const z of this.backends)z.flush()},this.addBackend=z=>{uo("Adding backend",!1,z),this.backends.push(z)},this.addEvent=(z,J)=>{const ce=this.getMeta(),he={...z,meta:{...ce,...J}};for(const De of this.backends)(De.supportedEvents.length===0||De.supportedEvents.indexOf(he.type)>-1)&&De.addEvent(he);uo("Reporting event",!1,he)},this.getMeta=()=>({sessionId:"",userId:Va.Vt.user.id,userLogin:Va.Vt.user.login,userSignedIn:Va.Vt.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),path:window.location.pathname,url:window.location.href}),this.config={...this.config,...W},setInterval(this.flush,this.config.flushInterval)}}const qm=(B,W)=>{(0,H.RP)().addEvent({type:H.ee.Performance,payload:{name:B,value:W}})},ef=B=>captureException(B);class tf{constructor(W){this.options=W,this.buffer=[],this.supportedEvents=[H.ee.Performance],this.addEvent=z=>{this.buffer.push(z.payload)},this.flush=()=>{this.buffer.length!==0&&(Co.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])}}}var Ro=e(75552);class nf{constructor(W){this.options=W,this.supportedEvents=[H.ee.Pageview,H.ee.Interaction],this.addEvent=ce=>{window.applicationInsights&&((0,Ro.Si)(ce)&&window.applicationInsights.trackPageView?.(),(0,Ro.fV)(ce)&&window.applicationInsights.trackEvent?.({name:ce.payload.interactionName,properties:ce.payload.properties}))},this.flush=()=>{};const z={config:{connectionString:W.connectionString,endpointUrl:W.endpointUrl}};Io("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then(()=>{const ce=new window.Microsoft.ApplicationInsights.ApplicationInsights(z);window.applicationInsights=ce.loadAppInsights()})}}class af{constructor(W){this.options=W,this.supportedEvents=[H.ee.Pageview],this.googleAnalytics4SendManualPageViews=!1,this.addEvent=ce=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:ce.payload.page})},this.flush=()=>{};const z=`https://www.googletagmanager.com/gtag/js?id=${W.googleAnalyticsId}`;Io(z,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const J={page_path:window.location.pathname};W.user&&(J.user_id=W.user.analytics.identifier),this.googleAnalytics4SendManualPageViews=W.googleAnalytics4SendManualPageViews,window.gtag("config",W.googleAnalyticsId,J)}}class sf{constructor(W){this.options=W,this.supportedEvents=[H.ee.Pageview],this.trackedUserId=null,this.addEvent=ce=>{if(!window.ga)return;window.ga("set",{page:ce.payload.page}),window.ga("send","pageview");const{userSignedIn:he,userId:De}=ce.meta;he&&De!==this.trackedUserId&&(this.trackedUserId=De,window.ga("set","userId",De))},this.flush=()=>{};const z=`https://www.google-analytics.com/analytics${W.debug?"_debug":""}.js`;Io(z);const J=window.ga=window.ga||function(){(J.q=J.q||[]).push(arguments)};J.l=+new Date,J("create",W.googleAnalyticsId,"auto"),J("set","anonymizeIp",!0)}}class rf{constructor(W){this.options=W,this.supportedEvents=[H.ee.Pageview,H.ee.Interaction,H.ee.ExperimentView],this.addEvent=he=>{window.rudderanalytics&&((0,Ro.Si)(he)&&window.rudderanalytics.page?.(),(0,Ro.fV)(he)&&window.rudderanalytics.track?.(he.payload.interactionName,he.payload.properties),(0,Ro.mR)(he)&&window.rudderanalytics.track?.("experiment_viewed",{experiment_id:he.payload.experimentId,experiment_group:he.payload.experimentGroup,experiment_variant:he.payload.experimentVariant}))},this.flush=()=>{};const z=W.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";Io(z);const J=window.rudderanalytics=[],ce=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let he=0;he<ce.length;he++){const De=ce[he];J[De]=function($e){return function(){J.push([$e].concat(Array.prototype.slice.call(arguments)))}}(De)}if(window.rudderanalytics?.load?.(W.writeKey,W.dataPlaneUrl,{configUrl:W.configUrl}),W.user){const{identifier:he,intercomIdentifier:De}=W.user.analytics,$e={};De&&($e.Intercom={user_hash:De}),window.rudderanalytics?.identify?.(he,{email:W.user.email,orgId:W.user.orgId,language:W.user.language},$e)}}}var of=e(13891),lf=e(68372),sd=e(1335),cf=e(71568),df=e(2194),uf=e(75078),mf=e(74128);class dl extends mf.d{constructor(){super(...arguments),this.name="EchoSrvTransport",this.version=n.v.buildInfo.version}send(W){(0,H.RP)().addEvent({type:H.ee.GrafanaJavascriptAgent,payload:W})}getIgnoreUrls(){return[]}}class ff{constructor(W){this.options=W,this.supportedEvents=[H.ee.GrafanaJavascriptAgent],this.addEvent=ce=>{this.transports.forEach(he=>he.send(ce.payload))},this.flush=()=>{};const z=[];this.transports=[],W.customEndpoint&&this.transports.push(new of.V({url:W.customEndpoint,apiKey:W.apiKey})),W.errorInstrumentalizationEnabled&&z.push(new lf.w),W.consoleInstrumentalizationEnabled&&z.push(new sd.J),W.webVitalsInstrumentalizationEnabled&&z.push(new cf.P);const J={globalObjectKey:W.globalObjectKey||"faro",preventGlobalExposure:W.preventGlobalExposure||!1,app:{version:W.buildInfo.version,environment:W.buildInfo.env},instrumentations:z,transports:[new dl],ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],metas:[...df.i,{session:{id:(Math.random()+1).toString(36).substring(2)}}]};this.faroInstance=(0,uf.p)(J),W.user&&this.faroInstance.api.setUser({id:W.user.id,attributes:{orgId:String(W.user.orgId)||""}})}}var gf=e(37916),pf=e(81534),rd=e(34785),di=e(48606),hf=e(51401),vf=e(51499),ul=e(76501),od=e(28466),Ef=e(3469);const ml=3,yf=5e3;class Pf{constructor(W){this.options=W,this._disabledUntil=new Date(Date.now()),this._buffer=(0,hf.x)(W.maxConcurrentRequests??ml)}sendEvent(W){if(new Date(Date.now())<this._disabledUntil){const ce="Dropping frontend event due to too many requests.";return console.warn(ce),Promise.resolve({event:W,reason:ce,status:"skipped"})}const z={body:JSON.stringify({...W,level:W.level??(W.exception?di.z.Error:di.z.Info),exception:W.exception?{values:W.exception.values?.map(ce=>({...ce,value:Cf(ce.value)}))}:W.exception,breadcrumbs:W.breadcrumbs?.map(ce=>({...ce,timestamp:fl(ce.timestamp)})),timestamp:fl(W.timestamp)}),url:this.options.endpoint},J={body:z.body,headers:{"Content-Type":"application/json"},method:"POST",referrerPolicy:(0,vf.hv)()?"origin":""};return this.options.fetchParameters!==void 0&&Object.assign(J,this.options.fetchParameters),this._buffer.add(()=>new ul.cW((ce,he)=>{window.fetch(z.url,J).then(De=>{if(De.status===200){ce({status:"success"});return}if(De.status===429){const $e=Date.now(),et=De.headers.get("Retry-After");et?this._disabledUntil=new Date($e+(0,od.JY)(et,$e)):this._disabledUntil=new Date($e+yf),Ef.kg.warn(`Too many requests, backing off till: ${this._disabledUntil}`)}he(De)}).catch(he)})).then(void 0,ce=>{if(ce.message==="Not adding Promise due to buffer limit reached."){const he="Dropping frontend log event due to too many requests in flight.";return console.warn(he),{event:W,reason:he,status:"skipped"}}throw ce})}}function fl(B){return B?new Date(B*1e3).toISOString():new Date().toISOString()}function Cf(B){return typeof B=="string"||B===void 0?B:B&&typeof B=="object"&&Object.keys(B).length===0?"":String(B)}class Df extends rd.d8{sendEvent(W){return(0,H.RP)().addEvent({type:H.ee.Sentry,payload:W}),Promise.resolve({status:"success",event:W})}sendSession(W){return Promise.resolve({status:"skipped"})}_sendRequest(W,z){throw new Error("should not happen")}}class xf{constructor(W){this.options=W,this.supportedEvents=[H.ee.Sentry],this.addEvent=J=>{this.transports.forEach(ce=>ce.sendEvent(J.payload))},this.flush=()=>{},this.transports=[],W.dsn&&this.transports.push(new rd.Vh({dsn:W.dsn},fetch)),W.customEndpoint&&this.transports.push(new Pf({endpoint:W.customEndpoint}));const z={release:W.buildInfo.version,environment:W.buildInfo.env,dsn:W.dsn||"https://examplePublicKey@o0.ingest.sentry.io/0",sampleRate:W.sampleRate,transport:Df,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"]};W.user&&(0,gf.av)({email:W.user.email,id:String(W.user.id)}),(0,pf.S1)(z)}}var bf=e(35582),ui=e.n(bf),Eg=e(76767),yg=e(93013),Mf=e(55935),id=e(63205),Sf=e(53818);function Tf(B){return()=>{const W=document.querySelectorAll(":hover");for(let z=W.length-1;z>0;z--){const J=W[z];J instanceof HTMLElement&&J.dataset?.panelid&&B(parseInt(J.dataset?.panelid,10))}}}class Of{constructor(W,z){this.locationService=W,this.chromeService=z}clearAndInitGlobalBindings(W){ui().reset(),W.chromeless||(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g d",this.goToDashboards),this.bind("g e",this.goToExplore),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("t a",this.makeAbsoluteTime),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>vc(!1)),this.bind("c r",()=>vc(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const z=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(z&&z instanceof HTMLElement&&(z.nodeName==="INPUT"||z.nodeName==="TEXTAREA"||z.hasAttribute("data-slate-editor"))){z.blur();return}this.exit()}}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToDashboards(){this.locationService.push("/dashboards")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}makeAbsoluteTime(){ds.Z.publish(new Bs.QI)}showHelpModal(){ds.Z.publish(new Bs.Dn({component:_i.B}))}exit(){const W=this.locationService.getSearchObject();if(W.editview){this.locationService.partial({editview:null,editIndex:null});return}if(W.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(W.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(W.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:z}=this.chromeService.state.getValue();z&&this.chromeService.exitKioskMode(),W.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(W,z){ui().bind(W,J=>{J.preventDefault(),J.stopPropagation(),J.returnValue=!1,z.call(this)},"keydown")}bindGlobal(W,z){ui().bindGlobal(W,J=>{J.preventDefault(),J.stopPropagation(),J.returnValue=!1,z.call(this)},"keydown")}unbind(W,z){ui().unbind(W,z)}bindWithPanelId(W,z){this.bind(W,Tf(z))}setupTimeRangeBindings(W=!0){this.bind("t z",()=>{ds.Z.publish(new Bs.p8({scale:2,updateUrl:W}))}),this.bind("ctrl+z",()=>{ds.Z.publish(new Bs.p8({scale:2,updateUrl:W}))}),this.bind("t left",()=>{ds.Z.publish(new Bs.Qt({direction:Bs.Im.Left,updateUrl:W}))}),this.bind("t right",()=>{ds.Z.publish(new Bs.Qt({direction:Bs.Im.Right,updateUrl:W}))})}setupDashboardBindings(W){this.bind("mod+o",()=>{W.graphTooltip=(W.graphTooltip+1)%3,W.events.publish(new to.oi),W.startRefresh()}),this.bind("mod+s",()=>{W.meta.canSave&&ds.Z.publish(new Bs.Dn({component:id.d,props:{dashboard:W}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",z=>{if(W.canEditPanelById(z)){const J=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:J?null:z})}}),this.bindWithPanelId("v",z=>{const J=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:J?null:z})}),this.bindWithPanelId("p l",z=>{const J=W.getPanelById(z),ce={...J.options};ce.legend.showLegend?ce.legend.showLegend=!1:ce.legend.showLegend=!0,J.updateOptions(ce)}),this.bindWithPanelId("i",z=>{this.locationService.partial({inspect:z})}),za.Vt.hasAccessToExplore()&&this.bindWithPanelId("x",async z=>{const J=W.getPanelById(z),ce=await(0,Mf.H6)({panel:J,datasourceSrv:(0,m.ak)(),timeSrv:(0,cs.$t)()});if(ce){const he=S.u.stripBaseFromUrl(ce);he&&this.locationService.push(he)}}),this.bindWithPanelId("p r",z=>{W.canEditPanelById(z)&&!(W.panelInView||W.panelInEdit)&&ds.Z.publish(new Bs.Eb(z))}),this.bindWithPanelId("p d",z=>{if(W.canEditPanelById(z)){const J=W.getPanelInfoById(z).index;W.duplicatePanel(W.panels[J])}}),this.bindWithPanelId("p s",z=>{const J=W.getPanelInfoById(z);ds.Z.publish(new Bs.Dn({component:Sf.ShareModal,props:{dashboard:W,panel:J?.panel}}))}),this.bind("d l",()=>{W.toggleLegendsForAll()}),this.bind("d shift+c",()=>{W.collapseRows()}),this.bind("d shift+e",()=>{W.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{W.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const J=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+J})}}async function Pg(){if(window.location.search.indexOf("why-render")!==-1){const{default:B}=await e.e(2182).then(e.t.bind(e,62182,23));B(React,{trackAllPureComponents:!0})}}var If=e(6911),Rf=e(53747),Af=e(21056),Cg=e(88214),Ao=e(40333),Lf=e(21237),mi=e(89730),Bf=e(77410);const ld=()=>new Bf.q(new URL(e.p+e.u(8186),e.b));var Nf=e(84946),cd=e(53704);const Uf=B=>new Nf.y(W=>{const z=B.subscribe(Ao.sj(J=>{W.next(J)}),Ao.sj(J=>{W.error(J)}),Ao.sj(()=>{W.complete()}));return{unsubscribe:()=>{z.then(J=>J.unsubscribe())}}}),gl=B=>(0,ys.D)(B).pipe((0,cd.w)(W=>Uf(W)));class dd{constructor(W){this.getConnectionState=()=>gl(this.centrifugeWorker.getConnectionState()),this.getDataStream=z=>gl(this.centrifugeWorker.getDataStream(z)).pipe((0,Lf.Q)(mi.z)),this.getQueryData=async z=>{const J=JSON.parse(JSON.stringify(z));return this.centrifugeWorker.getQueryData(J)},this.getPresence=z=>this.centrifugeWorker.getPresence(z),this.getStream=z=>gl(this.centrifugeWorker.getStream(z)),this.centrifugeWorker=Ao.Ud(ld()),this.centrifugeWorker.initialize(W,Ao.sj(W.dataStreamSubscriberReadiness))}}var wf=e(8891),Wr=e(32689),Wf=e(22069),ud=e(28625),pl=e(14035);class hl{constructor(W){this.deps=W,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=z=>{let J;const ce=he=>{const De=he.data[0];if(!J&&!(0,pl.A1)(De,pl.g0.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${De?.type}`);return}switch(De.type){case pl.g0.FullFrame:{J=ud.Av.deserialize(De.frame);return}case pl.g0.NewValuesSameSchema:{J.pushNewValues(De.values);return}}};return this.deps.centrifugeSrv.getDataStream(z).pipe((0,jt.U)(he=>(ce(he),{...he,data:[J??ud.Av.empty()]})))},this.getStream=z=>this.deps.centrifugeSrv.getStream(z),this.getQueryData=z=>(0,ys.D)(this.deps.centrifugeSrv.getQueryData(z)).pipe((0,cd.w)(J=>{const ce=(0,Wr.z1)(J,z.request.targets);return ce.data?.length&&ce.data.find(De=>De.meta?.channel)?(0,Wf.B9)(ce,z.request,Wf.PI):(0,Rn.of)(ce)})),this.publish=async(z,J)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,wf.Aj)(z),data:J}),this.getPresence=z=>this.deps.centrifugeSrv.getPresence(z)}}function Ff(){const B={appUrl:`${window.location.origin}${n.v.appSubUrl}`,orgId:Va.Vt.user.orgId,orgRole:Va.Vt.user.orgRole,liveEnabled:n.v.liveEnabled,dataStreamSubscriberReadiness:If.A.ok.asObservable(),grafanaAuthToken:(0,Rf.v)()},W=n.v.featureToggles["live-service-web-worker"]?new dd(B):new Af.R(B);(0,Yc.cA)(new hl({centrifugeSrv:W,backendSrv:(0,O.i)()}))}function Dg(){return getGrafanaLiveSrv()}var md=e(51927),$f=e(98141);const fi=2;class xg{constructor(){this.extensionsByExtensionPoint={}}allowedToAdd({extensionPointId:W,title:z}){return this.countByExtensionPoint(W)>=fi?!1:(this.addExtensionToExtensionPoint(W,z),!0)}addExtensionToExtensionPoint(W,z){this.extensionsByExtensionPoint[W]||(this.extensionsByExtensionPoint[W]=[]),this.extensionsByExtensionPoint[W].push(z)}countByExtensionPoint(W){return this.extensionsByExtensionPoint[W]?.length??0}getExtensionTitlesByExtensionPoint(W){return this.extensionsByExtensionPoint[W]}}var fd=e(22623);function Or(B){console.warn(`[Plugin Extensions] ${B}`)}function gd(B){return typeof B=="object"&&"type"in B&&B.type===fd.D.link}function bg(B,W=""){return(...z)=>{try{return B(...z)}catch(J){J instanceof Error&&console.warn(`${W}${J.message}`)}}}function pd(B){return{openModal:({title:z,body:J})=>{ds.Z.publish(new Bs.Dn({component:Kf({title:z,body:J})}))},context:B}}const Kf=({title:B,body:W})=>({onDismiss:J})=>a.createElement(Ni.u,{title:B,isOpen:!0,onDismiss:J,onClickBackdrop:J},a.createElement(W,{onDismiss:J}));function gi(B,W=new Map){if(!B||typeof B!="object"||Object.isFrozen(B))return B;const z=Array.isArray(B)?[...B]:{...B};if(W.has(B))return W.get(B);W.set(B,z);const J=Reflect.ownKeys(z);for(const ce of J){const he=Array.isArray(z)?z[Number(ce)]:z[ce];he&&(typeof he=="object"||typeof he=="function")&&(Array.isArray(z)?z[Number(ce)]=gi(he,W):z[ce]=gi(he,W))}return Object.freeze(z)}function hd(B,W){const z=`${B}${W.extensionPointId}${W.title}`;return Array.from(z).reduce((J,ce)=>Math.imul(31,J)+ce.charCodeAt(0)|0,0).toString()}function Mg(B,W="extension is not a link extension"){if(!isPluginExtensionLink(B))throw new Error(W)}function Sg(B,W="extension is not a command extension config"){if(!isPluginExtensionLinkConfig(B))throw new Error(W)}function vl(B,W){if(!Tg(B,W))throw new Error(`Invalid link extension. The "path" is required and should start with "/a/${B}/" (currently: "${W}"). Skipping the extension.`)}function Vf(B){if(!Og(B))throw new Error(`Invalid extension "${B.title}". The extensionPointId should start with either "grafana/" or "plugins/" (currently: "${B.extensionPointId}"). Skipping the extension.`)}function vd(B){if(!Ig(B))throw new Error(`Invalid extension "${B.title}". The "configure" property must be a function. Skipping the extension.`)}function Ed(B,W){for(const z of W)if(!Rg(B[z]))throw new Error(`Invalid extension "${B.title}". Property "${z}" must be a string and cannot be empty. Skipping the extension.`)}function zf(B,W="The provided value is a Promise."){if(Hf(B))throw new Error(W)}function Tg(B,W){return Boolean(typeof W=="string"&&W.length>0&&W.startsWith(`/a/${B}/`))}function Og(B){return Boolean(B.extensionPointId?.startsWith("grafana/")||B.extensionPointId?.startsWith("plugins/"))}function Ig(B){return B.configure?typeof B.configure=="function":!0}function Rg(B){return typeof B=="string"&&B.length>0}function Ag(B,W){try{if(Ed(W,["title","description","extensionPointId"]),Vf(W),vd(W),gd(W)){if(!W.path&&!W.onClick)return Or(`Invalid extension "${W.title}". Either "path" or "onClick" is required.`),!1;W.path&&vl(B,W.path)}return!0}catch(z){return z instanceof Error&&Or(z.message),!1}}function Hf(B){return B instanceof Promise||typeof B=="object"&&B!==null&&"then"in B&&"catch"in B}function Lg(B){const W={},z=new xg;for(const{pluginId:J,extensionConfigs:ce,error:he}of B){if(he){Or(`"${J}" plugin failed to load, skip registering its extensions.`);continue}for(const De of ce){const{extensionPointId:$e}=De;if(!z.allowedToAdd(De)){Or(`"${J}" plugin has reached the limit of ${fi} for "${$e}", skip registering extension "${De.title}".`);continue}if(!De||!Ag(J,De))continue;let et={config:De,pluginId:J};Array.isArray(W[$e])?W[$e].push(et):W[$e]=[et]}}return gi(W)}const Bg=({context:B,extensionPointId:W,registry:z})=>{const J=B?gi(B):{},ce=z[W]??[],he=[];for(const De of ce)try{const $e=De.config;if(gd($e)){const et=Ng(De.pluginId,$e,J);if($e.configure&&et===void 0)continue;const ot={id:hd(De.pluginId,$e),type:fd.D.link,pluginId:De.pluginId,onClick:Ug($e,J),title:et?.title||$e.title,description:et?.description||$e.description,path:et?.path||$e.path};he.push(ot)}}catch($e){$e instanceof Error&&Or($e.message)}return{extensions:he}};function Ng(B,W,z){try{const J=W.configure?.(z);if(J===void 0)return;let{title:ce=W.title,description:he=W.description,path:De=W.path,...$e}=J;if(zf(J,`The configure() function for "${W.title}" returned a promise, skipping updates.`),De&&vl(B,De),Ed({title:ce,description:he},["title","description"]),Object.keys($e).length>0)throw new Error(`Invalid extension "${W.title}". Trying to override not-allowed properties: ${Object.keys($e).join(", ")}`);return{title:ce,description:he,path:De}}catch(J){J instanceof Error&&Or(J.message);return}}function Ug(B,W){const{onClick:z}=B;if(z)return function(ce){try{const he=z(ce,pd(W));Hf(he)&&he.catch(De=>{De instanceof Error&&Or(De.message)})}catch(he){he instanceof Error&&Or(he.message)}}}var kf=e(38490);async function wg(B={}){const W=Object.values(B).filter(z=>z.preload);return Promise.all(W.map(Wg))}async function Wg(B){const{path:W,version:z,id:J}=B;try{const{plugin:ce}=await Vi.N$(W,z),{extensionConfigs:he=[]}=ce;return{pluginId:J,extensionConfigs:he}}catch(ce){return console.error(`[Plugins] Failed to preload plugin: ${W} (version: ${z})`,ce),{pluginId:J,extensionConfigs:[],error:ce}}}var Fg=e(46528),$g=e(31129),_f=e(206),Gf=e(47891),Kg=e(49003),Vg=e(59584),yd=e(75434);class zg{constructor(){this.subject=new Fg.t(1)}get(){return this.subject.asObservable()}run(W){const{queries:z,timezone:J,datasource:ce,panelId:he,app:De,dashboardUID:$e,timeRange:et,timeInfo:ot,cacheTimeout:Dt,queryCachingTTL:Ht,maxDataPoints:Jt,scopedVars:nn,minInterval:mn}=W;this.subscription&&this.subscription.unsubscribe();const Pn={app:De??_f.zj.Unknown,requestId:(0,Kg.t)(),timezone:J,panelId:he,dashboardUID:$e,range:et,timeInfo:ot,interval:"",intervalMs:0,targets:(0,h.cloneDeep)(z),maxDataPoints:Jt,scopedVars:nn||{},cacheTimeout:Dt,queryCachingTTL:Ht,startTime:Date.now()};Pn.rangeRaw=et.raw,(0,ys.D)(Hg(ce,Pn.scopedVars)).pipe((0,$g.P)()).subscribe({next:Wn=>{Pn.targets=Pn.targets.map(Ja=>(Ja.datasource||(Ja.datasource=Wn.getRef()),Ja));const Za=mn?(0,xo.J)().replace(mn,Pn.scopedVars):Wn.interval,La=Gf.calculateInterval(et,Jt,Za);Pn.scopedVars=Object.assign({},Pn.scopedVars,{__interval:{text:La.interval,value:La.interval},__interval_ms:{text:La.intervalMs.toString(),value:La.intervalMs}}),Pn.interval=La.interval,Pn.intervalMs=La.intervalMs,this.subscription=(0,yd.v7)(Wn,Pn).subscribe({next:Ja=>{const Zs=(0,un.zR)(Ja,this.lastResult);this.lastResult=(0,Vg.C)(Zs,this.lastResult),this.subject.next(this.lastResult)}})},error:Wn=>console.error("PanelQueryRunner Error",Wn)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===Ps.Gu.Loading&&this.subject.next({...this.lastResult,state:Ps.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function Hg(B,W){return B&&"query"in B?B:(0,m.ak)().get(B,W)}function kg(){window.grafanaRuntime={getDashboardSaveModel:()=>{const B=(0,p.h4)().getCurrent();if(B)return B.getSaveModelClone()},getDashboardTimeRange:()=>{const B=(0,cs.$t)().timeRange();return{from:B.from.valueOf(),to:B.to.valueOf(),raw:B.raw}},getPanelData:()=>{const B=(0,p.h4)().getCurrent();if(B)return B.panels.reduce((W,z)=>(W[z.id]=z.getQueryRunner().getLastResult(),W),{})}}}var pi=e(22323),_n=e(92624),Yf=e(73446),jf=e(53117),Fr=e(41624),Yr=e(50678);function Pd(B){return B.extended&&"infoText"in B.extended?B.extended:null}function Cd(B){return B.extended&&"dataSourceTypes"in B.extended?B.extended:null}function El(B){return B.extended&&"dataSource"in B.extended?B.extended:null}var Ra=e(87095),Lo=e(30002);const Qf=(B,W)=>{const{rootStateKey:z}=W.variable;if(!z)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:Pd(Yr.PF)};const{editor:J}=(0,Ra.AE)(z,B);return{extended:Pd(J)}},Zf={changeVariableDatasource:Lo.Z$},Jf=(0,yr.connect)(Qf,Zf);class Xf extends a.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=W=>{this.props.changeVariableDatasource((0,_n.yQ)(this.props.variable),(0,Yf.iU)(W))}}componentDidMount(){const{rootStateKey:W}=this.props.variable;if(!W){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:W,extended:z}=this.props,J=z?.infoText??null;return a.createElement(a.Fragment,null,a.createElement(Fr.e,null,"Ad-hoc options"),a.createElement(da.g,{label:"Data source",htmlFor:"data-source-picker"},a.createElement(jf.q,{current:W.datasource,onChange:this.onDatasourceChanged,width:30,noDefault:!0})),J?a.createElement(ga.b,{title:J,severity:"info"}):null)}}const Dd=Jf(Xf);var _g=e(44847);const Gg={addFilter:Lo.KJ,removeFilter:Lo.ku,changeFilter:Lo.M6},Yg=(0,yr.connect)(null,Gg);class jg extends a.PureComponent{constructor(){super(...arguments),this.addFilter=W=>{this.props.addFilter((0,_n.yQ)(this.props.variable),W)},this.removeFilter=W=>{this.props.removeFilter((0,_n.yQ)(this.props.variable),W)},this.changeFilter=(W,z)=>{this.props.changeFilter((0,_n.yQ)(this.props.variable),{index:W,filter:z})}}render(){const{filters:W,datasource:z}=this.props.variable;return a.createElement(_g.F,{datasource:z,filters:W,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const qf=Yg(jg);qf.displayName="AdHocPicker";var eg=e(79134);const Qg=B=>B.map(W=>Ta(W).map(Jg).join("|")),Zg=B=>{if((0,h.isArray)(B))return B.map(xd).filter(yl);const W=xd(B);return W===null?[]:[W]};function Jg(B){return B==null?"":/\|/g[Symbol.replace](B,"__gfp__")}function Bo(B){return B==null?"":/__gfp__/g[Symbol.replace](B,"|")}function Ta(B){return[B.key,B.operator,B.value]}function xd(B){if(!(0,h.isString)(B)||B.length===0)return null;const W=B.split("|").map(Bo);return{key:W[0],operator:W[1],value:W[2],condition:""}}function yl(B){return B!==null&&(0,h.isString)(B.value)}const bd=async()=>{},tg=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:eg.Js,reducer:eg.jo,picker:qf,editor:Dd,dependsOn:()=>!1,setValue:bd,setValueFromUrl:async(B,W)=>{const z=Zg(W);await(0,Ha.WI)((0,Lo.Ue)((0,_n.yQ)(B),z))},updateOptions:bd,getSaveModel:B=>{const{index:W,id:z,state:J,global:ce,rootStateKey:he,...De}=(0,h.cloneDeep)(B);return De},getValueForUrl:B=>{const W=B?.filters??[];return Qg(W)}});var N=e(83829),X=e(94437),ee=e(82253),fe=e(15546),Ee=e(91017),xe=e(85850),Ae=e(12877),We=e(90801),ke=e(68140),rt=e(82615),at=e(59724),Et=e(86318),Tt=e(44288),pt=e(75849),At=e(10672),kt=e(85803),It=e(7240),Bt=e(63510);const Xt={...At.Eg,type:"query",datasource:null,query:"",regex:"",sort:At.$U.disabled,refresh:At.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},Zt=(B,W)=>{if(W===At.$U.disabled)return B;const z=Math.ceil(W/2),J=W%2===0;return z===1?B=(0,h.sortBy)(B,"text"):z===2?B=(0,h.sortBy)(B,ce=>{if(!ce.text)return-1;const he=ce.text.match(/.*?(\d+).*/);return!he||he.length<2?-1:parseInt(he[1],10)}):z===3&&(B=(0,h.sortBy)(B,ce=>(0,h.toLower)(ce.text))),J&&(B=B.reverse()),B},Qt=(B,W)=>{const z=[];let J=null;W.lastIndex=0;do J=W.exec(B),J&&z.push(J);while(W.global&&J&&J[0]!==""&&J[0]!==void 0);return z},dn=(B,W,z)=>{let J,ce=[];B&&(J=(0,ja.jO)(B));for(let he=0;he<z.length;he++){const De=z[he];let $e=De.text===void 0||De.text===null?De.value:De.text,et=De.value===void 0||De.value===null?De.text:De.value;if((0,h.isNumber)(et)&&(et=et.toString()),(0,h.isNumber)($e)&&($e=$e.toString()),J){const ot=Qt(et,J);if(!ot.length)continue;const Dt=ot.find(mn=>mn.groups&&mn.groups.value),Ht=ot.find(mn=>mn.groups&&mn.groups.text),Jt=ot.find(mn=>mn.length>1),nn=ot.length>1&&Jt;if(Dt||Ht)et=Dt?.groups?.value??Ht?.groups?.text,$e=Ht?.groups?.text??Dt?.groups?.value;else if(nn){for(let mn=0;mn<ot.length;mn++){const Pn=ot[mn];ce.push({text:Pn[1],value:Pn[1],selected:!1})}continue}else Jt&&($e=Jt[1],et=Jt[1])}ce.push({text:$e,value:et,selected:!1})}return ce=(0,h.uniqBy)(ce,"value"),Zt(ce,W)},Yt=(0,Hr.oM)({name:"templating/query",initialState:Bt.s,reducers:{updateVariableOptions:(B,W)=>{const{results:z,templatedRegex:J}=W.payload.data,ce=(0,Ra.ir)(B,W.payload.id);if(ce.type!=="query")return;const{includeAll:he,sort:De}=ce,$e=dn(J,De,z);he&&$e.unshift({text:ee.xk,value:ee.r2,selected:!1}),$e.length||$e.push({text:ee.BH,value:ee.QX,isNone:!0,selected:!1}),ce.options=$e}}}),En=Yt.reducer,{updateVariableOptions:Sn}=Yt.actions;function xn(){return B=>B.pipe((0,jt.U)(W=>{const z=W.series;if(!z||!z.length)return[];if(Ln(z))return z;const J=(0,un.F9)(z),ce=[];let he=-1,De=-1,$e=-1,et=-1;for(const ot of J)for(let Dt=0;Dt<ot.fields.length;Dt++){const Ht=ot.fields[Dt],Jt=(0,ge.CZ)(Ht,ot,z).toLowerCase();Ht.type===oe.fS.string&&$e===-1&&($e=Dt),Jt==="text"&&Ht.type===oe.fS.string&&De===-1&&(De=Dt),Jt==="value"&&Ht.type===oe.fS.string&&he===-1&&(he=Dt),Jt==="expandable"&&(Ht.type===oe.fS.boolean||Ht.type===oe.fS.number)&&et===-1&&(et=Dt)}if($e===-1)throw new Error("Couldn't find any field of type string in the results.");for(const ot of z)for(let Dt=0;Dt<ot.length;Dt++){const Ht=et!==-1?ot.fields[et].values[Dt]:void 0,Jt=ot.fields[$e].values[Dt],nn=De!==-1?ot.fields[De].values[Dt]:null,mn=he!==-1?ot.fields[he].values[Dt]:null;if(he===-1&&De===-1){ce.push({text:Jt,value:Jt,expandable:Ht});continue}if(he===-1&&De!==-1){ce.push({text:nn,value:nn,expandable:Ht});continue}if(he!==-1&&De===-1){ce.push({text:mn,value:mn,expandable:Ht});continue}ce.push({text:nn,value:mn,expandable:Ht})}return ce}))}function Tn(B){return W=>W.pipe((0,jt.U)(z=>{const{variable:J,dispatch:ce,getTemplatedRegexFunc:he}=B;if(!J.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const De=he(J),$e=(0,_n.Y6)(J,{results:z,templatedRegex:De});ce((0,It.mb)(J.rootStateKey,Sn($e)))}))}function Kn(B){return W=>W.pipe((0,Es.z)(()=>{const{dispatch:z,variable:J,searchFilter:ce}=B;return ce?(0,Rn.of)():(0,ys.D)(z((0,kt.xQ)((0,_n.yQ)(J))))}))}function Ln(B){if(!B)return!1;if(!B.length)return!0;const W=B[0];if((0,un.aY)(W))return!1;for(const z in W){if(!W.hasOwnProperty(z)||W[z]!==null&&typeof W[z]!="string"&&typeof W[z]!="number")continue;const J=z.toLowerCase();if(J==="text"||J==="value")return!0}return!1}var ta=e(48976);class Un{constructor(){this.runners=[new In,new Qn,new oa,new ka]}getRunnerForDatasource(W){const z=this.runners.find(J=>J.canRun(W));if(z)return z;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class In{constructor(){this.type=ta.j2.Legacy}canRun(W){return(0,fe.R)(W)}getTarget({datasource:W,variable:z}){if((0,fe.R)(W))return z.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:W,variable:z,searchFilter:J,timeSrv:ce},he){if(!(0,fe.R)(W))return Aa();const De=(0,_n.AQ)(z,J,ce);return(0,ys.D)(W.metricFindQuery(z.query,De)).pipe((0,Es.z)($e=>{if(!$e||!$e.length)return Aa();const et=$e;return(0,Rn.of)({series:et,state:Ps.Gu.Done,timeRange:De.range})}))}}class Qn{constructor(){this.type=ta.j2.Standard}canRun(W){return(0,fe.Ju)(W)}getTarget({datasource:W,variable:z}){if((0,fe.Ju)(W))return W.variables.toDataQuery(z.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:W,runRequest:z},J){return(0,fe.Ju)(W)?W.variables.query?z(W,J,W.variables.query):z(W,J):Aa()}}class oa{constructor(){this.type=ta.j2.Custom}canRun(W){return(0,fe.d7)(W)}getTarget({datasource:W,variable:z}){if((0,fe.d7)(W))return z.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:W,runRequest:z},J){return(0,fe.d7)(W)?z(W,J,W.variables.query):Aa()}}const $a="variable-query";class ka{constructor(){this.type=ta.j2.Datasource}canRun(W){return(0,fe.X7)(W)}getTarget({datasource:W,variable:z}){if((0,fe.X7)(W))return{...z.query,refId:z.query.refId??$a};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:W,runRequest:z},J){return(0,fe.X7)(W)?z(W,J):Aa()}}function Aa(){return(0,Rn.of)({state:Ps.Gu.Done,series:[],timeRange:(0,pt.JK)()})}class _a{constructor(W={dispatch:Ha.WI,getState:Ha.y0,getVariable:Ra.E0,getTemplatedRegex:_n.gR,getTimeSrv:cs.$t,queryRunners:new Un,runRequest:yd.v7}){this.dependencies=W,this.updateOptionsRequests=new Ee.x,this.updateOptionsResults=new Ee.x,this.cancelRequests=new Ee.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(W){this.updateOptionsRequests.next(W)}getResponse(W){return this.updateOptionsResults.asObservable().pipe((0,We.h)(z=>z.identifier===W))}cancelRequest(W){this.cancelRequests.next({identifier:W})}destroy(){this.subscription.unsubscribe()}onNewRequest(W){const{datasource:z,identifier:J,searchFilter:ce}=W;try{const{dispatch:he,runRequest:De,getTemplatedRegex:$e,getVariable:et,queryRunners:ot,getTimeSrv:Dt,getState:Ht}=this.dependencies,Jt=(0,Ra.S_)(Ht());this.updateOptionsResults.next({identifier:J,state:Ps.Gu.Loading});const nn=et(J,Ht());if(nn.type!=="query")return;const mn=Dt(),Pn={variable:nn,datasource:z,searchFilter:ce,timeSrv:mn,runRequest:De},Wn=ot.getRunnerForDatasource(z),Za=Wn.getTarget({datasource:z,variable:nn}),La=this.getRequest(nn,W,Za);Wn.runRequest(Pn,La).pipe((0,We.h)(()=>{const Ja=(0,Ra.S_)(Ht());return Jt===Ja}),(0,We.h)(Ja=>Ja.state===Ps.Gu.Done||Ja.state===Ps.Gu.Error),(0,ke.q)(1),(0,Es.z)(Ja=>Ja.state===Ps.Gu.Error?(0,xe._)(()=>Ja.error):(0,Rn.of)(Ja)),xn(),Tn({variable:nn,dispatch:he,getTemplatedRegexFunc:$e}),Kn({variable:nn,dispatch:he,searchFilter:ce}),(0,rt.R)((0,Ae.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,We.h)(Ja=>{let Zs=!1;return Ja.identifier.id===J.id&&(Zs=!0,this.updateOptionsResults.next({identifier:J,state:Ps.Gu.Loading,cancelled:Zs})),Zs}))),(0,at.K)(Ja=>Ja.cancelled?(0,Rn.of)({}):(this.updateOptionsResults.next({identifier:J,state:Ps.Gu.Error,error:Ja}),(0,xe._)(()=>Ja))),(0,Et.x)(()=>{this.updateOptionsResults.next({identifier:J,state:Ps.Gu.Done})})).subscribe()}catch(he){this.updateOptionsResults.next({identifier:J,state:Ps.Gu.Error,error:he})}}getRequest(W,z,J){const{searchFilter:ce}=z,he={variable:{text:W.current.text,value:W.current.value}},et={...ce?{searchFilter:{text:ce,value:ce}}:{},...he},ot=W.refresh===At.Bd.onTimeRangeChanged?this.dependencies.getTimeSrv().timeRange():(0,pt.JK)();return{app:_f.zj.Dashboard,requestId:(0,Tt.Z)(),timezone:"",range:ot,interval:"",intervalMs:0,targets:[J],scopedVars:et,startTime:Date.now()}}}let Gn;function Nn(B){Gn=B}function Hn(){return Gn}const qn=B=>{if(!ya(B))return B.name;const{current:W}=B;return Array.isArray(W.text)?W.text.join(" + "):W.text},ya=B=>Array.isArray(B?.options)||typeof B?.current=="object";var na=(B=>(B[B.moveUp=38]="moveUp",B[B.moveDown=40]="moveDown",B[B.select=32]="select",B[B.cancel=27]="cancel",B[B.selectAndClose=13]="selectAndClose",B))(na||{});class Ua extends a.PureComponent{constructor(){super(...arguments),this.onKeyDown=W=>{if(na[W.keyCode]&&W.keyCode!==na.select){const z=W.ctrlKey||W.metaKey||W.shiftKey;this.props.onNavigate(W.keyCode,z),W.preventDefault()}},this.onChange=W=>{this.props.onChange(W.target.value)}}render(){const{value:W,id:z,onNavigate:J,...ce}=this.props;return a.createElement("input",{...ce,ref:he=>{he&&(he.focus(),he.setAttribute("style",`width:${Math.max(he.width,150)}px`))},type:"text",className:"gf-form-input",value:W??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,Na.t)("variable.dropdown.placeholder","Enter variable value")})}}const pa=({loading:B,disabled:W,onClick:z,text:J,onCancel:ce,id:he})=>{const De=(0,Ge.wW)(wn),$e=(0,a.useCallback)(et=>{et.stopPropagation(),et.preventDefault(),z()},[z]);return B?a.createElement("div",{className:De.container,"data-testid":bn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${J}`),title:J,id:he},a.createElement(Mn,{text:J}),a.createElement(Bn,{onCancel:ce})):a.createElement("button",{onClick:$e,className:De.container,"data-testid":bn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${J}`),"aria-expanded":!1,"aria-controls":`options-${he}`,id:he,title:J,disabled:W},a.createElement(Mn,{text:J}),a.createElement(He.J,{"aria-hidden":!0,name:"angle-down",size:"sm"}))},Mn=({text:B})=>{const W=(0,Ge.wW)(wn);return a.createElement("span",{className:W.textAndTags},B===ee.xk?(0,Na.t)("variable.picker.link-all","All"):B)},Bn=({onCancel:B})=>{const W=(0,a.useCallback)(z=>{z.preventDefault(),B()},[B]);return a.createElement(Pr.u,{content:"Cancel query"},a.createElement(He.J,{className:"spin-clockwise",name:"sync",size:"xs",onClick:W,"aria-label":bn.wl.components.LoadingIndicator.icon}))},wn=B=>({container:Z.css`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${B.spacing(1)};
    background-color: ${B.components.input.background};
    border: 1px solid ${B.components.input.borderColor};
    border-radius: ${B.shape.borderRadius(1)};
    display: flex;
    align-items: center;
    color: ${B.colors.text};
    height: ${B.spacing(B.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${B.colors.action.disabledBackground};
      color: ${B.colors.action.disabledText};
      border: 1px solid ${B.colors.action.disabledBackground};
    }
  `,textAndTags:Z.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${B.spacing(.25)};
    user-select: none;
  `});class Zn extends a.PureComponent{constructor(){super(...arguments),this.onToggle=W=>z=>{const J=z.shiftKey||z.ctrlKey||z.metaKey;this.handleEvent(z),this.props.onToggle(W,J)},this.onToggleAll=W=>{this.handleEvent(W),this.props.onToggleAll()}}handleEvent(W){W.preventDefault(),W.stopPropagation()}render(){const{multi:W,values:z,highlightIndex:J,selectedValues:ce,onToggle:he,onToggleAll:De,theme:$e,...et}=this.props,ot=Jn($e);return a.createElement("div",{className:ot.variableValueDropdown},a.createElement("div",{className:ot.variableOptionsWrapper},a.createElement("ul",{className:ot.variableOptionsColumn,"aria-label":bn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...et},this.renderMultiToggle(),z.map((Dt,Ht)=>this.renderOption(Dt,Ht)))))}renderOption(W,z){const{highlightIndex:J,multi:ce,theme:he}=this.props,De=Jn(he),$e=W.value===ee.r2;return a.createElement("li",{key:`${W.value}`},a.createElement("button",{"data-testid":bn.wl.components.Variables.variableOption,role:"checkbox",type:"button","aria-checked":W.selected,className:(0,Z.cx)((0,q.gN)(he),De.variableOption,{[De.highlighted]:z===J},De.noStyledButton),onClick:this.onToggle(W)},a.createElement("span",{className:(0,Z.cx)(De.variableOptionIcon,{[De.variableOptionIconSelected]:W.selected,[De.hideVariableOptionIcon]:!ce})}),a.createElement("span",{"data-testid":bn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${W.text}`)},$e?(0,Na.t)("variable.picker.option-all","All"):W.text)))}renderMultiToggle(){const{multi:W,selectedValues:z,theme:J}=this.props,ce=Jn(J);if(!W)return null;const he=()=>a.createElement(Na.cC,{i18nKey:"variable.picker.option-tooltip"},"Clear selections");return a.createElement(Pr.u,{content:he,placement:"top"},a.createElement("button",{className:(0,Z.cx)((0,q.gN)(J),ce.variableOption,ce.variableOptionColumnHeader,ce.noStyledButton),role:"checkbox","aria-checked":z.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top"},a.createElement("span",{className:(0,Z.cx)(ce.variableOptionIcon,{[ce.variableOptionIconManySelected]:z.length>1})}),a.createElement(Na.cC,{i18nKey:"variable.picker.option-selected-values"},"Selected")," (",z.length,")"))}}const Jn=(0,se.B)(B=>{const W=B.isDark?"public/img/checkbox.png":"public/img/checkbox_white.png";return{hideVariableOptionIcon:(0,Z.css)({display:"none"}),highlighted:(0,Z.css)({backgroundColor:B.colors.action.hover}),noStyledButton:(0,Z.css)({width:"100%",textAlign:"left"}),variableOption:(0,Z.css)({display:"block",padding:"2px 27px 0 8px",position:"relative",whiteSpace:"nowrap",minWidth:"115px",["&:hover"]:{backgroundColor:B.colors.action.hover}}),variableOptionColumnHeader:(0,Z.css)({paddingTop:"5px",paddingBottom:"5px",marginBottom:"5px"}),variableOptionIcon:(0,Z.css)({display:"inline-block",width:"24px",height:"18px",position:"relative",top:"4px",background:`url(${W}) left top no-repeat`}),variableOptionIconManySelected:(0,Z.css)({background:`url(${W}) 0px -36px no-repeat`}),variableOptionIconSelected:(0,Z.css)({background:`url(${W}) 0px -18px no-repeat`}),variableValueDropdown:(0,Z.css)({backgroundColor:B.colors.background.primary,border:`1px solid ${B.colors.border.weak}`,borderRadius:B.shape.borderRadius(2),boxShadow:B.shadows.z2,position:"absolute",top:B.spacing(B.components.height.md),maxHeight:"400px",minHeight:"150px",minWidth:"150px",overflowY:"auto",overflowX:"hidden",zIndex:B.zIndex.typeahead}),variableOptionsColumn:(0,Z.css)({maxHeight:"350px",display:"table-cell",lineHeight:"26px",listStyleType:"none"}),variableOptionsWrapper:(0,Z.css)({display:"table",width:"100%"})}}),Pa=(0,Ge.HE)(Zn);var ua=e(61618),Qa=e(92990),wa=e(85972);const br=(B,W,z)=>async(J,ce)=>{if(W===na.cancel)return await J(Mr(B));if(W===na.select)return J(Us(B,z));if(W===na.selectAndClose)return(0,Ra.AE)(B,ce()).optionsPicker.multi?J(Us(B,z)):(J(Us(B,z,!0)),J(Mr(B)));if(W===na.moveDown)return J((0,It.mb)(B,(0,wa.Ew)(1)));if(W===na.moveUp)return J((0,It.mb)(B,(0,wa.Ew)(-1)))},Ds=(B,W="")=>async(z,J)=>{const{rootStateKey:ce}=B,{id:he,queryValue:De}=(0,Ra.AE)(ce,J()).optionsPicker,$e={id:he,rootStateKey:ce,type:"query"},et=(0,Ra.E0)($e,J());if(!(0,fe.eL)(et))return;const{query:ot,options:Dt}=et;if(z((0,It.mb)(ce,(0,wa.Ug)(W))),(0,h.trim)(De)!==(0,h.trim)(W))return(0,_n.bf)(ot)?Os(z,J,W,ce):z((0,It.mb)(ce,(0,wa.ss)(Dt)))},$r=async B=>{if((0,ua.Q)(B.current))return;await pi.z.get(B.type).setValue(B,B.current,!0)},Mr=(B,W)=>async(z,J)=>{const ce=(0,Ra.AE)(B,J()).optionsPicker,he={id:ce.id,rootStateKey:B,type:"query"},De=(0,Ra.E0)(he,J());if(!(0,fe.eL)(De))return;const $e={option:es(ce)},et={propName:"queryValue",propValue:ce.queryValue};z((0,It.mb)(B,(0,Qa.Q8)((0,_n.Y6)(De,$e)))),z((0,It.mb)(B,(0,Qa.Pl)((0,_n.Y6)(De,et))));const ot=(0,Ra.E0)(he,J());if((0,fe.eL)(ot)&&(z((0,It.mb)(B,(0,wa.nn)())),(0,_n.N9)(De)!==(0,_n.N9)(ot)))return W?W(ot):await $r(ot)},mo=(B,W)=>async(z,J)=>{const{id:ce,rootStateKey:he}=B,De=(0,Ra.AE)(he,J()).optionsPicker;De.id&&De.id!==ce&&await z(Mr(he,W));const $e=(0,Ra.E0)(B,J());(0,fe.eL)($e)&&z((0,It.mb)(he,(0,wa.aN)($e)))},Us=(B,W,z=!1)=>(J,ce)=>{const{highlightIndex:he,options:De}=(0,Ra.AE)(B,ce()).optionsPicker,$e=De[he];J((0,It.mb)(B,(0,wa._M)({option:$e,forceSelect:z,clearOthers:W})))},dr=async(B,W,z,J)=>{try{const{id:ce}=(0,Ra.AE)(J,W()).optionsPicker,he={id:ce,rootStateKey:J,type:"query"},De=(0,Ra.E0)(he,W());if(!(0,fe.eL)(De))return;await pi.z.get(De.type).updateOptions(De,z);const et=(0,Ra.E0)(he,W());if(!(0,fe.eL)(et))return;B((0,It.mb)(J,(0,wa.wF)(et.options)))}catch(ce){console.error(ce)}},Os=(0,h.debounce)(dr,500);function es(B){const{options:W,selectedValues:z,queryValue:J,multi:ce}=B;if(W.length===0&&J&&J.length>0)return{text:J,value:J,selected:!1};if(!ce)return z.find($e=>$e.selected);const he=[],De=[];for(const $e of z)$e.selected&&(he.push($e.text.toString()),De.push($e.value.toString()));return{value:De,text:he,selected:!0}}const sr=()=>{const B=he=>({...(0,N.bindActionCreators)({openOptions:mo,commitChangesToVariable:Mr,navigateOptions:br},he),filterOrSearchOptions:(De,$e="")=>{he(Ds(De,$e))},toggleAllOptions:De=>he((0,It.mb)(De.rootStateKey,(0,wa.iQ)())),toggleOption:(De,$e,et,ot)=>he((0,It.mb)(De.rootStateKey,(0,wa._M)({option:$e,clearOthers:et,forceSelect:ot})))}),W=(he,De)=>{const{rootStateKey:$e}=De.variable;return $e?{picker:(0,Ra.AE)($e,he).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:wa.yy})},z=(0,yr.connect)(W,B);class J extends a.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,_n.yQ)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(De,$e)=>{((0,fe.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(De,$e)},this.onToggleSingleValueVariable=(De,$e)=>{this.props.toggleOption((0,_n.yQ)(this.props.variable),De,$e,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(De,$e)=>{this.props.toggleOption((0,_n.yQ)(this.props.variable),De,$e,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,_n.yQ)(this.props.variable))},this.onFilterOrSearchOptions=De=>{this.props.filterOrSearchOptions((0,_n.yQ)(this.props.variable),De)},this.onNavigate=(De,$e)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,De,$e)},this.onCancel=()=>{Hn().cancelRequest((0,_n.yQ)(this.props.variable))}}render(){const{variable:De,picker:$e}=this.props,et=$e.id===De.id;return a.createElement("div",{className:"variable-link-wrapper"},et?this.renderOptions($e):this.renderLink(De))}renderLink(De){const $e=qn(De),et=De.state===Ps.Gu.Loading;return a.createElement(pa,{id:ee.IG+De.id,text:$e,onClick:this.onShowOptions,loading:et,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(De){const{id:$e}=this.props.variable;return a.createElement(X.L,{onClick:this.onHideOptions},a.createElement(Ua,{id:ee.IG+$e,value:De.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${$e}`}),a.createElement(Pa,{values:De.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:De.highlightIndex,multi:De.multi,selectedValues:De.selectedValues,id:`options-${$e}`}))}}const ce=z(J);return ce.displayName="OptionsPicker",ce};var Ks=e(57052);class hi extends a.PureComponent{constructor(){super(...arguments),this.onChange=W=>{this.props.onPropChange({propName:"query",propValue:W.currentTarget.value})},this.onBlur=W=>{this.props.onPropChange({propName:"query",propValue:W.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(a.Fragment,null,a.createElement(Fr.e,null,"Constant options"),a.createElement(Ks.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,testId:bn.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30}))}}const vi={...At.Eg,type:"constant",hide:At.bU.hideVariable,query:"",current:{},options:[]},Xg=(0,Hr.oM)({name:"templating/constant",initialState:Bt.s,reducers:{createConstantOptionsFromQuery:(B,W)=>{const z=(0,Ra.ir)(B,W.payload.id);z.type==="constant"&&(z.options=[{text:z.query.trim(),value:z.query.trim(),selected:!1}])}}}),up=Xg.reducer,{createConstantOptionsFromQuery:mp}=Xg.actions,fp=B=>async W=>{const{rootStateKey:z}=B;await W((0,It.mb)(z,mp((0,_n.Y6)(B)))),await W((0,kt.xQ)(B))},gp=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:vi,reducer:up,picker:sr(),editor:hi,dependsOn:()=>!1,setValue:async(B,W,z=!1)=>{await(0,Ha.WI)((0,kt.Fz)((0,_n.yQ)(B),W,z))},setValueFromUrl:async(B,W)=>{await(0,Ha.WI)((0,kt.Ci)((0,_n.yQ)(B),W))},updateOptions:async B=>{await(0,Ha.WI)(fp((0,_n.yQ)(B)))},getSaveModel:B=>{const{index:W,id:z,state:J,global:ce,current:he,options:De,rootStateKey:$e,...et}=(0,h.cloneDeep)(B);return et},getValueForUrl:B=>B.current.value,beforeAdding:B=>{const{current:W,options:z,query:J,...ce}=(0,h.cloneDeep)(B),he={selected:!0,text:J,value:J};return{...ce,current:he,options:[he],query:J}}});var pp=e(588),hp=e(58255);function ng({value:B,name:W,description:z,onChange:J,ariaLabel:ce}){const he=(0,pp.Me)();return a.createElement(hp.X,{id:he,label:W,description:z,value:B,onChange:J,"aria-label":ce})}const Md=({onMultiChanged:B,onPropChange:W,variable:z})=>{const J=(0,a.useCallback)(De=>{B((0,_n.yQ)(z),De.target.checked)},[B,z]),ce=(0,a.useCallback)(De=>{W({propName:"includeAll",propValue:De.target.checked})},[W]),he=(0,a.useCallback)(De=>{W({propName:"allValue",propValue:De.currentTarget.value})},[W]);return a.createElement(Vn.wc,{spacing:"md",height:"inherit"},a.createElement(ng,{value:z.multi,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:J}),a.createElement(ng,{value:z.includeAll,name:"Include All option",description:"Enables an option to include all variables",onChange:ce}),z.includeAll&&a.createElement(Ks.V,{value:z.allValue??"",onChange:he,name:"Custom all value",placeholder:"blank = auto",testId:bn.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInputV2}))};Md.displayName="SelectionOptionsEditor";var qg=e(49993);class vp extends a.PureComponent{constructor(){super(...arguments),this.onChange=W=>{this.props.onPropChange({propName:"query",propValue:W.currentTarget.value})},this.onSelectionOptionsChange=async({propName:W,propValue:z})=>{this.props.onPropChange({propName:W,propValue:z,updateOptions:!0})},this.onBlur=W=>{this.props.onPropChange({propName:"query",propValue:W.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(a.Fragment,null,a.createElement(Fr.e,null,"Custom options"),a.createElement(qg.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:52,testId:bn.wl.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),a.createElement(Fr.e,null,"Selection options"),a.createElement(Md,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const Ep=(B,W)=>({}),yp={changeVariableMultiValue:kt.Z7},Pp=td(vp,Ep,yp),Cp={...At.Eg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},ep=(0,Hr.oM)({name:"templating/custom",initialState:Bt.s,reducers:{createCustomOptionsFromQuery:(B,W)=>{const z=(0,Ra.ir)(B,W.payload.id);if(z.type!=="custom")return;const{includeAll:J,query:ce}=z,De=(ce.match(/(?:\\,|[^,])+/g)??[]).map($e=>{$e=$e.replace(/\\,/g,",");const et=/^(.+)\s:\s(.+)$/g.exec($e)??[];if(et.length===3){const[,ot,Dt]=et;return{text:ot.trim(),value:Dt.trim(),selected:!1}}else return{text:$e.trim(),value:$e.trim(),selected:!1}});J&&De.unshift({text:ee.xk,value:ee.r2,selected:!1}),z.options=De}}}),Dp=ep.reducer,{createCustomOptionsFromQuery:xp}=ep.actions,bp=B=>async W=>{const{rootStateKey:z}=B;await W((0,It.mb)(z,xp((0,_n.Y6)(B)))),await W((0,kt.xQ)(B))},Mp=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:Cp,reducer:Dp,picker:sr(),editor:Pp,dependsOn:()=>!1,setValue:async(B,W,z=!1)=>{await(0,Ha.WI)((0,kt.Fz)((0,_n.yQ)(B),W,z))},setValueFromUrl:async(B,W)=>{await(0,Ha.WI)((0,kt.Ci)((0,_n.yQ)(B),W))},updateOptions:async B=>{await(0,Ha.WI)(bp((0,_n.yQ)(B)))},getSaveModel:B=>{const{index:W,id:z,state:J,global:ce,rootStateKey:he,...De}=(0,h.cloneDeep)(B);return De},getValueForUrl:B=>(0,_n.HY)(B)?ee.xk:B.current.value});var ag=e(83704);const Sp={...At.Eg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:At.Bd.onDashboardLoad},tp=(0,Hr.oM)({name:"templating/datasource",initialState:Bt.s,reducers:{createDataSourceOptions:(B,W)=>{const{sources:z,regex:J}=W.payload.data,ce=[],he=(0,Ra.ir)(B,W.payload.id);if(he.type==="datasource"){for(let De=0;De<z.length;De++){const $e=z[De];$e.meta.id===he.query&&(Tp($e,J)&&ce.push({text:$e.name,value:$e.name,selected:!1}),Op($e,J)&&ce.push({text:"default",value:"default",selected:!1}))}ce.length===0&&ce.push({text:"No data sources found",value:"",selected:!1}),he.includeAll&&ce.unshift({text:ee.xk,value:ee.r2,selected:!1}),he.options=ce}}}});function Tp(B,W){return W?W.exec(B.name):!0}function Op(B,W){return B.isDefault?W?W.exec("default"):!0:!1}const Ip=tp.reducer,{createDataSourceOptions:Rp}=tp.actions,Ap=(B,W={getDatasourceSrv:m.ak})=>async(z,J)=>{const{rootStateKey:ce}=B,he=W.getDatasourceSrv().getList({metrics:!0,variables:!1}),De=(0,Ra.E0)(B,J());if(De.type!=="datasource")return;let $e;De.regex&&($e=(0,xo.J)().replace(De.regex,void 0,"regex"),$e=(0,ja.jO)($e)),z((0,It.mb)(ce,Rp((0,_n.Y6)(B,{sources:he,regex:$e})))),await z((0,kt.xQ)(B))},Lp=(B,W={getDatasourceSrv:m.ak})=>z=>{const J=W.getDatasourceSrv().getList({metrics:!0,variables:!0}),ce=(0,h.chain)(J).uniqBy("meta.id").map(he=>({text:he.meta.name,value:he.meta.id})).value();ce.unshift({text:"",value:""}),z((0,It.mb)(B,(0,Yr.z7)({dataSourceTypes:ce})))},Bp=(B,W)=>{const{variable:{rootStateKey:z}}=W;if(!z)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:Cd(Yr.PF)};const{editor:J}=(0,Ra.AE)(z,B);return{extended:Cd(J)}},Np={initDataSourceVariableEditor:Lp,changeVariableMultiValue:kt.Z7},Up=(0,yr.connect)(Bp,Np);class wp extends a.PureComponent{constructor(){super(...arguments),this.onRegExChange=W=>{this.props.onPropChange({propName:"regex",propValue:W.currentTarget.value})},this.onRegExBlur=W=>{this.props.onPropChange({propName:"regex",propValue:W.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:W,propName:z})=>{this.props.onPropChange({propName:z,propValue:W,updateOptions:!0})},this.getSelectedDataSourceTypeValue=()=>{const{extended:W}=this.props;if(!W?.dataSourceTypes.length)return"";const z=W.dataSourceTypes.find(ce=>ce.value===this.props.variable.query);return(z?z.value:W.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=W=>{this.props.onPropChange({propName:"query",propValue:W.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:W}=this.props.variable;if(!W){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(W)}render(){const{variable:W,extended:z,changeVariableMultiValue:J}=this.props,ce=z?.dataSourceTypes?.length?z.dataSourceTypes?.map(De=>({value:De.value??"",label:De.text})):[],he=ce.find(De=>De.value===W.query)??ce[0];return a.createElement(a.Fragment,null,a.createElement(Fr.e,null,"Data source options"),a.createElement(ag.u,{name:"Type",value:he,options:ce,onChange:this.onDataSourceTypeChanged,testId:bn.wl.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),a.createElement(Ks.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,description:a.createElement("div",null,"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",a.createElement("br",null),a.createElement("br",null),"Example: ",a.createElement("code",null,"/^prod/"))}),a.createElement(Fr.e,null,"Selection options"),a.createElement(Md,{variable:W,onPropChange:this.onSelectionOptionsChange,onMultiChanged:J}))}}const Wp=Up(wp),Fp=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:Sp,reducer:Ip,picker:sr(),editor:Wp,dependsOn:(B,W)=>B.regex?(0,_n.QI)(B.regex,W.name):!1,setValue:async(B,W,z=!1)=>{await(0,Ha.WI)((0,kt.Fz)((0,_n.yQ)(B),W,z))},setValueFromUrl:async(B,W)=>{await(0,Ha.WI)((0,kt.Ci)((0,_n.yQ)(B),W))},updateOptions:async B=>{await(0,Ha.WI)(Ap((0,_n.yQ)(B)))},getSaveModel:B=>{const{index:W,id:z,state:J,global:ce,rootStateKey:he,...De}=(0,h.cloneDeep)(B);return{...De,options:[]}},getValueForUrl:B=>(0,_n.HY)(B)?ee.xk:B.current.value});var $p=e(69155);const sg=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(B=>({label:`${B}`,value:B})),np=a.memo(({onPropChange:B,variable:W})=>{const z=ot=>{B({propName:"auto",propValue:ot.target.checked,updateOptions:!0})},J=ot=>{B({propName:"query",propValue:ot.currentTarget.value})},ce=ot=>{B({propName:"query",propValue:ot.currentTarget.value,updateOptions:!0})},he=ot=>{B({propName:"auto_count",propValue:ot.value,updateOptions:!0})},De=ot=>{B({propName:"auto_min",propValue:ot.currentTarget.value,updateOptions:!0})},$e=sg.find(ot=>ot.value===W.auto_count)??sg[0],et=(0,Ge.wW)(Kp);return a.createElement(a.Fragment,null,a.createElement(Fr.e,null,"Interval options"),a.createElement(Ks.V,{value:W.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:J,onBlur:ce,testId:bn.wl.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),a.createElement(ng,{value:W.auto,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:z}),W.auto&&a.createElement("div",{className:et.autoFields},a.createElement(ag.u,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:$e,options:sg,onChange:he,width:9}),a.createElement(Ks.V,{value:W.auto_min,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:De,width:11})))});np.displayName="IntervalVariableEditor";function Kp(B){return{autoFields:(0,Z.css)({marginTop:B.spacing(2),display:"flex",flexDirection:"column"})}}var Vp=e(28674);const zp={...At.Eg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:At.Bd.onTimeRangeChanged,current:{}},ap=(0,Hr.oM)({name:"templating/interval",initialState:Bt.s,reducers:{createIntervalOptions:(B,W)=>{const z=(0,Ra.ir)(B,W.payload.id);if(z.type!=="interval")return;const J=(0,h.map)(z.query.match(/(["'])(.*?)\1|\w+/g),ce=>(ce=ce.replace(/["']+/g,""),{text:ce.trim(),value:ce.trim(),selected:!1}));z.auto&&J.length&&J[0].text!=="auto"&&J.unshift({text:"auto",value:"$__auto_interval_"+z.name,selected:!1}),z.options=J}}}),Hp=ap.reducer,{createIntervalOptions:kp}=ap.actions,_p=B=>async W=>{const{rootStateKey:z}=B;await W((0,It.mb)(z,kp((0,_n.Y6)(B)))),await W(rg(B)),await W((0,kt.xQ)(B))},rg=(B,W={calculateInterval:Gf.calculateInterval,getTimeSrv:cs.$t,templateSrv:(0,Vp.J)()})=>(z,J)=>{const ce=(0,Ra.E0)(B,J());if(ce.type==="interval"&&ce.auto){const he=W.calculateInterval(W.getTimeSrv().timeRange(),ce.auto_count,ce.auto_min);W.templateSrv.setGrafanaVariable("$__auto_interval_"+ce.name,he.interval),W.templateSrv.setGrafanaVariable("$__auto_interval",he.interval)}},Gp=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:zp,reducer:Hp,picker:sr(),editor:np,dependsOn:()=>!1,setValue:async(B,W,z=!1)=>{await(0,Ha.WI)(rg((0,_n.yQ)(B))),await(0,Ha.WI)((0,kt.Fz)((0,_n.yQ)(B),W,z))},setValueFromUrl:async(B,W)=>{await(0,Ha.WI)(rg((0,_n.yQ)(B))),await(0,Ha.WI)((0,kt.Ci)((0,_n.yQ)(B),W))},updateOptions:async B=>{await(0,Ha.WI)(_p((0,_n.yQ)(B)))},getSaveModel:B=>{const{index:W,id:z,state:J,global:ce,rootStateKey:he,...De}=(0,h.cloneDeep)(B);return De},getValueForUrl:B=>B.current.value});var sp=e(69273);const og=[{label:"On dashboard load",value:sp.Bd.onDashboardLoad},{label:"On time range change",value:sp.Bd.onTimeRangeChanged}];function Yp({onChange:B,refresh:W}){const z=(0,a.useMemo)(()=>og.find(J=>J.value===W)?.value??og[0].value,[W]);return a.createElement(da.g,{label:"Refresh",description:"When to update the values of this variable"},a.createElement(me.S,{options:og,onChange:B,value:z}))}const ig=[{label:"Disabled",value:At.$U.disabled},{label:"Alphabetical (asc)",value:At.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:At.$U.alphabeticalDesc},{label:"Numerical (asc)",value:At.$U.numericalAsc},{label:"Numerical (desc)",value:At.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:At.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:At.$U.alphabeticalCaseInsensitiveDesc}];function jp({onChange:B,sort:W}){const z=(0,a.useMemo)(()=>ig.find(J=>J.value===W)??ig[0],[W]);return a.createElement(ag.u,{name:"Sort",description:"How to sort the values of this variable",value:z,options:ig,onChange:B,testId:bn.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,width:25})}var Qp=e(53376),Zp=e(77599),rp=e(95125);async function Jp(B,W=Vi.nL){if((0,fe.d7)(B))return B.variables.editor;if((0,fe.X7)(B)){const z=await W(B.meta);if(!z.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return z.components.QueryEditor??null}return(0,fe.Ju)(B)?Xp:(0,fe.R)(B)?(await W(B.meta)).components.VariableQueryEditor??rp.R:null}function Xp({datasource:B,query:W,onChange:z}){const J=(0,a.useCallback)(ce=>{z({refId:"StandardVariableQuery",query:ce})},[z]);return a.createElement(rp.R,{query:W.query,onChange:J,datasource:B,templateSrv:(0,xo.J)()})}function qp(B,W,z){return{next:ce=>{if(ce.state===Ps.Gu.Error){z.unsubscribe(),W(ce.error);return}if(ce.state===Ps.Gu.Done){z.unsubscribe(),B();return}},error:ce=>{z.unsubscribe(),W(ce)},complete:()=>{z.unsubscribe(),B()}}}const eh=(B,W)=>async(z,J)=>{try{const{rootStateKey:ce}=B;if(!(0,_n.A3)(ce,J()))return;const he=(0,Ra.E0)(B,J());if(he.type!=="query")return;(0,Ra.AE)(ce,J()).editor.id===he.id&&z((0,It.mb)(ce,(0,Yr.PV)({errorProp:"update"})));const De=await(0,L.F)().get(he.datasource??"");await new Promise(($e,et)=>{const ot=new Qp.w0,Dt=qp($e,et,ot),Ht=Hn().getResponse(B).subscribe(Dt);ot.add(Ht),Hn().queueRequest({identifier:B,datasource:De,searchFilter:W})})}catch(ce){if(ce instanceof Error){const he=(0,Zp.P)(ce),{rootStateKey:De}=B;throw(0,Ra.AE)(De,J()).editor.id===B.id&&z((0,It.mb)(De,(0,Yr.Sg)({errorProp:"update",errorText:he.message}))),he}}},th=B=>async(W,z)=>{const J=(0,Ra.E0)(B,z());J.type==="query"&&await W(op((0,_n.yQ)(J),J.datasource))},op=(B,W)=>async(z,J)=>{try{const{rootStateKey:ce}=B,{editor:he}=(0,Ra.AE)(ce,J()),$e=El(he)?.dataSource,et=await(0,L.F)().get(W??"");$e&&$e.type!==et?.type&&z((0,It.mb)(ce,(0,Qa.Pl)((0,_n.Y6)(B,{propName:"query",propValue:""}))));const ot=await Jp(et);z((0,It.mb)(ce,(0,Yr.z7)({dataSource:et,VariableQueryEditor:ot})))}catch(ce){console.error(ce)}},nh=(B,W,z)=>async(J,ce)=>{const{rootStateKey:he}=B,De=(0,Ra.E0)(B,ce());if(De.type==="query"){if(ah(De.name,W)){const $e="Query cannot contain a reference to itself. Variable: $"+De.name;J((0,It.mb)(he,(0,Yr.Sg)({errorProp:"query",errorText:$e})));return}J((0,It.mb)(he,(0,Yr.PV)({errorProp:"query"}))),J((0,It.mb)(he,(0,Qa.Pl)((0,_n.Y6)(B,{propName:"query",propValue:W})))),z!==void 0?J((0,It.mb)(he,(0,Qa.Pl)((0,_n.Y6)(B,{propName:"definition",propValue:z})))):typeof W=="string"&&J((0,It.mb)(he,(0,Qa.Pl)((0,_n.Y6)(B,{propName:"definition",propValue:W})))),await J((0,kt.Rk)(B))}};function ah(B,W){if(typeof W=="string"&&W.match(new RegExp("\\$"+B+"(/| |$)")))return!0;const z=ip(W);for(let J in z)if(z.hasOwnProperty(J)){const ce=z[J];if(typeof ce=="string"&&ce.match(new RegExp("\\$"+B+"(/| |$)")))return!0}return!1}function ip(B){return typeof B!="object"||B===null?{query:B}:Object.keys(B).reduce((J,ce)=>{const he=B[ce];if(typeof he!="object"||he===null)return J[ce]=he,J;const De=ip(he);for(let $e in De)De.hasOwnProperty($e)&&(J[`${ce}_${$e}`]=De[$e]);return J},{})}const sh=(B,W)=>{const{rootStateKey:z}=W.variable;if(!z)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:El(Yr.PF)};const{editor:J}=(0,Ra.AE)(z,B);return{extended:El(J)}},rh={initQueryVariableEditor:th,changeQueryVariableDataSource:op,changeQueryVariableQuery:nh,changeVariableMultiValue:kt.Z7},oh=(0,yr.connect)(sh,rh);class ih extends a.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=W=>{this.props.onPropChange({propName:"datasource",propValue:W.isDefault?null:(0,Yf.iU)(W)})},this.onLegacyQueryChange=async(W,z)=>{this.props.variable.query!==W&&this.props.changeQueryVariableQuery((0,_n.yQ)(this.props.variable),W,z)},this.onQueryChange=async W=>{if(this.props.variable.query!==W){let z="";W&&W.hasOwnProperty("query")&&typeof W.query=="string"&&(z=W.query),this.props.changeQueryVariableQuery((0,_n.yQ)(this.props.variable),W,z)}},this.onRegExChange=W=>{this.setState({regex:W.currentTarget.value})},this.onRegExBlur=async W=>{const z=W.currentTarget.value;this.props.variable.regex!==z&&this.props.onPropChange({propName:"regex",propValue:z,updateOptions:!0})},this.onRefreshChange=W=>{this.props.onPropChange({propName:"refresh",propValue:W})},this.onSortChange=async W=>{this.props.onPropChange({propName:"sort",propValue:W.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:W,propName:z})=>{this.props.onPropChange({propName:z,propValue:W,updateOptions:!0})},this.renderQueryEditor=()=>{const{extended:W,variable:z}=this.props;if(!W||!W.dataSource||!W.VariableQueryEditor)return null;const J=W.dataSource,ce=W.VariableQueryEditor;let he=z.query;if(typeof he=="string"?he=he||(J.variables?.getDefaultQuery?.()??""):he={...J.variables?.getDefaultQuery?.(),...z.query},(0,fe.NX)(ce,J))return a.createElement(da.g,{label:"Query"},a.createElement(ce,{datasource:J,query:he,templateSrv:(0,xo.J)(),onChange:this.onLegacyQueryChange}));const De=(0,cs.$t)().timeRange();return(0,fe.$7)(ce,J)?a.createElement(da.g,{label:"Query"},a.createElement(ce,{datasource:J,query:he,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:Ps.Gu.Done,timeRange:De},range:De,onBlur:()=>{},history:[]})):null}}async componentDidMount(){await this.props.initQueryVariableEditor((0,_n.yQ)(this.props.variable))}componentDidUpdate(W){W.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,_n.yQ)(this.props.variable),this.props.variable.datasource)}render(){return a.createElement(a.Fragment,null,a.createElement(Fr.e,null,"Query options"),a.createElement(da.g,{label:"Data source",htmlFor:"data-source-picker"},a.createElement(jf.q,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0,width:30})),this.renderQueryEditor(),a.createElement(qg.W,{value:this.state.regex??this.props.variable.regex,name:"Regex",description:a.createElement("div",null,"Optional, if you want to extract part of a series name or metric node segment.",a.createElement("br",null),"Named capture groups can be used to separate the display text and value (",a.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank"},"see examples"),")."),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,testId:bn.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),a.createElement(jp,{onChange:this.onSortChange,sort:this.props.variable.sort}),a.createElement(Yp,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh}),a.createElement(Fr.e,null,"Selection options"),a.createElement(Md,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const lh=oh(ih),ch=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:Xt,reducer:En,picker:sr(),editor:lh,dependsOn:(B,W)=>(0,_n.QI)(B.query,B.datasource?.uid,B.regex,W.name),setValue:async(B,W,z=!1)=>{await(0,Ha.WI)((0,kt.Fz)((0,_n.yQ)(B),W,z))},setValueFromUrl:async(B,W)=>{await(0,Ha.WI)((0,kt.Ci)((0,_n.yQ)(B),W))},updateOptions:async(B,W)=>{await(0,Ha.WI)(eh((0,_n.yQ)(B),W))},getSaveModel:B=>{const{index:W,id:z,state:J,global:ce,queryValue:he,rootStateKey:De,...$e}=(0,h.cloneDeep)(B);return B.refresh!==At.Bd.never?{...$e,options:[]}:$e},getValueForUrl:B=>(0,_n.HY)(B)?ee.xk:B.current.value}),dh=()=>({id:"system",description:"",name:"system",initialState:{...At.Eg,type:"system",hide:At.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:Ps.Gu.Done},reducer:(B,W)=>B,picker:null,editor:null,dependsOn:()=>!1,setValue:async(B,W,z=!1)=>{},setValueFromUrl:async(B,W)=>{},updateOptions:async B=>{},getSaveModel:B=>({}),getValueForUrl:B=>""});function uh({onPropChange:B,variable:{query:W}}){const z=(0,a.useCallback)((he,De)=>{he.preventDefault(),B({propName:"originalQuery",propValue:he.currentTarget.value,updateOptions:!1}),B({propName:"query",propValue:he.currentTarget.value,updateOptions:De})},[B]),J=(0,a.useCallback)(he=>z(he,!1),[z]),ce=(0,a.useCallback)(he=>z(he,!0),[z]);return a.createElement(a.Fragment,null,a.createElement(Fr.e,null,"Text options"),a.createElement(Ks.V,{value:W,name:"Default value",placeholder:"default value, if any",onChange:J,onBlur:ce,width:30,testId:bn.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function mh({variable:B,onVariableChange:W,readOnly:z}){const J=(0,Cn.useDispatch)(),[ce,he]=(0,a.useState)(B.current.value);(0,a.useEffect)(()=>{he(B.current.value)},[B]);const De=(0,a.useCallback)(()=>{if(!B.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(B.current.value!==ce){if(J((0,It.mb)(B.rootStateKey,(0,Qa.Pl)((0,_n.Y6)({id:B.id,type:B.type},{propName:"query",propValue:ce})))),W){W({...B,current:(0,ua.Q)(B.current)?{}:{...B.current,value:ce}});return}pi.z.get(B.type).updateOptions(B)}},[B,ce,J,W]),$e=(0,a.useCallback)(Dt=>he(Dt.target.value),[he]),et=Dt=>De(),ot=Dt=>{Dt.keyCode===13&&(Dt.preventDefault(),De())};return a.createElement(de.I,{type:"text",value:ce,onChange:$e,onBlur:et,disabled:z,onKeyDown:ot,placeholder:(0,Na.t)("variable.textbox.placeholder","Enter variable value"),id:ee.IG+B.id})}const fh={...At.Eg,type:"textbox",query:"",current:{},options:[],originalQuery:null},lp=(0,Hr.oM)({name:"templating/textbox",initialState:Bt.s,reducers:{createTextBoxOptions:(B,W)=>{const z=(0,Ra.ir)(B,W.payload.id);if(z.type!=="textbox")return;const J={text:z.query.trim(),value:z.query.trim(),selected:!1};z.options=[J],z.current=J}}}),gh=lp.reducer,{createTextBoxOptions:ph}=lp.actions,hh=B=>async(W,z)=>{const{rootStateKey:J,type:ce}=B;W((0,It.mb)(J,ph((0,_n.Y6)(B))));const he=(0,Ra.E0)(B,z());he.type==="textbox"&&await pi.z.get(ce).setValue(he,he.options[0],!0)},vh=(B,W)=>async(z,J)=>{const{rootStateKey:ce}=B,he=(0,Ra.E0)(B,J());if(he.type!=="textbox")return;const De=(0,_n.Hi)(W);z((0,It.mb)(ce,(0,Qa.Pl)((0,_n.Y6)(he,{propName:"query",propValue:De})))),await z((0,kt.Ci)((0,_n.yQ)(he),De))},Eh=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:fh,reducer:gh,picker:mh,editor:uh,dependsOn:(B,W)=>!1,setValue:async(B,W,z=!1)=>{await(0,Ha.WI)((0,kt.Fz)((0,_n.yQ)(B),W,z))},setValueFromUrl:async(B,W)=>{await(0,Ha.WI)(vh((0,_n.yQ)(B),W))},updateOptions:async B=>{await(0,Ha.WI)(hh((0,_n.yQ)(B)))},getSaveModel:(B,W)=>{const{index:z,id:J,state:ce,global:he,originalQuery:De,rootStateKey:$e,...et}=(0,h.cloneDeep)(B);if(B.query!==De&&!W){const ot=De??"",Dt={selected:!1,text:ot,value:ot};return{...et,query:ot,current:Dt,options:[Dt]}}return et},getValueForUrl:B=>B.current.value,beforeAdding:B=>({...(0,h.cloneDeep)(B),originalQuery:B.query})});var lg=e(24290),cg=e(10655),yh=e(61962);const Ph={navBarTree:yh.V4,navIndex:So.G4,appNotifications:rl.VW};var Ch=e(66114),Dh=e(11626),xh=e(56777),bh=e(85389),Mh=e(88612),Sh=e(36281),Th=e(58790),Oh=e(41632),Ih=e(48197),Rh=e(15932),Ah=e(75804),Lh=e(24693),Bh=e(17283),Nh=e(46732),Uh=e(66552),wh=e(54294),Wh=e(45003),Fh=e(62295),$h=e(97189),Kh=e(12142),dg=e(29427),Vh=e(70431);const zh={...Ph,...Dh.ZP,...$h.ZP,...xh.ZP,...Rh.ZP,...Th.ZP,...Ih.ZP,...Oh.ZP,...Kh.ZP,...Wh.ZP,...wh.ZP,...Ah.ZP,...Bh.ZP,...Mh.ZP,...Ch.ZP,...Lh.ZP,...Sh.ZP,...Nh.ZP,...It.ZP,...Fh.ZP,...bh.ZP,plugins:Uh.I6,[dg.C.reducerPath]:dg.C.reducer,[cg.Rh.reducerPath]:cg.Rh.reducer,[lg.Zi.reducerPath]:lg.Zi.reducer},cp={},tv=B=>{Object.assign(cp,B)},Hh=()=>{const B=(0,N.combineReducers)({...zh,...cp});return(W,z)=>{if(z.type!==Vh.e.type)return B(W,z);const{cleanupAction:J}=z.payload;return J(W),B(W,z)}};function nv(B){addReducer(B)}function kh(B){const W=(0,Hr.xC)({reducer:Hh(),middleware:z=>z({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(dg.C.middleware,cg.Rh.middleware,lg.Zi.middleware),devTools:!1,preloadedState:{navIndex:(0,So.Cu)(),...B}});return(0,Ha.PQ)(W),W}C().move=re.R;const dp=e(72866),Sd=dp.keys().map(B=>dp(B));class _h{async init(){try{parent.postMessage("GrafanaAppInit","*");const W=(0,Na.uC)(Q.ZP.bootData.user.language);(0,O.jW)(Co.ae),jh(),Qh(),(0,D.i_)(Q.ZP.bootData.user.locale),(0,D.Ls)(Q.ZP.bootData.user.weekStart),(0,A.L)($f.$),(0,_.t)(Gm),(0,j.$)(md.Z),(0,U.x)(I.E1),(0,x.K)(()=>Q.ZP.bootData.user.timezone),Ff(),(0,F.Xw)(ds.Z),await W,Gh(),kh(),Yh(),M.S.setInit(ed.u),M.N.setInit(ed.l),b.Z.setInit(yo),pi.z.setInit(()=>[ch(),Mp(),Eh(),gp(),Fp(),Gp(),tg(),dh()]),R.F.setInit(Al),(0,w.pD)(()=>new zg),Nn(new _a),(0,w.Iw)(yd.v7),(0,K.Qf)({importPanelPlugin:kf.Ub,getPanelPluginFromCache:kf.q1}),S.u.initialize({config:Q.ZP,getTimeRangeForUrl:(0,cs.$t)().timeRangeForUrl,getVariablesUrlParams:$p.c}),document.addEventListener("click",li);const z=new m.ND;z.init(Q.ZP.datasources,Q.ZP.defaultDatasource),(0,L.w)(z),kg(),new Zm().init();const ce=await wg(Q.ZP.apps),he=Dt=>Bg({...Dt,registry:Lg(ce)});(0,V.o)(he);const De=I.E1.getSearchObject(),$e=new Xc,et=new Of(I.E1,$e);$e.setKioskModeFromUrl(De.kiosk),this.context={backend:Co.ae,location:I.E1,chrome:$e,keybindings:et,config:Q.ZP},(0,P.s)(document.getElementById("reactRoot")).render(a.createElement(cl,{app:this}))}catch(W){console.error("Failed to start Grafana",W),window.__grafana_load_failed()}}}function Gh(){Sd.length>0&&Sd[0].addExtensionReducers()}function Yh(){Sd.length>0&&Sd[0].init()}function jh(){(0,H.tz)(new ad({debug:!1})),window.addEventListener("load",B=>{const W="frontend_boot_load_time_seconds",z="frontend_boot_js_done_time_seconds",J="frontend_boot_css_time_seconds";performance&&(performance.mark(W),Pl("first-paint","frontend_boot_","_time_seconds"),Pl("first-contentful-paint","frontend_boot_","_time_seconds"),Pl(W),Pl(z),Pl(J))}),Va.Vt.user.orgRole!==""&&(0,H.e6)(new tf({})),Q.ZP.sentry.enabled&&(0,H.e6)(new xf({...Q.ZP.sentry,user:Q.ZP.bootData.user,buildInfo:Q.ZP.buildInfo})),Q.ZP.grafanaJavascriptAgent.enabled&&(0,H.e6)(new ff({...Q.ZP.grafanaJavascriptAgent,app:{version:Q.ZP.buildInfo.version,environment:Q.ZP.buildInfo.env},buildInfo:Q.ZP.buildInfo,user:{id:String(Q.ZP.bootData.user?.id),email:Q.ZP.bootData.user?.email}})),Q.ZP.googleAnalyticsId&&(0,H.e6)(new sf({googleAnalyticsId:Q.ZP.googleAnalyticsId})),Q.ZP.googleAnalytics4Id&&(0,H.e6)(new af({googleAnalyticsId:Q.ZP.googleAnalytics4Id,googleAnalytics4SendManualPageViews:Q.ZP.googleAnalytics4SendManualPageViews})),Q.ZP.rudderstackWriteKey&&Q.ZP.rudderstackDataPlaneUrl&&(0,H.e6)(new rf({writeKey:Q.ZP.rudderstackWriteKey,dataPlaneUrl:Q.ZP.rudderstackDataPlaneUrl,user:Q.ZP.bootData.user,sdkUrl:Q.ZP.rudderstackSdkUrl,configUrl:Q.ZP.rudderstackConfigUrl})),Q.ZP.applicationInsightsConnectionString&&(0,H.e6)(new nf({connectionString:Q.ZP.applicationInsightsConnectionString,endpointUrl:Q.ZP.applicationInsightsEndpointUrl}))}function Qh(){(0,k.n)()>0&&document.body.classList.add("no-overlay-scrollbar")}function Pl(B,W="",z=""){const J=C().first(performance.getEntriesByName(B));if(J){const ce=J.name.replace(/-/g,"_");qm(`${W}${ce}${z}`,Math.round(J.startTime)/1e3)}}const Zh=new _h;window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,Zh.init()},39031:(Y,T,e)=>{"use strict";e.d(T,{As:()=>t,TE:()=>s,Z9:()=>n,_M:()=>c,sK:()=>i});var t=(f=>(f.Active="active",f.Expired="expired",f.Pending="pending",f))(t||{}),n=(f=>(f.Unprocessed="unprocessed",f.Active="active",f.Suppressed="suppressed",f))(n||{}),c=(f=>(f.equal="=",f.notEqual="!=",f.regex="=~",f.notRegex="!~",f))(c||{}),s=(f=>(f.Internal="internal",f.External="external",f.All="all",f))(s||{}),i=(f=>(f.cortex="cortex",f.mimir="mimir",f.prometheus="prometheus",f))(i||{})},53552:(Y,T,e)=>{"use strict";e.d(T,{$5:()=>n,MQ:()=>c,Rv:()=>f,az:()=>i});const t={statistics:[]};var n=(r=>(r[r.Query=1]="Query",r[r.Search=0]="Search",r))(n||{}),c=(r=>(r[r.Builder=0]="Builder",r[r.Code=1]="Code",r))(c||{});const s={parameters:[]};var i=(r=>(r.And="and",r.Function="function",r.FunctionParameter="functionParameter",r.GroupBy="groupBy",r.Operator="operator",r.Or="or",r.Property="property",r))(i||{}),f=(r=>(r.String="string",r))(f||{});const u={logGroupNames:[],logGroups:[],statsGroups:[]}},2868:(Y,T,e)=>{"use strict";e.d(T,{$5:()=>t.$5,KB:()=>n,MQ:()=>t.MQ,wf:()=>c});var t=e(53552),n=(s=>(s.Scheduled="Scheduled",s.Running="Running",s.Complete="Complete",s.Failed="Failed",s.Cancelled="Cancelled",s.Timeout="Timeout",s))(n||{}),c=(s=>(s.Regions="regions",s.Namespaces="namespaces",s.Metrics="metrics",s.DimensionKeys="dimensionKeys",s.DimensionValues="dimensionValues",s.EBSVolumeIDs="ebsVolumeIDs",s.EC2InstanceAttributes="ec2InstanceAttributes",s.ResourceArns="resourceARNs",s.Statistics="statistics",s.LogGroups="logGroups",s.Accounts="accounts",s))(c||{})},79543:(Y,T,e)=>{"use strict";e.d(T,{hD:()=>I,oe:()=>f.o,yl:()=>u,AK:()=>r});var t=e(84946),n=e(89749),c=e(52666),s=e(75849),i=e(9398),f=e(21471);function u(w){return w?typeof w=="string"?w===f.o:"meta"in w&&w.meta.name===f.o||w.uid===f.o:!1}function r(w,K){return new t.y(L=>{const V=(0,i.h4)().getCurrent(),H=d(w.queries);if(!H){L.next(o("Missing panel reference ID"));return}const j=V?.getPanelById(H);if(!j){L.next(o("Unknown Panel: "+H));return}const A=j.getQueryRunner(),_=A.getData({withTransforms:Boolean(K?.withTransforms),withFieldConfig:!1}).subscribe({next:k=>{K?.topic===n.w5.Annotations&&(k={...k,series:k.annotations??[],annotations:void 0}),L.next(k)}});if(!j.isInView){const{datasource:k,targets:Q}=j,re={...w,datasource:k,panelId:H,queries:Q};A.run(re)}return()=>{_.unsubscribe()}})}function d(w){if(!(!w||!w.length))return w[0].panelId}function o(w){return{state:c.Gu.Error,series:[],request:{},error:{message:w},timeRange:(0,s.JK)()}}var m=e(9892),l=e(588),p=e(64681),g=e.n(p),y=e(66111),v=e(59679),E=e(72648),h=e(24799),C=e(8581),a=e(52081),P=e(2594),D=e(8944),x=e(67487),M=e(72948),b=e(47694),R=e(91162),S=e(36584);function O(w){return JSON.stringify(w)}const U=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function I({panelData:w,queries:K,onChange:L,onRunQueries:V}){const{value:H}=(0,v.Z)(()=>(0,R.ak)().get()),j=K[0],A=(0,y.useMemo)(()=>(0,i.h4)().getCurrent()?.getPanelById(j.panelId??-124134),[j.panelId]),{value:_,loading:k}=(0,v.Z)(async()=>{if(!A)return[];const q=await(0,R.ak)().get(A.datasource);return Promise.all(A.targets.map(async se=>{const ae=se.datasource?await(0,R.ak)().get(se.datasource):q,pe=ae.getQueryDisplayText||O,de=(0,S.t)(w,se.refId)??w;return{refId:se.refId,query:pe(se),name:ae.name,img:ae.meta.info.logos.small,data:de.series,error:de.error}}))},[w,A]),Q=(0,y.useCallback)(q=>{L([q]),V()},[L,V]),re=(0,y.useCallback)(q=>{Q({...j,panelId:q})},[j,Q]),Z=(0,y.useCallback)(()=>{Q({...j,withTransforms:!j.withTransforms})},[j,Q]),oe=(0,y.useCallback)(q=>{Q({...j,topic:q?n.w5.Annotations:void 0})},[j,Q]),G=(0,y.useCallback)(q=>{const se=q.datasource??H,ae=(0,R.ak)().getInstanceSettings(se)?.name,pe=q.targets.length;return`${pe} ${g()("query",pe)} to ${ae}`},[H]),le=(0,i.h4)().getCurrent(),ge=Boolean(j.withTransforms||A?.transformations?.length),ne=(0,y.useMemo)(()=>le?.panels.filter(q=>b.ZP.panels[q.type]&&q.targets&&q.id!==le.panelInEdit?.id&&q.datasource?.uid!==f.o).map(q=>({value:q.id,label:q.title??"Panel "+q.id,description:G(q),imgUrl:b.ZP.panels[q.type].info.logos.small}))??[],[le,G]),ue=(0,E.wW)(F),te=(0,l.Me)();if(!le)return null;if(ne.length<1)return y.createElement("p",{className:ue.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const me=ne.find(q=>q.value===j.panelId);return y.createElement(y.Fragment,null,y.createElement(h.g,{label:"Source",description:"Use the same results as panel"},y.createElement(C.Ph,{inputId:te,placeholder:"Choose panel",isSearchable:!0,options:ne,value:me,onChange:q=>re(q.value)})),y.createElement(a.Lh,{height:"auto",wrap:!0,align:"flex-start"},y.createElement(h.g,{label:"Data Source",description:"Use data or annotations from the panel",className:ue.horizontalField},y.createElement(P.S,{options:U,value:j.topic===n.w5.Annotations,onChange:oe})),ge&&y.createElement(h.g,{label:"Transform",description:"Apply panel transformations from the source panel"},y.createElement(D.r,{value:Boolean(j.withTransforms),onChange:Z}))),k?y.createElement(x.$,null):y.createElement(y.Fragment,null,_&&Boolean(_.length)&&y.createElement(h.g,{label:"Queries from panel"},y.createElement(a.wc,{spacing:"sm"},_.map((q,se)=>y.createElement(M.Z,{key:`DashboardQueryRow-${se}`},y.createElement(M.Z.Heading,null,q.refId),y.createElement(M.Z.Figure,null,y.createElement("img",{src:q.img,alt:q.name,title:q.name,width:40})),y.createElement(M.Z.Meta,null,q.query)))))))}function F(w){return{horizontalField:(0,m.css)({marginRight:w.spacing(2)}),noQueriesText:(0,m.css)({padding:w.spacing(1.25)})}}},21471:(Y,T,e)=>{"use strict";e.d(T,{o:()=>t});const t="-- Dashboard --",n="dashboard"},35821:(Y,T,e)=>{"use strict";e.d(T,{k:()=>st,e:()=>Ie});var t=e(82897),n=e(49372),c=e(59980),s=e(12877),i=e(9471),f=e(59957),u=e(52666),r=e(8891),d=e(53678),o=e(12115),m=e(83881),l=e(22069),p=e(20308),g=e(75118),y=e(54899),v=e(86647),E=e(7592),h=e(9398),C=e(9892),a=e(66111),P=e(72648),D=e(13393),x=e(24799),M=e(8581),b=e(8944),R=e(24357),S=e(70659),O=e(7832),U=e(36365),I=e.n(U),F=e(56808),w=e(52566),K=e(31403),L=e(52081),V=e(4883),H=e(10516),j=e(72505),A=e(39904),_=e(73267),k=e(85419);const Q="time-of-day-picker-panel",re=({minuteStep:Ve=1,showHour:_e=!0,showSeconds:tt=!1,onChange:dt,value:Oe,size:ye="auto",disabled:Pe,disabledHours:be,disabledMinutes:Be,disabledSeconds:ze,placeholder:lt,format:ht="HH:mm",defaultValue:vt=void 0,allowEmpty:bt=!1,width:ct})=>{const Pt=(0,P.wW)(oe),ie=()=>ct?C.css`
        width: ${ct}px;
      `:(0,_.ht)()[ye];return a.createElement(j.Z,{value:Oe,defaultValue:vt,onChange:Ce=>dt(Ce),showHour:_e,showSecond:tt,format:ht,allowEmpty:bt,className:(0,C.cx)(ie(),Pt.input),popupClassName:(0,C.cx)(Pt.picker,Q),minuteStep:Ve,inputIcon:a.createElement(Z,{wrapperStyle:Pt.caretWrapper}),disabled:Pe,disabledHours:be,disabledMinutes:Be,disabledSeconds:ze,placeholder:lt})},Z=({wrapperStyle:Ve=""})=>a.createElement("div",{className:Ve},a.createElement(A.J,{name:"angle-down"})),oe=Ve=>{const _e=Ve.components.input.background,tt=Ve.v1.palette.black,dt=Ve.colors.background.secondary,Oe=Ve.shape.borderRadius(1),ye=Ve.components.input.borderColor;return{caretWrapper:C.css`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${Ve.colors.text.secondary};
    `,picker:C.css`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${_e};
        border-color: ${ye};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${Ve.v1.palette.orange};
            border-radius: ${Oe};
          }

          &:hover {
            background: ${dt};
          }

          &.rc-time-picker-panel-select-option-disabled {
            color: ${Ve.colors.action.disabledText};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${tt};
        background-color: ${_e};
        border-color: ${ye};
        border-radius: ${Oe};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${_e};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:C.css`
      .rc-time-picker-input {
        background-color: ${_e};
        border-radius: ${Oe};
        border-color: ${ye};
        height: ${Ve.spacing(4)};

        &:focus {
          ${(0,k.focusCss)(Ve)}
        }

        &:disabled {
          background-color: ${Ve.colors.action.disabledBackground};
          color: ${Ve.colors.action.disabledText};
          border: 1px solid ${Ve.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }

      .rc-time-picker-clear {
        position: absolute;
        right: 20px;
        top: 50%;
        cursor: pointer;
        overflow: hidden;
        transform: translateY(-50%);
        color: ${Ve.colors.text.secondary};
      }
    `}},G=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((Ve,_e)=>({label:Ve,value:_e+1})),le=({value:Ve,onChange:_e})=>{const tt=(0,P.wW)(ge),dt=Date.now(),Oe=(0,F.Pr)(Ve.timezone??"utc",dt),ye=(0,h.h4)().getCurrent()?.getTimezone()===Ve.timezone,[Pe,be]=(0,a.useState)(!1),Be=()=>{be(!Pe)},ze=Ce=>{if(!Ce)return;const Ne=I()();if(Ce){const Ze=Ce.split(":");Ne.set("hour",parseInt(Ze[0],10)),Ne.set("minute",parseInt(Ze[1],10))}return Ne},lt=()=>{let Ce="Everyday";return Ve.fromDayOfWeek&&!Ve.toDayOfWeek&&(Ce=G[Ve.fromDayOfWeek-1].label),Ce},ht=()=>{const Ce=a.createElement(a.Fragment,null,a.createElement(H.d,{title:Oe?.name}),a.createElement(V.v,{timeZone:Ve.timezone,timestamp:dt}));return ye?a.createElement(a.Fragment,null,"Dashboard timezone (",Ce,")"):Ce},vt=(Ce,Ne)=>{const Ze=Ce?Ce.format("HH:mm"):void 0;_e(Ne==="from"?{...Ve,from:Ze}:{...Ve,to:Ze})},bt=Ce=>{_e({...Ve,timezone:Ce})},ct=Ce=>{const Ne=Ce?Ce.value:void 0,Ze=Ce?Ve.toDayOfWeek:void 0;_e({...Ve,fromDayOfWeek:Ne,toDayOfWeek:Ze})},Pt=Ce=>{_e({...Ve,toDayOfWeek:Ce?Ce.value:void 0})},ie=()=>Pe?a.createElement(w.O,{value:Ve.timezone,includeInternal:!0,onChange:Ce=>bt(Ce),onBlur:()=>be(!1),menuShouldPortal:!0,openMenuOnFocus:!1,width:100,autoFocus:!0}):a.createElement("div",{className:tt.timezoneContainer},a.createElement("div",{className:tt.timezone},ht()),a.createElement(K.zx,{variant:"secondary",onClick:Be,size:"sm"},"Change timezone"));return a.createElement(D.C,{className:tt.wrapper},a.createElement(x.g,{label:"From"},a.createElement(L.Lh,{spacing:"xs"},a.createElement(M.Ph,{options:G,isClearable:!0,placeholder:"Everyday",value:Ve.fromDayOfWeek??null,onChange:Ce=>ct(Ce),width:20}),a.createElement(re,{value:ze(Ve.from),onChange:Ce=>vt(Ce,"from"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),a.createElement(x.g,{label:"To"},a.createElement(L.Lh,{spacing:"xs"},(Ve.fromDayOfWeek||Ve.toDayOfWeek)&&a.createElement(M.Ph,{options:G,isClearable:!0,placeholder:lt(),value:Ve.toDayOfWeek??null,onChange:Ce=>Pt(Ce),width:20}),a.createElement(re,{value:ze(Ve.to),onChange:Ce=>vt(Ce,"to"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),a.createElement(x.g,{label:"Timezone"},ie()))},ge=Ve=>({wrapper:(0,C.css)({maxWidth:Ve.spacing(60),marginBottom:Ve.spacing(2)}),timezoneContainer:C.css`
      padding: 5px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
    `,timezone:C.css`
      margin-right: 5px;
    `}),ne="Enabling this returns annotations that match any of the tags specified below",ue=a.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),te=[{label:"Dashboard",value:O._$.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:O._$.Tags,description:"This will fetch any annotation events that match the tags filter"}],me=[{label:"Annotations & Alerts",value:O.hR.Annotations,description:"Show annotations or alerts managed by grafana"},{label:"Time regions",value:O.hR.TimeRegions,description:"Configure a repeating time region"}],q=[10,50,100,200,300,500,1e3,2e3].map(Ve=>({label:String(Ve),value:Ve}));function se({query:Ve,onChange:_e}){const tt=Ve,{limit:dt,matchAny:Oe,tags:ye,type:Pe,queryType:be}=tt;let Be=be??O.hR.Annotations;const ze=(0,a.useMemo)(()=>(0,h.h4)().dashboard?.getTimezone(),[]),lt=(0,P.wW)(ae),ht=Ce=>_e({...tt,type:Ce.value}),vt=Ce=>_e({...tt,limit:Ce.value}),bt=Ce=>_e({...tt,matchAny:Ce.target.checked}),ct=Ce=>_e({...tt,tags:Ce}),Pt=Ce=>{const Ne={...tt,queryType:Ce.value};Ne.queryType===O.hR.TimeRegions?Ne.timeRegion||(Ne.timeRegion={timezone:ze}):delete Ne.timeRegion,_e(Ne)},ie=Ce=>{_e({...tt,timeRegion:Ce})};return a.createElement(D.C,{className:lt.container},a.createElement(x.g,{label:"Query type"},a.createElement(M.Ph,{inputId:"grafana-annotations__query-type",options:me,value:Be,onChange:Pt})),Be===O.hR.Annotations&&a.createElement(a.Fragment,null,a.createElement(x.g,{label:"Filter by"},a.createElement(M.Ph,{inputId:"grafana-annotations__filter-by",options:te,value:Pe,onChange:ht})),a.createElement(x.g,{label:"Max limit"},a.createElement(M.Ph,{inputId:"grafana-annotations__limit",width:16,options:q,value:dt,onChange:vt})),Pe===O._$.Tags&&a.createElement(a.Fragment,null,a.createElement(x.g,{label:"Match any",description:ne},a.createElement(b.r,{id:"grafana-annotations__match-any",value:Oe,onChange:bt})),a.createElement(x.g,{label:"Tags",description:ue},a.createElement(R.D,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:ct,tagOptions:S.lK,tags:ye??[]})))),Be===O.hR.TimeRegions&&tt.timeRegion&&a.createElement(le,{value:tt.timeRegion,onChange:ie}))}const ae=Ve=>({container:(0,C.css)({maxWidth:Ve.spacing(60),marginBottom:Ve.spacing(2)})});var pe=e(99098),de=e(17804);function Me(Ve,_e,tt,dt){if(!_e)return;const Oe=(0,de.q7)(_e,tt);if(!Oe.length)return;const ye=[],Pe=[],be=[],Be=_e.timezone??dt;for(const ze of Oe){let lt=ze.from,ht=ze.to;const vt=(0,F.Pr)(Be,lt);if(vt){const bt=vt.offsetInMins*60*1e3;lt+=bt,ht+=bt}ye.push(lt),Pe.push(ht),be.push(Ve)}return{fields:[{name:"time",type:pe.fS.time,values:ye,config:{}},{name:"timeEnd",type:pe.fS.time,values:Pe,config:{}},{name:"text",type:pe.fS.string,values:be,config:{}}],length:ye.length}}let Ke=100;class st extends l.CK{constructor(_e){super(_e),this.annotations={QueryEditor:se,prepareAnnotation(tt){return tt.target=tt.target??{type:tt.type??O._$.Dashboard,limit:tt.limit??100,tags:tt.tags??[],matchAny:tt.matchAny??!1},tt},prepareQuery(tt){let dt;if((0,t.isString)(tt.datasource)){const Pe=(0,E.p)(tt.datasource,{returnDefaultAsNull:!1});Pe&&(dt=Pe)}else dt=tt.datasource;const{filter:Oe,...ye}=tt;return{...ye,refId:tt.name,queryType:O.hR.Annotations,datasource:dt}}}}getDefaultQuery(){return{queryType:O.hR.RandomWalk}}query(_e){const tt=[],dt=[],Oe=(0,p.J)();for(const ye of _e.targets){if(ye.queryType===O.hR.Annotations)return(0,n.D)(this.getAnnotations({range:_e.range,rangeRaw:_e.range.raw,annotation:ye,dashboard:(0,h.h4)().getCurrent()}));if(!ye.hide){if(ye.queryType===O.hR.Snapshot){tt.push((0,c.of)({data:(ye.snapshot??[]).map(Pe=>(0,f.vP)(Pe)),state:u.Gu.Done}));continue}if(ye.queryType===O.hR.TimeRegions){const Pe=Me("",ye.timeRegion,_e.range,_e.timezone);tt.push((0,c.of)({data:Pe?[Pe]:[],state:u.Gu.Done}));continue}if(ye.queryType===O.hR.LiveMeasurements){let Pe=Oe.replace(ye.channel,_e.scopedVars);const{filter:be}=ye,Be=(0,r.H7)(Pe);if(!(0,r.nU)(Be))continue;const ze={maxLength:_e.maxDataPoints??500};ye.buffer?(ze.maxDelta=ye.buffer,ze.maxLength=ze.maxLength*2):_e.rangeRaw?.to==="now"&&(ze.maxDelta=_e.range.to.valueOf()-_e.range.from.valueOf()),tt.push((0,g.gj)().getDataStream({key:`${_e.requestId}.${Ke++}`,addr:Be,filter:be,buffer:ze}))}else ye.queryType||(ye.queryType=O.hR.RandomWalk),dt.push(ye)}}return dt.length&&tt.push(super.query({..._e,targets:dt})),tt.length?tt.length===1?tt[0]:(0,s.T)(...tt):(0,c.of)()}listFiles(_e){return this.query({targets:[{refId:"A",queryType:O.hR.List,path:_e}]}).pipe((0,i.U)(tt=>{const dt=tt.data[0]??new d.v;return new o.U(dt)}))}metricFindQuery(_e){return Promise.resolve([])}async getAnnotations(_e){const tt=_e.annotation.target;if(tt?.queryType===O.hR.TimeRegions){const be=Me(_e.annotation.name,tt.timeRegion,_e.range,(0,h.h4)().getCurrent()?.timezone);return Promise.resolve({data:be?[be]:[]})}const dt=_e.annotation,Oe=dt.target,ye={from:_e.range.from.valueOf(),to:_e.range.to.valueOf(),limit:Oe.limit,tags:Oe.tags,matchAny:Oe.matchAny};if(Oe.type===O._$.Dashboard){if(!_e.dashboard.uid)return Promise.resolve({data:[]});ye.dashboardUID=_e.dashboard.uid,delete ye.tags}else{if(!Array.isArray(Oe.tags)||Oe.tags.length===0)return Promise.resolve({data:[]});const be=(0,p.J)(),Be="__delimiter__",ze=[];for(const lt of ye.tags){const ht=be.replace(lt,{},vt=>typeof vt=="string"?vt:vt.join(Be));for(const vt of ht.split(Be))ze.push(vt)}ye.tags=ze}const Pe=await(0,y.i)().get("/api/annotations",ye,`grafana-data-source-annotations-${dt.name}-${_e.dashboard?.uid}`);return{data:[(0,m.g0)(Pe)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}async function Ie(){return await(0,v.F)().get("-- Grafana --")}},7832:(Y,T,e)=>{"use strict";e.d(T,{_$:()=>s,hR:()=>t,ip:()=>c,wi:()=>n});var t=(i=>(i.LiveMeasurements="measurements",i.Annotations="annotations",i.Snapshot="snapshot",i.TimeRegions="timeRegions",i.RandomWalk="randomWalk",i.List="list",i.Read="read",i.Search="search",i))(t||{});const n={refId:"A",queryType:"randomWalk"},c={refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:"snapshot",snapshot:[]};var s=(i=>(i.Dashboard="dashboard",i.Tags="tags",i))(s||{})},56991:(Y,T,e)=>{"use strict";e.d(T,{L:()=>s});var t=e(82897),n=e.n(t),c=e(66111);function s(){const i=(0,c.useRef)(null);return i.current==null&&(i.current=(0,t.uniqueId)()),i.current}},96606:(Y,T,e)=>{"use strict";e.d(T,{Wp:()=>f,c6:()=>r,xM:()=>s});var t=e(53678),n=e(99098),c=e(95638);function s(d){const o=d.spans.map(l=>i(l,d.processes)),m=new t.v({fields:[{name:"traceID",type:n.fS.string},{name:"spanID",type:n.fS.string},{name:"parentSpanID",type:n.fS.string},{name:"operationName",type:n.fS.string},{name:"serviceName",type:n.fS.string},{name:"serviceTags",type:n.fS.other},{name:"startTime",type:n.fS.number},{name:"duration",type:n.fS.number},{name:"logs",type:n.fS.other},{name:"tags",type:n.fS.other},{name:"warnings",type:n.fS.other},{name:"stackTraces",type:n.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"jaeger"}}});for(const l of o)m.add(l);return m}function i(d,o){return{spanID:d.spanID,traceID:d.traceID,parentSpanID:d.references?.find(m=>m.refType==="CHILD_OF")?.spanID,operationName:d.operationName,startTime:d.startTime/1e3,duration:d.duration/1e3,logs:d.logs.map(m=>({...m,timestamp:m.timestamp/1e3})),tags:d.tags,warnings:d.warnings??void 0,stackTraces:d.stackTraces,serviceName:o[d.processID].serviceName,serviceTags:o[d.processID].tags}}function f(d,o){const m=new t.v({fields:[{name:"traceID",type:n.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:o.uid,datasourceName:o.name,query:{query:"${__value.raw}"}}}]}},{name:"traceName",type:n.fS.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:n.fS.time,config:{displayNameFromDS:"Start time"}},{name:"duration",type:n.fS.number,config:{displayNameFromDS:"Duration",unit:"\xB5s"}}],meta:{preferredVisualisationType:"table"}}),l=d.map(u).sort((p,g)=>g?.startTime-p?.startTime);for(const p of l)m.add(p);return m}function u(d){const o=(0,c.transformTraceData)(d);if(o)return{traceID:o.traceID,startTime:o.startTime/1e3,duration:o.duration,traceName:o.traceName}}function r(d){let o={traceID:"",spans:[],processes:{},warnings:null},m=[];for(let l=0;l<d.length;l++){const p=d.get(l);o.traceID||(o.traceID=p.traceID),m.find(g=>g===p.serviceName)||(m.push(p.serviceName),o.processes[`p${m.length}`]={serviceName:p.serviceName,tags:p.serviceTags}),o.spans.push({traceID:p.traceID,spanID:p.spanID,duration:p.duration*1e3,references:p.parentSpanID?[{refType:"CHILD_OF",spanID:p.parentSpanID,traceID:p.traceID}]:[],flags:0,logs:p.logs.map(g=>({...g,timestamp:g.timestamp*1e3})),operationName:p.operationName,processID:Object.keys(o.processes).find(g=>o.processes[g].serviceName===p.serviceName)||"",startTime:p.startTime*1e3,tags:p.tags,warnings:p.warnings?p.warnings:null})}return{data:[o],total:0,limit:0,offset:0,errors:null}}},19370:(Y,T,e)=>{"use strict";e.d(T,{$5:()=>t,EH:()=>s,Rd:()=>c,ZP:()=>d,md:()=>i,r8:()=>f,uR:()=>n,xY:()=>r});const t=[{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"}],n=[{label:"json",insertText:"json",documentation:"Extracting labels from the log line using json parser."},{label:"regexp",insertText:'regexp ""',documentation:"Extracting labels from the log line using regexp parser.",move:-1},{label:"logfmt",insertText:"logfmt",documentation:"Extracting labels from the log line using logfmt parser."},{label:"pattern",insertText:"pattern",documentation:"Extracting labels from the log line using pattern parser. Only available in Loki 2.3+."},{label:"unpack",insertText:"unpack",detail:"unpack identifier",documentation:'Parses a JSON log line, unpacking all embedded labels in the pack stage. A special property "_entry" will also be used to replace the original log line. Only available in Loki 2.2+.'}],c=[{label:"unwrap",insertText:"unwrap",detail:"unwrap identifier",documentation:"Take labels and use the values as sample data for metric aggregations."},{label:"label_format",insertText:"label_format",documentation:"Use to rename, modify or add labels. For example, | label_format foo=bar ."},{label:"line_format",insertText:"line_format",documentation:'Rewrites log line content. For example, | line_format "{{.query}} {{.duration}}" .'}],s=[{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average of all values in the specified interval."},{insertText:"bytes_over_time",label:"bytes_over_time",detail:"bytes_over_time(range-vector)",documentation:"Counts the amount of bytes used by each log stream for a given range"},{insertText:"bytes_rate",label:"bytes_rate",detail:"bytes_rate(range-vector)",documentation:"Calculates the number of bytes per second for each stream."},{insertText:"first_over_time",label:"first_over_time",detail:"first_over_time(range-vector)",documentation:"The first of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The last of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum of all values in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the number of entries per second."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."}],i=[{insertText:"vector",label:"vector",detail:"vector(scalar)",documentation:"Returns the scalar as a vector with no labels."}],f=[...t,...s,...i],u=[...f,...c,...n].map(o=>o.label),r={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((without|by)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-zA-Z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},"context-pipe":{pattern:/\s\|[^=~]\s?\w*/i,inside:{"pipe-operator":{pattern:/\|/i,alias:"operator"},"pipe-operations":{pattern:new RegExp(`${[...n,...c].map(o=>o.label).join("|")}`,"i"),alias:"keyword"}}},function:new RegExp(`\\b(?:${f.map(o=>o.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=\])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],quote:{pattern:/"(?:\\.|[^\\"])*"/,alias:"string",greedy:!0},backticks:{pattern:/`(?:\\.|[^\\`])*`/,alias:"string",greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:/\s?(\|[=~]?|!=?|<(?:=>?|<|>)?|>[>=]?)\s?/i,punctuation:/[{}(),.]/},d=r},63496:(Y,T,e)=>{"use strict";e.d(T,{D:()=>v,w:()=>E});var t=e(82897),n=e.n(t),c=e(59980),s=e(49372),i=e(53208),f=e(39859),u=e(9471),r=e(76997),d=e(59724),o=e(7880),m=e(61474),l=e(89424),p=e(52666),g=e(86647),y=e(77599);const v="-- Mixed --";class E extends l.MF{constructor(a){super(a)}query(a){const P=a.targets.filter(M=>M.datasource?.uid!==v);if(!P.length)return(0,c.of)({data:[]});const D=(0,t.groupBy)(P,"datasource.uid"),x=[];for(const M in D){const b=D[M];x.push({datasource:(0,g.F)().get(b[0].datasource,a.scopedVars),targets:b})}return x.length?this.batchQueries(x,a):(0,c.of)({data:[]})}batchQueries(a,P){const D=a.filter(this.isQueryable).map((x,M)=>(0,s.D)(x.datasource).pipe((0,f.z)(b=>{const R=(0,t.cloneDeep)(P);return R.requestId=`mixed-${M}-${R.requestId||""}`,R.targets=x.targets,(0,s.D)(b.query(R)).pipe((0,u.U)(S=>({...S,data:S.data||[],state:p.Gu.Loading,key:`mixed-${M}-${S.key||""}`})),(0,r.q)(),(0,d.K)(S=>(S=(0,y.P)(S),S.message=`${b.name}: ${S.message}`,(0,c.of)([{data:[],state:p.Gu.Error,error:S,key:`mixed-${M}-${R.requestId||""}`}]))))})));return(0,i.D)(D).pipe(h(),(0,u.U)(this.finalizeResponses),(0,o.J)())}testDatasource(){return Promise.resolve({message:"",status:""})}isQueryable(a){return a&&Array.isArray(a.targets)&&a.targets.length>0}finalizeResponses(a){const{length:P}=a;if(P===0)return a;const D=a.find(x=>x.state===p.Gu.Error);return D?a.push(D):a[P-1].state=p.Gu.Done,a}}function h(){return(0,m.u)((C,a)=>a.reduce((P,D)=>(P.push.apply(P,D),P),C),[])}},21899:(Y,T,e)=>{"use strict";e.d(T,{Ty:()=>t,ZP:()=>d,r8:()=>f});const t=[{label:"$__interval",sortValue:"$__interval"},{label:"$__rate_interval",sortValue:"$__rate_interval"},{label:"$__range",sortValue:"$__range"},{label:"1m",sortValue:"00:01:00"},{label:"5m",sortValue:"00:05:00"},{label:"10m",sortValue:"00:10:00"},{label:"30m",sortValue:"00:30:00"},{label:"1h",sortValue:"01:00:00"},{label:"1d",sortValue:"24:00:00"}],n=["by","group_left","group_right","ignoring","on","offset","without"],c=null,s=[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:"calculates the arccosine of all elements in v"},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:"calculates the inverse hyperbolic cosine of all elements in v"},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:"calculates the arcsine of all elements in v"},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:"calculates the inverse hyperbolic sine of all elements in v"},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:"calculates the arctangent of all elements in v"},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:"calculates the inverse hyperbolic tangent of all elements in v"},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:"calculates the cosine of all elements in v"},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:"calculates the hyperbolic cosine of all elements in v"},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:"calculates the sine of all elements in v"},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:"calculates the hyperbolic sine of all elements in v"},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:"calculates the tangent of all elements in v"},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:"calculates the hyperbolic tangent of all elements in v"}],f=[...[{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"group",insertText:"group",documentation:"All values in the resulting vector are 1"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions"}],...s,{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:"Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:"Converts radians to degrees for all elements in v"},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(\u03C6 float, b instant-vector)",documentation:"Calculates the \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:"For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"pi",label:"pi",detail:"pi()",documentation:"Returns pi"},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:"Converts degrees to radians for all elements in v"},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:"Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:"Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The most recent point value in specified interval."}],u=f.map(o=>o.label),d={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${f.map(o=>o.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${n.join("|")})\\b`,"i"),punctuation:/[{};()`,.]/}},69407:(Y,T,e)=>{"use strict";e.d(T,{$C:()=>y,BC:()=>C,M7:()=>u,NZ:()=>p,T1:()=>E,Yt:()=>m,rB:()=>g,t3:()=>h,vO:()=>v,yf:()=>l});var t=e(12115),n=e(92468),c=e(53678),s=e(99098),i=e(53768),f=e(49427);function u(M){const{nodes:b,edges:R}=r(M),[S,O]=(0,f.np)();for(const U of b)S.add(U);for(const U of R)O.add(U);return[S,O]}function r(M){const b=[],R=[],S=new t.U(M),O=d(S),U=(0,f.nO)(I=>{if(I>=M.length)return;const F=S.get(I);return{span:{...F},id:F.spanID,parentIds:F.parentSpanID?[F.parentSpanID]:[]}});for(let I=0;I<S.length;I++){const F=S.get(I),w=U[F.spanID].children.map(H=>{const j=U[H].span;return[j.startTime,j.startTime+j.duration]}),K=(0,f.et)(w),L=F.duration-K,V=(0,f.fy)(F.duration,O,L);b.push({[n.z.id]:F.spanID,[n.z.title]:F.serviceName??"",[n.z.subTitle]:F.operationName,[n.z.mainStat]:V.main,[n.z.secondaryStat]:V.secondary,[n.z.color]:L/O}),F.parentSpanID&&U[F.parentSpanID].span&&R.push({[n.z.id]:F.parentSpanID+"--"+F.spanID,[n.z.target]:F.spanID,[n.z.source]:F.parentSpanID})}return{nodes:b,edges:R}}function d(M){let b=0,R=1/0;for(let S=0;S<M.length;S++){const O=M.get(S);O.startTime<R&&(R=O.startTime),O.startTime+O.duration>b&&(b=O.startTime+O.duration)}return b-R}const o="traces_service_graph_request_server_seconds_sum",m="traces_service_graph_request_total",l="traces_service_graph_request_failed_total",p="traces_service_graph_request_server_seconds_bucket",g={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:[]},y={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:['status_code="STATUS_CODE_ERROR"']},v={expr:"histogram_quantile(.9, sum(rate(traces_spanmetrics_latency_bucket{}[$__range])) by (le))",params:[]},E='span_kind="SPAN_KIND_SERVER"',h=[o,m,l,p];function C(M,b){const R=P(M),S={},O={};return D(R[m],"total",m,S,O),D(R[o],"seconds",o,S,O),D(R[l],"failed",l,S,O),x(S,O,b)}function a(){function M(S,O){return new c.v({name:S,fields:O,meta:{preferredVisualisationType:"nodeGraph"}})}const b=M("Nodes",[{name:n.z.id,type:s.fS.string},{name:n.z.title,type:s.fS.string,config:{displayName:"Service name"}},{name:n.z.mainStat,type:s.fS.number,config:{unit:"ms/r",displayName:"Average response time"}},{name:n.z.secondaryStat,type:s.fS.number,config:{unit:"r/sec",displayName:"Requests per second"}},{name:n.z.arc+"success",type:s.fS.number,config:{displayName:"Success",color:{fixedColor:"green",mode:i.S.Fixed}}},{name:n.z.arc+"failed",type:s.fS.number,config:{displayName:"Failed",color:{fixedColor:"red",mode:i.S.Fixed}}}]),R=M("Edges",[{name:n.z.id,type:s.fS.string},{name:n.z.source,type:s.fS.string},{name:n.z.target,type:s.fS.string},{name:n.z.mainStat,type:s.fS.number,config:{unit:"ms/r",displayName:"Average response time"}},{name:n.z.secondaryStat,type:s.fS.number,config:{unit:"r/sec",displayName:"Requests per second"}}]);return[b,R]}function P(M){return M[0].data.reduce((b,R)=>(b[R.refId]=new t.U(R),b),{})}function D(M,b,R,S,O){if(!M)return;const U=`Value #${R}`;for(let I=0;I<M.length;I++){const F=M.get(I),w=`${F.client}_${F.server}`;O[w]?O[w][b]=(O[w][b]||0)+F[U]:O[w]={target:F.server,source:F.client,[b]:F[U]},S[F.server]?S[F.server][b]=(S[F.server][b]||0)+F[U]:S[F.server]={[b]:F[U]},S[F.client]||(S[F.client]={[b]:0})}}function x(M,b,R){const[S,O]=a();for(const U of Object.keys(M)){const I=M[U];S.add({[n.z.id]:U,[n.z.title]:U,[n.z.mainStat]:I.total?I.seconds/I.total*1e3:Number.NaN,[n.z.secondaryStat]:I.total?Math.round(I.total*100)/100:Number.NaN,[n.z.arc+"success"]:I.total?(I.total-Math.min(I.failed||0,I.total))/I.total:1,[n.z.arc+"failed"]:I.total?Math.min(I.failed||0,I.total)/I.total:0})}for(const U of Object.keys(b)){const I=b[U];O.add({[n.z.id]:U,[n.z.source]:I.source,[n.z.target]:I.target,[n.z.mainStat]:I.total?I.seconds/I.total*1e3:Number.NaN,[n.z.secondaryStat]:I.total?Math.round(I.total*100)/100:Number.NaN})}return{nodes:S,edges:O}}},86146:(Y,T,e)=>{"use strict";e.d(T,{IM:()=>g,Jk:()=>D,RY:()=>r,g9:()=>y,n4:()=>x,xA:()=>b});var t=e(77156),n=e(64018),c=e(53678),s=e(99098),i=e(77258),f=e(69407);function u(U,I,F,w){const K=new c.v({fields:[{name:"Time",type:s.fS.time,config:{custom:{width:200}}},{name:"traceID",type:s.fS.string,config:{displayNameFromDS:"Trace ID",custom:{width:180},links:[{title:"Click to open trace ${__value.raw}",url:"",internal:{datasourceUid:I,datasourceName:F,query:{query:"${__value.raw}"}}}]}},{name:"Message",type:s.fS.string}],meta:{preferredVisualisationType:"table"}});if(!U||w.length===0)return K;const L=U.fields.find(V=>V.type===s.fS.time);for(let V of U.fields){let H=!1;if(V.type===s.fS.string){const j=V.values;for(let A=0;A<j.length;A++){const _=j[A];if(_)for(let k of w){const Q=_.match(k);if(Q){const re=Q[1],Z=L?L.values[A]:null;K.fields[0].values.push(Z),K.fields[1].values.push(re),K.fields[2].values.push(_),H=!0}}}}if(H)break}return K}function r(U,I,F,w){return U.data.forEach((K,L)=>{const V=u(K,I,F,w);U.data[L]=V}),U}function d(U){if(U.stringValue)return U.stringValue;if(U.boolValue!==void 0)return Boolean(U.boolValue);if(U.intValue!==void 0)return Number.parseInt(U.intValue,10);if(U.doubleValue)return Number.parseFloat(U.doubleValue);if(U.arrayValue){const I=[];for(const F of U.arrayValue.values)I.push(d(F));return I}return""}function o(U){const I=[];let F="OTLPResourceNoServiceName";if(!U)return{serviceName:F,serviceTags:I};for(const w of U.attributes)w.key===n.R9.SERVICE_NAME&&(F=w.value.stringValue||F),I.push({key:w.key,value:d(w.value)});return{serviceName:F,serviceTags:I}}function m(U,I){const F=[];if(I&&(I.name&&F.push({key:"otel.library.name",value:I.name}),I.version&&F.push({key:"otel.library.version",value:I.version})),U.attributes)for(const w of U.attributes)F.push({key:w.key,value:d(w.value)});if(U.status&&(U.status.code&&U.status.code!==t.Q.UNSET&&(F.push({key:"otel.status_code",value:t.Q[U.status.code]}),U.status.message&&F.push({key:"otel.status_description",value:U.status.message})),U.status.code===t.Q.ERROR&&F.push({key:"error",value:!0})),U.kind!==void 0){const w=U.kind.toString().toLowerCase().split("_");F.push({key:"span.kind",value:w.length?w[w.length-1]:U.kind.toString()})}return F}function l(U){const I=[];if(U.links)for(const F of U.links){const{traceId:w,spanId:K}=F,L=[];if(F.attributes)for(const V of F.attributes)L.push({key:V.key,value:d(V.value)});I.push({traceID:w,spanID:K,tags:L})}return I}function p(U){const I=[];if(U.events)for(const F of U.events){const w=[];if(F.attributes)for(const K of F.attributes)w.push({key:K.key,value:d(K.value)});I.push({fields:w,timestamp:F.timeUnixNano/1e6})}return I}function g(U,I=!1){const F=new c.v({fields:[{name:"traceID",type:s.fS.string},{name:"spanID",type:s.fS.string},{name:"parentSpanID",type:s.fS.string},{name:"operationName",type:s.fS.string},{name:"serviceName",type:s.fS.string},{name:"serviceTags",type:s.fS.other},{name:"startTime",type:s.fS.number},{name:"duration",type:s.fS.number},{name:"logs",type:s.fS.other},{name:"references",type:s.fS.other},{name:"tags",type:s.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}});try{for(const K of U){const{serviceName:L,serviceTags:V}=o(K.resource);for(const H of K.instrumentationLibrarySpans)for(const j of H.spans)F.add({traceID:j.traceId.length>16?j.traceId.slice(16):j.traceId,spanID:j.spanId,parentSpanID:j.parentSpanId||"",operationName:j.name||"",serviceName:L,serviceTags:V,startTime:j.startTimeUnixNano/1e6,duration:(j.endTimeUnixNano-j.startTimeUnixNano)/1e6,tags:m(j,H.instrumentationLibrary),logs:p(j),references:l(j)})}}catch(K){return console.error(K),{error:{message:"JSON is not valid OpenTelemetry format: "+K},data:[]}}let w=[F];return I&&w.push(...(0,f.M7)(F)),{data:w}}function y(U){let I={batches:[]},F={};for(let w=0;w<U.length;w++){const K=U.get(w);F[K.serviceName]||(F[K.serviceName]=I.batches.length,I.batches.push({resource:{attributes:[],droppedAttributesCount:0},instrumentationLibrarySpans:[{spans:[]}]}));let L=F[K.serviceName];if(I.batches[L].resource.attributes.length===0&&(I.batches[L].resource.attributes=E(K.serviceTags)),!I.batches[L].instrumentationLibrarySpans[0].instrumentationLibrary){let V=K.tags.find(H=>H.key==="otel.library.name")?.value;V&&(I.batches[L].instrumentationLibrarySpans[0].instrumentationLibrary={name:V,version:K.tags.find(H=>H.key==="otel.library.version")?.value})}I.batches[L].instrumentationLibrarySpans[0].spans.push({traceId:K.traceID.padStart(32,"0"),spanId:K.spanID,parentSpanId:K.parentSpanID||"",traceState:"",name:K.operationName,kind:v(K.tags),startTimeUnixNano:K.startTime*1e6,endTimeUnixNano:(K.startTime+K.duration)*1e6,attributes:E(K.tags),droppedAttributesCount:0,droppedEventsCount:0,droppedLinksCount:0,status:C(K.tags),events:a(K.logs),links:P(K.references)})}return I}function v(U){let I;switch(U.find(w=>w.key==="span.kind")?.value){case"server":I="SPAN_KIND_SERVER";break;case"client":I="SPAN_KIND_CLIENT";break;case"producer":I="SPAN_KIND_PRODUCER";break;case"consumer":I="SPAN_KIND_CONSUMER";break}return I}function E(U){return U.filter(I=>!["span.kind","otel.library.name","otel.libary.version","otel.status_description","otel.status_code"].includes(I.key)).reduce((I,F)=>[...I,{key:F.key,value:h(F)}],[])}function h(U){if(typeof U.value=="string")return{stringValue:U.value};if(typeof U.value=="boolean")return{boolValue:U.value};if(typeof U.value=="number")return U.value%1===0?{intValue:U.value}:{doubleValue:U.value};if(typeof U.value=="object"&&Array.isArray(U.value)){const I=[];for(const F of U.value)I.push(h(F));return{arrayValue:{values:I}}}return{stringValue:U.value}}function C(U){let I;const F=U.find(w=>w.key==="otel.status_code");return F&&(I={code:F.value,message:U.find(w=>w.key==="otel_status_description")?.value}),I}function a(U){if(!U||!U.length)return;let I=[];for(const F of U){let w={timeUnixNano:F.timestamp*1e6,attributes:[],droppedAttributesCount:0,name:""};for(const K of F.fields)w.attributes.push({key:K.key,value:h(K)});I.push(w)}return I}function P(U){if(!U||!U.length)return;let I=[];for(const F of U){let w={traceId:F.traceID,spanId:F.spanID,attributes:[],droppedAttributesCount:0};if(F.tags?.length)for(const K of F.tags)w.attributes?.push({key:K.key,value:h(K)});I.push(w)}return I}function D(U,I=!1){const F=U.data[0];if(!F)return O;let w=[...U.data];return I&&w.push(...(0,f.M7)(F)),{...U,data:w}}function x(U,I){const F=new c.v({fields:[{name:"traceID",type:s.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:I.uid,datasourceName:I.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"traceName",type:s.fS.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:s.fS.string,config:{displayNameFromDS:"Start time"}},{name:"traceDuration",type:s.fS.number,config:{displayNameFromDS:"Duration",unit:"ms"}}],meta:{preferredVisualisationType:"table"}});if(!U?.length)return F;const w=U.sort((K,L)=>parseInt(L?.startTimeUnixNano,10)/1e6-parseInt(K?.startTimeUnixNano,10)/1e6).map(M);for(const K of w)F.add(K);return F}function M(U){let I="";U.rootServiceName&&(I+=U.rootServiceName+" "),U.rootTraceName&&(I+=U.rootTraceName);const F=parseInt(U.startTimeUnixNano,10)/1e6;let w=isNaN(F)?"":(0,i.dq)(F);return{traceID:U.traceID,startTime:w,traceDuration:U.durationMs?.toString(),traceName:I}}function b(U,I){const F=new c.v({fields:[{name:"traceID",type:s.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",custom:{width:200},links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:I.uid,datasourceName:I.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"startTime",type:s.fS.string,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"traceName",type:s.fS.string,config:{displayNameFromDS:"Name"}},{name:"traceDuration",type:s.fS.number,config:{displayNameFromDS:"Duration",unit:"ms",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}});if(!U?.length)return[F];const w=[],K=U.sort((L,V)=>parseInt(V?.startTimeUnixNano,10)/1e6-parseInt(L?.startTimeUnixNano,10)/1e6).reduce((L,V,H)=>{const j=M(V);return L.push(j),w.push(R(V,I,H)),L},[]);for(const L of K)F.add(L);return[F,...w]}const R=(U,I,F)=>{const w={};let K=!1;U.spanSet?.spans.forEach(V=>{V.name&&(K=!0),V.attributes?.forEach(H=>{w[H.key]={name:H.key,type:s.fS.string,config:{displayNameFromDS:H.key}}})});const L=new c.v({fields:[{name:"traceIdHidden",config:{custom:{hidden:!0}}},{name:"spanID",type:s.fS.string,config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:I.uid,datasourceName:I.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"spanStartTime",type:s.fS.string,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"name",type:s.fS.string,config:{displayNameFromDS:"Name",custom:{hidden:!K}}},...Object.values(w),{name:"duration",type:s.fS.number,config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table",custom:{parentRowIndex:F}}});return U.spanSet?.spans.forEach(V=>{L.add(S(V,U.traceID))}),L};function S(U,I){const F=parseInt(U.startTimeUnixNano,10)/1e6;let w=(0,i.dq)(F);const K={traceIdHidden:I,spanID:U.spanID,spanStartTime:w,duration:parseInt(U.durationNanos,10),name:U.name};return U.attributes?.forEach(L=>{L.value.boolValue&&(K[L.key]=L.value.boolValue),L.value.doubleValue&&(K[L.key]=L.value.doubleValue),L.value.intValue&&(K[L.key]=L.value.intValue),L.value.stringValue&&(K[L.key]=L.value.stringValue)}),K}const O={data:[new c.v({fields:[{name:"trace",type:s.fS.trace,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}})]}},26991:(Y,T,e)=>{"use strict";e.d(T,{H:()=>o,m:()=>i});var t=e(82897),n=e.n(t),c=e(53678),s=e(99098);function i(l){const p=l.map(f),g=new c.v({fields:[{name:"traceID",type:s.fS.string},{name:"spanID",type:s.fS.string},{name:"parentSpanID",type:s.fS.string},{name:"operationName",type:s.fS.string},{name:"serviceName",type:s.fS.string},{name:"serviceTags",type:s.fS.other},{name:"startTime",type:s.fS.number},{name:"duration",type:s.fS.number},{name:"logs",type:s.fS.other},{name:"tags",type:s.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"zipkin"}}});for(const y of p)g.add(y);return g}function f(l){const p={traceID:l.traceId,spanID:l.id,parentSpanID:l.parentId,operationName:l.name,serviceName:l.localEndpoint?.serviceName||l.remoteEndpoint?.serviceName||"unknown",serviceTags:r(l),startTime:l.timestamp/1e3,duration:l.duration/1e3,logs:l.annotations?.map(u)??[],tags:Object.keys(l.tags||{}).reduce((g,y)=>y==="error"?(g.push({key:"error",value:!0}),g.push({key:"errorValue",value:l.tags.error}),g):(g.push({key:y,value:l.tags[y]}),g),[])};return l.kind&&(p.tags=[{key:"kind",value:l.kind},...p.tags??[]]),l.shared&&(p.tags=[{key:"shared",value:l.shared},...p.tags??[]]),p}function u(l){return{timestamp:l.timestamp,fields:[{key:"annotation",value:l.value}]}}function r(l){const p=l.localEndpoint||l.remoteEndpoint;return p?[d("ipv4",p.ipv4),d("ipv6",p.ipv6),d("port",p.port),d("endpointType",l.localEndpoint?"local":"remote")].filter(t.identity):[]}function d(l,p){if(p)return{key:l,value:p}}const o=l=>{let p=[];for(let g=0;g<l.length;g++){const y=l.get(g);p.push({traceId:y.traceID,parentId:y.parentSpanID,name:y.operationName,id:y.spanID,timestamp:y.startTime*1e3,duration:y.duration*1e3,...m(y),annotations:y.logs.length?y.logs.map(v=>({timestamp:v.timestamp,value:v.fields[0].value})):void 0,tags:y.tags.length?y.tags.filter(v=>v.key!=="kind"&&v.key!=="endpointType"&&v.key!=="shared").reduce((v,E)=>E.key==="error"?{...v,[E.key]:y.tags.find(h=>h.key==="errorValue").value||""}:{...v,[E.key]:E.value},{}):void 0,kind:y.tags.find(v=>v.key==="kind")?.value,shared:y.tags.find(v=>v.key==="shared")?.value})}return p},m=l=>{const p=l.serviceTags.find(g=>g.key==="endpointType")?.value==="local"?"localEndpoint":"remoteEndpoint";return l.serviceName!=="unknown"?{[p]:{serviceName:l.serviceName,ipv4:l.serviceTags.find(g=>g.key==="ipv4")?.value,ipv6:l.serviceTags.find(g=>g.key==="ipv6")?.value,port:l.serviceTags.find(g=>g.key==="port")?.value}}:void 0}},40286:(Y,T,e)=>{"use strict";e.d(T,{As:()=>t,LM:()=>c,kx:()=>n,wO:()=>s});var t=(i=>(i[i.AlphaAsc=1]="AlphaAsc",i[i.AlphaDesc=2]="AlphaDesc",i[i.Importance=3]="Importance",i[i.TimeAsc=4]="TimeAsc",i[i.TimeDesc=5]="TimeDesc",i))(t||{}),n=(i=>(i.Current="current",i.RecentChanges="changes",i))(n||{}),c=(i=>(i.Default="default",i.Custom="custom",i))(c||{}),s=(i=>(i.List="list",i.Stat="stat",i))(s||{})},28586:(Y,T,e)=>{"use strict";e.d(T,{Gj:()=>n,Qm:()=>f});var t=e(56190);const n=1,c=2,s=3,i=(u,r,d,o)=>(0,t.O)(r+u*(d+o),6);function f(u,r,d,o,m){let l=1-r,p=d===n?l/(u-1):d===c?l/u:d===s?l/(u+1):0;(isNaN(p)||p===1/0)&&(p=0);let g=d===n?0:d===c?p/2:d===s?p:0,y=r/u,v=(0,t.O)(y,6);if(o==null)for(let E=0;E<u;E++)m(E,i(E,g,y,p),v);else m(o,i(o,g,y,p),v)}},60892:(Y,T,e)=>{"use strict";e.d(T,{Pn:()=>c,kK:()=>i,lW:()=>f,zZ:()=>s});const t=10,n=4;function c(u,r,d,o,m,l){return u>=d&&u<=m&&r>=o&&r<=l}function s(u,r,d){let o;if(u.o.length&&(o=u.o.find(m=>m.sidx===r&&m.didx===d)),o==null&&u.q)for(let m=0;m<u.q.length&&(o=s(u.q[m],r,d),!o);m++);return o}function i(u,r){return u.x<=r.x+r.w&&u.x+u.w>=r.x&&u.y+u.h>=r.y&&u.y<=r.y+r.h}class f{constructor(r,d,o,m,l=0){this.x=r,this.y=d,this.w=o,this.h=m,this.l=l,this.o=[],this.q=null}split(){let r=this,d=r.x,o=r.y,m=r.w/2,l=r.h/2,p=r.l+1;r.q=[new f(d+m,o,m,l,p),new f(d,o,m,l,p),new f(d,o+l,m,l,p),new f(d+m,o+l,m,l,p)]}quads(r,d,o,m,l){let p=this,g=p.q,y=p.x+p.w/2,v=p.y+p.h/2,E=d<v,h=r<y,C=r+o>y,a=d+m>v;E&&C&&l(g[0]),h&&E&&l(g[1]),h&&a&&l(g[2]),C&&a&&l(g[3])}add(r){let d=this;if(d.q!=null)d.quads(r.x,r.y,r.w,r.h,o=>{o.add(r)});else{let o=d.o;if(o.push(r),o.length>t&&d.l<n){d.split();for(let m=0;m<o.length;m++){let l=o[m];d.quads(l.x,l.y,l.w,l.h,p=>{p.add(l)})}d.o.length=0}}}get(r,d,o,m,l){let p=this,g=p.o;for(let y=0;y<g.length;y++)l(g[y]);p.q!=null&&p.quads(r,d,o,m,y=>{y.get(r,d,o,m,l)})}clear(){this.o.length=0,this.q=null}}},63992:(Y,T,e)=>{"use strict";e.d(T,{M:()=>o,l:()=>m});var t=e(82897),n=e.n(t),c=e(66111),s=e(82229),i=e(92156),f=e(19670),u=e(18543),r=e(4387),d=e(47694);class o extends c.PureComponent{constructor(){super(...arguments),this.renderComponent=(p,g)=>{const{options:y,fieldConfig:v}=this.props,{value:E,alignmentFactors:h,orientation:C,width:a,height:P,count:D}=p,{field:x,display:M,view:b,colIndex:R}=E,{openMenu:S,targetClassName:O}=g;let U;return b&&(0,t.isNumber)(R)&&(U=b.getFieldDisplayProcessor(R)),c.createElement(f.xf,{value:m(D,v.defaults,M),width:a,height:P,orientation:C,field:x,text:y.text,display:U,theme:d.vc.theme2,itemSpacing:this.getItemSpacing(),displayMode:y.displayMode,onClick:S,className:O,alignmentFactors:D>1?h:void 0,showUnfilled:y.showUnfilled,valueDisplayMode:y.valueMode})},this.renderValue=p=>{const{value:g,orientation:y}=p,{hasLinks:v,getLinks:E}=g;return v&&E?c.createElement("div",{style:{width:"100%",display:y===s.wm.Vertical?"flex":"initial"}},c.createElement(u.V,{links:E},h=>this.renderComponent(p,h))):this.renderComponent(p,{})},this.getValues=()=>{const{data:p,options:g,replaceVariables:y,fieldConfig:v,timeZone:E}=this.props;return(0,i.nG)({fieldConfig:v,reduceOptions:g.reduceOptions,replaceVariables:y,theme:d.vc.theme2,data:p.series,timeZone:E})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}render(){const{height:p,width:g,options:y,data:v,renderCounter:E}=this.props;return c.createElement(r.Q,{source:v,getAlignmentFactors:i.sg,getValues:this.getValues,renderValue:this.renderValue,renderCounter:E,width:g,height:p,minVizWidth:y.minVizWidth,minVizHeight:y.minVizHeight,itemSpacing:this.getItemSpacing(),orientation:y.orientation})}}function m(l,p,g){return l===1&&!p.displayName?{...g,title:void 0}:g}},19919:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>ye});var t=e(9892),n=e(66111),c=e(27443),s=e(72648);const i=22*window.devicePixelRatio,f=10*window.devicePixelRatio,u=.5*window.devicePixelRatio,r=20*window.devicePixelRatio,d=.5*window.devicePixelRatio,o=4*window.devicePixelRatio,m=800,l=120;var p=e(22759),g=e(42044),y=e(30909);const E=({contextMenuData:Pe,graphRef:be,totalTicks:Be,levels:ze,setContextMenuData:lt,setTopLevelIndex:ht,setSelectedBarIndex:vt,setRangeMin:bt,setRangeMax:ct,data:Pt})=>{const ie=ze[Pe.levelIndex][Pe.barIndex],Ce=()=>n.createElement(n.Fragment,null,n.createElement(g.s,{label:"Focus block",icon:"eye",onClick:()=>{be.current&&Pe&&(ht(Pe.levelIndex),vt(Pe.barIndex),bt(ie.start/Be),ct((ie.start+Pt.getValue(ie.itemIndex))/Be),lt(void 0))}}),n.createElement(g.s,{label:"Copy function name",icon:"copy",onClick:()=>{be.current&&Pe&&navigator.clipboard.writeText(Pt.getLabel(ie.itemIndex)).then(()=>{lt(void 0)})}}));return n.createElement("div",{"data-testid":"contextMenu"},Pe.e.clientX&&Pe.e.clientY&&n.createElement(y.x,{renderMenuItems:()=>Ce(),x:Pe.e.clientX+10,y:Pe.e.clientY,focusOnOpen:!1}))},h=n.memo(({data:Pe,levels:be,topLevelIndex:Be,selectedBarIndex:ze,totalTicks:lt})=>{const ht=(0,s.wW)(a);if(be[Be]&&be[Be][ze]){const vt=be[Be][ze],bt=C(Pe,vt,lt),ct=`${bt?.unitValue} (${bt?.percentValue}%) of ${bt?.samples} total samples (${bt?.unitTitle})`;return n.createElement(n.Fragment,null,n.createElement("div",{className:ht.metadata},ct))}return n.createElement(n.Fragment,null)}),C=(Pe,be,Be)=>{const ze=Pe.getValueDisplay(be.itemIndex),lt=Math.round(1e4*(ze.numeric/Be))/100;let ht=ze.text+ze.suffix;const vt=Pe.getUnitTitle();return vt==="Count"&&(ze.suffix||(ht=ze.text)),{percentValue:lt,unitTitle:vt,unitValue:ht,samples:Be.toLocaleString()}};h.displayName="FlameGraphMetadata";const a=()=>({metadata:t.css`
    margin: 8px 0;
    text-align: center;
  `}),P=h,D=({data:Pe,tooltipRef:be,item:Be,totalTicks:ze})=>{const lt=(0,s.wW)(M);let ht=null;if(Be){const vt=x(Pe,Be,ze);ht=n.createElement("div",{className:lt.tooltipContent},n.createElement("p",null,Pe.getLabel(Be.itemIndex)),n.createElement("p",{className:lt.lastParagraph},vt.unitTitle,n.createElement("br",null),"Total: ",n.createElement("b",null,vt.unitValue)," (",vt.percentValue,"%)",n.createElement("br",null),"Self: ",n.createElement("b",null,vt.unitSelf)," (",vt.percentSelf,"%)",n.createElement("br",null),"Samples: ",n.createElement("b",null,vt.samples)))}return n.createElement("div",{ref:be,className:lt.tooltip},ht)},x=(Pe,be,Be)=>{const ze=Pe.getValueDisplay(be.itemIndex),lt=Pe.getSelfDisplay(be.itemIndex),ht=Math.round(1e4*(ze.numeric/Be))/100,vt=Math.round(1e4*(lt.numeric/Be))/100;let bt=ze.text+ze.suffix,ct=lt.text+lt.suffix;const Pt=Pe.getUnitTitle();return Pt==="Count"&&(ze.suffix||(bt=ze.text),lt.suffix||(ct=lt.text)),{name:Pe.getLabel(be.itemIndex),percentValue:ht,percentSelf:vt,unitTitle:Pt,unitValue:bt,unitSelf:ct,samples:ze.numeric.toLocaleString()}},M=Pe=>({tooltip:t.css`
    title: tooltip;
    position: fixed;
  `,tooltipContent:t.css`
    title: tooltipContent;
    background-color: ${Pe.components.tooltip.background};
    border-radius: ${Pe.shape.radius.default};
    border: 1px solid ${Pe.components.tooltip.background};
    box-shadow: ${Pe.shadows.z2};
    color: ${Pe.components.tooltip.text};
    font-size: ${Pe.typography.bodySmall.fontSize};
    padding: ${Pe.spacing(.5,1)};
    transition: opacity 0.3s;
    z-index: ${Pe.zIndex.tooltip};
    max-width: 400px;
    overflow-wrap: break-word;
  `,lastParagraph:t.css`
    title: lastParagraph;
    margin-bottom: 0;
  `,name:t.css`
    title: name;
    margin-bottom: 10px;
  `}),b=D;var R=e(16514);function S(Pe,be,Be,ze,lt,ht){const vt=[];for(let bt=0;bt<be.length;bt+=1){const ct=be[bt],Pt=U(ct.start,ze,lt,ht);let ie=Pe.getValue(ct.itemIndex);const Ce=ie*ht<=f;if(Ce)for(;bt<be.length-1&&ct.start+ie===be[bt+1].start&&Pe.getValue(be[bt+1].itemIndex)*ht<=f;)bt+=1,ie+=Pe.getValue(be[bt].itemIndex);const Ne=Pe.getValueDisplay(ct.itemIndex);let Ze=Ne.suffix?Ne.text+Ne.suffix:Ne.text;const Qe=ie*ht-(Ce?0:d*2);vt.push({width:Qe,height:i,x:Pt,y:Be*i,collapsed:Ce,ticks:ie,label:Pe.getLabel(ct.itemIndex),unitLabel:Ze})}return vt}function O(Pe,be,Be,ze,lt,ht,vt,bt,ct){if(be.width<u)return;Pe.beginPath(),Pe.rect(be.x+(be.collapsed?0:d),be.y,be.width,be.height);const Pt=Math.min(1,be.ticks/Be/(lt-ze)),ie=50-50*Pt,Ce=65+7*Pt,Ne=be.label;be.collapsed?Pe.fillStyle=ct.has(Ne)?I(ie,Ce):R.O9[55]:(Pe.stroke(),ht?Pe.fillStyle=ct.has(Ne)?I(ie,Ce):R.O9[55]:Pe.fillStyle=vt>bt-1?I(ie,Ce):I(ie,Ce+15)),Pe.fill(),!be.collapsed&&be.width>=r&&(Pe.save(),Pe.clip(),Pe.fillStyle="#222",Pe.fillText(`${Ne} (${be.unitLabel})`,Math.max(be.x,0)+o,be.y+i/2),Pe.restore())}function U(Pe,be,Be,ze){return(Pe-be*Be)*ze}function I(Pe,be){return`hsl(${Pe}, 100%, ${be}%)`}const F=({data:Pe,app:be,levels:Be,topLevelIndex:ze,selectedBarIndex:lt,rangeMin:ht,rangeMax:vt,search:bt,setTopLevelIndex:ct,setSelectedBarIndex:Pt,setRangeMin:ie,setRangeMax:Ce,selectedView:Ne})=>{const Ze=(0,s.wW)(w),Qe=Pe.getValue(0),[Le,{width:Ue}]=(0,c.Z)(),ve=(0,n.useRef)(null),Se=(0,n.useRef)(null),[Fe,je]=(0,n.useState)(),[Ge,gt]=(0,n.useState)(),[mt]=(0,n.useState)(()=>new p.Z),Ye=(0,n.useMemo)(()=>{const ft=new Set;if(bt){let St=mt.filter(Pe.getUniqueLabels(),bt);if(St)for(let we of St)ft.add(Pe.getUniqueLabels()[we])}return ft},[mt,bt,Pe]);return(0,n.useEffect)(()=>{if(!Be.length)return;const ft=Ue*window.devicePixelRatio/Qe/(vt-ht),St=ve.current?.getContext("2d"),we=ve.current,qe=i*Be.length;we.width=Math.round(Ue*window.devicePixelRatio),we.height=Math.round(qe*window.devicePixelRatio),we.style.width=`${Ue}px`,we.style.height=`${qe}px`,St.textBaseline="middle",St.font=12*window.devicePixelRatio+"px monospace",St.strokeStyle="white";for(let Je=0;Je<Be.length;Je++){const ut=Be[Je],Mt=S(Pe,ut,Je,Qe,ht,ft);for(const Wt of Mt)O(St,Wt,Qe,ht,vt,bt,Je,ze,Ye)}},[Pe,Be,Ue,Qe,ht,vt,bt,ze,Ye]),(0,n.useEffect)(()=>{ve.current&&(ve.current.onclick=ft=>{je(void 0);const St=ve.current.clientWidth/Qe/(vt-ht),{levelIndex:we,barIndex:qe}=K(Pe,ft,St,Be,Qe,ht);qe!==-1&&!isNaN(we)&&!isNaN(qe)?gt({e:ft,levelIndex:we,barIndex:qe}):gt(void 0)},ve.current.onmousemove=ft=>{if(Se.current&&Ge===void 0){je(void 0);const St=ve.current.clientWidth/Qe/(vt-ht),{levelIndex:we,barIndex:qe}=K(Pe,ft,St,Be,Qe,ht);qe!==-1&&!isNaN(we)&&!isNaN(qe)&&(Se.current.style.top=ft.clientY+"px",document.documentElement.clientWidth-ft.clientX<400?(Se.current.style.right=document.documentElement.clientWidth-ft.clientX+15+"px",Se.current.style.left="auto"):(Se.current.style.left=ft.clientX+15+"px",Se.current.style.right="auto"),je(Be[we][qe]))}},ve.current.onmouseleave=()=>{je(void 0)})},[Pe,Be,ht,vt,ze,Qe,Ue,ct,ie,Ce,Ne,Pt,gt,Ge]),(0,n.useEffect)(()=>{const ft=St=>{St.target.parentElement?.id!=="flameGraphCanvasContainer"&&gt(void 0)};return window.addEventListener("click",ft),()=>window.removeEventListener("click",ft)},[gt]),n.createElement("div",{className:Ze.graph,ref:Le},n.createElement(P,{data:Pe,levels:Be,topLevelIndex:ze,selectedBarIndex:lt,totalTicks:Qe}),n.createElement("div",{className:Ze.canvasContainer,id:"flameGraphCanvasContainer"},n.createElement("canvas",{ref:ve,"data-testid":"flameGraph"})),n.createElement(b,{tooltipRef:Se,item:Fe,data:Pe,totalTicks:Qe}),Ge&&n.createElement(E,{data:Pe,contextMenuData:Ge,levels:Be,totalTicks:Qe,graphRef:ve,setContextMenuData:gt,setTopLevelIndex:ct,setSelectedBarIndex:Pt,setRangeMin:ie,setRangeMax:Ce}))},w=()=>({graph:t.css`
    overflow: scroll;
    height: 100%;
    flex-grow: 1;
    flex-basis: 50%;
  `,canvasContainer:t.css`
    cursor: pointer;
  `}),K=(Pe,be,Be,ze,lt,ht)=>{const vt=Math.floor(be.offsetY/(i/window.devicePixelRatio)),bt=L(be.offsetX,Pe,ze[vt],Be,lt,ht);return{levelIndex:vt,barIndex:bt}},L=(Pe,be,Be,ze,lt,ht)=>{if(Be){let vt=0,bt=Be.length-1;for(;vt<=bt;){const ct=vt+bt>>1,Pt=U(Be[ct].start,lt,ht,ze),ie=U(Be[ct].start+be.getValue(Be[ct].itemIndex),lt,ht,ze);if(Pt<=Pe&&ie>=Pe)return ct;Pt>Pe?bt=ct-1:vt=ct+1}}return-1},V=F;var H=e(21544),j=e(6194),A=(Pe=>(Pe.Bytes="bytes",Pe.Short="short",Pe.Nanoseconds="ns",Pe))(A||{}),_=(Pe=>(Pe.Symbol="Symbol",Pe.Self="Self",Pe.Total="Total",Pe))(_||{}),k=(Pe=>(Pe.TopTable="topTable",Pe.FlameGraph="flameGraph",Pe.Both="both",Pe))(k||{});function Q(Pe){const be=[];let Be=0;for(let ze=0;ze<Pe.data.length;ze++){const lt=Pe.getLevel(ze),ht=ze>0?Pe.getLevel(ze-1):void 0;if(be[lt]=be[lt]||[],ht&&ht>=lt){const bt=be[lt][be[lt].length-1];Be=bt.start+Pe.getValue(bt.itemIndex)}const vt={itemIndex:ze,start:Be};be[lt].push(vt)}return be}class re{constructor(be,Be=(0,H.j)()){if(this.data=be,this.labelField=be.fields.find(lt=>lt.name==="label"),this.levelField=be.fields.find(lt=>lt.name==="level"),this.valueField=be.fields.find(lt=>lt.name==="value"),this.selfField=be.fields.find(lt=>lt.name==="self"),!(this.labelField&&this.levelField&&this.valueField&&this.selfField))throw new Error("Malformed dataFrame: value, level and label and self fields are required.");const ze=this.labelField?.config?.type?.enum;ze?(this.labelDisplayProcessor=(0,j.je)(Be,ze),this.uniqueLabels=ze.text||[]):(this.labelDisplayProcessor=lt=>({text:lt+"",numeric:0}),this.uniqueLabels=[...new Set(this.labelField.values)]),this.valueDisplayProcessor=(0,j.U_)({field:this.valueField,theme:Be})}getLabel(be){return this.labelDisplayProcessor(this.labelField.values[be]).text}getLevel(be){return this.levelField.values[be]}getValue(be){return this.valueField.values[be]}getValueDisplay(be){return this.valueDisplayProcessor(this.valueField.values[be])}getSelf(be){return this.selfField.values[be]}getSelfDisplay(be){return this.valueDisplayProcessor(this.selfField.values[be])}getUniqueLabels(){return this.uniqueLabels}getUnitTitle(){switch(this.valueField.config.unit){case A.Bytes:return"RAM";case A.Nanoseconds:return"Time"}return"Count"}}var Z=e(83231),oe=e(83272),G=e(206),le=e(41818),ge=e(46967),ne=e(31403),ue=e(2594),te=e(47694);const me=({app:Pe,search:be,setTopLevelIndex:Be,setSelectedBarIndex:ze,setRangeMin:lt,setRangeMax:ht,setSearch:vt,selectedView:bt,setSelectedView:ct,containerWidth:Pt})=>{const ie=(0,s.wW)(Le=>se(Le,Pe));let Ce=[{value:k.TopTable,label:"Top Table",description:"Only show top table"},{value:k.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];Pt>=m&&Ce.push({value:k.Both,label:"Both",description:"Show both the top table and flame graph"});const Ne=()=>{Be(0),ze(0),lt(0),ht(1),vt(""),Qe("")},[Ze,Qe]=q(be,vt);return n.createElement("div",{className:ie.header},n.createElement("div",{className:ie.leftContainer},n.createElement("div",{className:ie.inputContainer},n.createElement(ge.I,{value:Ze||"",onChange:Le=>{Qe(Le.currentTarget.value)},placeholder:"Search..",width:44})),n.createElement(ne.zx,{type:"button",variant:"secondary",onClick:Ne},"Reset view")),n.createElement("div",{className:ie.rightContainer},n.createElement(ue.S,{options:Ce,value:bt,onChange:Le=>{(0,le.ff)("grafana_flamegraph_view_selected",{app:Pe,grafana_version:te.vc.buildInfo.version,view:Le}),ct(Le)}})))};function q(Pe,be){const[Be,ze]=(0,n.useState)(Pe),lt=(0,oe.Z)(Pe);return(0,Z.Z)(()=>{be(Be)},250,[Be]),(0,n.useEffect)(()=>{lt!==Pe&&Pe!==Be&&ze(Pe)},[Pe,lt,Be]),[Be,ze]}const se=(Pe,be)=>({header:t.css`
    display: flow-root;
    width: 100%;
    background: ${Pe.colors.background.primary};
    top: 0;
    height: 50px;
    z-index: ${Pe.zIndex.navbarFixed};
    ${be===G.zj.Explore?"position: sticky; margin-bottom: 8px; padding-top: 9px":""};
  `,inputContainer:t.css`
    float: left;
    margin-right: 20px;
  `,leftContainer:t.css`
    float: left;
  `,rightContainer:t.css`
    float: right;
  `}),ae=me;var pe=e(89050),de=e(99098),Me=e(76095),Ke=e(35645),st=e(88144);const Ie=({data:Pe,app:be,totalLevels:Be,selectedView:ze,search:lt,setSearch:ht,setTopLevelIndex:vt,setSelectedBarIndex:bt,setRangeMin:ct,setRangeMax:Pt})=>{const ie=(0,s.wW)(_e),Ce=Qe=>{lt===Qe?ht(""):((0,le.ff)("grafana_flamegraph_table_item_selected",{app:be,grafana_version:Ke.v.buildInfo.version}),ht(Qe),vt(0),bt(0),ct(0),Pt(1))},[Ne,Ze]=(0,n.useState)([{displayName:"Self",desc:!0}]);return n.createElement("div",{className:ie.topTableContainer,"data-testid":"topTable"},n.createElement(pe.Z,{style:{width:"100%",height:i*Be+"px"}},({width:Qe,height:Le})=>{if(Qe<3||Le<3)return null;const Ue=Ve(Pe,Qe,Ce);return n.createElement(st.i,{initialSortBy:Ne,onSortByChange:ve=>{ve&&ve.length&&(0,le.ff)("grafana_flamegraph_table_sort_selected",{app:be,grafana_version:Ke.v.buildInfo.version,sort:ve[0].displayName+"_"+(ve[0].desc?"desc":"asc")}),Ze(ve)},data:Ue,width:Qe,height:Le})}))};function Ve(Pe,be,Be){let ze={};for(let Pt=0;Pt<Pe.data.length;Pt++){const ie=Pe.getValue(Pt),Ce=Pe.getSelf(Pt),Ne=Pe.getLabel(Pt);ze[Ne]=ze[Ne]||{},ze[Ne].self=ze[Ne].self?ze[Ne].self+Ce:Ce,ze[Ne].total=ze[Ne].total?ze[Ne].total+ie:ie}const lt={type:de.fS.string,name:"Symbol",values:[],config:{custom:{width:be-l*2},links:[{title:"Highlight symbol",url:"",onClick:Pt=>{const Ce=Pt.origin.field.values[Pt.origin.rowIndex];Be(Ce)}}]}},ht={type:de.fS.number,name:"Self",values:[],config:{unit:Pe.selfField.config.unit,custom:{width:l}}},vt={type:de.fS.number,name:"Total",values:[],config:{unit:Pe.valueField.config.unit,custom:{width:l}}};for(let Pt in ze)lt.values.push(Pt),ht.values.push(ze[Pt].self),vt.values.push(ze[Pt].total);const bt={fields:[lt,ht,vt],length:lt.values.length};return(0,Me.SM)({data:[bt],fieldConfig:{defaults:{},overrides:[]},replaceVariables:Pt=>Pt,theme:Ke.v.theme2})[0]}const _e=()=>({topTableContainer:t.css`
      flex-grow: 1;
      flex-basis: 50%;
      overflow: hidden;
    `}),tt=Ie,dt=Pe=>{const[be,Be]=(0,n.useState)(0),[ze,lt]=(0,n.useState)(0),[ht,vt]=(0,n.useState)(0),[bt,ct]=(0,n.useState)(1),[Pt,ie]=(0,n.useState)(""),[Ce,Ne]=(0,n.useState)(k.Both),[Ze,{width:Qe}]=(0,c.Z)(),Le=(0,s.l4)(),[Ue,ve]=(0,n.useMemo)(()=>{if(!Pe.data)return[void 0,void 0];const Fe=new re(Pe.data,Le);return[Fe,Q(Fe)]},[Pe.data,Le]),Se=(0,s.wW)(Oe);return(0,n.useEffect)(()=>{Qe>0&&Qe<m&&Ce===k.Both&&Ne(k.FlameGraph)},[Ce,Ne,Qe]),(0,n.useEffect)(()=>{Be(0),lt(0),vt(0),ct(1)},[Pe.data]),n.createElement(n.Fragment,null,Ue&&n.createElement("div",{ref:Ze,className:Se.container},n.createElement(ae,{app:Pe.app,setTopLevelIndex:Be,setSelectedBarIndex:lt,setRangeMin:vt,setRangeMax:ct,search:Pt,setSearch:ie,selectedView:Ce,setSelectedView:Ne,containerWidth:Qe}),n.createElement("div",{className:Se.body},Ce!==k.FlameGraph&&n.createElement(tt,{data:Ue,app:Pe.app,totalLevels:ve.length,selectedView:Ce,search:Pt,setSearch:ie,setTopLevelIndex:Be,setSelectedBarIndex:lt,setRangeMin:vt,setRangeMax:ct}),Ce!==k.TopTable&&n.createElement(V,{data:Ue,app:Pe.app,levels:ve,topLevelIndex:be,selectedBarIndex:ze,rangeMin:ht,rangeMax:bt,search:Pt,setTopLevelIndex:Be,setSelectedBarIndex:lt,setRangeMin:vt,setRangeMax:ct,selectedView:Ce}))))};function Oe(Pe){return{container:(0,t.css)({height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0,gap:Pe.spacing(2)}),body:(0,t.css)({display:"flex",flexGrow:1,minHeight:0})}}const ye=dt},7149:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{plugin:()=>a});var t=e(36873),n=e(25272),c=e(30383),s=e(50954);const i=P=>(0,s.rD)(P),f=(P,D,x)=>{const M=(0,s.ZH)(P,D,x);if(D==="singlestat"&&x.angular){const b=x.angular.gauge;b&&(M.showThresholdMarkers=b.thresholdMarkers,M.showThresholdLabels=b.thresholdLabels)}return M};var u=e(66111),r=e(6194),d=e(92156),o=e(69823),m=e(18543),l=e(4387),p=e(47694),g=e(63992);class y extends u.PureComponent{constructor(){super(...arguments),this.renderComponent=(D,x)=>{const{options:M,fieldConfig:b}=this.props,{width:R,height:S,count:O,value:U}=D,{field:I,display:F}=U,{openMenu:w,targetClassName:K}=x;return u.createElement(o.a,{value:(0,g.l)(O,b.defaults,F),width:R,height:S,field:I,text:M.text,showThresholdLabels:M.showThresholdLabels,showThresholdMarkers:M.showThresholdMarkers,theme:p.vc.theme2,onClick:w,className:K})},this.renderValue=D=>{const{value:x}=D,{getLinks:M,hasLinks:b}=x;return b&&M?u.createElement(m.V,{links:M,style:{flexGrow:1}},R=>this.renderComponent(D,R)):this.renderComponent(D,{})},this.getValues=()=>{const{data:D,options:x,replaceVariables:M,fieldConfig:b,timeZone:R}=this.props;for(let S of D.series)for(let O of S.fields)if(O.config.unit==="percent"||O.config.unit==="percentunit"){const U=O.config.min??0,I=O.config.max??(O.config.unit==="percent"?100:1);O.state=O.state??{},O.state.range={min:U,max:I,delta:I-U},O.display=(0,r.U_)({field:O,theme:p.vc.theme2})}return(0,d.nG)({fieldConfig:b,reduceOptions:x.reduceOptions,replaceVariables:M,theme:p.vc.theme2,data:D.series,timeZone:R})}}render(){const{height:D,width:x,data:M,renderCounter:b,options:R}=this.props;return u.createElement(l.Q,{getValues:this.getValues,renderValue:this.renderValue,width:x,height:D,source:M,autoGrid:!0,renderCounter:b,orientation:R.orientation})}}const v={showThresholdLabels:!1,showThresholdMarkers:!0};var E=e(69098),h=e(26410);class C{getSuggestionsForData(D){const{dataSummary:x}=D;if(!x.hasData||!x.hasNumberField||x.numberFieldCount>=50)return;const M=D.getListAppender({name:h.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:E.H.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:b=>{b.options.reduceOptions.values&&(b.options.reduceOptions.limit=2)}}});x.hasStringField&&x.frameCount===1&&x.rowCountTotal<10?(M.append({name:h.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),M.append({name:h.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(M.append({name:h.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),M.append({name:h.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const a=new t.c(y).useFieldConfig({useCustomConfig:P=>{P.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(P=>{(0,c.j)(P),(0,c.h)(P),P.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:v.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:v.showThresholdMarkers}),n.Z(P)}).setPanelChangeHandler(f).setSuggestionsSupplier(new C).setMigrationHandler(i)},16225:(Y,T,e)=>{"use strict";e.d(T,{H:()=>m});var t=e(9892),n=e(66111),c=e(30471),s=e(2703),i=e(574),f=e(40538),u=e(72648),r=e(52081),d=e(31403),o=e(56206);const m=({data:p,rowIndex:g,columnIndex:y,sortOrder:v,mode:E,header:h=void 0})=>{const C=(0,u.wW)(l);if(!p||g==null)return null;const a=p.fields.map((O,U)=>({...O,hovered:U===y})),P=a.filter(O=>!Boolean(O.config.custom?.hideFrom?.tooltip)),D=P.find(O=>O.name==="traceID")||a[0],x=[];if(P.filter(O=>D===O).length>0&&x.push(D),x.push(...P.filter(O=>D!==O)),x.length===0)return null;const M=[],b=[],R=new Set;for(const O of x){if(E===f.f3.Single&&y!=null&&!O.hovered)continue;const U=O.values[g],I=O.display?O.display(U):{text:`${U}`,numeric:+U};O.getLinks&&O.getLinks({calculatedValue:I,valueRowIndex:g}).forEach(F=>{const w=`${F.title}/${F.href}`;R.has(w)||(b.push(F),R.add(w))}),M.push({name:(0,c.CZ)(O,p),value:U,valueString:(0,s.zc)(I),highlight:O.hovered})}v&&v!==f.As.None&&M.sort((O,U)=>i.sortValues(v)(O.value,U.value));const S=()=>b.length>0&&n.createElement("tr",null,n.createElement("td",{colSpan:2},n.createElement(r.wc,null,b.map((O,U)=>n.createElement(d.Qj,{key:U,icon:"external-link-alt",target:O.target,href:O.href,onClick:O.onClick,fill:"text",style:{width:"100%"}},O.title)))));return n.createElement("div",{className:C.wrapper},h&&n.createElement("div",{className:C.header},n.createElement("span",{className:C.title},h)),n.createElement("table",{className:C.infoWrap},n.createElement("tbody",null,M.map((O,U)=>n.createElement("tr",{key:`${U}/${g}`,className:O.highlight?C.highlight:""},n.createElement("th",null,O.name,":"),n.createElement("td",null,(0,o.Q)(O.valueString)))),S())))},l=p=>{const g=p.isDark?p.v1.palette.dark2:p.v1.palette.white,y=p.isDark?p.v1.palette.dark9:p.v1.palette.gray5,v=p.isDark?p.v1.palette.dark3:p.v1.palette.gray6;return{wrapper:t.css`
      background: ${g};
      border: 1px solid ${y};
      border-radius: ${p.shape.borderRadius(2)};
    `,header:t.css`
      background: ${y};
      padding: 6px 10px;
      display: flex;
    `,title:t.css`
      font-weight: ${p.typography.fontWeightMedium};
      padding-right: ${p.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,infoWrap:t.css`
      padding: 8px;
      th {
        font-weight: ${p.typography.fontWeightMedium};
        padding: ${p.spacing(.25,2)};
      }
      tr {
        background-color: ${p.colors.background.primary};
        &:nth-child(even) {
          background-color: ${v};
        }
      }
    `,highlight:t.css`
      /* !important is required to overwrite default table styles */
      background: ${p.colors.action.hover} !important;
    `,link:t.css`
      color: #6e9fff;
    `}}},38286:(Y,T,e)=>{"use strict";e.d(T,{Cg:()=>c,EQ:()=>i,Er:()=>f,H:()=>s,bD:()=>n});var t=e(40538),n=(u=>(u.Point="point",u.Line="line",u.Polygon="polygon",u.Any="*any*",u))(n||{});const c=5;var s=(u=>(u.Left="left",u.Center="center",u.Right="right",u))(s||{}),i=(u=>(u.Top="top",u.Middle="middle",u.Bottom="bottom",u))(i||{});const f=Object.freeze({size:{fixed:c,min:2,max:15},color:{fixed:"dark-green"},opacity:.4,symbol:{mode:t.Q8.Fixed,fixed:"img/icons/marker/circle.svg"},textConfig:{fontSize:12,textAlign:"center",textBaseline:"middle",offsetX:0,offsetY:0},rotation:{fixed:0,mode:t.eK.Mod,min:-360,max:360}})},56206:(Y,T,e)=>{"use strict";e.d(T,{Q:()=>s});var t=e(9892),n=e(66111),c=e(44768);const s=i=>(0,c.CB)(i)?n.createElement("a",{href:i,target:"_blank",className:(0,t.cx)("external-link"),rel:"noreferrer"},i):i},44768:(Y,T,e)=>{"use strict";e.d(T,{B1:()=>r,CB:()=>y,FB:()=>p,gE:()=>l,n_:()=>o,sA:()=>m,uH:()=>g,vV:()=>f});var t=e(92053),n=e(79582),c=e(25532),s=e(35821),i=e(38286);function f(v,E,h,C){const a={};return C&&Object.keys(C).length?(a.color=(0,c.getColorDimension)(v,C.color??i.Er.color,h),a.size=(0,c.getScaledDimension)(v,C.size??i.Er.size),a.rotation=(0,c.getScalarDimension)(v,C.rotation??i.Er.rotation),C.text&&(C.text.field||C.text.fixed)&&(a.text=(0,c.getTextDimension)(v,C.text))):E.fields&&(E.fields.color&&(a.color=(0,c.getColorDimension)(v,E.config.color??i.Er.color,h)),E.fields.size&&(a.size=(0,c.getScaledDimension)(v,E.config.size??i.Er.size)),E.fields.text&&(a.text=(0,c.getTextDimension)(v,E.config.text)),E.fields.rotation&&(a.rotation=(0,c.getScalarDimension)(v,E.config.rotation??i.Er.rotation))),a}let u;function r(){return u||(u=[],d()),u}async function d(){const v=await(0,s.e)();for(let E of["maps","gazetteer"])v.listFiles(E).subscribe({next:h=>{h.forEach(C=>{if(C.name.endsWith(".geojson")){const a=`public/${E}/${C.name}`;u.push({value:a,label:a})}})}})}const o=(v,E,h)=>{const[C]=v.initMapView(E.view,void 0);return v.map=new t.Z({view:C,pixelRatio:1,layers:[],controls:[],target:h,interactions:(0,n.c)({mouseWheelZoom:!1})})},m=(v,E)=>{v.initControls(E.controls),v.forceUpdate()},l=(v,E,h)=>{v.panelContext&&v.panelContext.onInstanceStateChange&&v.panelContext.onInstanceStateChange({map:v.map,layers:E,selected:h,actions:v.actions})},p=v=>{let E=v.layers.length;for(;E<100;){const h=`Layer ${E++}`;if(!v.byName.has(h))return h}return`Layer ${Date.now()}`};function g(v,E,h,C){const a=v.getPixelFromCoordinate(h),P=v.getPixelFromCoordinate(C),D=Math.abs(a[0]-P[0]),x=Math.abs(a[1]-P[1]);return D>E||x>E}const y=v=>{try{return new URL(v).protocol.includes("http")}catch{return!1}}},7211:(Y,T,e)=>{"use strict";e.d(T,{o:()=>c});var t=e(66111),n=e(50796);function c(s){return t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingBottom:"6px"}},t.createElement(n.P,{onClick:s.onClick,style:{position:"relative",top:"auto",right:"auto",marginRight:0}}))}},53764:(Y,T,e)=>{"use strict";e.d(T,{S:()=>f});var t=e(9892),n=e(66111),c=e(63418),s=e(77258),i=e(72648);function f({width:r,showImage:d,data:o,index:m}){const l=(0,i.wW)(u),p=r>600,g=o.get(m);return n.createElement("article",{className:(0,t.cx)(l.item,p&&l.itemWide)},d&&g.ogImage&&n.createElement("a",{tabIndex:-1,href:c.QX.sanitizeUrl(g.link),target:"_blank",rel:"noopener noreferrer",className:(0,t.cx)(l.socialImage,p&&l.socialImageWide),"aria-hidden":!0},n.createElement("img",{src:g.ogImage,alt:g.title})),n.createElement("div",{className:l.body},n.createElement("time",{className:l.date,dateTime:(0,s.dq)(g.date,{format:"MMM DD"})},(0,s.dq)(g.date,{format:"MMM DD"})," "),n.createElement("a",{className:l.link,href:c.QX.sanitizeUrl(g.link),target:"_blank",rel:"noopener noreferrer"},n.createElement("h3",{className:l.title},g.title)),n.createElement("div",{className:l.content,dangerouslySetInnerHTML:{__html:c.QX.sanitize(g.content)}})))}const u=r=>({container:t.css`
    height: 100%;
  `,item:t.css`
    display: flex;
    padding: ${r.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${r.spacing(1)};
    border-bottom: 2px solid ${r.colors.border.weak};
    background: ${r.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:t.css`
    flex-direction: row;
  `,body:t.css`
    display: flex;
    flex-direction: column;
  `,socialImage:t.css`
    display: flex;
    align-items: center;
    margin-bottom: ${r.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${r.shape.radius.default} ${r.shape.radius.default} 0 0;
    }
  `,socialImageWide:t.css`
    margin-right: ${r.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${r.shape.radius.default};
    }
  `,link:t.css`
    color: ${r.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${r.colors.text.link};
      text-decoration: underline;
    }
  `,title:t.css`
    font-size: 16px;
    margin-bottom: ${r.spacing(.5)};
  `,content:t.css`
    p {
      margin-bottom: 4px;
      color: ${r.colors.text};
    }
  `,date:t.css`
    margin-bottom: ${r.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 ${r.shape.radius.default};
    color: ${r.colors.text.secondary};
  `})},6981:(Y,T,e)=>{"use strict";e.d(T,{k:()=>t});const t="https://grafana.com/blog/news.xml"},13724:(Y,T,e)=>{"use strict";e.d(T,{j:()=>l});var t=e(13821),n=e(12115);function c(p){const y=new DOMParser().parseFromString(p,"text/xml");return{items:Array.from(y.querySelectorAll("entry")).map(E=>({title:u(E,"title"),link:E.querySelector("link")?.getAttribute("href")??"",content:u(E,"content"),pubDate:u(E,"published"),ogImage:E.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function s(p){const y=new DOMParser().parseFromString(p,"text/xml");return{items:Array.from(y.querySelectorAll("item")).map(E=>({title:u(E,"title"),link:u(E,"link"),content:u(E,"description"),pubDate:u(E,"pubDate"),ogImage:E.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function i(p){return await(await fetch(p)).text()}function f(p){return new DOMParser().parseFromString(p,"text/xml").querySelector("feed")!==null}function u(p,g){return p.querySelector(g)?.textContent??""}async function r(p){const g=await i(p);return f(g)?c(g):s(g)}var d=e(67483),o=e(99098);function m(p){const g=[],y=[],v=[],E=[],h=[];for(const C of p.items){const a=(0,d.CQ)(C.pubDate);try{if(g.push(a.valueOf()),y.push(C.title),v.push(C.link),h.push(C.ogImage),C.content){const P=C.content.replace(/<\/?[^>]+(>|$)/g,"");E.push(P)}}catch(P){console.warn("Error reading news item:",P,C)}}return{fields:[{name:"date",type:o.fS.time,config:{displayName:"Date"},values:g},{name:"title",type:o.fS.string,config:{},values:y},{name:"link",type:o.fS.string,config:{},values:v},{name:"content",type:o.fS.string,config:{},values:E},{name:"ogImage",type:o.fS.string,config:{},values:h}],length:g.length}}function l(p){const[g,y]=(0,t.Z)(async()=>{const v=await r(p),E=m(v);return new n.U(E)},[p],{loading:!0});return{state:g,getNews:y}}},74538:(Y,T,e)=>{"use strict";e.d(T,{E:()=>ct});var t=e(9892),n=e(9085),c=e.n(n),s=e(66111),i=e(62326),f=e(72648),u=e(67487),r=e(39904),d=e(68545);const o=(0,s.memo)(function(Ue){const{edge:ve,onClick:Se,onMouseEnter:Fe,onMouseLeave:je,hovering:Ge}=Ue,{source:gt,target:mt}=ve,Ye=(0,d.dM)({x1:gt.x,y1:gt.y,x2:mt.x,y2:mt.y},90);return s.createElement("g",{onClick:ft=>Se(ft,ve),style:{cursor:"pointer"},"aria-label":`Edge from: ${gt.id} to: ${mt.id}`},s.createElement("line",{strokeWidth:Ge?2:1,stroke:"#999",x1:Ye.x1,y1:Ye.y1,x2:Ye.x2,y2:Ye.y2,markerEnd:"url(#triangle)"}),s.createElement("line",{stroke:"transparent",x1:Ye.x1,y1:Ye.y1,x2:Ye.x2,y2:Ye.y2,strokeWidth:20,onMouseEnter:()=>{Fe(ve.id)},onMouseLeave:()=>{je(ve.id)}}))});function m(){return s.createElement("defs",null,s.createElement("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"8",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:"10",markerHeight:"10",orient:"auto"},s.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#999"})))}const l=Le=>({mainGroup:t.css`
      pointer-events: none;
      font-size: 8px;
    `,background:t.css`
      fill: ${Le.components.tooltip.background};
    `,text:t.css`
      fill: ${Le.components.tooltip.text};
    `}),p=(0,s.memo)(function(Ue){const{edge:ve}=Ue,{source:Se,target:Fe}=ve,je=(0,d.dM)({x1:Se.x,y1:Se.y,x2:Fe.x,y2:Fe.y},90),Ge={x:je.x1+(je.x2-je.x1)/2,y:je.y1+(je.y2-je.y1)/2},gt=(0,f.wW)(l),mt=[ve.mainStat,ve.secondaryStat].filter(qe=>qe),Ye=mt.length>1?"30":"15",ft=mt.length>1?15:7.5;let St=mt.length>1?-5:2.5;const we=[];return mt.forEach((qe,Je)=>{we.push(s.createElement("text",{key:Je,className:gt.text,x:Ge.x,y:Ge.y+St,textAnchor:"middle"},qe)),St+=15}),s.createElement("g",{className:gt.mainGroup},s.createElement("rect",{className:gt.background,x:Ge.x-40,y:Ge.y-ft,width:"80",height:Ye,rx:"5"}),we)});var g=e(82897),y=e(53768),v=e(40538),E=e(78056),h=e(46920);function C(){return{item:t.css`
      label: LegendItem;
      flex-grow: 0;
    `,legend:t.css`
      label: Legend;
      pointer-events: all;
    `}}const a=function(Ue){const{nodes:ve,onSort:Se,sort:Fe,sortable:je}=Ue,Ge=(0,f.l4)(),gt=(0,f.wW)(C),mt=P(ve,Ge),Ye=(0,s.useCallback)(ft=>{Se({field:ft.data.field,ascending:ft.data.field===Fe?.field?!Fe?.ascending:!1})},[Fe,Se]);return s.createElement(E.l,{className:gt.legend,displayMode:v.jK.List,placement:"bottom",items:mt,itemRenderer:ft=>s.createElement(s.Fragment,null,s.createElement(h.e,{item:ft,className:gt.item,onLabelClick:je?Ye:void 0}),je&&(Fe?.field===ft.data.field?s.createElement(r.J,{name:Fe.ascending?"arrow-up":"arrow-down"}):""))})};function P(Le,Ue){if(!Le.length)return[];const ve=[Le[0].mainStat,Le[0].secondaryStat].filter(g.identity),Se=Le.find(Fe=>Fe.arcSections.length>0);return Se&&Se.arcSections[0].config?.color?.mode===y.S.Fixed&&ve.push(...new Set(Le.map(Fe=>Fe.arcSections).flat())),Le[0].color&&ve.push(Le[0].color),ve.map(Fe=>{const je={label:Fe.config.displayName||Fe.name,yAxis:0,data:{field:Fe}};return Fe.config.color?.mode===y.S.Fixed&&Fe.config.color?.fixedColor?je.color=Ue.visualization.getColorByName(Fe.config.color?.fixedColor||""):Fe.config.color?.mode&&(je.gradient=Fe.config.color?.mode),je.color||je.gradient||(je.color=Ue.visualization.getColorByName("")),je})}const D=40,x=Le=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:t.css`
    fill: ${Le.components.panel.background};
    stroke: ${Le.colors.border.strong};
  `,text:t.css`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),M=(0,s.memo)(function(Ue){const{marker:ve,onClick:Se}=Ue,{node:Fe}=ve,je=(0,f.wW)(x);return Fe.x!==void 0&&Fe.y!==void 0?s.createElement("g",{"data-node-id":Fe.id,className:je.mainGroup,onClick:Ge=>{Se?.(Ge,ve)},"aria-label":`Hidden nodes marker: ${Fe.id}`},s.createElement("circle",{className:je.mainCircle,r:D,cx:Fe.x,cy:Fe.y}),s.createElement("g",null,s.createElement("foreignObject",{x:Fe.x-25,y:Fe.y-25,width:"50",height:"50"},s.createElement("div",{className:je.text},s.createElement("span",null,ve.count>100?">100":ve.count," nodes"))))):null});var b=e(28550),R=e(72990);const S=40,O=(Le,Ue)=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
    transition: opacity 300ms;
    opacity: ${Ue==="inactive"?.5:1};
  `,mainCircle:t.css`
    fill: ${Le.components.panel.background};
  `,hoverCircle:t.css`
    opacity: 0.5;
    fill: transparent;
    stroke: ${Le.colors.primary.text};
  `,text:t.css`
    fill: ${Le.colors.text.primary};
    pointer-events: none;
  `,titleText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${(0,b.Z)(Le.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 100px;
  `,statsText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:t.css`
    width: 200px;
    & span {
      background-color: ${(0,b.Z)(Le.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `,clickTarget:t.css`
    fill: none;
    stroke: none;
    pointer-events: fill;
  `}),U=(0,s.memo)(function(Ue){const{node:ve,onMouseEnter:Se,onMouseLeave:Fe,onClick:je,hovering:Ge}=Ue,gt=(0,f.l4)(),mt=O(gt,Ge),Ye=Ge==="active";return ve.x!==void 0&&ve.y!==void 0?s.createElement("g",{"data-node-id":ve.id,className:mt.mainGroup,"aria-label":`Node: ${ve.title}`},s.createElement("circle",{className:mt.mainCircle,r:S,cx:ve.x,cy:ve.y}),Ye&&s.createElement("circle",{className:mt.hoverCircle,r:S-3,cx:ve.x,cy:ve.y,strokeWidth:2}),s.createElement(F,{node:ve}),s.createElement("g",{className:mt.text,style:{pointerEvents:"none"}},s.createElement(I,{node:ve,hovering:Ge}),s.createElement("foreignObject",{x:ve.x-(Ye?100:50),y:ve.y+S+5,width:Ye?"200":"100",height:"40"},s.createElement("div",{className:c()(mt.titleText,Ye&&mt.textHovering)},s.createElement("span",null,ve.title),s.createElement("br",null),s.createElement("span",null,ve.subTitle)))),s.createElement("rect",{"data-testid":`node-click-rect-${ve.id}`,onMouseEnter:()=>{Se(ve.id)},onMouseLeave:()=>{Fe(ve.id)},onClick:ft=>{je(ft,ve)},className:mt.clickTarget,x:ve.x-S-5,y:ve.y-S-5,width:S*2+10,height:S*2+50})):null});function I({node:Le,hovering:Ue}){const ve=(0,f.l4)(),Se=O(ve,Ue),Fe=Ue==="active";return Le.x!==void 0&&Le.y!==void 0?Le.icon?s.createElement("foreignObject",{x:Le.x-35,y:Le.y-20,width:"70",height:"40"},s.createElement("div",{style:{width:70,overflow:"hidden",display:"flex",justifyContent:"center",marginTop:-4}},s.createElement(r.J,{"data-testid":`node-icon-${Le.icon}`,name:Le.icon,size:"xxxl"}))):s.createElement("foreignObject",{x:Le.x-(Fe?100:35),y:Le.y-15,width:Fe?"200":"70",height:"40"},s.createElement("div",{className:c()(Se.statsText,Fe&&Se.textHovering)},s.createElement("span",null,Le.mainStat&&(0,d.Ew)(Le.mainStat.config,Le.mainStat.values[Le.dataFrameRowIndex])),s.createElement("br",null),s.createElement("span",null,Le.secondaryStat&&(0,d.Ew)(Le.secondaryStat.config,Le.secondaryStat.values[Le.dataFrameRowIndex])))):null}function F(Le){const{node:Ue}=Le,ve=Ue.arcSections.find(Ge=>Ge.values[Ue.dataFrameRowIndex]>=1),Se=(0,f.l4)();if(ve)return s.createElement("circle",{fill:"none",stroke:Se.visualization.getColorByName(ve.config.color?.fixedColor||""),strokeWidth:2,r:S,cx:Ue.x,cy:Ue.y});const Fe=Ue.arcSections.filter(Ge=>Ge.values[Ue.dataFrameRowIndex]!==0);if(Fe.length===0)return s.createElement("circle",{fill:"none",stroke:Ue.color?K(Ue.color,Ue.dataFrameRowIndex,Se):"gray",strokeWidth:2,r:S,cx:Ue.x,cy:Ue.y});const{elements:je}=Fe.reduce((Ge,gt,mt)=>{const Ye=gt.config.color?.fixedColor||"",ft=gt.values[Ue.dataFrameRowIndex],St=s.createElement(w,{key:mt,r:S,x:Ue.x,y:Ue.y,startPercent:Ge.percent,percent:ft+Ge.percent>1?1-Ge.percent:ft,color:Se.visualization.getColorByName(Ye),strokeWidth:2});return Ge.elements.push(St),Ge.percent=Ge.percent+ft,Ge},{elements:[],percent:0});return s.createElement(s.Fragment,null,je)}function w({r:Le,x:Ue,y:ve,startPercent:Se,percent:Fe,color:je,strokeWidth:Ge=2}){const gt=Se+Fe,mt=Ue+Math.sin(2*Math.PI*Se)*Le,Ye=ve-Math.cos(2*Math.PI*Se)*Le,ft=Ue+Math.sin(2*Math.PI*gt)*Le,St=ve-Math.cos(2*Math.PI*gt)*Le,we=Fe>.5?"1":"0";return s.createElement("path",{fill:"none",d:`M ${mt} ${Ye} A ${Le} ${Le} 0 ${we} 1 ${ft} ${St}`,stroke:je,strokeWidth:Ge})}function K(Le,Ue,ve){return Le.config.color?(0,R.fD)(Le).getCalculator(Le,ve)(0,Le.values[Ue]):Le.values[Ue]}var L=e(52081),V=e(31403);function H(){return{wrapper:t.css`
      label: wrapper;
      pointer-events: all;
    `}}function j(Le){const{config:Ue,onConfigChange:ve,onPlus:Se,onMinus:Fe,disableZoomOut:je,disableZoomIn:Ge}=Le,[gt,mt]=(0,s.useState)(!1),Ye=!1,ft=(0,f.wW)(H);return s.createElement("div",{className:ft.wrapper},s.createElement(L.wc,{spacing:"sm"},s.createElement(L.Lh,{spacing:"xs"},s.createElement(V.zx,{icon:"plus-circle",onClick:Se,size:"md",title:"Zoom in",variant:"secondary",disabled:Ge}),s.createElement(V.zx,{icon:"minus-circle",onClick:Fe,size:"md",title:"Zoom out",variant:"secondary",disabled:je})),s.createElement(L.Lh,{spacing:"xs"},s.createElement(V.zx,{icon:"code-branch",onClick:()=>ve({...Ue,gridLayout:!1}),size:"md",title:"Default layout",variant:"secondary",disabled:!Ue.gridLayout}),s.createElement(V.zx,{icon:"apps",onClick:()=>ve({...Ue,gridLayout:!0}),size:"md",title:"Grid layout",variant:"secondary",disabled:Ue.gridLayout}))),Ye&&s.createElement(V.zx,{size:"xs",fill:"text",onClick:()=>mt(St=>!St)},gt?"Hide config":"Show config"),Ye&&gt&&Object.keys(Ue).filter(St=>St!=="show").map(St=>s.createElement("div",{key:St},St,s.createElement("input",{style:{width:50},type:"number",value:Ue[St],onChange:we=>{ve({...Ue,[St]:parseFloat(we.target.value)})}}))))}var A=e(88687),_=e(92653),k=e(77410);const Q=()=>new k.q(new URL(e.p+e.u(1256),e.b));function re(Le,Ue,ve,Se,Fe){const[je,Ge]=(0,s.useMemo)(()=>{if(!(Le.length&&Ue.length))return[{},{}];const gt=Ue.reduce((Ye,ft)=>(Ye[ft.source.id]=[...Ye[ft.source.id]??[],ft],Ye[ft.target.id]=[...Ye[ft.target.id]??[],ft],Ye),{}),mt=Le.reduce((Ye,ft)=>(Ye[ft.id]=ft,Ye),{});return[gt,mt]},[Ue,Le]);return(0,s.useMemo)(()=>Le.length<=ve?{nodes:Le,edges:Ue}:Se.gridLayout?oe(Le,ve,Fe):Z(Le,Ue,Ge,je,ve,Fe),[Ue,je,ve,Le,Ge,Fe,Se.gridLayout])}function Z(Le,Ue,ve,Se,Fe,je){let Ge;je?Ge=[ve[je]]:(Ge=Le.filter(we=>we.incoming===0),Ge.length||(Ge=[Le[0]]));const{visibleNodes:gt,markers:mt}=G(Fe,Ge,ve,Se),Ye=le(mt,gt,ve,Se),ft=(0,g.fromPairs)(Ye.map(we=>[we.node.id,we]));for(const we of Ye)we.count===1&&(delete ft[we.node.id],gt[we.node.id]=we.node);const St=Ue.filter(we=>(gt[we.source.id]||ft[we.source.id])&&(gt[we.target.id]||ft[we.target.id]));return{nodes:Object.values(gt),edges:St,markers:Object.values(ft)}}function oe(Le,Ue,ve){let Se=0,Fe=Ue,je=[];if(ve){const Ge=Le.findIndex(Ye=>Ye.id===ve),gt=Math.floor(Ue/2);let mt=gt;Se=Ge-gt,Se<0&&(mt+=Math.abs(Se),Se=0),Fe=Ge+mt+1,Fe>Le.length&&(Se>0&&(Se=Math.max(0,Se-(Fe-Le.length))),Fe=Le.length),Se>1&&je.push({node:Le[Se-1],count:Se}),Le.length-Fe>1&&je.push({node:Le[Fe],count:Le.length-Fe})}else Le.length-Ue>1&&(je=[{node:Le[Ue],count:Le.length-Ue}]);return{nodes:Le.slice(Se,Fe),edges:[],markers:je}}function G(Le,Ue,ve,Se){const Fe={};let je=[...Ue];for(;Object.keys(Fe).length<Le&&je.length>0;){let gt=je.shift();if(Fe[gt.id])continue;Fe[gt.id]=gt;const Ye=(Se[gt.id]||[]).map(ft=>{const St=ft.source.id===gt.id?ft.target.id:ft.source.id;return ve[St]});je=je.concat(Ye)}const Ge=(0,g.uniq)(je.filter(gt=>!Fe[gt.id]));return{visibleNodes:Fe,markers:Ge}}function le(Le,Ue,ve,Se){return Le.map(Fe=>{const je={};let Ge=0,gt=[Fe];for(;gt.length>0&&Ge<=101;){let mt=gt.shift();if(Ue[mt.id]||je[mt.id])continue;je[mt.id]||Ge++,je[mt.id]=mt;const ft=(Se[mt.id]||[]).map(St=>{const we=St.source.id===mt.id?St.target.id:St.source.id;return ve[we]});gt=gt.concat(ft)}return{node:Fe,count:Ge}})}const ge={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function ne(Le,Ue,ve=ge,Se,Fe,je){const[Ge,gt]=(0,s.useState)([]),[mt,Ye]=(0,s.useState)([]),[ft,St]=(0,s.useState)(!1),we=(0,_.default)(),qe=(0,s.useRef)();(0,A.Z)(()=>{qe.current&&qe.current()}),(0,s.useEffect)(()=>{if(Le.length===0){gt([]),Ye([]),St(!1);return}St(!0);const pn=ue(Le,Ue,({nodes:An,edges:Ot})=>{we()&&(gt(An),Ye(Ot),St(!1))});return qe.current=pn,pn},[Le,Ue,we]);const[Je,ut]=(0,s.useMemo)(()=>{if(Le.length===0)return[[],[]];const pn=Le.map(Ot=>({...Ot})),An=Ue.map(Ot=>({...Ot}));return te(pn,Fe,ve.sort),[pn,An]},[ve.sort,Le,Ue,Fe]),{nodes:Mt,edges:Wt,markers:ln}=re(ve.gridLayout?Je:Ge,ve.gridLayout?ut:mt,Se,ve,je),fn=(0,s.useMemo)(()=>(0,d.Tz)([...Mt,...(ln||[]).map(pn=>pn.node)]),[Mt,ln]);return{nodes:Mt,edges:Wt,markers:ln,bounds:fn,hiddenNodesCount:Le.length-Mt.length,loading:ft}}function ue(Le,Ue,ve){const Se=Q();return Se.onmessage=Fe=>{for(let je=0;je<Le.length;je++)Fe.data.nodes[je]={...Le[je],...Fe.data.nodes[je]};ve(Fe.data)},Se.postMessage({nodes:Le.map(Fe=>({id:Fe.id,incoming:Fe.incoming})),edges:Ue,config:ge}),()=>{Se.terminate()}}function te(Le,Ue,ve){const Ge=Math.min(Math.floor((Ue-120)/140),Le.length),gt=Math.floor((Ge-1)*120/2);ve&&Le.sort((mt,Ye)=>{const ft=ve.field.values[mt.dataFrameRowIndex],St=ve.field.values[Ye.dataFrameRowIndex];return ve.ascending?ft-St:St-ft});for(const[mt,Ye]of Le.entries()){const ft=Math.floor(mt/Ge),St=mt%Ge;Ye.x=St*120-gt,Ye.y=-60+ft*140}}var me=e(85506),q=e(30909),se=e(14391),ae=e(42044);function pe(Le,Ue,ve,Se,Fe,je){const[Ge,gt]=(0,s.useState)(void 0),mt=(0,s.useCallback)((ft,St)=>{const[we,qe]=Se.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],Je=[{label:we,onClick:Wt=>{je(Wt.id),Fe({...Se,gridLayout:qe}),gt(void 0)}}],ut=Ue?Le(Ue,St.dataFrameRowIndex):[],Mt=Me(ut,St,Je);gt(de(s.createElement(_e,{node:St,nodes:Ue}),ft,gt,Mt))},[Se,Ue,Le,gt,Fe,je]);return{onEdgeOpen:(0,s.useCallback)((ft,St)=>{if(!ve)return;const we=Le(ve,St.dataFrameRowIndex),qe=Me(we,St);gt(de(s.createElement(tt,{edge:St,edges:ve}),ft,gt,qe))},[ve,Le,gt]),onNodeOpen:mt,MenuComponent:Ge}}function de(Le,Ue,ve,Se){return s.createElement(q.x,{renderHeader:()=>Le,renderMenuItems:Se,onClose:()=>ve(void 0),x:Ue.pageX,y:Ue.pageY})}function Me(Le,Ue,ve){if(!(Le.length||ve?.length))return;const Se=st(Le);return()=>{let Fe=Se?.map((je,Ge)=>s.createElement(se.k,{key:`${je.label}${Ge}`,label:je.label},(je.items||[]).map(Ke(Ue))));return ve&&(Fe=[...ve.map(Ke(Ue)),...Fe]),Fe}}function Ke(Le){return function(ve){return s.createElement(ae.s,{key:ve.label,url:ve.url,label:ve.label,ariaLabel:ve.ariaLabel,onClick:ve.onClick?Se=>{Se?.ctrlKey||Se?.metaKey||Se?.shiftKey||(Se?.preventDefault(),Se?.stopPropagation(),ve.onClick?.(Le))}:void 0,target:"_self"})}}function st(Le){const Ue="Open in Explore",ve=Le.reduce((Se,Fe)=>{let je,Ge;return Fe.title.indexOf("/")!==-1?(je=Fe.title.split("/")[0],Ge=Fe.title.split("/")[1],Se[je]=Se[je]||[],Se[je].push({l:Fe,newTitle:Ge})):(Se[Ue]=Se[Ue]||[],Se[Ue].push({l:Fe})),Se},{});return Object.keys(ve).map(Se=>({label:Se,ariaLabel:Se,items:ve[Se].map(Fe=>({label:Fe.newTitle||Fe.l.title,ariaLabel:Fe.newTitle||Fe.l.title,url:Fe.l.href,onClick:Fe.l.onClick}))}))}function Ie({field:Le,index:Ue}){return s.createElement(Ve,{label:Le.config?.displayName||Le.name,value:(0,d.Ew)(Le.config,Le.values[Ue]||"")})}function Ve({label:Le,value:Ue}){const ve=(0,f.wW)(dt);return s.createElement("tr",null,s.createElement("td",{className:ve.label},Le,": "),s.createElement("td",{className:ve.value},Ue))}function _e({node:Le,nodes:Ue}){const ve=[];if(Ue){const Se=(0,d.F)(Ue);for(const Fe of[Se.title,Se.subTitle,Se.mainStat,Se.secondaryStat,...Se.details])Fe&&Fe.values[Le.dataFrameRowIndex]&&ve.push(s.createElement(Ie,{field:Fe,index:Le.dataFrameRowIndex}))}else Le.title&&ve.push(s.createElement(Ve,{label:"Title",value:Le.title})),Le.subTitle&&ve.push(s.createElement(Ve,{label:"Subtitle",value:Le.subTitle}));return s.createElement("table",{style:{width:"100%"}},s.createElement("tbody",null,ve))}function tt(Le){const Ue=Le.edge.dataFrameRowIndex,ve=(0,d.lr)(Le.edges),Se=ve.source?.values[Ue]||"",Fe=ve.target?.values[Ue]||"",je=[];Se&&Fe&&je.push(s.createElement(Ve,{key:"header-row",label:"Source \u2192 Target",value:`${Se} \u2192 ${Fe}`}));for(const Ge of[ve.mainStat,ve.secondaryStat,...ve.details])Ge&&Ge.values[Ue]&&je.push(s.createElement(Ie,{key:`field-row-${Ue}`,field:Ge,index:Ue}));return s.createElement("table",{style:{width:"100%"}},s.createElement("tbody",null,je))}const dt=Le=>({label:t.css`
      label: Label;
      line-height: 1.25;
      color: ${Le.colors.text.disabled};
      font-size: ${Le.typography.size.sm};
      font-weight: ${Le.typography.fontWeightMedium};
      padding-right: ${Le.spacing(1)};
    `,value:t.css`
      label: Value;
      font-size: ${Le.typography.size.sm};
      font-weight: ${Le.typography.fontWeightMedium};
      color: ${Le.colors.text.primary};
    `});var Oe=e(83272);function ye(Le,Ue,ve){const Se=(0,Oe.Z)(Le.gridLayout);let Fe;if(Se===!0&&!Le.gridLayout&&ve){const je=Ue.find(Ge=>Ge.id===ve);je&&(Fe={x:-je.x,y:-je.y})}return Fe}function Pe(Le){const[Ue,ve]=(0,s.useState)(),Se=(0,_.default)();return(0,s.useEffect)(()=>{Le&&(ve(Le),setTimeout(()=>{Se()&&ve(void 0)},500))},[Le,Se]),Ue}function be({scale:Le=1,bounds:Ue,focus:ve}={}){const Se=(0,_.default)(),Fe=(0,s.useRef)(!1),je=(0,s.useRef)(0),Ge=(0,s.useRef)(null),gt={x:0,y:0},mt=(0,s.useMemo)(()=>({right:Ue?-Ue.left:1/0,left:Ue?-Ue.right:-1/0,bottom:Ue?-Ue.top:-1/0,top:Ue?-Ue.bottom:1/0}),[Ue]),Ye=(0,s.useRef)(gt),ft=(0,s.useRef)(gt),St=(0,s.useRef)(gt),[we,qe]=(0,s.useState)({isPanning:!1,position:gt});(0,s.useEffect)(()=>{const Mt=Ft=>{!Fe.current&&Se()&&(Fe.current=!0,Ye.current=ze(Ft),ft.current={...St.current},qe(Kt=>({...Kt,isPanning:!0})),fn())},Wt=()=>{Fe.current&&Se()&&(Fe.current=!1,qe(Ft=>({...Ft,isPanning:!1})),pn())},ln=Ft=>{Mt(Ft),An(Ft)},fn=()=>{document.addEventListener("mousemove",An),document.addEventListener("mouseup",Wt),document.addEventListener("touchmove",An),document.addEventListener("touchend",Wt)},pn=()=>{document.removeEventListener("mousemove",An),document.removeEventListener("mouseup",Wt),document.removeEventListener("touchmove",An),document.removeEventListener("touchend",Wt)},An=Ft=>{cancelAnimationFrame(je.current);const Kt=ze(Ft);je.current=requestAnimationFrame(()=>{if(Se()&&Ge.current){let Lt=Kt.x-Ye.current.x,Ut=Kt.y-Ye.current.y;St.current={x:Be(ft.current.x+Lt/Le,mt.left,mt.right),y:Be(ft.current.y+Ut/Le,mt.top,mt.bottom)},qe(Rt=>({...Rt,position:{...St.current}}))}})},Ot=Ge.current;return Ot&&(Ot.addEventListener("mousedown",ln),Ot.addEventListener("touchstart",ln)),()=>{Ot&&(Ot.removeEventListener("mousedown",ln),Ot.removeEventListener("touchstart",ln))}},[Le,mt,Se]);const Je=(0,Oe.Z)(ve);(0,s.useEffect)(()=>{if(ve&&Je?.x!==ve.x&&Je?.y!==ve.y){const Mt={x:Be(ve.x,mt.left,mt.right),y:Be(ve.y,mt.top,mt.bottom)};qe({position:Mt,isPanning:!1}),St.current=Mt,ft.current=Mt}},[ve,Je,mt,St,ft]);let ut=we.position;return ve&&Je?.x!==ve.x&&Je?.y!==ve.y&&(ut=ve),{state:{...we,position:{x:Be(ut.x,mt.left,mt.right),y:Be(ut.y,mt.top,mt.bottom)}},ref:Ge}}function Be(Le,Ue,ve){return Math.min(Math.max(Le,Ue??-1/0),ve??1/0)}function ze(Le){if(Le.changedTouches){const Ue=Le;return{x:Ue.changedTouches[0].clientX,y:Ue.changedTouches[0].clientY}}else{const Ue=Le;return{x:Ue.clientX,y:Ue.clientY}}}const lt={stepDown:Le=>Le/1.5,stepUp:Le=>Le*1.5,min:.13,max:2.25};function ht({stepUp:Le,stepDown:Ue,min:ve,max:Se}=lt){const Fe=(0,s.useRef)(null),[je,Ge]=(0,s.useState)(1),gt=(0,s.useCallback)(()=>{je<(Se??1/0)&&Ge(Le(je))},[je,Le,Se]),mt=(0,s.useCallback)(()=>{je>(ve??-1/0)&&Ge(Ue(je))},[je,Ue,ve]),Ye=(0,s.useCallback)(function(ft){if(ft.ctrlKey||ft.metaKey){if(ft.preventDefault(),Ge(Math.min(Math.max(ve??-1/0,je+Math.min(ft.deltaY,2)*-.01),Se??1/0)),ft.deltaY<0){const St=je+Math.max(ft.deltaY,-4)*-.015;Ge(Math.max(ve??-1/0,St))}else if(ft.deltaY>0){const St=je+Math.min(ft.deltaY,4)*-.015;Ge(Math.min(Se??1/0,St))}}},[ve,Se,je]);return(0,s.useEffect)(()=>{if(!Fe.current)return;const ft=Fe.current;return ft.addEventListener("wheel",Ye,{passive:!1}),()=>{ft&&ft.removeEventListener("wheel",Ye)}},[Ye]),{onStepUp:gt,onStepDown:mt,scale:Math.max(Math.min(je,Se??1/0),ve??-1/0),isMax:je>=(Se??1/0),isMin:je<=(ve??-1/0),ref:Fe}}const vt=Le=>({wrapper:t.css`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:t.css`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:t.css`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${Le.typography.h4.fontSize};
    color: ${Le.colors.text.secondary};
  `,mainGroup:t.css`
    label: mainGroup;
    will-change: transform;
  `,viewControls:t.css`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:t.css`
    label: legend;
    background: ${Le.colors.background.secondary};
    box-shadow: ${Le.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:t.css`
    margin-left: auto;
  `,alert:t.css`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${Le.shape.borderRadius()};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${Le.colors.warning.main};
    color: ${Le.colors.warning.contrastText};
  `,loadingWrapper:t.css`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),bt=200;function ct({getLinks:Le,dataFrames:Ue,nodeLimit:ve}){const Se=ve||bt,{edges:Fe,nodes:je}=(0,me.Y)(Ue),[Ge,{width:gt,height:mt}]=(0,i.Z)(),[Ye,ft]=(0,s.useState)(ge),St=je[0],we=Fe[0],qe=(0,s.useMemo)(()=>(0,d.HB)(St,we),[we,St]),{nodeHover:Je,setNodeHover:ut,clearNodeHover:Mt,edgeHover:Wt,setEdgeHover:ln,clearEdgeHover:fn}=Qe(),[pn,An]=(0,s.useState)([]);(0,s.useEffect)(()=>{let xa=[];Je?xa=(0,d.uX)(qe.nodes,qe.edges,Je):Wt&&(xa=(0,d.MP)(qe.nodes,qe.edges,Wt)),An(xa)},[Je,Wt,qe]);const[Ot,Ft]=(0,s.useState)(),Kt=(0,s.useCallback)((xa,Wa)=>Ft(Wa.node.id),[Ft]),{nodes:Lt,edges:Ut,markers:Rt,bounds:$t,hiddenNodesCount:_t,loading:jt}=ne(qe.nodes,qe.edges,Ye,Se,gt,Ot),an=ye(Ye,Lt,Ot),{panRef:cn,zoomRef:rn,onStepUp:hn,onStepDown:Dn,isPanning:Rn,position:ea,scale:Fn,isMaxZoom:Vn,isMinZoom:aa}=Ze($t,an),{onEdgeOpen:Sa,onNodeOpen:la,MenuComponent:Yn}=pe(Le,St,we,Ye,ft,Ft),ia=(0,f.wW)(vt),Ia=(0,s.useCallback)(xa=>{Ge(xa),rn.current=xa},[Ge,rn]),ha=Pe(Ot);return s.createElement("div",{ref:Ia,className:ia.wrapper},jt?s.createElement("div",{className:ia.loadingWrapper},"Computing layout\xA0",s.createElement(u.$,null)):null,Ue.length&&qe.nodes.length?s.createElement("svg",{ref:cn,viewBox:`${-(gt/2)} ${-(mt/2)} ${gt} ${mt}`,className:c()(ia.svg,Rn&&ia.svgPanning)},s.createElement("g",{className:ia.mainGroup,style:{transform:`scale(${Fn}) translate(${Math.floor(ea.x)}px, ${Math.floor(ea.y)}px)`}},s.createElement(m,null),!Ye.gridLayout&&s.createElement(Ce,{edges:Ut,nodeHoveringId:Je,edgeHoveringId:Wt,onClick:Sa,onMouseEnter:ln,onMouseLeave:fn}),s.createElement(Pt,{nodes:Lt,onMouseEnter:ut,onMouseLeave:Mt,onClick:la,hoveringIds:pn||[ha]}),s.createElement(ie,{markers:Rt||[],onClick:Kt}),!Ye.gridLayout&&s.createElement(Ne,{edges:Ut,nodeHoveringId:Je,edgeHoveringId:Wt}))):s.createElement("div",{className:ia.noDataMsg},"No data"),s.createElement("div",{className:ia.viewControls},Lt.length?s.createElement("div",{className:ia.legend},s.createElement(a,{sortable:Ye.gridLayout,nodes:Lt,sort:Ye.sort,onSort:xa=>{ft({...Ye,sort:xa})}})):null,s.createElement("div",{className:ia.viewControlsWrapper},s.createElement(j,{config:Ye,onConfigChange:xa=>{xa.gridLayout!==Ye.gridLayout&&Ft(void 0),ft(xa)},onMinus:Dn,onPlus:hn,scale:Fn,disableZoomIn:Vn,disableZoomOut:aa}))),_t>0&&s.createElement("div",{className:ia.alert,"aria-label":"Nodes hidden warning"},s.createElement(r.J,{size:"sm",name:"info-circle"})," ",_t," nodes are hidden for performance reasons."),Yn)}const Pt=(0,s.memo)(function(Ue){return s.createElement(s.Fragment,null,Ue.nodes.map(ve=>s.createElement(U,{key:ve.id,node:ve,onMouseEnter:Ue.onMouseEnter,onMouseLeave:Ue.onMouseLeave,onClick:Ue.onClick,hovering:!Ue.hoveringIds||Ue.hoveringIds.length===0?"default":Ue.hoveringIds?.includes(ve.id)?"active":"inactive"})))}),ie=(0,s.memo)(function(Ue){return s.createElement(s.Fragment,null,Ue.markers.map(ve=>s.createElement(M,{key:"marker-"+ve.node.id,marker:ve,onClick:Ue.onClick})))}),Ce=(0,s.memo)(function(Ue){return s.createElement(s.Fragment,null,Ue.edges.map(ve=>s.createElement(o,{key:ve.id,edge:ve,hovering:ve.source.id===Ue.nodeHoveringId||ve.target.id===Ue.nodeHoveringId||Ue.edgeHoveringId===ve.id,onClick:Ue.onClick,onMouseEnter:Ue.onMouseEnter,onMouseLeave:Ue.onMouseLeave})))}),Ne=(0,s.memo)(function(Ue){return s.createElement(s.Fragment,null,Ue.edges.map((ve,Se)=>{const Fe=ve.source.id===Ue.nodeHoveringId||ve.target.id===Ue.nodeHoveringId||Ue.edgeHoveringId===ve.id,je=ve.mainStat||ve.secondaryStat;return Fe&&je&&s.createElement(p,{key:ve.id,edge:ve})}))});function Ze(Le,Ue){const{scale:ve,onStepDown:Se,onStepUp:Fe,ref:je,isMax:Ge,isMin:gt}=ht(),{state:mt,ref:Ye}=be({scale:ve,bounds:Le,focus:Ue}),{position:ft,isPanning:St}=mt;return{zoomRef:je,panRef:Ye,position:ft,isPanning:St,scale:ve,onStepDown:Se,onStepUp:Fe,isMaxZoom:Ge,isMinZoom:gt}}function Qe(){const[Le,Ue]=(0,s.useState)(void 0),ve=(0,s.useCallback)(()=>Ue(void 0),[Ue]),[Se,Fe]=(0,s.useState)(void 0),je=(0,s.useCallback)(()=>Fe(void 0),[Fe]);return{nodeHover:Le,setNodeHover:Ue,clearNodeHover:ve,edgeHover:Se,setEdgeHover:Fe,clearEdgeHover:je}}},85506:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>n});var t=e(66111);function n(c){return(0,t.useMemo)(()=>c.reduce((s,i)=>(i.fields.filter(u=>u.name==="source").length?s.edges.push(i):s.nodes.push(i),s),{edges:[],nodes:[]}),[c])}},68545:(Y,T,e)=>{"use strict";e.d(T,{Ee:()=>x,Ew:()=>v,F:()=>f,HB:()=>d,MP:()=>b,Tz:()=>D,dM:()=>i,lr:()=>u,uX:()=>R});var t=e(5109),n=e(92468),c=e(99098),s=e(53768);function i(S,O){const U=S.x2-S.x1,I=S.y2-S.y1,F=Math.sqrt(U*U+I*I),w=Math.max((F-O)/F,0),K=U*w,L=I*w,V=U-K,H=I-L,j=S.x1+V/2,A=S.y1+H/2;return{x1:j,y1:A,x2:j+K,y2:A+L}}function f(S){const O={...S,fields:S.fields.map(I=>({...I,name:I.name.toLowerCase()}))},U=new t.N(O);return{id:U.getFieldByName(n.z.id.toLowerCase()),title:U.getFieldByName(n.z.title.toLowerCase()),subTitle:U.getFieldByName(n.z.subTitle.toLowerCase()),mainStat:U.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:U.getFieldByName(n.z.secondaryStat.toLowerCase()),arc:r(S,n.z.arc),details:r(S,n.z.detail),color:U.getFieldByName(n.z.color),icon:U.getFieldByName(n.z.icon)}}function u(S){const O={...S,fields:S.fields.map(I=>({...I,name:I.name.toLowerCase()}))},U=new t.N(O);return{id:U.getFieldByName(n.z.id.toLowerCase()),source:U.getFieldByName(n.z.source.toLowerCase()),target:U.getFieldByName(n.z.target.toLowerCase()),mainStat:U.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:U.getFieldByName(n.z.secondaryStat.toLowerCase()),details:r(S,n.z.detail.toLowerCase())}}function r(S,O){return S.fields.filter(U=>U.name.match(new RegExp("^"+O)))}function d(S,O){if(!(O||S))return{nodes:[],edges:[]};if(S){const U=f(S);if(!U.id)throw new Error("id field is required for nodes data frame.");const I={};for(let w=0;w<U.id.values.length;w++){const K=U.id.values[w];I[K]=y(K,U,w)}let F=O?o(O,u(O)):[];for(const w of F)I[w.target].incoming++;return{nodes:Object.values(I),edges:F,legend:U.arc.map(w=>({color:w.config.color?.fixedColor??"",name:w.config.displayName||w.name}))}}else{O=O;const U={},I=u(O);let F=o(O,I);for(let K=0;K<F.length;K++){const L=F[K],{source:V,target:H}=p(I,K);U[H.id]=U[H.id]||H,U[V.id]=U[V.id]||V,m(I.mainStat)&&(U[H.id].mainStatNumeric=(U[H.id].mainStatNumeric??0)+I.mainStat.values[K]),m(I.secondaryStat)&&(U[H.id].secondaryStatNumeric=(U[H.id].secondaryStatNumeric??0)+I.secondaryStat.values[K]),U[L.target].incoming++}return{nodes:l(U,I),edges:F}}}function o(S,O){if(!O.id)throw new Error("id field is required for edges data frame.");return O.id.values.map((U,I)=>{const F=O.target?.values[I],w=O.source?.values[I];return{id:U,dataFrameRowIndex:I,source:w,target:F,mainStat:O.mainStat?v(O.mainStat.config,O.mainStat.values[I]):"",secondaryStat:O.secondaryStat?v(O.secondaryStat.config,O.secondaryStat.values[I]):""}})}function m(S){return S&&S.type===c.fS.number}function l(S,O){const U=[],I=[],F=m(O.secondaryStat)?{...O.secondaryStat,values:U}:void 0,w=m(O.mainStat)?{...O.mainStat,values:I}:void 0;return Object.values(S).map((K,L)=>{if(w||F){const V={...K};return w&&(V.mainStat=w,I.push(K.mainStatNumeric),V.dataFrameRowIndex=L),F&&(V.secondaryStat=F,U.push(K.secondaryStatNumeric),V.dataFrameRowIndex=L),V}return K})}function p(S,O){const U=S.target?.values[O],I=S.source?.values[O];return{target:g(U,O),source:g(I,O)}}function g(S,O){return{id:S,title:S,subTitle:"",dataFrameRowIndex:O,incoming:0,arcSections:[]}}function y(S,O,U){return{id:S,title:O.title?.values[U]||"",subTitle:O.subTitle?.values[U]||"",dataFrameRowIndex:U,incoming:0,mainStat:O.mainStat,secondaryStat:O.secondaryStat,arcSections:O.arc,color:O.color,icon:O.icon?.values[U]||""}}function v(S,O){if(typeof O=="string")return O;{const U=S.decimals||2;return Number.isFinite(O)?O.toFixed(U)+(S.unit?" "+S.unit:""):""}}function E(S){const O=C();for(let U=0;U<S;U++)O.add(h(U));return O}function h(S){return{id:S.toString(),title:`service:${S}`,subtitle:"service",arc__success:.5,arc__errors:.5,mainstat:.1,secondarystat:2,color:.5,icon:"database"}}function C(){const S={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.title]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.subTitle]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.arc+"success"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"green"}}},[NodeGraphDataFrameFieldNames.arc+"errors"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"red"}}},[NodeGraphDataFrameFieldNames.color]:{values:[],type:FieldType.number,config:{color:{mode:"continuous-GrYlRd"}}},[NodeGraphDataFrameFieldNames.icon]:{values:[],type:FieldType.string}};return new MutableDataFrame({name:"nodes",fields:Object.keys(S).map(O=>({...S[O],name:O}))})}function a(S){const O=P();for(const U of S)O.add({id:U.source+"--"+U.target,...U});return O}function P(){const S={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.source]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.target]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number}};return new MutableDataFrame({name:"edges",fields:Object.keys(S).map(O=>({...S[O],name:O}))})}function D(S){if(S.length===0)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const O=S.reduce((F,w)=>(w.x>F.right&&(F.right=w.x),w.x<F.left&&(F.left=w.x),w.y>F.bottom&&(F.bottom=w.y),w.y<F.top&&(F.top=w.y),F),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),U=O.top+(O.bottom-O.top)/2,I=O.left+(O.right-O.left)/2;return{...O,center:{x:I,y:U}}}function x(S,O){let U=S.filter(I=>!!(I.meta?.preferredVisualisationType==="nodeGraph"||I.name==="nodes"||I.name==="edges"||I.refId==="nodes"||I.refId==="edges"||new t.N(I).getFieldByName(n.z.id)));return O&&(U=M(U,O)),U}const M=(S,O)=>S.map(U=>{if(new t.N(U).getFieldByName(n.z.source.toLowerCase())){if(O?.edges?.mainStatUnit){const F=U.fields.find(w=>w.name.toLowerCase()===n.z.mainStat);F&&(F.config={...F.config,unit:O.edges.mainStatUnit})}if(O?.edges?.secondaryStatUnit){const F=U.fields.find(w=>w.name.toLowerCase()===n.z.secondaryStat);F&&(F.config={...F.config,unit:O.edges.secondaryStatUnit})}}else{if(O?.nodes?.mainStatUnit){const F=U.fields.find(w=>w.name.toLowerCase()===n.z.mainStat);F&&(F.config={...F.config,unit:O.nodes.mainStatUnit})}if(O?.nodes?.secondaryStatUnit){const F=U.fields.find(w=>w.name.toLowerCase()===n.z.secondaryStat);F&&(F.config={...F.config,unit:O.nodes.secondaryStatUnit})}if(O?.nodes?.arcs?.length)for(const F of O.nodes.arcs){const w=U.fields.find(K=>K.name.toLowerCase()===F.field);w&&F.color&&(w.config={...w.config,color:{fixedColor:F.color,mode:s.S.Fixed}})}}return U}),b=(S,O,U)=>{const I=O.find(F=>F.id===U);return I?[...new Set(S.filter(F=>I.source===F.id||I.target===F.id).map(F=>F.id))]:[]},R=(S,O,U)=>{const I=S.find(F=>F.id===U);if(I){const F=O.filter(w=>w.source===I.id||w.target===I.id);return[...new Set(F.flatMap(w=>S.filter(K=>w.source===K.id||w.target===K.id).map(K=>K.id)))]}return[]}},30383:(Y,T,e)=>{"use strict";e.d(T,{h:()=>u,j:()=>f});var t=e(30779),n=e(33750),c=e(30471),s=e(79086),i=e(40538);function f(r,d=!0){const o=["Value options"];r.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:o,defaultValue:!1}),r.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:o,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:m=>m.reduceOptions.values===!0}),r.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:o,editor:t.S.get("stats-picker").editor,defaultValue:[n.gz.lastNotNull],showIf:m=>m.reduceOptions.values===!1}),d&&r.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:o,settings:{allowCustomValue:!0,options:[],getOptions:async m=>{const l=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(m&&m.data)for(const p of m.data)for(const g of p.fields){const y=(0,c.CZ)(g,p,m.data),v=`/^${(0,s.GE)(y)}$/`;l.push({value:v,label:y})}return Promise.resolve(l)}},defaultValue:""})}function u(r,d){r.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:d,settings:{options:[{value:i.wm.Auto,label:"Auto"},{value:i.wm.Horizontal,label:"Horizontal"},{value:i.wm.Vertical,label:"Vertical"}]},defaultValue:i.wm.Auto})}},98967:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{plugin:()=>P});var t=e(36873),n=e(40538),c=e(25272),s=e(50954),i=e(53768);const f=(D,x,M)=>{const b=(0,s.ZH)(D,x,M);if(M.angular&&(x==="singlestat"||x==="grafana-singlestat-panel")){const R=M.angular;if(b.graphMode=n.IG.None,R.sparkline&&R.sparkline.show&&(b.graphMode=n.IG.Area),R.colorBackground)b.colorMode=n.pc.Background;else if(R.colorValue)b.colorMode=n.pc.Value;else if(b.colorMode=n.pc.None,R.sparkline?.lineColor&&b.graphMode===n.IG.Area){const S=D.fieldConfig??{};S.defaults.color={mode:i.S.Fixed,fixedColor:R.sparkline.lineColor},D.fieldConfig=S}R.valueName==="name"&&(b.textMode=n.jG.Name)}return b};var u=e(82897),r=e(66111),d=e(99098),o=e(92156),m=e(76095),l=e(57426),p=e(18543),g=e(4387),y=e(47694);class v extends r.PureComponent{constructor(){super(...arguments),this.renderComponent=(x,M)=>{const{timeRange:b,options:R}=this.props,{value:S,alignmentFactors:O,width:U,height:I,count:F,orientation:w}=x,{openMenu:K,targetClassName:L}=M;let V=S.sparkline;return V&&(V.timeRange=b),r.createElement(l.w6,{value:S.display,count:F,sparkline:V,colorMode:R.colorMode,graphMode:R.graphMode,justifyMode:R.justifyMode,textMode:this.getTextMode(),alignmentFactors:O,parentOrientation:w,text:R.text,width:U,height:I,theme:y.vc.theme2,onClick:K,className:L})},this.renderValue=x=>{const{value:M}=x,{getLinks:b,hasLinks:R}=M;return R&&b?r.createElement(p.V,{links:b},S=>this.renderComponent(x,S)):this.renderComponent(x,{})},this.getValues=()=>{const{data:x,options:M,replaceVariables:b,fieldConfig:R,timeZone:S}=this.props;let O;for(let U of x.series)for(let I of U.fields){let{config:F}=I;if(I.type===d.fS.number){if(I.state?.range)continue;!O&&(!(0,u.isNumber)(F.min)||!(0,u.isNumber)(F.max))&&(O=(0,m.Xu)(x.series));const w=F.min??O.min,K=F.max??O.max;I.state=I.state??{},I.state.range={min:w,max:K,delta:K-w}}}return(0,o.nG)({fieldConfig:R,reduceOptions:M.reduceOptions,replaceVariables:b,theme:y.vc.theme2,data:x.series,sparkline:M.graphMode!==n.IG.None,timeZone:S})}}getTextMode(){const{options:x,fieldConfig:M,title:b}=this.props;return x.textMode===n.jG.Auto&&(M.defaults.displayName||!b)?n.jG.ValueAndName:x.textMode}render(){const{height:x,options:M,width:b,data:R,renderCounter:S}=this.props;return r.createElement(g.Q,{getValues:this.getValues,getAlignmentFactors:o.sg,renderValue:this.renderValue,width:b,height:x,source:R,itemSpacing:3,renderCounter:S,autoGrid:!0,orientation:M.orientation})}}var E=e(30383);const h={colorMode:n.pc.Value,graphMode:n.IG.Area,justifyMode:n.ap.Auto,textMode:n.jG.Auto};var C=e(26410);class a{getSuggestionsForData(x){const{dataSummary:M}=x;if(!M.hasData)return;const b=x.getListAppender({name:C.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:R=>{R.options.reduceOptions.values&&(R.options.reduceOptions.limit=1)}}});M.hasStringField&&M.hasNumberField&&M.frameCount===1&&M.rowCountTotal<10&&(b.append({name:C.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),b.append({name:C.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.Background}})),M.stringFieldCount===1&&M.frameCount===1&&M.rowCountTotal<10&&M.fieldCount===1&&b.append({name:C.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.None}}),M.hasNumberField&&M.hasTimeField&&(b.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),b.append({name:C.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:n.IG.None,colorMode:n.pc.Background}}))}}const P=new t.c(v).useFieldConfig().setPanelOptions(D=>{const x=["Stat styles"];(0,E.j)(D),(0,E.h)(D,x),c.Z(D),D.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:x,settings:{options:[{value:n.jG.Auto,label:"Auto"},{value:n.jG.Value,label:"Value"},{value:n.jG.ValueAndName,label:"Value and name"},{value:n.jG.Name,label:"Name"},{value:n.jG.None,label:"None"}]},defaultValue:h.textMode}),D.addSelect({path:"colorMode",name:"Color mode",defaultValue:n.pc.Value,category:x,settings:{options:[{value:n.pc.None,label:"None"},{value:n.pc.Value,label:"Value"},{value:n.pc.Background,label:"Background Gradient"},{value:n.pc.BackgroundSolid,label:"Background Solid"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:x,defaultValue:h.graphMode,settings:{options:[{value:n.IG.None,label:"None"},{value:n.IG.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:h.justifyMode,category:x,settings:{options:[{value:n.ap.Auto,label:"Auto"},{value:n.ap.Center,label:"Center"}]}})}).setNoPadding().setPanelChangeHandler(f).setSuggestionsSupplier(new a).setMigrationHandler(s.rD)},66683:(Y,T,e)=>{"use strict";e.d(T,{j:()=>d});var t=e(66111),n=e(52081),c=e(2594),s=e(8581),i=e(8180);const f=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],u=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(m=>({label:m,value:m})),r=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(m=>({label:m,value:m})),d=({value:m,onChange:l})=>{const p=(0,t.useMemo)(()=>m?.fill==="dash"?u:r,[m]),g=(0,t.useMemo)(()=>{if(!m?.dash?.length)return p[0];const y=m.dash?.join(", "),v=p.find(E=>E.value===y);return v||{label:y,value:y}},[m,p]);return t.createElement(n.Lh,null,t.createElement(c.S,{value:m?.fill||"solid",options:f,onChange:y=>{let v;y==="dot"?v=o(r[0].value):y==="dash"&&(v=o(u[0].value)),l({...m,fill:y,dash:v})}}),m?.fill&&m?.fill!=="solid"&&t.createElement(t.Fragment,null,t.createElement(s.Ph,{allowCustomValue:!0,options:p,value:g,width:20,onChange:y=>{l({...m,dash:o(y.value??"")})},formatCreateLabel:y=>`Segments: ${o(y).join(", ")}`}),t.createElement("div",null,"\xA0",t.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},t.createElement(i.h,{name:"question-circle"})))))};function o(m){const l=[];for(const p of m.split(/(?:,| )+/)){const g=Number.parseInt(p,10);isNaN(g)||l.push(g)}return l}},49616:(Y,T,e)=>{"use strict";e.d(T,{c:()=>u});var t=e(66111),n=e(47891),c=e(52081),s=e(2594),i=e(46967);const f=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],u=({value:r,onChange:d})=>{const o=typeof r=="number",m=o?n.secondsToHms(r/1e3):void 0;f[2].value=o?r:36e5;const l=y=>{let v=!1;if(y)try{v=n.intervalToSeconds(y)*1e3}catch(E){console.warn("ERROR",E)}d(v)},p=y=>{y.key==="Enter"&&l(y.target.value)},g=y=>{l(y.target.value)};return t.createElement(c.Lh,null,t.createElement(s.S,{value:r,options:f,onChange:d}),o&&t.createElement(i.I,{autoFocus:!1,placeholder:"never",width:10,defaultValue:m,onKeyDown:p,onBlur:g,prefix:t.createElement("div",null,"<"),spellCheck:!1}))}},74855:(Y,T,e)=>{"use strict";e.d(T,{F:()=>c});var t=e(66111),n=e(8581);const c=({item:s,value:i,onChange:f,id:u})=>{const r=(0,t.useCallback)(d=>{f({mode:d.value})},[f]);return t.createElement(n.Ph,{inputId:u,value:i.mode,options:s.settings.options,onChange:r})}},56703:(Y,T,e)=>{"use strict";e.d(T,{F:()=>y,r:()=>p});var t=e(3947),n=e(53768),c=e(99098),s=e(72293),i=e(40538),f=e(26372),u=e(22110),r=e(34315),d=e(91511),o=e(66683),m=e(49616),l=e(74855);const p={drawStyle:i.l8.Line,lineInterpolation:i.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:i.FI.None,barAlignment:i.pu.Center,stacking:{mode:i.o0.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1},g=["Graph styles"];function y(v){return{standardOptions:{[t.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:n.S.PaletteClassic}}},useCustomConfig:E=>{E.addRadio({path:"drawStyle",name:"Style",category:g,defaultValue:v.drawStyle,settings:{options:f.q.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:g,defaultValue:v.lineInterpolation,settings:{options:f.q.lineInterpolation},showIf:h=>h.drawStyle===i.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:g,defaultValue:v.barAlignment,settings:{options:f.q.barAlignment},showIf:h=>h.drawStyle===i.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:g,defaultValue:v.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:h=>h.drawStyle!==i.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:g,defaultValue:v.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:h=>h.drawStyle!==i.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:g,defaultValue:f.q.fillGradient[0].value,settings:{options:f.q.fillGradient},showIf:h=>h.drawStyle!==i.l8.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:g,hideFromDefaults:!0,settings:{filter:h=>h.type===c.fS.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:g,showIf:h=>h.drawStyle===i.l8.Line,editor:o.j,override:o.j,process:s.kG,shouldApply:h=>h.type===c.fS.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:g,defaultValue:!1,editor:m.c,override:m.c,showIf:h=>h.drawStyle===i.l8.Line,shouldApply:h=>h.type!==c.fS.time,process:s.kG}).addRadio({path:"showPoints",name:"Show points",category:g,defaultValue:f.q.showPoints[0].value,settings:{options:f.q.showPoints},showIf:h=>h.drawStyle!==i.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:g,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:h=>h.showPoints!==i.Jp.Never||h.drawStyle===i.l8.Points}),u.V(E,v.stacking,g),E.addSelect({category:g,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:i.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:i.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),r.r(E,v),d.B(E),E.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:i.i3.Off},settings:{options:f.q.thresholdsDisplayModes},editor:l.F,override:l.F,process:s.kG,shouldApply:()=>!0})}}}},63073:()=>{"use strict";let Y=window.matchMedia;window.matchMedia=T=>{let e=Y(T);return e.addEventListener||(e.addEventListener=(t,n)=>{e.addListener(n)},e.removeEventListener=(t,n)=>{e.removeListener(n)}),e}},3153:(Y,T,e)=>{"use strict";e.d(T,{PQ:()=>c,WI:()=>i,h:()=>n,y0:()=>s});var t=e(7240);let n;function c(f){n=f}function s(){return!n||!n.getState?{templating:{...t.qM,lastKey:"key"}}:n.getState()}function i(f){if(!(!n||!n.getState))return n.dispatch(f)}},73757:(Y,T,e)=>{"use strict";e.d(T,{pC:()=>u,B5:()=>n,V5:()=>c,bf:()=>s,n8:()=>i,hw:()=>t,BL:()=>d,vT:()=>o,eL:()=>m});var t=(l=>(l[l.Admin=4]="Admin",l[l.Editor=2]="Editor",l[l.Member=0]="Member",l[l.Viewer=1]="Viewer",l))(t||{}),n=(l=>(l.Viewer="Viewer",l.Editor="Editor",l.Admin="Admin",l))(n||{}),c=(l=>(l[l.View=1]="View",l[l.Edit=2]="Edit",l[l.Admin=4]="Admin",l))(c||{}),s=(l=>(l.View="View",l.Edit="Edit",l.Admin="Admin",l))(s||{}),i=(l=>(l.Folder="dash-folder",l.Dashboard="dash-db",l.AlertFolder="dash-folder-alerting",l))(i||{}),f=(l=>(l[l.Query=1]="Query",l[l.Admin=2]="Admin",l))(f||{}),u=(l=>(l.Team="Team",l.User="User",l.Viewer="Viewer",l.Editor="Editor",l))(u||{});const r=[{value:1,label:"Query",description:"Can query data source."}],d=[{value:"Team",label:"Team"},{value:"User",label:"User"},{value:"Viewer",label:"Everyone With Viewer Role"},{value:"Editor",label:"Everyone With Editor Role"}],o=[{value:1,label:"View",description:"Can view dashboards."},{value:2,label:"Edit",description:"Can add, edit and delete dashboards."},{value:4,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}],m=[{value:t.Member,label:"Member",description:"Is team member"},{value:t.Admin,label:"Admin",description:"Can add/remove permissions, members and delete team."}]},20352:()=>{"use strict"},47622:()=>{"use strict"},18285:()=>{"use strict"},56968:()=>{"use strict"},45984:(Y,T,e)=>{"use strict";e.d(T,{Dn:()=>D,Eb:()=>C,GL:()=>u,GT:()=>p,Im:()=>v,Jd:()=>M,OW:()=>x,QI:()=>h,Qt:()=>E,RB:()=>R,VJ:()=>P,Wj:()=>o,Xw:()=>d,Yr:()=>O,_B:()=>m,_z:()=>g,hS:()=>l,le:()=>a,nq:()=>i,p8:()=>y,pO:()=>r,xF:()=>S,xt:()=>f,z:()=>b});var t=e(84336),n=e(55391);const c=(0,t.X)("ds-request-response"),s=(0,t.X)("ds-request-error"),i=(0,t.X)("template-variable-value-updated"),f=(0,t.X)("graph-click"),u=(0,t.X)("threshold-changed");class r extends n.m{}r.type="panel-queries-changed";class d extends n.m{}d.type="panel-transformations-changed";class o extends n.m{}o.type="panels-options-changed";class m extends n.m{}m.type="dashboard-panels-changed";class l extends n.m{}l.type="dashboard-meta-changed";class p extends n.m{}p.type="panel-directive-ready";class g extends n.m{}g.type="render";class y extends n.R{}y.type="zoom-out";var v=(U=>(U[U.Left=-1]="Left",U[U.Right=1]="Right",U))(v||{});class E extends n.R{}E.type="shift-time";class h extends n.m{}h.type="absolute-time";class C extends n.R{}C.type="remove-panel";class a extends n.R{}a.type="show-modal";class P extends n.R{}P.type="show-confirm-modal";class D extends n.R{}D.type="show-react-modal";class x extends n.m{}x.type="hide-modal";class M extends n.m{}M.type="dashboard-saved";class b extends n.R{}b.type="annotation-query-started";class R extends n.R{}R.type="annotation-query-finished";class S extends n.R{}S.type="panel-edit-started";class O extends n.R{}O.type="panel-edit-finished"},3032:(Y,T,e)=>{"use strict";e.d(T,{Kd:()=>t,f0:()=>n,zN:()=>s,zQ:()=>c});var t=(i=>(i.left="left",i.right="right",i))(t||{});const n=["lines","bars","points","stacked_lines","stacked_bars"];var c=(i=>(i.table="table",i.raw="raw",i))(c||{});const s=["table","raw"]},59784:()=>{"use strict"},27876:(Y,T,e)=>{"use strict";e.d(T,{AccessControlAction:()=>x,AppNotificationSeverity:()=>y,AppNotificationTimeout:()=>v,CoreEvents:()=>M,DashboardInitPhase:()=>f,DashboardRoutes:()=>i,EXPLORE_GRAPH_STYLES:()=>h.f0,ExploreId:()=>h.Kd,KioskMode:()=>u,OrgRole:()=>r.B5,PermissionLevelString:()=>r.bf,SearchQueryType:()=>r.n8,ServiceAccountStateFilter:()=>m,TABLE_RESULTS_STYLE:()=>h.zQ,TeamPermissionLevel:()=>r.hw,createAsyncThunk:()=>C.hg,teamsPermissionLevels:()=>r.eL,timeoutMap:()=>E,useDispatch:()=>C.I0,useSelector:()=>C.v9});var t=e(28317),n=e(20352),c=e(88391),s=e(59784),i=(b=>(b.Home="home-dashboard",b.New="new-dashboard",b.Normal="normal-dashboard",b.Path="path-dashboard",b.Scripted="scripted-dashboard",b.Public="public-dashboard",b))(i||{}),f=(b=>(b.NotStarted="Not started",b.Fetching="Fetching",b.Services="Services",b.Failed="Failed",b.Completed="Completed",b))(f||{}),u=(b=>(b.TV="tv",b.Full="full",b))(u||{}),r=e(73757),d=e(47622),o=e(26945),m=(b=>(b.All="All",b.WithExpiredTokens="WithExpiredTokens",b.Disabled="Disabled",b))(m||{}),l=e(56968),p=e(89040),g=e(81146),y=(b=>(b.Success="success",b.Warning="warning",b.Error="error",b.Info="info",b))(y||{}),v=(b=>(b[b.Success=3e3]="Success",b[b.Warning=5e3]="Warning",b[b.Error=7e3]="Error",b))(v||{});const E={success:3e3,warning:5e3,error:7e3,info:3e3};var h=e(3032),C=e(29633),a=e(51904),P=e(18285),D=e(49400),x=(b=>(b.UsersRead="users:read",b.UsersWrite="users:write",b.UsersAuthTokenList="users.authtoken:read",b.UsersAuthTokenUpdate="users.authtoken:write",b.UsersPasswordUpdate="users.password:write",b.UsersDelete="users:delete",b.UsersCreate="users:create",b.UsersEnable="users:enable",b.UsersDisable="users:disable",b.UsersPermissionsUpdate="users.permissions:write",b.UsersLogout="users:logout",b.UsersQuotasList="users.quotas:read",b.UsersQuotasUpdate="users.quotas:write",b.ServiceAccountsRead="serviceaccounts:read",b.ServiceAccountsCreate="serviceaccounts:create",b.ServiceAccountsWrite="serviceaccounts:write",b.ServiceAccountsDelete="serviceaccounts:delete",b.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",b.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",b.OrgsRead="orgs:read",b.OrgsPreferencesRead="orgs.preferences:read",b.OrgsWrite="orgs:write",b.OrgsPreferencesWrite="orgs.preferences:write",b.OrgsCreate="orgs:create",b.OrgsDelete="orgs:delete",b.OrgUsersRead="org.users:read",b.OrgUsersAdd="org.users:add",b.OrgUsersRemove="org.users:remove",b.OrgUsersWrite="org.users:write",b.LDAPUsersRead="ldap.user:read",b.LDAPUsersSync="ldap.user:sync",b.LDAPStatusRead="ldap.status:read",b.DataSourcesExplore="datasources:explore",b.DataSourcesRead="datasources:read",b.DataSourcesCreate="datasources:create",b.DataSourcesWrite="datasources:write",b.DataSourcesDelete="datasources:delete",b.DataSourcesPermissionsRead="datasources.permissions:read",b.DataSourcesCachingRead="datasources.caching:read",b.DataSourcesInsightsRead="datasources.insights:read",b.ActionServerStatsRead="server.stats:read",b.ActionTeamsCreate="teams:create",b.ActionTeamsDelete="teams:delete",b.ActionTeamsRead="teams:read",b.ActionTeamsWrite="teams:write",b.ActionTeamsPermissionsRead="teams.permissions:read",b.ActionTeamsPermissionsWrite="teams.permissions:write",b.ActionRolesList="roles:read",b.ActionTeamsRolesList="teams.roles:read",b.ActionTeamsRolesAdd="teams.roles:add",b.ActionTeamsRolesRemove="teams.roles:remove",b.ActionUserRolesList="users.roles:read",b.ActionUserRolesAdd="users.roles:add",b.ActionUserRolesRemove="users.roles:remove",b.DashboardsRead="dashboards:read",b.DashboardsWrite="dashboards:write",b.DashboardsDelete="dashboards:delete",b.DashboardsCreate="dashboards:create",b.DashboardsPermissionsRead="dashboards.permissions:read",b.DashboardsPermissionsWrite="dashboards.permissions:write",b.DashboardsPublicWrite="dashboards.public:write",b.FoldersRead="folders:read",b.FoldersWrite="folders:write",b.FoldersDelete="folders:delete",b.FoldersCreate="folders:create",b.FoldersPermissionsRead="folders.permissions:read",b.FoldersPermissionsWrite="folders.permissions:write",b.ActionSupportBundlesCreate="support.bundles:create",b.ActionSupportBundlesRead="support.bundles:read",b.ActionSupportBundlesDelete="support.bundles:delete",b.AlertingRuleCreate="alert.rules:create",b.AlertingRuleRead="alert.rules:read",b.AlertingRuleUpdate="alert.rules:write",b.AlertingRuleDelete="alert.rules:delete",b.AlertingInstanceCreate="alert.instances:create",b.AlertingInstanceUpdate="alert.instances:write",b.AlertingInstanceRead="alert.instances:read",b.AlertingNotificationsRead="alert.notifications:read",b.AlertingNotificationsWrite="alert.notifications:write",b.AlertingRuleExternalWrite="alert.rules.external:write",b.AlertingRuleExternalRead="alert.rules.external:read",b.AlertingInstancesExternalWrite="alert.instances.external:write",b.AlertingInstancesExternalRead="alert.instances.external:read",b.AlertingNotificationsExternalWrite="alert.notifications.external:write",b.AlertingNotificationsExternalRead="alert.notifications.external:read",b.AlertingProvisioningRead="alert.provisioning:read",b.AlertingProvisioningWrite="alert.provisioning:write",b.ActionAPIKeysRead="apikeys:read",b.ActionAPIKeysCreate="apikeys:create",b.ActionAPIKeysDelete="apikeys:delete",b.PluginsInstall="plugins:install",b.PluginsWrite="plugins:write",b.SettingsRead="settings:read",b.SettingsWrite="settings:write",b))(x||{}),M=e(45984)},51904:()=>{"use strict"},88391:()=>{"use strict"},81146:()=>{"use strict"},89040:()=>{"use strict"},49400:()=>{"use strict"},29633:(Y,T,e)=>{"use strict";e.d(T,{I0:()=>c,hg:()=>i,v9:()=>s});var t=e(62992),n=e(67948);const c=n.useDispatch,s=n.useSelector,i=(f,u,r)=>(0,t.hg)(f,u,r)},26410:(Y,T,e)=>{"use strict";e.d(T,{y:()=>t});var t=(n=>(n.LineChart="Line chart",n.LineChartSmooth="Line chart smooth",n.LineChartGradientColorScheme="Line chart with gradient color scheme",n.AreaChart="Area chart",n.AreaChartStacked="Area chart stacked",n.AreaChartStackedPercent="Area chart 100% stacked",n.BarChart="Bar chart",n.BarChartGradientColorScheme="Bar chart with gradient color scheme",n.BarChartStacked="Bar chart stacked",n.BarChartStackedPercent="Bar chart 100% stacked",n.BarChartHorizontal="Bar chart horizontal",n.BarChartHorizontalStacked="Bar chart horizontal stacked",n.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",n.Candlestick="Candlestick",n.PieChart="Pie chart",n.PieChartDonut="Pie chart donut",n.Stat="Stat",n.StatColoredBackground="Stat colored background",n.Gauge="Gauge",n.GaugeNoThresholds="Gauge no thresholds",n.BarGaugeBasic="Bar gauge basic",n.BarGaugeLCD="Bar gauge LCD",n.Table="Table",n.StateTimeline="State timeline",n.StatusHistory="Status history",n.TextPanel="Text",n.DashboardList="Dashboard list",n.Logs="Logs",n))(t||{})},28317:()=>{"use strict"},46063:(Y,T,e)=>{"use strict";e.d(T,{ED:()=>f,I9:()=>c,T8:()=>r,Yb:()=>s,bj:()=>n,g0:()=>d,pz:()=>u,x_:()=>t});var t=(o=>(o.Firing="firing",o.Inactive="inactive",o.Pending="pending",o))(t||{}),n=(o=>(o.Normal="Normal",o.Alerting="Alerting",o.Pending="Pending",o.NoData="NoData",o.Error="Error",o))(n||{});function c(o){return Object.values(t).includes(o)}function s(o){return Object.values(n).some(m=>m===o)}function i(o){return o!==null&&typeof o<"u"&&!Object.values(t).includes(o)}function f(o){return i(o)?o.split(" ")[0]:o}var u=(o=>(o.Alerting="alerting",o.Recording="recording",o))(u||{}),r=(o=>(o.Cortex="Cortex",o.Mimir="Mimir",o.Prometheus="Prometheus",o.Thanos="Thanos",o))(r||{}),d=(o=>(o.Alerting="Alerting",o.NoData="NoData",o.KeepLastState="KeepLastState",o.OK="OK",o.Error="Error",o))(d||{})},43055:(Y,T,e)=>{"use strict";e.d(T,{P:()=>s,j:()=>n});var t=e(46063);function n(i,f){return(0,t.ED)(i.state)===f}var c=(i=>(i.Firing="firing",i))(c||{}),s=(i=>(i.Alerting="alerting",i.Pending="pending",i.Normal="inactive",i.NoData="nodata",i.Error="error",i))(s||{})},26945:()=>{"use strict"},23932:Y=>{const T="    ";function e(s){let i="";return s&&Object.keys(s).forEach(function(f){i+=f+":"+s[f]+";"}),i}function t(s){function i(u){return'class="'+u+'"'}function f(u){return'style="'+e(s["."+u])+'"'}return s?f:i}function n(s){return s===null?"null":Array.isArray(s)?"array":typeof s=="string"&&/^https?:/.test(s)?"link":typeof s=="object"&&typeof s.toISOString=="function"?"date":typeof s}function c(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}Y.exports=function(s,i){let f="";const u=t(i);let r=function(o,m,l,p){if(!o.length)return m+" "+l;let g=m+`
`;return f+=T,o.forEach(function(y,v){g+=f+p(y)+(v<o.length-1?",":"")+`
`}),f=f.slice(0,-T.length),g+f+l};function d(o){if(o===void 0)return"";switch(n(o)){case"boolean":return"<span "+u("json-markup-bool")+">"+o+"</span>";case"number":return"<span "+u("json-markup-number")+">"+o+"</span>";case"date":return'<span class="json-markup-string">"'+c(o.toISOString())+'"</span>';case"null":return"<span "+u("json-markup-null")+">null</span>";case"string":return"<span "+u("json-markup-string")+'>"'+c(o.replace(/\n/g,`
`+f))+'"</span>';case"link":return"<span "+u("json-markup-string")+'>"<a href="'+encodeURI(o)+'">'+c(o)+'</a>"</span>';case"array":return r(o,"[","]",d);case"object":const m=Object.keys(o).filter(function(l){return o[l]!==void 0});return r(m,"{","}",function(l){return"<span "+u("json-markup-key")+'>"'+c(l)+'":</span> '+d(o[l])})}return""}return"<div "+u("json-markup")+">"+d(s)+"</div>"}},26189:()=>{(function(Y){var T={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(t){var n={x:-1,y:-1,locked:!1};t.setCrosshair=function(f){if(!f)n.x=-1;else{var u=t.p2c(f);n.x=Math.max(0,Math.min(u.left,t.width())),n.y=Math.max(0,Math.min(u.top,t.height()))}t.triggerRedrawOverlay()},t.clearCrosshair=t.setCrosshair,t.lockCrosshair=function(f){f&&t.setCrosshair(f),n.locked=!0},t.unlockCrosshair=function(){n.locked=!1};function c(i){n.locked||n.x!=-1&&(n.x=-1,t.triggerRedrawOverlay())}function s(i){if(!n.locked){if(t.getSelection&&t.getSelection()){n.x=-1;return}var f=t.offset();n.x=Math.max(0,Math.min(i.pageX-f.left,t.width())),n.y=Math.max(0,Math.min(i.pageY-f.top,t.height())),t.triggerRedrawOverlay()}}t.hooks.bindEvents.push(function(i,f){i.getOptions().crosshair.mode&&(f.mouseout(c),f.mousemove(s))}),t.hooks.drawOverlay.push(function(i,f){var u=i.getOptions().crosshair;if(u.mode){var r=i.getPlotOffset();if(f.save(),f.translate(r.left,r.top),n.x!=-1){var d=i.getOptions().crosshair.lineWidth%2?.5:0;if(f.strokeStyle=u.color,f.lineWidth=u.lineWidth,f.lineJoin="round",f.beginPath(),u.mode.indexOf("x")!=-1){var o=Math.floor(n.x)+d;f.moveTo(o,0),f.lineTo(o,i.height())}if(u.mode.indexOf("y")!=-1){var m=Math.floor(n.y)+d;f.moveTo(0,m),f.lineTo(i.width(),m)}f.stroke()}f.restore()}}),t.hooks.shutdown.push(function(i,f){f.unbind("mouseout",c),f.unbind("mousemove",s)})}Y.plot.plugins.push({init:e,options:T,name:"crosshair",version:"1.0"})})(jQuery)},47825:()=>{(function(Y){function T(e){e.hooks.processDatapoints.push(function(t,n,c){n.dashes.show&&t.hooks.draw.push(function(s,i){var f=s.getPlotOffset(),u=n.xaxis,r=n.yaxis;function d(p,g){var y=c.points,v=c.pointsize,E=null,h=null,C=0,a=!0,P,D;n.dashes.dashLength[0]?(P=n.dashes.dashLength[0],n.dashes.dashLength[1]?D=n.dashes.dashLength[1]:D=P):D=P=n.dashes.dashLength,i.beginPath();for(var x=v;x<y.length;x+=v){let L=function(V){var H=Math.sqrt(Math.pow(I-O,2)+Math.pow(F-U,2));if(H<=V)return{deltaX:I-O,deltaY:F-U,distance:H,remainder:V-H};var j=I>O?1:-1,A=F>U?1:-1;return{deltaX:j*Math.sqrt(Math.pow(V,2)/(1+Math.pow((F-U)/(I-O),2))),deltaY:A*Math.sqrt(Math.pow(V,2)-Math.pow(V,2)/(1+Math.pow((F-U)/(I-O),2))),distance:V,remainder:0}};var K=L,M=y[x-v],b=y[x-v+1],R=y[x],S=y[x+1];if(!(M==null||R==null)){if(b<=S&&b<r.min){if(S<r.min)continue;M=(r.min-b)/(S-b)*(R-M)+M,b=r.min}else if(S<=b&&S<r.min){if(b<r.min)continue;R=(r.min-b)/(S-b)*(R-M)+M,S=r.min}if(b>=S&&b>r.max){if(S>r.max)continue;M=(r.max-b)/(S-b)*(R-M)+M,b=r.max}else if(S>=b&&S>r.max){if(b>r.max)continue;R=(r.max-b)/(S-b)*(R-M)+M,S=r.max}if(M<=R&&M<u.min){if(R<u.min)continue;b=(u.min-M)/(R-M)*(S-b)+b,M=u.min}else if(R<=M&&R<u.min){if(M<u.min)continue;S=(u.min-M)/(R-M)*(S-b)+b,R=u.min}if(M>=R&&M>u.max){if(R>u.max)continue;b=(u.max-M)/(R-M)*(S-b)+b,M=u.max}else if(R>=M&&R>u.max){if(M>u.max)continue;S=(u.max-M)/(R-M)*(S-b)+b,R=u.max}(M!=E||b!=h)&&i.moveTo(u.p2c(M)+p,r.p2c(b)+g);var O=u.p2c(M)+p,U=r.p2c(b)+g,I=u.p2c(R)+p,F=r.p2c(S)+g,w;do w=L(C>0?C:a?P:D),(w.deltaX!=0||w.deltaY!=0)&&(a?i.lineTo(O+w.deltaX,U+w.deltaY):i.moveTo(O+w.deltaX,U+w.deltaY)),a=!a,C=w.remainder,O+=w.deltaX,U+=w.deltaY;while(w.distance>0);E=R,h=S}}i.stroke()}i.save(),i.translate(f.left,f.top),i.lineJoin="round";var o=n.dashes.lineWidth,m=n.shadowSize;if(o>0&&m>0){i.lineWidth=m,i.strokeStyle="rgba(0,0,0,0.1)";var l=Math.PI/18;d(Math.sin(l)*(o/2+m/2),Math.cos(l)*(o/2+m/2)),i.lineWidth=m/2,d(Math.sin(l)*(o/2+m/4),Math.cos(l)*(o/2+m/4))}i.lineWidth=o,i.strokeStyle=n.color,o>0&&d(0,0),i.restore()})})}Y.plot.plugins.push({init:T,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},28844:()=>{(function(Y){"use strict";var T={series:{fillBelowTo:null}};function e(t){function n(i,f){var u;for(u=0;u<f.length;++u)if(f[u].id===i.fillBelowTo)return f[u];return null}function c(i,f,u,r,d,o,m,l){var p,g,y,v,E,h;return p=u-i,g=r-f,y=m-d,v=l-o,E=(-g*(i-d)+p*(f-o))/(-y*g+p*v),h=(y*(f-o)-v*(i-d))/(-y*g+p*v),E>=0&&E<=1&&h>=0&&h<=1?[i+h*p,f+h*g]:null}function s(i,f,u){if(u.fillBelowTo===null)return;var r,d,o,m,l,p,g;function y(D,x){f.beginPath(),f.moveTo(u.xaxis.p2c(D)+p.left,u.yaxis.p2c(x)+p.top)}function v(){f.closePath(),f.fill()}function E(){if(o.length/d!==l.length/m)return console.error("Refusing to graph inconsistent number of points"),!1;var D;for(D=0;D<o.length/d;D++)if(o[D*d]!==null&&l[D*m]!==null&&o[D*d]!==l[D*m])return console.error("Refusing to graph points without matching value"),!1;return!0}function h(D,x){console.assert(x>D,"expects the end index to be greater than the start index");var M=D===0||o[D-1]===null||l[D-1]===null,b=!1,R,S;for(R=D;R<x;R++)if(o[R*d+1]===null||l[R*d+1]===null)b=!1,M=!0;else if(o[R*d+1]===l[R*m+1])b=!0,M=!1;else if(o[R*d+1]>l[R*m+1]){M?y(o[R*d],o[R*d+1]):b?y(o[(R-1)*d],o[(R-1)*d+1]):(S=C(R),y(S[0],S[1])),P(R,x);return}else M=!1,b=!1}function C(D){console.assert(D>0,"expects the second point in the series line segment");var x,M;for(x=1;x<l.length/m;x++)if(M=c(o[(D-1)*d],o[(D-1)*d+1],o[D*d],o[D*d+1],l[(x-1)*m],l[(x-1)*m+1],l[x*m],l[x*m+1]),M!==null)return M;console.error("intersectionPoint() should only be called when an intersection happens")}function a(D,x){console.assert(D>=x,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M;for(M=D;M>=x;M--)f.lineTo(r.xaxis.p2c(l[M*m])+p.left,r.yaxis.p2c(l[M*m+1])+p.top);v()}function P(D,x){console.assert(D<=x,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M,b;for(M=D;M<x;M++)if(o[M*d+1]===null&&M>D){a(M-1,D),h(M,x);return}else if(o[M*d+1]===l[M*m+1]){a(M,D),h(M,x);return}else if(o[M*d+1]<l[M*m+1]){b=C(M),f.lineTo(u.xaxis.p2c(b[0])+p.left,u.yaxis.p2c(b[1])+p.top),a(M,D),h(M,x);return}else f.lineTo(u.xaxis.p2c(o[M*d])+p.left,u.yaxis.p2c(o[M*d+1])+p.top);a(x,D)}r=n(u,i.getData()),r&&(d=u.datapoints.pointsize,o=u.datapoints.points,m=r.datapoints.pointsize,l=r.datapoints.points,p=i.getPlotOffset(),E()&&(g=Y.color.parse(u.color),g.a=.4,g.normalize(),f.fillStyle=g.toString(),h(0,o.length/d)))}t.hooks.drawSeries.push(s)}Y.plot.plugins.push({init:e,options:T,name:"fillbelow",version:"0.1.0"})})(jQuery)},7540:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(Y){var T=function(){var u,r,d,o,m,l,p=function(D,x){u=x,r=D.getPlaceholder(),d=D.getOptions(),o=d.series.gauges,m=D.getData(),l=e(o.debug)};p.prototype.calculateLayout=function(){var D=r.width(),x=r.height(),M=Math.min(m.length,o.layout.columns),b=Math.ceil(m.length/M),R=o.layout.margin,S=o.layout.hMargin,O=o.layout.vMargin,U=(D-R*2-S*(M-1))/M,I=(x-R*2-O*(b-1))/b;if(o.layout.square){var F=Math.min(U,I);U=F,I=F}g(o,U);var w=o.cell.margin,K=0,L=0;o.label.show&&(K=o.label.margin,L=o.label.font.size);var V=0,H=0;o.value.show&&(V=o.value.margin,H=o.value.font.size);var j=0;o.threshold.show&&(j=o.threshold.width);var A=0,_=0;o.threshold.label.show&&(A=o.threshold.label.margin,_=o.threshold.label.font.size);for(var k=U/2-w-j-A*2-_,Q=o.gauge.startAngle,re=o.gauge.endAngle,Z=(re-Q)/100,oe=-1,G=Q;G<re;G+=Z)oe=Math.max(oe,Math.sin(c(G)));oe=Math.max(oe,Math.sin(c(re)));var le=(I-w*2-K*2-L)/(1+oe);le*oe<V+H/2&&(le=I-w*2-K*2-L-V-H/2);var ge=le-A*2-_-j,ne=Math.min(k,ge),ue=o.gauge.width;ue>=ne&&(ue=Math.max(3,ne/3));var te=A*2+_+j+ne,me=Math.max(te*(1+oe),te+V+H/2);return{canvasWidth:D,canvasHeight:x,margin:R,hMargin:S,vMargin:O,columns:M,rows:b,cellWidth:U,cellHeight:I,cellMargin:w,labelMargin:K,labelFontSize:L,valueMargin:V,valueFontSize:H,width:ue,radius:ne,thresholdWidth:j,thresholdLabelMargin:A,thresholdLabelFontSize:_,gaugeOuterHeight:me}};function g(D,x){D.gauge.width==="auto"&&(D.gauge.width=Math.max(5,x/8)),D.label.margin==="auto"&&(D.label.margin=Math.max(1,x/20)),D.label.font.size==="auto"&&(D.label.font.size=Math.max(5,x/8)),D.value.margin==="auto"&&(D.value.margin=Math.max(1,x/30)),D.value.font.size==="auto"&&(D.value.font.size=Math.max(5,x/9)),D.threshold.width==="auto"&&(D.threshold.width=Math.max(3,x/100)),D.threshold.label.margin==="auto"&&(D.threshold.label.margin=Math.max(3,x/40)),D.threshold.label.font.size==="auto"&&(D.threshold.label.font.size=Math.max(5,x/15))}p.prototype.calculateAutoValues=g,p.prototype.calculateCellLayout=function(D,x,M){var b=t(x.columns,M),R=n(x.columns,M),S=x.margin+(x.cellWidth+x.hMargin)*b,O=x.margin+(x.cellHeight+x.vMargin)*R,U=S+x.cellWidth/2,I=O+x.cellMargin+x.labelMargin*2+x.labelFontSize+x.thresholdWidth+x.thresholdLabelFontSize+x.thresholdLabelMargin*2+x.radius,F=x.cellHeight-x.cellMargin*2-x.labelMargin*2-x.labelFontSize-x.gaugeOuterHeight,w=0;return D.cell.vAlign==="middle"?w=F/2:D.cell.vAlign==="bottom"&&(w=F),I+=w,{col:b,row:R,x:S,y:O,offsetY:w,cellWidth:x.cellWidth,cellHeight:x.cellHeight,cellMargin:x.cellMargin,cx:U,cy:I}},p.prototype.drawBackground=function(D){o.frame.show&&(u.save(),u.strokeStyle=d.grid.borderColor,u.lineWidth=d.grid.borderWidth,u.strokeRect(0,0,D.canvasWidth,D.canvasHeight),d.grid.backgroundColor&&(u.fillStyle=d.grid.backgroundColor,u.fillRect(0,0,D.canvasWidth,D.canvasHeight)),u.restore())},p.prototype.drawCellBackground=function(D,x){u.save(),D.cell.border&&D.cell.border.show&&D.cell.border.color&&D.cell.border.width&&(u.strokeStyle=D.cell.border.color,u.lineWidth=D.cell.border.width,u.strokeRect(x.x,x.y,x.cellWidth,x.cellHeight)),D.cell.background&&D.cell.background.color&&(u.fillStyle=D.cell.background.color,u.fillRect(x.x,x.y,x.cellWidth,x.cellHeight)),u.restore()},p.prototype.drawGauge=function(D,x,M,b,R){var S=D.gauge.shadow.show?D.gauge.shadow.blur:0,O=E(D,R),U=y(D,x,R);C(M.cx,M.cy,x.radius,x.width,c(D.gauge.startAngle),c(D.gauge.endAngle),D.gauge.border.color,D.gauge.border.width,D.gauge.background.color,S),C(M.cx,M.cy,x.radius-1,x.width-2,c(U.a1),c(U.a2),O,1,O,S),D.gauge.neutralValue!=null&&v(D,x,M,O)};function y(D,x,M){let b={};var R=D.gauge.neutralValue;return R!=null?M<R?(b.a1=h(D,x,M),b.a2=h(D,x,R)):(b.a1=h(D,x,R),b.a2=h(D,x,M)):(b.a1=D.gauge.startAngle,b.a2=h(D,x,M)),b}function v(D,x,M,b){var R=(D.gauge.max-D.gauge.min)/600;s(u,M.cx,M.cy,x.radius-2,x.width-4,c(h(D,x,D.gauge.neutralValue-R)),c(h(D,x,D.gauge.neutralValue+R)),b,2,D.gauge.background.color)}function E(D,x){for(var M,b=0;b<D.threshold.values.length;b++){var R=D.threshold.values[b];if(M=R.color,x<R.value)break}return M}function h(D,x,M){var b=D.gauge.startAngle+(D.gauge.endAngle-D.gauge.startAngle)*((M-D.gauge.min)/(D.gauge.max-D.gauge.min));return b<D.gauge.startAngle?b=D.gauge.startAngle:b>D.gauge.endAngle&&(b=D.gauge.endAngle),b}p.prototype.drawThreshold=function(D,x,M){for(var b=D.gauge.startAngle,R=0;R<D.threshold.values.length;R++){var S=D.threshold.values[R];c1=S.color,a2=h(D,x,S.value),s(u,M.cx,M.cy,x.radius+x.thresholdWidth,x.thresholdWidth-2,c(b),c(a2),c1,1,c1),b=a2}};function C(D,x,M,b,R,S,O,U,I,F){R!==S&&(u.save(),s(u,D,x,M,b,R,S,O,U,I),F&&(s(u,D,x,M,b,R,S),u.clip(),u.shadowOffsetX=0,u.shadowOffsetY=0,u.shadowBlur=10,u.shadowColor="gray",s(u,D,x,M+1,b+2,R,S,O,1)),u.restore())}p.prototype.drawLable=function(D,x,M,b,R){P(M.cx,M.y+M.cellMargin+x.labelMargin+M.offsetY,"flotGaugeLabel"+b,D.label.formatter?D.label.formatter(R.label,R.data[0][1]):text,D.label)},p.prototype.drawValue=function(D,x,M,b,R){P(M.cx,M.cy-D.value.font.size/2,"flotGaugeValue"+b,D.value.formatter?D.value.formatter(R.label,R.data[0][1]):text,D.value)},p.prototype.drawThresholdValues=function(D,x,M,b){a(D,x,M,"Min"+b,D.gauge.min,D.gauge.startAngle),a(D,x,M,"Max"+b,D.gauge.max,D.gauge.endAngle);for(var R=0;R<D.threshold.values.length;R++){var S=D.threshold.values[R];if(S.value>D.gauge.min&&S.value<D.gauge.max){var O=h(D,x,S.value);a(D,x,M,b+"_"+R,S.value,O)}}var U=D.gauge.neutralValue;U!=null&&U>D.gauge.min&&U<D.gauge.max&&a(D,x,M,"Neutral"+b,U,h(D,x,U))};function a(D,x,M,b,R,S){P(M.cx+(x.thresholdLabelMargin+x.thresholdLabelFontSize/2+x.radius)*Math.cos(c(S)),M.cy+(x.thresholdLabelMargin+x.thresholdLabelFontSize/2+x.radius)*Math.sin(c(S)),"flotGaugeThresholdValue"+b,D.threshold.label.formatter?D.threshold.label.formatter(R):R,D.threshold.label,S)}function P(D,x,M,b,R,S){var O=Y(r).find("#"+M),U=O.length;U||(O=Y("<span></span>"),O.attr("id",M),O.attr("class","flot-temp-elem"),r.append(O)),O.css("position","absolute"),O.css("top",x+"px"),O.css("white-space","nowrap"),R.font.size&&O.css("font-size",R.font.size+"px"),R.font.family&&O.css("font-family",R.font.family),R.color&&O.css("color",R.color),R.background.color&&O.css("background-color",R.background.color),R.background.opacity&&O.css("opacity",R.background.opacity),O.text(b),O.css("left",D+"px"),O.css("left",parseInt(O.css("left"))-O.width()/2+"px"),!U&&S&&(O.css("top",parseInt(O.css("top"))-O.height()/2+"px"),O.css("transform","rotate("+(180*S+90)+"deg)"))}return p}();function e(u){return typeof Logger<"u"?new Logger(u):null}function t(u,r){return r%u}function n(u,r){return Math.floor(r/u)}function c(u){return u*Math.PI}function s(u,r,d,o,m,l,p,g,y,v){if(l!==p){var E=!1;u.save(),u.beginPath(),u.arc(r,d,o,l,p,E),u.lineTo(r+(o-m)*Math.cos(p),d+(o-m)*Math.sin(p)),u.arc(r,d,o-m,p,l,!E),u.closePath(),y&&(u.lineWidth=y),g&&(u.strokeStyle=g,u.stroke()),v&&(u.fillStyle=v,u.fill()),u.restore()}}function i(u){u.hooks.processOptions.push(function(r,d){var o=e(d.series.gauges.debug);d.series.gauges.show&&(d.grid.show=!1,d.legend.show=!1);var m=d.series.gauges.threshold.values;m.sort(function(l,p){return l.value<p.value?-1:l.value>p.value?1:0})}),u.hooks.draw.push(function(r,d){var o=r.getOptions(),m=o.series.gauges,l=e(m.debug);if(m.show){var p=r.getData();if(!(!p||!p.length)){var g=new T(r,d),y=g.calculateLayout();m.debug.layout,g.drawBackground(y);for(var v=0;v<p.length;v++){var E=p[v],h=Y.extend({},m,E.gauges);E.gauges&&g.calculateAutoValues(h,y.cellWidth);var C=g.calculateCellLayout(h,y,v);g.drawCellBackground(h,C),h.debug.layout,h.label.show&&g.drawLable(h,y,C,v,E),g.drawGauge(h,y,C,E.label,E.data[0][1]),h.threshold.show&&g.drawThreshold(h,y,C),h.threshold.label.show&&g.drawThresholdValues(h,y,C,v),h.value.show&&g.drawValue(h,y,C,v,E)}}}})}var f={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(u,r){return u}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(u,r){return parseInt(r)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(u){return u}},values:[]}}}};Y.plot.plugins.push({init:i,options:f,name:"gauge",version:"1.1.0"})})(jQuery)},89377:()=>{(function(Y){Y.color={},Y.color.make=function(e,t,n,c){var s={};return s.r=e||0,s.g=t||0,s.b=n||0,s.a=c??1,s.add=function(i,f){for(var u=0;u<i.length;++u)s[i.charAt(u)]+=f;return s.normalize()},s.scale=function(i,f){for(var u=0;u<i.length;++u)s[i.charAt(u)]*=f;return s.normalize()},s.toString=function(){return s.a>=1?"rgb("+[s.r,s.g,s.b].join(",")+")":"rgba("+[s.r,s.g,s.b,s.a].join(",")+")"},s.normalize=function(){function i(f,u,r){return u<f?f:u>r?r:u}return s.r=i(0,parseInt(s.r),255),s.g=i(0,parseInt(s.g),255),s.b=i(0,parseInt(s.b),255),s.a=i(0,s.a,1),s},s.clone=function(){return Y.color.make(s.r,s.b,s.g,s.a)},s.normalize()},Y.color.extract=function(e,t){var n;do{if(n=e.css(t).toLowerCase(),n!=""&&n!="transparent")break;e=e.parent()}while(e.length&&!Y.nodeName(e.get(0),"body"));return n=="rgba(0, 0, 0, 0)"&&(n="transparent"),Y.color.parse(n)},Y.color.parse=function(e){var t,n=Y.color.make;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55);if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55,parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return n(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return n(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var c=Y.trim(e).toLowerCase();return c=="transparent"?n(255,255,255,0):(t=T[c]||[0,0,0],n(t[0],t[1],t[2]))};var T={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(Y){var T=Object.prototype.hasOwnProperty;Y.fn.detach||(Y.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(c,s){var i=s.children("."+c)[0];if(i==null&&(i=document.createElement("canvas"),i.className=c,Y(i).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(s),!i.getContext))if(window.G_vmlCanvasManager)i=window.G_vmlCanvasManager.initElement(i);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=i;var f=this.context=i.getContext("2d"),u=window.devicePixelRatio||1,r=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1;this.pixelRatio=u/r,this.resize(s.width(),s.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(c,s){if(c<=0||s<=0)throw new Error("Invalid dimensions for plot, width = "+c+", height = "+s);var i=this.element,f=this.context,u=this.pixelRatio;this.width!=c&&(i.width=c*u,i.style.width=c+"px",this.width=c),this.height!=s&&(i.height=s*u,i.style.height=s+"px",this.height=s),f.restore(),f.save(),f.scale(u,u)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var c=this._textCache;for(var s in c)if(T.call(c,s)){var i=this.getTextLayer(s),f=c[s];i.hide();for(var u in f)if(T.call(f,u)){var r=f[u];for(var d in r)if(T.call(r,d)){for(var o=r[d].positions,m=0,l;l=o[m];m++)l.active?l.rendered||(i.append(l.element),l.rendered=!0):(o.splice(m--,1),l.rendered&&l.element.detach());o.length==0&&delete r[d]}}i.show()}},e.prototype.getTextLayer=function(c){var s=this.text[c];return s==null&&(this.textContainer==null&&(this.textContainer=Y("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),s=this.text[c]=Y("<div></div>").addClass(c).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),s},e.prototype.getTextInfo=function(c,s,i,f,u){var r,d,o,m;if(s=""+s,typeof i=="object"?r=i.style+" "+i.variant+" "+i.weight+" "+i.size+"px/"+i.lineHeight+"px "+i.family:r=i,d=this._textCache[c],d==null&&(d=this._textCache[c]={}),o=d[r],o==null&&(o=d[r]={}),m=o[s],m==null){var l=Y("<div></div>").html(s).css({position:"absolute","max-width":u,top:-9999}).appendTo(this.getTextLayer(c));typeof i=="object"?l.css({font:r,color:i.color}):typeof i=="string"&&l.addClass(i),m=o[s]={element:l,positions:[]};var p=this._textSizeCache[s];p?(m.width=p.width,m.height=p.height):(m.width=l.outerWidth(!0),m.height=l.outerHeight(!0),this._textSizeCache[s]={width:m.width,height:m.height}),l.detach()}return m},e.prototype.addText=function(c,s,i,f,u,r,d,o,m){var l=this.getTextInfo(c,f,u,r,d),p=l.positions;o=="center"?s-=l.width/2:o=="right"&&(s-=l.width),m=="middle"?i-=l.height/2:m=="bottom"&&(i-=l.height);for(var g=0,y;y=p[g];g++)if(y.x==s&&y.y==i){y.active=!0;return}y={active:!0,rendered:!1,element:p.length?l.element.clone():l.element,x:s,y:i},p.push(y),y.element.css({top:Math.round(i),left:Math.round(s),"text-align":o})},e.prototype.removeText=function(c,s,i,f,u,r){if(f==null){var d=this._textCache[c];if(d!=null){for(var o in d)if(T.call(d,o)){var m=d[o];for(var l in m)if(T.call(m,l))for(var p=m[l].positions,g=0,y;y=p[g];g++)y.active=!1}}}else for(var p=this.getTextInfo(c,f,u,r).positions,g=0,y;y=p[g];g++)y.x==s&&y.y==i&&(y.active=!1)};function t(c,s,i,f){var u=[],r={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},d=null,o=null,m=null,l=null,p=null,g=[],y=[],v={left:0,right:0,top:0,bottom:0},E=0,h=0,C={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},a=this;a.setData=M,a.setupGrid=Q,a.draw=ge,a.getPlaceholder=function(){return c},a.getCanvas=function(){return d.element},a.getPlotOffset=function(){return v},a.width=function(){return E},a.height=function(){return h},a.offset=function(){var ie=m.offset();return ie.left+=v.left,ie.top+=v.top,ie},a.getData=function(){return u},a.getAxes=function(){var ie={},Ce;return Y.each(g.concat(y),function(Ne,Ze){Ze&&(ie[Ze.direction+(Ze.n!=1?Ze.n:"")+"axis"]=Ze)}),ie},a.getXAxes=function(){return g},a.getYAxes=function(){return y},a.c2p=O,a.p2c=U,a.getOptions=function(){return r},a.highlight=lt,a.unhighlight=ht,a.triggerRedrawOverlay=Be,a.pointOffset=function(ie){return{left:parseInt(g[R(ie,"x")-1].p2c(+ie.x)+v.left,10),top:parseInt(y[R(ie,"y")-1].p2c(+ie.y)+v.top,10)}},a.shutdown=V,a.destroy=function(){V(),c.removeData("plot").empty(),u=[],r=null,d=null,o=null,m=null,l=null,p=null,g=[],y=[],C=null,Ie=[],a=null},a.resize=function(){var ie=c.width(),Ce=c.height();d.resize(ie,Ce),o.resize(ie,Ce)},a.hooks=C,D(a),x(i),K(),M(s),Q(),ge(),L();function P(ie,Ce){Ce=[a].concat(Ce);for(var Ne=0;Ne<ie.length;++Ne)ie[Ne].apply(this,Ce)}function D(){for(var ie={Canvas:e},Ce=0;Ce<f.length;++Ce){var Ne=f[Ce];Ne.init(a,ie),Ne.options&&Y.extend(!0,r,Ne.options)}}function x(ie){Y.extend(!0,r,ie),ie&&ie.colors&&(r.colors=ie.colors),r.xaxis.color==null&&(r.xaxis.color=Y.color.parse(r.grid.color).scale("a",.22).toString()),r.yaxis.color==null&&(r.yaxis.color=Y.color.parse(r.grid.color).scale("a",.22).toString()),r.xaxis.tickColor==null&&(r.xaxis.tickColor=r.grid.tickColor||r.xaxis.color),r.yaxis.tickColor==null&&(r.yaxis.tickColor=r.grid.tickColor||r.yaxis.color),r.grid.borderColor==null&&(r.grid.borderColor=r.grid.color),r.grid.tickColor==null&&(r.grid.tickColor=Y.color.parse(r.grid.color).scale("a",.22).toString());var Ce,Ne,Ze,Qe=c.css("font-size"),Le=Qe?+Qe.replace("px",""):13,Ue={style:c.css("font-style"),size:Math.round(.8*Le),variant:c.css("font-variant"),weight:c.css("font-weight"),family:c.css("font-family")};for(Ze=r.xaxes.length||1,Ce=0;Ce<Ze;++Ce)Ne=r.xaxes[Ce],Ne&&!Ne.tickColor&&(Ne.tickColor=Ne.color),Ne=Y.extend(!0,{},r.xaxis,Ne),r.xaxes[Ce]=Ne,Ne.font&&(Ne.font=Y.extend({},Ue,Ne.font),Ne.font.color||(Ne.font.color=Ne.color),Ne.font.lineHeight||(Ne.font.lineHeight=Math.round(Ne.font.size*1.15)));for(Ze=r.yaxes.length||1,Ce=0;Ce<Ze;++Ce)Ne=r.yaxes[Ce],Ne&&!Ne.tickColor&&(Ne.tickColor=Ne.color),Ne=Y.extend(!0,{},r.yaxis,Ne),r.yaxes[Ce]=Ne,Ne.font&&(Ne.font=Y.extend({},Ue,Ne.font),Ne.font.color||(Ne.font.color=Ne.color),Ne.font.lineHeight||(Ne.font.lineHeight=Math.round(Ne.font.size*1.15)));for(r.xaxis.noTicks&&r.xaxis.ticks==null&&(r.xaxis.ticks=r.xaxis.noTicks),r.yaxis.noTicks&&r.yaxis.ticks==null&&(r.yaxis.ticks=r.yaxis.noTicks),r.x2axis&&(r.xaxes[1]=Y.extend(!0,{},r.xaxis,r.x2axis),r.xaxes[1].position="top",r.x2axis.min==null&&(r.xaxes[1].min=null),r.x2axis.max==null&&(r.xaxes[1].max=null)),r.y2axis&&(r.yaxes[1]=Y.extend(!0,{},r.yaxis,r.y2axis),r.yaxes[1].position="right",r.y2axis.min==null&&(r.yaxes[1].min=null),r.y2axis.max==null&&(r.yaxes[1].max=null)),r.grid.coloredAreas&&(r.grid.markings=r.grid.coloredAreas),r.grid.coloredAreasColor&&(r.grid.markingsColor=r.grid.coloredAreasColor),r.lines&&Y.extend(!0,r.series.lines,r.lines),r.points&&Y.extend(!0,r.series.points,r.points),r.bars&&Y.extend(!0,r.series.bars,r.bars),r.shadowSize!=null&&(r.series.shadowSize=r.shadowSize),r.highlightColor!=null&&(r.series.highlightColor=r.highlightColor),Ce=0;Ce<r.xaxes.length;++Ce)I(g,Ce+1).options=r.xaxes[Ce];for(Ce=0;Ce<r.yaxes.length;++Ce)I(y,Ce+1).options=r.yaxes[Ce];for(var ve in C)r.hooks[ve]&&r.hooks[ve].length&&(C[ve]=C[ve].concat(r.hooks[ve]));P(C.processOptions,[r])}function M(ie){u=b(ie),F(),w()}function b(ie){for(var Ce=[],Ne=0;Ne<ie.length;++Ne){var Ze=Y.extend(!0,{},r.series);ie[Ne].data!=null?(Ze.data=ie[Ne].data,delete ie[Ne].data,Y.extend(!0,Ze,ie[Ne]),ie[Ne].data=Ze.data):Ze.data=ie[Ne],Ce.push(Ze)}return Ce}function R(ie,Ce){var Ne=ie[Ce+"axis"];return typeof Ne=="object"&&(Ne=Ne.n),typeof Ne!="number"&&(Ne=1),Ne}function S(){return Y.grep(g.concat(y),function(ie){return ie})}function O(ie){var Ce={},Ne,Ze;for(Ne=0;Ne<g.length;++Ne)Ze=g[Ne],Ze&&(Ce["x"+Ze.n]=Ze.c2p(ie.left));for(Ne=0;Ne<y.length;++Ne)Ze=y[Ne],Ze&&(Ce["y"+Ze.n]=Ze.c2p(ie.top));return Ce.x1!==void 0&&(Ce.x=Ce.x1),Ce.y1!==void 0&&(Ce.y=Ce.y1),Ce}function U(ie){var Ce={},Ne,Ze,Qe;for(Ne=0;Ne<g.length;++Ne)if(Ze=g[Ne],Ze&&Ze.used&&(Qe="x"+Ze.n,ie[Qe]==null&&Ze.n==1&&(Qe="x"),ie[Qe]!=null)){Ce.left=Ze.p2c(ie[Qe]);break}for(Ne=0;Ne<y.length;++Ne)if(Ze=y[Ne],Ze&&Ze.used&&(Qe="y"+Ze.n,ie[Qe]==null&&Ze.n==1&&(Qe="y"),ie[Qe]!=null)){Ce.top=Ze.p2c(ie[Qe]);break}return Ce}function I(ie,Ce){return ie[Ce-1]||(ie[Ce-1]={n:Ce,direction:ie==g?"x":"y",options:Y.extend(!0,{},ie==g?r.xaxis:r.yaxis)}),ie[Ce-1]}function F(){var ie=u.length,Ce=-1,Ne;for(Ne=0;Ne<u.length;++Ne){var Ze=u[Ne].color;Ze!=null&&(ie--,typeof Ze=="number"&&Ze>Ce&&(Ce=Ze))}ie<=Ce&&(ie=Ce+1);var Qe,Le=[],Ue=r.colors,ve=Ue.length,Se=0;for(Ne=0;Ne<ie;Ne++)Qe=Y.color.parse(Ue[Ne%ve]||"#666"),Ne%ve==0&&Ne&&(Se>=0?Se<.5?Se=-Se-.2:Se=0:Se=-Se),Le[Ne]=Qe.scale("rgb",1+Se);var Fe=0,je;for(Ne=0;Ne<u.length;++Ne){if(je=u[Ne],je.color==null?(je.color=Le[Fe].toString(),++Fe):typeof je.color=="number"&&(je.color=Le[je.color].toString()),je.lines.show==null){var Ge,gt=!0;for(Ge in je)if(je[Ge]&&je[Ge].show){gt=!1;break}gt&&(je.lines.show=!0)}je.lines.zero==null&&(je.lines.zero=!!je.lines.fill),je.xaxis=I(g,R(je,"x")),je.yaxis=I(y,R(je,"y"))}}function w(){var ie=Number.POSITIVE_INFINITY,Ce=Number.NEGATIVE_INFINITY,Ne=Number.MAX_VALUE,Ze,Qe,Le,Ue,ve,Se,Fe,je,Ge,gt,mt,Ye,ft,St,we,qe;function Je(Ft,Kt,Lt){Kt<Ft.datamin&&Kt!=-Ne&&(Ft.datamin=Kt),Lt>Ft.datamax&&Lt!=Ne&&(Ft.datamax=Lt)}for(Y.each(S(),function(Ft,Kt){Kt.datamin=ie,Kt.datamax=Ce,Kt.used=!1}),Ze=0;Ze<u.length;++Ze)Se=u[Ze],Se.datapoints={points:[]},P(C.processRawData,[Se,Se.data,Se.datapoints]);for(Ze=0;Ze<u.length;++Ze){if(Se=u[Ze],we=Se.data,qe=Se.datapoints.format,!qe){if(qe=[],qe.push({x:!0,number:!0,required:!0}),qe.push({y:!0,number:!0,required:!0}),Se.stack||Se.bars.show||Se.lines.show&&Se.lines.fill){var ut=!!(Se.bars.show&&Se.bars.zero||Se.lines.show&&Se.lines.zero);qe.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:ut}),Se.bars.horizontal&&(delete qe[qe.length-1].y,qe[qe.length-1].x=!0)}Se.datapoints.format=qe}if(Se.datapoints.pointsize==null){Se.datapoints.pointsize=qe.length,je=Se.datapoints.pointsize,Fe=Se.datapoints.points;var Mt=Se.lines.show&&Se.lines.steps;for(Se.xaxis.used=Se.yaxis.used=!0,Qe=Le=0;Qe<we.length;++Qe,Le+=je){St=we[Qe];var Wt=St==null;if(!Wt)for(Ue=0;Ue<je;++Ue)Ye=St[Ue],ft=qe[Ue],ft&&(ft.number&&Ye!=null&&(Ye=+Ye,isNaN(Ye)?Ye=null:Ye==1/0?Ye=Ne:Ye==-1/0&&(Ye=-Ne)),Ye==null&&(ft.required&&(Wt=!0),ft.defaultValue!=null&&(Ye=ft.defaultValue))),Fe[Le+Ue]=Ye;if(Wt)for(Ue=0;Ue<je;++Ue)Ye=Fe[Le+Ue],Ye!=null&&(ft=qe[Ue],ft.autoscale!==!1&&(ft.x&&Je(Se.xaxis,Ye,Ye),ft.y&&Je(Se.yaxis,Ye,Ye))),Fe[Le+Ue]=null;if(Mt&&Le>0&&(!Wt||Fe[Le-je]!=null)){for(Ue=0;Ue<je;++Ue)Fe[Le+je+Ue]=Fe[Le+Ue];Fe[Le+1]=Fe[Le-je+1]||0,Wt&&(Fe[Le]=St[0]),Le+=je}}}}for(Ze=0;Ze<u.length;++Ze){if(Se=u[Ze],Fe=Se.datapoints.points,je=Se.datapoints.pointsize,Se.transform==="negative-Y")for(Qe=0;Qe<Fe.length;Qe+=je)Fe[Qe]!=null&&(Ye=Fe[Qe+1],Fe[Qe+1]=-Ye);P(C.processDatapoints,[Se,Se.datapoints])}for(Ze=0;Ze<u.length;++Ze){Se=u[Ze],Fe=Se.datapoints.points,je=Se.datapoints.pointsize,qe=Se.datapoints.format;var ln=ie,fn=ie,pn=Ce,An=Ce;for(Qe=0;Qe<Fe.length;Qe+=je)if(Fe[Qe]!=null)for(Ue=0;Ue<je;++Ue)Ye=Fe[Qe+Ue],ft=qe[Ue],!(!ft||ft.autoscale===!1||Ye==Ne||Ye==-Ne)&&(ft.x&&(Ye<ln&&(ln=Ye),Ye>pn&&(pn=Ye)),ft.y&&(Ye<fn&&(fn=Ye),Ye>An&&(An=Ye)));if(Se.bars.show){var Ot;switch(Se.bars.align){case"left":Ot=0;break;case"right":Ot=-Se.bars.barWidth;break;default:Ot=-Se.bars.barWidth/2}Se.bars.horizontal?(fn+=Ot,An+=Ot+Se.bars.barWidth):(ln+=Ot,pn+=Ot+Se.bars.barWidth)}Je(Se.xaxis,ln,pn),Je(Se.yaxis,fn,An)}Y.each(S(),function(Ft,Kt){Kt.datamin==ie&&(Kt.datamin=null),Kt.datamax==Ce&&(Kt.datamax=null)})}function K(){c.find(".flot-temp-elem").remove(),c.css("position")=="static"&&c.css("position","relative"),d=new e("flot-base",c),o=new e("flot-overlay",c),l=d.context,p=o.context,m=Y(o.element).unbind();var ie=c.data("plot");ie&&(ie.shutdown(),o.clear()),c.data("plot",a)}function L(){r.grid.hoverable&&(m.mousemove(tt),m.bind("mouseleave",dt),Y(document).bind("touchend",ye)),r.grid.clickable&&m.click(Oe),P(C.bindEvents,[m])}function V(){Ve&&clearTimeout(Ve),m.unbind("mousemove",tt),m.unbind("mouseleave",dt),m.unbind("click",Oe),Y(document).unbind("touchend",ye),P(C.shutdown,[m])}function H(ie){function Ce(Ue){return Ue}var Ne,Ze,Qe=ie.options.transform||Ce,Le=ie.options.inverseTransform;ie.direction=="x"?(Ne=ie.scale=E/Math.abs(Qe(ie.max)-Qe(ie.min)),Ze=Math.min(Qe(ie.max),Qe(ie.min))):(Ne=ie.scale=h/Math.abs(Qe(ie.max)-Qe(ie.min)),Ne=-Ne,Ze=Math.max(Qe(ie.max),Qe(ie.min))),Qe==Ce?ie.p2c=function(Ue){return(Ue-Ze)*Ne}:ie.p2c=function(Ue){return(Qe(Ue)-Ze)*Ne},Le?ie.c2p=function(Ue){return Le(Ze+Ue/Ne)}:ie.c2p=function(Ue){return Ze+Ue/Ne}}function j(ie){for(var Ce=ie.options,Ne=ie.ticks||[],Ze=Ce.labelWidth||0,Qe=Ce.labelHeight||0,Le=Ze||(ie.direction=="x"?Math.floor(d.width/(Ne.length||1)):null),Ue=ie.direction+"Axis "+ie.direction+ie.n+"Axis",ve="flot-"+ie.direction+"-axis flot-"+ie.direction+ie.n+"-axis "+Ue,Se=Ce.font||"flot-tick-label tickLabel",Fe=0;Fe<Ne.length;++Fe){var je=Ne[Fe];if(je.label){var Ge=d.getTextInfo(ve,je.label,Se,null,Le);Ze=Math.max(Ze,Ge.width+1),Qe=Math.max(Qe,Ge.height)}}ie.labelWidth=Ce.labelWidth||Ze,ie.labelHeight=Ce.labelHeight||Qe}function A(ie){var Ce=ie.labelWidth,Ne=ie.labelHeight,Ze=ie.options.position,Qe=ie.direction==="x",Le=ie.options.tickLength,Ue=r.grid.axisMargin,ve=r.grid.labelMargin,Se=r.grid.eventSectionHeight,Fe=!0,je=!0,Ge=!0,gt=!1;Y.each(Qe?g:y,function(mt,Ye){Ye&&(Ye.show||Ye.reserveSpace)&&(Ye===ie?gt=!0:Ye.options.position===Ze&&(gt?je=!1:Fe=!1),gt||(Ge=!1))}),je&&(Ue=0),Le==null&&(Le=Ge?"full":5),isNaN(+Le)||(ve+=+Le),Qe?(Ne+=ve,Ne+=Se,Ze=="bottom"?(v.bottom+=Ne+Ue,ie.box={top:d.height-v.bottom,height:Ne}):(ie.box={top:v.top+Ue,height:Ne},v.top+=Ne+Ue)):(Ce+=ve,Ze=="left"?(ie.box={left:v.left+Ue,width:Ce},v.left+=Ce+Ue):(v.right+=Ce+Ue,ie.box={left:d.width-v.right,width:Ce})),ie.position=Ze,ie.tickLength=Le,ie.box.padding=ve,ie.box.eventSectionPadding=Se,ie.innermost=Fe}function _(ie){ie.direction=="x"?(ie.box.left=v.left-ie.labelWidth/2,ie.box.width=d.width-v.left-v.right+ie.labelWidth):(ie.box.top=v.top-ie.labelHeight/2,ie.box.height=d.height-v.bottom-v.top+ie.labelHeight)}function k(){var ie=r.grid.minBorderMargin,Ce,Ne;if(ie==null)for(ie=0,Ne=0;Ne<u.length;++Ne)ie=Math.max(ie,2*(u[Ne].points.radius+u[Ne].points.lineWidth/2));var Ze={left:ie,right:ie,top:ie,bottom:ie};Y.each(S(),function(Qe,Le){Le.reserveSpace&&Le.ticks&&Le.ticks.length&&(Le.direction==="x"?(Ze.left=Math.max(Ze.left,Le.labelWidth/2),Ze.right=Math.max(Ze.right,Le.labelWidth/2)):(Ze.bottom=Math.max(Ze.bottom,Le.labelHeight/2),Ze.top=Math.max(Ze.top,Le.labelHeight/2)))}),v.left=Math.ceil(Math.max(Ze.left,v.left)),v.right=Math.ceil(Math.max(Ze.right,v.right)),v.top=Math.ceil(Math.max(Ze.top,v.top)),v.bottom=Math.ceil(Math.max(Ze.bottom,v.bottom))}function Q(){var ie,Ce=S(),Ne=r.grid.show;for(var Ze in v){var Qe=r.grid.margin||0;v[Ze]=typeof Qe=="number"?Qe:Qe[Ze]||0}P(C.processOffset,[v]);for(var Ze in v)typeof r.grid.borderWidth=="object"?v[Ze]+=Ne?r.grid.borderWidth[Ze]:0:v[Ze]+=Ne?r.grid.borderWidth:0;if(Y.each(Ce,function(ve,Se){var Fe=Se.options;Se.show=Fe.show==null?Se.used:Fe.show,Se.reserveSpace=Fe.reserveSpace==null?Se.show:Fe.reserveSpace,re(Se)}),P(C.processRange,[]),Ne){for(var Le=Y.grep(Ce,function(ve){return ve.show||ve.reserveSpace}),Ue=!1,ie=0;ie<2&&(Y.each(Le,function(Se,Fe){oe(Fe),G(Fe),Ue=le(Fe,Fe.ticks)||Ue,j(Fe)}),Ue&&C.processRange.length>0);ie++)P(C.processRange,[]),Ue=!1;for(ie=Le.length-1;ie>=0;--ie)A(Le[ie]);k(),Y.each(Le,function(ve,Se){_(Se)})}E=d.width-v.left-v.right,h=d.height-v.bottom-v.top,Y.each(Ce,function(ve,Se){H(Se)}),Ne&&me(),st()}function re(ie){var Ce=ie.options,Ne=+(Ce.min!=null?Ce.min:ie.datamin),Ze=+(Ce.max!=null?Ce.max:ie.datamax),Qe=Ze-Ne;if(Qe==0){var Le=.25,Ue=Math.abs(Ze==0?1:Ze*Le);Ce.min==null&&(Ne-=Ue),(Ce.max==null||Ce.min!=null)&&(Ze+=Ue)}else{var ve=Ce.autoscaleMargin;ve!=null&&(Ce.min==null&&(Ne-=Qe*ve,Ne<0&&ie.datamin!=null&&ie.datamin>=0&&(Ne=0)),Ce.max==null&&(Ze+=Qe*ve,Ze>0&&ie.datamax!=null&&ie.datamax<=0&&(Ze=0)))}ie.min=Ne,ie.max=Ze}function Z(ie){if(ie=Math.abs(String(ie).replace(".","")),ie==0)return 0;for(;ie!=0&&ie%10==0;)ie/=10;return Math.floor(Math.log(ie)/Math.LN10)+1}function oe(ie){var Ce=ie.options,Ne;typeof Ce.ticks=="number"&&Ce.ticks>0?Ne=Ce.ticks:Ne=.3*Math.sqrt(ie.direction=="x"?d.width:d.height);var Ze=(ie.max-ie.min)/Ne,Qe=-Math.floor(Math.log(Ze)/Math.LN10),Le=Ce.tickDecimals;Le!=null&&Qe>Le&&(Qe=Le);var Ue=Math.pow(10,-Qe),ve=Ze/Ue,Se;if(ve<1.5?Se=1:ve<3?(Se=2,ve>2.25&&(Le==null||Qe+1<=Le)&&(Se=2.5,++Qe)):ve<7.5?Se=5:Se=10,Se*=Ue,Ce.minTickSize!=null&&Se<Ce.minTickSize&&(Se=Ce.minTickSize),ie.delta=Ze,ie.tickDecimals=Math.max(0,Le??Qe),ie.tickSize=Ce.tickSize||Se,Ce.mode=="time"&&!ie.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(ie.tickGenerator||(ie.tickGenerator=function(mt){var Ye=[],ft=n(mt.min,mt.tickSize),St=0,we=Number.NaN,qe;do qe=we,we=ft+St*mt.tickSize,Ye.push(we),++St;while(we<mt.max&&we!=qe);return Ye},ie.tickFormatter=function(mt,Ye){var ft=Ye.tickDecimals?Math.pow(10,Ye.tickDecimals):1,St=""+Math.round(mt*ft)/ft;if(Ye.tickDecimals!=null){var we=St.indexOf("."),qe=we==-1?0:St.length-we-1;if(qe<Ye.tickDecimals)return(qe?St:St+".")+(""+ft).substr(1,Ye.tickDecimals-qe)}return St}),Y.isFunction(Ce.tickFormatter)&&(ie.tickFormatter=function(mt,Ye){return""+Ce.tickFormatter(mt,Ye)}),Ce.alignTicksWithAxis!=null){var Fe=(ie.direction=="x"?g:y)[Ce.alignTicksWithAxis-1];if(Fe&&Fe.used&&Fe!=ie){var je=ie.tickGenerator(ie);if(je.length>0&&(Ce.min==null&&(ie.min=Math.min(ie.min,je[0])),Ce.max==null&&je.length>1&&(ie.max=Math.max(ie.max,je[je.length-1]))),ie.tickGenerator=function(mt){var Ye=[],ft,St;for(St=0;St<Fe.ticks.length;++St)ft=(Fe.ticks[St].v-Fe.min)/(Fe.max-Fe.min),ft=mt.min+ft*(mt.max-mt.min),Ye.push(ft);return Ye},!ie.mode&&Ce.tickDecimals==null){var Ge=Math.max(0,-Math.floor(Math.log(ie.delta)/Math.LN10)+1),gt=ie.tickGenerator(ie);gt.length>1&&/\..*0$/.test((gt[1]-gt[0]).toFixed(Ge))||(ie.tickDecimals=Ge)}}}}function G(ie){var Ce=ie.options.ticks,Ne=[];Ce==null||typeof Ce=="number"&&Ce>0?Ne=ie.tickGenerator(ie):Ce&&(Y.isFunction(Ce)?Ne=Ce(ie):Ne=Ce);var Ze,Qe;for(ie.ticks=[],Ze=0;Ze<Ne.length;++Ze){var Le=null,Ue=Ne[Ze];typeof Ue=="object"?(Qe=+Ue[0],Ue.length>1&&(Le=Ue[1])):Qe=+Ue,Le==null&&(Le=ie.tickFormatter(Qe,ie)),isNaN(Qe)||ie.ticks.push({v:Qe,label:Le})}}function le(ie,Ce){var Ne=!1;return ie.options.autoscaleMargin&&Ce.length>0&&(ie.options.min==null&&(ie.min=Math.min(ie.min,Ce[0].v),Ne=!0),ie.options.max==null&&Ce.length>1&&(ie.max=Math.max(ie.max,Ce[Ce.length-1].v),Ne=!0)),Ne}function ge(){d.clear(),P(C.drawBackground,[l]);var ie=r.grid;ie.show&&ie.backgroundColor&&ue(),ie.show&&!ie.aboveData&&te();for(var Ce=0;Ce<u.length;++Ce)P(C.drawSeries,[l,u[Ce]]),se(u[Ce]);P(C.draw,[l]),ie.show&&ie.aboveData&&te(),d.render(),Be()}function ne(ie,Ce){for(var Ne,Ze,Qe,Le,Ue=S(),ve=0;ve<Ue.length;++ve)if(Ne=Ue[ve],Ne.direction==Ce&&(Le=Ce+Ne.n+"axis",!ie[Le]&&Ne.n==1&&(Le=Ce+"axis"),ie[Le])){Ze=ie[Le].from,Qe=ie[Le].to;break}if(ie[Le]||(Ne=Ce=="x"?g[0]:y[0],Ze=ie[Ce+"1"],Qe=ie[Ce+"2"]),Ze!=null&&Qe!=null&&Ze>Qe){var Se=Ze;Ze=Qe,Qe=Se}return{from:Ze,to:Qe,axis:Ne}}function ue(){l.save(),l.translate(v.left,v.top),l.fillStyle=Pt(r.grid.backgroundColor,h,0,"rgba(255, 255, 255, 0)"),l.fillRect(0,0,E,h),l.restore()}function te(){var ie,Ce,Ne,Ze;l.save(),l.translate(v.left,v.top);var Qe=r.grid.markings;if(Qe)for(Y.isFunction(Qe)&&(Ce=a.getAxes(),Ce.xmin=Ce.xaxis.min,Ce.xmax=Ce.xaxis.max,Ce.ymin=Ce.yaxis.min,Ce.ymax=Ce.yaxis.max,Qe=Qe(Ce)),ie=0;ie<Qe.length;++ie){var Le=Qe[ie],Ue=ne(Le,"x"),ve=ne(Le,"y");if(Ue.from==null&&(Ue.from=Ue.axis.min),Ue.to==null&&(Ue.to=Ue.axis.max),ve.from==null&&(ve.from=ve.axis.min),ve.to==null&&(ve.to=ve.axis.max),!(Ue.to<Ue.axis.min||Ue.from>Ue.axis.max||ve.to<ve.axis.min||ve.from>ve.axis.max)){Ue.from=Math.max(Ue.from,Ue.axis.min),Ue.to=Math.min(Ue.to,Ue.axis.max),ve.from=Math.max(ve.from,ve.axis.min),ve.to=Math.min(ve.to,ve.axis.max);var Se=Ue.from===Ue.to,Fe=ve.from===ve.to;if(!(Se&&Fe))if(Ue.from=Math.floor(Ue.axis.p2c(Ue.from)),Ue.to=Math.floor(Ue.axis.p2c(Ue.to)),ve.from=Math.floor(ve.axis.p2c(ve.from)),ve.to=Math.floor(ve.axis.p2c(ve.to)),Se||Fe){var je=Le.lineWidth||r.grid.markingsLineWidth,Ge=je%2?.5:0;l.beginPath(),l.strokeStyle=Le.color||r.grid.markingsColor,l.lineWidth=je,Se?(l.moveTo(Ue.to+Ge,ve.from),l.lineTo(Ue.to+Ge,ve.to)):(l.moveTo(Ue.from,ve.to+Ge),l.lineTo(Ue.to,ve.to+Ge)),l.stroke()}else l.fillStyle=Le.color||r.grid.markingsColor,l.fillRect(Ue.from,ve.to,Ue.to-Ue.from,ve.from-ve.to)}}Ce=S(),Ne=r.grid.borderWidth;for(var gt=0;gt<Ce.length;++gt){var mt=Ce[gt],Ye=mt.box,ft=mt.tickLength,St,we,qe,Je;if(!(!mt.show||mt.ticks.length==0)){for(l.lineWidth=1,mt.direction=="x"?(St=0,ft=="full"?we=mt.position=="top"?0:h:we=Ye.top-v.top+(mt.position=="top"?Ye.height:0)):(we=0,ft=="full"?St=mt.position=="left"?0:E:St=Ye.left-v.left+(mt.position=="left"?Ye.width:0)),mt.innermost||(l.strokeStyle=mt.options.color,l.beginPath(),qe=Je=0,mt.direction=="x"?qe=E+1:Je=h+1,l.lineWidth==1&&(mt.direction=="x"?we=Math.floor(we)+.5:St=Math.floor(St)+.5),l.moveTo(St,we),l.lineTo(St+qe,we+Je),l.stroke()),l.strokeStyle=mt.options.tickColor,l.beginPath(),ie=0;ie<mt.ticks.length;++ie){var ut=mt.ticks[ie].v;qe=Je=0,!(isNaN(ut)||ut<mt.min||ut>mt.max||ft=="full"&&(typeof Ne=="object"&&Ne[mt.position]>0||Ne>0)&&(ut==mt.min||ut==mt.max))&&(mt.direction=="x"?(St=mt.p2c(ut),Je=ft=="full"?-h:ft,mt.position=="top"&&(Je=-Je)):(we=mt.p2c(ut),qe=ft=="full"?-E:ft,mt.position=="left"&&(qe=-qe)),l.lineWidth==1&&(mt.direction=="x"?St=Math.floor(St)+.5:we=Math.floor(we)+.5),l.moveTo(St,we),l.lineTo(St+qe,we+Je))}l.stroke()}}Ne&&(Ze=r.grid.borderColor,typeof Ne=="object"||typeof Ze=="object"?(typeof Ne!="object"&&(Ne={top:Ne,right:Ne,bottom:Ne,left:Ne}),typeof Ze!="object"&&(Ze={top:Ze,right:Ze,bottom:Ze,left:Ze}),Ne.top>0&&(l.strokeStyle=Ze.top,l.lineWidth=Ne.top,l.beginPath(),l.moveTo(0-Ne.left,0-Ne.top/2),l.lineTo(E,0-Ne.top/2),l.stroke()),Ne.right>0&&(l.strokeStyle=Ze.right,l.lineWidth=Ne.right,l.beginPath(),l.moveTo(E+Ne.right/2,0-Ne.top),l.lineTo(E+Ne.right/2,h),l.stroke()),Ne.bottom>0&&(l.strokeStyle=Ze.bottom,l.lineWidth=Ne.bottom,l.beginPath(),l.moveTo(E+Ne.right,h+Ne.bottom/2),l.lineTo(0,h+Ne.bottom/2),l.stroke()),Ne.left>0&&(l.strokeStyle=Ze.left,l.lineWidth=Ne.left,l.beginPath(),l.moveTo(0-Ne.left/2,h+Ne.bottom),l.lineTo(0-Ne.left/2,0),l.stroke())):(l.lineWidth=Ne,l.strokeStyle=r.grid.borderColor,l.strokeRect(-Ne/2,-Ne/2,E+Ne,h+Ne))),l.restore()}function me(){Y.each(S(),function(ie,Ce){var Ne=Ce.box,Ze=Ce.direction+"Axis "+Ce.direction+Ce.n+"Axis",Qe="flot-"+Ce.direction+"-axis flot-"+Ce.direction+Ce.n+"-axis "+Ze,Le=Ce.options.font||"flot-tick-label tickLabel",Ue,ve,Se,Fe,je;if(d.removeText(Qe),!(!Ce.show||Ce.ticks.length==0))for(var Ge=0;Ge<Ce.ticks.length;++Ge)Ue=Ce.ticks[Ge],!(!Ue.label||Ue.v<Ce.min||Ue.v>Ce.max)&&(Ce.direction=="x"?(Fe="center",ve=v.left+Ce.p2c(Ue.v),Ce.position=="bottom"?Se=Ne.top+Ne.padding+Ne.eventSectionPadding:(Se=Ne.top+Ne.height-Ne.padding,je="bottom")):(je="middle",Se=v.top+Ce.p2c(Ue.v),Ce.position=="left"?(ve=Ne.left+Ne.width-Ne.padding,Fe="right"):ve=Ne.left+Ne.padding),d.addText(Qe,ve,Se,Ue.label,Le,null,null,Fe,je))})}function q(ie){for(var Ce=[],Ne=null,Ze=null,Qe=ie.datapoints,Le=[],Ue=0;Ue<Qe.pointsize-2;Ue++)Le.push(0);for(var ve=0;ve<Qe.points.length;ve+=Qe.pointsize){var Se=Qe.points[ve],Fe=Qe.points[ve+1];ve===Qe.points.length-Qe.pointsize?Ze=null:Ze=Qe.points[ve+Qe.pointsize],Se!==null&&Fe!==null&&Ne===null&&Ze===null&&(Ce.push(Se),Ce.push(Fe),Ce.push.apply(Ce,Le)),Ne=Se}var je=Qe.points;Qe.points=Ce,ie.points.radius=ie.lines.lineWidth/2,pe(ie),Qe.points=je}function se(ie){ie.lines.show&&(ae(ie),!ie.points.show&&!ie.bars.show&&q(ie)),ie.bars.show&&Me(ie),ie.points.show&&pe(ie)}function ae(ie){function Ce(ve,Se,Fe,je,Ge){var gt=ve.points,mt=ve.pointsize,Ye=null,ft=null;l.beginPath();for(var St=mt;St<gt.length;St+=mt){var we=gt[St-mt],qe=gt[St-mt+1],Je=gt[St],ut=gt[St+1];if(!(we==null||Je==null)){if(qe<=ut&&qe<Ge.min){if(ut<Ge.min)continue;we=(Ge.min-qe)/(ut-qe)*(Je-we)+we,qe=Ge.min}else if(ut<=qe&&ut<Ge.min){if(qe<Ge.min)continue;Je=(Ge.min-qe)/(ut-qe)*(Je-we)+we,ut=Ge.min}if(qe>=ut&&qe>Ge.max){if(ut>Ge.max)continue;we=(Ge.max-qe)/(ut-qe)*(Je-we)+we,qe=Ge.max}else if(ut>=qe&&ut>Ge.max){if(qe>Ge.max)continue;Je=(Ge.max-qe)/(ut-qe)*(Je-we)+we,ut=Ge.max}if(we<=Je&&we<je.min){if(Je<je.min)continue;qe=(je.min-we)/(Je-we)*(ut-qe)+qe,we=je.min}else if(Je<=we&&Je<je.min){if(we<je.min)continue;ut=(je.min-we)/(Je-we)*(ut-qe)+qe,Je=je.min}if(we>=Je&&we>je.max){if(Je>je.max)continue;qe=(je.max-we)/(Je-we)*(ut-qe)+qe,we=je.max}else if(Je>=we&&Je>je.max){if(we>je.max)continue;ut=(je.max-we)/(Je-we)*(ut-qe)+qe,Je=je.max}(we!=Ye||qe!=ft)&&l.moveTo(je.p2c(we)+Se,Ge.p2c(qe)+Fe),Ye=Je,ft=ut,l.lineTo(je.p2c(Je)+Se,Ge.p2c(ut)+Fe)}}l.stroke()}function Ne(ve,Se,Fe){for(var je=ve.points,Ge=ve.pointsize,gt=Math.min(Math.max(0,Fe.min),Fe.max),mt=0,Ye,ft=!1,St=1,we=0,qe=0;!(Ge>0&&mt>je.length+Ge);){mt+=Ge;var Je=je[mt-Ge],ut=je[mt-Ge+St],Mt=je[mt],Wt=je[mt+St];if(ft){if(Ge>0&&Je!=null&&Mt==null){qe=mt,Ge=-Ge,St=2;continue}if(Ge<0&&mt==we+Ge){l.fill(),ft=!1,Ge=-Ge,St=1,mt=we=qe+Ge;continue}}if(!(Je==null||Mt==null)){if(Je<=Mt&&Je<Se.min){if(Mt<Se.min)continue;ut=(Se.min-Je)/(Mt-Je)*(Wt-ut)+ut,Je=Se.min}else if(Mt<=Je&&Mt<Se.min){if(Je<Se.min)continue;Wt=(Se.min-Je)/(Mt-Je)*(Wt-ut)+ut,Mt=Se.min}if(Je>=Mt&&Je>Se.max){if(Mt>Se.max)continue;ut=(Se.max-Je)/(Mt-Je)*(Wt-ut)+ut,Je=Se.max}else if(Mt>=Je&&Mt>Se.max){if(Je>Se.max)continue;Wt=(Se.max-Je)/(Mt-Je)*(Wt-ut)+ut,Mt=Se.max}if(ft||(l.beginPath(),l.moveTo(Se.p2c(Je),Fe.p2c(gt)),ft=!0),ut>=Fe.max&&Wt>=Fe.max){l.lineTo(Se.p2c(Je),Fe.p2c(Fe.max)),l.lineTo(Se.p2c(Mt),Fe.p2c(Fe.max));continue}else if(ut<=Fe.min&&Wt<=Fe.min){l.lineTo(Se.p2c(Je),Fe.p2c(Fe.min)),l.lineTo(Se.p2c(Mt),Fe.p2c(Fe.min));continue}var ln=Je,fn=Mt;ut<=Wt&&ut<Fe.min&&Wt>=Fe.min?(Je=(Fe.min-ut)/(Wt-ut)*(Mt-Je)+Je,ut=Fe.min):Wt<=ut&&Wt<Fe.min&&ut>=Fe.min&&(Mt=(Fe.min-ut)/(Wt-ut)*(Mt-Je)+Je,Wt=Fe.min),ut>=Wt&&ut>Fe.max&&Wt<=Fe.max?(Je=(Fe.max-ut)/(Wt-ut)*(Mt-Je)+Je,ut=Fe.max):Wt>=ut&&Wt>Fe.max&&ut<=Fe.max&&(Mt=(Fe.max-ut)/(Wt-ut)*(Mt-Je)+Je,Wt=Fe.max),Je!=ln&&l.lineTo(Se.p2c(ln),Fe.p2c(ut)),l.lineTo(Se.p2c(Je),Fe.p2c(ut)),l.lineTo(Se.p2c(Mt),Fe.p2c(Wt)),Mt!=fn&&(l.lineTo(Se.p2c(Mt),Fe.p2c(Wt)),l.lineTo(Se.p2c(fn),Fe.p2c(Wt)))}}}l.save(),l.translate(v.left,v.top),l.lineJoin="round";var Ze=ie.lines.lineWidth,Qe=ie.shadowSize;if(Ze>0&&Qe>0){l.lineWidth=Qe,l.strokeStyle="rgba(0,0,0,0.1)";var Le=Math.PI/18;Ce(ie.datapoints,Math.sin(Le)*(Ze/2+Qe/2),Math.cos(Le)*(Ze/2+Qe/2),ie.xaxis,ie.yaxis),l.lineWidth=Qe/2,Ce(ie.datapoints,Math.sin(Le)*(Ze/2+Qe/4),Math.cos(Le)*(Ze/2+Qe/4),ie.xaxis,ie.yaxis)}l.lineWidth=Ze,l.strokeStyle=ie.color;var Ue=Ke(ie.lines,ie.color,0,h);Ue&&(l.fillStyle=Ue,Ne(ie.datapoints,ie.xaxis,ie.yaxis)),Ze>0&&Ce(ie.datapoints,0,0,ie.xaxis,ie.yaxis),l.restore()}function pe(ie){function Ce(ve,Se,Fe,je,Ge,gt,mt,Ye){for(var ft=ve.points,St=ve.pointsize,we=0;we<ft.length;we+=St){var qe=ft[we],Je=ft[we+1];qe==null||qe<gt.min||qe>gt.max||Je<mt.min||Je>mt.max||(l.beginPath(),qe=gt.p2c(qe),Je=mt.p2c(Je)+je,Ye=="circle"?l.arc(qe,Je,Se,0,Ge?Math.PI:Math.PI*2,!1):Ye(l,qe,Je,Se,Ge),l.closePath(),Fe&&(l.fillStyle=Fe,l.fill()),l.stroke())}}l.save(),l.translate(v.left,v.top);var Ne=ie.points.lineWidth,Ze=ie.shadowSize,Qe=ie.points.radius,Le=ie.points.symbol;if(Ne==0&&(Ne=1e-4),Ne>0&&Ze>0){var Ue=Ze/2;l.lineWidth=Ue,l.strokeStyle="rgba(0,0,0,0.1)",Ce(ie.datapoints,Qe,null,Ue+Ue/2,!0,ie.xaxis,ie.yaxis,Le),l.strokeStyle="rgba(0,0,0,0.2)",Ce(ie.datapoints,Qe,null,Ue/2,!0,ie.xaxis,ie.yaxis,Le)}l.lineWidth=Ne,l.strokeStyle=ie.color,Ce(ie.datapoints,Qe,Ke(ie.points,ie.color),0,!1,ie.xaxis,ie.yaxis,Le),l.restore()}function de(ie,Ce,Ne,Ze,Qe,Le,Ue,ve,Se,Fe,je){var Ge,gt,mt,Ye,ft,St,we,qe,Je;Fe?(qe=St=we=!0,ft=!1,Ge=Ne,gt=ie,Ye=Ce+Ze,mt=Ce+Qe,gt<Ge&&(Je=gt,gt=Ge,Ge=Je,ft=!0,St=!1)):(ft=St=we=!0,qe=!1,Ge=ie+Ze,gt=ie+Qe,mt=Ne,Ye=Ce,Ye<mt&&(Je=Ye,Ye=mt,mt=Je,qe=!0,we=!1)),!(gt<Ue.min||Ge>Ue.max||Ye<ve.min||mt>ve.max)&&(Ge<Ue.min&&(Ge=Ue.min,ft=!1),gt>Ue.max&&(gt=Ue.max,St=!1),mt<ve.min&&(mt=ve.min,qe=!1),Ye>ve.max&&(Ye=ve.max,we=!1),Ge=Ue.p2c(Ge),mt=ve.p2c(mt),gt=Ue.p2c(gt),Ye=ve.p2c(Ye),Le&&(Se.fillStyle=Le(mt,Ye),Se.fillRect(Ge,Ye,gt-Ge,mt-Ye)),je>0&&(ft||St||we||qe)&&(Se.beginPath(),Se.moveTo(Ge,mt),ft?Se.lineTo(Ge,Ye):Se.moveTo(Ge,Ye),we?Se.lineTo(gt,Ye):Se.moveTo(gt,Ye),St?Se.lineTo(gt,mt):Se.moveTo(gt,mt),qe?Se.lineTo(Ge,mt):Se.moveTo(Ge,mt),Se.stroke()))}function Me(ie){function Ce(Qe,Le,Ue,ve,Se,Fe){for(var je=Qe.points,Ge=Qe.pointsize,gt=0;gt<je.length;gt+=Ge)je[gt]!=null&&de(je[gt],je[gt+1],je[gt+2],Le,Ue,ve,Se,Fe,l,ie.bars.horizontal,ie.bars.lineWidth)}l.save(),l.translate(v.left,v.top),l.lineWidth=ie.bars.lineWidth,l.strokeStyle=ie.color;var Ne;switch(ie.bars.align){case"left":Ne=0;break;case"right":Ne=-ie.bars.barWidth;break;default:Ne=-ie.bars.barWidth/2}var Ze=ie.bars.fill?function(Qe,Le){return Ke(ie.bars,ie.color,Qe,Le)}:null;Ce(ie.datapoints,Ne,Ne+ie.bars.barWidth,Ze,ie.xaxis,ie.yaxis),l.restore()}function Ke(ie,Ce,Ne,Ze){var Qe=ie.fill;if(!Qe)return null;if(ie.fillColor)return Pt(ie.fillColor,Ne,Ze,Ce);var Le=Y.color.parse(Ce);return Le.a=typeof Qe=="number"?Qe:.4,Le.normalize(),Le.toString()}function st(){if(r.legend.container!=null?Y.find(r.legend.container).html(""):c.find(".legend").remove(),!!r.legend.show){for(var ie=[],Ce=[],Ne=!1,Ze=r.legend.labelFormatter,Qe,Le,Ue=0;Ue<u.length;++Ue)Qe=u[Ue],Qe.label&&(Le=Ze?Ze(Qe.label,Qe):Qe.label,Le&&Ce.push({label:Le,color:Qe.color}));if(r.legend.sorted)if(Y.isFunction(r.legend.sorted))Ce.sort(r.legend.sorted);else if(r.legend.sorted=="reverse")Ce.reverse();else{var ve=r.legend.sorted!="descending";Ce.sort(function(St,we){return St.label==we.label?0:St.label<we.label!=ve?1:-1})}for(var Ue=0;Ue<Ce.length;++Ue){var Se=Ce[Ue];Ue%r.legend.noColumns==0&&(Ne&&ie.push("</tr>"),ie.push("<tr>"),Ne=!0),ie.push('<td class="legendColorBox"><div style="border:1px solid '+r.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+Se.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+Se.label+"</td>")}if(Ne&&ie.push("</tr>"),ie.length!=0){var Fe='<table style="font-size:smaller;color:'+r.grid.color+'">'+ie.join("")+"</table>";if(r.legend.container!=null)Y(r.legend.container).html(Fe);else{var je="",Ge=r.legend.position,gt=r.legend.margin;gt[0]==null&&(gt=[gt,gt]),Ge.charAt(0)=="n"?je+="top:"+(gt[1]+v.top)+"px;":Ge.charAt(0)=="s"&&(je+="bottom:"+(gt[1]+v.bottom)+"px;"),Ge.charAt(1)=="e"?je+="right:"+(gt[0]+v.right)+"px;":Ge.charAt(1)=="w"&&(je+="left:"+(gt[0]+v.left)+"px;");var mt=Y('<div class="legend">'+Fe.replace('style="','style="position:absolute;'+je+";")+"</div>").appendTo(c);if(r.legend.backgroundOpacity!=0){var Ye=r.legend.backgroundColor;Ye==null&&(Ye=r.grid.backgroundColor,Ye&&typeof Ye=="string"?Ye=Y.color.parse(Ye):Ye=Y.color.extract(mt,"background-color"),Ye.a=1,Ye=Ye.toString());var ft=mt.children();Y('<div style="position:absolute;width:'+ft.width()+"px;height:"+ft.height()+"px;"+je+"background-color:"+Ye+';"> </div>').prependTo(mt).css("opacity",r.legend.backgroundOpacity)}}}}}var Ie=[],Ve=null;function _e(ie,Ce,Ne){var Ze=r.grid.mouseActiveRadius,Qe=Ze*Ze+1,Le=null,Ue=!1,ve,Se,Fe;for(ve=u.length-1;ve>=0;--ve)if(Ne(u[ve])){var je=u[ve],Ge=je.xaxis,gt=je.yaxis,mt=je.datapoints.points,Ye=Ge.c2p(ie),ft=gt.c2p(Ce),St=Ze/Ge.scale,we=Ze/gt.scale;if(Fe=je.datapoints.pointsize,Ge.options.inverseTransform&&(St=Number.MAX_VALUE),gt.options.inverseTransform&&(we=Number.MAX_VALUE),je.lines.show||je.points.show)for(Se=0;Se<mt.length;Se+=Fe){var qe=mt[Se],Je=mt[Se+1];if(qe!=null&&!(qe-Ye>St||qe-Ye<-St||Je-ft>we||Je-ft<-we)){var ut=Math.abs(Ge.p2c(qe)-ie),Mt=Math.abs(gt.p2c(Je)-Ce),Wt=ut*ut+Mt*Mt;Wt<Qe&&(Qe=Wt,Le=[ve,Se/Fe])}}if(je.bars.show&&!Le){var ln,fn;switch(je.bars.align){case"left":ln=0;break;case"right":ln=-je.bars.barWidth;break;default:ln=-je.bars.barWidth/2}for(fn=ln+je.bars.barWidth,Se=0;Se<mt.length;Se+=Fe){var qe=mt[Se],Je=mt[Se+1],pn=mt[Se+2];qe!=null&&(u[ve].bars.horizontal?Ye<=Math.max(pn,qe)&&Ye>=Math.min(pn,qe)&&ft>=Je+ln&&ft<=Je+fn:Ye>=qe+ln&&Ye<=qe+fn&&ft>=Math.min(pn,Je)&&ft<=Math.max(pn,Je))&&(Le=[ve,Se/Fe])}}}return Le?(ve=Le[0],Se=Le[1],Fe=u[ve].datapoints.pointsize,{datapoint:u[ve].datapoints.points.slice(Se*Fe,(Se+1)*Fe),dataIndex:Se,series:u[ve],seriesIndex:ve}):null}function tt(ie){r.grid.hoverable&&be("plothover",ie,function(Ce){return Ce.hoverable!=!1})}function dt(ie){r.grid.hoverable&&be("plothover",ie,function(Ce){return!1})}function Oe(ie){a.isSelecting||be("plotclick",ie,function(Ce){return Ce.clickable!=!1})}function ye(ie){if(ie.cancelable){if(!m.is(ie.target)&&m.has(ie.target).length===0){be("plotleave",ie,function(Ce){});return}tt(Pe(ie)),ie.preventDefault()}}function Pe(ie){if(!ie||!ie.originalEvent||ie.pageX&&ie.pageY)return ie;var Ce=ie.originalEvent;if(Ce.changedTouches.length===0)return ie;var Ne=Ce.changedTouches[0];return ie.pageX=Ne.pageX,ie.pageY=Ne.pageY,ie}function be(ie,Ce,Ne){var Ze=m.offset(),Qe=Ce.pageX-Ze.left-v.left,Le=Ce.pageY-Ze.top-v.top,Ue=O({left:Qe,top:Le});Ue.pageX=Ce.pageX,Ue.pageY=Ce.pageY,Ue.ctrlKey=Ce.ctrlKey,Ue.metaKey=Ce.metaKey;var ve=_e(Qe,Le,Ne);if(ve&&(ve.pageX=parseInt(ve.series.xaxis.p2c(ve.datapoint[0])+Ze.left+v.left,10),ve.pageY=parseInt(ve.series.yaxis.p2c(ve.datapoint[1])+Ze.top+v.top,10)),r.grid.autoHighlight){for(var Se=0;Se<Ie.length;++Se){var Fe=Ie[Se];Fe.auto==ie&&!(ve&&Fe.series==ve.series&&Fe.point[0]==ve.datapoint[0]&&Fe.point[1]==ve.datapoint[1])&&ht(Fe.series,Fe.point)}ve&&lt(ve.series,ve.datapoint,ie)}c.trigger(ie,[Ue,ve])}function Be(){var ie=r.interaction.redrawOverlayInterval;if(ie==-1){ze();return}Ve||(Ve=setTimeout(ze,ie))}function ze(){Ve=null,p.save(),o.clear(),p.translate(v.left,v.top);var ie,Ce;for(ie=0;ie<Ie.length;++ie)Ce=Ie[ie],Ce.series.bars.show?ct(Ce.series,Ce.point):bt(Ce.series,Ce.point);p.restore(),P(C.drawOverlay,[p])}function lt(ie,Ce,Ne){if(typeof ie=="number"&&(ie=u[ie]),typeof Ce=="number"){var Ze=ie.datapoints.pointsize;Ce=ie.datapoints.points.slice(Ze*Ce,Ze*(Ce+1))}var Qe=vt(ie,Ce);Qe==-1?(Ie.push({series:ie,point:Ce,auto:Ne}),Be()):Ne||(Ie[Qe].auto=!1)}function ht(ie,Ce){if(ie==null&&Ce==null){Ie=[],Be();return}if(typeof ie=="number"&&(ie=u[ie]),typeof Ce=="number"){var Ne=ie.datapoints.pointsize;Ce=ie.datapoints.points.slice(Ne*Ce,Ne*(Ce+1))}var Ze=vt(ie,Ce);Ze!=-1&&(Ie.splice(Ze,1),Be())}function vt(ie,Ce){for(var Ne=0;Ne<Ie.length;++Ne){var Ze=Ie[Ne];if(Ze.series==ie&&Ze.point[0]==Ce[0]&&Ze.point[1]==Ce[1])return Ne}return-1}function bt(ie,Ce){var Ne=Ce[0],Ze=Ce[1],Qe=ie.xaxis,Le=ie.yaxis,Ue=typeof ie.highlightColor=="string"?ie.highlightColor:Y.color.parse(ie.color).scale("a",.5).toString();if(!(Ne<Qe.min||Ne>Qe.max||Ze<Le.min||Ze>Le.max)){var ve=ie.points.radius+ie.points.lineWidth/2;p.lineWidth=ve,p.strokeStyle=Ue;var Se=1.5*ve;Ne=Qe.p2c(Ne),Ze=Le.p2c(Ze),p.beginPath(),ie.points.symbol=="circle"?p.arc(Ne,Ze,Se,0,2*Math.PI,!1):ie.points.symbol(p,Ne,Ze,Se,!1),p.closePath(),p.stroke()}}function ct(ie,Ce){var Ne=typeof ie.highlightColor=="string"?ie.highlightColor:Y.color.parse(ie.color).scale("a",.5).toString(),Ze=Ne,Qe;switch(ie.bars.align){case"left":Qe=0;break;case"right":Qe=-ie.bars.barWidth;break;default:Qe=-ie.bars.barWidth/2}p.lineWidth=ie.bars.lineWidth,p.strokeStyle=Ne,de(Ce[0],Ce[1],Ce[2]||0,Qe,Qe+ie.bars.barWidth,function(){return Ze},ie.xaxis,ie.yaxis,p,ie.bars.horizontal,ie.bars.lineWidth)}function Pt(ie,Ce,Ne,Ze){if(typeof ie=="string")return ie;for(var Qe=l.createLinearGradient(0,Ne,0,Ce),Le=0,Ue=ie.colors.length;Le<Ue;++Le){var ve=ie.colors[Le];if(typeof ve!="string"){var Se=Y.color.parse(Ze);ve.brightness!=null&&(Se=Se.scale("rgb",ve.brightness)),ve.opacity!=null&&(Se.a*=ve.opacity),ve=Se.toString()}Qe.addColorStop(Le/(Ue-1),ve)}return Qe}}Y.plot=function(c,s,i){var f=new t(Y(c),s,i,Y.plot.plugins);return f},Y.plot.version="0.8.3",Y.plot.plugins=[],Y.fn.plot=function(c,s){return this.each(function(){Y.plot(this,c,s)})};function n(c,s){return s*Math.floor(c/s)}}(jQuery)},4027:()=>{(function(Y){function T(e){var t={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},n={},c=null;function s(v){t.active&&(m(v),e.getPlaceholder().trigger("plotselecting",[u()]))}function i(v){v.which==1&&(document.body.focus(),document.onselectstart!==void 0&&n.onselectstart==null&&(n.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&n.ondrag==null&&(n.ondrag=document.ondrag,document.ondrag=function(){return!1}),o(t.first,v),t.active=!0,c=function(E){f(E)},Y(document).one("mouseup",c))}function f(v){return c=null,document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag),t.active=!1,m(v),y()?r(v):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function u(){if(!y()||!t.show)return null;var v={},E=t.first,h=t.second,C=e.getAxes(),a=!0;return Y.each(C,function(P,D){D.used&&(anyUsed=!1)}),Y.each(C,function(P,D){if(D.used||a){var x=D.c2p(E[D.direction]),M=D.c2p(h[D.direction]);v[P]={from:Math.min(x,M),to:Math.max(x,M)}}}),v}function r(v){var E=u();E.ctrlKey=v.ctrlKey,E.metaKey=v.metaKey,e.getPlaceholder().trigger("plotselected",[E]),E.xaxis&&E.yaxis&&e.getPlaceholder().trigger("selected",[{x1:E.xaxis.from,y1:E.yaxis.from,x2:E.xaxis.to,y2:E.yaxis.to}])}function d(v,E,h){return E<v?v:E>h?h:E}function o(v,E){var h=e.getOptions(),C=e.getPlaceholder().offset(),a=e.getPlotOffset();v.x=d(0,E.pageX-C.left-a.left,e.width()),v.y=d(0,E.pageY-C.top-a.top,e.height()),h.selection.mode=="y"&&(v.x=v==t.first?0:e.width()),h.selection.mode=="x"&&(v.y=v==t.first?0:e.height())}function m(v){v.pageX!=null&&(o(t.second,v),y()?(e.isSelecting=!0,t.show=!0,e.triggerRedrawOverlay()):l(!0))}function l(v){t.show&&(t.show=!1,e.triggerRedrawOverlay(),v||e.getPlaceholder().trigger("plotunselected",[]))}function p(v,E){var h,C,a,P,D=e.getAxes();for(var x in D)if(h=D[x],h.direction==E&&(P=E+h.n+"axis",!v[P]&&h.n==1&&(P=E+"axis"),v[P])){C=v[P].from,a=v[P].to;break}if(v[P]||(h=E=="x"?e.getXAxes()[0]:e.getYAxes()[0],C=v[E+"1"],a=v[E+"2"]),C!=null&&a!=null&&C>a){var M=C;C=a,a=M}return{from:C,to:a,axis:h}}function g(v,E){var h,C,a=e.getOptions();a.selection.mode=="y"?(t.first.x=0,t.second.x=e.width()):(C=p(v,"x"),t.first.x=C.axis.p2c(C.from),t.second.x=C.axis.p2c(C.to)),a.selection.mode=="x"?(t.first.y=0,t.second.y=e.height()):(C=p(v,"y"),t.first.y=C.axis.p2c(C.from),t.second.y=C.axis.p2c(C.to)),t.show=!0,e.triggerRedrawOverlay(),!E&&y()&&r()}function y(){var v=e.getOptions().selection.minSize;return Math.abs(t.second.x-t.first.x)>=v&&Math.abs(t.second.y-t.first.y)>=v}e.clearSelection=l,e.setSelection=g,e.getSelection=u,e.hooks.bindEvents.push(function(v,E){var h=v.getOptions();h.selection.mode!=null&&(E.mousemove(s),E.mousedown(i))}),e.hooks.drawOverlay.push(function(v,E){if(t.show&&y()){var h=v.getPlotOffset(),C=v.getOptions();E.save(),E.translate(h.left,h.top);var a=Y.color.parse(C.selection.color);E.strokeStyle=a.scale("a",.8).toString(),E.lineWidth=1,E.lineJoin=C.selection.shape,E.fillStyle=a.scale("a",.4).toString();var P=Math.min(t.first.x,t.second.x)+.5,D=Math.min(t.first.y,t.second.y)+.5,x=Math.abs(t.second.x-t.first.x)-1,M=Math.abs(t.second.y-t.first.y)-1;E.fillRect(P,D,x,M),E.strokeRect(P,D,x,M),E.restore()}}),e.hooks.shutdown.push(function(v,E){E.unbind("mousemove",s),E.unbind("mousedown",i),c&&(Y(document).unbind("mouseup",c),document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag))})}Y.plot.plugins.push({init:T,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},65103:()=>{(function(Y){var T={series:{stack:null}};function e(t){function n(s,i){for(var f=null,u=0;u<i.length&&s!=i[u];++u)i[u].stack==s.stack&&(f=i[u]);return f}function c(s,i,f){if(!(i.stack==null||i.stack===!1)){var u=n(i,s.getData());if(u){for(var r=f.pointsize,d=f.points,o=u.datapoints.pointsize,m=u.datapoints.points,l=[],p,g,y,v,E,h,C=i.lines.show,a=i.bars.horizontal,P=r>2&&(a?f.format[2].x:f.format[2].y),D=C&&i.lines.steps,x=a?1:0,M=a?0:1,b=0,R=0,S,O;!(b>=d.length&&R>=m.length);){if(S=l.length,b<d.length&&d[b]==null){for(O=0;O<r;++O)l.push(d[b+O]);b+=r}else if(b>=d.length){for(O=0;O<r;++O)l.push(m[R+O]);P&&(l[S+2]=m[R+M]),R+=o}else if(R>=m.length){for(O=0;O<r;++O)l.push(d[b+O]);b+=r}else if(R<m.length&&m[R]==null)R+=o;else{if(p=d[b+x],g=d[b+M],v=m[R+x],E=m[R+M],h=0,p==v){for(O=0;O<r;++O)l.push(d[b+O]);l[S+M]+=E,h=E,b+=r,R+=o}else if(p>v){if(b==0){for(O=0;O<r;++O)l.push(m[R+O]);h=E}if(b>0&&d[b-r]!=null){for(y=0,l.push(v),l.push(y+E),O=2;O<r;++O)l.push(d[b+O]);h=E}R+=o}else{for(O=0;O<r;++O)l.push(d[b+O]);R>0&&m[R-o]!=null&&(h=0),l[S+M]+=h,b+=r}fromgap=!1,S!=l.length&&P&&(l[S+2]=h)}if(D&&S!=l.length&&S>0&&l[S]!=null&&l[S]!=l[S-r]&&l[S+1]!=l[S-r+1]){for(O=0;O<r;++O)l[S+r+O]=l[S+O];l[S+1]=l[S-r+1]}}f.points=l}}}t.hooks.processDatapoints.push(c)}Y.plot.plugins.push({init:e,options:T,name:"stack",version:"1.2"})})(jQuery)},85095:()=>{(function(Y){var T={series:{stackpercent:null}};function e(t){var n={},c=!1,s={};function i(r,d,o,m){if(c||(c=!0,s=f(r.getData())),d.stackpercent==!0){var l=o.length;d.percents=[];var p=0,g=1;d.bars&&d.bars.horizontal&&d.bars.horizontal===!0&&(p=1,g=0);for(var y=0;y<l;y++){var v=s[o[y][p]+""];v>0?d.percents.push(o[y][g]*100/v):d.percents.push(0)}}}function f(r){var d=r.length,o={};if(d>0){for(var m=0;m<d;m++)if(r[m].stackpercent){var l=0,p=1;r[m].bars&&r[m].bars.horizontal&&r[m].bars.horizontal===!0&&(l=1,p=0);for(var g=r[m].data.length,y=0;y<g;y++){var v=0;r[m].data[y][1]!=null&&(v=r[m].data[y][p]),o[r[m].data[y][l]+""]?o[r[m].data[y][l]+""]+=v:o[r[m].data[y][l]+""]=v}}}return o}function u(r,d,o){if(d.stackpercent){c||(s=f(r.getData()));var m=[],l=0,p=1;d.bars&&d.bars.horizontal&&d.bars.horizontal===!0&&(l=1,p=0);for(var g=0;g<o.points.length;g+=3)n[o.points[g+l]]||(n[o.points[g+l]]=0),m[g+l]=o.points[g+l],m[g+p]=o.points[g+p]+n[o.points[g+l]],m[g+2]=n[o.points[g+l]],n[o.points[g+l]]+=o.points[g+p],s[m[g+l]+""]>0?(m[g+p]=m[g+p]*100/s[m[g+l]+""],m[g+2]=m[g+2]*100/s[m[g+l]+""]):(m[g+p]=0,m[g+2]=0);o.points=m}}t.hooks.processRawData.push(i),t.hooks.processDatapoints.push(u)}Y.plot.plugins.push({init:e,options:T,name:"stackpercent",version:"0.1"})})(jQuery)},59554:()=>{(function(Y){var T={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(d,o){return o*Math.floor(d/o)}function t(d,o,m,l){if(typeof d.strftime=="function")return d.strftime(o);var p=function(P,D){return P=""+P,D=""+(D??"0"),P.length==1?D+P:P},g=[],y=!1,v=d.getHours(),E=v<12;m==null&&(m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),l==null&&(l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var h;v>12?h=v-12:v==0?h=12:h=v;for(var C=0;C<o.length;++C){var a=o.charAt(C);if(y){switch(a){case"a":a=""+l[d.getDay()];break;case"b":a=""+m[d.getMonth()];break;case"d":a=p(d.getDate(),"");break;case"e":a=p(d.getDate()," ");break;case"h":case"H":a=p(v);break;case"I":a=p(h);break;case"l":a=p(h," ");break;case"m":a=p(d.getMonth()+1,"");break;case"M":a=p(d.getMinutes());break;case"q":a=""+(Math.floor(d.getMonth()/3)+1);break;case"S":a=p(d.getSeconds());break;case"y":a=p(d.getFullYear()%100);break;case"Y":a=""+d.getFullYear();break;case"p":a=E?"am":"pm";break;case"P":a=E?"AM":"PM";break;case"w":a=""+d.getDay();break}g.push(a),y=!1}else a=="%"?y=!0:g.push(a)}return g.join("")}function n(d){function o(g,y,v,E){g[y]=function(){return v[E].apply(v,arguments)}}var m={date:d};d.strftime!=null&&o(m,"strftime",d,"strftime"),o(m,"getTime",d,"getTime"),o(m,"setTime",d,"setTime");for(var l=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],p=0;p<l.length;p++)o(m,"get"+l[p],d,"getUTC"+l[p]),o(m,"set"+l[p],d,"setUTC"+l[p]);return m}function c(d,o){if(o.timezone=="browser")return new Date(d);if(!o.timezone||o.timezone=="utc")return n(new Date(d));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var m=new timezoneJS.Date;return m.setTimezone(o.timezone),m.setTime(d),m}else return n(new Date(d))}var s={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},i=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],f=i.concat([[3,"month"],[6,"month"],[1,"year"]]),u=i.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function r(d){d.hooks.processOptions.push(function(o,m){Y.each(o.getAxes(),function(l,p){var g=p.options;g.mode=="time"&&(p.tickGenerator=function(y){var v=[],E=c(y.min,g),h=0,C=g.tickSize&&g.tickSize[1]==="quarter"||g.minTickSize&&g.minTickSize[1]==="quarter"?u:f;g.minTickSize!=null&&(typeof g.tickSize=="number"?h=g.tickSize:h=g.minTickSize[0]*s[g.minTickSize[1]]);for(var a=0;a<C.length-1&&!(y.delta<(C[a][0]*s[C[a][1]]+C[a+1][0]*s[C[a+1][1]])/2&&C[a][0]*s[C[a][1]]>=h);++a);var P=C[a][0],D=C[a][1];if(D=="year"){if(g.minTickSize!=null&&g.minTickSize[1]=="year")P=Math.floor(g.minTickSize[0]);else{var x=Math.pow(10,Math.floor(Math.log(y.delta/s.year)/Math.LN10)),M=y.delta/s.year/x;M<1.5?P=1:M<3?P=2:M<7.5?P=5:P=10,P*=x}P<1&&(P=1)}y.tickSize=g.tickSize||[P,D];var b=y.tickSize[0];D=y.tickSize[1];var R=b*s[D];D=="second"?E.setSeconds(e(E.getSeconds(),b)):D=="minute"?E.setMinutes(e(E.getMinutes(),b)):D=="hour"?E.setHours(e(E.getHours(),b)):D=="month"?E.setMonth(e(E.getMonth(),b)):D=="quarter"?E.setMonth(3*e(E.getMonth()/3,b)):D=="year"&&E.setFullYear(e(E.getFullYear(),b)),E.setMilliseconds(0),R>=s.minute&&E.setSeconds(0),R>=s.hour&&E.setMinutes(0),R>=s.day&&E.setHours(0),R>=s.day*4&&E.setDate(1),R>=s.month*2&&E.setMonth(e(E.getMonth(),3)),R>=s.quarter*2&&E.setMonth(e(E.getMonth(),6)),R>=s.year&&E.setMonth(0);var S=0,O=Number.NaN,U;do if(U=O,O=E.getTime(),v.push(O),D=="month"||D=="quarter")if(b<1){E.setDate(1);var I=E.getTime();E.setMonth(E.getMonth()+(D=="quarter"?3:1));var F=E.getTime();E.setTime(O+S*s.hour+(F-I)*b),S=E.getHours(),E.setHours(0)}else E.setMonth(E.getMonth()+b*(D=="quarter"?3:1));else D=="year"?E.setFullYear(E.getFullYear()+b):E.setTime(O+R);while(O<y.max&&O!=U);return v},p.tickFormatter=function(y,v){var E=c(y,v.options);if(g.timeformat!=null)return t(E,g.timeformat,g.monthNames,g.dayNames);var h=v.options.tickSize&&v.options.tickSize[1]=="quarter"||v.options.minTickSize&&v.options.minTickSize[1]=="quarter",C=v.tickSize[0]*s[v.tickSize[1]],a=v.max-v.min,P=g.twelveHourClock?" %p":"",D=g.twelveHourClock?"%I":"%H",x;C<s.minute?x=D+":%M:%S"+P:C<s.day?a<2*s.day?x=D+":%M"+P:x="%b %d "+D+":%M"+P:C<s.month?x="%b %d":h&&C<s.quarter||!h&&C<s.year?a<s.year?x="%b":x="%b %Y":h&&C<s.year?a<s.year?x="Q%q":x="Q%q %Y":x="%Y";var M=t(E,x,g.monthNames,g.dayNames);return M})})})}Y.plot.plugins.push({init:r,options:T,name:"time",version:"1.0"}),Y.plot.formatDate=t})(jQuery)}}]);

//# sourceMappingURL=2077.434d3383b7b57dc17e44.js.map