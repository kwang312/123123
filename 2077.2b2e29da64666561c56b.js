(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2077],{47956:(Y,T,e)=>{"use strict";e.d(T,{n:()=>i});var t=e(66111),n=e(32976);function i(s){const{children:l,instanceSettings:f}=s,u=(0,t.useMemo)(()=>({instanceSettings:f,meta:f.meta}),[f]);return t.createElement(n._.Provider,{value:u},l)}},32976:(Y,T,e)=>{"use strict";e.d(T,{_:()=>n});var t=e(66111);const n=(0,t.createContext)(void 0)},75363:(Y,T,e)=>{"use strict";e.d(T,{b:()=>i});var t=e(66111),n=e(32976);function i(s){const{children:l,...f}=s;return t.createElement(n._.Provider,{value:f},l)}},58556:(Y,T,e)=>{"use strict";e.d(T,{v:()=>t});function t(n){return"instanceSettings"in n&&"meta"in n}},81129:(Y,T,e)=>{"use strict";e.d(T,{g:()=>i});var t=e(66111),n=e(32976);function i(){const s=(0,t.useContext)(n._);if(!s)throw new Error("usePluginContext must be used within a PluginContextProvider");return s}},86029:(Y,T,e)=>{"use strict";e.d(T,{P:()=>s,i:()=>i});var t=e(99098),n=e(83881);class i{constructor(u,o){return this.fields=[],this.length=0,s(u,o)}}function s(f,u){const o={fields:[],length:f.length};if(!f?.length)return o;if(u){for(const r of u)o.fields.push(l(r,f.map(m=>m[r])));return o}const d=f.find(r=>r!=null);return d!=null&&(typeof d=="object"?o.fields=Object.keys(d).map(r=>l(r,f.map(m=>m[r]))):o.fields.push(l(t.M5,f))),o}function l(f,u){const o={name:f,config:{},values:u,type:t.fS.other};return o.type=(0,n.fu)(o)??t.fS.other,o}},18298:(Y,T,e)=>{"use strict";e.d(T,{a:()=>i});var t=e(74911),n=e(53678);class i extends n.v{constructor(l){super(void 0,f=>new t.d({...l,buffer:f}))}}},59957:(Y,T,e)=>{"use strict";e.d(T,{Ib:()=>l,Jy:()=>s,Y:()=>o,vP:()=>u});var t=e(99098),n=e(83881);const i={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function s(d,r){for(const m in d){const c=i[m];for(const p of d[m])p<r.length&&(r[p]=c)}}function l(d,r){for(let m=0;m<r.length;m++)r[m]=d[r[m]]}function f(d,r){for(const m of r)if(m!=null)return(0,n._m)(d,m);return t.fS.other}function u(d){const{schema:r,data:m}=d;if(!r||!r.fields)throw new Error("JSON needs a fields definition");const c=m?m.values.reduce((g,y)=>Math.max(g,y.length),0):0,p=r.fields.map((g,y)=>{let E=m?m.values[y]:[],v=E.length,h=g.type;v!==c&&(E.length=c,E.fill(void 0,v));let P=m?.entities?.[y];P&&s(P,E);let a=m?.enums?.[y];a&&(l(a,E),h=t.fS.string);const C=m?.nanos?.[y],D={...g,type:h??f(g.name,E),config:g.config??{},values:E,entities:P??{}};return C!=null&&(D.nanos=C),D});return{...r,fields:p,length:c}}function o(d){const r={values:[]},m=[];let c=!1;const p={refId:d.refId,meta:d.meta,name:d.name,fields:d.fields.map(g=>{const{values:y,nanos:E,state:v,display:h,...P}=g;return delete P.entities,r.values.push(y),E!=null?(m.push(E),c=!0):m.push(null),P})};return c&&(r.nanos=m),{schema:p,data:r}}},12115:(Y,T,e)=>{"use strict";e.d(T,{U:()=>n});var t=e(21570);class n extends t.G{constructor(s){super(),this.data=s,this.index=0;const l={},f={};for(let u=0;u<s.fields.length;u++){const o=s.fields[u];if(!o.name)continue;f[o.name]=o;const d=()=>o.values.get(this.index);l.hasOwnProperty(o.name)||Object.defineProperty(l,o.name,{enumerable:!0,get:d}),l.hasOwnProperty(u.toString())||Object.defineProperty(l,u,{enumerable:!1,get:d})}this.obj=l,this.fields=f}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(s){if(!this.dataFrame||!this.dataFrame.fields)return;const l=this.dataFrame.fields[s];if(!(!l||!l.display))return l.display}get(s){return this.index=s,this.obj}toArray(){return new Array(this.data.length).fill(0).map((s,l)=>({...this.get(l)}))}}},5109:(Y,T,e)=>{"use strict";e.d(T,{N:()=>i});var t=e(99098),n=e(83881);class i{constructor(l){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=l.fields.map((f,u)=>({...f,index:u}));for(let f=0;f<l.fields.length;f++){const u=l.fields[f];if(u.type===t.fS.other){const o=(0,n.fu)(u);o&&(u.type=o)}this.fieldByType[u.type]||(this.fieldByType[u.type]=[]),this.fieldByType[u.type].push({...u,index:f}),this.fieldByName[u.name]?console.warn("Duplicate field names in DataFrame: ",u.name):this.fieldByName[u.name]={...u,index:f}}}getFields(l){if(!l)return[...this.fields];const f=this.fieldByType[l];return f?[...f]:[]}hasFieldOfType(l){const f=this.fieldByType[l];return f&&f.length>0}getFirstFieldOfType(l,f=!1){return this.fieldByType[l].find(d=>f||!d.config.custom?.hidden)}hasFieldNamed(l){return!!this.fieldByName[l]}hasFieldWithNameAndType(l,f){return!!this.fieldByName[l]&&this.fieldByType[f].filter(u=>u.name===l).length>0}getFieldByName(l){return this.fieldByName[l]}getFieldsByLabel(l,f){return Object.values(this.fieldByName).filter(u=>u.labels&&u.labels[l]===f)}}},53678:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>f,v:()=>u});var t=e(82897),n=e(99098),i=e(83881);function s(o,d){return d.type||(d.name==="time"||d.name==="Time"?d.type=n.fS.time:d.type=(0,i.LI)(o)),d.type===n.fS.number?r=>parseFloat(r):d.type===n.fS.boolean?r=>!(r[0]==="F"||r[0]==="f"||r[0]==="0"):r=>r}var l=e(21570);const f=void 0;class u extends l.G{constructor(d,r){if(super(),this.fields=[],this.first=[],this.parsers=void 0,this.creator=r||(m=>m??[]),d){const{name:m,refId:c,meta:p,fields:g}=d;if(m&&(this.name=m),c&&(this.refId=c),p&&(this.meta=p),g)for(const y of g)this.addField(y)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(d,r){return this.addField({name:r||"",type:(0,i.LI)(d)})}addField(d,r){let m;d.values&&(m=d.values);let c=d.type;!c&&(d.name==="time"||d.name==="Time")?c=n.fS.time:(!c&&m&&m.length&&(c=(0,i.LI)(m[0])),c||(c=n.fS.other));let p=d.name;p||(p=`Field ${this.fields.length+1}`);const g={...d,name:p,type:c,config:d.config||{},values:this.creator(m)};if(c===n.fS.other&&(c=(0,i.fu)(g),c&&(g.type=c)),this.fields.push(g),this.first=this.fields[0].values,r)for(;g.values.length<r;)g.values.push(f);else this.validate();return g}validate(){const d=this.fields.reduce((r,m)=>Math.max(r,m.values.length),0);for(const r of this.fields)for(;r.values.length!==d;)r.values.push(f)}setParser(d,r){return this.parsers||(this.parsers=new Map),this.parsers.set(d,r),r}parseValue(d,r){let m=this.parsers?.get(d);return m||(m=this.setParser(d,s(r,d))),m(r)}appendRow(d){for(let r=this.fields.length;r<d.length;r++)this.addField({name:`Field ${r+1}`,type:(0,i.LI)(d[r])});if(this.length<1)for(let r=0;r<this.fields.length;r++){const m=this.fields[r];(!m.type||m.type===n.fS.other)&&(m.type=(0,i.LI)(d[r]))}for(let r=0;r<this.fields.length;r++){const m=this.fields[r];let c=d[r];m.type!==n.fS.string&&(0,t.isString)(c)&&(c=this.parseValue(m,c)),m.values.push(c)}}push(...d){for(const r of d)this.add(r);return this.length}reverse(){for(const d of this.fields)d.values.reverse();return this}add(d){const r=d;for(const m of this.fields){let c=r[m.name];m.type!==n.fS.string&&(0,t.isString)(c)&&(c=this.parseValue(m,c)),c===void 0&&(c=f),m.values.push(c)}}set(d,r){if(d>this.length)throw new Error("Unable to set value beyond current length");const m=r||{};for(const c of this.fields)c.values[d]=m[c.name]}get(d){const r={};for(const m of this.fields)r[m.name]=m.values[d];return r}toJSON(){return(0,i.og)(this)}}},61113:(Y,T,e)=>{"use strict";e.d(T,{$q:()=>i,GV:()=>n,YP:()=>f,jC:()=>s,q2:()=>t,r7:()=>l});const t=(u,o)=>({name:u,columns:o}),n=u=>u.columns,i=(u,o)=>u.columns[o],s=(u,o,d)=>u.columns[o].values[d],l=(u,o,d)=>u.columns.map(r=>r.values[d]),f=(u,o)=>u[o]},96905:(Y,T,e)=>{"use strict";e.d(T,{Ch:()=>i,Vv:()=>f,nl:()=>s});var t=e(82897),n=e.n(t);function i(u,o,d){if(u===o)return!0;if(u?.fields?.length!==o?.fields?.length||u.name!==o.name)return!1;for(let r=0;r<u.fields.length;r++){const m=u.fields[r],c=o.fields[r];if(m.type!==c.type||m.name!==c.name)return!1;if(d)continue;if(m.labels&&c.labels&&!f(m.labels,c.labels))return!1;const p=m.config,g=c.config;let y=Object.keys(p),E=Object.keys(g);if(y.length!==E.length)return!1;for(const v of y){if(!(v in g))return!1;if(v!=="interval"&&!(0,t.isEqual)(p[v],g[v]))return!1}}return!0}function s(u,o,d){if(u===o)return!0;if(u?.length!==o?.length)return!1;for(let r=0;r<u.length;r++)if(!d(u[r],o[r]))return!1;return!0}const l=(u,o)=>u===o;function f(u,o,d=l){if(u===o)return!0;const r=Object.keys(u),m=Object.keys(o);if(r.length!==m.length)return!1;for(let c of r)if(!d(u[c],o[c]))return!1;return!0}},2033:(Y,T,e)=>{"use strict";e.d(T,{$q:()=>f.$q,Aw:()=>l.Aw,Ch:()=>d.Ch,DP:()=>l.DP,F9:()=>l.F9,GV:()=>f.GV,Ib:()=>o.Ib,Ji:()=>l.Ji,Jy:()=>o.Jy,LI:()=>l.LI,N:()=>n.N,Pc:()=>u.P,SX:()=>l.SX,US:()=>t.U,Vv:()=>d.Vv,Y:()=>o.Y,Y6:()=>l.Y6,YP:()=>f.YP,Yi:()=>s.Y,Zr:()=>l.Zr,_m:()=>l._m,a2:()=>i.a,aK:()=>l.aK,aY:()=>l.aY,fh:()=>l.fh,fu:()=>l.fu,g0:()=>l.g0,iB:()=>u.i,jC:()=>f.jC,m$:()=>r.m$,nl:()=>d.nl,og:()=>l.og,pP:()=>r.pP,q2:()=>f.q2,r7:()=>f.r7,sV:()=>l.sV,vA:()=>s.v,vP:()=>o.vP,xI:()=>r.xI,zR:()=>l.zR});var t=e(12115),n=e(5109),i=e(18298),s=e(53678),l=e(83881),f=e(61113),u=e(86029),o=e(59957),d=e(96905),r=e(19447)},83881:(Y,T,e)=>{"use strict";e.d(T,{Aw:()=>U,DP:()=>v,F9:()=>w,Ji:()=>C,LI:()=>h,SX:()=>a,Y6:()=>R,Zr:()=>M,_m:()=>E,aK:()=>x,aY:()=>D,fh:()=>S,fu:()=>P,g0:()=>b,og:()=>O,sV:()=>I,zR:()=>K});var t=e(82897),n=e.n(t),i=e(67483),s=e(76152),l=e(30471),f=e(99098),u=e(52666),o=e(86029),d=e(59957),r=e(53678);function m(L){const V=L.columns.map(H=>{const{text:j,type:A,..._}=H;return{name:j?.length?j:H,config:_||{},values:[],type:A&&Object.values(f.fS).includes(A)?A:f.fS.other}});if(!(0,t.isArray)(L.rows))throw new Error(`Expected table rows to be array, got ${typeof L.rows}.`);for(const H of L.rows)for(let j=0;j<V.length;j++)V[j].values.push(H[j]);for(const H of V)if(H.type===f.fS.other){const j=P(H);j&&(H.type=j)}return{fields:V,refId:L.refId,meta:L.meta,name:L.name,length:L.rows.length}}function c(L){const V=[],H=[],j=L.datapoints||L.points;for(const _ of j)H.push(_[0]),V.push(_[1]);const A=[{name:f.Ls,type:f.fS.time,config:{},values:V},{name:f.M5,type:f.fS.number,config:{unit:L.unit},values:H,labels:L.tags}];return L.title&&(A[1].config.displayNameFromDS=L.title),{name:L.target||L.name,refId:L.refId,meta:L.meta,fields:A,length:H.length}}function p(L){const V=[],H=[];for(let j=0;j<L.data.length;j++){const A=L.data[j];V.push(A[1]),H.push(A[0])}return{name:L.label,fields:[{name:L.label||f.M5,type:f.fS.number,config:{},values:V},{name:f.Ls,type:f.fS.time,config:{unit:"dateTimeAsIso"},values:H}],length:V.length}}function g(L){const V=[{name:L.target,type:f.fS.other,labels:L.tags,config:{unit:L.unit,filterable:L.filterable},values:[]}];for(const H of L.datapoints)V[0].values.push(H);return{name:L.target,refId:L.target,meta:{json:!0},fields:V,length:L.datapoints.length}}const y=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function E(L,V){return L&&(L=L.toLowerCase(),L==="date"||L==="time")?f.fS.time:h(V)}function v(L){return L instanceof Date||(0,i.v9)(L)?f.fS.time:(0,t.isNumber)(L)?f.fS.number:(0,t.isString)(L)?f.fS.string:(0,t.isBoolean)(L)?f.fS.boolean:f.fS.other}function h(L){return L instanceof Date||(0,i.v9)(L)?f.fS.time:(0,t.isNumber)(L)?f.fS.number:(0,t.isString)(L)?y.test(L)?f.fS.number:L==="true"||L==="TRUE"||L==="True"||L==="false"||L==="FALSE"||L==="False"?f.fS.boolean:f.fS.string:(0,t.isBoolean)(L)?f.fS.boolean:f.fS.other}function P(L){if(L.name){const V=L.name.toLowerCase();if(V==="date"||V==="time")return f.fS.time}for(let V=0;V<L.values.length;V++){const H=L.values[V];if(H!=null)return h(H)}}const a=(L,V=!1)=>{for(const H of L.fields)if(!H.type||H.type===f.fS.other||V)return{...L,fields:L.fields.map(j=>j.type&&j.type!==f.fS.other&&!V?j:{...j,type:P(j)||f.fS.other})};return L},C=L=>Boolean(L&&L.hasOwnProperty("columns")),D=L=>Boolean(L&&L.hasOwnProperty("fields"));function b(L){if("fields"in L)return"length"in L&&L.fields[0]?.values?.get?L:new r.v(L);if(L.hasOwnProperty("type")&&L.type==="docs")return g(L);if(L.hasOwnProperty("datapoints")||L.hasOwnProperty("points"))return c(L);if(L.hasOwnProperty("data"))return L.hasOwnProperty("schema")?(0,d.vP)(L):p(L);if(L.hasOwnProperty("columns"))return m(L);if(Array.isArray(L))return(0,o.P)(L);throw console.warn("Can not convert",L),new Error("Unsupported data format")}const M=L=>{const{fields:V}=L,H=L.length,j=[];if(V.length===2){const{timeField:A,timeIndex:_}=I(L);if(A){const Q=V[_===0?1:0],re=V[_];for(let Z=0;Z<H;Z++)j.push([Q.values[Z],re.values[Z]]);return{alias:L.name,target:(0,l.CZ)(Q,L),datapoints:j,unit:V[0].config?V[0].config.unit:void 0,refId:L.refId,meta:L.meta}}}for(let A=0;A<H;A++){const _=[];for(let k=0;k<V.length;k++)_.push(V[k].values[A]);j.push(_)}return L.meta&&L.meta.json?{alias:V[0].name||L.name,target:V[0].name||L.name,datapoints:V[0].values,filterable:V[0].config?V[0].config.filterable:void 0,type:"docs"}:{columns:V.map(A=>{const{name:_,config:k}=A;if(k){const{...Q}=k;return Q.text=_,Q}return{text:_}}),type:"table",refId:L.refId,meta:L.meta,rows:j}};function x(L,V,H=!1){const j=L.fields[V];if(!j)return L;const A=[];for(let k=0;k<L.length;k++)A.push(k);const _=(0,s.Mo)(j,H);return A.sort(_),{...L,fields:L.fields.map(k=>({...k,values:k.values.map((Q,re)=>k.values[A[re]])}))}}function R(L){return{...L,fields:L.fields.map(V=>{const H=[...V.values];return H.reverse(),{...V,values:H}})}}function S(L,V){const H=[];for(const j of L.fields)H.push(j.values[V]);return H}function O(L){return U(L)}function U(L,V){return{fields:(V?L.fields.filter(V):L.fields).map(A=>{let _=A.values;return{name:A.name,type:A.type,config:A.config,values:_,labels:A.labels}}),refId:L.refId,meta:L.meta,name:L.name}}const I=L=>{for(let V=0;V<L.fields.length;V++)if(L.fields[V].type===f.fS.time)return{timeField:L.fields[V],timeIndex:V};return{}};function F(L){const V=a(b(L));if(V.fields&&V.fields.length)for(const H of V.fields)H.state=null;return V}function w(L){return!L||!(0,t.isArray)(L)?[]:L.map(V=>F(V))}function K(L,V){const{series:H,annotations:j}=L;if(L.state===u.Gu.Loading&&H.length===0)return V||(V=L),{...V,state:u.Gu.Loading,request:L.request};const A=performance.now(),_=H.map(re=>F(re)),k=w(j),Q=performance.now();return{...L,series:_,annotations:k,timings:{dataProcessingTime:Q-A}}}},19447:(Y,T,e)=>{"use strict";e.d(T,{m$:()=>l,pP:()=>i,xI:()=>s});var t=e(99098),n=e(83881);function i(f){return f.fields.length>2?!1:Boolean(f.fields.find(u=>u.type===t.fS.time))}function s(f){return!f.find(u=>!i(u))}function l(f){for(let u=0;u<f.length;u++){const o=(0,n.sV)(f[u]);if(o.timeField!==void 0&&o.timeIndex!==void 0)return!0}return!1}},10753:(Y,T,e)=>{"use strict";e.d(T,{K:()=>i,Z:()=>s});var t=e(75849);let n=()=>t.Ys;const i=l=>{n=l??n},s=l=>l?.timeZone??n()??t.Ys},47406:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{isMathString:()=>l,isValid:()=>u,parse:()=>f,parseDateMath:()=>o,roundToFiscal:()=>d});var t=e(82897),n=e.n(t),i=e(67483);const s=["y","M","w","d","h","m","s","Q"];function l(r){return r?!!(typeof r=="string"&&(r.substring(0,3)==="now"||r.includes("||"))):!1}function f(r,m,c,p){if(r){if(typeof r!="string")return(0,i.v9)(r)?r:(0,t.isDate)(r)?(0,i.CQ)(r):void 0;{let g,y="",E,v;return r.substring(0,3)==="now"?(g=(0,i.GY)(c),y=r.substring(3)):(E=r.indexOf("||"),E===-1?(v=r,y=""):(v=r.substring(0,E),y=r.substring(E+2)),g=(0,i.CQ)(v,i.VJ)),y.length?o(y,g,m,p):g}}}function u(r){const m=f(r);return m&&(0,i.v9)(m)?m.isValid():!1}function o(r,m,c,p=0){const g=r.replace(/\s/g,""),y=m;let E=0;const v=g.length;for(;E<v;){const h=g.charAt(E++);let P,a,C,D=!1;if(h==="/")P=0;else if(h==="+")P=1;else if(h==="-")P=2;else return;if(isNaN(parseInt(g.charAt(E),10)))a=1;else if(g.length===2)a=parseInt(g.charAt(E),10);else{const b=E;for(;!isNaN(parseInt(g.charAt(E),10));)if(E++,E>10)return;a=parseInt(g.substring(b,E),10)}if(P===0&&a!==1)return;if(C=g.charAt(E++),C==="f"&&(C=g.charAt(E++),D=!0),(0,t.includes)(s,C))P===0?c?D?d(p,y,C,c):y.endOf(C):D?d(p,y,C,c):y.startOf(C):P===1?y.add(a,C):P===2&&y.subtract(a,C);else return}return y}function d(r,m,c,p){switch(c){case"y":return p?d(r,m,c,!1).add(11,"M").endOf("M"):m.subtract((m.month()-r+12)%12,"M").startOf("M"),m;case"Q":return p?d(r,m,c,!1).add(2,"M").endOf("M"):m.subtract((m.month()-r+3)%3,"M").startOf("M"),m;default:return}}},76282:(Y,T,e)=>{"use strict";e.d(T,{IA:()=>m,Ks:()=>u,RA:()=>f,iX:()=>o,jO:()=>r,qb:()=>d,vT:()=>l});var t=e(87882),n=e(68813),i=e(17454);const s={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function l(c,p=!0){if((0,t.Z)(c.start,c.end))return"";const g=(0,i.Z)(c);return Object.entries(g).reduce((y,[E,v])=>v&&v!==0&&!(E==="seconds"&&!p&&y)?y+`${y!==""?" ":""}${v}${s[E][0]}`:y,"")}function f(c){return c.split(" ").reduce((p,g)=>{const y=g.match(/(\d+)(.+)/),E=y?.[1],v=y?.[2];if(!(E&&v))return p;const h=Object.entries(s).find(([a,C])=>C?.includes(y[2])),P=parseInt(E,10);return h?{...p,[h[0]]:P}:p},{})}function u(c,p){return(0,n.Z)(c,p)}function o(c){const p=new Date;return u(p,c).getTime()-p.getTime()}function d(c){return!isNaN(Date.parse(c))}function r(c){for(const p of c.trim().split(" ")){const g=p.match(/(\d+)(.+)/);if(g===null||g.length!==3||!Object.entries(s).find(([E,v])=>v?.includes(g[2]))?.[0])return!1}return!0}function m(c){const p=["h","m","s","ms","us","\xB5s","ns"];for(const g of c.trim().split(" ")){const y=g.match(/([0-9]*[.]?[0-9]+)(.+)/);if(y===null||y.length!==3||!p.includes(y[2]))return!1}return!0}},82410:(Y,T,e)=>{"use strict";e.d(T,{Ji:()=>s,U6:()=>l,zf:()=>i});const t="YYYY-MM-DD HH:mm:ss",n="YYYY-MM-DD HH:mm:ss.SSS";class i{constructor(){this.fullDate=t,this.fullDateMS=n,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(o){this.fullDate=o.fullDate,this.interval=o.interval,o.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=s({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=s({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=s({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=s({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=s({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(o){return`time:${o?this.fullDateMS:this.fullDate}`}}function s(u,o,d){if(f())return d??t;!o&&navigator&&(o=[...navigator.languages]);const r=new Intl.DateTimeFormat(o||void 0,u),m=r.formatToParts(new Date),p={year:"YYYY",month:"MM",day:"DD",hour:r.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return m.map(g=>p[g.type]||g.value).join("")}const l=new i,f=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},77258:(Y,T,e)=>{"use strict";e.d(T,{E8:()=>u,Fm:()=>o,Hk:()=>d,dq:()=>l,lf:()=>f});var t=e(6835),n=e.n(t),i=e(10753),s=e(82410);const l=(c,p)=>m(c,(0,i.Z)(p)).format(r(p)),f=(c,p)=>m(c,(0,i.Z)(p)).format(),u=(c,p)=>m(c,(0,i.Z)(p)).fromNow(),o=(c,p)=>m(c,(0,i.Z)(p)).format(`${s.U6.fullDate} z`),d=(c,p)=>m(c,(0,i.Z)(p)).format("z"),r=c=>c?.defaultWithMS?c?.format??s.U6.fullDateMS:c?.format??s.U6.fullDate,m=(c,p)=>{const g=c,y=n().tz.zone(p);if(y&&y.name)return n().utc(g).tz(y.name);switch(p){case"utc":return n().utc(g);default:return n().utc(g).local()}}},44540:(Y,T,e)=>{"use strict";e.d(T,{$8:()=>s.$8,CQ:()=>i.CQ,C_:()=>i.C_,D2:()=>i.D2,E8:()=>f.E8,Fm:()=>f.Fm,GY:()=>i.GY,Hk:()=>f.Hk,IA:()=>o.IA,J:()=>u.J,Ji:()=>l.Ji,K7:()=>d.K,Kd:()=>i.Kd,Ks:()=>o.Ks,Ls:()=>i.Ls,Pr:()=>s.Pr,RA:()=>o.RA,RQ:()=>s.RQ,Rn:()=>t,U6:()=>l.U6,VJ:()=>i.VJ,Vs:()=>s.Vs,ZV:()=>s.ZV,Ze:()=>d.Z,cT:()=>n,dq:()=>f.dq,iX:()=>o.iX,i_:()=>i.i_,ig:()=>i.ig,jN:()=>i.jN,jO:()=>o.jO,k4:()=>i.k4,lf:()=>f.lf,np:()=>i.Ks,qb:()=>o.qb,v9:()=>i.v9,vT:()=>o.vT,zf:()=>l.zf,zh:()=>i.zh});var t=e(47406),n=e(47891),i=e(67483),s=e(56808),l=e(82410),f=e(77258),u=e(29826),o=e(76282),d=e(10753)},67483:(Y,T,e)=>{"use strict";e.d(T,{CQ:()=>m,C_:()=>c,D2:()=>u,GY:()=>p,Kd:()=>l,Ks:()=>r,Ls:()=>E,VJ:()=>i,i_:()=>s,ig:()=>g,jN:()=>y,k4:()=>f,v9:()=>o,zh:()=>d});var t=e(36365),n=e.n(t);const i=n().ISO_8601,s=v=>{n().locale(v)},l=()=>n().locale(),f=()=>n().localeData(),u=v=>v===null||typeof v=="string"||typeof v=="number"||v instanceof Date||Array.isArray(v)&&v.every(h=>typeof h=="string"||typeof h=="number")||o(v),o=v=>n().isMoment(v),d=(v,h)=>n().utc(v,h),r=(v,h)=>n().duration(v,h),m=(v,h)=>n()(v,h),c=v=>m(v),p=(v,h,P)=>v==="utc"?d(h,P):m(h,P),g=v=>n().weekdays().findIndex(h=>h.toLowerCase()===v.toLowerCase()),y=v=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(h=>h.toLowerCase()===v.toLowerCase()),E=v=>{const h="-weekStart",P=l().replace(h,""),a=v?y(v):-1;a!==-1?n().locale(P+h,{parentLocale:P,week:{dow:a}}):s(P)}},29826:(Y,T,e)=>{"use strict";e.d(T,{J:()=>d});var t=e(82897),n=e.n(t),i=e(6835),s=e.n(i),l=e(10753),f=e(47406),u=e(82410),o=e(67483);const d=(c,p)=>(0,o.v9)(c)?c:typeof c=="string"?r(c,p):m(c,p),r=(c,p)=>{if(c.indexOf("now")!==-1)return(0,f.isValid)(c)&&(0,f.parse)(c,p?.roundUp,p?.timeZone,p?.fiscalYearStartMonth)||s()();const g=(0,l.Z)(p),y=s().tz.zone(g),E=p?.format??u.U6.fullDate;if(y&&y.name)return s().tz(c,E,y.name);switch((0,t.lowerCase)(g)){case"utc":return s().utc(c,E);default:return s()(c,E)}},m=(c,p)=>{const g=c,y=(0,l.Z)(p),E=s().tz.zone(y);if(E&&E.name)return s().tz(g,E.name);switch((0,t.lowerCase)(y)){case"utc":return s().utc(g);default:return s()(g)}}},47891:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{calculateInterval:()=>C,convertRawToRange:()=>y,describeInterval:()=>M,describeTextRange:()=>m,describeTimeRange:()=>c,describeTimeRangeAbbreviation:()=>g,intervalToMs:()=>R,intervalToSeconds:()=>x,isFiscal:()=>v,isRelativeTimeRange:()=>h,isValidTimeSpan:()=>p,msRangeToTimeString:()=>a,relativeToTimeRange:()=>U,roundInterval:()=>S,secondsToHms:()=>P,timeRangeToRelative:()=>O});var t=e(82897),n=e.n(t),i=e(47406),s=e(77258),l=e(67483),f=e(29826);const u={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},o=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],d=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],r={};(0,t.each)(o,I=>{r[I.from+" to "+I.to]=I}),(0,t.each)(d,I=>{r[I.from+" to "+I.to]=I});function m(I){const F=I.indexOf("+")!==0;I.indexOf("now")===-1&&(I=(F?"now-":"now")+I);let w=r[I+" to now"];if(w)return w;F?w={from:I,to:"now"}:w={from:"now",to:I};const K=/^now([-+])(\d+)(\w)/.exec(I);if(K){const L=K[3],V=parseInt(K[2],10),H=u[L];H&&(w.display=F?"Last ":"Next ",w.display+=V+" "+H.display,w.section=H.section,V>1&&(w.display+="s"))}else w.display=w.from+" to "+w.to,w.invalid=!0;return w}function c(I,F){const w=r[I.from.toString()+" to "+I.to.toString()];if(w)return w.display;const K={timeZone:F};if((0,l.v9)(I.from)&&(0,l.v9)(I.to))return(0,s.dq)(I.from,K)+" to "+(0,s.dq)(I.to,K);if((0,l.v9)(I.from)){const L=i.parse(I.to,!0,"utc");return L?(0,s.dq)(I.from,K)+" to "+(0,s.E8)(L,K):""}if((0,l.v9)(I.to)){const L=i.parse(I.from,!1,"utc");return L?(0,s.E8)(L,K)+" to "+(0,s.dq)(I.to,K):""}return I.to.toString()==="now"?m(I.from).display:I.from.toString()+" to "+I.to.toString()}const p=I=>I.indexOf("$")===0||I.indexOf("+$")===0?!0:m(I).invalid!==!0,g=(I,F)=>{if((0,l.v9)(I.from))return(0,s.Hk)(I.from,{timeZone:F});const w=i.parse(I.from,!0);return w?(0,s.Hk)(w,{timeZone:F}):""},y=(I,F,w,K)=>{const L=(0,f.J)(I.from,{roundUp:!1,timeZone:F,fiscalYearStartMonth:w,format:K}),V=(0,f.J)(I.to,{roundUp:!0,timeZone:F,fiscalYearStartMonth:w,format:K});return i.isMathString(I.from)||i.isMathString(I.to)?{from:L,to:V,raw:I}:{from:L,to:V,raw:{from:L,to:V}}};function E(I){return typeof I=="string"?I.indexOf("now")>=0:!1}function v(I){return typeof I.raw.from=="string"&&I.raw.from.indexOf("f")>0?!0:typeof I.raw.to=="string"&&I.raw.to.indexOf("f")>0}function h(I){return E(I.from)||E(I.to)}function P(I){const F=Math.floor(I/31536e3);if(F)return F+"y";const w=Math.floor(I%31536e3/86400);if(w)return w+"d";const K=Math.floor(I%31536e3%86400/3600);if(K)return K+"h";const L=Math.floor(I%31536e3%86400%3600/60);if(L)return L+"m";const V=Math.floor(I%31536e3%86400%3600%60);if(V)return V+"s";const H=Math.floor(I*1e3);return H?H+"ms":"less than a millisecond"}function a(I){const F=Number((I/1e3).toFixed()),w=Math.floor(F/60/60),K=Math.floor(F/60)-w*60,L=Number((F%60).toFixed());let V=w?w+"h":"",H=K?K+"min":"",j=L?L+"sec":"";return V&&H?V=V+" ":V=V,(H||V)&&j?H=H+" ":H=H,V+H+j||"less than 1sec"}function C(I,F,w){let K=1;w&&(K=R(w));let L=S((I.to.valueOf()-I.from.valueOf())/F);return K>L&&(L=K),{intervalMs:L,interval:P(L/1e3)}}const D=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,b={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function M(I){if(Number(I))return{sec:b.s,type:"s",count:parseInt(I,10)};const F=I.match(D);if(!F||!(0,t.has)(b,F[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(b).join(", ")}"`);return{sec:b[F[2]],type:F[2],count:parseInt(F[1],10)}}function x(I){const F=M(I);return F.sec*F.count}function R(I){const F=M(I);return F.sec*1e3*F.count}function S(I){switch(!0){case I<10:return 1;case I<15:return 10;case I<35:return 20;case I<75:return 50;case I<150:return 100;case I<350:return 200;case I<750:return 500;case I<1500:return 1e3;case I<3500:return 2e3;case I<7500:return 5e3;case I<12500:return 1e4;case I<17500:return 15e3;case I<25e3:return 2e4;case I<45e3:return 3e4;case I<9e4:return 6e4;case I<21e4:return 12e4;case I<45e4:return 3e5;case I<75e4:return 6e5;case I<105e4:return 9e5;case I<15e5:return 12e5;case I<27e5:return 18e5;case I<54e5:return 36e5;case I<9e6:return 72e5;case I<162e5:return 108e5;case I<324e5:return 216e5;case I<864e5:return 432e5;case I<6048e5:return 864e5;case I<18144e5:return 6048e5;case I<36288e5:return 2592e6;default:return 31536e6}}function O(I,F=(0,l.CQ)()){const w=F.unix()-I.from.unix(),K=F.unix()-I.to.unix();return{from:w,to:K}}function U(I,F=(0,l.CQ)()){const w=(0,l.CQ)(F).subtract(I.from,"s"),K=I.to===0?(0,l.CQ)(F):(0,l.CQ)(F).subtract(I.to,"s");return{from:w,to:K,raw:{from:w,to:K}}}},56808:(Y,T,e)=>{"use strict";e.d(T,{$8:()=>r,Pr:()=>o,RQ:()=>f,Vs:()=>u,ZV:()=>d});var t=e(82897),n=e.n(t),i=e(6835),s=e.n(i),l=e(10753),f=(E=>(E.default="",E.localBrowserTime="browser",E.utc="utc",E))(f||{});const u=E=>{switch((0,l.Z)({timeZone:E})){case"browser":return"Local browser time";case"utc":return"UTC";default:return E}},o=(E,v)=>{const h=m(E,v);return h||p(E,v)},d=(0,t.memoize)((E=!1)=>{const v=[];return E===!0?v.push("","browser","utc"):E&&v.push(...E),s().tz.names().reduce((h,P)=>{const a=y[P];return!Array.isArray(a)||a.length===0||h.push(P),h},v)}),r=(0,t.memoize)((E=!1)=>{const h=d(E).reduce((P,a)=>{const C=a.indexOf("/");if(C===-1){const b="";return P[b]=P[b]??[],P[b].push(a),P}const D=a.slice(0,C);return P[D]=P[D]??[],P[D].push(a),P},{});return Object.keys(h).map(P=>({name:P,zones:h[P]}))}),m=(E,v)=>{switch(E){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:E,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const h=(0,l.Z)(),a=(h==="browser"||h==="utc"?m(h,v):p(h,v))??{};return{countries:y[h]??[],abbreviation:"",offsetInMins:0,...a,ianaName:a.ianaName,name:"Default",zone:E}}case"browser":{const h=s().tz.guess(!0),P=p(h,v)??{};return{countries:y[h]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...P,name:"Browser Time",ianaName:P.ianaName,zone:E}}default:return}},c=E=>/^(\+|\-).+/.test(E)?"":E,p=(E,v)=>{const h=s().tz.zone(E);if(h)return{name:E,ianaName:h.name,zone:E,countries:y[E]??[],abbreviation:c(h.abbr(v)),offsetInMins:h.utcOffset(v)}},g={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},y=(()=>s().tz.countries().reduce((E,v)=>s().tz.zonesForCountry(v).reduce((P,a)=>{P[a]||(P[a]=[]);const C=g[v];return C&&P[a].push({code:v,name:C}),P},E),{}))()},50444:(Y,T,e)=>{"use strict";e.d(T,{F:()=>s});var t=e(53943),n=e(84946),i=e(90801);class s{constructor(){this.subscribers=new Map,this.emitter=new t.Z}publish(u){this.emitter.emit(u.type,u)}subscribe(u,o){return this.getStream(u).subscribe({next:o})}getStream(u){return new n.y(o=>{const d=r=>{o.next(r)};return this.emitter.on(u.type,d),this.subscribers.set(d,o),()=>{this.emitter.off(u.type,d),this.subscribers.delete(d)}})}newScopedBus(u,o){return new l([u],this,o)}emit(u,o){typeof u=="string"?this.emitter.emit(u,{type:u,payload:o}):this.emitter.emit(u.name,{type:u.name,payload:o})}on(u,o,d){if(o.wrapper=r=>{o(r.payload)},typeof u=="string"?this.emitter.on(u,o.wrapper):this.emitter.on(u.name,o.wrapper),d){const r=d.$on("$destroy",()=>{this.off(u,o),r()})}}off(u,o){if(typeof u=="string"){this.emitter.off(u,o.wrapper);return}this.emitter.off(u.name,o.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[u,o]of this.subscribers)o.complete(),this.subscribers.delete(u)}}class l{constructor(u,o,d){this.path=u,this.eventBus=o,this.filter=r=>this.filterConfig.onlyLocal?r.origin===this:!0,this.filterConfig=d??{onlyLocal:!1}}publish(u){u.origin||(u.origin=this),this.eventBus.publish(u)}getStream(u){return this.eventBus.getStream(u).pipe((0,i.h)(this.filter))}subscribe(u,o){return this.getStream(u).subscribe({next:o})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(u,o){return new l([...this.path,u],this,o)}}},23588:(Y,T,e)=>{"use strict";e.d(T,{Pl:()=>f,es:()=>n,n1:()=>l,v9:()=>s,xH:()=>i});var t=e(55391);class n extends t.R{}n.type="data-hover";class i extends t.m{}i.type="data-hover-clear";class s extends t.R{}s.type="data-select";class l extends t.R{}l.type="annotation-event";class f extends t.R{}f.type="dashboard-loaded"},84336:(Y,T,e)=>{"use strict";e.d(T,{X:()=>n});const t=new Set;function n(i){if(t.has(i))throw new Error(`There is already an event defined with type '${i}'`);return t.add(i),{name:i}}},69616:(Y,T,e)=>{"use strict";e.d(T,{Fb:()=>i.F,Pl:()=>s.Pl,R_:()=>n.R,Xw:()=>t.X,es:()=>s.es,mA:()=>n.m,n1:()=>s.n1,v9:()=>s.v9,xH:()=>s.xH});var t=e(84336),n=e(55391),i=e(50444),s=e(23588)},55391:(Y,T,e)=>{"use strict";e.d(T,{R:()=>n,m:()=>t});class t{constructor(){this.type=this.__proto__.constructor.type}}class n extends t{constructor(s){super(),this.payload=s}}},96949:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>n});var t=e(53908);class n extends t.B{}},6194:(Y,T,e)=>{"use strict";e.d(T,{U_:()=>c,gE:()=>y,je:()=>g});var t=e(82897),n=e.n(t),i=e(83881),s=e(29826),l=e(67483),f=e(99098),u=e(31290),o=e(2576),d=e(2703),r=e(99601);const m={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function c(v){if(!v||(0,t.isEmpty)(v)||!v.field)return p;const h=v.field,P=h.config??{};let a=P.unit,C=a&&(m[a]||a.startsWith("time:")),D=!1;if(h.type===f.fS.time&&!C){if(a="dateTimeAsSystem",C=!0,h.values&&h.values.length>1){let I=h.values[0],F=h.values[h.values.length-1];typeof I=="string"?(I=(0,s.J)(I).unix(),F=(0,s.J)(F).unix()):(I/=1e3,F/=1e3),D=Math.abs(F-I)<60}}else if(h.type===f.fS.boolean)(0,d.br)(a)||(a="bool");else if(!a&&h.type===f.fS.string)a="string";else if(h.type===f.fS.enum)return g(v.theme,P.type?.enum);const b=a?.startsWith("currency"),M=(0,d.br)(a),x=h.type===f.fS.number,S=!C&&!b&&!M&&!(a==="locale")&&x&&P.decimals==null,O=(0,d.Cf)(a||"none"),U=(0,r.NI)(h,v.theme);return(I,F)=>{const{mappings:w}=P,K=a==="string";C&&typeof I=="string"&&(I=(0,l.zh)(I).valueOf());let L=K?NaN:(0,u.I)(I),V,H,j,A,_,k;if(w&&w.length>0){const re=(0,o.vh)(w,I);re&&(re.text!=null&&(V=re.text),re.color!=null&&(A=v.theme.visualization.getColorByName(re.color)),re.icon!=null&&(_=re.icon))}if(!Number.isNaN(L)){if(V==null&&!(0,t.isBoolean)(I)){let re;S&&F!=null?(re=O(L,F,null,v.timeZone,D),re.text=+re.text+""):re=O(L,P.decimals,null,v.timeZone,D),V=re.text,j=re.suffix,H=re.prefix}if(A==null){const re=U(L);A=re.color,k=re.percent}}if(V==null&&(0,t.isArray)(I)&&(V=(0,t.join)(I,", ")),V==null&&(V=(0,t.toString)(I),V||(P.noValue?V=P.noValue:V="")),!A){const re=U(-1/0);A=re.color,k=re.percent}const Q={text:V,numeric:L,prefix:H,suffix:j,color:A};return _!=null&&(Q.icon=_),k!=null&&(Q.percent=k),Q}}function p(v){return{text:(0,t.toString)(v),numeric:(0,u.I)(v)}}function g(v,h){const P={text:h?.text??[],color:h?.color??[]};return P.color=P.color.map(a=>v.visualization.getColorByName(a)),a=>{if(a==null)return{text:"",numeric:NaN};const C=+a;let D=P.text[C];D==null&&(D=`${a}`);let b=P.color[C];if(b==null){const{palette:M}=v.visualization;b=M[C%M.length],P.color[C]=b}return{text:D,numeric:C,color:b}}}function y(){return v=>({text:(0,i.DP)(v)==="other"?`${JSON.stringify(v,E())}`:`${v}`,numeric:null})}const E=()=>{const v=new WeakSet;return(h,P)=>{if(typeof P=="object"&&P!==null){if(v.has(P))return;v.add(P)}return P}}},72990:(Y,T,e)=>{"use strict";e.d(T,{QY:()=>g,WO:()=>m,YO:()=>y,fD:()=>p});var t=e(32701),n=e(24593),i=e.n(n),s=e(28550),l=e(5680),f=e(33750),u=e(53768),o=e(53908),d=e(99601),r=e(92103);const m=new o.B(()=>[{id:u.S.Fixed,name:"Single color",description:"Set a specific color",getCalculator:E},{id:u.S.Shades,name:"Shades of a color",description:"Select shades of a specific color",getCalculator:v},{id:u.S.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(h,P)=>(a,C,D)=>{const b=D??r.yM;return P.visualization.getColorByName(b.color)}},new c({id:u.S.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:h=>h.visualization.palette}),new c({id:u.S.PaletteClassicByName,name:"Classic palette (by series name)",isContinuous:!1,isByValue:!1,useSeriesName:!0,getColors:h=>h.visualization.palette.filter(P=>l.getContrastRatio(h.visualization.getColorByName(P),h.colors.background.primary)>=h.colors.contrastThreshold)}),new c({id:u.S.ContinuousGrYlRd,name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:h=>["green","yellow","red"]}),new c({id:u.S.ContinuousRdYlGr,name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:h=>["red","yellow","green"]}),new c({id:u.S.ContinuousBlYlRd,name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:h=>["dark-blue","super-light-yellow","dark-red"]}),new c({id:u.S.ContinuousYlRd,name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:h=>["super-light-yellow","dark-red"]}),new c({id:u.S.ContinuousBlPu,name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:h=>["blue","purple"]}),new c({id:u.S.ContinuousYlBl,name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:h=>["super-light-yellow","dark-blue"]}),new c({id:u.S.ContinuousBlues,name:"Blues",isContinuous:!0,isByValue:!0,getColors:h=>["panel-bg","dark-blue"]}),new c({id:u.S.ContinuousReds,name:"Reds",isContinuous:!0,isByValue:!0,getColors:h=>["panel-bg","dark-red"]}),new c({id:u.S.ContinuousGreens,name:"Greens",isContinuous:!0,isByValue:!0,getColors:h=>["panel-bg","dark-green"]}),new c({id:u.S.ContinuousPurples,name:"Purples",isContinuous:!0,isByValue:!0,getColors:h=>["panel-bg","dark-purple"]})]);class c{constructor(P){this.id=P.id,this.name=P.name,this.description=P.description,this.getNamedColors=P.getColors,this.isContinuous=P.isContinuous,this.isByValue=P.isByValue,this.useSeriesName=P.useSeriesName}getColors(P){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===P?this.colorCache:(this.colorCache=this.getNamedColors(P).map(P.visualization.getColorByName),this.colorCacheTheme=P,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,t.hD)(this.colorCache)),this.interpolator}getCalculator(P,a){const C=this.getColors(a);return this.isByValue?this.isContinuous?(D,b,M)=>this.getInterpolator()(b):(D,b,M)=>C[b*(C.length-1)]:this.useSeriesName?(D,b,M)=>C[Math.abs(i()(P.name))%C.length]:(D,b,M)=>{const x=P.state?.seriesIndex??0;return C[x%C.length]}}}function p(h){return m.get(h.config.color?.mode??u.S.Thresholds)}function g(h){return m.get(h??u.S.Thresholds)}function y(h,P){const a=p(h);if(!a.isByValue)return{color:a.getCalculator(h,P)(0,0),threshold:r.yM,percent:1};const C=(0,d.NI)(h,P),D=h.config.color?.seriesBy??"last",M=(0,f.Kx)({field:h,reducers:[D]})[D]??0;return C(M)}function E(h,P){return()=>P.visualization.getColorByName(h.config.color?.fixedColor??u.R)}function v(h,P){return()=>{const a=P.visualization.getColorByName(h.config.color?.fixedColor??u.R),C=[a],D=6,b=10,M=35,x=35;for(let S=1;S<D;S++)C.push((0,s.Z)(a).spin(S/D*b).brighten(S/D*M).toHexString()),C.push((0,s.Z)(a).spin(-(S/D)*b).darken(S/D*x).toHexString());const R=h.state?.seriesIndex??0;return C[R%C.length]}}},92156:(Y,T,e)=>{"use strict";e.d(T,{E1:()=>p,HU:()=>m,cB:()=>E,dE:()=>y,gG:()=>C,nG:()=>v,n_:()=>c,pZ:()=>g,r5:()=>x,sg:()=>D});var t=e(82897),n=e.n(t),i=e(12115),s=e(83881),l=e(50035),f=e(33750),u=e(90748),o=e(99098),d=e(6194),r=e(30471);const m="__series.name",c="__field.displayName",p="__field.labels",g="__calc",y="__cell_",E=25,v=S=>{const{replaceVariables:O,reduceOptions:U,timeZone:I,theme:F}=S,w=U.calcs.length?U.calcs:[f.gz.last],K=[],L=(0,l.sq)(U.fields?{id:u.mi.byRegexp,options:U.fields}:{id:u.mi.numeric}),V=S.data??[],H=U.limit?U.limit:E;let j=!1;for(let A=0;A<V.length&&!j;A++){const _=V[A],{timeField:k}=(0,s.sV)(_),Q=new i.U(_);for(let re=0;re<_.fields.length&&!j;re++){const Z=_.fields[re],oe=Z.getLinks;if(!L(Z,_,V))continue;let G=Z.config;Z.state?.range&&(G={...G,...Z.state?.range});let le=Z.config.displayName??"";const fe=Z.display??(0,d.U_)({field:Z,theme:S.theme,timeZone:I});if(U.values)for(let ae=0;ae<Z.values.length;ae++){Z.state=P(Z,K.length);const de=R(Z,ae),ee=fe(Z.values[ae]),me=h(_,Z,ae,O,de),q=a(me,S.fieldConfig,F);if(K.push({name:"",field:G,display:{...ee,title:me,color:q??ee.color},view:Q,colIndex:re,rowIndex:ae,getLinks:oe?()=>oe({valueRowIndex:ae}):()=>[],hasLinks:C(Z)}),K.length>=H){j=!0;break}}else{const ae=(0,f.Kx)({field:Z,reducers:w});for(const de of w){const ee=Z.state?.scopedVars??{};ee[g]={value:de,text:de};const me=fe(ae[de]);le!==""?me.title=O(le,ee):me.title=(0,r.CZ)(Z,_,V);let q;S.sparkline&&(q={y:_.fields[re],x:k},de===f.gz.last?q.highlightIndex=q.y.values.length-1:de===f.gz.first&&(q.highlightIndex=0)),K.push({name:de,field:G,display:me,sparkline:q,view:Q,colIndex:re,getLinks:oe?()=>oe({calculatedValue:me}):()=>[],hasLinks:C(Z)})}}}}return K.length===0&&K.push(b(S)),K};function h(S,O,U,I,F){const w=O.config.displayName;if(w)return w.indexOf(y)?I(x(w),F):I(w,F);let K=[],L=0;for(const V of S.fields)if(V!==O)if(V.type===o.fS.string){const H=V.values[U]??"",j=V.display?V.display(H).text:H;j.length>0&&K.push(j)}else V.type===o.fS.number&&L++;return(L||K.length===0)&&K.push((0,r.CZ)(O,S)),K.join(" ")}function P(S,O){return{...S.state,seriesIndex:O}}function a(S,O,U){for(const I of O.overrides)if(I.matcher.id==="byName"&&I.matcher.options===S){for(const F of I.properties)if(F.id==="color"&&F.value)return U.visualization.getColorByName(F.value.fixedColor)}return null}function C(S){return S.config?.links?.length?S.config.links.length>0:!1}function D(S){let O="",U="",I="",F="";for(let w=0;w<S.length;w++){const K=S[w].display;K.text&&K.text.length>U.length&&(U=K.text),K.title&&K.title.length>O.length&&(O=K.title),K.prefix&&K.prefix.length>I.length&&(I=K.prefix),K.suffix&&K.suffix.length>F.length&&(F=K.suffix)}return{text:U,title:O,suffix:F,prefix:I}}function b(S){const O="No data",{fieldConfig:U,timeZone:I}=S,{defaults:F}=U,K=(0,d.U_)({field:{type:o.fS.other,config:F},theme:S.theme,timeZone:I})(null),L=M(K,O);return{name:O,field:{...F,max:F.max??0,min:F.min??0},display:{text:L,numeric:0,color:K.color},hasLinks:!1}}function M(S,O){return!S||(0,t.isEmpty)(S.text)?O:S.text}function x(S){return S.replace(/\${__cell_(\d+)}|\[\[__cell_(\d+)\]\]|\$__cell_(\d+)/g,(O,U,I,F)=>`\${__data.fields[${U??I??F}]}`)}function R(S,O){return S.state?.scopedVars?.__dataContext?{...S.state?.scopedVars,__dataContext:{value:{...S.state?.scopedVars?.__dataContext.value,rowIndex:O}}}:S.state?.scopedVars}},76095:(Y,T,e)=>{"use strict";e.d(T,{Cc:()=>R,Of:()=>x,SM:()=>h,Xu:()=>v,gb:()=>b,oB:()=>M});var t=e(82897),n=e.n(t),i=e(66111),s=e(83272),l=e(40538),f=e(83881),u=e(96905),o=e(5680),d=e(33750),r=e(50035),m=e(99098),c=e(53768),p=e(72196),g=e(94976),y=e(6194),E=e(30779);function v(O){let U=null,I=null;const F=[d.gz.min,d.gz.max];for(const w of O)for(const K of w.fields)if(K.type===m.fS.number){const L=(0,d.Kx)({field:K,reducers:F}),V=L[d.gz.min],H=L[d.gz.max];(U===null||V<U)&&(U=V),(I===null||H>I)&&(I=H)}return{min:U,max:I,delta:(I??0)-(U??0)}}function h(O){if(!O.data)return[];const U=O.fieldConfig;if(!U)return O.data;const I=O.fieldConfigRegistry??E.N;let F=0,w;const K=[];if(U.overrides)for(const L of U.overrides){const V=r.Ls.get(L.matcher.id);V&&K.push({match:V.get(L.matcher.options),properties:L.properties})}return O.data.map((L,V)=>{const H={...L};H.fields=H.fields.map(j=>({...j,config:(0,t.cloneDeep)(j.config),state:{...j.state}}));for(const j of H.fields){const A=j.config;j.state.scopedVars={__dataContext:{value:{data:O.data,frame:H,frameIndex:V,field:j}}};const _={field:j,data:O.data,dataFrameIndex:V,replaceVariables:O.replaceVariables,fieldConfigRegistry:I};C(A,U.defaults,_);for(const re of K)if(re.match(j,H,O.data))for(const Z of re.properties)a(A,Z,_);let k=j.type;if(!k||k===m.fS.other){const re=(0,f.fu)(j);re&&(k=re)}let Q;if(j.type===m.fS.number){!w&&(!(0,t.isNumber)(A.min)||!(0,t.isNumber)(A.max))&&(w=v(O.data));const re=A.min??w.min,Z=A.max??w.max;Q={min:re,max:Z,delta:Z-re}}j.state.seriesIndex=F,j.state.range=Q,j.type=k,j.type!==m.fS.time&&F++,j.display=(0,y.U_)({field:j,theme:O.theme,timeZone:O.timeZone}),j.config.unit!=="dateTimeFromNow"&&(j.display=P(j.display,2500)),j.getLinks=M(H,j,j.state.scopedVars,_.replaceVariables,O.timeZone)}return H})}function P(O,U=2500){const I=new Map;for(let F=-1;F<=15;F++)I.set(F,new Map);return(F,w)=>{let K=I.get(w??-1),L=K.get(F);return L||(K.size===U&&K.clear(),L=O(F,w),L.color&&(L.color=(0,o.asHexString)(L.color)),K.set(F,L)),L}}function a(O,U,I){const w=I.fieldConfigRegistry.getIfExists(U.id);if(!w)return;const K=w.process(U.value,I,w.settings);K==null?w.isCustom&&O.custom?(0,t.unset)(O.custom,w.path):(0,t.unset)(O,w.path):w.isCustom?(O.custom||(O.custom={}),(0,t.set)(O.custom,w.path,K)):(0,t.set)(O,w.path,K)}function C(O,U,I){O.links&&U.links&&(O.links=[...O.links,...U.links]);for(const F of I.fieldConfigRegistry.list())F.isCustom&&!O.custom&&(O.custom={}),D(F.isCustom?O.custom:O,F.isCustom?U.custom:U,F,I);b(O)}function D(O,U,I,F){const w=(0,t.get)(O,I.path);if(w==null){const K=F.fieldConfigRegistry.getIfExists(I.id);if(!K)return;if(K&&K.shouldApply(F.field)){const L=K.process((0,t.get)(U,K.path),F,K.settings);L!=null&&(0,t.set)(O,K.path,L)}}}function b(O){const{thresholds:U}=O;if(O.color?O.color.mode||delete O.color:U&&(O.color={mode:c.S.Thresholds}),O.hasOwnProperty("min")&&O.hasOwnProperty("max")&&O.min>O.max){const I=O.max;O.max=O.min,O.min=I}}const M=(O,U,I,F,w)=>K=>!U.config.links||U.config.links.length===0?[]:U.config.links.map(L=>{const V=S(O,U,I),H={...I,__dataContext:V},j=(k,Q,re)=>F(k,{...H,...Q},re);if(K.valueRowIndex!==void 0&&!isNaN(K.valueRowIndex)?V.value.rowIndex=K.valueRowIndex:V.value.calculatedValue=K.calculatedValue,L.onClick)return{href:L.url,title:F(L.title||"",H),target:L.targetBlank?"_blank":void 0,onClick:(k,Q)=>{L.onClick({origin:Q??U,e:k,replaceVariables:j})},origin:U};if(L.internal)return(0,g._)({link:L,internalLink:L.internal,scopedVars:H,field:U,range:L.internal.range??{},replaceVariables:F});let A=L.onBuildUrl?L.onBuildUrl({origin:U,replaceVariables:j}):L.url;return A&&(A=p.u.assureBaseUrl(A.replace(/\n/g,"")),A=F(A,H,l.b8.UriEncode),A=p.u.processUrl(A)),{href:A,title:F(L.title||"",H),target:L.targetBlank?"_blank":void 0,origin:U}});function x(O){if(!O||O.length===0)return[];const U=[...O],I=(0,y.gE)();for(let F=0;F<U.length;F++){const w={...U[F]},K=[...w.fields];for(let L=0;L<K.length;L++)K[L]={...K[L],display:I};U[F]={...w,fields:K}}return U}function R(O,U,I,F,w,K){const L=O?.fieldConfigRegistry,V=(0,i.useRef)(0),H=(0,s.Z)(I?.series);return(0,i.useMemo)(()=>{if(!L||!U||!I)return;const j=I?.series;return I.structureRev==null&&j&&H&&!(0,u.nl)(j,H,u.Ch)&&V.current++,{structureRev:V.current,...I,series:h({data:j,fieldConfig:U,fieldConfigRegistry:L,replaceVariables:K,theme:w,timeZone:F})}},[L,U,I,H,F,w,K])}function S(O,U,I){return I?.__dataContext?{value:{...I.__dataContext.value}}:{value:{frame:O,field:U,data:[O]}}}},30471:(Y,T,e)=>{"use strict";e.d(T,{$w:()=>l,CZ:()=>s,nf:()=>i});var t=e(99098),n=e(7569);function i(o,d){if(o.name)return o.name;const r=[];for(const m of o.fields)m.labels&&Object.keys(m.labels).length>0&&r.push(m);return r.length===1?(0,n.aA)(r[0].labels):d===void 0?o.fields.filter(m=>m.type!==t.fS.time).map(m=>s(m,o)).join(", "):o.refId?`Series (${o.refId})`:`Series (${d})`}function s(o,d,r){const m=o.state?.displayName,c=Boolean(r&&r.length>1);if(m&&c===o.state?.multipleFrames)return m;const p=l(o,d,r);return o.state=o.state||{},o.state.displayName=p,o.state.multipleFrames=c,p}function l(o,d,r){const m=o.config?.displayName&&o.config?.displayName.length;let c=m?o.config.displayName:o.name;if(m)return c;if(d&&o.config?.displayNameFromDS)return o.config.displayNameFromDS;if(o.type===t.fS.time&&!o.labels)return c??t.Ls;let p=[],g=!1;if(r&&r.length>1){for(let v=1;v<r.length;v++)if(r[v].name!==r[v-1].name){g=!0;break}}let y=!1,E=!1;if(g&&d?.name&&(p.push(d.name),y=!0),o.name&&o.name!==t.M5&&p.push(o.name),o.labels&&d){let v=u(r??[d]);if(v)o.labels[v]&&(p.push(o.labels[v]),E=!0);else{let h=(0,n.aA)(o.labels);h&&(p.push(h),E=!0)}}return d&&!y&&!E&&o.name===t.M5&&d.name&&d.name.length>0&&(p.push(d.name),y=!0),p.length?c=p.join(" "):o.name?c=o.name:c=t.M5,c===o.name&&(c=f(o,d)),c}function f(o,d){let r=0,m=!1;if(d)for(let c=0;c<d.fields.length;c++){const p=d.fields[c];if(o===p){if(m=!0,r>0){r++;break}}else if(o.name===p.name&&(r++,m))break}return r?`${o.name} ${r}`:o.name}function u(o){let d=null;for(let r=0;r<o.length;r++){const m=o[r];for(const c of m.fields)if(c.labels){for(const p in c.labels)if(d===null)d=p;else if(p!==d)return null}}return d}},72769:(Y,T,e)=>{"use strict";e.d(T,{z:()=>l});var t=e(82897),n=e.n(t),i=e(2703),s=e(6194);function l(f){return new Proxy({},{get:(u,o)=>{let d=f.frame.fields.find(p=>o===p.name);if(!d){const p=(0,t.toNumber)(o);d=f.frame.fields[p]}if(d||(d=f.frame.fields.find(p=>o===p.config.displayName)),d||(d=f.frame.fields.find(p=>p.labels?o===p.labels.name:!1)),!d)return;const r=d.display??(0,s.U_)(),m=d.values[f.rowIndex],c=r(m);return c.toString=()=>(0,i.zc)(c),c}})}},99928:(Y,T,e)=>{"use strict";e.d(T,{AE:()=>s.AE,CZ:()=>r.CZ,Cc:()=>o.Cc,E1:()=>t.E1,HU:()=>t.HU,N6:()=>i.N,NI:()=>m.NI,NN:()=>s.NN,Of:()=>o.Of,Oh:()=>s.Oh,QY:()=>l.QY,SM:()=>o.SM,SO:()=>i.S,U_:()=>n.U_,VB:()=>s.VB,W0:()=>s.W0,W4:()=>s.W4,WO:()=>l.WO,YO:()=>l.YO,ZD:()=>f.Z,ZN:()=>s.ZN,bP:()=>u.bP,cB:()=>t.cB,dE:()=>t.dE,dz:()=>m.dz,fD:()=>l.fD,gE:()=>n.gE,gG:()=>t.gG,gb:()=>o.gb,je:()=>n.je,kG:()=>s.kG,m1:()=>u.m1,nG:()=>t.nG,n_:()=>t.n_,nf:()=>r.nf,op:()=>s.op,pZ:()=>t.pZ,r5:()=>t.r5,sg:()=>t.sg,uj:()=>s.uj,xD:()=>m.xD,zv:()=>d.z});var t=e(92156),n=e(6194),i=e(30779),s=e(72293),l=e(72990),f=e(96949),u=e(92103),o=e(76095),d=e(72769),r=e(30471),m=e(99601)},72293:(Y,T,e)=>{"use strict";e.d(T,{AE:()=>f,NN:()=>s,Oh:()=>n,VB:()=>d,W0:()=>i,W4:()=>r,ZN:()=>o,kG:()=>t,op:()=>u,uj:()=>l});const t=(m,c,p)=>m,n=(m,c,p)=>{if(m!=null)return parseFloat(m)},i=(m,c,p)=>(delete c.field?.state?.displayName,u(m,c,p)),s=(m,c,p)=>m,l=(m,c,p)=>m,f=(m,c,p)=>m,u=(m,c,p)=>m==null?m:p&&p.expandTemplateVars&&c.replaceVariables?c.replaceVariables(m,c.field.state.scopedVars):`${m}`,o=(m,c,p)=>m,d=(m,c,p)=>m,r=(m,c,p)=>m},99601:(Y,T,e)=>{"use strict";e.d(T,{NI:()=>u,dz:()=>d,xD:()=>r});var t=e(82897),n=e.n(t),i=e(33750),s=e(99098),l=e(72990),f=e(92103);function u(m,c){if(m.type===s.fS.boolean)return o(m,c);const g=(0,l.fD)(m).getCalculator(m,c),y=m.state?.range??d(m);return E=>{let v=0;E!==-1/0&&(v=(E-y.min)/y.delta,Number.isNaN(v)&&(v=0));const h=(0,f.pD)(m,E,v);return{percent:v,threshold:h,color:g(E,v,h)}}}function o(m,c){const p={color:c.visualization.getColorByName("green"),percent:1,threshold:void 0},g={color:c.visualization.getColorByName("red"),percent:0,threshold:void 0},y=(0,l.fD)(m);if(y.isContinuous&&y.getColors){const E=y.getColors(c);p.color=E[E.length-1],g.color=E[0]}return E=>Boolean(E)?p:g}function d(m){if(m.type!==s.fS.number)return{min:0,max:100,delta:100};let c=m.config.min,p=m.config.max;if(!(0,t.isNumber)(c)||!(0,t.isNumber)(p))if(m.values&&m.values.length){const g=(0,i.Kx)({field:m,reducers:[i.gz.min,i.gz.max]});(0,t.isNumber)(c)||(c=g[i.gz.min]),(0,t.isNumber)(p)||(p=g[i.gz.max])}else c=0,p=100;return{min:c,max:p,delta:p-c}}function r(m,c){const{config:p}=m;let{min:g,max:y}=p;return(0,t.isNumber)(g)&&(0,t.isNumber)(y)?p:c||!m.state?.range?{...p,...d(m)}:{...p,...m.state.range}}},30779:(Y,T,e)=>{"use strict";e.d(T,{N:()=>i,S:()=>s});var t=e(53908),n=e(96949);const i=new n.Z,s=new t.B},92103:(Y,T,e)=>{"use strict";e.d(T,{bP:()=>f,m1:()=>s,pD:()=>l,yM:()=>i});var t=e(53768),n=e(69098);const i={value:0,color:t.R};function s(u,o){if(!o||o.length===0)return i;let d=o[0];for(const r of o)if(u>=r.value)d=r;else break;return d}function l(u,o,d){const{thresholds:r}=u.config;return r?.mode===n.H.Percentage?s(d*100,r?.steps):s(o,r?.steps)}function f(u){return u.sort((o,d)=>o.value-d.value)}},82360:(Y,T,e)=>{"use strict";e.d(T,{q:()=>t.q1});var t=e(40538)},38412:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{AnnotationChangeEvent:()=>m.n1,AppendedVectors:()=>s.l$,ArrayDataFrame:()=>l.iB,ArrayVector:()=>s.Gt,AsNumberVector:()=>s.sq,BinaryOperationID:()=>t.LH,BinaryOperationVector:()=>s.rM,BusEventBase:()=>m.mA,BusEventWithPayload:()=>m.R_,ByNamesMatcherMode:()=>f.Ys,CSVHeaderStyle:()=>t.x5,CSVReader:()=>t.QM,CircularDataFrame:()=>l.a2,CircularVector:()=>s.dV,ConstantVector:()=>s.uI,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>r.cB,DashboardLoadedEvent:()=>m.Pl,DataFrameView:()=>l.US,DataHoverClearEvent:()=>m.xH,DataHoverEvent:()=>m.es,DataLinkBuiltInVars:()=>t.WC,DataSelectEvent:()=>m.v9,DataSourcePluginContextProvider:()=>a.n,DataTransformerID:()=>f.Wk,DocsId:()=>t.xV,EventBusSrv:()=>m.Fb,FieldCache:()=>l.N,FieldConfigEditorBuilder:()=>t.vo,FieldConfigOptionsRegistry:()=>r.ZD,FieldMatcherID:()=>f.mi,FormattedVector:()=>s.$Y,FrameGeometrySourceMode:()=>g.q,FrameMatcherID:()=>f.E4,ISO_8601:()=>u.VJ,IndexVector:()=>s.rm,InternalTimeZones:()=>u.RQ,LayoutModes:()=>y.l,LegacyMappingType:()=>t.HU,MISSING_VALUE:()=>l.Yi,MatcherID:()=>f.Ff,MutableDataFrame:()=>l.vA,NodeGraphDataFrameFieldNames:()=>t.zG,PanelOptionsEditorBuilder:()=>t.rt,PanelPlugin:()=>E.c,PluginContextProvider:()=>P.b,ReducerID:()=>f.gz,Registry:()=>t.Bz,SortedVector:()=>s.oH,SystemDateFormatsState:()=>u.zf,VAR_CALC:()=>r.pZ,VAR_CELL_PREFIX:()=>r.dE,VAR_FIELD_LABELS:()=>r.E1,VAR_FIELD_NAME:()=>r.n_,VAR_SERIES_NAME:()=>r.HU,ValueMatcherID:()=>f.mE,addDurationToDate:()=>u.Ks,anySeriesWithTimeField:()=>l.m$,anyToNumber:()=>t.IX,applyFieldOverrides:()=>r.SM,applyRawFieldOverrides:()=>r.Of,arrayToDataFrame:()=>l.Pc,arrayUtils:()=>t.sq,binaryOperators:()=>t.nk,booleanOverrideProcessor:()=>r.W4,booleanValueFormatter:()=>d.IR,buildHistogram:()=>f.gY,classicColors:()=>t.ZC,colorManipulator:()=>c.r,compareArrayValues:()=>l.nl,compareDataFrameStructures:()=>l.Ch,convertOldAngularValueMappings:()=>t.Jb,createDimension:()=>l.q2,createFieldConfigRegistry:()=>h.j,createTheme:()=>c.j,dataFrameFromJSON:()=>l.vP,dataFrameToJSON:()=>l.Y,dataLinksOverrideProcessor:()=>r.NN,dateMath:()=>u.Rn,dateTime:()=>u.CQ,dateTimeAsMoment:()=>u.C_,dateTimeForTimeZone:()=>u.GY,dateTimeFormat:()=>u.dq,dateTimeFormatISO:()=>u.lf,dateTimeFormatTimeAgo:()=>u.E8,dateTimeFormatWithAbbrevation:()=>u.Fm,dateTimeParse:()=>u.J,decodeFieldValueEntities:()=>l.Jy,decodeFieldValueEnums:()=>l.Ib,deprecationWarning:()=>t.d9,displayNameOverrideProcessor:()=>r.W0,doStandardCalcs:()=>f.uP,durationToMilliseconds:()=>u.iX,ensureTimeField:()=>f.J_,escapeRegex:()=>o.yI,escapeStringForRegex:()=>o.GE,eventFactory:()=>m.Xw,fieldColorModeRegistry:()=>r.WO,fieldMatchers:()=>f.Ls,fieldReducers:()=>f.TB,filterFieldConfigOverrides:()=>v.aS,findCommonLabels:()=>t.FT,findHighlightChunksInText:()=>o.Xt,findMatchesInText:()=>o.lu,findUniqueLabels:()=>t.IU,fixCellTemplateExpressions:()=>r.r5,formatLabels:()=>t.aA,formattedValueToString:()=>d.zc,frameMatchers:()=>f.Ac,getActiveThreshold:()=>r.m1,getAllValuesFromDimension:()=>l.r7,getColumnFromDimension:()=>l.$q,getColumnsFromDimension:()=>l.GV,getDataFrameRow:()=>l.fh,getDataSourceRef:()=>t.iU,getDataSourceUID:()=>t.BT,getDimensionByName:()=>l.YP,getDisplayProcessor:()=>r.U_,getDisplayValueAlignmentFactors:()=>r.sg,getEnumDisplayProcessor:()=>r.je,getFieldColorMode:()=>r.QY,getFieldColorModeForField:()=>r.fD,getFieldConfigWithMinMax:()=>r.xD,getFieldDisplayName:()=>r.CZ,getFieldDisplayValues:()=>r.nG,getFieldDisplayValuesProxy:()=>r.zv,getFieldMatcher:()=>f.sq,getFieldSeriesColor:()=>r.YO,getFieldTypeFromValue:()=>l.DP,getFlotPairs:()=>t.k8,getFlotPairsConstant:()=>t.HE,getFrameDisplayName:()=>r.nf,getFrameMatchers:()=>f.b9,getHistogramFields:()=>f.qr,getLinksSupplier:()=>b.oB,getLocale:()=>u.Kd,getLocaleData:()=>u.k4,getMinMaxAndDelta:()=>r.dz,getPanelOptionsWithDefaults:()=>v.d4,getProcessedDataFrames:()=>l.F9,getRawDisplayProcessor:()=>r.gE,getScaleCalculator:()=>r.NI,getSeriesTimeStep:()=>t.e4,getTimeField:()=>l.sV,getTimeZone:()=>u.Ze,getTimeZoneGroups:()=>u.$8,getTimeZoneInfo:()=>u.Pr,getTimeZones:()=>u.ZV,getValueFormat:()=>d.Cf,getValueFormats:()=>d.QW,getValueFormatterIndex:()=>d.Td,getValueFromDimension:()=>l.jC,getValueMatcher:()=>f.IG,getWeekdayIndex:()=>u.ig,getWeekdayIndexByEnglishName:()=>u.jN,guessDecimals:()=>t.dP,guessFieldTypeForField:()=>l.fu,guessFieldTypeFromNameAndValue:()=>l._m,guessFieldTypeFromValue:()=>l.LI,guessFieldTypes:()=>l.SX,hasLinks:()=>r.gG,hasMsResolution:()=>t.fp,histogramBucketSizes:()=>f.Zi,histogramFieldInfo:()=>f.py,histogramFieldsToFrame:()=>f.zM,histogramFrameBucketMaxFieldName:()=>f.cO,histogramFrameBucketMinFieldName:()=>f.wL,histogramTransformer:()=>f.Op,identityOverrideProcessor:()=>r.kG,incrRound:()=>f.Jz,incrRoundDn:()=>f.mB,incrRoundUp:()=>f.UO,intervalToAbbreviatedDurationString:()=>u.vT,isBooleanUnit:()=>d.br,isCustomFieldProp:()=>v.Lc,isDataFrame:()=>l.aY,isDataSourcePluginContext:()=>D.v,isDataSourceRef:()=>t.cv,isDateTime:()=>u.v9,isDateTimeInput:()=>u.D2,isEmptyObject:()=>t.Qr,isHistogramFrameBucketMaxFieldName:()=>f.kl,isHistogramFrameBucketMinFieldName:()=>f.Ok,isLikelyAscendingVector:()=>f.lP,isStandardFieldProp:()=>v._k,isTableData:()=>l.Ji,isTimeSeriesFrame:()=>l.pP,isTimeSeriesFrames:()=>l.xI,isValidDate:()=>u.qb,isValidDuration:()=>u.jO,isValidGoDuration:()=>u.IA,localTimeFormat:()=>u.Ji,locale:()=>d.SP,locationUtil:()=>t.uT,makeClassES5Compatible:()=>t.s2,mapInternalLinkToExplore:()=>t._N,matchAllLabels:()=>t.VS,monacoLanguageRegistry:()=>p.F,numberOverrideProcessor:()=>r.Oh,objRemoveUndefined:()=>t.Hh,onUpdateDatasourceJsonDataOption:()=>t._R,onUpdateDatasourceJsonDataOptionChecked:()=>t.hz,onUpdateDatasourceJsonDataOptionSelect:()=>t.nx,onUpdateDatasourceOption:()=>t.z_,onUpdateDatasourceResetOption:()=>t.HD,onUpdateDatasourceSecureJsonDataOption:()=>t.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>t.TX,outerJoinDataFrames:()=>f.JP,parseDuration:()=>u.RA,parseFlags:()=>o.TL,parseLabels:()=>t.J8,preProcessPanelData:()=>l.zR,rangeUtil:()=>u.cT,readCSV:()=>t.uP,reduceField:()=>f.Kx,renderMarkdown:()=>o.ap,renderTextPanelMarkdown:()=>o.xH,restoreCustomOverrideRules:()=>v.__,reverseDataFrame:()=>l.Y6,roundDecimals:()=>t.O9,scaledUnits:()=>d.Qj,selectOverrideProcessor:()=>r.AE,serializeStateToUrlParam:()=>t.S,setLocale:()=>u.i_,setTimeZoneResolver:()=>u.K7,setWeekStart:()=>u.Ls,shallowCompare:()=>l.Vv,simpleCountUnit:()=>d.SR,sortDataFrame:()=>l.aK,sortThresholds:()=>r.bP,standardEditorsRegistry:()=>r.SO,standardFieldConfigEditorRegistry:()=>r.N6,standardTransformers:()=>f.YR,standardTransformersRegistry:()=>f.Ze,stringFormater:()=>d.vb,stringOverrideProcessor:()=>r.op,stringStartsAsRegEx:()=>o.oH,stringToJsRegex:()=>o.jO,stringToMs:()=>o.e0,systemDateFormats:()=>u.U6,textUtil:()=>o.QX,thresholdsOverrideProcessor:()=>r.ZN,timeZoneAbbrevation:()=>u.Hk,timeZoneFormatUserFriendly:()=>u.Vs,toCSV:()=>t.MJ,toDataFrame:()=>l.g0,toDataFrameDTO:()=>l.og,toDuration:()=>u.np,toFilteredDataFrameDTO:()=>l.Aw,toFixed:()=>d.FH,toFixedScaled:()=>d.bn,toFixedUnit:()=>d.q2,toFloatOrUndefined:()=>o.dz,toIntegerOrUndefined:()=>o.By,toLegacyResponseData:()=>l.Zr,toNumberString:()=>o.PF,toOption:()=>t.Er,toPascalCase:()=>o.Mh,toUtc:()=>u.zh,transformDataFrame:()=>f.Hz,unEscapeStringFromRegex:()=>o.x6,unitOverrideProcessor:()=>r.VB,updateDatasourcePluginJsonDataOption:()=>t.tp,updateDatasourcePluginOption:()=>t.fd,updateDatasourcePluginResetOption:()=>t.Mf,updateDatasourcePluginSecureJsonDataOption:()=>t.uw,urlUtil:()=>t.Cj,useFieldOverrides:()=>r.Cc,usePluginContext:()=>C.g,validateFieldConfig:()=>r.gb,valueMappingsOverrideProcessor:()=>r.uj,valueMatchers:()=>f.U8,vectorator:()=>s.sD,withLoadingIndicator:()=>t.xc});var t=e(39358),n=e(2263),i={};for(const M in n)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","anyToNumber","arrayUtils","binaryOperators","classicColors","convertOldAngularValueMappings","deprecationWarning","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","isEmptyObject","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","roundDecimals","serializeStateToUrlParam","toCSV","toOption","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(M)<0&&(i[M]=()=>n[M]);e.d(T,i);var s=e(50486),l=e(2033),f=e(13095),u=e(44540),o=e(63418),d=e(22078),r=e(99928),m=e(69616),c=e(99358),p=e(46646),g=e(82360),y=e(89974),E=e(36873),v=e(16936),h=e(59472),P=e(75363),a=e(47956),C=e(81129),D=e(58556),b=e(76095)},46646:(Y,T,e)=>{"use strict";e.d(T,{F:()=>t.F});var t=e(8488)},8488:(Y,T,e)=>{"use strict";e.d(T,{F:()=>n});var t=e(53908);const n=new t.B},36873:(Y,T,e)=>{"use strict";e.d(T,{c:()=>o});var t=e(82897),n=e.n(t),i=e(96949),s=e(59250),l=e(55024),f=e(91353),u=e(59472);class o extends s.Sg{constructor(r){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new i.Z,this.dataSupport={annotations:!1,alertStates:!1},this.panel=r}get defaults(){let r=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const m=new f.rt;this.optionsSupplier(m,{data:[]});for(const c of m.getItems())c.defaultValue!=null&&(0,t.set)(r,c.path,c.defaultValue)}return r}get fieldConfigDefaults(){const r=this._fieldConfigDefaults.defaults;r.custom={};for(const m of this.fieldConfigRegistry.list())m.defaultValue!==void 0&&(0,t.set)(r,m.id,m.defaultValue);return{defaults:{...r},overrides:this._fieldConfigDefaults.overrides}}setDefaults(r){return(0,l.d)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=r,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(r){return(0,l.d)("PanelPlugin","setEditor","setPanelOptions"),this.editor=r,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(r){return this.onPanelMigration=r,this}setPanelChangeHandler(r){return this.onPanelTypeChanged=r,this}setPanelOptions(r){return this.optionsSupplier=r,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(r){return this.dataSupport={...this.dataSupport,...r},this}useFieldConfig(r={}){return this._initConfigRegistry=()=>(0,u.j)(r,this.meta.name),this}setSuggestionsSupplier(r){return this.suggestionsSupplier=r,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(r){return this.meta.id===r}}},16936:(Y,T,e)=>{"use strict";e.d(T,{Lc:()=>g,__:()=>p,_k:()=>y,aS:()=>d,d4:()=>u});var t=e(82897),n=e.n(t),i=e(72990),s=e(53768),l=e(3947),f=e(69098);function u({plugin:E,currentOptions:v,currentFieldConfig:h,isAfterPluginChange:P}){const a=(0,t.mergeWith)({},E.defaults,v||{},(b,M)=>{if((0,t.isArray)(M))return M}),C=o(h,E),D=m(E,C,P);return{options:a,fieldConfig:D}}function o(E,v){const h=v.fieldConfigDefaults,P={defaults:(0,t.mergeWith)({},h.defaults,E?E.defaults:{},(a,C)=>{if((0,t.isArray)(C))return C}),overrides:E?.overrides??[]};r(P.defaults,"",v.fieldConfigRegistry),P.defaults.thresholds&&c(P.defaults.thresholds),P.overrides=d(P.overrides,a=>v.fieldConfigRegistry.getIfExists(a.id)!==void 0);for(const a of P.overrides)for(const C of a.properties)C.id==="thresholds"&&c(C.value);return P}function d(E,v){return E.map(h=>{const P=h.properties.filter(v);return{...h,properties:P}}).filter(h=>h.properties.length>0)}function r(E,v,h){let P=!1;for(const a of Object.keys(E)){const C=E[a],D=`${v}${a}`,b=!!h.getIfExists(D);if(b){P=!0;continue}(0,t.isArray)(C)||!(0,t.isObject)(C)?b||(0,t.unset)(E,a):r(C,`${D}.`,h)||(0,t.unset)(E,a)}return P}function m(E,v,h){if(!h)return v;const P=E.fieldConfigRegistry.getIfExists(l.qb.Color);if(P&&P.settings){const a=P.settings,C=i.WO.getIfExists(v.defaults.color?.mode);if(!a.byValueSupport&&(!C||C.isByValue))return v.defaults.color={mode:s.S.PaletteClassic},v;if(a.byValueSupport&&a.preferThresholdsMode&&C?.id!==s.S.Fixed&&(!C||!C.isByValue))return v.defaults.color={mode:s.S.Thresholds},v;if(a.bySeriesSupport&&C?.isByValue)return v.defaults.color={mode:s.S.PaletteClassic},v}return v}function c(E){E.mode||(E.mode=f.H.Absolute),E.steps?E.steps.length&&(E.steps[0].value=-1/0):E.steps=[]}function p(E,v){const h={defaults:{...E.defaults,custom:v.defaults.custom},overrides:[...E.overrides]};for(const P of v.overrides)for(const a of P.properties)if(g(a)){const C=h.overrides.find(D=>(0,t.isEqual)(D.matcher,P.matcher));C?C!==P&&C.properties.push(a):h.overrides.push(P)}return h}function g(E){return E.id.startsWith("custom.")}function y(E){return!g(E)}},59472:(Y,T,e)=>{"use strict";e.d(T,{j:()=>s});var t=e(96949),n=e(30779),i=e(91353);function s(f={},u){const o=new t.Z,d=n.N.list(),r={};if(f.useCustomConfig){const m=new i.vo;f.useCustomConfig(m);for(const c of m.getRegistry().list())if(c.isCustom=!0,c.id="custom."+c.id,l(c,d)){const p=r[c.category[0]]??[];p.push(c),r[c.category[0]]=p}else o.register(c)}for(let m of d)if(!(f.disableStandardOptions&&f.disableStandardOptions.indexOf(m.id)>-1)){if(f.standardOptions){const c=f.standardOptions[m.id]?.defaultValue,p=f.standardOptions[m.id]?.settings;c&&(m={...m,defaultValue:c}),p&&(m={...m,settings:m.settings?{...m.settings,...p}:p})}if(o.register(m),m.category&&r[m.category[0]])for(let c of r[m.category[0]])o.register(c)}for(const m of o.list())if(m.path.indexOf("[")>0)throw new Error(`[${u}] Field config paths do not support arrays: ${m.id}`);return o}function l(f,u){return Boolean(u.find(o=>f.category&&o.category&&f.category[0]===o.category[0]))}},63418:(Y,T,e)=>{"use strict";e.d(T,{By:()=>t.By,GE:()=>t.GE,Mh:()=>t.Mh,PF:()=>t.PF,QX:()=>l,TL:()=>i.TL,Xt:()=>i.Xt,ap:()=>n.a,dz:()=>t.dz,e0:()=>t.e0,jO:()=>t.jO,lu:()=>i.lu,oH:()=>t.oH,x6:()=>t.x6,xH:()=>n.x,yI:()=>t.yI});var t=e(79086),n=e(2631),i=e(52216),s=e(95304);const l={escapeHtml:s.Xv,hasAnsiCodes:s.oT,sanitize:s.Nw,sanitizeTextPanelContent:s.he,sanitizeUrl:s.Nm,sanitizeSVGContent:s.Is,sanitizeTrustedTypes:s.cd,sanitizeTrustedTypesRSS:s.pQ}},2631:(Y,T,e)=>{"use strict";e.d(T,{a:()=>l,x:()=>f});var t=e(27986),n=e(95304);let i=!1;const s={pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1,breaks:!1};function l(u,o){i||(t.TU.setOptions({...s}),i=!0);let d;o?.breaks&&(d={...s,breaks:!0});const r=(0,t.TU)(u||"",d);return o?.noSanitize?r:(0,n.he)(r)}function f(u,o){i||(t.TU.setOptions({...s}),i=!0);const d=(0,t.TU)(u||"");return o?.noSanitize?d:(0,n.he)(d)}},95304:(Y,T,e)=>{"use strict";e.d(T,{Is:()=>c,Nm:()=>p,Nw:()=>o,Xv:()=>y,cd:()=>r,he:()=>m,oT:()=>g,pQ:()=>d});var t=e(2397),n=e(97692),i=e.n(n),s=e(99731),l=e.n(s);const f=Object.keys(s.whiteList).reduce((E,v)=>(E[v]=s.whiteList[v]?.concat(["class","style"]),E),{}),u=new s.FilterXSS({whiteList:f,css:{whiteList:{...s.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function o(E){try{return i().sanitize(E,{USE_PROFILES:{html:!0},FORBID_TAGS:["form","input"]})}catch{return console.error("String could not be sanitized",E),y(E)}}function d(E){return i().sanitize(E,{RETURN_TRUSTED_TYPE:!0,ADD_ATTR:["xmlns:atom","version","property","content"],ADD_TAGS:["rss","meta","channel","title","link","description","atom:link","item","pubDate","guid"],PARSER_MEDIA_TYPE:"application/xhtml+xml"})}function r(E){return i().sanitize(E,{RETURN_TRUSTED_TYPE:!0})}function m(E){try{return u.process(E)}catch{return console.error("String could not be sanitized",E),"Text string could not be sanitized"}}function c(E){return i().sanitize(E,{USE_PROFILES:{svg:!0,svgFilters:!0}})}function p(E){return(0,t.N)(E)}function g(E){return/\u001b\[\d{1,2}m/.test(E)}function y(E){return String(E).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}},79086:(Y,T,e)=>{"use strict";e.d(T,{By:()=>p,GE:()=>u,Mh:()=>y,PF:()=>c,dz:()=>g,e0:()=>m,jO:()=>r,oH:()=>d,x6:()=>o,yI:()=>E});var t=e(82897),n=e.n(t);const s="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",l=new RegExp(s,"g"),f=new RegExp("(\\\\)"+s,"g");function u(v){return v&&v.replace(l,"\\$1")}function o(v){return v&&v.replace(f,"$2")}function d(v){return v?v[0]==="/":!1}function r(v){if(!d(v))return new RegExp(`^${v}$`);const h=v.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!h)throw new Error(`'${v}' is not a valid regular expression.`);return new RegExp(h[1],h[2])}function m(v){if(!v)return 0;const h=parseInt(v,10),P=v.slice(String(h).length),a=1e3,C=a*60,D=C*60,b=D*24;switch(P){case"s":return h*a;case"m":return h*C;case"h":return h*D;case"d":return h*b;default:if(!P)return isNaN(h)?0:h;throw new Error("Not supported unit: "+P)}}function c(v){return v!=null&&Number.isFinite(v)?v.toString():""}function p(v){if(!v)return;const h=parseInt(v,10);return isNaN(h)?void 0:h}function g(v){if(!v)return;const h=parseFloat(v);return isNaN(h)?void 0:h}function y(v){const h=(0,t.camelCase)(v);return h.charAt(0).toUpperCase()+h.substring(1)}function E(v){return v.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},52216:(Y,T,e)=>{"use strict";e.d(T,{TL:()=>f,Xt:()=>t,lu:()=>i});function t({searchWords:u,textToHighlight:o}){const d=[];for(const r of u)d.push(...i(o,r));return d}const n=u=>u.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function i(u,o){if(!u||!o)return[];const d=[],{cleaned:r,flags:m}=f(n(o));let c;try{c=new RegExp(`(?:${r})`,m)}catch{return d}return u.replace(c,(p,...g)=>{if(p){const y=g[g.length-2];d.push({text:p,start:y,length:p.length,end:y+p.length})}return""}),d}const s="-",l=/\(\?([ims-]+)\)/g;function f(u){const o=new Set(["g"]);return{cleaned:u.replace(l,(r,m)=>{const c=m.startsWith(s);for(let p=0;p<m.length;++p){const g=m.charAt(p);c||m.charAt(p-1)===s?o.delete(g):g!==s&&o.add(g)}return""}),flags:Array.from(o).join("")}}},5680:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{alpha:()=>g,asHexString:()=>f,asRgbString:()=>u,darken:()=>y,decomposeColor:()=>d,emphasize:()=>p,getContrastRatio:()=>m,getLuminance:()=>c,hexToRgb:()=>i,hslToRgb:()=>o,lighten:()=>E,recomposeColor:()=>r,rgbToHex:()=>l});var t=e(28550);function n(v,h=0,P=1){return Math.min(Math.max(h,v),P)}function i(v){v=v.slice(1);const h=new RegExp(`.{1,${v.length>=6?2:1}}`,"g");let P=v.match(h);return P&&P[0].length===1&&(P=P.map(a=>a+a)),P?`rgb${P.length===4?"a":""}(${P.map((a,C)=>C<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function s(v){const h=v.toString(16);return h.length===1?`0${h}`:h}function l(v){if(v.indexOf("#")===0)return v;const{values:h}=d(v);return`#${h.map(P=>s(P)).join("")}`}function f(v){if(v[0]==="#")return v;const h=(0,t.Z)(v);return h.getAlpha()===1?h.toHexString():h.toHex8String()}function u(v){return v.startsWith("rgb")?v:(0,t.Z)(v).toRgbString()}function o(v){const h=d(v),{values:P}=h,a=P[0],C=P[1]/100,D=P[2]/100,b=C*Math.min(D,1-D),M=(S,O=(S+a/30)%12)=>D-b*Math.max(Math.min(O-3,9-O,1),-1);let x="rgb";const R=[Math.round(M(0)*255),Math.round(M(8)*255),Math.round(M(4)*255)];return h.type==="hsla"&&(x+="a",R.push(P[3])),r({type:x,values:R})}function d(v){if(typeof v!="string")return v;if(v.charAt(0)==="#")return d(i(v));const h=v.indexOf("("),P=v.substring(0,h);if(["rgb","rgba","hsl","hsla","color"].indexOf(P)===-1)throw new Error(`Unsupported '${v}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let a=v.substring(h+1,v.length-1),C;if(P==="color"){if(a=a.split(" "),C=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(C)===-1)throw new Error(`Unsupported ${C} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else a=a.split(",");return a=a.map(D=>parseFloat(D)),{type:P,values:a,colorSpace:C}}function r(v){const{type:h,colorSpace:P}=v;let a=v.values;return h.indexOf("rgb")!==-1?a=a.map((C,D)=>D<3?parseInt(C,10):C):h.indexOf("hsl")!==-1&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),h.indexOf("color")!==-1?a=`${P} ${a.join(" ")}`:a=`${a.join(", ")}`,`${h}(${a})`}function m(v,h,P){const a=c(v),C=c(h,P);return(Math.max(a,C)+.05)/(Math.min(a,C)+.05)}function c(v,h){const P=d(v);let a=P.type==="hsl"?d(o(v)).values:P.values;if(h&&P.type==="rgba"){const D=d(h),b=a[3];a[0]=a[0]*b+D.values[0]*(1-b),a[1]=a[1]*b+D.values[1]*(1-b),a[2]=a[2]*b+D.values[2]*(1-b)}const C=a.map(D=>(P.type!=="color"&&(D/=255),D<=.03928?D/12.92:((D+.055)/1.055)**2.4));return Number((.2126*C[0]+.7152*C[1]+.0722*C[2]).toFixed(3))}function p(v,h=.15){return c(v)>.5?y(v,h):E(v,h)}function g(v,h){if(v==="")return"#000000";if(h=n(h),v[0]==="#"){if(v.length===9)v=v.substring(0,7);else if(v.length<=5){let a="#";for(let C=1;C<4;C++)a+=v[C]+v[C];v=a}return v+Math.round(h*255).toString(16).padStart(2,"0")}else{if(v[3]==="(")return v.replace(")",`, ${h})`);if(v[4]==="(")return v.substring(0,v.lastIndexOf(","))+`, ${h})`}const P=d(v);return P.type==="color"?P.values[3]=`/${h}`:P.values[3]=h,r(P)}function y(v,h){const P=d(v);if(h=n(h),P.type.indexOf("hsl")!==-1)P.values[2]*=1-h;else if(P.type.indexOf("rgb")!==-1||P.type.indexOf("color")!==-1)for(let a=0;a<3;a+=1)P.values[a]*=1-h;return r(P)}function E(v,h){const P=d(v);if(h=n(h),P.type.indexOf("hsl")!==-1)P.values[2]+=(100-P.values[2])*h;else if(P.type.indexOf("rgb")!==-1)for(let a=0;a<3;a+=1)P.values[a]+=(255-P.values[a])*h;else if(P.type.indexOf("color")!==-1)for(let a=0;a<3;a+=1)P.values[a]+=(1-P.values[a])*h;return r(P)}},21544:(Y,T,e)=>{"use strict";e.d(T,{j:()=>w});function t(){const L=["xs","sm","md","lg","xl","xxl"],V="px",H={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function j(_){return`@media (min-width:${typeof _=="number"?_:H[_]}${V})`}function A(_){return`@media (max-width:${(typeof _=="number"?_:H[_])-5/100}${V})`}return{values:H,up:j,down:A,keys:L,unit:V}}var n=e(82897),i=e(5680);const s={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#FF9900",orangeDarkText:"#fbad37",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FF9900",orangeLightText:"#B5510D"};class l{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.12)`,medium:`rgba(${this.whiteBase}, 0.20)`,strong:`rgba(${this.whiteBase}, 0.30)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:s.blueDarkText,maxContrast:s.white},this.primary={main:s.blueDarkMain,text:s.blueDarkText,border:s.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.10)`,shade:`rgba(${this.whiteBase}, 0.14)`,transparent:`rgba(${this.whiteBase}, 0.08)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:`rgba(${this.whiteBase}, 0.08)`},this.info=this.primary,this.error={main:s.redDarkMain,text:s.redDarkText},this.success={main:s.greenDarkMain,text:s.greenDarkText},this.warning={main:s.orangeDarkMain,text:s.orangeDarkText},this.background={canvas:s.gray05,primary:s.gray10,secondary:s.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class f{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:s.blueLightMain,border:s.blueLightText,text:s.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:s.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.08)`,shade:`rgba(${this.blackBase}, 0.15)`,transparent:`rgba(${this.blackBase}, 0.08)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.weak},this.info={main:s.blueLightMain,text:s.blueLightText},this.error={main:s.redLightMain,text:s.redLightText,border:s.redLightText},this.success={main:s.greenLightMain,text:s.greenLightText},this.warning={main:s.orangeLightMain,text:s.orangeLightText},this.background={canvas:s.gray90,primary:s.white,secondary:s.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function u(K){const L=new l,V=new f,H=(K.mode??"dark")==="dark"?L:V,{primary:j=H.primary,secondary:A=H.secondary,info:_=H.info,warning:k=H.warning,success:Q=H.success,error:re=H.error,tonalOffset:Z=H.tonalOffset,hoverFactor:oe=H.hoverFactor,contrastThreshold:G=H.contrastThreshold,...le}=K;function fe(de,ee=G){return(0,i.getContrastRatio)(L.text.maxContrast,de,H.background.primary)>=ee?L.text.maxContrast:V.text.maxContrast}const ae=({color:de,name:ee})=>{if(de={...de,name:ee},!de.main)throw new Error(`Missing main color for ${ee}`);return de.text||(de.text=de.main),de.border||(de.border=de.text),de.shade||(de.shade=H.mode==="light"?(0,i.darken)(de.main,Z):(0,i.lighten)(de.main,Z)),de.transparent||(de.transparent=(0,i.alpha)(de.main,.15)),de.contrastText||(de.contrastText=fe(de.main)),de};return(0,n.merge)({...H,primary:ae({color:j,name:"primary"}),secondary:ae({color:A,name:"secondary"}),info:ae({color:_,name:"info"}),error:ae({color:re,name:"error"}),success:ae({color:Q,name:"success"}),warning:ae({color:k,name:"warning"}),getContrastText:fe,emphasize:(de,ee)=>(0,i.emphasize)(de,ee??oe)},le)}function o(K,L){const V={padding:1,headerHeight:4,background:K.background.primary,borderColor:K.border.weak,boxShadow:"none"},H={borderColor:K.border.medium,borderHover:K.border.strong,text:K.text.primary,background:K.mode==="dark"?K.background.canvas:K.background.primary};return{height:{sm:3,md:4,lg:6},input:H,panel:V,dropdown:{background:H.background},tooltip:{background:K.background.secondary,text:K.text.primary},dashboard:{background:K.background.canvas,padding:1},overlay:{background:K.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:41},textHighlight:{text:K.warning.contrastText,background:K.warning.main},horizontalDrawer:{defaultHeight:400},table:{rowHoverBackground:K.emphasize(K.background.primary,.03)}}}function d(K){return K.mode==="dark"?{z1:"0px 1px 2px rgba(1, 4, 9, 0.75)",z2:"0px 4px 8px rgba(1, 4, 9, 0.75)",z3:"0px 8px 24px rgb(1, 4, 9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function r(K){const L=K.borderRadius??2;return{radius:{default:"2px",pill:"9999px",circle:"100%"},borderRadius:j=>`${(j??1)*L}px`}}function m(K={}){const{gridSize:L=8}=K,V=j=>typeof j=="string"?j:j*L,H=(...j)=>(j.length===0&&(j[0]=1),j.map(A=>{const _=V(A);return typeof _=="number"?`${_}px`:_}).join(" "));return H.gridSize=L,H}const c={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},p={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function g(K=["all"],L={}){const{duration:V=p.standard,easing:H=c.easeInOut,delay:j=0}=L;return(Array.isArray(K)?K:[K]).map(A=>`${A} ${typeof V=="string"?V:E(V)} ${H} ${typeof j=="string"?j:E(j)}`).join(",")}function y(K){if(!K)return 0;const L=K/36;return Math.round((4+15*L**.25+L/5)*10)}function E(K){return`${Math.round(K)}ms`}function v(){return{create:g,duration:p,easing:c,getAutoHeightDuration:y}}const h='"Inter", "Helvetica", "Arial", sans-serif',P="'Roboto Mono', monospace";function a(K,L={}){const{fontFamily:V=h,fontFamilyMonospace:H=P,fontSize:j=14,fontWeightLight:A=300,fontWeightRegular:_=400,fontWeightMedium:k=500,fontWeightBold:Q=500,htmlFontSize:re=14}=L,Z=j/14,oe=ae=>`${ae/re*Z}rem`,G=(ae,de,ee,me,q)=>{if(ee%2!==0||de%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:V,fontWeight:ae,fontSize:oe(de),lineHeight:ee/de,...V===h?{letterSpacing:`${C(me/de)}em`}:{},...q}},le={h1:G(_,28,32,-.25),h2:G(_,24,28,0),h3:G(_,22,24,0),h4:G(_,18,22,.25),h5:G(_,16,22,0),h6:G(k,14,22,.15),body:G(_,j,22,.15),bodySmall:G(_,12,18,.15)};return{htmlFontSize:re,pxToRem:oe,fontFamily:V,fontFamilyMonospace:H,fontSize:j,fontWeightLight:A,fontWeightRegular:_,fontWeightMedium:k,fontWeightBold:Q,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...le}}function C(K){return Math.round(K*1e5)/1e5}var D=e(33536);function b(K){const L={name:"Grafana Default",typography:{fontFamily:{sansSerif:K.typography.fontFamily,monospace:K.typography.fontFamilyMonospace},size:{base:`${K.typography.fontSize}px`,xs:K.typography.size.xs,sm:K.typography.size.sm,md:K.typography.size.md,lg:K.typography.size.lg},heading:{h1:K.typography.h1.fontSize,h2:K.typography.h2.fontSize,h3:K.typography.h3.fontSize,h4:K.typography.h4.fontSize,h5:K.typography.h5.fontSize,h6:K.typography.h6.fontSize},weight:{light:K.typography.fontWeightLight,regular:K.typography.fontWeightRegular,semibold:K.typography.fontWeightMedium,bold:K.typography.fontWeightBold},lineHeight:{xs:K.typography.bodySmall.lineHeight,sm:K.typography.bodySmall.lineHeight,md:K.typography.body.lineHeight,lg:K.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${K.breakpoints.values.xs}px`,sm:`${K.breakpoints.values.sm}px`,md:`${K.breakpoints.values.md}px`,lg:`${K.breakpoints.values.lg}px`,xl:`${K.breakpoints.values.xl}px`,xxl:`${K.breakpoints.values.xxl}px`},spacing:{base:K.spacing.gridSize,insetSquishMd:K.spacing(.5,1),d:K.spacing(2),xxs:K.spacing(.25),xs:K.spacing(.5),sm:K.spacing(1),md:K.spacing(2),lg:K.spacing(3),xl:K.spacing(4),gutter:K.spacing(4),formSpacingBase:K.spacing.gridSize,formMargin:`${K.spacing.gridSize*4}px`,formFieldsetMargin:`${K.spacing.gridSize*2}px`,formInputHeight:K.spacing.gridSize*4,formButtonHeight:K.spacing.gridSize*4,formInputPaddingHorizontal:`${K.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${K.spacing.gridSize/2}px`,formInputMargin:`${K.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${K.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:K.shape.borderRadius(1),md:K.shape.borderRadius(2),lg:K.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:K.spacing.gridSize*K.components.height.sm,md:K.spacing.gridSize*K.components.height.md,lg:K.spacing.gridSize*K.components.height.lg},panelPadding:K.components.panel.padding*K.spacing.gridSize,panelHeaderHeight:K.spacing.gridSize*K.components.panel.headerHeight,zIndex:K.zIndex},V={...M,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},H={bg1:K.colors.background.primary,bg2:K.colors.background.secondary,bg3:K.colors.action.hover,dashboardBg:K.colors.background.canvas,bgBlue1:K.colors.primary.main,bgBlue2:K.colors.primary.shade},j={border1:K.colors.border.weak,border2:K.colors.border.medium,border3:K.colors.border.strong},A={textStrong:K.colors.text.maxContrast,textHeading:K.colors.text.primary,text:K.colors.text.primary,textSemiWeak:K.colors.text.secondary,textWeak:K.colors.text.secondary,textFaint:K.colors.text.disabled,textBlue:K.colors.primary.text},_={formLabel:K.colors.text.primary,formDescription:K.colors.text.secondary,formInputBg:K.components.input.background,formInputBgDisabled:K.colors.action.disabledBackground,formInputBorder:K.components.input.borderColor,formInputBorderHover:K.components.input.borderHover,formInputBorderActive:K.colors.primary.border,formInputBorderInvalid:K.colors.error.border,formInputPlaceholderText:K.colors.text.disabled,formInputText:K.components.input.text,formInputDisabledText:K.colors.action.disabledText,formFocusOutline:K.colors.primary.main,formValidationMessageText:K.colors.error.contrastText,formValidationMessageBg:K.colors.error.main};return{...L,type:K.colors.mode==="dark"?D.Q.Dark:D.Q.Light,isDark:K.isDark,isLight:K.isLight,name:K.name,palette:{...V,brandPrimary:V.orange,brandSuccess:K.colors.success.main,brandWarning:K.colors.warning.main,brandDanger:K.colors.error.main,queryRed:K.colors.error.text,queryGreen:K.colors.success.text,queryPurple:"#fe85fc",queryOrange:V.orange,online:K.colors.success.main,warn:K.colors.success.main,critical:K.colors.success.main},colors:{...H,...j,..._,...A,bodyBg:K.colors.background.canvas,panelBg:K.components.panel.background,panelBorder:K.components.panel.borderColor,pageHeaderBg:K.colors.background.canvas,pageHeaderBorder:K.colors.background.canvas,dropdownBg:_.formInputBg,dropdownShadow:V.black,dropdownOptionHoverBg:H.bg2,link:K.colors.text.primary,linkDisabled:K.colors.text.disabled,linkHover:K.colors.text.maxContrast,linkExternal:K.colors.text.link},shadows:{listItem:"none"},visualization:K.visualization}}const M={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var x=e(53768);function R(K){const L=K.mode==="light"?O():S(),V={};for(const A of L)for(const _ of A.shades)if(V[_.name]=_.color,_.aliases)for(const k of _.aliases)V[k]=_.color;V.transparent="rgba(0,0,0,0)",V["panel-bg"]=K.background.primary,V.text=K.text.primary;const H=A=>{if(!A)return x.R;const _=V[A];if(_)return _;if(A[0]==="#"||A.indexOf("rgb")>-1)return A;const k=I[A.toLowerCase()];return k?(V[A]=k,k):A},j=U();return{hues:L,palette:j,getColorByName:H}}function S(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function O(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function U(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const I={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},F={navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function w(K={}){const{colors:L={},spacing:V={},shape:H={},typography:j={}}=K,A=u(L),_=t(),k=m(V),Q=r(H),re=a(A,j),Z=d(A),oe=v(),G=o(A,Z),le=R(A),fe={name:A.mode==="dark"?"Dark":"Light",isDark:A.mode==="dark",isLight:A.mode==="light",colors:A,breakpoints:_,spacing:k,shape:Q,components:G,typography:re,shadows:Z,transitions:oe,visualization:le,zIndex:{...F},flags:{}};return{...fe,v1:b(fe)}}},99358:(Y,T,e)=>{"use strict";e.d(T,{j:()=>t.j,r:()=>n});var t=e(21544),n=e(5680)},33750:(Y,T,e)=>{"use strict";e.d(T,{Kx:()=>u,TB:()=>o,gz:()=>f,uP:()=>d});var t=e(82897),n=e.n(t),i=e(52666),s=e(99098),l=e(53908),f=(v=>(v.sum="sum",v.max="max",v.min="min",v.logmin="logmin",v.mean="mean",v.variance="variance",v.stdDev="stdDev",v.last="last",v.first="first",v.count="count",v.range="range",v.diff="diff",v.diffperc="diffperc",v.delta="delta",v.step="step",v.firstNotNull="firstNotNull",v.lastNotNull="lastNotNull",v.changeCount="changeCount",v.distinctCount="distinctCount",v.allIsZero="allIsZero",v.allIsNull="allIsNull",v.allValues="allValues",v.uniqueValues="uniqueValues",v))(f||{});function u(v){const{field:h,reducers:P}=v;if(!h||!P||P.length<1)return{};if(h.state?.calcs){const R=[];for(const S of P)h.state.calcs.hasOwnProperty(S)||R.push(S);if(R.length<1)return{...h.state.calcs}}h.state||(h.state={});const a=o.list(P);if(h.values.length<1){const R={...h.state.calcs};for(const S of a)R[S.id]=S.emptyInputResult!==null?S.emptyInputResult:null;return h.state.calcs=R}const{nullValueMode:D}=h.config,b=D===i.Gl.Ignore,M=D===i.Gl.AsZero;if(a.length===1&&a[0].reduce){const R=a[0].reduce(h,b,M);return h.state.calcs={...h.state.calcs,...R},R}let x=d(h,b,M);for(const R of a)!x.hasOwnProperty(R.id)&&R.reduce&&(x={...x,...R.reduce(h,b,M)});return h.state.calcs={...h.state.calcs,...x},x}const o=new l.B(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value",standard:!0,aliasIds:["current"],reduce:p},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:c},{id:"firstNotNull",name:"First *",description:"First non-null value",standard:!0,reduce:m},{id:"first",name:"First",description:"First Value",standard:!0,reduce:r},{id:"min",name:"Min",description:"Minimum Value",standard:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:g},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:g},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:y},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:E},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:v=>({allValues:v.values})},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:v=>({uniqueValues:[...new Set(v.values)]})}]);function d(v,h,P){const a={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0},C=v.values;a.count=h?C.length:C.filter(b=>b!=null).length;const D=v.type===s.fS.number||s.fS.time;for(let b=0;b<C.length;b++){let M=C[b];if(b===0&&(a.first=M),a.last=M,M===null){if(h)continue;P&&(M=0)}if(M!=null){const x=a.firstNotNull===null;if(x&&(a.firstNotNull=M),D){if(a.sum+=M,a.allIsNull=!1,a.nonNullCount++,!x){const R=M-a.lastNotNull;a.step>R&&(a.step=R),a.lastNotNull>M?(a.previousDeltaUp=!1,b===C.length-1&&(a.delta+=M)):(a.previousDeltaUp?a.delta+=R:a.delta+=M,a.previousDeltaUp=!0)}M>a.max&&(a.max=M),M<a.min&&(a.min=M),M<a.logmin&&M>0&&(a.logmin=M)}M!==0&&(a.allIsZero=!1),a.lastNotNull=M}}return a.max===-Number.MAX_VALUE&&(a.max=null),a.min===Number.MAX_VALUE&&(a.min=null),a.step===Number.MAX_VALUE&&(a.step=null),a.nonNullCount>0&&(a.mean=a.sum/a.nonNullCount),a.allIsNull&&(a.allIsZero=!1),a.max!==null&&a.min!==null&&(a.range=a.max-a.min),(0,t.isNumber)(a.firstNotNull)&&(0,t.isNumber)(a.lastNotNull)&&(a.diff=a.lastNotNull-a.firstNotNull),(0,t.isNumber)(a.firstNotNull)&&(0,t.isNumber)(a.diff)&&(a.diffperc=a.diff/a.firstNotNull),a}function r(v,h,P){return{first:v.values[0]}}function m(v,h,P){const a=v.values;for(let C=0;C<a.length;C++){const D=a[C];if(D!=null&&D!==void 0)return{firstNotNull:D}}return{firstNotNull:null}}function c(v,h,P){const a=v.values;return{last:a[a.length-1]}}function p(v,h,P){const a=v.values;let C=a.length-1;for(;C>=0;){const D=a[C--];if(D!=null&&D!==void 0)return{lastNotNull:D}}return{lastNotNull:null}}function g(v,h,P){if(!(v.type===s.fS.number||v.type===s.fS.time))return{variance:0,stdDev:0};let a=0,C=0,D=0;const b=v.values;for(let M=0;M<b.length;M++){const x=b[M];if(x!=null){D++;let R=C;C+=(x-R)/D,a+=(x-R)*(x-C)}}if(D>0){const M=a/D;return{variance:M,stdDev:Math.sqrt(M)}}return{variance:0,stdDev:0}}function y(v,h,P){const a=v.values;let C=0,D=!0,b=null;for(let M=0;M<a.length;M++){let x=a[M];if(x===null){if(h)continue;P&&(x=0)}!D&&b!==x&&C++,D=!1,b=x}return{changeCount:C}}function E(v,h,P){const a=v.values,C=new Set;for(let D=0;D<a.length;D++){let b=a[D];if(b===null){if(h)continue;P&&(b=0)}C.add(b)}return{distinctCount:C.size}}},13095:(Y,T,e)=>{"use strict";e.d(T,{Ac:()=>i.Ac,E4:()=>t.E4,Ff:()=>t.Ff,Hz:()=>f.H,IG:()=>i.IG,JP:()=>d._9,J_:()=>m.J_,Jz:()=>r.Jz,Kx:()=>l.Kx,Ls:()=>i.Ls,Ok:()=>r.Ok,Op:()=>r.Op,TB:()=>l.TB,U8:()=>i.U8,UO:()=>r.UO,Wk:()=>n.W,YR:()=>s.Y,Ys:()=>o.Ys,Ze:()=>u.Z,Zi:()=>r.Zi,b9:()=>i.b9,cO:()=>r.cO,gY:()=>r.gY,gz:()=>l.gz,kl:()=>r.kl,lP:()=>d.lP,mB:()=>r.mB,mE:()=>t.mE,mi:()=>t.mi,py:()=>r.py,qr:()=>r.qr,sq:()=>i.sq,uP:()=>l.uP,wL:()=>r.wL,zM:()=>r.zM});var t=e(90748),n=e(13512),i=e(50035),s=e(50928),l=e(33750),f=e(13946),u=e(2653),o=e(73567),d=e(17587),r=e(75133),m=e(49052)},50035:(Y,T,e)=>{"use strict";e.d(T,{Ac:()=>g,IG:()=>h,Ls:()=>p,U8:()=>y,b9:()=>v,sq:()=>E});var t=e(53908),n=e(60096),i=e(11733),s=e(73567),l=e(33369),f=e(46933),u=e(71586),o=e(25249),d=e(16176),r=e(97792),m=e(88254),c=e(66088);const p=new t.B(()=>[...(0,l.Ty)(),...(0,n.N)(),...(0,s.Lk)(),...(0,u.z)(),i.b]),g=new t.B(()=>[...(0,l.fX)(),...(0,s.cC)(),...(0,f.n)()]),y=new t.B(()=>[...(0,d.a)(),...(0,r.H)(),...(0,o.T)(),...(0,m.G)(),...(0,c.G)()]);function E(P){const a=p.get(P.id);if(!a)throw new Error("Unknown field matcher: "+P.id);return a.get(P.options)}function v(P){const a=g.get(P.id);if(!a)throw new Error("Unknown frame matcher: "+P.id);return a.get(P.options)}function h(P){const a=y.get(P.id);if(!a)throw new Error("Unknown value matcher: "+P.id);return a.get(P.options)}},73567:(Y,T,e)=>{"use strict";e.d(T,{Lk:()=>g,Ys:()=>l,cC:()=>y});var t=e(30471),n=e(79086),i=e(99098),s=e(90748),l=(E=>(E.exclude="exclude",E.include="include",E))(l||{});const f={id:s.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:E=>{const h=o(new Set([E]));return(P,a,C)=>E===P.name||E===(0,t.CZ)(P,a,C)||Boolean(h&&h(P,a,C))},getOptionsDisplayText:E=>`Field name: ${E}`},u={id:s.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:E=>{const{names:v,mode:h="include"}=E,P=new Set(v??[]),a=o(P),C=(D,b,M)=>P.has(D.name)||P.has((0,t.CZ)(D,b,M))||Boolean(a&&a(D,b,M));return h==="exclude"?(D,b,M)=>!C(D,b,M):C},getOptionsDisplayText:E=>{const{names:v,mode:h}=E,P=(v??[]).join(", ");return h==="exclude"?`All except: ${P}`:`All of: ${P}`}};function o(E){let v;return window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback&&(E.has(i.M5)?v=(P,a)=>Boolean(P.labels)&&P.labels?.__name__===P.name:(E.has("Time")||E.has("time"))&&(v=(P,a)=>a.meta?.typeVersion==null&&P.type===i.fS.time)),v}const d={id:s.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:E=>{const v=c(E);return(h,P,a)=>{const C=(0,t.CZ)(h,P,a);return!!v&&v.test(C)}},getOptionsDisplayText:E=>`Field name by pattern: ${E}`},r={id:s.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:E=>(v,h,P)=>h.refId===E,getOptionsDisplayText:E=>`Math all fields returned by query with reference ID: ${E}`},m={id:s.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:E=>{const v=d.get(E?.pattern||""),h=u.get({mode:"include",names:E?.names??[]});return(P,a,C)=>h(P,a,C)||v(P,a,C)},getOptionsDisplayText:E=>{const v=E?.pattern??"",h=E?.names?.join(",")??"";return`Field name by pattern: ${v} or names: ${h}`}},c=E=>{if(E)try{return(0,n.jO)(E)}catch(v){console.error(v);return}},p={id:s.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:E=>{const v=(0,n.jO)(E);return h=>v.test(h.name||"")},getOptionsDisplayText:E=>`Frame name: ${E}`};function g(){return[f,d,u,m,r]}function y(){return[p]}},33369:(Y,T,e)=>{"use strict";e.d(T,{Qw:()=>p,Ty:()=>P,fX:()=>a,m3:()=>r});var t=e(99098),n=e(50035),i=e(90748);const s={id:i.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const D=C.map(b=>(0,n.sq)(b));return(b,M,x)=>{for(const R of D)if(R(b,M,x))return!0;return!1}},getOptionsDisplayText:C=>{let D="";for(const b of C){D.length>0&&(D+=" OR ");const M=n.Ls.get(b.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(b):M.name}return D}},l={id:i.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const D=C.map(b=>(0,n.b9)(b));return b=>{for(const M of D)if(M(b))return!0;return!1}},getOptionsDisplayText:C=>{let D="";for(const b of C){D.length>0&&(D+=" OR ");const M=n.Ac.get(b.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(b):M.name}return D}},f={id:i.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const D=C.map(b=>(0,n.sq)(b));return(b,M,x)=>{for(const R of D)if(!R(b,M,x))return!1;return!0}},getOptionsDisplayText:C=>{let D="";for(const b of C){D.length>0&&(D+=" AND ");const M=n.Ls.get(b.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(b):M.name}return D}},u={id:i.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const D=C.map(b=>(0,n.b9)(b));return b=>{for(const M of D)if(!M(b))return!1;return!0}},getOptionsDisplayText:C=>{let D="";for(const b of C){D.length>0&&(D+=" AND ");const M=n.Ac.get(b.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(b):M.name}return D}},o={id:i.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:C=>{const D=(0,n.sq)(C);return(b,M,x)=>!D(b,M,x)},getOptionsDisplayText:C=>{const D=n.Ls.get(C.id);return"NOT "+(D.getOptionsDisplayText?D.getOptionsDisplayText(C.options):D.name)}},d={id:i.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:C=>{const D=(0,n.b9)(C);return b=>!D(b)},getOptionsDisplayText:C=>{const D=n.Ac.get(C.id);return"NOT "+(D.getOptionsDisplayText?D.getOptionsDisplayText(C.options):D.name)}},r=C=>!0,m=C=>!0,c=C=>!1,p=C=>C.type!==t.fS.time,g=C=>!1,y={id:i.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:C=>r,getOptionsDisplayText:C=>"Always"},E={id:i.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:C=>m,getOptionsDisplayText:C=>"Always"},v={id:i.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:C=>c,getOptionsDisplayText:C=>"Never"},h={id:i.Ff.neverMatch,name:"No Frames",description:"Never Match",get:C=>g,getOptionsDisplayText:C=>"Never"};function P(){return[s,f,o,y,v]}function a(){return[l,u,d,E,h]}},2653:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>n});var t=e(53908);const n=new t.B},13946:(Y,T,e)=>{"use strict";e.d(T,{H:()=>d});var t=e(59980),n=e(39859),i=e(9471),s=e(50035),l=e(2653);const f=(m,c)=>p=>{const g=l.Z.get(m.id);if(!g)return p;const E={...g.transformation.defaultOptions??{},...m.options},v=m.filter?.options?(0,s.b9)(m.filter):void 0;return p.pipe((0,n.z)(h=>(0,t.of)(u(h,v)).pipe(g.transformation.operator(E,c),o(h,g,v))))};function u(m,c){return c?m.filter(p=>c(p)):m}const o=(m,c,p)=>g=>g.pipe((0,i.U)(y=>{if(y===m)return y;for(const E of y)E.meta||(E.meta={}),E.meta.transformations?E.meta.transformations=[...E.meta.transformations,c.id]:E.meta.transformations=[c.id];if(p){let E=0;const v=m.filter((h,P)=>{const a=!p(h);return a&&!E&&(E=P),a});v.length&&y.splice(E,0,...v)}return y}));function d(m,c,p){const g=(0,t.of)(c);if(!m.length)return g;const y=[],E=p??{interpolate:v=>v};for(let v=0;v<m.length;v++){const h=m[v];if(r(h))y.push(h(E));else{if(h.disabled)continue;y.push(f(h,E))}}return g.pipe.apply(g,y)}function r(m){return typeof m=="function"}},50928:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>me});var t=e(62294),n=e(32302),i=e(49052),s=e(44449),l=e(51907),f=e(98294),u=e(90748),o=e(13512);const d={id:o.W.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(q,ne)=>se=>{const he={};return q.include&&(he.include={id:u.E4.byRefId,options:q.include}),q.exclude&&(he.exclude={id:u.E4.byRefId,options:q.exclude}),se.pipe(l.u.operator(he,ne))}};var r=e(91603),m=e(61171),c=e(9471),p=e(53678),g=e(30471),y=e(90834),E=e(99098),v=e(50035);const h="Time",P="Time",a="Value",C=y.U.Empty,D=window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback,b={id:o.W.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:h,rowField:P,valueField:a},operator:q=>ne=>ne.pipe((0,c.U)(se=>{const he=q.columnField||h,ue=q.rowField||P,Te=q.valueField||a,Ve=q.emptyValue||C;if(se.length!==1)return se;const ct=se[0],Ie=x(ct,he),Ke=x(ct,ue),Ge=x(ct,Te),at=`${ue}\\${he}`;if(!Ie||!Ke||!Ge)return se;const dt=M(Ie.values),Re=M(Ke.values),ye={};for(let be=0;be<Ge.values.length;be++){const Be=Ie.values[be],ke=Ke.values[be],ot=Ge.values[be];ye[Be]||(ye[Be]={}),ye[Be][ke]=ot}const Pe=new p.v;Pe.addField({name:at,values:Re,type:E.fS.string});for(const be of dt){let Be=[];for(const ke of Re){const ot=ye[be][ke]??R(Ve);Be.push(ot)}D&&typeof be=="number"&&(Ge.config={...Ge.config,displayNameFromDS:void 0}),Pe.addField({name:be.toString(),values:Be,config:Ge.config,type:Ge.type})}return[Pe]}))};function M(q){const ne=new Set;for(let se=0;se<q.length;se++)ne.add(q[se]);return Array.from(ne)}function x(q,ne){for(let se=0;se<q.fields.length;se++){const he=q.fields[se];let ue;if(D?ue=v.Ls.get(u.mi.byName).get(ne)(he,q,[q]):ue=ne===(0,g.CZ)(he),ue)return he}return null}function R(q){switch(q){case y.U.False:return!1;case y.U.True:return!0;case y.U.Null:return null;case y.U.Empty:default:return""}}var S=e(75133),O=e(13221),U=e(31568);const I=10,F={id:o.W.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:I},operator:q=>ne=>ne.pipe((0,c.U)(se=>{const he=q.limitField||I;return se.map(ue=>ue.length>he?{...ue,fields:ue.fields.map(Te=>({...Te,values:Te.values.slice(0,he)})),length:he}:ue)}))};var w=e(18820),K=e(43137),L=e(74700);const V={id:o.W.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:q=>ne=>ne.pipe((0,c.U)(se=>{const he=H(q.renameByName);return!Array.isArray(se)||se.length===0?se:se.map(ue=>({...ue,fields:he(ue)}))}))},H=q=>ne=>!q||Object.keys(q).length===0?ne.fields:ne.fields.map(se=>{const he=(0,g.CZ)(se,ne),ue=q[he];return typeof ue!="string"||ue.length===0?se:{...se,config:{...se.config,displayName:ue},state:{...se.state,displayName:ue}}}),j={id:o.W.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{}},operator:(q,ne)=>se=>se.pipe(f.w.operator({exclude:{names:A(q.excludeByName)}},ne),L.t.operator(q,ne),V.operator(q,ne))},A=q=>q?Object.keys(q).filter(ne=>q[ne]):[];var _=e(27742),k=e(79086);const Q={id:o.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:q=>ne=>ne.pipe((0,c.U)(se=>!Array.isArray(se)||se.length===0?se:se.map(re(q))))},re=q=>ne=>{const se=(0,k.jO)(q.regex),he=ne.fields.map(ue=>{const Te=(0,g.CZ)(ue,ne);if(!se.test(Te))return ue;const Ve=Te.replace(se,q.renamePattern);return{...ue,config:{...ue.config,displayName:Ve},state:{...ue.state,displayName:Ve}}});return{...ne,fields:he}};var Z=e(82897),oe=e(83881),G=e(19447);const le={id:o.W.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:q=>ne=>ne.pipe((0,c.U)(se=>{if(!Array.isArray(se)||se.length<=1||!(0,G.xI)(se))return se;const he={},ue=new Set,Te=new p.v,Ve={name:E.rN,values:[],config:{},type:E.fS.string};for(let ct=0;ct<se.length;ct++){const Ie=se[ct];for(let Ke=0;Ke<Ie.fields.length;Ke++){const Ge=Ie.fields[Ke];if(Ge.type===E.fS.time){he[ct]=Ke,ue.has(E.Ls)||(Te.addField(fe(Ge,E.Ls)),Te.addField(Ve),ue.add(E.Ls));continue}ue.has(E.M5)||(Te.addField(fe(Ge,E.M5)),ue.add(E.M5))}}for(let ct=0;ct<se.length;ct++){const Ie=se[ct];for(let Ke=0;Ke<Ie.length;Ke++){const Ge=he[ct],at=Ge===0?1:0;Te.add({[E.Ls]:Ie.fields[Ge].values[Ke],[E.rN]:(0,g.nf)(Ie),[E.M5]:Ie.fields[at].values[Ke]})}}return[(0,oe.aK)(Te,0,!0)]}))},fe=(q,ne)=>({...(0,Z.omit)(q,["values","state","labels","config","name"]),name:ne,values:[],config:{...(0,Z.omit)(q.config,["displayName","displayNameFromDS"])}}),ae={id:o.W.sortBy,name:"Sort by",description:"Sort fields in a frame",defaultOptions:{fields:{}},operator:q=>ne=>ne.pipe((0,c.U)(se=>!Array.isArray(se)||se.length===0||!q?.sort?.length?se:de(se,q.sort)))};function de(q,ne){return q.map(se=>{const he=ee(se,ne);return he.length&&he[0].index!=null?(0,oe.aK)(se,he[0].index,he[0].desc):se})}function ee(q,ne){return ne.map(se=>se.index!=null?se:{...se,index:q.fields.findIndex(he=>se.field===(0,g.CZ)(he,q))})}const me={noopTransformer:K.d,filterFieldsTransformer:l.P,filterFieldsByNameTransformer:f.w,filterFramesTransformer:l.u,filterFramesByRefIdTransformer:d,filterByValueTransformer:r.JA,orderFieldsTransformer:L.t,organizeFieldsTransformer:j,reduceTransformer:_.mf,concatenateTransformer:n.aE,calculateFieldTransformer:t.U,joinByFieldTransformer:O.M,seriesToColumnsTransformer:O.M,seriesToRowsTransformer:le,renameFieldsTransformer:V,labelsToFieldsTransformer:U.r,ensureColumnsTransformer:s.W,groupByTransformer:m.i,sortByTransformer:ae,mergeTransformer:w.R,renameByRegexTransformer:Q,histogramTransformer:S.Op,convertFieldTypeTransformer:i.mg,groupingToMatrixTransformer:b,limitTransformer:F}},62294:(Y,T,e)=>{"use strict";e.d(T,{U:()=>h,h:()=>D,ie:()=>y});var t=e(82897),n=e.n(t),i=e(9471),s=e(83881),l=e(30471),f=e(99098),u=e(52666),o=e(66392),d=e(33750),r=e(50035),m=e(90748),c=e(44449),p=e(13512),g=e(43137),y=(b=>(b.ReduceRow="reduceRow",b.BinaryOperation="binary",b.Index="index",b))(y||{});const E={reducer:d.gz.sum},v={left:"",operator:o.L.Add,right:""},h={id:p.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:d.gz.sum}},operator:(b,M)=>x=>{const R=b&&b.timeSeries!==!1?c.W.operator(null,M):g.d.operator({},M);return b.alias!=null&&(b.alias=M.interpolate(b.alias)),x.pipe(R,(0,i.U)(S=>{const O=b.mode??"reduceRow";let U;if(O==="reduceRow")U=P((0,t.defaults)(b.reduce,E),S);else if(O==="binary"){const I={...b.binary,left:M.interpolate(b.binary?.left),right:M.interpolate(b.binary?.right)};U=C((0,t.defaults)(I,v),S)}else if(O==="index")return S.map(I=>{const F={name:b.alias??"Row",type:f.fS.number,values:[...Array(I.length).keys()],config:{}};return{...I,fields:b.replaceFields?[F]:[...I.fields,F]}});return U?S.map(I=>{const F=U(I);if(!F)return I;const w={name:D(b),type:f.fS.number,config:{},values:F};let K=[];if(b.replaceFields){const{timeField:L}=(0,s.sV)(I);L&&b.timeSeries!==!1?K=[L,w]:K=[w]}else K=[...I.fields,w];return{...I,fields:K}}):S}))}};function P(b,M){let x=(0,r.sq)({id:m.mi.numeric});b.include&&b.include.length&&(x=(0,r.sq)({id:m.mi.byNames,options:{names:b.include}}));const R=d.TB.get(b.reducer);if(!R)throw new Error(`Unknown reducer: ${b.reducer}`);const S=R.reduce??d.uP,O=b.nullValueMode===u.Gl.Ignore,U=b.nullValueMode===u.Gl.AsZero;return I=>{const F=[];for(const V of I.fields)x(V,I,M)&&F.push(V.values);const w=F.length,K={name:"temp",values:new Array(w),type:f.fS.number,config:{}},L=[];for(let V=0;V<I.length;V++){for(let H=0;H<w;H++)K.values[H]=F[H][V];L.push(S(K,O,U)[b.reducer])}return L}}function a(b,M,x){if(!M)return;for(const S of b.fields)if(M===(0,l.CZ)(S,b,x))return S.type===f.fS.boolean?S.values.map(O=>O?1:0):S.values;const R=parseFloat(M);if(!isNaN(R))return new Array(b.length).fill(R)}function C(b,M){const x=o.n.getIfExists(b.operator);return R=>{const S=a(R,b.left,M),O=a(R,b.right,M);if(!S||!O||!x)return;const U=new Array(S.length);for(let I=0;I<U.length;I++)U[I]=x.operation(S[I],O[I]);return U}}function D(b){if(b.alias?.length)return b.alias;switch(b.mode){case"binary":{const{binary:M}=b;return`${M?.left??""} ${M?.operator??""} ${M?.right??""}`}case"reduceRow":{const M=d.TB.getIfExists(b.reduce?.reducer);if(M)return M.name}break;case"index":return"Row"}return"math"}},32302:(Y,T,e)=>{"use strict";e.d(T,{HO:()=>s,aE:()=>l});var t=e(9471),n=e(99098),i=e(13512),s=(u=>(u.Drop="drop",u.FieldName="field",u.Label="label",u))(s||{});const l={id:i.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:u=>o=>o.pipe((0,t.U)(d=>!Array.isArray(d)||d.length<2?d:[f(d,u)]))};function f(u,o){let d=!0,r=u[0].length;const m=o.frameNameLabel??"frame";let c=[];for(const p of u){r!==p.length&&(d=!1,r=Math.max(r,p.length));for(const g of p.fields){const y={...g};y.state=void 0,p.name&&(o.frameNameMode==="drop"||(o.frameNameMode==="label"?(y.labels={...g.labels},y.labels[m]=p.name):!y.name||y.name===n.M5?y.name=p.name:y.name=`${p.name} \xB7 ${g.name}`)),c.push(y)}}return d||(c=c.map(p=>{if(p.values.length===r)return p;const g=p.values;return g.length=r,{...p,values:g}})),{fields:c,length:r}}},49052:(Y,T,e)=>{"use strict";e.d(T,{J_:()=>E,mg:()=>u,p8:()=>d});var t=e(9471),n=e(29826),i=e(99098),s=e(50035),l=e(90748),f=e(13512);const u={id:f.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0}]},operator:(h,P)=>a=>a.pipe((0,t.U)(C=>u.transformer(h,P)(C))),transformer:h=>P=>!Array.isArray(P)||P.length===0?P:o(h,P)??[]};function o(h,P){if(!h.conversions.length)return P;const a=P.map(C=>({...C}));for(const C of h.conversions){if(!C.targetField)continue;const D=s.Ls.get(l.mi.byName).get(C.targetField);for(const b of a)b.fields=b.fields.map(M=>D(M,b,a)?d(M,C):M)}return a}function d(h,P){switch(P.destinationType){case i.fS.time:return E(h,P.dateFormat);case i.fS.number:return c(h);case i.fS.string:return g(h,P.dateFormat);case i.fS.boolean:return p(h);case i.fS.enum:return v(h,P.enumConfig);case i.fS.other:return y(h);default:return h}}const r=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function m(h,P){let a=P?{format:P}:void 0;const C=h.values.slice();let D=C.find(M=>M!=null),b=typeof D=="string"&&r.test(D);for(let M=0;M<C.length;M++)if(C[M]){let x=b?Date.parse(C[M]):(0,n.J)(C[M],a).valueOf();C[M]=Number.isFinite(x)?x:null}else C[M]=null;return{...h,type:i.fS.time,values:C}}function c(h){const P=h.values.slice(),a=P.some(C=>typeof C=="string");for(let C=0;C<P.length;C++){let D=P[C];a&&D!=null&&typeof D=="string"&&(D=D.replace(/,/g,""));const b=+D;P[C]=Number.isFinite(b)?b:null}return{...h,type:i.fS.number,values:P}}function p(h){const P=h.values.slice();for(let a=0;a<P.length;a++)P[a]=Boolean(!!P[a]);return{...h,type:i.fS.boolean,values:P}}function g(h,P){let a=h.values;switch(h.type){case i.fS.time:a=a.map(C=>(0,n.J)(C).format(P));break;case i.fS.other:a=a.map(C=>JSON.stringify(C));break;default:a=a.map(C=>`${C}`)}return{...h,type:i.fS.string,values:a}}function y(h){const P=h.values.slice();for(let a=0;a<P.length;a++)try{P[a]=JSON.parse(P[a])}catch{P[a]=null}return{...h,type:i.fS.other,values:P}}function E(h,P){const a=typeof h.values[0]=="number";return h.type===i.fS.time&&a?h:a?{...h,type:i.fS.time}:m(h,P)}function v(h,P){const a={...P},C=h.values.slice(),D=new Map;if(a.text)for(let b=0;b<a.text.length;b++)D.set(a.text[b],b);else a.text=[];for(let b=0;b<C.length;b++){const M=C[b];D.has(M)||(a.text[D.size]=M,D.set(M,D.size)),C[b]=D.get(M)}return{...h,config:{...h.config,type:{enum:a}},type:i.fS.enum,values:C}}},44449:(Y,T,e)=>{"use strict";e.d(T,{W:()=>l});var t=e(9471),n=e(83881),i=e(13512),s=e(13221);const l={id:i.W.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(u,o)=>d=>d.pipe((0,t.U)(r=>l.transformer(u,o)(r))),transformer:(u,o)=>d=>{const r=f(d);return d.length>1&&r?s.M.transformer({byField:r},o)(d):d}};function f(u){let o;for(const d of u){const{timeField:r}=(0,n.sV)(d);if(!r)return;if(!o)o=r.name;else if(o!==r.name)return}return o}},51907:(Y,T,e)=>{"use strict";e.d(T,{P:()=>l,u:()=>f});var t=e(9471),n=e(50035),i=e(13512),s=e(43137);const l={id:i.W.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(u,o)=>d=>!u.include&&!u.exclude?d.pipe(s.d.operator({},o)):(typeof u.include?.options=="string"?u.include.options=o.interpolate(u.include?.options):typeof u.include?.options?.pattern=="string"&&(u.include.options.pattern=o.interpolate(u.include?.options.pattern)),typeof u.exclude?.options=="string"?u.exclude.options=o.interpolate(u.exclude?.options):typeof u.exclude?.options?.pattern=="string"&&(u.exclude.options.pattern=o.interpolate(u.exclude?.options.pattern)),d.pipe((0,t.U)(r=>{const m=u.include?(0,n.sq)(u.include):null,c=u.exclude?(0,n.sq)(u.exclude):null,p=[];for(const g of r){const y=[];for(let v=0;v<g.fields.length;v++){const h=g.fields[v];if(c){if(c(h,g,r))continue;m||y.push(h)}m&&m(h,g,r)&&y.push(h)}if(!y.length)continue;const E={...g,fields:y};p.push(E)}return p})))},f={id:i.W.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(u,o)=>d=>!u.include&&!u.exclude?d.pipe(s.d.operator({},o)):d.pipe((0,t.U)(r=>{const m=u.include?(0,n.b9)(u.include):null,c=u.exclude?(0,n.b9)(u.exclude):null,p=[];for(const g of r){if(c){if(c(g))continue;m||p.push(g)}m&&m(g)&&p.push(g)}return p}))}},98294:(Y,T,e)=>{"use strict";e.d(T,{f:()=>l,w:()=>s});var t=e(90748),n=e(51907),i=e(13512);const s={id:i.W.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(f,u)=>o=>o.pipe(n.P.operator({include:l(f.include),exclude:l(f.exclude)},u))},l=f=>{if(!f)return;const{names:u,pattern:o}=f;if(!((!Array.isArray(u)||u.length===0)&&!o))return o?!Array.isArray(u)||u.length===0?{id:t.mi.byRegexp,options:o}:{id:t.mi.byRegexpOrNames,options:f}:{id:t.mi.byNames,options:{names:u}}}},91603:(Y,T,e)=>{"use strict";e.d(T,{ER:()=>u,JA:()=>o,PQ:()=>f});var t=e(9471),n=e(30471),i=e(50035),s=e(13512),l=e(43137),f=(m=>(m.exclude="exclude",m.include="include",m))(f||{}),u=(m=>(m.all="all",m.any="any",m))(u||{});const o={id:s.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(m,c)=>p=>{const g=m.filters,y=m.match==="all",E=m.type==="include";return!Array.isArray(g)||g.length===0?p.pipe(l.d.operator({},c)):p.pipe((0,t.U)(v=>{if(!Array.isArray(v)||v.length===0)return v;const h=new Set;for(const C of v){const D=r(C,v),b=d(g,D);for(let M=0;M<C.length;M++){if(h.has(M))continue;let x=!0;for(const R of b){const S=R(M,C,v);if(!y&&S){x=!0;break}if(y&&!S){x=!1;break}x=S}x&&h.add(M)}}const P=[],a=E?h.size:v[0].length-h.size;for(const C of v){const D=[];for(const b of C.fields){const M=[];for(let x=0;x<C.length;x++){if(E&&h.has(x)){M.push(b.values[x]);continue}if(!E&&!h.has(x)){M.push(b.values[x]);continue}}D.push({...b,values:M,state:{}})}P.push({...C,fields:D,length:a})}return P}))}},d=(m,c)=>{const p=()=>!1;return m.map(g=>{const y=c[g.fieldName]??-1;if(y<0)return console.warn(`[FilterByValue] Could not find index for field name: ${g.fieldName}`),p;const E=(0,i.IG)(g.config);return(v,h,P)=>E(v,h.fields[y],h,P)})},r=(m,c)=>m.fields.reduce((p,g,y)=>{const E=(0,n.CZ)(g,m,c);return p[E]=y,p},{})},61171:(Y,T,e)=>{"use strict";e.d(T,{i:()=>o,x:()=>u});var t=e(9471),n=e(83881),i=e(30471),s=e(99098),l=e(33750),f=e(13512),u=(c=>(c.aggregate="aggregate",c.groupBy="groupby",c))(u||{});const o={id:f.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group",defaultOptions:{fields:{}},operator:c=>p=>p.pipe((0,t.U)(g=>{if(!Object.keys(c.fields).find(v=>c.fields[v].operation==="groupby"))return g;const E=[];for(const v of g){const h=[];for(const C of v.fields)d(C,c)&&h.push(C);if(h.length===0)continue;const P=new Map;for(let C=0;C<v.length;C++){const D=String(h.map(M=>M.values[C])),b=P.get(D)??{};P.has(D)||P.set(D,b);for(let M of v.fields){const x=(0,i.CZ)(M);b[x]||(b[x]={name:x,type:M.type,config:{...M.config},values:[]}),b[x].values.push(M.values[C])}}const a=[];for(const C of h){const D=[],b=(0,i.CZ)(C);P.forEach(M=>{D.push(M[b].values[0])}),a.push({name:C.name,type:C.type,config:{...C.config},values:D})}for(const C of v.fields){if(!r(C,c))continue;const D=(0,i.CZ)(C),b=c.fields[D].aggregations,M={};P.forEach(x=>{const R=x[D],S=(0,l.Kx)({field:R,reducers:b});for(const O of b)Array.isArray(M[O])||(M[O]=[]),M[O].push(S[O])});for(const x of b){const R={name:`${D} (${x})`,values:M[x],type:s.fS.other,config:{}};R.type=m(x,C,R),a.push(R)}}E.push({fields:a,length:P.size})}return E}))},d=(c,p)=>{const g=(0,i.CZ)(c);return p?.fields[g]?.operation==="groupby"},r=(c,p)=>{const g=(0,i.CZ)(c);return p?.fields[g]?.operation==="aggregate"&&Array.isArray(p?.fields[g].aggregations)&&p?.fields[g].aggregations.length>0},m=(c,p,g)=>{switch(c){case l.gz.allIsNull:return s.fS.boolean;case l.gz.last:case l.gz.lastNotNull:case l.gz.first:case l.gz.firstNotNull:return p.type;default:return(0,n.fu)(g)??s.fS.string}}},75133:(Y,T,e)=>{"use strict";e.d(T,{Jz:()=>C,Ok:()=>y,Op:()=>p,UO:()=>D,Zi:()=>d,cO:()=>E,gY:()=>a,kl:()=>v,mB:()=>b,py:()=>c,qr:()=>h,wL:()=>g,zM:()=>x});var t=e(9471),n=e(6194),i=e(21544),s=e(39393),l=e(99098),f=e(56190),u=e(13512),o=e(17587);const d=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],r=[null],m=(R,S)=>R-S,c={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},p={id:u.W.histogram,name:"Histogram",description:"Calculate a histogram from input data",defaultOptions:{fields:{}},operator:(R,S)=>O=>O.pipe((0,t.U)(U=>p.transformer(R,S)(U))),transformer:R=>S=>{if(!Array.isArray(S)||S.length===0)return S;const O=a(S,R);return O==null?[]:[x(O)]}},g="xMin";function y(R){return R===g||R==="BucketMin"}const E="xMax";function v(R){return R===E||R==="BucketMax"}function h(R){let S,O;const U=[];for(const I of R.fields)y(I.name)?S=I:v(I.name)?O=I:I.type===l.fS.number&&U.push(I);if(!O&&S&&S.values.length>1){let I=S.values,F=(0,f.O)(I[1]-I[0],6);O={...S,name:E,values:I.map(w=>w+F)}}if(!S&&O&&O?.values.length>1){let I=O.values,F=(0,f.O)(I[1]-I[0],6);S={...O,name:g,values:I.map(w=>w-F)}}if(S&&O&&U.length)return{xMin:S,xMax:O,counts:U}}const P=20;function a(R,S){let O=S?.bucketSize,U=S?.bucketOffset??0;if(!O||O<0){let A=[];for(const oe of R)for(const G of oe.fields)G.type===l.fS.number&&(A=A.concat(G.values));A=A.filter(oe=>oe!=null),A.sort((oe,G)=>oe-G);let _=1/0;if(A.length===1)_=1;else for(let oe=1;oe<A.length;oe++){let G=A[oe]-A[oe-1];G!==0&&(_=Math.min(_,G))}let k=A[0];const Z=(A[A.length-1]-k)/P;for(let oe=0;oe<d.length;oe++){let G=d[oe];if(Z<G&&G>=_){O=G;break}}}const I=A=>b(A-U,O)+U;let F=((""+O).match(/\.\d+$/)??["."])[0].length-1,w=[],K=[],L;for(const A of R)for(const _ of A.fields)if(_.type===l.fS.number){let k=M(_.values,I,r,m);w.push(k),K.push({..._,config:{..._.config,unit:_.config.unit==="short"?"short":void 0}}),!L&&_.config.unit&&(L=_.config)}if(!K.length)return null;let V=(0,o.v_)(w);for(let A=1;A<V.length;A++){let _=V[A];for(let k=0;k<_.length;k++)_[k]==null&&(_[k]=0)}const H={name:g,values:V[0],type:l.fS.number,state:void 0,config:F===0?L??{}:{...L,decimals:F}},j={...H,name:E,values:V[0].map(A=>A+O)};if(S?.combine){const A=new Array(V[0].length).fill(0);for(let _=1;_<V.length;_++)for(let k=0;k<A.length;k++)A[k]+=V[_][k];K=[{...K[0],name:"count",values:A,type:l.fS.number,state:void 0}]}else K.forEach((A,_)=>{A.values=V[_+1]});return{xMin:H,xMax:j,counts:K}}function C(R,S){return Math.round(R/S)*S}function D(R,S){return Math.ceil(R/S)*S}function b(R,S){return Math.floor(R/S)*S}function M(R,S,O,U){let I=new Map;for(let L=0;L<R.length;L++){let V=R[L];V!=null&&(V=S(V));let H=I.get(V);H?H.count++:I.set(V,{value:V,count:1})}O&&O.forEach(L=>I.delete(L));let F=[...I.values()];U&&F.sort((L,V)=>U(L.value,V.value));let w=Array(F.length),K=Array(F.length);for(let L=0;L<F.length;L++)w[L]=F[L].value,K[L]=F[L].count;return[w,K]}function x(R,S){if(!R.xMin.display){const O=(0,n.U_)({field:R.xMin,theme:S??(0,i.j)()});R.xMin.display=O,R.xMax.display=O}return R.counts[0].display=(0,n.U_)({field:R.counts[0],theme:S??(0,i.j)()}),{length:R.xMin.values.length,meta:{type:s.P.Histogram},fields:[R.xMin,R.xMax,...R.counts]}}},13221:(Y,T,e)=>{"use strict";e.d(T,{M:()=>u,c:()=>f});var t=e(9471),n=e(50035),i=e(90748),s=e(13512),l=e(17587),f=(o=>(o.outer="outer",o.inner="inner",o))(f||{});const u={id:s.W.joinByField,aliasIds:[s.W.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(o,d)=>r=>r.pipe((0,t.U)(m=>u.transformer(o,d)(m))),transformer:o=>{let d;return r=>{if(r.length>1){o.byField&&!d&&(d=n.Ls.get(i.mi.byName).get(o.byField));const m=(0,l._9)({frames:r,joinBy:d,mode:o.mode});if(m)return[m]}return r}}}},17587:(Y,T,e)=>{"use strict";e.d(T,{Y3:()=>d,_9:()=>r,lP:()=>E,v_:()=>y});var t=e(39963),n=e(83881),i=e(99098),s=e(50035),l=e(90748),f=e(13221);function u(v){const{timeField:h}=(0,n.sV)(v[0]);if(h)return s.Ls.get(l.mi.firstTimeField).get({});let P=[];for(const a of v[0].fields)a.type===i.fS.number&&P.push(a.name);for(let a=1;a<v.length;a++){const C=[];for(const D of v[0].fields)D.type===i.fS.number&&C.push(D.name);P=P.filter(D=>!C.includes(D))}return s.Ls.get(l.mi.byName).get(P[0])}function o(v){return v.joinBy??u(v.frames)}function d(v,h){if(h>=0){let P=v.fields[h];P.type!==i.fS.string&&!E(P.values)&&(v=(0,n.aK)(v,h))}return v}function r(v){if(!v.frames?.length)return;if(v.frames.length===1){let b=v.frames[0],M=b;const x=o(v);let R=M.fields.findIndex(S=>x(S,M,v.frames));if(v.keepOriginIndices&&(M={...b,fields:b.fields.map((S,O)=>{const U={...S},I={frameIndex:0,fieldIndex:O};return U.state?U.state.origin=I:U.state={origin:I},U})},R>0)){const S=M.fields[R],O=M.fields.filter((U,I)=>I!==R);O.unshift(S),M.fields=O,R=0}if(R>=0&&(M=d(M,R)),v.keep){let S=M.fields.filter((O,U)=>U===R||v.keep(O,M,v.frames));b!==M?M.fields=S:M={...b,fields:S}}return M}const h=[],P=[],a=[],C=o(v);for(let b=0;b<v.frames.length;b++){const M=v.frames[b];if(!M||!M.fields?.length)continue;const x=[m];let R,S=[];for(let U=0;U<M.fields.length;U++){const I=M.fields[U];if(I.state=I.state||{},!R&&C(I,M,v.frames))R=I;else{if(v.keep&&!v.keep(I,M,v.frames))continue;let F=I.config.custom?.spanNulls;x.push(F===!0?m:F===-1?c:p);let w=I.labels??{};M.name&&(w={...w,name:M.name}),S.push({...I,labels:w})}v.keepOriginIndices&&(I.state.origin={frameIndex:b,fieldIndex:U})}if(!R)continue;a.length===0&&a.push(R),h.push(x);const O=[R.values];for(const U of S)O.push(U.values),a.push(U),delete U.state?.displayName;P.push(O)}const D=y(P,h,v.mode);return{length:D[0].length,fields:a.map((b,M)=>({...b,values:D[M]}))}}const m=0,c=1,p=2;function g(v,h,P){for(let a=0,C,D=-1;a<h.length;a++){let b=h[a];if(b>D){for(C=b-1;C>=0&&v[C]==null;)v[C--]=null;for(C=b+1;C<P&&v[C]==null;)v[D=C++]=null}}}function y(v,h,P=f.c.outer){let a;if(P===f.c.inner)a=new Set((0,t.Z)(v.map(M=>M[0])));else{a=new Set;for(let M=0;M<v.length;M++){let R=v[M][0],S=R.length;for(let O=0;O<S;O++)a.add(R[O])}}let C=[Array.from(a).sort((M,x)=>M-x)],D=C[0].length,b=new Map;for(let M=0;M<D;M++)b.set(C[0][M],M);for(let M=0;M<v.length;M++){let x=v[M],R=x[0];for(let S=1;S<x.length;S++){let O=x[S],U=Array(D).fill(void 0),I=h?h[M][S]:c,F=[];for(let w=0;w<O.length;w++){let K=O[w],L=b.get(R[w]);K===null?I!==m&&(U[L]=K,I===p&&F.push(L)):U[L]=K}g(U,F,D),C.push(U)}}return C}function E(v,h=50){const P=v.length;if(P<=1)return!0;let a=0,C=P-1;for(;a<=C&&v[a]==null;)a++;for(;C>=a&&v[C]==null;)C--;if(C<=a)return!0;const D=Math.max(1,Math.floor((C-a+1)/h));for(let b=v[a],M=a+D;M<=C;M+=D){const x=v[M];if(x!=null){if(x<=b)return!1;b=x}}return!0}},31568:(Y,T,e)=>{"use strict";e.d(T,{k:()=>l,r:()=>f});var t=e(9471),n=e(30471),i=e(99098),s=e(13512),l=(o=>(o.Columns="columns",o.Rows="rows",o))(l||{});const f={id:s.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(o,d)=>r=>r.pipe((0,t.U)(m=>f.transformer(o,d)(m))),transformer:o=>d=>{if(o.mode==="rows")return u(d,o.keepLabels);const r=[],m=o.keepLabels?.length?new Set(o.keepLabels):void 0;for(const c of d){const p=[],g={};for(const y of c.fields){if(!y.labels){p.push(y);continue}const E={...y,config:{...y.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};p.push(E);for(const v of Object.keys(y.labels)){if(m&&!m.has(v))continue;if(o.valueLabel===v){E.name=y.labels[v];continue}(g[v]??(g[v]=new Set)).add(y.labels[v])}}for(const y in g)for(const E of g[y]){const v=new Array(c.length).fill(E);p.push({name:y,type:i.fS.string,values:v,config:{}})}r.push({...c,fields:p,length:c.length})}return r}};function u(o,d){const r=[];for(const m of o)for(const c of m.fields)if(c.labels){const p=[],g=[];if(d)for(const y of d)p.push(y),g.push(c.labels[y]);else for(const[y,E]of Object.entries(c.labels))p.push(y),g.push(E);g.length&&r.push({...m,name:(0,n.CZ)(c,m,o),fields:[{name:"label",type:i.fS.string,config:{},values:p},{name:"value",type:i.fS.string,config:{},values:g}],length:g.length})}return r}},18820:(Y,T,e)=>{"use strict";e.d(T,{R:()=>f});var t=e(82897),n=e.n(t),i=e(9471),s=e(53678),l=e(13512);const f={id:l.W.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},operator:p=>g=>g.pipe((0,i.U)(y=>{if(!Array.isArray(y)||y.length<=1)return y;const E=y.filter(x=>x.fields.length>0);if(E.length===0)return[y[0]];const v=new Set,h={},P=[],a=new s.v;for(let x=0;x<E.length;x++){const R=E[x];for(let S=0;S<R.fields.length;S++){const O=R.fields[S];v.has(O.name)||(a.addField(u(O)),v.add(O.name)),h[O.name]=h[O.name]||{},h[O.name][x]=S,E.length-1===x&&m(h,O,E)&&P.push(O.name)}}if(P.length===0)return y;const C={},D=[],b=o(E,h,P),M=d(E,v,h);for(let x=0;x<E.length;x++){const R=E[x];for(let S=0;S<R.length;S++){const O=b(x,S),U=M(x,S);if(!Array.isArray(C[O])){C[O]=[U],D.push(c(O,C));continue}let I=!1;C[O]=C[O].map(F=>r(F,U)?(I=!0,{...F,...U}):F),I||(C[O].push(U),D.push(c(O,C)))}}for(const x of D){const R=C[x.key][x.index];R&&a.add(R)}return[a]}))},u=p=>({...(0,t.omit)(p,["values","state","labels","config"]),values:[],config:{...(0,t.omit)(p.config,"displayName")}}),o=(p,g,y)=>{const E=y.reduce((v,h)=>Object.keys(g[h]).reduce((P,a)=>(P[a]=P[a]||[],P[a].push(g[h][a]),P),v),{});return(v,h)=>E[v].reduce((P,a)=>P+p[v].fields[a].values[h],"")},d=(p,g,y)=>(E,v)=>{const h={},P=Array.from(g);for(const a of P){const C=y[a];if(!C)continue;const D=C[E];if(typeof D!="number")continue;const b=p[E];if(!b||!b.fields)continue;const M=b.fields[D];!M||!M.values||(h[a]=M.values[v])}return h},r=(p,g)=>{let y=!0;for(const E in g)if(!(typeof p[E]>"u")&&p[E]!==null&&p[E]!==g[E]){y=!1;break}return y},m=(p,g,y)=>Object.keys(p[g.name]).length===y.length,c=(p,g)=>({key:p,index:g[p].length-1})},43137:(Y,T,e)=>{"use strict";e.d(T,{d:()=>n});var t=e(13512);const n={id:t.W.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:i=>s=>s,transformer:i=>s=>s}},74700:(Y,T,e)=>{"use strict";e.d(T,{$:()=>u,t:()=>f});var t=e(82897),n=e.n(t),i=e(9471),s=e(30471),l=e(13512);const f={id:l.W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:r=>m=>m.pipe((0,i.U)(c=>{const p=o(r.indexByName);return!Array.isArray(c)||c.length===0?c:c.map(g=>({...g,fields:p(g.fields,c,g)}))}))},u=r=>(m,c)=>d(m,r)-d(c,r),o=r=>(m,c,p)=>{if(!Array.isArray(m)||m.length===0||!r||Object.keys(r).length===0)return m;const g=u(r);return(0,t.clone)(m).sort((y,E)=>g((0,s.CZ)(y,p,c),(0,s.CZ)(E,p,c)))},d=(r,m)=>Number.isInteger(m[r])?m[r]:Number.MAX_SAFE_INTEGER},27742:(Y,T,e)=>{"use strict";e.d(T,{AL:()=>d,mf:()=>r});var t=e(9471),n=e(83881),i=e(30471),s=e(99098),l=e(33750),f=e(50035),u=e(33369),o=e(13512),d=(y=>(y.SeriesToRows="seriesToRows",y.ReduceFields="reduceFields",y))(d||{});const r={id:o.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last",defaultOptions:{reducers:[l.gz.max]},operator:y=>E=>E.pipe((0,t.U)(v=>{if(!y?.reducers?.length)return v;const h=y.fields?(0,f.sq)(y.fields):y.includeTimeField&&y.mode==="reduceFields"?u.m3:u.Qw;if(y.mode==="reduceFields")return g(v,h,y.reducers);const P=m(v,h,y.reducers,y.labelsToFields);return P?[P]:[]}))};function m(y,E,v,h){const P=l.TB.list(v),a=P.map(b=>b.id),C=[],D=h?c(y):[];for(const b of y){const M=b.fields.filter(I=>E(I,b,y)),x=M.length,R=[],S=new Array(x);R.push({name:"Field",type:s.fS.string,values:S,config:{}});const O={};if(h)for(const I of D)O[I]=new Array(x),R.push({name:I,type:s.fS.string,values:O[I],config:{}});const U={};for(const I of P)U[I.id]=new Array(x),R.push({name:I.name,type:s.fS.other,values:U[I.id],config:{}});for(let I=0;I<M.length;I++){const F=M[I],w=(0,l.Kx)({field:F,reducers:a});if(h){if(S[I]=F.name,F.labels)for(const K of Object.keys(F.labels))O[K][I]=F.labels[K]}else S[I]=(0,i.CZ)(F,b,y);for(const K of P){const L=w[K.id];U[K.id][I]=L}}for(const I of R)if(I.type===s.fS.other){const F=(0,n.fu)(I);F&&(I.type=F)}C.push({...b,fields:R,length:x})}return p(C)}function c(y){const E=new Set;for(const v of y)for(const h of v.fields)if(h.labels)for(const P of Object.keys(h.labels))E.add(P);return[...E]}function p(y){if(!y?.length)return;const E=y[0];for(let v=1;v<y.length;v++){const h=y[v];for(let P=0;P<E.fields.length;P++){const a=E.fields[P];for(let C=0;C<h.fields.length;C++){const D=h.fields[C],b=P===0&&C===0,M=a.type===D.type&&a.name===D.name;if(b||M){const x=a.values,R=D.values;a.values=x.concat(R)}}}}return E.name=void 0,E.length=E.fields[0].values.length,E}function g(y,E,v){const P=l.TB.list(v).map(C=>C.id),a=[];for(const C of y){const D=[];for(const b of C.fields)if(E(b,C,y)){const M=(0,l.Kx)({field:b,reducers:P});for(const x of P){const R=M[x],S={...b,values:[R]};S.state=void 0,P.length>1&&(S.labels||(S.labels={}),S.labels.reducer=l.TB.get(x).name),D.push(S)}}D.length&&a.push({...C,fields:D,length:1})}return a}},89653:()=>{"use strict"},2925:()=>{"use strict"},97865:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>t});var t=(n=>(n.NoData="no_data",n.Paused="paused",n.Alerting="alerting",n.OK="ok",n.Pending="pending",n.Unknown="unknown",n))(t||{})},39834:(Y,T,e)=>{"use strict";e.d(T,{L:()=>t});var t=(n=>(n.Field="field",n.Text="text",n.Skip="skip",n))(t||{})},206:(Y,T,e)=>{"use strict";e.d(T,{CQ:()=>l,k8:()=>s,zj:()=>i});var t=e(59250),n=e(22623),i=(f=>(f.CloudAlerting="cloud-alerting",f.UnifiedAlerting="unified-alerting",f.Dashboard="dashboard",f.Explore="explore",f.Correlations="correlations",f.Unknown="unknown",f.PanelEditor="panel-editor",f.PanelViewer="panel-viewer",f))(i||{});class s extends t.Sg{constructor(){super(...arguments),this._extensionConfigs=[]}init(u){}setRootPage(u){return this.root=u,this}setComponentsFromLegacyExports(u){if(u.ConfigCtrl&&(this.angularConfigCtrl=u.ConfigCtrl),this.meta&&this.meta.includes){for(const o of this.meta.includes)if(o.type===t.$_.page&&o.component&&!u[o.component]){console.warn("App Page uses unknown component: ",o.component,this.meta);continue}}}get extensionConfigs(){return this._extensionConfigs}configureExtensionLink(u){return this._extensionConfigs.push({...u,type:n.D.link}),this}}var l=(f=>(f.alpha="alpha",f.beta="beta",f))(l||{})},59959:(Y,T,e)=>{"use strict";e.d(T,{e:()=>t});var t=(n=>(n.OpenSource=,n.Pro="Pro",n.Enterprise="Enterprise",n))(t||{})},18111:(Y,T,e)=>{"use strict";e.d(T,{Hx:()=>t,Z3:()=>n,bm:()=>i});const t=0,n=100,i="SAML"},56632:(Y,T,e)=>{"use strict";e.d(T,{m:()=>t});var t=(n=>(n[n.Off=0]="Off",n[n.Crosshair=1]="Crosshair",n[n.Tooltip=2]="Tooltip",n))(t||{})},52666:(Y,T,e)=>{"use strict";e.d(T,{Gl:()=>i,Gu:()=>t,dC:()=>n,fQ:()=>s});var t=(l=>(l.NotStarted="NotStarted",l.Loading="Loading",l.Streaming="Streaming",l.Done="Done",l.Error="Error",l))(t||{});const n=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var i=(l=>(l.Null="null",l.Ignore="connected",l.AsZero="null as zero",l))(i||{});const s=l=>Boolean(l)},99098:(Y,T,e)=>{"use strict";e.d(T,{Ls:()=>i,M5:()=>n,fS:()=>t,rN:()=>s});var t=(l=>(l.time="time",l.number="number",l.string="string",l.boolean="boolean",l.trace="trace",l.geo="geo",l.enum="enum",l.other="other",l.frame="frame",l))(t||{});const n="Value",i="Time",s="Metric"},39393:(Y,T,e)=>{"use strict";e.d(T,{P:()=>t});var t=(n=>(n.TimeSeriesWide="timeseries-wide",n.TimeSeriesLong="timeseries-long",n.TimeSeriesMany="timeseries-many",n.TimeSeriesMulti="timeseries-multi",n.DirectoryListing="directory-listing",n.HeatmapRows="heatmap-rows",n.HeatmapCells="heatmap-cells",n.Histogram="histogram",n))(t||{})},3281:(Y,T,e)=>{"use strict";e.d(T,{L8:()=>i,n1:()=>t,o3:()=>s,sN:()=>n});var t=(l=>(l.Datasource="Datasource",l.Correlations="Correlations",l))(t||{}),n=(l=>(l.Regex="regex",l.Logfmt="logfmt",l))(n||{}),i=(l=>(l.Series="series",l.Field="field",l.Fields="fields",l.Value="value",l.BuiltIn="built-in",l.Template="template",l))(i||{}),s=(l=>(l.Values="values",l))(s||{})},89424:(Y,T,e)=>{"use strict";e.d(T,{MF:()=>s,Ru:()=>l,eA:()=>f,hf:()=>i,iL:()=>u});var t=e(85194),n=e(59250);class i extends n.Sg{constructor(d){super(),this.DataSourceClass=d,this.components={}}setConfigEditor(d){return this.components.ConfigEditor=d,this}setConfigCtrl(d){return this.angularConfigCtrl=d,this}setQueryCtrl(d){return this.components.QueryCtrl=d,this}setAnnotationQueryCtrl(d){return this.components.AnnotationsQueryCtrl=d,this}setQueryEditor(d){return this.components.QueryEditor=d,this}setExploreQueryField(d){return this.components.ExploreQueryField=d,this}setExploreMetricsQueryField(d){return this.components.ExploreMetricsQueryField=d,this}setExploreLogsQueryField(d){return this.components.ExploreLogsQueryField=d,this}setQueryEditorHelp(d){return this.components.QueryEditorHelp=d,this}setExploreStartPage(d){return this.setQueryEditorHelp(d)}setVariableQueryEditor(d){return this.components.VariableQueryEditor=d,this}setMetadataInspector(d){return this.components.MetadataInspector=d,this}setComponentsFromLegacyExports(d){this.angularConfigCtrl=d.ConfigCtrl,this.components.QueryCtrl=d.QueryCtrl,this.components.AnnotationsQueryCtrl=d.AnnotationsQueryCtrl,this.components.ExploreQueryField=d.ExploreQueryField,this.components.QueryEditor=d.QueryEditor,this.components.QueryEditorHelp=d.QueryEditorHelp,this.components.VariableQueryEditor=d.VariableQueryEditor}}class s{constructor(d){this.name=d.name,this.id=d.id,this.type=d.type,this.meta=d.meta,this.cachingConfig=d.cachingConfig,this.uid=d.uid}getRef(){return{type:this.type,uid:this.uid}}}var l=(o=>(o.Logs="Logs",o.Metrics="Metrics",o.Tracing="Tracing",o))(l||{}),f=(o=>(o.Cancelled="cancelled",o.Timeout="timeout",o.Unknown="unknown",o))(f||{});class u{}u=(0,t.s)(u),s=(0,t.s)(s)},93830:()=>{"use strict"},19836:()=>{"use strict"},53768:(Y,T,e)=>{"use strict";e.d(T,{R:()=>n,S:()=>t});var t=(i=>(i.Thresholds="thresholds",i.PaletteClassic="palette-classic",i.PaletteClassicByName="palette-classic-by-name",i.PaletteSaturated="palette-saturated",i.ContinuousGrYlRd="continuous-GrYlRd",i.ContinuousRdYlGr="continuous-RdYlGr",i.ContinuousBlYlRd="continuous-BlYlRd",i.ContinuousYlRd="continuous-YlRd",i.ContinuousBlPu="continuous-BlPu",i.ContinuousYlBl="continuous-YlBl",i.ContinuousBlues="continuous-blues",i.ContinuousReds="continuous-reds",i.ContinuousGreens="continuous-greens",i.ContinuousPurples="continuous-purples",i.Fixed="fixed",i.Shades="shades",i))(t||{});const n="#808080"},3947:(Y,T,e)=>{"use strict";e.d(T,{Y4:()=>t,qb:()=>i,v3:()=>n});function t(s){return l=>l.__systemRef===s}const n=s=>typeof s?.__systemRef=="string";var i=(s=>(s.Unit="unit",s.Min="min",s.Max="max",s.Decimals="decimals",s.DisplayName="displayName",s.NoValue="noValue",s.Thresholds="thresholds",s.Mappings="mappings",s.Links="links",s.Color="color",s.Filterable="filterable",s))(i||{})},90076:()=>{"use strict"},77907:()=>{"use strict"},83008:()=>{"use strict"},84559:(Y,T,e)=>{"use strict";e.d(T,{Mo:()=>n,_S:()=>t,iJ:()=>i});const t={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,discord:!0,hipchat:!0,"google-hangouts-alt":!0,pagerduty:!0,line:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,apps:!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,"expand-arrows":!0,at:!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,"calendar-slash":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"corner-down-right-alt":!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,"document-info":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,grafana:!0,"graph-bar":!0,"grafana-ml":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"layers-alt":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,"list-ol":!0,lock:!0,"map-marker":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,"stopwatch-slash":!0,sync:!0,"sync-slash":!0,table:!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"wrap-text":!0,rss:!0,x:!0};function n(s){return!s||typeof s!="string"?!1:s in t}function i(s){if(n(s))return s}},2263:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{AbstractLabelOperator:()=>u.K2,AlertState:()=>G.Z,AnnotationEventFieldSource:()=>o.L,AppEvents:()=>_.SI,AppPlugin:()=>x.k8,CoreApp:()=>x.zj,CustomVariableSupport:()=>Q.Mg,DEFAULT_SAML_NAME:()=>t.bm,DashboardCursorSync:()=>f.m,DataFrameType:()=>s.P,DataLinkConfigOrigin:()=>l.n1,DataQueryErrorType:()=>R.eA,DataSourceApi:()=>R.MF,DataSourcePlugin:()=>R.hf,DataSourceVariableSupport:()=>Q.gv,DataTopic:()=>u.w5,DefaultTimeZone:()=>p.Ys,ExploreMode:()=>R.Ru,FALLBACK_COLOR:()=>I.R,FeatureState:()=>x.CQ,FieldColorModeId:()=>I.S,FieldConfigProperty:()=>b.qb,FieldType:()=>i.fS,GAUGE_DEFAULT_MAXIMUM:()=>t.Z3,GAUGE_DEFAULT_MINIMUM:()=>t.Hx,GrafanaPlugin:()=>O.Sg,GrafanaThemeType:()=>F.Q,LanguageProvider:()=>R.iL,LegacyGraphHoverClearEvent:()=>_.oi,LegacyGraphHoverEvent:()=>_.IA,LiveChannelConnectionState:()=>k.yS,LiveChannelEventType:()=>k.FU,LiveChannelScope:()=>k.z,LiveChannelType:()=>k.SK,LoadingState:()=>n.Gu,LogLevel:()=>d.in,LogRowContextQueryDirection:()=>d.M4,LogsDedupDescription:()=>d.Uv,LogsDedupStrategy:()=>d.Y4,LogsMetaKind:()=>d.Ku,LogsSortOrder:()=>d.UV,LogsVolumeType:()=>d.o8,MappingType:()=>y.H,NavMenuItemType:()=>r.V,NullValueMode:()=>n.Gl,OrgRole:()=>w.B,PageLayoutType:()=>r.Q,PanelEvents:()=>_.Kh,PluginErrorCode:()=>O.w2,PluginExtensionPoints:()=>q.y,PluginExtensionTypes:()=>q.D,PluginIncludeType:()=>O.$_,PluginSignatureStatus:()=>O.Xy,PluginSignatureType:()=>O._Z,PluginState:()=>O.BV,PluginType:()=>O.zV,SpecialValue:()=>D.U,SpecialValueMatch:()=>y.e,StandardVariableSupport:()=>Q.v6,SupplementaryQueryType:()=>d.v8,SupportedTransformationType:()=>l.sN,TIME_FORMAT:()=>p.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>i.rN,TIME_SERIES_TIME_FIELD_NAME:()=>i.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>i.M5,ThresholdsMode:()=>g.H,VariableHide:()=>U.bU,VariableOrigin:()=>l.L8,VariableRefresh:()=>U.Bd,VariableSort:()=>U.$U,VariableSuggestionsScope:()=>l.o3,VariableSupportBase:()=>Q.Tq,VariableSupportType:()=>Q.j2,VisualizationSuggestionScore:()=>S._,VisualizationSuggestionsBuilder:()=>S.mi,VisualizationSuggestionsListAppender:()=>S.sf,VizOrientation:()=>S.wm,availableIconsIndex:()=>me._S,getDefaultRelativeTimeRange:()=>p.Rr,getDefaultTimeRange:()=>p.JK,hasLogsContextSupport:()=>d.Q4,hasLogsContextUiSupport:()=>d.xW,hasQueryExportSupport:()=>u.p,hasQueryImportSupport:()=>u.CZ,hasSupplementaryQuerySupport:()=>d.mN,isIconName:()=>me.Mo,isLiveChannelJoinEvent:()=>k.mx,isLiveChannelLeaveEvent:()=>k.gH,isLiveChannelMessageEvent:()=>k.RL,isLiveChannelStatusEvent:()=>k.se,isSystemOverride:()=>b.v3,isSystemOverrideWithRef:()=>b.Y4,isTruthy:()=>n.fQ,isUnsignedPluginSignature:()=>oe.x,isValidLiveChannelAddress:()=>k.nU,makeArrayIndexableVector:()=>M.U,parseLiveChannelAddress:()=>k.H7,preferredVisualizationTypes:()=>n.dC,toIconName:()=>me.iJ,toLiveChannelId:()=>k.Aj});var t=e(18111),n=e(52666),i=e(99098),s=e(39393),l=e(3281),f=e(56632),u=e(89749),o=e(39834),d=e(13787),r=e(77346),m=e(10540),c=e.n(m),ee={};for(const ne in m)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType"].indexOf(ne)<0&&(ee[ne]=()=>m[ne]);e.d(T,ee);var p=e(75849),g=e(69098),y=e(32195),E=e(93830),v=e.n(E),ee={};for(const ne in E)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ne)<0&&(ee[ne]=()=>E[ne]);e.d(T,ee);var h=e(83008),P=e.n(h),ee={};for(const ne in h)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ne)<0&&(ee[ne]=()=>h[ne]);e.d(T,ee);var a=e(89653),C=e.n(a),ee={};for(const ne in a)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ne)<0&&(ee[ne]=()=>a[ne]);e.d(T,ee);var D=e(90834),b=e(3947),M=e(23845),x=e(206),R=e(89424),S=e(82229),O=e(59250),U=e(69273),I=e(53768),F=e(33536),w=e(49969),K=e(90076),L=e.n(K),ee={};for(const ne in K)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ne)<0&&(ee[ne]=()=>K[ne]);e.d(T,ee);var V=e(5273),H=e.n(V),ee={};for(const ne in V)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ne)<0&&(ee[ne]=()=>V[ne]);e.d(T,ee);var j=e(19836),A=e.n(j),ee={};for(const ne in j)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ne)<0&&(ee[ne]=()=>j[ne]);e.d(T,ee);var _=e(4063),k=e(8891),Q=e(48976),re=e(77907),Z=e.n(re),ee={};for(const ne in re)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(ne)<0&&(ee[ne]=()=>re[ne]);e.d(T,ee);var oe=e(53940),G=e(97865),le=e(21366),fe=e.n(le),ee={};for(const ne in le)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(ne)<0&&(ee[ne]=()=>le[ne]);e.d(T,ee);var ae=e(2925),de=e.n(ae),ee={};for(const ne in ae)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","NavMenuItemType","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(ne)<0&&(ee[ne]=()=>ae[ne]);e.d(T,ee);var me=e(84559),q=e(22623)},89974:(Y,T,e)=>{"use strict";e.d(T,{l:()=>t});var t=(n=>(n.Grid="grid",n.List="list",n))(t||{})},4063:(Y,T,e)=>{"use strict";e.d(T,{IA:()=>l,Kh:()=>s,SI:()=>i,oi:()=>f});var t=e(84336),n=e(55391);const i={alertSuccess:(0,t.X)("alert-success"),alertWarning:(0,t.X)("alert-warning"),alertError:(0,t.X)("alert-error")},s={refresh:(0,t.X)("refresh"),componentDidMount:(0,t.X)("component-did-mount"),dataReceived:(0,t.X)("data-received"),dataError:(0,t.X)("data-error"),dataFramesReceived:(0,t.X)("data-frames-received"),dataSnapshotLoad:(0,t.X)("data-snapshot-load"),editModeInitialized:(0,t.X)("init-edit-mode"),initPanelActions:(0,t.X)("init-panel-actions"),initialized:(0,t.X)("panel-initialized"),panelTeardown:(0,t.X)("panel-teardown"),render:(0,t.X)("render")};class l extends n.R{}l.type="graph-hover";class f extends n.m{constructor(){super(...arguments),this.payload={point:{}}}}f.type="graph-hover-clear"},8891:(Y,T,e)=>{"use strict";e.d(T,{Aj:()=>m,FU:()=>s,H7:()=>d,RL:()=>o,SK:()=>n,gH:()=>u,mx:()=>f,nU:()=>r,se:()=>l,yS:()=>i,z:()=>t});var t=(c=>(c.DataSource="ds",c.Plugin="plugin",c.Grafana="grafana",c.Stream="stream",c))(t||{}),n=(c=>(c.DataStream="stream",c.DataFrame="frame",c.JSON="json",c))(n||{}),i=(c=>(c.Pending="pending",c.Connected="connected",c.Connecting="connecting",c.Disconnected="disconnected",c.Shutdown="shutdown",c.Invalid="invalid",c))(i||{}),s=(c=>(c.Status="status",c.Join="join",c.Leave="leave",c.Message="message",c))(s||{});function l(c){return c.type==="status"}function f(c){return c.type==="join"}function u(c){return c.type==="leave"}function o(c){return c.type==="message"}function d(c){if(c?.length){let p=c.trim().split("/");if(p.length>=3)return{scope:p[0],namespace:p[1],path:p.slice(2).join("/")}}}function r(c){return!!(c?.path&&c.namespace&&c.scope)}function m(c){if(!c.scope)return"";let p=c.scope;return!c.namespace||(p+="/"+c.namespace,!c.path)?p:p+"/"+c.path}},13787:(Y,T,e)=>{"use strict";e.d(T,{Ku:()=>i,M4:()=>l,Q4:()=>f,UV:()=>t.UV,Uv:()=>s,Y4:()=>t.Y4,in:()=>n,mN:()=>d,o8:()=>o,v8:()=>u,xW:()=>r});var t=e(40538),n=(m=>(m.emerg="critical",m.fatal="critical",m.alert="critical",m.crit="critical",m.critical="critical",m.warn="warning",m.warning="warning",m.err="error",m.eror="error",m.error="error",m.info="info",m.information="info",m.informational="info",m.notice="info",m.dbug="debug",m.debug="debug",m.trace="trace",m.unknown="unknown",m))(n||{}),i=(m=>(m[m.Number=0]="Number",m[m.String=1]="String",m[m.LabelsMap=2]="LabelsMap",m[m.Error=3]="Error",m))(i||{}),s=(m=>(m.none="No de-duplication",m.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",m.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",m.signature="De-duplication of successive lines that have identical punctuation and whitespace.",m))(s||{}),l=(m=>(m.Backward="BACKWARD",m.Forward="FORWARD",m))(l||{});const f=m=>{if(!m)return!1;const c=m;return c.getLogRowContext!==void 0&&c.showContextToggle!==void 0};var u=(m=>(m.LogsVolume="LogsVolume",m.LogsSample="LogsSample",m))(u||{}),o=(m=>(m.FullRange="FullRange",m.Limited="Limited",m))(o||{});const d=(m,c)=>{if(!m)return!1;const p=m;return p.getDataProvider!==void 0&&p.getSupplementaryQuery!==void 0&&p.getSupportedSupplementaryQueryTypes().includes(c)},r=m=>m?m.getLogRowContextUi!==void 0:!1},77346:(Y,T,e)=>{"use strict";e.d(T,{Q:()=>n,V:()=>t});var t=(i=>(i.Section="section",i.Item="item",i))(t||{}),n=(i=>(i[i.Standard=0]="Standard",i[i.Canvas=1]="Canvas",i[i.Custom=2]="Custom",i))(n||{})},49969:(Y,T,e)=>{"use strict";e.d(T,{B:()=>t});var t=(n=>(n.Admin="Admin",n.Editor="Editor",n.Viewer="Viewer",n))(t||{})},82229:(Y,T,e)=>{"use strict";e.d(T,{_:()=>l,mi:()=>f,sf:()=>u,wm:()=>s});var t=e(82897),n=e.n(t),i=e(99098),s=(o=>(o.Auto="auto",o.Vertical="vertical",o.Horizontal="horizontal",o))(s||{}),l=(o=>(o[o.Best=100]="Best",o[o.Good=70]="Good",o[o.OK=50]="OK",o))(l||{});class f{constructor(d,r){this.list=[],this.data=d,this.panel=r,this.dataSummary=this.computeDataSummary()}getListAppender(d){return new u(this.list,d)}computeDataSummary(){const d=this.data?.series||[];let r=0,m=0,c=0,p=0,g=0,y=0,E;for(const v of d){p+=v.length,v.meta?.preferredVisualisationType&&(E=v.meta.preferredVisualisationType);for(const h of v.fields)switch(y++,h.type){case i.fS.number:r+=1;break;case i.fS.time:m+=1;break;case i.fS.string:c+=1;break}v.length>g&&(g=v.length)}return{numberFieldCount:r,timeFieldCount:m,stringFieldCount:c,rowCountTotal:p,rowCountMax:g,fieldCount:y,preferredVisualisationType:E,frameCount:d.length,hasData:p>0,hasTimeField:m>0,hasNumberField:r>0,hasStringField:c>0}}getList(){return this.list}}class u{constructor(d,r){this.list=d,this.defaults=r}append(d){this.list.push((0,t.defaultsDeep)(d,this.defaults))}}},59250:(Y,T,e)=>{"use strict";e.d(T,{$_:()=>f,BV:()=>t,Sg:()=>u,Xy:()=>i,_Z:()=>s,w2:()=>l,zV:()=>n});var t=(o=>(o.alpha="alpha",o.beta="beta",o.stable="stable",o.deprecated="deprecated",o))(t||{}),n=(o=>(o.panel="panel",o.datasource="datasource",o.app="app",o.renderer="renderer",o.secretsmanager="secretsmanager",o))(n||{}),i=(o=>(o.internal="internal",o.valid="valid",o.invalid="invalid",o.modified="modified",o.missing="missing",o))(i||{}),s=(o=>(o.grafana="grafana",o.commercial="commercial",o.community="community",o.private="private",o.core="core",o))(s||{}),l=(o=>(o.missingSignature="signatureMissing",o.invalidSignature="signatureInvalid",o.modifiedSignature="signatureModified",o))(l||{}),f=(o=>(o.dashboard="dashboard",o.page="page",o.panel="panel",o.datasource="datasource",o))(f||{});class u{addConfigPage(d){return this.configPages||(this.configPages=[]),this.configPages.push(d),this}setChannelSupport(d){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},22623:(Y,T,e)=>{"use strict";e.d(T,{D:()=>t,y:()=>n});var t=(i=>(i.link="link",i))(t||{}),n=(i=>(i.DashboardPanelMenu="grafana/dashboard/panel/menu",i))(n||{})},53940:(Y,T,e)=>{"use strict";e.d(T,{x:()=>n});var t=e(59250);function n(i){return i&&i!==t.Xy.valid&&i!==t.Xy.internal}},89749:(Y,T,e)=>{"use strict";e.d(T,{CZ:()=>i,K2:()=>n,p:()=>s,w5:()=>t});var t=(l=>(l.Annotations="annotations",l))(t||{}),n=(l=>(l.Equal="Equal",l.NotEqual="NotEqual",l.EqualRegEx="EqualRegEx",l.NotEqualRegEx="NotEqualRegEx",l))(n||{});const i=l=>l.importFromAbstractQueries!==void 0,s=l=>l.exportToAbstractQueries!==void 0},10540:()=>{"use strict"},21366:()=>{"use strict"},69273:(Y,T,e)=>{"use strict";e.d(T,{$U:()=>n,Bd:()=>t,bU:()=>i});var t=(s=>(s[s.never=0]="never",s[s.onDashboardLoad=1]="onDashboardLoad",s[s.onTimeRangeChanged=2]="onTimeRangeChanged",s))(t||{}),n=(s=>(s[s.disabled=0]="disabled",s[s.alphabeticalAsc=1]="alphabeticalAsc",s[s.alphabeticalDesc=2]="alphabeticalDesc",s[s.numericalAsc=3]="numericalAsc",s[s.numericalDesc=4]="numericalDesc",s[s.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",s[s.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",s))(n||{}),i=(s=>(s[s.dontHide=0]="dontHide",s[s.hideLabel=1]="hideLabel",s[s.hideVariable=2]="hideVariable",s))(i||{})},33536:(Y,T,e)=>{"use strict";e.d(T,{Q:()=>t});var t=(n=>(n.Light="light",n.Dark="dark",n))(t||{})},69098:(Y,T,e)=>{"use strict";e.d(T,{H:()=>t});var t=(n=>(n.Absolute="absolute",n.Percentage="percentage",n))(t||{})},75849:(Y,T,e)=>{"use strict";e.d(T,{JK:()=>l,Rr:()=>f,T_:()=>s,Ys:()=>i});var t=e(40538),n=e(67483);const i=t.iT,s="YYYY-MM-DD HH:mm:ss";function l(){const u=(0,n.CQ)();return{from:(0,n.CQ)(u).subtract(6,"hour"),to:u,raw:{from:"now-6h",to:"now"}}}function f(){return{from:600,to:0}}},5273:()=>{"use strict"},90834:(Y,T,e)=>{"use strict";e.d(T,{U:()=>t});var t=(n=>(n.True="true",n.False="false",n.Null="null",n.Empty="empty",n))(t||{})},32195:(Y,T,e)=>{"use strict";e.d(T,{H:()=>t,e:()=>n});var t=(i=>(i.ValueToText="value",i.RangeToText="range",i.RegexToText="regex",i.SpecialValue="special",i))(t||{}),n=(i=>(i.True="true",i.False="false",i.Null="null",i.NaN="nan",i.NullAndNaN="null+nan",i.Empty="empty",i))(n||{})},48976:(Y,T,e)=>{"use strict";e.d(T,{Mg:()=>s,Tq:()=>n,gv:()=>l,j2:()=>t,v6:()=>i});var t=(f=>(f.Legacy="legacy",f.Standard="standard",f.Custom="custom",f.Datasource="datasource",f))(t||{});class n{}class i extends n{getType(){return"standard"}}class s extends n{getType(){return"custom"}}class l extends n{getType(){return"datasource"}}},23845:(Y,T,e)=>{"use strict";e.d(T,{U:()=>t}),Object.getOwnPropertyDescriptor(Array.prototype,"toArray")||Object.defineProperties(Array.prototype,{get:{value:function(n){return this[n]},writable:!1,enumerable:!1,configurable:!1},set:{value:function(n,i){this[n]=i},writable:!1,enumerable:!1,configurable:!1},add:{value:function(n){this.push(n)},writable:!1,enumerable:!1,configurable:!1},toArray:{value:function(){return this},writable:!1,enumerable:!1,configurable:!1}});function t(n){return new Proxy(n,{get(i,s,l){if(typeof s!="symbol"){const f=+s;if(String(f)===s)return i.get(f)}return Reflect.get(i,s,l)},set(i,s,l,f){if(typeof s!="symbol"){const u=+s;if(String(u)===s)return i.set(u,l),!0}return Reflect.set(i,s,l,f)}})}},91353:(Y,T,e)=>{"use strict";e.d(T,{vo:()=>l,rt:()=>o,j:()=>u});var t=e(30779),n=e(72293),i=e(53908);class s{constructor(){this.properties=[]}addCustomEditor(r){return this.properties.push(r),this}getRegistry(){return new i.B(()=>this.properties)}getItems(){return this.properties}}class l extends s{addNumberInput(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("number").editor,editor:t.S.get("number").editor,process:n.Oh,shouldApply:r.shouldApply??(()=>!0),settings:r.settings||{}})}addSliderInput(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("slider").editor,editor:t.S.get("slider").editor,process:n.Oh,shouldApply:r.shouldApply??(()=>!0),settings:r.settings||{}})}addTextInput(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("text").editor,editor:t.S.get("text").editor,process:n.op,shouldApply:r.shouldApply??(()=>!0),settings:r.settings||{}})}addSelect(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("select").editor,editor:t.S.get("select").editor,process:n.AE,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{options:[]}})}addRadio(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("radio").editor,editor:t.S.get("radio").editor,process:n.AE,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{options:[]}})}addBooleanSwitch(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("boolean").editor,override:t.S.get("boolean").editor,process:n.W4,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addColorPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("color").editor,override:t.S.get("color").editor,process:n.kG,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addUnitPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("unit").editor,override:t.S.get("unit").editor,process:n.VB,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addFieldNamePicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("field-name").editor,override:t.S.get("field-name").editor,process:n.kG,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}}class f{constructor(r){this.cfg=r,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=m=>{const c=this.cfg.values;return c?c(m):{getValue:p=>m.getValue(`${this.path}.${p}`),onChange:(p,g)=>m.onChange(`${this.path}.${p}`,g)}},this.path=r.path,this.category=r.category,this.defaultValue=r.defaultValue}}function u(d){return d.id==="nested-panel-options"}class o extends s{addNestedOptions(r){const m=new f(r);return this.addCustomEditor(m)}addNumberInput(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("number").editor})}addSliderInput(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("slider").editor})}addTextInput(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("text").editor})}addStringArray(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("strings").editor})}addSelect(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("select").editor})}addMultiSelect(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("multi-select").editor})}addRadio(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("radio").editor})}addBooleanSwitch(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("boolean").editor})}addColorPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("color").editor,settings:r.settings||{}})}addTimeZonePicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("timezone").editor,settings:r.settings||{}})}addUnitPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("unit").editor})}addFieldNamePicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("field-name").editor})}addDashboardPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("dashboard-uid").editor})}}},31290:(Y,T,e)=>{"use strict";e.d(T,{I:()=>i});var t=e(82897),n=e.n(t);function i(s){return typeof s=="number"?s:s===""||s===null||s===void 0||Array.isArray(s)?NaN:typeof s=="boolean"?s?1:0:(0,t.toNumber)(s)}},574:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{moveItemImmutably:()=>n,sortValues:()=>l});var t=e(40538);function n(f,u,o){const d=[...f];return Array.prototype.splice.call(d,o,0,Array.prototype.splice.call(d,u,1)[0]),d}const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),s=(f,u)=>f-u;function l(f){return(u,o)=>{if(u===o)return 0;if(o==null||typeof o=="string"&&o.trim()==="")return-1;if(u==null||typeof u=="string"&&u?.trim()==="")return 1;let d=i.compare;return typeof u=="number"&&typeof o=="number"&&(d=s),f===t.As.Descending?d(o,u):d(u,o)}}},66392:(Y,T,e)=>{"use strict";e.d(T,{L:()=>n,n:()=>i});var t=e(53908),n=(s=>(s.Add="+",s.Subtract="-",s.Divide="/",s.Multiply="*",s))(n||{});const i=new t.B(()=>[{id:"+",name:"Add",operation:(s,l)=>s+l},{id:"-",name:"Subtract",operation:(s,l)=>s-l},{id:"*",name:"Multiply",operation:(s,l)=>s*l},{id:"/",name:"Divide",operation:(s,l)=>s/l}])},76015:(Y,T,e)=>{"use strict";e.d(T,{MJ:()=>h,QM:()=>p,uP:()=>m,x5:()=>r});var t=e(82897),n=e.n(t),i=e(26389),s=e.n(i),l=e(53678),f=e(83881),u=e(30471),o=e(99098),d=e(2703),r=(P=>(P[P.full=0]="full",P[P.name=1]="name",P[P.none=2]="none",P))(r||{});function m(P,a){return new p(a).readCSV(P)}var c=(P=>(P[P.Starting=0]="Starting",P[P.InHeader=1]="InHeader",P[P.ReadingRows=2]="ReadingRows",P))(c||{});class p{constructor(a){this.chunk=(C,D)=>{for(let b=0;b<C.data.length;b++){const M=C.data[b];if(M.length<1)continue;const x=M[0];if(x){if(x.startsWith("#")){const R=x.indexOf("#",2);if(R>0){const S=x.slice(1,R),O=S==="name";if(O||{unit:"#"}.hasOwnProperty(S)){this.state===2&&(this.current=new l.v({fields:[]}),this.data.push(this.current));const I=x.slice(R+1);if(O){this.current.addFieldFor(void 0,I);for(let F=1;F<M.length;F++)this.current.addFieldFor(void 0,M[F])}else{const{fields:F}=this.current;for(let w=0;w<F.length;w++){F[w].config||(F[w].config={});const K=F[w].config;K[S]=w===0?I:M[w]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,f.LI)(x)===o.fS.string){for(const S of M)this.current.addFieldFor(void 0,S);this.state=1;continue}this.state=1}}if(this.state,this.state=2,M.length>this.current.fields.length){const{fields:R}=this.current;for(let S=R.length;S<M.length;S++)this.current.addFieldFor(M[S]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(M),this.callback&&this.callback.onRow(M)}},a||(a={}),this.config=a.config||{},this.callback=a.callback,this.current=new l.v({fields:[]}),this.state=0,this.data=[]}readCSV(a){this.current=new l.v({fields:[]}),this.data=[this.current];const C={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return s().parse(a,C),this.data}}function g(P,a){if(P==null)return"";const C=P.toString();return C.includes('"')?a.quoteChar+C.replace(/"/gi,'""')+a.quoteChar:C.includes(`
`)||a.delimiter&&C.includes(a.delimiter)?a.quoteChar+C+a.quoteChar:C}function y(P,a){return P.display?C=>{const D=P.display(C);return g((0,d.zc)(D),a)}:C=>g(C,a)}function E(P,a,C){const D=P==="name",b=P==="type";for(const M of a){const x=M.config;if(D||b||x&&x.hasOwnProperty(P)){let R="#"+P+"#";for(let S=0;S<a.length;S++){S>0&&(R=R+C.delimiter);let O=a[S].name;b?O=a[S].type:D||(O=a[S].config[P]),O&&(R=R+g(O,C))}return R+C.newline}}return""}function v(){const P=["x","y"];return P.toLocaleString?P.toLocaleString().charAt(1):","}function h(P,a){if(!P)return"";a=(0,t.defaults)(a,{delimiter:v(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let C=a.useExcelHeader?`sep=${a.delimiter}${a.newline}`:"";for(const D of P){const{fields:b}=D;if(b.length===0)continue;if(a.headerStyle===0)C=C+E("name",b,a)+E("type",b,a)+E("unit",b,a)+E("dateFormat",b,a);else if(a.headerStyle===1){for(let x=0;x<b.length;x++)x>0&&(C+=a.delimiter),C+=`"${(0,u.CZ)(b[x],D).replace(/"/g,'""')}"`;C+=a.newline}const M=b[0].values.length;if(M>0){const x=b.map(R=>y(R,a));for(let R=0;R<M;R++){for(let S=0;S<b.length;S++){S>0&&(C=C+a.delimiter);const O=b[S].values[R];O!==null&&(C=C+x[S](O))}C=C+a.newline}}C=C+a.newline}return C}},94976:(Y,T,e)=>{"use strict";e.d(T,{W:()=>i,_:()=>s});var t=e(72196),n=e(49187);const i={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function s(o){const{onClickFn:d,replaceVariables:r,link:m,scopedVars:c,range:p,field:g,internalLink:y}=o,E=f(m.internal?.query,c,r),v=f(m.internal?.panelsState,c,r),h=m.title?m.title:y.datasourceName;return{title:r(h,c),href:l(y.datasourceUid,E,p,v),onClick:d?()=>{d({datasourceUid:y.datasourceUid,query:E,panelsState:v,range:p})}:void 0,target:m?.targetBlank?"_blank":"_self",origin:g}}function l(o,d,r,m){return t.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,n.S)({range:r.raw,datasource:o,queries:[d],panelsState:m}))}`)}function f(o,d,r){if(!o)return o;if(typeof o=="string")return r(o,d);const m=JSON.parse(JSON.stringify(o));return u(m,d,r)}function u(o,d,r){for(const m of Object.keys(o))typeof o[m]=="string"?o[m]=r(o[m],d):typeof o[m]=="object"&&o[m]!==null&&(o[m]=u(o[m],d,r));return o}},73446:(Y,T,e)=>{"use strict";e.d(T,{BT:()=>l,HD:()=>c,Mf:()=>E,TX:()=>m,_R:()=>u,cv:()=>s,fd:()=>p,fi:()=>o,hz:()=>r,iU:()=>i,nx:()=>d,tp:()=>g,uw:()=>y,z_:()=>f});var t=e(82897),n=e.n(t);function i(v){return{uid:v.uid,type:v.type}}function s(v){return typeof v=="object"&&typeof v?.uid=="string"}function l(v){if(s(v))return v.uid;if((0,t.isString)(v))return v}const f=(v,h)=>P=>{p(v,h,P.currentTarget.value)},u=(v,h)=>P=>{g(v,h,P.currentTarget.value)},o=(v,h)=>P=>{y(v,h,P.currentTarget.value)},d=(v,h)=>P=>{g(v,h,P.value)},r=(v,h)=>P=>{g(v,h,P.currentTarget.checked)},m=(v,h)=>P=>{y(v,h,P.value)},c=(v,h)=>P=>{E(v,h)};function p(v,h,P){const a=v.options;v.onOptionsChange({...a,[h]:P})}const g=(v,h,P)=>{const a=v.options;v.onOptionsChange({...a,jsonData:{...a.jsonData,[h]:P}})},y=(v,h,P)=>{const a=v.options;v.onOptionsChange({...a,secureJsonData:{...a.secureJsonData?a.secureJsonData:{},[h]:P}})},E=(v,h)=>{const P=v.options;v.onOptionsChange({...P,secureJsonData:{...P.secureJsonData?P.secureJsonData:{},[h]:""},secureJsonFields:{...P.secureJsonFields,[h]:!1}})}},55024:(Y,T,e)=>{"use strict";e.d(T,{d:()=>n});const t={},n=(i,s,l)=>{let f=`[Deprecation warning] ${i}: ${s} is deprecated`;l&&(f+=`. Use ${l} instead`);const u=Date.now(),o=t[f];(!o||u-o>1e4)&&(console.warn(f),t[f]=u)}},65180:(Y,T,e)=>{"use strict";e.d(T,{x:()=>t});var t=(n=>(n[n.Transformations=0]="Transformations",n[n.FieldConfig=1]="FieldConfig",n[n.FieldConfigOverrides=2]="FieldConfigOverrides",n))(t||{})},44103:(Y,T,e)=>{"use strict";e.d(T,{H:()=>i,k:()=>n});var t=e(52666);function n({xField:s,yField:l,nullValueMode:f}){const u=s.values,o=l.values,d=u.length;if(o.length!==d)throw new Error("Unexpected field length");const r=f===t.Gl.Ignore,m=f===t.Gl.AsZero,c=[];for(let p=0;p<d;p++){const g=u[p];let y=o[p];if(y===null){if(r)continue;m&&(y=0)}g!==null&&c.push([g,y])}return c}function i(s,l){if(!l.from||!l.to||!s||s.length===0)return[];const f=l.from.valueOf(),u=l.to.valueOf(),o=s[0][1];return[[f,o],[u,o]]}},39358:(Y,T,e)=>{"use strict";e.d(T,{LH:()=>c.L,x5:()=>l.x5,QM:()=>l.QM,WC:()=>P.W,xV:()=>a.x,vo:()=>y.vo,HU:()=>M.HU,zG:()=>p.z,rt:()=>y.rt,Bz:()=>n.B,IX:()=>D.I,sq:()=>t,nk:()=>c.n,ZC:()=>d,Jb:()=>M.Jb,d9:()=>s.d,FT:()=>f.FT,IU:()=>f.IU,aA:()=>f.aA,iU:()=>i.iU,BT:()=>i.BT,k8:()=>E.k,HE:()=>E.H,e4:()=>r,dP:()=>u.d,fp:()=>m,cv:()=>i.cv,Qr:()=>o.Q,uT:()=>v.u,s2:()=>C.s,_N:()=>P._,VS:()=>f.VS,Hh:()=>o.H,_R:()=>i._R,hz:()=>i.hz,nx:()=>i.nx,z_:()=>i.z_,HD:()=>i.HD,fi:()=>i.fi,TX:()=>i.TX,J8:()=>f.J8,uP:()=>l.uP,O9:()=>u.O,S:()=>h.S,MJ:()=>l.MJ,Er:()=>g.E,tp:()=>i.tp,fd:()=>i.fd,Mf:()=>i.Mf,uw:()=>i.uw,Cj:()=>h.Cj,xc:()=>b.x});var t=e(574),n=e(53908),i=e(73446),s=e(55024),l=e(76015),f=e(7569),u=e(56190),o=e(61618);const d=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],r=x=>{let R,S,O=Number.MAX_VALUE;for(let U=0;U<x.values.length;U++){const I=x.values[U];if(R!==void 0){const F=I-R;S===void 0&&(O=F),F<O&&(O=F)}R=I}return O},m=x=>{for(let R=0;R<x.values.length;R++){const S=x.values[R];if(S!=null){const O=S.toString();if(O.length===13&&O%1e3!==0)return!0}}return!1};var c=e(66392),p=e(92468),g=e(13572),y=e(91353),E=e(44103),v=e(72196),h=e(49187),P=e(94976),a=e(65180),C=e(85194),D=e(31290),b=e(32921),M=e(2576)},7569:(Y,T,e)=>{"use strict";e.d(T,{FT:()=>i,IU:()=>s,J8:()=>n,VS:()=>l,aA:()=>f});const t=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function n(u){const o={};return u.replace(t,(d,r,m,c)=>(o[r]=c,"")),o}function i(u){return u.reduce((o,d)=>{if(!d)throw new Error("Need parsed labels to find common labels.");return Object.keys(d).forEach(r=>{(o[r]===void 0||o[r]!==d[r])&&delete o[r]}),Object.keys(o).forEach(r=>{d[r]===void 0&&delete o[r]}),o},{...u[0]})}function s(u,o){const d={...u};return Object.keys(o).forEach(r=>{delete d[r]}),d}function l(u,o){if(!u)return!0;for(const[d,r]of Object.entries(u))if(!o||o[d]!==r)return!1;return!0}function f(u,o="",d){if(!u||Object.keys(u).length===0)return o;const m=Object.keys(u).sort().map(c=>`${c}="${u[c]}"`).join(", ");return d?m:["{",m,"}"].join("")}},72196:(Y,T,e)=>{"use strict";e.d(T,{u:()=>m});var t=e(63418),n=e(49187);let i={appSubUrl:""},s,l;const f=c=>{try{return new URL(c)}catch{return}},u=c=>{const p=f(c);if(p&&p.origin!==window.location.origin)return c;const g=i.appSubUrl??"",y=g.endsWith("/")?1:0,E=c.startsWith("http");let v=g;return(!c.startsWith("/")||E)&&(v=`${window.location.origin}${g}`),c.length>0&&c.indexOf(v)===0?c.slice(v.length-y):c},o=c=>c.startsWith("/")?`${i.appSubUrl}${u(c)}`:c,m={initialize:c=>{i=c.config,s=c.getTimeRangeForUrl,l=c.getVariablesUrlParams},stripBaseFromUrl:u,assureBaseUrl:o,updateSearchParams:(c,p)=>{const g=new URLSearchParams(p);try{const y=new URL(c);return g.forEach((E,v)=>y.searchParams.set(v,E)),y.href}catch{const y=new URLSearchParams(c);return g.forEach((E,v)=>{y.set(v,E)}),"?"+y.toString()}},getTimeRangeUrlParams:()=>s?n.Cj.toUrlParams(s()):null,getVariablesUrlParams:c=>{if(!l)return null;const p=l(c);return n.Cj.toUrlParams(p)},getUrlForPartial:(c,p)=>{const g=n.Cj.parseKeyValue(c.search.startsWith("?")?c.search.substring(1):c.search);for(const y of Object.keys(p))p[y]===null||p[y]===void 0?delete g[y]:g[y]=p[y];return o(n.Cj.renderUrl(c.pathname,g))},processUrl:c=>i.disableSanitizeHtml?c:t.QX.sanitizeUrl(c)}},85194:(Y,T,e)=>{"use strict";e.d(T,{s:()=>t});function t(n){return new Proxy(n,{apply(i,s,l){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(i,l,s.constructor)}})}},92468:(Y,T,e)=>{"use strict";e.d(T,{z:()=>t});var t=(n=>(n.id="id",n.title="title",n.subTitle="subtitle",n.mainStat="mainstat",n.secondaryStat="secondarystat",n.arc="arc__",n.icon="icon",n.color="color",n.source="source",n.target="target",n.detail="detail__",n))(t||{})},56190:(Y,T,e)=>{"use strict";e.d(T,{O:()=>t,d:()=>n});function t(i,s=0){if(Number.isInteger(i))return i;let l=10**s,f=i*l*(1+Number.EPSILON);return Math.round(f)/l}function n(i){return((""+i).split(".")[1]||"").length}},61618:(Y,T,e)=>{"use strict";e.d(T,{H:()=>t,Q:()=>n});const t=i=>Object.keys(i).reduce((s,l)=>(i[l]!==void 0&&(s[l]=i[l]),s),{}),n=i=>typeof i=="object"&&i!==null&&Object.keys(i).length===0},13572:(Y,T,e)=>{"use strict";e.d(T,{E:()=>t});const t=n=>({label:n,value:n})},49187:(Y,T,e)=>{"use strict";e.d(T,{Cj:()=>o,S:()=>d});/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function t(r,m){return m&&Object.keys(m).length>0&&(r+="?"+i(m)),r}function n(r,m){return encodeURIComponent(r).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,m?"%20":"+").replace(/[!'()*]/g,function(c){return"%"+c.charCodeAt(0).toString(16).toUpperCase()})}function i(r){const m=[],c=/\[\]$/,p=E=>Object.prototype.toString.call(E)==="[object Array]",g=(E,v)=>{if(v=typeof v=="function"?v():v===null||v===void 0?"":v,typeof v!="boolean")m[m.length]=n(E,!0)+"="+n(v,!0);else{const h=v?"":"="+n("false",!0);m[m.length]=n(E,!0)+h}},y=(E,v)=>{let h,P,a;if(E)if(p(v))for(h=0,P=v.length;h<P;h++)c.test(E)?g(E,v[h]):y(E,v[h]);else if(v&&String(v)==="[object Object]")for(a in v)y(E+"["+a+"]",v[a]);else g(E,v);else if(p(v))for(h=0,P=v.length;h<P;h++)g(v[h].name,v[h].value);else for(a in v)y(a,v[a]);return m};return y("",r).join("&")}function s(r,m){if(m!=null&&m!==""){const c=r.indexOf("?");c!==-1?r.length-c>1&&(r+="&"):r+="?",r+=m}return r}function l(){const m=window.location.search.substring(1).split("&"),c={};for(const p of m){const g=p.split("=");if(g.length>1){const y=decodeURIComponent(g[0]),E=decodeURIComponent(g[1]);y in c?c[y]=[...c[y],E]:c[y]=[E]}else if(g.length===1){const y=decodeURIComponent(g[0]);c[y]=!0}}return c}function f(r){const m={},c=(r||"").split("&");for(let p of c){let g,y,E;if(p&&(y=p=p.replace(/\+/g,"%20"),g=p.indexOf("="),g!==-1&&(y=p.substring(0,g),E=p.substring(g+1)),y=u(y),y!==void 0)){E=E!==void 0?u(E):!0;let v;typeof E=="string"&&E!==""?v=E==="true"||E==="false"?E==="true":E:v=E,m.hasOwnProperty(y)?Array.isArray(m[y])?m[y].push(E):m[y]=[m[y],isNaN(v)?E:v]:m[y]=isNaN(v)?E:v}}return m}function u(r){try{return decodeURIComponent(r)}catch{return}}const o={renderUrl:t,toUrlParams:i,appendQueryToUrl:s,getUrlSearchParams:l,parseKeyValue:f};function d(r,m){return m!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(r)}},2576:(Y,T,e)=>{"use strict";e.d(T,{HU:()=>f,Jb:()=>u,vh:()=>s});var t=e(92103),n=e(79086),i=e(32195);function s(d,r){for(const m of d)switch(m.type){case i.H.ValueToText:if(r==null)continue;const c=m.options[r];if(c)return c;break;case i.H.RangeToText:if(r==null)continue;const p=parseFloat(r);if(isNaN(p)||!isNaN(m.options.from)&&p<m.options.from||!isNaN(m.options.to)&&p>m.options.to)continue;return m.options.result;case i.H.RegexToText:if(r==null||typeof r!="string")continue;const E=(0,n.jO)(m.options.pattern);if(r.match(E)){const v={...m.options.result};return v.text!=null&&(v.text=r.replace(E,m.options.result.text||"")),v}case i.H.SpecialValue:switch(m.options.match){case i.e.Null:{if(r==null)return m.options.result;break}case i.e[NaN]:{if(isNaN(r))return m.options.result;break}case i.e.NullAndNaN:{if(isNaN(r)||r==null)return m.options.result;break}case i.e.True:{if(r===!0||r==="true")return m.options.result;break}case i.e.False:{if(r===!1||r==="false")return m.options.result;break}case i.e.Empty:{if(r==="")return m.options.result;break}}}return null}function l(d){return(typeof d=="number"||typeof d=="string"&&d.trim()!=="")&&!isNaN(d)}var f=(d=>(d[d.ValueToText=1]="ValueToText",d[d.RangeToText=2]="RangeToText",d))(f||{});function u(d,r){const m=[];let c=d.mappingType;if(d.mappingType||(d.valueMaps&&d.valueMaps.length?c=1:d.rangeMaps&&d.rangeMaps.length&&(c=2)),c===1)for(let p=0;p<d.valueMaps.length;p++){const g=d.valueMaps[p];m.push(o({...g,id:p,type:i.H.ValueToText},d.fieldConfig?.defaults?.thresholds||r))}else if(c===2)for(let p=0;p<d.rangeMaps.length;p++){const g=d.rangeMaps[p];m.push(o({...g,id:p,type:i.H.RangeToText},d.fieldConfig?.defaults?.thresholds||r))}return m}function o(d,r){const m={type:i.H.ValueToText,options:{}},c=[];let p;const g=parseFloat(d.text);if(r&&!isNaN(g)){const y=(0,t.m1)(g,r.steps);y&&y.color&&(p=y.color)}switch(d.type){case 1:case i.H.ValueToText:d.value!=null&&(d.value==="null"?c.push({type:i.H.SpecialValue,options:{match:i.e.Null,result:{text:d.text,color:p}}}):m.options[String(d.value)]={text:d.text,color:p});break;case 2:case i.H.RangeToText:d.from==="null"||d.to==="null"?c.push({type:i.H.SpecialValue,options:{match:i.e.Null,result:{text:d.text,color:p}}}):c.push({type:i.H.RangeToText,options:{from:+d.from,to:+d.to,result:{text:d.text,color:p}}});break}return Object.keys(m.options).length>0&&c.unshift(m),c[0]}},32921:(Y,T,e)=>{"use strict";e.d(T,{x:()=>l});var t=e(12877),n=e(25740),i=e(46978),s=e(82615);function l({whileLoading:f,source:u}){return(0,t.T)((0,n.H)(200).pipe((0,i.h)(f),(0,s.R)(u)),u)}},22078:(Y,T,e)=>{"use strict";e.d(T,{Cf:()=>t.Cf,FH:()=>t.FH,IR:()=>t.IR,QW:()=>t.QW,Qj:()=>t.Qj,SP:()=>t.SP,SR:()=>t.SR,Td:()=>t.Td,bn:()=>t.bn,br:()=>t.br,q2:()=>t.q2,vb:()=>t.vb,zc:()=>t.zc});var t=e(2703)},7897:(Y,T,e)=>{"use strict";e.d(T,{Aq:()=>n,Yh:()=>u,dT:()=>l,i7:()=>o});var t=e(2703);function n(d,r){const m=["","K","M","B","T"],c=(0,t.Qj)(1e3,m);return(p,g,y)=>{if(p==null)return{text:""};const E=p<0;E&&(p=Math.abs(p));const v=c(p,g,y);return r?v.suffix=v.suffix!==void 0?`${v.suffix}${d}`:void 0:v.prefix=d,E&&(v.prefix=`-${v.prefix?.length?v.prefix:""}`),v}}const i=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],s=i.indexOf("");function l(d){const r=i.findIndex(m=>m.normalize("NFKD")===d.normalize("NFKD"));return r<0?0:r-s}const f=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function u(d,r=0){const m=f.map(c=>" "+c+d);return(0,t.Qj)(1024,m,r)}function o(d,r=0){const m=i.map(c=>" "+c+d);return(0,t.Qj)(1e3,m,s+r)}},2703:(Y,T,e)=>{"use strict";e.d(T,{IR:()=>ee,zc:()=>Q,Cf:()=>Te,QW:()=>ct,Td:()=>Ve,br:()=>de,SP:()=>ne,Qj:()=>q,SR:()=>se,vb:()=>he,FH:()=>G,bn:()=>fe,q2:()=>ae});var t=e(82897);function n(Ie,Ke){return Ie===null?{text:""}:{text:G(Ie,Ke),suffix:"%"}}function i(Ie,Ke){return Ie===null?{text:""}:{text:G(100*Ie,Ke),suffix:"%"}}function s(Ie,Ke){if(Ie==null)return{text:""};const Ge=l(Ie,Ke);return Ge.text.substring(0,1)==="-"?Ge.text="-0x"+Ge.text.substring(1):Ge.text="0x"+Ge.text,Ge}function l(Ie,Ke){return Ie==null?{text:""}:{text:parseFloat(G(Ie,Ke)).toString(16).toUpperCase()}}function f(Ie,Ke){return Ie==null?{text:""}:{text:Ie.toExponential(Ke??void 0)}}var u=e(77258),o=e(82410),d=e(67483),r=(Ie=>(Ie.Year="year",Ie.Month="month",Ie.Week="week",Ie.Day="day",Ie.Hour="hour",Ie.Minute="minute",Ie.Second="second",Ie.Millisecond="millisecond",Ie))(r||{});const m=["year","month","week","day","hour","minute","second","millisecond"],c={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function p(Ie,Ke){return Ie===null?{text:""}:Math.abs(Ie)<1e3?{text:G(Ie,Ke),suffix:" ns"}:Math.abs(Ie)<1e6?fe(Ie/1e3,Ke," \xB5s"):Math.abs(Ie)<1e9?fe(Ie/1e6,Ke," ms"):Math.abs(Ie)<6e10?fe(Ie/1e9,Ke," s"):Math.abs(Ie)<36e11?fe(Ie/6e10,Ke," min"):Math.abs(Ie)<864e11?fe(Ie/36e11,Ke," hour"):fe(Ie/864e11,Ke," day")}function g(Ie,Ke){return Ie===null?{text:""}:Math.abs(Ie)<1e3?{text:G(Ie,Ke),suffix:" \xB5s"}:Math.abs(Ie)<1e6?fe(Ie/1e3,Ke," ms"):fe(Ie/1e6,Ke," s")}function y(Ie,Ke,Ge){return Ie===null?{text:""}:Math.abs(Ie)<1e3?{text:G(Ie,Ke),suffix:" ms"}:Math.abs(Ie)<6e4?fe(Ie/1e3,Ke," s"):Math.abs(Ie)<36e5?fe(Ie/6e4,Ke," min"):Math.abs(Ie)<864e5?fe(Ie/36e5,Ke," hour"):Math.abs(Ie)<31536e6?fe(Ie/864e5,Ke," day"):fe(Ie/31536e6,Ke," year")}function E(Ie,Ke){if(Ie!=null&&Ke!==null&&Ke!==void 0)return Ie-Ke}function v(Ie,Ke){return Ie===null?{text:""}:Ie===0?{text:"0",suffix:" s"}:Math.abs(Ie)<1e-6?fe(Ie*1e9,Ke," ns"):Math.abs(Ie)<.001?fe(Ie*1e6,Ke," \xB5s"):Math.abs(Ie)<1?fe(Ie*1e3,Ke," ms"):Math.abs(Ie)<60?{text:G(Ie,Ke),suffix:" s"}:Math.abs(Ie)<3600?fe(Ie/60,Ke," min"):Math.abs(Ie)<86400?fe(Ie/3600,Ke," hour"):Math.abs(Ie)<604800?fe(Ie/86400,Ke," day"):Math.abs(Ie)<31536e3?fe(Ie/604800,Ke," week"):fe(Ie/31556900,Ke," year")}function h(Ie,Ke){return Ie===null?{text:""}:Math.abs(Ie)<60?{text:G(Ie,Ke),suffix:" min"}:Math.abs(Ie)<1440?fe(Ie/60,Ke," hour"):Math.abs(Ie)<10080?fe(Ie/1440,Ke," day"):Math.abs(Ie)<604800?fe(Ie/10080,Ke," week"):fe(Ie/525948,Ke," year")}function P(Ie,Ke){return Ie===null?{text:""}:Math.abs(Ie)<24?{text:G(Ie,Ke),suffix:" hour"}:Math.abs(Ie)<168?fe(Ie/24,Ke," day"):Math.abs(Ie)<8760?fe(Ie/168,Ke," week"):fe(Ie/8760,Ke," year")}function a(Ie,Ke){return Ie===null?{text:""}:Math.abs(Ie)<7?{text:G(Ie,Ke),suffix:" day"}:Math.abs(Ie)<365?fe(Ie/7,Ke," week"):fe(Ie/365,Ke," year")}function C(Ie,Ke,Ge){if(Ie===null)return{text:""};if(Ie===0)return{text:"0",suffix:" "+Ge+"s"};if(Ie<0){const ye=C(-Ie,Ke,Ge);return ye.suffix||(ye.suffix=""),ye.suffix+=" ago",ye}Ie*=c[Ge]*1e3;const at=[];let dt=!1,Re=0;Ke!=null&&(Re=Ke);for(let ye=0;ye<m.length&&Re>=0;ye++){const Pe=c[m[ye]]*1e3,be=Ie/Pe;if(be>=1||dt){dt=!0;const Be=Math.floor(be),ke=m[ye]+(Be!==1?"s":"");at.push(Be+" "+ke),Ie=Ie%Pe,Re--}}return{text:at.join(", ")}}function D(Ie,Ke){if(Ie===null)return{text:""};if(Ie<1e3)return{text:(0,d.zh)(Ie).format("SSS\\m\\s")};if(Ie<6e4){let Re="ss\\s:SSS\\m\\s";return Ke===0&&(Re="ss\\s"),{text:(0,d.zh)(Ie).format(Re)}}if(Ie<36e5){let Re="mm\\m:ss\\s:SSS\\m\\s";return Ke===0?Re="mm\\m":Ke===1&&(Re="mm\\m:ss\\s"),{text:(0,d.zh)(Ie).format(Re)}}let Ge="mm\\m:ss\\s:SSS\\m\\s";const at=`${("0"+Math.floor((0,d.Ks)(Ie,"milliseconds").asHours())).slice(-2)}h`;return Ke===0?Ge="":Ke===1?Ge="mm\\m":Ke===2&&(Ge="mm\\m:ss\\s"),{text:Ge?`${at}:${(0,d.zh)(Ie).format(Ge)}`:at}}function b(Ie,Ke){return C(Ie,Ke,"millisecond")}function M(Ie,Ke){return C(Ie,Ke,"second")}function x(Ie){if(Ie<0){const Re=x(-Ie);return Re.suffix||(Re.suffix=""),Re.suffix+=" ago",Re}const Ke=[],Ge=Math.floor(Ie/3600),at=Math.floor(Ie%3600/60),dt=Math.floor(Ie%3600%60);return Ge>9?Ke.push(""+Ge):Ke.push("0"+Ge),at>9?Ke.push(""+at):Ke.push("0"+at),dt>9?Ke.push(""+dt):Ke.push("0"+dt),{text:Ke.join(":")}}function R(Ie){if(Ie<0){const dt=R(-Ie);return dt.suffix||(dt.suffix=""),dt.suffix+=" ago",dt}let Ke="";const Ge=Math.floor(Ie/(24*3600));Ge>0&&(Ke=Ge+" d ");const at=x(Ie-Ge*24*3600);return{text:Ke+at.text}}function S(Ie,Ke){return v(Ie/100,Ke)}function O(Ie,Ke){return D(Ie,Ke)}function U(Ie,Ke){return D(Ie*1e3,Ke)}function I(Ie,Ke){return(Ge,at,dt,Re)=>Ke&&(0,d.CQ)().isSame(Ge,"day")?{text:(0,u.dq)(Ge,{format:Ke,timeZone:Re})}:{text:(0,u.dq)(Ge,{format:Ie,timeZone:Re})}}const F=I("YYYY-MM-DD HH:mm:ss"),w=I("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),K=I("MM/DD/YYYY h:mm:ss a"),L=I("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function V(){return I((0,o.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function H(){return I((0,o.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,o.Ji)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function j(Ie,Ke,Ge,at,dt){return{text:(0,u.dq)(Ie,{format:dt?o.U6.fullDateMS:o.U6.fullDate,timeZone:at})}}function A(Ie,Ke,Ge,at){return{text:(0,u.E8)(Ie,{timeZone:at})}}var _=e(7897);const k=()=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:ae("")},{name:"String",id:"string",fn:he},{name:"short",id:"short",fn:q(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:n},{name:"Percent (0.0-1.0)",id:"percentunit",fn:i},{name:"Humidity (%H)",id:"humidity",fn:ae("%H")},{name:"Decibel",id:"dB",fn:ae("dB")},{name:"Hexadecimal (0x)",id:"hex0x",fn:s},{name:"Hexadecimal",id:"hex",fn:l},{name:"Scientific notation",id:"sci",fn:f},{name:"Locale format",id:"locale",fn:ne},{name:"Pixels",id:"pixel",fn:ae("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:ae("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:ae("f/sec\xB2")},{name:"G unit",id:"accG",fn:ae("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:ae("\xB0")},{name:"Radians",id:"radian",fn:ae("rad")},{name:"Gradian",id:"grad",fn:ae("grad")},{name:"Arc Minutes",id:"arcmin",fn:ae("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:ae("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:ae("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:ae("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:ae("mi\xB2")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,_.i7)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,_.i7)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,_.i7)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,_.i7)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,_.i7)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,_.i7)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,_.i7)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,_.i7)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:ae("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:ae("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:ae("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:ae("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:ae("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:ae("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:ae("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:ae("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:ae("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:ae("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:ae("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:ae("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,_.Aq)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,_.Aq)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,_.Aq)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,_.Aq)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,_.Aq)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,_.Aq)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,_.Aq)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,_.Aq)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,_.Aq)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,_.Aq)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,_.Aq)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,_.Aq)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,_.Aq)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,_.Aq)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,_.Aq)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,_.Aq)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,_.Aq)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,_.Aq)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,_.Aq)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,_.Aq)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,_.Aq)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,_.Aq)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,_.Aq)("\u0111",!0)}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,_.Yh)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,_.i7)("B")},{name:"bits(IEC)",id:"bits",fn:(0,_.Yh)("b")},{name:"bits(SI)",id:"decbits",fn:(0,_.i7)("b")},{name:"kibibytes",id:"kbytes",fn:(0,_.Yh)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,_.i7)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,_.Yh)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,_.i7)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,_.Yh)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,_.i7)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,_.Yh)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,_.i7)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,_.Yh)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,_.i7)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,_.i7)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,_.Yh)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,_.i7)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,_.Yh)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,_.i7)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,_.Yh)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,_.Yh)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,_.i7)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,_.i7)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,_.Yh)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,_.Yh)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,_.i7)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,_.i7)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,_.Yh)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,_.Yh)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,_.i7)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,_.i7)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,_.Yh)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,_.Yh)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,_.i7)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,_.i7)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,_.Yh)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,_.Yh)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,_.i7)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,_.i7)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:F},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:w},{name:"Datetime US",id:"dateTimeAsUS",fn:K},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:L},{name:"Datetime local",id:"dateTimeAsLocal",fn:V()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:H()},{name:"Datetime default",id:"dateTimeAsSystem",fn:j},{name:"From Now",id:"dateTimeFromNow",fn:A}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,_.i7)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,_.i7)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,_.i7)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,_.i7)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,_.i7)("W",-1)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:ae("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,_.i7)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,_.i7)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,_.i7)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,_.i7)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,_.i7)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,_.i7)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,_.i7)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,_.i7)("W-Min",1)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,_.i7)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,_.i7)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,_.i7)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,_.i7)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,_.i7)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,_.i7)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,_.i7)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,_.i7)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,_.i7)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,_.i7)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,_.i7)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,_.i7)("dBm")},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,_.i7)("\u03A9")},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,_.i7)("\u03A9",1)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,_.i7)("\u03A9",2)},{name:"Farad (F)",id:"farad",fn:(0,_.i7)("F")},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,_.i7)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,_.i7)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,_.i7)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,_.i7)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,_.i7)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,_.i7)("H",-1)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,_.i7)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,_.i7)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:ae("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:ae("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:ae("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:ae("cfm")},{name:"Litre/hour",id:"litreh",fn:ae("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:ae("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:ae("mL/min")},{name:"Lux (lx)",id:"lux",fn:ae("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,_.i7)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,_.i7)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,_.i7)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,_.i7)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,_.i7)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,_.i7)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,_.i7)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,_.i7)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,_.i7)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,_.i7)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,_.i7)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,_.i7)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,_.i7)("g")},{name:"pound (lb)",id:"masslb",fn:ae("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,_.i7)("g",1)},{name:"metric ton (t)",id:"masst",fn:ae("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,_.i7)("m",-1)},{name:"inch (in)",id:"lengthin",fn:ae("in")},{name:"feet (ft)",id:"lengthft",fn:ae("ft")},{name:"meter (m)",id:"lengthm",fn:(0,_.i7)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,_.i7)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:ae("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,_.i7)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,_.i7)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,_.i7)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,_.i7)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:ae("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:ae("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:ae('"Hg')},{name:"PSI",id:"pressurepsi",fn:q(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,_.i7)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,_.i7)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,_.i7)("Gy")},{name:"rad",id:"radrad",fn:(0,_.i7)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,_.i7)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,_.i7)("Sv",-1)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,_.i7)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,_.i7)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,_.i7)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,_.i7)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,_.i7)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,_.i7)("Sv/h",-1)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,_.i7)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:ae("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,_.i7)("Hz")},{name:"Radians per second (rad/s)",id:"rotrads",fn:ae("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:ae("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:ae("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:ae("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:ae("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,_.i7)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:p},{name:"microseconds (\xB5s)",id:"\xB5s",fn:g},{name:"milliseconds (ms)",id:"ms",fn:y},{name:"seconds (s)",id:"s",fn:v},{name:"minutes (m)",id:"m",fn:h},{name:"hours (h)",id:"h",fn:P},{name:"days (d)",id:"d",fn:a},{name:"duration (ms)",id:"dtdurationms",fn:b},{name:"duration (s)",id:"dtdurations",fn:M},{name:"duration (hh:mm:ss)",id:"dthms",fn:x},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:R},{name:"Timeticks (s/100)",id:"timeticks",fn:S},{name:"clock (ms)",id:"clockms",fn:O},{name:"clock (s)",id:"clocks",fn:U}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:se("c/s")},{name:"ops/sec (ops)",id:"ops",fn:se("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:se("req/s")},{name:"reads/sec (rps)",id:"rps",fn:se("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:se("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:se("io/s")},{name:"counts/min (cpm)",id:"cpm",fn:se("c/m")},{name:"ops/min (opm)",id:"opm",fn:se("ops/m")},{name:"requests/min (rpm)",id:"reqpm",fn:se("req/m")},{name:"reads/min (rpm)",id:"rpm",fn:se("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:se("wr/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:ae("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:ae("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:ae("mph")},{name:"knot (kn)",id:"velocityknot",fn:ae("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,_.i7)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,_.i7)("L")},{name:"cubic meter",id:"m3",fn:ae("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:ae("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:ae("dm\xB3")},{name:"gallons",id:"gallons",fn:ae("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:ee("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:ee("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:ee("On","Off")}]}];function Q(Ie){return`${Ie.prefix??""}${Ie.text}${Ie.suffix??""}`}let re=[];const Z={};let oe=!1;function G(Ie,Ke){if(Ie===null)return"";if(Ie===Number.NEGATIVE_INFINITY||Ie===Number.POSITIVE_INFINITY)return Ie.toLocaleString();if(Ke==null&&(Ke=le(Ie)),Ie===0)return Ie.toFixed(Ke);const Ge=Ke?Math.pow(10,Math.max(0,Ke)):1,at=String(Math.round(Ie*Ge)/Ge);if(at.indexOf("e")!==-1||Ie===0)return at;const dt=at.indexOf("."),Re=dt===-1?0:at.length-dt-1;return Re<Ke?(Re?at:at+".")+String(Ge).slice(1,Ke-Re+1):at}function le(Ie){const Ke=Math.abs(Ie);let at=-Math.floor(Math.log(Ke)/Math.LN10)+1;const dt=Math.pow(10,-at);return Ke/dt>2.25&&++at,Ie%1===0&&(at=0),Math.max(0,at)}function fe(Ie,Ke,Ge){return{text:G(Ie,Ke),suffix:Ge}}function ae(Ie,Ke){return(Ge,at)=>{if(Ge===null)return{text:""};const dt=G(Ge,at);return Ie?Ke?{text:dt,prefix:Ie}:{text:dt,suffix:" "+Ie}:{text:dt}}}function de(Ie){return Ie&&Ie.startsWith("bool")}function ee(Ie,Ke){return Ge=>({text:Ge?Ie:Ke})}const me=(Ie,Ke)=>Math.log10(Ke)/Math.log10(Ie);function q(Ie,Ke,Ge=0){return(at,dt)=>{if(at==null)return{text:""};if(at===Number.NEGATIVE_INFINITY||at===Number.POSITIVE_INFINITY||isNaN(at))return{text:at.toLocaleString()};const Re=at===0?0:Math.floor(me(Ie,Math.abs(at))),ye=Ke[(0,t.clamp)(Ge+Re,0,Ke.length-1)];return{text:G(at/Ie**(0,t.clamp)(Re,-Ge,Ke.length-Ge-1),dt),suffix:ye}}}function ne(Ie,Ke){return Ie==null?{text:""}:{text:Ie.toLocaleString(void 0,{maximumFractionDigits:Ke??void 0})}}function se(Ie){const Ge=q(1e3,["","K","M","B","T"]);return(at,dt,Re)=>{if(at===null)return{text:""};const ye=Ge(at,dt,Re);return ye.suffix+=" "+Ie,ye}}function he(Ie){return{text:`${Ie}`}}function ue(){re=k();for(const Ie of re)for(const Ke of Ie.formats)Z[Ke.id]=Ke.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(Ie=>{const Ke=Z[Ie.to];Ke&&(Z[Ie.from]=Ke)}),oe=!0}function Te(Ie){if(!Ie)return ae("");oe||ue();const Ke=Z[Ie];if(!Ke&&Ie){let Ge=Ie.indexOf(":");if(Ge>0){const at=Ie.substring(0,Ge),dt=Ie.substring(Ge+1);if(at==="prefix")return ae(dt,!0);if(at==="suffix")return ae(dt,!1);if(at==="time")return I(dt);if(at==="si"){const Re=(0,_.dT)(dt.charAt(0)),ye=Re===0?dt:dt.substring(1);return(0,_.i7)(ye,Re)}if(at==="count")return se(dt);if(at==="currency")return(0,_.Aq)(dt);if(at==="bool"){if(Ge=dt.indexOf("/"),Ge>=0){const Re=dt.substring(0,Ge),ye=dt.substring(Ge+1);return ee(Re,ye)}return ee(dt,"-")}}return ae(Ie)}return Ke}function Ve(){return oe||ue(),Z}function ct(){return oe||ue(),re.map(Ie=>({text:Ie.name,submenu:Ie.formats.map(Ke=>({text:Ke.name,value:Ke.id}))}))}},74911:(Y,T,e)=>{"use strict";e.d(T,{d:()=>i});var t=e(23845),n=e(21570);class i extends n.G{constructor(l){return super(),this.buffer=l.buffer||[],this.capacity=this.buffer.length,this.tail=l.append!=="head",this.index=0,this.add=this.getAddFunction(),l.capacity&&this.setCapacity(l.capacity),(0,t.U)(this)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?l=>{this.buffer.push(l),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:l=>{this.buffer.unshift(l),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?l=>{this.buffer[this.index]=l,this.index=(this.index+1)%this.buffer.length}:l=>{let f=this.index-1;f<0&&(f=this.buffer.length-1),this.buffer[f]=l,this.index=f}}setCapacity(l){if(this.capacity===l)return;const f=this.toArray();if(l>this.length)this.buffer=f;else if(l<this.capacity){const u=this.length-l;this.tail?this.buffer=f.slice(u,f.length):this.buffer=f.slice(0,f.length-u)}this.capacity=l,this.index=0,this.add=this.getAddFunction()}setAppendMode(l){const f=l!=="head";f!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=f,this.add=this.getAddFunction())}reverse(){return this.buffer.reverse()}get(l){return this.buffer[(l+this.index)%this.buffer.length]}set(l,f){this.buffer[(l+this.index)%this.buffer.length]=f}get length(){return this.buffer.length}}},21570:(Y,T,e)=>{"use strict";e.d(T,{G:()=>n,s:()=>s});var t=e(77747);class n{*iterator(){for(let f=0;f<this.length;f++)yield this.get(f)}set(f,u){throw"unsupported operation"}add(f){throw"unsupported operation"}push(...f){for(const u of f)this.add(u);return this.length}[Symbol.iterator](){return this.iterator()}forEach(f){return s(this).forEach(f)}map(f){return s(this).map(f)}filter(f){return s(this).filter(f)}at(f){return this.get(f)}toArray(){return(0,t.n)(this)}join(f){return this.toArray().join(f)}toJSON(){return this.toArray()}pop(){throw new Error("Method not implemented.")}concat(...f){throw new Error("Method not implemented.")}reverse(){throw new Error("Method not implemented.")}shift(){throw new Error("Method not implemented.")}sort(f){throw new Error("Method not implemented.")}splice(f,u,...o){throw new Error("Method not implemented.")}unshift(...f){throw new Error("Method not implemented.")}fill(f,u,o){throw new Error("Method not implemented.")}copyWithin(f,u,o){throw new Error("Method not implemented.")}[Symbol.unscopables](){throw new Error("Method not implemented.")}slice(f,u){return this.toArray().slice(f,u)}indexOf(f,u){return this.toArray().indexOf(f,u)}lastIndexOf(f,u){return this.toArray().lastIndexOf(f,u)}every(f,u){return this.toArray().every(f,u)}some(f,u){return this.toArray().some(f,u)}reduce(f,u){throw new Error("Method not implemented.")}reduceRight(f,u){throw new Error("Method not implemented.")}find(f,u){return this.toArray().find(f,u)}findIndex(f,u){return this.toArray().findIndex(f,u)}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.toArray().values()}includes(f,u){return this.toArray().includes(f,u)}flatMap(f,u){return this.toArray().flatMap(f,u)}flat(f){throw new Error("Method not implemented.")}}const i=[];function s(l){return{*[Symbol.iterator](){for(let f=0;f<l.length;f++)yield l.get(f)},forEach(f){for(let u=0;u<l.length;u++)f(l.get(u),u,i)},map(f){const u=[];for(let o=0;o<l.length;o++)u.push(f(l.get(o),o,i));return u},filter(f){const u=[];let o=0;for(const d of this)f(d,o++,i)&&u.push(d);return u}}}},88971:(Y,T,e)=>{"use strict";e.d(T,{o:()=>s});var t=e(23845),n=e(21570),i=e(77747);class s extends n.G{constructor(f,u){return super(),this.source=f,this.order=u,(0,t.U)(this)}get length(){return this.source.length}get(f){return this.source.get(this.order[f])}toArray(){return(0,i.n)(this)}toJSON(){return(0,i.n)(this)}getOrderArray(){return this.order}}},50486:(Y,T,e)=>{"use strict";e.d(T,{l$:()=>s,Gt:()=>l,sq:()=>g,rM:()=>o,dV:()=>f.d,uI:()=>u,$Y:()=>m,rm:()=>p,oH:()=>d.o,sD:()=>n.s});var t=e(23845),n=e(21570),i=e(77747);class s extends n.G{constructor(E=0){return super(),this.length=0,this.source=[],this.length=E,(0,t.U)(this)}setLength(E){if(E>this.length)this.length=E;else if(E<this.length){const v=[];for(const h of this.source)if(v.push(h),h.end>E){h.end=E;break}this.source=v,this.length=E}}append(E){const v={start:this.length,end:this.length+E.length,values:E};return this.length=v.end,this.source.push(v),v}get(E){for(let v=0;v<this.source.length;v++){const h=this.source[v];if(E>=h.start&&E<h.end)return h.values[E-h.start]}}toArray(){return(0,i.n)(this)}toJSON(){return(0,i.n)(this)}}class l extends Array{get buffer(){return this}set buffer(E){this.length=0;const v=E?.length;if(v){let h=65e3,P=Math.ceil(v/h);for(let a=0;a<P;a++)this.push.apply(this,E.slice(a*h,(a+1)*h))}}constructor(E){super(),this.buffer=E??[]}toJSON(){return[...this]}}var f=e(74911);class u extends Array{constructor(E,v){return super(),new Array(v).fill(E)}}class o extends Array{constructor(E,v,h){super();const P=new Array(E.length);for(let a=0;a<P.length;a++)P[a]=h(E[a],v[a]);return P}}var d=e(88971),r=e(2703);class m extends Array{constructor(E,v){return super(),E.map(h=>(0,r.zc)(v(h)))}}var c=e(99098);class p extends Array{constructor(E){super();const v=new Array(E);for(let h=0;h<E;h++)v[h]=h;return v}static newField(E){return{name:"",values:new p(E),type:c.fS.number,config:{min:0,max:E-1}}}}class g extends Array{constructor(E){return super(),E.map(v=>+v)}}},77747:(Y,T,e)=>{"use strict";e.d(T,{n:()=>t});function t(n){const i=Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.get(s);return i}},75552:(Y,T,e)=>{"use strict";e.d(T,{Si:()=>n,ct:()=>t,fV:()=>i,mR:()=>s});var t=(l=>(l.DashboardView="dashboard-view",l.DataRequest="data-request",l))(t||{});const n=l=>Boolean(l.payload.page),i=l=>Boolean(l.payload.interactionName),s=l=>Boolean(l.payload.experimentId)},41818:(Y,T,e)=>{"use strict";e.d(T,{SZ:()=>u,ff:()=>f,r_:()=>s,sm:()=>l});var t=e(35645),n=e(37932),i=e(5494);const s=o=>{(0,i.RP)().addEvent({type:i.ee.MetaAnalytics,payload:o})},l=()=>{const o=n.E1.getLocation(),d=`${t.v.appSubUrl??""}${o.pathname}${o.search}${o.hash}`;(0,i.RP)().addEvent({type:i.ee.Pageview,payload:{page:d}})},f=(o,d)=>{(0,i.RP)().addEvent({type:i.ee.Interaction,payload:{interactionName:o,properties:d}})},u=(o,d,r)=>{(0,i.RP)().addEvent({type:i.ee.ExperimentView,payload:{experimentId:o,experimentGroup:d,experimentVariant:r}})}},53117:(Y,T,e)=>{"use strict";e.d(T,{q:()=>r});var t=e(66111),n=e(73446),i=e(53940),s=e(68183),l=e(8581),f=e(52081),u=e(51613),o=e(86647),d=e(22069);class r extends t.PureComponent{constructor(c){super(c),this.dataSourceSrv=(0,o.F)(),this.state={},this.onChange=(p,g)=>{if(g.action==="clear"&&this.props.onClear){this.props.onClear();return}const y=this.dataSourceSrv.getInstanceSettings(p.value);y&&(this.props.onChange(y),this.setState({error:void 0}))}}componentDidMount(){const{current:c}=this.props;this.dataSourceSrv.getInstanceSettings(c)||this.setState({error:"Could not find data source "+c})}getCurrentValue(){const{current:c,hideTextValue:p,noDefault:g}=this.props;if(!c&&g)return;const y=this.dataSourceSrv.getInstanceSettings(c);if(y)return{label:y.name.slice(0,37),value:y.uid,imgUrl:y.meta.info.logos.small,hideText:p,meta:y.meta};const E=(0,n.BT)(c);return E===d.hr.uid||E===d.hr.name?{label:E,value:E,hideText:p}:{label:(E??"no name")+" - not found",value:E??void 0,imgUrl:"",hideText:p}}getDataSourceOptions(){const{alerting:c,tracing:p,metrics:g,mixed:y,dashboard:E,variables:v,annotations:h,pluginId:P,type:a,filter:C,logs:D}=this.props;return this.dataSourceSrv.getList({alerting:c,tracing:p,metrics:g,logs:D,dashboard:E,mixed:y,variables:v,annotations:h,pluginId:P,filter:C,type:a}).map(M=>({value:M.name,label:`${M.name}${M.isDefault?" (default)":""}`,imgUrl:M.meta.info.logos.small,meta:M.meta}))}render(){const{autoFocus:c,onBlur:p,onClear:g,openMenuOnFocus:y,placeholder:E,width:v,inputId:h,disabled:P=!1,isLoading:a=!1}=this.props,{error:C}=this.state,D=this.getDataSourceOptions(),b=this.getCurrentValue(),M=typeof g=="function";return t.createElement("div",{"aria-label":"Data source picker select container","data-testid":s.wl.components.DataSourcePicker.container},t.createElement(l.Ph,{isLoading:a,disabled:P,"aria-label":s.wl.components.DataSourcePicker.inputV2,inputId:h||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:M,backspaceRemovesValue:!1,onChange:this.onChange,options:D,autoFocus:c,onBlur:p,width:v,openMenuOnFocus:y,maxMenuHeight:500,placeholder:E,noOptionsMessage:"No datasources found",value:b??null,invalid:Boolean(C)||Boolean(this.props.invalid),getOptionLabel:x=>x.meta&&(0,i.x)(x.meta.signature)&&x!==b?t.createElement(f.Lh,{align:"center",justify:"space-between",height:"auto"},t.createElement("span",null,x.label)," ",t.createElement(u.o,{status:x.meta.signature})):x.label||""}))}}r.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}},87670:(Y,T,e)=>{"use strict";e.d(T,{$:()=>i,Z:()=>n});var t=e(66111);let n=({message:s})=>t.createElement("div",null,"Unable to render data: ",s,".");function i(s){n=s}},98825:(Y,T,e)=>{"use strict";e.d(T,{$:()=>n,L:()=>i});var t=e(66111);let n=()=>t.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function i(s){n=s}},87221:(Y,T,e)=>{"use strict";e.d(T,{T:()=>n,t:()=>i});var t=e(66111);let n=({children:s})=>t.createElement("div",null,s);function i(s){n=s}},35645:(Y,T,e)=>{"use strict";e.d(T,{O:()=>l,v:()=>m});var t=e(82897),n=e.n(t),i=e(82410),s=e(21544);class l{constructor(p){this.snapshotEnabled=!0,this.datasources={},this.panels={},this.apps={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.alertingEnabled=!1,this.alertingErrorOrTimeout="",this.alertingNoDataOrNullValues="",this.alertingMinInterval=1,this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.secureSocksDSProxyEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.trustedTypesDefaultPolicyEnabled=!1,this.cspReportOnlyEnabled=!1,this.liveEnabled=!0,this.featureToggles={},this.anonymousEnabled=!1,this.licenseInfo={},this.rendererAvailable=!1,this.dashboardPreviews={systemRequirements:{met:!1,requiredImageRendererPluginVersion:""},thumbnailsExist:!1},this.rendererVersion="",this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.sentry={enabled:!1,dsn:"",customEndpoint:"",sampleRate:1},this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.pluginsCDNBaseURL="",this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:"",alertStateHistoryBackend:void 0,alertStateHistoryPrimary:void 0},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.sqlConnectionLimits={maxOpenConns:100,maxIdleConns:100,connMaxLifetime:14400},this.bootData=p.bootData,this.bootData.user.lightTheme=f(p)==="light",this.isPublicDashboardView=p.bootData.settings.isPublicDashboardView;const g={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,t.merge)(this,g,p),this.buildInfo=p.buildInfo||g.buildInfo,this.dateFormats&&i.U6.update(this.dateFormats),o(this),this.featureToggles.disableAngular&&(this.angularSupportEnabled=!1),this.theme2=(0,s.j)(u(this)),this.theme=this.theme2.v1,this.theme2.flags.topnav=this.featureToggles.topnav}}function f(c){let p="dark";const g=c.bootData.user.theme;return g==="light"||g==="dark"?p=g:g==="system"&&(p=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),p}function u(c){return{colors:{mode:c.bootData.user.lightTheme?"light":"dark"}}}function o(c){if(window.location.href.indexOf("__feature")===-1)return;new URLSearchParams(window.location.search).forEach((g,y)=>{if(y.startsWith("__feature.")){const E=c.featureToggles,v=y.substring(10),h=g==="true"||g==="";h!==E[y]&&(E[v]=h,console.log(`Setting feature toggle ${v} = ${h}`))}})}const d=window.grafanaBootData||{settings:{},user:{},navTree:[]},r=d.settings;r.bootData=d;const m=new l(r)},35670:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{CopyPanelEvent:()=>r.EK,DataSourcePicker:()=>R.q,DataSourceWithBackend:()=>P.CK,EchoEventType:()=>l.ee,FakeEchoSrv:()=>l.rX,GrafanaBootConfig:()=>p.O,HealthCheckError:()=>P.ZA,HealthStatus:()=>P.QO,HistoryWrapper:()=>d._i,MetaAnalyticsEventName:()=>g.ct,PanelDataErrorView:()=>D.Z,PanelRenderer:()=>C.$,PluginPage:()=>x.T,RefreshEvent:()=>r.U5,StreamingFrameAction:()=>o.T0,SystemJS:()=>y.i3,ThemeChangedEvent:()=>r.hD,TimeRangeUpdatedEvent:()=>r.md,config:()=>p.v,createDataSourcePluginEventProperties:()=>O,createPluginEventProperties:()=>S,createQueryRunner:()=>M.AQ,featureEnabled:()=>v.v,frameToMetricFindValue:()=>a.S9,getAngularLoader:()=>n.w,getAppEvents:()=>r.N$,getBackendSrv:()=>t.i,getDataSourceSrv:()=>i.F,getEchoSrv:()=>l.RP,getGrafanaLiveSrv:()=>o.gj,getLegacyAngularInjector:()=>u.V,getLocationSrv:()=>s.w,getPluginExtensions:()=>m.I,getPluginImportUtils:()=>y.bP,getRunRequest:()=>M.Pl,getTemplateSrv:()=>f.J,isExperimentViewEvent:()=>g.mR,isFetchError:()=>t.kW,isInteractionEvent:()=>g.fV,isPageviewEvent:()=>g.Si,isPluginExtensionLink:()=>c.c,loadPluginCss:()=>y.iS,locationSearchToObject:()=>d.Ox,locationService:()=>d.E1,logDebug:()=>h.o7,logError:()=>h.H,logInfo:()=>h.PN,logWarning:()=>h.KE,navigationLogger:()=>d.GQ,registerEchoBackend:()=>l.e6,reportExperimentView:()=>E.SZ,reportInteraction:()=>E.ff,reportMetaAnalytics:()=>E.r_,reportPageview:()=>E.sm,setAngularLoader:()=>n.W,setAppEvents:()=>r.Xw,setBackendSrv:()=>t.jW,setDataSourceSrv:()=>i.w,setEchoSrv:()=>l.tz,setGrafanaLiveSrv:()=>o.cA,setLegacyAngularInjector:()=>u.t,setLocationService:()=>d.ZG,setLocationSrv:()=>s.x,setPluginExtensionGetter:()=>m.o,setPluginImportUtils:()=>y.Qf,setQueryRunnerFactory:()=>M.pD,setRunRequest:()=>M.Iw,setTemplateSrv:()=>f.l,toDataQueryError:()=>b.P,toDataQueryResponse:()=>a.z1,usePluginInteractionReporter:()=>K});var t=e(54899),n=e(11484),i=e(86647),s=e(47458),l=e(5494),f=e(20308),u=e(70926),o=e(75118),d=e(37932),r=e(82378),m=e(54665),c=e(36032),p=e(35645),g=e(75552),y=e(19920),E=e(41818),v=e(66121),h=e(54408),P=e(22069),a=e(32689),C=e(98825),D=e(87670),b=e(77599),M=e(36535),x=e(87221),R=e(53117);function S(V){return{grafana_version:p.v.buildInfo.version,plugin_type:String(V.type),plugin_version:V.info.version,plugin_id:V.id,plugin_name:V.name}}function O(V){return{...S(V.meta),datasource_uid:V.uid}}var U=e(66111),I=e(81129),F=e(58556);const w="grafana_plugin_";function K(){const V=(0,I.g)();return(0,U.useMemo)(()=>{const H=(0,F.v)(V)?O(V.instanceSettings):S(V.meta);return(j,A)=>{if(!L(j))throw new Error(`Interactions reported in plugins should start with: "${w}".`);return(0,E.ff)(j,{...A,...H})}},[V])}function L(V){return V.startsWith(w)&&V.length>w.length}},11484:(Y,T,e)=>{"use strict";e.d(T,{W:()=>n,w:()=>i});let t;function n(s){t=s}function i(){return t}},5494:(Y,T,e)=>{"use strict";e.d(T,{RP:()=>s,e6:()=>l,ee:()=>t,rX:()=>f,tz:()=>i});var t=(u=>(u.Performance="performance",u.MetaAnalytics="meta-analytics",u.Sentry="sentry",u.Pageview="pageview",u.Interaction="interaction",u.ExperimentView="experimentview",u.GrafanaJavascriptAgent="grafana-javascript-agent",u))(t||{});let n;function i(u){n=u}function s(){return n||(n=new f),n}const l=u=>{s().addBackend(u)};class f{constructor(){this.events=[]}flush(){this.events=[]}addBackend(o){}addEvent(o,d){this.events.push(o)}}},37932:(Y,T,e)=>{"use strict";e.d(T,{E1:()=>d,GQ:()=>c,Ox:()=>o,ZG:()=>r,_i:()=>u});var t=e(97594),n=e(49187),i=e(55024),s=e(88383),l=e(73289),f=e(35645);class u{constructor(g){this.history=g||t.lX({basename:f.v.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(g,y){const E=this.history.location,v=this.getSearchObject();for(const P of Object.keys(g))g[P]===null||g[P]===void 0?delete v[P]:v[P]=g[P];const h=n.Cj.renderUrl(E.pathname,v);y?this.history.replace(h,this.history.location.state):this.history.push(h,this.history.location.state)}push(g){this.history.push(g)}replace(g){this.history.replace(g)}reload(){const g=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:g?g+1:1}})}getLocation(){return this.history.location}getSearchObject(){return o(this.history.location.search)}update(g){if((0,i.d)("LocationSrv","update","partial, push or replace"),g.partial&&g.query)this.partial(g.query,g.partial);else{const y={pathname:g.path};g.query&&(y.search=n.Cj.toUrlParams(g.query)),g.replace?this.replace(y):this.push(y)}}}function o(p){let g=typeof p=="number"?String(p):p;return g.length>0?g.startsWith("?")?n.Cj.parseKeyValue(g.substring(1)):n.Cj.parseKeyValue(g):{}}let d=new u;const r=p=>{throw new Error("locationService can be only overriden in test environment")},m=(0,s.h)("Router"),c=m.logger;(0,l.x)("location",d,m)},47458:(Y,T,e)=>{"use strict";e.d(T,{w:()=>i,x:()=>n});let t;function n(s){t=s}function i(){return t}},36535:(Y,T,e)=>{"use strict";e.d(T,{AQ:()=>i,Iw:()=>l,Pl:()=>f,pD:()=>n});let t;const n=u=>{if(t)throw new Error("Runner should only be set when Grafana is starting.");t=u},i=()=>{if(!t)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return t()};let s;function l(u){if(s)throw new Error("runRequest function should only be set once, when Grafana is starting.");s=u}function f(){if(!s)throw new Error("getRunRequest can only be used after Grafana instance has started.");return s}},82378:(Y,T,e)=>{"use strict";e.d(T,{EK:()=>l,N$:()=>o,U5:()=>n,Xw:()=>u,hD:()=>i,md:()=>s});var t=e(55391);class n extends t.m{}n.type="refresh";class i extends t.R{}i.type="theme-changed";class s extends t.R{}s.type="time-range-updated";class l extends t.R{}l.type="copy-panel";let f;function u(d){f=d}function o(){return f}},54899:(Y,T,e)=>{"use strict";e.d(T,{i:()=>s,jW:()=>i,kW:()=>t});function t(l){return typeof l=="object"&&l!==null&&"status"in l&&"data"in l}let n;const i=l=>{n=l},s=()=>n},86647:(Y,T,e)=>{"use strict";e.d(T,{F:()=>i,w:()=>n});let t;function n(s){t=s}function i(){return t}},70926:(Y,T,e)=>{"use strict";e.d(T,{V:()=>i,t:()=>n});let t;const n=s=>{t=s},i=()=>t},75118:(Y,T,e)=>{"use strict";e.d(T,{T0:()=>t,cA:()=>i,gj:()=>s});var t=(l=>(l.Append="append",l.Replace="replace",l))(t||{});let n;const i=l=>{n=l},s=()=>n},54665:(Y,T,e)=>{"use strict";e.d(T,{I:()=>s,o:()=>n});let t;function n(l){if(t)throw new Error("setPluginExtensionGetter() function should only be called once, when Grafana is starting.");t=l}function i(){if(!t)throw new Error("getPluginExtensionGetter() can only be used after the Grafana instance has started.");return t}const s=l=>i()(l)},36032:(Y,T,e)=>{"use strict";e.d(T,{c:()=>n});var t=e(22623);function n(i){return i?i.type===t.D.link&&("path"in i||"onClick"in i):!1}},20308:(Y,T,e)=>{"use strict";e.d(T,{J:()=>i,l:()=>n});let t;const n=s=>{t=s},i=()=>t},22069:(Y,T,e)=>{"use strict";e.d(T,{B9:()=>D,CK:()=>C,PI:()=>b,Pr:()=>v,QO:()=>P,ZA:()=>h,hr:()=>E});var t=e(59980),n=e(65583),i=e(12877),s=e(53704),l=e(59724),f=e(89424),u=e(73446),o=e(8891),d=e(59957),r=e(85194),m=e(35645),c=e(86647),p=e(75118),g=e(54899),y=e(32689);const E=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function v(M){if(!M)return!1;const x=typeof M=="string"?M:M.type;return x===E.type||x===E.name||x==="-100"}class h extends Error{constructor(x,R){super(x),this.details=R,this.name="HealthCheckError"}}var P=(M=>(M.Unknown="UNKNOWN",M.OK="OK",M.Error="ERROR",M))(P||{}),a=(M=>(M.PluginID="X-Plugin-Id",M.DatasourceUID="X-Datasource-Uid",M.DashboardUID="X-Dashboard-Uid",M.PanelID="X-Panel-Id",M.QueryGroupID="X-Query-Group-Id",M.FromExpression="X-Grafana-From-Expr",M))(a||{});class C extends f.MF{constructor(x){super(x),this.streamOptionsProvider=b}query(x){const{intervalMs:R,maxDataPoints:S,queryCachingTTL:O,range:U,requestId:I,hideFromInspector:F=!1}=x;let w=x.targets;this.filterQuery&&(w=w.filter(k=>this.filterQuery(k)));let K=!1;const L=new Set,V=new Set,H=w.map(k=>{let Q=this.getRef(),re=this.id,Z=!0;if(v(k.datasource))return K=!0,{...k,datasource:E};if(k.datasource){const oe=(0,c.F)().getInstanceSettings(k.datasource,x.scopedVars);if(!oe)throw new Error(`Unknown Datasource: ${JSON.stringify(k.datasource)}`);const G=oe.rawRef??(0,u.iU)(oe),le=oe.id;(G.uid!==Q.uid||re!==le)&&(Q=G,re=le,Z=!1)}return Q.type?.length&&L.add(Q.type),Q.uid?.length&&V.add(Q.uid),{...Z?this.applyTemplateVariables(k,x.scopedVars):k,datasource:Q,datasourceId:re,intervalMs:R,maxDataPoints:S,queryCachingTTL:O}});if(!H.length)return(0,t.of)({data:[]});const j={queries:H};if(U&&(j.range=U,j.from=U.from.valueOf().toString(),j.to=U.to.valueOf().toString()),m.v.featureToggles.queryOverLive)return(0,p.gj)().getQueryData({request:x,body:j});const A={};A["X-Plugin-Id"]=Array.from(L).join(", "),A["X-Datasource-Uid"]=Array.from(V).join(", ");let _="/api/ds/query?ds_type="+this.type;return K&&(A["X-Grafana-From-Expr"]="true",_+="&expression=true"),I&&(_+=`&requestId=${I}`),x.dashboardUID&&(A["X-Dashboard-Uid"]=x.dashboardUID),x.panelId&&(A["X-Panel-Id"]=`${x.panelId}`),x.queryGroupId&&(A["X-Query-Group-Id"]=`${x.queryGroupId}`),(0,g.i)().fetch({url:_,method:"POST",data:j,requestId:I,hideFromInspector:F,headers:A}).pipe((0,s.w)(k=>{const Q=(0,y.z1)(k,H);return Q.data?.length&&Q.data.find(re=>re.meta?.channel)?D(Q,x,this.streamOptionsProvider):(0,t.of)(Q)}),(0,l.K)(k=>(0,t.of)((0,y.z1)(k))))}getRequestHeaders(){const x={};return x["X-Plugin-Id"]=this.type,x["X-Datasource-Uid"]=this.uid,x}interpolateVariablesInQueries(x,R){return x.map(S=>this.applyTemplateVariables(S,R))}applyTemplateVariables(x,R){return x}async getResource(x,R,S){const O=this.getRequestHeaders();return(await(0,n.n)((0,g.i)().fetch({...S,method:"GET",headers:S?.headers?{...S.headers,...O}:O,params:R??S?.params,url:`/api/datasources/uid/${this.uid}/resources/${x}`}))).data}async postResource(x,R,S){const O=this.getRequestHeaders();return(await(0,n.n)((0,g.i)().fetch({...S,method:"POST",headers:S?.headers?{...S.headers,...O}:O,data:R??{...R},url:`/api/datasources/uid/${this.uid}/resources/${x}`}))).data}async callHealthCheck(){return(0,n.n)((0,g.i)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(x=>x.data).catch(x=>x.data)}async testDatasource(){return this.callHealthCheck().then(x=>x.status==="OK"?{status:"success",message:x.message}:Promise.reject({status:"error",message:x.message,error:new h(x.message,x.details)}))}}function D(M,x,R){const S=(0,p.gj)();if(!S)return(0,t.of)(M);const O=[],U=[];for(const I of M.data){const F=(0,o.H7)(I.meta?.channel);if(F){const w=I;U.push(S.getDataStream({addr:F,buffer:R(x,w),frame:(0,d.Y)(I)}))}else O.push(I)}return O.length&&U.push((0,t.of)({...M,data:O})),U.length===1?U[0]:(0,i.T)(...U)}const b=(M,x)=>{const R={maxLength:M.maxDataPoints??500,action:p.T0.Append};return M.rangeRaw?.to==="now"&&(R.maxDelta=M.range.to.valueOf()-M.range.from.valueOf()),R};C=(0,r.s)(C)},66121:(Y,T,e)=>{"use strict";e.d(T,{v:()=>n});var t=e(35645);const n=i=>{const{enabledFeatures:s}=t.v.licenseInfo;return s&&s[i]}},54408:(Y,T,e)=>{"use strict";e.d(T,{H:()=>d,KE:()=>u,PN:()=>f,o7:()=>o});var t=e(37916),n=e(48606),i=e(53843),s=e(56986),l=e(35645);function f(r,m){l.v.grafanaJavascriptAgent.enabled&&i.s.api.pushLog([r],{level:s.in.INFO,context:m}),l.v.sentry.enabled&&(0,t.uT)(r,{level:n.z.Info,contexts:m})}function u(r,m){l.v.grafanaJavascriptAgent.enabled&&i.s.api.pushLog([r],{level:s.in.WARN,context:m}),l.v.sentry.enabled&&(0,t.uT)(r,{level:n.z.Warning,contexts:m})}function o(r,m){l.v.grafanaJavascriptAgent.enabled&&i.s.api.pushLog([r],{level:s.in.DEBUG,context:m}),l.v.sentry.enabled&&(0,t.uT)(r,{level:n.z.Debug,contexts:m})}function d(r,m){l.v.grafanaJavascriptAgent.enabled&&i.s.api.pushError(r),l.v.sentry.enabled&&(0,t.Tb)(r,{contexts:m})}},19920:(Y,T,e)=>{"use strict";e.d(T,{Qf:()=>u,bP:()=>o,i3:()=>s,iS:()=>l});var t=e(59587),n=e.n(t),i=e(35645);const s=n();function l(d){const r=i.v.bootData.user.lightTheme?d.light:d.dark;return s.import(`${r}!css`)}let f;function u(d){if(f)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");f=d}function o(){if(!f)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return f}},32689:(Y,T,e)=>{"use strict";e.d(T,{S9:()=>m,z1:()=>u});var t=e(52666),n=e(59957),i=e(83881),s=e(99098),l=e(77599);const f={severity:"info",text:"Cached response"};function u(c,p){const g={data:[],state:t.Gu.Done},y="traceId"in c?c.traceId:void 0;if(y!=null&&(g.traceIds=[y]),c.data?.results){const E=c.data.results,v=p?.length?p.map(a=>a.refId):Object.keys(E),h=o(c),P=[];for(const a of v){const C=E[a];C&&(C.refId=a,P.push(C))}for(const a of P){if(a.error){const C={refId:a.refId,message:a.error,status:a.status};y!=null&&(C.traceId=y),g.error||(g.error={...C}),g.errors?g.errors.push({...C}):g.errors=[{...C}],g.state=t.Gu.Error}if(a.frames?.length){for(let C of a.frames){h&&(C=d(C));const D=(0,n.vP)(C);D.refId||(D.refId=a.refId),g.data.push(D)}continue}if(a.series?.length)for(const C of a.series)C.refId||(C.refId=a.refId),g.data.push((0,i.g0)(C));if(a.tables?.length)for(const C of a.tables)C.refId||(C.refId=a.refId),g.data.push((0,i.g0)(C))}}return c.status&&c.status!==200&&(g.state!==t.Gu.Error&&(g.state=t.Gu.Error),g.error||(g.error=(0,l.P)(c))),g}function o(c){const p=c?.headers;return!p||!p.get?!1:p.get("X-Cache")==="HIT"}function d(c){return{...c,schema:{...c.schema,fields:[...c.schema?.fields??[]],meta:{...c.schema?.meta,notices:[...c.schema?.meta?.notices??[],f],isCachedResponse:!0}}}}function r(c){const p=u(c);if(p.error?.data?.message)return{status:"error",message:p.error.data.message,details:p.error?.data?.error?{message:p.error.data.error}:void 0};if(p.error?.refId&&p.error?.message)return{status:"error",message:p.error.message};throw c}function m(c){if(!c||!c.length)return[];const p=[];let g=c.fields.find(y=>y.type===s.fS.string);if(g||(g=c.fields.find(y=>y.type!==s.fS.time)),g)for(let y=0;y<g.values.length;y++)p.push({text:""+g.values[y]});return p}},45253:(Y,T,e)=>{"use strict";e.d(T,{b:()=>o});var t=e(9892),n=e(66111),i=e(28550),s=e(68183),l=e(72648),f=e(31403),u=e(39904);const o=n.forwardRef(({title:m,onRemove:c,children:p,buttonContent:g,elevated:y,bottomSpacing:E,topSpacing:v,className:h,severity:P="error",...a},C)=>{const D=(0,l.l4)(),b=Boolean(m),M=r(D,P,b,y,E,v),x={error:"alert",warning:"alert",info:"status",success:"status"},R=a.role||x[P],S=a["aria-label"]||m;return n.createElement("div",{ref:C,className:(0,t.cx)(M.alert,h),"data-testid":s.wl.components.Alert.alertV2(P),role:R,"aria-label":S,...a},n.createElement("div",{className:M.icon},n.createElement(u.J,{size:"xl",name:d(P)})),n.createElement("div",{className:M.body},n.createElement("div",{className:M.title},m),p&&n.createElement("div",{className:M.content},p)),c&&!g&&n.createElement("div",{className:M.close},n.createElement(f.zx,{"aria-label":"Close alert",icon:"times",onClick:c,type:"button",fill:"text",variant:"secondary"})),c&&g&&n.createElement("div",{className:M.buttonWrapper},n.createElement(f.zx,{"aria-label":"Close alert",variant:"secondary",onClick:c,type:"button"},g)))});o.displayName="Alert";const d=m=>{switch(m){case"error":case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}},r=(m,c,p,g,y,E)=>{const v=m.colors[c],h=m.shape.borderRadius(),P=(0,i.Z)(v.border).setAlpha(.2).toString();return{alert:t.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${h};
      display: flex;
      flex-direction: row;
      align-items: stretch;
      background: ${v.transparent};
      box-shadow: ${g?m.shadows.z3:"none"};
      padding: ${m.spacing(1,2)};
      border: 1px solid ${P};
      margin-bottom: ${m.spacing(y??2)};
      margin-top: ${m.spacing(E??0)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${m.colors.background.primary};
        z-index: -1;
      }
    `,icon:t.css`
      padding: ${m.spacing(1,2,0,0)};
      color: ${v.text};
      display: flex;
    `,title:(0,t.css)({fontWeight:m.typography.fontWeightMedium}),body:t.css`
      padding: ${m.spacing(1,0)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:t.css`
      padding-top: ${p?m.spacing(.5):0};
      max-height: 50vh;
      overflow-y: auto;
    `,buttonWrapper:t.css`
      margin-left: ${m.spacing(1)};
      display: flex;
      align-items: center;
      align-self: center;
    `,close:t.css`
      position: relative;
      color: ${m.colors.text.secondary};
      background: none;
      display: flex;
      top: -6px;
      right: -14px;
    `}}},30532:(Y,T,e)=>{"use strict";e.d(T,{h:()=>p});var t=e(9892),n=e(82897),i=e(66111),s=e(72648),l=e(24799),f=e(4784);const u=i.memo(()=>{const y=(0,s.wW)(o);return i.createElement("div",{className:y.ellipsis},i.createElement("span",{className:y.firstDot},"."),i.createElement("span",{className:y.secondDot},"."),i.createElement("span",{className:y.thirdDot},"."))});u.displayName="EllipsisAnimated";const o=()=>({ellipsis:(0,t.css)({display:"inline"}),firstDot:(0,t.css)({animation:`${d} 2s linear infinite`}),secondDot:(0,t.css)({animation:`${r} 2s linear infinite`}),thirdDot:(0,t.css)({animation:`${m} 2s linear infinite`})}),d=t.keyframes`
  0% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,r=t.keyframes`
  0% {
    opacity: 0;
  }
  21% {
    opacity: 0.5;
  }
  22% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,m=t.keyframes`
  0% {
    opacity: 0;
  }
  43% {
    opacity: 0.5;
  }
  44% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,c=2*1e3;function p(y){const{invalid:E,loading:v,onFinishChange:h,saveErrorMessage:P="Error saving this value",error:a,children:C,disabled:D,...b}=y,[M,x]=i.useState({isLoading:!1,showSuccess:!1,showError:E}),R=(0,i.useRef)(null);i.useEffect(()=>{let F;if(M.showSuccess){const w=M.showError?0:c;F=setTimeout(()=>{x({...M,showSuccess:!1})},w)}return()=>{window.clearTimeout(F)}},[M]);const S=(0,i.useCallback)(F=>{E||(x({...M,isLoading:!0,showSuccess:!1}),h(F).then(()=>{x({isLoading:!1,showSuccess:!0,showError:!1})}).catch(()=>{x({...M,isLoading:!1,showError:!0})}))},[E,M,h]),O=(0,i.useMemo)(()=>(0,n.debounce)(S,600,{leading:!1}),[S]),U=E||M.showError||void 0,I=(0,s.wW)(g);return i.createElement(i.Fragment,null,i.createElement(l.g,{...b,loading:v||void 0,invalid:U,disabled:D,error:a||M.showError&&P,ref:R,className:I.widthFitContent},i.cloneElement(C(F=>{O(F)}))),M.isLoading&&i.createElement(f.K,{referenceElement:R.current,placement:"right",alternativePlacement:"bottom"},"Saving ",i.createElement(u,null)),M.showSuccess&&i.createElement(f.K,{suffixIcon:"check",referenceElement:R.current,placement:"right",alternativePlacement:"bottom"},"Saved!"))}p.displayName="AutoSaveField";const g=()=>({widthFitContent:(0,t.css)({width:"fit-content"})})},19985:(Y,T,e)=>{"use strict";e.d(T,{C:()=>u});var t=e(9892),n=e(66111),i=e(28550),s=e(72648),l=e(39904),f=e(61860);const u=n.memo(({icon:d,color:r,text:m,tooltip:c,className:p,...g})=>{const y=(0,s.wW)((0,n.useCallback)(v=>o(v,r),[r])),E=n.createElement("div",{className:(0,t.cx)(y.wrapper,p),...g},d&&n.createElement(l.J,{name:d,size:"sm"}),m);return c?n.createElement(f.u,{content:c,placement:"auto"},E):E});u.displayName="Badge";const o=(d,r)=>{let m=d.visualization.getColorByName(r),c="",p="",g="";return d.isDark?(p=(0,i.Z)(m).setAlpha(.15).toString(),c=(0,i.Z)(m).darken(30).toString(),g=(0,i.Z)(m).lighten(15).toString()):(p=(0,i.Z)(m).setAlpha(.15).toString(),c=(0,i.Z)(m).lighten(20).toString(),g=(0,i.Z)(m).darken(20).toString()),{wrapper:t.css`
      display: inline-flex;
      padding: 1px 4px;
      border-radius: ${d.shape.radius.default};
      background: ${p};
      border: 1px solid ${c};
      color: ${g};
      font-weight: ${d.typography.fontWeightRegular};
      gap: 2px;
      font-size: ${d.typography.bodySmall.fontSize};
      line-height: ${d.typography.bodySmall.lineHeight};
      align-items: center;
    `}}},19670:(Y,T,e)=>{"use strict";e.d(T,{xf:()=>C});var t=e(9892),n=e(66111),i=e(28550),s=e(18111),l=e(82229),f=e(69098),u=e(2703),o=e(53768),d=e(72990),r=e(68183),m=e(40538),c=e(4176),p=e(31403),g=e(72777);const y=18,E=50,v=150,h=1.5,P=1,a=10;class C extends n.PureComponent{render(){const{onClick:K,className:L,theme:V}=this.props,{title:H}=this.props.value,j=M(this.props);return K?n.createElement("button",{type:"button",style:j.wrapper,onClick:K,className:(0,t.cx)((0,p.gN)(V),L)},n.createElement("div",{style:j.title},H),this.renderBarAndValue()):n.createElement("div",{style:j.wrapper,className:L},H&&n.createElement("div",{style:j.title},H),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:K,showUnfilled:L,valueDisplayMode:V}=this.props,H=O(this.props);return n.createElement("div",{style:H.wrapper},V!==m.M8.Hidden&&n.createElement(g.W,{"data-testid":r.wl.components.Panels.Visualization.BarGauge.valueV2,value:K,style:H.value}),L&&n.createElement("div",{style:H.emptyBar}),n.createElement("div",{style:H.bar}))}renderRetroBars(){const{display:K,field:L,value:V,itemSpacing:H,alignmentFactors:j,orientation:A,lcdCellWidth:_,text:k,valueDisplayMode:Q,theme:re}=this.props,{valueHeight:Z,valueWidth:oe,maxBarHeight:G,maxBarWidth:le,wrapperWidth:fe,wrapperHeight:ae}=x(this.props),de=L.min??s.Hx,ee=L.max??s.Z3,me=D(A),q=ee-de,ne=me?G:le,se=H,he=Math.floor(ne/_),ue=Math.floor((ne-se*he)/he),Te=I(this.props),ct=F(j||V,Te,oe,Z,A,k),Ie={width:`${fe}px`,height:`${ae}px`,display:"flex"};me?(Ie.flexDirection="column-reverse",Ie.alignItems="center"):(Ie.flexDirection="row",Ie.alignItems="center",ct.justifyContent="flex-end");const Ke=[];for(let Ge=0;Ge<he;Ge++){const at=de+q/he*Ge,dt=R(at,V,K),Re={borderRadius:re.shape.radius.default};dt.isLit?Re.backgroundImage=`radial-gradient(${dt.background} 10%, ${dt.backgroundShade})`:Re.backgroundColor=dt.background,me?(Re.height=`${ue}px`,Re.width=`${le}px`,Re.marginTop=`${se}px`):(Re.width=`${ue}px`,Re.height=`${G}px`,Re.marginRight=`${se}px`),Ke.push(n.createElement("div",{key:Ge.toString(),style:Re}))}return n.createElement("div",{style:Ie},Ke,Q!==m.M8.Hidden&&n.createElement(g.W,{"data-testid":r.wl.components.Panels.Visualization.BarGauge.valueV2,value:V,style:ct}))}}C.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:m.QH.Gradient,orientation:l.wm.Horizontal,field:{min:0,max:100,thresholds:{mode:f.H.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0};function D(w){return w===l.wm.Vertical}function b(w){const{height:K,width:L,alignmentFactors:V,orientation:H,text:j}=w,A=V?V.title:w.value.title;if(!A)return{fontSize:0,width:0,height:0,placement:"above"};if(D(H)){const oe=j?.titleSize??14;return{fontSize:oe,width:L,height:oe*h,placement:"below"}}if(K>40){if(j?.titleSize)return{fontSize:j?.titleSize,width:0,height:j.titleSize*h,placement:"above"};const G=Math.max(Math.min(K*.45,E),17);return{fontSize:G/h,width:0,height:G,placement:"above"}}const Q=Math.max(K*.6,y)/h,re=(0,c.X1)(A,Q),Z=Math.min(re.width+15,L*.4);return{fontSize:j?.titleSize??Q,height:0,width:Z,placement:"left"}}function M(w){const K={display:"flex",overflow:"hidden",width:"100%"},L=b(w),V={fontSize:`${L.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return D(w.orientation)?(K.flexDirection="column-reverse",V.textAlign="center"):L.placement==="above"?K.flexDirection="column":(K.flexDirection="row",V.width=`${L.width}px`,V.textAlign="right",V.paddingRight="10px"),{wrapper:K,title:V}}function x(w){const{height:K,width:L,orientation:V,text:H,alignmentFactors:j,valueDisplayMode:A}=w,_=b(w),k=j??w.value,Q=(0,u.zc)(k);let re=0,Z=0,oe=0,G=0,le=0,fe=0;const ae=H?.valueSize??Math.max(_.fontSize,12),ee=(0,c.X1)(Q,ae).width+a*2;return D(V)?(H?.valueSize?oe=H.valueSize*P:oe=Math.min(Math.max(K*.1,y),E),G=L,A===m.M8.Hidden&&(oe=0,G=0),re=K-(_.height+oe),Z=L,le=L,fe=K-_.height):(A===m.M8.Hidden?(oe=0,G=0):(oe=K-_.height,G=Math.max(Math.min(L*.2,v),ee)),re=K-_.height,Z=L-G-_.width,_.placement==="above"?(le=L,fe=K-_.height):(le=L-_.width,fe=K)),{valueWidth:G,valueHeight:oe,maxBarWidth:Z,maxBarHeight:re,wrapperHeight:fe,wrapperWidth:le}}function R(w,K,L){if(w===null)return{background:o.R,border:o.R};const V=L?L(w).color:null;return V?K===null||isNaN(K.numeric)||w!==null&&w>K.numeric?{background:(0,i.Z)(V).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:(0,i.Z)(V).setAlpha(.95).toRgbString(),backgroundShade:(0,i.Z)(V).setAlpha(.55).toRgbString(),border:(0,i.Z)(V).setAlpha(.9).toRgbString(),isLit:!0}:{background:o.R,border:o.R}}function S(w,K,L){const V=Math.min((w-K)/(L-K),1);return isNaN(V)?0:V}function O(w){const{displayMode:K,field:L,value:V,alignmentFactors:H,orientation:j,theme:A,text:_}=w,{valueWidth:k,valueHeight:Q,maxBarHeight:re,maxBarWidth:Z}=x(w),oe=L.min??s.Hx,G=L.max??s.Z3,le=S(V.numeric,oe,G),fe=I(w),ae=V.color??o.R,ee=F(H||V,fe,k,Q,j,_),me=K==="basic",q={display:"flex",flexGrow:1},ne={borderRadius:A.shape.radius.default,position:"relative",zIndex:1},se={background:A.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:A.shape.radius.default,position:"relative"};if(D(j)){const he=Math.max(le*re,1);q.flexDirection="column",q.justifyContent="flex-end",ne.transition="height 1s",ne.height=`${he}px`,ne.width=`${Z}px`,se.bottom="-3px",se.width=`${k}px`,me?(ne.background=`${(0,i.Z)(ae).setAlpha(.35).toRgbString()}`,ne.borderTop=`2px solid ${ae}`):ne.background=U(w,re)}else{const he=Math.max(le*Z,1);q.flexDirection="row-reverse",q.justifyContent="flex-end",q.alignItems="stretch",ne.transition="width 1s",ne.height=`${re}px`,ne.width=`${he}px`,se.left="-3px",se.height=`${Q}px`,me?(ne.background=`${(0,i.Z)(ae).setAlpha(.35).toRgbString()}`,ne.borderRight=`2px solid ${ae}`):ne.background=U(w,Z)}return{wrapper:q,bar:ne,value:ee,emptyBar:se}}function U(w,K){const{field:L,value:V,orientation:H,theme:j}=w,A=D(H)?"0deg":"90deg",_=L.min,k=L.max;let Q="",re=0,Z=(0,d.QY)(L.color?.mode);if(Z.id===o.S.Thresholds){const oe=L.thresholds;for(let G=0;G<oe.steps.length;G++){const le=oe.steps[G],fe=w.theme.visualization.getColorByName(le.color),ae=oe.mode===f.H.Percentage?le.value/100:S(le.value,_,k),de=ae*K,ee=Math.round(de-(de-re)/2),me=oe.mode===f.H.Percentage?_+(k-_)*ae:le.value;if(Q==="")Q=`linear-gradient(${A}, ${fe}, ${fe}`;else{if(V.numeric<me)break;re=de,Q+=` ${ee}px, ${fe}`}}return Q+")"}if(Z.isContinuous&&Z.getColors){const oe=Z.getColors(j);for(let G=0;G<oe.length;G++){const le=oe[G];if(Q==="")Q=`linear-gradient(${A}, ${le} 0px`;else{const ae=G/(oe.length-1)*K;Q+=`, ${le} ${ae}px`}}return Q+")"}return V.color??o.R}function I(w){if(w.valueDisplayMode==="text")return w.theme.colors.text.primary;const{value:K}=w;return K.color?K.color:o.R}function F(w,K,L,V,H,j){const A={color:K,height:`${V}px`,width:`${L}px`,display:"flex",alignItems:"center",lineHeight:P};let _=L;const k=(0,u.zc)(w);return D(H)?(A.fontSize=j?.valueSize??(0,c.MX)(k,_,V,P),A.justifyContent="center"):(A.fontSize=j?.valueSize??(0,c.MX)(k,_-a*2,V,P),A.justifyContent="flex-end",A.paddingLeft=`${a}px`,A.paddingRight=`${a}px`,_-=a),A}},57426:(Y,T,e)=>{"use strict";e.d(T,{w6:()=>O,pc:()=>M,IG:()=>x,ap:()=>R,jG:()=>S});var t=e(9892),n=e(66111),i=e(31403),s=e(72777),l=e(28550),f=e(82229),u=e(99098),o=e(2703),d=e(40538),r=e(16514),m=e(4176),c=e(67307);const p=1.2,g=30,y=500;class E{constructor(I){this.props=I;const{width:F,height:w,value:K,text:L}=I;this.valueColor=K.color??"gray",this.panelPadding=w>100?12:8,this.textValues=b(I),this.justifyCenter=D(I.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=F-this.panelPadding*2,this.maxTextHeight=w-this.panelPadding*2,L&&(L.titleSize&&(this.titleFontSize=L.titleSize,this.titleToAlignTo=void 0),L.valueSize&&(this.valueFontSize=L.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const I={fontSize:`${this.titleFontSize}px`,lineHeight:p};return this.props.parentOrientation===f.wm.Horizontal&&this.justifyCenter&&(I.paddingRight="0.75ch"),(this.props.colorMode===M.Background||this.props.colorMode===M.BackgroundSolid)&&(I.color=(0,r.bM)(this.valueColor,this.props.theme.isDark)),I}getValueStyles(){const I={fontSize:this.valueFontSize,fontWeight:y,lineHeight:p,position:"relative",zIndex:1};switch(this.justifyCenter&&(I.textAlign="center"),this.props.colorMode){case M.Value:I.color=this.valueColor;break;case M.Background:case M.BackgroundSolid:I.color=(0,r.bM)(this.valueColor,this.props.theme.isDark);break;case M.None:I.color=this.props.theme.colors.text.primary;break}return I}getValueAndTitleContainerStyles(){const I={display:"flex"};return this.justifyCenter&&(I.alignItems="center",I.justifyContent="center",I.flexGrow=1),I}getPanelStyles(){const{width:I,height:F,theme:w,colorMode:K}=this.props,L={width:`${I}px`,height:`${F}px`,padding:`${this.panelPadding}px`,borderRadius:w.shape.borderRadius(),position:"relative",display:"flex"},V=w.isDark?1:-.7;switch(K){case M.Background:const H=(0,l.Z)(this.valueColor).darken(15*V).spin(8).toRgbString(),j=(0,l.Z)(this.valueColor).darken(5*V).spin(-8).toRgbString();L.background=`linear-gradient(120deg, ${H}, ${j})`;break;case M.BackgroundSolid:L.background=(0,l.Z)(this.valueColor).toString();break;case M.Value:L.background="transparent";break}return this.justifyCenter&&(L.alignItems="center",L.flexDirection="row"),L}renderChart(){const{sparkline:I,colorMode:F}=this.props;if(!I||I.y?.type!==u.fS.number)return null;let w,K;switch(F){case M.Background:case M.BackgroundSolid:w="rgba(255,255,255,0.4)",K=(0,l.Z)(this.valueColor).brighten(40).toRgbString();break;case M.None:case M.Value:default:K=this.valueColor,w=(0,l.Z)(this.valueColor).setAlpha(.2).toRgbString();break}const L={custom:{drawStyle:d.l8.Line,lineWidth:1,fillColor:w,lineColor:K}};return n.createElement("div",{style:this.getChartStyles()},n.createElement(c.b,{height:this.chartHeight,width:this.chartWidth,sparkline:I,config:L,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class v extends E{constructor(I){super(I);const F=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,m.MX)(this.valueToAlignTo,this.maxTextWidth*F,this.maxTextHeight,p,void 0,y)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,m.MX)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,p,g),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const I=super.getValueAndTitleContainerStyles();return I.flexDirection="row",I.alignItems="center",I.flexGrow=1,this.justifyCenter||(I.justifyContent="space-between"),I}renderChart(){return null}getPanelStyles(){const I=super.getPanelStyles();return I.alignItems="center",I}}class h extends E{constructor(I){super(I);const{width:F,height:w}=I,K=.5,L=.6,V=1-L,H=.4;this.chartWidth=F,this.chartHeight=w*K,this.titleToAlignTo?.length&&(this.titleFontSize=(0,m.MX)(this.titleToAlignTo,this.maxTextWidth*L,this.maxTextHeight*H,p,g)),this.valueToAlignTo.length&&(this.valueFontSize=(0,m.MX)(this.valueToAlignTo,this.maxTextWidth*V,this.maxTextHeight*K,p,void 0,y))}getValueAndTitleContainerStyles(){const I=super.getValueAndTitleContainerStyles();return I.flexDirection="row",I.flexGrow=1,this.justifyCenter||(I.justifyContent="space-between"),I}getPanelStyles(){const I=super.getPanelStyles();return I.flexDirection="row",I.justifyContent="space-between",I}}class P extends E{constructor(I){super(I);const{width:F,height:w}=I,K=.15,L=.25;let V=0;this.chartHeight=w*L,this.chartWidth=F,this.titleToAlignTo?.length&&(this.titleFontSize=(0,m.MX)(this.titleToAlignTo,this.maxTextWidth,w*K,p,g),V=this.titleFontSize*p),this.valueToAlignTo.length&&(this.valueFontSize=(0,m.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-V,p,void 0,y)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=w-this.titleFontSize*p-this.valueFontSize*p}getValueAndTitleContainerStyles(){const I=super.getValueAndTitleContainerStyles();return I.flexDirection="column",I.justifyContent="center",I}getPanelStyles(){const I=super.getPanelStyles();return I.flexDirection="column",I}}class a extends E{constructor(I){super(I);const{height:F}=I,w=.15;let K=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,m.MX)(this.titleToAlignTo,this.maxTextWidth,F*w,p,g),K=this.titleFontSize*p),this.valueToAlignTo.length&&(this.valueFontSize=(0,m.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-K,p,void 0,y)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const I=super.getValueAndTitleContainerStyles();return I.flexDirection="column",I.flexGrow=1,I}renderChart(){return null}getPanelStyles(){const I=super.getPanelStyles();return I.alignItems="center",I}}function C(U){const{width:I,height:F,sparkline:w}=U;return I/F>2.5?F>50&&w&&w.y.values.length>1?new h(U):new v(U):F>100&&w&&w.y.values.length>1?new P(U):new a(U)}function D(U,I){return U===R.Center?!0:(I??"").length===0}function b(U){const{value:I,alignmentFactors:F,count:w}=U;let{textMode:K}=U;const L=F?F.title:I.title,V=(0,o.zc)(F||I);switch(K===S.Auto&&(w??1)===1&&(K=S.Value),K){case S.Name:return{...I,title:void 0,prefix:void 0,suffix:void 0,text:I.title||"",titleToAlignTo:void 0,valueToAlignTo:L??"",tooltip:(0,o.zc)(I)};case S.Value:return{...I,title:void 0,titleToAlignTo:void 0,valueToAlignTo:V,tooltip:I.title};case S.None:return{numeric:I.numeric,color:I.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${I.title}
Value: ${(0,o.zc)(I)}`};case S.ValueAndName:default:return{...I,titleToAlignTo:L,valueToAlignTo:V}}}var M=(U=>(U.Background="background",U.BackgroundSolid="background_solid",U.None="none",U.Value="value",U))(M||{}),x=(U=>(U.None="none",U.Line="line",U.Area="area",U))(x||{}),R=(U=>(U.Auto="auto",U.Center="center",U))(R||{}),S=(U=>(U.Auto="auto",U.Value="value",U.ValueAndName="value_and_name",U.Name="name",U.None="none",U))(S||{});class O extends n.PureComponent{render(){const{onClick:I,className:F,hasLinks:w,theme:K}=this.props,L=C(this.props),V=L.getPanelStyles(),H=L.getValueAndTitleContainerStyles(),j=L.getValueStyles(),A=L.getTitleStyles(),_=L.textValues,k=w?void 0:_.tooltip;return I?n.createElement("button",{type:"button",className:(0,t.cx)((0,i.gN)(K),F),style:V,onClick:I,title:k},n.createElement("div",{style:H},_.title&&n.createElement("div",{style:A},_.title),n.createElement(s.W,{value:_,style:j})),L.renderChart()):n.createElement("div",{className:F,style:V,title:k},n.createElement("div",{style:H},_.title&&n.createElement("div",{style:A},_.title),n.createElement(s.W,{value:_,style:j})),L.renderChart())}}O.defaultProps={justifyMode:"auto"}},85951:(Y,T,e)=>{"use strict";e.d(T,{_:()=>u});var t=e(9892),n=e(66111),i=e(55271),s=e.n(i),l=e(72648),f=e(69636);const u=(0,n.forwardRef)(({name:d,value:r,hidden:m,facets:c,onClick:p,className:g,loading:y,searchTerm:E,active:v,style:h,title:P,highlightParts:a,...C},D)=>{const b=(0,l.l4)(),M=o(b),x=E?[E]:[],R=(0,n.useCallback)(O=>{p&&!m&&p(d,r,O)},[p,d,m,r]);let S=r||d;return c&&(S=`${S} (${c})`),n.createElement("button",{key:S,ref:D,onClick:R,style:h,title:P||S,type:"button",role:"option","aria-selected":!!v,className:(0,t.cx)(M.base,v&&M.active,y&&M.loading,m&&M.hidden,g,p&&!m&&M.hover),...C},a!==void 0?n.createElement(f.H,{text:S,highlightClassName:M.matchHighLight,highlightParts:a}):n.createElement(s(),{textToHighlight:S,searchWords:x,autoEscape:!0,highlightClassName:M.matchHighLight}))});u.displayName="Label";const o=d=>({base:t.css`
    display: inline-block;
    cursor: pointer;
    font-size: ${d.typography.size.sm};
    line-height: ${d.typography.bodySmall.lineHeight};
    background-color: ${d.colors.background.secondary};
    color: ${d.colors.text.primary};
    white-space: nowrap;
    text-shadow: none;
    padding: ${d.spacing(.5)};
    border-radius: ${d.shape.borderRadius()};
    border: none;
    margin-right: ${d.spacing(1)};
    margin-bottom: ${d.spacing(.5)};
  `,loading:t.css`
    font-weight: ${d.typography.fontWeightMedium};
    background-color: ${d.colors.primary.shade};
    color: ${d.colors.text.primary};
    animation: pulse 3s ease-out 0s infinite normal forwards;
    @keyframes pulse {
      0% {
        color: ${d.colors.text.primary};
      }
      50% {
        color: ${d.colors.text.secondary};
      }
      100% {
        color: ${d.colors.text.disabled};
      }
    }
  `,active:t.css`
    font-weight: ${d.typography.fontWeightMedium};
    background-color: ${d.colors.primary.main};
    color: ${d.colors.primary.contrastText};
  `,matchHighLight:t.css`
    background: inherit;
    color: ${d.components.textHighlight.text};
    background-color: ${d.components.textHighlight.background};
  `,hidden:t.css`
    opacity: 0.6;
    cursor: default;
    border: 1px solid transparent;
  `,hover:t.css`
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `})},31403:(Y,T,e)=>{"use strict";e.d(T,{Qj:()=>m,_7:()=>v,c9:()=>y,fW:()=>c,gN:()=>E,zx:()=>r});var t=e(9892),n=e(66111),i=e(72648),s=e(85419),l=e(73267),f=e(39904),u=e(61860);const o=null,d=null,r=n.forwardRef(({variant:h="primary",size:P="md",fill:a="solid",icon:C,fullWidth:D,children:b,className:M,type:x="button",tooltip:R,tooltipPlacement:S,...O},U)=>{const I=(0,i.l4)(),F=c({theme:I,size:P,variant:h,fill:a,fullWidth:D,iconOnly:!b}),w=n.createElement("button",{className:(0,t.cx)(F.button,M),type:x,...O,ref:R?void 0:U},C&&n.createElement(f.J,{name:C,size:P,className:F.icon}),b&&n.createElement("span",{className:F.content},b));return R?n.createElement(u.u,{ref:U,content:R,placement:S},w):w});r.displayName="Button";const m=n.forwardRef(({variant:h="primary",size:P="md",fill:a="solid",icon:C,fullWidth:D,children:b,className:M,onBlur:x,onFocus:R,disabled:S,tooltip:O,tooltipPlacement:U,...I},F)=>{const w=(0,i.l4)(),K=c({theme:w,fullWidth:D,size:P,variant:h,fill:a,iconOnly:!b}),L=(0,t.cx)(K.button,{[(0,t.css)(K.disabled,{pointerEvents:"none"})]:S},M),V=n.createElement("a",{className:L,...I,tabIndex:S?-1:0,ref:O?void 0:F},C&&n.createElement(f.J,{name:C,size:P,className:K.icon}),b&&n.createElement("span",{className:K.content},b));return O?n.createElement(u.u,{ref:F,content:O,placement:U},V):V});m.displayName="LinkButton";const c=h=>{const{theme:P,variant:a,fill:C="solid",size:D,iconOnly:b,fullWidth:M}=h,{height:x,padding:R,fontSize:S}=(0,l.iL)(D,P),O=y(P,a,C),U=g(P,a,C),I=(0,s.getFocusStyles)(P),F=P.spacing.gridSize*R-1;return{button:(0,t.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:S,fontWeight:P.typography.fontWeightMedium,fontFamily:P.typography.fontFamily,padding:`0 ${F}px`,height:P.spacing(x),lineHeight:`${P.spacing.gridSize*x-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:P.shape.borderRadius(1),"&:focus":I,"&:focus-visible":I,"&:focus:not(:focus-visible)":(0,s.getMouseFocusStyles)(P),...M&&{flexGrow:1,justifyContent:"center"},...O,":disabled":U,"&[disabled]":U}),disabled:(0,t.css)(U),img:t.css`
      width: 16px;
      height: 16px;
      margin: ${P.spacing(0,1,0,.5)};
    `,icon:b?(0,t.css)({marginRight:P.spacing(-R/2),marginLeft:P.spacing(-R/2)}):(0,t.css)({marginRight:P.spacing(R/2)}),content:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      white-space: nowrap;
      height: 100%;
    `}};function p(h,P,a){let C=P.border,D="transparent",b="transparent";return P.name==="secondary"&&(D=P.border,b=h.colors.emphasize(P.border,.25),C=h.colors.border.strong),a==="outline"?{background:"transparent",color:P.text,border:`1px solid ${C}`,transition:h.transitions.create(["background-color","border-color","color"],{duration:h.transitions.duration.short}),"&:hover":{background:P.transparent,borderColor:h.colors.emphasize(C,.25),color:P.text}}:a==="text"?{background:"transparent",color:P.text,border:"1px solid transparent",transition:h.transitions.create(["background-color","color"],{duration:h.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:P.transparent,textDecoration:"none"}}:{background:P.main,color:P.contrastText,border:`1px solid ${D}`,transition:h.transitions.create(["background-color","box-shadow","border-color","color"],{duration:h.transitions.duration.short}),"&:hover":{background:P.shade,color:P.contrastText,boxShadow:h.shadows.z1,borderColor:b}}}function g(h,P,a){const C={cursor:"not-allowed",boxShadow:"none",color:h.colors.text.disabled,transition:"none"};return a==="text"?{...C,background:"transparent",border:"1px solid transparent"}:a==="outline"?{...C,background:"transparent",border:`1px solid ${h.colors.border.weak}`}:{...C,background:h.colors.action.disabledBackground,border:"1px solid transparent"}}function y(h,P,a){switch(P){case"secondary":return p(h,h.colors.secondary,a);case"destructive":return p(h,h.colors.error,a);case"success":return p(h,h.colors.success,a);case"primary":default:return p(h,h.colors.primary,a)}}const E=h=>t.css`
    background: transparent;
    color: ${h.colors.text.primary};
    border: none;
    padding: 0;
  `,v=h=>t.css`
    background: transparent;
    border: none;
    padding: 0;
    font-family: inherit;
    color: inherit;
    height: 100%;
    &:hover {
      background: transparent;
      color: inherit;
    }
  `},26202:(Y,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(9892),n=e(66111),i=e(72648);const s=(0,n.forwardRef)(({className:f,children:u,...o},d)=>{const r=(0,i.wW)(l);return n.createElement("div",{ref:d,className:(0,t.cx)("button-group",r.wrapper,f),...o},u)});s.displayName="ButtonGroup";const l=f=>({wrapper:t.css`
    display: flex;

    > .button-group:not(:first-child) > button,
    > button:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    > .button-group:not(:last-child) > button,
    > button:not(:last-child) {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      border-right-width: 0;
    }
  `})},97389:(Y,T,e)=>{"use strict";e.d(T,{f:()=>s});var t=e(9892),n=e(66111),i=e(7804);const s=({className:f,children:u})=>{const o=l();return n.createElement("div",{className:(0,t.cx)(o,f)},u)},l=(0,i.B)(()=>t.css`
    display: flex;

    button {
      flex-grow: 1;
      justify-content: center;
    }

    > * {
      flex-grow: 1;
    }

    label {
      flex-grow: 1;
      text-align: center;
    }
  `)},19974:(Y,T,e)=>{"use strict";e.d(T,{O:()=>r});var t=e(9892),n=e(81494),i=e(66111),s=e(7804),l=e(72648),f=e(31403),u=e(94229),o=e(39904);const d=(0,s.B)(m=>({popup:t.css`
      label: popup;
      z-index: ${m.zIndex.dropdown};
    `,icons:{right:t.css`
        margin: 1px 0 0 4px;
      `,left:t.css`
        margin: -1px 4px 0 0;
      `}})),r=m=>{const{onChange:c,className:p,loadData:g,icon:y,buttonProps:E,hideDownIcon:v,variant:h,disabled:P,...a}=m,C=(0,l.l4)(),D=d(C);let b=m.children;return v||(b=[m.children,i.createElement(o.J,{key:"down-icon",name:"angle-down",className:D.icons.right})]),i.createElement(n.Z,{onChange:(0,u.K)(c),loadData:(0,u.p)(g),dropdownClassName:D.popup,...a,expandIcon:null},i.createElement(f.zx,{icon:y,disabled:P,variant:h,...E??{}},b))};r.displayName="ButtonCascader"},97097:(Y,T,e)=>{"use strict";e.d(T,{_:()=>s});var t=e(9892),n=e(66111),i=e(72648);const s=({message:f,callToActionElement:u,footer:o,className:d})=>{const r=(0,i.wW)(l);return n.createElement("div",{className:(0,t.cx)([r.wrapper,d])},f&&n.createElement("div",{className:r.message},f),u,o&&n.createElement("div",{className:r.footer},o))},l=f=>({wrapper:t.css`
    label: call-to-action-card;
    padding: ${f.spacing(3)};
    background: ${f.colors.background.secondary};
    border-radius: ${f.shape.radius.default};
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
  `,message:t.css`
    margin-bottom: ${f.spacing(3)};
    font-style: italic;
  `,footer:t.css`
    margin-top: ${f.spacing(3)}};
  `})},72948:(Y,T,e)=>{"use strict";e.d(T,{L:()=>D,Z:()=>u});var t=e(9892),n=e(66111),i=e(72648),s=e(85419),l=e(35633);const f=n.createContext(null),u=({disabled:b,href:M,onClick:x,children:R,isSelected:S,className:O,...U})=>{const I=(0,n.useMemo)(()=>n.Children.toArray(R).some(V=>n.isValidElement(V)&&V.type.displayName===o.displayName),[R]),F=b||!x&&!M,w=x&&!b?x:void 0,K=(0,i.l4)(),L=(0,l.$)(K,b,F,S);return n.createElement(l._,{disableEvents:b,disableHover:F,isSelected:S,className:(0,t.cx)(L.container,O),...U},n.createElement(f.Provider,{value:{href:M,onClick:w,disabled:b,isSelected:S}},!I&&n.createElement(o,null),R))},o=({children:b,className:M,"aria-label":x})=>{const R=(0,n.useContext)(f),S=(0,i.wW)(d),{href:O,onClick:U,isSelected:I}=R??{href:void 0,onClick:void 0,isSelected:void 0};return n.createElement("h2",{className:(0,t.cx)(S.heading,M)},O?n.createElement("a",{href:O,className:S.linkHack,"aria-label":x,onClick:U},b):U?n.createElement("button",{onClick:U,className:S.linkHack,"aria-label":x,type:"button"},b):n.createElement(n.Fragment,null,b),I!==void 0&&n.createElement("input",{"aria-label":"option",type:"radio",readOnly:!0,checked:I}))};o.displayName="Heading";const d=b=>({heading:(0,t.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:b.typography.size.md,letterSpacing:"inherit",lineHeight:b.typography.body.lineHeight,color:b.colors.text.primary,fontWeight:b.typography.fontWeightMedium}),linkHack:(0,t.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:b.shape.borderRadius(1)},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,s.getFocusStyles)(b),zIndex:1}}})}),r=({children:b,className:M})=>{const x=(0,i.wW)(m);return n.createElement("div",{className:(0,t.cx)(x.tagList,M)},b)};r.displayName="Tags";const m=b=>({tagList:(0,t.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),c=({children:b,className:M})=>{const x=(0,i.wW)(p);return n.createElement("p",{className:(0,t.cx)(x.description,M)},b)};c.displayName="Description";const p=b=>({description:(0,t.css)({width:"100%",gridArea:"Description",margin:b.spacing(1,0,0),color:b.colors.text.secondary,lineHeight:b.typography.body.lineHeight})}),g=({children:b,align:M="start",className:x})=>{const R=(0,i.wW)(y);return n.createElement("div",{className:(0,t.cx)(R.media,x,t.css`
          align-self: ${M};
        `)},b)};g.displayName="Figure";const y=b=>({media:(0,t.css)({position:"relative",gridArea:"Figure",marginRight:b.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),E=(0,n.memo)(({children:b,className:M,separator:x="|"})=>{const R=(0,i.wW)(v);let S=b;const O=n.Children.toArray(b).filter(Boolean);return O.length?(S=O.map((U,I)=>n.createElement("div",{key:`element_${I}`,className:R.metadataItem},U)),O.length>1&&x&&(S=O.reduce((U,I,F)=>[U,n.createElement("span",{key:`separator_${F}`,className:R.separator},x),I])),n.createElement("div",{className:(0,t.cx)(R.metadata,M)},S)):null});E.displayName="Meta";const v=b=>({metadata:(0,t.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:b.typography.size.sm,color:b.colors.text.secondary,margin:b.spacing(.5,0,0),lineHeight:b.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,t.css)({zIndex:0}),separator:(0,t.css)({margin:`0 ${b.spacing(1)}`})}),h=({children:b,disabled:M,variant:x,className:R})=>{const S=(0,i.wW)(P),U=(0,n.useContext)(f)?.disabled||M,I=x==="primary"?S.actions:S.secondaryActions;return n.createElement("div",{className:(0,t.cx)(I,R)},n.Children.map(b,F=>n.isValidElement(F)?(0,n.cloneElement)(F,{disabled:U,...F.props}):null))},P=b=>({actions:(0,t.css)({gridArea:"Actions",marginTop:b.spacing(2),"& > *":{marginRight:b.spacing(1)}}),secondaryActions:(0,t.css)({display:"flex",gridArea:"Secondary",alignSelf:"center",color:b.colors.text.secondary,marginTtop:b.spacing(2),"& > *":{marginRight:`${b.spacing(1)} !important`}})}),a=({children:b,disabled:M,className:x})=>n.createElement(h,{variant:"primary",disabled:M,className:x},b);a.displayName="Actions";const C=({children:b,disabled:M,className:x})=>n.createElement(h,{variant:"secondary",disabled:M,className:x},b);C.displayName="SecondaryActions";const D=b=>({inner:t.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      flex-wrap: wrap;
    `,...d(b),...v(b),...p(b),...y(b),...P(b),...m(b)});u.Heading=o,u.Tags=r,u.Figure=g,u.Meta=E,u.Actions=a,u.SecondaryActions=C,u.Description=c},35633:(Y,T,e)=>{"use strict";e.d(T,{$:()=>d,_:()=>o});var t=e(9892),n=e(66111),i=e(72648),s=e(7804),l=e(85419);const f=({children:r,href:m})=>{const{inner:c}=(0,i.wW)(u);return m?n.createElement("a",{className:c,href:m},r):n.createElement(n.Fragment,null,r)},u=r=>({inner:(0,t.css)({display:"flex",width:"100%",padding:r.spacing(2)})}),o=({children:r,disableEvents:m,disableHover:c,isSelected:p,className:g,href:y,...E})=>{const v=(0,i.l4)(),{oldContainer:h}=d(v,m,c,p);return n.createElement("div",{...E,className:(0,t.cx)(h,g)},n.createElement(f,{href:y},r))},d=(0,s.B)((r,m=!1,c=!1,p)=>{const g=p!==void 0;return{container:(0,t.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:r.spacing(2),background:r.colors.background.secondary,borderRadius:r.shape.borderRadius(),marginBottom:"8px",pointerEvents:m?"none":"auto",transition:r.transitions.create(["background-color","box-shadow","border-color","color"],{duration:r.transitions.duration.short}),...!c&&{"&:hover":{background:r.colors.emphasize(r.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":l.getFocusStyles(r)},...g&&{cursor:"pointer"},...p&&{outline:`solid 2px ${r.colors.primary.border}`}}),oldContainer:(0,t.css)({display:"flex",width:"100%",background:r.colors.background.secondary,borderRadius:r.shape.borderRadius(),position:"relative",pointerEvents:m?"none":"auto",marginBottom:r.spacing(1),transition:r.transitions.create(["background-color","box-shadow","border-color","color"],{duration:r.transitions.duration.short}),...!c&&{"&:hover":{background:r.colors.emphasize(r.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":l.getFocusStyles(r)}})}})},95093:(Y,T,e)=>{"use strict";e.d(T,{v:()=>m});var t=e(9892),n=e(58635),i=e(81494),s=e(66111),l=e(39904),f=e(46967),u=e(8581),o=e(94229);const d=(0,t.css)(`
&:focus{
  outline: none;
}
`),r="/";class m extends s.PureComponent{constructor(p){super(p),this.flattenOptions=(v,h=[])=>{let P=[];for(const a of v){const C=[...h];C.push(a),a.items?P=[...P,...this.flattenOptions(a.items,C)]:P.push({singleLabel:C[C.length-1].label,label:C.map(D=>D.label).join(this.props.separator||` ${r} `),value:C.map(D=>D.value)})}return P},this.getSearchableOptions=(0,n.Z)(v=>this.flattenOptions(v)),this.onChange=(v,h)=>{const P=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?h.map(a=>a.label).join(this.props.separator||r):h[h.length-1].label;this.setState({rcValue:v,focusCascade:!0,activeLabel:P}),this.props.onSelect(h[h.length-1].value)},this.onSelect=v=>{const h=v.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?v.label:v.singleLabel||"",rcValue:h,isSearching:!1}),this.props.onSelect(h[h.length-1])},this.onCreateOption=v=>{this.setState({activeLabel:v,rcValue:[],isSearching:!1}),this.props.onSelect(v)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=v=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(v.key)||this.setState({focusCascade:!1,isSearching:!0})},this.onSelectInputChange=v=>{v===""&&this.setState({isSearching:!1})};const g=this.getSearchableOptions(p.options),{rcValue:y,activeLabel:E}=this.setInitialValue(g,p.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:y,activeLabel:E}}setInitialValue(p,g){if(!g)return{rcValue:[],activeLabel:""};for(const y of p){const E=y.value||[];if(E.indexOf(g)===E.length-1)return{rcValue:E,activeLabel:this.props.displayAllSelectedLevels?y.label:y.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:g}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:p,formatCreateLabel:g,placeholder:y,width:E,changeOnSelect:v,options:h}=this.props,{focusCascade:P,isSearching:a,rcValue:C,activeLabel:D}=this.state,b=this.getSearchableOptions(h);return s.createElement("div",null,a?s.createElement(u.Ph,{allowCustomValue:p,placeholder:y,autoFocus:!P,onChange:this.onSelect,onBlur:this.onBlur,options:b,onCreateOption:this.onCreateOption,formatCreateLabel:g,width:E,onInputChange:this.onSelectInputChange}):s.createElement(i.Z,{onChange:(0,o.K)(this.onChange),options:h,changeOnSelect:v,value:C.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen},s.createElement("div",{className:d},s.createElement(f.I,{autoFocus:this.props.autoFocus,width:E,placeholder:y,onBlur:this.onBlurCascade,value:D,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:P?s.createElement(l.J,{name:"angle-up"}):s.createElement(l.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})}))))}}m.defaultProps={changeOnSelect:!0}},94229:(Y,T,e)=>{"use strict";e.d(T,{K:()=>t,p:()=>n});const t=l=>(f,u)=>{l&&l(f.map(o=>String(o)),i(u))},n=l=>f=>{l&&l(i(f))},i=l=>l.map(s),s=l=>({value:l.value??"",label:l.label})},94437:(Y,T,e)=>{"use strict";e.d(T,{L:()=>n});var t=e(66111);class n extends t.PureComponent{constructor(){super(...arguments),this.myRef=(0,t.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=s=>{const l=this.myRef.current;(!l||!l.contains(s.target))&&this.props.onClick()}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return t.createElement("div",{ref:this.myRef},this.props.children)}}n.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:null,useCapture:!1}},94599:(Y,T,e)=>{"use strict";e.d(T,{m:()=>d});var t=e(9892),n=e(66111),i=e(37951),s=e(72648),l=e(31403),f=e(39904),u=e(4784);const o=2*1e3;function d({onClipboardCopy:c,onClipboardError:p,children:g,getText:y,icon:E,variant:v,...h}){const P=(0,s.wW)(m),[a,C]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let M;return a&&(M=setTimeout(()=>{C(!1)},o)),()=>{window.clearTimeout(M)}},[a]);const D=(0,n.useRef)(null),b=(0,n.useCallback)(async()=>{const M=y();try{await r(M,D),C(!0),c?.(M)}catch(x){p?.(M,x)}},[y,c,p]);return n.createElement(n.Fragment,null,a&&n.createElement(u.K,{placement:"top",referenceElement:D.current},n.createElement(i.c,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),n.createElement(l.zx,{onClick:b,icon:E,variant:a?"success":v,"aria-label":a?"Copied":void 0,...h,className:(0,t.cx)(P.button,a&&P.successButton,h.className),ref:D},g,a&&n.createElement("div",{className:P.successOverlay},n.createElement(f.J,{name:"check"}))))}const r=async(c,p)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(c);{const g=document.createElement("textarea");p.current?.appendChild(g),g.value=c,g.focus(),g.select(),document.execCommand("copy"),g.remove()}},m=c=>({button:(0,t.css)({position:"relative"}),successButton:(0,t.css)({"> *":(0,t.css)({visibility:"hidden"})}),successOverlay:(0,t.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},20941:(Y,T,e)=>{"use strict";e.d(T,{s:()=>d});var t=e(9892),n=e(82897),i=e.n(n),s=e(66111),l=e(67487),f=e(39904),u=e(72648),o=e(85419);const d=({label:m,isOpen:c,onToggle:p,className:g,contentClassName:y,children:E,labelId:v,loading:h=!1,headerDataTestId:P,contentDataTestId:a})=>{const[C,D]=(0,s.useState)(c),b=(0,u.wW)(r),M=S=>{S.target instanceof HTMLElement&&S.target.tagName==="A"||(S.preventDefault(),S.stopPropagation(),p?.(!C),D(!C))},{current:x}=(0,s.useRef)((0,n.uniqueId)()),R=v??`collapse-label-${x}`;return s.createElement(s.Fragment,null,s.createElement("div",{onClick:M,className:(0,t.cx)(b.header,g)},s.createElement("button",{type:"button",id:`collapse-button-${x}`,className:b.button,onClick:M,"aria-expanded":C&&!h,"aria-controls":`collapse-content-${x}`,"aria-labelledby":R},h?s.createElement(l.$,{className:b.spinner}):s.createElement(f.J,{name:C?"angle-up":"angle-down",className:b.icon})),s.createElement("div",{className:b.label,id:`collapse-label-${x}`,"data-testid":P},m)),C&&s.createElement("div",{id:`collapse-content-${x}`,className:(0,t.cx)(b.content,y),"data-testid":a},E))},r=m=>({header:(0,t.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:m.typography.size.lg,padding:`${m.spacing(.5)} 0`,"&:focus-within":(0,o.getFocusStyles)(m)}),button:(0,t.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,t.css)({color:m.colors.text.secondary}),content:(0,t.css)({padding:`${m.spacing(2)} 0`}),spinner:(0,t.css)({display:"flex",alignItems:"center",width:m.spacing(2)}),label:(0,t.css)({display:"flex"})})},2352:(Y,T,e)=>{"use strict";e.d(T,{U:()=>o,y:()=>u});var t=e(9892),n=e(66111),i=e(72648),s=e(31403),l=e(39904);const f=d=>({collapse:t.css`
    label: collapse;
    margin-bottom: ${d.spacing(1)};
    background-color: ${d.colors.background.primary};
    border: 1px solid ${d.colors.border.weak};
    position: relative;
    border-radius: ${d.shape.radius.default};
    width: 100%;
    display: flex;
    flex-direction: column;
    flex: 1 1 0;
  `,collapseBody:t.css`
    label: collapse__body;
    padding: ${d.spacing(d.components.panel.padding)};
    padding-top: 0;
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  `,bodyContentWrapper:t.css`
    label: bodyContentWrapper;
    flex: 1;
    overflow: hidden;
  `,loader:t.css`
    label: collapse__loader;
    height: 2px;
    position: relative;
    overflow: hidden;
    background: none;
    margin: ${d.spacing(.5)};
  `,loaderActive:t.css`
    label: collapse__loader_active;
    &:after {
      content: ' ';
      display: block;
      width: 25%;
      top: 0;
      top: -50%;
      height: 250%;
      position: absolute;
      animation: loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms;
      animation-iteration-count: 100;
      left: -25%;
      background: ${d.colors.primary.main};
    }
    @keyframes loader {
      from {
        left: -25%;
        opacity: 0.1;
      }
      to {
        left: 100%;
        opacity: 1;
      }
    }
  `,header:t.css`
    label: collapse__header;
    padding: ${d.spacing(1,2,1,2)};
    display: flex;
    transition: all 0.1s linear;
  `,headerCollapsed:t.css`
    label: collapse__header--collapsed;
    padding: ${d.spacing(1,2,1,2)};
  `,headerLabel:t.css`
    label: collapse__header-label;
    font-weight: ${d.typography.fontWeightMedium};
    margin-right: ${d.spacing(1)};
    font-size: ${d.typography.size.md};
  `,icon:t.css`
    label: collapse__icon;
    margin: ${d.spacing(.25,1,0,-1)};
  `}),u=({isOpen:d,onToggle:r,...m})=>{const[c,p]=(0,n.useState)(d);return n.createElement(o,{isOpen:c,collapsible:!0,...m,onToggle:()=>{p(!c),r&&r(!c)}})},o=({isOpen:d,label:r,loading:m,collapsible:c,onToggle:p,className:g,children:y})=>{const E=(0,i.wW)(s.gN),v=(0,i.wW)(f),h=()=>{p&&p(!d)},P=(0,t.cx)([v.collapse,g]),a=m?(0,t.cx)([v.loader,v.loaderActive]):(0,t.cx)([v.loader]),C=c?(0,t.cx)([v.header]):(0,t.cx)([v.headerCollapsed]);return n.createElement("div",{className:P},n.createElement("button",{type:"button",className:(0,t.cx)(E,C),onClick:h},c&&n.createElement(l.J,{className:v.icon,name:d?"angle-down":"angle-right"}),n.createElement("div",{className:(0,t.cx)([v.headerLabel])},r)),d&&n.createElement("div",{className:(0,t.cx)([v.collapseBody])},n.createElement("div",{className:a}),n.createElement("div",{className:v.bodyContentWrapper},y)))};o.displayName="Collapse"},76161:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>d});var t=e(9892),n=e(82897),i=e.n(n),s=e(66111),l=e(28550),f=e(72648),u=e(46967);const o=(0,s.forwardRef)(({color:c,onChange:p,isClearable:g=!1,onClick:y,onBlur:E,disabled:v,buttonAriaLabel:h,...P},a)=>{const[C,D]=(0,s.useState)(c),[b,M]=(0,s.useState)(c),x=(0,s.useMemo)(()=>(0,n.debounce)(p,100),[]);(0,s.useEffect)(()=>{const O=(0,l.Z)(c);O.isValid()&&c!==b&&(D(O.toString()),M(c))},[c,b]);const R=O=>{const{value:U}=O.currentTarget;if(D(U),U===""&&g){x(U);return}const I=(0,l.Z)(U);I.isValid()&&x(I.toString())},S=O=>{(0,l.Z)(C).isValid()||D(c),E?.(O)};return s.createElement(u.I,{...P,value:C,onChange:R,disabled:v,onClick:y,onBlur:S,addonBefore:s.createElement(r,{onClick:y,ariaLabel:h,disabled:v,color:c}),ref:a})});o.displayName="ColorInput";const d=o,r=({color:c,onClick:p,disabled:g,ariaLabel:y})=>{const E=(0,f.wW)(m);return s.createElement("button",{type:"button",onClick:p,"aria-label":y,disabled:g||!p,className:(0,t.cx)(E,t.css`
          background-color: ${c};
        `)})},m=c=>t.css`
  height: 100%;
  width: ${c.spacing.gridSize*4}px;
  border-radius: ${c.shape.borderRadius()} 0 0 ${c.shape.borderRadius()};
  border: 1px solid ${c.colors.border.medium};
`},90208:(Y,T,e)=>{"use strict";e.d(T,{sp:()=>p,zH:()=>c});var t=e(9892),n=e(66111),i=e(72648),s=e(7804),l=e(66120),f=e(56921),u=e(39604),o=e(560),d=e(98671),r=e(43598);const m=(y,E="ColorPicker")=>{var v;return v=class extends n.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,n.createRef)()}render(){const{theme:h,children:P,onChange:a}=this.props,C=g(h),D=n.createElement(y,{...this.props,children:null,onChange:a});return n.createElement(u.D,{content:D,hideAfter:300},(b,M,x)=>n.createElement(n.Fragment,null,this.pickerTriggerRef.current&&n.createElement(f.J,{...x,referenceElement:this.pickerTriggerRef.current,wrapperClassName:C.colorPicker,onMouseLeave:M,onMouseEnter:b,onKeyDown:R=>(0,l.i)(R,M)}),P?P({ref:this.pickerTriggerRef,showColorPicker:b,hideColorPicker:M}):n.createElement(d.b,{ref:this.pickerTriggerRef,onClick:b,onMouseLeave:M,color:h.visualization.getColorByName(this.props.color||"#000000")})))}},v.displayName=E,v},c=(0,i.HE)(m(o.h,"ColorPicker")),p=(0,i.HE)(m(r.j,"SeriesColorPicker")),g=(0,s.B)(y=>({colorPicker:t.css`
      position: absolute;
      z-index: ${y.zIndex.tooltip};
      color: ${y.colors.text.primary};
      max-width: 400px;
      font-size: ${y.typography.size.sm};
      // !important because these styles are also provided to popper via .popper classes from Tooltip component
      // hope to get rid of those soon
      padding: 15px !important;
      & [data-placement^='top'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='bottom'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='left'] {
        padding-top: 0 !important;
      }
      & [data-placement^='right'] {
        padding-top: 0 !important;
      }
    `}))},83957:(Y,T,e)=>{"use strict";e.d(T,{T:()=>r});var t=e(9892),n=e(66111),i=e(72317),s=e(193),l=e(5680),f=e(72648),u=e(94437),o=e(76161),d=e(96639);const r=(0,n.forwardRef)(({value:c="",onChange:p,returnColorAs:g="rgb",...y},E)=>{const[v,h]=(0,n.useState)(c),[P,a]=(0,n.useState)(!1),C=(0,f.l4)(),D=(0,f.wW)(m),b=(0,f.wW)(d.W);return(0,s.Z)(M=>{if(M===c)return;if(!M){p("");return}const x=C.visualization.getColorByName(M);p(g==="rgb"?l.asRgbString(x):l.asHexString(x))},500,[v]),n.createElement(u.L,{onClick:()=>a(!1)},n.createElement("div",{className:D.wrapper},P&&!y.disabled&&n.createElement(i.ef,{"data-testid":"color-popover",color:v,onChange:h,className:(0,t.cx)(b.root,D.picker)}),n.createElement(o.Z,{...y,theme:C,color:v,onChange:h,buttonAriaLabel:"Open color picker",onClick:()=>a(!0),onBlur:()=>a(!1),ref:E,isClearable:!0})))});r.displayName="ColorPickerInput";const m=c=>({wrapper:t.css`
      position: relative;
    `,picker:t.css`
      &.react-colorful {
        position: absolute;
        width: 100%;
        z-index: 11;
        bottom: 36px;
      }
    `,inner:t.css`
      position: absolute;
    `})},560:(Y,T,e)=>{"use strict";e.d(T,{h:()=>v});var t=e(9892),n=e(83962),i=e(66111),s=e(5680),l=e(72648),f=e(7804),u=e(98671),o=e(82897);function d(P,a){const C=new Array(P.length);for(let D=0;D<P.length;D++){const b=P.length-1-D;C[D]=a(P[b],b,P)}return C}const m=({hue:P,selectedColor:a,onColorSelect:C,...D})=>{const b=(0,o.upperFirst)(P.name),M=(0,l.wW)(c);return i.createElement("div",{className:M.colorRow},i.createElement("div",{className:M.colorLabel},b),i.createElement("div",{...D,className:M.swatchRow},d(P.shades,x=>i.createElement(u.b,{key:x.name,"aria-label":x.name,variant:x.primary?u.$.Large:u.$.Small,isSelected:x.name===a,color:x.color,onClick:()=>C(x.name)}))))},c=P=>({colorRow:t.css`
      display: grid;
      grid-template-columns: 25% 1fr;
      grid-column-gap: ${P.spacing(2)};
      padding: ${P.spacing(.5,0)};

      &:hover {
        background: ${P.colors.background.secondary};
      }
    `,colorLabel:t.css`
      padding-left: ${P.spacing(2)};
      display: flex;
      align-items: center;
    `,swatchRow:t.css`
      display: flex;
      gap: ${P.spacing(1)};
      align-items: center;
      justify-content: space-around;
      flex-direction: row;
    `}),p=({color:P,onChange:a})=>{const C=(0,l.l4)(),D=(0,l.wW)(g),b=[];for(const M of C.visualization.hues)b.push(i.createElement(m,{key:M.name,selectedColor:P,hue:M,onColorSelect:a}));return i.createElement(i.Fragment,null,i.createElement("div",{className:D.swatches},b),i.createElement("div",{className:D.extraColors},i.createElement(u.b,{isSelected:P==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>a("transparent")}),i.createElement(u.b,{isSelected:P==="text",color:C.colors.text.primary,label:"Text color",onClick:()=>a("text")})))},g=P=>({container:t.css`
      display: flex;
      flex-direction: column;
    `,extraColors:t.css`
      display: flex;
      align-items: center;
      justify-content: space-around;
      gap: ${P.spacing(1)};
      padding: ${P.spacing(1,0)};
    `,swatches:t.css`
      display: grid;
      flex-grow: 1;
    `});var y=e(96639);class E extends i.Component{constructor(a){super(a),this.getTabClassName=C=>{const{activePicker:D}=this.state;return`ColorPickerPopover__tab ${D===C&&"ColorPickerPopover__tab--active"}`},this.handleChange=C=>{const{onChange:D,enableNamedColors:b,theme:M}=this.props;if(b)return D(C);D(s.asHexString(M.visualization.getColorByName(C)))},this.onTabChange=C=>()=>this.setState({activePicker:C}),this.renderPicker=()=>{const{activePicker:C}=this.state,{color:D}=this.props;switch(C){case"spectrum":return i.createElement(y.Z,{color:D,onChange:this.handleChange});case"palette":return i.createElement(p,{color:D,onChange:this.handleChange});default:return this.renderCustomPicker(C)}},this.renderCustomPicker=C=>{const{customPickers:D,color:b,theme:M}=this.props;return D?i.createElement(D[C].tabComponent,{color:b,theme:M,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:C}=this.props;return C?i.createElement(i.Fragment,null,Object.keys(C).map(D=>i.createElement("button",{className:this.getTabClassName(D),onClick:this.onTabChange(D),key:D},C[D].name))):null},this.state={activePicker:"palette"}}render(){const{theme:a}=this.props,C=h(a);return i.createElement(n.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},i.createElement("div",{tabIndex:-1,className:C.colorPickerPopover},i.createElement("div",{className:C.colorPickerPopoverTabs},i.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette")},"Colors"),i.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum")},"Custom"),this.renderCustomPickerTabs()),i.createElement("div",{className:C.colorPickerPopoverContent},this.renderPicker())))}}const v=(0,l.HE)(E);v.displayName="ColorPickerPopover";const h=(0,f.B)(P=>({colorPickerPopover:t.css`
      border-radius: ${P.shape.borderRadius()};
      box-shadow: ${P.shadows.z3};
      background: ${P.colors.background.primary};
      border: 1px solid ${P.colors.border.weak};

      .ColorPickerPopover__tab {
        width: 50%;
        text-align: center;
        padding: ${P.spacing(1,0)};
        background: ${P.colors.background.secondary};
        color: ${P.colors.text.secondary};
        font-size: ${P.typography.bodySmall.fontSize};
        cursor: pointer;
        border: none;

        &:focus:not(:focus-visible) {
          outline: none;
          box-shadow: none;
        }

        :focus-visible {
          position: relative;
        }
      }

      .ColorPickerPopover__tab--active {
        color: ${P.colors.text.primary};
        font-weight: ${P.typography.fontWeightMedium};
        background: ${P.colors.background.primary};
      }
    `,colorPickerPopoverContent:t.css`
      width: 246px;
      font-size: ${P.typography.bodySmall.fontSize};
      min-height: 184px;
      padding: ${P.spacing(1)};
      display: flex;
      flex-direction: column;
    `,colorPickerPopoverTabs:t.css`
      display: flex;
      width: 100%;
      border-radius: ${P.shape.borderRadius()} ${P.shape.borderRadius()} 0 0;
    `}))},98671:(Y,T,e)=>{"use strict";e.d(T,{$:()=>u,b:()=>o});var t=e(9892),n=e(83962),i=e(66111),s=e(28550),l=e(68183),f=e(72648),u=(r=>(r.Small="small",r.Large="large",r))(u||{});const o=i.forwardRef(({color:r,label:m,variant:c="small",isSelected:p,"aria-label":g,...y},E)=>{const v=(0,f.l4)(),{isFocusVisible:h,focusProps:P}=(0,n.Fx)(),a=d(v,c,r,h,p),C=!!m,D=`${g||m} color`;return i.createElement("div",{ref:E,className:a.wrapper,"data-testid":l.wl.components.ColorSwatch.name,...y},C&&i.createElement("span",{className:a.label},m),i.createElement("button",{className:a.swatch,...P,"aria-label":D}))}),d=(r,m,c,p,g)=>{const y=(0,s.Z)(c),v=m==="small"?"16px":"32px";let h="none";return y.getAlpha()<.1&&(h=`2px solid ${r.colors.border.medium}`),{wrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,t.css)({marginRight:r.spacing(1)}),swatch:(0,t.css)({width:v,height:v,background:`${c}`,border:h,borderRadius:"50%",outlineOffset:"1px",outline:p?`2px solid  ${r.colors.primary.main}`:"none",boxShadow:g?`inset 0 0 0 2px ${c}, inset 0 0 0 4px ${r.colors.getContrastText(c)}`:"none",transition:r.transitions.create(["transform"],{duration:r.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"}})}};o.displayName="ColorSwatch"},43598:(Y,T,e)=>{"use strict";e.d(T,{j:()=>f,q:()=>u});var t=e(9892),n=e(66111),i=e(72648),s=e(18979),l=e(560);const f=d=>{const r=(0,i.wW)(o),{yaxis:m,onToggleAxis:c,color:p,...g}=d,y=c?{yaxis:{name:"Y-Axis",tabComponent(){return n.createElement(s.r,{key:"yaxisSwitch",label:"Use right y-axis",className:r.colorPickerAxisSwitch,labelClass:r.colorPickerAxisSwitchLabel,checked:m===2,onChange:()=>{c&&c()}})}}}:void 0;return n.createElement(l.h,{...g,color:p||"#000000",customPickers:y})},u=(0,i.HE)(f),o=()=>({colorPickerAxisSwitch:t.css`
      width: 100%;
    `,colorPickerAxisSwitchLabel:t.css`
      display: flex;
      flex-grow: 1;
    `})},96639:(Y,T,e)=>{"use strict";e.d(T,{W:()=>r,Z:()=>m});var t=e(9892),n=e(66111),i=e(72317),s=e(193),l=e(28550),f=e(5680),u=e(72648),o=e(76161);const d=({color:c,onChange:p})=>{const[g,y]=(0,n.useState)(c);(0,s.Z)(P=>{p(f.asHexString(E.visualization.getColorByName(P)))},500,[g]);const E=(0,u.l4)(),v=(0,u.wW)(r),h=(0,n.useMemo)(()=>g.startsWith("rgba")?g:(0,l.Z)(E.visualization.getColorByName(c)).toRgbString(),[g,E,c]);return n.createElement("div",{className:v.wrapper},n.createElement(i.ef,{className:v.root,color:h,onChange:y}),n.createElement(o.Z,{theme:E,color:h,onChange:y,className:v.colorInput}))},r=c=>({wrapper:t.css`
    flex-grow: 1;
  `,root:t.css`
    &.react-colorful {
      width: auto;
    }

    .react-colorful {
      &__saturation {
        border-radius: ${c.shape.borderRadius(1)} ${c.shape.borderRadius(1)} 0 0;
      }
      &__alpha {
        border-radius: 0 0 ${c.shape.borderRadius(1)} ${c.shape.borderRadius(1)};
      }
      &__alpha,
      &__hue {
        height: ${c.spacing(2)};
        position: relative;
      }
      &__pointer {
        height: ${c.spacing(2)};
        width: ${c.spacing(2)};
      }
    }
  `,colorInput:t.css`
    margin-top: ${c.spacing(2)};
  `}),m=d},71657:(Y,T,e)=>{"use strict";e.d(T,{p:()=>u});var t=e(9892),n=e(66111),i=e(72648),s=e(7804),l=e(31403);class f extends n.PureComponent{constructor(){super(...arguments),this.mainButtonRef=n.createRef(),this.confirmButtonRef=n.createRef(),this.state={showConfirm:!1},this.onClickButton=r=>{r&&r.preventDefault(),this.setState({showConfirm:!0},()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()}),this.props.onClick&&this.props.onClick()},this.onClickCancel=r=>{r&&r.preventDefault(),this.setState({showConfirm:!1},()=>{this.mainButtonRef.current?.focus()}),this.props.onCancel&&this.props.onCancel()},this.onConfirm=r=>{r&&r.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}}render(){const{theme:r,className:m,size:c,disabled:p,confirmText:g,confirmVariant:y,children:E}=this.props,v=o(r),h=(0,t.cx)(m,this.state.showConfirm?v.buttonHide:v.buttonShow,p&&v.buttonDisabled),P=(0,t.cx)(v.confirmButton,this.state.showConfirm?v.confirmButtonShow:v.confirmButtonHide),a=p?()=>{}:this.onClickButton;return n.createElement("span",{className:v.buttonContainer},n.createElement("div",{className:(0,t.cx)(p&&v.disabled)},typeof E=="string"?n.createElement("span",{className:h},n.createElement(l.zx,{size:c,fill:"text",onClick:a,ref:this.mainButtonRef},E)):n.createElement("span",{className:h,onClick:a},E)),n.createElement("span",{className:P},n.createElement(l.zx,{size:c,variant:y,onClick:this.onConfirm,ref:this.confirmButtonRef},g),n.createElement(l.zx,{size:c,fill:"text",onClick:this.onClickCancel},"Cancel")))}}const u=(0,i.HE)(f),o=(0,s.B)(d=>({buttonContainer:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-end;
    `,buttonDisabled:t.css`
      text-decoration: none;
      color: ${d.colors.text.primary};
      opacity: 0.65;
      pointer-events: none;
    `,buttonShow:t.css`
      opacity: 1;
      transition: opacity 0.1s ease;
      z-index: 2;
    `,buttonHide:t.css`
      opacity: 0;
      transition: opacity 0.1s ease, visibility 0 0.1s;
      visibility: hidden;
      z-index: 0;
    `,confirmButton:t.css`
      align-items: flex-start;
      background: ${d.colors.background.primary};
      display: flex;
      position: absolute;
      pointer-events: none;
    `,confirmButtonShow:t.css`
      z-index: 1;
      opacity: 1;
      transition: opacity 0.08s ease-out, transform 0.1s ease-out;
      transform: translateX(0);
      pointer-events: all;
    `,confirmButtonHide:t.css`
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s;
      transform: translateX(100px);
    `,disabled:t.css`
      cursor: not-allowed;
    `}));u.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},u.displayName="ConfirmButton"},13626:(Y,T,e)=>{"use strict";e.d(T,{m:()=>s});var t=e(66111),n=e(31403),i=e(71657);const s=({size:l,disabled:f,onConfirm:u,"aria-label":o,closeOnConfirm:d})=>t.createElement(i.p,{confirmText:"Delete",confirmVariant:"destructive",size:l||"md",disabled:f,onConfirm:u,closeOnConfirm:d},t.createElement(n.zx,{"aria-label":o,variant:"destructive",icon:"times",size:l||"sm"}))},98102:(Y,T,e)=>{"use strict";e.d(T,{s:()=>d});var t=e(9892),n=e(66111),i=e(68183),s=e(52081),l=e(46967),f=e(72648),u=e(31403),o=e(35029);const d=({isOpen:m,title:c,body:p,description:g,confirmText:y,confirmVariant:E="destructive",confirmationText:v,dismissText:h="Cancel",dismissVariant:P="secondary",alternativeText:a,modalClass:C,icon:D="exclamation-triangle",onConfirm:b,onDismiss:M,onAlternative:x,confirmButtonVariant:R="destructive"})=>{const[S,O]=(0,n.useState)(Boolean(v)),U=(0,f.wW)(r),I=(0,n.useRef)(null),F=w=>{O(v?.localeCompare(w.currentTarget.value)!==0)};return(0,n.useEffect)(()=>{m&&I.current?.focus()},[m]),(0,n.useEffect)(()=>{m&&O(Boolean(v))},[m,v]),n.createElement(o.u,{className:(0,t.cx)(U.modal,C),title:c,icon:D,isOpen:m,onDismiss:M},n.createElement("div",{className:U.modalText},p,g?n.createElement("div",{className:U.modalDescription},g):null,v?n.createElement("div",{className:U.modalConfirmationInput},n.createElement(s.Lh,null,n.createElement(l.I,{placeholder:`Type ${v} to confirm`,onChange:F}))):null),n.createElement(o.u.ButtonRow,null,n.createElement(u.zx,{variant:P,onClick:M},h),n.createElement(u.zx,{variant:R,onClick:b,disabled:S,ref:I,"data-testid":i.wl.pages.ConfirmModal.delete},y),x?n.createElement(u.zx,{variant:"primary",onClick:x},a):null))},r=m=>({modal:t.css`
    width: 500px;
  `,modalText:(0,t.css)({fontSize:m.typography.h5.fontSize,color:m.colors.text.primary}),modalDescription:(0,t.css)({fontSize:m.typography.body.fontSize}),modalConfirmationInput:(0,t.css)({paddingTop:m.spacing(1)})})},30909:(Y,T,e)=>{"use strict";e.d(T,{x:()=>f});var t=e(66111),n=e(17650),i=e(68183),s=e(95130),l=e(85511);const f=t.memo(({x:u,y:o,onClose:d,focusOnOpen:r=!0,renderMenuItems:m,renderHeader:c})=>{const p=(0,t.useRef)(null),[g,y]=(0,t.useState)({});(0,t.useLayoutEffect)(()=>{const a=p.current;if(a){const C=a.getBoundingClientRect(),D=5,b={right:window.innerWidth<u+C.width,bottom:window.innerHeight<o+C.height+D};y({position:"fixed",left:b.right?u-C.width-D:u-D,top:b.bottom?o-C.height-D:o+D})}},[u,o]),(0,n.Z)(p,()=>{d?.()});const E=c?.(),v=m?.(),h=a=>{r&&a(0)},P=a=>{a.key==="Escape"&&(a.preventDefault(),a.stopPropagation(),d?.())};return t.createElement(l.h_,null,t.createElement(s.v,{header:E,ref:p,style:g,ariaLabel:i.wl.components.Menu.MenuComponent("Context"),onOpen:h,onClick:d,onKeyDown:P},v))});f.displayName="ContextMenu"},74285:(Y,T,e)=>{"use strict";e.d(T,{z:()=>i});var t=e(66111),n=e(30909);const i=({children:s,renderMenuItems:l,focusOnOpen:f=!0})=>{const[u,o]=(0,t.useState)(!1),[d,r]=(0,t.useState)({x:0,y:0});return t.createElement(t.Fragment,null,s({openMenu:m=>{o(!0),r({x:m.pageX,y:m.pageY})}}),u&&t.createElement(n.x,{onClose:()=>o(!1),x:d.x,y:d.y,renderMenuItems:l,focusOnOpen:f}))}},68226:(Y,T,e)=>{"use strict";e.d(T,{$:()=>r,Z:()=>m});var t=e(9892),n=e(66111),i=e(32439),s=e(72648),l=e(9085),f=e.n(l),u=e(39904);const o=({children:p})=>{const[g,y]=(0,n.useState)(!1),[E,v]=(0,n.useState)(!1),h=(0,n.useRef)(null),P=(0,n.useRef)(null),a=(0,s.wW)(d);return(0,n.useEffect)(()=>{const C=new IntersectionObserver(D=>{D.forEach(b=>{b.target===h.current?y(!b.isIntersecting):b.target===P.current&&v(!b.isIntersecting)})});return[h,P].forEach(D=>{D.current&&C.observe(D.current)}),()=>C.disconnect()},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(a.scrollIndicator,a.scrollTopIndicator,{[a.scrollIndicatorVisible]:g})},n.createElement(u.J,{className:f()(a.scrollIcon,a.scrollTopIcon),name:"angle-up"})),n.createElement("div",{className:a.scrollContent},n.createElement("div",{ref:h}),p,n.createElement("div",{ref:P})),n.createElement("div",{className:(0,t.cx)(a.scrollIndicator,a.scrollBottomIndicator,{[a.scrollIndicatorVisible]:E})},n.createElement(u.J,{className:f()(a.scrollIcon,a.scrollBottomIcon),name:"angle-down"})))},d=p=>({scrollContent:(0,t.css)({flex:1,position:"relative"}),scrollIndicator:(0,t.css)({height:p.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:p.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,t.css)({background:`linear-gradient(0deg, transparent, ${p.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,t.css)({background:`linear-gradient(180deg, transparent, ${p.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,t.css)({opacity:1}),scrollIcon:(0,t.css)({left:"50%",position:"absolute",transform:"translateX(-50%)"}),scrollTopIcon:(0,t.css)({top:0}),scrollBottomIcon:(0,t.css)({bottom:0})}),r=({autoHide:p=!1,autoHideTimeout:g=200,setScrollTop:y,className:E,testId:v,autoHeightMin:h="0",autoHeightMax:P="100%",hideTracksWhenNotNeeded:a=!1,hideHorizontalTrack:C,hideVerticalTrack:D,scrollRefCallback:b,showScrollIndicators:M=!1,updateAfterMountMs:x,scrollTop:R,onScroll:S,children:O})=>{const U=(0,n.useRef)(null),I=(0,s.wW)(c);(0,n.useEffect)(()=>{U.current&&b&&b(U.current.view)},[U,b]),(0,n.useEffect)(()=>{U.current&&R!=null&&U.current.scrollTop(R)},[R]),(0,n.useEffect)(()=>{x&&setTimeout(()=>{const A=U.current;A?.update&&A.update()},x)},[x]);function F(A,_,k){return k.style&&_&&(k.style.display="none"),n.createElement("div",{...k,className:A})}const w=(0,n.useCallback)(A=>F("track-horizontal",C,A),[C]),K=(0,n.useCallback)(A=>F("track-vertical",D,A),[D]),L=(0,n.useCallback)(A=>n.createElement("div",{...A,className:"thumb-horizontal"}),[]),V=(0,n.useCallback)(A=>n.createElement("div",{...A,className:"thumb-vertical"}),[]),H=(0,n.useCallback)(A=>(A.style&&A.style.WebkitOverflowScrolling==="touch"&&(A.style.WebkitOverflowScrolling="auto"),n.createElement("div",{...A,className:"scrollbar-view"})),[]),j=(0,n.useCallback)(()=>{U.current&&y&&y(U.current.getValues())},[y]);return n.createElement(i.ZP,{"data-testid":v,ref:U,className:(0,t.cx)(I.customScrollbar,E,{[I.scrollbarWithScrollIndicators]:M}),onScrollStop:j,autoHeight:!0,autoHide:p,autoHideTimeout:g,hideTracksWhenNotNeeded:a,autoHeightMax:P,autoHeightMin:h,renderTrackHorizontal:w,renderTrackVertical:K,renderThumbHorizontal:L,renderThumbVertical:V,renderView:H,onScroll:S},M?n.createElement(o,null,O):O)},m=r,c=p=>({customScrollbar:t.css`
      // Fix for Firefox. For some reason sometimes .view container gets a height of its content, but in order to
      // make scroll working it should fit outer container size (scroll appears only when inner container size is
      // greater than outer one).
      display: flex;
      flex-grow: 1;
      .scrollbar-view {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
      }
      .track-vertical {
        border-radius: ${p.shape.borderRadius(2)};
        width: ${p.spacing(1)} !important;
        right: 0px;
        bottom: ${p.spacing(.25)};
        top: ${p.spacing(.25)};
      }
      .track-horizontal {
        border-radius: ${p.shape.borderRadius(2)};
        height: ${p.spacing(1)} !important;
        right: ${p.spacing(.25)};
        bottom: ${p.spacing(.25)};
        left: ${p.spacing(.25)};
      }
      .thumb-vertical {
        background: ${p.colors.action.focus};
        border-radius: ${p.shape.borderRadius(2)};
        opacity: 0;
      }
      .thumb-horizontal {
        background: ${p.colors.action.focus};
        border-radius: ${p.shape.borderRadius(2)};
        opacity: 0;
      }
      &:hover {
        .thumb-vertical,
        .thumb-horizontal {
          opacity: 1;
          transition: opacity 0.3s ease-in-out;
        }
      }
    `,scrollbarWithScrollIndicators:t.css`
      .scrollbar-view {
        position: static !important;
      }
    `})},89719:(Y,T,e)=>{"use strict";e.d(T,{k:()=>i});var t=e(66111),n=e(31403);function i({link:s,buttonProps:l}){return t.createElement("a",{href:s.href,target:s.target,rel:"noreferrer",onClick:s.onClick?f=>{!(f.ctrlKey||f.metaKey||f.shiftKey)&&s.onClick&&(f.preventDefault(),s.onClick(f))}:void 0},t.createElement(n.zx,{icon:"external-link-alt",variant:"primary",size:"sm",...l},s.title))}},35919:(Y,T,e)=>{"use strict";e.d(T,{v:()=>O});var t=e(9892),n=e(57706),i=e.n(n),s=e(66111),l=e(14760),f=e(83272),u=e(43809),o=e(56975),d=e(3281),r=e(94976),m=e(12724),c=e(67660),p=e(72648),g=e(68226),y=e(46967),E=e(85511),v=e(82897),h=e(53165),P=e(56766);const a=I=>({list:t.css`
      border-bottom: 1px solid ${I.colors.border.weak};
      &:last-child {
        border: none;
      }
    `,wrapper:t.css`
      background: ${I.colors.background.primary};
      width: 250px;
    `,item:t.css`
      background: none;
      padding: 2px 8px;
      color: ${I.colors.text.primary};
      cursor: pointer;
      &:hover {
        background: ${I.colors.action.hover};
      }
    `,label:t.css`
      color: ${I.colors.text.secondary};
    `,activeItem:t.css`
      background: ${I.colors.background.secondary};
      &:hover {
        background: ${I.colors.background.secondary};
      }
    `,itemValue:t.css`
      font-family: ${I.typography.fontFamilyMonospace};
      font-size: ${I.typography.size.sm};
    `}),C=({suggestions:I,...F})=>{const w=(0,s.useRef)(null);(0,h.Z)(w,()=>{F.onClose&&F.onClose()});const K=(0,s.useMemo)(()=>(0,v.groupBy)(I,V=>V.origin),[I]),L=(0,p.wW)(a);return s.createElement("div",{role:"menu",ref:w,className:L.wrapper},Object.keys(K).map((V,H)=>{const j=H===0?0:Object.keys(K).reduce((A,_,k)=>k>=H?A:A+K[_].length,0);return s.createElement(D,{...F,suggestions:K[V],label:`${(0,v.capitalize)(V)}`,activeIndex:F.activeIndex,activeIndexOffset:j,key:V})}))};C.displayName="DataLinkSuggestions";const D=s.memo(({activeIndex:I,activeIndexOffset:F,label:w,onClose:K,onSuggestionSelect:L,suggestions:V,activeRef:H})=>{const j=(0,p.wW)(a);return s.createElement(s.Fragment,null,s.createElement(P.a,{className:j.list,items:V,renderItem:(A,_)=>{const k=_+F===I;return s.createElement("div",{role:"menuitem",tabIndex:0,className:(0,t.cx)(j.item,k&&j.activeItem),ref:k?H:void 0,onClick:()=>{L(A)},title:A.documentation},s.createElement("span",{className:j.itemValue},s.createElement("span",{className:j.label},w)," ",A.label))}}))});D.displayName="DataLinkSuggestionsList";class b{getBoundingClientRect(){const F=window.getSelection(),w=F&&F.anchorNode;return w&&w.parentElement?w.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const M=(I,F)=>I-F*Math.floor(I/F),x={builtInVariable:{pattern:/(\${\S+?})/}},R=[(0,c.Z)({onlyIn:I=>I.type==="code_block",getSyntax:()=>"links"},{...i().languages,links:x})],S=I=>({input:(0,y.H)({theme:I,invalid:!1}).input,editor:t.css`
    .token.builtInVariable {
      color: ${I.colors.success.text};
    }
    .token.variable {
      color: ${I.colors.primary.text};
    }
  `,suggestionsWrapper:t.css`
    box-shadow: ${I.shadows.z2};
  `,wrapperOverrides:t.css`
    width: 100%;
    > .slate-query-field__wrapper {
      padding: 0;
      background-color: transparent;
      border: none;
    }
  `}),O=(0,s.memo)(({value:I,onChange:F,suggestions:w,placeholder:K="http://your-grafana.com/d/000000010/annotations"})=>{const L=(0,s.useRef)(null),V=(0,p.wW)(S),[H,j]=(0,s.useState)(!1),[A,_]=(0,s.useState)(0),[k,Q]=(0,s.useState)((0,m.l1)(I)),re=(0,f.Z)(k),[Z,oe]=(0,s.useState)(0),G=(0,s.useRef)({showingSuggestions:H,suggestions:w,suggestionsIndex:A,linkUrl:k,onChange:F});G.current={showingSuggestions:H,suggestions:w,suggestionsIndex:A,linkUrl:k,onChange:F};const le=(0,s.useRef)(null);(0,s.useEffect)(()=>{oe(U(le.current,A))},[A]);const fe=(0,s.useMemo)(()=>new b,[]),ae=s.useCallback((q,ne)=>{if(!G.current.showingSuggestions)return q.key==="="||q.key==="$"||q.keyCode===32&&q.ctrlKey?j(!0):ne();switch(q.key){case"Backspace":case"Escape":return j(!1),_(0);case"Enter":return q.preventDefault(),ee(G.current.suggestions[G.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":q.preventDefault();const se=q.key==="ArrowDown"?1:-1;return _(he=>M(he+se,G.current.suggestions.length));default:return ne()}},[]);(0,s.useEffect)(()=>{re&&re.selection.isFocused&&!k.selection.isFocused&&G.current.onChange(u.Z.serialize(k))},[k,re]);const de=s.useCallback(({value:q})=>{Q(q)},[]),ee=(q,ne=L.current)=>{const he=me()==="$";q.origin!==d.L8.Template||q.value===r.W.includeVars?ne.insertText(`${he?"":"$"}{${q.value}}`):ne.insertText(`${he?"":"$"}{${q.value}:queryparam}`),Q(ne.value),j(!1),_(0),G.current.onChange(u.Z.serialize(ne.value))},me=()=>{const q=document.getElementById("data-link-input");let ne="",se,he;return window.getSelection&&(se=window.getSelection(),se&&se.rangeCount>0&&(he=se.getRangeAt(0).cloneRange(),he.collapse(!0),he.setStart(q,0),ne=he.toString().slice(-1))),ne};return s.createElement("div",{className:V.wrapperOverrides},s.createElement("div",{className:"slate-query-field__wrapper"},s.createElement("div",{id:"data-link-input",className:"slate-query-field"},H&&s.createElement(E.h_,null,s.createElement(l.r,{referenceElement:fe,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}]},({ref:q,style:ne,placement:se})=>s.createElement("div",{ref:q,style:ne,"data-placement":se,className:V.suggestionsWrapper},s.createElement(g.Z,{scrollTop:Z,autoHeightMax:"300px",setScrollTop:({scrollTop:he})=>oe(he)},s.createElement(C,{activeRef:le,suggestions:G.current.suggestions,onSuggestionSelect:ee,onClose:()=>j(!1),activeIndex:A}))))),s.createElement(o.ML,{schema:m.Yi,ref:L,placeholder:K,value:G.current.linkUrl,onChange:de,onKeyDown:(q,ne,se)=>ae(q,se),plugins:R,className:(0,t.cx)(V.editor,V.input,t.css`
                  padding: 3px 8px;
                `)}))))});O.displayName="DataLinkInput";function U(I,F){return(I?.clientHeight??0)*F}},18543:(Y,T,e)=>{"use strict";e.d(T,{V:()=>o});var t=e(9892),n=e(66111),i=e(68183),s=e(79406),l=e(74285),f=e(14391),u=e(42044);const o=({children:d,links:r,style:m})=>{const c=[{items:(0,s.R)(r),label:"Data links"}],p=c[0].items.length,g=()=>c.map((E,v)=>n.createElement(f.k,{key:`${E.label}${v}`,label:E.label},(E.items||[]).map(h=>n.createElement(u.s,{key:h.label,url:h.url,label:h.label,target:h.target,icon:h.icon,active:h.active,onClick:h.onClick})))),y=t.css`
    cursor: context-menu;
  `;if(p>1)return n.createElement(l.z,{renderMenuItems:g},({openMenu:E})=>d({openMenu:E,targetClassName:y}));{const E=r()[0];return n.createElement("a",{href:E.href,onClick:E.onClick,target:E.target,title:E.title,style:{...m,overflow:"hidden",display:"flex"},"aria-label":i.wl.components.DataLinksContextMenu.singleLink},d({}))}}},68037:(Y,T,e)=>{"use strict";e.d(T,{d:()=>a});var t=e(9892),n=e(82897),i=e(66111),s=e(72648),l=e(7804),f=e(31403),u=e(35029),o=e(79406),d=e(24799),r=e(46967),m=e(8944),c=e(35919);const p=D=>({listItem:t.css`
    margin-bottom: ${D.spacing()};
  `,infoText:t.css`
    padding-bottom: ${D.spacing(2)};
    margin-left: 66px;
    color: ${D.colors.text.secondary};
  `}),g=i.memo(({index:D,value:b,onChange:M,suggestions:x,isLast:R})=>{const S=(0,s.wW)(p),O=(F,w)=>{M(D,{...b,url:F},w)},U=F=>{M(D,{...b,title:F.target.value})},I=()=>{M(D,{...b,targetBlank:!b.targetBlank})};return i.createElement("div",{className:S.listItem},i.createElement(d.g,{label:"Title"},i.createElement(r.I,{value:b.title,onChange:U,placeholder:"Show details"})),i.createElement(d.g,{label:"URL",invalid:(0,o.g)(b.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},i.createElement(c.v,{value:b.url,onChange:O,suggestions:x})),i.createElement(d.g,{label:"Open in new tab"},i.createElement(m.r,{value:b.targetBlank||!1,onChange:I})),R&&i.createElement("div",{className:S.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});g.displayName="DataLinkEditor";const y=({link:D,index:b,getSuggestions:M,onSave:x,onCancel:R})=>{const[S,O]=(0,i.useState)(D);return i.createElement(i.Fragment,null,i.createElement(g,{value:S,index:b,isLast:!1,suggestions:M(),onChange:(U,I)=>{O(I)}}),i.createElement(u.u.ButtonRow,null,i.createElement(f.zx,{variant:"secondary",onClick:()=>R(b),fill:"outline"},"Cancel"),i.createElement(f.zx,{onClick:()=>{x(b,S)}},"Save")))};var E=e(57227),v=e(8180);const h=({link:D,onEdit:b,onRemove:M})=>{const x=(0,s.l4)(),R=P(x),{title:S="",url:O=""}=D,U=S.trim()!=="",I=O.trim()!=="",F=(0,o.g)(O);return i.createElement("div",{className:R.wrapper},i.createElement("div",{className:R.titleWrapper},i.createElement("div",{className:(0,t.cx)(R.url,!I&&R.notConfigured,F&&R.errored)},U?S:"Data link title not provided"),i.createElement("div",{className:R.actionButtons},i.createElement(v.h,{name:"pen",onClick:b}),i.createElement(v.h,{name:"times",onClick:M}))),i.createElement("div",{className:(0,t.cx)(R.url,!I&&R.notConfigured,F&&R.errored),title:O},I?O:"Data link url not provided"),F&&i.createElement(E.S,null,"Explore data link may not work in the future. Please edit."))},P=(0,l.B)(D=>({wrapper:t.css`
      margin-bottom: ${D.spacing(2)};
      width: 100%;
      &:last-child {
        margin-bottom: 0;
      }
      display: flex;
      flex-direction: column;
    `,titleWrapper:t.css`
      label: data-links-list-item-title;
      justify-content: space-between;
      display: flex;
      width: 100%;
      align-items: center;
    `,actionButtons:t.css`
      margin-left: ${D.spacing(1)};
      display: flex;
    `,errored:t.css`
      color: ${D.colors.error.text};
      font-style: italic;
    `,notConfigured:t.css`
      font-style: italic;
    `,title:t.css`
      color: ${D.colors.text.primary};
      font-size: ${D.typography.size.sm};
      font-weight: ${D.typography.fontWeightMedium};
    `,url:t.css`
      color: ${D.colors.text.secondary};
      font-size: ${D.typography.size.sm};
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 90%;
    `})),a=({links:D,onChange:b,getSuggestions:M,data:x})=>{const R=(0,s.l4)(),[S,O]=(0,i.useState)(null),[U,I]=(0,i.useState)(!1),F=C(R),w=D??[],K=S!==null,L=(A,_)=>{if(U)if(_.title.trim()===""&&_.url.trim()===""){I(!1),O(null);return}else O(null),I(!1);const k=(0,n.cloneDeep)(w);k[A]=_,b(k),O(null)},V=()=>{let A=(0,n.cloneDeep)(w);O(A.length),I(!0)},H=A=>{U&&I(!1),O(null)},j=A=>{const _=(0,n.cloneDeep)(w);_.splice(A,1),b(_)};return i.createElement(i.Fragment,null,w.length>0&&i.createElement("div",{className:F.wrapper},w.map((A,_)=>i.createElement(h,{key:`${A.title}/${_}`,index:_,link:A,onChange:L,onEdit:()=>O(_),onRemove:()=>j(_),data:x}))),K&&S!==null&&i.createElement(u.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{H(S)}},i.createElement(y,{index:S,link:U?{title:"",url:""}:w[S],data:x,onSave:L,onCancel:H,getSuggestions:M})),i.createElement(f.zx,{size:"sm",icon:"plus",onClick:V,variant:"secondary"},"Add link"))},C=(0,l.B)(D=>({wrapper:t.css`
      margin-bottom: ${D.spacing(2)};
    `}))},45576:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>f});var t=e(9892),n=e(66111),i=e(72648),s=e(39904),l=e(89719);function f({links:o}){const d=(0,i.wW)(u);if(o.length===1)return n.createElement(l.k,{link:o[0]});const r=o.filter(c=>c.target==="_blank"),m=o.filter(c=>c.target==="_self");return n.createElement(n.Fragment,null,m.map((c,p)=>n.createElement(l.k,{key:p,link:c})),n.createElement("div",{className:d.wrapper},n.createElement("p",{className:d.externalLinksHeading},"External links"),r.map((c,p)=>n.createElement("a",{key:p,href:c.href,target:c.target,className:d.externalLink},n.createElement(s.J,{name:"external-link-alt"}),c.title))))}const u=o=>({wrapper:t.css`
    flex-basis: 150px;
    width: 100px;
    margin-top: ${o.spacing(1)};
  `,externalLinksHeading:t.css`
    color: ${o.colors.text.secondary};
    font-weight: ${o.typography.fontWeightRegular};
    font-size: ${o.typography.size.sm};
    margin: 0;
  `,externalLink:t.css`
    color: ${o.colors.text.link};
    font-weight: ${o.typography.fontWeightRegular};
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    &:hover {
      text-decoration: underline;
    }

    div {
      margin-right: ${o.spacing(1)};
    }
  `})},64260:(Y,T,e)=>{"use strict";e.d(T,{O:()=>s});var t=e(66111),n=e(8944),i=e(81764);function s({options:l,onOptionsChange:f}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Alerting"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(i._,{labelWidth:29,label:"Manage alert rules in Alerting UI",disabled:l.readOnly,tooltip:"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source."},t.createElement(n.x,{value:l.jsonData.manageAlerts!==!1,onChange:u=>f({...l,jsonData:{...l.jsonData,manageAlerts:u.currentTarget.checked}})}))))))}},85615:(Y,T,e)=>{"use strict";e.d(T,{W:()=>u});var t=e(66111),n=e(31403),i=e(81764),s=e(11543),l=e(46967),f=e(97379);const u=({hasCert:o,label:d,onChange:r,onClick:m,placeholder:c})=>t.createElement(s.Z,null,t.createElement(i._,{label:d,labelWidth:14,disabled:o},o?t.createElement(l.I,{type:"text",value:"configured",width:24}):t.createElement(f.K,{rows:7,onChange:r,placeholder:c,required:!0})),o&&t.createElement(n.zx,{variant:"secondary",onClick:m,style:{marginLeft:4}},"Reset"))},92099:(Y,T,e)=>{"use strict";e.d(T,{H:()=>c});var t=e(9892),n=e(82897),i=e.n(n),s=e(66111),l=e(7804),f=e(31403),u=e(95569),o=e(39904),d=e(34517);const r=(0,l.B)(()=>({layout:t.css`
      display: flex;
      align-items: center;
      margin-bottom: 4px;
      > * {
        margin-left: 4px;
        margin-bottom: 0;
        height: 100%;
        &:first-child,
        &:last-child {
          margin-left: 0;
        }
      }
    `})),m=({header:g,onBlur:y,onChange:E,onRemove:v,onReset:h})=>{const P=r();return s.createElement("div",{className:P.layout},s.createElement(u.W,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:g.name||"",onChange:a=>E({...g,name:a.target.value}),onBlur:y}),s.createElement(d.c,{label:"Value","aria-label":"Value",name:"value",isConfigured:g.configured,value:g.value,labelWidth:5,inputWidth:g.configured?11:12,placeholder:"Header Value",onReset:()=>h(g.id),onChange:a=>E({...g,value:a.target.value}),onBlur:y}),s.createElement(f.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:a=>v(g.id)},s.createElement(o.J,{name:"trash-alt"})))};m.displayName="CustomHeaderRow";class c extends s.PureComponent{constructor(y){super(y),this.state={headers:[]},this.updateSettings=()=>{const{headers:P}=this.state,a=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([D,b])=>!D.startsWith("httpHeaderName"))),C=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([D,b])=>!D.startsWith("httpHeaderValue")));for(const[D,b]of P.entries())a[`httpHeaderName${D+1}`]=b.name,b.configured||(C[`httpHeaderValue${D+1}`]=b.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:a,secureJsonData:C})},this.onHeaderAdd=()=>{this.setState(P=>({headers:[...P.headers,{id:(0,n.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(P,a)=>{this.setState(({headers:C})=>({headers:C.map((D,b)=>P!==b?D:{...a})}))},this.onHeaderReset=P=>{this.setState(({headers:a})=>({headers:a.map((C,D)=>C.id!==P?C:{...C,value:"",configured:!1})}))},this.onHeaderRemove=P=>{this.setState(({headers:a})=>({headers:a.filter(C=>C.id!==P)}),this.updateSettings)};const{jsonData:E,secureJsonData:v,secureJsonFields:h}=this.props.dataSourceConfig;this.state={headers:Object.keys(E).sort().filter(P=>P.startsWith("httpHeaderName")).map((P,a)=>({id:(0,n.uniqueId)(),name:E[P],value:v!==void 0?v[P]:"",configured:h&&h[`httpHeaderValue${a+1}`]||!1}))}}render(){const{headers:y}=this.state,{dataSourceConfig:E}=this.props;return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("h6",null,"Custom HTTP Headers")),s.createElement("div",null,y.map((v,h)=>s.createElement(m,{key:v.id,header:v,onChange:P=>{this.onHeaderChange(h,P)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!E.readOnly&&s.createElement("div",{className:"gf-form"},s.createElement(f.zx,{variant:"secondary",icon:"plus",type:"button",onClick:v=>{this.onHeaderAdd()}},"Add header")))}}var p=null},12006:(Y,T,e)=>{"use strict";e.d(T,{E:()=>M});var t=e(9892),n=e(66111),i=e(68183),s=e(72648),l=e(95569),f=e(19426),u=e(81764),o=e(50869),d=e(39904),r=e(8581),m=e(8944),c=e(43339),p=e(34517);const g=({dataSourceConfig:x,onChange:R})=>{const S=x.secureJsonData?x.secureJsonData.basicAuthPassword:"",O=()=>{R({...x,secureJsonData:{...x.secureJsonData,basicAuthPassword:""},secureJsonFields:{...x.secureJsonFields,basicAuthPassword:!1}})},U=I=>{R({...x,secureJsonData:{...x.secureJsonData,basicAuthPassword:I.currentTarget.value}})};return n.createElement(n.Fragment,null,n.createElement(u._,{disabled:x.readOnly},n.createElement(l.W,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:x.basicAuthUser,onChange:I=>R({...x,basicAuthUser:I.currentTarget.value})})),n.createElement(u._,{disabled:x.readOnly},n.createElement(p.c,{isConfigured:!!(x.secureJsonFields&&x.secureJsonFields.basicAuthPassword),value:S||"",inputWidth:18,labelWidth:10,onReset:O,onChange:U})))};var y=e(92099);const E=26,v=({dataSourceConfig:x,onChange:R,showForwardOAuthIdentityOption:S=!0})=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement(u._,{label:"TLS Client Auth",labelWidth:E,disabled:x.readOnly},n.createElement(m.x,{id:"http-settings-tls-client-auth",value:x.jsonData.tlsAuth||!1,onChange:O=>R({...x.jsonData,tlsAuth:O.currentTarget.checked})})),n.createElement(u._,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:E,disabled:x.readOnly},n.createElement(m.x,{id:"http-settings-ca-cert",value:x.jsonData.tlsAuthWithCACert||!1,onChange:O=>R({...x.jsonData,tlsAuthWithCACert:O.currentTarget.checked})}))),n.createElement("div",{className:"gf-form-inline"},n.createElement(u._,{label:"Skip TLS Verify",labelWidth:E,disabled:x.readOnly},n.createElement(m.x,{id:"http-settings-skip-tls-verify",value:x.jsonData.tlsSkipVerify||!1,onChange:O=>R({...x.jsonData,tlsSkipVerify:O.currentTarget.checked})}))),S&&n.createElement("div",{className:"gf-form-inline"},n.createElement(u._,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:E,disabled:x.readOnly},n.createElement(m.x,{id:"http-settings-forward-oauth",value:x.jsonData.oauthPassThru||!1,onChange:O=>R({...x.jsonData,oauthPassThru:O.currentTarget.checked})}))));var h=e(12580),P=e(23622);const a=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],C={label:"Server (default)",value:"proxy"},D=()=>n.createElement("div",{className:"grafana-info-box m-t-2"},n.createElement("p",null,"Access mode controls how requests to the data source will be handled.",n.createElement("strong",null,"\xA0",n.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),n.createElement("div",{className:"alert-title"},"Server access mode (Default):"),n.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),n.createElement("div",{className:"alert-title"},"Browser access mode:"),n.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),b=26,M=x=>{const{defaultUrl:R,dataSourceConfig:S,onChange:O,showAccessOptions:U,sigV4AuthToggleEnabled:I,showForwardOAuthIdentityOption:F,azureAuthSettings:w,renderSigV4Editor:K,secureSocksDSProxyEnabled:L,urlLabel:V,urlDocs:H}=x,[j,A]=(0,n.useState)(!1),_=(0,s.l4)();let k;const Q=(0,n.useCallback)(ae=>{O({...S,...ae})},[S,O]);switch(S.access){case"direct":k=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",H);break;case"proxy":k=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",H);break;default:k=n.createElement(n.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",H)}const re=n.createElement(r.Ph,{"aria-label":"Access",className:"width-20 gf-form-input",options:a,value:a.filter(ae=>ae.value===S.access)[0]||C,onChange:ae=>Q({access:ae.value}),disabled:S.readOnly}),Z=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(S.url),oe=t.css`
    box-shadow: inset 0 0px 5px ${_.v1.palette.red};
  `,G=(0,t.cx)({["width-20"]:!0,[oe]:!Z}),le=n.createElement(o.I,{className:G,placeholder:R,value:S.url,"aria-label":i.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:ae=>Q({url:ae.currentTarget.value}),disabled:S.readOnly}),fe=w?.azureAuthSupported&&w.getAzureAuthEnabled(S)||!1;return n.createElement("div",{className:"gf-form-group"},n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"HTTP"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(l.W,{interactive:!!H,label:V??"URL",labelWidth:13,tooltip:k,inputEl:le})),U&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(l.W,{label:"Access",labelWidth:13,inputWidth:20,inputEl:re})),n.createElement("div",{className:"gf-form"},n.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>A(ae=>!ae)},"Help\xA0",n.createElement(d.J,{name:j?"angle-down":"angle-right",style:{marginBottom:0}})))),j&&n.createElement(D,null)),S.access==="proxy"&&n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(f.c,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),n.createElement(c.B,{tags:S.jsonData.keepCookies,width:40,onChange:ae=>Q({jsonData:{...S.jsonData,keepCookies:ae}}),disabled:S.readOnly})),n.createElement("div",{className:"gf-form"},n.createElement(l.W,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:S.jsonData.timeout,onChange:ae=>{Q({jsonData:{...S.jsonData,timeout:parseInt(ae.currentTarget.value,10)}})},disabled:S.readOnly}))))),n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Auth"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement(u._,{label:"Basic auth",labelWidth:b,disabled:S.readOnly},n.createElement(m.x,{id:"http-settings-basic-auth",value:S.basicAuth,onChange:ae=>{Q({basicAuth:ae.currentTarget.checked})}})),n.createElement(u._,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:b,disabled:S.readOnly},n.createElement(m.x,{id:"http-settings-with-credentials",value:S.withCredentials,onChange:ae=>{Q({withCredentials:ae.currentTarget.checked})}}))),w?.azureAuthSupported&&n.createElement("div",{className:"gf-form-inline"},n.createElement(u._,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:b,disabled:S.readOnly},n.createElement(m.x,{id:"http-settings-azure-auth",value:fe,onChange:ae=>{Q(w.setAzureAuthEnabled(S,ae.currentTarget.checked))}}))),I&&n.createElement("div",{className:"gf-form-inline"},n.createElement(u._,{label:"SigV4 auth",labelWidth:b,disabled:S.readOnly},n.createElement(m.x,{id:"http-settings-sigv4-auth",value:S.jsonData.sigV4Auth||!1,onChange:ae=>{Q({jsonData:{...S.jsonData,sigV4Auth:ae.currentTarget.checked}})}}))),S.access==="proxy"&&n.createElement(v,{dataSourceConfig:S,onChange:ae=>Q({jsonData:ae}),showForwardOAuthIdentityOption:F})),S.basicAuth&&n.createElement(n.Fragment,null,n.createElement("h6",null,"Basic Auth Details"),n.createElement("div",{className:"gf-form-group"},n.createElement(g,{...x}))),w?.azureAuthSupported&&fe&&w.azureSettingsUI&&n.createElement(w.azureSettingsUI,{dataSourceConfig:S,onChange:O}),S.jsonData.sigV4Auth&&I&&K,(S.jsonData.tlsAuth||S.jsonData.tlsAuthWithCACert)&&n.createElement(P.s,{dataSourceConfig:S,onChange:O}),S.access==="proxy"&&n.createElement(y.H,{dataSourceConfig:S,onChange:O})),L&&n.createElement(h.i,{options:S,onOptionsChange:O}))}},12580:(Y,T,e)=>{"use strict";e.d(T,{i:()=>s});var t=e(66111),n=e(8944),i=e(81764);function s({options:l,onOptionsChange:f}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(i._,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},t.createElement(n.x,{value:l.jsonData.enableSecureSocksProxy??!1,onChange:u=>f({...l,jsonData:{...l.jsonData,enableSecureSocksProxy:u.currentTarget.checked}})}))))))}},23622:(Y,T,e)=>{"use strict";e.d(T,{s:()=>u});var t=e(9892),n=e(66111),i=e(95569),s=e(39904),l=e(61860),f=e(85615);const u=({dataSourceConfig:o,onChange:d})=>{const r=o.secureJsonFields&&o.secureJsonFields.tlsCACert,m=o.secureJsonFields&&o.secureJsonFields.tlsClientCert,c=o.secureJsonFields&&o.secureJsonFields.tlsClientKey,p=o.jsonData&&o.jsonData.serverName,g=v=>h=>{h.preventDefault();const P={...o.secureJsonFields};P[v]=!1,d({...o,secureJsonFields:P})},y=v=>h=>{const P={...o.secureJsonData};P[v]=h.currentTarget.value,d({...o,secureJsonData:P})},E=v=>{const h={...o.jsonData,serverName:v.currentTarget.value};d({...o,jsonData:h})};return n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:(0,t.cx)("gf-form",t.css`
            align-items: baseline;
          `)},n.createElement("h6",null,"TLS/SSL Auth Details"),n.createElement(l.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},n.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},n.createElement(s.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}})))),n.createElement("div",null,o.jsonData.tlsAuthWithCACert&&n.createElement(f.W,{hasCert:!!r,onChange:y("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:g("tlsCACert")}),o.jsonData.tlsAuth&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form"},n.createElement(i.W,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:p&&o.jsonData.serverName,onChange:E})),n.createElement(f.W,{hasCert:!!m,label:"Client Cert",onChange:y("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:g("tlsClientCert")}),n.createElement(f.W,{hasCert:!!c,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:y("tlsClientKey"),onClick:g("tlsClientKey")}))))}},77239:(Y,T,e)=>{"use strict";e.d(T,{M:()=>o});var t=e(9892),n=e(66111),i=e(74363),s=e(72648),l=e(94437),f=e(39904),u=e(36290);const o=(0,n.memo)(m=>{const c=(0,s.wW)(r),{isOpen:p,onClose:g}=m;return p?n.createElement(l.L,{useCapture:!0,includeButtonPress:!1,onClick:g},n.createElement("div",{className:c.modal,"data-testid":"date-picker"},n.createElement(d,{...m}))):null});o.displayName="DatePicker";const d=(0,n.memo)(({value:m,minDate:c,maxDate:p,onChange:g})=>{const y=(0,s.wW)(u.mg);return n.createElement(i.ZP,{className:y.body,tileClassName:y.title,value:m||new Date,minDate:c,maxDate:p,nextLabel:n.createElement(f.J,{name:"angle-right"}),prevLabel:n.createElement(f.J,{name:"angle-left"}),onChange:E=>{Array.isArray(E)||g(E)},locale:"en"})});d.displayName="Body";const r=m=>({modal:t.css`
      z-index: ${m.zIndex.modal};
      position: absolute;
      box-shadow: ${m.shadows.z3};
      background-color: ${m.colors.background.primary};
      border: 1px solid ${m.colors.border.weak};
      border-radius: 2px 0 0 2px;

      button:disabled {
        color: ${m.colors.text.disabled};
      }
    `})},86348:(Y,T,e)=>{"use strict";e.d(T,{d:()=>o});var t=e(9892),n=e(66111),i=e(67483),s=e(72648),l=e(46967),f=e(77239);const u=r=>(0,i.CQ)(r).format("L"),o=({value:r,minDate:m,maxDate:c,onChange:p,closeOnSelect:g,placeholder:y="Date",...E})=>{const[v,h]=n.useState(!1),P=(0,s.wW)(d);return n.createElement("div",{className:P.container},n.createElement(l.I,{type:"text",autoComplete:"off",placeholder:y,value:r&&u(r),onClick:()=>h(!0),onChange:a=>{a.target.value===""&&p("")},className:P.input,...E}),n.createElement(f.M,{isOpen:v,value:r&&typeof r!="string"?r:(0,i.CQ)().toDate(),minDate:m,maxDate:c,onChange:a=>{p(a),g&&h(!1)},onClose:()=>h(!1)}))},d=()=>({container:t.css`
      position: relative;
    `,input:t.css`
    /* hides the native Calendar picker icon given when using type=date */
    input[type='date']::-webkit-inner-spin-button,
    input[type='date']::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
    `})},35575:(Y,T,e)=>{"use strict";e.d(T,{x:()=>M});var t=e(9892),n=e(29952),i=e(83962),s=e(86922),l=e(66111),f=e(74363),u=e(10092),o=e(92268),d=e(77258),r=e(67483),m=e(85511),c=e(31403),p=e(81764),g=e(46967),y=e(39904),E=e(52081),v=e(72648),h=e(27581),P=e(91942),a=e(36290),C=e(47406),D=e(29826);function b(O,U,I){return(0,r.v9)(O)?O.isValid():C.isMathString(O)?C.isValid(O):(0,D.J)(O,{roundUp:U,timeZone:I}).isValid()}const M=({date:O,maxDate:U,minDate:I,label:F,onChange:w,disabledHours:K,disabledMinutes:L,disabledSeconds:V,showSeconds:H=!0})=>{const[j,A]=(0,l.useState)(!1),_=(0,l.useRef)(null),{overlayProps:k,underlayProps:Q}=(0,s.Ir)({onClose:()=>A(!1),isDismissable:!0,isOpen:j,shouldCloseOnInteractOutside:se=>{const he=document.getElementsByClassName(P.F)[0];return!(he&&he.contains(se))}},_),{dialogProps:re}=(0,n.R)({},_),Z=(0,v.l4)(),{modalBackdrop:oe}=(0,h.J)(Z),G=(0,o.Z)(`(min-width: ${Z.breakpoints.values.lg}px)`),le=(0,v.wW)(S),[fe,ae]=(0,l.useState)(),[de,ee]=(0,l.useState)(),me=(0,u.D)(fe,de,{placement:"bottom-start"}),q=(0,l.useCallback)(se=>{A(!1),w(se)},[w]),ne=(0,l.useCallback)(se=>{se.preventDefault(),A(!0)},[A]);return l.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},l.createElement(x,{date:O,onChange:w,isFullscreen:G,onOpen:ne,label:F,ref:ae,showSeconds:H}),j?G?l.createElement(m.h_,null,l.createElement(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},l.createElement("div",{ref:_,...k,...re},l.createElement(R,{date:O,onChange:q,isFullscreen:!0,onClose:()=>A(!1),maxDate:U,minDate:I,ref:ee,style:me.styles.popper,showSeconds:H,disabledHours:K,disabledMinutes:L,disabledSeconds:V})))):l.createElement(m.h_,null,l.createElement("div",{className:oe,...Q}),l.createElement(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},l.createElement("div",{ref:_,...k,...re},l.createElement("div",{className:le.modal},l.createElement(R,{date:O,maxDate:U,minDate:I,onChange:q,isFullscreen:!1,onClose:()=>A(!1),showSeconds:H,disabledHours:K,disabledMinutes:L,disabledSeconds:V}))))):null)},x=l.forwardRef(({date:O,label:U,onChange:I,isFullscreen:F,onOpen:w,showSeconds:K=!0},L)=>{const V=K?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm",[H,j]=(0,l.useState)(()=>({value:O?(0,d.dq)(O):(0,d.dq)((0,r.CQ)()),invalid:!1}));(0,l.useEffect)(()=>{O&&j({invalid:!b((0,d.dq)(O,{format:V})),value:(0,r.v9)(O)?(0,d.dq)(O,{format:V}):O})},[O,V]);const A=(0,l.useCallback)(Q=>{const re=!b(Q.currentTarget.value);j({value:Q.currentTarget.value,invalid:re})},[]),_=(0,l.useCallback)(()=>{(0,r.v9)(H.value)&&I((0,r.CQ)(H.value))},[H.value,I]),k=l.createElement(c.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:w});return l.createElement(p._,{label:U,invalid:!!(H.value&&H.invalid),className:t.css`
          margin-bottom: 0;
        `},l.createElement(g.I,{onChange:A,addonAfter:k,value:H.value,onBlur:_,"data-testid":"date-time-input",placeholder:"Select date/time",ref:L}))});x.displayName="DateTimeInput";const R=l.forwardRef(({date:O,onClose:U,onChange:I,isFullscreen:F,maxDate:w,minDate:K,style:L,showSeconds:V=!0,disabledHours:H,disabledMinutes:j,disabledSeconds:A},_)=>{const k=(0,v.wW)(a.mg),Q=(0,v.wW)(S),[re,Z]=(0,l.useState)(()=>O&&O.isValid()?O.toDate():new Date),oe=(0,l.useCallback)(le=>{Array.isArray(le)||Z(fe=>(le.setHours(fe.getHours()),le.setMinutes(fe.getMinutes()),le.setSeconds(fe.getSeconds()),le))},[]),G=(0,l.useCallback)(le=>{Z(le.toDate())},[]);return l.createElement("div",{className:(0,t.cx)(Q.container,{[Q.fullScreen]:F}),style:L,ref:_},l.createElement(f.ZP,{next2Label:null,prev2Label:null,value:re,nextLabel:l.createElement(y.J,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:l.createElement(y.J,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:oe,locale:"en",className:k.body,tileClassName:k.title,maxDate:w,minDate:K}),l.createElement("div",{className:Q.time},l.createElement(P.y,{showSeconds:V,onChange:G,value:(0,r.CQ)(re),disabledHours:H,disabledMinutes:j,disabledSeconds:A})),l.createElement(E.Lh,null,l.createElement(c.zx,{type:"button",onClick:()=>I((0,r.CQ)(re))},"Apply"),l.createElement(c.zx,{variant:"secondary",type:"button",onClick:U},"Cancel")))});R.displayName="DateTimeCalendar";const S=O=>({container:t.css`
    padding: ${O.spacing(1)};
    border: 1px ${O.colors.border.weak} solid;
    border-radius: ${O.shape.borderRadius(1)};
    background-color: ${O.colors.background.primary};
    z-index: ${O.zIndex.modal};
  `,fullScreen:t.css`
    position: absolute;
  `,time:t.css`
    margin-bottom: ${O.spacing(2)};
  `,modal:t.css`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: ${O.zIndex.modal};
    max-width: 280px;
  `})},19115:(Y,T,e)=>{"use strict";e.d(T,{x:()=>C});var t=e(9892),n=e(29952),i=e(83962),s=e(86922),l=e(66111),f=e(10092),u=e(72648),o=e(37951),d=e(31403),r=e(68226),m=e(24799),c=e(39904),p=e(46967),g=e(85511),y=e(61860),E=e(65012),v=e(98574),h=e(21356),P=e(25482);const a=h.r.filter(R=>(0,P.jD)(R.from));function C(R){const{timeRange:S,onChange:O}=R,[U,I]=(0,l.useState)(!1),F=(0,l.useCallback)(()=>I(!1),[]),w=(0,P.C_)(S),[K,L]=(0,l.useState)({value:w.from,validation:(0,P.x5)(w.from)}),[V,H]=(0,l.useState)({value:w.to,validation:(0,P.x5)(w.to)}),j=(0,l.useRef)(null),{overlayProps:A,underlayProps:_}=(0,s.Ir)({onClose:()=>I(!1),isDismissable:!0,isOpen:U},j),{dialogProps:k}=(0,n.R)({},j),[Q,re]=(0,l.useState)(null),[Z,oe]=(0,l.useState)(null),G=(0,f.D)(Q,Z,{placement:"auto-start"}),le=(0,u.wW)(M(K.validation.errorMessage,V.validation.errorMessage)),fe=ee=>{const me=(0,P.aw)(ee);me&&(F(),L({...K,value:ee.from}),H({...V,value:ee.to}),O(me))},ae=(0,l.useCallback)(ee=>{ee.stopPropagation(),ee.preventDefault(),I(!U)},[U]),de=ee=>{if(ee.preventDefault(),!V.validation.isValid||!K.validation.isValid)return;const me=(0,P.aw)({from:K.value,to:V.value,display:""});me&&(O(me),I(!1))};return l.createElement("div",{className:le.container,ref:re},l.createElement("button",{className:le.pickerInput,type:"button",onClick:ae},l.createElement("span",{className:le.clockIcon},l.createElement(c.J,{name:"clock-nine"})),l.createElement("span",null,w.from," to ",w.to),l.createElement("span",{className:le.caretIcon},l.createElement(c.J,{name:U?"angle-up":"angle-down",size:"lg"}))),U&&l.createElement(g.h_,null,l.createElement("div",{role:"presentation",className:le.backdrop,..._}),l.createElement(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},l.createElement("div",{ref:j,...A,...k},l.createElement("div",{className:le.content,ref:oe,style:G.styles.popper,...G.attributes},l.createElement("div",{className:le.body},l.createElement(r.Z,{className:le.leftSide,hideHorizontalTrack:!0},l.createElement(v.V,{title:(0,o.t)("time-picker.time-range.example-title","Example time ranges"),options:a,onChange:fe,value:w})),l.createElement("div",{className:le.rightSide},l.createElement("div",{className:le.title},l.createElement(E.r,null,l.createElement(y.u,{content:l.createElement(D,null),placement:"bottom",theme:"info"},l.createElement("div",null,l.createElement(o.c,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",l.createElement(c.J,{name:"info-circle"})))))),l.createElement(m.g,{label:"From",invalid:!K.validation.isValid,error:K.validation.errorMessage},l.createElement(p.I,{onClick:ee=>ee.stopPropagation(),onBlur:()=>L({...K,validation:(0,P.x5)(K.value)}),onChange:ee=>L({...K,value:ee.currentTarget.value}),value:K.value})),l.createElement(m.g,{label:"To",invalid:!V.validation.isValid,error:V.validation.errorMessage},l.createElement(p.I,{onClick:ee=>ee.stopPropagation(),onBlur:()=>H({...V,validation:(0,P.x5)(V.value)}),onChange:ee=>H({...V,value:ee.currentTarget.value}),value:V.value})),l.createElement(d.zx,{"aria-label":"TimePicker submit button",onClick:de},"Apply time range"))))))))}const D=()=>{const R=(0,u.wW)(b);return l.createElement(l.Fragment,null,l.createElement("div",{className:R.supported},"Supported formats: ",l.createElement("code",{className:R.tooltip},"now-[digit]s/m/h/d/w")),l.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),l.createElement("code",{className:R.tooltip},"From: now-10m To: now"),l.createElement("div",{className:R.link},"For more information see"," ",l.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",l.createElement(c.J,{name:"external-link-alt"})),"."))},b=R=>({supported:t.css`
    margin-bottom: ${R.spacing(1)};
  `,tooltip:t.css`
    margin: 0;
  `,link:t.css`
    margin-top: ${R.spacing(1)};
  `}),M=(R,S)=>O=>{const U=(0,p.H)({theme:O,invalid:!1}),F=250+x(O,R)+x(O,S);return{backdrop:t.css`
      position: fixed;
      z-index: ${O.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    `,container:t.css`
      display: flex;
      position: relative;
    `,pickerInput:(0,t.cx)(U.input,U.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        padding-left: 0;
        line-height: ${O.spacing.gridSize*O.components.height.md-2}px;
      `),caretIcon:(0,t.cx)(U.suffix,t.css`
        position: relative;
        margin-left: ${O.spacing(.5)};
      `),clockIcon:(0,t.cx)(U.prefix,t.css`
        position: relative;
        margin-right: ${O.spacing(.5)};
      `),content:t.css`
      background: ${O.colors.background.primary};
      box-shadow: ${O.shadows.z3};
      position: absolute;
      z-index: ${O.zIndex.modal};
      width: 500px;
      top: 100%;
      border-radius: ${O.shape.radius.default};
      border: 1px solid ${O.colors.border.weak};
      left: 0;
      white-space: normal;
    `,body:t.css`
      display: flex;
      height: ${F}px;
    `,description:t.css`
      color: ${O.colors.text.secondary};
      font-size: ${O.typography.size.sm};
    `,leftSide:t.css`
      width: 50% !important;
      border-right: 1px solid ${O.colors.border.medium};
    `,rightSide:t.css`
      width: 50%;
      padding: ${O.spacing(1)};
    `,title:t.css`
      margin-bottom: ${O.spacing(1)};
    `}};function x(R,S){return S?S.length>34?R.spacing.gridSize*6.5:R.spacing.gridSize*4:0}},25482:(Y,T,e)=>{"use strict";e.d(T,{C_:()=>i,aw:()=>n,jD:()=>l,x5:()=>s});const t=/^now$|^now\-(\d{1,10})([wdhms])$/,n=d=>({from:f(d.from),to:f(d.to)}),i=d=>{const r=o(d.from),m=o(d.to);return{from:r,to:m,display:`${r} to ${m}`}},s=(d,r=Date.now())=>l(d)?f(d)>Math.ceil(r/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},l=d=>t.test(d),f=d=>{const r=t.exec(d);if(!r||r.length!==3)return 0;const[,m,c]=r,p=parseInt(m,10);return isNaN(p)?0:p*u[c]},u={w:604800,d:86400,h:3600,m:60,s:1},o=d=>d<=0?"now":d>=u.w&&d%u.w===0?`now-${d/u.w}w`:d>=u.d&&d%u.d===0?`now-${d/u.d}d`:d>=u.h&&d%u.h===0?`now-${d/u.h}h`:d>=u.m&&d%u.m===0?`now-${d/u.m}m`:`now-${d}s`},91942:(Y,T,e)=>{"use strict";e.d(T,{F:()=>d,y:()=>r});var t=e(9892),n=e(72505),i=e(66111),s=e(67483),l=e(72648),f=e(39904),u=e(85419),o=e(73267);const d="time-of-day-picker-panel",r=({minuteStep:p=1,showHour:g=!0,showSeconds:y=!1,onChange:E,value:v,size:h="auto",disabled:P,disabledHours:a,disabledMinutes:C,disabledSeconds:D})=>{const b=(0,l.wW)(c);return i.createElement(n.Z,{className:(0,t.cx)((0,o.ht)()[h],b.input),popupClassName:(0,t.cx)(b.picker,d),defaultValue:(0,s.C_)(),onChange:M=>E((0,s.CQ)(M)),allowEmpty:!1,showSecond:y,value:(0,s.C_)(v),showHour:g,minuteStep:p,inputIcon:i.createElement(m,{wrapperStyle:b.caretWrapper}),disabled:P,disabledHours:a,disabledMinutes:C,disabledSeconds:D})},m=({wrapperStyle:p=""})=>i.createElement("div",{className:p},i.createElement(f.J,{name:"angle-down"})),c=p=>{const g=p.components.input.background,y=p.v1.palette.black,E=p.colors.background.secondary,v=p.shape.borderRadius(1),h=p.components.input.borderColor;return{caretWrapper:t.css`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${p.colors.text.secondary};
    `,picker:t.css`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${g};
        border-color: ${h};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${p.v1.palette.orange};
            border-radius: ${v};
          }

          &:hover {
            background: ${E};
          }

          &.rc-time-picker-panel-select-option-disabled {
            color: ${p.colors.action.disabledText};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${y};
        background-color: ${g};
        border-color: ${h};
        border-radius: ${v};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${g};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:t.css`
      .rc-time-picker-input {
        background-color: ${g};
        border-radius: ${v};
        border-color: ${h};
        height: ${p.spacing(4)};

        &:focus {
          ${(0,u.focusCss)(p)}
        }

        &:disabled {
          background-color: ${p.colors.action.disabledBackground};
          color: ${p.colors.action.disabledText};
          border: 1px solid ${p.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }
    `}}},95794:(Y,T,e)=>{"use strict";e.d(T,{K:()=>v});var t=e(9892),n=e(66111),i=e(47406),s=e(67483),l=e(75849),f=e(68183),u=e(7804),o=e(72648),d=e(94437),r=e(39904),m=e(46967),c=e(3630),p=e(99489),g=e(21356);const y=P=>i.isValid(P.from)&&i.isValid(P.to),E=()=>{},v=({value:P,onChange:a,onChangeTimeZone:C=E,clearable:D,hideTimeZone:b=!0,timeZone:M="browser",placeholder:x="Select time range",isReversed:R=!0,hideQuickRanges:S=!1,disabled:O=!1})=>{const[U,I]=(0,n.useState)(!1),F=(0,o.l4)(),w=h(F,O),K=j=>{j.stopPropagation(),j.preventDefault(),!O&&I(!U)},L=()=>{I(!1)},V=j=>{L(),a(j)},H=j=>{j.stopPropagation();const A=(0,s.CQ)(null),_=(0,s.CQ)(null);a({from:A,to:_,raw:{from:A,to:_}})};return n.createElement("div",{className:w.container},n.createElement("button",{type:"button",className:w.pickerInput,"aria-label":f.wl.components.TimePicker.openButton,onClick:K},y(P)?n.createElement(c.sU,{value:P,timeZone:M}):n.createElement("span",{className:w.placeholder},x),!O&&n.createElement("span",{className:w.caretIcon},y(P)&&D&&n.createElement(r.J,{className:w.clearIcon,name:"times",size:"lg",onClick:H}),n.createElement(r.J,{name:U?"angle-up":"angle-down",size:"lg"}))),U&&n.createElement(d.L,{includeButtonPress:!1,onClick:L},n.createElement(p.x,{timeZone:M,value:y(P)?P:(0,l.JK)(),onChange:V,quickOptions:g.r,onChangeTimeZone:C,className:w.content,hideTimeZone:b,isReversed:R,hideQuickRanges:S})))},h=(0,u.B)((P,a=!1)=>{const C=(0,m.H)({theme:P,invalid:!1});return{container:t.css`
      display: flex;
      position: relative;
    `,content:t.css`
      margin-left: 0;
      position: absolute;
      top: 116%;
      z-index: ${P.zIndex.dropdown};
    `,pickerInput:(0,t.cx)(C.input,a&&C.inputDisabled,C.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        line-height: ${P.spacing.gridSize*4-2}px;
      `),caretIcon:(0,t.cx)(C.suffix,t.css`
        position: relative;
        top: -1px;
        margin-left: ${P.spacing(.5)};
      `),clearIcon:t.css`
      margin-right: ${P.spacing(.5)};
      &:hover {
        color: ${P.colors.text.maxContrast};
      }
    `,placeholder:t.css`
      color: ${P.colors.text.disabled};
      opacity: 1;
    `}})},3630:(Y,T,e)=>{"use strict";e.d(T,{IF:()=>D,Xc:()=>a,sU:()=>b});var t=e(9892),n=e(29952),i=e(83962),s=e(86922),l=e(66111),f=e(67483),u=e(77258),o=e(56808),d=e(47891),r=e(47406),m=e(68183),c=e(72648),p=e(37951),g=e(26202),y=e(27581),E=e(64319),v=e(61860),h=e(99489),P=e(21356);function a(S){const[O,U]=(0,l.useState)(!1),{value:I,onMoveBackward:F,onMoveForward:w,onZoom:K,timeZone:L,fiscalYearStartMonth:V,timeSyncButton:H,isSynced:j,history:A,onChangeTimeZone:_,onChangeFiscalYearStartMonth:k,hideQuickRanges:Q,widthOverride:re,isOnCanvas:Z}=S,oe=Te=>{S.onChange(Te),U(!1)},G=Te=>{Te.stopPropagation(),Te.preventDefault(),U(!O)},le=()=>{U(!1)},fe=(0,l.createRef)(),{overlayProps:ae,underlayProps:de}=(0,s.Ir)({onClose:le,isDismissable:!0,isOpen:O},fe),{dialogProps:ee}=(0,n.R)({},fe),me=(0,c.l4)(),q=(0,c.wW)(x),{modalBackdrop:ne}=(0,y.J)(me),se=(0,f.v9)(I.raw.from)||(0,f.v9)(I.raw.to),he=j?"active":Z?"canvas":"default",ue=M(I,L);return l.createElement(g.h,{className:q.container},se&&l.createElement(E.h,{"aria-label":(0,p.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:he,onClick:F,icon:"angle-left",narrow:!0}),l.createElement(v.u,{content:l.createElement(D,{timeRange:I,timeZone:L}),placement:"bottom",interactive:!0},l.createElement(E.h,{"data-testid":m.wl.components.TimePicker.openButton,"aria-label":(0,p.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:ue}),"aria-controls":"TimePickerContent",onClick:G,icon:"clock-nine",isOpen:O,variant:he},l.createElement(b,{...S}))),O&&l.createElement("div",null,l.createElement("div",{role:"presentation",className:(0,t.cx)(ne,q.backdrop),...de}),l.createElement(i.MT,{contain:!0,autoFocus:!0},l.createElement("section",{className:q.content,ref:fe,...ae,...ee},l.createElement(h.x,{timeZone:L,fiscalYearStartMonth:V,value:I,onChange:oe,quickOptions:P.r,history:A,showHistory:!0,widthOverride:re,onChangeTimeZone:_,onChangeFiscalYearStartMonth:k,hideQuickRanges:Q})))),H,se&&l.createElement(E.h,{"aria-label":(0,p.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:w,icon:"angle-right",narrow:!0,variant:he}),l.createElement(v.u,{content:C,placement:"bottom"},l.createElement(E.h,{"aria-label":(0,p.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:K,icon:"search-minus",variant:he})))}a.displayName="TimeRangePicker";const C=()=>l.createElement(l.Fragment,null,l.createElement(p.c,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",l.createElement("br",null)," CTRL+Z")),D=({timeRange:S,timeZone:O})=>{const U=(0,c.wW)(R);return l.createElement(l.Fragment,null,(0,u.dq)(S.from,{timeZone:O}),l.createElement("div",{className:"text-center"},l.createElement(p.c,{i18nKey:"time-picker.range-picker.to"},"to")),(0,u.dq)(S.to,{timeZone:O}),l.createElement("div",{className:"text-center"},l.createElement("span",{className:U.utc},(0,o.Vs)(O))))},b=(0,l.memo)(({hideText:S,value:O,timeZone:U})=>{const I=(0,c.wW)(R);return S?null:l.createElement("span",{className:I.container},l.createElement("span",null,M(O,U)),l.createElement("span",{className:I.utc},d.describeTimeRangeAbbreviation(O,U)))});b.displayName="TimePickerButtonLabel";const M=(S,O)=>{const U={to:r.isMathString(S.raw.to)?S.raw.to:S.to,from:r.isMathString(S.raw.from)?S.raw.from:S.from};return d.describeTimeRange(U,O)},x=S=>({container:t.css`
      position: relative;
      display: flex;
      vertical-align: middle;
    `,backdrop:(0,t.css)({display:"none",[S.breakpoints.down("sm")]:{display:"block"}}),content:(0,t.css)({position:"absolute",right:0,top:"116%",zIndex:S.zIndex.dropdown,[S.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:S.zIndex.modal}})}),R=S=>({container:t.css`
      display: flex;
      align-items: center;
      white-space: nowrap;
    `,utc:t.css`
      color: ${S.v1.palette.orange};
      font-size: ${S.typography.size.sm};
      padding-left: 6px;
      line-height: 28px;
      vertical-align: bottom;
      font-weight: ${S.typography.fontWeightMedium};
    `})},36290:(Y,T,e)=>{"use strict";e.d(T,{mg:()=>c,uT:()=>o});var t=e(9892),n=e(66111),i=e(74363),s=e(67483),l=e(29826),f=e(72648),u=e(39904);function o({onChange:p,from:g,to:y,timeZone:E}){const v=d(g,y),h=r(p,E),P=(0,f.wW)(c);return n.createElement(i.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:P.body,tileClassName:P.title,value:v,nextLabel:n.createElement(u.J,{name:"angle-right"}),prevLabel:n.createElement(u.J,{name:"angle-left"}),onChange:h,locale:"en"})}o.displayName="Body";function d(p,g,y=new Date){const E=p.toDate(),v=g.toDate(),h=(0,s.CQ)(E).isValid()?E:y,P=(0,s.CQ)(v).isValid()?v:y;return h>P?[P,h]:[h,P]}function r(p,g){return(0,n.useCallback)(y=>{if(!Array.isArray(y))return console.error("onCalendarChange: should be run in selectRange={true}");const E=(0,l.J)(m(y[0]),{timeZone:g}),v=(0,l.J)(m(y[1]),{timeZone:g});p(E,v)},[p,g])}function m(p){return[p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds()]}const c=p=>{const g=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:t.css`
      color: ${p.colors.text.primary};
      background-color: ${p.colors.background.primary};
      font-size: ${p.typography.size.md};
      border: 1px solid transparent;

      &:hover {
        position: relative;
      }

      &:disabled {
        color: ${p.colors.action.disabledText};
      }
    `,body:t.css`
      z-index: ${p.zIndex.modal};
      background-color: ${p.colors.background.primary};
      width: 268px;

      .react-calendar__navigation {
        display: flex;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation__arrow,
      .react-calendar__navigation {
        padding-top: 4px;
        background-color: inherit;
        color: ${p.colors.text.primary};
        border: 0;
        font-weight: ${p.typography.fontWeightMedium};
      }

      .react-calendar__month-view__weekdays {
        background-color: inherit;
        text-align: center;
        color: ${p.colors.primary.text};

        abbr {
          border: 0;
          text-decoration: none;
          cursor: default;
          display: block;
          padding: 4px 0 4px 0;
        }
      }

      .react-calendar__month-view__days {
        background-color: inherit;
      }

      .react-calendar__tile,
      .react-calendar__tile--now {
        margin-bottom: 4px;
        background-color: inherit;
        height: 26px;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation > button:focus,
      .time-picker-calendar-tile:focus {
        outline: 0;
      }

      ${g},
      .react-calendar__tile--active,
      .react-calendar__tile--active:hover {
        color: ${p.colors.primary.contrastText};
        font-weight: ${p.typography.fontWeightMedium};
        background: ${p.colors.primary.main};
        box-shadow: none;
        border: 0px;
      }

      .react-calendar__tile--rangeEnd,
      .react-calendar__tile--rangeStart {
        padding: 0;
        border: 0px;
        color: ${p.colors.primary.contrastText};
        font-weight: ${p.typography.fontWeightMedium};
        background: ${p.colors.primary.main};

        abbr {
          background-color: ${p.colors.primary.main};
          border-radius: 100px;
          display: block;
          padding-top: 2px;
          height: 26px;
        }
      }

      ${g},
      .react-calendar__tile--rangeStart {
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
      }

      ${g},
      .react-calendar__tile--rangeEnd {
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
      }
    `}}},99489:(Y,T,e)=>{"use strict";e.d(T,{x:()=>he});var t=e(9892),n=e(66111),i=e(67483),s=e(47891),l=e(68183),f=e(14747),u=e(72648),o=e(7804),d=e(85419),r=e(37951),m=e(68226),c=e(39904),p=e(82897),g=e(56808),y=e(2594),E=e(24799),v=e(8581),h=e(31403),P=e(52566),a=e(64612),C=e(4883),D=e(10516),b=e(21356);const M=Re=>{const{timeZone:ye,fiscalYearStartMonth:Pe,timestamp:be=Date.now(),onChangeTimeZone:Be,onChangeFiscalYearStartMonth:ke}=Re,[ot,ft]=(0,n.useState)(!1),[gt,St]=(0,n.useState)("tz"),ut=(0,n.useCallback)(Ne=>{Ne&&Ne.stopPropagation(),ft(!ot)},[ot,ft]),Dt=(0,u.l4)(),ie=x(Dt);if(!(0,p.isString)(ye))return null;const De=(0,g.Pr)(ye,be);return De?n.createElement("div",null,n.createElement("section",{"aria-label":(0,r.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:ie.container},n.createElement("div",{className:ie.timeZoneContainer},n.createElement("div",{className:ie.timeZone},n.createElement(D.d,{title:De.name}),n.createElement("div",{className:ie.spacer}),n.createElement(a.K,{info:De})),n.createElement(C.v,{timeZone:ye,timestamp:be})),n.createElement("div",{className:ie.spacer}),n.createElement(h.zx,{variant:"secondary",onClick:ut,size:"sm"},n.createElement(r.c,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),ot?n.createElement("div",{className:ie.editContainer},n.createElement("div",null,n.createElement(y.S,{value:gt,options:[{label:(0,r.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,r.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:St})),gt==="tz"?n.createElement("section",{"data-testid":l.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(ie.timeZoneContainer,ie.timeSettingContainer)},n.createElement(P.O,{includeInternal:!0,onChange:Ne=>{ut(),(0,p.isString)(Ne)&&Be(Ne)},onBlur:ut})):n.createElement("section",{"aria-label":l.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(ie.timeZoneContainer,ie.timeSettingContainer)},n.createElement(E.g,{className:ie.fiscalYearField,label:(0,r.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},n.createElement(v.Ph,{value:Pe,menuShouldPortal:!1,options:b.E,onChange:Ne=>{ke&&ke(Ne.value??0)}})))):null):null},x=(0,o.B)(Re=>({container:t.css`
      border-top: 1px solid ${Re.colors.border.weak};
      padding: 11px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    `,editContainer:t.css`
      border-top: 1px solid ${Re.colors.border.weak};
      padding: 11px;
      justify-content: space-between;
      align-items: center;
      padding: 7px;
    `,spacer:t.css`
      margin-left: 7px;
    `,timeSettingContainer:t.css`
      padding-top: ${Re.spacing(1)};
    `,fiscalYearField:t.css`
      margin-bottom: 0px;
    `,timeZoneContainer:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      flex-grow: 1;
    `,timeZone:t.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
      flex-grow: 1;
    `}));var R=e(65012),S=e(29826),O=e(77258),U=e(47406),I=e(61860),F=e(46967),w=e(29952),K=e(83962),L=e(86922),V=e(27581),H=e(36290);function j({onClose:Re,onApply:ye}){const Pe=(0,u.wW)(A);return n.createElement("div",{className:Pe.container},n.createElement(h.zx,{className:Pe.apply,onClick:ye},n.createElement(r.c,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")),n.createElement(h.zx,{variant:"secondary",onClick:Re},n.createElement(r.c,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")))}j.displayName="Footer";const A=Re=>({container:t.css`
      background-color: ${Re.colors.background.primary};
      display: flex;
      justify-content: center;
      padding: 10px;
      align-items: stretch;
    `,apply:t.css`
      margin-right: 4px;
      width: 100%;
      justify-content: center;
    `});function _({onClose:Re}){const ye=(0,u.wW)(k);return n.createElement("div",{className:ye.container},n.createElement(R.r,null,n.createElement(r.c,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),n.createElement(h.zx,{"aria-label":l.wl.components.TimePicker.calendar.closeButton,icon:"times",variant:"secondary",onClick:Re}))}_.displayName="Header";const k=Re=>({container:t.css`
      background-color: ${Re.colors.background.primary};
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px;
    `}),Q=(Re,ye=!1)=>({container:t.css`
      top: 0px;
      position: absolute;
      ${ye?"left":"right"}: 544px;
      box-shadow: ${Re.shadows.z3};
      background-color: ${Re.colors.background.primary};
      z-index: -1;
      border: 1px solid ${Re.colors.border.weak};
      border-radius: 2px 0 0 2px;

      &:after {
        display: block;
        background-color: ${Re.colors.background.primary};
        width: 19px;
        height: 100%;
        content: ${ye?"":" "};
        position: absolute;
        top: 0;
        right: -19px;
        border-left: 1px solid ${Re.colors.border.weak};
      }
    `,modal:t.css`
      box-shadow: ${Re.shadows.z3};
      left: 50%;
      position: fixed;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index: ${Re.zIndex.modal};
    `,content:t.css`
      margin: 0 auto;
      width: 268px;
    `});function re(Re){const ye=(0,u.l4)(),{modalBackdrop:Pe}=(0,V.J)(ye),be=Q(ye,Re.isReversed),{isOpen:Be,isFullscreen:ke,onClose:ot}=Re,ft=n.createRef(),{dialogProps:gt}=(0,w.R)({"aria-label":l.wl.components.TimePicker.calendar.label},ft),{overlayProps:St}=(0,L.Ir)({isDismissable:!0,isOpen:Be,onClose:ot},ft);return Be?ke?n.createElement(K.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement("section",{className:be.container,ref:ft,...St,...gt},n.createElement(_,{...Re}),n.createElement(H.uT,{...Re}))):n.createElement(L.Xj,null,n.createElement("div",{className:Pe}),n.createElement(K.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("section",{className:be.modal,ref:ft,...St,...gt},n.createElement("div",{className:be.content,"aria-label":l.wl.components.TimePicker.calendar.label},n.createElement(_,{...Re}),n.createElement(H.uT,{...Re}),n.createElement(j,{...Re}))))):null}const Z=(0,n.memo)(re);re.displayName="TimePickerCalendar";const oe={default:()=>(0,r.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,r.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},G=Re=>{const{value:ye,isFullscreen:Pe=!1,timeZone:be,onApply:Be,isReversed:ke,fiscalYearStartMonth:ot}=Re,[ft,gt]=fe(ye.raw.from,ye.raw.to,be),St=(0,u.wW)(ee),[ut,Dt]=(0,n.useState)(ft),[ie,De]=(0,n.useState)(gt),[Ne,Je]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const[Et,pt]=fe(ye.raw.from,ye.raw.to,be);Dt(Et),De(pt)},[ye.raw.from,ye.raw.to,be]);const Xe=(0,n.useCallback)(Et=>{Et.preventDefault(),Je(!0)},[Je]),Le=(0,n.useCallback)(()=>{if(ie.invalid||ut.invalid)return;const Et={from:ut.value,to:ie.value},pt=s.convertRawToRange(Et,be,ot);Be(pt)},[ut.invalid,ut.value,Be,be,ie.invalid,ie.value,ot]),Ue=(0,n.useCallback)((Et,pt)=>{const[je,ht]=fe(Et,pt,be);Dt(je),De(ht)},[be]),ve=Et=>{Et.key==="Enter"&&Le()},Se=s.convertRawToRange({from:"now/fy",to:"now/fy"},be,ot),$e=(0,r.t)("time-picker.range-content.fiscal-year","Fiscal year"),Ye=n.createElement("div",{className:St.tooltip},s.isFiscal(ye)?n.createElement(I.u,{content:`${$e}: ${Se.from.format("MMM-DD")} - ${Se.to.format("MMM-DD")}`},n.createElement(c.J,{name:"info-circle"})):null),_e=n.createElement(h.zx,{"aria-label":l.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:Xe});return n.createElement("div",null,n.createElement("div",{className:St.fieldContainer},n.createElement(E.g,{label:(0,r.t)("time-picker.range-content.from-input","From"),invalid:ut.invalid,error:ut.errorMessage},n.createElement(F.I,{onClick:Et=>Et.stopPropagation(),onChange:Et=>Ue(Et.currentTarget.value,ie.value),addonAfter:_e,onKeyDown:ve,"aria-label":l.wl.components.TimePicker.fromField,value:ut.value})),Ye),n.createElement("div",{className:St.fieldContainer},n.createElement(E.g,{label:(0,r.t)("time-picker.range-content.to-input","To"),invalid:ie.invalid,error:ie.errorMessage},n.createElement(F.I,{onClick:Et=>Et.stopPropagation(),onChange:Et=>Ue(ut.value,Et.currentTarget.value),addonAfter:_e,onKeyDown:ve,"aria-label":l.wl.components.TimePicker.toField,value:ie.value})),Ye),n.createElement(h.zx,{"data-testid":l.wl.components.TimePicker.applyTimeRange,type:"button",onClick:Le},n.createElement(r.c,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range")),n.createElement(Z,{isFullscreen:Pe,isOpen:Ne,from:(0,S.J)(ut.value),to:(0,S.J)(ie.value),onApply:Le,onClose:()=>Je(!1),onChange:Ue,timeZone:be,isReversed:ke}))};function le(Re,ye,Pe){const be={from:Re,to:ye},Be=s.convertRawToRange(be,Pe);return!(Be.from.isSame(Be.to)||Be.from.isBefore(Be.to))}function fe(Re,ye,Pe){const be=ae(Re,Pe),Be=ae(ye,Pe),ke=!de(be,!1,Pe),ot=!de(Be,!0,Pe),ft=le(be,Be,Pe)&&!ot;return[{value:be,invalid:ke||ft,errorMessage:ft&&!ke?oe.range():oe.default()},{value:Be,invalid:ot,errorMessage:oe.default()}]}function ae(Re,ye){return(0,i.v9)(Re)?(0,O.dq)(Re,{timeZone:ye}):Re}function de(Re,ye,Pe){return(0,i.v9)(Re)?Re.isValid():U.isMathString(Re)?U.isValid(Re):(0,S.J)(Re,{roundUp:ye,timeZone:Pe}).isValid()}function ee(Re){return{fieldContainer:t.css`
      display: flex;
    `,tooltip:t.css`
      padding-left: ${Re.spacing(1)};
      padding-top: ${Re.spacing(3)};
    `}}var me=e(98574);const q=(Re,ye)=>s.convertRawToRange({from:Re.from,to:Re.to},ye),ne=(Re,ye)=>{const Pe=(0,O.dq)(Re.from,{timeZone:ye}),be=(0,O.dq)(Re.to,{timeZone:ye});return{from:Pe,to:be,display:`${Pe} to ${be}`}},se=Re=>{const{quickOptions:ye=[],isReversed:Pe,isFullscreen:be,hideQuickRanges:Be,timeZone:ke,fiscalYearStartMonth:ot,value:ft,onChange:gt,history:St,showHistory:ut,className:Dt,hideTimeZone:ie,onChangeTimeZone:De,onChangeFiscalYearStartMonth:Ne}=Re,Je=!St?.length,Xe=be&&ut||!be&&(ut&&!Je||!Be),Le=(0,u.l4)(),Ue=Ke(Le,Pe,Be,Xe,be),ve=ct(St,ke),Se=Ie(ft.raw,ye),[$e,Ye]=(0,n.useState)(""),_e=ye.filter(pt=>pt.display.toLowerCase().includes($e.toLowerCase())),Et=pt=>gt(q(pt));return n.createElement("div",{id:"TimePickerContent",className:(0,t.cx)(Ue.container,Dt)},n.createElement("div",{className:Ue.body},(!be||!Be)&&n.createElement("div",{className:Ue.rightSide},n.createElement("div",{className:Ue.timeRangeFilter},n.createElement(f.H,{width:0,autoFocus:!0,value:$e,onChange:Ye,placeholder:(0,r.t)("time-picker.content.filter-placeholder","Search quick ranges")})),n.createElement(m.$,null,!be&&n.createElement(ue,{...Re,historyOptions:ve}),!Be&&n.createElement(me.V,{options:_e,onChange:Et,value:Se}))),be&&n.createElement("div",{className:Ue.leftSide},n.createElement(Te,{...Re,historyOptions:ve}))),!ie&&be&&n.createElement(M,{timeZone:ke,fiscalYearStartMonth:ot,onChangeTimeZone:De,onChangeFiscalYearStartMonth:Ne}))},he=Re=>{const{widthOverride:ye}=Re,Pe=(0,u.l4)(),be=(ye||window.innerWidth)>=Pe.breakpoints.values.lg;return n.createElement(se,{...Re,isFullscreen:be})},ue=Re=>{const{value:ye,hideQuickRanges:Pe,onChange:be,timeZone:Be,historyOptions:ke=[],showHistory:ot}=Re,ft=(0,u.l4)(),gt=Ge(ft),St=(0,i.v9)(ye.raw.from)||(0,i.v9)(ye.raw.to),[ut,Dt]=(0,n.useState)(!St),ie=Pe?!1:ut,De=Ne=>be(q(Ne,Be));return n.createElement("fieldset",null,n.createElement("div",{className:gt.header},n.createElement("button",{type:"button",className:gt.expandButton,onClick:()=>{Pe||Dt(!ie)},"data-testid":l.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!ie,"aria-controls":"expanded-timerange"},n.createElement(R.r,null,n.createElement(r.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!Pe&&n.createElement(c.J,{name:ie?"angle-down":"angle-up"}))),!ie&&n.createElement("div",{className:gt.body,id:"expanded-timerange"},n.createElement("div",{className:gt.form},n.createElement(G,{value:ye,onApply:be,timeZone:Be,isFullscreen:!1})),ot&&n.createElement(me.V,{title:(0,r.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:ke,onChange:De,placeholderEmpty:null})))},Te=Re=>{const{onChange:ye,value:Pe,timeZone:be,fiscalYearStartMonth:Be,isReversed:ke,historyOptions:ot}=Re,ft=(0,u.l4)(),gt=at(ft,Re.hideQuickRanges),St=ut=>ye(q(ut,be));return n.createElement(n.Fragment,null,n.createElement("div",{className:gt.container},n.createElement("div",{className:gt.title,"data-testid":l.wl.components.TimePicker.absoluteTimeRangeTitle},n.createElement(R.r,null,n.createElement(r.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),n.createElement(G,{value:Pe,timeZone:be,fiscalYearStartMonth:Be,onApply:ye,isFullscreen:!0,isReversed:ke})),Re.showHistory&&n.createElement("div",{className:gt.recent},n.createElement(me.V,{title:(0,r.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:ot||[],onChange:St,placeholderEmpty:n.createElement(Ve,null)})))},Ve=(0,n.memo)(()=>{const Re=(0,u.l4)(),ye=dt(Re);return n.createElement("div",{className:ye.container},n.createElement(r.c,{i18nKey:"time-picker.content.empty-recent-list"},n.createElement("div",null,n.createElement("span",null,"It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.")),n.createElement("div",null,n.createElement("a",{className:ye.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),n.createElement("span",null," to find out more about how to enter custom time ranges."))))});function ct(Re,ye){return!Array.isArray(Re)||Re.length===0?[]:Re.map(Pe=>ne(Pe,ye))}Ve.displayName="EmptyRecentList";const Ie=(Re,ye)=>(0,n.useMemo)(()=>{if(s.isRelativeTimeRange(Re))return ye.find(Pe=>Pe.from===Re.from&&Pe.to===Re.to)},[Re,ye]),Ke=(0,o.B)((Re,ye,Pe,be,Be)=>({container:t.css`
      background: ${Re.colors.background.primary};
      box-shadow: ${Re.shadows.z3};
      width: ${Be?"546px":"262px"};
      border-radius: 2px;
      border: 1px solid ${Re.colors.border.weak};
      ${ye?"left":"right"}: 0;
    `,body:t.css`
      display: flex;
      flex-direction: row-reverse;
      height: ${be?"381px":"217px"};
    `,leftSide:t.css`
      display: flex;
      flex-direction: column;
      border-right: ${ye?"none":`1px solid ${Re.colors.border.weak}`};
      width: ${Pe?"100%":"60%"};
      overflow: hidden;
      order: ${ye?1:0};
    `,rightSide:t.css`
      width: ${Be?"40%":"100%"}; !important;
      border-right: ${ye?`1px solid ${Re.colors.border.weak}`:"none"};
      display: flex;
      flex-direction: column;
    `,timeRangeFilter:t.css`
      padding: ${Re.spacing(1)};
    `,spacing:t.css`
      margin-top: 16px;
    `})),Ge=(0,o.B)(Re=>({header:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid ${Re.colors.border.weak};
      padding: 7px 9px 7px 9px;
    `,expandButton:t.css`
      background-color: transparent;
      border: none;
      display: flex;
      width: 100%;

      &:focus-visible {
        ${(0,d.getFocusStyles)(Re)}
      }
    `,body:t.css`
      border-bottom: 1px solid ${Re.colors.border.weak};
    `,form:t.css`
      padding: 7px 9px 7px 9px;
    `})),at=(0,o.B)((Re,ye)=>({container:t.css`
      padding-top: 9px;
      padding-left: 11px;
      padding-right: ${ye?"11px":"20%"};
    `,title:t.css`
      margin-bottom: 11px;
    `,recent:t.css`
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding-top: ${Re.spacing(1)};
    `})),dt=(0,o.B)(Re=>({container:t.css`
      padding: 12px;
      margin: 12px;

      a,
      span {
        font-size: 13px;
      }\
    `,link:t.css`
      color: ${Re.colors.text.link};
    `}))},65012:(Y,T,e)=>{"use strict";e.d(T,{r:()=>l});var t=e(9892),n=e(66111),i=e(72648);const s=f=>({text:t.css`
      font-size: ${f.typography.size.md};
      font-weight: ${f.typography.fontWeightMedium};
      color: ${f.colors.text.primary};
      margin: 0;
      display: flex;
    `}),l=(0,n.memo)(({children:f})=>{const u=(0,i.wW)(s);return n.createElement("h3",{className:u.text},f)});l.displayName="TimePickerTitle"},98574:(Y,T,e)=>{"use strict";e.d(T,{V:()=>p});var t=e(9892),n=e(66111),i=e(7804),s=e(37951),l=e(65012),f=e(44288),u=e(72648),o=e(85419);const d=v=>({container:t.css`
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      justify-content: space-between;
    `,selected:t.css`
      background: ${v.colors.action.selected};
      font-weight: ${v.typography.fontWeightMedium};
    `,radio:t.css`
      opacity: 0;
      width: 0 !important;

      &:focus-visible + label {
        ${(0,o.getFocusStyles)(v)};
      }
    `,label:t.css`
      cursor: pointer;
      flex: 1;
      padding: 7px 9px 7px 9px;

      &:hover {
        background: ${v.colors.action.hover};
        cursor: pointer;
      }
    `}),r=(0,n.memo)(({value:v,onSelect:h,selected:P=!1,name:a})=>{const C=(0,u.wW)(d),D=(0,f.Z)();return n.createElement("li",{className:(0,t.cx)(C.container,P&&C.selected)},n.createElement("input",{className:C.radio,checked:P,name:a,type:"checkbox",id:D,onChange:()=>h(v)}),n.createElement("label",{className:C.label,htmlFor:D},v.display))});r.displayName="TimeRangeOption";const m=(0,i.B)(()=>({title:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 16px 5px 9px;
    `})),c=(0,i.B)(()=>({grow:t.css`
      flex-grow: 1;
      align-items: flex-start;
    `})),p=v=>{const h=m(),{title:P,options:a,placeholderEmpty:C}=v;return typeof C<"u"&&a.length<=0?n.createElement(n.Fragment,null,C):P?n.createElement("section",{"aria-label":P},n.createElement("fieldset",null,n.createElement("div",{className:h.title},n.createElement(l.r,null,P)),n.createElement(g,{...v}))):n.createElement(g,{...v})},g=({options:v,value:h,onChange:P,title:a})=>{const C=c();return n.createElement(n.Fragment,null,n.createElement("ul",{"aria-roledescription":(0,s.t)("time-picker.time-range.aria-role","Time range selection")},v.map((D,b)=>n.createElement(r,{key:y(D,b),value:D,selected:E(D,h),onSelect:P,name:a??(0,s.t)("time-picker.time-range.default-title","Time ranges")}))),n.createElement("div",{className:C.grow}))};function y(v,h){return`${v.from}-${v.to}-${h}`}function E(v,h){return!h||!v?!1:h.from===v.from&&h.to===v.to}},52566:(Y,T,e)=>{"use strict";e.d(T,{O:()=>P});var t=e(82897),n=e(66111),i=e(56808),s=e(37951),l=e(8581),f=e(9892),u=e(72648);const o=x=>{const{children:R,label:S}=x,O=(0,u.wW)(d);return S?n.createElement("div",null,n.createElement("div",{className:O.header},n.createElement("span",{className:O.label},S)),R):n.createElement("div",null,R)},d=x=>({header:f.css`
      padding: 7px 10px;
      width: 100%;
      border-top: 1px solid ${x.colors.border.weak};
      text-transform: capitalize;
    `,label:f.css`
      font-size: ${x.typography.size.sm};
      color: ${x.colors.text.secondary};
      font-weight: ${x.typography.fontWeightMedium};
    `});var r=e(4883),m=e(7804),c=e(39904),p=e(64612),g=e(10516);const y="tz-utc-offset",E=x=>{const{children:R,innerProps:S,innerRef:O,data:U,isSelected:I,isFocused:F}=x,w=(0,u.l4)(),K=h(w),L=Date.now(),V=(0,f.cx)(K.container,F&&K.containerFocused);if(!(0,t.isString)(U.value))return null;const H=(0,i.Pr)(U.value,L);return n.createElement("div",{className:V,...S,ref:O,"aria-label":"Select option"},n.createElement("div",{className:(0,f.cx)(K.leftColumn,K.row)},n.createElement("div",{className:(0,f.cx)(K.leftColumn,K.wideRow)},n.createElement(g.d,{title:R}),n.createElement("div",{className:K.spacer}),n.createElement(p.K,{info:H})),n.createElement("div",{className:K.rightColumn},n.createElement(r.v,{timeZone:H?.ianaName||U.value,timestamp:L,className:y}),I&&n.createElement("span",null,n.createElement(c.J,{name:"check"})))))},v=x=>{const{children:R,innerProps:S,innerRef:O,data:U,isSelected:I,isFocused:F}=x,w=(0,u.l4)(),K=h(w),L=Date.now(),V=(0,f.cx)(K.container,F&&K.containerFocused);if(!(0,t.isString)(U.value))return null;const H=(0,i.Pr)(U.value,L);return n.createElement("div",{className:V,...S,ref:O,"aria-label":"Select option"},n.createElement("div",{className:K.body},n.createElement("div",{className:K.row},n.createElement("div",{className:K.leftColumn},n.createElement(g.d,{title:R})),n.createElement("div",{className:K.rightColumn},I&&n.createElement("span",null,n.createElement(c.J,{name:"check"})))),n.createElement("div",{className:K.row},n.createElement("div",{className:K.leftColumn},n.createElement(p.K,{info:H})),n.createElement("div",{className:K.rightColumn},n.createElement(r.v,{timestamp:L,timeZone:H?.ianaName||U.value,className:y})))))},h=(0,m.B)(x=>({container:f.css`
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      padding: 6px 8px 4px;

      &:hover {
        background: ${x.colors.action.hover};
      }
    `,containerFocused:f.css`
      background: ${x.colors.action.hover};
    `,body:f.css`
      display: flex;
      font-weight: ${x.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,row:f.css`
      display: flex;
      flex-direction: row;
    `,leftColumn:f.css`
      flex-grow: 1;
      text-overflow: ellipsis;
    `,rightColumn:f.css`
      justify-content: flex-end;
      align-items: center;
    `,wideRow:f.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
    `,spacer:f.css`
      margin-left: 6px;
    `})),P=x=>{const{onChange:R,width:S,autoFocus:O=!1,onBlur:U,value:I,includeInternal:F=!1,disabled:w=!1,inputId:K,menuShouldPortal:L=!1,openMenuOnFocus:V=!0}=x,H=a(F),j=C(H,I),A=b(),_=S&&S<=45?v:E,k=(0,n.useCallback)(Q=>{if(!Q||!(0,t.isString)(Q.value))return R(I);R(Q.value)},[R,I]);return n.createElement(l.Ph,{inputId:K,value:j,placeholder:(0,s.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:O,menuShouldPortal:L,openMenuOnFocus:V,width:S,filterOption:A,options:H,onChange:k,onBlur:U,components:{Option:_,Group:o},disabled:w,"aria-label":(0,s.t)("time-picker.zone.select-aria-label","Time zone picker")})},a=x=>{const R=Date.now();return(0,i.$8)(x).map(O=>{const U=O.zones.reduce((I,F)=>{const w=(0,i.Pr)(F,R);return w&&I.push({label:w.name,value:w.zone,searchIndex:M(w,R)}),I},[]);return{label:O.name,options:U}})},C=(x,R)=>(0,n.useMemo)(()=>{if(R===void 0)return;const S=(0,t.toLower)(R);return x.find(U=>U.label?S.startsWith((0,t.toLower)(U.label)):D(S))?.options.find(U=>(0,t.isEmpty)(S)?U.value===i.RQ.default:(0,t.toLower)(U.value)===S)},[x,R]),D=x=>{switch(x){case i.RQ.default:case i.RQ.localBrowserTime:case i.RQ.utc:return!0;default:return!1}},b=()=>(0,n.useCallback)((x,R)=>!R||!x.data||!x.data.searchIndex?!0:x.data.searchIndex.indexOf((0,t.toLower)(R))>-1,[]),M=(x,R)=>{const S=[(0,t.toLower)(x.name),(0,t.toLower)(x.abbreviation),(0,t.toLower)((0,r.k)(R,x.zone))];for(const O of x.countries)S.push((0,t.toLower)(O.name)),S.push((0,t.toLower)(O.code));return S.join("|")}},64612:(Y,T,e)=>{"use strict";e.d(T,{K:()=>s});var t=e(9892),n=e(66111),i=e(72648);const s=({info:u})=>{const o=(0,i.wW)(f),d=l(u);return u?n.createElement("div",{className:o.description},d):null},l=u=>(0,n.useMemo)(()=>{const o=[];if(!u)return"";if(u.countries.length>0){const d=u.countries[0];o.push(d.name)}return u.abbreviation&&o.push(u.abbreviation),o.join(", ")},[u]),f=u=>({description:t.css`
      font-weight: normal;
      font-size: ${u.typography.size.sm};
      color: ${u.colors.text.secondary};
      white-space: normal;
      text-overflow: ellipsis;
    `})},4883:(Y,T,e)=>{"use strict";e.d(T,{k:()=>o,v:()=>u});var t=e(9892),n=e(82897),i=e.n(n),s=e(66111),l=e(77258),f=e(72648);const u=r=>{const{timestamp:m,timeZone:c,className:p}=r,g=(0,f.wW)(d);return(0,n.isString)(c)?s.createElement(s.Fragment,null,s.createElement("span",{className:(0,t.cx)(g.offset,p)},o(m,c))):null},o=(r,m)=>{const c=(0,l.dq)(r,{timeZone:m,format:"Z"});return c==="+00:00"?"UTC":`UTC${c}`},d=r=>{const m=t.css`
    font-weight: normal;
    font-size: ${r.typography.size.sm};
    color: ${r.colors.text.secondary};
    white-space: normal;
  `;return{offset:t.css`
      ${m};
      color: ${r.colors.text.primary};
      background: ${r.colors.background.secondary};
      padding: 2px 5px;
      border-radius: 2px;
      margin-left: 4px;
    `}}},10516:(Y,T,e)=>{"use strict";e.d(T,{d:()=>s});var t=e(9892),n=e(66111),i=e(72648);const s=({title:f})=>{const u=(0,i.wW)(l);return f?n.createElement("span",{className:u.title},f):null},l=f=>({title:t.css`
      font-weight: ${f.typography.fontWeightRegular};
      text-overflow: ellipsis;
    `})},80124:(Y,T,e)=>{"use strict";e.d(T,{z:()=>l});var t=e(66111),n=e(68183),i=e(8581);const s=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],l=f=>{const{onChange:u,width:o,autoFocus:d=!1,onBlur:r,value:m,disabled:c=!1,inputId:p}=f,g=(0,t.useCallback)(y=>{y.value!==void 0&&u(y.value)},[u]);return t.createElement(i.Ph,{inputId:p,value:s.find(y=>y.value===m)?.value,placeholder:n.wl.components.WeekStartPicker.placeholder,autoFocus:d,openMenuOnFocus:!0,width:o,options:s,onChange:g,onBlur:r,disabled:c})}},21356:(Y,T,e)=>{"use strict";e.d(T,{E:()=>n,r:()=>t});const t=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],n=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},30979:(Y,T,e)=>{"use strict";e.d(T,{d:()=>p});var t=e(9892),n=e(29952),i=e(83962),s=e(86922),l=e(6756),f=e(66111),u=e(17650),o=e(68183),d=e(72648),r=e(31403),m=e(68226),c=e(17937);function p({children:v,onClose:h,closeOnMaskClick:P=!0,scrollableContent:a=!1,title:C,subtitle:D,width:b,size:M="md",tabs:x}){const R=(0,d.wW)(E),S=f.useRef(null),{dialogProps:O,titleProps:U}=(0,n.R)({},S),{overlayProps:I}=(0,s.Ir)({isDismissable:!1,isOpen:!0,onClose:h},S);y(),(0,u.Z)(S,P?h:g);const F=(0,t.cx)(R.drawer,!b&&R.sizes[M]),w=f.createElement("div",{className:R.content},v);return f.createElement(l.Z,{open:!0,onClose:h,placement:"right",width:b??"",getContainer:".main-view",className:R.drawerContent,rootClassName:F,motion:{motionAppear:!0,motionName:R.drawerMotion},maskClassName:R.mask,maskClosable:P,maskMotion:{motionAppear:!0,motionName:R.maskMotion}},f.createElement(i.MT,{restoreFocus:!0,contain:!0,autoFocus:!0},f.createElement("div",{"aria-label":typeof C=="string"?o.wl.components.Drawer.General.title(C):o.wl.components.Drawer.General.title("no title"),className:R.container,...I,...O,ref:S},typeof C=="string"&&f.createElement("div",{className:(0,t.cx)(R.header,Boolean(x)&&R.headerWithTabs)},f.createElement("div",{className:R.actions},f.createElement(r.zx,{icon:"times",variant:"secondary",fill:"text",onClick:h,"aria-label":o.wl.components.Drawer.General.close})),f.createElement("div",{className:R.titleWrapper},f.createElement(c.x,{as:"h3",...U},C),D&&f.createElement("div",{className:R.subtitle},D),x&&f.createElement("div",{className:R.tabsWrapper},x))),typeof C!="string"&&C,f.createElement("div",{className:R.contentScroll},a?f.createElement(m.$,{autoHeightMin:"100%"},w):w))))}function g(){}function y(){(0,f.useEffect)(()=>{if(document.body)return document.body.classList.add("body-drawer-open"),()=>{document.body.classList.remove("body-drawer-open")}},[])}const E=v=>({container:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      flex: 1 1 0;
    `,drawer:t.css`
      .main-view & {
        top: 81px;
      }

      .main-view--search-bar-hidden & {
        top: 41px;
      }

      .rc-drawer-content-wrapper {
        box-shadow: ${v.shadows.z3};

        ${v.breakpoints.down("sm")} {
          width: calc(100% - ${v.spacing(2)}) !important;
          min-width: 0 !important;
        }
      }
    `,sizes:{sm:(0,t.css)({".rc-drawer-content-wrapper":{label:"drawer-sm",width:"25vw",minWidth:v.spacing(48)}}),md:(0,t.css)({".rc-drawer-content-wrapper":{label:"drawer-md",width:"50vw",minWidth:v.spacing(60)}}),lg:(0,t.css)({".rc-drawer-content-wrapper":{label:"drawer-lg",width:"75vw",minWidth:v.spacing(93),[v.breakpoints.down("md")]:{width:`calc(100% - ${v.spacing(2)}) !important`,minWidth:0}}})},drawerContent:t.css`
      background-color: ${v.colors.background.primary} !important;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      z-index: ${v.zIndex.dropdown};
    `,drawerMotion:t.css`
      &-appear {
        transform: translateX(100%);
        transition: none !important;

        &-active {
          transition: ${v.transitions.create("transform")} !important;
          transform: translateX(0);
        }
      }
    `,mask:t.css`
      background-color: ${v.components.overlay.background} !important;
      backdrop-filter: blur(1px);
    `,maskMotion:t.css`
      &-appear {
        opacity: 0;

        &-active {
          opacity: 1;
          transition: ${v.transitions.create("opacity")};
        }
      }
    `,header:(0,t.css)({flexGrow:0,padding:v.spacing(3,2),borderBottom:`1px solid ${v.colors.border.weak}`}),headerWithTabs:(0,t.css)({borderBottom:"none"}),actions:(0,t.css)({position:"absolute",right:v.spacing(1),top:v.spacing(2)}),titleWrapper:t.css`
      overflow-wrap: break-word;
    `,subtitle:(0,t.css)({color:v.colors.text.secondary,paddingTop:v.spacing(1)}),content:(0,t.css)({padding:v.spacing(2),height:"100%",flexGrow:1}),contentScroll:(0,t.css)({minHeight:0,flex:1}),tabsWrapper:(0,t.css)({paddingLeft:v.spacing(2),margin:v.spacing(2,-1,-3,-3)})})},44342:(Y,T,e)=>{"use strict";e.d(T,{d:()=>g});var t=e(9892),n=e(88962),i=e(83962),s=e(61781),l=e(61960),f=e(66111),u=e(72648),o=e(26202),d=e(94437),r=e(95130),m=e(42044),c=e(64319);const p=E=>{const{className:v,options:h,value:P,onChange:a,narrow:C,variant:D,...b}=E,M=(0,u.wW)(y),x=(0,l.W)({}),R=f.useRef(null),{menuTriggerProps:S,menuProps:O}=(0,s.u4)({},x,R),{buttonProps:U}=(0,n.U)(S,R),I=F=>{a(F),x.close()};return f.createElement(o.h,{className:M.wrapper},f.createElement(c.h,{className:v,isOpen:x.isOpen,narrow:C,variant:D,ref:R,...U,...b},P?.label||(P?.value!=null?String(P?.value):null)),x.isOpen&&f.createElement("div",{className:M.menuWrapper},f.createElement(d.L,{onClick:x.close,parent:document,includeButtonPress:!1},f.createElement(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},f.createElement(r.v,{tabIndex:-1,onClose:x.close,...O},h.map(F=>f.createElement(m.s,{key:`${F.value}`,label:F.label??String(F.value),onClick:()=>I(F),active:F.value===P?.value,ariaChecked:F.value===P?.value,ariaLabel:F.ariaLabel||F.label,role:"menuitemradio"})))))))};p.displayName="ButtonSelect";const g=f.memo(p),y=E=>({wrapper:t.css`
      position: relative;
      display: inline-flex;
    `,menuWrapper:t.css`
      position: absolute;
      z-index: ${E.zIndex.dropdown};
      top: ${E.spacing(4)};
      right: 0;
    `})},71698:(Y,T,e)=>{"use strict";e.d(T,{L:()=>o});var t=e(9892),n=e(83962),i=e(66111),s=e(27480),l=e(79288),f=e(61970),u=e(85511);const o=i.memo(({children:r,overlay:m,placement:c,offset:p,onVisibleChange:g})=>{const[y,E]=(0,i.useState)(!1),v=(0,i.useRef)(null);(0,i.useEffect)(()=>{g?.(y)},[g,y]);const{getArrowProps:h,getTooltipProps:P,setTooltipRef:a,setTriggerRef:C,visible:D}=(0,s.O)({visible:y,placement:c,onVisibleChange:E,interactive:!0,delayHide:0,delayShow:0,offset:p??[0,8],trigger:["click"]}),b=150,M=d(b),x=()=>{E(!1)},R=S=>{(S.key==="Escape"||S.key==="Tab")&&E(!1)};return i.createElement(i.Fragment,null,i.cloneElement(r,{ref:C}),D&&i.createElement(u.h_,null,i.createElement(n.MT,{autoFocus:!0,restoreFocus:!0,contain:!0},i.createElement("div",{ref:a,...P(),onClick:x,onKeyDown:R},i.createElement("div",{...h({className:"tooltip-arrow"})}),i.createElement(l.Z,{nodeRef:v,appear:!0,in:!0,timeout:{appear:b,exit:0,enter:0},classNames:M},i.createElement("div",{ref:v},f.renderOrCallToRender(m,{})))))))});o.displayName="Dropdown";const d=r=>({appear:(0,t.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,t.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${r}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${r}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},69097:(Y,T,e)=>{"use strict";e.d(T,{K:()=>s});var t=e(9892),n=e(66111),i=e(72648);const s=({children:f})=>{const u=(0,i.wW)(l);return n.createElement("div",{className:u.container},f)},l=f=>({container:t.css`
      border-left: 3px solid ${f.colors.info.main};
      background-color: ${f.colors.background.secondary};
      padding: ${f.spacing(2)};
      min-width: 350px;
      border-radius: ${f.shape.radius.default};
      margin-bottom: ${f.spacing(4)};
    `})},53546:(Y,T,e)=>{"use strict";e.d(T,{Pf:()=>o,SV:()=>f,z4:()=>u});var t=e(37916),n=e(66111),i=e(53843),s=e(45253),l=e(39198);class f extends n.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(r,m){(0,t.Tb)(r,{contexts:{react:{componentStack:m.componentStack}}}),i.s?.api?.pushError(r),this.setState({error:r,errorInfo:m}),this.props.onError&&this.props.onError(r)}componentDidUpdate(r){const{dependencies:m,onRecover:c}=this.props;if(this.state.error&&m&&r.dependencies){for(let p=0;p<m.length;p++)if(m[p]!==r.dependencies[p]){this.setState({error:null,errorInfo:null}),c&&c();break}}}render(){const{children:r}=this.props,{error:m,errorInfo:c}=this.state;return r({error:m,errorInfo:c})}}class u extends n.PureComponent{render(){const{title:r,children:m,style:c,dependencies:p}=this.props;return n.createElement(f,{dependencies:p},({error:g,errorInfo:y})=>y?c==="alertbox"?n.createElement(s.b,{title:r||""},n.createElement("details",{style:{whiteSpace:"pre-wrap"}},g&&g.toString(),n.createElement("br",null),y.componentStack)):n.createElement(l.X,{title:r||"",error:g,errorInfo:y}):m)}}u.defaultProps={title:"An unexpected error happened",style:"alertbox"};function o(d,r={}){const m=c=>n.createElement(u,{...r},n.createElement(d,{...c}));return m.displayName="WithErrorBoundary",m}},39198:(Y,T,e)=>{"use strict";e.d(T,{X:()=>l});var t=e(9892),n=e(66111),i=e(7804);const s=(0,i.B)(()=>t.css`
    width: 500px;
    margin: 64px auto;
  `),l=({error:f,errorInfo:u,title:o})=>n.createElement("div",{className:s()},n.createElement("h2",null,o),n.createElement("details",{style:{whiteSpace:"pre-wrap"}},f&&f.toString(),n.createElement("br",null),u&&u.componentStack));l.displayName="ErrorWithStack"},30784:(Y,T,e)=>{"use strict";e.d(T,{A_:()=>y,Yo:()=>c});var t=e(9892),n=e(82897),i=e.n(n),s=e(66111),l=e(85191),f=e(92138),u=e(2703),o=e(72648),d=e(45253),r=e(39904),m=e(27119);function c({options:a,children:C,readAs:D,onLoad:b,fileListRenderer:M,onFileRemove:x}){const[R,S]=(0,s.useState)([]),[O,U]=(0,s.useState)([]),I=(0,u.Cf)("decbytes")(a?.maxSize?a?.maxSize:0),F=(0,s.useCallback)((Z,oe)=>{S(G=>G.map(le=>(le.id===Z.id&&oe(le),le)))},[]),w=(0,s.useCallback)((Z,oe,G)=>{let le=Z.map(h);if(a?.multiple===!1?S(le):S(fe=>[...fe,...le]),k(oe),a?.onDrop)a.onDrop(Z,oe,G);else for(const fe of le){const ae=new FileReader,de=()=>{D?ae[D](fe.file):ae.readAsText(fe.file)};F(fe,ee=>{ee.abortUpload=()=>{ae.abort()},ee.retryUpload=()=>{F(fe,me=>{me.error=null,me.progress=void 0}),de()}}),ae.onabort=()=>{F(fe,ee=>{ee.error=new DOMException("Aborted")})},ae.onprogress=ee=>{F(fe,me=>{me.progress=ee.loaded})},ae.onload=()=>{b?.(ae.result)},ae.onerror=()=>{F(fe,ee=>{ee.error=ae.error})},de()}},[b,a,D,F]),K=Z=>{const oe=R.filter(G=>Z.id!==G.id);S(oe),x?.(Z)},{getRootProps:L,getInputProps:V,isDragActive:H}=(0,l.uI)({...a,useFsAccessApi:!1,onDrop:w,accept:g(a?.accept)}),j=(0,o.l4)(),A=P(j,H),_=R.map(Z=>M?M(Z,K):s.createElement(m.K,{key:Z.id,file:Z,removeFile:K})),k=Z=>{let oe=[];Z.map(G=>{G.errors.map(le=>{oe.findIndex(fe=>fe.code===le.code&&fe.message===le.message)===-1&&oe.push(le)})}),U(oe)},Q=Z=>s.createElement("div",{className:A.errorAlert},s.createElement(d.b,{title:"Upload failed",severity:"error",onRemove:re},Z.map(oe=>{switch(oe.code){case f.jK.FileTooLarge:return s.createElement("div",{key:oe.message+oe.code},"File is larger than ",(0,u.zc)(I));default:return s.createElement("div",{key:oe.message+oe.code},oe.message)}}))),re=()=>{U([])};return s.createElement("div",{className:A.container},s.createElement("div",{"data-testid":"dropzone",...L({className:A.dropzone})},s.createElement("input",{...V()}),C??s.createElement(y,{primaryText:E(R,a)})),O.length>0&&Q(O),s.createElement("small",{className:(0,t.cx)(A.small,A.acceptContainer)},a?.maxSize&&`Max file size: ${(0,u.zc)(I)}`,a?.maxSize&&a?.accept&&s.createElement("span",{className:A.acceptSeparator},"|"),a?.accept&&v(a.accept)),_)}function p(a){return["txt","json","csv","xls","yml"].some(C=>a.match(C))?"text/plain":"application/octet-stream"}function g(a){return(0,n.isString)(a)?{[p(a)]:[a]}:Array.isArray(a)?a.reduce((C,D)=>{const b=p(D);return C[b]=C[b]?[...C[b],D]:[D],C},{}):a}function y({primaryText:a="Drop file here or click to upload",secondaryText:C=""}){const D=(0,o.l4)(),b=P(D);return s.createElement("div",{className:(0,t.cx)(b.defaultDropZone)},s.createElement(r.J,{className:(0,t.cx)(b.icon),name:"upload",size:"xl"}),s.createElement("h6",{className:(0,t.cx)(b.primaryText)},a),s.createElement("small",{className:b.small},C))}function E(a,C){return C?.multiple===void 0||C?.multiple?"Upload file":a.length?"Replace file":"Upload file"}function v(a){return(0,n.isString)(a)?`Accepted file type: ${a}`:Array.isArray(a)?`Accepted file types: ${a.join(", ")}`:`Accepted file types: ${Object.values(a).flat().join(", ")}`}function h(a){return{id:(0,n.uniqueId)("file"),file:a,error:null}}function P(a,C){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
      padding: ${a.spacing(2)};
      border-radius: 2px;
      border: 1px dashed ${a.colors.border.strong};
      background-color: ${C?a.colors.background.secondary:a.colors.background.primary};
      cursor: pointer;
      align-items: center;
      justify-content: center;
    `,dropzone:t.css`
      display: flex;
      flex-direction: column;
    `,defaultDropZone:t.css`
      text-align: center;
    `,icon:t.css`
      margin-bottom: ${a.spacing(1)};
    `,primaryText:t.css`
      margin-bottom: ${a.spacing(1)};
    `,acceptContainer:t.css`
      text-align: center;
      margin: 0;
    `,acceptSeparator:t.css`
      margin: 0 ${a.spacing(1)};
    `,small:t.css`
      color: ${a.colors.text.secondary};
    `,errorAlert:t.css`
      padding-top: 10px;
    `}}},27119:(Y,T,e)=>{"use strict";e.d(T,{K:()=>r});var t=e(9892),n=e(66111),i=e(2703),s=e(72648),l=e(39027),f=e(31403),u=e(39904),o=e(8180);const d="Remove file";function r({file:c,removeFile:p}){const g=(0,s.wW)(m),{file:y,progress:E,error:v,abortUpload:h,retryUpload:P}=c,a=()=>v?n.createElement(n.Fragment,null,n.createElement("span",{className:g.error},v.message),P&&n.createElement(o.h,{type:"button","aria-label":"Retry",name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:P}),p&&n.createElement(o.h,{className:P?g.marginLeft:"",type:"button",name:"trash-alt",onClick:()=>p(c),tooltip:d,"aria-label":d})):E&&y.size>E?n.createElement(n.Fragment,null,n.createElement("progress",{className:g.progressBar,max:y.size,value:E}),n.createElement("span",{className:g.paddingLeft},Math.round(E/y.size*100),"%"),h&&n.createElement(f.zx,{variant:"secondary",type:"button",fill:"text",onClick:h},"Cancel upload")):p&&n.createElement(o.h,{name:"trash-alt",onClick:()=>p(c),tooltip:d,"aria-label":d,type:"button",tooltipPlacement:"top"}),C=(0,i.Cf)("decbytes")(y.size);return n.createElement("div",{className:g.fileListContainer},n.createElement("span",{className:g.fileNameWrapper},n.createElement(u.J,{name:"file-blank",size:"lg","aria-hidden":!0}),n.createElement("span",{className:g.padding},(0,l.O)(y.name)),n.createElement("span",null,(0,i.zc)(C))),n.createElement("div",{className:g.fileNameWrapper},a()))}function m(c){return{fileListContainer:t.css`
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: ${c.spacing(2)};
      border: 1px dashed ${c.colors.border.medium};
      background-color: ${c.colors.background.secondary};
      margin-top: ${c.spacing(1)};
    `,fileNameWrapper:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
    `,padding:t.css`
      padding: ${c.spacing(0,1)};
    `,paddingLeft:t.css`
      padding-left: ${c.spacing(2)};
    `,marginLeft:t.css`
      margin-left: ${c.spacing(1)};
    `,error:t.css`
      padding-right: ${c.spacing(2)};
      color: ${c.colors.error.text};
    `,progressBar:t.css`
      border-radius: ${c.shape.radius.default};
      height: 4px;
      ::-webkit-progress-bar {
        background-color: ${c.colors.border.weak};
        border-radius: ${c.shape.radius.default};
      }
      ::-webkit-progress-value {
        background-color: ${c.colors.primary.main};
        border-radius: ${c.shape.radius.default};
      }
    `}}},47556:(Y,T,e)=>{"use strict";e.d(T,{A_:()=>t.A_,K$:()=>n.K,Yo:()=>t.Yo});var t=e(30784),n=e(27119)},82381:(Y,T,e)=>{"use strict";e.d(T,{p:()=>r});var t=e(9892),n=e(66111),i=e(44288),s=e(68183),l=e(72648),f=e(85419),u=e(39027),o=e(31403),d=e(39904);const r=({onFileUpload:c,className:p,children:g="Upload file",accept:y="*",size:E="md",showFileName:v})=>{const h=(0,l.wW)(m(E)),[P,a]=(0,n.useState)(""),C=(0,i.Z)(),D=(0,n.useCallback)(b=>{const M=b.currentTarget?.files?.[0];M&&a(M.name??""),c(b)},[c]);return n.createElement(n.Fragment,null,n.createElement("input",{type:"file",id:C,className:h.fileUpload,onChange:D,multiple:!1,accept:y,"data-testid":s.wl.components.FileUpload.inputField}),n.createElement("label",{htmlFor:C,className:(0,t.cx)(h.labelWrapper,p)},n.createElement(d.J,{name:"upload",className:h.icon}),g),v&&P&&n.createElement("span",{"aria-label":"File name",className:h.fileName,"data-testid":s.wl.components.FileUpload.fileNameSpan},(0,u.O)(P)))},m=c=>p=>{const g=(0,o.fW)({theme:p,variant:"primary",size:c,iconOnly:!1}),y=(0,f.getFocusStyles)(p);return{fileUpload:(0,t.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":y,"&:focus-visible + label":y}),labelWrapper:g.button,icon:g.icon,fileName:(0,t.css)({marginLeft:p.spacing(.5)})}}},14747:(Y,T,e)=>{"use strict";e.d(T,{H:()=>u});var t=e(66111),n=e(79086);function i(...o){const d=t.useRef(null);return t.useEffect(()=>{o.forEach(r=>{r&&(typeof r=="function"?r(d.current):r.current=d.current)})},[o]),d}var s=e(31403),l=e(39904),f=e(46967);const u=t.forwardRef(({value:o,width:d,onChange:r,escapeRegex:m=!0,...c},p)=>{const g=t.useRef(null),y=i(p,g),E=o!==""?t.createElement(s.zx,{icon:"times",fill:"text",size:"sm",onClick:v=>{g.current?.focus(),r(""),v.stopPropagation()}},"Clear"):null;return t.createElement(f.I,{prefix:t.createElement(l.J,{name:"search"}),suffix:E,width:d,type:"text",value:m?(0,n.x6)(o??""):o,onChange:v=>r(m?(0,n.GE)(v.currentTarget.value):v.currentTarget.value),...c,ref:y})});u.displayName="FilterInput"},41165:(Y,T,e)=>{"use strict";e.d(T,{B:()=>f});var t=e(9892),n=e(66111),i=e(72648),s=e(31403),l=e(39904);const f=({label:o,selected:d,onClick:r,icon:m="check"})=>{const c=(0,i.wW)(u),p=(0,i.wW)(s.gN);return n.createElement("button",{type:"button",className:(0,t.cx)(p,c.wrapper,d&&c.selected),onClick:r},n.createElement("span",null,o),d&&n.createElement(l.J,{name:m,className:c.icon}))},u=o=>({wrapper:t.css`
      background: ${o.colors.background.secondary};
      border-radius: ${o.shape.borderRadius(8)};
      padding: ${o.spacing(0,2)};
      font-size: ${o.typography.bodySmall.fontSize};
      font-weight: ${o.typography.fontWeightMedium};
      line-height: ${o.typography.bodySmall.lineHeight};
      color: ${o.colors.text.secondary};
      display: flex;
      align-items: center;
      height: 32px;

      &:hover {
        background: ${o.colors.action.hover};
        color: ${o.colors.text.primary};
      }
    `,selected:t.css`
      color: ${o.colors.text.primary};
      background: ${o.colors.action.selected};

      &:hover {
        background: ${o.colors.action.focus};
      }
    `,icon:t.css`
      margin-left: ${o.spacing(.5)};
    `})},95569:(Y,T,e)=>{"use strict";e.d(T,{W:()=>l});var t=e(9892),n=e(66111),i=e(19426);const s={labelWidth:6,inputWidth:12},l=({label:u,tooltip:o,labelWidth:d,inputWidth:r,inputEl:m,className:c,interactive:p,...g})=>{const y=f();return n.createElement("div",{className:(0,t.cx)(y.formField,c)},n.createElement(i.c,{width:d,tooltip:o,interactive:p},u),m||n.createElement("input",{type:"text",className:`gf-form-input ${r?`width-${r}`:""}`,...g,disabled:g.disabled}))};l.displayName="FormField",l.defaultProps=s;const f=()=>({formField:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
    `})},19426:(Y,T,e)=>{"use strict";e.d(T,{c:()=>u});var t=e(9085),n=e.n(t),i=e(66111),s=e(39904),l=e(61860);const u=({children:o,isFocused:d,isInvalid:r,className:m,htmlFor:c,tooltip:p,width:g,interactive:y,...E})=>{const v=n()(m,`gf-form-label width-${g||"10"}`,{"gf-form-label--is-focused":d,"gf-form-label--is-invalid":r});return i.createElement("label",{className:v,...E,htmlFor:c},o,p&&i.createElement(l.u,{placement:"top",content:p,theme:"info",interactive:y},i.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},72777:(Y,T,e)=>{"use strict";e.d(T,{W:()=>i});var t=e(66111);function n(s){return s<20?.9:s<26?.8:.6}const i=({value:s,className:l,style:f,...u})=>{const o=(s.prefix??"").length>0,d=(s.suffix??"").length>0;let r;if(f&&f.fontSize&&typeof f.fontSize=="number"){const m=f.fontSize,c=n(m);r={fontSize:m*c}}return t.createElement("div",{className:l,style:f,...u},t.createElement("div",null,o&&t.createElement("span",null,s.prefix),t.createElement("span",null,s.text),d&&t.createElement("span",{style:r},s.suffix)))};i.displayName="FormattedDisplayValue"},58255:(Y,T,e)=>{"use strict";e.d(T,{X:()=>u});var t=e(9892),n=e(66111),i=e(72648),s=e(7804),l=e(85419),f=e(64353);const u=n.forwardRef(({label:d,description:r,value:m,htmlValue:c,onChange:p,disabled:g,className:y,indeterminate:E,...v},h)=>{const P=(0,n.useCallback)(D=>{p&&p(D)},[p]),a=(0,i.wW)(o),C=E?"mixed":void 0;return n.createElement("label",{className:(0,t.cx)(a.wrapper,y)},n.createElement("div",{className:a.checkboxWrapper},n.createElement("input",{type:"checkbox",className:(0,t.cx)(a.input,E&&a.inputIndeterminate),checked:m,disabled:g,onChange:P,value:c,"aria-checked":C,...v,ref:h}),n.createElement("span",{className:a.checkmark})),d&&n.createElement("span",{className:a.label},d),r&&n.createElement("span",{className:a.description},r))}),o=(0,s.B)(d=>{const r=(0,f.F)(d),m=2,c=1;return{wrapper:t.css`
      display: inline-grid;
      align-items: center;
      column-gap: ${d.spacing(c)};
      grid-template-columns: auto 1fr;
      grid-template-rows: auto auto;
      position: relative;
      vertical-align: middle;
    `,input:t.css`
      position: absolute;
      z-index: 1;
      top: 0;
      left: 0;
      width: 100% !important; // global styles unset this
      height: 100%;
      opacity: 0;

      &:focus + span,
      &:focus-visible + span {
        ${(0,l.getFocusStyles)(d)}
      }

      &:focus:not(:focus-visible) + span {
        ${(0,l.getMouseFocusStyles)(d)}
      }

      /**
       * Using adjacent sibling selector to style checked state.
       * Primarily to limit the classes necessary to use when these classes will be used
       * for angular components styling
       * */
      &:checked + span {
        background: ${d.colors.primary.main};
        border: none;

        &:hover {
          background: ${d.colors.primary.shade};
        }

        &:after {
          content: '';
          position: absolute;
          z-index: 2;
          left: 5px;
          top: 1px;
          width: 6px;
          height: 12px;
          border: solid ${d.colors.primary.contrastText};
          border-width: 0 3px 3px 0;
          transform: rotate(45deg);
        }
      }

      &:disabled + span {
        background-color: ${d.colors.action.disabledBackground};
        cursor: not-allowed;

        &:hover {
          background-color: ${d.colors.action.disabledBackground};
        }

        &:after {
          border-color: ${d.colors.action.disabledText};
        }
      }
    `,inputIndeterminate:t.css`
      &[aria-checked='mixed'] + span {
        border: none;
        background: ${d.colors.primary.main};

        &:hover {
          background: ${d.colors.primary.shade};
        }

        &:after {
          content: '';
          position: absolute;
          z-index: 2;
          left: 3px;
          right: 3px;
          top: calc(50% - 1.5px);
          height: 3px;
          border: 1.5px solid ${d.colors.primary.contrastText};
          background-color: ${d.colors.primary.contrastText};
          width: auto;
          transform: none;
        }
      }
      &:disabled[aria-checked='mixed'] + span {
        background-color: ${d.colors.action.disabledBackground};

        &:after {
          border-color: ${d.colors.action.disabledText};
        }
      }
    `,checkboxWrapper:t.css`
      display: flex;
      align-items: center;
      grid-column-start: 1;
      grid-row-start: 1;
    `,checkmark:t.css`
      position: relative; /* Checkbox should be layered on top of the invisible input so it recieves :hover */
      z-index: 2;
      display: inline-block;
      width: ${d.spacing(m)};
      height: ${d.spacing(m)};
      border-radius: ${d.shape.borderRadius()};
      background: ${d.components.input.background};
      border: 1px solid ${d.components.input.borderColor};

      &:hover {
        cursor: pointer;
        border-color: ${d.components.input.borderHover};
      }
    `,label:(0,t.cx)(r.label,t.css`
        grid-column-start: 2;
        grid-row-start: 1;
        position: relative;
        z-index: 2;
        cursor: pointer;
        max-width: fit-content;
        line-height: ${d.typography.bodySmall.lineHeight};
        margin-bottom: 0;
      `),description:(0,t.cx)(r.description,t.css`
        grid-column-start: 2;
        grid-row-start: 2;
        line-height: ${d.typography.bodySmall.lineHeight};
        margin-top: 0; /* The margin effectively comes from the top: -2px on the label above it */
      `)}});u.displayName="Checkbox"},24799:(Y,T,e)=>{"use strict";e.d(T,{g:()=>d});var t=e(9892),n=e(66111),i=e(7804),s=e(72648),l=e(61970),f=e(57227),u=e(64353);const o=(0,i.B)(m=>({field:t.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${m.spacing(2)};
    `,fieldHorizontal:t.css`
      flex-direction: row;
      justify-content: space-between;
      flex-wrap: wrap;
    `,fieldValidationWrapper:t.css`
      margin-top: ${m.spacing(.5)};
    `,fieldValidationWrapperHorizontal:t.css`
      flex: 1 1 100%;
    `,validationMessageHorizontalOverflow:t.css`
      width: 0;
      overflow-x: visible;

      & > * {
        white-space: nowrap;
      }
    `})),d=n.forwardRef(({label:m,description:c,horizontal:p,invalid:g,loading:y,disabled:E,required:v,error:h,children:P,className:a,validationMessageHorizontalOverflow:C,htmlFor:D,...b},M)=>{const x=(0,s.l4)(),R=o(x),S=D??(0,l.getChildId)(P),O=typeof m=="string"?n.createElement(u._,{htmlFor:S,description:c},`${m}${v?" *":""}`):m,U=r({invalid:g,disabled:E,loading:y});return n.createElement("div",{className:(0,t.cx)(R.field,p&&R.fieldHorizontal,a),...b},O,n.createElement("div",null,n.createElement("div",{ref:M},n.cloneElement(P,U)),g&&h&&!p&&n.createElement("div",{className:(0,t.cx)(R.fieldValidationWrapper,{[R.validationMessageHorizontalOverflow]:!!C})},n.createElement(f.S,null,h))),g&&h&&p&&n.createElement("div",{className:(0,t.cx)(R.fieldValidationWrapper,R.fieldValidationWrapperHorizontal,{[R.validationMessageHorizontalOverflow]:!!C})},n.createElement(f.S,null,h)))});d.displayName="Field";function r(m){for(const c in m)m[c]===void 0&&delete m[c];return m}},70132:(Y,T,e)=>{"use strict";e.d(T,{F:()=>n});var t=e(66698);const n=({name:i,control:s,children:l,...f})=>{const{fields:u,append:o,prepend:d,remove:r,swap:m,move:c,insert:p}=(0,t.Dq)({control:s,name:i,...f});return l({fields:u,append:o,prepend:d,remove:r,swap:m,move:c,insert:p})}},13393:(Y,T,e)=>{"use strict";e.d(T,{C:()=>f});var t=e(9892),n=e(66111),i=e(72648),s=e(7804),l=e(19825);const f=({label:o,children:d,className:r,...m})=>{const c=(0,i.l4)(),p=u(c);return n.createElement("fieldset",{className:(0,t.cx)(p.wrapper,r),...m},o&&n.createElement(l.D,null,o),d)},u=(0,s.B)(o=>({wrapper:t.css`
      margin-bottom: ${o.spacing(4)};

      &:last-child {
        margin-bottom: 0;
      }
    `}))},57227:(Y,T,e)=>{"use strict";e.d(T,{S:()=>u});var t=e(9892),n=e(66111),i=e(7804),s=e(72648),l=e(39904);const f=(0,i.B)(o=>{const d=`
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightMedium};
      padding: ${o.spacing(.5,1)};
      color: ${o.colors.error.contrastText};
      background: ${o.colors.error.main};
      border-radius: ${o.shape.borderRadius()};
      position: relative;
      display: inline-block;
      align-self: flex-start;

      a {
        color: ${o.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:t.css`
      ${d}
      margin: ${o.spacing(.5,0,0,0)};

      &:before {
        content: '';
        position: absolute;
        left: 9px;
        top: -5px;
        width: 0;
        height: 0;
        border-width: 0 4px 5px 4px;
        border-color: transparent transparent ${o.colors.error.main} transparent;
        border-style: solid;
      }
    `,horizontal:t.css`
      ${d}
      margin-left: 10px;

      &:before {
        content: '';
        position: absolute;
        left: -5px;
        top: 9px;
        width: 0;
        height: 0;
        border-width: 4px 5px 4px 0;
        border-color: transparent #e02f44 transparent transparent;
        border-style: solid;
      }
    `,fieldValidationMessageIcon:t.css`
      margin-right: ${o.spacing()};
    `}}),u=({children:o,horizontal:d,className:r})=>{const m=(0,s.l4)(),c=f(m),p=(0,t.cx)(d?c.horizontal:c.vertical,r);return n.createElement("div",{role:"alert",className:p},n.createElement(l.J,{className:c.fieldValidationMessageIcon,name:"exclamation-triangle"}),o)}},94270:(Y,T,e)=>{"use strict";e.d(T,{l:()=>s});var t=e(9892),n=e(66111),i=e(66698);function s({defaultValues:l,onSubmit:f,validateOnMount:u=!1,validateFieldsOnMount:o,children:d,validateOn:r="onSubmit",maxWidth:m=600,...c}){const{handleSubmit:p,trigger:g,formState:y,...E}=(0,i.cI)({mode:r,defaultValues:l});return(0,n.useEffect)(()=>{u&&g(o)},[g,o,u]),n.createElement("form",{className:t.css`
        max-width: ${m!=="none"?m+"px":m};
        width: 100%;
      `,onSubmit:p(f),...c},d({errors:y.errors,formState:y,...E}))}},81764:(Y,T,e)=>{"use strict";e.d(T,{_:()=>u});var t=e(9892),n=e(66111),i=e(72648),s=e(61970),l=e(57227),f=e(77117);const u=({children:d,label:r,tooltip:m,labelWidth:c="auto",invalid:p,loading:g,disabled:y,required:E,className:v,htmlFor:h,grow:P,shrink:a,error:C,transparent:D,interactive:b,...M})=>{const x=(0,i.l4)(),R=o(x,P,a),S=h??(0,s.getChildId)(d),O=typeof r=="string"?n.createElement(f.W,{interactive:b,width:c,tooltip:m,htmlFor:S,transparent:D},`${r}${E?" *":""}`):r;return n.createElement("div",{className:(0,t.cx)(R.container,v),...M},O,n.createElement("div",{className:R.childContainer},n.cloneElement(d,{invalid:p,disabled:y,loading:g}),p&&C&&n.createElement("div",{className:(0,t.cx)(R.fieldValidationWrapper)},n.createElement(l.S,null,C))))};u.displayName="InlineField";const o=(d,r,m)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${r?1:0} ${m?1:0} auto;
      margin: 0 ${d.spacing(.5)} ${d.spacing(.5)} 0;
    `,childContainer:t.css`
      flex: ${r?1:0} ${m?1:0} auto;
    `,fieldValidationWrapper:t.css`
      margin-top: ${d.spacing(.5)};
    `})},11543:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>s});var t=e(9892),n=e(66111),i=e(72648);const s=({children:f,className:u,...o})=>{const d=(0,i.wW)(l);return n.createElement("div",{className:(0,t.cx)(d.container,u),...o},f)},l=f=>({container:t.css`
      label: InlineFieldRow;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-content: flex-start;
      row-gap: ${f.spacing(.5)};
    `})},77117:(Y,T,e)=>{"use strict";e.d(T,{W:()=>f});var t=e(9892),n=e(66111),i=e(72648),s=e(39904),l=e(61860);const f=({children:o,className:d,tooltip:r,width:m,transparent:c,interactive:p,as:g="label",...y})=>{const E=(0,i.wW)((0,n.useCallback)(v=>u(v,c,m),[c,m]));return n.createElement(g,{className:(0,t.cx)(E.label,d),...y},o,r&&n.createElement(l.u,{interactive:p,placement:"top",content:r,theme:"info"},n.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",className:E.icon})))},u=(o,d=!1,r)=>({label:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
      padding: 0 ${o.spacing(1)};
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
      background-color: ${d?"transparent":o.colors.background.secondary};
      height: ${o.spacing(o.components.height.md)};
      line-height: ${o.spacing(o.components.height.md)};
      margin-right: ${o.spacing(.5)};
      border-radius: ${o.shape.radius.default};
      border: none;
      width: ${r?r!=="auto"?`${8*r}px`:r:"100%"};
      color: ${o.colors.text.primary};
    `,icon:t.css`
      color: ${o.colors.text.secondary};
      margin-left: 10px;

      :hover {
        color: ${o.colors.text.primary};
      }
    `})},62157:(Y,T,e)=>{"use strict";e.d(T,{m:()=>s});var t=e(9892),n=e(66111),i=e(72648);const s=({children:f,className:u,grow:o,...d})=>{const r=(0,i.wW)(m=>l(m,o));return n.createElement("div",{className:(0,t.cx)(r.container,u),...d},f)};s.displayName="InlineSegmentGroup";const l=(f,u)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${u?1:0} 0 auto;
      margin-bottom: ${f.spacing(.5)};
    `})},64353:(Y,T,e)=>{"use strict";e.d(T,{F:()=>f,_:()=>u});var t=e(9892),n=e(66111),i=e(7804),s=e(72648),l=e(39904);const f=(0,i.B)(o=>({label:t.css`
      label: Label;
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightMedium};
      line-height: 1.25;
      margin-bottom: ${o.spacing(.5)};
      color: ${o.colors.text.primary};
      max-width: 480px;
    `,labelContent:t.css`
      display: flex;
      align-items: center;
    `,description:t.css`
      label: Label-description;
      color: ${o.colors.text.secondary};
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightRegular};
      margin-top: ${o.spacing(.25)};
      display: block;
    `,categories:t.css`
      label: Label-categories;
      display: inline-flex;
      align-items: center;
    `,chevron:t.css`
      margin: 0 ${o.spacing(.25)};
    `})),u=({children:o,description:d,className:r,category:m,...c})=>{const p=(0,s.l4)(),g=f(p),y=m?.map((E,v)=>n.createElement("span",{className:g.categories,key:`${E}/${v}`},n.createElement("span",null,E),n.createElement(l.J,{name:"angle-right",className:g.chevron})));return n.createElement("div",{className:(0,t.cx)(g.label,r)},n.createElement("label",{...c},n.createElement("div",{className:g.labelContent},y,o),d&&n.createElement("span",{className:g.description},d)))}},50869:(Y,T,e)=>{"use strict";e.d(T,{G:()=>l,I:()=>f});var t=e(9085),n=e.n(t),i=e(66111),s=e(97291),l=(u=>(u.Invalid="invalid",u.Valid="valid",u))(l||{});class f extends i.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=o=>d=>{const r=(0,s.Gu)(d.target.value,o);this.setState(m=>({...m,error:r?r[0]:null}))},this.populateEventPropsWithStatus=(o,d)=>{const r={...o};return d&&Object.keys(s.JU).forEach(m=>{((0,s.z3)(m,d)||o[m])&&(r[m]=async c=>{c.persist(),(0,s.z3)(m,d)&&await this.validatorAsync(d[m]).apply(this,[c]),o[m]&&o[m].apply(null,[c,this.status])})}),r}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:o,className:d,hideErrorMessage:r,inputRef:m,...c}=this.props,{error:p}=this.state,g=n()("gf-form-input",{invalid:this.isInvalid},d),y=this.populateEventPropsWithStatus(c,o);return i.createElement("div",{style:{flexGrow:1}},i.createElement("input",{...y,ref:m,className:g}),p&&!r&&i.createElement("span",null,p))}}f.defaultProps={className:""}},21662:(Y,T,e)=>{"use strict";e.d(T,{B:()=>s,Z:()=>l});var t=e(66111),n=e(44800),i=e(39904);const s=f=>{const u=f.selectProps.menuIsOpen;return t.createElement(n.c.IndicatorsContainer,{...f},t.createElement(i.J,{name:u?"angle-up":"angle-down",style:{marginTop:"7px"}}))},l=s},76603:(Y,T,e)=>{"use strict";e.d(T,{P:()=>i,Z:()=>s});var t=e(66111),n=e(44800);const i=l=>{const{children:f}=l;return t.createElement(n.c.NoOptionsMessage,{...l},t.createElement("div",{className:"gf-form-select-box__desc-option"},t.createElement("div",{className:"gf-form-select-box__desc-option__body"},f)))},s=i},29418:(Y,T,e)=>{"use strict";e.d(T,{qb:()=>D,Ph:()=>C});var t=e(9085),n=e.n(t),i=e(66111),s=e(44800),l=e(58839),f=e(51306),u=e(81658),o=e(72648),d=e(68226),r=e(874),m=e(24901),c=e(54897),p=e(61860),g=e(21662),y=e(76603),E=e(39904);const v=x=>{const{children:R,isSelected:S,data:O}=x;return i.createElement(s.c.Option,{...x},i.createElement("div",{className:"gf-form-select-box__desc-option"},O.imgUrl&&i.createElement("img",{className:"gf-form-select-box__desc-option__img",src:O.imgUrl,alt:""}),i.createElement("div",{className:"gf-form-select-box__desc-option__body"},i.createElement("div",null,R),O.description&&i.createElement("div",{className:"gf-form-select-box__desc-option__desc"},O.description)),S&&i.createElement(E.J,{name:"check","aria-hidden":"true"})))},h=null,P=x=>i.createElement(s.c.MenuList,{...x},i.createElement(d.$,{autoHide:!1,autoHeightMax:"inherit"},x.children)),a=class extends i.PureComponent{render(){const{defaultValue:x,getOptionLabel:R,getOptionValue:S,onChange:O,options:U,placeholder:I,width:F,value:w,className:K,isDisabled:L,isLoading:V,isSearchable:H,isClearable:j,backspaceRemovesValue:A,isMulti:_,autoFocus:k,openMenuOnFocus:Q,onBlur:re,maxMenuHeight:Z,noOptionsMessage:oe,isOpen:G,components:le,tooltipContent:fe,tabSelectsValue:ae,onCloseMenu:de,onOpenMenu:ee,allowCustomValue:me,formatCreateLabel:q,"aria-label":ne}=this.props;let se="";F&&(se="width-"+F);let he=l.ZP;const ue={};me&&(he=u.Z,ue.formatCreateLabel=q??(ct=>ct));const Te=n()("gf-form-input","gf-form-input--form-dropdown",se,K),Ve={...a.defaultProps.components,...le};return i.createElement(b,{onCloseMenu:de,onOpenMenu:ee,tooltipContent:fe,isOpen:G},(ct,Ie)=>i.createElement(he,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Te,components:Ve,defaultValue:x,value:w,getOptionLabel:R,getOptionValue:S,menuShouldScrollIntoView:!1,isSearchable:H,onChange:O,options:U,placeholder:I||"Choose",styles:(0,c.Z)(this.context),isDisabled:L,isLoading:V,isClearable:j,autoFocus:k,onBlur:re,openMenuOnFocus:Q,maxMenuHeight:Z,noOptionsMessage:oe,isMulti:_,backspaceRemovesValue:A,menuIsOpen:G,onMenuOpen:ct,onMenuClose:Ie,tabSelectsValue:ae,"aria-label":ne,...ue}))}};let C=a;C.contextType=o.Ni,C.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:v,SingleValue:m.P,IndicatorsContainer:g.Z,MenuList:P,Group:r.n}};class D extends i.PureComponent{render(){const{defaultValue:R,getOptionLabel:S,getOptionValue:O,onChange:U,placeholder:I,width:F,value:w,className:K,loadOptions:L,defaultOptions:V,isLoading:H,loadingMessage:j,noOptionsMessage:A,isDisabled:_,isSearchable:k,isClearable:Q,backspaceRemovesValue:re,autoFocus:Z,onBlur:oe,openMenuOnFocus:G,maxMenuHeight:le,isMulti:fe,tooltipContent:ae,onCloseMenu:de,onOpenMenu:ee,isOpen:me}=this.props;let q="";F&&(q="width-"+F);const ne=n()("gf-form-input","gf-form-input--form-dropdown",q,K);return i.createElement(b,{onCloseMenu:de,onOpenMenu:ee,tooltipContent:ae,isOpen:me},(se,he)=>i.createElement(f.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:ne,components:{Option:v,SingleValue:m.P,IndicatorsContainer:g.Z,NoOptionsMessage:y.Z},defaultValue:R,value:w,getOptionLabel:S,getOptionValue:O,menuShouldScrollIntoView:!1,onChange:U,loadOptions:L,isLoading:H,defaultOptions:V,placeholder:I||"Choose",styles:(0,c.Z)(this.context),loadingMessage:j,noOptionsMessage:A,isDisabled:_,isSearchable:k,isClearable:Q,autoFocus:Z,onBlur:oe,openMenuOnFocus:G,maxMenuHeight:le,isMulti:fe,backspaceRemovesValue:re}))}}D.contextType=o.Ni,D.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300};class b extends i.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:R}=this.props;R&&R(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:R}=this.props;R&&R(),this.setState({isOpenInternal:!1})}}render(){const{children:R,isOpen:S,tooltipContent:O}=this.props,{isOpenInternal:U}=this.state;let I;return(U||S)&&(I=!1),O?i.createElement(p.u,{show:I,content:O,placement:"bottom"},i.createElement("div",null,R(this.onOpenMenu,this.onCloseMenu))):i.createElement("div",null,R(this.onOpenMenu,this.onCloseMenu))}}const M=null},18979:(Y,T,e)=>{"use strict";e.d(T,{r:()=>f});var t=e(82897),n=e.n(t),i=e(66111),s=e(39904),l=e(61860);class f extends i.PureComponent{constructor(){super(...arguments),this.state={id:(0,t.uniqueId)()},this.internalOnChange=o=>{o.stopPropagation(),this.props.onChange(o)}}render(){const{labelClass:o="",switchClass:d="",label:r,checked:m,disabled:c,transparent:p,className:g,tooltip:y,tooltipPlacement:E}=this.props,v=this.state.id,h=`gf-form-label ${o} ${p?"gf-form-label--transparent":""} pointer`,P=`gf-form-switch ${d} ${p?"gf-form-switch--transparent":""}`;return i.createElement("div",{className:"gf-form-switch-container-react"},i.createElement("label",{htmlFor:v,className:`gf-form gf-form-switch-container ${g||""}`},r&&i.createElement("div",{className:h},r,y&&i.createElement(l.u,{placement:E||"auto",content:y,theme:"info"},i.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},i.createElement(s.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))),i.createElement("div",{className:P},i.createElement("input",{disabled:c,id:v,type:"checkbox",checked:m,onChange:this.internalOnChange}),i.createElement("span",{className:"gf-form-switch__slider"}))))}}},19825:(Y,T,e)=>{"use strict";e.d(T,{D:()=>l});var t=e(9892),n=e(66111),i=e(72648);const s=f=>({legend:t.css`
      font-size: ${f.typography.h3.fontSize};
      font-weight: ${f.typography.fontWeightRegular};
      margin: 0 0 ${f.spacing(2)} 0;
    `}),l=({children:f,className:u,...o})=>{const d=(0,i.wW)(s);return n.createElement("legend",{className:(0,t.cx)(d.legend,u),...o},f)}},2594:(Y,T,e)=>{"use strict";e.d(T,{S:()=>c});var t=e(9892),n=e(82897),i=e(66111),s=e(84559),l=e(72648),f=e(39904),u=e(7804),o=e(85419),d=e(73267);const r=i.forwardRef(({children:g,active:y=!1,disabled:E=!1,size:v="md",onChange:h,onClick:P,id:a,name:C=void 0,description:D,fullWidth:b,"aria-label":M},x)=>{const R=(0,l.l4)(),S=m(R,v,b);return i.createElement(i.Fragment,null,i.createElement("input",{type:"radio",className:S.radio,onChange:h,onClick:P,disabled:E,id:a,checked:y,name:C,"aria-label":M,ref:x}),i.createElement("label",{className:S.radioLabel,htmlFor:a,title:D},g))});r.displayName="RadioButton";const m=(0,u.B)((g,y,E)=>{const{fontSize:v,height:h,padding:P}=(0,d.iL)(y,g),a=g.colors.text.secondary,C=g.colors.text.primary,D=h*g.spacing.gridSize-4-2;return{radio:t.css`
      position: absolute;
      opacity: 0;
      z-index: -1000;

      &:checked + label {
        color: ${g.colors.text.primary};
        font-weight: ${g.typography.fontWeightMedium};
        background: ${g.colors.action.selected};
        z-index: 3;
      }

      &:focus + label,
      &:focus-visible + label {
        ${(0,o.getFocusStyles)(g)};
      }

      &:focus:not(:focus-visible) + label {
        ${(0,o.getMouseFocusStyles)(g)}
      }

      &:disabled + label {
        color: ${g.colors.text.disabled};
        cursor: not-allowed;
      }
    `,radioLabel:t.css`
      display: inline-block;
      position: relative;
      font-size: ${v};
      height: ${D}px;
      // Deduct border from line-height for perfect vertical centering on windows and linux
      line-height: ${D}px;
      color: ${a};
      padding: ${g.spacing(0,P)};
      border-radius: ${g.shape.borderRadius()};
      background: ${g.colors.background.primary};
      cursor: pointer;
      z-index: 1;
      flex: ${E?"1 0 0":"none"};
      text-align: center;
      user-select: none;
      white-space: nowrap;

      &:hover {
        color: ${C};
      }
    `}});function c({options:g,value:y,onChange:E,onClick:v,disabled:h,disabledOptions:P,size:a="md",id:C,className:D,fullWidth:b=!1,autoFocus:M=!1}){const x=(0,i.useCallback)(F=>()=>{E&&E(F.value)},[E]),R=(0,i.useCallback)(F=>()=>{v&&v(F.value)},[v]),S=C??(0,n.uniqueId)("radiogroup-"),O=(0,i.useRef)(S),U=(0,l.wW)(p),I=(0,i.useRef)(null);return(0,i.useEffect)(()=>{M&&I.current&&I.current.focus()},[M]),i.createElement("div",{className:(0,t.cx)(U.radioGroup,b&&U.fullWidth,D)},g.map((F,w)=>{const K=P&&F.value&&P.includes(F.value),L=F.icon?(0,s.iJ)(F.icon):void 0;return i.createElement(r,{size:a,disabled:K||h,active:y===F.value,key:`o.label-${w}`,"aria-label":F.ariaLabel,onChange:x(F),onClick:R(F),id:`option-${F.value}-${S}`,name:O.current,description:F.description,fullWidth:b,ref:y===F.value?I:void 0},L&&i.createElement(f.J,{name:L,className:U.icon}),F.imgUrl&&i.createElement("img",{src:F.imgUrl,alt:F.label,className:U.img}),F.label," ",F.component?i.createElement(F.component,null):null)}))}c.displayName="RadioButtonGroup";const p=g=>({radioGroup:(0,t.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${g.components.input.borderColor}`,borderRadius:g.shape.borderRadius(),padding:"2px"}),fullWidth:(0,t.css)({display:"flex"}),icon:t.css`
      margin-right: 6px;
    `,img:t.css`
      width: ${g.spacing(2)};
      height: ${g.spacing(2)};
      margin-right: ${g.spacing(1)};
    `})},29395:(Y,T,e)=>{"use strict";e.d(T,{x:()=>u});var t=e(9892),n=e(82897),i=e(66111),s=e(72648);const l=({id:d,name:r,label:m,checked:c,disabled:p,description:g,onChange:y})=>{const E=(0,s.wW)(f);return i.createElement("label",{title:g,className:E.label},i.createElement("input",{id:d,name:r,type:"radio",checked:c,disabled:p,className:E.input,onChange:()=>y&&y(d)}),m)},f=d=>({input:t.css`
    position: relative;
    appearance: none;
    outline: none;
    background-color: ${d.colors.background.canvas};
    margin: 0;
    width: ${d.spacing(2)} !important; /* TODO How to overcome this? Checkbox does the same  */
    height: ${d.spacing(2)};
    border: 1px solid ${d.colors.border.medium};
    border-radius: 50%;
    margin: 3px 0; /* Space for box-shadow when focused */

    :checked {
      background-color: ${d.v1.palette.white};
      border: 5px solid ${d.colors.primary.main};
    }

    :disabled {
      background-color: ${d.colors.action.disabledBackground} !important;
      border-color: ${d.colors.border.weak};
    }

    :disabled:checked {
      border: 1px solid ${d.colors.border.weak};
    }

    :disabled:checked::after {
      content: '';
      width: 6px;
      height: 6px;
      background-color: ${d.colors.text.disabled};
      border-radius: 50%;
      display: inline-block;
      position: absolute;
      top: 4px;
      left: 4px;
    }

    :focus {
      outline: none !important;
      box-shadow: 0 0 0 1px ${d.colors.background.canvas}, 0 0 0 3px ${d.colors.primary.main};
    }
  `,label:t.css`
    font-size: ${d.typography.fontSize};
    line-height: 22px; /* 16px for the radio button and 6px for the focus shadow */
    display: grid;
    grid-template-columns: ${d.spacing(2)} auto;
    gap: ${d.spacing(1)};
  `});function u({name:d,id:r,options:m,value:c,onChange:p,className:g,disabled:y,disabledOptions:E=[]}){const v=(0,s.wW)(o),h=r??(0,n.uniqueId)("radiogroup-list-");return i.createElement("div",{id:r,className:(0,t.cx)(v.container,g),role:"radiogroup"},m.map((P,a)=>{const C=`${h}-${a}`,D=c&&c===P.value,b=y||E.some(x=>x===P.value),M=()=>p&&P.value&&p(P.value);return i.createElement(l,{key:C,id:C,name:d,label:P.label,description:P.description,checked:D,disabled:b,onChange:M})}))}const o=d=>({container:t.css`
    display: grid;
    gap: ${d.spacing(1)};
  `})},73267:(Y,T,e)=>{"use strict";e.d(T,{GL:()=>i,RK:()=>s,ht:()=>f,iL:()=>o,nf:()=>l});var t=e(9892),n=e(85419);const i=d=>t.css`
  &:focus {
    ${(0,n.focusCss)(d)}
  }
`,s=(d,r=!1)=>{const m=r?d.colors.error.border:d.components.input.borderColor,c=r?d.colors.error.shade:d.components.input.borderHover,p=d.components.input.background,g=d.components.input.text,y=d.isDark?"#2e2f35":"#bab4ca";return(0,t.cx)(l(d),t.css`
      background: ${p};
      line-height: ${d.typography.body.lineHeight};
      font-size: ${d.typography.size.md};
      color: ${g};
      border: 1px solid ${m};

      &:-webkit-autofill,
      &:-webkit-autofill:hover {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${p}!important;
        -webkit-text-fill-color: ${g} !important;
        border-color: ${y};
      }

      &:-webkit-autofill:focus {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: 0 0 0 2px ${d.colors.background.primary}, 0 0 0px 4px ${d.colors.primary.main},
          inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${p}!important;
        -webkit-text-fill-color: ${g} !important;
      }

      &:hover {
        border-color: ${c};
      }

      &:focus {
        outline: none;
      }

      &:disabled {
        background-color: ${d.colors.action.disabledBackground};
        color: ${d.colors.action.disabledText};
        border: 1px solid ${d.colors.action.disabledBackground};

        &:hover {
          border-color: ${m};
        }
      }

      &::placeholder {
        color: ${d.colors.text.disabled};
        opacity: 1;
      }
    `)},l=d=>t.css`
    padding: ${d.spacing(0,1,0,1)};
  `,f=()=>({sm:t.css`
      width: ${u("sm")};
    `,md:t.css`
      width: ${u("md")};
    `,lg:t.css`
      width: ${u("lg")};
    `,auto:t.css`
      width: ${u("auto")};
    `}),u=d=>{switch(d){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function o(d,r){switch(d){case"sm":return{padding:1,fontSize:r.typography.size.sm,height:r.components.height.sm};case"lg":return{padding:3,fontSize:r.typography.size.lg,height:r.components.height.lg};case"md":default:return{padding:2,fontSize:r.typography.size.md,height:r.components.height.md}}}},69823:(Y,T,e)=>{"use strict";e.d(T,{a:()=>g});var t=e(24259),n=e.n(t),i=e(66111),s=e(2703),l=e(18111),f=e(69098),u=e(4176),o=e(31403),d=e(53768),r=e(92103);const m={mode:f.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function c(y,E,v){const h=v!=null,P=Math.min(y*.15/1.5,20),a=P*1.5,C=h?E-a:E,D=Math.min(C,y);return{showLabel:h,gaugeHeight:D,titleFontSize:P}}function p(y,E,v,h){if(E.color?.mode!==d.S.Thresholds)return[{value:E.min??l.Hx,color:v.color??d.R}];const P=E.thresholds??m,a=P.mode===f.H.Percentage,C=P.steps;let D=E.min??l.Hx,b=E.max??l.Z3;a&&(D=0,b=100);const M=(0,r.m1)(D,C),x=(0,r.m1)(b,C),R=[{value:+D.toFixed(y),color:h.visualization.getColorByName(M.color)}];let S=!0;for(let O=0;O<C.length;O++){const U=C[O];if(S){M===U&&(S=!1);continue}const I=C[O-1];if(R.push({value:U.value,color:h.visualization.getColorByName(I.color)}),U===x)break}return R.push({value:+b.toFixed(y),color:h.visualization.getColorByName(x.color)}),R}class g extends i.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:E,value:v,height:h,onClick:P,text:a,theme:C}=this.props,D=c(E,h,v.title),b=i.createElement("div",{style:{height:`${D.gaugeHeight}px`,width:"100%"},ref:M=>this.canvasElement=M});return i.createElement(i.Fragment,null,P?i.createElement("button",{className:(0,o.gN)(C),type:"button",onClick:P},b):b,D.showLabel&&i.createElement("div",{style:{textAlign:"center",fontSize:a?.titleSize??D.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:"100%",top:"-4px",cursor:"default"}},v.title))}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:E,showThresholdLabels:v,showThresholdMarkers:h,width:P,height:a,theme:C,value:D}=this.props,b=c(P,a,D.title),M=Math.min(P,b.gaugeHeight),x=C.colors.background.secondary,R=v?1.5:1,S=Math.min(M/5.5,40)/R,O=S/5,U=(0,s.zc)(D),F=Math.min(P,M*1.3)*.9-((S+(h?O:0)+(v?10:0))*2+10),w=this.props.text?.valueSize??(0,u.MX)(U,F,M,1,S*1.7),K=Math.max(w/2.5,12);let L=E.min??l.Hx,V=E.max??l.Z3,H=D.numeric;E.thresholds?.mode===f.H.Percentage&&(L=0,V=100,D.percent===void 0?H=(H-L)/(V-L)*100:H=D.percent*100);const j=E.decimals===void 0?2:E.decimals;h&&(L=+L.toFixed(j),V=+V.toFixed(j));const A={series:{gauges:{gauge:{min:L,max:V,neutralValue:E.custom?.neutral,background:{color:x},border:{color:null},shadow:{show:!1},width:S},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:p(j,E,D,C),label:{show:v,margin:O+1,font:{size:K}},show:h,width:O},value:{color:D.color,formatter:()=>U,font:{size:w,family:C.typography.fontFamily}},show:!0}}},_={data:[[0,H]],label:D.title};try{this.canvasElement&&n().plot(this.canvasElement,[_],A)}catch(k){console.error("Gauge rendering error",k,A,D)}}render(){return i.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}g.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:m}}},87691:(Y,T,e)=>{"use strict";e.d(T,{k:()=>E});var t=e(24259),n=e.n(t),i=e(82897),s=e(66111),l=e(61113),f=e(40538),u=e(24505),o=e(65987),d=e(50800),r=e(31438);const m=({dimensions:h,activeDimensions:P,pos:a,timeZone:C})=>{let D=null;if(P.xAxis===null)return null;P.yAxis&&(D=P.yAxis[0]);const b=P.xAxis[1]?(0,l.jC)(h.xAxis,P.xAxis[0],P.xAxis[1]):a.x,M=(0,r.wu)(h.yAxis.columns,h.xAxis.columns,b,C),x=M.time,R=M.results.map((S,O)=>({color:S.color,label:S.label,value:S.value,isActive:D===O}));return s.createElement(d.c,{series:R,timestamp:x})};m.displayName="MultiModeGraphTooltip";var c=e(2703),p=e(30471);const g=({dimensions:h,activeDimensions:P,timeZone:a})=>{if(P.yAxis===null||P.yAxis[1]===void 0||P.xAxis===null||P.xAxis[1]===void 0)return null;const C=(0,l.jC)(h.xAxis,P.xAxis[0],P.xAxis[1]),D=(0,l.$q)(h.xAxis,P.xAxis[0]),b=D.display?(0,c.zc)(D.display(C)):C,M=(0,l.$q)(h.yAxis,P.yAxis[0]),x=(0,l.jC)(h.yAxis,P.yAxis[0],P.yAxis[1]),R=M.display,S=R(x);return s.createElement(d.c,{series:[{color:S.color,label:(0,p.CZ)(M),value:(0,c.zc)(S)}],timestamp:b})};g.displayName="SingleModeGraphTooltip";const y=({mode:h=f.f3.Single,dimensions:P,activeDimensions:a,pos:C,timeZone:D})=>!a||!a.xAxis?null:h==="single"?s.createElement(g,{dimensions:P,activeDimensions:a,timeZone:D}):s.createElement(m,{dimensions:P,activeDimensions:a,pos:C,timeZone:D});y.displayName="GraphTooltip";class E extends s.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.onPlotSelected=(P,a)=>{const{onHorizontalRegionSelected:C}=this.props;C&&C(a.xaxis.from,a.xaxis.to)},this.onPlotHover=(P,a,C)=>{this.setState({isTooltipVisible:!0,activeItem:C,pos:a})},this.onPlotClick=(P,a,C)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:C,contextPos:a})},this.renderTooltip=()=>{const{children:P,series:a,timeZone:C}=this.props,{pos:D,activeItem:b,isTooltipVisible:M}=this.state;let x=null;if(!M||!D||a.length===0||(s.Children.forEach(P,L=>{if(x)return;(L&&L.type&&(L.type.displayName||L.type.name))===u.I.displayName&&(x=L)}),!x))return null;const R=x.props,S=R.mode||"single";if(!b&&S==="single")return null;const O=R.tooltipComponent||y,U=b?b.series.seriesIndex:0,I=b?b.dataIndex:void 0,F={xAxis:[U,I],yAxis:b?[b.series.seriesIndex,b.dataIndex]:null},w={dimensions:{xAxis:(0,l.q2)("xAxis",a.map(L=>L.timeField)),yAxis:(0,l.q2)("yAxis",a.map(L=>L.valueField))},activeDimensions:F,pos:D,mode:R.mode||f.f3.Single,timeZone:C},K=s.createElement(O,{...w});return s.cloneElement(x,{content:K,position:{x:D.pageX,y:D.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:P}=this.props,{contextPos:a,contextItem:C,isContextVisible:D}=this.state;if(!D||!a||!C||P.length===0)return null;const b=C?C.series.seriesIndex:0,M=C?C.dataIndex:void 0,x={xAxis:[b,M],yAxis:C?[C.series.seriesIndex,C.dataIndex]:null},R={xAxis:(0,l.q2)("xAxis",P.map(I=>I.timeField)),yAxis:(0,l.q2)("yAxis",P.map(I=>I.valueField))},S=()=>this.setState({isContextVisible:!1}),O=()=>({datapoint:C.datapoint,dataIndex:C.dataIndex,series:C.series,seriesIndex:C.series.seriesIndex,pageX:a.pageX,pageY:a.pageY}),U={x:a.pageX,y:a.pageY,onClose:S,getContextMenuSource:O,timeZone:this.props.timeZone,dimensions:R,contextDimensions:x};return s.createElement(o.w,{...U})},this.getBarWidth=()=>{const{series:P}=this.props;return Math.min(...P.map(a=>a.timeStep))}}componentDidUpdate(P,a){P!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=n()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(P){return P.length===0?[{show:!0,min:-1,max:1}]:(0,i.uniqBy)(P.map(a=>{const C=a.yAxis?a.yAxis.index:1,D=a.yAxis&&a.yAxis.min&&!isNaN(a.yAxis.min)?a.yAxis.min:null,b=a.yAxis&&a.yAxis.tickDecimals&&!isNaN(a.yAxis.tickDecimals)?a.yAxis.tickDecimals:null;return{show:!0,index:C,position:C===1?"left":"right",min:D,tickDecimals:b}}),a=>a.index)}draw(){if(this.element===null)return;const{width:P,series:a,timeRange:C,showLines:D,showBars:b,showPoints:M,isStacked:x,lineWidth:R,timeZone:S,onHorizontalRegionSelected:O}=this.props;if(!P)return;const U=P/100,I=C.from.valueOf(),F=C.to.valueOf(),w=this.getYAxes(a),K={legend:{show:!1},series:{stack:x,lines:{show:D,lineWidth:R,zero:!1},points:{show:M,fill:1,fillColor:!1,radius:2},bars:{show:b,fill:1,barWidth:b?this.getBarWidth()/1.5:1,zero:!1,lineWidth:R},shadowSize:0},xaxis:{timezone:S,show:!0,mode:"time",min:I,max:F,label:"Datetime",ticks:U,timeformat:(0,r.mc)(U,I,F),tickFormatter:r.sV},yaxes:w,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:O?"x":null,color:"#666"},crosshair:{mode:"x"}};try{n().plot(this.element,a.filter(L=>L.isVisible),K)}catch(L){throw console.error("Graph rendering error",L,K,a),new Error("Error rendering panel")}}render(){const{ariaLabel:P,height:a,width:C,series:D}=this.props,b=D.length===0,M=this.renderTooltip(),x=this.renderContextMenu();return s.createElement("div",{className:"graph-panel","aria-label":P},s.createElement("div",{className:"graph-panel__chart",ref:R=>this.element=R,style:{height:a,width:C},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),b&&s.createElement("div",{className:"datapoints-warning"},"No data"),M,x)}}E.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1};const v=null},65987:(Y,T,e)=>{"use strict";e.d(T,{b:()=>p,w:()=>c});var t=e(9892),n=e(66111),i=e(61113),s=e(77258),l=e(72648),f=e(30909),u=e(72777),o=e(52081),d=e(14391),r=e(42044),m=e(6264);const c=({getContextMenuSource:y,timeZone:E,itemsGroup:v,dimensions:h,contextDimensions:P,...a})=>{const C=y(),D=v?v.map(x=>({...x,items:x.items?.filter(R=>R.label)})):[],b=()=>{if(!C)return null;let x;if(h?.yAxis&&P?.yAxis?.[1]){const S=(0,i.jC)(h.yAxis,P.yAxis[0],P.yAxis[1]),O=C.series.valueField.display;x=O(S)}const R=(0,s.dq)(C.datapoint[0],{defaultWithMS:C.series.hasMsResolution,timeZone:E});return n.createElement(p,{timestamp:R,seriesColor:C.series.color,displayName:C.series.alias||C.series.label,displayValue:x})},M=()=>D?.map((x,R)=>n.createElement(d.k,{key:`${x.label}${R}`,label:x.label},(x.items||[]).map(S=>n.createElement(r.s,{key:`${S.label}`,url:S.url,label:S.label,target:S.target,icon:S.icon,active:S.active,onClick:S.onClick}))));return n.createElement(f.x,{...a,renderMenuItems:M,renderHeader:b})},p=({timestamp:y,seriesColor:E,displayName:v,displayValue:h})=>{const P=(0,l.wW)(g);return n.createElement("div",{className:P.wrapper},n.createElement("strong",null,y),n.createElement(o.Lh,null,n.createElement("div",null,n.createElement(m.F,{color:E}),n.createElement("span",{className:P.displayName},v)),h&&n.createElement(u.W,{value:h})))};function g(y){return{wrapper:t.css`
      padding: ${y.spacing(.5)} ${y.spacing(1)};
      font-size: ${y.typography.size.sm};
      z-index: ${y.zIndex.tooltip};
    `,displayName:t.css`
      white-space: nowrap;
      padding-left: ${y.spacing(.5)};
    `}}},56506:(Y,T,e)=>{"use strict";e.d(T,{U:()=>s});var t=e(82897),n=e.n(t),i=e(66111);class s extends i.Component{constructor(f){super(f),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:f.series}}componentDidUpdate(f){const{series:u}=this.props;(0,t.isEqual)(f.series,u)||this.setState({hiddenSeries:[],toggledSeries:u})}onSeriesToggle(f,u){const{series:o,onHiddenSeriesChanged:d}=this.props,{hiddenSeries:r}=this.state;if(u.ctrlKey||u.metaKey||u.shiftKey){const g=r.indexOf(f)>-1?r.filter(E=>E!==f):r.concat([f]),y=o.map(E=>({...E,isVisible:g.indexOf(E.label)===-1}));this.setState({hiddenSeries:g,toggledSeries:y},()=>d?d(g):void 0);return}const m=o.map(g=>g.label),c=r.length+1===m.length?[]:(0,t.difference)(m,[f]),p=o.map(g=>({...g,isVisible:c.indexOf(g.label)===-1}));this.setState({hiddenSeries:c,toggledSeries:p},()=>d?d(c):void 0)}render(){const{children:f}=this.props,{toggledSeries:u}=this.state;return f({onSeriesToggle:this.onSeriesToggle,toggledSeries:u})}}},29781:(Y,T,e)=>{"use strict";e.d(T,{U:()=>d});var t=e(9892),n=e(66111),i=e(7804),s=e(68226),l=e(78056),f=e(87691);const u=(0,i.B)(({placement:r})=>({wrapper:t.css`
    display: flex;
    flex-direction: ${r==="bottom"?"column":"row"};
  `,graphContainer:t.css`
    min-height: 65%;
    flex-grow: 1;
  `,legendContainer:t.css`
    padding: 10px 0;
    max-height: ${r==="bottom"?"35%":"none"};
  `})),o=(r,m=!1,c=!1)=>{const p=r.reduce((y,E)=>y+(E[1]||0),0)===0,g=!r.reduce((y,E)=>y&&E[1]!==null,!0);return m&&g||c&&p},d=r=>{const{series:m,timeRange:c,width:p,height:g,showBars:y,showLines:E,showPoints:v,sortLegendBy:h,sortLegendDesc:P,legendDisplayMode:a,legendVisibility:C,placement:D,onSeriesToggle:b,onToggleSort:M,hideEmpty:x,hideZero:R,isStacked:S,lineWidth:O,onHorizontalRegionSelected:U,timeZone:I,children:F,ariaLabel:w}=r,{graphContainer:K,wrapper:L,legendContainer:V}=u(r),H=m.reduce((j,A)=>o(A.data,x,R)?j:j.concat([{label:A.label,color:A.color||"",disabled:!A.isVisible,yAxis:A.yAxis.index,getDisplayValues:()=>A.info||[]}]),[]);return n.createElement("div",{className:L,"aria-label":w},n.createElement("div",{className:K},n.createElement(f.k,{series:m,timeRange:c,timeZone:I,showLines:E,showPoints:v,showBars:y,width:p,height:g,isStacked:S,lineWidth:O,onHorizontalRegionSelected:U},F)),C&&n.createElement("div",{className:V},n.createElement(s.$,{hideHorizontalTrack:!0},n.createElement(l.l,{items:H,displayMode:a,placement:D,sortBy:h,sortDesc:P,onLabelClick:(j,A)=>{b&&b(j.label,A)},onToggleSort:M}))))}},31438:(Y,T,e)=>{"use strict";e.d(T,{mc:()=>o,sV:()=>u,wu:()=>f});var t=e(2703),n=e(30471),i=e(77258),s=e(82410);const l=(d,r)=>{let m=0,c=d.values.length-1,p;for(;;){if(m>c)return Math.max(c,0);p=Math.floor((m+c)/2);const g=d.values[p];if(g===r)return p;g&&g<r?m=p+1:c=p-1}},f=(d,r,m,c)=>{let p,g,y,E,v;const h=[];let P,a;for(p=0;p<d.length;p++){g=d[p];const C=r[p];y=l(C,m),E=m-C.values[y],v=C.values[y],(P===void 0||E>=0&&(E<P||P<0)||E<0&&E>P)&&(P=E,a=C.display?(0,t.zc)(C.display(v)):v);const D=g.display(g.values[y]);h.push({value:(0,t.zc)(D),datapointIndex:y,seriesIndex:p,color:D.color,label:(0,n.CZ)(g),time:C.display?(0,t.zc)(C.display(v)):v})}return{results:h,time:a}},u=(d,r)=>(0,i.dq)(d,{format:r?.options?.timeformat,timeZone:r?.options?.timezone}),o=(d,r,m)=>{if(r&&m&&d){const c=m-r,p=c/d/1e3,g=86400010,y=31536e6;return p<=10?s.U6.interval.millisecond:p<=45?s.U6.interval.second:c<=g?s.U6.interval.minute:p<=8e4?s.U6.interval.hour:c<=y?s.U6.interval.day:p<=31536e3?s.U6.interval.month:s.U6.interval.year}return s.U6.interval.minute}},72269:(Y,T,e)=>{"use strict";e.d(T,{d:()=>y,j:()=>p});var t=e(66111),n=e(53376),i=e(98803),s=e(50035),l=e(90748),f=e(23588),u=e(4063),o=e(60325),d=e(729),r=e(3200),m=e(2445),c=e(86979);const p="__fixed";function g(E,v,h=[]){for(const P of h)if(typeof P=="function"){if(!P(E,v))return!1}else if(v[P]!==E[P])return!1;return!0}class y extends t.Component{constructor(v){super(v),this.panelContext={},this.subscription=new n.w0,this.getTimeRange=()=>this.props.timeRange;let h=this.prepState(v);h.alignedData=h.config.prepData([h.alignedFrame]),this.state=h,this.plotInstance=t.createRef()}prepState(v,h=!0){let P=null;const{frames:a,fields:C,preparePlotFrame:D}=v,M=(D||c.R)(a,C||{x:s.Ls.get(l.mi.firstTimeField).get({}),y:s.Ls.get(l.mi.numeric).get({})},v.timeRange);if((0,m.Zp)("GraphNG",!1,"data aligned",M),M){let x=this.state?.config;h&&(x=v.prepConfig(M,this.props.frames,this.getTimeRange),(0,m.Zp)("GraphNG",!1,"config prepared",x)),P={alignedFrame:M,config:x},(0,m.Zp)("GraphNG",!1,"data prepared",P.alignedData)}return P}handleCursorUpdate(v){const h=v.payload?.point?.time,P=this.plotInstance.current;if(P&&h){const a=P.valToPos(h,"x");let C;if(a&&(C=(0,m.ah)(P,P.posToIdx(a))),!C||!a)return;P.setCursor({left:a,top:C})}}componentDidMount(){this.panelContext=this.context;const{eventBus:v}=this.panelContext;this.subscription.add(v.getStream(f.es).pipe((0,i.p)(50)).subscribe({next:h=>{v!==h.origin&&this.handleCursorUpdate(h)}})),this.subscription.add(v.getStream(u.IA).pipe((0,i.p)(50)).subscribe({next:h=>this.handleCursorUpdate(h)})),this.subscription.add(v.getStream(f.xH).pipe((0,i.p)(50)).subscribe({next:()=>{const h=this.plotInstance?.current;h&&h.setCursor({left:-10,top:-10})}}))}componentDidUpdate(v){const{frames:h,structureRev:P,timeZone:a,propsToDiff:C}=this.props,D=!g(v,this.props,C);if(h!==v.frames||D||a!==v.timeZone){let b=this.prepState(this.props,!1);b&&((this.state.config===void 0||a!==v.timeZone||P!==v.structureRev||!P||D)&&(b.config=this.props.prepConfig(b.alignedFrame,this.props.frames,this.getTimeRange),(0,m.Zp)("GraphNG",!1,"config recreated",b.config)),b.alignedData=b.config.prepData([b.alignedFrame]),this.setState(b))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:v,height:h,children:P,timeRange:a,renderLegend:C}=this.props,{config:D,alignedFrame:b,alignedData:M}=this.state;return D?t.createElement(d.AY,{width:v,height:h,legend:C(D)},(x,R)=>t.createElement(r.N,{config:D,data:M,width:x,height:R,timeRange:a,plotRef:S=>this.plotInstance.current=S},P?P(D,b):null)):null}}y.contextType=o.bb},16566:(Y,T,e)=>{"use strict";e.d(T,{z:()=>i});var t=e(66111);const n=t.createContext({}),i=()=>{const{data:s,dimFields:l,mapSeriesIndexToDataFrameFieldIndex:f}=(0,t.useContext)(n),u=(0,t.useCallback)(()=>{const o=l.x;let d=null;for(let r=0;r<s.fields.length;r++)if(o(s.fields[r],s,[s])){d=s.fields[r];break}return d},[s,l]);return{dimFields:l,mapSeriesIndexToDataFrameFieldIndex:f,getXAxisField:u,alignedData:s}}},45778:(Y,T,e)=>{"use strict";e.d(T,{w:()=>i});var t=e(99098);const n={threshold:(l,f,u)=>l+u,midpoint:(l,f,u)=>(l+f)/2,plusone:(l,f,u)=>l+1};function i(l){if(l.frame.length===0)return l.frame;let f=!0,{frame:u,refFieldName:o,refFieldPseudoMax:d,refFieldPseudoMin:r,insertMode:m}=l;m||(m=n.threshold);const c=u.fields.find(y=>o!=null?y.name===o:y.type===t.fS.time);if(c==null)return u;c.state={...c.state,nullThresholdApplied:!0};const p=u.fields.map(y=>y.config.custom?.insertNulls??c.config.interval??null),g=new Set(p);if(g.delete(null),g.size===0)return u;if(g.size===1){const y=g.values().next().value;if(y<=0)return u;const E=c.values,v=u.fields.map(P=>P.values),h=s(E,v,y,r,d,m,f);return h===v?u:{...u,length:h[0].length,fields:u.fields.map((P,a)=>({...P,values:h[a]}))}}return u}function s(l,f,u,o=null,d=null,r,m){const c=l.length,p=[];if(o!=null&&o<l[0]){let v=Math.ceil((l[0]-o)/u),h=l[0]-v*u;for(;h<l[0];)p.push(r(h-u,h,u)),h+=u}p.push(l[0]);let g=l[0];for(let v=1;v<c;v++){const h=l[v];for(;h-g>u&&(p.push(r(g,h,u)),g+=u,!!m););p.push(h),g=h}if(d!=null&&d>g)for(;g+u<d;)p.push(r(g,d,u)),g+=u;const y=p.length;if(y===c)return f;const E=[];for(let v of f){let h;if(v!==l){h=Array(y);for(let P=0,a=0;P<y;P++)h[P]=l[a]===p[P]?v[a++]:null}else h=p;E.push(h)}return E}},45389:(Y,T,e)=>{"use strict";e.d(T,{I:()=>t});function t(n){return{...n,fields:n.fields.map(i=>{const s=+i.config?.noValue;if(Number.isNaN(s))return i;{const l=i.values.slice();for(let f=0;f<l.length;f++)l[f]===null&&(l[f]=s);return{...i,values:l}}})}}},86979:(Y,T,e)=>{"use strict";e.d(T,{z:()=>r,R:()=>d});var t=e(99098),n=e(17587),i=e(40538),s=e(72269),l=e(45778);function f(c,p,g){let y,E;for(let v=0;v<p.length;v++)if(p[v]==null)E==null&&y!=null&&(E=v);else{if(E!=null){if(c[v]-y<g)for(;E<v;)p[E++]=void 0;E=null}y=c[v]}return p}function u(c){return c.type===t.fS.number&&c.config.custom?.drawStyle===i.l8.Bars&&!c.config.custom?.hideFrom?.viz}function o(c){let p=c.fields.find(y=>y.type===t.fS.time),g=p?.values;for(let y=0;y<c.fields.length;y++){let E=c.fields[y];if(E===p||u(E))continue;let v=E.config.custom?.spanNulls;typeof v=="number"&&v!==-1&&(E.values=f(g,E.values,v))}return c}function d(c,p,g){c=c.map(h=>h.fields[0].state?.nullThresholdApplied?h:(0,l.w)({frame:h,refFieldName:null,refFieldPseudoMin:g?.from.valueOf(),refFieldPseudoMax:g?.to.valueOf()}));let y=0;c.forEach(h=>{h.fields.forEach(P=>{u(P)&&(P.config.custom={...P.config.custom,spanNulls:-1},y++)})});let E=1/0;y>1&&c.forEach(h=>{if(!h.fields.some(u))return;const P=h.fields[0].values;for(let a=0;a<P.length;a++)a>0&&(E=Math.min(E,P[a]-P[a-1]))});let v=(0,n._9)({frames:c,joinBy:p.x,keep:p.y,keepOriginIndices:!0});return v?(v=o(v),E!==1/0&&(v.fields.forEach((h,P)=>{let a=h.values;if(P===0){let C=a[a.length-1];a.push(C+E,C+2*E)}else u(h)?a.push(null,null):a.push(void 0,void 0)}),v.length+=2),v):null}function r(c){const p="na",g=`${c.min!==void 0?c.min:p}-${c.max!==void 0?c.max:p}`,y=`${c.custom?.axisSoftMin!==void 0?c.custom.axisSoftMin:p}-${c.custom?.axisSoftMax!==void 0?c.custom.axisSoftMax:p}`,E=`${c.custom?.axisPlacement!==void 0?c.custom?.axisPlacement:i.LB.Auto}`,v=c.unit??s.j,h=c.custom?.scaleDistribution?m(c.custom.scaleDistribution):i.wf.Linear,P=Boolean(c.custom?.axisLabel)?c.custom.axisLabel:p;return`${v}/${g}/${y}/${E}/${h}/${P}`}function m(c){return c.type===i.wf.Log?`${c.type}${c.log}`:c.type}},39904:(Y,T,e)=>{"use strict";e.d(T,{J:()=>Ht});var t=e(9892),n=e(66111),i=e(81910),s=e(84559),l=e(72648),f=e(79161),u=e(94654),o=e(70726),d=e(30735),r=e(97048),m=e(43053),c=e(76059),p=e(41477),g=e(25173),y=e(89833),E=e(59658),v=e(85429),h=e(26925),P=e(22346),a=e(85334),C=e(10958),D=e(84060),b=e(92270),M=e(7803),x=e(26183),R=e(94526),S=e(49893),O=e(79691),U=e(35644),I=e(47255),F=e(76375),w=e(88921),K=e(59622),L=e(35988),V=e(63536),H=e(65976),j=e(69343),A=e(38958),_=e(95e3),k=e(53505),Q=e(45299),re=e(65774),Z=e(39239),oe=e(53516),G=e(94149),le=e(62373),fe=e(42601),ae=e(39295),de=e(19570),ee=e(369),me=e(71942),q=e(97623),ne=e(7955),se=e(41429),he=e(88447),ue=e(61501),Te=e(47069),Ve=e(48509),ct=e(43305),Ie=e(16584),Ke=e(42644),Ge=e(79603),at=e(65291),dt=e(45230),Re=e(7835),ye=e(63050),Pe=e(62216),be=e(49024),Be=e(67226),ke=e(49162),ot=e(88297),ft=e(70973),gt=e(26055),St=e(56271),ut=e(5810),Dt=e(3408),ie=e(67628),De=e(50778),Ne=e(7274),Je=e(70471),Xe=e(75603),Le=e(91196),Ue=e(48411),ve=e(16243),Se=e(78372),$e=e(8380),Ye=e(48578),_e=e(83143),Et=e(18625),pt=e(91157),je=e(24062),ht=e(35548),we=e(26407),Qe=e(23841),nt=e(19827),it=e(5386),yt=e(60093),Lt=e(69980),Kt=e(50319),an=e(67743),un=e(27207),hn=e(7532),Wn=e(6127),Bt=e(61449),Ft=e(79748),Vt=e(80384),At=e(51164),Nt=e(58929),Rt=e(98723),wt=e(90577),_t=e(52677),Qt=e(98851),en=e(20323),sn=e(2533),Jt=e(51284),gn=e(63742),Cn=e(35398),In=e(57710),_n=e(91290),zn=e(27714),Hn=e(42148),sa=e(1316),Ma=e(39423),la=e(31277),jn=e(71580),ia=e(71171),Aa=e(36746),ga=e(4403),ya=e(80579),Wa=e(3802),rs=e(22465),Xa=e(11774),wa=e(98361),Pa=e(45453),os=e(99703),Ca=e(52370),ta=e(34924),Qa=e(40159),ua=e(76419),vs=e(26216),qa=e(96864),Fa=e(83507),ns=e(88043),ca=e(95428),as=e(87784),Os=e(72461),bs=e(39228),ir=e(59619),ur=e(43743),mr=e(24099),er=e(55054),ds=e(8),ws=e(3265),us=e(13965),Ws=e(6666),Es=e(97091),Fs=e(34604),Gs=e(75864),fr=e(28122),lr=e(48491),tr=e(97612),Ys=e(32411),js=e(36319),gr=e(96861),is=e(25169),pr=e(34052),hr=e(88175),vr=e(36277),nr=e(62695),cr=e(65023),Rs=e(51433),ms=e(46558);let Qs=!1,ys="public/img/icons/";function jt(qt,fn){i.V[ys+fn]={content:qt,status:"loaded"}}function He(){Qs=!0;const qt=typeof window<"u"&&window.__grafana_public_path__;qt&&(ys=qt+"img/icons/"),jt(f,"unicons/at.svg"),jt(u,"unicons/adjust-circle.svg"),jt(o,"unicons/angle-double-down.svg"),jt(d,"unicons/angle-double-right.svg"),jt(r,"unicons/angle-down.svg"),jt(m,"unicons/angle-left.svg"),jt(c,"unicons/angle-right.svg"),jt(p,"unicons/angle-up.svg"),jt(g,"unicons/apps.svg"),jt(y,"unicons/arrow.svg"),jt(E,"unicons/arrow-down.svg"),jt(v,"unicons/arrow-from-right.svg"),jt(h,"unicons/arrow-left.svg"),jt(P,"unicons/arrow-random.svg"),jt(a,"unicons/arrow-right.svg"),jt(C,"unicons/arrow-to-right.svg"),jt(D,"unicons/arrow-up.svg"),jt(b,"unicons/arrows-h.svg"),jt(M,"unicons/backward.svg"),jt(x,"unicons/bars.svg"),jt(R,"unicons/bell.svg"),jt(S,"unicons/bell-slash.svg"),jt(O,"unicons/bolt.svg"),jt(U,"unicons/book.svg"),jt(I,"unicons/book-open.svg"),jt(F,"unicons/brackets-curly.svg"),jt(w,"unicons/bug.svg"),jt(K,"unicons/building.svg"),jt(L,"unicons/calculator-alt.svg"),jt(V,"unicons/calendar-alt.svg"),jt(H,"unicons/calendar-slash.svg"),jt(j,"unicons/camera.svg"),jt(A,"unicons/channel-add.svg"),jt(_,"unicons/chart-line.svg"),jt(k,"unicons/check.svg"),jt(Q,"unicons/check-circle.svg"),jt(re,"unicons/circle.svg"),jt(Z,"unicons/clipboard-alt.svg"),jt(oe,"unicons/clock-nine.svg"),jt(G,"unicons/cloud.svg"),jt(le,"unicons/cloud-download.svg"),jt(fe,"unicons/code-branch.svg"),jt(ae,"unicons/cog.svg"),jt(de,"unicons/columns.svg"),jt(ee,"unicons/comment-alt.svg"),jt(me,"unicons/comment-alt-share.svg"),jt(q,"unicons/comments-alt.svg"),jt(ne,"unicons/compass.svg"),jt(se,"unicons/copy.svg"),jt(he,"unicons/corner-down-right-alt.svg"),jt(ue,"unicons/cube.svg"),jt(Te,"unicons/dashboard.svg"),jt(Ve,"unicons/database.svg"),jt(ct,"unicons/document-info.svg"),jt(Ie,"unicons/download-alt.svg"),jt(Ke,"unicons/draggabledots.svg"),jt(Ge,"unicons/edit.svg"),jt(at,"unicons/ellipsis-v.svg"),jt(dt,"unicons/ellipsis-h.svg"),jt(Re,"unicons/envelope.svg"),jt(ye,"unicons/exchange-alt.svg"),jt(Pe,"unicons/exclamation-circle.svg"),jt(be,"unicons/exclamation-triangle.svg"),jt(Be,"unicons/external-link-alt.svg"),jt(ke,"unicons/eye.svg"),jt(ot,"unicons/eye-slash.svg"),jt(ft,"unicons/file-alt.svg"),jt(gt,"unicons/file-blank.svg"),jt(St,"unicons/filter.svg"),jt(ut,"unicons/folder.svg"),jt(Dt,"unicons/folder-open.svg"),jt(ie,"unicons/folder-plus.svg"),jt(De,"unicons/folder-upload.svg"),jt(Ne,"unicons/forward.svg"),jt(Je,"unicons/graph-bar.svg"),jt(Xe,"unicons/history.svg"),jt(Le,"unicons/home-alt.svg"),jt(Ue,"unicons/import.svg"),jt(ve,"unicons/info.svg"),jt(Se,"unicons/info-circle.svg"),jt($e,"unicons/k6.svg"),jt(Ye,"unicons/key-skeleton-alt.svg"),jt(_e,"unicons/keyboard.svg"),jt(Et,"unicons/link.svg"),jt(pt,"unicons/list-ul.svg"),jt(je,"unicons/lock.svg"),jt(ht,"unicons/minus.svg"),jt(we,"unicons/minus-circle.svg"),jt(Qe,"unicons/mobile-android.svg"),jt(nt,"unicons/monitor.svg"),jt(it,"unicons/pause.svg"),jt(yt,"unicons/pen.svg"),jt(Lt,"unicons/play.svg"),jt(Kt,"unicons/plug.svg"),jt(an,"unicons/plus.svg"),jt(un,"unicons/plus-circle.svg"),jt(hn,"unicons/power.svg"),jt(Wn,"unicons/presentation-play.svg"),jt(Bt,"unicons/process.svg"),jt(Ft,"unicons/question-circle.svg"),jt(Vt,"unicons/repeat.svg"),jt(At,"unicons/rocket.svg"),jt(Nt,"unicons/rss.svg"),jt(Rt,"unicons/save.svg"),jt(wt,"unicons/search.svg"),jt(_t,"unicons/search-minus.svg"),jt(Qt,"unicons/search-plus.svg"),jt(en,"unicons/share-alt.svg"),jt(sn,"unicons/shield.svg"),jt(Jt,"unicons/signal.svg"),jt(gn,"unicons/signin.svg"),jt(Cn,"unicons/signout.svg"),jt(In,"unicons/sitemap.svg"),jt(_n,"unicons/slack.svg"),jt(zn,"unicons/sliders-v-alt.svg"),jt(Hn,"unicons/sort-amount-down.svg"),jt(sa,"unicons/sort-amount-up.svg"),jt(Ma,"unicons/square-shape.svg"),jt(la,"unicons/star.svg"),jt(jn,"unicons/step-backward.svg"),jt(ia,"unicons/sync.svg"),jt(Aa,"unicons/table.svg"),jt(ga,"unicons/tag-alt.svg"),jt(ya,"unicons/times.svg"),jt(Wa,"unicons/trash-alt.svg"),jt(rs,"unicons/unlock.svg"),jt(Xa,"unicons/upload.svg"),jt(wa,"unicons/user.svg"),jt(Pa,"unicons/users-alt.svg"),jt(os,"unicons/wrap-text.svg"),jt(Ca,"unicons/cloud-upload.svg"),jt(ta,"unicons/credit-card.svg"),jt(Qa,"unicons/file-copy-alt.svg"),jt(ua,"unicons/fire.svg"),jt(vs,"unicons/hourglass.svg"),jt(qa,"unicons/layer-group.svg"),jt(Fa,"unicons/layers-alt.svg"),jt(ns,"unicons/line-alt.svg"),jt(ca,"unicons/list-ui-alt.svg"),jt(as,"unicons/message.svg"),jt(Os,"unicons/palette.svg"),jt(bs,"unicons/percentage.svg"),jt(ir,"unicons/shield-exclamation.svg"),jt(ur,"unicons/plus-square.svg"),jt(mr,"unicons/x.svg"),jt(er,"unicons/capture.svg"),jt(ds,"custom/gf-grid.svg"),jt(ws,"custom/gf-landscape.svg"),jt(us,"custom/gf-layout-simple.svg"),jt(Ws,"custom/gf-portrait.svg"),jt(Es,"custom/gf-bar-alignment-after.svg"),jt(Fs,"custom/gf-bar-alignment-before.svg"),jt(Gs,"custom/gf-bar-alignment-center.svg"),jt(fr,"custom/gf-interpolation-linear.svg"),jt(lr,"custom/gf-interpolation-smooth.svg"),jt(tr,"custom/gf-interpolation-step-after.svg"),jt(Ys,"custom/gf-interpolation-step-before.svg"),jt(js,"custom/gf-logs.svg"),jt(gr,"custom/gf-movepane-left.svg"),jt(is,"custom/gf-movepane-right.svg"),jt(pr,"mono/favorite.svg"),jt(hr,"mono/grafana.svg"),jt(vr,"mono/heart.svg"),jt(nr,"mono/heart-break.svg"),jt(cr,"mono/panel-add.svg"),jt(Rs,"mono/library-panel.svg"),jt(ms,"unicons/record-audio.svg")}var mt=e(37532);const bt=qt=>({container:t.css`
      label: Icon;
      display: inline-block;
      line-height: 0;
    `,icon:t.css`
      vertical-align: middle;
      display: inline-block;
      fill: currentColor;
    `,orange:t.css`
      fill: ${qt.v1.palette.orange};
    `}),Ht=n.forwardRef(({size:qt="md",type:fn="default",name:bn,className:En,style:xn,title:qn="",...Pt},Ae)=>{const Me=(0,l.wW)(bt);if(bn?.startsWith("fa fa-"))return n.createElement("i",{className:nn(bn,En),...Pt,style:xn});if(Qs||He(),(0,s.Mo)(bn)||console.warn("Icon component passed an invalid icon name",bn),!bn||bn.includes(".."))return n.createElement("div",{ref:Ae},"invalid icon name");const Ze=(0,mt.B)(qt),tt=Ze,It=bn.startsWith("gf-bar-align")?16:bn.startsWith("gf-interp")?30:Ze,$t=(0,mt.y)(bn,fn),Tt=`${ys}${$t}/${bn}.svg`;return n.createElement("div",{className:Me.container,...Pt,ref:Ae},n.createElement(i.Z,{src:Tt,width:It,height:tt,title:qn,className:(0,t.cx)(Me.icon,En,fn==="mono"?{[Me.orange]:bn==="favorite"}:""),style:xn}))});Ht.displayName="Icon";function nn(qt,fn){return(0,t.cx)(qt,{"fa-spin":qt==="fa fa-spinner"},fn)}},37532:(Y,T,e)=>{"use strict";e.d(T,{B:()=>i,y:()=>n});const t=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function n(s,l){return s?.startsWith("gf-")?"custom":t.includes(s)?"mono":l==="default"?"unicons":l==="solid"?"solid":"mono"}function i(s){switch(s){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}},8180:(Y,T,e)=>{"use strict";e.d(T,{h:()=>r});var t=e(9892),n=e(66111),i=e(5680),s=e(72648),l=e(85419),f=e(7804),u=e(39904),o=e(37532),d=e(61860);const r=n.forwardRef(({name:c,size:p="md",iconType:g,tooltip:y,tooltipPlacement:E,ariaLabel:v,className:h,variant:P="secondary",...a},C)=>{const D=(0,s.l4)(),b=m(D,p,P),M=typeof y=="string"?y:"",x=n.createElement("button",{ref:y?void 0:C,"aria-label":v||M,...a,className:(0,t.cx)(b.button,h)},n.createElement(u.J,{name:c,size:p,className:b.icon,type:g}));return y?n.createElement(d.u,{ref:C,content:y,placement:E},x):x});r.displayName="IconButton";const m=(0,f.B)((c,p,g)=>{const y=(0,o.B)(p),E=Math.max(y/3,8);let v=c.colors.text.primary;return g==="primary"?v=c.colors.primary.text:g==="destructive"&&(v=c.colors.error.text),{button:t.css`
      width: ${y}px;
      height: ${y}px;
      background: transparent;
      border: none;
      color: ${v};
      padding: 0;
      margin: 0;
      outline: none;
      box-shadow: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border-radius: ${c.shape.borderRadius()};
      z-index: 0;
      margin-right: ${c.spacing(.5)};

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        color: ${c.colors.action.disabledText};
        opacity: 0.65;
        box-shadow: none;
      }

      &:before {
        content: '';
        display: block;
        opacity: 1;
        position: absolute;
        transition-duration: 0.2s;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        z-index: -1;
        bottom: -${E}px;
        left: -${E}px;
        right: -${E}px;
        top: -${E}px;
        background: none;
        border-radius: 50%;
        box-sizing: border-box;
        transform: scale(0);
        transition-property: transform, opacity;
      }

      &:focus,
      &:focus-visible {
        ${(0,l.getFocusStyles)(c)}
      }

      &:focus:not(:focus-visible) {
        ${(0,l.getMouseFocusStyles)(c)}
      }

      &:hover {
        color: ${v};

        &:before {
          background-color: ${g==="secondary"?c.colors.action.hover:i.alpha(v,.12)};
          border: none;
          box-shadow: none;
          opacity: 1;
          transform: scale(0.8);
        }
      }
    `,icon:t.css`
      vertical-align: baseline;
      display: flex;
    `}})},26338:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>u,a:()=>d});var t=e(9892),n=e(66111),i=e(206),s=e(72648),l=e(19985),f=e(17784);const u=n.memo(n.forwardRef(({title:m,featureState:c,...p},g)=>{const y=(0,s.wW)(o),E=c?n.createElement(n.Fragment,null,n.createElement("div",{className:y.badge},n.createElement(d,{featureState:c})),n.createElement("h3",null,m)):n.createElement("h3",null,m);return n.createElement(f.v,{branded:!0,title:E,urlTitle:"Read documentation",ref:g,...p})}));u.displayName="FeatureInfoBox";const o=m=>({badge:t.css`
      margin-bottom: ${m.spacing(1)};
    `}),d=({featureState:m,tooltip:c})=>{const p=r(m);return n.createElement(l.C,{text:p.text,color:p.color,icon:p.icon,tooltip:c})};function r(m){switch(m){case i.CQ.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},17784:(Y,T,e)=>{"use strict";e.d(T,{v:()=>u});var t=e(9892),n=e(66111),i=e(72648),s=e(7804),l=e(45253),f=e(39904);const u=n.memo(n.forwardRef(({title:d,className:r,children:m,branded:c,url:p,urlTitle:g,onDismiss:y,severity:E="info",...v},h)=>{const P=(0,i.wW)(o);return n.createElement(l.b,{severity:E,className:r,...v,ref:h,title:d},n.createElement("div",null,m),p&&n.createElement("a",{href:p,className:(0,t.cx)("external-link",P.docsLink),target:"_blank",rel:"noreferrer"},n.createElement(f.J,{name:"book"})," ",g||"Read more"))}));u.displayName="InfoBox";const o=(0,s.B)(d=>({docsLink:t.css`
      display: inline-block;
      margin-top: ${d.spacing(2)};
    `}))},4784:(Y,T,e)=>{"use strict";e.d(T,{K:()=>u});var t=e(9892),n=e(66111),i=e(10092),s=e(72648),l=e(39904),f=e(85511);function u({referenceElement:c,children:p,suffixIcon:g,placement:y,alternativePlacement:E}){const[v,h]=(0,n.useState)(null),[P,a]=(0,n.useState)(y),C=(0,i.D)(c,v,{placement:P}),D=(0,s.wW)(o),b=(0,s.wW)(m);return n.useEffect(()=>{E&&d(y,v,c)&&a(E)},[E,y,v,c]),n.createElement(f.h_,null,n.createElement("div",{style:{display:"inline-block",...C.styles.popper},...C.attributes.popper,ref:h,"aria-live":"polite"},n.createElement("span",{className:(0,t.cx)(D.root,b[P])},p&&n.createElement("span",null,p),g&&n.createElement(l.J,{name:g}))))}const o=c=>({root:(0,t.css)({...c.typography.bodySmall,willChange:"transform",background:c.components.tooltip.background,color:c.components.tooltip.text,padding:c.spacing(.5,1.5),borderRadius:100,display:"inline-flex",gap:c.spacing(.5),alignItems:"center"})}),d=(c,p,g)=>{const y=p?.getBoundingClientRect(),E=g?.getBoundingClientRect();if(!y||!E)return!1;switch(c){case"right":return y.width+E.right>window.innerWidth;case"bottom":return y.height+E.bottom>window.innerHeight;case"left":return E.left-y.width<0;case"top":return E.top-y.height<0;default:return!1}},r=(c,p)=>(0,t.keyframes)({from:{opacity:0,transform:`translate(${c}, ${p})`},to:{opacity:1,transform:"translate(0, 0px)"}}),m=c=>{const g=r(0,c.spacing(1)),y=r(0,c.spacing(1*-1)),E=r(c.spacing(1),0),v=r(c.spacing(1*-1),0);return{top:(0,t.css)({marginBottom:c.spacing(1),animation:`${g} ease-out 100ms`}),bottom:(0,t.css)({marginTop:c.spacing(1),animation:`${y} ease-out 100ms`}),left:(0,t.css)({marginRight:c.spacing(1),animation:`${E} ease-out 100ms`}),right:(0,t.css)({marginLeft:c.spacing(1),animation:`${v} ease-out 100ms`})}}},68668:(Y,T,e)=>{"use strict";e.d(T,{H:()=>s});var t=e(66111),n=e(4176),i=e(46967);const s=t.forwardRef((f,u)=>{const{defaultValue:o="",minWidth:d=10,maxWidth:r,onCommitChange:m,onKeyDown:c,onBlur:p,...g}=f,[y,E]=t.useState(o),[v,h]=t.useState(d);return(0,t.useEffect)(()=>{h(l(y.toString(),d,r))},[y,r,d]),t.createElement(i.I,{...g,ref:u,value:y.toString(),onChange:P=>{E(P.currentTarget.value)},width:v,onBlur:P=>{p?p(P):m&&m(P)},onKeyDown:P=>{c?c(P):P.key==="Enter"&&m&&m(P)},"data-testid":"autosize-input"})});function l(f,u,o){if(!f)return u;const d=3,r=(0,n.X1)(f.toString(),14).width/8+d;return u&&r<u?u:o&&r>o?o:r}s.displayName="AutoSizeInput"},46967:(Y,T,e)=>{"use strict";e.d(T,{H:()=>d,I:()=>o});var t=e(9892),n=e(66111),i=e(62326),s=e(72648),l=e(7804),f=e(73267),u=e(67487);const o=n.forwardRef((r,m)=>{const{className:c,addonAfter:p,addonBefore:g,prefix:y,suffix:E,invalid:v,loading:h,width:P=0,...a}=r,[C,D]=(0,i.Z)(),[b,M]=(0,i.Z)(),x=(0,s.l4)(),R=d({theme:x,invalid:!!v,width:P});return n.createElement("div",{className:(0,t.cx)(R.wrapper,c),"data-testid":"input-wrapper"},!!g&&n.createElement("div",{className:R.addon},g),n.createElement("div",{className:R.inputWrapper},y&&n.createElement("div",{className:R.prefix,ref:C},y),n.createElement("input",{ref:m,className:R.input,...a,style:{paddingLeft:y?D.width+12:void 0,paddingRight:E||h?M.width+12:void 0}}),(E||h)&&n.createElement("div",{className:R.suffix,ref:b},h&&n.createElement(u.$,{className:R.loadingIndicator,inline:!0}),E)),!!p&&n.createElement("div",{className:R.addon},p))});o.displayName="Input";const d=(0,l.B)(({theme:r,invalid:m=!1,width:c})=>{const p="28px",g=t.css`
    position: absolute;
    top: 0;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-grow: 0;
    flex-shrink: 0;
    font-size: ${r.typography.size.md};
    height: 100%;
    /* Min width specified for prefix/suffix classes used outside React component*/
    min-width: ${p};
    color: ${r.colors.text.secondary};
  `;return{wrapper:(0,t.cx)(t.css`
        label: input-wrapper;
        display: flex;
        width: ${c?`${r.spacing(c)}`:"100%"};
        height: ${r.spacing(r.components.height.md)};
        border-radius: ${r.shape.borderRadius()};
        &:hover {
          > .prefix,
          .suffix,
          .input {
            border-color: ${m?r.colors.error.border:r.colors.primary.border};
          }

          // only show number buttons on hover
          input[type='number'] {
            -moz-appearance: number-input;
            -webkit-appearance: number-input;
            appearance: textfield;
          }

          input[type='number']::-webkit-inner-spin-button,
          input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: inner-spin-button !important;
            opacity: 1;
          }
        }
      `),inputWrapper:t.css`
      label: input-inputWrapper;
      position: relative;
      flex-grow: 1;
      /* we want input to be above addons, especially for focused state */
      z-index: 1;

      /* when input rendered with addon before only*/
      &:not(:first-child):last-child {
        > input {
          border-left: none;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      /* when input rendered with addon after only*/
      &:first-child:not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      /* when rendered with addon before and after */
      &:not(:first-child):not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      input {
        /* paddings specified for classes used outside React component */
        &:not(:first-child) {
          padding-left: ${p};
        }
        &:not(:last-child) {
          padding-right: ${p};
        }
        &[readonly] {
          cursor: default;
        }
      }
    `,input:(0,t.cx)((0,f.GL)(r),(0,f.RK)(r,m),t.css`
        label: input-input;
        position: relative;
        z-index: 0;
        flex-grow: 1;
        border-radius: ${r.shape.borderRadius()};
        height: 100%;
        width: 100%;
      `),inputDisabled:t.css`
      background-color: ${r.colors.action.disabledBackground};
      color: ${r.colors.action.disabledText};
      border: 1px solid ${r.colors.action.disabledBackground};
      &:focus {
        box-shadow: none;
      }
    `,addon:t.css`
      label: input-addon;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-grow: 0;
      flex-shrink: 0;
      position: relative;

      &:first-child {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        > :last-child {
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      &:last-child {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        > :first-child {
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }
      > *:focus {
        /* we want anything that has focus and is an addon to be above input */
        z-index: 2;
      }
    `,prefix:(0,t.cx)(g,t.css`
        label: input-prefix;
        padding-left: ${r.spacing(1)};
        padding-right: ${r.spacing(.5)};
        border-right: none;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      `),suffix:(0,t.cx)(g,t.css`
        label: input-suffix;
        padding-left: ${r.spacing(1)};
        padding-right: ${r.spacing(1)};
        margin-bottom: -2px;
        border-left: none;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        right: 0;
      `),loadingIndicator:t.css`
      & + * {
        margin-left: ${r.spacing(.5)};
      }
    `}})},63619:(Y,T,e)=>{"use strict";e.d(T,{g:()=>n});var t=e(66698);const n=t.Qr},65455:(Y,T,e)=>{"use strict";e.d(T,{e:()=>g});var t=e(9892),n=e(82897),i=e(66111),s=e(9827),l=e(52666),f=e(72648),u=e(39904),o=e(8180);const d=t.css`
  display: flex;
  align-items: center;
  height: 100%;
`;function r({row:h,__rowID:P}){return i.createElement("div",{className:d},i.createElement(o.h,{tooltip:"toggle row expanded","aria-controls":P,name:h.isExpanded?"angle-down":"angle-right","aria-expanded":h.isExpanded,...h.getToggleRowExpandedProps()}))}const m="__expander";function c(h){return[{id:m,Cell:r,disableSortBy:!0,width:0},...h.map(P=>({id:P.id,accessor:P.id,Header:P.header||(()=>null),sortType:P.sortType||"alphanumeric",disableSortBy:!Boolean(P.sortType),width:P.disableGrow?0:void 0,visible:P.visible,...P.cell&&{Cell:P.cell}}))]}const p=h=>{const P=h.colors.emphasize(h.colors.background.primary,.03);return{table:t.css`
      border-radius: ${h.shape.borderRadius()};
      width: 100%;

      td {
        padding: ${h.spacing(1)};
      }

      td,
      th {
        min-width: ${h.spacing(3)};
      }
    `,disableGrow:t.css`
      width: 0%;
    `,header:t.css`
      border-bottom: 1px solid ${h.colors.border.weak};
      &,
      & > button {
        position: relative;
        white-space: nowrap;
        padding: ${h.spacing(1)};
      }
      & > button {
        &:after {
          content: '\\00a0';
        }
        width: 100%;
        height: 100%;
        background: none;
        border: none;
        padding-right: ${h.spacing(2.5)};
        text-align: left;
        font-weight: ${h.typography.fontWeightMedium};
      }
    `,row:t.css`
      label: row;
      border-bottom: 1px solid ${h.colors.border.weak};

      &:hover {
        background-color: ${P};
      }

      &:last-child {
        border-bottom: 0;
      }
    `,expandedRow:t.css`
      label: expanded-row-content;
      border-bottom: none;
    `,expandedContentRow:t.css`
      label: expanded-row-content;

      td {
        border-bottom: 1px solid ${h.colors.border.weak};
        position: relative;
        padding: ${h.spacing(2,2,2,5)};

        &:before {
          content: '';
          position: absolute;
          width: 1px;
          top: 0;
          left: 16px;
          bottom: ${h.spacing(2)};
          background: ${h.colors.border.medium};
        }
      }
    `,sortableHeader:t.css`
      /* increases selector's specificity so that it always takes precedence over default styles  */
      && {
        padding: 0;
      }
    `}};function g({data:h,className:P,columns:a,renderExpandedRow:C,getRowId:D}){const b=(0,f.wW)(p),M=(0,i.useMemo)(()=>c(a),[a]),x=y(),R=(0,i.useCallback)(w=>`${x}-${w.id}`.replace(/\s/g,""),[x]),{getTableProps:S,getTableBodyProps:O,headerGroups:U,rows:I,prepareRow:F}=(0,s.useTable)({columns:M,data:h,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,getRowId:D,initialState:{hiddenColumns:[!C&&m,...M.filter(w=>!(!w.visible||w.visible(h))).map(w=>w.id).filter(l.fQ)].filter(l.fQ)}},s.useSortBy,s.useExpanded);return I.forEach(F),i.createElement("table",{...S(),className:(0,t.cx)(b.table,P)},i.createElement("thead",null,U.map(w=>{const{key:K,...L}=w.getHeaderGroupProps();return i.createElement("tr",{key:K,...L},w.headers.map(V=>{const{key:H,...j}=V.getHeaderProps();return i.createElement("th",{key:H,className:(0,t.cx)(b.header,{[b.disableGrow]:V.width===0,[b.sortableHeader]:V.canSort}),...j,...V.isSorted&&{"aria-sort":V.isSortedDesc?"descending":"ascending"}},i.createElement(v,{column:V}))}))})),i.createElement("tbody",{...O()},I.map(w=>{const{key:K,...L}=w.getRowProps(),V=R(w),H=w.isExpanded;return i.createElement(i.Fragment,{key:K},i.createElement("tr",{...L,className:(0,t.cx)(b.row,H&&b.expandedRow)},w.cells.map(j=>{const{key:A,..._}=j.getCellProps();return i.createElement("td",{key:A,..._},j.render("Cell",{__rowID:V}))})),H&&C&&i.createElement("tr",{...L,id:V,className:b.expandedContentRow},i.createElement("td",{colSpan:w.cells.length},C(w.original))))})))}const y=()=>(0,i.useMemo)(()=>(0,n.uniqueId)("InteractiveTable"),[]),E=h=>({sortIcon:t.css`
    position: absolute;
    top: ${h.spacing(1)};
  `});function v({column:{canSort:h,render:P,isSorted:a,isSortedDesc:C,getSortByToggleProps:D}}){const b=(0,f.wW)(E),{onClick:M}=D(),x=i.createElement(i.Fragment,null,P("Header"),a&&i.createElement("span",{"aria-hidden":"true",className:b.sortIcon},i.createElement(u.J,{name:C?"angle-down":"angle-up"})));return h?i.createElement("button",{type:"button",onClick:M},x):x}},16065:(Y,T,e)=>{"use strict";e.d(T,{g:()=>i});var t=e(66111),n=e(73892);class i extends t.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,t.createRef)(),this.renderJson=()=>{const{json:l,config:f,open:u,onDidRender:o}=this.props,d=this.wrapperRef.current,r=new n.u(l,u,f);d.hasChildNodes()?d.replaceChild(r.render(),d.lastChild):d.appendChild(r.render()),o&&o(r.json)}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:l}=this.props;return t.createElement("div",{className:l,ref:this.wrapperRef})}}i.defaultProps={open:3,config:{animateOpen:!0}}},73892:(Y,T,e)=>{"use strict";e.d(T,{u:()=>v});var t=e(82897);function n(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function i(h){return!!h&&typeof h==="object"}function s(h){if(h===void 0)return"";if(h===null||typeof h=="object"&&!h.constructor)return"Object";const a=/function ([^(]*)/.exec(h.constructor.toString());return a&&a.length>1?a[1]:""}function l(h){return h===null?"null":typeof h}function f(h,P){const a=l(h);return a==="null"||a==="undefined"?a:(a==="string"&&(P='"'+n(P)+'"'),a==="function"?h.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":P)}let u="";function o(h){return i(h)?(u=s(h),Array.isArray(h)&&(u+="["+h.length+"]")):u=f(h,h.toString()),u}function d(h){return`json-formatter-${h}`}function r(h,P,a){const C=document.createElement(h);return P&&C.classList.add(d(P)),a!==void 0&&(a instanceof Node?C.appendChild(a):C.appendChild(document.createTextNode(String(a)))),C}const m=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,c=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,p=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,g=10,y=typeof window<"u"&&window.requestAnimationFrame||(h=>(h(),0)),E={animateOpen:!0,animateClose:!0};class v{constructor(P,a=1,C=E,D){this.json=P,this.open=a,this.config=C,this.key=D,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(P){this._isOpen=P}get isDate(){return this.type==="string"&&(m.test(this.json)||p.test(this.json)||c.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return i(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return s(this.json)}get type(){return l(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(P=>P||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(d("open")))}openAtDepth(P=1){P<0||(this.open=P,this.isOpen=P!==0,this.element&&(this.removeChildren(!1),P===0?this.element.classList.remove(d("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(d("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,t.isNumber)(this.json[0])||(0,t.isNumber)(this.json[1]))}renderArray(){const P=r("span");return P.appendChild(r("span","bracket","[")),this.isNumberArray()?(this.json.forEach((a,C)=>{C>0&&P.appendChild(r("span","array-comma",",")),P.appendChild(r("span","number",a))}),this.skipChildren=!0):P.appendChild(r("span","number",this.json.length)),P.appendChild(r("span","bracket","]")),P}render(P=!1){this.element=r("div","row");const a=r("a","toggler-link"),C=r("span","toggler");if(this.isObject&&a.appendChild(C),this.hasKey&&a.appendChild(r("span","key",`${this.key}:`)),this.isObject){const b=r("span","value"),M=r("span"),x=r("span","constructor-name",this.constructorName);if(M.appendChild(x),this.isArray){const R=this.renderArray();M.appendChild(R)}b.appendChild(M),a.appendChild(b)}else{const b=this.isUrl?r("a"):r("span");b.classList.add(d(this.type)),this.isDate&&b.classList.add(d("date")),this.isUrl&&(b.classList.add(d("url")),b.setAttribute("href",this.json));const M=f(this.json,this.json);b.appendChild(document.createTextNode(M)),a.appendChild(b)}const D=r("div","children");return this.isObject&&D.classList.add(d("object")),this.isArray&&D.classList.add(d("array")),this.isEmpty&&D.classList.add(d("empty")),this.config&&this.config.theme&&this.element.classList.add(d(this.config.theme)),this.isOpen&&this.element.classList.add(d("open")),P||this.element.appendChild(a),this.skipChildren?a.removeChild(C):this.element.appendChild(D),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&a.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(P=!1){const a=this.element&&this.element.querySelector(`div.${d("children")}`);if(!(!a||this.isEmpty))if(P){let C=0;const D=()=>{const b=this.keys[C],M=new v(this.json[b],this.open-1,this.config,b);a.appendChild(M.render()),C+=1,C<this.keys.length&&(C>g?D():y(D))};y(D)}else this.keys.forEach(C=>{const D=new v(this.json[C],this.open-1,this.config,C);a.appendChild(D.render())})}removeChildren(P=!1){const a=this.element&&this.element.querySelector(`div.${d("children")}`);if(P){let C=0;const D=()=>{a&&a.children.length&&(a.removeChild(a.children[0]),C+=1,C>g?D():y(D))};y(D)}else a&&(a.innerHTML="")}}},52081:(Y,T,e)=>{"use strict";e.d(T,{Ar:()=>l,Lh:()=>f,W2:()=>o,wc:()=>u});var t=e(9892),n=e(66111),i=e(72648),s=(c=>(c[c.Horizontal=0]="Horizontal",c[c.Vertical=1]="Vertical",c))(s||{});const l=({children:c,orientation:p=0,spacing:g="sm",justify:y="flex-start",align:E="normal",wrap:v=!1,width:h="100%",height:P="100%",...a})=>{const C=(0,i.wW)((0,n.useCallback)(D=>d(D,p,g,y,E,v),[E,y,p,g,v]));return n.createElement("div",{className:C.layout,style:{width:h,height:P},...a},n.Children.toArray(c).filter(Boolean).map((D,b)=>n.createElement("div",{className:C.childWrapper,key:b},D)))},f=({children:c,spacing:p,justify:g,align:y="center",wrap:E,width:v,height:h})=>n.createElement(l,{spacing:p,justify:g,orientation:0,align:y,width:v,height:h,wrap:E},c),u=({children:c,spacing:p,justify:g,align:y,width:E,height:v})=>n.createElement(l,{spacing:p,justify:g,orientation:1,align:y,width:E,height:v},c),o=({children:c,padding:p,margin:g,grow:y,shrink:E})=>{const v=(0,i.wW)((0,n.useCallback)(h=>m(h,p,g),[p,g]));return n.createElement("div",{className:(0,t.cx)(v.wrapper,y!==void 0&&t.css`
            flex-grow: ${y};
          `,E!==void 0&&t.css`
            flex-shrink: ${E};
          `)},c)},d=(c,p,g,y,E,v)=>{const h=g!=="none"?c.spacing(r[g]):0,P=p===0&&!v||p===1?0:`-${h}`,a=p===1?"vertical-group":"horizontal-group";return{layout:t.css`
      label: ${a};
      display: flex;
      flex-direction: ${p===1?"column":"row"};
      flex-wrap: ${v?"wrap":"nowrap"};
      justify-content: ${y};
      align-items: ${E};
      height: 100%;
      max-width: 100%;
      // compensate for last row margin when wrapped, horizontal layout
      margin-bottom: ${P};
    `,childWrapper:t.css`
      label: layoutChildrenWrapper;
      margin-bottom: ${p===0&&!v?0:h};
      margin-right: ${p===0?h:0};
      display: flex;
      align-items: ${E};

      &:last-child {
        margin-bottom: ${p===1&&0};
        margin-right: ${p===0&&0};
      }
    `}},r={none:0,xs:.5,sm:1,md:2,lg:3},m=(c,p,g)=>{const y=p&&p!=="none"&&c.spacing(r[p])||0,E=g&&g!=="none"&&c.spacing(r[g])||0;return{wrapper:t.css`
      label: container;
      margin: ${E};
      padding: ${y};
    `}}},29460:(Y,T,e)=>{"use strict";e.d(T,{r:()=>l});var t=e(66111),n=e(51947),i=e(72196),s=e(63418);const l=(0,t.forwardRef)(({href:f,children:u,...o},d)=>{const r=i.u.stripBaseFromUrl(s.QX.sanitizeUrl(f??""));return t.createElement(n.Link,{ref:d,to:r,...o},u)});l.displayName="Link"},398:(Y,T,e)=>{"use strict";e.d(T,{L:()=>l});var t=e(9892),n=e(66111),i=e(7804);const s=(0,i.B)((f=!1)=>({list:t.css`
    list-style-type: none;
    margin: 0;
    padding: 0;
  `,item:t.css`
    display: ${f&&"inline-block"||"block"};
  `}));class l extends n.PureComponent{constructor(u){super(u)}render(){const{items:u,renderItem:o,getItemKey:d,className:r,inline:m}=this.props,c=s(m);return n.createElement("ul",{className:(0,t.cx)(c.list,r)},u.map((p,g)=>n.createElement("li",{className:c.item,key:d?d(p):g},o(p,g))))}}},19882:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>i});var t=e(66111),n=e(398);class i extends t.PureComponent{render(){return t.createElement(n.L,{inline:!0,...this.props})}}},56766:(Y,T,e)=>{"use strict";e.d(T,{a:()=>i});var t=e(66111),n=e(398);class i extends t.PureComponent{render(){return t.createElement(n.L,{...this.props})}}},74750:(Y,T,e)=>{"use strict";e.d(T,{F:()=>u});var t=e(9892),n=e(66111),i=e(72648);const s=2.4,l=500,f=4e3;function u({width:d,ariaLabel:r="Loading bar"}){const m=(0,i.wW)(o),c=Math.min(Math.max(Math.round(d*s),l),f),p={width:"100%",animation:`${m.animation} ${c}ms infinite linear`,willChange:"transform"};return n.createElement("div",{style:p},n.createElement("div",{"aria-label":r,className:m.bar}))}const o=()=>({animation:(0,t.keyframes)({"0%":{transform:"translateX(-50%)"},"100%":{transform:"translateX(100%)"}}),bar:(0,t.css)({width:"28%",height:1,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)"})})},61744:(Y,T,e)=>{"use strict";e.d(T,{u:()=>l});var t=e(9892),n=e(66111),i=e(72648),s=e(67487);const l=({text:u,className:o,...d})=>{const r=(0,i.wW)(f);return n.createElement("div",{className:(0,t.cx)(r.container,o),...d},u," ",n.createElement(s.$,{inline:!0}))},f=u=>({container:t.css`
      margin-bottom: ${u.spacing(4)};
    `})},15448:(Y,T,e)=>{"use strict";e.d(T,{b:()=>s});var t=e(66111),n=e(8581),i=e(80760);const s=({value:l,onChange:f,context:u,item:o})=>{const d=o.settings??{},r=(0,i.IX)(u.data,d?.filter),m=(0,i.nw)(r,l),c=(0,t.useCallback)(g=>{if(!(g&&!(0,i.w3)(g.value,r)))return f(g?.value)},[r,f]),p=m.find(g=>g.value===l);return t.createElement(t.Fragment,null,t.createElement(n.Ph,{value:p,placeholder:d.placeholderText??"Select field",options:m,onChange:c,noOptionsMessage:d.noFieldsMessage,width:d.width,isClearable:d.isClearable!==!1}))}},16453:(Y,T,e)=>{"use strict";e.d(T,{$w:()=>m,OL:()=>o});var t=e(66111),n=e(99098),i=e(90748),s=e(50035),l=e(50622),f=e(8581);const u=(0,t.memo)(c=>{const{data:p,options:g,onChange:y,id:E}=c,v=d(p),h=r(v,g),P=(0,t.useCallback)(C=>y(C.value),[y]),a=h.find(C=>C.value===g);return t.createElement(f.Ph,{inputId:E,value:a,options:h,onChange:P})});u.displayName="FieldTypeMatcherEditor";const o=[{value:n.fS.number,label:"Number",icon:(0,l.WZ)(n.fS.number)},{value:n.fS.string,label:"String",icon:(0,l.WZ)(n.fS.string)},{value:n.fS.time,label:"Time",icon:(0,l.WZ)(n.fS.time)},{value:n.fS.boolean,label:"Boolean",icon:(0,l.WZ)(n.fS.boolean)},{value:n.fS.trace,label:"Traces",icon:(0,l.WZ)(n.fS.trace)},{value:n.fS.enum,label:"Enum",icon:(0,l.WZ)(n.fS.enum)},{value:n.fS.other,label:"Other",icon:(0,l.WZ)(n.fS.other)}],d=c=>(0,t.useMemo)(()=>{const p=new Map;for(const g of o)p.set(g.value,0);for(const g of c)for(const y of g.fields){const E=y.type||n.fS.other;let v=p.get(E);v||(v=0),p.set(E,v+1)}return p},[c]),r=(c,p)=>(0,t.useMemo)(()=>{let g=!1;const y=[];for(const E of o){const v=c.get(E.value),h=p===E.value;(v||h)&&y.push({...E,label:`${E.label} (${c.get(E.value)})`}),h&&(g=!0)}return p&&!g&&y.push({value:p,label:`${p} (No matches)`}),y},[c,p]),m={id:i.mi.byType,component:u,matcher:s.Ls.get(i.mi.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:c=>c}},92830:(Y,T,e)=>{"use strict";e.d(T,{J8:()=>r,fN:()=>g});var t=e(9892),n=e(66111),i=e(33750),s=e(90748),l=e(50035),f=e(40538),u=e(72648),o=e(46967),d=e(8581);const r=[{label:"==",value:f.Bd.EQ},{label:"!=",value:f.Bd.NEQ},{label:">",value:f.Bd.GT},{label:">=",value:f.Bd.GTE},{label:"<",value:f.Bd.LT},{label:"<=",value:f.Bd.LTE}];function m(y){return y===i.gz.allIsNull||y===i.gz.allIsZero}const c=({options:y,onChange:E})=>{const v=(0,u.wW)(p),h=(0,n.useMemo)(()=>i.TB.selectOptions([y?.reducer]),[y?.reducer]),P=(0,n.useCallback)(M=>E({...y,reducer:M.value}),[y,E]),a=(0,n.useCallback)(M=>E({...y,op:M.value}),[y,E]),C=(0,n.useCallback)(M=>{const x=M.currentTarget.valueAsNumber;return E({...y,value:x})},[y,E]),D=y??{},b=m(y.reducer);return n.createElement("div",{className:v.spot},n.createElement(d.Ph,{value:h.current,options:h.options,onChange:P,placeholder:"Select field reducer"}),D.reducer&&!b&&n.createElement(n.Fragment,null,n.createElement(d.Ph,{value:r.find(M=>M.value===D.op),options:r,onChange:a,"aria-label":"Comparison operator",width:19}),n.createElement(o.I,{type:"number",value:D.value,onChange:C})))},p=y=>({spot:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      align-content: flex-end;
      gap: 4px;
    `}),g={id:s.mi.byValue,component:c,matcher:l.Ls.get(s.mi.byValue),name:"Fields with values",description:"Set properties for fields with reducer condition",optionsToLabel:y=>`${y?.reducer} ${y?.op} ${y?.value}`}},43657:(Y,T,e)=>{"use strict";e.d(T,{O:()=>u,S:()=>r});var t=e(66111),n=e(30471),i=e(90748),s=e(50035),l=e(8581);const f=(m,c,p)=>{if(!p)return;let g=m.find(y=>!c.some(E=>y===E));if(g)return g};function u({value:m,data:c,onChange:p,placeholder:g}){const y=(0,t.useMemo)(()=>o(c),[c]),[E,v]=(0,t.useState)({refIds:[],value:void 0}),h=(0,t.useMemo)(()=>y.find(a=>a.value===m)??f(y,E.refIds,E.value),[m,y,E]),P=(0,t.useCallback)(a=>{p(a.value)},[p]);return(y!==E.refIds||h?.value!==E.value)&&v({refIds:y,value:h?.value}),t.createElement(l.Ph,{options:y,onChange:P,isClearable:!0,placeholder:g??"Select query refId",value:h})}function o(m){const c=new Map;for(const g of m){const y=g.refId??"",E=c.get(y)??[];E.length===0&&c.set(y,E),E.push(g)}const p=[];for(const[g,y]of c.entries())p.push({value:g,label:`Query: ${g??"(missing refId)"}`,description:d(y)});return p}function d(m){return`Frames (${m.length}):
    ${m.slice(0,Math.min(3,m.length)).map(c=>(0,n.nf)(c)).join(", ")} ${m.length>3?"...":""}`}const r={id:i.mi.byFrameRefID,component:m=>t.createElement(u,{value:m.options,data:m.data,onChange:m.onChange}),matcher:s.Ls.get(i.mi.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:m=>m}},6058:(Y,T,e)=>{"use strict";e.d(T,{i:()=>v});var t=e(53908),n=e(66111),i=e(90748),s=e(50035),l=e(46967);const f=(0,n.memo)(h=>{const{options:P,onChange:a}=h,C=(0,n.useCallback)(D=>a(D.target.value),[a]);return n.createElement(l.I,{placeholder:"Enter regular expression",defaultValue:P,onBlur:C})});f.displayName="FieldNameByRegexMatcherEditor";const u={id:i.mi.byRegexp,component:f,matcher:s.Ls.get(i.mi.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:h=>h};var o=e(8581),d=e(80760);const r=(0,n.memo)(h=>{const{data:P,options:a,onChange:C,id:D}=h,b=(0,d.IX)(P),M=(0,d.nw)(b,a),x=(0,n.useCallback)(S=>{if((0,d.w3)(S.value,b))return C(S.value)},[b,C]),R=M.find(S=>S.value===a);return n.createElement(o.Ph,{value:R,options:M,onChange:x,inputId:D})});r.displayName="FieldNameMatcherEditor";const m={id:i.mi.byName,component:r,matcher:s.Ls.get(i.mi.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:h=>h},c=(0,n.memo)(h=>{const{data:P,options:a,onChange:C}=h,{readOnly:D,prefix:b}=a,M=(0,d.IX)(P),x=(0,d.nw)(M,void 0),R=(0,n.useCallback)(S=>{if(Array.isArray(S))return C({...a,names:S.reduce((O,U)=>((0,d.w3)(U.value,M)&&O.push(U.value),O),[])})},[M,C,a]);if(D){const S=(a.names??[]).join(", ");return n.createElement(l.I,{value:S,readOnly:!0,disabled:!0,prefix:b})}return n.createElement(o.NU,{value:a.names,options:x,onChange:R})});c.displayName="FieldNameMatcherEditor";const p={id:i.mi.byNames,component:c,matcher:s.Ls.get(i.mi.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:h=>(h.names??[]).join(", "),excludeFromPicker:!0};var g=e(16453),y=e(92830),E=e(43657);const v=new t.B(()=>[m,u,g.$w,E.S,p,y.fN])},80760:(Y,T,e)=>{"use strict";e.d(T,{IX:()=>f,g2:()=>l,nw:()=>u,w3:()=>s});var t=e(66111),n=e(30471),i=e(50622);function s(o,d){return o?d.display.has(o)||d.raw.has(o):!1}function l(o,d){const r={display:new Set,raw:new Set,fields:new Map};for(const m of o)for(const c of m.fields){if(d&&!d(c))continue;const p=(0,n.CZ)(c,m,o);r.display.add(p),r.fields.set(p,c),c.name&&p!==c.name&&(r.raw.add(c.name),r.fields.set(c.name,c))}return r}function f(o,d){return(0,t.useMemo)(()=>l(o,d),[o,d])}function u(o,d,r,m){return(0,t.useMemo)(()=>{let c=!1;const p=[];r&&p.push(r);for(const g of o.display){!c&&g===d&&(c=!0);const y=o.fields.get(g);(!m||m===y?.type)&&p.push({value:g,label:g,icon:y?(0,i.e7)(y):void 0})}for(const g of o.raw)o.display.has(g)||(!c&&g===d&&(c=!0),p.push({value:g,label:`${g} (base field name)`}));return d&&!c&&p.push({value:d,label:`${d} (not found)`}),p},[o,d,r,m])}},95130:(Y,T,e)=>{"use strict";e.d(T,{v:()=>d});var t=e(9892),n=e(66111),i=e(72648),s=e(97456),l=e(14391),f=e(42044),u=e(69914);const o=n.forwardRef(({header:m,children:c,ariaLabel:p,onOpen:g,onClose:y,onKeyDown:E,...v},h)=>{const P=(0,i.wW)(r),a=(0,n.useRef)(null);(0,n.useImperativeHandle)(h,()=>a.current);const[C]=(0,u.d)({localRef:a,onOpen:g,onClose:y,onKeyDown:E});return n.createElement("div",{...v,tabIndex:-1,ref:a,className:P.wrapper,role:"menu","aria-label":p,onKeyDown:C},m&&n.createElement("div",{className:(0,t.cx)(P.header,Boolean(c)&&n.Children.toArray(c).length>0&&P.headerBorder)},m),c)});o.displayName="Menu";const d=Object.assign(o,{Item:f.s,Divider:s.R,Group:l.k}),r=m=>({header:(0,t.css)({padding:`${m.spacing(.5,1,1,1)}`}),headerBorder:(0,t.css)({borderBottom:`1px solid ${m.colors.border.weak}`}),wrapper:(0,t.css)({background:`${m.colors.background.primary}`,boxShadow:`${m.shadows.z3}`,display:"inline-block",borderRadius:`${m.shape.borderRadius()}`,padding:`${m.spacing(.5,0)}`})})},97456:(Y,T,e)=>{"use strict";e.d(T,{R:()=>s});var t=e(9892),n=e(66111),i=e(72648);function s(){const f=(0,i.wW)(l);return n.createElement("div",{className:f.divider})}const l=f=>({divider:(0,t.css)({height:1,backgroundColor:f.colors.border.weak,margin:f.spacing(.5,0)})})},14391:(Y,T,e)=>{"use strict";e.d(T,{k:()=>f});var t=e(9892),n=e(82897),i=e.n(n),s=e(66111),l=e(72648);const f=({label:o,ariaLabel:d,children:r})=>{const m=(0,l.wW)(u),c=`group-label-${(0,n.uniqueId)()}`;return s.createElement("div",{role:"group","aria-labelledby":!d&&o?c:void 0,"aria-label":d},o&&s.createElement("label",{id:c,className:m.groupLabel,"aria-hidden":!0},o),r)};f.displayName="MenuGroup";const u=o=>({groupLabel:t.css`
      color: ${o.colors.text.secondary};
      font-size: ${o.typography.size.sm};
      padding: ${o.spacing(.5,1)};
    `})},42044:(Y,T,e)=>{"use strict";e.d(T,{s:()=>m});var t=e(9892),n=e(66111),i=e(72648),s=e(85419),l=e(39904),f=e(68183),u=e(69914);const o=p=>{if(!p)return!1;const g=p.parentElement.getBoundingClientRect(),y=p.getBoundingClientRect();return y.width!==0&&g.right+y.width+10>window.innerWidth},d=n.memo(({items:p,isOpen:g,openedWithArrow:y,setOpenedWithArrow:E,close:v,customStyle:h})=>{const P=(0,i.wW)(r),a=(0,n.useRef)(null),[C]=(0,u.d)({localRef:a,isMenuOpen:g,openedWithArrow:y,setOpenedWithArrow:E,close:v}),[D,b]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{g&&a.current&&b(o(a.current))},[g]),n.createElement(n.Fragment,null,n.createElement("div",{className:P.iconWrapper,"aria-label":f.wl.components.Menu.SubMenu.icon},n.createElement(l.J,{name:"angle-right",className:P.icon,"aria-hidden":!0})),g&&n.createElement("div",{ref:a,className:(0,t.cx)(P.subMenu,{[P.pushLeft]:D}),"aria-label":f.wl.components.Menu.SubMenu.container,style:h},n.createElement("div",{tabIndex:-1,className:P.itemsWrapper,role:"menu",onKeyDown:C},p)))});d.displayName="SubMenu";const r=p=>({iconWrapper:t.css`
      display: flex;
      flex: 1;
      justify-content: end;
    `,icon:t.css`
      opacity: 0.7;
      margin-left: ${p.spacing(1)};
      color: ${p.colors.text.secondary};
    `,itemsWrapper:t.css`
      background: ${p.colors.background.primary};
      box-shadow: ${p.shadows.z3};
      display: inline-block;
      border-radius: ${p.shape.borderRadius()};
    `,pushLeft:t.css`
      right: 100%;
      left: unset;
    `,subMenu:t.css`
      position: absolute;
      top: 0;
      left: 100%;
      z-index: ${p.zIndex.dropdown};
    `}),m=n.memo(n.forwardRef((p,g)=>{const{url:y,icon:E,label:v,ariaLabel:h,ariaChecked:P,target:a,onClick:C,className:D,active:b,disabled:M,destructive:x,childItems:R,role:S="menuitem",tabIndex:O=-1,customSubMenuContainerStyles:U,shortcut:I,testId:F}=p,w=(0,i.wW)(c),[K,L]=(0,n.useState)(b),[V,H]=(0,n.useState)(!1),[j,A]=(0,n.useState)(!1),_=(0,n.useCallback)(()=>{M||(H(!0),L(!0))},[M]),k=(0,n.useCallback)(()=>{M||(H(!1),L(!1))},[M]),Q=R&&R.length>0,re=Q?"div":y===void 0?"button":"a",Z=(0,t.cx)({[w.item]:!0,[w.active]:K,[w.disabled]:M,[w.destructive]:x&&!M},D),oe={[re==="button"?"disabled":"aria-disabled"]:M,...re==="a"&&M&&{href:void 0,onClick:void 0},...M&&{tabIndex:-1,["data-disabled"]:M}},G=(0,n.useRef)(null);(0,n.useImperativeHandle)(g,()=>G.current);const le=de=>{switch(de.key){case"ArrowRight":de.preventDefault(),de.stopPropagation(),Q&&(H(!0),A(!0),L(!0));break;default:break}},fe=()=>{H(!1),L(!1),G?.current?.focus()},ae=Boolean(I&&I.length>0);return n.createElement(re,{target:a,className:Z,rel:a==="_blank"?"noopener noreferrer":void 0,href:y,onClick:C,onMouseEnter:_,onMouseLeave:k,onKeyDown:le,role:y===void 0?S:void 0,"data-role":"menuitem",ref:G,"data-testid":F,"aria-label":h,"aria-checked":P,tabIndex:O,...oe},n.createElement(n.Fragment,null,E&&n.createElement(l.J,{name:E,className:w.icon,"aria-hidden":!0}),v,n.createElement("div",{className:(0,t.cx)(w.rightWrapper,{[w.withShortcut]:ae})},ae&&n.createElement("div",{className:w.shortcut},n.createElement(l.J,{name:"keyboard","aria-hidden":!0}),I),Q&&n.createElement(d,{items:R,isOpen:V,openedWithArrow:j,setOpenedWithArrow:A,close:fe,customStyle:U}))))}));m.displayName="MenuItem";const c=p=>({item:t.css`
      background: none;
      cursor: pointer;
      white-space: nowrap;
      color: ${p.colors.text.primary};
      display: flex;
      align-items: center;
      padding: ${p.spacing(.5,2)};
      min-height: ${p.spacing(4)};
      margin: 0;
      border: none;
      width: 100%;
      position: relative;

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${p.colors.action.hover};
        color: ${p.colors.text.primary};
        text-decoration: none;
      }

      &:focus-visible {
        ${(0,s.getFocusStyles)(p)}
      }
    `,active:t.css`
      background: ${p.colors.action.hover};
    `,destructive:t.css`
      color: ${p.colors.error.text};

      svg {
        color: ${p.colors.error.text};
      }

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${p.colors.error.main};
        color: ${p.colors.error.contrastText};

        svg {
          color: ${p.colors.error.contrastText};
        }
      }
    `,disabled:t.css`
      color: ${p.colors.action.disabledText};

      &:hover,
      &:focus,
      &:focus-visible {
        cursor: not-allowed;
        background: none;
        color: ${p.colors.action.disabledText};
      }
    `,icon:t.css`
      opacity: 0.7;
      margin-right: 10px;
      margin-left: -4px;
      color: ${p.colors.text.secondary};
    `,rightWrapper:t.css`
      display: flex;
      align-items: center;
      margin-left: auto;
    `,shortcutIcon:t.css`
      margin-right: ${p.spacing(1)};
    `,withShortcut:t.css`
      min-width: ${p.spacing(10.5)};
    `,shortcut:t.css`
      display: flex;
      align-items: center;
      gap: ${p.spacing(1)};
      margin-left: ${p.spacing(2)};
      color: ${p.colors.text.secondary};
      opacity: 0.7;
    `})},69914:(Y,T,e)=>{"use strict";e.d(T,{d:()=>l});var t=e(66111),n=e(49380);const i=(f,u)=>(f%u+u)%u,s=-1,l=({localRef:f,isMenuOpen:u,openedWithArrow:o,setOpenedWithArrow:d,close:r,onOpen:m,onClose:c,onKeyDown:p})=>{const[g,y]=(0,t.useState)(s);return(0,t.useEffect)(()=>{u&&o&&(y(0),d?.(!1))},[u,o,d]),(0,t.useEffect)(()=>{const v=f?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');v?.[g]?.focus(),v?.forEach((h,P)=>{h.tabIndex=P===g?0:-1})},[f,g]),(0,n.Z)(()=>{m?.(y)}),[v=>{const h=f?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),P=h?.length??0;switch(v.key){case"ArrowUp":v.preventDefault(),v.stopPropagation(),y(i(g-1,P));break;case"ArrowDown":v.preventDefault(),v.stopPropagation(),y(i(g+1,P));break;case"ArrowLeft":v.preventDefault(),v.stopPropagation(),y(s),r?.();break;case"Home":v.preventDefault(),v.stopPropagation(),y(0);break;case"End":v.preventDefault(),v.stopPropagation(),y(P-1);break;case"Enter":v.preventDefault(),v.stopPropagation(),h?.[g]?.click();break;case"Escape":c?.();break;case"Tab":v.preventDefault(),c?.();break;default:break}p?.(v)}]}},35029:(Y,T,e)=>{"use strict";e.d(T,{u:()=>m});var t=e(9892),n=e(29952),i=e(83962),s=e(86922),l=e(66111),f=e(72648),u=e(8180),o=e(52081),d=e(38894),r=e(27581);function m(g){const{title:y,children:E,isOpen:v=!1,closeOnEscape:h=!0,closeOnBackdropClick:P=!0,className:a,contentClassName:C,onDismiss:D,onClickBackdrop:b,trapFocus:M=!0}=g,x=(0,f.l4)(),R=(0,r.J)(x),S=(0,l.useRef)(null),{overlayProps:O,underlayProps:U}=(0,s.Ir)({isKeyboardDismissDisabled:!h,isOpen:v,onClose:D},S),{dialogProps:I,titleProps:F}=(0,n.R)({},S);if(!v)return null;const w=(0,t.cx)(R.modalHeader,typeof y!="string"&&R.modalHeaderWithTabs);return l.createElement(s.Xj,null,l.createElement("div",{role:"presentation",className:R.modalBackdrop,onClick:b||(P?D:void 0),...U}),l.createElement(i.MT,{contain:M,autoFocus:!0,restoreFocus:!0},l.createElement("div",{className:(0,t.cx)(R.modal,a),ref:S,...O,...I},l.createElement("div",{className:w},typeof y=="string"&&l.createElement(p,{...g,title:y,id:F.id}),typeof y!="string"&&y,l.createElement("div",{className:R.modalHeaderClose},l.createElement(u.h,{"aria-label":"Close dialog",name:"times",size:"xl",onClick:D}))),l.createElement("div",{className:(0,t.cx)(R.modalContent,C)},E))))}function c({leftItems:g,children:y}){const E=(0,f.l4)(),v=(0,r.J)(E);return g?l.createElement("div",{className:v.modalButtonRow},l.createElement(o.Lh,{justify:"space-between"},l.createElement(o.Lh,{justify:"flex-start",spacing:"md"},g),l.createElement(o.Lh,{justify:"flex-end",spacing:"md"},y))):l.createElement("div",{className:v.modalButtonRow},l.createElement(o.Lh,{justify:"flex-end",spacing:"md"},y))}m.ButtonRow=c;function p({icon:g,iconTooltip:y,title:E,id:v}){return l.createElement(d.x,{icon:g,iconTooltip:y,title:E,id:v})}},38894:(Y,T,e)=>{"use strict";e.d(T,{x:()=>s});var t=e(66111),n=e(72648),i=e(27581);const s=({icon:l,iconTooltip:f,title:u,children:o,id:d})=>{const r=(0,n.wW)(i.J);return t.createElement(t.Fragment,null,t.createElement("h2",{className:r.modalHeaderTitle,id:d},u),o)}},72535:(Y,T,e)=>{"use strict";e.d(T,{Q:()=>n});var t=e(66111);const n=({children:i})=>t.createElement("div",{className:"share-modal-body"},t.createElement("div",{className:"share-modal-header"},t.createElement("div",{className:"share-modal-content"},i)))},88683:(Y,T,e)=>{"use strict";e.d(T,{H:()=>l});var t=e(66111),n=e(79841),i=e(72142),s=e(38894);const l=({icon:f,title:u,tabs:o,activeTab:d,onChangeTab:r})=>t.createElement(s.x,{icon:f,title:u},t.createElement(i.J,{hideBorder:!0},o.map((m,c)=>t.createElement(n.O,{key:`${m.value}-${c}`,label:m.label,icon:m.icon,suffix:m.tabSuffix,active:m.value===d,onChangeTab:()=>r(m)}))))},5191:(Y,T,e)=>{"use strict";e.d(T,{$i:()=>i,JY:()=>l,Y0:()=>s,kr:()=>n});var t=e(66111);const n=t.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class i extends t.Component{constructor(u){super(u),this.showModal=(o,d)=>{this.setState({component:o,props:d})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:u.component||null,props:u.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return t.createElement(n.Provider,{value:this.state},this.props.children)}}const s=()=>t.createElement(n.Consumer,null,({component:f,props:u})=>f?t.createElement(f,{...u}):null),l=n.Consumer},27581:(Y,T,e)=>{"use strict";e.d(T,{J:()=>i});var t=e(9892),n=e(7804);const i=(0,n.B)(s=>{const l=s.shape.borderRadius(1);return{modal:t.css`
      position: fixed;
      z-index: ${s.zIndex.modal};
      background: ${s.colors.background.primary};
      box-shadow: ${s.shadows.z3};
      border-radius: ${l};
      border: 1px solid ${s.colors.border.weak};
      background-clip: padding-box;
      outline: none;
      width: 750px;
      max-width: 100%;
      left: 0;
      right: 0;
      margin-left: auto;
      margin-right: auto;
      top: 10%;
      max-height: 80%;
      display: flex;
      flex-direction: column;
    `,modalBackdrop:t.css`
      position: fixed;
      z-index: ${s.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: ${s.components.overlay.background};
      backdrop-filter: blur(1px);
    `,modalHeader:t.css`
      label: modalHeader;
      display: flex;
      align-items: center;
      min-height: 42px;
      margin: ${s.spacing(1,2,0,2)};
    `,modalHeaderWithTabs:t.css`
      border-bottom: 1px solid ${s.colors.border.weak};
    `,modalHeaderTitle:t.css`
      font-size: ${s.typography.size.lg};
      margin: ${s.spacing(0,4,0,1)};
      display: flex;
      align-items: center;
      position: relative;
      top: 2px;
    `,modalHeaderIcon:t.css`
      margin-right: ${s.spacing(2)};
      font-size: inherit;
      &:before {
        vertical-align: baseline;
      }
    `,modalHeaderClose:t.css`
      height: 100%;
      display: flex;
      align-items: center;
      color: ${s.colors.text.secondary};
      flex-grow: 1;
      justify-content: flex-end;
    `,modalContent:t.css`
      overflow: auto;
      padding: ${s.spacing(3)};
      width: 100%;
    `,modalButtonRow:t.css`
      padding-top: ${s.spacing(3)};
    `}})},9405:(Y,T,e)=>{"use strict";e.d(T,{p:()=>p});var t=e(9892),n=e(66111),i=e(8488),s=e(68183),l=e(72648),f=e(84128),u=e(10339);function o(y){for(let E=y.length-1;E>0;E--){const v=y.charAt(E);if(v==="$")return{index:E,prefix:y.substring(E)};if(v===" "||v==="	"||v==='"'||v==="'")return{index:E+1,prefix:y.substring(E+1)}}return{index:0,prefix:y}}function d(y,E,v,h){const P=[];for(const a of v)E&&!a.label.startsWith(E)||P.push({...a,kind:r(y,a.kind),range:h,insertText:a.insertText??a.label});return P}function r(y,E){switch(E){case u.k.Method:return y.languages.CompletionItemKind.Method;case u.k.Field:return y.languages.CompletionItemKind.Field;case u.k.Property:return y.languages.CompletionItemKind.Property;case u.k.Constant:return y.languages.CompletionItemKind.Constant;case u.k.Text:return y.languages.CompletionItemKind.Text}return y.languages.CompletionItemKind.Text}function m(y,E,v,h){if(!(!E||!v))return y.languages.registerCompletionItemProvider(E,{triggerCharacters:["$"],provideCompletionItems:(P,a,C)=>{if(P.id!==h)return;const D={startLineNumber:a.lineNumber,endLineNumber:a.lineNumber,startColumn:a.column,endColumn:a.column};if(C.triggerCharacter==="$")return D.startColumn=a.column-1,{suggestions:d(y,"$",v(),D)};const b=P.getValueInRange({startLineNumber:a.lineNumber,startColumn:1,endLineNumber:a.lineNumber,endColumn:a.column}),{index:M,prefix:x}=o(b);D.startColumn=M+1;const R=d(y,x,v(),D);if(R.length)return{suggestions:R}}})}class c extends n.PureComponent{constructor(E){super(E),this.loadCustomLanguage=()=>{const{language:v}=this.props,h=i.F.getIfExists(v);return h?h.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:v}=this.props;v&&v(this.getEditorValue())},this.onSave=()=>{const{onSave:v}=this.props;v&&v(this.getEditorValue())},this.handleBeforeMount=v=>{this.monaco=v;const{onBeforeEditorMount:h}=this.props;h?.(v)},this.handleOnMount=(v,h)=>{const{getSuggestions:P,language:a,onChange:C,onEditorDidMount:D}=this.props;this.modelId=v.getModel()?.id,this.getEditorValue=()=>v.getValue(),P&&this.modelId&&(this.completionCancel=m(h,a,P,this.modelId)),v.addCommand(h.KeyMod.CtrlCmd|h.KeyCode.KeyS,this.onSave);const b=this.loadCustomLanguage();D&&(b.then(()=>D(v,h)),v.getModel()?.onDidChangeContent(()=>C?.(v.getValue())))}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose()}componentDidUpdate(E){const{getSuggestions:v,language:h}=this.props,P=E.language!==h;if(E.getSuggestions!==v||P){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}v&&this.modelId&&(this.completionCancel=m(this.monaco,h,v,this.modelId))}P&&this.loadCustomLanguage()}render(){const{theme:E,language:v,width:h,height:P,showMiniMap:a,showLineNumbers:C,readOnly:D,monacoOptions:b}=this.props,M=this.props.value??"",x=M.length>100,R=this.props.containerStyles??g(E).container,S={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:x&&a,renderCharacters:!1},readOnly:D,lineNumbersMinChars:4,lineDecorationsWidth:1*E.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*E.spacing.gridSize,bottom:.5*E.spacing.gridSize},fixedOverflowWidgets:!0};return C||(S.glyphMargin=!1,S.folding=!1,S.lineNumbers="off",S.lineNumbersMinChars=0),n.createElement("div",{className:R,onBlur:this.onBlur,"aria-label":s.wl.components.CodeEditor.container},n.createElement(f.o,{width:h,height:P,language:v,value:M,options:{...S,...b??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount}))}}const p=(0,l.HE)(c),g=y=>({container:t.css`
      border-radius: ${y.shape.borderRadius()};
      border: 1px solid ${y.components.input.borderColor};
    `})},84128:(Y,T,e)=>{"use strict";e.d(T,{o:()=>f});var t=e(66111),n=e(61744),i=e(39198),s=e(59679);const l=u=>{const o=(0,s.Z)(async()=>await u);return{...o,dependency:o.value}},f=u=>{const{loading:o,error:d,dependency:r}=l(e.e(2462).then(e.bind(e,89852)));if(o)return t.createElement(n.u,{text:""});if(d)return t.createElement(i.X,{title:"React Monaco Editor failed to load",error:d,errorInfo:{componentStack:d?.stack||""}});const m=r.ReactMonacoEditor;return t.createElement(m,{...u})}},10339:(Y,T,e)=>{"use strict";e.d(T,{k:()=>t});var t=(n=>(n.Method="method",n.Field="field",n.Property="property",n.Constant="constant",n.Text="text",n))(t||{})},25503:(Y,T,e)=>{"use strict";e.d(T,{T:()=>n});var t=e(10339);function n(i){const s="${"+i.value+"}",l=i.value===i.label?i.origin:`${i.label} / ${i.origin}`;return{label:s,kind:t.k.Property,detail:l,documentation:i.documentation}}},35224:(Y,T,e)=>{"use strict";e.d(T,{X:()=>r});var t=e(9892),n=e(66111),i=e(68183),s=e(29460),l=e(8125),f=e(72648),u=e(85419),o=e(39904),d=e(8180);const r=n.memo(({title:c,section:p,parent:g,pageIcon:y,onGoBack:E,children:v,titleHref:h,parentHref:P,leftItems:a,isFullscreen:C,className:D,"aria-label":b,buttonOverflowAlignment:M="right",forceShowLeftItems:x=!1})=>{const R=(0,f.wW)(m),S=(0,t.cx)("page-toolbar",R.toolbar,{["page-toolbar--fullscreen"]:C,[R.noPageIcon]:!y},D),O=n.createElement(n.Fragment,null,n.createElement("span",{className:R.truncateText},c),p&&n.createElement("span",{className:R.pre}," / ",p));return n.createElement("nav",{className:S,"aria-label":b},n.createElement("div",{className:R.leftWrapper},y&&!E&&n.createElement("div",{className:R.pageIcon},n.createElement(o.J,{name:y,size:"lg","aria-hidden":!0})),E&&n.createElement("div",{className:R.pageIcon},n.createElement(d.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","aria-label":i.wl.components.BackButton.backArrow,onClick:E})),n.createElement("nav",{"aria-label":"Search links",className:R.navElement},g&&P&&n.createElement(n.Fragment,null,n.createElement(s.r,{"aria-label":`Search dashboard in the ${g} folder`,className:(0,t.cx)(R.titleText,R.parentLink,R.titleLink,R.truncateText),href:P},g," ",n.createElement("span",{className:R.parentIcon})),h&&n.createElement("span",{className:(0,t.cx)(R.titleText,R.titleDivider),"aria-hidden":!0},"/")),(c||Boolean(a?.length))&&n.createElement("div",{className:R.titleWrapper},c&&n.createElement("h1",{className:R.h1Styles},h?n.createElement(s.r,{"aria-label":"Search dashboard by name",className:(0,t.cx)(R.titleText,R.titleLink),href:h},O):n.createElement("div",{className:R.titleText},O)),a?.map((U,I)=>n.createElement("div",{className:(0,t.cx)(R.leftActionItem,{[R.forceShowLeftActionItems]:x}),key:I},U))))),n.createElement(l.R,{alignment:M},n.Children.toArray(v).filter(Boolean)))});r.displayName="PageToolbar";const m=c=>{const{spacing:p,typography:g}=c,y=(0,u.getFocusStyles)(c);return{pre:t.css`
      white-space: pre;
    `,toolbar:t.css`
      align-items: center;
      background: ${c.colors.background.canvas};
      display: flex;
      gap: ${c.spacing(2)};
      justify-content: space-between;
      padding: ${c.spacing(1.5,2)};

      ${c.breakpoints.down("md")} {
        padding-left: 53px;
      }
    `,noPageIcon:t.css`
      ${c.breakpoints.down("md")} {
        padding-left: ${c.spacing(2)};
      }
    `,leftWrapper:t.css`
      display: flex;
      flex-wrap: nowrap;
      max-width: 70%;
    `,pageIcon:t.css`
      display: none;
      ${c.breakpoints.up("sm")} {
        display: flex;
        padding-right: ${c.spacing(1)};
        align-items: center;
      }
    `,truncateText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,titleWrapper:t.css`
      display: flex;
      margin: 0;
      min-width: 0;
    `,navElement:t.css`
      display: flex;
      align-items: center;
      min-width: 0;
    `,h1Styles:t.css`
      margin: ${p(0,1,0,0)};
      line-height: inherit;
      flex-grow: 1;
      min-width: 0;
    `,parentIcon:t.css`
      margin-left: ${c.spacing(.5)};
    `,titleText:t.css`
      display: flex;
      font-size: ${g.size.lg};
      margin: 0;
      max-width: 300px;
      border-radius: ${c.shape.radius.default};
    `,titleLink:t.css`
      &:focus-visible {
        ${y}
      }
    `,titleDivider:t.css`
      padding: ${p(0,.5,0,.5)};
      display: none;
      ${c.breakpoints.up("md")} {
        display: unset;
      }
    `,parentLink:t.css`
      display: none;
      ${c.breakpoints.up("md")} {
        display: unset;
        flex: 1;
      }
    `,leftActionItem:t.css`
      display: none;
      align-items: center;
      padding-right: ${p(.5)};
      ${c.breakpoints.up("md")} {
        display: flex;
      }
    `,forceShowLeftActionItems:t.css`
      display: flex;
    `}}},78889:(Y,T,e)=>{"use strict";e.d(T,{t:()=>f});var t=e(9892),n=e(66111),i=e(72648),s=e(31403),l=e(39904);const f=({currentPage:o,numberOfPages:d,onNavigate:r,hideWhenSinglePage:m,showSmallVersion:c,className:p})=>{const g=(0,i.wW)(u),y=c?1:8,E=(0,n.useMemo)(()=>{const v=[...new Array(d).keys()],h=d>y,P=(a,C)=>n.createElement("li",{key:a,className:g.item},n.createElement(s.zx,{size:"sm",variant:C,onClick:()=>r(a)},a));return v.reduce((a,C)=>{const D=C+1,b=D===o?"primary":"secondary",M=y,x=d-y+1,R=x-M,S=D===1||D===d,O=R>-1&&o>=M&&o<=x,U=c?1:3,I=c?0:2;return h?S||o<M&&D<M||R>=0&&o>x&&D>x||R<0&&o>=M&&D>x||O&&D>=o-I&&D<=o+I?a.push(P(D,b)):(D===M&&o<M||D===x&&o>x||O&&(D===o-U||D===o+U))&&a.push(n.createElement("li",{key:D,className:g.item},n.createElement(l.J,{className:g.ellipsis,name:"ellipsis-v"}))):a.push(P(D,b)),a},[])},[o,d,r,y,c,g.ellipsis,g.item]);return m&&d<=1?null:n.createElement("div",{className:(0,t.cx)(g.container,p)},n.createElement("ol",null,n.createElement("li",{className:g.item},n.createElement(s.zx,{"aria-label":"previous",size:"sm",variant:"secondary",onClick:()=>r(o-1),disabled:o===1},n.createElement(l.J,{name:"angle-left"}))),E,n.createElement("li",{className:g.item},n.createElement(s.zx,{"aria-label":"next",size:"sm",variant:"secondary",onClick:()=>r(o+1),disabled:o===d},n.createElement(l.J,{name:"angle-right"})))))},u=()=>({container:t.css`
      float: right;
    `,item:t.css`
      display: inline-block;
      padding-left: 10px;
      margin-bottom: 5px;
    `,ellipsis:t.css`
      transform: rotate(90deg);
    `})},99562:(Y,T,e)=>{"use strict";e.d(T,{g:()=>r});var t=e(9892),n=e(66111),i=e(72648);const s={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"},l=8,f={name:"Grafana Default",typography:{fontFamily:{sansSerif:'"Inter", "Helvetica", "Arial", sans-serif',monospace:"'Roboto Mono', monospace"},size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},heading:{h1:"28px",h2:"24px",h3:"21px",h4:"18px",h5:"16px",h6:"14px"},weight:{light:300,regular:400,semibold:500,bold:500},lineHeight:{xs:1,sm:1.1,md:1.5,lg:2},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:"0",sm:"544px",md:"769px",lg:"992px",xl:"1200px",xxl:"1440px"},spacing:{base:l,insetSquishMd:"4px 8px",d:"16px",xxs:"2px",xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px",gutter:"30px",formSpacingBase:l,formMargin:`${l*4}px`,formFieldsetMargin:`${l*2}px`,formInputHeight:l*4,formButtonHeight:l*4,formInputPaddingHorizontal:`${l}px`,formInputAffixPaddingHorizontal:`${l/2}px`,formInputMargin:`${l*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${l/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:"2px",md:"3px",lg:"5px"},width:{sm:"1px"}},height:{sm:24,md:32,lg:48},panelPadding:8,panelHeaderHeight:28,zIndex:{navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061}},u=null;var o=e(39904),d=e(61860);const r=({error:c,onClick:p})=>{const g=(0,i.wW)(m);return c?n.createElement(d.u,{theme:"error",content:c},n.createElement(o.J,{onClick:p,className:(0,t.cx)(g.icon,{[g.clickable]:!!p}),size:"sm",name:"exclamation-triangle"})):null},m=()=>({clickable:(0,t.css)({cursor:"pointer"}),icon:(0,t.css)({color:`${s.red88}`})})},8861:(Y,T,e)=>{"use strict";e.d(T,{T:()=>u});var t=e(9892),n=e(66111),i=e(68183),s=e(72648),l=e(39904),f=e(61860);const u=({onCancel:d,loading:r})=>{const m=(0,s.wW)(o);return r?n.createElement(f.u,{content:"Cancel query"},n.createElement(l.J,{className:(0,t.cx)("spin-clockwise",{[m.clickable]:!!d}),name:"sync",size:"sm",onClick:d,"aria-label":i.wl.components.LoadingIndicator.icon})):null},o=()=>({clickable:(0,t.css)({cursor:"pointer"})})},60325:(Y,T,e)=>{"use strict";e.d(T,{R9:()=>l,_w:()=>s,bb:()=>i});var t=e(66111),n=e(50444);const i=t.createContext({eventBus:new n.F}),s=i.Provider,l=()=>t.useContext(i)},38208:(Y,T,e)=>{"use strict";e.d(T,{fm:()=>I});var t=e(99562),n=e(8861),i=e(9892),s=e(66111),l=e(52666),f=e(68183),u=e(72648);function o({children:F,delay:w}){const[K,L]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{const V=setInterval(()=>{L(!0)},w);return()=>{clearInterval(V)}},[F,w]),s.createElement(s.Fragment,null,K?F:null)}var d=e(39904),r=e(74750),m=e(61860),c=e(71698),p=e(64319);function g({menu:F,title:w,placement:K="bottom",offset:L,dragClassCancel:V,menuButtonClass:H,onVisibleChange:j,onOpenMenu:A}){const _=w?f.wl.components.Panels.Panel.menu(w):"panel-menu-button",k=(0,s.useCallback)(Q=>(Q&&A&&A(),j),[A,j]);return s.createElement(c.L,{overlay:F,placement:K,offset:L,onVisibleChange:k},s.createElement(p.h,{"aria-label":`Menu for panel with ${w?`title ${w}`:"no title"}`,title:"Menu",icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":_,className:(0,i.cx)(H,V)}))}function y({menu:F,title:w,dragClass:K,children:L,offset:V=-32,onOpenMenu:H}){const j=(0,u.wW)(E),A=(0,s.useRef)(null),_=f.wl.components.Panels.Panel.HoverWidget,k=(0,s.useCallback)(oe=>{A.current?.setPointerCapture(oe.pointerId)},[]),Q=(0,s.useCallback)(oe=>{A.current?.releasePointerCapture(oe.pointerId)},[]),[re,Z]=(0,s.useState)(!1);return L===void 0||s.Children.count(L)===0?null:s.createElement("div",{className:(0,i.cx)(j.container,{"show-on-hover":!re}),style:{top:`${V}px`},"data-testid":_.container},K&&s.createElement("div",{className:(0,i.cx)(j.square,j.draggable,K),onPointerDown:k,onPointerUp:Q,ref:A,"data-testid":_.dragIcon},s.createElement(d.J,{name:"expand-arrows",className:j.draggableIcon})),!w&&s.createElement("h6",{className:(0,i.cx)(j.untitled,{[j.draggable]:!!K},K)},"Untitled"),L,F&&s.createElement(g,{menu:F,title:w,placement:"bottom",menuButtonClass:j.menuButton,onVisibleChange:Z,onOpenMenu:H}))}function E(F){return{hidden:(0,i.css)({visibility:"hidden",opacity:"0"}),container:(0,i.css)({label:"hover-container-widget",transition:"all .1s linear",display:"flex",position:"absolute",zIndex:1,right:0,boxSizing:"content-box",alignItems:"center",background:F.colors.background.secondary,color:F.colors.text.primary,border:`1px solid ${F.colors.border.weak}`,borderRadius:F.shape.radius.default,height:F.spacing(4),boxShadow:F.shadows.z1}),square:(0,i.css)({display:"flex",justifyContent:"center",alignItems:"center",width:F.spacing(4),height:"100%"}),draggable:(0,i.css)({cursor:"move",[F.breakpoints.down("md")]:{display:"none"}}),menuButton:(0,i.css)({background:"inherit",border:"none","&:hover":{background:F.colors.secondary.main}}),untitled:(0,i.css)({color:F.colors.text.disabled,fontStyle:"italic",padding:F.spacing(0,1),marginBottom:0}),draggableIcon:(0,i.css)({transform:"rotate(45deg)",color:F.colors.text.secondary,"&:hover":{color:F.colors.text.primary}})}}var v=e(85419),h=e(31403);const P=(0,s.forwardRef)(({className:F,children:w,href:K,onClick:L,target:V,title:H,...j},A)=>{const _=(0,u.wW)(a);return K?s.createElement("a",{ref:A,href:K,onClick:L,target:V,title:H,className:(0,i.cx)(_.linkItem,F),...j},w):L?s.createElement(h.zx,{ref:A,className:(0,i.cx)(_.item,F),variant:"secondary",fill:"text",onClick:L},w):s.createElement("span",{ref:A,className:(0,i.cx)(_.item,F),...j},w)});P.displayName="TitleItem";const a=F=>{const w=(0,i.css)({color:`${F.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${F.shape.borderRadius()}`,padding:`${F.spacing(0,1)}`,height:`${F.spacing(F.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,v.getFocusStyles)(F),zIndex:1},"&: focus:not(:focus-visible)":(0,v.getMouseFocusStyles)(F),"&:hover ":{boxShadow:`${F.shadows.z1}`,background:`${F.colors.background.secondary}`,color:`${F.colors.text.primary}`}});return{item:w,linkItem:(0,i.cx)(w,(0,i.css)({cursor:"pointer"}))}};function C({description:F,className:w}){const K=(0,u.wW)(D),L=()=>{const V=typeof F=="function"?F():F;return s.createElement("div",{className:"panel-info-content markdown-html"},s.createElement("div",{dangerouslySetInnerHTML:{__html:V}}))};return F!==""?s.createElement(m.u,{interactive:!0,content:L},s.createElement(P,{className:(0,i.cx)(w,K.description)},s.createElement(d.J,{name:"info-circle",size:"md"}))):null}const D=F=>({description:(0,i.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function b({message:F,onClick:w,ariaLabel:K="status"}){const L=(0,u.wW)(M);return s.createElement(p.h,{className:L.buttonStyles,onClick:w,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:F||"","aria-label":K})}const M=F=>{const{headerHeight:w,padding:K}=F.components.panel;return{buttonStyles:(0,i.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:F.spacing(K),width:F.spacing(w),height:F.spacing(w),borderRadius:F.shape.radius.default})}};function x({width:F,height:w,children:K,padding:L="md",title:V="",description:H="",displayMode:j="default",titleItems:A,menu:_,dragClass:k,dragClassCancel:Q,hoverHeader:re=!1,hoverHeaderOffset:Z,loadingState:oe,statusMessage:G,statusMessageOnClick:le,leftItems:fe,actions:ae,onCancelQuery:de,onOpenMenu:ee}){const me=(0,u.l4)(),q=(0,u.wW)(U),ne=!re,se="show-on-hover",he=S(me,ne),{contentStyle:ue,innerWidth:Te,innerHeight:Ve}=O(L,me,F,he,w),ct={height:he,cursor:k?"move":"auto"},Ie={width:F,height:w};j==="transparent"&&(Ie.backgroundColor="transparent",Ie.border="none"),fe&&(ae=fe);const Ke=V?f.wl.components.Panels.Panel.title(V):"Panel",Ge=s.createElement(s.Fragment,null,V&&s.createElement("h6",{title:V,className:q.title},V),s.createElement("div",{className:(0,i.cx)(q.titleItems,Q),"data-testid":"title-items-container"},s.createElement(C,{description:H,className:Q}),A),oe===l.Gu.Streaming&&s.createElement(m.u,{content:de?"Stop streaming":"Streaming"},s.createElement(P,{className:Q,"data-testid":"panel-streaming",onClick:de},s.createElement(d.J,{name:"circle-mono",size:"md",className:q.streaming}))),oe===l.Gu.Loading&&de&&s.createElement(o,{delay:2e3},s.createElement(m.u,{content:"Cancel query"},s.createElement(P,{className:Q,"data-testid":"panel-cancel-query",onClick:de},s.createElement(d.J,{name:"sync-slash",size:"md"})))),s.createElement("div",{className:q.rightAligned},ae&&s.createElement("div",{className:q.rightActions},R(ae,at=>at))));return s.createElement("div",{className:q.container,style:Ie,"data-testid":Ke},s.createElement("div",{className:q.loadingBarContainer},oe===l.Gu.Loading?s.createElement(r.F,{width:F,ariaLabel:"Panel loading bar"}):null),re&&s.createElement(s.Fragment,null,s.createElement(y,{menu:_,title:V,offset:Z,dragClass:k,onOpenMenu:ee},Ge),G&&s.createElement("div",{className:q.errorContainerFloating},s.createElement(b,{message:G,onClick:le,ariaLabel:"Panel status"}))),ne&&s.createElement("div",{className:(0,i.cx)(q.headerContainer,k),style:ct,"data-testid":"header-container"},G&&s.createElement("div",{className:Q},s.createElement(b,{message:G,onClick:le,ariaLabel:"Panel status"})),Ge,_&&s.createElement(g,{menu:_,title:V,placement:"bottom-end",menuButtonClass:(0,i.cx)(q.menuItem,Q,se),onOpenMenu:ee})),s.createElement("div",{className:q.content,style:ue},K(Te,Ve)))}const R=(F,w)=>{const K=s.Children.toArray(F).filter(Boolean);return K.length>0?w(K):null},S=(F,w)=>w?F.spacing.gridSize*F.components.panel.headerHeight:0,O=(F,w,K,L,V)=>{const H=(F==="md"?w.components.panel.padding:0)*w.spacing.gridSize,j=H*2,A=1*2,_=K-j-A,k=V-L-j-A;return{contentStyle:{padding:H},innerWidth:_,innerHeight:k}},U=F=>{const{background:w,borderColor:K,padding:L}=F.components.panel;return{container:(0,i.css)({label:"panel-container",backgroundColor:w,border:`1px solid ${K}`,position:"relative",borderRadius:F.shape.borderRadius(1),height:"100%",display:"flex",flexDirection:"column",".show-on-hover":{opacity:"0"},"&:focus-visible, &:hover":{".show-on-hover":{opacity:"1"}},"&:focus-visible":{outline:`1px solid ${F.colors.action.focus}`},"&:focus-within":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),loadingBarContainer:(0,i.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%",overflow:"hidden"}),content:(0,i.css)({label:"panel-content",flexGrow:1,contain:"strict"}),headerContainer:(0,i.css)({label:"panel-header",display:"flex",alignItems:"center"}),streaming:(0,i.css)({label:"panel-streaming",marginRight:0,color:F.colors.success.text,"&:hover":{color:F.colors.success.text}}),title:(0,i.css)({label:"panel-title",marginBottom:0,padding:F.spacing(0,L),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:F.typography.h6.fontSize,fontWeight:F.typography.h6.fontWeight}),items:(0,i.css)({display:"flex"}),item:(0,i.css)({display:"flex",justifyContent:"center",alignItems:"center"}),hiddenMenu:(0,i.css)({visibility:"hidden"}),menuItem:(0,i.css)({label:"panel-menu",border:"none",background:F.colors.secondary.main,"&:hover":{background:F.colors.secondary.shade}}),errorContainerFloating:(0,i.css)({label:"error-container",position:"absolute",left:0,top:0,zIndex:F.zIndex.tooltip}),rightActions:(0,i.css)({display:"flex",padding:F.spacing(0,L),gap:F.spacing(1)}),rightAligned:(0,i.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,i.css)({display:"flex",height:"100%"})}},I=x;I.LoadingIndicator=n.T,I.ErrorIndicator=t.g,I.TitleItem=P},17882:(Y,T,e)=>{"use strict";e.d(T,{R:()=>t});var t=(n=>(n.ToggleSelection="select",n.AppendToSelection="append",n))(t||{})},72080:(Y,T,e)=>{"use strict";e.d(T,{l:()=>s});var t=e(9892),n=e(66111),i=e(72648);const s=({children:f,className:u,...o})=>{const d=(0,i.wW)(l);return n.createElement("div",{className:(0,t.cx)(d,u),...o},f)},l=f=>t.css`
    background-color: ${f.components.panel.background};
    border: 1px solid ${f.components.panel.borderColor};
    border-radius: ${f.shape.radius.default};
  `},51613:(Y,T,e)=>{"use strict";e.d(T,{o:()=>s});var t=e(66111),n=e(59250),i=e(19985);const s=({status:f,...u})=>{const o=l(f);return t.createElement(i.C,{text:o.text,color:o.color,icon:o.icon,tooltip:o.tooltip,...u})};s.displayName="PluginSignatureBadge";function l(f){switch(f||(f=n.Xy.invalid),f){case n.Xy.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case n.Xy.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case n.Xy.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case n.Xy.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case n.Xy.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},85511:(Y,T,e)=>{"use strict";e.d(T,{RN:()=>l,h_:()=>s,lO:()=>f});var t=e(66111),n=e(15638),i=e(72648);function s(o){const{children:d,className:r,root:m,forwardedRef:c}=o,p=(0,i.l4)(),g=(0,t.useRef)(null),y=m??l();return g.current||(g.current=document.createElement("div"),r&&(g.current.className=r),g.current.style.position="relative",g.current.style.zIndex=`${p.zIndex.portal}`),(0,t.useLayoutEffect)(()=>(g.current&&y.appendChild(g.current),()=>{g.current&&y.removeChild(g.current)}),[y]),n.createPortal(t.createElement("div",{ref:c},d),g.current)}function l(){return window.document.getElementById("grafana-portal-container")??document.body}function f(){return t.createElement("div",{id:"grafana-portal-container"})}const u=t.forwardRef((o,d)=>t.createElement(s,{...o,forwardedRef:d}));u.displayName="RefForwardingPortal"},69659:(Y,T,e)=>{"use strict";e.d(T,{q:()=>C});var t=e(9892),n=e(9085),i=e.n(n),s=e(82897),l=e.n(s),f=e(66111),u=e(43809),o=e(56975),d=e(68183),r=e(12724),m=e(73958),c=e(47838),p=e(9830),g=e(74778),y=e(71096),E=e(784),v=e(6464),h=e(72648),P=e(85419);class a extends f.PureComponent{constructor(M,x){super(M,x),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(I,F)=>{const w=I.document!==this.state.value.document,K=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(I),this.setState({value:I},()=>{if(w){const L=u.Z.serialize(K)!==u.Z.serialize(I);L&&F&&this.runOnChangeAndRunQuery(),L&&!F&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:I}=this.props,F=u.Z.serialize(this.state.value);I&&I(this.cleanText(F))},this.runOnRunQuery=()=>{const{onRunQuery:I}=this.props;I&&(I(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(I,F,w)=>{const{onBlur:K}=this.props;if(K)K();else{const L=this.lastExecutedValue?u.Z.serialize(this.lastExecutedValue):"",V=u.Z.serialize(F.value);L!==V&&this.runOnChangeAndRunQuery()}return w()},this.runOnChangeDebounced=(0,s.debounce)(this.runOnChange,500);const{onTypeahead:R,cleanText:S,portalOrigin:O,onWillApplySuggestion:U}=M;this.plugins=[(0,m.b)({onTypeahead:R,cleanText:S,portalOrigin:O,onWillApplySuggestion:U}),(0,c.d)({handler:this.runOnChangeAndRunQuery}),(0,p.z)(),(0,g.G)(),(0,y.$)(),(0,E.R)(),(0,v.w)(),...M.additionalPlugins||[]].filter(I=>I),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,r.l1)(M.query||"",M.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(M,x){const{query:R,syntax:S,syntaxLoaded:O}=this.props;if(!M.syntaxLoaded&&O&&this.editor){const I=this.editor.insertText(" ").deleteBackward(1);this.onChange(I.value,!0)}const{value:U}=this.state;R!==M.query&&R!==u.Z.serialize(U)&&this.setState({value:(0,r.l1)(R||"",S)})}cleanText(M){return M.replace(/[\r]/g,"")}render(){const{disabled:M,theme:x}=this.props,R=i()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":M}),S=D(x);return f.createElement("div",{className:(0,t.cx)(R,S.wrapper)},f.createElement("div",{className:"slate-query-field","aria-label":d.wl.components.QueryField.container},f.createElement(o.ML,{ref:O=>this.editor=O,schema:r.Yi,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:O=>{this.onChange(O.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const C=(0,h.HE)(a),D=b=>{const M=(0,P.getFocusStyles)(b);return{wrapper:t.css`
      &:focus-within {
        ${M}
      }
    `}}},5562:(Y,T,e)=>{"use strict";e.d(T,{dP:()=>m,o5:()=>d});var t=e(14016),n=e(66111),i=e(76282),s=e(68183),l=e(37951),f=e(26202),u=e(44342),o=e(64319);const d=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],r=class extends n.PureComponent{constructor(g){super(g),this.onChangeSelect=y=>{const{onIntervalChanged:E}=this.props;E&&y.value!=null&&E(y.value)}}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:g,intervals:y,tooltip:E,value:v,text:h,isLoading:P,noIntervalPicker:a,width:C}=this.props,D=v||"",b=this.getVariant(),M=p({intervals:y}),x=M.find(({value:w})=>w===D),R=c(r.offOption.value);let S=x||R;S.label===R.label&&(S={value:""});const O=S.ariaLabel,U=(0,l.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:O}),I=(0,l.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),F=S.value===""?I:U;return n.createElement(f.h,{className:"refresh-picker"},n.createElement(o.h,{"aria-label":h,tooltip:E,onClick:g,variant:b,icon:P?"fa fa-spinner":"sync",style:C?{width:C}:void 0,"data-testid":s.wl.components.RefreshPicker.runButtonV2},h),!a&&n.createElement(u.d,{value:S,options:M,onChange:this.onChangeSelect,variant:b,title:(0,l.t)("refresh-picker.select-button.auto-refresh","Set auto refresh interval"),"data-testid":s.wl.components.RefreshPicker.intervalButtonV2,"aria-label":F}))}};let m=r;m.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"},m.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"},m.isLive=g=>g===r.liveOption.value;function c(g){return g===m.liveOption.value?{label:(0,l.t)("refresh-picker.live-option.label","Live"),value:"LIVE",ariaLabel:(0,l.t)("refresh-picker.live-option.aria-label","Turn on live streaming")}:{label:(0,l.t)("refresh-picker.off-option.label","Off"),value:"",ariaLabel:(0,l.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")}}function p({intervals:g=d}={}){const y=g.map(E=>{const v=(0,i.RA)(E),h=(0,t.Z)(v);return{label:E,value:E,ariaLabel:h}});return y.unshift(c(m.offOption.value)),y}},39856:(Y,T,e)=>{"use strict";e.d(T,{D:()=>i});var t=e(66111),n=e(63418);function i({component:s,content:l,...f}){return t.createElement(s||"span",{dangerouslySetInnerHTML:{__html:n.QX.sanitize(l)},...f})}},34517:(Y,T,e)=>{"use strict";e.d(T,{c:()=>o});var t=e(9892),n=e(82897),i=e.n(n),s=e(66111),l=e(31403),f=e(95569);const u=()=>({noRadiusInput:t.css`
      border-bottom-right-radius: 0 !important;
      border-top-right-radius: 0 !important;
    `,noRadiusButton:t.css`
      border-bottom-left-radius: 0 !important;
      border-top-left-radius: 0 !important;
    `}),o=({label:d="Password",labelWidth:r,inputWidth:m=12,onReset:c,isConfigured:p,tooltip:g,placeholder:y="Password",interactive:E,...v})=>{const h=u();return s.createElement(f.W,{label:d,tooltip:g,interactive:E,labelWidth:r,inputEl:p?s.createElement(s.Fragment,null,s.createElement("input",{type:"text",className:(0,t.cx)(`gf-form-input width-${m}`,h.noRadiusInput),disabled:!0,value:"configured",...(0,n.omit)(v,"value")}),s.createElement(l.zx,{onClick:c,variant:"secondary",type:"button"},"Reset")):s.createElement("input",{type:"password",className:`gf-form-input width-${m}`,placeholder:y,...v})})};o.displayName="SecretFormField"},52953:(Y,T,e)=>{"use strict";e.d(T,{m4:()=>u});var t=e(66111),n=e(31403),i=e(46967),s=e(52081);const l="configured",f="Reset",u=({isConfigured:o,onReset:d,...r})=>t.createElement(s.Lh,null,!o&&t.createElement(i.I,{...r,type:"password"}),o&&t.createElement(i.I,{...r,type:"text",disabled:!0,value:l}),o&&t.createElement(n.zx,{onClick:d,variant:"secondary"},f))},70862:(Y,T,e)=>{"use strict";e.d(T,{m:()=>t.m4});var t=e(52953)},30810:(Y,T,e)=>{"use strict";e.d(T,{Zk:()=>r});var t=e(9892),n=e(66111),i=e(72648),s=e(31403),l=e(52081),f=e(97379);const u="configured",o="Reset",d=m=>({configuredStyle:t.css`
      min-height: ${m.spacing(m.components.height.md)};
      padding-top: ${m.spacing(.5)};
      resize: none;
    `}),r=({isConfigured:m,onReset:c,...p})=>{const g=(0,i.wW)(d);return n.createElement(l.Lh,null,!m&&n.createElement(f.K,{...p}),m&&n.createElement(f.K,{...p,rows:1,disabled:!0,value:u,className:(0,t.cx)(g.configuredStyle)}),m&&n.createElement(s.zx,{onClick:c,variant:"secondary"},o))}},88892:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>t.Zk});var t=e(30810)},70044:(Y,T,e)=>{"use strict";e.d(T,{X:()=>r});var t=e(9892),n=e(82897),i=e.n(n),s=e(66111),l=e(72648),f=e(77117),u=e(97924),o=e(28318),d=e(2357);function r({options:m,value:c,onChange:p,Component:g,className:y,allowCustomValue:E,allowEmptyValue:v,placeholder:h,disabled:P,inputMinWidth:a,inputPlaceholder:C,onExpandedChange:D,autofocus:b=!1,...M}){const[x,R,S,O]=(0,o._)(b,D),U=a?Math.max(a,R):R,I=(0,l.wW)(u.N);if(!S){const F=(0,n.isObject)(c)?c.label:c,w=F!=null?String(F):void 0;return s.createElement(x,{disabled:P,Component:g||s.createElement(f.W,{className:(0,t.cx)(I.segment,{[I.queryPlaceholder]:h!==void 0&&!c,[I.disabled]:P},y)},w||h)})}return s.createElement(d.V,{...M,value:c&&!(0,n.isObject)(c)?{value:c}:c,placeholder:C,options:m,width:U,onClickOutside:()=>O(!1),allowCustomValue:E,allowEmptyValue:v,onChange:F=>{O(!1),p(F)}})}},68118:(Y,T,e)=>{"use strict";e.d(T,{V:()=>c});var t=e(9892),n=e(82897),i=e.n(n),s=e(66111),l=e(13821),f=e(72648),u=e(37951),o=e(77117),d=e(2357),r=e(97924),m=e(28318);function c({value:g,onChange:y,loadOptions:E,reloadOptionsOnChange:v=!1,Component:h,className:P,allowCustomValue:a,allowEmptyValue:C,disabled:D,placeholder:b,inputMinWidth:M,inputPlaceholder:x,autofocus:R=!1,onExpandedChange:S,noOptionMessageHandler:O=p,...U}){const[I,F]=(0,l.Z)(E,[E]),[w,K,L,V]=(0,m._)(R,S),H=M?Math.max(M,K):K,j=(0,f.wW)(r.N);if(!L){const A=(0,n.isObject)(g)?g.label:g,_=A!=null?String(A):void 0;return s.createElement(w,{onClick:v?void 0:F,disabled:D,Component:h||s.createElement(o.W,{className:(0,t.cx)(j.segment,{[j.queryPlaceholder]:b!==void 0&&!g,[j.disabled]:D},P)},_||b)})}return s.createElement(d.V,{...U,value:g&&!(0,n.isObject)(g)?{value:g}:g,placeholder:x,options:I.value??[],loadOptions:v?F:void 0,width:H,noOptionsMessage:O(I),allowCustomValue:a,allowEmptyValue:C,onClickOutside:()=>{V(!1)},onChange:A=>{V(!1),y(A)}})}function p(g){return g.loading?(0,u.t)("grafana-ui.segment-async.loading","Loading options..."):g.error?(0,u.t)("grafana-ui.segment-async.error","Failed to load options"):!Array.isArray(g.value)||g.value.length===0?(0,u.t)("grafana-ui.segment-async.no-options","No options found"):""}},58564:(Y,T,e)=>{"use strict";e.d(T,{X:()=>r});var t=e(9892),n=e(66111),i=e(53165),s=e(72648),l=e(4176),f=e(77117),u=e(97924),o=e(28318);const d=14;function r({value:m,onChange:c,Component:p,className:g,placeholder:y,inputPlaceholder:E,disabled:v,autofocus:h=!1,onExpandedChange:P,...a}){const C=(0,n.useRef)(null),[D,b]=(0,n.useState)(m),[M,x]=(0,n.useState)((0,l.X1)((m||"").toString(),d).width),[R,,S,O]=(0,o._)(h,P),U=(0,s.wW)(u.N);if((0,i.Z)(C,()=>{O(!1),c(D)}),!S)return n.createElement(R,{disabled:v,Component:p||n.createElement(f.W,{className:(0,t.cx)(U.segment,{[U.queryPlaceholder]:y!==void 0&&!D,[U.disabled]:v},g)},m||y)});const I=t.css`
    width: ${Math.max(M+20,32)}px;
  `;return n.createElement("input",{...a,ref:C,autoFocus:!0,className:(0,t.cx)("gf-form gf-form-input",I),value:D,placeholder:E,onChange:F=>{const{width:w}=(0,l.X1)(F.target.value,d);x(w),b(F.target.value)},onBlur:()=>{O(!1),c(D)},onKeyDown:F=>{[13,27].includes(F.keyCode)&&(O(!1),c(D))}})}},30991:(Y,T,e)=>{"use strict";e.d(T,{f:()=>f});var t=e(9892),n=e(66111),i=e(72648),s=e(11543),l=e(77117);const f=({label:o,htmlFor:d,children:r,fill:m})=>{const c=(0,i.wW)(u);return n.createElement(n.Fragment,null,n.createElement(s.Z,null,n.createElement(l.W,{htmlFor:d,width:12,className:c.label},o),r,m&&n.createElement("div",{className:c.fill},n.createElement(l.W,null,""))))},u=o=>({label:t.css`
    color: ${o.colors.primary.text};
  `,fill:t.css`
    flex-grow: 1;
    margin-bottom: ${o.spacing(.5)};
  `})},2357:(Y,T,e)=>{"use strict";e.d(T,{V:()=>s});var t=e(66111),n=e(72648),i=e(8581);function s({value:l,placeholder:f="",options:u=[],onChange:o,onClickOutside:d,loadOptions:r=void 0,width:m,noOptionsMessage:c="",allowCustomValue:p=!1,allowEmptyValue:g=!1,...y}){const E=(0,t.useRef)(null),v=(0,n.l4)();let h=m>0?m/v.spacing.gridSize:void 0,P,a={};return r?(P=i.qb,a={loadOptions:r,defaultOptions:!0}):P=i.Ph,t.createElement("div",{...y,ref:E},t.createElement(P,{width:h,noOptionsMessage:c,placeholder:f,autoFocus:!0,isOpen:!0,onChange:o,options:u,value:l,closeMenuOnSelect:!1,onCloseMenu:()=>{if(E&&E.current){const C=E.current.querySelector('input[id^="react-select-"]');C&&(C.value||g)?o({value:C.value,label:C.value}):d()}},allowCustomValue:p,...a}))}},97924:(Y,T,e)=>{"use strict";e.d(T,{N:()=>n});var t=e(9892);const n=i=>{const s="v1"in i?i.v1.palette:i.palette;return{segment:t.css`
      cursor: pointer;
      width: auto;
    `,queryPlaceholder:t.css`
      color: ${s.gray2};
    `,disabled:t.css`
      cursor: not-allowed;
      opacity: 0.65;
      box-shadow: none;
    `}}},28318:(Y,T,e)=>{"use strict";e.d(T,{_:()=>s});var t=e(66111),n=e(72648),i=e(31403);const s=(l,f)=>{const u=(0,t.useRef)(null),o=(0,n.wW)(i.gN),[d,r]=(0,t.useState)(l),[m,c]=(0,t.useState)(0),p=y=>{r(y),f&&f(y)};return[({Component:y,onClick:E,disabled:v})=>t.createElement("button",{type:"button",className:o,ref:u,disabled:v,onClick:()=>{p(!0),u&&u.current&&c(u.current.clientWidth*1.25),E?.()}},y),m,d,p]}},62997:(Y,T,e)=>{"use strict";e.d(T,{m:()=>i});var t=e(66111),n=e(39904);const i=({isOpen:s})=>{const l=s?"search":"angle-down",f=s?"sm":"md";return t.createElement(n.J,{name:l,size:f})}},8581:(Y,T,e)=>{"use strict";e.d(T,{M8:()=>oe,qb:()=>Q,gY:()=>Z,NU:()=>k,Ph:()=>_,eI:()=>M,LT:()=>re});var t=e(66111),n=e(58839),i=e(51306),s=e(7576),l=e(81658),f=e(13572),u=e(72648),o=e(39904),d=e(67487),r=e(62997),m=e(9892),c=e(46967);const p=t.forwardRef((G,le)=>{const{children:fe}=G,ae=(0,u.l4)(),de=(0,c.H)({theme:ae,invalid:!1});return t.createElement("div",{className:(0,m.cx)(de.suffix,m.css`
          position: relative;
        `),ref:le},fe)});p.displayName="IndicatorsContainer";var g=e(7804),y=e(73267);const E=(0,g.B)((G,le,fe)=>{const ae=(0,c.H)({theme:G,invalid:le});return{input:(0,m.cx)((0,y.nf)(G),m.css`
        width: 100%;
        max-width: 100%;
        display: flex;
        flex-direction: row;
        align-items: center;
        flex-wrap: wrap;
        justify-content: space-between;
        padding-right: 0;
        position: relative;
        box-sizing: border-box;
      `,fe&&m.css`
          padding-left: 0;
        `),prefix:(0,m.cx)(ae.prefix,m.css`
        position: relative;
      `)}}),v=t.forwardRef(function({focused:le,invalid:fe,disabled:ae,children:de,innerProps:ee,prefix:me,...q},ne){const se=(0,u.l4)(),he=E(se,fe,!!me);return t.createElement("div",{className:he.input,...ee,ref:ne},me&&t.createElement("div",{className:(0,m.cx)(he.prefix)},me),de)});var h=e(8180),P=e(27501);const a=({innerProps:G,children:le})=>{const fe=(0,u.l4)(),ae=(0,P.D)(fe);return t.createElement("div",{...G,className:ae.multiValueContainer},le)},C=({children:G,innerProps:le})=>{const fe=(0,u.l4)(),ae=(0,P.D)(fe);return t.createElement(h.h,{...le,name:"times",size:"sm",className:ae.multiValueRemove})};var D=e(44800),b=e(85419);const M=G=>{const{isDisabled:le,isFocused:fe,children:ae,selectProps:{invalid:de=!1}}=G,ee=(0,u.l4)(),me=x(ee,fe,le,de);return t.createElement(D.c.SelectContainer,{...G,className:(0,m.cx)(me.wrapper,G.className)},ae)},x=(0,g.B)((G,le,fe,ae)=>{const de=(0,c.H)({theme:G,invalid:ae});return{wrapper:(0,m.cx)(de.wrapper,(0,y.RK)(G,ae),le&&m.css`
            ${(0,b.focusCss)(G.v1)}
          `,fe&&de.inputDisabled,m.css`
          position: relative;
          box-sizing: border-box;
          /* The display property is set by the styles prop in SelectBase because it's dependant on the width prop  */
          flex-direction: row;
          flex-wrap: wrap;
          align-items: stretch;
          justify-content: space-between;

          min-height: 32px;
          height: auto;
          max-width: 100%;

          /* Input padding is applied to the InputControl so the menu is aligned correctly */
          padding: 0;
          cursor: ${fe?"not-allowed":"pointer"};
        `)}});var R=e(64861),S=e(874),O=e(24901);class U extends t.Component{render(){const{children:le}=this.props,{selectProps:fe}=this.props;if(fe&&Array.isArray(le)&&Array.isArray(le[0])&&fe.maxVisibleValues!==void 0&&!(fe.showAllSelectedWhenOpen&&fe.menuIsOpen)){const[ae,...de]=le,ee=ae.slice(0,fe.maxVisibleValues);return this.renderContainer([ee,...de])}return this.renderContainer(le)}renderContainer(le){const{isMulti:fe,theme:ae}=this.props,de=(0,P.D)(ae),ee=(0,m.cx)(de.valueContainer,fe&&de.valueContainerMulti);return t.createElement("div",{className:ee},le)}}const I=(0,u.HE)(U);var F=e(54897);const w=(G,le)=>{if(Array.isArray(G)){const fe=G.filter(Boolean);return fe?.length?fe:void 0}if(typeof G=="object")return[G];if(typeof G=="string"||typeof G=="number"){const fe=K(G,le);if(fe)return[fe]}},K=(G,le)=>{for(const fe of le)if("options"in fe){let ae=K(G,fe.options);if(ae)return ae}else if("value"in fe&&fe.value===G)return fe;return null},L=G=>G.map(({description:le,...fe})=>fe),V=G=>{const{maxVisibleValues:le,selectedValuesCount:fe,menuIsOpen:ae,showAllSelectedWhenOpen:de}=G;return le!==void 0&&fe>le&&!(de&&ae)?t.createElement("span",{key:"excess-values",id:"excess-values"},"(+",fe-le,")"):null},H=G=>{const{children:le,innerProps:fe,selectProps:{menuIsOpen:ae,onMenuClose:de,onMenuOpen:ee},isFocused:me,isMulti:q,getValue:ne,innerRef:se}=G,he=G.selectProps;return he.renderControl?t.createElement(he.renderControl,{isOpen:ae,value:q?ne():ne()[0],ref:se,onClick:ae?de:ee,onBlur:de,disabled:!!he.disabled,invalid:!!he.invalid}):t.createElement(v,{ref:se,innerProps:fe,prefix:he.prefix,focused:me,invalid:!!he.invalid,disabled:!!he.disabled},le)};function j({allowCustomValue:G=!1,allowCreateWhileLoading:le=!1,"aria-label":fe,autoFocus:ae=!1,backspaceRemovesValue:de=!0,blurInputOnSelect:ee,cacheOptions:me,className:q,closeMenuOnSelect:ne=!0,components:se,createOptionPosition:he="last",defaultOptions:ue,defaultValue:Te,disabled:Ve=!1,filterOption:ct,formatCreateLabel:Ie,getOptionLabel:Ke,getOptionValue:Ge,inputValue:at,invalid:dt,isClearable:Re=!1,id:ye,isLoading:Pe=!1,isMulti:be=!1,inputId:Be,isOpen:ke,isOptionDisabled:ot,isSearchable:ft=!0,loadOptions:gt,loadingMessage:St="Loading options...",maxMenuHeight:ut=300,minMenuHeight:Dt,maxVisibleValues:ie,menuPlacement:De="auto",menuPosition:Ne,menuShouldPortal:Je=!0,noOptionsMessage:Xe="No options found",onBlur:Le,onChange:Ue,onCloseMenu:ve,onCreateOption:Se,onInputChange:$e,onKeyDown:Ye,onOpenMenu:_e,onFocus:Et,openMenuOnFocus:pt=!1,options:je=[],placeholder:ht="Choose",prefix:we,renderControl:Qe,showAllSelectedWhenOpen:nt=!0,tabSelectsValue:it=!0,value:yt,virtualized:Lt=!1,width:Kt,isValidNewOption:an,formatOptionLabel:un,hideSelectedOptions:hn}){const Wn=(0,u.l4)(),Bt=(0,P.D)(Wn),Ft=(0,t.useRef)(null),[Vt,At]=(0,t.useState)(!1),Nt=(0,F.O)(Wn,Kt);(0,t.useEffect)(()=>{if(gt&&ke&&Ft.current&&Ft.current.controlRef&&De==="auto"){const gn=window.innerHeight-Ft.current.controlRef.getBoundingClientRect().bottom;At(gn<ut)}},[ut,De,gt,ke]);const Rt=(0,t.useCallback)((gn,Cn)=>{if(be&&gn==null)return Ue([],Cn);Ue(gn,Cn)},[be,Ue]);let wt=n.ZP;const _t={};let Qt={},en;if(be&&gt)en=yt;else if(be&&yt&&Array.isArray(yt)&&!gt)en=yt.map(gn=>{const Cn=K(gn.value??gn,je);return!G||Cn?Cn:typeof gn=="string"?(0,f.E)(gn):gn});else if(gt){const gn=Te||yt;en=gn?[gn]:[]}else en=w(yt,je);const sn={"aria-label":fe,autoFocus:ae,backspaceRemovesValue:de,blurInputOnSelect:ee,captureMenuScroll:!1,closeMenuOnSelect:ne,defaultValue:Te,disabled:Ve,filterOption:ct,getOptionLabel:Ke,getOptionValue:Ge,hideSelectedOptions:hn,inputValue:at,invalid:dt,isClearable:Re,id:ye,isDisabled:Ve,isLoading:Pe,isMulti:be,inputId:Be,isOptionDisabled:ot,isSearchable:ft,maxMenuHeight:ut,minMenuHeight:Dt,maxVisibleValues:ie,menuIsOpen:ke,menuPlacement:De==="auto"&&Vt?"top":De,menuPosition:Ne,menuShouldBlockScroll:!0,menuPortalTarget:Je&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:Le,onChange:Rt,onInputChange:$e,onKeyDown:Ye,onMenuClose:ve,onMenuOpen:_e,onFocus:Et,formatOptionLabel:un,openMenuOnFocus:pt,options:Lt?L(je):je,placeholder:ht,prefix:we,renderControl:Qe,showAllSelectedWhenOpen:nt,tabSelectsValue:it,value:be?en:en?.[0]};G&&(wt=l.Z,_t.allowCreateWhileLoading=le,_t.formatCreateLabel=Ie??A,_t.onCreateOption=Se,_t.createOptionPosition=he,_t.isValidNewOption=an),gt&&(wt=G?s.Z:i.Z,Qt={loadOptions:gt,cacheOptions:me,defaultOptions:ue});const Jt=Lt?R.r4:R.SA;return t.createElement(t.Fragment,null,t.createElement(wt,{ref:Ft,components:{MenuList:Jt,Group:S.n,ValueContainer:I,IndicatorsContainer(gn){const{selectProps:Cn}=gn,{value:In,showAllSelectedWhenOpen:_n,maxVisibleValues:zn,menuIsOpen:Hn}=Cn;if(zn!==void 0){const sa=In.length,Ma=[...gn.children];return Ma.splice(-1,0,V({maxVisibleValues:zn,selectedValuesCount:sa,showAllSelectedWhenOpen:_n,menuIsOpen:Hn})),t.createElement(p,{...gn},Ma)}return t.createElement(p,{...gn})},IndicatorSeparator(){return t.createElement(t.Fragment,null)},Control:H,Option:R.Qn,ClearIndicator(gn){const{clearValue:Cn}=gn;return t.createElement(o.J,{name:"times",role:"button","aria-label":"select-clear-value",className:Bt.singleValueRemove,onMouseDown:In=>{In.preventDefault(),In.stopPropagation(),Cn()}})},LoadingIndicator(){return t.createElement(d.$,{inline:!0})},LoadingMessage(){return t.createElement("div",{className:Bt.loadingMessage},St)},NoOptionsMessage(){return t.createElement("div",{className:Bt.loadingMessage,"aria-label":"No options provided"},Xe)},DropdownIndicator(gn){return t.createElement(r.m,{isOpen:gn.selectProps.menuIsOpen})},SingleValue(gn){return t.createElement(O.P,{...gn,disabled:Ve})},SelectContainer:M,MultiValueContainer:a,MultiValueRemove:Ve?()=>null:C,...se},styles:Nt,className:q,...sn,..._t,...Qt}))}function A(G){return t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},t.createElement("div",null,G),t.createElement("div",{style:{flexGrow:1}}),t.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function _(G){return t.createElement(j,{...G})}function k(G){return t.createElement(j,{...G,isMulti:!0})}function Q(G){return t.createElement(j,{...G})}function re(G){return t.createElement(j,{virtualized:!0,...G})}function Z(G){return t.createElement(j,{virtualized:!0,...G})}function oe(G){return t.createElement(j,{...G,isMulti:!0})}},64861:(Y,T,e)=>{"use strict";e.d(T,{Qn:()=>y,SA:()=>m,r4:()=>g});var t=e(9892),n=e(82897),i=e.n(n),s=e(66111),l=e(32436),f=e(84559),u=e(72648),o=e(68226),d=e(39904),r=e(27501);const m=({children:E,maxHeight:v,innerRef:h,innerProps:P})=>{const a=(0,u.l4)(),C=(0,r.D)(a);return s.createElement("div",{...P,className:C.menu,style:{maxHeight:v},"aria-label":"Select options menu"},s.createElement(o.$,{scrollRefCallback:h,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},E))};m.displayName="SelectMenu";const c=37,p=7,g=({children:E,maxHeight:v,options:h,getValue:P})=>{const a=(0,u.l4)(),C=(0,r.D)(a),[D]=P(),M=(D?h.findIndex(O=>O.value===D.value):0)*c;if(!Array.isArray(E))return null;const R=((0,n.max)(h.map(O=>O.label?.length))??0)*p,S=Math.min(h.length*c,v);return s.createElement(l.t7,{className:C.menu,height:S,width:R,"aria-label":"Select options menu",itemCount:E.length,itemSize:c,initialScrollOffset:M},({index:O,style:U})=>s.createElement("div",{style:{...U,overflow:"hidden"}},E[O]))};g.displayName="VirtualizedSelectMenu";const y=({children:E,data:v,innerProps:h,innerRef:P,isFocused:a,isSelected:C,renderOptionLabel:D})=>{const b=(0,u.l4)(),M=(0,r.D)(b),x=v.icon?(0,f.iJ)(v.icon):void 0;return s.createElement("div",{ref:P,className:(0,t.cx)(M.option,a&&M.optionFocused,C&&M.optionSelected,v.isDisabled&&M.optionDisabled),...h,"aria-label":"Select option",title:v.title},x&&s.createElement(d.J,{name:x,className:M.optionIcon}),v.imgUrl&&s.createElement("img",{className:M.optionImage,src:v.imgUrl,alt:v.label||v.value}),s.createElement("div",{className:M.optionBody},s.createElement("span",null,D?D(v):E),v.description&&s.createElement("div",{className:M.optionDescription},v.description),v.component&&s.createElement(v.component,null)))};y.displayName="SelectMenuOptions"},874:(Y,T,e)=>{"use strict";e.d(T,{n:()=>o});var t=e(9892),n=e(66111),i=e(7804),s=e(72648),l=e(39904);const f=(0,i.B)(d=>({header:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-start;
      justify-items: center;
      cursor: pointer;
      padding: 7px 10px;
      width: 100%;
      border-bottom: 1px solid ${d.colors.background.secondary};

      &:hover {
        color: ${d.colors.text.maxContrast};
      }
    `,label:t.css`
      flex-grow: 1;
    `,icon:t.css`
      padding-right: 2px;
    `}));class u extends n.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(r=>({expanded:!r.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:r}=this.props.selectProps.value;r&&this.props.options.some(m=>m.value===r)&&this.setState({expanded:!0})}}componentDidUpdate(r){r.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:r,label:m,theme:c}=this.props,{expanded:p}=this.state,g=f(c);return n.createElement("div",null,n.createElement("div",{className:g.header,onClick:this.onToggleChildren},n.createElement("span",{className:g.label},m),n.createElement(l.J,{className:g.icon,name:p?"angle-up":"angle-down"})," "),p&&r)}}const o=(0,s.HE)(u)},24901:(Y,T,e)=>{"use strict";e.d(T,{P:()=>c});var t=e(9892),n=e(66111),i=e(44800),s=e(84559),l=e(72648);function f(g,y={}){const{duration:E=250,delay:v=250}=y,[h,P]=(0,n.useState)(g),a=(0,n.useRef)();return(0,n.useEffect)(()=>{let C;if(g)C=setTimeout(()=>{a.current=new Date,P(g)},v);else{const D=a.current?Date.now()-a.current.valueOf():0,b=()=>{a.current=void 0,P(g)};D>=E?b():C=setTimeout(b,E-D)}return()=>{C&&(clearTimeout(C),C=void 0)}},[g,E,v]),h}var u=e(39904),o=e(67487),d=e(19801),r=e(41200);const m=g=>({singleValue:t.css`
      label: singleValue;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
      grid-area: 1 / 1 / 2 / 3;
    `,spinnerWrapper:t.css`
      width: 16px;
      height: 16px;
      display: inline-block;
      margin-right: 10px;
      position: relative;
      vertical-align: middle;
      overflow: hidden;
    `,spinnerIcon:t.css`
      width: 100%;
      height: 100%;
      position: absolute;
    `,optionIcon:t.css`
      margin-right: ${g.spacing(1)};
      color: ${g.colors.text.secondary};
    `,disabled:t.css`
      color: ${g.colors.text.disabled};
    `,isOpen:t.css`
      color: ${g.colors.text.disabled};
    `}),c=g=>{const{children:y,data:E,isDisabled:v}=g,h=(0,l.wW)(m),P=f(E.loading||!1,{delay:250,duration:750}),a=E.icon?(0,s.iJ)(E.icon):void 0;return n.createElement(i.c.SingleValue,{...g,className:(0,t.cx)(h.singleValue,v&&h.disabled,g.selectProps.menuIsOpen&&h.isOpen)},E.imgUrl?n.createElement(p,{loading:P,imgUrl:E.imgUrl,styles:h,alt:E.label??E.value}):n.createElement(n.Fragment,null,n.createElement(r.R,{horizontal:!0,size:16,visible:P,duration:150},n.createElement("div",{className:h.spinnerWrapper},n.createElement(o.$,{className:h.spinnerIcon,inline:!0}))),a&&n.createElement(u.J,{name:a,role:"img",className:h.optionIcon})),!E.hideText&&y)},p=g=>n.createElement("div",{className:g.styles.spinnerWrapper},n.createElement(d.n,{duration:150,visible:g.loading},n.createElement(o.$,{className:g.styles.spinnerIcon,inline:!0})),n.createElement(d.n,{duration:150,visible:!g.loading},n.createElement("img",{className:g.styles.spinnerIcon,src:g.imgUrl,alt:g.alt})))},27501:(Y,T,e)=>{"use strict";e.d(T,{D:()=>i});var t=e(9892),n=e(7804);const i=(0,n.B)(s=>({menu:t.css`
      label: grafana-select-menu;
      background: ${s.components.dropdown.background};
      box-shadow: ${s.shadows.z3};
      position: relative;
      min-width: 100%;
      z-index: 1;
    `,option:t.css`
      label: grafana-select-option;
      padding: 8px;
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;

      &:hover {
        background: ${s.colors.action.hover};
      }
    `,optionIcon:t.css`
      margin-right: ${s.spacing(1)};
    `,optionImage:t.css`
      label: grafana-select-option-image;
      width: 16px;
      margin-right: 10px;
    `,optionDescription:t.css`
      label: grafana-select-option-description;
      font-weight: normal;
      font-size: ${s.typography.size.sm};
      color: ${s.colors.text.secondary};
      white-space: normal;
      line-height: ${s.typography.body.lineHeight};
    `,optionBody:t.css`
      label: grafana-select-option-body;
      display: flex;
      font-weight: ${s.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,optionFocused:t.css`
      label: grafana-select-option-focused;
      background: ${s.colors.action.focus};
    `,optionSelected:t.css`
      background: ${s.colors.action.selected};
    `,optionDisabled:t.css`
      label: grafana-select-option-disabled;
      background-color: ${s.colors.action.disabledBackground};
      color: ${s.colors.action.disabledText};
      cursor: not-allowed;
    `,singleValue:t.css`
      label: grafana-select-single-value;
      color: ${s.components.input.text};
      grid-area: 1 / 1 / 2 / 3;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
    `,valueContainer:t.css`
      label: grafana-select-value-container;
      align-items: center;
      display: grid;
      position: relative;
      box-sizing: border-box;
      flex: 1 1 0%;
      outline: none;
      overflow: hidden;
    `,valueContainerMulti:t.css`
      label: grafana-select-value-container-multi;
      flex-wrap: wrap;
      display: flex;
    `,loadingMessage:t.css`
      label: grafana-select-loading-message;
      padding: ${s.spacing(1)};
      text-align: center;
      width: 100%;
    `,multiValueContainer:t.css`
      label: grafana-select-multi-value-container;
      display: flex;
      align-items: center;
      line-height: 1;
      background: ${s.colors.background.secondary};
      border-radius: ${s.shape.borderRadius()};
      margin: ${s.spacing(.25,1,.25,0)};
      padding: ${s.spacing(.25,0,.25,1)};
      color: ${s.colors.text.primary};
      font-size: ${s.typography.size.sm};

      &:hover {
        background: ${s.colors.emphasize(s.colors.background.secondary)};
      }
    `,multiValueRemove:t.css`
      label: grafana-select-multi-value-remove;
      margin: ${s.spacing(0,.5)};
      cursor: pointer;
      svg {
        margin-bottom: 0;
      }
    `,singleValueRemove:t.css`
      cursor: pointer;
      &:hover {
        color: ${s.colors.text.primary};
      }
    `}))},54897:(Y,T,e)=>{"use strict";e.d(T,{O:()=>i,Z:()=>n});var t=e(66111);function n(s){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(l){return{...l,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:l})=>({maxHeight:l}),multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:l=>({...l,color:s.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function i(s,l){return(0,t.useMemo)(()=>({...n(s),menuPortal:f=>({...f,zIndex:s.zIndex.portal}),menu:({top:f,bottom:u,position:o})=>({top:f,bottom:u,position:o,minWidth:"100%",zIndex:s.zIndex.dropdown}),container:()=>({width:l?s.spacing(l):"100%",display:l==="auto"?"inline-flex":"flex"}),option:(f,u)=>({...f,opacity:u.isDisabled?.5:1})}),[s,l])}},60857:()=>{"use strict"},41490:(Y,T,e)=>{"use strict";e.d(T,{F:()=>p});var t=e(82897),n=e.n(t),i=e(66111),s=e(91017),l=e(59980),f=e(15402),u=e(24434),o=e(53704),d=e(71735),r=e(79086),m=e(5562);function c(g){return{label:g,value:stringToMs(g)}}class p extends i.PureComponent{constructor(y){super(y),this.propsSubject=new s.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,o.w)(y=>m.dP.isLive(y.interval)?(0,l.of)({}):y.loading?f.C:(0,u.F)((0,r.e0)(y.interval))),(0,d.b)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(y){m.dP.isLive(y.interval)&&m.dP.isLive(this.props.interval)||(0,t.isEqual)(y,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},50954:(Y,T,e)=>{"use strict";e.d(T,{PR:()=>v,ZH:()=>m,rD:()=>p});var t=e(82897),n=e.n(t),i=e(33750),s=e(82229),l=e(69098),f=e(2576),u=e(53768),o=e(76095),d=e(92103);const r=["reduceOptions","orientation"];function m(h,P,a){let C=h.options;if(h.fieldConfig=h.fieldConfig||{defaults:{},overrides:[]},P==="singlestat"&&a.angular)return c(h,a);for(const D of r)a.hasOwnProperty(D)&&(C[D]=(0,t.cloneDeep)(a[D]));return C}function c(h,P){const a=P.angular,C=i.TB.getIfExists(a.valueName),D={reduceOptions:{calcs:[C?C.id:i.gz.mean]},orientation:s.wm.Horizontal},b={};if(a.format&&(b.unit=a.format),a.tableColumn&&(D.reduceOptions.fields=`/^${a.tableColumn}$/`),a.nullPointMode&&(b.nullValueMode=a.nullPointMode),a.nullText&&(b.noValue=a.nullText),(a.decimals||a.decimals===0)&&(b.decimals=a.decimals),a.thresholds&&a.colors){const x=a.thresholds.split(",").map(S=>Number(S.trim())),R=[];for(const S of a.colors){const O=R.length-1;O>=0?R.push({value:x[O],color:S}):R.push({value:-1/0,color:S})}b.thresholds={mode:l.H.Absolute,steps:R}}const M=(0,f.Jb)(a,b.thresholds);return M&&M.length&&(b.mappings=M),a.gauge&&a.gauge.show&&(b.min=a.gauge.minValue,b.max=a.gauge.maxValue),h.fieldConfig.defaults=b,D}function p(h){if(!h.options)return{};const P=parseFloat(h.pluginVersion||"6.1");let a=h.options;P<6.2&&(a=y(a)),P<6.3&&(a=g(a));const{fieldOptions:C}=a;if(P<6.6&&C){if(C&&C.override){const{override:M,...x}=a.fieldOptions;a={...a,fieldOptions:{...x,overrides:[]}}}let D=C?.defaults?.thresholds;D?delete C.defaults.thresholds:(D=C?.thresholds,delete C.thresholds),D&&(C.defaults.thresholds={mode:l.H.Absolute,steps:D});const{defaults:b}=C;b.color&&typeof b.color=="string"&&(b.color={mode:u.S.Fixed,fixedColor:b.color}),(0,o.gb)(b)}if(P<7&&(h.fieldConfig=h.fieldConfig||{defaults:{},overrides:[]},h.fieldConfig={defaults:C&&C.defaults?{...h.fieldConfig.defaults,...C.defaults}:h.fieldConfig.defaults,overrides:C&&C.overrides?[...h.fieldConfig.overrides,...C.overrides]:h.fieldConfig.overrides},C&&(a.reduceOptions={values:C.values,limit:C.limit,calcs:C.calcs}),delete a.fieldOptions),P<7.1){const D=h.fieldConfig.defaults.title;D!=null&&(h.fieldConfig.defaults.displayName=D,delete h.fieldConfig.defaults.title)}if(P<8){const D=h.fieldConfig?.defaults;let b=D?.unit;b==="percent"?((0,t.isNumber)(D.min)||(D.min=0),(0,t.isNumber)(D.max)||(D.max=100)):b==="percentunit"&&((0,t.isNumber)(D.min)||(D.min=0),(0,t.isNumber)(D.max)||(D.max=1))}return a}function g(h){const{fieldOptions:P}=h;if(!P)return h;const{mappings:a,...C}=h.fieldOptions;let D;return h.thresholds&&(D={mode:l.H.Absolute,steps:E(h.thresholds)}),{...h,fieldOptions:{...C,defaults:{...P.defaults,mappings:a,thresholds:D}}}}function y(h){const{valueOptions:P}=h;if(!P)return h;const a={},C={};if(a.mappings=h.valueMappings,a.thresholds=h.thresholds,a.defaults=C,C.unit=P.unit,C.decimals=P.decimals,P.stat){const b=i.TB.get(P.stat);b&&(a.calcs=[b.id])}C.min=h.minValue,C.max=h.maxValue;const D={...h,fieldOptions:a};return(0,t.omit)(D,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function E(h){if(!h||!h.length)return;const P=h.map(a=>({value:a.value===null?-1/0:a.value,color:a.color}));return(0,d.bP)(P),P[0].value=-1/0,P}function v(h){return(0,f.Jb)(h)}},70161:(Y,T,e)=>{"use strict";e.d(T,{PR:()=>t.PR,ZH:()=>t.ZH,rD:()=>t.rD});var t=e(50954)},97759:(Y,T,e)=>{"use strict";e.d(T,{U:()=>m});var t=e(9892),n=e(65788),i=e(74560),s=e(66111),l=e(72648),f=e(89188);const u=c=>{const{value:p,children:g,visible:y,placement:E,tipFormatter:v,...h}=c,P=(0,s.useRef)(),a=(0,s.useRef)(null),C=(0,l.wW)(o);function D(){a.current!==null&&cancelAnimationFrame(a.current)}function b(){a.current=requestAnimationFrame(()=>{P.current?.forcePopupAlign?.()})}return(0,s.useEffect)(()=>(y?b():D(),D),[p,y]),s.createElement(f.Z,{overlayClassName:C.tooltip,placement:E,overlay:v??p,overlayInnerStyle:{minHeight:"auto"},ref:P,visible:y,...h},g)},o=c=>({tooltip:(0,t.css)({position:"absolute",display:"block",visibility:"visible",fontSize:c.typography.bodySmall.fontSize,opacity:.9,padding:3,zIndex:c.zIndex.tooltip})}),d=u;var r=e(29571);const m=({min:c,max:p,onChange:g,onAfterChange:y,orientation:E="horizontal",reverse:v,step:h,formatTooltipResult:P,value:a,tooltipAlwaysVisible:C=!0})=>{const D=(0,s.useCallback)(O=>{g?.(typeof O=="number"?[O,O]:O)},[g]),b=(0,s.useCallback)(O=>{y?.(typeof O=="number"?[O,O]:O)},[y]),M=E==="horizontal",x=(0,l.l4)(),R=(0,r.W)(x,M),S=(O,U)=>s.createElement(d,{value:U.value,visible:C||U.dragging,tipFormatter:P?()=>P(U.value):void 0,placement:M?"top":"right"},O);return s.createElement("div",{className:(0,t.cx)(R.container,R.slider)},s.createElement(n.Global,{styles:R.tooltip}),s.createElement(i.Z,{min:c,max:p,step:h,defaultValue:a,range:!0,onChange:D,onAfterChange:b,vertical:!M,reverse:v,handleRender:S}))};m.displayName="RangeSlider"},90330:(Y,T,e)=>{"use strict";e.d(T,{i:()=>o});var t=e(9892),n=e(65788),i=e(74560),s=e(66111),l=e(72648),f=e(46967),u=e(29571);const o=({min:d,max:r,onChange:m,onAfterChange:c,orientation:p="horizontal",reverse:g,step:y,value:E,ariaLabelForHandle:v,marks:h,included:P})=>{const a=p==="horizontal",C=(0,l.l4)(),D=(0,u.W)(C,a,Boolean(h)),b=i.Z,[M,x]=(0,s.useState)(E??d),R=(0,s.useCallback)(w=>{const K=typeof w=="number"?w:w[0];x(K),m?.(K)},[x,m]),S=(0,s.useCallback)(w=>{let K=+w.target.value;Number.isNaN(K)&&(K=0),x(K),m&&m(K),c&&c(K)},[m,c]),O=(0,s.useCallback)(w=>{const K=+w.target.value;K>r?x(r):K<d&&x(d)},[r,d]),U=(0,s.useCallback)(w=>{const K=typeof w=="number"?w:w[0];c?.(K)},[c]),I=a?[]:[D.sliderInputVertical],F=a?[]:[D.sliderInputFieldVertical];return s.createElement("div",{className:(0,t.cx)(D.container,D.slider)},s.createElement(n.Global,{styles:D.tooltip}),s.createElement("div",{className:(0,t.cx)(D.sliderInput,...I)},s.createElement(b,{min:d,max:r,step:y,defaultValue:E,value:M,onChange:R,onAfterChange:U,vertical:!a,reverse:g,ariaLabelForHandle:v,marks:h,included:P}),s.createElement(f.I,{type:"text",className:(0,t.cx)(D.sliderInputField,...F),value:M,onChange:S,onBlur:O,min:d,max:r})))};o.displayName="Slider"},29571:(Y,T,e)=>{"use strict";e.d(T,{W:()=>s});var t=e(9892),n=e(65788),i=e(7804);const s=(0,i.B)((l,f,u=!1)=>{const{spacing:o}=l,d=l.colors.border.strong,r=l.colors.primary.main,m=l.colors.primary.main,p=`box-shadow: 0px 0px 0px 6px ${l.colors.primary.transparent}`;return{container:t.css`
      width: 100%;
      margin: ${f?"inherit":`${o(1,3,1,1)}`};
      padding-bottom: ${f&&u?l.spacing(1):"inherit"};
      height: ${f?"auto":"100%"};
    `,slider:t.css`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${l.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${l.colors.text.disabled};
        font-size: ${l.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${l.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${m};
        box-shadow: ${l.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${p};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${l.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${l.colors.text.primary};
        border-color: ${l.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${r};
      }
      .rc-slider-rail {
        background-color: ${d};
        cursor: pointer;
      }
    `,tooltip:n.css`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${l.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${l.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      width: 100%;
    `,sliderInputVertical:t.css`
      flex-direction: column;
      height: 100%;

      .rc-slider {
        margin: 0;
        order: 2;
      }
    `,sliderInputField:t.css`
      margin-left: ${l.spacing(3)};
      width: 60px;
      input {
        text-align: center;
      }
    `,sliderInputFieldVertical:t.css`
      margin: 0 0 ${l.spacing(3)} 0;
      order: 1;
    `}})},67307:(Y,T,e)=>{"use strict";e.d(T,{b:()=>y});var t=e(82897),n=e(66111),i=e(96905),s=e(99098),l=e(72990),f=e(40538),u=e(3200),o=e(13347),d=e(2445),r=e(17587),m=e(83881),c=e(45778);function p(E,v){const h=E.y.values.length,P={...E.y.config,...v},a=E.x??{name:"",values:[...Array(h).keys()],type:s.fS.number,config:{}};let C={refId:"sparkline",fields:[a,{...E.y,config:P}],length:h};return(0,r.lP)(a.values)||(C=(0,m.aK)(C,0)),(0,c.w)({frame:C})}const g={drawStyle:f.l8.Line,showPoints:f.Jp.Auto,axisPlacement:f.LB.Hidden,pointSize:2};class y extends n.PureComponent{constructor(v){super(v);const h=p(v.sparkline,v.config);this.state={data:(0,d.Bj)(h,(0,d.i7)(h)),alignedDataFrame:h,configBuilder:this.prepareConfig(h)}}static getDerivedStateFromProps(v,h){const P=p(v.sparkline,v.config);return P?{...h,data:(0,d.Bj)(P,(0,d.i7)(P)),alignedDataFrame:P}:{...h}}componentDidUpdate(v,h){const{alignedDataFrame:P}=this.state;if(!P)return;let a=!1;v.sparkline!==this.props.sparkline?a=!(0,i.Ch)(this.state.alignedDataFrame,h.alignedDataFrame):a=!(0,t.isEqual)(v.config,this.props.config),a&&this.setState({configBuilder:this.prepareConfig(P)})}getYRange(v){let{min:h,max:P}=this.state.alignedDataFrame.fields[1].state?.range;return h===P?(h===0?P=100:(h=0,P*=2),[h,P]):[Math.max(h,v.config.min??-1/0),Math.min(P,v.config.max??1/0)]}prepareConfig(v){const{theme:h}=this.props,P=new o.U;P.setCursor({show:!1,x:!1,y:!1});const a=v.fields[0];P.addScale({scaleKey:"x",orientation:f.wN.Horizontal,direction:f.bQ.Right,isTime:!1,range:()=>{const{sparkline:C}=this.props;if(C.x){if(C.timeRange&&C.x.type===s.fS.time)return[C.timeRange.from.valueOf(),C.timeRange.to.valueOf()];const D=C.x.values;return[D[0],D[D.length-1]]}return[0,C.y.values.length-1]}}),P.addAxis({scaleKey:"x",theme:h,placement:f.LB.Hidden});for(let C=0;C<v.fields.length;C++){const D=v.fields[C],b=D.config,M={...g,...b.custom};if(D===a||D.type!==s.fS.number)continue;const x=b.unit||"__fixed";P.addScale({scaleKey:x,orientation:f.wN.Vertical,direction:f.bQ.Up,range:()=>this.getYRange(D)}),P.addAxis({scaleKey:x,theme:h,placement:f.LB.Hidden});const R=(0,l.fD)(D),S=R.getCalculator(D,h)(0,0),O=M.drawStyle===f.l8.Points?f.Jp.Always:M.showPoints;P.addSeries({pxAlign:!1,scaleKey:x,theme:h,colorMode:R,thresholds:b.thresholds,drawStyle:M.drawStyle,lineColor:M.lineColor??S,lineWidth:M.lineWidth,lineInterpolation:M.lineInterpolation,showPoints:O,pointSize:M.pointSize,fillOpacity:M.fillOpacity,fillColor:M.fillColor,lineStyle:M.lineStyle,gradientMode:M.gradientMode})}return P}render(){const{data:v,configBuilder:h}=this.state,{width:P,height:a,sparkline:C}=this.props;return n.createElement(u.N,{data:v,config:h,width:P,height:a,timeRange:C.timeRange})}}},67487:(Y,T,e)=>{"use strict";e.d(T,{$:()=>f});var t=e(9892),n=e(66111),i=e(7804),s=e(39904);const l=(0,i.B)((u,o)=>({wrapper:t.css`
      font-size: ${u}px;
      ${o?t.css`
            display: inline-block;
          `:""}
    `})),f=({className:u,inline:o=!1,iconClassName:d,style:r,size:m=16})=>{const c=l(m,o);return n.createElement("div",{"data-testid":"Spinner",style:r,className:(0,t.cx)(c.wrapper,u)},n.createElement(s.J,{className:(0,t.cx)("fa-spin",d),name:"fa fa-spinner"}))}},71294:(Y,T,e)=>{"use strict";e.d(T,{m:()=>f});var t=e(82897),n=e.n(t),i=e(66111),s=e(33750),l=e(8581);class f extends i.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:o,allowMultiple:d,defaultStat:r,onChange:m}=this.props,c=s.TB.list(o);if(c.length!==o.length){const p=c.map(y=>y.id),g=(0,t.difference)(o,p);console.warn("Unknown stats",g,o),m(c.map(y=>y.id))}!d&&o.length>1&&(console.warn("Removing extra stat",o),m([o[0]])),r&&o.length<1&&m([r])},this.onSelectionChange=o=>{const{onChange:d}=this.props;Array.isArray(o)?d(o.map(r=>r.value)):d(o&&o.value?[o.value]:[])}}componentDidMount(){this.checkInput()}componentDidUpdate(o){this.checkInput()}render(){const{stats:o,allowMultiple:d,defaultStat:r,placeholder:m,className:c,menuPlacement:p,width:g,inputId:y}=this.props,E=s.TB.selectOptions(o);return i.createElement(l.Ph,{value:E.current,className:c,isClearable:!r,isMulti:d,width:g,isSearchable:!0,options:E.options,placeholder:m,onChange:this.onSelectionChange,menuPlacement:p,inputId:y})}}f.defaultProps={allowMultiple:!1}},8944:(Y,T,e)=>{"use strict";e.d(T,{r:()=>d,x:()=>r});var t=e(9892),n=e(82897),i=e.n(n),s=e(66111),l=e(55024),f=e(72648),u=e(7804),o=e(85419);const d=s.forwardRef(({value:c,checked:p,onChange:g,id:y,label:E,disabled:v,...h},P)=>{p&&(0,l.d)("Switch","checked prop","value");const a=(0,f.l4)(),C=m(a),D=(0,s.useRef)(y||(0,n.uniqueId)("switch-"));return s.createElement("div",{className:(0,t.cx)(C.switch)},s.createElement("input",{type:"checkbox",disabled:v,checked:c,onChange:b=>{!v&&g?.(b)},id:D.current,...h,ref:P}),s.createElement("label",{htmlFor:D.current,"aria-label":E??"Toggle switch"}))});d.displayName="Switch";const r=s.forwardRef(({transparent:c,className:p,showLabel:g,label:y,value:E,id:v,...h},P)=>{const a=(0,f.l4)(),C=m(a,c);return s.createElement("div",{className:(0,t.cx)(C.inlineContainer,p,h.disabled&&C.disabled)},g&&s.createElement("label",{htmlFor:v,className:(0,t.cx)(C.inlineLabel,E&&C.inlineLabelEnabled,"inline-switch-label")},y),s.createElement(d,{...h,id:v,label:y,ref:P,value:E}))});r.displayName="Switch";const m=(0,u.B)((c,p)=>({switch:t.css`
      width: 32px;
      height: 16px;
      position: relative;

      input {
        opacity: 0;
        left: -100vw;
        z-index: -1000;
        position: absolute;

        &:disabled + label {
          background: ${c.colors.action.disabledBackground};
          cursor: not-allowed;
        }

        &:checked + label {
          background: ${c.colors.primary.main};
          border-color: ${c.colors.primary.main};

          &:hover {
            background: ${c.colors.primary.shade};
          }

          &::after {
            transform: translate3d(18px, -50%, 0);
            background: ${c.colors.primary.contrastText};
          }
        }

        &:focus + label,
        &:focus-visible + label {
          ${(0,o.getFocusStyles)(c)}
        }

        &:focus:not(:focus-visible) + label {
          ${(0,o.getMouseFocusStyles)(c)}
        }
      }

      label {
        width: 100%;
        height: 100%;
        cursor: pointer;
        border: none;
        border-radius: ${c.shape.radius.pill};
        background: ${c.components.input.background};
        border: 1px solid ${c.components.input.borderColor};
        transition: all 0.3s ease;

        &:hover {
          border-color: ${c.components.input.borderHover};
        }

        &::after {
          position: absolute;
          display: block;
          content: '';
          width: 12px;
          height: 12px;
          border-radius: ${c.shape.radius.circle};
          background: ${c.colors.text.secondary};
          box-shadow: ${c.shadows.z1};
          top: 50%;
          transform: translate3d(2px, -50%, 0);
          transition: transform 0.2s cubic-bezier(0.19, 1, 0.22, 1);
        }
      }
    `,inlineContainer:t.css`
      padding: ${c.spacing(0,1)};
      height: ${c.spacing(c.components.height.md)};
      display: inline-flex;
      align-items: center;
      background: ${p?"transparent":c.components.input.background};
      border: 1px solid ${p?"transparent":c.components.input.borderColor};
      border-radius: ${c.shape.borderRadius()};

      &:hover {
        border: 1px solid ${p?"transparent":c.components.input.borderHover};

        .inline-switch-label {
          color: ${c.colors.text.primary};
        }
      }
    `,disabled:t.css`
      background-color: rgba(204, 204, 220, 0.04);
      color: rgba(204, 204, 220, 0.6);
      border: 1px solid rgba(204, 204, 220, 0.04);
    `,inlineLabel:t.css`
      cursor: pointer;
      padding-right: ${c.spacing(1)};
      color: ${c.colors.text.secondary};
      white-space: nowrap;
    `,inlineLabelEnabled:t.css`
      color: ${c.colors.text.primary};
    `}))},18607:(Y,T,e)=>{"use strict";e.d(T,{W:()=>m});var t=e(9892),n=e(66111),i=e(72142),s=e(79841),l=e(8180),f=e(68226),u=e(94893),o=e(7804),d=e(72648);const r=(0,o.B)(c=>({container:t.css`
      height: 100%;
    `,tabContent:t.css`
      padding: ${c.spacing(2)};
      background-color: ${c.colors.background.primary};
      height: calc(100% - ${c.components.menuTabs.height}px);
    `,close:t.css`
      position: absolute;
      right: 16px;
      top: 5px;
      cursor: pointer;
      font-size: ${c.typography.size.lg};
    `,tabs:t.css`
      padding-top: ${c.spacing(1)};
      border-color: ${c.colors.border.weak};
      ul {
        margin-left: ${c.spacing(2)};
      }
    `}));function m(c){const[p,g]=(0,n.useState)(c.tabs.some(C=>C.value===c.defaultTab)?c.defaultTab:c.tabs?.[0].value),y=C=>{g(C.value)},{tabs:E,onClose:v,closeIconTooltip:h}=c,P=(0,d.l4)(),a=r(P);return n.createElement("div",{className:a.container},n.createElement(i.J,{className:a.tabs},E.map(C=>n.createElement(s.O,{key:C.value,label:C.label,active:C.value===p,onChangeTab:()=>y(C),icon:C.icon})),n.createElement(l.h,{className:a.close,onClick:v,name:"times",title:h??"Close"})),n.createElement(f.$,{autoHeightMin:"100%"},n.createElement(u.I,{className:a.tabContent},E.find(C=>C.value===p)?.content)))}},89361:(Y,T,e)=>{"use strict";e.d(T,{i:()=>u,c:()=>d});var t=e(66111),n=e(33750),i=e(68183),s=e(9892);const l=r=>{const m=s.css`
    width: 100%;
    list-style: none;
  `,c=s.css`
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  `;return r.value&&!Array.isArray(r.value)?t.createElement("span",null,r.value):r.value&&Array.isArray(r.value)&&r.value.length>0?t.createElement("ul",{className:m},r.value.map((p,g)=>{const y=Object.keys(p)[0];return t.createElement("li",{className:c,key:g},t.createElement("span",null,y),t.createElement("span",null,p[y]))})):f},f=()=>t.createElement("span",null,"\xA0");function u(r){const{totalColumnsWidth:m,footerGroups:c,isPaginationVisible:p,tableStyles:g}=r,y=i.wl.components.Panels.Visualization.Table;return t.createElement("div",{style:{position:p?"relative":"absolute",width:m?`${m}px`:"100%",bottom:"0px"}},c.map(E=>{const{key:v,...h}=E.getFooterGroupProps();return t.createElement("div",{className:g.tfoot,...h,key:v,"data-testid":y.footer},E.headers.map(P=>o(P,g)))}))}function o(r,m){const c=r.getHeaderProps();return c?(c.style=c.style??{},c.style.position="absolute",c.style.justifyContent=r.justifyContent,t.createElement("div",{className:m.headerCell,...c},r.render("Footer"))):null}function d(r,m,c){if(m===void 0)return f;if(c){if(m[r]===void 0)return f;const p=n.TB.get(n.gz.count).name;return l({value:[{[p]:String(m[r])}]})}return l({value:m[r]})}},24115:(Y,T,e)=>{"use strict";e.d(T,{A:()=>d,U:()=>o});var t=e(66111),n=e(99601),i=e(99098),s=e(83881),l=e(40538),f=e(67307),u=e(48010);const o={drawStyle:l.l8.Line,lineInterpolation:l.KC.Smooth,lineWidth:1,fillOpacity:17,gradientMode:l.FI.Hue,pointSize:2,barAlignment:l.pu.Center,showPoints:l.Jp.Never},d=c=>{const{field:p,innerWidth:g,tableStyles:y,cell:E,cellProps:v,timeRange:h}=c,P=r(E.value);if(!P)return t.createElement("div",{...v,className:y.cellContainer},"no data");const a=(0,n.dz)(P.y);P.y.config.min=a.min,P.y.config.max=a.max,P.y.state={range:a},P.timeRange=h;const C=m(p),D={color:p.config.color,custom:{...o,...C}};return t.createElement("div",{...v,className:y.cellContainer},t.createElement(f.b,{width:g,height:y.cellHeightInner,sparkline:P,config:D,theme:y.theme}))};function r(c){if(Array.isArray(c))return{y:{name:"test",type:i.fS.number,values:c,config:{}}};if((0,s.aY)(c)){const p=c.fields.find(y=>y.type===i.fS.time),g=c.fields.find(y=>y.type===i.fS.number);if(p&&g)return{x:p,y:g}}}function m(c){let p=(0,u.S_)(c);if(p.type===l.h2.Auto&&(p={...p,type:l.h2.Sparkline}),p.type===l.h2.Sparkline)return p;throw new Error(`Excpected options type ${l.h2.Sparkline} but got ${p.type}`)}},88144:(Y,T,e)=>{"use strict";e.d(T,{i:()=>oe});var t=e(66111),n=e(9827),i=e(32436),s=e(33750),l=e(40538),f=e(72648),u=e(68226),o=e(78889),d=e(89361),r=e(68183),m=e(50622),c=e(39904),p=e(9892),g=e(56921),y=e(94437),E=e(52081),v=e(64353),h=e(8180),P=e(31403),a=e(14747),C=e(58255),D=e(7804);const b=28,M=b*5,x=({options:G,values:le,caseSensitive:fe,onChange:ae})=>{const de=(0,f.l4)(),ee=R(de),[me,q]=(0,t.useState)(""),ne=(0,t.useMemo)(()=>new RegExp(me,fe?void 0:"i"),[me,fe]),se=(0,t.useMemo)(()=>G.filter(ct=>ct.label===void 0?!1:ne.test(ct.label)),[G,ne]),he=de.spacing.gridSize,ue=(0,t.useMemo)(()=>Math.min(se.length*b,M)+he,[he,se.length]),Te=(0,t.useCallback)(ct=>{q(ct)},[q]),Ve=(0,t.useCallback)(ct=>Ie=>{const Ke=Ie.currentTarget.checked?le.concat(ct):le.filter(Ge=>Ge.value!==ct.value);ae(Ke)},[ae,le]);return t.createElement(E.wc,{spacing:"md"},t.createElement(a.H,{placeholder:"Filter values",onChange:Te,value:me}),!se.length&&t.createElement(v._,null,"No values"),se.length&&t.createElement(i.t7,{height:ue,itemCount:se.length,itemSize:b,width:"100%",className:ee.filterList},({index:ct,style:Ie})=>{const Ke=se[ct],{value:Ge,label:at}=Ke,dt=le.find(Re=>Re.value===Ge)!==void 0;return t.createElement("div",{className:ee.filterListRow,style:Ie,title:at},t.createElement(C.X,{value:dt,label:at,onChange:Ve(Ke)}))}))},R=(0,D.B)(G=>({filterList:p.css`
    label: filterList;
  `,filterListRow:p.css`
    label: filterListRow;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: ${G.spacing(.5)};

    :hover {
      background-color: ${G.colors.action.hover};
    }
  `}));var S=e(48010);const O=({column:{preFilteredRows:G,filterValue:le,setFilter:fe},onClose:ae,field:de})=>{const ee=(0,f.l4)(),me=(0,t.useMemo)(()=>(0,S.AF)(G,de),[G,de]),q=(0,t.useMemo)(()=>(0,S.mP)(me),[me]),ne=(0,t.useMemo)(()=>(0,S.n0)(q,le),[q,le]),[se,he]=(0,t.useState)(ne),[ue,Te]=(0,t.useState)(!1),Ve=(0,t.useCallback)(at=>ae(),[ae]),ct=(0,t.useCallback)(at=>{const dt=se.length?se:void 0;fe(dt),ae()},[fe,se,ae]),Ie=(0,t.useCallback)(at=>{fe(void 0),ae()},[fe,ae]),Ke=(0,t.useMemo)(()=>le!==void 0,[le]),Ge=(0,f.wW)(U);return t.createElement(y.L,{onClick:Ve,useCapture:!0},t.createElement("div",{className:(0,p.cx)(Ge.filterContainer),onClick:I},t.createElement(E.wc,{spacing:"lg"},t.createElement(E.wc,{spacing:"xs"},t.createElement(E.Lh,{justify:"space-between",align:"center"},t.createElement(v._,{className:Ge.label},"Filter by values:"),t.createElement(h.h,{name:"text-fields",tooltip:"Match case",style:{color:ue?ee.colors.text.link:ee.colors.text.disabled},onClick:()=>{Te(at=>!at)}})),t.createElement("div",{className:(0,p.cx)(Ge.listDivider)}),t.createElement(x,{onChange:he,values:se,options:q,caseSensitive:ue})),t.createElement(E.Lh,{spacing:"lg"},t.createElement(E.Lh,null,t.createElement(P.zx,{size:"sm",onClick:ct},"Ok"),t.createElement(P.zx,{size:"sm",variant:"secondary",onClick:Ve},"Cancel")),Ke&&t.createElement(E.Lh,null,t.createElement(P.zx,{fill:"text",size:"sm",onClick:Ie},"Clear filter"))))))},U=G=>({filterContainer:p.css`
    label: filterContainer;
    width: 100%;
    min-width: 250px;
    height: 100%;
    max-height: 400px;
    background-color: ${G.colors.background.primary};
    border: 1px solid ${G.colors.border.weak};
    padding: ${G.spacing(2)};
    margin: ${G.spacing(1)} 0;
    box-shadow: ${G.shadows.z3};
    border-radius: ${G.shape.radius.default};
  `,listDivider:p.css`
    label: listDivider;
    width: 100%;
    border-top: 1px solid ${G.colors.border.medium};
    padding: ${G.spacing(.5,2)};
  `,label:p.css`
    margin-bottom: 0;
  `}),I=G=>{G.stopPropagation()},F=({column:G,field:le,tableStyles:fe})=>{const ae=(0,t.useRef)(null),[de,ee]=(0,t.useState)(!1),me=(0,f.wW)(w),q=(0,t.useMemo)(()=>Boolean(G.filterValue),[G.filterValue]),ne=(0,t.useCallback)(()=>ee(!0),[ee]),se=(0,t.useCallback)(()=>ee(!1),[ee]);return!le||!le.config.custom?.filterable?null:t.createElement("button",{className:(0,p.cx)(fe.headerFilter,q?me.filterIconEnabled:me.filterIconDisabled),ref:ae,type:"button",onClick:ne},t.createElement(c.J,{name:"filter"}),de&&ae.current&&t.createElement(g.J,{content:t.createElement(O,{column:G,tableStyles:fe,field:le,onClose:se}),placement:"bottom-start",referenceElement:ae.current,show:!0}))},w=G=>({filterIconEnabled:p.css`
    label: filterIconEnabled;
    color: ${G.colors.primary.text};
  `,filterIconDisabled:p.css`
    label: filterIconDisabled;
    color: ${G.colors.text.disabled};
  `}),K=G=>{const{headerGroups:le,showTypeIcons:fe,tableStyles:ae}=G,de=r.wl.components.Panels.Visualization.Table;return t.createElement("div",{role:"rowgroup",className:ae.headerRow},le.map(ee=>{const{key:me,...q}=ee.getHeaderGroupProps();return t.createElement("div",{className:ae.thead,...q,key:me,"aria-label":de.header,role:"row"},ee.headers.map((ne,se)=>L(ne,ae,fe)))}))};function L(G,le,fe){const ae=G.getHeaderProps(),de=G.field??null;return G.canResize&&(ae.style.userSelect=G.isResizing?"none":"auto"),ae.style.position="absolute",ae.style.justifyContent=G.justifyContent,t.createElement("div",{className:le.headerCell,...ae,role:"columnheader"},G.canSort&&t.createElement(t.Fragment,null,t.createElement("button",{...G.getSortByToggleProps(),className:le.headerCellLabel},fe&&t.createElement(c.J,{name:(0,m.e7)(de),title:de?.type,size:"sm",className:le.typeIcon}),t.createElement("div",null,G.render("Header")),G.isSorted&&(G.isSortedDesc?t.createElement(c.J,{size:"lg",name:"arrow-down",className:le.sortIcon}):t.createElement(c.J,{name:"arrow-up",size:"lg",className:le.sortIcon}))),G.canFilter&&t.createElement(F,{column:G,tableStyles:le,field:de})),!G.canSort&&G.render("Header"),!G.canSort&&G.canFilter&&t.createElement(F,{column:G,tableStyles:le,field:de}),G.canResize&&t.createElement("div",{...G.getResizerProps(),className:le.resizeHandle}))}var V=e(35316);function H(G,le){(0,t.useEffect)(()=>{const fe=G.current?.querySelector(".track-vertical"),ae=le.current?.firstChild;ae&&fe&&(fe?.remove(),ae.querySelector(":scope > .track-vertical")?.remove(),ae.append(fe))})}function j(G,le,fe){(0,t.useEffect)(()=>{if(G.lastExpandedIndex!==void 0){le.current?.resetAfterIndex(Math.max(G.lastExpandedIndex-1,0));return}},[G.lastExpandedIndex,G.toggleRowExpandedCounter,le,fe])}var A=e(30471);function _({onColumnResize:G,onSortByChange:le,data:fe}){return(0,t.useCallback)((ae,de)=>{switch(de.type){case"columnDoneResizing":if(G){const me=ae.columnResizing.headerIdWidths[0][0],q=parseInt(me,10),ne=Math.round(ae.columnResizing.columnWidths[me]),se=fe.fields[q];if(!se)return ae;const he=(0,A.CZ)(se,fe);G(he,ne)}case"toggleSortBy":if(le){const ee=[];for(const me of ae.sortBy){const q=fe.fields[parseInt(me.id,10)];q&&ee.push({displayName:(0,A.CZ)(q,fe),desc:me.desc})}le(ee)}case"toggleRowExpanded":if(de.id)return{...ae,lastExpandedIndex:parseInt(de.id,10),toggleRowExpandedCounter:ae.toggleRowExpandedCounter+1}}return ae},[fe,G,le])}function k(G,le){const fe={toggleRowExpandedCounter:0};if(G){fe.sortBy=[];for(const ae of G)for(const de of le)de.Header===ae.displayName&&fe.sortBy.push({id:de.id,desc:ae.desc})}return fe}var Q=e(12245);const re=150,Z=36,oe=(0,t.memo)(G=>{const{ariaLabel:le,data:fe,subData:ae,height:de,onCellFilterAdded:ee,width:me,columnMinWidth:q=re,noHeader:ne,resizable:se=!0,initialSortBy:he,footerOptions:ue,showTypeIcons:Te,footerValues:Ve,enablePagination:ct,cellHeight:Ie=l.Ss.Sm,timeRange:Ke}=G,Ge=(0,t.useRef)(null),at=(0,t.useRef)(null),dt=(0,t.useRef)(null),Re=(0,f.l4)(),ye=(0,Q.p)(Re,Ie),Pe=ne?0:ye.rowHeight,[be,Be]=(0,t.useState)(Ve),ke=(0,t.useMemo)(()=>{const yt=Z;let Lt=0;if(!be)return 0;for(const Kt of be)Array.isArray(Kt)&&Kt.length>Lt&&(Lt=Kt.length);return Lt>1?yt*Lt:yt},[be]),ot=(0,t.useMemo)(()=>fe.fields.length?Array(fe.length).fill(0):[],[fe]),ft=Boolean(ue?.countRows&&ue.reducer&&ue.reducer.length&&ue.reducer[0]===s.gz.count),gt=(0,t.useMemo)(()=>(0,S.Pu)(fe,me,q,!!ae?.length,be,ft),[fe,me,q,be,ae,ft]),St=_(G),ut=(0,t.useMemo)(()=>({columns:gt,data:ot,disableResizing:!se,stateReducer:St,autoResetPage:!1,initialState:k(he,gt),autoResetFilters:!1,sortTypes:{number:S.QT,"alphanumeric-insensitive":S.nl}}),[he,gt,ot,se,St]),{getTableProps:Dt,headerGroups:ie,footerGroups:De,rows:Ne,prepareRow:Je,totalColumnsWidth:Xe,page:Le,state:Ue,gotoPage:ve,setPageSize:Se,pageOptions:$e}=(0,n.useTable)(ut,n.useFilters,n.useSortBy,n.useAbsoluteLayout,n.useResizeColumns,n.useExpanded,n.usePagination),Ye=Ue;(0,t.useEffect)(()=>{ue||Be(Ve)},[Ve,ue]),(0,t.useEffect)(()=>{if(!ue)return;if(!ue.show){Be(void 0);return}if(ft){const Lt=[];Lt[0]=ie[0]?.headers[0]?.filteredRows.length.toString()??fe.length.toString(),Be(Lt);return}const yt=(0,S.jB)(ie[0].headers,(0,S.KF)(Ne),ue,Re);Be(yt)},[ue,Re,Ue.filters,fe]);let _e=de-(Pe+ke);ct&&(_e-=ye.cellHeight);const Et=Math.round(_e/ye.rowHeight)-1;(0,t.useEffect)(()=>{Et<=0||Se(Et)},[Et,Se]),j(Ye,Ge,fe),H(dt,at);const pt=(0,t.useCallback)(yt=>{if(Ue.expanded[yt]){const Lt=ae?.find(Kt=>Kt.meta?.custom?.parentRowIndex===yt);if(Lt){const Kt=!!Lt.meta?.custom?.noHeader,an={height:ye.rowHeight*(Lt.length+(Kt?0:1)),background:Re.colors.emphasize(Re.colors.background.primary,.015),paddingLeft:S.bc,position:"absolute",bottom:0};return t.createElement("div",{style:an},t.createElement(oe,{data:Lt,width:me-S.bc,height:ye.rowHeight*(Lt.length+1),noHeader:Kt}))}}return null},[Ue.expanded,ae,ye.rowHeight,Re.colors,me]),je=(0,t.useCallback)(({index:yt,style:Lt})=>{let Kt=Ne[yt];return ct&&(Kt=Le[yt]),Je(Kt),t.createElement("div",{...Kt.getRowProps({style:Lt}),className:ye.row},pt(yt),Kt.cells.map((an,un)=>t.createElement(V.p,{key:un,tableStyles:ye,cell:an,onCellFilterAdded:ee,columnIndex:un,columnCount:Kt.cells.length,timeRange:Ke})))},[ee,Le,ct,Je,Ne,ye,pt,Ke]),ht=(0,t.useCallback)(yt=>{ve(yt-1)},[ve]),we=ct?Le.length:Ne.length;let Qe=null;if(ct){const yt=Ue.pageIndex*Ue.pageSize+1;let Lt=yt+Ue.pageSize-1;const Kt=me<550;Lt>fe.length&&(Lt=fe.length),Qe=t.createElement("div",{className:ye.paginationWrapper},t.createElement(o.t,{currentPage:Ue.pageIndex+1,numberOfPages:$e.length,showSmallVersion:Kt,onNavigate:ht}),Kt?null:t.createElement("div",{className:ye.paginationSummary},yt," - ",Lt," of ",fe.length," rows"))}const nt=yt=>{if(Ue.expanded[yt]){const Lt=ae?.find(Kt=>Kt.meta?.custom?.parentRowIndex===yt);if(Lt){const Kt=!!Lt.meta?.custom?.noHeader;return ye.rowHeight*(Lt.length+1+(Kt?0:1))}}return ye.rowHeight},it=yt=>{const{scrollTop:Lt}=yt.target;Ge.current!==null&&Ge.current.scrollTo(Lt)};return t.createElement("div",{...Dt(),className:ye.table,"aria-label":le,role:"table",ref:at,style:{width:me,height:de}},t.createElement(u.$,{hideVerticalTrack:!0},t.createElement("div",{className:ye.tableContentWrapper(Xe)},!ne&&t.createElement(K,{headerGroups:ie,showTypeIcons:Te,tableStyles:ye}),we>0?t.createElement("div",{ref:dt},t.createElement(u.$,{onScroll:it,hideHorizontalTrack:!0},t.createElement(i.S_,{key:ye.rowHeight,height:_e,itemCount:we,itemSize:nt,width:"100%",ref:Ge,style:{overflow:void 0}},je))):t.createElement("div",{style:{height:de-Pe},className:ye.noData},"No data"),be&&t.createElement(d.i,{isPaginationVisible:Boolean(ct),footerValues:be,footerGroups:De,totalColumnsWidth:Xe,tableStyles:ye}))),Qe)});oe.displayName="Table"},35316:(Y,T,e)=>{"use strict";e.d(T,{p:()=>t});const t=({cell:n,tableStyles:i,onCellFilterAdded:s,timeRange:l,userProps:f})=>{const u=n.getCellProps(),o=n.column.field;if(!o?.display)return null;u.style&&(u.style.minWidth=u.style.width,u.style.justifyContent=n.column.justifyContent);let d=(n.column.width??24)-i.cellPadding*2;return n.render("Cell",{field:o,tableStyles:i,onCellFilterAdded:s,cellProps:u,innerWidth:d,timeRange:l,userProps:f})}},12245:(Y,T,e)=>{"use strict";e.d(T,{p:()=>n});var t=e(9892);function n(s,l){const f=s.colors.border.weak,u=s.colors.primary.border,o=6,d=i(s,l,o),r=d+2,m=28,c=(p,g,y)=>{const E={margin:s.spacing(0,-.5,0,.5)},v={position:"absolute",top:0,right:0,margin:"auto"},h={overflow:"visible",width:"auto !important",boxShadow:`0 0 2px ${s.colors.primary.main}`,background:g??s.components.table.rowHoverBackground,zIndex:1};return t.css`
      label: ${y?"cellContainerOverflow":"cellContainerNoOverflow"};
      padding: ${o}px;
      width: 100%;
      // Cell height need to account for row border
      height: ${r-1}px;
      display: flex;
      align-items: center;
      border-right: 1px solid ${f};

      ${p?`color: ${p};`:""};
      ${g?`background: ${g};`:""};
      background-clip: padding-box;

      &:last-child:not(:only-child) {
        border-right: none;
      }

      &:hover {
        ${y&&h};
        .cellActions {
          visibility: visible;
          opacity: 1;
          width: auto;
        }
      }

      a {
        color: inherit;
      }

      .cellActions {
        display: flex;
        ${y?E:v}
        visibility: hidden;
        opacity: 0;
        width: 0;
        align-items: center;
        height: 100%;
        padding: ${s.spacing(1,.5,1,.5)};
        background: ${g?"none":s.colors.emphasize(s.colors.background.primary,.03)};

        svg {
          color: ${p};
        }
      }

      .cellActionsLeft {
        right: auto !important;
        left: 0;
      }

      .cellActionsTransparent {
        background: none;
      }
    `};return{theme:s,cellHeight:d,buildCellContainerStyle:c,cellPadding:o,cellHeightInner:d-o*2,rowHeight:r,table:t.css`
      height: 100%;
      width: 100%;
      overflow: auto;
      display: flex;
      flex-direction: column;
    `,thead:t.css`
      label: thead;
      height: ${m}px;
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,tfoot:t.css`
      label: tfoot;
      height: ${m}px;
      border-top: 1px solid ${f};
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,headerRow:t.css`
      label: row;
      border-bottom: 1px solid ${f};
    `,headerCell:t.css`
      height: 100%;
      padding: 0 ${o}px;
      overflow: hidden;
      white-space: nowrap;
      display: flex;
      align-items: center;
      font-weight: ${s.typography.fontWeightMedium};

      &:last-child {
        border-right: none;
      }
    `,headerCellLabel:t.css`
      border: none;
      padding: 0;
      background: inherit;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-weight: ${s.typography.fontWeightMedium};
      display: flex;
      align-items: center;
      margin-right: ${s.spacing(.5)};

      &:hover {
        text-decoration: underline;
        color: ${s.colors.text.link};
      }
    `,cellContainer:c(void 0,void 0,!0),cellContainerNoOverflow:c(void 0,void 0,!1),cellText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
    `,sortIcon:t.css`
      margin-left: ${s.spacing(.5)};
    `,cellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      color: ${s.colors.text.link};
      font-weight: ${s.typography.fontWeightMedium};
      &:hover {
        text-decoration: underline;
        color: ${s.colors.text.link};
      }
    `,cellLinkForColoredCell:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      font-weight: ${s.typography.fontWeightMedium};
      text-decoration: underline;
    `,imageCellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      height: 100%;
    `,headerFilter:t.css`
      background: transparent;
      border: none;
      label: headerFilter;
      padding: 0;
    `,paginationWrapper:t.css`
      display: flex;
      height: ${d}px;
      justify-content: center;
      align-items: center;
      width: 100%;
      li {
        margin-bottom: 0;
      }
    `,paginationSummary:t.css`
      color: ${s.colors.text.secondary};
      font-size: ${s.typography.bodySmall.fontSize};
      display: flex;
      justify-content: flex-end;
      padding: ${s.spacing(0,1,0,2)};
    `,tableContentWrapper:p=>{const g=p!==void 0?`${p}px`:"100%";return t.css`
        label: tableContentWrapper;
        width: ${g};
        display: flex;
        flex-direction: column;
      `},row:t.css`
      label: row;
      border-bottom: 1px solid ${f};

      &:hover {
        background-color: ${s.components.table.rowHoverBackground};
      }

      &:last-child {
        border-bottom: 0;
      }
    `,imageCell:t.css`
      height: 100%;
    `,resizeHandle:t.css`
      label: resizeHandle;
      cursor: col-resize !important;
      display: inline-block;
      background: ${u};
      opacity: 0;
      transition: opacity 0.2s ease-in-out;
      width: 8px;
      height: 100%;
      position: absolute;
      right: -4px;
      border-radius: ${s.shape.radius.default};
      top: 0;
      touch-action: none;

      &:hover {
        opacity: 1;
      }
    `,typeIcon:t.css`
      margin-right: ${s.spacing(1)};
      color: ${s.colors.text.secondary};
    `,noData:t.css`
      align-items: center;
      display: flex;
      height: 100%;
      justify-content: center;
      width: 100%;
    `,expanderCell:t.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      height: ${r}px;
      cursor: pointer;
    `}}function i(s,l,f){const u=s.typography.fontSize,o=s.typography.body.lineHeight;switch(l){case"md":return 42;case"lg":return 48;case"sm":default:return f*2+u*o}}},13580:(Y,T,e)=>{"use strict";e.d(T,{PT:()=>t,tE:()=>n});const t="=",n="!="},48010:(Y,T,e)=>{"use strict";e.d(T,{bc:()=>le,AF:()=>me,KF:()=>Ke,S_:()=>at,Pu:()=>ae,n0:()=>he,jB:()=>ct,E4:()=>fe,q7:()=>dt,nl:()=>ue,QT:()=>Te,mP:()=>ne});var t=e(82897),n=e(58635),i=e(99098),s=e(30471),l=e(83881),f=e(19447),u=e(2703),o=e(33750),d=e(6194),r=e(40538),m=e(66111),c=e(69098),p=e(99601),g=e(82229),y=e(19670),E=e(18543);const v={mode:c.H.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},h=ye=>{const{field:Pe,innerWidth:be,tableStyles:Be,cell:ke,cellProps:ot,row:ft}=ye,gt=Pe.display(ke.value),St=at(Pe);let ut=(0,p.xD)(Pe,!1);ut.thresholds||(ut={...ut,thresholds:v});let Dt=r.QH.Gradient,ie;St.type===r.h2.Gauge&&(Dt=St.mode??r.QH.Gradient,ie=St.valueDisplayMode!==void 0?St.valueDisplayMode:r.M8.Text);const De=()=>(0,t.isFunction)(Pe.getLinks)?Pe.getLinks({valueRowIndex:ft.index}):[],Ne=Boolean(De().length),Je=P(Pe,gt,ke.row.index),Xe=Le=>{const{openMenu:Ue,targetClassName:ve}=Le;return m.createElement(y.xf,{width:be,height:Be.cellHeightInner,field:ut,display:Pe.display,text:{valueSize:14},value:gt,orientation:g.wm.Horizontal,theme:Be.theme,alignmentFactors:Je,onClick:Ue,className:ve,itemSpacing:1,lcdCellWidth:8,displayMode:Dt,valueDisplayMode:ie})};return m.createElement("div",{...ot,className:Be.cellContainer},Ne&&m.createElement(E.V,{links:De,style:{display:"flex",width:"100%"}},Le=>Xe(Le)),!Ne&&Xe({}))};function P(ye,Pe,be){let Be=ye.state?.alignmentFactors;if(Be)return Be.text.length<Pe.text.length&&(Be.text=Pe.text),Be;{Be={...Pe};const ke=Math.min(ye.values.length,be+1e3);for(let ot=be+1;ot<ke;ot++)ye.display(ye.values[ot]).text.length>Be.text.length&&(Be.text=Pe.text);return ye.state?ye.state.alignmentFactors=Be:ye.state={alignmentFactors:Be},Be}}var a=e(9892),C=e(28550),D=e(72648),b=e(30901),M=e(16514),x=e(31403),R=e(8180),S=e(52081),O=e(94599),U=e(35029),I=e(9405);function F({value:ye,onDismiss:Pe,mode:be}){let Be=ye;if((0,t.isString)(ye))try{ye=JSON.parse(ye)}catch{}else Be=JSON.stringify(ye,null," ");let ke=Be;return be==="code"&&(ke=JSON.stringify(ye,null," ")),m.createElement(U.u,{onDismiss:Pe,isOpen:!0,title:"Inspect value"},be==="code"?m.createElement(I.p,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(ke&&ke.length)>100,value:ke,readOnly:!0}):m.createElement("pre",null,ke),m.createElement(U.u.ButtonRow,null,m.createElement(O.m,{icon:"copy",getText:()=>ke},"Copy to Clipboard")))}var w=e(13580);function K({field:ye,cell:Pe,previewMode:be,showFilters:Be,onCellFilterAdded:ke}){const[ot,ft]=(0,m.useState)(!1),gt=fe(ye)==="flex-end",St=Boolean(ye.config.custom?.inspect),ut={size:"sm",tooltipPlacement:"top"},Dt=(0,m.useCallback)(De=>{ke&&ke({key:ye.name,operator:w.PT,value:Pe.value})},[Pe,ye,ke]),ie=(0,m.useCallback)(De=>{ke&&ke({key:ye.name,operator:w.tE,value:Pe.value})},[Pe,ye,ke]);return m.createElement(m.Fragment,null,m.createElement("div",{className:`cellActions ${gt?"cellActionsLeft":""}`},m.createElement(S.Lh,{spacing:"xs"},St&&m.createElement(R.h,{name:"eye",tooltip:"Inspect value",onClick:()=>{ft(!0)},...ut}),Be&&m.createElement(R.h,{name:"search-plus",onClick:Dt,tooltip:"Filter for value",...ut}),Be&&m.createElement(R.h,{name:"search-minus",onClick:ie,tooltip:"Filter out value",...ut}))),ot&&m.createElement(F,{mode:be,value:Pe.value,onDismiss:()=>{ft(!1)}}))}const L=ye=>{const{field:Pe,cell:be,tableStyles:Be,row:ke,cellProps:ot}=ye,ft=Boolean(Pe.config.custom?.inspect),gt=Pe.display(be.value);let St;m.isValidElement(be.value)?St=be.value:St=(0,u.zc)(gt);const ut=ye.onCellFilterAdded&&Pe.config.filterable,Dt=ut&&be.value!==void 0||ft,ie=at(Pe),De=V(Be,ie,gt,ft),Ne=Boolean((0,b.i)(Pe,ke)?.length),Je=(0,D.wW)(x._7);return m.createElement("div",{...ot,className:De},!Ne&&m.createElement("div",{className:Be.cellText},St),Ne&&m.createElement(E.V,{links:()=>(0,b.i)(Pe,ke)||[]},Xe=>Xe.openMenu?m.createElement("button",{className:(0,a.cx)(Je,H(Be,ie,Xe.targetClassName)),onClick:Xe.openMenu},St):m.createElement("div",{className:H(Be,ie,Xe.targetClassName)},St)),Dt&&m.createElement(K,{...ye,previewMode:"text",showFilters:ut}))};function V(ye,Pe,be,Be=!1){const ke=ye.theme.isDark?1:-.7;let ot,ft;if(Pe.type===r.h2.ColorText)ot=be.color;else if(Pe.type===r.h2.ColorBackground){const gt=Pe.mode??r.v7.Gradient;if(gt===r.v7.Basic)ot=(0,M.bM)(be.color,ye.theme.isDark),ft=(0,C.Z)(be.color).toRgbString();else if(gt===r.v7.Gradient){const St=(0,C.Z)(be.color).darken(10*ke).spin(5);ot=(0,M.bM)(be.color,ye.theme.isDark),ft=`linear-gradient(120deg, ${St.toRgbString()}, ${be.color})`}}return ot!==void 0||ft!==void 0?ye.buildCellContainerStyle(ot,ft,!Be):Be?ye.cellContainerNoOverflow:ye.cellContainer}function H(ye,Pe,be){return Pe.type===r.h2.Auto?(0,a.cx)(ye.cellLink,be):(0,a.cx)(ye.cellLinkForColoredCell,be)}var j=e(89361),A=e(56257),_=e(69377);function k(ye){const{cell:Pe,tableStyles:be,cellProps:Be}=ye;let ke="";return Pe.value instanceof _.Z?ke=new A.Z().writeGeometry(Pe.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):Pe.value!=null&&(ke=`${Pe.value}`),m.createElement("div",{...Be,className:be.cellContainer},m.createElement("div",{className:be.cellText,style:{fontFamily:"monospace"}},ke))}const Q=ye=>{const{field:Pe,cell:be,tableStyles:Be,row:ke,cellProps:ot}=ye,ft=Pe.display(be.value),gt=Boolean((0,b.i)(Pe,ke)?.length),St=(0,D.wW)(x._7);return m.createElement("div",{...ot,className:Be.cellContainer},!gt&&m.createElement("img",{src:ft.text,className:Be.imageCell,alt:""}),gt&&m.createElement(E.V,{style:{height:"100%"},links:()=>(0,b.i)(Pe,ke)||[]},ut=>{const Dt=m.createElement("img",{src:ft.text,className:Be.imageCell,alt:""});return ut.openMenu?m.createElement(x.zx,{className:(0,a.cx)(St),onClick:ut.openMenu},Dt):Dt}))};function re(ye){const{cell:Pe,tableStyles:be,cellProps:Be,field:ke,row:ot}=ye,ft=Boolean(ke.config.custom?.inspect),gt=a.css`
    cursor: pointer;
    font-family: monospace;
  `;let St=Pe.value,ut=St;if((0,t.isString)(St))try{St=JSON.parse(St)}catch{}else ut=JSON.stringify(St,null," ");const Dt=Boolean((0,b.i)(ke,ot)?.length),ie=(0,D.wW)(x._7);return m.createElement("div",{...Be,className:ft?be.cellContainerNoOverflow:be.cellContainer},m.createElement("div",{className:(0,a.cx)(be.cellText,gt)},!Dt&&m.createElement("div",{className:be.cellText},ut),Dt&&m.createElement(E.V,{links:()=>(0,b.i)(ke,ot)||[]},De=>De.openMenu?m.createElement(x.zx,{className:(0,a.cx)(ie),onClick:De.openMenu},ut):m.createElement(m.Fragment,null,ut))),ft&&m.createElement(K,{...ye,previewMode:"code"}))}var Z=e(39904);function oe({row:ye,tableStyles:Pe}){return m.createElement("div",{className:Pe.expanderCell,...ye.getToggleRowExpandedProps()},m.createElement(Z.J,{"aria-label":ye.isExpanded?"Collapse row":"Expand row",name:ye.isExpanded?"angle-down":"angle-right",size:"xl"}))}var G=e(24115);const le=50;function fe(ye){if(!ye)return"flex-start";if(ye.config.custom)switch(ye.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return ye.type===i.fS.number?"flex-end":"flex-start"}function ae(ye,Pe,be,Be,ke,ot){const ft=[];let gt=0;Be&&(ft.push({Header:()=>null,id:"expander",Cell:oe,width:le,minWidth:le,filter:(ut,Dt,ie)=>[],justifyContent:"left",field:ye.fields[0],sortType:"basic"}),Pe-=le);for(const[ut,Dt]of ye.fields.entries()){const ie=Dt.config.custom||{};if(ie.hidden)continue;ie.width?Pe-=ie.width:gt++;const De=Je=>{switch(Je){case i.fS.number:return"number";case i.fS.time:return"basic";default:return"alphanumeric-insensitive"}},Ne=de(ie.cellOptions?.type,Dt);ft.push({Cell:Ne,id:ut.toString(),field:Dt,Header:(0,s.CZ)(Dt,ye),accessor:(Je,Xe)=>Dt.values[Xe],sortType:De(Dt.type),width:ie.width,minWidth:ie.minWidth??be,filter:(0,n.Z)(ee(Dt)),justifyContent:fe(Dt),Footer:(0,j.c)(ut,ke,ot)})}let St=Pe/gt;for(let ut=gt;ut>0;ut--)for(const Dt of ft)!Dt.width&&Dt.minWidth>St&&(Dt.width=Dt.minWidth,Pe-=Dt.width,gt-=1,St=Pe/gt);for(const ut of ft)ut.width||(ut.width=St),ut.minWidth=50;return ft}function de(ye,Pe){switch(ye){case r.h2.ColorText:case r.h2.ColorBackground:return L;case r.h2.Image:return Q;case r.h2.Gauge:return h;case r.h2.Sparkline:return G.A;case r.h2.JSONView:return re}if(Pe.type===i.fS.geo)return k;if(Pe.type===i.fS.frame){const be=Pe.values[0];return(0,l.aY)(be)&&(0,f.pP)(be)?G.A:re}return Pe.type===i.fS.other?re:L}function ee(ye){return function(Pe,be,Be){return Pe.length===0||!Be||!ye?Pe:Pe.filter(ke=>{if(!ke.values.hasOwnProperty(be))return!1;const ot=q(ke,ye);return Be.find(ft=>ft.value===ot)!==void 0})}}function me(ye,Pe){if(!Pe||ye.length===0)return{};const be={};for(let Be=0;Be<ye.length;Be++){const ke=q(ye[Be],Pe);be[ke||"(Blanks)"]=ke}return be}function q(ye,Pe){if(!Pe||!ye)return"";const be=Pe.values[ye.index],Be=Pe.display?Pe.display(be):be;return Pe.display?(0,u.zc)(Be):Be}function ne(ye){return Object.keys(ye).reduce((Pe,be)=>Pe.concat({value:ye[be],label:be}),[]).sort(se)}function se(ye,Pe){return ye.label===void 0&&Pe.label===void 0?0:ye.label===void 0&&Pe.label!==void 0?-1:ye.label!==void 0&&Pe.label===void 0?1:ye.label<Pe.label?-1:ye.label>Pe.label?1:0}function he(ye,Pe){return Pe?ye.filter(be=>Pe.some(Be=>Be.value===be.value)):[]}function ue(ye,Pe,be){return String(ye.values[be]).localeCompare(String(Pe.values[be]),void 0,{sensitivity:"base"})}function Te(ye,Pe,be){const Be=Ve(ye.values[be]),ke=Ve(Pe.values[be]);return Be===ke?0:Be>ke?1:-1}function Ve(ye){return ye==null||ye===""||isNaN(ye)?Number.NEGATIVE_INFINITY:typeof ye=="number"?ye:Number(ye)}function ct(ye,Pe,be,Be){return Re(ye),ye.map((ke,ot)=>{if(ke?.field?.type!==i.fS.number)return ot===0&&be.reducer&&be.reducer.length>0?o.TB.get(be.reducer[0]).name:void 0;let ft=(0,t.clone)(ke.field);return ft.values=Pe[ke.id],ft.state=void 0,ke.field=ft,be.fields&&be.fields.length>0?be.fields.find(St=>St===ke?.field?.name)?Ie(ke.field,be.reducer,Be):void 0:Ie(ke.field,be.reducer||[],Be)})}function Ie(ye,Pe,be){const Be=ye.display??(0,d.U_)({field:ye,theme:be}),ke=Pe[0],ot=(0,o.Kx)({field:ye,reducers:Pe})[ke];return(0,u.zc)(Be(ot))}function Ke(ye){const Pe=[];for(const be in ye)for(const[Be,ke]of Object.entries(ye[be].values))Pe[Be]===void 0&&(Pe[Be]=[]),Pe[Be].push(ke);return Pe}const Ge={type:r.h2.Auto};function at(ye){return ye.config.custom?.displayMode?dt(ye.config.custom?.displayMode):ye.config.custom?.cellOptions?ye.config.custom.cellOptions:Ge}function dt(ye){switch(ye){case"basic":case"gradient-gauge":case"lcd-gauge":let Pe=r.QH.Basic;return ye==="gradient-gauge"?Pe=r.QH.Gradient:ye==="lcd-gauge"&&(Pe=r.QH.Lcd),{type:r.h2.Gauge,mode:Pe};case"color-background":case"color-background-solid":let be=r.v7.Basic;return ye==="color-background"&&(be=r.v7.Gradient),{type:r.h2.ColorBackground,mode:be};default:return{type:ye}}}function Re(ye){const Pe=ye.findIndex((be,Be)=>be?.id!==String(Be));Pe!==-1&&(ye.splice(Pe,0,{id:String(Pe)}),Re(ye))}},91363:(Y,T,e)=>{"use strict";e.d(T,{w:()=>m});var t=e(9892),n=e(82897),i=e.n(n),s=e(66111),l=e(76015),f=e(72648),u=e(7804),o=e(39904),d=e(97379);class r extends s.PureComponent{constructor(g){super(g),this.readCSV=(0,n.debounce)(()=>{const{config:v}=this.props,{text:h}=this.state;this.setState({data:(0,l.uP)(h,{config:v})})},150),this.onTextChange=v=>{this.setState({text:v.target.value})};const{text:y,config:E}=g;this.state={text:y,data:(0,l.uP)(y,{config:E})}}componentDidUpdate(g,y){const{text:E}=this.state;(E!==y.text||this.props.config!==g.config)&&this.readCSV(),this.props.text!==g.text&&this.props.text!==E&&this.setState({text:this.props.text}),this.state.data!==y.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:g,height:y,theme:E}=this.props,{data:v}=this.state,h=c(E);return s.createElement("div",{className:h.tableInputCsv},s.createElement(d.K,{style:{width:g,height:y},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:h.textarea}),v&&s.createElement("footer",{className:h.footer},v.map((P,a)=>s.createElement("span",{key:a},"Rows:",P.length,", Columns:",P.fields.length," \xA0",s.createElement(o.J,{name:"check-circle"})))))}}const m=(0,f.HE)(r);m.displayName="TableInputCSV";const c=(0,u.B)(p=>({tableInputCsv:t.css`
      position: relative;
    `,textarea:t.css`
      height: 100%;
      width: 100%;
    `,footer:t.css`
      position: absolute;
      bottom: 15px;
      right: 15px;
      border: 1px solid #222;
      background: ${p.colors.success.main};
      padding: 1px ${p.spacing(.5)};
      font-size: 80%;
    `}))},51275:(Y,T,e)=>{"use strict";e.d(T,{A:()=>u});var t=e(9892),n=e(66111),i=e(2703),s=e(7804),l=e(72648);const f=(0,s.B)(o=>({counter:t.css`
      label: counter;
      margin-left: ${o.spacing(1)};
      border-radius: ${o.spacing(3)};
      background-color: ${o.colors.action.hover};
      padding: ${o.spacing(.25,1)};
      color: ${o.colors.text.secondary};
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
    `})),u=({value:o})=>{const d=(0,l.wW)(f);return n.createElement("span",{className:d.counter},(0,i.SP)(o,0).text)}},79841:(Y,T,e)=>{"use strict";e.d(T,{O:()=>o});var t=e(9892),n=e(66111),i=e(68183),s=e(72648),l=e(85419),f=e(39904),u=e(51275);const o=n.forwardRef(({label:r,active:m,icon:c,onChangeTab:p,counter:g,suffix:y,className:E,href:v,...h},P)=>{const a=(0,s.wW)(d),C=()=>n.createElement(n.Fragment,null,c&&n.createElement(f.J,{name:c}),r,typeof g=="number"&&n.createElement(u.A,{value:g}),y&&n.createElement(y,{className:a.suffix})),D=(0,t.cx)(a.link,m?a.activeStyle:a.notActive);return n.createElement("div",{className:a.item},n.createElement("a",{href:v||"#",className:D,...h,onClick:p,"aria-label":h["aria-label"]||i.wl.components.Tab.title(r),role:"tab","aria-selected":m,ref:P},C()))});o.displayName="Tab";const d=r=>({item:t.css`
      list-style: none;
      position: relative;
      display: flex;
      white-space: nowrap;
    `,link:t.css`
      color: ${r.colors.text.secondary};
      padding: ${r.spacing(1.5,2,1)};
      display: block;
      height: 100%;

      svg {
        margin-right: ${r.spacing(1)};
      }

      &:focus-visible {
        ${(0,l.getFocusStyles)(r)}
      }

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 4px;
        border-radius: ${r.shape.radius.default};
        bottom: 0px;
      }
    `,notActive:t.css`
      a:hover,
      &:hover,
      &:focus {
        color: ${r.colors.text.primary};

        &::before {
          background-color: ${r.colors.action.hover};
        }
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${r.colors.text.primary};
      overflow: hidden;

      a {
        color: ${r.colors.text.primary};
      }

      &::before {
        background-image: ${r.colors.gradients.brandHorizontal};
      }
    `,suffix:t.css`
      margin-left: ${r.spacing(1)};
    `})},94893:(Y,T,e)=>{"use strict";e.d(T,{I:()=>f});var t=e(9892),n=e(66111),i=e(7804),s=e(72648);const l=(0,i.B)(u=>({tabContent:t.css`
      background: ${u.colors.background.primary};
    `})),f=({children:u,className:o,...d})=>{const r=(0,s.l4)(),m=l(r);return n.createElement("div",{...d,className:(0,t.cx)(m.tabContent,o)},u)}},72142:(Y,T,e)=>{"use strict";e.d(T,{J:()=>s});var t=e(9892),n=e(66111),i=e(72648);const s=n.forwardRef(({children:f,className:u,hideBorder:o=!1},d)=>{const r=(0,i.wW)(l);return n.createElement("div",{className:(0,t.cx)(r.tabsWrapper,o&&r.noBorder,u),ref:d},n.createElement("div",{className:r.tabs,role:"tablist"},f))}),l=f=>({tabsWrapper:t.css`
    border-bottom: 1px solid ${f.colors.border.weak};
    overflow-x: auto;
  `,noBorder:t.css`
    border-bottom: 0;
  `,tabs:t.css`
    position: relative;
    display: flex;
    height: ${f.components.menuTabs.height}px;
  `});s.displayName="TabsBar"},13026:(Y,T,e)=>{"use strict";e.d(T,{L:()=>u});var t=e(9892),n=e(66111),i=e(68183),s=e(72648),l=e(39904),f=e(51275);const u=n.forwardRef(({label:d,active:r,icon:m,counter:c,className:p,suffix:g,onChangeTab:y,href:E,...v},h)=>{const P=(0,s.wW)(o),a=()=>n.createElement(n.Fragment,null,m&&n.createElement(l.J,{name:m}),d,typeof c=="number"&&n.createElement(f.A,{value:c}),g&&n.createElement(g,{className:P.suffix})),C=(0,t.cx)(P.link,r&&P.activeStyle);return n.createElement("a",{href:E,className:C,...v,onClick:y,"aria-label":v["aria-label"]||i.wl.components.Tab.title(d),role:"tab","aria-selected":r,ref:h},a())});u.displayName="Tab";const o=d=>({link:t.css`
      padding: 6px 12px;
      display: block;
      height: 100%;
      cursor: pointer;
      position: relative;

      color: ${d.colors.text.primary};

      svg {
        margin-right: ${d.spacing(1)};
      }

      &:hover,
      &:focus {
        text-decoration: underline;
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${d.colors.text.maxContrast};
      overflow: hidden;

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: ${d.shape.radius.default};
        background-image: linear-gradient(0deg, #f05a28 30%, #fbca0a 99%);
      }
    `,suffix:t.css`
      margin-left: ${d.spacing(1)};
    `})},34719:(Y,T,e)=>{"use strict";e.d(T,{V:()=>f});var t=e(9892),n=e(66111),i=e(72648),s=e(3385),l=e(39904);const f=(0,n.forwardRef)(({name:o,onClick:d,icon:r,className:m,colorIndex:c,...p},g)=>{const y=(0,i.l4)(),E=u(y,o,c),v=P=>{P.preventDefault(),P.stopPropagation(),d?.(o,P)},h=(0,t.cx)(E.wrapper,m,{[E.hover]:d!==void 0});return d?n.createElement("button",{...p,className:h,onClick:v,ref:g},r&&n.createElement(l.J,{name:r}),o):n.createElement("span",{...p,className:h,ref:g},r&&n.createElement(l.J,{name:r}),o)});f.displayName="Tag";const u=(o,d,r)=>{let m;return r===void 0?m=(0,s.Bx)(d):m=(0,s.vm)(r),{wrapper:t.css`
      appearance: none;
      border-style: none;
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
      line-height: ${o.typography.bodySmall.lineHeight};
      vertical-align: baseline;
      background-color: ${m.color};
      color: ${o.v1.palette.gray98};
      white-space: nowrap;
      text-shadow: none;
      padding: 3px 6px;
      border-radius: ${o.shape.radius.default};
    `,hover:t.css`
      &:hover {
        opacity: 0.85;
        cursor: pointer;
      }
    `}}},34807:(Y,T,e)=>{"use strict";e.d(T,{P:()=>l});var t=e(9892),n=e(66111),i=e(72648),s=e(34719);const l=(0,n.memo)((0,n.forwardRef)(({displayMax:u,tags:o,icon:d,onClick:r,className:m,getAriaLabel:c},p)=>{const g=(0,i.l4)(),y=f(g,Boolean(u&&u>0)),E=o.length,v=u?o.slice(0,u):o;return n.createElement("ul",{className:(0,t.cx)(y.wrapper,m),"aria-label":"Tags",ref:p},v.map((h,P)=>n.createElement("li",{className:y.li,key:h},n.createElement(s.V,{name:h,icon:d,onClick:r,"aria-label":c?.(h,P),"data-tag-id":P}))),u&&u>0&&E-u>0&&n.createElement("span",{className:y.moreTagsLabel},"+ ",E-u))}));l.displayName="TagList";const f=(u,o)=>({wrapper:t.css`
      position: relative;
      align-items: ${o?"center":"unset"};
      display: flex;
      flex: 1 1 auto;
      flex-wrap: wrap;
      flex-shrink: ${o?0:1};
      justify-content: flex-end;
      gap: 6px;
    `,moreTagsLabel:t.css`
      color: ${u.colors.text.secondary};
      font-size: ${u.typography.size.sm};
    `,li:(0,t.css)({listStyle:"none"})})},43339:(Y,T,e)=>{"use strict";e.d(T,{B:()=>r});var t=e(9892),n=e(66111),i=e(72648),s=e(31403),l=e(46967),f=e(3385),u=e(8180);const o=({name:c,disabled:p,onRemove:g})=>{const{color:y,borderColor:E}=(0,n.useMemo)(()=>(0,f.Bx)(c),[c]),v=(0,i.wW)(d);return n.createElement("li",{className:v.itemStyle,style:{backgroundColor:y,borderColor:E}},n.createElement("span",{className:v.nameStyle},c),n.createElement(u.h,{name:"times",size:"lg",disabled:p,ariaLabel:`Remove "${c}" tag`,onClick:()=>g(c),type:"button",className:v.buttonStyles}))},d=c=>{const p=c.spacing.gridSize*3;return{itemStyle:(0,t.css)({display:"flex",gap:"3px",alignItems:"center",height:`${p}px`,lineHeight:`${p-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:c.shape.radius.default,padding:`0 ${c.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:c.typography.size.sm}),nameStyle:(0,t.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,t.css)({margin:0,"&:hover::before":{display:"none"}})}},r=({placeholder:c="New tag (enter key to add)",tags:p=[],onChange:g,width:y,className:E,disabled:v,addOnBlur:h,invalid:P,id:a})=>{const[C,D]=(0,n.useState)(""),b=(0,i.wW)(m),M=(0,i.l4)(),x=(0,n.useCallback)(I=>{D(I.target.value)},[]),R=I=>{g(p.filter(F=>F!==I))},S=I=>{I?.preventDefault(),p.includes(C)||g(p.concat(C)),D("")},O=()=>{h&&C&&S()},U=I=>{I.key==="Enter"&&C!==""&&S(I)};return n.createElement("div",{className:(0,t.cx)(b.wrapper,E,y?(0,t.css)({width:M.spacing(y)}):"")},n.createElement(l.I,{id:a,disabled:v,placeholder:c,onChange:x,value:C,onKeyDown:U,onBlur:O,invalid:P,suffix:n.createElement(s.zx,{fill:"text",className:b.addButtonStyle,onClick:S,size:"md",disabled:C.length<=0},"Add")}),p?.length>0&&n.createElement("ul",{className:b.tags},p.map(I=>n.createElement(o,{key:I,name:I,onRemove:R,disabled:v}))))},m=c=>({wrapper:t.css`
    min-height: ${c.spacing(4)};
    display: flex;
    flex-direction: column;
    gap: ${c.spacing(1)};
    flex-wrap: wrap;
  `,tags:t.css`
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
    gap: ${c.spacing(.5)};
  `,addButtonStyle:t.css`
    margin: 0 -${c.spacing(1)};
  `})},17937:(Y,T,e)=>{"use strict";e.d(T,{x:()=>s});var t=e(9892),n=e(66111),i=e(72648);const s=n.forwardRef(({as:o,variant:d,weight:r,color:m,truncate:c,textAlignment:p,children:g},y)=>{const E=(0,i.wW)((0,n.useCallback)(v=>l(v,d,m,r,c,p),[m,p,c,r,d]));return(0,n.createElement)(o,{className:E,ref:y},g)});s.displayName="Text";const l=(o,d,r,m,c,p)=>(0,t.css)([d&&{...o.typography[d]},{margin:0,padding:0},r&&{color:u(r,o)},m&&{fontWeight:f(m,o)},c&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},p&&{textAlign:p}]),f=(o,d)=>{switch(o){case"bold":return d.typography.fontWeightBold;case"medium":return d.typography.fontWeightMedium;case"light":return d.typography.fontWeightLight;case"regular":case void 0:return d.typography.fontWeightRegular}},u=(o,d)=>{switch(o){case"error":return d.colors.error.text;case"success":return d.colors.success.text;case"info":return d.colors.info.text;case"warning":return d.colors.warning.text;default:return o?d.colors.text[o]:void 0}}},98699:(Y,T,e)=>{"use strict";e.d(T,{Dr:()=>r,H3:()=>l});var t=e(66111),n=e(17937);const i=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h1",...p,variant:p.variant||"h1",ref:g}));i.displayName="H1";const s=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h2",...p,variant:p.variant||"h2",ref:g}));s.displayName="H2";const l=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h3",...p,variant:p.variant||"h3",ref:g}));l.displayName="H3";const f=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h4",...p,variant:p.variant||"h4",ref:g}));f.displayName="H4";const u=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h5",...p,variant:p.variant||"h5",ref:g}));u.displayName="H5";const o=t.forwardRef((p,g)=>t.createElement(n.x,{as:"h6",...p,variant:p.variant||"h6",ref:g}));o.displayName="H6";const d=t.forwardRef((p,g)=>t.createElement(n.x,{as:"p",...p,variant:p.variant||"body",ref:g}));d.displayName="P";const r=t.forwardRef((p,g)=>t.createElement(n.x,{as:"span",...p,variant:p.variant||"bodySmall",ref:g}));r.displayName="Span";const m=t.forwardRef((p,g)=>t.createElement(n.x,{as:"legend",...p,variant:p.variant||"bodySmall",ref:g}));m.displayName="Legend";const c=t.forwardRef((p,g)=>t.createElement(n.x,{as:"span",...p,ref:g}));c.displayName="TextModifier"},97379:(Y,T,e)=>{"use strict";e.d(T,{K:()=>f});var t=e(9892),n=e(66111),i=e(72648),s=e(7804),l=e(73267);const f=n.forwardRef(({invalid:o,className:d,...r},m)=>{const c=(0,i.l4)(),p=u(c,o);return n.createElement("textarea",{...r,className:(0,t.cx)(p.textarea,d),ref:m})}),u=(0,s.B)((o,d=!1)=>({textarea:(0,t.cx)((0,l.RK)(o),(0,l.GL)(o),t.css`
        display: block;
        border-radius: ${o.shape.borderRadius()};
        padding: ${o.spacing.gridSize/4}px ${o.spacing.gridSize}px;
        width: 100%;
        border-color: ${d?o.colors.error.border:o.components.input.borderColor};
      `)}));f.displayName="TextArea"},68948:(Y,T,e)=>{"use strict";e.d(T,{p:()=>U});var t=e(66111),n=e(72648),i=e(72269),s=e(60325),l=e(68416),f=e(82897),u=e(75974),o=e(99098),d=e(2703),r=e(6194),m=e(72990),c=e(53768),p=e(30471),g=e(56632),y=e(23588),E=e(40538),v=e(86979),h=e(13347),P=e(52240),a=e(2445);const C=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),D=Array(53);for(let I=0;I<D.length;I++)D[I]=2**I;const b=(I,F=1)=>I==null?"-":I.toFixed(F),M={drawStyle:E.l8.Line,showPoints:E.Jp.Auto,axisPlacement:E.LB.Auto},x=({frame:I,theme:F,timeZones:w,getTimeRange:K,eventBus:L,sync:V,allFrames:H,renderers:j,tweakScale:A=k=>k,tweakAxis:_=k=>k})=>{const k=new h.U(w[0]);let Q;k.setPrepData(ne=>(Q=ne[0],(0,a.Bj)(ne[0],k.getStackingGroups())));const re=I.fields[0];if(!re)return k;const Z="x";let oe="_x",G="";const le=re.config.custom?.axisPlacement!==E.LB.Hidden?E.LB.Bottom:E.LB.Hidden,fe=re.config.custom?.axisPlacement!==E.LB.Hidden;if(re.type===o.fS.time){oe="time",k.addScale({scaleKey:Z,orientation:E.wN.Horizontal,direction:E.bQ.Right,isTime:!0,range:()=>{const se=K();return[se.from.valueOf(),se.to.valueOf()]}});const ne=w.length>1?(se,he)=>he.map((ue,Te)=>Te<2?null:ue):void 0;for(let se=0;se<w.length;se++){const he=w[se];k.addAxis({scaleKey:Z,isTime:!0,placement:le,show:fe,label:re.config.custom?.axisLabel,timeZone:he,theme:F,grid:{show:se===0&&re.config.custom?.axisGridShow},filter:ne})}w.length>1&&k.addHook("drawAxes",se=>{se.ctx.save(),se.ctx.fillStyle=F.colors.text.primary,se.ctx.textAlign="left",se.ctx.textBaseline="bottom";let he=0;se.axes.forEach(ue=>{if(ue.side===2){let Te=ue._pos+ue._size;se.ctx.fillText(w[he],se.bbox.left,Te*u.Z.pxRatio),he++}}),se.ctx.restore()})}else re.config.unit&&(oe=re.config.unit),k.addScale({scaleKey:Z,orientation:E.wN.Horizontal,direction:E.bQ.Right,range:(ne,se,he)=>[re.config.min??se,re.config.max??he]}),k.addAxis({scaleKey:Z,placement:le,show:fe,label:re.config.custom?.axisLabel,theme:F,grid:{show:re.config.custom?.axisGridShow},formatValue:(ne,se)=>(0,d.zc)(re.display(ne,se))});let ae=j?.flatMap(ne=>Object.values(ne.fieldMap).filter(se=>ne.indicesOnly.indexOf(se)===-1))??[],de;for(let ne=1;ne<I.fields.length;ne++){const se=I.fields[ne],he={...se.config,custom:{...M,...se.config.custom}},ue=he.custom;if(se===re||se.type!==o.fS.number)continue;let Te=se.display??b;se.config.custom?.stacking?.mode===E.o0.Percent&&(Te=(0,r.U_)({field:{...se,config:{...se.config,unit:"percentunit"}},theme:F}));const Ve=(0,v.z)(he),ct=(0,m.fD)(se),Ke=(0,m.YO)(se,F).color;if(k.addScale(A({scaleKey:Ve,orientation:E.wN.Vertical,direction:E.bQ.Up,distribution:ue.scaleDistribution?.type,log:ue.scaleDistribution?.log,linearThreshold:ue.scaleDistribution?.linearThreshold,min:se.config.min,max:se.config.max,softMin:ue.axisSoftMin,softMax:ue.axisSoftMax,centeredZero:ue.axisCenteredZero,range:ue.stacking?.mode===E.o0.Percent?(be,Be,ke)=>(Be=Be<0?-1:0,ke=ke>0?1:0,[Be,ke]):void 0,decimals:se.config.decimals},se)),G||(G=Ve),ue.axisPlacement!==E.LB.Hidden){let be;ue.axisColorMode===E.yK.Series&&(ct.isByValue&&se.config.custom?.gradientMode===E.FI.Scheme&&ct.id===c.S.Thresholds?be=(0,P.P2)(1,F,ct,se.config.thresholds):be=Ke);let Be={};be&&(Be={border:{show:!0,width:1,stroke:be},ticks:{stroke:be},color:ue.axisColorMode===E.yK.Series?be:void 0});let ke;C.has(he.unit)&&(ke=D),k.addAxis(_({scaleKey:Ve,label:ue.axisLabel,size:ue.axisWidth,placement:ue.axisPlacement??E.LB.Auto,formatValue:(ot,ft)=>(0,d.zc)(Te(ot,ft)),theme:F,grid:{show:ue.axisGridShow},decimals:se.config.decimals,distr:ue.scaleDistribution?.type,incrs:ke,...Be},se))}const Ge=ue.drawStyle===E.l8.Points?E.Jp.Always:ue.showPoints;let at=()=>null;ue.spanNulls!==!0&&(at=(be,Be,ke,ot)=>{let ft=[],gt=be.series[Be];if(!ke&&ot&&ot.length){const[St,ut]=gt.idxs,Dt=be.data[0],ie=be.data[Be],De=Math.round(be.valToPos(Dt[St],"x",!0)),Ne=Math.round(be.valToPos(Dt[ut],"x",!0));ot[0][0]===De&&ft.push(St);for(let Je=0;Je<ot.length;Je++){let Xe=ot[Je],Le=ot[Je+1];if(Le&&Xe[1]===Le[0]){let Ue=be.posToIdx(Xe[1],!0);if(ie[Ue]==null)for(let ve=1;ve<100;ve++){if(ie[Ue+ve]!=null){Ue+=ve;break}if(ie[Ue-ve]!=null){Ue-=ve;break}}ft.push(Ue)}}ot[ot.length-1][1]===Ne&&ft.push(ut)}return ft.length?ft:null});let{fillOpacity:dt}=ue,Re=null,ye=null;if(se.state?.origin){de||(de=R(I,H));const be=H[se.state.origin.frameIndex],Be=be?.fields[se.state.origin.fieldIndex],ke=(0,p.CZ)(Be??se,be,H);if(ae.indexOf(ke)>=0)Re=()=>null,ye=()=>{};else if(ue.transform===E.pR.Constant){const ot=u.Z.paths.linear();Re=(ft,gt)=>{const St=ft._data,ut=K();let Dt=[ut.from.valueOf(),ut.to.valueOf()],ie=St[gt].find(Je=>Je!=null),De=[ie,ie],Ne=St.slice();return Ne[0]=Dt,Ne[gt]=De,ot({...ft,_data:Ne},gt,0,1)}}if(ue.fillBelowTo){const ot=I.fields.find(ut=>ue.fillBelowTo===ut.name||ue.fillBelowTo===ut.config?.displayNameFromDS||ue.fillBelowTo===(0,p.CZ)(ut,I,H)),ft=ot?(0,p.CZ)(ot,I,H):ue.fillBelowTo,gt=de.get(ke),St=de.get(ft);(0,f.isNumber)(St)&&(0,f.isNumber)(gt)?(k.addBand({series:[gt,St],fill:void 0}),dt||(dt=35)):dt=0}}let Pe;ct.id===c.S.Thresholds&&(Pe=be=>(0,m.YO)(Q.fields[be],F).color),k.addSeries({pathBuilder:Re,pointsBuilder:ye,scaleKey:Ve,showPoints:Ge,pointsFilter:at,colorMode:ct,fillOpacity:dt,theme:F,dynamicSeriesColor:Pe,drawStyle:ue.drawStyle,lineColor:ue.lineColor??Ke,lineWidth:ue.lineWidth,lineInterpolation:ue.lineInterpolation,lineStyle:ue.lineStyle,barAlignment:ue.barAlignment,barWidthFactor:ue.barWidthFactor,barMaxWidth:ue.barMaxWidth,pointSize:ue.pointSize,spanNulls:ue.spanNulls||!1,show:!ue.hideFrom?.viz,gradientMode:ue.gradientMode,thresholds:he.thresholds,hardMin:se.config.min,hardMax:se.config.max,softMin:ue.axisSoftMin,softMax:ue.axisSoftMax,dataFrameFieldIndex:se.state?.origin}),ue.thresholdsStyle&&he.thresholds&&(ue.thresholdsStyle.mode??E.i3.Off)!==E.i3.Off&&k.addThresholds({config:ue.thresholdsStyle,thresholds:he.thresholds,scaleKey:Ve,theme:F,hardMin:se.config.min,hardMax:se.config.max,softMin:ue.axisSoftMin,softMax:ue.axisSoftMax})}let ee=(0,a.i7)(I);k.setStackingGroups(ee),j?.forEach(ne=>{de||(de=R(I,H));let se={};for(let he in ne.fieldMap){let ue=ne.fieldMap[he];se[he]=de.get(ue)}ne.init(k,se)}),k.scaleKeys=[Z,G];const me=15;let q={dataIdx:(ne,se,he,ue)=>{let Te=ne.data[se];if(Te[he]==null){let Ve=null,ct=null,Ie;for(Ie=he;Ve==null&&Ie-- >0;)Te[Ie]!=null&&(Ve=Ie);for(Ie=he;ct==null&&Ie++<Te.length;)Te[Ie]!=null&&(ct=Ie);let Ke=ne.data[0],Ge=ne.valToPos(ue,"x"),at=ct==null?1/0:ne.valToPos(Ke[ct],"x"),dt=Ve==null?-1/0:ne.valToPos(Ke[Ve],"x"),Re=Ge-dt,ye=at-Ge;Re<=ye?Re<=me&&(he=Ve):ye<=me&&(he=ct)}return he}};if(V&&V()!==g.m.Off){const ne={point:{[Z]:null,[G]:null},data:I},se=new y.es(ne);q.sync={key:"__global_",filters:{pub:(he,ue,Te,Ve,ct,Ie,Ke)=>V&&V()===g.m.Off?!1:(ne.rowIndex=Ke,Te<0&&Ve<0?(ne.point[oe]=null,ne.point[G]=null,L.publish(new y.xH)):(ne.point[oe]=ue.posToVal(Te,Z),ne.point[G]=ue.posToVal(Ve,G),ne.point.panelRelY=Ve>0?Ve/Ie:1,L.publish(se),se.payload.down=void 0),!0)},scales:[Z,G]}}return k.setSync(),k.setCursor(q),k};function R(I,F){const w=new Map;return I.fields.forEach((K,L)=>{const V=K.state?.origin;if(V){const H=F[V.frameIndex]?.fields[V.fieldIndex];H&&w.set((0,p.CZ)(H,F[V.frameIndex],F),L)}}),w}const S=["legend","options","theme"];class O extends t.Component{constructor(){super(...arguments),this.panelContext={},this.prepConfig=(F,w,K)=>{const{eventBus:L,sync:V}=this.context,{theme:H,timeZone:j,renderers:A,tweakAxis:_,tweakScale:k}=this.props;return x({frame:F,theme:H,timeZones:Array.isArray(j)?j:[j],getTimeRange:K,eventBus:L,sync:V,allFrames:w,renderers:A,tweakScale:k,tweakAxis:_})},this.renderLegend=F=>{const{legend:w,frames:K}=this.props;return!F||w&&!w.showLegend||!(0,l.o)(F,K)?null:t.createElement(l.l,{data:K,config:F,...w})}}render(){return t.createElement(i.d,{...this.props,prepConfig:this.prepConfig,propsToDiff:S,renderLegend:this.renderLegend})}}O.contextType=s.bb;const U=(0,n.HE)(O);U.displayName="TimeSeries"},50819:(Y,T,e)=>{"use strict";e.d(T,{P:()=>u});var t=e(66111),n=e(27480),i=e(72648),s=e(21133),l=e(8180),f=e(85511);const u=t.memo(({children:d,theme:r="info",placement:m="auto",content:c,title:p,closeButton:g=!0,onClose:y,footer:E})=>{const h=(0,i.wW)(o)[r],P=(0,t.useRef)(null),[a,C]=t.useState(!1),D=(0,t.useCallback)(()=>{C(!1),y?.()},[y]);(0,t.useEffect)(()=>{if(a){const U=I=>{I.key==="Escape"&&D()};return document.addEventListener("keydown",U),()=>{document.removeEventListener("keydown",U)}}},[a,D]);const{getArrowProps:b,getTooltipProps:M,setTooltipRef:x,setTriggerRef:R,visible:S,update:O}=(0,n.O)({visible:a,placement:m,interactive:!0,offset:[0,8],trigger:"click",onVisibleChange:U=>{C(U),U||y?.()}});return t.createElement(t.Fragment,null,t.cloneElement(d,{ref:R,tabIndex:0}),S&&t.createElement(f.h_,null,t.createElement("div",{"data-testid":"toggletip-content",ref:x,...M({className:h.container})},Boolean(p)&&t.createElement("div",{className:h.header},p),g&&t.createElement("div",{className:h.headerClose},t.createElement(l.h,{"aria-label":"Close Toggletip",name:"times",size:"md","data-testid":"toggletip-header-close",onClick:D})),t.createElement("div",{ref:P,...b({className:h.arrow})}),t.createElement("div",{className:h.body},(typeof c=="string"||t.isValidElement(c))&&c,typeof c=="function"&&O&&c({update:O})),Boolean(E)&&t.createElement("div",{className:h.footer},E))))});u.displayName="Toggletip";const o=d=>{const r=(0,s.k)(d,d.components.tooltip.background,d.components.tooltip.background,d.components.tooltip.text,{topBottom:3,rightLeft:3}),m=(0,s.k)(d,d.colors.error.main,d.colors.error.main,d.colors.error.contrastText,{topBottom:3,rightLeft:3});return{info:r,error:m}}},64319:(Y,T,e)=>{"use strict";e.d(T,{h:()=>r});var t=e(9892),n=e(66111),i=e(84559),s=e(68183),l=e(72648),f=e(85419),u=e(31403),o=e(39904),d=e(61860);const r=(0,n.forwardRef)(({tooltip:g,icon:y,iconSize:E,className:v,children:h,imgSrc:P,imgAlt:a,fullWidth:C,isOpen:D,narrow:b,variant:M="default",iconOnly:x,"aria-label":R,isHighlighted:S,...O},U)=>{const I=(0,l.wW)(p),F=(0,t.cx)({[I.button]:!0,[I.buttonFullWidth]:C,[I.narrow]:b},I[M],v),w=(0,t.cx)({[I.content]:!0,[I.contentWithIcon]:!!y,[I.contentWithRightIcon]:D!==void 0}),K=n.createElement("button",{ref:U,className:F,"aria-label":m(R,g),"aria-expanded":D,...O},c(y,E),P&&n.createElement("img",{className:I.img,src:P,alt:a??""}),h&&!x&&n.createElement("div",{className:w},h),D===!1&&n.createElement(o.J,{name:"angle-down"}),D===!0&&n.createElement(o.J,{name:"angle-up"}),S&&n.createElement("div",{className:I.highlight}));return g?n.createElement(d.u,{content:g,placement:"bottom"},K):K});r.displayName="ToolbarButton";function m(g,y){return g||(y?s.wl.components.PageToolbar.item(y):void 0)}function c(g,y){return g?(0,i.Mo)(g)?n.createElement(o.J,{name:g,size:`${y||"lg"}`}):g:null}const p=g=>{const y=(0,u.c9)(g,"primary","solid"),E=(0,u.c9)(g,"destructive","solid"),v=t.css`
    color: ${g.colors.text.primary};
    background: ${g.colors.secondary.main};

    &:hover {
      color: ${g.colors.text.primary};
      background: ${g.colors.secondary.shade};
      border: 1px solid ${g.colors.border.medium};
    }
  `,h=t.css`
    color: ${g.colors.text.secondary};
    background: transparent;
    border: 1px solid transparent;

    &:hover {
      color: ${g.colors.text.primary};
      background: ${g.colors.background.secondary};
    }
  `;return{button:t.css`
      label: toolbar-button;
      position: relative;
      display: flex;
      align-items: center;
      height: ${g.spacing(g.components.height.md)};
      padding: ${g.spacing(0,1)};
      border-radius: ${g.shape.borderRadius()};
      line-height: ${g.components.height.md*g.spacing.gridSize-2}px;
      font-weight: ${g.typography.fontWeightMedium};
      border: 1px solid ${g.colors.secondary.border};
      white-space: nowrap;
      transition: ${g.transitions.create(["background","box-shadow","border-color","color"],{duration:g.transitions.duration.short})};

      &:focus,
      &:focus-visible {
        ${(0,f.getFocusStyles)(g)}
        z-index: 1;
      }

      &:focus:not(:focus-visible) {
        ${(0,f.getMouseFocusStyles)(g)}
      }

      &:hover {
        box-shadow: ${g.shadows.z1};
      }

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        opacity: ${g.colors.action.disabledOpacity};
        background: ${g.colors.action.disabledBackground};
        box-shadow: none;

        &:hover {
          color: ${g.colors.text.disabled};
          background: ${g.colors.action.disabledBackground};
          box-shadow: none;
        }
      }
    `,default:h,canvas:v,active:t.css`
      color: ${g.v1.palette.orangeDark};
      border-color: ${g.v1.palette.orangeDark};
      background-color: transparent;

      &:hover {
        color: ${g.colors.text.primary};
        background: ${g.colors.emphasize(g.colors.background.canvas,.03)};
      }
    `,primary:(0,t.css)(y),destructive:(0,t.css)(E),narrow:t.css`
      padding: 0 ${g.spacing(.5)};
    `,img:t.css`
      width: 16px;
      height: 16px;
      margin-right: ${g.spacing(1)};
    `,buttonFullWidth:t.css`
      flex-grow: 1;
    `,content:t.css`
      flex-grow: 1;
    `,contentWithIcon:t.css`
      display: none;
      padding-left: ${g.spacing(1)};

      @media ${f.mediaUp(g.v1.breakpoints.md)} {
        display: block;
      }
    `,contentWithRightIcon:t.css`
      padding-right: ${g.spacing(.5)};
    `,highlight:t.css`
      background-color: ${g.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      position: absolute;
      top: -3px;
      right: -3px;
      z-index: 1;
    `}}},8125:(Y,T,e)=>{"use strict";e.d(T,{R:()=>d});var t=e(9892),n=e(29952),i=e(83962),s=e(86922),l=e(66111),f=e(72648),u=e(85511),o=e(64319);const d=(0,l.forwardRef)(({alignment:m="left",className:c,children:p,...g},y)=>{const E=l.Children.toArray(p).filter(U=>U!==null),[v,h]=(0,l.useState)(Array(E.length).fill(!0)),P=(0,l.useRef)(null),[a,C]=(0,l.useState)(!1),D=(0,l.useRef)(null),b=(0,l.createRef)(),{overlayProps:M}=(0,s.Ir)({onClose:()=>C(!1),isDismissable:!0,isOpen:a,shouldCloseOnInteractOutside:U=>{const I=(0,u.RN)();return!D.current?.contains(U)&&!I.contains(U)}},b),{dialogProps:x}=(0,n.R)({},b),R=(0,f.l4)(),S=m==="left"?v.indexOf(!1)-1:v.length,O=r(R,S,m);return(0,l.useLayoutEffect)(()=>{const U=new IntersectionObserver(I=>{I.forEach(F=>{if(F.target instanceof HTMLElement&&F.target.parentNode){const w=Array.prototype.indexOf.call(F.target.parentNode.children,F.target);h(K=>{const L=[...K];return L[w]=F.isIntersecting,L})}})},{threshold:1,root:P.current});return P.current&&Array.from(P.current.children).forEach(I=>{I instanceof HTMLElement&&I!==D.current&&U.observe(I)}),()=>U.disconnect()},[p]),l.createElement("div",{ref:P,className:(0,t.cx)(O.container,c),...g},E.map((U,I)=>l.createElement("div",{key:I,style:{order:I,visibility:v[I]?"visible":"hidden"},className:O.childWrapper},U)),v.includes(!1)&&l.createElement("div",{ref:D,className:O.overflowButton},l.createElement(o.h,{variant:a?"active":"default",tooltip:"Show more items",onClick:()=>C(!a),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),a&&l.createElement(i.MT,{contain:!0,autoFocus:!0},l.createElement("div",{className:O.overflowItems,ref:b,...M,...x},E.map((U,I)=>!v[I]&&U)))))});d.displayName="ToolbarButtonRow";const r=(m,c,p)=>({overflowButton:t.css`
    order: ${c};
  `,overflowItems:t.css`
    align-items: center;
    background-color: ${m.colors.background.primary};
    border-radius: ${m.shape.borderRadius()};
    box-shadow: ${m.shadows.z3};
    display: flex;
    flex-wrap: wrap;
    gap: ${m.spacing(1)};
    margin-top: ${m.spacing(1)};
    max-width: 80vw;
    padding: ${m.spacing(.5,1)};
    position: absolute;
    right: 0;
    top: 100%;
    width: max-content;
    z-index: ${m.zIndex.sidemenu};
  `,container:t.css`
    align-items: center;
    display: flex;
    gap: ${m.spacing(1)};
    justify-content: ${p==="left"?"flex-start":"flex-end"};
    min-width: 0;
    position: relative;
  `,childWrapper:t.css`
    align-items: center;
    display: flex;
    gap: ${m.spacing(1)};
  `})},56921:(Y,T,e)=>{"use strict";e.d(T,{J:()=>o});var t=e(66111),n=e(69733),i=e(14760),s=e(66525),l=e(85511);const f={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},u={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class o extends t.PureComponent{render(){const{content:r,show:m,placement:c,onMouseEnter:p,onMouseLeave:g,className:y,wrapperClassName:E,renderArrow:v,referenceElement:h,onKeyDown:P}=this.props;return t.createElement(n.dK,null,t.createElement(s.ZP,{in:m,timeout:100,mountOnEnter:!0,unmountOnExit:!0},a=>t.createElement(l.h_,null,t.createElement(i.r,{placement:c,referenceElement:h,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}]},({ref:C,style:D,placement:b,arrowProps:M,update:x})=>t.createElement("div",{onMouseEnter:p,onMouseLeave:g,onKeyDown:P,ref:C,style:{...D,...f,...u[a]},"data-placement":b,className:`${E}`},t.createElement("div",{className:y},typeof r=="string"&&r,t.isValidElement(r)&&t.cloneElement(r),typeof r=="function"&&r({updatePopperPosition:x}),v&&v({arrowProps:M,placement:b})))))))}}},39604:(Y,T,e)=>{"use strict";e.d(T,{D:()=>n});var t=e(66111);class n extends t.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:s,content:l,placement:f="auto"}=this.props,{show:u}=this.state;return s(this.showPopper,this.hidePopper,{show:u,placement:f,content:l})}}},61860:(Y,T,e)=>{"use strict";e.d(T,{u:()=>f});var t=e(66111),n=e(27480),i=e(72648),s=e(21133),l=e(85511);const f=t.forwardRef(({children:o,theme:d,interactive:r,show:m,placement:c,content:p},g)=>{const[y,E]=t.useState(m);(0,t.useEffect)(()=>{if(y!==!1){const R=S=>{S.key==="Escape"&&E(!1)};return document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}}else return},[y]);const{getArrowProps:v,getTooltipProps:h,setTooltipRef:P,setTriggerRef:a,visible:C,update:D}=(0,n.O)({visible:y,placement:c,interactive:r,delayHide:r?100:0,delayShow:150,offset:[0,8],trigger:["hover","focus"],onVisibleChange:E}),M=(0,i.wW)(u)[d??"info"],x=(0,t.useCallback)(R=>{a(R),typeof g=="function"?g(R):g&&(g.current=R)},[g,a]);return t.createElement(t.Fragment,null,t.cloneElement(o,{ref:x,tabIndex:0}),C&&t.createElement(l.h_,null,t.createElement("div",{ref:P,...h({className:M.container})},t.createElement("div",{...v({className:M.arrow})}),typeof p=="string"&&p,t.isValidElement(p)&&t.cloneElement(p),typeof p=="function"&&D&&p({updatePopperPosition:D}))))});f.displayName="Tooltip";const u=o=>{const d=(0,s.k)(o,o.components.tooltip.background,o.components.tooltip.background,o.components.tooltip.text,{topBottom:.5,rightLeft:1}),r=(0,s.k)(o,o.colors.error.main,o.colors.error.main,o.colors.error.contrastText,{topBottom:.5,rightLeft:1});return{info:d,["info-alt"]:d,error:r}}},69636:(Y,T,e)=>{"use strict";e.d(T,{H:()=>i});var t=e(66111);function n(s,l){const f=[];return s.forEach(u=>{f.push(u.start,u.end+1)}),f[0]!==0&&f.unshift(0),f[f.length-1]!==l&&f.push(l),f}const i=s=>{let{highlightParts:l,text:f,highlightClassName:u}=s;if(!l?.length)return null;let o=[],d=n(l,f.length),r=l[0].start===0;for(let m=1;m<d.length;m++){let c=d[m-1],p=d[m];o.push((0,t.createElement)(r?"mark":"span",{key:m-1,className:r?u:void 0},f.substring(c,p))),r=!r}return t.createElement("div",null,o)}},61227:(Y,T,e)=>{"use strict";e.d(T,{n:()=>l});var t=e(66111),n=e(2703),i=e(95093);function s(f){return`Custom unit: ${f}`}class l extends t.PureComponent{constructor(){super(...arguments),this.onChange=u=>{this.props.onChange(u.value)}}render(){const{value:u,width:o}=this.props;let d;const m=(0,n.QW)().map(c=>{const p=c.submenu.map(g=>{const y={label:g.text,value:g.value};return g.value===u&&(d=y),y});return{label:c.text,value:c.text,items:p}});return u&&!d&&(d={value:u,label:u}),t.createElement(i.v,{width:o,initialValue:d&&d.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:s,options:m,placeholder:"Choose",onSelect:this.props.onChange})}}},15670:(Y,T,e)=>{"use strict";e.d(T,{b:()=>f});var t=e(66111),n=e(68183),i=e(72648),s=e(31403),l=e(8581);function f({"aria-label":u,label:o,icon:d,options:r,onChange:m,variant:c,minWidth:p=16,size:g="sm",isFullWidth:y=!0,menuPlacement:E,fill:v,buttonCss:h}){const[P,a]=(0,t.useState)(!1),C=(0,i.l4)();return t.createElement(t.Fragment,null,!P&&t.createElement(s.zx,{size:g||"sm",className:h,icon:d||"plus",onClick:()=>a(!0),variant:c,fill:v,fullWidth:y,"aria-label":n.wl.components.ValuePicker.button(u??o)},o),P&&t.createElement("span",{style:{minWidth:C.spacing(p),flexGrow:y?1:void 0}},t.createElement(l.Ph,{placeholder:o,options:r,"aria-label":n.wl.components.ValuePicker.select(u??o),isOpen:!0,onCloseMenu:()=>a(!1),autoFocus:!0,onChange:D=>{a(!1),m(D)},menuPlacement:E})))}},729:(Y,T,e)=>{"use strict";e.d(T,{AY:()=>u});var t=e(9892),n=e(66111),i=e(27443),s=e(72648),l=e(85419),f=e(68226);const u=({width:r,height:m,legend:c,children:p})=>{const g=(0,s.l4)(),y=(0,s.wW)(o),E={display:"flex",width:`${r}px`,height:`${m}px`},[v,h]=(0,i.Z)();if(!c)return n.createElement(n.Fragment,null,n.createElement("div",{tabIndex:0,style:E,className:y.viz},p(r,m)));let{placement:P,maxHeight:a="35%",maxWidth:C="60%"}=c.props;document.body.clientWidth<g.breakpoints.values.lg&&(P="bottom");let D=null;const b={};switch(P){case"bottom":E.flexDirection="column",b.maxHeight=a,h.height&&(D={width:r,height:m-h.height});break;case"right":E.flexDirection="row",b.maxWidth=C,h.width&&(D={width:r-h.width,height:m}),c.props.width&&(b.width=c.props.width,D={width:r-c.props.width,height:m});break}return D?.width===0&&(D.width=r),D?.height===0&&(D.height=m),n.createElement("div",{style:E},n.createElement("div",{tabIndex:0,className:y.viz},D&&p(D.width,D.height)),n.createElement("div",{style:b,ref:v},n.createElement(f.$,{hideHorizontalTrack:!0},c)))},o=r=>({viz:(0,t.css)({flexGrow:2,borderRadius:r.shape.borderRadius(1),"&:focus-visible":(0,l.getFocusStyles)(r)})}),d=({children:r})=>n.createElement(n.Fragment,null,r);u.Legend=d},6264:(Y,T,e)=>{"use strict";e.d(T,{F:()=>s});var t=e(66111),n=e(72990),i=e(72648);const s=t.memo(t.forwardRef(({color:l,className:f,gradient:u,...o},d)=>{const r=(0,i.l4)();let m;if(u){const p=n.WO.get(u).getColors?.(r);p?.length?m=`linear-gradient(90deg, ${p.join(", ")})`:m=r.visualization.getColorByName("")}else m=l;const c={background:m,width:"14px",height:"4px",borderRadius:r.shape.radius.pill,display:"inline-block",marginRight:"8px"};return t.createElement("div",{"data-testid":"series-icon",ref:d,className:f,style:c,...o})}));s.displayName="SeriesIcon"},78056:(Y,T,e)=>{"use strict";e.d(T,{l:()=>M});var t=e(66111),n=e(23588),i=e(40538),s=e(60325),l=e(17882),f=e(9892),u=e(72648),o=e(19882),d=e(56766),r=e(46920);const m=({items:x,itemRenderer:R,onLabelMouseOver:S,onLabelMouseOut:O,onLabelClick:U,placement:I,className:F,readonly:w})=>{const K=(0,u.wW)(c);R||(R=V=>t.createElement(r.e,{item:V,onLabelClick:U,onLabelMouseOver:S,onLabelMouseOut:O,readonly:w}));const L=V=>`${V.getItemKey?V.getItemKey():V.label}`;switch(I){case"right":{const V=(H,j)=>t.createElement("span",{className:K.itemRight},R(H,j));return t.createElement("div",{className:(0,f.cx)(K.rightWrapper,F)},t.createElement(d.a,{items:x,renderItem:V,getItemKey:L}))}case"bottom":default:{const V=(H,j)=>t.createElement("span",{className:K.itemBottom},R(H,j));return t.createElement("div",{className:(0,f.cx)(K.bottomWrapper,F)},t.createElement("div",{className:K.section},t.createElement(o.Y,{items:x.filter(H=>H.yAxis===1),renderItem:V,getItemKey:L})),t.createElement("div",{className:(0,f.cx)(K.section,K.sectionRight)},t.createElement(o.Y,{items:x.filter(H=>H.yAxis!==1),renderItem:V,getItemKey:L})))}}};m.displayName="VizLegendList";const c=x=>{const R=f.css`
    padding-right: 10px;
    display: flex;
    font-size: ${x.typography.bodySmall.fontSize};
    white-space: nowrap;
  `;return{itemBottom:R,itemRight:(0,f.cx)(R,f.css`
        margin-bottom: ${x.spacing(.5)};
      `),rightWrapper:f.css`
      padding-left: ${x.spacing(.5)};
    `,bottomWrapper:f.css`
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      width: 100%;
      padding-left: ${x.spacing(.5)};
    `,section:f.css`
      display: flex;
    `,sectionRight:f.css`
      justify-content: flex-end;
      flex-grow: 1;
    `}};var p=e(82897),g=e(39904),y=e(2703),E=e(85419),v=e(59943);const h=({item:x,onLabelClick:R,onLabelMouseOver:S,onLabelMouseOut:O,className:U,readonly:I})=>{const F=(0,u.wW)(P),w=(0,t.useCallback)(V=>{S&&S(x,V)},[x,S]),K=(0,t.useCallback)(V=>{O&&O(x,V)},[x,O]),L=(0,t.useCallback)(V=>{R&&R(x,V)},[x,R]);return t.createElement("tr",{className:(0,f.cx)(F.row,U)},t.createElement("td",null,t.createElement("span",{className:F.itemWrapper},t.createElement(v.i,{color:x.color,seriesName:x.label,readonly:I}),t.createElement("button",{disabled:I,type:"button",title:x.label,onBlur:K,onFocus:w,onMouseOver:w,onMouseOut:K,onClick:I?void 0:L,className:(0,f.cx)(F.label,x.disabled&&F.labelDisabled)},x.label," ",x.yAxis===2&&t.createElement("span",{className:F.yAxisLabel},"(right y-axis)")))),x.getDisplayValues&&x.getDisplayValues().map((V,H)=>t.createElement("td",{className:F.value,key:`${V.title}-${H}`},(0,y.zc)(V))))};h.displayName="LegendTableItem";const P=x=>{const R=E.hoverColor(x.colors.background.primary,x);return{row:f.css`
      label: LegendRow;
      font-size: ${x.v1.typography.size.sm};
      border-bottom: 1px solid ${x.colors.border.weak};
      td {
        padding: ${x.spacing(.25,1)};
        white-space: nowrap;
      }

      &:hover {
        background: ${R};
      }
    `,label:f.css`
      label: LegendLabel;
      white-space: nowrap;
      background: none;
      border: none;
      font-size: inherit;
      padding: 0;
      max-width: 600px;
      text-overflow: ellipsis;
      overflow: hidden;
    `,labelDisabled:f.css`
      label: LegendLabelDisabled;
      color: ${x.colors.text.disabled};
    `,itemWrapper:f.css`
      display: flex;
      white-space: nowrap;
      align-items: center;
    `,value:f.css`
      text-align: right;
    `,yAxisLabel:f.css`
      color: ${x.colors.text.secondary};
    `}},a=({items:x,sortBy:R,sortDesc:S,itemRenderer:O,className:U,onToggleSort:I,onLabelClick:F,onLabelMouseOver:w,onLabelMouseOut:K,readonly:L})=>{const V=(0,u.wW)(C),H={};for(const A of x)if(A.getDisplayValues)for(const _ of A.getDisplayValues())H[_.title??"?"]=_;const j=R?(0,p.orderBy)(x,A=>{if(A.getDisplayValues){const _=A.getDisplayValues().filter(k=>k.title===R)[0];return _&&_.numeric}},S?"desc":"asc"):x;return O||(O=(A,_)=>t.createElement(h,{key:`${A.label}-${_}`,item:A,onLabelClick:F,onLabelMouseOver:w,onLabelMouseOut:K,readonly:L})),t.createElement("table",{className:(0,f.cx)(V.table,U)},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null),Object.keys(H).map(A=>{const _=H[A];return t.createElement("th",{title:_.description,key:A,className:(0,f.cx)(V.header,I&&V.headerSortable,{[V.withIcon]:R===A}),onClick:()=>{I&&I(A)}},A,R===A&&t.createElement(g.J,{size:"xs",name:S?"angle-down":"angle-up"}))}))),t.createElement("tbody",null,j.map(O)))},C=x=>({table:f.css`
    width: 100%;
    th:first-child {
      width: 100%;
      border-bottom: 1px solid ${x.colors.border.weak};
    }
  `,header:f.css`
    color: ${x.colors.primary.text};
    font-weight: ${x.typography.fontWeightMedium};
    border-bottom: 1px solid ${x.colors.border.weak};
    padding: ${x.spacing(.25,1,.25,1)};
    font-size: ${x.typography.bodySmall.fontSize};
    text-align: right;
    white-space: nowrap;
  `,withIcon:f.css`
    padding-right: 4px;
  `,headerSortable:f.css`
    cursor: pointer;
  `});var D=e(26993);function b(x){return x.ctrlKey||x.metaKey||x.shiftKey?l.R.AppendToSelection:l.R.ToggleSelection}function M({items:x,displayMode:R,sortBy:S,seriesVisibilityChangeBehavior:O=D.Y.Isolate,sortDesc:U,onLabelClick:I,onToggleSort:F,placement:w,className:K,itemRenderer:L,readonly:V}){const{eventBus:H,onToggleSeriesVisibility:j,onToggleLegendSort:A}=(0,s.R9)(),_=(0,t.useCallback)((re,Z)=>{H?.publish({type:n.es.type,payload:{raw:Z,x:0,y:0,dataId:re.label}})},[H]),k=(0,t.useCallback)((re,Z)=>{H?.publish({type:n.xH.type,payload:{raw:Z,x:0,y:0,dataId:re.label}})},[H]),Q=(0,t.useCallback)((re,Z)=>{I&&I(re,Z),j&&j(re.label,O===D.Y.Hide?l.R.AppendToSelection:b(Z))},[j,I,O]);switch(R){case i.jK.Table:return t.createElement(a,{className:K,items:x,placement:w,sortBy:S,sortDesc:U,onLabelClick:Q,onToggleSort:F||A,onLabelMouseOver:_,onLabelMouseOut:k,itemRenderer:L,readonly:V});case i.jK.List:return t.createElement(m,{className:K,items:x,placement:w,onLabelMouseOver:_,onLabelMouseOut:k,onLabelClick:Q,itemRenderer:L,readonly:V});default:return null}}M.displayName="VizLegend"},46920:(Y,T,e)=>{"use strict";e.d(T,{e:()=>m});var t=e(9892),n=e(66111),i=e(68183),s=e(72648),l=e(59943),f=e(82897),u=e(2703),o=e(19882);const d=({stats:p})=>{const g=(0,s.wW)(r);return p.length===0?null:n.createElement(o.Y,{className:g.list,items:p,renderItem:y=>n.createElement("div",{className:g.item,title:y.description},y.title&&`${(0,f.capitalize)(y.title)}:`," ",(0,u.zc)(y))})},r=()=>({list:t.css`
    flex-grow: 1;
    text-align: right;
  `,item:t.css`
    margin-left: 8px;
  `});d.displayName="VizLegendStatsList";const m=({item:p,onLabelClick:g,onLabelMouseOver:y,onLabelMouseOut:E,className:v,readonly:h})=>{const P=(0,s.wW)(c),a=(0,n.useCallback)(b=>{y&&y(p,b)},[p,y]),C=(0,n.useCallback)(b=>{E&&E(p,b)},[p,E]),D=(0,n.useCallback)(b=>{g&&g(p,b)},[p,g]);return n.createElement("div",{className:(0,t.cx)(P.itemWrapper,p.disabled&&P.itemDisabled,v),"aria-label":i.wl.components.VizLegend.seriesName(p.label)},n.createElement(l.i,{seriesName:p.label,color:p.color,gradient:p.gradient,readonly:h}),n.createElement("button",{disabled:h,type:"button",title:p.label,onBlur:C,onFocus:a,onMouseOver:a,onMouseOut:C,onClick:D,className:P.label},p.label),p.getDisplayValues&&n.createElement(d,{stats:p.getDisplayValues()}))};m.displayName="VizLegendListItem";const c=p=>({label:t.css`
    label: LegendLabel;
    white-space: nowrap;
    background: none;
    border: none;
    font-size: inherit;
    padding: 0;
    user-select: text;
    max-width: 600px;
    text-overflow: ellipsis;
    overflow: hidden;
  `,itemDisabled:t.css`
    label: LegendLabelDisabled;
    color: ${p.colors.text.disabled};
  `,itemWrapper:t.css`
    label: LegendItemWrapper;
    display: flex;
    white-space: nowrap;
    align-items: center;
    flex-grow: 1;
  `,value:t.css`
    text-align: right;
  `,yAxisLabel:t.css`
    color: ${p.v1.palette.gray2};
  `})},59943:(Y,T,e)=>{"use strict";e.d(T,{i:()=>l});var t=e(66111),n=e(90208),i=e(60325),s=e(6264);const l=t.memo(({seriesName:f,color:u,gradient:o,readonly:d})=>{const{onSeriesColorChange:r}=(0,i.R9)(),m=(0,t.useCallback)(c=>r(f,c),[f,r]);return f&&r&&u&&!d?t.createElement(n.sp,{color:u,onChange:m,enableNamedColors:!0},({ref:c,showColorPicker:p,hideColorPicker:g})=>t.createElement(s.F,{color:u,className:"pointer",ref:c,onClick:p,onMouseLeave:g})):t.createElement(s.F,{color:u,gradient:o})});l.displayName="VizLegendSeriesIcon"},26993:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>t});var t=(n=>(n[n.Isolate=0]="Isolate",n[n.Hide=1]="Hide",n))(t||{})},4387:(Y,T,e)=>{"use strict";e.d(T,{Q:()=>l});var t=e(66111),n=e(82229);const i=(u,o,d,r)=>{const m=s(u,o,r),c=s(o,u,r),p=Math.max(m,c);let g=Math.floor(u/p),y=Math.ceil(r/g);g=Math.ceil(r/y);const E=g-(g*y-r),v=u/E-d+d/E;return{width:u/g-d+d/g,height:o/y-d+d/y,widthOnLastRow:v,xCount:g,yCount:y}};function s(u,o,d){const r=Math.ceil(Math.sqrt(d*u/o));return Math.floor(r*o/u)*r<d?o/Math.ceil(r*o/u):u/r}class l extends t.PureComponent{constructor(o){super(o),this.state={values:o.getValues()}}componentDidUpdate(o){const{renderCounter:d,source:r}=this.props;(d!==o.renderCounter||r!==o.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:o,width:d,height:r}=this.props;return o===n.wm.Auto?d>r?n.wm.Vertical:n.wm.Horizontal:o}renderGrid(){const{renderValue:o,height:d,width:r,itemSpacing:m,getAlignmentFactors:c,orientation:p}=this.props,{values:g}=this.state,y=i(r,d,m,g.length),E=c?c(g,y.width,y.height):{};let v=0,h=0,P=[];for(let a=0;a<g.length;a++){const C=g[a],b=h===y.yCount-1?y.widthOnLastRow:y.width,M=y.height,x=v*b+m*v,R=h*M+m*h,S={position:"absolute",left:x,top:R,width:`${b}px`,height:`${M}px`};P.push(t.createElement("div",{key:a,style:S},o({value:C,width:b,height:M,alignmentFactors:E,orientation:p,count:g.length}))),v++,v===y.xCount&&(v=0,h++)}return t.createElement("div",{style:{position:"relative"}},P)}render(){const{renderValue:o,height:d,width:r,itemSpacing:m,getAlignmentFactors:c,autoGrid:p,orientation:g,minVizWidth:y,minVizHeight:E}=this.props,{values:v}=this.state;if(p&&g===n.wm.Auto)return this.renderGrid();const h={display:"flex"},P={display:"flex",overflow:`${y?"auto":"hidden"} ${E?"auto":"hidden"}`};let a=d,C=r,D=this.getOrientation();switch(D){case n.wm.Horizontal:P.flexDirection="column",P.height=`${d}px`,h.marginBottom=`${m}px`,C=r,a=Math.max(d/v.length-m+m/v.length,E??0);break;case n.wm.Vertical:P.flexDirection="row",P.justifyContent="space-between",h.marginRight=`${m}px`,a=d,C=Math.max(r/v.length-m+m/v.length,y??0)}h.width=`${C}px`,h.height=`${a}px`;const b=c?c(v,C,a):{};return t.createElement("div",{style:P},v.map((M,x)=>t.createElement("div",{key:x,style:f(h,x,v.length)},o({value:M,width:C,height:a,alignmentFactors:b,orientation:D,count:v.length}))))}}l.defaultProps={itemSpacing:8};function f(u,o,d){return o===d-1?{...u,marginRight:0,marginBottom:0}:u}},50800:(Y,T,e)=>{"use strict";e.d(T,{V:()=>f,c:()=>u});var t=e(9892),n=e(66111),i=e(72648),s=e(6264);const l=o=>({icon:t.css`
      margin-right: ${o.spacing(1)};
      vertical-align: middle;
    `,seriesTable:t.css`
      display: table;
    `,seriesTableRow:t.css`
      display: table-row;
      font-size: ${o.typography.bodySmall.fontSize};
    `,seriesTableCell:t.css`
      display: table-cell;
    `,label:t.css`
      word-break: break-all;
    `,value:t.css`
      padding-left: ${o.spacing(2)};
      text-align: right;
    `,activeSeries:t.css`
      font-weight: ${o.typography.fontWeightBold};
      color: ${o.colors.text.maxContrast};
    `,timestamp:t.css`
      font-weight: ${o.typography.fontWeightBold};
      font-size: ${o.typography.bodySmall.fontSize};
    `}),f=({color:o,label:d,value:r,isActive:m})=>{const c=(0,i.wW)(l);return n.createElement("div",{"data-testid":"SeriesTableRow",className:(0,t.cx)(c.seriesTableRow,m&&c.activeSeries)},o&&n.createElement("div",{className:c.seriesTableCell},n.createElement(s.F,{color:o,className:c.icon})),d&&n.createElement("div",{className:(0,t.cx)(c.seriesTableCell,c.label)},d),r&&n.createElement("div",{className:(0,t.cx)(c.seriesTableCell,c.value)},r))},u=({timestamp:o,series:d})=>{const r=(0,i.wW)(l);return n.createElement(n.Fragment,null,o&&n.createElement("div",{className:r.timestamp,"aria-label":"Timestamp"},o),d.map((m,c)=>n.createElement(f,{isActive:m.isActive,label:m.label,color:m.color,value:m.value,key:`${m.label}-${c}`})))}},24505:(Y,T,e)=>{"use strict";e.d(T,{I:()=>f});var t=e(9892),n=e(66111),i=e(72648),s=e(85511),l=e(20888);const f=({content:o,position:d,offset:r})=>{const m=(0,i.wW)(u);return d?n.createElement(s.h_,{className:m.portal},n.createElement(l.S,{position:d,offset:r||{x:0,y:0}},o)):null};f.displayName="VizTooltip";const u=()=>({portal:t.css`
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      width: 100%;
      height: 100%;
    `})},20888:(Y,T,e)=>{"use strict";e.d(T,{S:()=>u});var t=e(9892),n=e(66111),i=e(830),s=e(72648),l=e(85419);const f=(d=0,r=0,m=0,c=0,p=0,g=0,y=0,E=0)=>{let v=d,h=r;const P=Math.max(d+p+m-(y-p),0),a=Math.abs(Math.min(d-p-m-p,0)),C=P>0,D=a>0,b=Math.max(r+g+c-(E-g),0),M=Math.abs(Math.min(r-g-c-g,0)),x=b>0,R=M>0;return C&&D?v=P>a?p:y-p-m:C?v=d-p-m:v=d+p,x&&R?h=b>M?g:E-g-c:x?h=r-g-c:h=r+g,{x:v,y:h}},u=({position:{x:d,y:r},offset:{x:m,y:c},children:p,allowPointerEvents:g=!1,className:y,...E})=>{const v=(0,n.useRef)(null),[h,P]=(0,n.useState)({width:0,height:0}),{width:a,height:C}=(0,i.Z)(),[D,b]=(0,n.useState)({x:d+m,y:r+c}),M=(0,n.useMemo)(()=>new ResizeObserver(R=>{for(let S of R){const O=Math.floor(S.contentRect.width+16),U=Math.floor(S.contentRect.height+2*8);(h.width!==O||h.height!==U)&&P({width:Math.min(O,a),height:Math.min(U,C)})}}),[h,a,C]);(0,n.useLayoutEffect)(()=>(v.current&&M.observe(v.current),()=>{M.disconnect()}),[M]),(0,n.useLayoutEffect)(()=>{if(v&&v.current){const{x:R,y:S}=f(d,r,h.width,h.height,m,c,a,C);b({x:R,y:S})}},[a,C,d,m,r,c,h]);const x=(0,s.wW)(o);return n.createElement("div",{ref:v,style:{position:"fixed",left:0,pointerEvents:g?"auto":"none",top:0,transform:`translate(${D.x}px, ${D.y}px)`,transition:"transform ease-out 0.1s"},...E,className:(0,t.cx)(x.wrapper,y)},p)};u.displayName="VizTooltipContainer";const o=d=>({wrapper:t.css`
    ${(0,l.getTooltipContainerStyles)(d)}
  `})},14835:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{Alert:()=>Et.b,AlertingSettings:()=>gn.O,AsyncMultiSelect:()=>ds.M8,AsyncSelect:()=>ds.qb,AsyncVirtualizedSelect:()=>ds.gY,AutoSaveField:()=>re.h,AutoSizeInput:()=>js.H,Badge:()=>fr.C,BarGauge:()=>ut.xf,BarGaugeDisplayMode:()=>Ke.QH,BigValue:()=>Be.w6,BigValueColorMode:()=>Be.pc,BigValueGraphMode:()=>Be.IG,BigValueJustifyMode:()=>Be.ap,BigValueTextMode:()=>Be.jG,BrowserLabel:()=>$t._,Button:()=>Pa.zx,ButtonCascader:()=>C.O,ButtonGroup:()=>os.h,ButtonSelect:()=>mt.d,CallToActionCard:()=>Lt._,Card:()=>ys.Z,CardContainer:()=>jt._,Cascader:()=>a.v,CertificationKey:()=>_n.W,Checkbox:()=>vr.X,ClickOutsideWrapper:()=>it.L,ClipboardButton:()=>P.m,CodeEditor:()=>de.p,CodeEditorSuggestionItemKind:()=>me.k,CollapsableSection:()=>ht.s,Collapse:()=>je.U,ColorPicker:()=>x.zH,ColorPickerInput:()=>R.T,ConfirmButton:()=>r.p,ConfirmModal:()=>fe.s,Container:()=>Gs.W2,ContextMenu:()=>Kt.x,ControlledCollapse:()=>je.y,Counter:()=>Pe.A,CustomHeadersSettings:()=>Jt.H,CustomScrollbar:()=>v.$,DataLinkButton:()=>we.k,DataLinkInput:()=>Ft.v,DataLinksContextMenu:()=>Vt.V,DataLinksInlineEditor:()=>Bt.d,DataSourceHttpSettings:()=>sn.E,DatePicker:()=>H.M,DatePickerWithInput:()=>j.d,DateTimePicker:()=>A.x,DeleteButton:()=>m.m,Drawer:()=>ga.d,Dropdown:()=>bt.L,DropdownIndicator:()=>ws.m,EmptySearchResult:()=>O.K,ErrorBoundary:()=>Qt.SV,ErrorBoundaryAlert:()=>Qt.z4,ErrorWithStack:()=>en.X,EventsCanvas:()=>qn.TZ,FIXED_UNIT:()=>Ae.j,FadeTransition:()=>Hn.n,FeatureBadge:()=>Rt.a,FeatureInfoBox:()=>Rt.Z,Field:()=>Fa.g,FieldArray:()=>mr.F,FieldLinkList:()=>Qe.Z,FieldSet:()=>ca.C,FieldValidationMessage:()=>as.S,FileDropzone:()=>Rs.Yo,FileDropzoneDefaultChildren:()=>Rs.A_,FileListItem:()=>Rs.K$,FileUpload:()=>cr.p,FilterInput:()=>gr.H,FilterPill:()=>le.B,Form:()=>rs.l,FormattedValueDisplay:()=>He.W,FullWidthButtonContainer:()=>nt.f,Gauge:()=>ot.a,Graph:()=>ft.k,GraphContextMenu:()=>St.w,GraphContextMenuHeader:()=>St.b,GraphNG:()=>Ae.d,GraphSeriesToggler:()=>pt.U,GraphWithLegend:()=>gt.U,HorizontalGroup:()=>Gs.Lh,Icon:()=>o.J,IconButton:()=>d.h,InfoBox:()=>Nt.v,InlineField:()=>Os._,InlineFieldRow:()=>ur.Z,InlineFormLabel:()=>nn.c,InlineLabel:()=>ir.W,InlineSegmentGroup:()=>bs.m,InlineSwitch:()=>hr.x,InlineToast:()=>D.K,Input:()=>Ys.I,InputControl:()=>wa.g,InteractiveTable:()=>k.e,JSONFormatter:()=>wt.g,JsonExplorer:()=>_t.u,KeyboardPlugin:()=>Pt.Cm,Label:()=>qa._,LegacyForms:()=>qe,LegacyInputStatus:()=>n.G,Legend:()=>ns.D,Link:()=>vs.r,LinkButton:()=>Pa.Qj,List:()=>_.a,LoadingBar:()=>M.F,LoadingPlaceholder:()=>b.u,Marker:()=>qn.Jx,Menu:()=>an.v,MenuGroup:()=>un.k,MenuItem:()=>hn.s,Modal:()=>ne.u,ModalHeader:()=>se.x,ModalRoot:()=>Te.Y0,ModalTabContent:()=>ue.Q,ModalTabsHeader:()=>he.H,ModalsContext:()=>Te.kr,ModalsController:()=>Te.JY,ModalsProvider:()=>Te.$i,MultiSelect:()=>ds.NU,PageToolbar:()=>Ve.X,Pagination:()=>Z.t,PanelChrome:()=>Xe.fm,PanelChromeErrorIndicator:()=>Ue.g,PanelChromeLoadingIndicator:()=>Le.T,PanelContainer:()=>Tt.l,PanelContextProvider:()=>ve._w,PanelContextRoot:()=>ve.bb,PlotLegend:()=>xn.l,PluginSignatureBadge:()=>Ht.o,Popover:()=>g.J,PopoverController:()=>p.D,Portal:()=>E.h_,PortalContainer:()=>E.lO,QueryField:()=>ae.q,RadioButtonGroup:()=>lr.S,RadioButtonList:()=>tr.x,RangeSlider:()=>Wa.U,ReactMonacoEditor:()=>ee.o,RefreshPicker:()=>F.dP,RelativeTimeRangePicker:()=>Qs.x,RenderUserContentAsHTML:()=>be.D,ScaleDistribution:()=>Ke.wf,SecretInput:()=>is.m,SecretTextArea:()=>pr.Z,SecureSocksProxySettings:()=>Cn.i,Segment:()=>Ma.X,SegmentAsync:()=>la.V,SegmentInput:()=>jn.X,SegmentSection:()=>Aa.f,SegmentSelect:()=>ia.V,Select:()=>ds.Ph,SelectContainer:()=>ds.eI,SeriesColorPicker:()=>x.sp,SeriesColorPickerPopover:()=>S.j,SeriesColorPickerPopoverWithTheme:()=>S.q,SeriesIcon:()=>At.F,SeriesTable:()=>De.c,SeriesTableRow:()=>De.V,SeriesVisibilityChangeBehavior:()=>$e.Y,SeriesVisibilityChangeMode:()=>It.R,SetInterval:()=>ct.F,SlideOutTransition:()=>sa.R,Slider:()=>ya.i,Sparkline:()=>ke.b,Spinner:()=>zn.$,StatsPicker:()=>I.m,Switch:()=>hr.r,TLSAuthSettings:()=>In.s,Tab:()=>dt.O,TabContent:()=>ye.I,TabbedContainer:()=>h.W,Table:()=>Ie.i,TableCellDisplayMode:()=>Ke.h2,TableInputCSV:()=>Ge.w,TabsBar:()=>at.J,Tag:()=>oe.V,TagList:()=>G.P,TagsInput:()=>Q.B,TextArea:()=>nr.K,TimeOfDayPicker:()=>K.y,TimePickerTooltip:()=>w.IF,TimeRangeInput:()=>ms.K,TimeRangePicker:()=>w.Xc,TimeSeries:()=>Me.p,TimeZonePicker:()=>L.O,Toggletip:()=>y.P,ToolbarButton:()=>Ca.h,ToolbarButtonRow:()=>ta.R,Tooltip:()=>c.u,TooltipPlugin:()=>Pt.ii,UPLOT_AXIS_FONT_SIZE:()=>bn.gD,UPlotChart:()=>En.N,UPlotConfigBuilder:()=>fn.U,UnitPicker:()=>U.n,ValuePicker:()=>Qa.b,VerticalGroup:()=>Gs.wc,VerticalTab:()=>Re.L,VirtualizedSelect:()=>ds.LT,VizLayout:()=>Se.AY,VizLegend:()=>Ye.l,VizLegendListItem:()=>_e.e,VizRepeater:()=>Ne.Q,VizTooltip:()=>Dt.I,VizTooltipContainer:()=>ie.S,WeekStartPicker:()=>V.z,WithContextMenu:()=>Wn.z,XYCanvas:()=>qn.K2,ZoomPlugin:()=>Pt.Rb,buildScaleKey:()=>tt.z,clearButtonStyles:()=>Pa.gN,convertOldAngularValueMapping:()=>yt.PR,defaultIntervals:()=>F.o5,fieldMatchersUI:()=>ua.i,getCardStyles:()=>ys.L,getInputStyles:()=>Ys.H,getPortalContainer:()=>E.RN,getSelectStyles:()=>us.D,graphFieldOptions:()=>qt.q,graphTickFormatter:()=>Je.sV,graphTimeFormat:()=>Je.mc,preparePlotFrame:()=>tt.R,resetSelectStyles:()=>er.Z,sharedInputStyle:()=>Xa.RK,sharedSingleStatMigrationHandler:()=>yt.rD,sharedSingleStatPanelChangedHandler:()=>yt.ZH,useGraphNGContext:()=>Ze.z,usePanelContext:()=>ve.R9,variableSuggestionToCodeEditorSuggestion:()=>q.T,withErrorBoundary:()=>Qt.Pf});var t=e(95569),n=e(50869),i=e(21662),s=e(76603),l=e(29418),f=e(18979),u=e(34517),o=e(39904),d=e(8180),r=e(71657),m=e(13626),c=e(61860),p=e(39604),g=e(56921),y=e(50819),E=e(85511),v=e(68226),h=e(18607),P=e(94599),a=e(95093),C=e(19974),D=e(4784),b=e(61744),M=e(74750),x=e(90208),R=e(83957),S=e(43598),O=e(69097),U=e(61227),I=e(71294),F=e(5562),w=e(3630),K=e(91942),L=e(52566),V=e(80124),H=e(77239),j=e(86348),A=e(35575),_=e(56766),k=e(65455),Q=e(43339),re=e(30532),Z=e(78889),oe=e(34719),G=e(34807),le=e(41165),fe=e(98102),ae=e(69659),de=e(9405),ee=e(84128),me=e(10339),q=e(25503),ne=e(35029),se=e(38894),he=e(88683),ue=e(72535),Te=e(5191),Ve=e(35224),ct=e(41490),Ie=e(88144),Ke=e(40538),Ge=e(91363),at=e(72142),dt=e(79841),Re=e(13026),ye=e(94893),Pe=e(51275),be=e(39856),Be=e(57426),ke=e(67307),ot=e(69823),ft=e(87691),gt=e(29781),St=e(65987),ut=e(19670),Dt=e(24505),ie=e(20888),De=e(50800),Ne=e(4387),Je=e(31438),Xe=e(38208),Le=e(8861),Ue=e(99562),ve=e(60325),Se=e(729),$e=e(26993),Ye=e(78056),_e=e(46920),Et=e(45253),pt=e(56506),je=e(2352),ht=e(20941),we=e(89719),Qe=e(45576),nt=e(97389),it=e(94437),yt=e(70161),Lt=e(97097),Kt=e(30909),an=e(95130),un=e(14391),hn=e(42044),Wn=e(74285),Bt=e(68037),Ft=e(35919),Vt=e(18543),At=e(6264),Nt=e(17784),Rt=e(26338),wt=e(16065),_t=e(73892),Qt=e(53546),en=e(39198),sn=e(12006),Jt=e(92099),gn=e(64260),Cn=e(12580),In=e(23622),_n=e(85615),zn=e(67487),Hn=e(19801),sa=e(41200),Ma=e(70044),la=e(68118),jn=e(58564),ia=e(2357),Aa=e(30991),ga=e(30979),ya=e(90330),Wa=e(97759),rs=e(94270),Xa=e(73267),wa=e(63619),Pa=e(31403),os=e(26202),Ca=e(64319),ta=e(8125),Qa=e(15670),ua=e(6058),vs=e(29460),qa=e(64353),Fa=e(24799),ns=e(19825),ca=e(13393),as=e(57227),Os=e(81764),bs=e(62157),ir=e(77117),ur=e(11543),mr=e(70132),er=e(54897),ds=e(8581),ws=e(62997),us=e(27501),Ws=e(60857),Es=e.n(Ws),Fs={};for(const rn in Ws)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","graphTimeFormat","graphTickFormatter","PanelChrome","PanelChromeLoadingIndicator","PanelChromeErrorIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","DropdownIndicator","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","InlineFormLabel","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","GraphNG","FIXED_UNIT","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","BrowserLabel","PanelContainer","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(rn)<0&&(Fs[rn]=()=>Ws[rn]);e.d(T,Fs);var Gs=e(52081),fr=e(19985),lr=e(2594),tr=e(29395),Ys=e(46967),js=e(68668),gr=e(14747),is=e(70862),pr=e(88892),hr=e(8944),vr=e(58255),nr=e(97379),cr=e(82381),Rs=e(47556),ms=e(95794),Qs=e(19115),ys=e(72948),jt=e(35633),He=e(72777),mt=e(44342),bt=e(71698),Ht=e(51613),nn=e(19426),qt=e(26372),fn=e(13347),bn=e(23888),En=e(3200),xn=e(68416),qn=e(56709),Pt=e(57989),Ae=e(72269),Me=e(68948),Ze=e(16566),tt=e(86979),It=e(17882),$t=e(85951),Tt=e(72080);const qe={SecretFormField:u.c,FormField:t.W,Select:l.Ph,AsyncSelect:l.qb,IndicatorsContainer:i.B,NoOptionsMessage:s.P,Input:n.I,Switch:f.r}},19801:(Y,T,e)=>{"use strict";e.d(T,{n:()=>f});var t=e(9892),n=e(66111),i=e(79288),s=e(7804);const l=(0,s.B)(u=>({enter:t.css`
      label: enter;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      opacity: 1;
      transition: opacity ${u}ms ease-out;
    `,exit:t.css`
      label: exit;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      transition: opacity ${u}ms ease-out;
    `}));function f(u){const{visible:o,children:d,duration:r=250}=u,m=l(r);return n.createElement(i.Z,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:r,classNames:m},d)}},41200:(Y,T,e)=>{"use strict";e.d(T,{R:()=>f});var t=e(9892),n=e(66111),i=e(79288),s=e(7804);const l=(0,s.B)((u,o,d)=>({enter:t.css`
      label: enter;
      ${o}: 0;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      ${o}: ${d}px;
      opacity: 1;
      transition: opacity ${u}ms ease-out, ${o} ${u}ms ease-out;
    `,exit:t.css`
      label: exit;
      ${o}: ${d}px;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      ${o}: 0;
      transition: opacity ${u}ms ease-out, ${o} ${u}ms ease-out;
    `}));function f(u){const{visible:o,children:d,duration:r=250,horizontal:m,size:c}=u,p=l(r,m?"width":"height",c);return n.createElement(i.Z,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:r,classNames:p},d)}},3200:(Y,T,e)=>{"use strict";e.d(T,{N:()=>o});var t=e(66111),n=e(75974),i=e(2445);function s(d,r){return r.width===d.width&&r.height===d.height}function l(d,r){return r.data===d.data}function f(d,r){return r.config===d.config}function u(d,r){let m=d.timeRange,c=r.timeRange;return m===c||c.from.valueOf()===m.from.valueOf()&&c.to.valueOf()===m.to.valueOf()}class o extends t.Component{constructor(r){super(r),this.plotContainer=(0,t.createRef)(),this.plotCanvasBBox=(0,t.createRef)(),this.state={plot:null}}reinitPlot(){let{width:r,height:m,plotRef:c}=this.props;if(this.state.plot?.destroy(),r===0&&m===0)return;this.props.config.addHook("setSize",y=>{y.over});const p={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,i.Zp)("UPlot",!1,"Reinitializing plot",p);const g=new n.Z(p,this.props.data,this.plotContainer.current);c&&c(g),this.setState({plot:g})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(r){let{plot:m}=this.state;s(r,this.props)?f(r,this.props)?l(r,this.props)?u(r,this.props)||m?.setScale("x",{min:this.props.timeRange.from.valueOf(),max:this.props.timeRange.to.valueOf()}):m?.setData(this.props.data):this.reinitPlot():m?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return t.createElement("div",{style:{position:"relative"}},t.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},68416:(Y,T,e)=>{"use strict";e.d(T,{l:()=>c,o:()=>m});var t=e(66111),n=e(30471),i=e(72990),s=e(33750),l=e(6194),f=e(40538),u=e(72648),o=e(729),d=e(78056);const r=p=>p==null?"-":p.toFixed(1);function m(p,g){return p.getSeries().some(y=>{const E=y.props.dataFrameFieldIndex;if(!E)return!1;const v=g[E.frameIndex]?.fields[E.fieldIndex];return!(!v||v.config.custom?.hideFrom?.legend)})}const c=t.memo(({data:p,config:g,placement:y,calcs:E,displayMode:v,...h})=>{const P=(0,u.l4)(),a=g.getSeries().map(C=>{const D=C.props,b=D.dataFrameFieldIndex,M=g.getAxisPlacement(C.props.scaleKey);if(!b)return;const x=p[b.frameIndex]?.fields[b.fieldIndex];if(!x||x.config.custom?.hideFrom?.legend)return;const R=(0,n.CZ)(x,p[b.frameIndex],p),O=(0,i.YO)(x,P).color;return{disabled:!(D.show??!0),fieldIndex:b,color:O,label:R,yAxis:M===f.LB.Left||M===f.LB.Bottom?1:2,getDisplayValues:()=>{if(!E?.length)return[];const U=x.display??r;let I=null;const F=(0,s.Kx)({field:x,reducers:E});return E.map(w=>{const K=s.TB.get(w);let L=U;return K.id===s.gz.diffperc&&(L=(0,l.U_)({field:{...x,config:{...x.config,unit:"percentunit"}},theme:P})),(K.id===s.gz.count||K.id===s.gz.changeCount||K.id===s.gz.distinctCount)&&(I||(I=(0,l.U_)({field:{...x,config:{...x.config,unit:"none"}},theme:P})),L=I),{...L(F[w]),title:K.name,description:K.description}})},getItemKey:()=>`${R}-${b.frameIndex}-${b.fieldIndex}`}}).filter(C=>C!==void 0);return t.createElement(o.AY.Legend,{placement:y,...h},t.createElement(d.l,{placement:y,items:a,displayMode:v,sortBy:h.sortBy,sortDesc:h.sortDesc}))});c.displayName="PlotLegend"},26372:(Y,T,e)=>{"use strict";e.d(T,{q:()=>n});var t=e(40538);const n={drawStyle:[{label:"Lines",value:t.l8.Line},{label:"Bars",value:t.l8.Bars},{label:"Points",value:t.l8.Points}],lineInterpolation:[{description:"Linear",value:t.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:t.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:t.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:t.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:t.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:t.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:t.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:t.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:t.Jp.Always},{label:"Never",value:t.Jp.Never}],axisPlacement:[{label:"Auto",value:t.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:t.LB.Left},{label:"Right",value:t.LB.Right},{label:"Hidden",value:t.LB.Hidden}],fillGradient:[{label:"None",value:t.FI.None},{label:"Opacity",value:t.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:t.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:t.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:t.o0.None},{label:"Normal",value:t.o0.Normal},{label:"100%",value:t.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:t.i3.Off},{label:"As lines",value:t.i3.Line},{label:"As lines (dashed)",value:t.i3.Dashed},{label:"As filled regions",value:t.i3.Area},{label:"As filled regions and lines",value:t.i3.LineAndArea},{label:"As filled regions and lines (dashed)",value:t.i3.DashedAndArea}]}},23888:(Y,T,e)=>{"use strict";e.d(T,{ff:()=>m,gD:()=>d,mr:()=>p});var t=e(2703),n=e(56190),i=e(82410),s=e(77258),l=e(40538),f=e(4176),u=e(13890),o=e(36562);const d=12,r=8;class m extends u.L{merge(E){this.props.size=(0,o.V)("max",this.props.size,E.size),this.props.label||(this.props.label=E.label),this.props.placement===l.LB.Auto&&(this.props.placement=E.placement)}calculateSpace(E,v,h,P,a){const C=E.axes[v],D=E.scales[C.scale];if(C.side!==2||!D)return 30;const b=40;if(D.time){const M=a/b,x=(P-h)/M,R=p(E,[h],v,b,x);return(0,f.X1)(R[0],d).width+18}return b}calculateAxisSize(E,v,h){const P=E.axes[h];let a=P.ticks.size;if(P.side===2)a+=P.gap+d;else if(v?.length){let C=v.reduce((b,M)=>Math.max(b,(0,f.X1)(M,d).width),0);const D=Math.min(E.width*.4,C);a+=P.gap+P.labelGap+D}return Math.ceil(a)}getConfig(){let{scaleKey:E,label:v,show:h=!0,placement:P=l.LB.Auto,grid:a={show:!0},ticks:C,space:D,filter:b,gap:M=5,formatValue:x,splits:R,values:S,incrs:O,isTime:U,timeZone:I,theme:F,tickLabelRotation:w,size:K,color:L,border:V,decimals:H,distr:j=l.wf.Linear}=this.props;const A=`${d}px ${F.typography.fontFamily}`,_=F.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,t.br)(E)&&(R=[0,1]),H===0&&j===l.wf.Linear&&(b=(Q,re)=>re.map(Z=>Number.isInteger(Z)?Z:null));let k={scale:E,show:h,stroke:L??F.colors.text.primary,side:g(P),font:A,size:K??((Q,re,Z)=>this.calculateAxisSize(Q,re,Z)),rotate:w,gap:M,labelGap:0,grid:{show:a.show,stroke:_,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:_,width:1/devicePixelRatio,size:4},C),splits:R,values:S,space:D??((Q,re,Z,oe,G)=>this.calculateSpace(Q,re,Z,oe,G)),filter:b,incrs:O};return V!=null&&(k.border=V),v!=null&&v.length>0&&(k.label=v,k.labelSize=d+r,k.labelFont=A,k.labelGap=r),S?k.values=S:U?k.values=p:x&&(k.values=(Q,re,Z,oe,G)=>{let le=(0,n.d)((0,n.O)(G,6));return re.map(fe=>x(fe,le>0?le:void 0))}),k.timeZone=I,k}}const c={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function p(y,E,v,h,P){const a=y.axes[v].timeZone,C=y.scales.x,D=(C?.max??0)-(C?.min??0),b=Math.round(c.year/c.day)*c.day,M=Math.round(P/c.day)*c.day;let x=i.U6.interval.year;return P<c.second?x=i.U6.interval.millisecond:P<=c.minute?x=i.U6.interval.second:D<=c.day?x=i.U6.interval.minute:P<=c.day?x=i.U6.interval.hour:D<c.year?x=i.U6.interval.day:M===b?x=i.U6.interval.year:P<=c.year&&(x=i.U6.interval.month),E.map(R=>R==null?"":(0,s.dq)(R,{format:x,timeZone:a}))}function g(y){switch(y){case l.LB.Top:return 0;case l.LB.Right:return 1;case l.LB.Bottom:return 2;case l.LB.Left:}return 3}},13347:(Y,T,e)=>{"use strict";e.d(T,{U:()=>a});var t=e(82897),n=e(75974),i=e(75849),s=e(56808),l=e(40538),f=e(2445),u=e(23888),o=e(36562),d=e(53768),r=e(5680),m=e(13890),c=e(52240);class p extends m.L{getConfig(){const{facets:D,drawStyle:b,pathBuilder:M,pointsBuilder:x,pointsFilter:R,lineInterpolation:S,lineWidth:O,lineStyle:U,barAlignment:I,barWidthFactor:F,barMaxWidth:w,showPoints:K,pointSize:L,scaleKey:V,pxAlign:H,spanNulls:j,show:A=!0}=this.props;let _={},k=this.getLineColor();_.stroke=k,M!=null?(_.paths=M,_.width=O):b===l.l8.Points?_.paths=()=>null:b!=null&&(_.width=O,U&&U.fill!=="solid"&&(U.fill==="dot"&&(_.cap="round"),_.dash=U.dash??[10,10]),_.paths=(Z,oe,G,le)=>y(b,S,I,F,w)(Z,oe,G,le));const Q=typeof k=="string"?k:(Z,oe)=>Z.series[oe]._stroke,re={points:{stroke:Q,fill:Q,size:!L||L<O?void 0:L,filter:R}};return x!=null?re.points.show=x:b===l.l8.Points?re.points.show=!0:K===l.Jp.Auto?b===l.l8.Bars&&(re.points.show=!1):K===l.Jp.Never?re.points.show=!1:K===l.Jp.Always&&(re.points.show=!0),{scale:V,facets:D,spanGaps:typeof j=="number"?!1:j,value:()=>"",pxAlign:H,show:A,fill:this.getFill(),..._,...re}}getLineColor(){const{lineColor:D,gradientMode:b,colorMode:M,thresholds:x,theme:R,hardMin:S,hardMax:O,softMin:U,softMax:I,dynamicSeriesColor:F}=this.props;return b===l.FI.None&&F?(w,K)=>F(K)??D??d.R:b===l.FI.Scheme&&M?.id!==d.S.Fixed?(0,c.P2)(1,R,M,x,S,O,U,I):D??d.R}getFill(){const{lineColor:D,fillColor:b,gradientMode:M,fillOpacity:x,colorMode:R,thresholds:S,theme:O,hardMin:U,hardMax:I,softMin:F,softMax:w,dynamicSeriesColor:K}=this.props;if(b)return b;const L=M??l.FI.None,V=(x??0)/100;if(L===l.FI.None&&K&&V>0)return(H,j)=>{let A=H.series[j]._stroke;return r.alpha(A??"",V)};switch(L){case l.FI.Opacity:return(0,c.DT)(b??D,V);case l.FI.Hue:return(0,c.oN)(b??D,V,O);case l.FI.Scheme:if(R?.id!==d.S.Fixed)return(0,c.P2)(V,O,R,S,U,I,F,w);default:if(V>0)return r.alpha(D??"",V)}}}let g;function y(C,D,b=0,M=.6,x=200){const R=n.Z.paths;if(g||(g={linear:R.linear(),smooth:R.spline(),stepBefore:R.stepped({align:-1}),stepAfter:R.stepped({align:1})}),C===l.l8.Bars){let S=`bars|${b}|${M}|${x}`;return g[S]||(g[S]=R.bars({size:[M,x],align:b})),g[S]}else if(C===l.l8.Line){if(D===l.KC.StepBefore)return g.stepBefore;if(D===l.KC.StepAfter)return g.stepAfter;if(D===l.KC.Smooth)return g.smooth}return g.linear}var E=e(28550),v=e(69098);function h(C){const D=C.config.mode===l.i3.Dashed||C.config.mode===l.i3.DashedAndArea?[10,10]:null;function b(K,L,V,H){let j=K.ctx,A=0;for(let _=0;_<V.length;_++)if(V[_].color==="transparent"){A=_;break}j.lineWidth=2,D&&j.setLineDash(D);for(let _=1;_<V.length;_++){const k=V[_];let Q;A>=_&&_>0?Q=(0,E.Z)(H.visualization.getColorByName(V[_-1].color)):Q=(0,E.Z)(H.visualization.getColorByName(k.color)),Q.getAlpha()===1&&Q.setAlpha(.7);let re=Math.round(K.bbox.left),Z=Math.round(K.valToPos(k.value,L,!0)),oe=Math.round(K.bbox.left+K.bbox.width),G=Math.round(K.valToPos(k.value,L,!0));j.beginPath(),j.moveTo(re,Z),j.lineTo(oe,G),j.strokeStyle=Q.toString(),j.stroke()}}function M(K,L,V,H){let j=K.ctx,A=(0,c.KV)(K,L,V.map(_=>{let k=(0,E.Z)(H.visualization.getColorByName(_.color));return k.getAlpha()===1&&k.setAlpha(.15),[_.value,k.toString()]}),!0);j.fillStyle=A,j.fillRect(K.bbox.left,K.bbox.top,K.bbox.width,K.bbox.height)}const{scaleKey:x,thresholds:R,theme:S,config:O,hardMin:U,hardMax:I,softMin:F,softMax:w}=C;return K=>{const L=K.ctx,{min:V,max:H}=K.scales.x,{min:j,max:A}=K.scales[x];if(V==null||H==null||j==null||A==null)return;let{steps:_,mode:k}=R;if(k===v.H.Percentage){let[Q,re]=(0,c.A9)(K,x,U,I,F,w),Z=re-Q;_=_.map(oe=>({...oe,value:Q+Z*(oe.value/100)}))}switch(L.save(),O.mode){case l.i3.Line:case l.i3.Dashed:b(K,x,_,S);break;case l.i3.Area:M(K,x,_,S);break;case l.i3.LineAndArea:case l.i3.DashedAndArea:M(K,x,_,S),b(K,x,_,S)}L.restore()}}const P={drag:{setScale:!1},points:{size:(C,D)=>C.series[D].points.size*2,width:(C,D,b)=>b/4},focus:{prox:30}};class a{constructor(D=i.Ys){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=b=>{let M=new Date(b);return this.tz?n.Z.tzDate(M,this.tz):M},this.tz=(0,s.Pr)(D,Date.now())?.ianaName}addHook(D,b){(0,f.Zp)("UPlotConfigBuilder",!1,"addHook",D),this.hooks[D]||(this.hooks[D]=[]),this.hooks[D].push(b)}addThresholds(D){this.thresholds[D.scaleKey]||(this.thresholds[D.scaleKey]=D,this.addHook("drawClear",h(D)))}addAxis(D){D.placement=D.placement??l.LB.Auto,D.grid=D.grid??{};let b=D.scaleKey;if(b==="x"&&(b+=D.timeZone??""),this.axes[b]){this.axes[b].merge(D);return}D.placement===l.LB.Auto&&(D.placement=this.hasLeftAxis?l.LB.Right:l.LB.Left),D.placement===l.LB.Left&&(this.hasLeftAxis=!0),D.placement===l.LB.Hidden&&(D.grid.show=!1,D.size=0),this.axes[b]=new u.ff(D)}getAxisPlacement(D){return this.axes[D]?.props.placement??l.LB.Left}setCursor(D){this.cursor=(0,t.merge)({},this.cursor,D)}setMode(D){this.mode=D}setSelect(D){this.select=D}addSeries(D){this.series.push(new p(D))}getSeries(){return this.series}addScale(D){const b=this.scales.find(M=>M.props.scaleKey===D.scaleKey);if(b){b.merge(D);return}this.scales.push(new o.I(D))}addBand(D){this.bands.push(D)}setStackingGroups(D){this.stackingGroups=D}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(D){this.tooltipInterpolator=D}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(D){this.prepData=b=>(this.frames=b,D(b,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(D){this.padding=D}getConfig(){const D={...f.qt,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};D.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(M=>M.getConfig()),D.series=[...D.series,...this.series.map(M=>M.getConfig())],D.scales=this.scales.reduce((M,x)=>({...M,...x.getConfig()}),{}),D.hooks=this.hooks,D.select=this.select;const b=(M="")=>(x,R)=>{let S=x.series[R].points._stroke;if(typeof S!="string"){let O=this.frames[0].fields[R];S=O.display(O.values[x.cursor.idxs[R]]).color}return S+M};return D.cursor=(0,t.merge)({},P,{points:{stroke:b("80"),fill:b()}},this.cursor),D.tzDate=this.tzDate,Array.isArray(this.padding)&&(D.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach(M=>{(0,f.Kq)(M).forEach(x=>{this.addBand(x)})}),this.bands.length&&(D.bands=this.bands),D}ensureNonOverlappingAxes(D){const b=D.find(R=>R.props.scaleKey==="x"),M=D.filter(R=>R.props.grid?.show===void 0),x=M.findIndex(R=>R.props.placement===l.LB.Left||R.props.placement===l.LB.Right||R.props.placement===l.LB.Bottom&&R!==b);for(let R=0;R<M.length;R++)M[R]===b||R===x?M[R].props.grid.show=!0:M[R].props.grid.show=!1;return D}}},36562:(Y,T,e)=>{"use strict";e.d(T,{I:()=>f,V:()=>u});var t=e(75974),n=e(75133),i=e(2703),s=e(40538),l=e(13890);class f extends l.L{merge(d){this.props.min=u("min",this.props.min,d.min),this.props.max=u("max",this.props.max,d.max)}getConfig(){let{isTime:d,scaleKey:r,min:m,max:c,softMin:p,softMax:g,range:y,direction:E,orientation:v,centeredZero:h,decimals:P}=this.props;const a=this.props.distribution,C=d?{}:{distr:a===s.wf.Symlog?4:a===s.wf.Log?3:a===s.wf.Ordinal?2:1,log:a===s.wf.Log||a===s.wf.Symlog?this.props.log??2:void 0,asinh:a===s.wf.Symlog?this.props.linearThreshold??1:void 0};if(a===s.wf.Log){let I=this.props.log,F=I===2?Math.log2:Math.log10;m!=null&&(m<=0?m=null:m=I**Math.floor(F(m))),c!=null&&(c<=0?c=null:c=I**Math.ceil(F(c))),p!=null&&(p<=0?p=null:p=I**Math.floor(F(p))),g!=null&&(g<=0?g=null:g=I**Math.ceil(F(g)))}let D=p==null?3:1,b=g==null?3:1;const M={min:{pad:.1,hard:m??-1/0,soft:p||0,mode:D},max:{pad:.1,hard:c??1/0,soft:g||0,mode:b}};let x=p==null&&m!=null,R=g==null&&c!=null,S=x&&R;const O=(I,F,w,K)=>{const L=I.scales[K];let V=[F,w];if(K==="x"&&!d||!S&&F==null&&w==null)return V;let H=L.log??10;if(L.distr===1||L.distr===2||L.distr===4){if(h){let j=Math.abs(F),A=Math.abs(w),_=Math.max(j,A);_===0&&(_=80),F=-_,w=_}L.distr===4?V=t.Z.rangeAsinh(F,w,H,!0):V=t.Z.rangeNum(x?m:F,R?c:w,M)}else L.distr===3&&(V=t.Z.rangeLog(m??F,c??w,H,!0));if(P===0)if(L.distr===1||L.distr===2)V[0]=(0,n.mB)(V[0],1),V[1]=(0,n.UO)(V[1],1);else if(L.distr===3){let j=L.log===2?Math.log2:Math.log10;if(V[0]<=1)V[0]=1;else{let _=Math.floor(j(V[0]));V[0]=H**_}let A=Math.ceil(j(V[1]));V[1]=H**A,V[0]===V[1]&&(V[1]*=H)}else L.distr===4&&(V[0]=(0,n.mB)(V[0],1),V[1]=(0,n.UO)(V[1],1));return(L.distr===1||L.distr===4)&&(x&&(V[0]=m),R&&(V[1]=c)),V[0]>=V[1]&&(V[0]=L.distr===3?1:0,V[1]=100),V};let U=!d&&!S;return(0,i.br)(r)&&(U=!1,y=[0,1]),{[r]:{time:d,auto:U,range:y??O,dir:E,ori:v,...C}}}}function u(o,d,r){const m=d!=null,c=r!=null;return m?c?o==="min"?d<r?d:r:d>r?d:r:d:r}},52240:(Y,T,e)=>{"use strict";e.d(T,{A9:()=>p,DT:()=>o,KV:()=>m,P2:()=>g,oN:()=>d});var t=e(28550),n=e(5680),i=e(53768),s=e(69098),l=e(40538),f=e(4176);function u(y,E,v){let h=0,P=0,a=0,C=0;return y===r.Down?(P=E.top,C=E.top+E.height):y===r.Left?(h=E.left+E.width,a=E.left):y===r.Up?(P=E.top+E.height,C=E.top):y===r.Right&&(h=E.left,a=E.left+E.width),v.createLinearGradient(h,P,a,C)}function o(y,E){return(v,h)=>{const P=(0,f.AE)(),a=u(v.scales.x.ori===l.wN.Horizontal?r.Down:r.Left,v.bbox,P);return a.addColorStop(0,n.alpha(y,E)),a.addColorStop(1,n.alpha(y,0)),a}}function d(y,E,v){return(h,P)=>{const a=(0,f.AE)(),C=u(h.scales.x.ori===l.wN.Horizontal?r.Down:r.Left,h.bbox,a),D=(0,t.Z)(y).spin(-15),b=(0,t.Z)(y).spin(15);return v.isDark?(C.addColorStop(0,b.lighten(10).setAlpha(E).toString()),C.addColorStop(1,D.darken(10).setAlpha(E).toString())):(C.addColorStop(0,b.lighten(10).setAlpha(E).toString()),C.addColorStop(1,D.setAlpha(E).toString())),C}}var r=(y=>(y[y.Right=0]="Right",y[y.Up=1]="Up",y[y.Left=2]="Left",y[y.Down=3]="Down",y))(r||{});function m(y,E,v,h=!1){let P=y.scales[E],a=null,C=null;for(let L=0;L<v.length;L++){let V=v[L][0];if((V<=P.min||a==null)&&(a=L),C=L,V>=P.max)break}if(a===C)return v[a][1];let D=v[a][0],b=v[C][0];D===-1/0&&(D=P.min),b===1/0&&(b=P.max);let M=Math.round(y.valToPos(D,E,!0)),x=Math.round(y.valToPos(b,E,!0)),R=M-x;if(R===0)return v[C][1];let S,O,U,I;y.scales.x.ori===l.wN.Horizontal?(S=U=0,O=M,I=x):(O=I=0,S=M,U=x);let w=(0,f.AE)().createLinearGradient(S,O,U,I),K;for(let L=a;L<=C;L++){let V=v[L],H=L===a?M:L===C?x:Math.round(y.valToPos(V[0],E,!0)),j=(M-H)/R;h&&L>a&&w.addColorStop(j,K),w.addColorStop(j,K=V[1])}return w}function c(y,E){let v=y.scales[E],h=1/0,P=-1/0;return y.series.forEach((a,C)=>{if(a.show&&a.scale===E)if(a.min==null){let D=y.data[C];for(let b=0;b<D.length;b++)D[b]!=null&&(h=Math.min(h,D[b]),P=Math.max(P,D[b]))}else h=Math.min(h,a.min),P=Math.max(P,a.max)}),P===h&&(h=v.min,P=v.max),[h,P]}function p(y,E,v,h,P,a){let C=v??P??null,D=h??a??null;if(C==null||D==null){let[b,M]=c(y,E);C=C??b??0,D=D??M??100}return[C,D]}function g(y,E,v,h,P,a,C,D){if(!v)throw Error("Missing colorMode required for color scheme gradients");if(!h)throw Error("Missing thresholds required for color scheme gradients");return(b,M)=>{let x=b.series[M].scale,R="";if(v.id===i.S.Thresholds)if(h.mode===s.H.Absolute){const S=h.steps.map(O=>[O.value,n.alpha(E.visualization.getColorByName(O.color),y)]);R=m(b,x,S,!0)}else{const[S,O]=p(b,x,P,a,C,D),U=O-S,I=h.steps.map(F=>[S+U*(F.value/100),n.alpha(E.visualization.getColorByName(F.color),y)]);R=m(b,x,I,!0)}else if(v.getColors){const S=v.getColors(E),[O,U]=p(b,x,P,a,C,D),I=U-O,F=S.map((w,K)=>[O+I*(K/(S.length-1)),n.alpha(E.visualization.getColorByName(w),y)]);R=m(b,x,F,!1)}return R}}},66243:(Y,T,e)=>{"use strict";e.d(T,{T:()=>l});var t=e(66111),n=e(41213),i=e(50215),s=e(45807);function l({id:f,events:u,renderEventMarker:o,mapEventToXYCoords:d,config:r}){const m=(0,t.useRef)(),[c,p]=(0,t.useState)(0),g=(0,n.Z)();(0,t.useLayoutEffect)(()=>{r.addHook("init",E=>{m.current=E}),r.addHook("draw",()=>{g()&&p(E=>E+1)})},[r,p]);const y=(0,t.useMemo)(()=>{const E=[];if(!m.current||u.length===0)return E;for(let v=0;v<u.length;v++){const h=u[v];for(let P=0;P<h.length;P++){const a=d(h,{fieldIndex:P,frameIndex:v});a&&E.push(t.createElement(i.J,{...a,key:`${f}-marker-${v}-${P}`},o(h,{fieldIndex:P,frameIndex:v})))}}return t.createElement(t.Fragment,null,E)},[u,o,c]);return m.current?t.createElement(s.K,{left:m.current.bbox.left/window.devicePixelRatio,top:m.current.bbox.top/window.devicePixelRatio},y):null}},50215:(Y,T,e)=>{"use strict";e.d(T,{J:()=>n});var t=e(66111);const n=({x:i,y:s,children:l})=>t.createElement("div",{style:{position:"absolute",top:`${s}px`,left:`${i}px`}},l)},45807:(Y,T,e)=>{"use strict";e.d(T,{K:()=>i});var t=e(9892),n=e(66111);const i=({children:s,left:l,top:f})=>{const u=(0,n.useMemo)(()=>t.css`
      position: absolute;
      overflow: visible;
      left: ${l}px;
      top: ${f}px;
    `,[l,f]);return n.createElement("div",{className:u},s)}},56709:(Y,T,e)=>{"use strict";e.d(T,{Jx:()=>n.J,K2:()=>i.K,TZ:()=>t.T});var t=e(66243),n=e(50215),i=e(45807)},16366:(Y,T,e)=>{"use strict";e.d(T,{C:()=>o});var t=e(82897),n=e.n(t),i=e(66111);const s=.1,l=2,f=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),u=d=>{let r=d.root.closest("[tabindex]"),m=new Set,c=null,p=null;if(!r)return;const g=(C,D)=>{const{cursor:b}=d;if(b.left===void 0||b.top===void 0)return;const{width:M,height:x}=d.over.style,[R,S]=[Math.floor(parseFloat(M)),Math.floor(parseFloat(x))];d.setCursor({left:(0,t.clamp)(b.left+C,0,R),top:(0,t.clamp)(b.top+D,0,S)})},y=C=>{if(m.size===0||!d){p=null;return}const M=(C-(p??C))*s;let x=0,R=0;m.has("ArrowUp")&&(R-=M),m.has("ArrowDown")&&(R+=M),m.has("ArrowLeft")&&(x-=M),m.has("ArrowRight")&&(x+=M),m.has("Shift")&&(x*=l,R*=l),g(x,R);const{cursor:S}=d;if(m.has(" ")&&S){const O=Number(d.over.style.height.slice(0,-2));d.setSelect({left:S.left<c?S.left:c,top:0,width:Math.abs(S.left-(c??S.left)),height:O},!1)}p=C,window.requestAnimationFrame(y)},E=C=>{if(C.key==="Tab"){d.setCursor({left:-5,top:-5});return}if(!f.has(C.key))return;if(C.preventDefault(),C.stopPropagation(),!m.has(C.key)){const b=m.size===0;m.add(C.key),c=C.key===" "&&c===null?d.cursor.left:c,b&&window.requestAnimationFrame(y)}},v=C=>{f.has(C.key)&&(m.delete(C.key),C.key===" "&&(C.preventDefault(),C.stopPropagation(),d.setSelect(d.select),c=null))},h=()=>{if(!r?.matches(":focus-visible"))return;const C=parseFloat(d.over.style.width),D=parseFloat(d.over.style.height);d.setCursor({left:C/2,top:D/2})},P=()=>{p=null,c=null,m.clear(),d.setSelect({left:0,top:0,width:0,height:0},!1)};r.addEventListener("keydown",E),r.addEventListener("keyup",v),r.addEventListener("focus",h),r.addEventListener("blur",P);const a=()=>{r?.removeEventListener("keydown",E),r?.removeEventListener("keyup",v),r?.removeEventListener("focus",h),r?.removeEventListener("blur",P),r=null};(d.hooks.destroy??=[]).push(a)},o=({config:d})=>((0,i.useLayoutEffect)(()=>d.addHook("init",u),[d]),null)},1105:(Y,T,e)=>{"use strict";e.d(T,{_:()=>P,i:()=>v});var t=e(66111),n=e(41213),i=e(56632),s=e(6194),l=e(53768),f=e(30471),u=e(2703),o=e(99098),d=e(574),r=e(40538),m=e(72648),c=e(85511),p=e(50800),g=e(20888),y=e(2445);const E=10,v=({mode:a=r.f3.Single,sortOrder:C=r.As.None,sync:D,timeZone:b,config:M,renderTooltip:x,...R})=>{const S=(0,t.useRef)(),O=(0,m.l4)(),[U,I]=(0,t.useState)(null),[F,w]=(0,t.useState)(null),[K,L]=(0,t.useState)([]),[V,H]=(0,t.useState)(null),[j,A]=(0,t.useState)(!1),_=(0,n.Z)(),k="TooltipPlugin";if((0,t.useEffect)(()=>{(0,y.Zp)(k,!0,`Focused series: ${U}, focused point: ${F}`)},[F,U]),(0,t.useLayoutEffect)(()=>{let G;const le=()=>{_()&&(A(!0),S.current?.root.classList.add("plot-active"))},fe=()=>{_()&&(H(null),A(!1),S.current?.root.classList.remove("plot-active"))};M.addHook("syncRect",(de,ee)=>G=ee),M.addHook("init",de=>{S.current=de,de.root.parentElement?.addEventListener("focus",le),de.over.addEventListener("mouseenter",le),de.root.parentElement?.addEventListener("blur",fe),de.over.addEventListener("mouseleave",fe),D&&D()===i.m.Crosshair&&de.root.classList.add("shared-crosshair")});const ae=M.getTooltipInterpolator();return ae?M.addHook("setCursor",de=>{ae(I,w,ee=>{if(ee){H(null);return}if(!G)return;const{x:me,y:q}=P(de,G);me!==void 0&&q!==void 0&&H({x:me,y:q})},de)}):(M.addHook("setLegend",de=>{_()&&(w(de.legend.idx),L(de.legend.idxs.slice()))}),M.addHook("setCursor",de=>{if(!G||!_())return;const{x:ee,y:me}=P(de,G);H(ee!==void 0&&me!==void 0?{x:ee,y:me}:null)}),M.addHook("setSeries",(de,ee)=>{_()&&I(ee)})),()=>{H(null),S.current&&(S.current.over.removeEventListener("mouseleave",fe),S.current.over.removeEventListener("mouseenter",le),S.current.root.parentElement?.removeEventListener("focus",le),S.current.root.parentElement?.removeEventListener("blur",fe))}},[M,H,A,w,L]),F===null||!j&&D&&D()===i.m.Crosshair)return null;let Q=R.data.fields[0];if(!Q)return null;const re=Q.display||(0,s.U_)({field:Q,timeZone:b,theme:O});let Z=null,oe=re(Q.values[F]).text;if(x)Z=x(R.data,U,F);else{if(a===r.f3.Single&&U!==null){const G=R.data.fields[U];if(!G)return null;const le=K?.[U]??F;oe=re(Q.values[le]).text;const ae=(G.display||(0,s.U_)({field:G,timeZone:b,theme:O}))(G.values[le]);Z=t.createElement(p.c,{series:[{color:ae.color||l.R,label:(0,f.CZ)(G,R.data,R.frames),value:ae?(0,u.zc)(ae):null}],timestamp:oe})}if(a===r.f3.Multi){let G=[];const le=R.data,fe=le.fields,ae=[];for(let de=0;de<fe.length;de++){const ee=le.fields[de];if(!ee||ee===Q||ee.type===o.fS.time||ee.type!==o.fS.number||ee.config.custom?.hideFrom?.tooltip||ee.config.custom?.hideFrom?.viz)continue;const me=R.data.fields[de].values[K[de]],q=ee.display(me);ae.push(me),G.push({color:q.color||l.R,label:(0,f.CZ)(ee,le,R.frames),value:q?(0,u.zc)(q):null,isActive:U===de})}if(C!==r.As.None){const de=[...G],ee=d.sortValues(C);G.sort((me,q)=>{const ne=de.indexOf(me),se=de.indexOf(q);return ee(ae[ne],ae[se])})}Z=t.createElement(p.c,{series:G,timestamp:oe})}}return t.createElement(c.h_,null,Z&&V&&t.createElement(g.S,{position:{x:V.x,y:V.y},offset:{x:E,y:E}},Z))};function h({left:a,top:C},D){return a===void 0||C===void 0?!1:a<0||a>D.width||C<0||C>D.height}function P(a,C){let D,b;const M=a.cursor.left||0,x=a.cursor.top||0;if(h(a.cursor,C)){const R=a.posToIdx(M);if(x<0||x>C.height){let S=(0,y.ah)(a,R);S&&(b=C.top+S,M>=0&&M<=C.width&&(D=C.left+a.valToPos(a.data[0][a.posToIdx(M)],a.series[0].scale)))}}else D=C.left+M,b=C.top+x;return{x:D,y:b}}},99375:(Y,T,e)=>{"use strict";e.d(T,{R:()=>s});var t=e(66111),n=e(2445);const i=5,s=({onZoom:l,config:f})=>{const[u,o]=(0,t.useState)(null);return(0,t.useEffect)(()=>{if(u){if((0,n.Zp)("ZoomPlugin",!1,"selected",u),u.bbox.width<i)return;l({from:u.min,to:u.max})}},[u]),(0,t.useLayoutEffect)(()=>{f.addHook("setSelect",d=>{const r=d.posToVal(d.select.left,"x"),m=d.posToVal(d.select.left+d.select.width,"x");o({min:r,max:m,bbox:{left:d.bbox.left/window.devicePixelRatio+d.select.left,top:d.bbox.top/window.devicePixelRatio,height:d.bbox.height/window.devicePixelRatio,width:d.select.width}}),d.setSelect({left:0,width:0},!1)})},[f]),null}},57989:(Y,T,e)=>{"use strict";e.d(T,{Cm:()=>i.C,Rb:()=>t.R,ii:()=>n.i});var t=e(99375),n=e(1105),i=e(16366)},13890:(Y,T,e)=>{"use strict";e.d(T,{L:()=>t});class t{constructor(i){this.props=i}}},2445:(Y,T,e)=>{"use strict";e.d(T,{Bj:()=>g,Kq:()=>c,Zp:()=>P,ah:()=>y,i7:()=>p,qt:()=>r});var t=e(99098),n=e(49052),i=e(40538),s=e(73289),l=e(88383),f=e(86979);const u=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function o(a){return a.replace(u,C=>`{${C}}`)}const d=(a,C,D)=>{let b=C%2?D[0]||D[2]:D[1]||D[3];return D[C]||!b?0:8},r={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[d,d,d,d],series:[],hooks:{}};var m=(a=>(a[a.Pos=1]="Pos",a[a.Neg=-1]="Neg",a))(m||{});function c(a){let C=[],{series:D,dir:b}=a,M=D.length-1,x=D.slice().reverse();return x.forEach((R,S)=>{if(S!==M){let O=x[S+1];C.push({series:[R,O],dir:-1*b})}}),C}function p(a){let C=new Map;return a.fields.forEach(({config:D,values:b},M)=>{if(M===0)return;let{custom:x}=D;if(x==null||x.hideFrom?.viz)return;let{stacking:R}=x;if(R==null)return;let{mode:S,group:O}=R;if(S===i.o0.None)return;let U=x.transform,I=E(U,b),F=x.drawStyle,w=F===i.l8.Bars?x.barAlignment:F===i.l8.Line?x.lineInterpolation:null,K=`${I}|${S}|${O}|${(0,f.z)(D)}|${F}|${w}`,L=C.get(K);L==null&&(L={series:[],dir:I},C.set(K,L)),L.series.push(M)}),[...C.values()]}function g(a,C,D){let b=Array(a.fields.length),M=C.length,x=a.length,R=M>0?Array(x).fill(0):[],S=M>0?Array(x).fill(!1):[],O=Array.from({length:M},()=>R.slice()),U=Array.from({length:M},()=>S.slice());if(C.forEach((I,F)=>{let w=U[F];I.series.forEach(K=>{let L=a.fields[K];if(L.config.custom?.hideFrom?.viz)return;let V=L.values;for(let H=0;H<x;H++)V[H]!=null&&(w[H]=!0)})}),a.fields.forEach((I,F)=>{let w=I.values;if(F===0){I.type===t.fS.time?b[F]=(0,n.J_)(I).values:b[F]=w;return}let{custom:K}=I.config;if(!K||K.hideFrom?.viz){b[F]=w;return}if(K.transform===i.pR.Constant){let V=w.findIndex(j=>j!=null),H=w[V];w=Array(w.length).fill(void 0),w[V]=H}else if(w=w.slice(),K.transform===i.pR.NegativeY)for(let V=0;V<w.length;V++)w[V]!=null&&(w[V]*=-1);let L=K.stacking?.mode;if(!L||L===i.o0.None)b[F]=w;else{let V=C.findIndex(_=>_.series.indexOf(F)>-1),H=O[V],j=U[V],A=b[F]=Array(x);for(let _=0;_<x;_++){let k=w[_];k!=null?A[_]=H[_]+=k:A[_]=j[_]?H[_]:k}}}),D){let I=b.map((F,w)=>{let K=C.findIndex(L=>L.series.indexOf(w)>-1);return K!==-1?O[K]:F});D({totals:I})}return a.fields.forEach((I,F)=>{if(F===0||I.config.custom?.hideFrom?.viz)return;if(I.config.custom?.stacking?.mode===i.o0.Percent){let K=C.findIndex(j=>j.series.indexOf(F)>-1),L=O[K],V=C[K],H=b[F];for(let j=0;j<x;j++){let A=H[j];A!=null&&(H[j]=L[j]===0?0:V.dir*(A/L[j]))}}}),b}function y(a,C){let D,b=1,M=1,x=a.data[1][C],R=a.data[1][C];for(let S=1;S<a.data.length;S++){const U=a.data[S][C];U!=null&&(x==null?x=U:U>x&&(x=a.data[S][C],b=S),R==null?R=U:U<R&&(R=a.data[S][C],M=S))}return R==null&&x==null?D=void 0:R!=null&&x!=null?D=(a.valToPos(R,a.series[M].scale)+a.valToPos(x,a.series[b].scale))/2:D=a.valToPos(R||x,a.series[b||M].scale),D!==void 0&&D<0&&(D=a.bbox.height/devicePixelRatio),D}function E(a,C){const D=v(C);return a===i.pR.NegativeY?D?1:-1:D?-1:1}function v(a,C=100){const D=a.length;if(D===0)return!1;let b=0,M=D-1;for(;b<=M&&a[b]==null;)b++;for(;M>=b&&a[M]==null;)M--;let x=0,R=0;if(M>=b){const S=Math.max(1,Math.floor((M-b+1)/C));for(let O=b;O<=M;O+=S){const U=a[O];U!=null&&(U<0||Object.is(U,-0)?x++:U>0&&R++)}if(x>R)return!0}return!1}const h=(0,l.h)("uPlot"),P=h.logger;(0,s.x)("graphng",void 0,h)},40419:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{ALERTING_COLOR:()=>s.ns,AxisPlacement:()=>o.LB,BarAlignment:()=>o.pu,BarValueVisibility:()=>o.eU,BracesPlugin:()=>u.hP,ClearPlugin:()=>u.Gp,ClipboardPlugin:()=>u.wl,DEFAULT_ANNOTATION_COLOR:()=>s.Jx,DOMUtil:()=>s.Qi,DrawStyle:()=>o.$6,EventsWithValidation:()=>s.JU,GlobalStyles:()=>l.nz,GraphGradientMode:()=>o.FI,GraphTresholdsStyleMode:()=>o.i3,IndentationPlugin:()=>u.Rc,LegendDisplayMode:()=>o.jK,LineInterpolation:()=>o.KC,NO_DATA_COLOR:()=>s._V,NewlinePlugin:()=>u.z2,NodeGraphDataFrameFieldNames:()=>s.zG,OK_COLOR:()=>s.te,PENDING_COLOR:()=>s.f7,PointVisibility:()=>o.mv,REGION_FILL_ALPHA:()=>s.iV,ReactUtils:()=>s.Ot,RunnerPlugin:()=>u.dv,SCHEMA:()=>s.Yi,ScaleDirection:()=>o.bQ,ScaleOrientation:()=>o.wN,SearchFunctionType:()=>s.nu,SelectionShortcutsPlugin:()=>u.$L,SlatePrism:()=>u.Ze,StackingMode:()=>o.o0,SuggestionsPlugin:()=>u.bm,ThemeContext:()=>l.Ni,TooltipDisplayMode:()=>o.f3,ansicolor:()=>s._J,attachDebugger:()=>s.xq,calculateFontSize:()=>s.MX,colors:()=>s.O9,commonOptionsBuilder:()=>f.q,createLogger:()=>s.hu,fuzzyMatch:()=>s.C6,getCanvasContext:()=>s.AE,getCellLinks:()=>s.iu,getScrollbarWidth:()=>s.np,getTagColor:()=>s.vm,getTagColorsFromName:()=>s.Bx,getTextColorForAlphaBackground:()=>s.bM,getTextColorForBackground:()=>s.Gc,getTheme:()=>l.gh,hasValidationEvent:()=>s.z3,isCompactUrl:()=>s.go,linkModelToContextMenuItems:()=>s.Rc,makeFragment:()=>s.xl,makeValue:()=>s.l1,measureText:()=>s.X1,mockTheme:()=>l.Zu,mockThemeContext:()=>l.sJ,regexValidation:()=>s.FE,sortedColors:()=>s.Wm,styleMixins:()=>l.GU,stylesFactory:()=>l.Bb,useForceUpdate:()=>s.NW,useStyles:()=>l.yK,useStyles2:()=>l.wW,useTheme:()=>l.Fg,useTheme2:()=>l.l4,validate:()=>s.Gu,withTheme:()=>l.Zz,withTheme2:()=>l.HE});var t=e(14835),i={};for(const d in t)d!=="default"&&(i[d]=()=>t[d]);e.d(T,i);var n=e(24539),i={};for(const d in n)["default","Alert","AlertingSettings","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","AutoSaveField","AutoSizeInput","Badge","BarGauge","BarGaugeDisplayMode","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","BrowserLabel","Button","ButtonCascader","ButtonGroup","ButtonSelect","CallToActionCard","Card","CardContainer","Cascader","CertificationKey","Checkbox","ClickOutsideWrapper","ClipboardButton","CodeEditor","CodeEditorSuggestionItemKind","CollapsableSection","Collapse","ColorPicker","ColorPickerInput","ConfirmButton","ConfirmModal","Container","ContextMenu","ControlledCollapse","Counter","CustomHeadersSettings","CustomScrollbar","DataLinkButton","DataLinkInput","DataLinksContextMenu","DataLinksInlineEditor","DataSourceHttpSettings","DatePicker","DatePickerWithInput","DateTimePicker","DeleteButton","Drawer","Dropdown","DropdownIndicator","EmptySearchResult","ErrorBoundary","ErrorBoundaryAlert","ErrorWithStack","EventsCanvas","FIXED_UNIT","FadeTransition","FeatureBadge","FeatureInfoBox","Field","FieldArray","FieldLinkList","FieldSet","FieldValidationMessage","FileDropzone","FileDropzoneDefaultChildren","FileListItem","FileUpload","FilterInput","FilterPill","Form","FormattedValueDisplay","FullWidthButtonContainer","Gauge","Graph","GraphContextMenu","GraphContextMenuHeader","GraphNG","GraphSeriesToggler","GraphWithLegend","HorizontalGroup","Icon","IconButton","InfoBox","InlineField","InlineFieldRow","InlineFormLabel","InlineLabel","InlineSegmentGroup","InlineSwitch","InlineToast","Input","InputControl","InteractiveTable","JSONFormatter","JsonExplorer","KeyboardPlugin","Label","LegacyForms","LegacyInputStatus","Legend","Link","LinkButton","List","LoadingBar","LoadingPlaceholder","Marker","Menu","MenuGroup","MenuItem","Modal","ModalHeader","ModalRoot","ModalTabContent","ModalTabsHeader","ModalsContext","ModalsController","ModalsProvider","MultiSelect","PageToolbar","Pagination","PanelChrome","PanelChromeErrorIndicator","PanelChromeLoadingIndicator","PanelContainer","PanelContextProvider","PanelContextRoot","PlotLegend","PluginSignatureBadge","Popover","PopoverController","Portal","PortalContainer","QueryField","RadioButtonGroup","RadioButtonList","RangeSlider","ReactMonacoEditor","RefreshPicker","RelativeTimeRangePicker","RenderUserContentAsHTML","ScaleDistribution","SecretInput","SecretTextArea","SecureSocksProxySettings","Segment","SegmentAsync","SegmentInput","SegmentSection","SegmentSelect","Select","SelectContainer","SeriesColorPicker","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","SeriesIcon","SeriesTable","SeriesTableRow","SeriesVisibilityChangeBehavior","SeriesVisibilityChangeMode","SetInterval","SlideOutTransition","Slider","Sparkline","Spinner","StatsPicker","Switch","TLSAuthSettings","Tab","TabContent","TabbedContainer","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tag","TagList","TagsInput","TextArea","TimeOfDayPicker","TimePickerTooltip","TimeRangeInput","TimeRangePicker","TimeSeries","TimeZonePicker","Toggletip","ToolbarButton","ToolbarButtonRow","Tooltip","TooltipPlugin","UPLOT_AXIS_FONT_SIZE","UPlotChart","UPlotConfigBuilder","UnitPicker","ValuePicker","VerticalGroup","VerticalTab","VirtualizedSelect","VizLayout","VizLegend","VizLegendListItem","VizRepeater","VizTooltip","VizTooltipContainer","WeekStartPicker","WithContextMenu","XYCanvas","ZoomPlugin","buildScaleKey","clearButtonStyles","convertOldAngularValueMapping","defaultIntervals","fieldMatchersUI","getCardStyles","getInputStyles","getPortalContainer","getSelectStyles","graphFieldOptions","graphTickFormatter","graphTimeFormat","preparePlotFrame","resetSelectStyles","sharedInputStyle","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","useGraphNGContext","usePanelContext","variableSuggestionToCodeEditorSuggestion","withErrorBoundary"].indexOf(d)<0&&(i[d]=()=>n[d]);e.d(T,i);var s=e(13643),l=e(34726),f=e(59851),u=e(8659),o=e(49557)},34315:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>p,r:()=>r});var t=e(66111),n=e(99098),i=e(72293),s=e(40538),l=e(26372),f=e(2594),u=e(24799),o=e(8581),d=e(46967);function r(g,y,E){const v=["Axis"];g.addRadio({path:"axisPlacement",name:"Placement",category:v,defaultValue:l.q.axisPlacement[0].value,settings:{options:l.q.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:v,defaultValue:"",settings:{placeholder:"Optional text"},showIf:h=>h.axisPlacement!==s.LB.Hidden,shouldApply:h=>h.type!==n.fS.time&&h.type!==n.fS.string}).addNumberInput({path:"axisWidth",name:"Width",category:v,settings:{placeholder:"Auto"},showIf:h=>h.axisPlacement!==s.LB.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:v,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]}}).addRadio({path:"axisColorMode",name:"Color",category:v,defaultValue:s.yK.Text,settings:{options:[{value:s.yK.Text,label:"Text"},{value:s.yK.Series,label:"Series"}]}}),g.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:v,editor:p,override:p,defaultValue:{type:s.wf.Linear},shouldApply:h=>h.type===n.fS.number,process:i.kG}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:v,defaultValue:!1,showIf:h=>h.scaleDistribution?.type!==s.wf.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:y.axisSoftMin,category:v,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:y.axisSoftMax,category:v,settings:{placeholder:"See: Standard options > Max"}})}const m=[{label:"Linear",value:s.wf.Linear},{label:"Logarithmic",value:s.wf.Log},{label:"Symlog",value:s.wf.Symlog}],c=[{label:"2",value:2},{label:"10",value:10}],p=({value:g,onChange:y})=>{const E=g?.type??s.wf.Linear,v=g?.log??2;return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:16}},t.createElement(f.S,{value:E,options:m,onChange:h=>{y({...g,type:h,log:h===s.wf.Linear?void 0:v})}})),(E===s.wf.Log||E===s.wf.Symlog)&&t.createElement(u.g,{label:"Log base"},t.createElement(o.Ph,{options:c,value:v,onChange:h=>{y({...g,log:h.value})}})),E===s.wf.Symlog&&t.createElement(u.g,{label:"Linear threshold"},t.createElement(d.I,{placeholder:"1",value:g?.linearThreshold,onChange:h=>{y({...g,linearThreshold:Number(h.currentTarget.value)})}})))}},91511:(Y,T,e)=>{"use strict";e.d(T,{B:()=>u});var t=e(82897),n=e.n(t),i=e(66111),s=e(52081),l=e(41165);const f=({value:o,onChange:d})=>{const r=(0,i.useCallback)(m=>{d({...o,[m]:!o[m]})},[o,d]);return i.createElement(s.Lh,{spacing:"xs"},Object.keys(o).map(m=>{const c=m;return i.createElement(l.B,{icon:o[c]?"eye-slash":"eye",onClick:()=>r(c),key:c,label:(0,t.startCase)(c),selected:o[c]})}))};function u(o){o.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:f,override:f,shouldApply:()=>!0,hideFromDefaults:!0,process:d=>d})}},31911:(Y,T,e)=>{"use strict";e.d(T,{J:()=>i});var t=e(30779),n=e(40538);function i(s,l=!0){s.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:n.jK.List,settings:{options:[{value:n.jK.List,label:"List"},{value:n.jK.Table,label:"Table"}]},showIf:f=>f.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:f=>f.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:f=>f.legend.showLegend&&f.legend.placement==="right"}),l&&s.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:t.S.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:f=>f.legend.showLegend!==!1})}},22110:(Y,T,e)=>{"use strict";e.d(T,{V:()=>c,n:()=>m});var t=e(66111),n=e(72293),i=e(99098),s=e(40538),l=e(52081),f=e(2594),u=e(46967),o=e(61860),d=e(8180),r=e(26372);const m=({value:p,context:g,onChange:y,item:E})=>t.createElement(l.Lh,null,t.createElement(f.S,{value:p?.mode||s.o0.None,options:E.settings.options,onChange:v=>{y({...p,mode:v})}}),g.isOverride&&p?.mode&&p?.mode!==s.o0.None&&t.createElement(u.I,{type:"text",placeholder:"Group",suffix:t.createElement(o.u,{content:"Name of the stacking group",placement:"top"},t.createElement(d.h,{name:"question-circle"})),defaultValue:p?.group,onChange:v=>{y({...p,group:v.currentTarget.value.trim()})}}));function c(p,g,y=["Graph styles"]){p.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:y,defaultValue:g,editor:m,override:m,settings:{options:r.q.stacking},process:n.kG,shouldApply:E=>E.type===i.fS.number})}},25272:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>t});function t(n,i=!0){i&&n.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),n.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},77587:(Y,T,e)=>{"use strict";e.d(T,{L:()=>n});var t=e(40538);function n(i,s=!1){const l=["Tooltip"],f=s?[{value:t.f3.Single,label:"Single"},{value:t.f3.None,label:"Hidden"}]:[{value:t.f3.Single,label:"Single"},{value:t.f3.Multi,label:"All"},{value:t.f3.None,label:"Hidden"}],u=[{value:t.As.None,label:"None"},{value:t.As.Ascending,label:"Ascending"},{value:t.As.Descending,label:"Descending"}];i.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:l,defaultValue:"single",settings:{options:f}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:l,defaultValue:t.As.None,showIf:o=>o.tooltip?.mode===t.f3.Multi,settings:{options:u}})}},59851:(Y,T,e)=>{"use strict";e.d(T,{q:()=>t});var t={};e.r(t),e.d(t,{ScaleDistributionEditor:()=>n.Y,StackingEditor:()=>u.n,addAxisConfig:()=>n.r,addHideFrom:()=>i.B,addLegendOptions:()=>s.J,addStackingConfig:()=>u.V,addTextSizeOptions:()=>f.Z,addTooltipOptions:()=>l.L});var n=e(34315),i=e(91511),s=e(31911),l=e(77587),f=e(25272),u=e(22110)},49557:(Y,T,e)=>{"use strict";e.d(T,{$6:()=>t.l8,FI:()=>t.FI,KC:()=>t.KC,LB:()=>t.LB,bQ:()=>t.bQ,eU:()=>t.Jp,f3:()=>t.f3,i3:()=>t.i3,jK:()=>t.jK,mv:()=>t.Jp,o0:()=>t.o0,pu:()=>t.pu,wN:()=>t.wN});var t=e(40538)},13193:(Y,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(44288);const n={"[":"]","{":"}","(":")"},i="brace_match";function s(){return{onKeyDown(l,f,u){const{value:o}=f;switch(l.key){case"(":case"{":case"[":{const{start:{offset:d,key:r},end:{offset:m,key:c},focus:{offset:p}}=o.selection,g=o.focusText.text;if(o.selection.isExpanded)return l.preventDefault(),f.insertTextByKey(r,d,l.key).insertTextByKey(c,m+1,n[l.key]).moveEndBackward(1),!0;if(p===g.length||g[p]===" "||Object.values(n).includes(g[p])){l.preventDefault();const y=n[l.key],E={key:`${i}-${(0,t.Z)()}`,type:`${i}-${y}`,anchor:{key:r,offset:d,object:"point"},focus:{key:c,offset:m+1,object:"point"},object:"annotation"};return f.insertText(l.key).insertText(y).addAnnotation(E).moveBackward(1),!0}break}case")":case"}":case"]":{const d=o.anchorText.text,r=o.selection.anchor.offset,m=d[r],c=l.key,p=`${i}-${c}`,g=o.annotations.find(y=>y?.type===p&&y.anchor.key===o.anchorText.key);if(g&&m===c&&!o.selection.isExpanded)return l.preventDefault(),f.moveFocusForward(1).removeAnnotation(g).moveAnchorForward(1),!0;break}case"Backspace":{const d=o.anchorText.text,r=o.selection.anchor.offset,m=d[r-1],c=d[r];if(n[m]&&n[m]===c)return l.preventDefault(),f.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return u()}}}},74778:(Y,T,e)=>{"use strict";e.d(T,{G:()=>t});function t(){return{onKeyDown(n,i,s){const l=i.value;if(l.selection.isExpanded)return s();if(n.key==="k"&&n.ctrlKey){n.preventDefault();const f=l.anchorText.text,u=l.selection.anchor.offset,d=f.length-u;return i.deleteForward(d),!0}return s()}}}},6464:(Y,T,e)=>{"use strict";e.d(T,{w:()=>i});const t=(s,l,f)=>{if(!s.length)return;const u=s.slice(0,-1).join("").length+s.length-1;return s.join(`
`).slice(l,u+f)},n=s=>s?.replace(/[\uFEFF]/g,"");function i(){const s={onCopy(l,f,u){l.preventDefault();const{document:o,selection:d}=f.value,{start:{offset:r},end:{offset:m}}=d,c=o.getLeafBlocksAtRange(d).toArray().map(g=>g.text),p=n(t(c,r,m));return p&&l.clipboardData&&l.clipboardData.setData("Text",p),!0},onPaste(l,f,u){if(l.preventDefault(),l.clipboardData){const d=n(l.clipboardData.getData("Text"))?.split(`
`);if(d&&d.length){f.insertText(d[0]);for(const r of d.slice(1))f.splitBlock().insertText(r)}}return!0}};return{...s,onCut(l,f,u){return s.onCopy(l,f,u),f.deleteAtRange(f.value.selection),!0}}}},784:(Y,T,e)=>{"use strict";e.d(T,{R:()=>r});var t=e(59641),n=e(95787),i=e(43809);const s=(0,t.TB)("mod+["),l=(0,t.TB)("shift+tab"),f=(0,t.TB)("mod+]"),u="  ",o=(m,c,p)=>{const{startBlock:g,endBlock:y,selection:{start:{offset:E,key:v},end:{offset:h,key:P}}}=c.value;if(i.Z.serialize(c.value)==="")return;m.preventDefault();const a=g.getFirstText();a&&E===0&&v===a.key&&h===a.text.length&&P===a.key||!g.equals(y)?d(c,"right"):c.insertText(u)},d=(m,c)=>{const p=m.value.selection,g=m.value.document.getLeafBlocksAtRange(p).toArray();if(c==="left")for(const y of g){const E=y.text.length-y.text.trimLeft().length,v=y.getFirstText().key,h={anchor:{key:v,offset:E,path:[]},focus:{key:v,offset:E,path:[]}};m.deleteBackwardAtRange(n.e6.create(h),Math.min(u.length,E))}else{const{startText:y}=m.value,E=y.text.slice(0,p.start.offset),v=/^\s*$/.test(E);for(const h of g)m.insertTextByKey(h.getFirstText().key,0,u);v&&m.moveStartBackward(u.length)}};function r(){return{onKeyDown(m,c,p){if(s(m)||l(m))m.preventDefault(),d(c,"left");else if(f(m))m.preventDefault(),d(c,"right");else if(m.key==="Tab")o(m,c,p);else return p();return!0}}}},8659:(Y,T,e)=>{"use strict";e.d(T,{$L:()=>u.$,Gp:()=>n.G,Rc:()=>s.R,Ze:()=>o.Z,bm:()=>d.b,dv:()=>f.d,hP:()=>t.h,wl:()=>i.w,z2:()=>l.z});var t=e(13193),n=e(74778),i=e(6464),s=e(784),l=e(9830),f=e(47838),u=e(71096),o=e(67660),d=e(73958)},9830:(Y,T,e)=>{"use strict";e.d(T,{z:()=>n});function t(i){let s=i.length-i.trimLeft().length;if(s){let l=i[0];for(;--s;)l+=i[0];return l}return""}function n(){return{onKeyDown(i,s,l){const f=s.value;if(f.selection.isExpanded)return l();if(i.key==="Enter"){i.preventDefault();const{startBlock:u}=f,o=u.text,d=t(o);return s.splitBlock().insertText(d).focus()}return l()}}}},47838:(Y,T,e)=>{"use strict";e.d(T,{d:()=>t});function t({handler:n}){return{onKeyDown(i,s,l){return n&&i.key==="Enter"&&(i.shiftKey||i.ctrlKey)?(i.preventDefault(),n(i),s):l()}}}},71096:(Y,T,e)=>{"use strict";e.d(T,{$:()=>i});var t=e(59641);const n=(0,t.TB)("mod+l");function i(){return{onKeyDown(s,l,f){if(n(s)){s.preventDefault();const{focusBlock:u,document:o}=l.value;l.moveAnchorToStartOfBlock(),o.getNextBlock(u.key)?l.moveFocusToStartOfNextBlock():l.moveFocusToEndOfText()}else return f();return!0}}}},95514:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>n});const n="prism-token"},67660:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>c,a:()=>E});var t=e(57706),n=e.n(t),i=e(95787),s=e(95514),l=e(220),f=e(66111);function u(v){return v.object==="block"&&v.type==="code_block"}function o(v){return"javascript"}function d(v,h,P){const{decoration:a}=v;if(a.type!==s.Z)return P();const C=a.data.get("className");return f.createElement("span",{className:C},v.children)}class r extends(0,l.Record)({onlyIn:u,getSyntax:o,renderDecoration:d}){constructor(h){super(h)}}const m=r;function c(v={},h=n().languages){const P=new m(v);return{decorateNode:(a,C,D)=>{if(!P.onlyIn(a))return D();const b=i.gO.create(a),M=P.getSyntax(b),x=h[M];if(!x)return[];const S=b.getTexts().map(F=>F&&F.getText()).join(`
`),O=n().tokenize(S,x),U=E(O),I=C.value.data.set("tokens",U);return C.setData(I),p(P,O,b)},renderDecoration:(a,C,D)=>P.renderDecoration({children:a.children,decoration:a.decoration},C,D)}}function p(v,h,P){const a=P.getTexts(),C=[];let D=0,b=0;return a.forEach(M=>{b=D+M.getText().length;let x=0;function R(S,O){if(typeof S=="string"){if(O){const U=g({text:M,textStart:D,textEnd:b,start:x,end:x+S.length,className:`prism-token token ${O}`,block:P});U&&C.push(U)}x+=S.length}else if(O=`${O} ${S.type}`,S.alias&&(O+=" "+S.alias),typeof S.content=="string"){const U=g({text:M,textStart:D,textEnd:b,start:x,end:x+S.content.length,className:`prism-token token ${O}`,block:P});U&&C.push(U),x+=S.content.length}else for(let U=0;U<S.content.length;U+=1)R(S.content[U],O)}h.forEach(R),D=b+1}),C}function g({text:v,textStart:h,textEnd:P,start:a,end:C,className:D,block:b}){return a>=P||C<=h?null:(a=Math.max(a,h),C=Math.min(C,P),a-=h,C-=h,b.createDecoration({object:"decoration",anchor:{key:v.key,offset:a,object:"point"},focus:{key:v.key,offset:C,object:"point"},type:s.Z,data:{className:D}}))}function y(v){return typeof v=="string"?[{content:v,types:[],aliases:[]}]:Array.isArray(v)?v.flatMap(h=>y(h)):v instanceof n().Token?y(v.content).flatMap(h=>{let P=[];return typeof v.alias=="string"?P=[v.alias]:P=v.alias??[],{content:h.content,types:[v.type,...h.types],aliases:[...P,...h.aliases]}}):[]}function E(v){const h=y(v);if(!h.length)return[];const P=h[0];P.prev=null,P.next=h.length>=2?h[1]:null,P.offsets={start:0,end:P.content.length};for(let C=1;C<h.length-1;C++)h[C].prev=h[C-1],h[C].next=h[C+1],h[C].offsets={start:h[C-1].offsets.end,end:h[C-1].offsets.end+h[C].content.length};const a=h[h.length-1];return a.prev=h.length>=2?h[h.length-2]:null,a.next=null,a.offsets={start:h.length>=2?h[h.length-2].offsets.end:0,end:h.length>=2?h[h.length-2].offsets.end+a.content.length:a.content.length},h}},73958:(Y,T,e)=>{"use strict";e.d(T,{b:()=>I});var t=e(82897),n=e(66111),i=e(15638),s=e(32436),l=e(72648),f=e(26519),u=e(13265);const o=w=>w.reduce((K,{items:L,label:V})=>(K.push({label:V,kind:f.c.GroupTitle}),L.reduce((H,j)=>(H.push(j),H),K)),[]),d=w=>w.reduce((K,L)=>K.length<L.label.length?L.label:K,""),r=(w,K,L)=>{const V=(0,u.Z)(L,{font:w.typography.fontFamilyMonospace,fontSize:w.typography.bodySmall.fontSize,fontWeight:"normal"}),H=c(V.width,w),j=m(V.height,w),A=p(j,K);return{listWidth:H,listHeight:A,itemHeight:j}},m=(w,K)=>{const L=K.spacing.gridSize*2;return w+L},c=(w,K)=>{const L=K.spacing.gridSize*3,V=800;return Math.min(Math.max(w+L,200),V)},p=(w,K)=>{const L=Math.min(K.length,10),V=100,H=L*w;return Math.max(H,V)};var g=e(9892),y=e(2631);const E=(w,K,L)=>({typeaheadItem:g.css`
      label: type-ahead-item;
      z-index: 11;
      padding: ${w.spacing(1,1,1,2)};
      border: ${w.colors.border.medium};
      overflow-y: scroll;
      overflow-x: hidden;
      outline: none;
      background: ${w.colors.background.secondary};
      color: ${w.colors.text};
      box-shadow: 0 0 20px ${w.v1.colors.dropdownShadow};
      visibility: ${L===!0?"visible":"hidden"};
      width: 250px;
      min-height: ${K+parseInt(w.spacing(.25),10)}px;
      position: relative;
      word-break: break-word;
    `}),v=({item:w,height:K})=>{const L=w&&!!w.documentation,V=w?w.label:"",H=(0,y.a)(w?.documentation),j=(0,l.l4)(),A=E(j,K,L);return n.createElement("div",{className:(0,g.cx)([A.typeaheadItem])},n.createElement("b",null,V),n.createElement("hr",null),n.createElement("div",{dangerouslySetInnerHTML:{__html:H}}))};var h=e(55271),P=e.n(h),a=e(69636);const C=w=>({typeaheadItem:g.css`
    border: none;
    background: none;
    text-align: left;
    label: type-ahead-item;
    height: auto;
    font-family: ${w.typography.fontFamilyMonospace};
    padding: ${w.spacing(1,1,1,2)};
    font-size: ${w.typography.bodySmall.fontSize};
    text-overflow: ellipsis;
    overflow: hidden;
    z-index: 11;
    display: block;
    white-space: nowrap;
    cursor: pointer;
    transition: color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),
      background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1);
  `,typeaheadItemSelected:g.css`
    label: type-ahead-item-selected;
    background-color: ${w.colors.background.secondary};
  `,typeaheadItemMatch:g.css`
    label: type-ahead-item-match;
    color: ${w.v1.palette.yellow};
    border-bottom: 1px solid ${w.v1.palette.yellow};
    padding: inherit;
    background: inherit;
  `,typeaheadItemGroupTitle:g.css`
    label: type-ahead-item-group-title;
    color: ${w.colors.text.secondary};
    font-size: ${w.typography.bodySmall.fontSize};
    line-height: ${w.typography.body.lineHeight};
    padding: ${w.spacing(1)};
  `}),D=w=>{const K=(0,l.wW)(C),{isSelected:L,item:V,prefix:H,style:j,onMouseEnter:A,onMouseLeave:_,onClickItem:k}=w,Q=L?(0,g.cx)([K.typeaheadItem,K.typeaheadItemSelected]):(0,g.cx)([K.typeaheadItem]),re=(0,g.cx)([K.typeaheadItemMatch]),Z=(0,g.cx)([K.typeaheadItemGroupTitle]),oe=V.label||"";return V.kind===f.c.GroupTitle?n.createElement("li",{className:Z,style:j},n.createElement("span",null,oe)):n.createElement("li",{role:"none"},n.createElement("button",{role:"menuitem",className:Q,style:j,onMouseDown:k,onMouseEnter:A,onMouseLeave:_,type:"button"},V.highlightParts!==void 0?n.createElement(a.H,{text:oe,highlightClassName:re,highlightParts:V.highlightParts}):n.createElement(P(),{textToHighlight:oe,searchWords:[H??""],autoEscape:!0,highlightClassName:re})))},b=(w,K)=>w-K*Math.floor(w/K);class M extends n.PureComponent{constructor(){super(...arguments),this.listRef=(0,n.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const K=o(this.props.groupedItems),L=d(K),{listWidth:V,listHeight:H,itemHeight:j}=r(this.context,K,L);this.setState({listWidth:V,listHeight:H,itemHeight:j,allItems:K})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(K,L)=>{if(this.state.typeaheadIndex!==null&&L.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,t.isEqual)(K.groupedItems,this.props.groupedItems)===!1){const V=o(this.props.groupedItems),H=d(V),{listWidth:j,listHeight:A,itemHeight:_}=r(this.context,V,H);this.setState({listWidth:j,listHeight:A,itemHeight:_,allItems:V,typeaheadIndex:null})}},this.onMouseEnter=K=>{this.setState({hoveredItem:K})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=K=>{const L=this.state.allItems.length;if(L){const V=this.state.typeaheadIndex||0;let H=b(V+K,L);this.state.allItems[H].kind===f.c.GroupTitle&&(H=b(H+K,L)),this.setState({typeaheadIndex:H});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}get menuPosition(){if(!window.getSelection)return"";const K=window.getSelection(),L=K&&K.anchorNode;if(L&&L.parentElement){const V=L.parentElement.getBoundingClientRect(),H=window.scrollX,j=window.scrollY;return`position: absolute; display: flex; top: ${V.top+j+V.height+6}px; left: ${V.left+H-2}px`}return""}render(){const{prefix:K,isOpen:L=!1,origin:V}=this.props,{allItems:H,listWidth:j,listHeight:A,itemHeight:_,hoveredItem:k,typeaheadIndex:Q}=this.state,re=k||Q,Z=H[k||Q||0];return n.createElement(x,{origin:V,isOpen:L,style:this.menuPosition},n.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},n.createElement(s.t7,{ref:this.listRef,itemCount:H.length,itemSize:_,itemKey:oe=>{const G=H&&H[oe];return G?`${oe}-${G.label}`:`${oe}`},width:j,height:A},({index:oe,style:G})=>{const le=H&&H[oe];return le?n.createElement(D,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(le):{},isSelected:Q===null?!1:H[Q]===le,item:le,prefix:K,style:G,onMouseEnter:()=>this.onMouseEnter(oe),onMouseLeave:this.onMouseLeave}):null})),re&&n.createElement(v,{height:A,item:Z}))}}M.contextType=l.Ni;class x extends n.PureComponent{constructor(K){super(K);const{index:L=0,origin:V="query",style:H}=K;this.node=document.createElement("div"),this.node.setAttribute("style",H),this.node.classList.add("slate-typeahead",`slate-typeahead-${V}-${L}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),i.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var R=e(12724),S=e(8644),O=e(95514);const U=250;function I({onTypeahead:w,cleanText:K,onWillApplySuggestion:L,portalOrigin:V}){let H,j={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const A=(0,t.debounce)(F,U),_=k=>{j={...j,...k}};return{onBlur:(k,Q,re)=>(j={...j,groupedItems:[]},re()),onClick:(k,Q,re)=>(j={...j,groupedItems:[]},re()),onKeyDown:(k,Q,re)=>{const oe=j.groupedItems.length;switch(k.key){case"Escape":{if(oe)return k.preventDefault(),j={...j,groupedItems:[]},Q.insertText("");break}case"ArrowDown":case"ArrowUp":if(oe){k.preventDefault(),H.moveMenuIndex(k.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(k.shiftKey||k.ctrlKey)&&oe)return k.preventDefault(),H.insertSuggestion();break}case"Tab":{if(oe)return k.preventDefault(),H.insertSuggestion();break}default:{k.key.length===1&&A(Q,_,w,K);break}}return re()},commands:{selectSuggestion:(k,Q)=>{const re=j.groupedItems;if(!re||!re.length)return k;const Z=k.applyTypeahead(Q);return A(k,_,w,K),Z},applyTypeahead:(k,Q)=>{let re=Q.insertText||Q.label;const Z=Q.kind==="function",oe=Q.move||0,G=oe>0?oe:0,le=oe<0?-oe:0,{typeaheadPrefix:fe,typeaheadText:ae,typeaheadContext:de}=j;L&&(re=L(re,{groupedItems:j.groupedItems,typeaheadContext:de,typeaheadPrefix:fe,typeaheadText:ae}));const ee=Q.deleteBackwards||fe.length,q=(K?K(ae):ae).length-fe.length,ne=ae.indexOf(fe),he=fe&&(q>0&&ne>-1||re===ae)&&!Z?q+ne:0;if(re.match(/\n/)){const ue=(0,R.xl)(re);return k.deleteBackward(ee).deleteForward(he).insertFragment(ue).focus(),k}return j={...j,groupedItems:[]},k.snapshotSelection().deleteBackward(ee).deleteForward(he).insertText(re).moveForward(G).moveBackward(le).focus(),k}},renderEditor(k,Q,re){if(Q.value.selection.isExpanded)return re();const Z=re();return n.createElement(n.Fragment,null,Z,n.createElement(M,{menuRef:oe=>H=oe,origin:V,prefix:j.typeaheadPrefix,isOpen:!!j.groupedItems.length,groupedItems:j.groupedItems,onSelectSuggestion:Q.selectSuggestion}))}}}const F=async(w,K,L,V)=>{if(!L)return;const{value:H}=w,{selection:j}=H,A=H.document.getClosestBlock(H.focusBlock.key),_=H.selection.start.offset-1,k=A&&A.getDecorations(w),Q=k?k.filter(me=>me.start.offset<=_&&me.end.offset>_&&me.type===O.Z).toArray():[],re=k&&k.filter(me=>me.end.offset<=_&&me.type===O.Z&&me.data.get("className").includes("label-key")).last(),Z=re&&H.focusText.text.slice(re.start.offset,re.end.offset),oe=Q.map(me=>me.data.get("className")).join(" ").split(" ").filter(me=>me.length);let G=H.focusText.text,le=G.slice(0,j.focus.offset);Q.length&&(G=H.focusText.text.slice(Q[0].start.offset,Q[0].end.offset),le=H.focusText.text.slice(Q[0].start.offset,j.focus.offset));const fe=le.match(/(?:!?=~?"?|")(.*)/);fe?le=fe[1]:V&&(le=V(le));const{suggestions:ae,context:de}=await L({prefix:le,text:G,value:H,wrapperClasses:oe,labelKey:Z||void 0,editor:w}),ee=ae.map(me=>{if(!me.items)return me;const q=me.searchFunctionType||(me.prefixMatch?S.Z.Prefix:S.Z.Word),ne=S.n[q];let se={...me};return le&&(me.skipFilter||(se.items=se.items.filter(he=>(he.filterText||he.label).length>=le.length),se.items=ne(se.items,le)),se.items=se.items.filter(he=>!(he.insertText===le||(he.filterText??he.label)===le))),me.skipSort||(se.items=(0,t.sortBy)(se.items,he=>he.sortText===void 0?he.sortValue!==void 0?he.sortValue:he.label:he.sortText||he.label)),se}).filter(me=>me.items&&me.items.length);K({groupedItems:ee,typeaheadPrefix:le,typeaheadContext:de,typeaheadText:G}),w.blur().focus()}},29428:(Y,T,e)=>{"use strict";e.d(T,{n:()=>p});var t=e(65788),n=e(66111),i=e(72648);function s(g){return t.css`
    .panel-options-group {
      border-bottom: 1px solid ${g.colors.border.weak};
    }

    .panel-options-group__header {
      padding: ${g.spacing(1,2,1,1)};
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      font-weight: 500;
      color: ${g.colors.text.primary};

      &:hover {
        background: ${g.colors.emphasize(g.colors.background.primary,.03)};
      }
    }

    .panel-options-group__icon {
      color: ${g.colors.text.secondary};
      margin-right: ${g.spacing(1)};
      padding: ${g.spacing(0,.9,0,.6)};
    }

    .panel-options-group__title {
      position: relative;
    }

    .panel-options-group__body {
      padding: ${g.spacing(1,2,1,4)};
    }
  `}function l(g){return t.css`
    .card-section {
      margin-bottom: ${g.spacing(4)};
    }

    .card-list {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      list-style-type: none;
    }

    .card-item {
      display: block;
      height: 100%;
      background: ${g.colors.background.secondary};
      box-shadow: none;
      padding: ${g.spacing(2)};
      border-radius: 4px;

      &:hover {
        background: ${g.colors.emphasize(g.colors.background.secondary,.03)};
      }

      .label-tag {
        margin-left: ${g.spacing(1)};
        font-size: 11px;
        padding: 2px 6px;
      }
    }

    .card-item-body {
      display: flex;
      overflow: hidden;
    }

    .card-item-details {
      overflow: hidden;
    }

    .card-item-header {
      margin-bottom: ${g.spacing(2)};
    }

    .card-item-type {
      color: ${g.colors.text.secondary};
      text-transform: uppercase;
      font-size: ${g.typography.size.sm};
      font-weight: ${g.typography.fontWeightMedium};
    }

    .card-item-badge {
      margin: 6px 0;
    }

    .card-item-notice {
      font-size: ${g.typography.size.sm};
    }

    .card-item-name {
      color: ${g.colors.text.primary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-label {
      margin-left: ${g.spacing(1)};
    }

    .card-item-sub-name {
      color: ${g.colors.text.secondary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-sub-name--header {
      color: ${g.colors.text.secondary};
      text-transform: uppercase;
      margin-bottom: ${g.spacing(2)};
      font-size: ${g.typography.size.sm};
      font-weight: bold;
    }

    .card-list-layout-grid {
      .card-item-type {
        display: inline-block;
      }

      .card-item-notice {
        font-size: ${g.typography.size.sm};
        display: inline-block;
        margin-left: ${g.spacing(2)};
      }

      .card-item-header-action {
        float: right;
      }

      .card-item-wrapper {
        width: 100%;
        padding: ${g.spacing(0,2,2,0)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item-figure {
        margin: ${g.spacing(0,2,2,0)}0;
        height: 80px;

        img {
          width: 80px;
        }
      }

      .card-item-name {
        font-size: ${g.typography.h3.fontSize};
      }

      ${g.breakpoints.up("md")} {
        .card-item-wrapper {
          width: 50%;
        }
      }

      ${g.breakpoints.up("lg")} {
        .card-item-wrapper {
          width: 33.333333%;
        }
      }

      &.card-list-layout-grid--max-2-col {
        ${g.breakpoints.up("lg")} {
          .card-item-wrapper {
            width: 50%;
          }
        }
      }
    }

    .card-list-layout-list {
      .card-item-wrapper {
        padding: 0;
        width: 100%;
        margin-bottom: ${g.spacing(1)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item {
        border-radius: 2px;
      }

      .card-item-header {
        float: right;
        text-align: right;
      }

      .card-item-figure {
        margin: ${g.spacing(0,2,0,0)};
        img {
          width: 48px;
        }
      }

      .card-item-name {
        font-size: ${g.typography.h4.fontSize};
      }

      .card-item-sub-name {
        font-size: ${g.typography.size.sm};
      }

      .layout-selector {
        margin-right: 0;
      }
    }
  `}var f=e(85419);function u(g){return t.css`
    html {
      -ms-overflow-style: scrollbar;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      height: 100%;
      font-size: ${g.typography.htmlFontSize}px;
      font-family: ${g.typography.fontFamily};
      line-height: ${g.typography.body.lineHeight};
      font-kerning: normal;
    }

    :root {
      color-scheme: ${g.colors.mode};
    }

    body {
      height: 100%;
      width: 100%;
      position: absolute;
      color: ${g.colors.text.primary};
      background-color: ${g.colors.background.canvas};
      ${o(g.typography.body)}
    }

    h1,
    .h1 {
      ${o(g.typography.h1)}
    }
    h2,
    .h2 {
      ${o(g.typography.h2)}
    }
    h3,
    .h3 {
      ${o(g.typography.h3)}
    }
    h4,
    .h4 {
      ${o(g.typography.h4)}
    }
    h5,
    .h5 {
      ${o(g.typography.h5)}
    }
    h6,
    .h6 {
      ${o(g.typography.h6)}
    }

    p {
      margin: 0 0 ${g.spacing(2)};
    }

    button {
      letter-spacing: ${g.typography.body.letterSpacing};

      &:focus-visible {
        outline: ${(0,f.getFocusStyles)(g)};
      }
      &:focus {
        outline: none;
      }
    }

    // Ex: 14px base font * 85% = about 12px
    small {
      font-size: ${g.typography.bodySmall.fontSize};
    }

    b,
    strong {
      font-weight: ${g.typography.fontWeightMedium};
    }

    em {
      font-style: italic;
      color: ${g.colors.text.primary};
    }

    cite {
      font-style: normal;
    }

    // Utility classes
    .muted {
      color: ${g.colors.text.secondary};
    }

    a.muted:hover,
    a.muted:focus {
      color: ${g.colors.text.primary};
    }

    .text-warning {
      color: ${g.colors.warning.text};

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.warning.text,.15)};
      }
    }

    .text-error {
      color: ${g.colors.error.text};

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.error.text,.15)};
      }
    }

    .text-success {
      color: $success-text-color;

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.success.text,.15)};
      }
    }

    a {
      cursor: pointer;
      color: ${g.colors.text.primary};
      text-decoration: none;

      &:focus {
        outline: none;
      }

      &:focus-visible {
        ${(0,f.getFocusStyles)(g)}
      }

      &: [disabled] {
        cursor: default;
        pointer-events: none !important;
      }
    }

    .text-link {
      text-decoration: underline;
    }

    .text-left {
      text-align: left;
    }

    .text-right {
      text-align: right;
    }

    .text-center {
      text-align: center;
    }

    .highlight-search-match {
      background: ${g.components.textHighlight.background};
      color: ${g.components.textHighlight.text};
      padding: 0;
    }
  `}function o(g){return`
    margin: 0;
    font-size: ${g.fontSize};
    line-height: ${g.lineHeight};
    font-weight: ${g.fontWeight};
    letter-spacing: ${g.letterSpacing};
    font-family: ${g.fontFamily};
    margin-bottom: 0.45em;
  `}function d(g){return t.css`
    // fix white background on intercom in dark mode
    iframe.intercom-borderless-frame {
      color-scheme: ${g.colors.mode};
    }
  `}function r(g){return t.css`
    input,
    button,
    select,
    textarea {
      font-size: ${g.typography.body.fontSize};
      font-weight: ${g.typography.body.fontWeight};
      line-height: ${g.typography.body.lineHeight};
    }
    input,
    button,
    select,
    textarea {
      font-family: ${g.typography.body.fontFamily};
    }

    input,
    select {
      background-color: ${g.components.input.background};
      color: ${g.components.input.text};
      border: none;
      box-shadow: none;
    }

    textarea {
      height: auto;
    }

    // Reset width of input images, buttons, radios, checkboxes
    input[type='file'],
    input[type='image'],
    input[type='submit'],
    input[type='reset'],
    input[type='button'],
    input[type='radio'],
    input[type='checkbox'] {
      width: auto; // Override of generic input selector
    }
  `}function m(g){return t.css`
    // TODO copy from _utils.scss
  `}function c(g){const y=g.breakpoints.values.xxl+g.spacing.gridSize*2+g.components.sidemenu.width;return t.css`
    .grafana-app {
      display: flex;
      align-items: stretch;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .main-view {
      position: relative;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      height: 100%;
      flex: 1 1 0;
      min-width: 0;
    }

    .page-scrollbar-content {
      display: flex;
      min-height: 100%;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    .page-container {
      flex-grow: 1;
      flex-basis: 100%;
      padding-left: ${g.spacing(2)};
      padding-right: ${g.spacing(2)};

      ${g.breakpoints.up("sm")} {
        margin: ${g.spacing(0,1)};
      }

      ${g.breakpoints.up("md")} {
        margin: ${g.spacing(0,2)};
      }

      @media (min-width: ${y}px) {
        max-width: ${g.breakpoints.values.xxl}px;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }
    }

    .page-full {
      margin-left: ${g.spacing(2)};
      padding-left: ${g.spacing(2)};
      padding-right: ${g.spacing(2)};
    }

    .page-body {
      padding: ${g.spacing(1)};
      background: ${g.components.panel.background};
      border: 1px solid ${g.components.panel.borderColor};
      margin-bottom: 32px;

      ${g.breakpoints.up("md")} {
        padding: ${g.spacing(2)};
      }

      ${g.breakpoints.up("lg")} {
        padding: ${g.spacing(3)};
      }
    }

    .page-heading {
      font-size: ${g.typography.h4.fontSize};
      margin-top: 0;
      margin-bottom: ${g.spacing(2)};
    }

    .page-action-bar {
      margin-bottom: ${g.spacing(2)};
      display: flex;
      align-items: flex-start;

      > a,
      > button,
      > div:nth-child(2) {
        margin-left: ${g.spacing(2)};
      }
    }

    .page-action-bar--narrow {
      margin-bottom: 0;
    }

    .page-action-bar__spacer {
      width: ${g.spacing(2)};
      flex-grow: 1;
    }

    .page-sub-heading {
      margin-bottom: ${g.spacing(2)};
    }

    .page-sub-heading-icon {
      margin-left: ${g.spacing(1)};
      margin-top: ${g.spacing(.5)};
    }

    .page-hidden {
      display: none;
    }
  `}function p(){const g=(0,i.l4)();return n.createElement(t.Global,{styles:[u(g),d(g),r(g),c(g),l(g),s(g),m(g)]})}},72648:(Y,T,e)=>{"use strict";e.d(T,{Fg:()=>m,HE:()=>r,Ni:()=>o,Zz:()=>d,l4:()=>c,sJ:()=>y,wW:()=>g,yK:()=>p});var t=e(24420),n=e.n(t),i=e(66111),s=e(21544),l=e(7804);let f=null;const u=new WeakMap,o=i.createContext((0,s.j)());o.displayName="ThemeContext";const d=E=>{const v=h=>{const P=f||o;return i.createElement(P.Consumer,null,a=>i.createElement(E,{...h,theme:a.v1}))};return v.displayName=`WithTheme(${E.displayName})`,n()(v,E),v},r=E=>{const v=h=>{const P=f||o;return i.createElement(P.Consumer,null,a=>i.createElement(E,{...h,theme:a}))};return v.displayName=`WithTheme(${E.displayName})`,n()(v,E),v};function m(){return(0,i.useContext)(f||o).v1}function c(){return(0,i.useContext)(f||o)}function p(E){const v=m();let h=u.get(E);return h||(h=(0,l.B)(E),u.set(E,h)),h(v)}function g(E){const v=c();let h=u.get(E);return h||(h=(0,l.B)(E),u.set(E,h)),h(v)}const y=E=>(f=i.createContext(E),()=>{f=null})},34726:(Y,T,e)=>{"use strict";e.d(T,{nz:()=>u.n,Ni:()=>t.Ni,gh:()=>s,Zu:()=>l,sJ:()=>t.sJ,GU:()=>o,Bb:()=>f.B,yK:()=>t.yK,wW:()=>t.wW,Fg:()=>t.Fg,l4:()=>t.l4,Zz:()=>t.Zz,HE:()=>t.HE});var t=e(72648),n=e(21544);let i;const s=(d="dark")=>i?i(d):(0,n.j)({colors:{mode:d}}).v1,l=d=>(i=d,()=>{i=null});var f=e(7804),u=e(29428),o=e(85419)},85419:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{cardChrome:()=>n,focusCss:()=>o,getFocusStyles:()=>r,getMouseFocusStyles:()=>d,getTooltipContainerStyles:()=>m,hoverColor:()=>i,listItem:()=>s,listItemSelected:()=>l,mediaUp:()=>f});var t=e(28550);function n(c){return`
    background: ${c.colors.background.secondary};
    &:hover {
      background: ${i(c.colors.background.secondary,c)};
    }
    box-shadow: ${c.components.panel.boxShadow};
    border-radius: ${c.shape.radius.default};
`}function i(c,p){return p.isDark?(0,t.Z)(c).brighten(2).toString():(0,t.Z)(c).darken(2).toString()}function s(c){return`
  background: ${c.colors.background.secondary};
  &:hover {
    background: ${i(c.colors.background.secondary,c)};
  }
  box-shadow: ${c.components.panel.boxShadow};
  border-radius: ${c.shape.radius.default};
`}function l(c){return`
    background: ${i(c.colors.background.secondary,c)};
    color: ${c.colors.text.maxContrast};
`}function f(c){return`only screen and (min-width: ${c})`}const u=c=>c.hasOwnProperty("v1"),o=c=>{const p=u(c),g=p?c.colors.background.canvas:c.colors.bodyBg,y=p?c.colors.primary.main:c.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${g}, 0 0 0px 4px ${y};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function d(c){return{outline:"none",boxShadow:"none"}}function r(c){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${c.colors.background.canvas}, 0 0 0px 4px ${c.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const m=c=>`
  overflow: hidden;
  background: ${c.colors.background.secondary};
  box-shadow: ${c.shadows.z2};
  max-width: 800px;
  padding: ${c.spacing(1)};
  border-radius: ${c.shape.radius.default};
  z-index: ${c.zIndex.tooltip};
`},7804:(Y,T,e)=>{"use strict";e.d(T,{B:()=>n});var t=e(58635);function n(i){return(0,t.Z)(i)}},26519:(Y,T,e)=>{"use strict";e.d(T,{c:()=>t});var t=(n=>(n.GroupTitle="GroupTitle",n))(t||{})},5771:()=>{"use strict"},50622:(Y,T,e)=>{"use strict";e.d(T,{BI:()=>i,WZ:()=>l,e7:()=>s,iJ:()=>t.iJ});var t=e(84559),n=e(99098);const i=()=>Object.keys(t._S);function s(f){return l(f?.type)}function l(f){if(f)switch(f){case n.fS.time:return"clock-nine";case n.fS.string:return"font";case n.fS.number:return"calculator-alt";case n.fS.boolean:return"toggle-on";case n.fS.trace:return"info-circle";case n.fS.enum:return"list-ol";case n.fS.geo:return"map-marker";case n.fS.other:return"brackets-curly"}return"question-circle"}},24539:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{CompletionItemKind:()=>l.c,getAvailableIcons:()=>o.BI,getFieldTypeIcon:()=>o.e7,getFieldTypeIconName:()=>o.WZ,toIconName:()=>o.iJ});var t=e(2729),n=e.n(t),y={};for(const E in t)E!=="default"&&(y[E]=()=>t[E]);e.d(T,y);var i=e(96590),s=e.n(i),y={};for(const E in i)E!=="default"&&(y[E]=()=>i[E]);e.d(T,y);var l=e(26519),f=e(5771),u=e.n(f),y={};for(const E in f)["default","CompletionItemKind"].indexOf(E)<0&&(y[E]=()=>f[E]);e.d(T,y);var o=e(50622),d=e(64343),r=e.n(d),y={};for(const E in d)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(E)<0&&(y[E]=()=>d[E]);e.d(T,y);var m=e(76891),c=e.n(m),y={};for(const E in m)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(E)<0&&(y[E]=()=>m[E]);e.d(T,y);var p=e(53581),g=e.n(p),y={};for(const E in p)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(E)<0&&(y[E]=()=>p[E]);e.d(T,y)},96590:()=>{"use strict"},53581:()=>{"use strict"},64343:()=>{"use strict"},76891:()=>{"use strict"},2729:()=>{"use strict"},66120:(Y,T,e)=>{"use strict";e.d(T,{i:()=>t});const t=(n,i)=>{n.key==="Tab"||n.altKey||n.ctrlKey||n.metaKey||(n.stopPropagation(),n.key==="Escape"&&i())}},16514:(Y,T,e)=>{"use strict";e.d(T,{Gc:()=>y,Jx:()=>l,O9:()=>m,Wm:()=>v,_V:()=>o,bM:()=>E,f7:()=>d,iV:()=>r,ns:()=>u,te:()=>f});var t=e(82897),n=e.n(t),i=e(28550);const s=4,l="rgba(0, 211, 255, 1)",f="rgba(11, 237, 50, 1)",u="rgba(237, 46, 24, 1)",o="rgba(150, 150, 150, 1)",d="rgba(247, 149, 32, 1)",r=.09,m=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function c(h){const P=(0,t.map)(h,p),a=(0,t.sortBy)(P,["h"]),C=(0,t.chunk)(a,s),D=(0,t.map)(C,M=>(0,t.sortBy)(M,"l")),b=(0,t.flattenDeep)((0,t.zip)(...D));return(0,t.map)(b,g)}function p(h){return(0,i.Z)(h).toHsl()}function g(h){return(0,i.Z)(h).toHexString()}function y(h){return(0,i.Z)(h).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function E(h,P){const a=(0,i.Z)(h),C=a.getBrightness();return a.getAlpha()<.3?P?"rgb(247, 248, 250)":"rgb(32, 34, 38)":C>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let v=c(m)},79406:(Y,T,e)=>{"use strict";e.d(T,{R:()=>t,g:()=>n});const t=i=>i().map(s=>({label:s.title,ariaLabel:s.title,url:s.href,target:s.target,icon:`${s.target==="_blank"?"external-link-alt":"link"}`,onClick:s.onClick})),n=i=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(i)},73289:(Y,T,e)=>{"use strict";e.d(T,{x:()=>t});function t(n,i,s){}},39027:(Y,T,e)=>{"use strict";e.d(T,{O:()=>t});function t(n){const s=n.lastIndexOf("."),l=n.substring(s),f=n.substring(0,s);return f.length<16?n:`${f.substring(0,16)}...${l}`}},27303:(Y,T,e)=>{"use strict";e.d(T,{C:()=>i});var t=e(82897),n=e.n(t);function i(s,l){let f=0,u=s.indexOf(l);l=l.replace(/\s/g,"");const o=[];if(u!==-1)return{distance:0,found:!0,ranges:[{start:u,end:u+l.length-1}]};for(const d of l){const r=s.indexOf(d,u);if(r===-1)return{distance:1/0,ranges:[],found:!1};if(u!==-1&&(f+=r-u),u=r+1,o.length===0)o.push({start:r,end:r});else{const m=(0,t.last)(o);r===m.end+1?m.end++:o.push({start:r,end:r})}}return{distance:f,ranges:o,found:!0}}},37951:(Y,T,e)=>{"use strict";e.d(T,{c:()=>f,t:()=>o});var t=e(97925),n=e(66111),i=e(80332),s=e(89880);function l(){t.ZP.options.lng||t.ZP.use(i.Db).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const f=d=>(l(),n.createElement(s.c,{...d})),u=t.ZP.t,o=(d,r,m)=>(l(),u(d,r,m))},13643:(Y,T,e)=>{"use strict";e.d(T,{ns:()=>l.ns,Jx:()=>l.Jx,Qi:()=>t,JU:()=>f.JU,_V:()=>l._V,zG:()=>h,te:()=>l.te,f7:()=>l.f7,iV:()=>l.iV,Ot:()=>s,Yi:()=>u.Yi,nu:()=>g.Z,_J:()=>y._J,xq:()=>v.x,MX:()=>c.MX,O9:()=>l.O9,hu:()=>E.h,C6:()=>P.C,AE:()=>c.AE,iu:()=>m.i,np:()=>r.n,vm:()=>d.vm,Bx:()=>d.Bx,bM:()=>l.bM,Gc:()=>l.Gc,z3:()=>f.z3,go:()=>o.g,Rc:()=>o.R,xl:()=>u.xl,l1:()=>u.l1,X1:()=>c.X1,FE:()=>f.FE,Wm:()=>l.Wm,NW:()=>p.N,Gu:()=>f.Gu});var t={};e.r(t),e.d(t,{getNextCharacter:()=>i,getPreviousCousin:()=>n}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(a){const C=(this.document||this.ownerDocument).querySelectorAll(a);let D=this,b;do{for(b=C.length;--b>=0&&C.item(b)!==D;);D=D.parentElement}while(b<0&&D);return D});function n(a,C){let D=a.parentElement.previousSibling,b;for(;D;){if(b=D.querySelector(C),b)return b;D=D.previousSibling}}function i(a){const C=(a||window).getSelection();if(!C||!C.anchorNode)return null;const D=C.getRangeAt(0),b=C.anchorNode.textContent,M=D.startOffset;return b.slice(M,M+1)}var s=e(61970),l=e(16514),f=e(97291),u=e(12724),o=e(79406),d=e(3385),r=e(90771),m=e(30901),c=e(4176),p=e(32434),g=e(8644),y=e(2525),E=e(88383),v=e(73289),h=(a=>(a.id="id",a.title="title",a.subTitle="subTitle",a.mainStat="mainStat",a.secondaryStat="secondaryStat",a.source="source",a.target="target",a.detail="detail__",a.arc="arc__",a.color="color",a))(h||{}),P=e(27303)},88383:(Y,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(82897),n=e.n(t);const i=(0,t.throttle)((...l)=>{console.log(...l)},500),s=l=>{let f=!1;return{logger:(u,o=!1,...d)=>{},enable:()=>f=!0,disable:()=>f=!1,isEnabled:()=>f}}},4176:(Y,T,e)=>{"use strict";e.d(T,{AE:()=>l,MX:()=>u,X1:()=>f});let t;const n=new Map,i=500;let s="";function l(){return t||(t=document.createElement("canvas").getContext("2d")),t}function f(o,d,r=400){const m=`${r} ${d}px 'Inter'`,c=o+m,p=n.get(c);if(p)return p;const g=l();s!==m&&(g.font=s=m);const y=g.measureText(o);return n.size===i&&n.clear(),n.set(c,y),y}function u(o,d,r,m,c,p){const g=f(o,14,p),y=d/(g.width+2)*14,E=r/m,v=Math.min(E,y);return Math.min(v,c??v)}},61970:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{getChildId:()=>n,renderOrCallToRender:()=>i});var t=e(66111);function n(s){let l;const f=t.Children.only(s);return"id"in f?.props?l=f.props.id:"inputId"in f.props&&(l=f?.props.inputId),typeof l=="string"?l:void 0}function i(s,l){if(t.isValidElement(s)||typeof s=="string"||typeof s=="number")return s;if(typeof s=="function"&&l)return s(l);throw new Error(`${s} is not a React element nor a function that returns React element`)}},90771:(Y,T,e)=>{"use strict";e.d(T,{n:()=>n});let t=null;function n(){if(t!==null)return t;if(typeof document<"u"){const i=document.createElement("div"),s={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(s).map(l=>{i.style[l]=s[l]}),document.body.appendChild(i),t=i.offsetWidth-i.clientWidth,document.body.removeChild(i)}else t=0;return t||0}},8644:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>n,n:()=>f});var t=e(27303),n=(u=>(u.Word="Word",u.Prefix="Prefix",u.Fuzzy="Fuzzy",u))(n||{});const f={Word:(u,o)=>u.filter(d=>(d.filterText||d.label).includes(o)),Prefix:(u,o)=>u.filter(d=>(d.filterText||d.label).startsWith(o)),Fuzzy:(u,o)=>(o=o.toLowerCase(),u.filter(d=>{const{distance:r,ranges:m,found:c}=(0,t.C)(d.label.toLowerCase(),o);return c?(d.sortValue=r,d.highlightParts=m,!0):!1}))}},12724:(Y,T,e)=>{"use strict";e.d(T,{Yi:()=>n,l1:()=>s,xl:()=>i});var t=e(95787);const n={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},i=(l,f)=>{const u=l.split(`
`).map(d=>t.gO.create({type:"code_line",nodes:[t.xv.create(d)]})),o=t.gO.create({data:{syntax:f},type:"code_block",nodes:u});return t.BB.create({nodes:[o]})},s=(l,f)=>{const u=i(l,f);return t.B4.create({document:u})}},30901:(Y,T,e)=>{"use strict";e.d(T,{i:()=>t});const t=(n,i)=>{let s;if(n.getLinks&&(s=n.getLinks({valueRowIndex:i.index})),!!s){for(let l=0;l<s?.length;l++)if(s[l].onClick){const f=s[l].onClick;s[l].onClick=u=>{u.ctrlKey||u.metaKey||u.shiftKey||(u.preventDefault(),f(u,{field:n,rowIndex:i.index}))}}return s}}},3385:(Y,T,e)=>{"use strict";e.d(T,{Bx:()=>i,vm:()=>s});const t=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],n=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function i(u=""){const o=l(u.toLowerCase()),d=Math.abs(o%t.length);return s(d)}function s(u){return{color:t[u],borderColor:n[u]}}function l(u){let o=5381;for(let d=0;d<u.length;d++)o=(o<<5)+o+u.charCodeAt(d);return o}var f={getTagColorsFromName:i}},21133:(Y,T,e)=>{"use strict";e.d(T,{k:()=>i});var t=e(9892),n=e(5680);function i(s,l,f,u,o){return{arrow:t.css`
      height: 1rem;
      width: 1rem;
      position: absolute;
      pointer-events: none;

      &::before {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        width: 0;
      }

      &::after {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        position: absolute;
        width: 0;
      }
    `,container:t.css`
      background-color: ${l};
      border-radius: ${s.shape.radius.default};
      border: 1px solid ${f};
      box-shadow: ${s.shadows.z2};
      color: ${u};
      font-size: ${s.typography.bodySmall.fontSize};
      padding: ${s.spacing(o.topBottom,o.rightLeft)};
      transition: opacity 0.3s;
      z-index: ${s.zIndex.tooltip};
      max-width: 400px;
      overflow-wrap: break-word;

      &[data-popper-interactive='false'] {
        pointer-events: none;
      }

      &[data-popper-placement*='bottom'] > div[data-popper-arrow='true'] {
        left: 0;
        margin-top: -7px;
        top: 0;

        &::before {
          border-color: transparent transparent ${f} transparent;
          border-width: 0 8px 7px 8px;
          position: absolute;
          top: -1px;
        }

        &::after {
          border-color: transparent transparent ${l} transparent;
          border-width: 0 8px 7px 8px;
        }
      }

      &[data-popper-placement*='top'] > div[data-popper-arrow='true'] {
        bottom: 0;
        left: 0;
        margin-bottom: -14px;

        &::before {
          border-color: ${f} transparent transparent transparent;
          border-width: 7px 8px 0 7px;
          position: absolute;
          top: 1px;
        }

        &::after {
          border-color: ${l} transparent transparent transparent;
          border-width: 7px 8px 0 7px;
        }
      }

      &[data-popper-placement*='right'] > div[data-popper-arrow='true'] {
        left: 0;
        margin-left: -10px;

        &::before {
          border-color: transparent ${f} transparent transparent;
          border-width: 7px 6px 7px 0;
        }

        &::after {
          border-color: transparent ${l} transparent transparent;
          border-width: 6px 7px 7px 0;
          left: 2px;
          top: 1px;
        }
      }

      &[data-popper-placement*='left'] > div[data-popper-arrow='true'] {
        margin-right: -11px;
        right: 0;

        &::before {
          border-color: transparent transparent transparent ${f};
          border-width: 7px 0 6px 7px;
        }

        &::after {
          border-color: transparent transparent transparent ${l};
          border-width: 6px 0 5px 5px;
          left: 1px;
          top: 1px;
        }
      }

      code {
        border: none;
        display: inline;
        background: ${n.darken(l,.1)};
        color: ${u};
      }

      pre {
        background: ${n.darken(l,.1)};
        color: ${u};
      }

      a {
        color: ${u};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `,headerClose:t.css`
      color: ${s.colors.text.secondary};
      position: absolute;
      right: ${s.spacing(1)};
      top: ${s.spacing(1.5)};
      background-color: transparent;
      border: 0;
    `,header:t.css`
      padding-top: ${s.spacing(1)};
      padding-bottom: ${s.spacing(2)};
    `,body:t.css`
      padding-top: ${s.spacing(1)};
      padding-bottom: ${s.spacing(1)};
    `,footer:t.css`
      padding-top: ${s.spacing(2)};
      padding-bottom: ${s.spacing(1)};
    `}}},32434:(Y,T,e)=>{"use strict";e.d(T,{N:()=>n});var t=e(66111);function n(){const[i,s]=(0,t.useState)(0);return()=>s(l=>l+1)}},97291:(Y,T,e)=>{"use strict";e.d(T,{FE:()=>s,Gu:()=>n,JU:()=>t,z3:()=>i});var t=(l=>(l.onBlur="onBlur",l.onFocus="onFocus",l.onChange="onChange",l))(t||{});const n=(l,f)=>{const u=f.reduce((o,d)=>d.rule(l)?o:o.concat(d.errorMessage),[]);return u.length>0?u:null},i=(l,f)=>f&&f[l],s=(l,f)=>({rule:u=>!!u.match(l),errorMessage:f||"Value is not valid"})},42879:(Y,T,e)=>{"use strict";e.d(T,{z:()=>t});const t={Breadcrumbs:{breadcrumb:n=>`data-testid ${n} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:n=>`${n} menu`,MenuGroup:n=>`${n} menu group`,MenuItem:n=>`${n} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:n=>`data-testid Panel header ${n}`,headerItems:n=>`Panel header item ${n}`,menuItems:n=>`data-testid Panel menu item ${n}`,menu:n=>`data-testid Panel menu ${n}`,containerByTitle:n=>`${n} panel`,headerCornerInfo:n=>`Panel header ${n}`,loadingBar:()=>"Panel loading bar",HoverWidget:{container:"data-test-id hover-header-container",dragIcon:"data-testid drag-icon"}},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:n=>`gpl alias ${n}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:n=>`VizLegend series ${n}`},Drawer:{General:{title:n=>`Drawer title ${n}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:n=>`${n} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"data-testid toggle-viz-picker",toggleVizOptions:"data-testid toggle-viz-options",toggleTableView:"toggle-table-view",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:n=>`Tab ${n}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"Rich history button",addQuery:"Query editor add query button"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:n=>`${n}`,title:n=>`Query editor row title ${n}`,container:n=>`Query editor row ${n}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:n=>`Alert ${n}`,alertV2:n=>`data-testid Alert ${n}`},TransformTab:{content:"Transform editor tab content",newTransform:n=>`New transform ${n}`,transformationEditor:n=>`Transformation editor ${n}`,transformationEditorDebugger:n=>`Transformation editor debugger ${n}`},Transforms:{card:n=>`New transform ${n}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"search transformations"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:n=>`${n}`,itemButton:n=>`data-testid ${n}`},QueryEditorToolbarItem:{button:n=>`QueryEditor toolbar item button ${n}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:n=>n?`Options group ${n}`:"Options group",toggle:n=>n?`Options group ${n} toggle`:"Options group toggle"},PluginVisualization:{item:n=>`Plugin visualization item ${n}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"data-testid Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:n=>`Value picker button ${n}`,select:n=>`Value picker select ${n}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:n=>`data-testid Collapse folder ${n}`,expandFolder:n=>`data-testid Expand folder ${n}`,dashboardItem:n=>`${t.Search.dashboardItems} ${n}`,dashboardCard:n=>`data-testid Search card ${n}`,folderHeader:n=>`data-testid Folder header ${n}`,folderContent:n=>`data-testid Folder content ${n}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:n=>`Call to action button ${n}`,buttonV2:n=>`data-testid Call to action button ${n}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:n=>`data-testid suggestion-${n}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:n=>`data-testid dashboard-row-title-${n}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"},Annotations:{annotationsTypeInput:"annotations-type-input",annotationsChoosePanelInput:"choose-panels-input"}}},68183:(Y,T,e)=>{"use strict";e.d(T,{wl:()=>i});var t=e(42879);const i={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"data-testid Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:s=>`Data source list item ${s}`},EditDataSource:{url:s=>`/datasources/edit/${s}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:s=>`Data source plugin item ${s}`,dataSourcePluginsV2:s=>`Add new data source ${s}`},ConfirmModal:{delete:"data-testid Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:s=>`data-testid ${s}`,addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:s=>`/d/${s}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:s=>`data-testid Dashboard template variables submenu Label ${s}`,submenuItemValueDropDownValueLinkTexts:s=>`data-testid Dashboard template variables Variable Value DropDown value link text ${s}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:s=>`data-testid Dashboard template variables Variable Value DropDown option text ${s}`,Annotations:{annotationsWrapper:"data-testid annotation-wrapper",annotationLabel:s=>`data-testid Dashboard annotations submenu Label ${s}`,annotationToggle:s=>`data-testid Dashboard annotations submenu Toggle ${s}`}},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:s=>`Dashboard settings section item ${s}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:t.z.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:t.z.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"},NewAnnotation:{panelFilterSelect:"data-testid annotations-panel-filter",showInLabel:"show-in-label",previewInDashboard:"data-testid annotations-preview"}},Variables:{List:{addVariableCTA:t.z.CallToActionCard.button("Add variable"),addVariableCTAV2:t.z.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:s=>`Variable editor Table Name field ${s}`,tableRowDefinitionFields:s=>`Variable editor Table Definition field ${s}`,tableRowArrowUpButtons:s=>`Variable editor Table ArrowUp button ${s}`,tableRowArrowDownButtons:s=>`Variable editor Table ArrowDown button ${s}`,tableRowDuplicateButtons:s=>`Variable editor Table Duplicate button ${s}`,tableRowRemoveButtons:s=>`Variable editor Table Remove button ${s}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:t.z.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}},Annotations:{marker:"data-testid annotation-marker"}},Dashboards:{url:"/dashboards",dashboards:s=>`Dashboard search item ${s}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard or panel",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"}},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:s=>`/d-solo/${s}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"Delete playlist item"},BrowseDashbards:{table:{row:s=>`data-testid ${s} row`,checkbox:s=>`data-testid ${s} checkbox`}},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button"}},UserListPage:{tabs:{allUsers:"data-testid all-users-tab",orgUsers:"data-testid org-users-tab",publicDashboardsUsers:"data-testid public-dashboards-users-tab",users:"data-testid users-tab"},org:{url:"/org/users"},admin:{url:"/admin/users"},publicDashboards:{container:"data-testid public-dashboards-users-list"},UserListAdminPage:{container:"data-testid user-list-admin-page"},UsersListPage:{container:"data-testid users-list-page"},UsersListPublicDashboardsPage:{container:"data-testid users-list-public-dashboards-page",DashboardsListModal:{listItem:s=>`data-testid dashboards-list-item-${s}`}}}},components:t.z}},40538:(Y,T,e)=>{"use strict";e.d(T,{As:()=>w,B5:()=>t,Bd:()=>re,FI:()=>E,IG:()=>O,Jp:()=>m,KC:()=>g,LB:()=>d,M8:()=>V,Q8:()=>s,QH:()=>L,Ss:()=>_,UV:()=>o,Y4:()=>Q,ap:()=>U,b8:()=>k,bQ:()=>a,eK:()=>n,f3:()=>F,h2:()=>H,i3:()=>D,iT:()=>oe,jG:()=>I,jK:()=>b,kW:()=>f,kv:()=>u,l8:()=>c,o0:()=>v,pR:()=>p,pc:()=>S,pu:()=>h,q1:()=>l,v7:()=>j,wN:()=>P,wf:()=>y,wm:()=>x,xy:()=>i,yK:()=>r});var t=(G=>(G.Linear="linear",G.Quad="quad",G))(t||{}),n=(G=>(G.Clamped="clamped",G.Mod="mod",G))(n||{}),i=(G=>(G.Field="field",G.Fixed="fixed",G.Template="template",G))(i||{}),s=(G=>(G.Field="field",G.Fixed="fixed",G.Mapping="mapping",G))(s||{}),l=(G=>(G.Auto="auto",G.Coords="coords",G.Geohash="geohash",G.Lookup="lookup",G))(l||{}),f=(G=>(G.Count="count",G.Size="size",G))(f||{}),u=(G=>(G.auto="auto",G.ge="ge",G.le="le",G.unknown="unknown",G))(u||{}),o=(G=>(G.Ascending="Ascending",G.Descending="Descending",G))(o||{}),d=(G=>(G.Auto="auto",G.Bottom="bottom",G.Hidden="hidden",G.Left="left",G.Right="right",G.Top="top",G))(d||{}),r=(G=>(G.Series="series",G.Text="text",G))(r||{}),m=(G=>(G.Always="always",G.Auto="auto",G.Never="never",G))(m||{}),c=(G=>(G.Bars="bars",G.Line="line",G.Points="points",G))(c||{}),p=(G=>(G.Constant="constant",G.NegativeY="negative-Y",G))(p||{}),g=(G=>(G.Linear="linear",G.Smooth="smooth",G.StepAfter="stepAfter",G.StepBefore="stepBefore",G))(g||{}),y=(G=>(G.Linear="linear",G.Log="log",G.Ordinal="ordinal",G.Symlog="symlog",G))(y||{}),E=(G=>(G.Hue="hue",G.None="none",G.Opacity="opacity",G.Scheme="scheme",G))(E||{}),v=(G=>(G.None="none",G.Normal="normal",G.Percent="percent",G))(v||{}),h=(G=>(G[G.After=1]="After",G[G.Before=-1]="Before",G[G.Center=0]="Center",G))(h||{}),P=(G=>(G[G.Horizontal=0]="Horizontal",G[G.Vertical=1]="Vertical",G))(P||{}),a=(G=>(G[G.Down=-1]="Down",G[G.Left=-1]="Left",G[G.Right=1]="Right",G[G.Up=1]="Up",G))(a||{});const C={dash:[]};var D=(G=>(G.Area="area",G.Dashed="dashed",G.DashedAndArea="dashed+area",G.Line="line",G.LineAndArea="line+area",G.Off="off",G.Series="series",G))(D||{}),b=(G=>(G.Hidden="hidden",G.List="list",G.Table="table",G))(b||{});const M={calcs:[]};var x=(G=>(G.Auto="auto",G.Horizontal="horizontal",G.Vertical="vertical",G))(x||{});const R={timezone:[]};var S=(G=>(G.Background="background",G.BackgroundSolid="background_solid",G.None="none",G.Value="value",G))(S||{}),O=(G=>(G.Area="area",G.Line="line",G.None="none",G))(O||{}),U=(G=>(G.Auto="auto",G.Center="center",G))(U||{}),I=(G=>(G.Auto="auto",G.Name="name",G.None="none",G.Value="value",G.ValueAndName="value_and_name",G))(I||{}),F=(G=>(G.Multi="multi",G.None="none",G.Single="single",G))(F||{}),w=(G=>(G.Ascending="asc",G.Descending="desc",G.None="none",G))(w||{});const K={calcs:[]};var L=(G=>(G.Basic="basic",G.Gradient="gradient",G.Lcd="lcd",G))(L||{}),V=(G=>(G.Color="color",G.Hidden="hidden",G.Text="text",G))(V||{}),H=(G=>(G.Auto="auto",G.BasicGauge="basic",G.ColorBackground="color-background",G.ColorBackgroundSolid="color-background-solid",G.ColorText="color-text",G.Gauge="gauge",G.GradientGauge="gradient-gauge",G.Image="image",G.JSONView="json-view",G.LcdGauge="lcd-gauge",G.Sparkline="sparkline",G))(H||{}),j=(G=>(G.Basic="basic",G.Gradient="gradient",G))(j||{});const A={fields:[],reducer:[]};var _=(G=>(G.Lg="lg",G.Md="md",G.Sm="sm",G))(_||{}),k=(G=>(G.CSV="csv",G.Date="date",G.Distributed="distributed",G.DoubleQuote="doublequote",G.Glob="glob",G.HTML="html",G.JSON="json",G.Lucene="lucene",G.PercentEncode="percentencode",G.Pipe="pipe",G.QueryParam="queryparam",G.Raw="raw",G.Regex="regex",G.SQLString="sqlstring",G.SingleQuote="singlequote",G.Text="text",G.UriEncode="uriencode",G))(k||{}),Q=(G=>(G.exact="exact",G.none="none",G.numbers="numbers",G.signature="signature",G))(Q||{}),re=(G=>(G.EQ="eq",G.GT="gt",G.GTE="gte",G.LT="lt",G.LTE="lte",G.NEQ="neq",G))(re||{});const Z={align:"auto",inspect:!1},oe="browser"},85596:(Y,T,e)=>{"use strict";e.d(T,{AU:()=>D,G_:()=>s,Gu:()=>d,H3:()=>p,Hi:()=>y,NU:()=>P,Ql:()=>M,SJ:()=>b,Vb:()=>a,ZM:()=>C,bn:()=>i,gW:()=>l,n5:()=>g});const t={tags:[]},n={exclude:!1,ids:[]},i={list:[]},s={enable:!0,hide:!1},l={id:"00000000-0000-0000-0000-000000000000",multi:!1,options:[],skipUrlSync:!1};var f=(x=>(x[x.never=0]="never",x[x.onDashboardLoad=1]="onDashboardLoad",x[x.onTimeRangeChanged=2]="onTimeRangeChanged",x))(f||{}),u=(x=>(x[x.dontHide=0]="dontHide",x[x.hideLabel=1]="hideLabel",x[x.hideVariable=2]="hideVariable",x))(u||{}),o=(x=>(x[x.alphabeticalAsc=1]="alphabeticalAsc",x[x.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",x[x.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",x[x.alphabeticalDesc=2]="alphabeticalDesc",x[x.disabled=0]="disabled",x[x.numericalAsc=3]="numericalAsc",x[x.numericalDesc=4]="numericalDesc",x))(o||{}),d=(x=>(x.Done="Done",x.Error="Error",x.Loading="Loading",x.NotStarted="NotStarted",x.Streaming="Streaming",x))(d||{});const r={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var m=(x=>(x.ContinuousBlPu="continuous-BlPu",x.ContinuousBlYlRd="continuous-BlYlRd",x.ContinuousBlues="continuous-blues",x.ContinuousGrYlRd="continuous-GrYlRd",x.ContinuousGreens="continuous-greens",x.ContinuousPurples="continuous-purples",x.ContinuousRdYlGr="continuous-RdYlGr",x.ContinuousReds="continuous-reds",x.ContinuousYlBl="continuous-YlBl",x.ContinuousYlRd="continuous-YlRd",x.Fixed="fixed",x.PaletteClassic="palette-classic",x.PaletteClassicByName="palette-classic-by-name",x.Shades="shades",x.Thresholds="thresholds",x))(m||{});const c={h:9,w:12,x:0,y:0};var p=(x=>(x.Absolute="absolute",x.Percentage="percentage",x))(p||{});const g={steps:[]};var y=(x=>(x.RangeToText="range",x.RegexToText="regex",x.SpecialValue="special",x.ValueToText="value",x))(y||{}),E=(x=>(x.Empty="empty",x.False="false",x.NaN="nan",x.Null="null",x.NullAndNan="null+nan",x.True="true",x))(E||{}),v=(x=>(x[x.Crosshair=1]="Crosshair",x[x.Off=0]="Off",x[x.Tooltip=2]="Tooltip",x))(v||{});const h=0,P={links:[],repeatDirection:"h",tags:[],targets:[],transformations:[],transparent:!1},a={overrides:[]},C={id:""},D={links:[],mappings:[]},b={collapsed:!1,panels:[]},M={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],schemaVersion:36,style:"dark",tags:[],timezone:"browser"}},30670:(Y,T,e)=>{"use strict";e.d(T,{Ql:()=>i});var t=e(85596),n=(p=>(p[p.dontHide=0]="dontHide",p[p.hideLabel=1]="hideLabel",p[p.hideVariable=2]="hideVariable",p))(n||{});const i=t.Ql,s={...t.gW,description:null,hide:0,datasource:null},l=t.NU,f=t.SJ,u=t.AU,o=t.Vb,d=t.ZM,r=t.G_,m=t.bn,c=t.n5},37219:(Y,T,e)=>{"use strict";e.d(T,{M:()=>l,Z:()=>i});var t=e(82897),n=e.n(t);class i{constructor(u){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",u){if(u.columns)for(const o of u.columns)this.addColumn(o);if(u.rows)for(const o of u.rows)this.addRow(o)}}sort(u){u.col===null||u.col===void 0||this.columns.length<=u.col||(this.rows.sort((o,d)=>(o=o[u.col],d=d[u.col],+(o==null)-+(d==null)||+(o>d)||-(o<d))),u.desc&&this.rows.reverse(),this.columns[u.col].sort=!0,this.columns[u.col].desc=u.desc)}addColumn(u){this.columnMap[u.text]||(this.columns.push(u),this.columnMap[u.text]=u)}addRow(u){this.rows.push(u)}}function s(f,u,o){let d=!1;for(let r=0;r<f.length;r++)if(u[r]!==void 0&&o[r]!==void 0){if(u[r]!==o[r])return!1}else(u[r]===void 0||o[r]===void 0)&&(d=!0);return d}function l(f,...u){const o=f||new i;if(arguments.length===1)return o;if(arguments.length===2)return o.columns=u[0].hasOwnProperty("columns")?[...u[0].columns]:[],o.rows=u[0].hasOwnProperty("rows")?[...u[0].rows]:[],o;const d=u.filter(E=>!!E.columns),r={},m=d.slice().reduce((E,v)=>(v.columns.forEach(h=>{const{text:P}=h;r[P]===void 0&&(r[P]=E.length,E.push(h))}),E),[]),c=d.map(E=>E.columns.map(v=>r[v.text])),p=d.reduce((E,v,h)=>{const P=c[h];return v.rows.forEach(a=>{const C=[];P.forEach((D,b)=>{C[D]=a[b]}),E.push(C)}),E},[]),g={},y=p.reduce((E,v,h)=>{if(!g[h]){let P=h+1;for(;P<p.length;){const a=(0,t.findIndex)(p,C=>s(m,v,C),P);if(a>-1){const C=p[a];for(let D=0;D<m.length;D++)v[D]===void 0&&C[D]!==void 0&&(v[D]=C[D]);g[a]=C,P=a+1}else break}E.push(v)}return E},[]);return o.columns=m,o.rows=y,o}},70431:(Y,T,e)=>{"use strict";e.d(T,{e:()=>n});var t=e(62992);const n=(0,t.PH)("core/cleanUpState")},659:(Y,T,e)=>{"use strict";e.d(T,{$l:()=>t.$l,H7:()=>n.H7,RL:()=>n.RL,ad:()=>t.ad});var t=e(98864),n=e(14393)},18271:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>i,h:()=>n});var t=e(50444);const n=new t.F,i=n},73546:(Y,T,e)=>{"use strict";e.d(T,{P:()=>x});var t=e(82897),n=e(66111),i=e(31403),s=e(1108),l=e(29930),f=e(94270),u=e(52081),o=e(8581),d=e(50796),r=e(94080),m=e(28038),c=e(73757),p=(w=>(w.None="None",w.Team="Team",w.User="User",w.BuiltInRole="builtInRole",w))(p||{});const g=({title:w="Add Permission For",permissions:K,assignments:L,onAdd:V,onCancel:H})=>{const[j,A]=(0,n.useState)(p.None),[_,k]=(0,n.useState)(0),[Q,re]=(0,n.useState)(0),[Z,oe]=(0,n.useState)(""),[G,le]=(0,n.useState)(""),fe=(0,n.useMemo)(()=>{const de=[];return L.users&&de.push({value:p.User,label:"User"}),L.teams&&de.push({value:p.Team,label:"Team"}),L.builtInRoles&&de.push({value:p.BuiltInRole,label:"Role"}),de},[L]);(0,n.useEffect)(()=>{K.length>0&&le(K[0])},[K]);const ae=()=>j===p.Team&&_>0||j===p.User&&Q>0||p.BuiltInRole&&c.B5.hasOwnProperty(Z);return n.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},n.createElement(d.P,{onClick:H}),n.createElement("h5",null,w),n.createElement(f.l,{name:"addPermission",maxWidth:"none",onSubmit:()=>V({userId:Q,teamId:_,builtInRole:Z,permission:G,target:j})},()=>n.createElement(u.Lh,null,n.createElement(o.Ph,{"aria-label":"Role to add new permission to",value:j,options:fe,onChange:de=>A(de.value),disabled:fe.length===0}),j===p.User&&n.createElement(m.f,{onSelected:de=>re(de.value||0),className:"width-20"}),j===p.Team&&n.createElement(r.c,{onSelected:de=>k(de.value?.id||0),className:"width-20"}),j===p.BuiltInRole&&n.createElement(o.Ph,{"aria-label":"Built-in role picker",options:Object.values(c.B5).map(de=>({value:de,label:de})),onChange:de=>oe(de.value||""),width:40}),n.createElement(o.Ph,{"aria-label":"Permission Level",width:25,value:K.find(de=>de===G),options:K.map(de=>({label:de,value:de})),onChange:de=>le(de.value||"")}),n.createElement(i.zx,{type:"submit",disabled:!ae()},"Save"))))};var y=e(61860),E=e(39904);const v=({item:w,permissionLevels:K,canSet:L,onRemove:V,onChange:H})=>n.createElement("tr",null,n.createElement("td",{style:{width:"1%"}},h(w)),n.createElement("td",{style:{width:"90%"}},a(w)),n.createElement("td",null,w.isInherited&&n.createElement("em",{className:"muted no-wrap"},"Inherited from folder")),n.createElement("td",null,n.createElement("div",{className:"gf-form"},n.createElement(o.Ph,{className:"width-20",disabled:!L||!w.isManaged,onChange:j=>H(w,j.value),value:K.find(j=>j===w.permission),options:K.map(j=>({value:j,label:j}))}))),n.createElement("td",null,n.createElement(y.u,{content:C(w)},n.createElement(E.J,{name:"info-circle"}))),n.createElement("td",null,w.isManaged?n.createElement(i.zx,{size:"sm",icon:"times",variant:"destructive",disabled:!L,onClick:()=>V(w),"aria-label":`Remove permission for ${P(w)}`}):n.createElement(y.u,{content:w.isInherited?"Inherited Permission":"Provisioned Permission"},n.createElement(i.zx,{size:"sm",icon:"lock"})))),h=w=>w.teamId?n.createElement("img",{className:"filter-table__avatar",src:w.teamAvatarUrl,alt:`Avatar for team ${w.teamId}`}):w.userId?n.createElement("img",{className:"filter-table__avatar",src:w.userAvatarUrl,alt:`Avatar for user ${w.userId}`}):n.createElement(E.J,{size:"xl",name:"shield"}),P=w=>w.userId?w.userLogin:w.teamId?w.team:w.builtInRole,a=w=>w.userId?n.createElement("span",{key:"name"},w.userLogin," "):w.teamId?n.createElement("span",{key:"name"},w.team," "):w.builtInRole?n.createElement("span",{key:"name"},w.builtInRole," "):n.createElement("span",{key:"name"}),C=w=>`Actions: ${[...new Set(w.actions)].sort().join(" ")}`,D=({title:w,items:K,compareKey:L,permissionLevels:V,canSet:H,onRemove:j,onChange:A})=>{const _=(0,n.useMemo)(()=>{const k={};for(let Q of K){const re=Q[L];if(!k[re]){k[re]=Q;continue}Q.actions.length>k[re].actions.length&&(k[re]=Q)}return Object.keys(k).map(Q=>k[Q])},[K,L]);return _.length===0?null:n.createElement("div",null,n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,w),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,"Permission"),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",{style:{width:"1%"}}))),n.createElement("tbody",null,_.map((k,Q)=>n.createElement(v,{item:k,onRemove:j,onChange:A,canSet:H,key:`${Q}-${k.userId}`,permissionLevels:V})))))},b="",M={permissions:[],assignments:{teams:!1,users:!1,builtInRoles:!1}},x=({title:w="Permissions",buttonLabel:K="Add a permission",emptyLabel:L="There are no permissions",resource:V,resourceId:H,canSetPermissions:j,addPermissionTitle:A})=>{const[_,k]=(0,n.useState)(!1),[Q,re]=(0,n.useState)([]),[Z,oe]=(0,n.useState)(M),G=(0,n.useCallback)(()=>S(V,H).then(q=>re(q)),[V,H]);(0,n.useEffect)(()=>{R(V).then(q=>(oe(q),G()))},[V,H,G]);const le=q=>{let ne=null;q.target===p.User?ne=O(V,H,q.userId,q.permission):q.target===p.Team?ne=U(V,H,q.teamId,q.permission):q.target===p.BuiltInRole&&(ne=I(V,H,q.builtInRole,q.permission)),ne!==null&&ne.then(G)},fe=q=>{let ne=null;q.userId?ne=O(V,H,q.userId,b):q.teamId?ne=U(V,H,q.teamId,b):q.builtInRole&&(ne=I(V,H,q.builtInRole,b)),ne!==null&&ne.then(G)},ae=(q,ne)=>{q.permission!==ne&&(q.userId?le({permission:ne,userId:q.userId,target:p.User}):q.teamId?le({permission:ne,teamId:q.teamId,target:p.Team}):q.builtInRole&&le({permission:ne,builtInRole:q.builtInRole,target:p.BuiltInRole}))},de=(0,n.useMemo)(()=>(0,t.sortBy)(Q.filter(q=>q.teamId),["team","isManaged"]),[Q]),ee=(0,n.useMemo)(()=>(0,t.sortBy)(Q.filter(q=>q.userId),["userLogin","isManaged"]),[Q]),me=(0,n.useMemo)(()=>(0,t.sortBy)(Q.filter(q=>q.builtInRole),["builtInRole","isManaged"]),[Q]);return n.createElement("div",null,n.createElement("div",{className:"page-action-bar"},n.createElement("h3",{className:"page-sub-heading"},w),n.createElement("div",{className:"page-action-bar__spacer"}),j&&n.createElement(i.zx,{variant:"primary",key:"add-permission",onClick:()=>k(!0)},K)),n.createElement("div",null,n.createElement(s.s,{in:_},n.createElement(g,{title:A,onAdd:le,permissions:Z.permissions,assignments:Z.assignments,onCancel:()=>k(!1)})),Q.length===0&&n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",null,L)))),n.createElement(D,{title:"Role",items:me,compareKey:"builtInRole",permissionLevels:Z.permissions,onChange:ae,onRemove:fe,canSet:j}),n.createElement(D,{title:"User",items:ee,compareKey:"userLogin",permissionLevels:Z.permissions,onChange:ae,onRemove:fe,canSet:j}),n.createElement(D,{title:"Team",items:de,compareKey:"team",permissionLevels:Z.permissions,onChange:ae,onRemove:fe,canSet:j})))},R=async w=>{try{return await(0,l.i)().get(`/api/access-control/${w}/description`)}catch(K){return console.error("failed to load resource description: ",K),M}},S=(w,K)=>(0,l.i)().get(`/api/access-control/${w}/${K}`),O=(w,K,L,V)=>F(w,K,"users",L,V),U=(w,K,L,V)=>F(w,K,"teams",L,V),I=(w,K,L,V)=>F(w,K,"builtInRoles",L,V),F=(w,K,L,V,H)=>(0,l.i)().post(`/api/access-control/${w}/${K}/${L}/${V}`,{permission:H})},1108:(Y,T,e)=>{"use strict";e.d(T,{s:()=>f});var t=e(66111),n=e(66525);const i="200px",s=200,l={transition:`max-height ${s}ms ease-in-out`,overflow:"hidden"},f=({children:u,in:o,maxHeight:d=i,style:r=l})=>{const m={exited:{maxHeight:0},entering:{maxHeight:d},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return t.createElement(n.ZP,{in:o,timeout:s},c=>t.createElement("div",{style:{...r,...m[c]}},u))}},95379:(Y,T,e)=>{"use strict";e.d(T,{A:()=>i});var t=e(66111),n=e(34177);const i=t.memo(({actions:s})=>{const{chrome:l}=(0,n.p)();return(0,t.useLayoutEffect)(()=>{l.update({actions:s})}),null});i.displayName="TopNavUpdate"},99740:(Y,T,e)=>{"use strict";e.d(T,{L:()=>i,Y:()=>n});var t=e(35287);function n(s){switch(s){case"home":return(0,t.t)("nav.home.title","Home");case"new":return(0,t.t)("nav.new.title","New");case"create":return(0,t.t)("nav.create.title","Create");case"create-dashboard":return(0,t.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,t.t)("nav.create-folder.title","Folder");case"import":return(0,t.t)("nav.create-import.title","Import dashboard");case"alert":return(0,t.t)("nav.create-alert.title","Create alert rule");case"starred":return(0,t.t)("nav.starred.title","Starred");case"starred-empty":return(0,t.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/playlists":return(0,t.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.title","Library panels");case"dashboards/public":return(0,t.t)("nav.public.title","Public dashboards");case"dashboards/new":return(0,t.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,t.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,t.t)("nav.create-import.title","Import dashboard");case"scenes":return(0,t.t)("nav.scenes.title","Scenes");case"explore":return(0,t.t)("nav.explore.title","Explore");case"alerting":return(0,t.t)("nav.alerting.title","Alerting");case"alerting-legacy":return(0,t.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alert-home":return(0,t.t)("nav.alerting-home.title","Home");case"alert-list":return(0,t.t)("nav.alerting-list.title","Alert rules");case"receivers":return(0,t.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,t.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,t.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,t.t)("nav.alerting-silences.title","Silences");case"groups":return(0,t.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,t.t)("nav.alerting-admin.title","Admin");case"cfg":return(0,t.t)("nav.config.title","Administration");case"datasources":return(0,t.t)("nav.datasources.title","Data sources");case"correlations":return(0,t.t)("nav.correlations.title","Correlations");case"users":return(0,t.t)("nav.users.title","Users");case"teams":return(0,t.t)("nav.teams.title","Teams");case"plugins":return(0,t.t)("nav.plugins.title","Plugins");case"org-settings":return(0,t.t)("nav.org-settings.title","Default preferences");case"apikeys":return(0,t.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,t.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,t.t)("nav.admin.title","Server admin");case"support-bundles":return(0,t.t)("nav.support-bundles.title","Support bundles");case"global-users":return(0,t.t)("nav.global-users.title","Users");case"global-orgs":return(0,t.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,t.t)("nav.server-settings.title","Settings");case"storage":return(0,t.t)("nav.storage.title","Storage");case"upgrading":return(0,t.t)("nav.upgrading.title","Stats and license");case"monitoring":return(0,t.t)("nav.monitoring.title","Observability");case"apps":return(0,t.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.title","Alerts & IRM");case"help":return(0,t.t)("nav.help.title","Help");case"profile/settings":return(0,t.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,t.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,t.t)("nav.profile/password.title","Change password");case"sign-out":return(0,t.t)("nav.sign-out.title","Sign out");case"search":return(0,t.t)("nav.search-dashboards.title","Search dashboards");default:return}}function i(s){switch(s){case"dashboards":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"manage-folder":return(0,t.t)("nav.manage-folder.subtitle","Manage folder dashboards and permissions");case"dashboards/playlists":return(0,t.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,t.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alert-list":return(0,t.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,t.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,t.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,t.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,t.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,t.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,t.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,t.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,t.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,t.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,t.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,t.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,t.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,t.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,t.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,t.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,t.t)("nav.storage.subtitle","Manage file storage");case"support-bundles":return(0,t.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return(0,t.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses");case"apps":return(0,t.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,t.t)("nav.monitoring.subtitle","Monitoring and infrastructure apps");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");default:return}}},9956:(Y,T,e)=>{"use strict";e.d(T,{M:()=>s});var t=e(9892),n=e(66111),i=e(72648);function s({className:f,leftActionsSeparator:u}){const o=(0,i.wW)(l);return u?n.createElement("div",{className:(0,t.cx)(f,o.leftActionsSeparator)}):n.createElement("div",{className:(0,t.cx)(f,o.line)})}const l=f=>({leftActionsSeparator:(0,t.css)({display:"flex",flexGrow:1}),line:(0,t.css)({width:1,backgroundColor:f.colors.border.medium,height:24})})},13211:(Y,T,e)=>{"use strict";e.d(T,{$:()=>t});const t=40},36578:(Y,T,e)=>{"use strict";e.d(T,{c:()=>r});var t=e(9892),n=e(66111),i=e(5680),s=e(72648),l=e(85419);const f=({className:m,logo:c})=>n.createElement("img",{className:m,src:`${c||"public/img/grafana_icon.svg"}`,alt:"Grafana"}),u=({className:m,children:c})=>{const p=(0,s.l4)(),g=t.css`
    &:before {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background: url(public/img/g8_login_${p.isDark?"dark":"light"}.svg);
      background-position: top center;
      background-size: auto;
      background-repeat: no-repeat;

      opacity: 0;
      transition: opacity 3s ease-in-out;

      @media ${l.mediaUp(p.v1.breakpoints.md)} {
        background-position: center;
        background-size: cover;
      }
    }
  `;return n.createElement("div",{className:(0,t.cx)(g,m)},c)},o=({className:m})=>n.createElement("img",{className:m,src:"public/img/grafana_icon.svg",alt:"Grafana"}),d=()=>{const m=(0,s.l4)();return t.css`
    background: ${i.alpha(m.colors.background.primary,.7)};
    background-size: cover;
  `};class r{}r.LoginLogo=f,r.LoginBackground=u,r.MenuLogo=o,r.LoginBoxBackground=d,r.AppTitle="Grafana",r.LoginTitle="Welcome to Grafana",r.GetLoginSubTitle=()=>null},67345:(Y,T,e)=>{"use strict";e.d(T,{t:()=>t});function t(n,i,s){const l=[];let f=!1;function u(o){const d=new URLSearchParams(o.url?.split("?")[1]);let r=`${o.url?.split("?")[0]}`;d.has("editview")&&(r+=`?editview=${d.get("editview")}`),!f&&!o.hideFromBreadcrumbs&&(s&&r===s.url?(l.unshift({text:s.text,href:o.url??""}),f=!0):l.unshift({text:o.text,href:o.url??""})),o.parentItem&&u(o.parentItem)}if(i)if(i.url&&i.children){const o=i.children.find(d=>d.active);o&&(u(o),o.parentItem!==i&&u(i))}else u(i);return u(n),l}},52822:(Y,T,e)=>{"use strict";e.d(T,{x:()=>l});var t=e(9892),n=e(66111),i=e(72648),s=e(39904);const l=n.forwardRef(({icon:u,children:o,onClick:d,...r},m)=>{const c=(0,i.wW)(f);return n.createElement("button",{...r,className:c.action,onClick:d},n.createElement(s.J,{name:u,size:"xl"}),o)});l.displayName="CardButton";const f=u=>({action:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      cursor: pointer;
      background: ${u.colors.background.secondary};
      border-radius: ${u.shape.borderRadius(1)};
      color: ${u.colors.text.primary};
      border: unset;
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;

      &:hover {
        background: ${u.colors.emphasize(u.colors.background.secondary)};
      }
    `})},50796:(Y,T,e)=>{"use strict";e.d(T,{P:()=>l});var t=e(9892),n=e(66111),i=e(72648),s=e(8180);const l=({onClick:u,"aria-label":o,style:d})=>{const r=(0,i.wW)(f);return n.createElement(s.h,{"aria-label":o??"Close",className:r,name:"times",onClick:u,style:d})},f=u=>t.css`
    position: absolute;
    right: ${u.spacing(.5)};
    top: ${u.spacing(1)};
  `},62911:(Y,T,e)=>{"use strict";e.d(T,{j:()=>i});var t=e(66111),n=e(31403);function i(s){const{hrefSuffix:l}=s,f="Learn more in the Grafana docs";return t.createElement(n.Qj,{"aria-label":f,icon:"external-link-alt",fill:"text",href:`https://grafana.com/docs/grafana/next/datasources/${l}`,variant:"secondary",size:"md",target:"_blank",tooltip:f,tooltipPlacement:"top"})}},69142:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>r});var t=e(9892),n=e(66111),i=e(68183),s=e(39904),l=e(31403),f=e(97097);const u=t.css`
  text-align: center;
`,o=t.css`
  max-width: 700px;
  margin: 0 auto;
`,r=({title:m,buttonIcon:c,buttonLink:p,buttonTitle:g,buttonDisabled:y,onClick:E,proTip:v,proTipLink:h,proTipLinkTitle:P,proTipTarget:a,infoBox:C,infoBoxTitle:D})=>{const b=()=>n.createElement(n.Fragment,null,v?n.createElement("span",{key:"proTipFooter"},n.createElement(s.J,{name:"rocket"}),n.createElement(n.Fragment,null," ProTip: ",v," "),h&&n.createElement("a",{href:h,target:a,className:"text-link"},P)):"",C?n.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${o}`},D&&n.createElement("h5",null,D),n.createElement("div",{dangerouslySetInnerHTML:C})):""),M=b()?"":t.css`
        margin-bottom: 20px;
      `,x=p?l.Qj:l.zx,R=n.createElement(x,{size:"lg",onClick:E,href:p,icon:c,className:M,"data-testid":i.wl.components.CallToActionCard.buttonV2(g),disabled:y},g);return n.createElement(f._,{className:u,message:m,footer:b(),callToActionElement:R})}},25337:(Y,T,e)=>{"use strict";e.d(T,{$_:()=>d,dP:()=>l});var t=e(66111),n=e(35645),i=e(39904),s=e(35287);let l=()=>[{target:"_blank",id:"documentation",text:(0,s.t)("nav.help/documentation","Beyondnet"),icon:"document-info",url:"http://www.beyondnetglobal.com/"},{target:"_blank",id:"support",text:(0,s.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,s.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function f(m){return{hasReleaseNotes:!0,isBeta:m.includes("-beta")}}function u(){const{buildInfo:m,licenseInfo:c}=n.v,p=[],g=c.stateInfo?` (${c.stateInfo})`:"";if(p.push({target:"_blank",id:"license",text:`${m.edition}${g}`,url:c.licenseUrl}),m.hideVersion)return p;const{hasReleaseNotes:y}=f(m.version);return p.push({target:"_blank",id:"version",text:`v${m.version} (${m.commit})`,url:y?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),m.hasUpdate&&p.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),p}function o(m){l=m}const d=t.memo(({customLinks:m})=>{const c=(m||l()).concat(u());return t.createElement("footer",{className:"footer"},t.createElement("div",{className:"text-center"},t.createElement("ul",null,c.map(p=>t.createElement("li",{key:p.text},t.createElement(r,{item:p}))))))});d.displayName="Footer";function r({item:m}){const c=m.url?t.createElement("a",{href:m.url,target:m.target,rel:"noopener noreferrer",id:m.id},m.text):m.text;return t.createElement(t.Fragment,null,m.icon&&t.createElement(i.J,{name:m.icon})," ",c)}},16534:(Y,T,e)=>{"use strict";e.d(T,{G:()=>r});var t=e(66111),n=e(68183),i=e(94270),s=e(24799),l=e(52081),f=e(31403),u=e(61860),o=e(5080),d=e(20787);const r=({onSubmit:m,onSkip:c})=>{const p=g=>{m(g.newPassword)};return t.createElement(i.l,{onSubmit:p},({errors:g,register:y,getValues:E})=>t.createElement(t.Fragment,null,t.createElement(s.g,{label:"New password",invalid:!!g.newPassword,error:g?.newPassword?.message},t.createElement(d.Z,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...y("newPassword",{required:"New Password is required"})})),t.createElement(s.g,{label:"Confirm new password",invalid:!!g.confirmNew,error:g?.confirmNew?.message},t.createElement(d.Z,{id:"confirm-new-password",autoComplete:"new-password",...y("confirmNew",{required:"Confirmed Password is required",validate:v=>v===E().newPassword||"Passwords must match!"})})),t.createElement(l.wc,null,t.createElement(f.zx,{type:"submit",className:o.F},"Submit"),c&&t.createElement(u.u,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom"},t.createElement(f.zx,{fill:"text",onClick:c,type:"button","aria-label":n.wl.pages.Login.skip},"Skip")))))}},93022:(Y,T,e)=>{"use strict";e.d(T,{X:()=>u});var t=e(9892),n=e(66111),i=e(72648),s=e(39904),l=e(46967),f=e(57227);const u=({name:d,onChange:r,verifyLayerNameUniqueness:m,overrideStyles:c})=>{const p=(0,i.wW)(o),[g,y]=(0,n.useState)(!1),[E,v]=(0,n.useState)(null),h=M=>{y(!0)},P=M=>{if(y(!1),E){v(null);return}d!==M&&r(M)},a=M=>{const x=M.currentTarget.value.trim();if(x.length===0){v("An empty layer name is not allowed");return}if(m&&!m(x)&&x!==d){v("Layer name already exists");return}E&&v(null)},C=M=>{P(M.currentTarget.value.trim())},D=M=>{M.key==="Enter"&&P(M.currentTarget.value)},b=M=>{M.target.select()};return n.createElement(n.Fragment,null,n.createElement("div",{className:p.wrapper},!g&&n.createElement("button",{className:p.layerNameWrapper,title:"Edit layer name",onClick:h,"data-testid":"layer-name-div"},n.createElement("span",{className:c?"":p.layerName},d),n.createElement(s.J,{name:"pen",className:p.layerEditIcon,size:"sm"})),g&&n.createElement(n.Fragment,null,n.createElement(l.I,{type:"text",defaultValue:d,onBlur:C,autoFocus:!0,onKeyDown:D,onFocus:b,invalid:E!==null,onChange:a,className:p.layerNameInput,"data-testid":"layer-name-input"}),E&&n.createElement(f.S,{horizontal:!0},E))))},o=d=>({wrapper:t.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${d.spacing(.5)};
    `,layerNameWrapper:t.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${d.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${d.spacing(.5)};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${d.colors.action.hover};
        border: 1px dashed ${d.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${d.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,layerName:t.css`
      font-weight: ${d.typography.fontWeightMedium};
      color: ${d.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${d.spacing(.5)};
    `,layerEditIcon:(0,t.cx)(t.css`
        margin-left: ${d.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),layerNameInput:t.css`
      max-width: 300px;
      margin: -4px 0;
    `})},59796:(Y,T,e)=>{"use strict";e.d(T,{G:()=>i});var t=e(66111),n=e(58379);const i=s=>{const{children:l,storageKey:f,defaultValue:u}=s,[o,d]=(0,t.useState)({value:n.Z.getObject(s.storageKey,s.defaultValue)});(0,t.useEffect)(()=>{const c=p=>{p.key===f&&d({value:n.Z.getObject(s.storageKey,s.defaultValue)})};return window.addEventListener("storage",c),()=>{window.removeEventListener("storage",c)}});const r=c=>{try{n.Z.setObject(f,c)}catch(p){console.error(p)}d({value:c})},m=()=>{try{n.Z.delete(f)}catch(c){console.log(c)}d({value:u})};return t.createElement(t.Fragment,null,l(o.value,r,m))}},86824:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(66111),n=e(4063),i=e(54899),s=e(18271),l=e(47694);const f=()=>!!l.ZP.oauth&&Object.keys(l.ZP.oauth).length>0;class u extends t.PureComponent{constructor(r){super(r),this.result={},this.changePassword=m=>{const c={newPassword:m,confirmNew:m,oldPassword:"admin"};if(this.props.resetCode){const p={code:this.props.resetCode,newPassword:m,confirmPassword:m};(0,i.i)().post("/api/user/password/reset",p).then(()=>{this.toGrafana()})}else(0,i.i)().put("/api/user/password",c).then(()=>{this.toGrafana()}).catch(p=>console.error(p))},this.login=m=>{this.setState({isLoggingIn:!0}),(0,i.i)().post("/login",m).then(c=>{if(this.result=c,m.password!=="admin"||l.ZP.ldapEnabled||l.ZP.authProxyEnabled){this.toGrafana();return}else this.changeView()}).catch(()=>{this.setState({isLoggingIn:!1})})},this.changeView=()=>{this.setState({isChangingPassword:!0})},this.toGrafana=()=>{this.result.redirectUrl?l.ZP.appSubUrl!==""&&!this.result.redirectUrl.startsWith(l.ZP.appSubUrl)?window.location.assign(l.ZP.appSubUrl+this.result.redirectUrl):window.location.assign(this.result.redirectUrl):window.location.assign(l.ZP.appSubUrl+"/")},this.state={isLoggingIn:!1,isChangingPassword:!1},l.ZP.loginError&&s.Z.emit(n.SI.alertWarning,["Login Failed",l.ZP.loginError])}render(){const{children:r}=this.props,{isLoggingIn:m,isChangingPassword:c}=this.state,{login:p,toGrafana:g,changePassword:y}=this,{loginHint:E,passwordHint:v,disableLoginForm:h,disableUserSignUp:P}=l.ZP;return t.createElement(t.Fragment,null,r({isOauthEnabled:f(),loginHint:E,passwordHint:v,disableLoginForm:h,disableUserSignUp:P,login:p,isLoggingIn:m,changePassword:y,skipPasswordChange:g,isChangingPassword:c}))}}const o=u},5080:(Y,T,e)=>{"use strict";e.d(T,{F:()=>r,U:()=>m});var t=e(9892),n=e(66111),i=e(68183),s=e(94270),l=e(24799),f=e(46967),u=e(31403),o=e(20787);const d=t.css`
  width: 100%;
  padding-bottom: 16px;
`,r=t.css`
  justify-content: center;
  width: 100%;
`,m=({children:c,onSubmit:p,isLoggingIn:g,passwordHint:y,loginHint:E})=>n.createElement("div",{className:d},n.createElement(s.l,{onSubmit:p,validateOn:"onChange"},({register:v,errors:h})=>n.createElement(n.Fragment,null,n.createElement(l.g,{label:"Email or username",invalid:!!h.user,error:h.user?.message},n.createElement(f.I,{...v("user",{required:"Email or username is required"}),autoFocus:!0,autoCapitalize:"none",placeholder:E,"aria-label":i.wl.pages.Login.username})),n.createElement(l.g,{label:"Password",invalid:!!h.password,error:h.password?.message},n.createElement(o.Z,{id:"current-password",autoComplete:"current-password",passwordHint:y,...v("password",{required:"Password is required"})})),n.createElement(u.zx,{type:"submit","aria-label":i.wl.pages.Login.submit,className:r,disabled:g},g?"Logging in...":"Log in"),c)))},80472:(Y,T,e)=>{"use strict";e.d(T,{$s:()=>u,dd:()=>o,pJ:()=>r});var t=e(9892),n=e(66111),i=e(72648),s=e(85419),l=e(36578),f=e(25337);const u=({children:m,enterAnimation:c=!0})=>{const p=(0,i.wW)(r);return n.createElement("div",{className:(0,t.cx)(p.loginInnerBox,c&&p.enterAnimation)},m)},o=({children:m,branding:c})=>{const p=(0,i.wW)(r),[g,y]=(0,n.useState)(!1),E=c?.loginSubtitle??l.c.GetLoginSubTitle(),v=c?.loginTitle??l.c.LoginTitle,h=c?.loginBoxBackground||l.c.LoginBoxBackground(),P=c?.loginLogo;return(0,n.useEffect)(()=>y(!0),[]),n.createElement(l.c.LoginBackground,{className:(0,t.cx)(p.container,g&&p.loginAnim,c?.loginBackground)},n.createElement("div",{className:(0,t.cx)(p.loginContent,h,"login-content-box")},n.createElement("div",{className:p.loginLogoWrapper},n.createElement(l.c.LoginLogo,{className:p.loginLogo,logo:P}),n.createElement("div",{className:p.titleWrapper},n.createElement("h1",{className:p.mainTitle},v),E&&n.createElement("h3",{className:p.subTitle},E))),n.createElement("div",{className:p.loginOuterBox},m)),c?.hideFooter?n.createElement(n.Fragment,null):n.createElement(f.$_,{customLinks:c?.footerLinks}))},d=t.keyframes`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,r=m=>({container:(0,t.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:t.css`
      &:before {
        opacity: 1;
      }

      .login-content-box {
        opacity: 1;
      }
    `,submitButton:t.css`
      justify-content: center;
      width: 100%;
    `,loginLogo:t.css`
      width: 100%;
      max-width: 60px;
      margin-bottom: 15px;

      @media ${s.mediaUp(m.v1.breakpoints.sm)} {
        max-width: 100px;
      }
    `,loginLogoWrapper:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: ${m.spacing(3)};
    `,titleWrapper:t.css`
      text-align: center;
    `,mainTitle:t.css`
      font-size: 22px;

      @media ${s.mediaUp(m.v1.breakpoints.sm)} {
        font-size: 32px;
      }
    `,subTitle:t.css`
      font-size: ${m.typography.size.md};
      color: ${m.colors.text.secondary};
    `,loginContent:t.css`
      max-width: 478px;
      width: calc(100% - 2rem);
      display: flex;
      align-items: stretch;
      flex-direction: column;
      position: relative;
      justify-content: flex-start;
      z-index: 1;
      min-height: 320px;
      border-radius: ${m.shape.borderRadius(4)};
      padding: ${m.spacing(2,0)};
      opacity: 0;
      transition: opacity 0.5s ease-in-out;

      @media ${s.mediaUp(m.v1.breakpoints.sm)} {
        min-height: 320px;
        justify-content: center;
      }
    `,loginOuterBox:t.css`
      display: flex;
      overflow-y: hidden;
      align-items: center;
      justify-content: center;
    `,loginInnerBox:t.css`
      padding: ${m.spacing(2)};

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
      max-width: 415px;
      width: 100%;
      transform: translate(0px, 0px);
      transition: 0.25s ease;
    `,enterAnimation:t.css`
      animation: ${d} ease-out 0.2s;
    `})},45458:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>f});var t=e(82897),n=e.n(t),i=e(66111),s=e(46967),l=e(24799);class f extends i.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=i.createRef(),this.updateValue=()=>{const o=this.inputRef.current?.value;let d=!1,r="";const m=this.props.min,c=this.props.max;let p=o!==""?Number(o):void 0;p&&!Number.isNaN(p)&&(m!=null&&p<m?(r=m.toString(),d=!0):c!=null&&p>c?(r=c.toString(),d=!0):r=o??"",this.setState({text:r,inputCorrected:d})),d&&this.updateValueDebounced(),!Number.isNaN(p)&&p!==this.props.value&&this.props.onChange(p)},this.updateValueDebounced=(0,t.debounce)(this.updateValue,500),this.onChange=o=>{this.setState({text:o.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=o=>{o.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(o){if(this.props.value!==o.value){const d=isNaN(this.props.value)?"":`${this.props.value}`;d!==this.state.text&&this.setState({text:d})}}renderInput(){return i.createElement(s.I,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder,disabled:this.props.fieldDisabled,width:this.props.width})}render(){const{inputCorrected:o}=this.state;if(o){let d="",{min:r,max:m}=this.props;return m==null?r!=null&&(d=`< ${r}`):r!=null?d=`${r} < > ${m}`:d=`> ${m}`,i.createElement(l.g,{invalid:o,error:`Out of range ${d}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},13355:(Y,T,e)=>{"use strict";e.d(T,{B:()=>u});var t=e(9892),n=e(66111),i=e(72648),s=e(90208),l=e(8180),f=e(98671);const u=({value:d,settings:r,onChange:m,details:c})=>{const p=(0,i.l4)(),g=(0,i.wW)(o);return n.createElement(s.zH,{color:d??"",onChange:m,enableNamedColors:r?.enableNamedColors!==!1},({ref:y,showColorPicker:E,hideColorPicker:v})=>n.createElement("div",{className:g.spot},n.createElement("div",{className:g.colorPicker},n.createElement(f.b,{ref:y,onClick:E,onMouseLeave:v,color:d?p.visualization.getColorByName(d):p.components.input.borderColor})),c&&n.createElement(n.Fragment,null,d?n.createElement("span",{className:g.colorText,onClick:E},d):n.createElement("span",{className:g.placeholderText,onClick:E},r?.placeholder??"Select color"),r?.isClearable&&d&&n.createElement(l.h,{name:"times",onClick:()=>m(void 0)}))))},o=d=>({spot:t.css`
      cursor: pointer;
      color: ${d.colors.text};
      background: ${d.components.input.background};
      padding: 3px;
      height: ${d.v1.spacing.formInputHeight}px;
      border: 1px solid ${d.components.input.borderColor};
      display: flex;
      flex-direction: row;
      align-items: center;
      align-content: flex-end;
      &:hover {
        border: 1px solid ${d.components.input.borderHover};
      }
    `,colorPicker:t.css`
      padding: 0 ${d.spacing(1)};
    `,colorText:t.css`
      flex-grow: 2;
    `,placeholderText:t.css`
      flex-grow: 2;
      color: ${d.colors.text.secondary};
    `})},12503:(Y,T,e)=>{"use strict";e.d(T,{w:()=>i});var t=e(66111),n=e(45458);const i=({value:s,onChange:l,item:f})=>{const{settings:u}=f,o=(0,t.useCallback)(d=>{l(u?.integer&&d!==void 0?Math.floor(d):d)},[l,u?.integer]);return t.createElement(n.Y,{value:s,min:u?.min,max:u?.max,step:u?.step,placeholder:u?.placeholder,onChange:o})}},52974:(Y,T,e)=>{"use strict";e.d(T,{u:()=>gt,l:()=>St});var t=e(66111),n=e(30779),i=e(72293),s=e(99098),l=e(69098),f=e(8944),u=e(2594),o=e(52566),d=e(15448),r=e(9892),m=e(82897),c=e(92103),p=e(16514),g=e(46967),y=e(90208),E=e(8180),v=e(72648),h=e(31403),P=e(64353),a=e(7804);const C=[{value:l.H.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:l.H.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class D extends t.PureComponent{constructor(Dt){super(Dt),this.onAddThreshold=()=>{const{steps:De}=this.state;let Ne=0;De.length>1&&(Ne=De[De.length-1].value+10);let Je=p.O9.filter(Ue=>!De.some(ve=>ve.color===Ue))[1];Je||(Je="#CCCCCC");const Xe={value:Ne,color:Je,key:b++},Le=[...De,Xe];(0,c.bP)(Le),this.setState({steps:Le},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=De=>{const{steps:Ne}=this.state;Ne.length&&De.key!==Ne[0].key&&this.setState({steps:Ne.filter(Je=>Je.key!==De.key)},this.onChange)},this.onChangeThresholdValue=(De,Ne)=>{const Je=De.target.value.replace(/,/g,"."),Xe=parseFloat(Je),Le=isNaN(Xe)?"":Xe,Ue=this.state.steps.map(ve=>(ve.key===Ne.key&&(ve={...ve,value:Le}),ve));Ue.length&&(Ue[0].value=-1/0),(0,c.bP)(Ue),this.setState({steps:Ue})},this.onChangeThresholdColor=(De,Ne)=>{const{steps:Je}=this.state,Xe=Je.map(Le=>(Le.key===De.key&&(Le={...Le,color:Ne}),Le));this.setState({steps:Xe},this.onChange)},this.onBlur=()=>{const De=[...this.state.steps];(0,c.bP)(De),this.setState({steps:De},this.onChange)},this.onChange=()=>{this.props.onChange(x(this.props.thresholds,this.state.steps))},this.onModeChanged=De=>{this.props.onChange({...this.props.thresholds,mode:De})};const ie=M(Dt.thresholds.steps);ie[0].value=-1/0,this.state={steps:ie},this.latestThresholdInputRef=t.createRef()}renderInput(Dt,ie,De){const Ne=this.props.thresholds.mode===l.H.Percentage,Je=`Threshold ${De+1}`;return isFinite(Dt.value)?t.createElement(g.I,{type:"number",step:"0.0001",key:Ne.toString(),onChange:Xe=>this.onChangeThresholdValue(Xe,Dt),value:Dt.value,"aria-label":Je,ref:De===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:t.createElement("div",{className:ie.inputPrefix},t.createElement("div",{className:ie.colorPicker},t.createElement(y.zH,{color:Dt.color,onChange:Xe=>this.onChangeThresholdColor(Dt,Xe),enableNamedColors:!0})),Ne&&t.createElement("div",{className:ie.percentIcon},"%")),suffix:t.createElement(E.h,{"aria-label":`Remove ${Je}`,className:ie.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(Dt)})}):t.createElement(g.I,{type:"text",value:"Base","aria-label":Je,disabled:!0,prefix:t.createElement("div",{className:ie.colorPicker},t.createElement(y.zH,{color:Dt.color,onChange:Xe=>this.onChangeThresholdColor(Dt,Xe),enableNamedColors:!0}))})}render(){const{thresholds:Dt}=this.props,{steps:ie}=this.state;return t.createElement(v.Ni.Consumer,null,De=>{const Ne=R(De);return t.createElement("div",{className:Ne.wrapper},t.createElement(h.zx,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:Ne.addButton,fullWidth:!0},"Add threshold"),t.createElement("div",{className:Ne.thresholds},ie.slice(0).reverse().map((Je,Xe)=>t.createElement("div",{className:Ne.item,key:`${Je.key}`},this.renderInput(Je,Ne,Xe)))),t.createElement("div",null,t.createElement(P._,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),t.createElement(u.S,{options:C,onChange:this.onModeChanged,value:Dt.mode})))})}}let b=100;function M(ut){return(!ut||ut.length===0)&&(ut=[{value:-1/0,color:"green"}]),ut.filter((Dt,ie)=>(0,m.isNumber)(Dt.value)||ie===0).map(Dt=>({color:Dt.color,value:Dt.value===null?-1/0:Dt.value,key:b++}))}function x(ut,Dt){return{mode:ut.mode??l.H.Absolute,steps:Dt.map(De=>{const{key:Ne,...Je}=De;return Je})}}const R=(0,a.B)(ut=>({wrapper:r.css`
      display: flex;
      flex-direction: column;
    `,thresholds:r.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${ut.spacing(2)};
    `,item:r.css`
      margin-bottom: ${ut.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:r.css`
      padding: 0 ${ut.spacing(1)};
    `,addButton:r.css`
      margin-bottom: ${ut.spacing(1)};
    `,percentIcon:r.css`
      font-size: ${ut.typography.bodySmall.fontSize};
      color: ${ut.colors.text.secondary};
    `,inputPrefix:r.css`
      display: flex;
      align-items: center;
    `,trashIcon:r.css`
      color: ${ut.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${ut.colors.text};
      }
    `}));class S extends t.PureComponent{constructor(Dt){super(Dt)}render(){const{onChange:Dt}=this.props;let ie=this.props.value;return ie||(ie={mode:l.H.Percentage,steps:[]}),t.createElement(D,{thresholds:ie,onChange:Dt})}}var O=e(32195),U=e(52081),I=e(39904),F=e(35029),w=e(92484),K=e(26786),L=e(36826),V=e(15670),H=e(8581);function j({mapping:ut,index:Dt,onChange:ie,onRemove:De,onDuplicate:Ne,showIconPicker:Je}){const{key:Xe,result:Le,id:Ue}=ut,ve=(0,v.wW)(A),Se=(0,t.useRef)(null),$e=(0,t.useCallback)(Lt=>{const Kt={...ut,result:{...ut.result}};Lt(Kt),ie(Dt,Kt)},[ut,Dt,ie]);(0,t.useEffect)(()=>{Se.current&&ut.isNew&&(Se.current.focus(),$e(Lt=>{Lt.isNew=!1}))},[ut,Se,$e]);const Ye=Lt=>{$e(Kt=>{Kt.result.color=Lt})},_e=()=>{$e(Lt=>{Lt.result.color=void 0})},Et=Lt=>{$e(Kt=>{Kt.result.icon=Lt})},pt=()=>{$e(Lt=>{Lt.result.icon=void 0})},je=Lt=>{$e(Kt=>{Kt.key=Lt.currentTarget.value})},ht=Lt=>{$e(Kt=>{Kt.result.text=Lt.currentTarget.value})},we=Lt=>{$e(Kt=>{Kt.from=parseFloat(Lt.currentTarget.value)})},Qe=Lt=>{$e(Kt=>{Kt.to=parseFloat(Lt.currentTarget.value)})},nt=Lt=>{$e(Kt=>{Kt.pattern=Lt.currentTarget.value})},it=Lt=>{$e(Kt=>{Kt.specialMatch=Lt.value})},yt=[{label:"Null",value:O.e.Null,description:"Matches null and undefined values"},{label:"NaN",value:O.e[NaN],description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:O.e.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:O.e.True,description:"Boolean true values"},{label:"False",value:O.e.False,description:"Boolean false values"},{label:"Empty",value:O.e.Empty,description:"Empty string"}];return t.createElement(L._l,{key:Ue,draggableId:Ue,index:Dt},Lt=>t.createElement("tr",{className:ve.dragRow,ref:Lt.innerRef,...Lt.draggableProps},t.createElement("td",null,t.createElement("div",{className:ve.dragHandle,...Lt.dragHandleProps},t.createElement(I.J,{name:"draggabledots",size:"lg"}))),t.createElement("td",{className:ve.typeColumn},ut.type),t.createElement("td",null,ut.type===O.H.ValueToText&&t.createElement(g.I,{ref:Se,type:"text",value:Xe??"",onChange:je,placeholder:"Exact value to match"}),ut.type===O.H.RangeToText&&t.createElement("div",{className:ve.rangeInputWrapper},t.createElement(g.I,{type:"number",value:ut.from??"",placeholder:"Range start",onChange:we,prefix:"From"}),t.createElement(g.I,{type:"number",value:ut.to??"",placeholder:"Range end",onChange:Qe,prefix:"To"})),ut.type===O.H.RegexToText&&t.createElement(g.I,{type:"text",value:ut.pattern??"",placeholder:"Regular expression",onChange:nt}),ut.type===O.H.SpecialValue&&t.createElement(H.Ph,{value:yt.find(Kt=>Kt.value===ut.specialMatch),options:yt,onChange:it})),t.createElement("td",null,t.createElement(g.I,{type:"text",value:Le.text??"",onChange:ht,placeholder:"Optional display text"})),t.createElement("td",{className:ve.textAlignCenter},Le.color&&t.createElement(U.Lh,{spacing:"sm",justify:"center"},t.createElement(y.zH,{color:Le.color,onChange:Ye,enableNamedColors:!0}),t.createElement(E.h,{name:"times",onClick:_e,tooltip:"Remove color",tooltipPlacement:"top"})),!Le.color&&t.createElement(y.zH,{color:"gray",onChange:Ye,enableNamedColors:!0},Kt=>t.createElement(h.zx,{variant:"primary",fill:"text",onClick:Kt.showColorPicker,ref:Kt.ref,size:"sm"},"Set color"))),Je&&t.createElement("td",{className:ve.textAlignCenter},t.createElement(U.Lh,{spacing:"sm",justify:"center"},t.createElement(K.E,{onChange:Et,onClear:pt,value:Le.icon,size:w.zc.SMALL,folderName:w.QS.Icon,mediaType:w.DD.Icon,color:Le.color}),Le.icon&&t.createElement(E.h,{name:"times",onClick:pt,tooltip:"Remove icon",tooltipPlacement:"top"}))),t.createElement("td",{className:ve.textAlignCenter},t.createElement(U.Lh,{spacing:"sm"},t.createElement(E.h,{name:"copy",onClick:()=>Ne(Dt),"data-testid":"duplicate-value-mapping"}),t.createElement(E.h,{name:"trash-alt",onClick:()=>De(Dt),"data-testid":"remove-value-mapping"})))))}const A=ut=>({dragRow:(0,r.css)({position:"relative"}),dragHandle:(0,r.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${ut.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,r.css)({display:"flex","> div:first-child":{marginRight:ut.spacing(2)}}),regexInputWrapper:(0,r.css)({display:"flex","> div:first-child":{marginRight:ut.spacing(2)}}),typeColumn:(0,r.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,r.css)({textAlign:"center"})});function _({value:ut,onChange:Dt,onClose:ie,showIconPicker:De}){const Ne=(0,v.wW)(k),[Je,Xe]=(0,t.useState)([]);(0,t.useEffect)(()=>{Xe(G(ut))},[ut]);const Le=Et=>{if(!ut||!Et.destination)return;const pt=[...Je],je=pt[Et.source.index];pt.splice(Et.source.index,1),pt.splice(Et.destination.index,0,je),Xe(pt)},Ue=(Et,pt)=>{const je=[...Je];je.splice(Et,1,pt),Xe(je)},ve=Et=>{const pt=[...Je];pt.splice(Et,1),Xe(pt)},Se=[{label:"Value",value:O.H.ValueToText,description:"Match a specific text value"},{label:"Range",value:O.H.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:O.H.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:O.H.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],$e=Et=>{Xe([...Je,re({type:Et.value,result:{},isNew:!0})])},Ye=Et=>{const pt=Z(Je[Et]),je=[...Je];je.splice(Et,0,{...pt});for(let ht=Et;ht<Je.length;ht++)je[ht].result.index=ht;Xe(je)},_e=()=>{Dt(oe(Je)),ie()};return(0,t.useEffect)(()=>{ut?.length||$e({value:O.H.ValueToText})},[]),t.createElement(t.Fragment,null,t.createElement("div",{className:Ne.tableWrap},t.createElement("table",{className:Ne.editTable},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{style:{width:"1%"}}),t.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),t.createElement("th",{style:{textAlign:"left"}},"Display text"),t.createElement("th",{style:{width:"10%"}},"Color"),De&&t.createElement("th",{style:{width:"10%"}},"Icon"),t.createElement("th",{style:{width:"1%"}}))),t.createElement(L.Z5,{onDragEnd:Le},t.createElement(L.bK,{droppableId:"sortable-field-mappings",direction:"vertical"},Et=>t.createElement("tbody",{ref:Et.innerRef,...Et.droppableProps},Je.map((pt,je)=>t.createElement(j,{key:pt.id,mapping:pt,index:je,onChange:Ue,onRemove:ve,onDuplicate:Ye,showIconPicker:De})),Et.placeholder))))),t.createElement(F.u.ButtonRow,{leftItems:t.createElement(V.b,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:Se,onChange:$e})},t.createElement(h.zx,{variant:"secondary",fill:"outline",onClick:ie},"Cancel"),t.createElement(h.zx,{variant:"primary",onClick:_e},"Update")))}const k=ut=>({tableWrap:r.css`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,r.css)({width:"100%",marginBottom:ut.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:ut.colors.action.hover}," th, td":{padding:ut.spacing(1)}})});function Q(){return(0,m.uniqueId)("mapping-")}function re(ut){return{type:O.H.ValueToText,result:{},id:Q(),...ut}}function Z(ut){return{...re(ut),id:Q()}}function oe(ut){const Dt=[],ie={type:O.H.ValueToText,options:{}};return ut.forEach((De,Ne)=>{const Je={...De.result,index:Ne};switch((!Je.text||Je.text.trim().length===0)&&(Je.text=void 0),De.type){case O.H.ValueToText:De.key!=null&&(ie.options[De.key]=Je);break;case O.H.RangeToText:De.from!=null&&De.to!=null&&Dt.push({type:De.type,options:{from:De.from,to:De.to,result:Je}});break;case O.H.RegexToText:De.pattern!=null&&Dt.push({type:De.type,options:{pattern:De.pattern,result:Je}});break;case O.H.SpecialValue:Dt.push({type:De.type,options:{match:De.specialMatch,result:Je}})}}),Object.keys(ie.options).length>0&&Dt.unshift(ie),Dt}function G(ut){const Dt=[];if(ut)for(const ie of ut)switch(ie.type){case O.H.ValueToText:for(const De of Object.keys(ie.options))Dt.push(re({type:ie.type,result:ie.options[De],key:De}));break;case O.H.RangeToText:Dt.push(re({type:ie.type,result:ie.options.result,from:ie.options.from??0,to:ie.options.to??0}));break;case O.H.RegexToText:Dt.push(re({type:ie.type,result:ie.options.result,pattern:ie.options.pattern}));break;case O.H.SpecialValue:Dt.push(re({type:ie.type,result:ie.options.result,specialMatch:ie.options.match??O.e.Null}))}return Dt.sort((ie,De)=>(ie.result.index??0)>(De.result.index??0)?1:-1),Dt}const le=t.memo(ut=>{const{value:Dt,onChange:ie,item:De}=ut,Ne=(0,v.wW)(fe),Je=De.settings?.icon,[Xe,Le]=(0,t.useState)(!1),Ue=(0,t.useCallback)(()=>{Le(!1)},[Le]),ve=(0,t.useMemo)(()=>G(Dt),[Dt]),Se=(0,t.useCallback)((Ye,_e)=>{ve[_e].result.color=Ye,ie(oe(ve))},[ve,ie]),$e=(0,t.useCallback)((Ye,_e)=>{ve[_e].result.icon=Ye,ie(oe(ve))},[ve,ie]);return t.createElement(U.wc,null,t.createElement("table",{className:Ne.compactTable},t.createElement("tbody",null,ve.map((Ye,_e)=>t.createElement("tr",{key:_e.toString()},t.createElement("td",null,Ye.type===O.H.ValueToText&&Ye.key,Ye.type===O.H.RangeToText&&t.createElement("span",null,"[",Ye.from," - ",Ye.to,"]"),Ye.type===O.H.RegexToText&&Ye.pattern,Ye.type===O.H.SpecialValue&&Ye.specialMatch),t.createElement("td",null,t.createElement(I.J,{name:"arrow-right"})),t.createElement("td",null,Ye.result.text),Ye.result.color&&t.createElement("td",null,t.createElement(y.zH,{color:Ye.result.color,onChange:Et=>Se(Et,_e),enableNamedColors:!0})),Je&&Ye.result.icon&&t.createElement("td",{"data-testid":"iconPicker"},t.createElement(K.E,{onChange:Et=>$e(Et,_e),value:Ye.result.icon,size:w.zc.SMALL,folderName:w.QS.Icon,mediaType:w.DD.Icon,color:Ye.result.color})))))),t.createElement(h.zx,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>Le(!0)},ve.length>0&&t.createElement("span",null,"Edit value mappings"),ve.length===0&&t.createElement("span",null,"Add value mappings")),t.createElement(F.u,{isOpen:Xe,title:"Value mappings",onDismiss:Ue,className:Ne.modal,closeOnBackdropClick:!1},t.createElement(_,{value:Dt,onChange:ie,onClose:Ue,showIconPicker:Je})))});le.displayName="ValueMappingsEditor";const fe=ut=>({modal:(0,r.css)({width:"980px"}),compactTable:(0,r.css)({width:"100%","tbody td":{padding:ut.spacing(.5)}})});var ae=e(99661);const de=({value:ut,onChange:Dt,item:ie})=>{const{placeholder:De,isClearable:Ne}=ie?.settings??{},Je=(0,t.useCallback)(Xe=>{Dt(Xe?.value?.uid)},[Dt]);return t.createElement(ae.o,{isClearable:Ne,defaultOptions:!0,onChange:Je,placeholder:De,value:ut})};var ee=e(13355),me=e(72990),q=e(53768),ne=e(24799);const se=({value:ut,onChange:Dt,item:ie,id:De})=>{const Ne=(0,v.l4)(),Je=(0,v.wW)(ue),Xe=(0,me.QY)(ut?.mode),Ue=(ie.settings?.byValueSupport?me.WO.list():me.WO.list().filter(_e=>!_e.isByValue)).map(_e=>{let Et=_e.isByValue?" (by value)":"";return{value:_e.id,label:`${_e.name}${Et}`,description:_e.description,isContinuous:_e.isContinuous,isByValue:_e.isByValue,component(){return t.createElement(he,{mode:_e,theme:Ne})}}}),ve=_e=>{Dt({...ut,mode:_e.value})},Se=_e=>{Dt({...ut,mode:Ye,fixedColor:_e})},$e=_e=>{Dt({...ut,mode:Ye,seriesBy:_e})},Ye=ut?.mode??q.S.Thresholds;if(Ye===q.S.Fixed||Ye===q.S.Shades)return t.createElement("div",{className:Je.group},t.createElement(H.Ph,{minMenuHeight:200,options:Ue,value:Ye,onChange:ve,className:Je.select,inputId:De}),t.createElement(ee.B,{value:ut?.fixedColor,onChange:Se}));if(ie.settings?.bySeriesSupport&&Xe.isByValue){const _e=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:Ne.spacing(2)}},t.createElement(H.Ph,{minMenuHeight:200,options:Ue,value:Ye,onChange:ve,inputId:De})),t.createElement(ne.g,{label:"Color series by"},t.createElement(u.S,{value:ut?.seriesBy??"last",options:_e,onChange:$e})))}return t.createElement(H.Ph,{minMenuHeight:200,options:Ue,value:Ye,onChange:ve,inputId:De})},he=({mode:ut,theme:Dt})=>{if(!ut.getColors)return null;const ie=ut.getColors(Dt).map(Dt.visualization.getColorByName),De={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(ut.isContinuous)De.background=`linear-gradient(90deg, ${ie.join(",")})`;else{let Ne="",Je="";for(let Xe=0;Xe<ie.length;Xe++){const Le=ie[Xe];if(Ne==="")Ne=`linear-gradient(90deg, ${Le} 0%`;else{const ve=Xe/(ie.length-1)*100;Ne+=`, ${Je} ${ve}%, ${Le} ${ve}%`}Je=Le}De.background=Ne}return t.createElement("div",{style:De})},ue=ut=>({group:r.css`
      display: flex;
    `,select:r.css`
      margin-right: 8px;
      flex-grow: 1;
    `});var Te=e(3281),Ve=e(68037);const ct=({value:ut,onChange:Dt,context:ie})=>t.createElement(Ve.d,{links:ut,onChange:Dt,data:ie.data,getSuggestions:()=>ie.getSuggestions?ie.getSuggestions(Te.o3.Values):[]});class Ie extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:Dt}=this.props,{settings:ie}=Dt;let De=Dt.settings?.options||[];ie?.getOptions&&(De=await ie.getOptions(this.props.context)),this.state.options!==De&&this.setState({isLoading:!1,options:De})}}componentDidMount(){this.updateOptions()}componentDidUpdate(Dt){const ie=Dt.item?.settings,De=this.props.item?.settings;if(ie!==De)this.updateOptions();else if(De?.getOptions){const Ne=Dt.context?.data,Je=this.props.context?.data;Ne!==Je&&this.updateOptions()}}render(){const{options:Dt,isLoading:ie}=this.state,{value:De,onChange:Ne,item:Je}=this.props,{settings:Xe}=Je;return t.createElement(H.NU,{isLoading:ie,value:De,defaultValue:De,allowCustomValue:Xe?.allowCustomValue,onChange:Le=>{Ne(Le.map(Ue=>Ue.value).flatMap(Ue=>Ue!==void 0?[Ue]:[]))},options:Dt})}}var Ke=e(12503);class Ge extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:Dt}=this.props,{settings:ie}=Dt;let De=Dt.settings?.options||[];ie?.getOptions&&(De=await ie.getOptions(this.props.context)),this.state.options!==De&&this.setState({isLoading:!1,options:De})}}componentDidMount(){this.updateOptions()}componentDidUpdate(Dt){const ie=Dt.item?.settings,De=this.props.item?.settings;if(ie!==De)this.updateOptions();else if(De?.getOptions){const Ne=Dt.context?.data,Je=this.props.context?.data;Ne!==Je&&this.updateOptions()}}render(){const{options:Dt,isLoading:ie}=this.state,{value:De,onChange:Ne,item:Je}=this.props,{settings:Xe}=Je;let Le=Dt.find(Ue=>Ue.value===De);return!Le&&De&&(Le={label:`${De}`,value:De}),t.createElement(H.Ph,{isLoading:ie,value:Le,defaultValue:De,allowCustomValue:Xe?.allowCustomValue,isClearable:Xe?.isClearable,onChange:Ue=>Ne(Ue?.value),options:Dt})}}var at=e(74912),dt=e(71294);const Re=({value:ut,onChange:Dt,item:ie,id:De})=>t.createElement(dt.m,{stats:ut,onChange:Dt,allowMultiple:!!ie.settings?.allowMultiple,defaultStat:ie.settings?.defaultStat,inputId:De});var ye=e(37565),Pe=e(35645);class be extends t.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=Dt=>{const{value:ie,onChange:De}=this.props,Ne=[...ie];Ne.splice(Dt,1),De(Ne)},this.onValueChange=(Dt,ie)=>{if("key"in Dt&&Dt.key!=="Enter")return;const{value:De,onChange:Ne}=this.props,Je=Dt.currentTarget.value.trim();if(ie<0){Je&&(Dt.currentTarget.value="",Ne([...De,Je])),this.setState({showAdd:!1});return}if(!Je)return this.onRemoveString(ie);const Xe=[...De];Xe[ie]=Je,Ne(Xe)}}render(){const{value:Dt,item:ie}=this.props,{showAdd:De}=this.state,Ne=Be(Pe.v.theme2),Je=ie.settings?.placeholder||"Add text";return t.createElement("div",null,Dt.map((Xe,Le)=>t.createElement(g.I,{className:Ne.textInput,key:`${Le}/${Xe}`,defaultValue:Xe||"",onBlur:Ue=>this.onValueChange(Ue,Le),onKeyDown:Ue=>this.onValueChange(Ue,Le),suffix:t.createElement(I.J,{className:Ne.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(Le)})})),De?t.createElement(g.I,{autoFocus:!0,className:Ne.textInput,placeholder:Je,defaultValue:"",onBlur:Xe=>this.onValueChange(Xe,-1),onKeyDown:Xe=>this.onValueChange(Xe,-1),suffix:t.createElement(I.J,{name:"plus-circle"})}):t.createElement(h.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},Je))}}const Be=(0,a.B)(ut=>({textInput:r.css`
      margin-bottom: 5px;
      &:hover {
        border: 1px solid ${ut.components.input.borderHover};
      }
    `,trashIcon:r.css`
      color: ${ut.colors.text.secondary};
      cursor: pointer;

      &:hover {
        color: ${ut.colors.text};
      }
    `}));var ke=e(61227);function ot({value:ut,onChange:Dt,item:ie}){const De=(0,v.wW)(ft);return ie?.settings?.isClearable&&ut!=null?t.createElement("div",{className:De.wrapper},t.createElement("span",{className:De.first},t.createElement(ke.n,{value:ut,onChange:Dt})),t.createElement(E.h,{ariaLabel:"clear unit selection",name:"times",onClick:()=>Dt(void 0)})):t.createElement(ke.n,{value:ut,onChange:Dt})}const ft=ut=>({wrapper:r.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:r.css`
    margin-right: 8px;
    flex-grow: 2;
  `}),gt=()=>{const ut={id:"number",name:"Number",description:"Allows numeric values input",editor:Ke.w},Dt={id:"slider",name:"Slider",description:"Allows numeric values input",editor:at.p},ie={id:"text",name:"Text",description:"Allows string values input",editor:ye.A},De={id:"strings",name:"String array",description:"An array of strings",editor:be},Ne={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(we){const{id:Qe,...nt}=we;return t.createElement(f.r,{...nt,onChange:it=>we.onChange(it.currentTarget.checked)})}},Je={id:"select",name:"Select",description:"Allows option selection",editor:Ge},Xe={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:Ie},Le={id:"radio",name:"Radio",description:"Allows option selection",editor(we){return t.createElement(u.S,{...we,options:we.item.settings?.options})}},Ue={id:"unit",name:"Unit",description:"Allows unit input",editor:ot},ve={id:"color",name:"Color",description:"Allows color selection",editor(we){return t.createElement(ee.B,{value:we.value,onChange:we.onChange,settings:we.item.settings,details:!0})}},Se={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:se},$e={id:"links",name:"Links",description:"Allows defining data links",editor:ct},Ye={id:"stats-picker",name:"Stats Picker",editor:Re,description:""},_e={id:"timezone",name:"Time zone",description:"Time zone selection",editor:o.O},Et={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:d.b};return[ie,ut,Dt,Ne,Le,Je,Ue,$e,Ye,De,_e,Se,ve,Xe,Et,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:de},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:le},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:S}]},St=()=>{const ut=["Standard options"],Dt={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:i.W0,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:ut},ie={id:"unit",path:"unit",name:"Unit",description:"",editor:n.S.get("unit").editor,override:n.S.get("unit").editor,process:i.op,settings:{placeholder:"none"},shouldApply:()=>!0,category:ut},De={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:i.Oh,settings:{placeholder:"auto"},shouldApply:Ye=>Ye.type===s.fS.number,category:ut},Ne={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:i.Oh,settings:{placeholder:"auto"},shouldApply:Ye=>Ye.type===s.fS.number,category:ut},Je={id:"decimals",path:"decimals",name:"Decimals",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:i.Oh,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:Ye=>Ye.type===s.fS.number,category:ut},Xe={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:i.op,settings:{placeholder:"-"},shouldApply:()=>!0,category:ut},Le={id:"links",path:"links",name:"Data links",editor:n.S.get("links").editor,override:n.S.get("links").editor,process:i.NN,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:Ye=>Ye?Ye.length:0},Ue={id:"color",path:"color",name:"Color scheme",editor:n.S.get("fieldColor").editor,override:n.S.get("fieldColor").editor,process:i.kG,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:ut},ve={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:n.S.get("mappings").editor,override:n.S.get("mappings").editor,process:i.uj,settings:{},defaultValue:[],shouldApply:Ye=>Ye.type!==s.fS.time,category:["Value mappings"],getItemsCount:Ye=>Ye?Ye.length:0},Se={id:"thresholds",path:"thresholds",name:"Thresholds",editor:n.S.get("thresholds").editor,override:n.S.get("thresholds").editor,process:i.ZN,settings:{},defaultValue:{mode:l.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:Ye=>Ye?Ye.steps.length:0},$e={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:n.S.get("boolean").editor,override:n.S.get("boolean").editor,process:i.W4,shouldApply:()=>!0,settings:{},category:ut};return[ie,De,Ne,Je,Dt,Ue,Xe,Le,ve,Se,$e]}},74912:(Y,T,e)=>{"use strict";e.d(T,{p:()=>o});var t=e(9892),n=e(65788),i=e(74560),s=e(66111),l=e(72648),f=e(29571),u=e(45458);const o=({value:m,onChange:c,item:p})=>{const g=(0,s.useRef)(null),{settings:y}=p,E=y?.min||0,v=y?.max||100,h=y?.step,P=y?.marks||{[E]:E,[v]:v},a=y?.included,C=y?.ariaLabelForHandle,D=75,b=!0,M=(0,l.l4)(),[x,R]=(0,s.useState)(m??E),[S,O]=(0,s.useState)(D);(0,s.useEffect)(()=>{m!=null&&m!==x&&R(m)},[m,x]),(0,s.useEffect)(()=>{const L=getComputedStyle(g.current),V=L.getPropertyValue("font-weight")||"normal",H=L.getPropertyValue("font-size")||"16px",j=L.getPropertyValue("font-family")||"Arial",A="0",_=4,k=8,Q=Math.max((v+(h||0)).toString().length,(v-(h||0)).toString().length)+_,re=A.repeat(Q),Z=d(re,`${V} ${H} ${j}`);Z&&O(Z+k*2)},[v,h]);const U=(0,s.useCallback)(L=>{const V=typeof L=="number"?L:L[0];R(V),c&&c(V)},[R,c]),I=(0,s.useCallback)(L=>{let V=L;(Number.isNaN(V)||!V)&&(V=0),R(V),c&&c(V)},[c]),F=(0,f.W)(M,b,Boolean(P)),w=r(M,S),K=b?[]:[F.sliderInputVertical];return s.createElement("div",{className:(0,t.cx)(F.container,F.slider)},s.createElement(n.Global,{styles:F.slider}),s.createElement("label",{className:(0,t.cx)(F.sliderInput,...K)},s.createElement(i.Z,{min:E,max:v,step:h,defaultValue:m,value:x,onChange:U,vertical:!b,reverse:!1,ariaLabelForHandle:C,marks:P,included:a}),s.createElement("span",{className:w.numberInputWrapper,ref:g},s.createElement(u.Y,{value:x,onChange:I,max:v,min:E,step:h}))))};function d(m,c){const g=document.createElement("canvas").getContext("2d");return g?(g.font=c,g.measureText(m).width):null}const r=(m,c)=>({numberInputWrapper:t.css`
      margin-left: 10px;
      max-height: 32px;
      max-width: ${c}px;
      min-width: ${c}px;
      overflow: visible;
      width: 100%;
    `})},37565:(Y,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(66111),n=e(97379),i=e(46967);const s=({value:l,onChange:f,item:u,suffix:o})=>{const d=u.settings?.useTextarea?n.K:i.I,r=(0,t.useCallback)(m=>{let c=l??"";"key"in m?m.key==="Enter"&&!u.settings?.useTextarea&&(c=m.currentTarget.value.trim()):c=m.currentTarget.value.trim(),c!==l&&f(c===""?void 0:c)},[l,u.settings?.useTextarea,f]);return t.createElement(d,{placeholder:u.settings?.placeholder,defaultValue:l||"",rows:u.settings?.useTextarea&&u.settings.rows||5,onBlur:r,onKeyDown:r,suffix:o})}},8412:(Y,T,e)=>{"use strict";e.d(T,{T:()=>b});var t=e(9892),n=e(66111),i=e(77346),s=e(72648),l=e(68226),f=e(34177),u=e(2555);const o=({isLoading:x,children:R,className:S})=>{let O=S?n.createElement("div",{className:S},R):R;return n.createElement(n.Fragment,null,x?n.createElement(u.Z,null):O)};var d=e(9591);function r({navItem:x,renderTitle:R,actions:S,info:O,subTitle:U}){const I=(0,s.wW)(m),F=U??x.subTitle,w=R?R(x.text):n.createElement("h1",{className:I.pageTitle},x.text);return n.createElement("div",{className:I.pageHeader},n.createElement("div",{className:I.topRow},n.createElement("div",{className:I.titleInfoContainer},n.createElement("div",{className:I.title},x.img&&n.createElement("img",{className:I.img,src:x.img,alt:`logo for ${x.text}`}),w),O&&n.createElement(d.S,{info:O})),n.createElement("div",{className:I.actions},S)),F&&n.createElement("div",{className:I.subTitle},F))}const m=x=>({topRow:(0,t.css)({alignItems:"center",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:x.spacing(1,2)}),title:(0,t.css)({display:"flex",flexDirection:"row"}),actions:(0,t.css)({display:"flex",flexDirection:"row",gap:x.spacing(1)}),titleInfoContainer:(0,t.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:x.spacing(1,4),justifyContent:"space-between",maxWidth:"100%"}),pageHeader:(0,t.css)({label:"page-header",display:"flex",flexDirection:"column",gap:x.spacing(1),marginBottom:x.spacing(2)}),pageTitle:(0,t.css)({display:"flex",marginBottom:0}),subTitle:(0,t.css)({position:"relative",color:x.colors.text.secondary}),img:(0,t.css)({width:"32px",height:"32px",marginRight:x.spacing(2)})});var c=e(72142),p=e(40419),g=e(79841);function y({navItem:x}){const R=(0,s.wW)(E);return n.createElement("div",{className:R.tabsWrapper},n.createElement(c.J,null,x.children.map((S,O)=>{const U=S.icon?(0,p.toIconName)(S.icon):void 0;return!S.hideFromTabs&&n.createElement(g.O,{label:S.text,active:S.active,key:`${S.url}-${O}`,icon:U,href:S.url,suffix:S.tabSuffix})})))}const E=x=>({tabsWrapper:(0,t.css)({paddingBottom:x.spacing(3)})});var v=e(83233),h=e(14393),P=e(27876),a=e(36578),C=e(67345);function D(x,R){const S=(0,P.useSelector)(O=>O.navIndex)?.[h.Qz];(0,n.useEffect)(()=>{const O=(x?.node!==x?.main?x?.node:x?.main)??{text:"Grafana"},U=(0,C.t)(O,R,S).map(I=>I.text).reverse();U[U.length-1]=a.c.AppTitle,document.title=U.join(" - ")},[S,x,R])}const b=({navId:x,navModel:R,pageNav:S,renderTitle:O,actions:U,subTitle:I,children:F,className:w,info:K,layout:L=i.Q.Standard,toolbar:V,scrollTop:H,scrollRef:j,...A})=>{const _=(0,s.wW)(M),k=(0,v.P)(x,R),{chrome:Q}=(0,f.p)();D(k,S);const re=S??k?.node;return(0,n.useLayoutEffect)(()=>{k&&Q.update({sectionNav:k,pageNav:S,layout:L})},[k,S,Q,L]),n.createElement("div",{className:(0,t.cx)(_.wrapper,w),...A},L===i.Q.Standard&&n.createElement(l.$,{autoHeightMin:"100%",scrollTop:H,scrollRefCallback:j},n.createElement("div",{className:_.pageInner},re&&n.createElement(r,{actions:U,navItem:re,renderTitle:O,info:K,subTitle:I}),S&&S.children&&n.createElement(y,{navItem:S}),n.createElement("div",{className:_.pageContent},F))),L===i.Q.Canvas&&n.createElement(l.$,{autoHeightMin:"100%",scrollTop:H,scrollRefCallback:j},n.createElement("div",{className:_.canvasContent},V,F)),L===i.Q.Custom&&n.createElement(n.Fragment,null,V,F))};b.Contents=o;const M=x=>({wrapper:(0,t.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),pageContent:(0,t.css)({label:"page-content",flexGrow:1}),pageInner:(0,t.css)({label:"page-inner",padding:x.spacing(2),borderRadius:x.shape.borderRadius(1),border:`1px solid ${x.colors.border.weak}`,borderBottom:"none",background:x.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:x.spacing(0,0,0,0),[x.breakpoints.up("md")]:{margin:x.spacing(2,2,0,1),padding:x.spacing(3)}}),canvasContent:(0,t.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:x.spacing(2),flexBasis:"100%",flexGrow:1})})},83233:(Y,T,e)=>{"use strict";e.d(T,{P:()=>l});var t=e(90158),n=e(86245),i=e(3153),s=e(27876);function l(u,o){if(o)return o;if(u&&i.h)return(0,s.useSelector)((0,t.P1)(f,d=>(0,n.ht)(d,u??"home")))}function f(u){return u.navIndex}},9591:(Y,T,e)=>{"use strict";e.d(T,{S:()=>s});var t=e(9892),n=e(66111),i=e(72648);function s({info:f}){const u=(0,i.wW)(l);return n.createElement("div",{className:u.container},f.map((o,d)=>n.createElement(n.Fragment,{key:d},n.createElement("div",{className:u.infoItem},n.createElement("div",{className:u.label},o.label),o.value),d+1<f.length&&n.createElement("div",{"data-testid":"page-info-separator",className:u.separator}))))}const l=f=>({container:(0,t.css)({display:"flex",flexDirection:"row",gap:f.spacing(1.5),overflow:"auto"}),infoItem:(0,t.css)({...f.typography.bodySmall,display:"flex",flexDirection:"column",gap:f.spacing(.5)}),label:(0,t.css)({color:f.colors.text.secondary}),separator:(0,t.css)({borderLeft:`1px solid ${f.colors.border.weak}`})})},2555:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>s});var t=e(66111),n=e(61744);const s=({pageName:l=""})=>{const f=`Loading ${l}...`;return t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n.u,{text:f}))}},98148:(Y,T,e)=>{"use strict";e.d(T,{j:()=>s});var t=e(9892),n=e(66111),i=e(72648);function s({entity:f="Page"}){const u=(0,i.wW)(l),o=(0,i.l4)();return n.createElement("div",{className:u.container},n.createElement("h1",null,f," not found"),n.createElement("div",{className:u.subtitle},"We're looking but can't seem to find this ",f.toLowerCase(),". Try returning"," ",n.createElement("a",{href:"/",className:"external-link"},"home")," ","or seeking help on the"," ",n.createElement("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"external-link"},"community site.")),n.createElement("div",{className:u.grot},n.createElement("img",{src:`public/img/grot-404-${o.isDark?"dark":"light"}.svg`,width:"100%",alt:"grot"})))}function l(f){return{container:(0,t.css)({display:"flex",flexDirection:"column",padding:f.spacing(8,2,2,2),h1:{textAlign:"center"}}),subtitle:(0,t.css)({color:f.colors.text.secondary,fontSize:f.typography.h5.fontSize,padding:f.spacing(2,0),textAlign:"center"}),grot:(0,t.css)({maxWidth:"450px",paddingTop:f.spacing(8),margin:"0 auto"})}}},20787:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>l});var t=e(66111),n=e(68183),i=e(46967),s=e(8180);const l=t.forwardRef(({autoComplete:f,autoFocus:u,id:o,passwordHint:d,...r},m)=>{const[c,p]=(0,t.useState)(!1);return t.createElement(i.I,{id:o,autoFocus:u,autoComplete:f,...r,type:c?"text":"password",placeholder:d,"aria-label":n.wl.pages.Login.password,ref:m,suffix:t.createElement(s.h,{name:c?"eye-slash":"eye",type:"button","aria-controls":o,role:"switch","aria-checked":c,"aria-label":"Show password",onClick:()=>{p(!c)}})})});l.displayName="PasswordField"},6645:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>y});var t=e(9892),n=e(66111),i=e(94270),s=e(52081),l=e(8581),f=e(31403),u=e(7804),o=e(94080),d=e(28038),r=e(47694),m=e(73757),c=e(50796);class p extends n.Component{constructor(v){super(v),this.onTypeChanged=h=>{const P=h.value;switch(P){case m.pC.User:case m.pC.Team:this.setState({type:P,userId:0,teamId:0,role:void 0});break;case m.pC.Editor:this.setState({type:P,userId:0,teamId:0,role:m.B5.Editor});break;case m.pC.Viewer:this.setState({type:P,userId:0,teamId:0,role:m.B5.Viewer});break}},this.onUserSelected=h=>{this.setState({userId:h&&!Array.isArray(h)?h.id:0})},this.onTeamSelected=h=>{this.setState({teamId:h.value?.id&&!Array.isArray(h.value)?h.value.id:0})},this.onPermissionChanged=h=>{this.setState({permission:h.value})},this.onSubmit=async()=>{await this.props.onAddPermission(this.state),this.setState(this.getCleanState())},this.state=this.getCleanState()}getCleanState(){return{userId:0,teamId:0,role:void 0,type:m.pC.Team,permission:m.V5.View}}isValid(){switch(this.state.type){case m.pC.Team:return this.state.teamId>0;case m.pC.User:return this.state.userId>0}return!0}render(){const{onCancel:v}=this.props,h=this.state,P="min-width-20",a=this.isValid(),C=g(r.ZP.theme2);return n.createElement("div",{className:"cta-form"},n.createElement(c.P,{onClick:v}),n.createElement("h5",null,"Add Permission For"),n.createElement(i.l,{maxWidth:"none",onSubmit:this.onSubmit},()=>n.createElement(s.Lh,null,n.createElement(l.Ph,{"aria-label":"Role to add new permission to",isSearchable:!1,value:this.state.type,options:m.BL,onChange:this.onTypeChanged}),h.type===m.pC.User?n.createElement(d.f,{onSelected:this.onUserSelected,className:P}):null,h.type===m.pC.Team?n.createElement(o.c,{onSelected:this.onTeamSelected,className:P}):null,n.createElement("span",{className:C.label},"Can"),n.createElement(l.Ph,{"aria-label":"Permission level",isSearchable:!1,value:this.state.permission,options:m.vT,onChange:this.onPermissionChanged,width:25}),n.createElement(f.zx,{"data-save-permission":!0,type:"submit",disabled:!a},"Save"))))}}p.defaultProps={showPermissionLevels:!0};const g=(0,u.B)(E=>({label:t.css`
    color: ${E.colors.primary.text};
    font-weight: bold;
  `})),y=p},92158:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>c});var t=e(66111),n=e(39904),i=e(8581),s=e(31403),l=e(73757);class f extends t.Component{render(){const{item:g}=this.props,y=l.vT.find(E=>E.value===g.permission);return t.createElement("tr",{className:"gf-form-disabled"},t.createElement("td",{style:{width:"1%"}},t.createElement(n.J,{size:"lg",name:"shield"})),t.createElement("td",{style:{width:"90%"}},g.name,t.createElement("span",{className:"filter-table__weak-italic"}," (Role)")),t.createElement("td",null),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement("div",{className:"gf-form"},t.createElement(i.Ph,{"aria-label":`Permission level for "${g.name}"`,options:l.vT,onChange:()=>{},disabled:!0,value:y}))),t.createElement("td",null,t.createElement(s.zx,{"aria-label":`Remove permission for "${g.name}"`,size:"sm",icon:"lock",disabled:!0})))}}const u=p=>p?"gf-form-disabled":"";function o({item:p}){return p.userAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:p.userAvatarUrl,alt:"User avatar"}):p.teamAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:p.teamAvatarUrl,alt:"Team avatar"}):p.role==="Editor"?t.createElement(n.J,{size:"lg",name:"edit"}):t.createElement(n.J,{size:"lg",name:"eye"})}function d({item:p}){return p.userId?t.createElement("span",{className:"filter-table__weak-italic"},"(User)"):p.teamId?t.createElement("span",{className:"filter-table__weak-italic"},"(Team)"):t.createElement("span",{className:"filter-table__weak-italic"},"(Role)")}class r extends t.PureComponent{constructor(){super(...arguments),this.onPermissionChanged=g=>{this.props.onPermissionChanged(this.props.item,g.value)},this.onRemoveItem=()=>{this.props.onRemoveItem(this.props.item)}}render(){const{item:g,folderInfo:y}=this.props,E=g.dashboardId===-1&&!g.inherited,v=l.vT.find(h=>h.value===g.permission);return t.createElement("tr",{className:u(Boolean(g?.inherited))},t.createElement("td",{style:{width:"1%"}},t.createElement(o,{item:g})),t.createElement("td",{style:{width:"90%"}},g.name," ",t.createElement(d,{item:g})),t.createElement("td",null,g.inherited&&y&&t.createElement("em",{className:"muted no-wrap"},"Inherited from folder"," ",y.canViewFolderPermissions?t.createElement("a",{className:"text-link",href:`${y.url}/permissions`},y.title):y.title),E&&t.createElement("em",{className:"muted no-wrap"},"Default Permission")),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement(i.Ph,{"aria-label":`Permission level for "${g.name}"`,isSearchable:!1,options:l.vT,onChange:this.onPermissionChanged,disabled:g.inherited,value:v,width:25})),t.createElement("td",null,g.inherited?t.createElement(s.zx,{"aria-label":`Remove permission for "${g.name}" (Disabled)`,size:"sm",disabled:!0,icon:"times"}):t.createElement(s.zx,{"aria-label":`Remove permission for "${g.name}"`,size:"sm",variant:"destructive",icon:"times",onClick:this.onRemoveItem})))}}class m extends t.PureComponent{render(){const{items:g,onRemoveItem:y,onPermissionChanged:E,isFetching:v,folderInfo:h}=this.props;return t.createElement("table",{className:"filter-table gf-form-group"},t.createElement("tbody",null,t.createElement(f,{key:0,item:{name:"Admin",permission:4}}),g.map((P,a)=>t.createElement(r,{key:a+1,item:P,onRemoveItem:y,onPermissionChanged:E,folderInfo:h})),v===!0&&g.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"Loading permissions..."))):null,v===!1&&g.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"No permissions are set. Will only be accessible by admins."))):null))}}const c=m},54630:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>i});var t=e(66111);const i=()=>t.createElement("div",null,t.createElement("h5",null,"What are Permissions?"),t.createElement("p",null,"An Access Control List (ACL) model is used to limit access to Dashboard Folders. A user or a Team can be assigned permissions for a folder or for a single dashboard."))},19117:(Y,T,e)=>{"use strict";e.d(T,{h:()=>l});var t=e(9892),n=e(66111),i=e(2631),s=e(72648);const l=n.memo(n.forwardRef(({className:o,children:d,markdown:r,onRemove:m,...c},p)=>{const g=(0,s.wW)(u);return n.createElement("div",{className:(0,t.cx)(g.wrapper,o),...c,ref:p},r&&f(r),d)}));function f(o){const d=(0,i.a)(o);return n.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:d}})}l.displayName="OperationRowHelp";const u=o=>{const d=o.shape.borderRadius();return{wrapper:t.css`
      padding: ${o.spacing(2)};
      border: 2px solid ${o.colors.background.secondary};
      border-top: none;
      border-radius: 0 0 ${d} ${d};
      position: relative;
      top: -4px;
    `}}},1029:(Y,T,e)=>{"use strict";e.d(T,{V:()=>o,y:()=>u});var t=e(9892),n=e(66111),i=e(68183),s=e(72648),l=e(8180);function f(r){const m=(0,s.wW)(d);return n.createElement("div",{className:(0,t.cx)(m.icon,"active"in r&&r.active&&m.active)},n.createElement(l.h,{name:r.icon,tooltip:r.title,className:m.icon,disabled:!!r.disabled,onClick:r.onClick,type:"button","aria-label":i.wl.components.QueryEditorRow.actionButton(r.title),..."active"in r&&{"aria-pressed":r.active}}))}function u(r){return n.createElement(f,{...r})}const o=r=>n.createElement(f,{...r}),d=r=>({icon:t.css`
      display: flex;
      position: relative;
      color: ${r.colors.text.secondary};
    `,active:t.css`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: ${r.shape.radius.default};
        bottom: -8px;
        background-image: ${r.colors.gradients.brandHorizontal} !important;
      }
    `})},67254:(Y,T,e)=>{"use strict";e.d(T,{t:()=>c});var t=e(9892),n=e(66111),i=e(36826),s=e(71828),l=e(41818),f=e(72648),u=e(61970),o=e(8180),d=e(39904);const r=({actionsElement:g,disabled:y,draggable:E,dragHandleProps:v,headerElement:h,isContentVisible:P,onRowToggle:a,reportDragMousePosition:C,title:D,id:b})=>{const M=(0,f.wW)(m);return n.createElement("div",{className:M.header},n.createElement("div",{className:M.column},n.createElement(o.h,{name:P?"angle-down":"angle-right",title:"toggle collapse and expand","aria-label":"toggle collapse and expand query row",className:M.collapseIcon,onClick:a,type:"button","aria-expanded":P,"aria-controls":b}),D&&n.createElement("div",{className:M.titleWrapper,onClick:a,"aria-label":"Query operation row title"},n.createElement("div",{className:(0,t.cx)(M.title,y&&M.disabled)},D)),h),n.createElement("div",{className:M.column},g,E&&n.createElement(d.J,{title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:M.dragIcon,onMouseMove:C,...v})))},m=g=>({header:t.css`
    label: Header;
    padding: ${g.spacing(.5,.5)};
    border-radius: ${g.shape.borderRadius(1)};
    background: ${g.colors.background.secondary};
    min-height: ${g.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:t.css`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:t.css`
    cursor: grab;
    color: ${g.colors.text.disabled};
    margin: ${g.spacing(0,.5)};
    &:hover {
      color: ${g.colors.text};
    }
  `,collapseIcon:t.css`
    margin-left: ${g.spacing(.5)};
    color: ${g.colors.text.disabled};
    }
  `,titleWrapper:t.css`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${g.spacing(.5)};
  `,title:t.css`
    font-weight: ${g.typography.fontWeightBold};
    color: ${g.colors.text.link};
    margin-left: ${g.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:t.css`
    color: ${g.colors.text.disabled};
  `});r.displayName="QueryOperationRowHeader";function c({children:g,actions:y,title:E,headerElement:v,onClose:h,onOpen:P,isOpen:a,disabled:C,draggable:D,index:b,id:M}){const[x,R]=(0,n.useState)(a!==void 0?a:!0),S=(0,f.wW)(p),O=(0,n.useCallback)(()=>{R(!x)},[x,R]),U=(0,n.useCallback)(K=>{if(K.defaultPrevented){const L=K.currentTarget.getBoundingClientRect(),V=K.clientX-L.left,H=K.clientY-L.top;(0,l.ff)("query_row_reorder_drag_position",{x:V/L.width,y:H/L.height,width:L.width,height:L.height})}},[]);(0,s.Z)(()=>{x?P&&P():h&&h()},[x]);const I={isOpen:x,onOpen:()=>{R(!0)},onClose:()=>{R(!1)}},F=y&&u.renderOrCallToRender(y,I),w=v&&u.renderOrCallToRender(v,I);return D?n.createElement(i._l,{draggableId:M,index:b},K=>n.createElement(n.Fragment,null,n.createElement("div",{ref:K.innerRef,className:S.wrapper,...K.draggableProps},n.createElement("div",null,n.createElement(r,{id:M,actionsElement:F,disabled:C,draggable:!0,dragHandleProps:K.dragHandleProps,headerElement:w,isContentVisible:x,onRowToggle:O,reportDragMousePosition:U,title:E})),x&&n.createElement("div",{className:S.content},g)))):n.createElement("div",{className:S.wrapper},n.createElement(r,{id:M,actionsElement:F,disabled:C,draggable:!1,headerElement:w,isContentVisible:x,onRowToggle:O,reportDragMousePosition:U,title:E}),x&&n.createElement("div",{className:S.content},g))}const p=g=>({wrapper:t.css`
      margin-bottom: ${g.spacing(2)};
    `,content:t.css`
      margin-top: ${g.spacing(.5)};
      margin-left: ${g.spacing(3)};
    `});c.displayName="QueryOperationRow"},17069:(Y,T,e)=>{"use strict";e.d(T,{I:()=>de});var t=e(66111),n=e(52081),i=e(67487),s=e(94437),l=e(9892),f=e(72648),u=e(39904),o=e(61860),d=e(46967),r=e(73267),m=e(85419),c=e(27501);const p=(0,t.forwardRef)(({children:ee,iconName:me},q)=>{const ne=(0,f.wW)(g);return t.createElement("div",{className:ne.container,ref:q},me&&t.createElement(u.J,{name:me,size:"xs"}),ee)});p.displayName="ValueContainer";const g=ee=>{const{prefix:me}=(0,d.H)({theme:ee}),{multiValueContainer:q}=(0,c.D)(ee);return{container:(0,l.cx)(me,q,l.css`
        position: relative;
        padding: ${ee.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${ee.spacing(.5)};
        }
      `)}},y=300,E=360,v=260,h=ee=>ee.stopPropagation(),P=({appliedRoles:ee,basicRole:me,disabled:q,isFocused:ne,query:se,showBasicRole:he,onOpen:ue,onClose:Te,onQueryChange:Ve,...ct})=>{const Ie=(0,f.wW)(dt=>C(dt,!1,!!ne,!!q,!1)),Ke=(0,t.useRef)(null);(0,t.useEffect)(()=>{ne&&Ke.current?.focus()});const Ge=dt=>{const Re=dt.target?.value;Ve(Re)},at=ee.length;return ne?t.createElement("div",{className:Ie.wrapper},he&&t.createElement(p,null,me),ee.map(dt=>t.createElement(p,{key:dt.uid},dt.displayName||dt.name)),!q&&t.createElement("input",{...ct,className:Ie.input,ref:Ke,onMouseDown:h,onChange:Ge,"data-testid":"role-picker-input",placeholder:ne?"Select role":"",value:se}),t.createElement("div",{className:Ie.suffix},t.createElement(u.J,{name:"angle-up",className:Ie.dropdownIndicator,onMouseDown:Te}))):t.createElement("div",{className:(0,l.cx)(Ie.wrapper,Ie.selectedRoles),onMouseDown:ue},he&&t.createElement(p,null,me),t.createElement(a,{appliedRoles:ee,numberOfRoles:at,showBuiltInRole:he}))};P.displayName="RolePickerInput";const a=({showBuiltInRole:ee,numberOfRoles:me,appliedRoles:q})=>{const ne=(0,f.wW)(se=>D(se));return t.createElement(t.Fragment,null,me?t.createElement(o.u,{content:t.createElement("div",{className:ne.tooltip},q?.map(se=>t.createElement("p",{key:se.uid},se.displayName)))},t.createElement(p,null,`${ee?"+":""}${me} role${me>1?"s":""}`)):!ee&&t.createElement(p,null,"No roles assigned"))},C=(ee,me,q,ne,se)=>{const he=(0,d.H)({theme:ee,invalid:me});return{wrapper:(0,l.cx)(he.wrapper,(0,r.RK)(ee,me),q&&l.css`
          ${m.focusCss(ee.v1)}
        `,ne&&he.inputDisabled,l.css`
        min-width: ${E}px;
        min-height: 32px;
        height: auto;
        flex-direction: row;
        padding-right: 24px;
        max-width: 100%;
        align-items: center;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        position: relative;
        box-sizing: border-box;
        cursor: default;
      `,se&&l.css`
          padding-left: 0;
        `),input:(0,l.cx)((0,r.RK)(ee,me),l.css`
        max-width: 120px;
        border: none;
        cursor: ${q?"default":"pointer"};
      `),suffix:he.suffix,dropdownIndicator:l.css`
      cursor: pointer;
    `,selectedRoles:l.css`
      display: flex;
      align-items: center;
      cursor: ${ne?"not-allowed":"pointer"};
    `,tooltip:l.css`
      p {
        margin-bottom: ${ee.spacing(.5)};
      }
    `}},D=ee=>({tooltip:l.css`
    p {
      margin-bottom: ${ee.spacing(.5)};
    }
  `});var b=e(68226),M=e(2594),x=e(31403),R=e(27876),S=e(58255),O=e(85511);const U=ee=>({menuWrapper:l.css`
      display: flex;
      max-height: 650px;
      position: absolute;
      z-index: ${ee.zIndex.dropdown};
      overflow: hidden;
      min-width: auto;
    `,menu:l.css`
      min-width: ${v}px;

      & > div {
        padding-top: ${ee.spacing(1)};
      }
    `,menuLeft:l.css`
      right: 0;
      flex-direction: row-reverse;
    `,subMenu:l.css`
      height: 100%;
      min-width: ${v}px;
      display: flex;
      flex-direction: column;
      border-left: 1px solid ${ee.components.input.borderColor};

      & > div {
        padding-top: ${ee.spacing(1)};
      }
    `,subMenuLeft:l.css`
      border-right: 1px solid ${ee.components.input.borderColor};
      border-left: unset;
    `,groupHeader:l.css`
      padding: ${ee.spacing(0,4.5)};
      display: flex;
      align-items: center;
      color: ${ee.colors.text.primary};
      font-weight: ${ee.typography.fontWeightBold};
    `,container:l.css`
      padding: ${ee.spacing(1)};
      border: 1px ${ee.colors.border.weak} solid;
      border-radius: ${ee.shape.borderRadius(1)};
      background-color: ${ee.colors.background.primary};
      z-index: ${ee.zIndex.modal};
    `,menuSection:l.css`
      margin-bottom: ${ee.spacing(2)};
    `,menuOptionCheckbox:l.css`
      display: flex;
      margin: ${ee.spacing(0,1,0,.25)};
    `,menuButtonRow:l.css`
      background-color: ${ee.colors.background.primary};
      padding: ${ee.spacing(1)};
    `,menuOptionBody:l.css`
      font-weight: ${ee.typography.fontWeightRegular};
      padding: ${ee.spacing(0,1.5,0,0)};
    `,menuOptionDisabled:l.css`
      color: ${ee.colors.text.disabled};
      cursor: not-allowed;
    `,menuOptionExpand:l.css`
      position: absolute;
      right: ${ee.spacing(1.25)};
      color: ${ee.colors.text.disabled};

      &:after {
        content: '>';
      }
    `,menuOptionInfoSign:l.css`
      color: ${ee.colors.text.disabled};
    `,basicRoleSelector:l.css`
      margin: ${ee.spacing(1,1.25,1,1)};
    `,subMenuPortal:l.css`
      height: 100%;
      > div {
        height: 100%;
      }
    `,subMenuButtonRow:l.css`
      background-color: ${ee.colors.background.primary};
      padding: ${ee.spacing(1)};
    `,checkboxPartiallyChecked:l.css`
      input {
        &:checked + span {
          &:after {
            border-width: 0 3px 0px 0;
            transform: rotate(90deg);
          }
        }
      }
    `}),I=(0,t.memo)(t.forwardRef(({name:ee,value:me,isFocused:q,isSelected:ne,partiallySelected:se,disabled:he,onChange:ue,onClick:Te,onOpenSubMenu:Ve,onCloseSubMenu:ct,children:Ie,root:Ke},Ge)=>{const at=(0,f.l4)(),dt=(0,c.D)(at),Re=(0,f.wW)(U),ye=(0,l.cx)(dt.option,q&&dt.optionFocused,he&&Re.menuOptionDisabled),Pe=ot=>{he||me&&ue(me)},be=ot=>{Te&&Te(me)},Be=()=>{Ve&&Ve(me)},ke=()=>{ct&&ct()};return t.createElement("div",{onMouseEnter:Be,onMouseLeave:ke},t.createElement("div",{ref:Ge,className:ye,"aria-label":"Role picker option",onClick:be},t.createElement(S.X,{value:ne,className:(0,l.cx)(Re.menuOptionCheckbox,{[Re.checkboxPartiallyChecked]:se}),onChange:Pe,disabled:he}),t.createElement("div",{className:(0,l.cx)(dt.optionBody,Re.menuOptionBody)},t.createElement("span",null,ee),t.createElement("span",{className:Re.menuOptionExpand})),Ke&&Ie&&t.createElement(O.h_,{className:Re.subMenuPortal,root:Ke},Ie)))}));I.displayName="RoleMenuGroupOption";const F=t.forwardRef(({data:ee,isFocused:me,isSelected:q,disabled:ne,onChange:se,hideDescription:he},ue)=>{const Te=(0,f.l4)(),Ve=(0,c.D)(Te),ct=(0,f.wW)(U),Ie=(0,l.cx)(Ve.option,me&&Ve.optionFocused,ne&&ct.menuOptionDisabled),Ke=Ge=>{ne||(Ge.preventDefault(),Ge.stopPropagation(),se(ee))};return t.createElement("div",{ref:ue,className:Ie,"aria-label":"Role picker option",onClick:Ke},t.createElement(S.X,{value:q,className:ct.menuOptionCheckbox,onChange:Ke,disabled:ne}),t.createElement("div",{className:(0,l.cx)(Ve.optionBody,ct.menuOptionBody)},t.createElement("span",null,ee.displayName||ee.name),!he&&ee.description&&t.createElement("div",{className:Ve.optionDescription},ee.description)),ee.description&&t.createElement(o.u,{content:ee.description},t.createElement(u.J,{name:"info-circle",className:ct.menuOptionInfoSign})))});F.displayName="RoleMenuOption";var w=e(25310);const K=({options:ee,selectedOptions:me,disabledOptions:q,onSelect:ne,onClear:se,showOnLeft:he})=>{const ue=(0,f.l4)(),Te=(0,c.D)(ue),Ve=(0,f.wW)(U),ct=async()=>{se&&se()};return t.createElement("div",{className:(0,l.cx)(Ve.subMenu,{[Ve.subMenuLeft]:he}),"aria-label":"Role picker submenu"},t.createElement(b.$,{autoHide:!1,autoHeightMax:`${y}px`,hideHorizontalTrack:!0},t.createElement("div",{className:Te.optionBody},ee.map((Ie,Ke)=>t.createElement(F,{data:Ie,key:Ke,isSelected:!!(Ie.uid&&(me.find(Ge=>Ge.uid===Ie.uid)||q?.find(Ge=>Ge.uid===Ie.uid))),disabled:!!(Ie.uid&&q?.find(Ge=>Ge.uid===Ie.uid))||(0,w.r)(Ie),onChange:ne,hideDescription:!0})))),t.createElement("div",{className:Ve.subMenuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(x.zx,{size:"sm",fill:"text",onClick:ct},"Clear"))))},L=t.forwardRef(({roles:ee,renderedName:me,showGroups:q,optionGroups:ne,onGroupChange:se,groupSelected:he,groupPartiallySelected:ue,subMenuNode:Te,selectedOptions:Ve,onRoleChange:ct,onClearSubMenu:Ie,showOnLeftSubMenu:Ke},Ge)=>{const[at,dt]=(0,t.useState)(!1),[Re,ye]=(0,t.useState)(""),Pe=(0,f.l4)(),be=(0,c.D)(Pe),Be=(0,f.wW)(U),ke=(0,t.useCallback)(ft=>{ye(ft),dt(!0)},[]),ot=(0,t.useCallback)(()=>{dt(!1),ye("")},[]);return t.createElement("div",null,ee.length>0&&t.createElement("div",{className:Be.menuSection},t.createElement("div",{className:Be.groupHeader},me),t.createElement("div",{className:be.optionBody}),q&&ne?.length?ne.map(ft=>t.createElement(I,{key:ft.value,name:ft.name,value:ft.value,isSelected:he(ft.value)||ue(ft.value),partiallySelected:ue(ft.value),disabled:ft.options?.every(w.r),onChange:se,onOpenSubMenu:ke,onCloseSubMenu:ot,root:Te,isFocused:at&&Re===ft.value},at&&Re===ft.value&&t.createElement(K,{options:ft.options,selectedOptions:Ve,onSelect:ct,onClear:()=>Ie(Re),showOnLeft:Ke}))):ee.map(ft=>t.createElement(F,{data:ft,key:ft.uid,isSelected:!!(ft.uid&&Ve.find(gt=>gt.uid===ft.uid)),disabled:(0,w.r)(ft),onChange:ct,hideDescription:!0}))))});L.displayName="RoleMenuGroupsSection";var V=(ee=>(ee.fixed="fixed",ee.custom="custom",ee.plugin="plugin",ee))(V||{});const j=Object.values(R.OrgRole).map(ee=>({label:ee,value:ee})),A={ldap:"LDAP",current:"Current org"},_=({basicRole:ee,options:me,appliedRoles:q,showGroups:ne,basicRoleDisabled:se,showBasicRole:he,onSelect:ue,onBasicRoleSelect:Te,onUpdate:Ve,updateDisabled:ct,offset:Ie,apply:Ke})=>{const[Ge,at]=(0,t.useState)(q),[dt,Re]=(0,t.useState)(ee),[ye,Pe]=(0,t.useState)({}),be=(0,t.useRef)(null),Be=(0,f.l4)(),ke=(0,c.D)(Be),ot=(0,f.wW)(U);(0,t.useEffect)(()=>{ue(Ge)},[Ge,ue]),(0,t.useEffect)(()=>{Te&&dt&&Te(dt)},[dt,Te]),(0,t.useEffect)(()=>{const Xe=me.filter(k).sort(fe),Le=me.filter(Q).sort(fe),Ue=me.filter(re).sort(fe),ve={fixed:Z(Le).sort((Se,$e)=>Se.name.localeCompare($e.name)),custom:Z(Xe).sort((Se,$e)=>Se.name.localeCompare($e.name)),plugin:Z(Ue).sort((Se,$e)=>Se.name.localeCompare($e.name))};Pe({fixed:{groupType:"fixed",optionGroup:ve.fixed,renderedName:"Fixed roles",roles:Le},custom:{groupType:"custom",optionGroup:ve.custom,renderedName:"Custom roles",roles:Xe},plugin:{groupType:"plugin",optionGroup:ve.plugin,renderedName:"Plugin roles",roles:Ue}})},[me]);const ft=Xe=>{const Le=[];for(const Ue of Ge)oe(Ue)===Xe&&Le.push(Ue);return Le},gt=(Xe,Le)=>{const Ue=ft(Le),ve=ye[Xe]?.optionGroup.find(Se=>Se.value===Le);return Ue.length>0&&Ue.length>=ve.options.length},St=(Xe,Le)=>{const Ue=ft(Le),ve=ye[Xe]?.optionGroup.find(Se=>Se.value===Le);return Ue.length>0&&Ue.length<ve.options.length},ut=Xe=>{Ge.find(Le=>Le.uid===Xe.uid)?at(Ge.filter(Le=>Le.uid!==Xe.uid)):at([...Ge,Xe])},Dt=(Xe,Le)=>{const Ue=ye[Xe]?.optionGroup.find(ve=>ve.value===Le);if(Ue)if(gt(Xe,Le)||St(Xe,Le))at(Ge.filter(ve=>!Ue.options.find(Se=>ve.uid===Se.uid)));else{const ve=Ue.options.filter($e=>$e.delegatable),Se=Ge.filter($e=>!Ue.options.find(Ye=>$e.uid===Ye.uid));at([...Se,...ve])}},ie=Xe=>{Re(Xe)},De=async()=>{at([])},Ne=Xe=>{const Le=Ge.filter(Ue=>oe(Ue)!==Xe);at(Le)},Je=()=>{Ve(Ge,dt)};return t.createElement("div",{className:(0,l.cx)(ke.menu,ot.menuWrapper,{[ot.menuLeft]:Ie.horizontal>0},l.css`
          bottom: ${Ie.vertical>0?`${Ie.vertical}px`:"unset"};
          top: ${Ie.vertical<0?`${Math.abs(Ie.vertical)}px`:"unset"};
        `)},t.createElement("div",{className:ot.menu,"aria-label":"Role picker menu"},t.createElement(b.$,{autoHide:!1,autoHeightMax:`${y}px`,hideHorizontalTrack:!0,hideVerticalTrack:!0},he&&t.createElement("div",{className:ot.menuSection},t.createElement("div",{className:ot.groupHeader},"Basic roles"),t.createElement(M.S,{className:ot.basicRoleSelector,options:j,value:dt,onChange:ie,fullWidth:!0,disabled:se})),Object.entries(ye).map(([Xe,Le])=>t.createElement(L,{key:Xe,roles:Le.roles,renderedName:Le.renderedName,showGroups:ne,optionGroups:Le.optionGroup,groupSelected:Ue=>gt(Le.groupType,Ue),groupPartiallySelected:Ue=>St(Le.groupType,Ue),onGroupChange:Ue=>Dt(Le.groupType,Ue),subMenuNode:be?.current,selectedOptions:Ge,onRoleChange:ut,onClearSubMenu:Ne,showOnLeftSubMenu:Ie.horizontal>0}))),t.createElement("div",{className:ot.menuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(x.zx,{size:"sm",fill:"text",onClick:De,disabled:ct},"Clear all"),t.createElement(x.zx,{size:"sm",onClick:Je,disabled:ct},Ke?"Apply":"Update")))),t.createElement("div",{ref:be}))},k=ee=>!ee.name?.startsWith("fixed:")&&!ee.name.startsWith("plugins:"),Q=ee=>ee.name?.startsWith("fixed:"),re=ee=>ee.name?.startsWith("plugins:"),Z=ee=>{const me={};return ee.forEach(ne=>{const se=oe(ne),he=G(ne);me[se]||(me[se]={name:he,roles:[]}),me[se].roles.push(ne)}),Object.entries(me).map(([ne,se])=>({name:A[ne]||ae(se.name),value:ne,options:se.roles.sort(fe)}))},oe=ee=>{const me=le(ee),q=G(ee);return`${me}:${q}`},G=ee=>ee.group||"Other",le=ee=>{const me=ee.name.indexOf(":");return me<0?"unknown":ee.name.substring(0,me)},fe=(ee,me)=>ee.name.localeCompare(me.name),ae=ee=>ee.slice(0,1).toUpperCase()+ee.slice(1),de=({basicRole:ee,appliedRoles:me,roleOptions:q,disabled:ne,isLoading:se,basicRoleDisabled:he,showBasicRole:ue,onRolesChange:Te,onBasicRoleChange:Ve,canUpdateRoles:ct=!0,apply:Ie=!1,maxWidth:Ke=E})=>{const[Ge,at]=(0,t.useState)(!1),[dt,Re]=(0,t.useState)(me),[ye,Pe]=(0,t.useState)(ee),[be,Be]=(0,t.useState)(""),[ke,ot]=(0,t.useState)({vertical:0,horizontal:0}),ft=(0,t.useRef)(null);(0,t.useEffect)(()=>{Pe(ee),Re(me)},[me,ee]),(0,t.useEffect)(()=>{const Xe=ft?.current?.getBoundingClientRect();if(!Xe||!Ge)return;const{bottom:Le,top:Ue,left:ve,right:Se,width:$e}=Xe,Ye=window.innerHeight-Le,_e=Le-Ue+10,Et=Se-ve;let pt=-Et,je=-_e;Ye<y+20&&(je=50+(y-Ye)-_e),window.innerWidth-Se<$e&&$e<2*v&&(pt=Et),ot({horizontal:pt,vertical:je})},[Ge,dt]);const gt=(0,t.useCallback)(Xe=>{ne||(Xe.preventDefault(),Xe.stopPropagation(),at(!0))},[at,ne]),St=(0,t.useCallback)(()=>{at(!1),Be(""),Re(me),Pe(ee)},[me,ee]),ut=()=>Ge&&St(),Dt=Xe=>{Be(Xe||"")},ie=Xe=>{Re(Xe)},De=Xe=>{Pe(Xe)},Ne=(Xe,Le)=>{Ve&&Le&&Le!==ee&&Ve(Le),ct&&Te(Xe),Be(""),at(!1)},Je=()=>{const Xe=q.map(Le=>({...Le,delegatable:ct&&Le.delegatable}));return be&&be.trim()!==""?Xe.filter(Le=>Le.name?.toLowerCase().includes(be.toLowerCase())):Xe};return se?t.createElement(n.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(i.$,{size:16})):t.createElement("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:Ke},ref:ft},t.createElement(s.L,{onClick:ut},t.createElement(P,{basicRole:ye,appliedRoles:dt,query:be,onQueryChange:Dt,onOpen:gt,onClose:St,isFocused:Ge,disabled:ne,showBasicRole:ue}),Ge&&t.createElement(_,{options:Je(),basicRole:ye,appliedRoles:me,onBasicRoleSelect:De,onSelect:ie,onUpdate:Ne,showGroups:be.length===0||be.trim()==="",basicRoleDisabled:he,showBasicRole:ue,updateDisabled:he&&!ct,apply:Ie,offset:ke})))}},66226:(Y,T,e)=>{"use strict";e.d(T,{R:()=>u});var t=e(66111),n=e(13821),i=e(77582),s=e(27876),l=e(17069),f=e(11630);const u=({basicRole:o,userId:d,orgId:r,onBasicRoleChange:m,roleOptions:c,disabled:p,basicRoleDisabled:g,apply:y=!1,onApplyRoles:E,pendingRoles:v,maxWidth:h})=>{const[{loading:P,value:a=[]},C]=(0,n.Z)(async()=>{try{if(y&&Boolean(v?.length))return v;if(i.Vt.hasPermission(s.AccessControlAction.ActionUserRolesList))return await(0,f.kt)(d,r)}catch{console.error("Error loading options")}return[]},[r,d,v]);(0,t.useEffect)(()=>{r&&C()},[r,C,v]);const D=async M=>{y?E&&E(M,d,r):(await(0,f.hB)(M,d,r),await C())},b=i.Vt.hasPermission(s.AccessControlAction.ActionUserRolesAdd)&&i.Vt.hasPermission(s.AccessControlAction.ActionUserRolesRemove);return t.createElement(l.I,{appliedRoles:a,basicRole:o,onRolesChange:D,onBasicRoleChange:m,roleOptions:c,isLoading:P,disabled:p,basicRoleDisabled:g,showBasicRole:!0,apply:y,canUpdateRoles:b,maxWidth:h})}},11630:(Y,T,e)=>{"use strict";e.d(T,{_C:()=>f,hB:()=>l,kt:()=>s,u7:()=>u,ul:()=>i});var t=e(54899),n=e(25310);const i=async(o,d)=>{let r="/api/access-control/roles?delegatable=true";o&&(r+=`&targetOrgId=${o}`);const m=await(0,t.i)().get(r);return!m||!m.length?[]:m.map(n.w)},s=async(o,d)=>{let r=`/api/access-control/users/${o}/roles`;d&&(r+=`?targetOrgId=${d}`);try{const m=await(0,t.i)().get(r);return!m||!m.length?[]:m.map(n.w)}catch(m){return(0,t.kW)(m)&&(m.isHandled=!0),[]}},l=(o,d,r)=>{let m=`/api/access-control/users/${d}/roles`;r&&(m+=`?targetOrgId=${r}`);const c=o.flatMap(p=>p.uid);return(0,t.i)().put(m,{orgId:r,roleUids:c})},f=async(o,d)=>{let r=`/api/access-control/teams/${o}/roles`;d&&(r+=`?targetOrgId=${d}`);try{const m=await(0,t.i)().get(r);return!m||!m.length?[]:m.map(n.w)}catch(m){return(0,t.kW)(m)&&(m.isHandled=!0),[]}},u=(o,d,r)=>{let m=`/api/access-control/teams/${d}/roles`;r&&(m+=`?targetOrgId=${r}`);const c=o.flatMap(p=>p.uid);return(0,t.i)().put(m,{orgId:r,roleUids:c})}},25310:(Y,T,e)=>{"use strict";e.d(T,{r:()=>t,w:()=>n});const t=i=>i.delegatable!==void 0&&!i.delegatable,n=i=>{const s="fixed:";if(!i.displayName&&i.name.startsWith(s)){let l="";l=i.name.replace(s,"").replace(/:/g," "),i.displayName=l}return i}},16964:(Y,T,e)=>{"use strict";e.d(T,{V:()=>s});var t=e(66111),n=e(81910),i=e(63418);const s=u=>t.createElement(n.Z,{...u,cacheRequests:!0,preProcessor:f});let l=new Map;function f(u){let o=l.get(u);return o||(o=i.QX.sanitizeSVGContent(u),l.set(u,o)),o}},99661:(Y,T,e)=>{"use strict";e.d(T,{o:()=>d});var t=e(99151),n=e.n(t),i=e(66111),s=e(8581),l=e(29930);const f=(r="General",m)=>`${r}/${m}`;async function u(r=""){return l.ae.search({type:"dash-db",query:r,limit:100}).then(m=>m.map(c=>({value:{uid:c.uid,title:c.title,folderTitle:c.folderTitle,folderUid:c.folderUid},label:f(c?.folderTitle,c.title)})))}const o=n()(u,250,{leading:!0}),d=({value:r,onChange:m,placeholder:c="Select dashboard",noOptionsMessage:p="No dashboards found",...g})=>{const[y,E]=(0,i.useState)();(0,i.useEffect)(()=>{!r||r===y?.value?.uid||(async()=>{const h=await l.ae.getDashboardByUid(r);h.dashboard&&E({value:{uid:h.dashboard.uid,title:h.dashboard.title,folderTitle:h.meta.folderTitle,folderUid:h.meta.folderUid},label:f(h.meta?.folderTitle,h.dashboard.title)})})()},[r]);const v=(0,i.useCallback)(h=>{E(h),m?.(h?.value)},[m,E]);return i.createElement(s.qb,{loadOptions:o,onChange:v,placeholder:c,noOptionsMessage:p,value:y,defaultOptions:!0,...g})}},79658:(Y,T,e)=>{"use strict";e.d(T,{Es:()=>P});var t=e(9892),n=e(99151),i=e.n(n),s=e(66111),l=e(59679),f=e(4063),u=e(68183),o=e(35645),d=e(72648),r=e(46967),m=e(8581),c=e(18271),p=e(35287),g=e(82002),y=e(50946),E=e(27876);const v="+ Add new",h="-10";function P(b){const{dashboardId:M,allowEmpty:x,onChange:R,filter:S,enableCreateNew:O,inputId:U,onClear:I,enableReset:F,initialFolderUid:w,initialTitle:K="",permissionLevel:L=E.PermissionLevelString.Edit,rootName:V,showRoot:H=!0,skipInitialLoad:j,searchQueryType:A,customAdd:_,folderWarning:k}=b,Q=V??o.v.featureToggles.nestedFolders?"Dashboards":"General",[re,Z]=(0,s.useState)(null),[oe,G]=(0,s.useState)(!1),[le,fe]=(0,s.useState)(""),[ae,de]=(0,s.useState)(re?.title??""),ee=(0,d.wW)(D),me=typeof I=="function",q=(0,s.useCallback)(async at=>{const dt=await(0,y.ZL)(at,L,A),ye=a(dt,S);return(g.Vt.hasAccess(E.AccessControlAction.DashboardsWrite,g.Vt.isEditor)||g.Vt.hasAccess(E.AccessControlAction.DashboardsCreate,g.Vt.isEditor))&&Q?.toLowerCase().startsWith(at.toLowerCase())&&H&&ye.unshift({label:Q,value:""}),F&&at===""&&K!==""&&!ye.find(be=>be.label===K)&&ye.unshift({label:K,value:w}),O&&Boolean(_)?[...ye,{value:h,label:v,title:at}]:ye},[F,w,K,L,Q,H,A,S,O,_]),ne=(0,s.useMemo)(()=>i()(q,300,{leading:!0}),[q]),se=async()=>{const at={label:K,value:void 0},dt={label:Q,value:""},Re=await q("");let ye=null;w!=null?ye=Re.find(Pe=>Pe.value===w)||null:F&&K?ye=at:w&&(ye=Re.find(Pe=>Pe.id===w)||null),!ye&&!x&&(g.Vt.isEditor?ye=dt:!!M?ye=at:ye=Re.length>0?Re[0]:at),!oe&&Z(ye)};(0,s.useEffect)(()=>{re&&re.value!==w&&!oe&&re.value&&re.label&&R({uid:re.value,title:re.label})},[re,w]),(0,l.Z)(async()=>{if(j){const at=await C({getFolder:y.Pb,folderUid:w,folderName:K});Z(at)}await se()},[j,w,K]),(0,s.useEffect)(()=>{re&&re.id===h&&G(!0)},[re]);const he=(0,s.useCallback)((at,dt)=>{if(at?.value===h)Z({id:h,title:le}),de(le);else{if(at||(at={value:"",label:Q}),dt.action==="clear"&&I){I();return}Z(at),R({uid:at.value,title:at.label})}},[R,I,Q,le]),ue=(0,s.useCallback)(async at=>{if(k?.warningCondition(at))return!1;const dt=await(0,y.L6)({title:at});let Re={value:"",label:"Not created"};return dt.uid?(c.Z.emit(f.SI.alertSuccess,["Folder Created","OK"]),Re={value:dt.uid,label:dt.title},Z(dt),he(Re,{action:"create-option",option:Re})):c.Z.emit(f.SI.alertError,["Folder could not be created"]),Re},[k,he]),Te=(0,s.useCallback)(at=>{const dt=Boolean(_?.disallowValues);if(at.key==="Enter"&&dt&&!_?.isAllowedValue(ae)){at.preventDefault();return}switch(at.key){case"Enter":{ue(re?.title),G(!1);break}case"Escape":Z({value:"",label:Q}),G(!1)}},[_?.disallowValues,_?.isAllowedValue,ae,ue,re?.title,Q]),Ve=at=>{const dt=at.currentTarget.value;de(dt),Z({id:void 0,title:dt})},ct=()=>{Z({value:"",label:Q}),G(!1)},Ie=(at,{action:dt})=>{dt==="input-change"&&fe(Re=>at),dt==="menu-close"&&fe(Re=>at)},Ke=()=>k?.warningCondition(ae)?s.createElement(k.warningComponent,null):null,Ge=()=>k?.warningCondition(le)?s.createElement(k.warningComponent,null):null;return oe?s.createElement(s.Fragment,null,s.createElement(Ke,null),s.createElement("div",{className:ee.newFolder},"Press enter to create the new folder."),s.createElement(r.I,{"aria-label":"aria-label",width:30,autoFocus:!0,value:ae,onChange:Ve,onKeyDown:Te,placeholder:"Press enter to confirm new folder.",onBlur:ct})):s.createElement("div",{"data-testid":u.wl.components.FolderPicker.containerV2},s.createElement(Ge,null),s.createElement(m.gY,{inputId:U,"aria-label":u.wl.components.FolderPicker.input,loadingMessage:(0,p.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:re,inputValue:le,onInputChange:Ie,value:re,allowCustomValue:O&&!Boolean(_),loadOptions:ne,onChange:he,onCreateOption:ue,isClearable:me}))}function a(b,M){return(M?M(b):b).map(R=>({label:R.title,value:R.uid}))}async function C({folderName:b,folderUid:M,getFolder:x}){if(M==null)throw new Error("folderUid is not found.");return b?{label:b,value:M}:{label:(await x(M)).title,value:M}}const D=b=>({newFolder:t.css`
    color: ${b.colors.warning.main};
    font-size: ${b.typography.bodySmall.fontSize};
    padding-bottom: ${b.spacing(1)};
  `})},94080:(Y,T,e)=>{"use strict";e.d(T,{c:()=>f});var t=e(82897),n=e.n(t),i=e(66111),s=e(54899),l=e(8581);class f extends i.Component{constructor(o){super(o),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(o){return this.setState({isLoading:!0}),(0,t.isNil)(o)&&(o=""),(0,s.i)().get(`/api/teams/search?perpage=100&page=1&query=${o}`).then(d=>{const r=d.teams.map(m=>({value:m,label:m.name,imgUrl:m.avatarUrl}));return this.setState({isLoading:!1}),r})}render(){const{onSelected:o,className:d}=this.props,{isLoading:r}=this.state;return i.createElement("div",{className:"user-picker","data-testid":"teamPicker"},i.createElement(l.qb,{isLoading:r,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:o,className:d,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"}))}}},28038:(Y,T,e)=>{"use strict";e.d(T,{f:()=>f});var t=e(82897),n=e.n(t),i=e(66111),s=e(54899),l=e(8581);class f extends i.Component{constructor(o){super(o),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(o){return this.setState({isLoading:!0}),(0,t.isNil)(o)&&(o=""),(0,s.i)().get(`/api/org/users/lookup?query=${o}&limit=100`).then(d=>d.map(r=>({id:r.userId,value:r.userId,label:r.login,imgUrl:r.avatarUrl,login:r.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:o,onSelected:d,inputId:r}=this.props,{isLoading:m}=this.state;return i.createElement("div",{className:"user-picker","data-testid":"userPicker"},i.createElement(l.qb,{isClearable:!0,className:o,inputId:r,isLoading:m,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:d,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"}))}}},21731:(Y,T,e)=>{"use strict";e.d(T,{e:()=>s});var t=e(66111),n=e(3385),i=e(39904);class s extends t.Component{constructor(f){super(f)}render(){const{label:f,removeIcon:u,count:o,onClick:d}=this.props,{color:r}=(0,n.Bx)(f),m={backgroundColor:r},c=o!==0&&t.createElement("span",{className:"tag-count-label"},`(${o})`);return t.createElement("span",{className:"label label-tag",style:m},u&&t.createElement(i.J,{onClick:d,name:"times"}),f," ",c)}}},24357:(Y,T,e)=>{"use strict";e.d(T,{D:()=>p});var t=e(9892),n=e(66111),i=e(44800),s=e(79086),l=e(72648),f=e(8581),u=e(39904),o=e(35287),d=e(21731);const r=({data:y,className:E,label:v,isFocused:h,innerProps:P})=>{const a=(0,l.wW)(m);return n.createElement("div",{className:(0,t.cx)(a.option,h&&a.optionFocused),"aria-label":"Tag option",...P},n.createElement("div",{className:`tag-filter-option ${E||""}`},typeof v=="string"?n.createElement(d.e,{label:v,removeIcon:!1,count:y.count??0}):v))},m=y=>({option:t.css`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${y.colors.background.secondary};
      }
    `,optionFocused:t.css`
      background: ${y.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),c=(y,E)=>RegExp((0,s.GE)(E),"i").test(y.value),p=({allowCustomValue:y=!1,formatCreateLabel:E,hideValues:v,inputId:h,isClearable:P,onChange:a,placeholder:C,tagOptions:D,tags:b,width:M})=>{const x=(0,l.wW)(g),R=b.map(k=>({value:k,label:k,count:0})),[S,O]=(0,n.useState)(R),[U,I]=(0,n.useState)(!1),[F,w]=(0,n.useState)(b),[K,L]=(0,n.useState)(R),V=(0,n.useMemo)(()=>b.join(),[b]),H=(0,n.useCallback)(async()=>(await D()).map(Q=>b.includes(Q.term)?{value:Q.term,label:Q.term,count:0}:{value:Q.term,label:Q.term,count:Q.count}),[D,b]),j=(0,n.useCallback)(async()=>{I(!0);const k=await H();y&&K.forEach(Q=>k.push(Q)),O(k),I(!1)},[y,K,H]);(0,n.useEffect)(()=>{b.length>0&&S.length===0&&j()},[j,S.length,b.length]),(0,n.useEffect)(()=>{b!==F&&(w(b),j())},[j,F,b]);const A=k=>{k.forEach(Q=>Q.count=0),a((k||[]).map(Q=>Q.value)),y&&L(k.filter(Q=>!b.includes(Q)))},_={key:V,onFocus:j,isLoading:U,options:S,allowCreateWhileLoading:!0,allowCustomValue:y,formatCreateLabel:E,defaultOptions:!0,filterOption:c,getOptionLabel:k=>k.label,getOptionValue:k=>k.value,inputId:h,isMulti:!0,onChange:A,loadingMessage:(0,o.t)("tag-filter.loading","Loading..."),noOptionsMessage:(0,o.t)("tag-filter.no-tags","No tags found"),placeholder:C||(0,o.t)("tag-filter.placeholder","Filter by tag"),value:R,width:M,components:{Option:r,MultiValueLabel:()=>null,MultiValueRemove(k){const{data:Q}=k;return n.createElement(i.c.MultiValueRemove,{...k},n.createElement(d.e,{key:Q.label,label:Q.label,removeIcon:!0,count:Q.count}))},MultiValueContainer:v?()=>null:i.c.MultiValueContainer}};return n.createElement("div",{className:x.tagFilter},P&&b.length>0&&n.createElement("button",{className:x.clear,onClick:()=>A([])},"Clear tags"),n.createElement(f.NU,{..._,prefix:n.createElement(u.J,{name:"tag-alt"}),"aria-label":"Tag filter"}))};p.displayName="TagFilter";const g=y=>({tagFilter:t.css`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:t.css`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${y.colors.text.secondary};

    &:hover {
      color: ${y.colors.text.primary};
    }
  `})},32873:(Y,T,e)=>{"use strict";e.d(T,{a:()=>d});var t=e(82897),n=e.n(t),i=e(66111),s=e(47891),l=e(67483),f=e(3630),u=e(59796);const o="grafana.dashboard.timepicker.history",d=y=>i.createElement(u.G,{storageKey:o,defaultValue:[]},(E,v)=>{const h=m(E),P=r(h);return i.createElement(f.Xc,{...y,history:P,onChange:a=>{c(a,h,v),y.onChange(a)}})});function r(y){return y.map(E=>s.convertRawToRange(E,"utc",void 0,"YYYY-MM-DD HH:mm:ss"))}function m(y){return y.map(E=>{const v=typeof E.from=="string"?E.from:E.from.toISOString(),h=typeof E.to=="string"?E.to:E.to.toISOString();return{from:v,to:h}})}function c(y,E,v){if(!p(y))return;const h={from:typeof y.raw.from=="string"?y.raw.from:y.raw.from.toISOString(),to:typeof y.raw.to=="string"?y.raw.to:y.raw.to.toISOString()},P=g([h,...E]);v(P)}function p(y){return(0,l.v9)(y.raw.from)||(0,l.v9)(y.raw.to)}function g(y){return(0,t.uniqBy)(y,E=>E.from+E.to).slice(0,4)}},59420:(Y,T,e)=>{"use strict";e.d(T,{K:()=>r});var t=e(66111),n=e(53768),i=e(99098),s=e(729),l=e(78056),f=e(72269),u=e(60325),o=e(97551);const d=["rowHeight","colWidth","showValue","mergeValues","alignValue"];class r extends t.Component{constructor(){super(...arguments),this.panelContext={},this.getValueColor=(c,p,g)=>{const y=this.props.frames[c].fields[p];if(y.display){const E=y.display(g);if(E.color)return E.color}return n.R},this.prepConfig=(c,p,g)=>{this.panelContext=this.context;const{eventBus:y,sync:E}=this.panelContext;return(0,o.Nj)({frame:c,getTimeRange:g,eventBus:y,sync:E,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:c.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor})},this.renderLegend=c=>{const{legend:p,legendItems:g}=this.props;return!c||!g||!p||p.showLegend===!1?null:t.createElement(s.AY.Legend,{placement:p.placement},t.createElement(l.l,{placement:p.placement,items:g,displayMode:p.displayMode,readonly:!0}))}}render(){return t.createElement(f.d,{...this.props,fields:{x:c=>c.type===i.fS.time,y:c=>c.type===i.fS.number||c.type===i.fS.boolean||c.type===i.fS.string},prepConfig:this.prepConfig,propsToDiff:d,renderLegend:this.renderLegend})}}r.contextType=u.bb},97551:(Y,T,e)=>{"use strict";e.d(T,{KN:()=>F,iK:()=>oe,Y:()=>G,$m:()=>re,Ur:()=>k,Nj:()=>L,AR:()=>_,SA:()=>Q});var t=e(53768),n=e(30471),i=e(2703),s=e(56632),l=e(23588),f=e(99098),u=e(69098),o=e(99601),d=e(92103),r=e(17587),m=e(85596),c=e(40538),p=e(13347),g=e(72269),y=e(45778),E=e(45389),v=e(2445),h=e(75974),P=e(5680),a=e(28586),C=e(60892);const{round:D,min:b,ceil:M}=Math,x=2;let R=6;const S=a.Gj;function O(le,fe,ae,de,ee){(0,a.Qm)(ae,le,S,fe,(me,q,ne)=>{let se=de*q,he=de*ne;ee(me,se,he)})}function U(le){const{mode:fe,numSeries:ae,isDiscrete:de,hasMappedNull:ee,rowHeight:me=0,colWidth:q=0,showValue:ne,mergeValues:se=!1,theme:he,label:ue,formatValue:Te,alignValue:Ve="left",getTimeRange:ct,getValueColor:Ie,getFieldConfig:Ke,onHover:Ge,onLeave:at}=le;let dt;const Re=Array(ae).fill(null).map(()=>{let je=document.createElement("div");return je.classList.add("bar-mark"),je.style.position="absolute",je.style.background="rgba(255,255,255,0.2)",je});let ye;const Pe=je=>{ye=Array(ae).fill(null).map(ht=>Array(je).fill(null))},be=`500 ${Math.round(12*devicePixelRatio)}px ${he.typography.fontFamily}`,Be=Array(ae).fill(null),ke=[q,1/0],ot=1-ke[0],ft=(ke[1]??1/0)*h.Z.pxRatio,gt=new Map,St=new Map;function ut(je){gt.forEach((ht,we)=>{je.fillStyle=we,je.fill(ht)}),St.forEach((ht,we)=>{je.strokeStyle=we,je.stroke(ht)}),gt.clear(),St.clear()}function Dt(je,ht,we,Qe,nt,it,yt,Lt,Kt,an,un,hn,Wn){if(yt<1)return;const Bt=Ie(an+1,hn),Ft=Ke(an),Vt=I(Ft,Bt);if(ye[an][un]={x:D(nt-we),y:D(it-Qe),w:yt,h:Lt,sidx:an+1,didx:un,fillColor:Vt},Wn){let At=Vt,Nt=gt.get(At);if(Nt==null&&gt.set(At,Nt=new Path2D),ht(Nt,nt,it,yt,Lt),Kt){let Rt=Bt,wt=St.get(Rt);wt==null&&St.set(Rt,wt=new Path2D),ht(wt,nt+Kt/2,it+Kt/2,yt-Kt,Lt-Kt)}}else je.beginPath(),ht(je,nt,it,yt,Lt),je.fillStyle=Vt,je.fill(),Kt&&(je.beginPath(),ht(je,nt+Kt/2,it+Kt/2,yt-Kt,Lt-Kt),je.strokeStyle=Bt,je.lineWidth=Kt,je.stroke())}const ie=(je,ht,we,Qe)=>(h.Z.orient(je,ht,(nt,it,yt,Lt,Kt,an,un,hn,Wn,Bt,Ft,Vt,At,Nt)=>{let Rt=D((nt.width||0)*h.Z.pxRatio),wt=de(ht),_t=wt&&ee(ht);je.ctx.save(),Nt(je.ctx,je.bbox.left,je.bbox.top,je.bbox.width,je.bbox.height),je.ctx.clip(),O(me,ht-1,ae,Ft,(Qt,en,sn)=>{if(fe===F.Changes)for(let Jt=0;Jt<yt.length;Jt++){let gn=yt[Jt];if(gn!=null||_t){let Cn=Math.round(an(it[Jt],Lt,Bt,hn)),In=Jt;for(;++In<yt.length&&(yt[In]===void 0||se&&yt[In]===gn););let _n=In===yt.length?hn+Bt+Rt:Math.round(an(it[In],Lt,Bt,hn));Dt(je.ctx,Nt,hn,Wn,Cn,D(Wn+en),_n-Cn,D(sn),Rt,Qt,Jt,gn,wt),Jt=In-1}}else if(fe===F.Samples){let Jt=an(it[1],Lt,Bt,hn)-an(it[0],Lt,Bt,hn),gn=Jt*ot,Cn=D(b(ft,Jt-gn)-Rt),In=Cn/2;for(let _n=we;_n<=Qe;_n++){let zn=yt[_n];if(zn!=null||_t){let Hn=an(it[_n],Lt,Bt,hn);Dt(je.ctx,Nt,hn,Wn,D(Hn-In),D(Wn+en),Cn,D(sn),Rt,Qt,_n,zn,wt)}}}}),wt&&(je.ctx.lineWidth=Rt,ut(je.ctx)),je.ctx.restore()}),null),De=Te==null||ne===c.Jp.Never?!1:(je,ht,we,Qe)=>(je.ctx.save(),je.ctx.rect(je.bbox.left,je.bbox.top,je.bbox.width,je.bbox.height),je.ctx.clip(),je.ctx.font=be,je.ctx.textAlign=fe===F.Changes?Ve:"center",je.ctx.textBaseline="middle",h.Z.orient(je,ht,(nt,it,yt,Lt,Kt,an,un,hn,Wn,Bt,Ft)=>{let Vt=D((nt.width||0)*h.Z.pxRatio),Nt=de(ht)&&ee(ht),Rt=D(Wn+_e[ht-1]);for(let wt=0;wt<yt.length;wt++)if(yt[wt]!=null||Nt){const _t=ye[ht-1][wt];if(!_t||_t.x>=Bt)continue;let Qt=Math.floor(_t?.w/R);if(ne===c.Jp.Auto&&Qt<2)continue;let en=Te(ht,yt[wt]),sn=D(_t.x+hn+_t.w/2);fe===F.Changes&&(Ve==="left"?sn=D(_t.x+hn+Vt+x):Ve==="right"&&(sn=D(_t.x+hn+_t.w-Vt-x))),je.ctx.fillStyle=he.colors.getContrastText(_t.fillColor,3),je.ctx.fillText(en.slice(0,Qt),sn,Rt)}}),je.ctx.restore(),!1),Ne=je=>{let ht=je.over,we="";for(let Qe=32;Qe<=126;Qe++)we+=String.fromCharCode(Qe);R=Math.ceil(je.ctx.measureText(we).width/we.length*h.Z.pxRatio),R+=2.5,ht.style.overflow="hidden",Re.forEach(Qe=>{ht.appendChild(Qe)})},Je=je=>{dt=dt||new C.lW(0,0,je.bbox.width,je.bbox.height),dt.clear(),Pe(je.data[0].length),je.series.forEach(ht=>{ht._paths=null})};function Xe(je,ht){let we=Re[je],Qe=h.Z.pxRatio;ht?(we.style.display="",we.style.left=D(ht.x/Qe)+"px",we.style.top=D(ht.y/Qe)+"px",we.style.width=D(ht.w/Qe)+"px",we.style.height=D(ht.h/Qe)+"px"):we.style.display="none",Be[je]=ht}let Le;function Ue(je,ht){let we;for(let Qe=0;Qe<ae;Qe++){let nt;if(je>=0){let it=_e[Qe];dt.get(je,it,1,1,yt=>{(0,C.Pn)(je,it,yt.x,yt.y,yt.x+yt.w,yt.y+yt.h)&&(nt=yt,Math.abs(ht-it)<=yt.h/2&&(we=yt))})}nt?nt!==Be[Qe]&&Xe(Qe,nt):Be[Qe]!=null&&Xe(Qe,null)}we?we!==Le&&(Le=we,Ge(we.sidx,we.didx,we)):Le&&(Le=void 0,at())}function ve(je,ht){let we;dt.get(je,ht,1,1,Qe=>{(0,C.Pn)(je,ht,Qe.x,Qe.y,Qe.x+Qe.w,Qe.y+Qe.h)&&(we=Qe)}),we?(Xe(0,we),we!==Le&&(Le=we,Ge(we.sidx,we.didx,we))):Le&&(Xe(0,null),Le=void 0,at())}const Se=fe===F.Changes?Ue:ve,$e=je=>{let ht=D(je.cursor.left*h.Z.pxRatio),we=D(je.cursor.top*h.Z.pxRatio);if(!dt.o.length&&dt.q==null)for(const Qe of ye)for(const nt of Qe)nt&&dt.add(nt);Se(ht,we)},Ye={y:!1,x:fe===F.Changes,points:{show:!1}},_e=Array(ae).fill(0),Et=Array(ae).fill(0),pt=[0,1];return{cursor:Ye,xSplits:fe===F.Samples?(je,ht,we,Qe,nt,it)=>{let yt=[],Lt=je.data[0][1]-je.data[0][0],Kt=M(nt/Lt);for(let an=0;an<je.data[0].length;an+=Kt){let un=je.data[0][an];un>=we&&un<=Qe&&yt.push(un)}return yt}:null,xRange:je=>{const ht=ct();let we=ht.from.valueOf(),Qe=ht.to.valueOf();if(fe===F.Samples){let yt=(je.data[0][1]-je.data[0][0])/2;we<=je.data[0][0]&&(we=je.data[0][0]-yt);let Lt=je.data[0].length-1;Qe>=je.data[0][Lt]&&(Qe=je.data[0][Lt]+yt)}return[we,Qe]},ySplits:je=>(O(me,null,ae,je.bbox.height,(ht,we,Qe)=>{_e[ht]=D(we+Qe/2),Et[ht]=je.posToVal(_e[ht]/h.Z.pxRatio,g.j)}),Et),yValues:(je,ht)=>ht.map((we,Qe)=>ue(Qe+1)),yRange:pt,drawPaths:ie,drawPoints:De,init:Ne,drawClear:Je,setCursor:$e}}function I(le,fe){if(fe[0]==="#"&&fe.length===9)return fe;const ae=(le.fillOpacity??100)/100;return(0,P.alpha)(fe,ae)}var F=(le=>(le.Changes="changes",le.Samples="samples",le))(F||{});const w={lineWidth:0,fillOpacity:80};function K(le){return le.ctrlKey||le.metaKey||le.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const L=({frame:le,theme:fe,timeZones:ae,getTimeRange:de,mode:ee,eventBus:me,sync:q,rowHeight:ne,colWidth:se,showValue:he,alignValue:ue,mergeValues:Te,getValueColor:Ve})=>{const ct=new p.U(ae[0]),Ie="time",Ke="x",Ge=gt=>{const St=gt.config?.color?.mode;return!(St&&gt.display&&St.startsWith("continuous-"))},at=gt=>gt.config.mappings?.some(St=>St.type===m.Hi.SpecialValue&&St.options.match==="null")||!1,dt=(gt,St)=>{const ut=le.fields[gt];return ut.state?.origin?.fieldIndex!==void 0&&ut.state?.origin?.frameIndex!==void 0&&Ve?Ve(ut.state?.origin?.frameIndex,ut.state?.origin?.fieldIndex,St):t.R},Re={mode:ee,numSeries:le.fields.length-1,isDiscrete:gt=>Ge(le.fields[gt]),hasMappedNull:gt=>at(le.fields[gt]),mergeValues:Te,rowHeight:ne,colWidth:se,showValue:he,alignValue:ue,theme:fe,label:gt=>(0,n.CZ)(le.fields[gt],le),getFieldConfig:gt=>le.fields[gt].config.custom,getValueColor:dt,getTimeRange:de,formatValue:(gt,St)=>(0,i.zc)(le.fields[gt].display(St)),onHover:(gt,St)=>{Pe=gt,be=St,ye=!0},onLeave:()=>{Pe=null,be=null,ye=!0}};let ye=!1,Pe=null,be=null;const Be=U(Re),ke={point:{[Ie]:null,[g.j]:null},data:le};ct.addHook("init",Be.init),ct.addHook("drawClear",Be.drawClear),ct.addHook("setCursor",Be.setCursor);const ot=(gt,St,ut)=>{ye&&(Pe!=null&&(gt(Pe),St(be)),ye=!1),ut(Pe==null)};ct.setTooltipInterpolator(ot),ct.setPrepData(gt=>(0,v.Bj)(gt[0],(0,v.i7)(gt[0]))),ct.setCursor(Be.cursor),ct.addScale({scaleKey:Ke,isTime:!0,orientation:c.wN.Horizontal,direction:c.bQ.Right,range:Be.xRange}),ct.addScale({scaleKey:g.j,isTime:!1,orientation:c.wN.Vertical,direction:c.bQ.Up,range:Be.yRange}),ct.addAxis({scaleKey:Ke,isTime:!0,splits:Be.xSplits,placement:c.LB.Bottom,timeZone:ae[0],theme:fe,grid:{show:!0}}),ct.addAxis({scaleKey:g.j,isTime:!1,placement:c.LB.Left,splits:Be.ySplits,values:Be.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:fe});let ft=0;for(let gt=0;gt<le.fields.length;gt++){if(gt===0)continue;const St=le.fields[gt],ut=St.config,Dt={...w,...ut.custom};St.state.seriesIndex=ft++,ct.addSeries({scaleKey:g.j,pathBuilder:Be.drawPaths,pointsBuilder:Be.drawPoints,lineWidth:Dt.lineWidth,fillOpacity:Dt.fillOpacity,theme:fe,show:!Dt.hideFrom?.viz,thresholds:ut.thresholds,dataFrameFieldIndex:St.state?.origin})}if(q&&q()!==s.m.Off){let gt={};gt.sync={key:"__global_",filters:{pub:(St,ut,Dt,ie,De,Ne,Je)=>q&&q()===s.m.Off?!1:(ke.rowIndex=Je,Dt<0&&ie<0?(ke.point[Ie]=null,ke.point[g.j]=null,me.publish(new l.xH)):(ke.point[Ie]=ut.posToVal(Dt,Ke),ke.point.panelRelY=ie>0?ie/Ne:1,ke.down=void 0,me.publish(new l.es(ke))),!0)},scales:[Ke,null]},ct.setSync(),ct.setCursor(gt)}return ct};function V(le){const fe=new Map;for(let ae=0;ae<le.fields.length;ae++)fe.set(getFieldDisplayName(le.fields[ae],le),ae);return fe}function H(le){let fe=le[0],ae;for(let de=1;de<le.length;de++){let ee=le[de];ee===null?fe=null:ee===fe?(ae||(ae=[...le]),ae[de]=void 0):ee!=null&&(fe=ee)}return ae}function j(le){let fe=le.config.custom?.spanNulls;return fe?fe===!0?1/0:fe:-1}function A(le,fe){const ae=le.config.thresholds;if(le.type!==f.fS.number||!ae||!ae.steps.length)return;const de=k(le.config,fe);if(de.length!==ae.steps.length)return;const ee=new Map,me=new Map;for(let se=0;se<de.length;se++)ee.set(ae.steps[se],de[se].label),me.set(de[se].label,de[se].color);let q=le.values;const ne=new Array(le.values.length);if(ae.mode===u.H.Percentage){const{min:se,max:he}=(0,o.xD)(le),ue=he-se;q=q.map(Te=>Te==null?Te:(Te-se)/ue*100)}for(let se=0;se<ne.length;se++){const he=q[se];he==null?ne[se]=he:ne[se]=ee.get((0,d.m1)(he,ae.steps))}return{...le,config:{...le.config,custom:{...le.config.custom,spanNulls:j(le)}},type:f.fS.string,values:ne,display:se=>({text:String(se),color:me.get(String(se)),numeric:NaN})}}function _(le,fe,ae,de){if(!le?.length)return{warn:"No data in response"};let ee=!1;const me=[];for(let q of le){let ne=!1,se=!1,he=(0,r.Y3)(q,q.fields.findIndex(Ve=>Ve.type===f.fS.time)),ue=(0,y.w)({frame:he,refFieldPseudoMin:ae.from.valueOf(),refFieldPseudoMax:ae.to.valueOf()});ue!==q&&(se=!0);const Te=[];for(let Ve of(0,E.I)(ue).fields)switch(Ve.type){case f.fS.time:ne=!0,ee=!0,Te.push(Ve);break;case f.fS.number:if(fe&&Ve.config.color?.mode===t.S.Thresholds){const ct=A(Ve,de);if(ct){Te.push(ct),se=!0;continue}}case f.fS.boolean:case f.fS.string:Ve={...Ve,config:{...Ve.config,custom:{...Ve.config.custom,spanNulls:j(Ve)}}},Te.push(Ve);break;default:se=!0}ne&&Te.length>1&&(ee=!0,se?me.push({...he,fields:Te}):me.push(he))}return ee?me.length?{frames:me}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function k(le,fe){const ae=[],de=le.thresholds;if(!de||!de.steps.length)return ae;const ee=de.steps,me=(0,i.Cf)(de.mode===u.H.Percentage?"percent":le.unit??""),q=ne=>(0,i.zc)(me(ne));for(let ne=0;ne<ee.length;ne++){let se=ee[ne],he=se.value,ue="",Te="";he===-1/0&&ne<ee.length-1?(he=ee[ne+1].value,ue="< "):Te="+",ae.push({label:`${ue}${q(he)}${Te}`,color:fe.visualization.getColorByName(se.color),yAxis:1})}return ae}function Q(le,fe,ae){if(!(!le||fe.showLegend===!1))return re(Z(le),ae)}function re(le,fe){if(!le.length)return;const ae=[],de=le[0].config,ee=de.color?.mode??t.S.Fixed,me=de.thresholds;if(ee===t.S.Thresholds&&me?.steps&&me.steps.length>1)return k(de,fe);if(ee.startsWith("continuous"))return;let q=new Map;return le.forEach(ne=>{ne.values.forEach(se=>{let he=ne.display(se);he.color&&q.set(he.text,he.color)})}),q.forEach((ne,se)=>{se.length>0&&ae.push({label:se,color:fe.visualization.getColorByName(ne??t.R),yAxis:1})}),ae}function Z(le){const fe=[];for(const ae of le)for(const de of ae.fields)de.type!==f.fS.time&&fe.push(de);return fe}function oe(le,fe){let ae,de=fe+1;if(de>=le.values.length)return null;const ee=le.values[fe];for(;ae===void 0;){if(de>=le.values.length)return null;const me=le.values[de];me===void 0||me===ee?de++:ae=de}return ae}function G(le){if(le<0||Number.isNaN(le))return"";let fe,ae,de,ee,me,q,ne,se;return ne=Math.floor(le/1e3),q=Math.floor(ne/60),ne=ne%60,me=Math.floor(q/60),q=q%60,ee=Math.floor(me/24),me=me%24,fe=Math.floor(ee/365),fe>0&&(ee=ee%365),ae=Math.floor(ee/30),ae>0&&(ee=ee%30),de=Math.floor(ee/7),de>0&&(ee=ee%7),se=Math.round(le%1e3*1e3)/1e3,(fe>0?fe+"y "+(ae>0?ae+"mo ":"")+(de>0?de+"w ":"")+(ee>0?ee+"d ":""):ae>0?ae+"mo "+(de>0?de+"w ":"")+(ee>0?ee+"d ":""):de>0?de+"w "+(ee>0?ee+"d ":""):ee>0?ee+"d "+(me>0?me+"h ":""):me>0?me+"h "+(q>0?q+"m ":""):q>0?q+"m "+(ne>0?ne+"s ":""):ne>0?ne+"s "+(se>0?se+"ms ":""):se>0?se+"ms ":"0").trim()}},33045:(Y,T,e)=>{"use strict";e.d(T,{a:()=>u});var t=e(9892),n=e(66111),i=e(72648),s=e(58564),l=e(77117),f=e(39904);const u=({values:d,onChange:r,id:m})=>{const c=(0,i.wW)(o);return n.createElement("div",{className:c.wrapper},d.length?d.map((p,g)=>n.createElement("div",{className:c.pair,key:g},n.createElement(s.X,{id:`${m}-key-${g}`,placeholder:"Tag name",value:p.key,onChange:y=>{r(d.map((E,v)=>(v===g&&(E.key=String(y)),E)))}}),n.createElement(l.W,{"aria-label":"equals",className:c.operator},"as"),n.createElement(s.X,{id:`${m}-value-${g}`,placeholder:"New name (optional)",value:p.value||"",onChange:y=>{r(d.map((E,v)=>(v===g&&(E.value=String(y)),E)))}}),n.createElement("button",{onClick:()=>r([...d.slice(0,g),...d.slice(g+1)]),className:"gf-form-label query-part","aria-label":"Remove tag",type:"button"},n.createElement(f.J,{name:"times"})),g===d.length-1?n.createElement("button",{onClick:()=>r([...d,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(f.J,{name:"plus"})):null)):n.createElement("button",{onClick:()=>r([...d,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(f.J,{name:"plus"})))},o=d=>({wrapper:t.css`
    display: flex;
    flex-direction: column;
    gap: ${d.spacing(.5)} 0;
  `,pair:t.css`
    display: flex;
    justify-content: start;
    align-items: center;
  `,operator:t.css`
    color: ${d.v1.palette.orange};
    width: auto;
  `})},83437:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>c,p:()=>m});var t=e(9892),n=e(66111),i=e(53117),s=e(72648),l=e(11543),f=e(81764),u=e(8944),o=e(46967),d=e(62911),r=e(33045);function m(E){if(E?.tracesToLogsV2)return E.tracesToLogsV2;if(!E?.tracesToLogs)return;const v={customQuery:!1};return v.datasourceUid=E.tracesToLogs.datasourceUid,v.tags=E.tracesToLogs.mapTagNamesEnabled?E.tracesToLogs.mappedTags:E.tracesToLogs.tags?.map(h=>({key:h})),v.filterByTraceID=E.tracesToLogs.filterByTraceID,v.filterBySpanID=E.tracesToLogs.filterBySpanID,v.spanStartTimeShift=E.tracesToLogs.spanStartTimeShift,v.spanEndTimeShift=E.tracesToLogs.spanEndTimeShift,v}function c({options:E,onOptionsChange:v}){const h=(0,s.wW)(y),P=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource","grafana-falconlogscale-datasource"],a=(0,n.useMemo)(()=>m(E.jsonData)||{customQuery:!1},[E.jsonData]),{query:C="",tags:D,customQuery:b}=a,M=(0,n.useCallback)(x=>{v({...E,jsonData:{...E.jsonData,tracesToLogsV2:{...a,...x},tracesToLogs:void 0}})},[v,E,a]);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Trace to logs"),n.createElement("div",{className:h.infoText},"Navigate from a trace span to the selected data source's logs",n.createElement(d.j,{hrefSuffix:`${E.type}/#trace-to-logs`})),n.createElement(l.Z,null,n.createElement(f._,{tooltip:"The logs data source the trace is going to navigate to",label:"Data source",labelWidth:26},n.createElement(i.q,{inputId:"trace-to-logs-data-source-picker",filter:x=>P.includes(x.type),current:a.datasourceUid,noDefault:!0,width:40,onChange:x=>M({datasourceUid:x.uid})}))),n.createElement(g,{type:"start",value:a.spanStartTimeShift||"",onChange:x=>M({spanStartTimeShift:x})}),n.createElement(g,{type:"end",value:a.spanEndTimeShift||"",onChange:x=>M({spanEndTimeShift:x})}),n.createElement(l.Z,null,n.createElement(f._,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26},n.createElement(r.a,{values:D??[],onChange:x=>M({tags:x})}))),n.createElement(p,{disabled:b,type:"trace",id:"filterByTraceID",value:Boolean(a.filterByTraceID),onChange:x=>M({filterByTraceID:x})}),n.createElement(p,{disabled:b,type:"span",id:"filterBySpanID",value:Boolean(a.filterBySpanID),onChange:x=>M({filterBySpanID:x})}),n.createElement(l.Z,null,n.createElement(f._,{tooltip:"Use a custom query with the possibility to interpolate variables from the trace or span",label:"Use custom query",labelWidth:26},n.createElement(u.x,{id:"customQuerySwitch",value:b,onChange:x=>M({customQuery:x.currentTarget.checked})}))),b&&n.createElement(f._,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword",grow:!0},n.createElement(o.I,{label:"Query",type:"text",allowFullScreen:!0,value:C,onChange:x=>M({query:x.currentTarget.value})})))}function p(E){return n.createElement(l.Z,null,n.createElement(f._,{disabled:E.disabled,label:`Filter by ${E.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${E.type} ID`},n.createElement(u.x,{id:E.id,value:E.value,onChange:v=>E.onChange(v.currentTarget.checked)})))}function g(E){return n.createElement(l.Z,null,n.createElement(f._,{label:`Span ${E.type} time shift`,labelWidth:26,grow:!0,tooltip:`Shifts the ${E.type} time of the span. Default: 0 (Time units can be used here, for example: 5s, -1m, 3h)`},n.createElement(o.I,{type:"text",placeholder:"0",width:40,onChange:v=>E.onChange(v.currentTarget.value),value:E.value})))}const y=E=>({infoText:t.css`
    padding-bottom: ${E.spacing(2)};
    color: ${E.colors.text.secondary};
  `})},41197:(Y,T,e)=>{"use strict";e.d(T,{B:()=>u});var t=e(9892),n=e(66111),i=e(72648),s=e(35029),l=e(43226);const f=d=>({Global:[{keys:["g","h"],description:"Go to Home Dashboard"},{keys:["g","d"],description:"Go to Dashboards"},{keys:["g","e"],description:"Go to Explore"},{keys:["g","p"],description:"Go to Profile"},{keys:[`${d} + k`],description:"Open search"},{keys:["esc"],description:"Exit edit/setting views"},{keys:["h"],description:"Show all keyboard shortcuts"},{keys:["c","t"],description:"Change theme"}],Dashboard:[{keys:[`${d}+s`],description:"Save dashboard"},{keys:["d","r"],description:"Refresh all panels"},{keys:["d","s"],description:"Dashboard settings"},{keys:["d","v"],description:"Toggle in-active / view mode"},{keys:["d","k"],description:"Toggle kiosk mode (hides top nav)"},{keys:["d","E"],description:"Expand all rows"},{keys:["d","C"],description:"Collapse all rows"},{keys:["d","a"],description:"Toggle auto fit panels (experimental feature)"},{keys:[`${d} + o`],description:"Toggle shared graph crosshair"},{keys:["d","l"],description:"Toggle all panel legends"}],"Focused Panel":[{keys:["e"],description:"Toggle panel edit view"},{keys:["v"],description:"Toggle panel fullscreen view"},{keys:["p","s"],description:"Open Panel Share Modal"},{keys:["p","d"],description:"Duplicate Panel"},{keys:["p","r"],description:"Remove Panel"},{keys:["p","l"],description:"Toggle panel legend"}],"Time Range":[{keys:["t","z"],description:"Zoom out time range"},{keys:["t","\u2190"],description:"Move time range back"},{keys:["t","\u2192"],description:"Move time range forward"},{keys:["t","a"],description:"Make time range absolute/permanent"}]}),u=({onDismiss:d})=>{const r=(0,i.wW)(o),m=(0,n.useMemo)(()=>(0,l.vl)(),[]),c=(0,n.useMemo)(()=>f(m),[m]);return n.createElement(s.u,{title:"Shortcuts",isOpen:!0,onDismiss:d,onClickBackdrop:d},n.createElement("div",{className:r.categories},Object.entries(c).map(([p,g],y)=>n.createElement("div",{className:r.shortcutCategory,key:y},n.createElement("table",{className:r.shortcutTable},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{className:r.shortcutTableCategoryHeader,colSpan:2},p)),g.map((E,v)=>n.createElement("tr",{key:`${y}-${v}`},n.createElement("td",{className:r.shortcutTableKeys},E.keys.map((h,P)=>n.createElement("span",{className:r.shortcutTableKey,key:`${y}-${v}-${P}`},h))),n.createElement("td",{className:r.shortcutTableDescription},E.description)))))))))};function o(d){return{titleDescription:t.css`
      font-size: ${d.typography.bodySmall.fontSize};
      font-weight: ${d.typography.bodySmall.fontWeight};
      color: ${d.colors.text.disabled};
      padding-bottom: ${d.spacing(2)};
    `,categories:t.css`
      font-size: ${d.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:t.css`
      width: 50%;
      font-size: ${d.typography.bodySmall.fontSize};
    `,shortcutTable:t.css`
      margin-bottom: ${d.spacing(2)};
    `,shortcutTableCategoryHeader:t.css`
      font-weight: normal;
      font-size: ${d.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:t.css`
      text-align: left;
      color: ${d.colors.text.disabled};
      width: 99%;
      padding: ${d.spacing(1,2)};
    `,shortcutTableKeys:t.css`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${d.colors.text.primary};
    `,shortcutTableKey:t.css`
      display: inline-block;
      text-align: center;
      margin-right: ${d.spacing(.5)};
      padding: 3px 5px;
      font: 11px Consolas, 'Liberation Mono', Menlo, Courier, monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${d.colors.border.medium};
      border-radius: ${d.shape.borderRadius(3)};
      color: ${d.colors.text.primary};
      background-color: ${d.colors.background.secondary};
    `}}},47694:(Y,T,e)=>{"use strict";e.d(T,{Oh:()=>u,ZP:()=>s,iE:()=>l,vc:()=>n.v});var t=e(59250),n=e(35645);let i=n.v;const s=i,l=()=>i,f=o=>{i={...i,...o}},u=Boolean(n.v.panels?.debug?.state===t.BV.alpha)},84952:(Y,T,e)=>{"use strict";e.d(T,{AV:()=>o,FL:()=>p,K3:()=>t,OA:()=>s,QO:()=>r,b0:()=>u,cz:()=>i,gN:()=>c,hD:()=>n,kh:()=>f,yM:()=>l,zF:()=>d});const t=30,n=8,i=24,s="v",l="h",f=4,u=250,o=t*3,d="panel-copy",r=2,m=23763571993,c=40,p="VisualizationSelectPane.ListMode"},34177:(Y,T,e)=>{"use strict";e.d(T,{h:()=>n,p:()=>i});var t=e(66111);const n=t.createContext(void 0);function i(){const s=(0,t.useContext)(n);if(!s)throw new Error("No GrafanaContext found");return s}},60499:(Y,T,e)=>{"use strict";e.d(T,{AT:()=>d,ZR:()=>m,iG:()=>c,t_:()=>r});var t=e(66111),n=e(44288),i=e(82052),s=e(27876),l=e(659);const f={title:"",text:"",severity:s.AppNotificationSeverity.Success,icon:"check"},u={title:"",text:"",severity:s.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},o={title:"",text:"",severity:s.AppNotificationSeverity.Error,icon:"exclamation-triangle"},d=(p,g="",y)=>({...f,title:p,text:g,id:(0,n.Z)(),timestamp:Date.now(),showing:!0}),r=(p,g="",y,E)=>({...o,text:(0,i.i)(g),title:p,id:(0,n.Z)(),traceId:y,component:E,timestamp:Date.now(),showing:!0}),m=(p,g="",y)=>({...u,title:p,text:g,traceId:y,id:(0,n.Z)(),timestamp:Date.now(),showing:!0});function c(){const p=(0,s.useDispatch)();return(0,t.useMemo)(()=>({success:(g,y="")=>{p((0,l.$l)(d(g,y)))},warning:(g,y="",E)=>{p((0,l.$l)(m(g,y,E)))},error:(g,y="",E)=>{p((0,l.$l)(r(g,y,E)))}}),[p])}},77582:(Y,T,e)=>{"use strict";e.d(T,{Vt:()=>i.Vt,Wz:()=>s.W,h$:()=>t.Z,rv:()=>n.r});var t=e(18271),n=e(29494),i=e(82002),s=e(4050)},3258:(Y,T,e)=>{"use strict";e.d(T,{H6:()=>E,ZP:()=>v});var t=e(82897),n=e(58379),i=e(50395),s=e(86647);const l=R=>{const S=(0,s.F)().getInstanceSettings(R.datasourceName);return{id:R.ts.toString(),createdAt:R.ts,datasourceName:R.datasourceName,datasourceUid:S?.uid||"",starred:R.starred,comment:R.comment,queries:R.queries}},f=R=>{if(!(0,s.F)().getInstanceSettings({uid:R.datasourceUid}))throw new Error("Datasource not found.");return{ts:R.createdAt,datasourceName:R.datasourceName,starred:R.starred,comment:R.comment,queries:R.queries}};var u=e(43823);function o(R,S,O,U,I){const F=m(R,O),w=c(F,U),K=I?r(w,I):w;return p(K,S)}const d=(R,S)=>{const O=new Date,U=new Date(O.setDate(O.getDate()-R));return S?U.setHours(24,0,0,0):U.setHours(0,0,0,0)};function r(R,S){const O=d(S[0],!0),U=d(S[1],!1);return R.filter(I=>I.createdAt<O&&I.createdAt>U)}function m(R,S){return S.length>0?R.filter(O=>S.includes(O.datasourceName)):R}function c(R,S){return R.filter(O=>O.comment.includes(S)?!0:O.queries.filter(I=>Object.values((0,t.omit)(I,["datasource","key","refId","hide","queryType"])).some(F=>F?.toString().includes(S))).length>0)}const p=(R,S)=>{let O;return S===u.A.Ascending&&(O=(U,I)=>U.createdAt<I.createdAt?-1:U.createdAt>I.createdAt?1:0),S===u.A.Descending&&(O=(U,I)=>U.createdAt<I.createdAt?1:U.createdAt>I.createdAt?-1:0),S===u.A.DatasourceZA&&(O=(U,I)=>U.datasourceName<I.datasourceName?-1:U.datasourceName>I.datasourceName?1:0),S===u.A.DatasourceAZ&&(O=(U,I)=>U.datasourceName<I.datasourceName?1:U.datasourceName>I.datasourceName?-1:0),R.sort(O)},g={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"},y="grafana.explore.richHistory",E=1e4;class v{async getRichHistory(S){const O=C().map(l),U=S.starred?O.filter(F=>F.starred===!0):O,I=o(U,S.sortOrder,S.datasourceFilters,S.search,[S.from,S.to]);return{richHistory:I,total:I.length}}async addToRichHistory(S){const O=Date.now(),U={id:O.toString(),createdAt:O,...S},I=f(U),F=P(C()),w=I.queries.map(j=>(0,t.omit)(j,["key","refId"])),K=F.length>0&&F[0].queries.map(j=>(0,t.omit)(j,["key","refId"]));if((0,t.isEqual)(w,K)){const j=new Error("Entry already exists");throw j.name=i.j.DuplicatedEntry,j}const{queriesToKeep:L,limitExceeded:V}=a(F),H=[I,...L];try{n.Z.setObject(y,H)}catch(j){if(j instanceof Error&&j.name==="QuotaExceededError")x(i.j.StorageFull,`Saving rich history failed: ${j.message}`);else throw j}return V?{warning:{type:i.V.LimitExceeded,message:`Query history reached the limit of ${E}. Old, not-starred items have been removed.`},richHistoryQuery:U}:{richHistoryQuery:U}}async deleteAll(){n.Z.delete(y)}async deleteRichHistory(S){const O=parseInt(S,10),I=n.Z.getObject(y,[]).filter(F=>F.ts!==O);n.Z.setObject(y,I)}async updateStarred(S,O){return h(S,U=>U.starred=O)}async updateComment(S,O){return h(S,U=>U.comment=O)}async getSettings(){return{activeDatasourceOnly:n.Z.getObject(g.activeDatasourceOnly,!1),retentionPeriod:n.Z.getObject(g.retentionPeriod,7),starredTabAsFirstTab:n.Z.getBool(g.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:n.Z.getObject(g.datasourceFilters,[]).map(S=>S.value)}}async updateSettings(S){n.Z.set(g.activeDatasourceOnly,S.activeDatasourceOnly),n.Z.set(g.retentionPeriod,S.retentionPeriod),n.Z.set(g.starredTabAsFirstTab,S.starredTabAsFirstTab),n.Z.setObject(g.datasourceFilters,(S.lastUsedDatasourceFilters||[]).map(O=>({value:O})))}}function h(R,S){const O=parseInt(R,10),U=n.Z.getObject(y,[]),I=(0,t.find)(U,{ts:O});if(!I)throw new Error("Rich history item not found.");return S(I),n.Z.setObject(y,U),l(I)}function P(R){const S=n.Z.getObject(g.retentionPeriod,7),O=d(S,!1);return R.filter(U=>U.ts>O||U.starred===!0)||[]}function a(R){let S=!1,O=R.length-1;for(;O>=0&&R.length>=E;)R[O].starred||(R.splice(O,1),S=!0),O--;return{queriesToKeep:R,limitExceeded:S}}function C(){const R=n.Z.getObject(y,[]);return D(R)}function D(R){return R.map(O=>{const U=O.queries.map((I,F)=>b(O,I,F));return{...O,queries:U}})}function b(R,S,O){const U="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof S=="object"?S:M(S)?JSON.parse(S):{expr:S,refId:U[O]}}function M(R){try{JSON.parse(R)}catch{return!1}return!0}function x(R,S){const O=new Error(S);throw O.name=R,O}},50395:(Y,T,e)=>{"use strict";e.d(T,{V:()=>n,j:()=>t});var t=(i=>(i.StorageFull="StorageFull",i.DuplicatedEntry="DuplicatedEntry",i))(t||{}),n=(i=>(i.LimitExceeded="LimitExceeded",i))(n||{})},4219:(Y,T,e)=>{"use strict";e.d(T,{b:()=>y,X:()=>E});var t=e(35645),n=e(77582),i=e(43823),s=e(3258),l=e(65583),f=e(54899),u=e(86647),o=e(42454);const d=v=>{const h=(0,u.F)().getInstanceSettings({uid:v.datasourceUid});return{id:v.uid,createdAt:v.createdAt*1e3,datasourceName:h?.name||"",datasourceUid:v.datasourceUid,starred:v.starred,comment:v.comment,queries:v.queries}},r=v=>({uid:v.id,createdAt:Math.floor(v.createdAt/1e3),datasourceUid:v.datasourceUid,starred:v.starred,comment:v.comment,queries:v.queries});class m{constructor(){this.preferenceService=new o.y("user")}async addToRichHistory(h){const{result:P}=await(0,f.i)().post("/api/query-history",{dataSourceUid:h.datasourceUid,queries:h.queries});return{richHistoryQuery:d(P)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(h){(0,f.i)().delete(`/api/query-history/${h}`)}async getRichHistory(h){const P=c(h);let a="query-history-get-all";h.starred&&(a="query-history-get-starred");const D=(await(0,l.n)((0,f.i)().fetch({method:"GET",url:`/api/query-history?${P}`,requestId:a}))).data,b=(D.result.queryHistory||[]).map(d),M=D.result.totalCount||0;return{richHistory:b,total:M}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(h,P){const a=await(0,f.i)().patch(`/api/query-history/${h}`,{comment:P});return d(a.result)}updateSettings(h){return this.preferenceService.patch({queryHistory:{homeTab:h.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(h,P){let a;return P?a=await(0,f.i)().post(`/api/query-history/star/${h}`):a=await(0,f.i)().delete(`/api/query-history/star/${h}`),d(a.result)}}function c(v){let h=`${v.datasourceFilters.map(P=>{const a=(0,u.F)().getInstanceSettings(P).uid;return`datasourceUid=${encodeURIComponent(a)}`}).join("&")}`;if(v.search&&(h=h+`&searchString=${v.search}`),v.sortOrder&&(h=h+`&sort=${v.sortOrder===i.A.Ascending?"time-asc":"time-desc"}`),!v.starred){const P=v.from===0?"now":`now-${v.from}d`,a=v.to===0?"now":`now-${v.to}d`;h=h+`&to=${P}`,h=h+`&from=${a}`}return h=h+"&limit=100",h=h+`&page=${v.page||1}`,v.starred&&(h=h+`&onlyStarred=${v.starred}`),h}const p=new s.ZP,g=new m,y=()=>t.v.queryHistoryEnabled?g:p,E=()=>t.v.queryHistoryEnabled?{availableFilters:[i.A.Descending,i.A.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:n.Vt.isSignedIn}:{availableFilters:[i.A.Descending,i.A.Ascending,i.A.DatasourceAZ,i.A.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},40014:(Y,T,e)=>{"use strict";e.d(T,{x:()=>s});var t=e(66111),n=e(27876),i=e(70431);function s(l){const f=(0,n.useDispatch)(),u=(0,t.useRef)(l);u.current=l,(0,t.useEffect)(()=>()=>{f((0,i.e)({cleanupAction:u.current}))},[f])}},76770:(Y,T,e)=>{"use strict";e.d(T,{q:()=>i});var t=e(27876),n=e(86245);const i=s=>{const l=(0,t.useSelector)(f=>f.navIndex);return(0,n.ht)(l,s)}},96044:(Y,T,e)=>{"use strict";e.d(T,{K:()=>s});var t=e(66111),n=e(56895),i=e(37932);function s(){const{search:l}=(0,n.TH)(),f=(0,t.useMemo)(()=>(0,i.Ox)(l||""),[l]),u=(0,t.useCallback)((o,d)=>i.E1.partial(o,d),[]);return[f,u]}},19719:(Y,T,e)=>{"use strict";e.d(T,{D_:()=>d,a2:()=>o,k$:()=>u});const t="en-US",n="fr-FR",i="es-ES",s="de-DE",l="zh-Hans",f="pseudo-LOCALE",u=t,o=[{code:t,name:"English",loader:()=>Promise.resolve({})},{code:n,name:"Fran\xE7ais",loader:()=>e.e(6419).then(e.t.bind(e,58756,19))},{code:i,name:"Espa\xF1ol",loader:()=>e.e(6008).then(e.t.bind(e,4253,19))},{code:s,name:"Deutsch",loader:()=>e.e(810).then(e.t.bind(e,90810,19))},{code:l,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(5001).then(e.t.bind(e,35001,19))}],d=o.map(r=>r.code)},35287:(Y,T,e)=>{"use strict";e.d(T,{$q:()=>c,cC:()=>d,t:()=>m,uC:()=>u});var t=e(97925),n=e(66111),i=e(80332),s=e(89880),l=e(19719);const f={type:"backend",init(){},async read(p,g,y){const E=l.a2.find(h=>h.code===p);if(!E)return y(new Error("No message loader available for "+p),null);const v=await E.loader();y(null,v)}};function u(p){const g=l.D_.includes(p)?p:l.k$;return m("_comment","Do not manually edit this file, or update these source phrases in Crowdin. The source of truth for English strings are in the code source"),t.ZP.use(f).use(i.Db).init({lng:g,partialBundledLanguages:!0,resources:{},returnEmptyString:!1,pluralSeparator:"__"})}function o(p){const g=VALID_LANGUAGES.includes(p)?p:DEFAULT_LANGUAGE;return i18n.changeLanguage(g)}const d=p=>n.createElement(s.c,{...p}),r=t.ZP.t,m=(p,g,y)=>r(p,g,y),c=(p,g={})=>{if(typeof p=="string")return c(new Date(p),g);const y=t.ZP.options.lng??l.k$;return new Intl.DateTimeFormat(y,g).format(p)}},20053:(Y,T,e)=>{"use strict";e.d(T,{Qp:()=>M,aB:()=>j,UW:()=>K,nu:()=>L,Nw:()=>V,Ce:()=>ae,Bz:()=>fe});var t=e(82897),n=e(84946),i=e(68114),s=e(49372),l=e(13787),f=e(40538),u=e(83881),o=e(5109),d=e(99098),r=e(53768),m=e(7569),c=e(67483),p=e(63418),g=e(77258),y=e(47891),E=e(52666),v=e(7897),h=e(16514),P=e(2525),a=e(47694);function C(ee,me){return a.ZP.bootData.user.lightTheme?me:ee}var D=e(81042);const b="Line limit",M="Common labels",x={[l.in.critical]:h.O9[7],[l.in.warning]:h.O9[1],[l.in.error]:h.O9[4],[l.in.info]:h.O9[0],[l.in.debug]:h.O9[5],[l.in.trace]:h.O9[2],[l.in.unknown]:C("#8e8e8e","#bdc4cd")},R=1,S=1e3*R,O=60*S,U=60*O,I=24*U,F=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function w(ee,me,q){switch(q){case f.Y4.exact:return ee.entry.replace(F,"")===me.entry.replace(F,"");case f.Y4.numbers:return ee.entry.replace(/\d/g,"")===me.entry.replace(/\d/g,"");case f.Y4.signature:return ee.entry.replace(/\w/g,"")===me.entry.replace(/\w/g,"");default:return!1}}function K(ee,me){return me===f.Y4.none?ee:ee.reduce((q,ne,se)=>{const he={...ne},ue=q[q.length-1];return se>0&&w(ne,ue,me)?ue.duplicates++:(he.duplicates=0,q.push(he)),q},[])}function L(ee,me){return me.size===0?ee:ee.filter(q=>!me.has(q.logLevel))}function V(ee,me){const q={},ne=[];for(const se of ee){let he=q[se.logLevel];he||(q[se.logLevel]=he={lastTs:null,datapoints:[],target:se.logLevel,color:x[se.logLevel]},ne.push(he));const ue=Math.floor(se.timeEpochMs/me)*me;ue===he.lastTs?he.datapoints[he.datapoints.length-1][0]++:(he.datapoints.push([1,ue]),he.lastTs=ue);for(const Te of ne)Te!==he&&Te.lastTs!==ue&&(Te.datapoints.push([0,ue]),Te.lastTs=ue)}return ne.map((se,he)=>{se.datapoints.sort((ct,Ie)=>ct[1]-Ie[1]);const ue=(0,u.g0)(se),Ve=new o.N(ue).getFirstFieldOfType(d.fS.number);return ue.fields[Ve.index].config.min=0,ue.fields[Ve.index].config.decimals=0,ue.fields[Ve.index].config.color={mode:r.S.Fixed,fixedColor:se.color},ue.fields[Ve.index].config.custom={drawStyle:f.l8.Bars,barAlignment:f.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:se.color,pointColor:se.color,fillColor:se.color,lineWidth:0,fillOpacity:100,stacking:{mode:f.o0.Normal,group:"A"}},ue})}function H(ee){return ee.fields.some(me=>me.type===d.fS.time)&&ee.fields.some(me=>me.type===d.fS.string)}function j(ee,me,q,ne){const{logSeries:se}=_(ee),he=re(se,ne);if(he){if(me&&he.rows.length>0){const ue=he.rows.sort(D.DA),{visibleRange:Te,bucketSize:Ve,visibleRangeMs:ct,requestedRangeMs:Ie}=A(ue,me,q);he.visibleRange=Te,he.bucketSize=Ve,he.series=V(ue,Ve),he.meta&&(he.meta=oe(he,ct,Ie))}else he.series=[];return he.queries=ne,he}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:ne}}function A(ee,me,q,ne=20,se=1e3){let he=q,ue=me,Te=Math.max(ue*ne,se),Ve,ct;if(q){const Ie=ee[0].timeEpochMs;if(ct=q.to-q.from,Ve=q.to-Ie,Ve>0){const Ke=Ve/ct;ue*=Ke,Te=Math.max(Math.ceil(ue*ne),se),he={from:Math.floor(Ie/Te)*Te,to:q.to}}else Ve=1}return{bucketSize:Te,visibleRange:he,visibleRangeMs:Ve,requestedRangeMs:ct}}function _(ee){const me=[],q=[];for(const ne of ee){if(H(ne)||!ne.fields.length){q.push(ne);continue}ne.length>0&&me.push(ne)}return{logSeries:q,metricSeries:me}}function k(ee){const{stringField:me,labelsField:q}=ee;return q!==void 0?q.values:[me.labels??{}]}function Q(ee,me){const{stringField:q,labelsField:ne}=ee;return ne!==void 0?ne.values[me]:q.labels??{}}function re(ee,me=[]){if(ee.length===0)return;const q=[];let ne=[];const se=ee.filter(ye=>ye.fields.length);se.length&&se.forEach(ye=>{const Pe=new o.N(ye),be=Pe.getFirstFieldOfType(d.fS.string),Be=Pe.getFirstFieldOfType(d.fS.time),ke=ye.meta?.custom?.frameType==="LabeledTimeValues"?Pe.getFieldByName("labels"):void 0;if(be!==void 0&&Be!==void 0){const ot={series:ye,timeField:Be,labelsField:ke,timeNanosecondField:Pe.getFieldByName("tsNs"),stringField:be,logLevelField:Pe.getFieldByName("level"),idField:Z(Pe)};ne.push(ot);const ft=k(ot);ft.length>0&&q.push(ft)}});const he=q.flat(),ue=he.length>0?(0,m.FT)(he):{},Te=[];let Ve=!1;for(const ye of ne){const{timeField:Pe,timeNanosecondField:be,stringField:Be,logLevelField:ke,idField:ot,series:ft}=ye;for(let gt=0;gt<ft.length;gt++){const St=Pe.values[gt],ut=(0,c.zh)(St),Dt=be?be.values[gt]:void 0,ie=Dt||ut.valueOf()+"000000",De=Be.values[gt]??"",Ne=typeof De=="string"?De:JSON.stringify(De),Je=p.QX.hasAnsiCodes(Ne),Xe=!!Ne.match(/\\n|\\t|\\r/),Le=ft.meta?.custom?.searchWords??ft.meta?.searchWords??[],Ue=Je?P._J.strip(Ne):Ne,ve=Q(ye,gt),Se=(0,m.IU)(ve,ue);Object.keys(Se).length>0&&(Ve=!0);let $e=l.in.unknown;const Ye=ke&&ke.values[gt]||ve&&ve.level;Ye?$e=(0,D.jx)(Ye):$e=(0,D.ZO)(Ue);const _e=me.find(Et=>Et.refId===ft.refId)?.datasource?.type;Te.push({entryFieldIndex:Be.index,rowIndex:gt,dataFrame:ft,logLevel:$e,timeFromNow:(0,g.E8)(St),timeEpochMs:ut.valueOf(),timeEpochNs:ie,timeLocal:(0,g.dq)(St,{timeZone:"browser"}),timeUtc:(0,g.dq)(St,{timeZone:"utc"}),uniqueLabels:Se,hasAnsi:Je,hasUnescapedContent:Xe,searchWords:Le,entry:Ue,raw:Ne,labels:ve||{},uid:ot?ot.values[gt]:gt.toString(),datasourceType:_e})}}const ct=[];(0,t.size)(ue)>0&&ct.push({label:M,value:ue,kind:l.Ku.LabelsMap});const Ke=ee.filter(ye=>ye?.meta?.custom?.limit??ye?.meta?.limit).reduce((ye,Pe)=>(ye[Pe.refId??""]=Pe.meta?.custom?.limit??Pe.meta?.limit??0,ye),{}),Ge=Object.values(Ke).reduce((ye,Pe)=>ye+=Pe,0);Ge>0&&ct.push({label:b,value:Ge,kind:l.Ku.Number});let at=0;const dt={};let Re=!1;for(const ye of ee){const Pe=ye.meta?.custom?.lokiQueryStatKey,{refId:be}=ye;if(!Re&&ye.meta?.custom?.error&&(ct.push({label:"",value:ye.meta?.custom.error,kind:l.Ku.Error}),Re=!0),be&&!dt[be]){if(Pe&&ye.meta?.stats){const Be=ye.meta.stats.find(ke=>ke.displayName===Pe);Be&&(at+=Be.value)}dt[be]=!0}}if(at>0){const{text:ye,suffix:Pe}=(0,v.i7)("B")(at);ct.push({label:"Total bytes processed",value:`${ye} ${Pe}`,kind:l.Ku.String})}return{hasUniqueLabels:Ve,meta:ct,rows:Te}}function Z(ee){const me=["id"];for(const q of me){const ne=ee.getFieldByName(q);if(ne)return ne}}function oe(ee,me,q){let ne=[...ee.meta];const se=ne.findIndex(ue=>ue.label===b),he=se>=0&&ne[se]?.value;if(he&&he>0){let ue;if(he===ee.rows.length&&me&&q){const Te=(me/q*100).toFixed(2);ue=`${he} reached, received logs cover ${Te}% (${y.msRangeToTimeString(me)}) of your selected time range (${y.msRangeToTimeString(q)})`}else ue=`${he} (${ee.rows.length} returned)`;ne[se]={label:b,value:ue,kind:l.Ku.String}}return ne}function G(ee,me){const q=me&&ee===l.in.unknown?"logs":ee,ne=x[ee];return{displayNameFromDS:q,color:{mode:r.S.Fixed,fixedColor:ne},custom:{drawStyle:f.l8.Bars,barAlignment:f.pu.Center,lineColor:ne,pointColor:ne,fillColor:ne,lineWidth:1,fillOpacity:100,stacking:{mode:f.o0.Normal,group:"A"}}}}const le=(ee,me,q)=>(ee.fields=ee.fields.map(ne=>(ne.type===d.fS.number&&(ne.config={...ne.config,...G(me(ee),q)}),ne)),ee);function fe(ee,me,q){const ne=q.range.to.valueOf()-q.range.from.valueOf(),se=de(me.scopedVars,ne);return me.interval=se.interval,me.scopedVars.__interval={value:se.interval,text:se.interval},se.intervalMs!==void 0&&(me.intervalMs=se.intervalMs,me.scopedVars.__interval_ms={value:se.intervalMs,text:se.intervalMs}),me.hideFromInspector=!0,new n.y(he=>{let ue=[];he.next({state:E.Gu.Loading,error:void 0,data:[]});const Te=ee.query(me),ct=((0,i.b)(Te)?Te:(0,s.D)(Te)).subscribe({complete:()=>{he.complete()},next:Ie=>{const{error:Ke}=Ie;if(Ke!==void 0)he.next({state:E.Gu.Error,error:Ke,data:[]}),he.error(Ke);else{const Ge=(0,t.groupBy)(Ie.data,"refId");ue=Ie.data.map(at=>{let dt=at.refId||"";dt.startsWith("log-volume-")&&(dt=dt.substr(11));const Re={logsVolumeType:l.o8.FullRange,absoluteRange:{from:q.range.from.valueOf(),to:q.range.to.valueOf()},datasourceName:ee.name,sourceQuery:q.targets.find(ye=>ye.refId===dt)};return at.meta={...at.meta,custom:{...at.meta?.custom,...Re}},le(at,q.extractLevel,Ge[at.refId].length===1)}),he.next({state:Ie.state,error:void 0,data:ue})}},error:Ie=>{he.next({state:E.Gu.Error,error:Ie,data:[]}),he.error(Ie)}});return()=>{ct?.unsubscribe()}})}function ae(ee,me){return me.hideFromInspector=!0,new n.y(q=>{let ne=[];q.next({state:E.Gu.Loading,error:void 0,data:[]});const se=ee.query(me),ue=((0,i.b)(se)?se:(0,s.D)(se)).subscribe({complete:()=>{q.next({state:E.Gu.Done,error:void 0,data:ne}),q.complete()},next:Te=>{const{error:Ve}=Te;Ve!==void 0?(q.next({state:E.Gu.Error,error:Ve,data:[]}),q.error(Ve)):ne=Te.data.map(ct=>{const Ie=(0,u.g0)(ct),{timeIndex:Ke}=(0,u.sV)(Ie);return(0,u.aK)(Ie,Ke)})},error:Te=>{q.next({state:E.Gu.Error,error:Te,data:[]}),q.error(Te)}});return()=>{ue?.unsubscribe()}})}function de(ee,me){if(ee.__interval_ms){let q=ee.__interval_ms.value,ne="";return me<S*5?(q=R,ne="1ms"):q>U?(q=I,ne="1d"):q>O?(q=U,ne="1h"):q>S?(q=O,ne="1m"):(q=S,ne="1s"),{interval:ne,intervalMs:q}}else return{interval:"$__interval"}}},29494:(Y,T,e)=>{"use strict";e.d(T,{r:()=>n});class t{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const n=new t},98864:(Y,T,e)=>{"use strict";e.d(T,{$l:()=>o,Av:()=>g,F6:()=>m,Jk:()=>c,VW:()=>p,ad:()=>d,hS:()=>r,mE:()=>E,vo:()=>v});var t=e(62992),n=e(27876);const i=25,s="notifications",l=`${s}/lastRead`,f={byId:C(),lastRead:Number.parseInt(window.localStorage.getItem(l)??`${Date.now()}`,10)},u=(0,t.oM)({name:"appNotifications",initialState:f,reducers:{notifyApp:(b,{payload:M})=>{Object.values(b.byId).some(x=>h(M,x)&&x.showing)||(b.byId[M.id]=M,D(b.byId))},hideAppNotification:(b,{payload:M})=>{M in b.byId&&(b.byId[M].showing=!1,D(b.byId))},clearNotification:(b,{payload:M})=>{delete b.byId[M],D(b.byId)},clearAllNotifications:b=>{b.byId={},D(b.byId)},readAllNotifications:(b,{payload:M})=>{b.lastRead=M}}}),{notifyApp:o,hideAppNotification:d,clearNotification:r,clearAllNotifications:m,readAllNotifications:c}=u.actions,p=u.reducer,g=b=>b.lastRead,y=b=>Object.values(b.byId).sort((M,x)=>x.timestamp-M.timestamp),E=b=>y(b).filter(P),v=b=>Object.values(b.byId).filter(M=>M.showing);function h(b,M){return b.icon===M.icon&&b.severity===M.severity&&b.text===M.text&&b.title===M.title}function P(b){return b.severity===n.AppNotificationSeverity.Warning||b.severity===n.AppNotificationSeverity.Error}function a(b){return typeof b=="object"&&b!==null&&"id"in b&&"icon"in b&&"title"in b&&"text"in b}function C(){const b=window.localStorage.getItem(s);if(!b)return{};const M=JSON.parse(b);return Object.values(M).every(x=>a(x))?M:{}}function D(b){const M=Object.values(b).filter(P).sort((x,R)=>R.timestamp-x.timestamp).slice(0,i).reduce((x,R)=>(x[R.id]={id:R.id,severity:R.severity,icon:R.icon,title:R.title,text:R.text,traceId:R.traceId,timestamp:R.timestamp,showing:R.showing},x),{});try{window.localStorage.setItem(s,JSON.stringify(M))}catch(x){console.error("Unable to persist notifications to local storage"),console.error(x)}}},61962:(Y,T,e)=>{"use strict";e.d(T,{Lk:()=>d,OQ:()=>o,V4:()=>m,gd:()=>r});var t=e(62992),n=e(35645),i=e(99740);const s=n.v.bootData?.navTree??[];function l(c){return c.map(p=>{const g=p.children&&l(p.children);return{...p,children:g,text:(0,i.Y)(p.id)??p.text,subTitle:(0,i.L)(p.id)??p.subTitle,emptyMessage:(0,i.Y)(p.emptyMessageId)}})}const f="starred/",u=(0,t.oM)({name:"navBarTree",initialState:()=>l(n.v.bootData?.navTree??[]),reducers:{setStarred:(c,p)=>{const g=c.find(P=>P.id==="starred"),{id:y,title:E,url:v,isStarred:h}=p.payload;if(g)if(h){g.children||(g.children=[]);const P={id:f+y,text:E,url:v};g.children.push(P),g.children.sort((a,C)=>a.text.localeCompare(C.text))}else{const P=g.children?.findIndex(a=>a.id===f+y)??-1;P>-1&&g?.children?.splice(P,1)}},updateDashboardName:(c,p)=>{const{id:g,title:y,url:E}=p.payload,v=c.find(h=>h.id==="starred");if(v){const h=v.children?.find(P=>P.id===g);h&&(h.text=y,h.url=E,v.children?.sort((P,a)=>P.text.localeCompare(a.text)))}},removePluginFromNavTree:(c,p)=>{const g="plugin-page-"+p.payload.pluginID,y=c.findIndex(E=>E.id===g);y>-1&&c.splice(y,1)}}}),{setStarred:o,removePluginFromNavTree:d,updateDashboardName:r}=u.actions,m=u.reducer},14393:(Y,T,e)=>{"use strict";e.d(T,{Cu:()=>u,G4:()=>g,H7:()=>c,Qz:()=>f,RL:()=>m});var t=e(62992),n=e(82897),i=e.n(n),s=e(47694),l=e(99740);const f="home";function u(){const y={},E=(0,n.cloneDeep)(s.ZP.bootData.navTree),v=E.find(P=>P.id===f),h=E.filter(P=>P.id!==f);return v&&o(y,[v]),o(y,h,y[f]),y}function o(y,E,v){const h=[];for(const P of E){const a={...P,text:(0,l.Y)(P.id)??P.text,subTitle:(0,l.L)(P.id)??P.subTitle,emptyMessage:(0,l.Y)(P.emptyMessageId),parentItem:v};a.id&&(y[a.id]=a),a.children&&o(y,a.children,a),h.push(a)}v&&(v.children=h),y["not-found"]={...d("Page not found","404 Error").node},y.error={...d("Page error","An unexpected error").node}}function d(y,E){const v={text:y,subTitle:E,icon:"exclamation-triangle"};return{node:v,main:v}}const r={},m=(0,t.PH)("navIndex/updateNavIndex"),c=(0,t.PH)("navIndex/updateConfigurationSubtitle"),p=(y,E)=>({...y,parentItem:{...y.parentItem,text:y.parentItem?.text??"",subTitle:E}}),g=(y=r,E)=>{if(m.match(E)){let h=function(C){if(C.children)for(const D of C.children)P[D.id]={...D,parentItem:C};C.parentItem&&h(C.parentItem)};var v=h;const P={},a=E.payload;return h(a),{...y,...P}}else if(c.match(E)){const h=`Organization: ${E.payload}`;return{...y,cfg:{...y.cfg,subTitle:h},datasources:p(y.datasources,h),correlations:p(y.correlations,h),users:p(y.users,h),teams:p(y.teams,h),plugins:p(y.plugins,h),"org-settings":p(y["org-settings"],h),apikeys:p(y.apikeys,h)}}return y}},86245:(Y,T,e)=>{"use strict";e.d(T,{ht:()=>l,vw:()=>f});var t=e(35645),n=e(60492),i=e(14393);const s=()=>{const d={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:d,main:d}},l=(d,r,m,c=!1)=>{if(d[r]){const p=d[r],g=c?p:f(p),y=u(g,r);return{node:p,main:y}}return m||s()};function f(d){return t.v.featureToggles.nestedFolders&&d.id===n.y3?d:d.parentItem&&d.parentItem.id!==i.Qz?f(d.parentItem):d}function u(d,r){return d.id===r?{...d,active:!0}:d.children&&d.children.length>0?{...d,children:d.children.map(m=>u(m,r))}:d}const o=d=>`${d.main.text}${d.node.text?": "+d.node.text:""}`},42454:(Y,T,e)=>{"use strict";e.d(T,{y:()=>n});var t=e(29930);class n{constructor(s){this.resourceUri=s}update(s){return t.ae.put(`/api/${this.resourceUri}/preferences`,s)}patch(s){return t.ae.patch(`/api/${this.resourceUri}/preferences`,s)}load(){return t.ae.get(`/api/${this.resourceUri}/preferences`)}}},29930:(Y,T,e)=>{"use strict";e.d(T,{y$:()=>fe,ae:()=>ae,i:()=>de});var t=e(91017),n=e(65583),i=e(84946),s=e(53376),l=e(12877),f=e(85850),u=e(59980),o=e(49372),d=e(5173),r=e(9471),m=e(90801),c=e(71735),p=e(59724),g=e(39859),y=e(57027),E=e(66516),v=e(82615),h=e(29933),P=e(44288),a=e(4063),C=e(89424),D=e(35645),b=e(18271),M=e(47694),x=e(53747),R=e(9892),S=e(66111),O=e(72648),U=e(85511),I=e(17784),F=e(31403),w=e(7804),K=e(27581);const L=me=>{const q=(0,O.l4)(),ne=V(q),se=(0,K.J)(q),he=Boolean(me.maxConcurrentSessions),ue=()=>{window.location.reload()};return S.createElement(U.h_,null,S.createElement("div",{className:se.modal},S.createElement(I.v,{title:"You have been automatically signed out",severity:"warning",className:ne.infobox},S.createElement("div",{className:ne.text},S.createElement("p",null,"Your session token was automatically revoked because you have reached",S.createElement("strong",null,` the maximum number of ${he?me.maxConcurrentSessions:""} concurrent sessions `),"for your account."),S.createElement("p",null,S.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),S.createElement(F.zx,{size:"md",variant:"primary",onClick:ue},"Sign in"))),S.createElement("div",{className:(0,R.cx)(se.modalBackdrop,ne.backdrop)}))},V=(0,w.B)(me=>({infobox:R.css`
      margin-bottom: 0;
    `,text:R.css`
      margin: ${me.spacing(1,0,2)};
    `,backdrop:R.css`
      background-color: ${me.colors.background.canvas};
      opacity: 0.8;
    `}));var H=e(45984),j=e(8878),A=e(99822),_=(me=>(me[me.Pending=0]="Pending",me[me.InProgress=1]="InProgress",me[me.Done=2]="Done",me))(_||{});class k{constructor(q=!1){this.state={},this.queue=new t.x,this.updates=new t.x,this.add=(ne,se)=>this.queue.next({id:ne,options:se,state:0}),this.setInProgress=ne=>this.queue.next({id:ne,state:1}),this.setDone=ne=>this.queue.next({id:ne,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=ne=>{const se=Object.keys(ne).filter(ue=>ne[ue].state===1).length;return{noOfPending:Object.keys(ne).filter(ue=>ne[ue].state===0).length,noOfInProgress:se,state:ne}},this.publishUpdate=(ne,se)=>{this.printState(ne,se),this.updates.next(ne)},this.printState=(ne,se)=>{if(!se)return;const he=Object.keys(ne.state).reduce((ue,Te)=>{const Ve={id:Te,state:ne.state[Te].state};return ue.push(Ve),ue},[]);console.log("FetchQueue noOfStarted",ne.noOfInProgress),console.log("FetchQueue noOfNotStarted",ne.noOfPending),console.log("FetchQueue state",he)},this.queue.subscribe(ne=>{const{id:se,state:he,options:ue}=ne;if(this.state[se]||(this.state[se]={state:0,options:{url:""}}),he===2){delete this.state[se];const Ve=this.getUpdate(this.state);this.publishUpdate(Ve,q);return}this.state[se].state=he,ue&&(this.state[se].options=ue);const Te=this.getUpdate(this.state);this.publishUpdate(Te,q)})}}var Q=e(86870);class re{constructor(q,ne,se){const he=se?.http2Enabled?1e3:5;q.getUpdates().pipe((0,m.h)(({noOfPending:ue})=>ue>0),(0,Q.b)(({state:ue,noOfInProgress:Te})=>{const Ve=Object.keys(ue).filter(Ge=>ue[Ge].state===_.Pending&&!(0,A.mu)(ue[Ge].options.url)).reduce((Ge,at)=>{const dt={id:at,options:ue[at].options};return Ge.push(dt),Ge},[]),ct=Object.keys(ue).filter(Ge=>ue[Ge].state===_.Pending&&(0,A.mu)(ue[Ge].options.url)).reduce((Ge,at)=>{const dt={id:at,options:ue[at].options};return Ge.push(dt),Ge},[]),Ie=Math.max(he-Te-Ve.length,0),Ke=ct.slice(0,Ie);return Ve.concat(Ke)})).subscribe(({id:ue,options:Te})=>{ne.add(ue,Te)})}}class Z{constructor(q,ne){this.queue=new t.x,this.responses=new t.x,this.add=(se,he)=>{this.queue.next({id:se,options:he})},this.getResponses=se=>this.responses.asObservable().pipe((0,m.h)(he=>he.id===se)),this.queue.subscribe(se=>{const{id:he,options:ue}=se;q.setInProgress(he),this.responses.next({id:he,observable:ne(ue)})})}}var oe=e(82002);const G="cancel_all_requests_request_id",le="grafana-trace-id";class fe{constructor(q){this.inFlightRequests=new t.x,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new t.x,this.dependencies={fromFetch:d.U,appEvents:b.Z,contextSrv:oe.Vt,logout:()=>{oe.Vt.setLoggedOut()}},q&&(this.dependencies={...this.dependencies,...q}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new k,this.responseQueue=new Z(this.fetchQueue,this.internalFetch),new re(this.fetchQueue,this.responseQueue,(0,M.iE)())}async request(q){return await(0,n.n)(this.fetch(q).pipe((0,r.U)(ne=>ne.data)))}fetch(q){const ne=(0,P.Z)(),se=this.fetchQueue;return new i.y(he=>{const ue=new s.w0;return ue.add(this.responseQueue.getResponses(ne).subscribe(Te=>{ue.add(Te.observable.subscribe(he))})),this.fetchQueue.add(ne,q),function(){se.setDone(ne),ue.unsubscribe()}})}internalFetch(q){q.requestId&&this.inFlightRequests.next(q.requestId),q=this.parseRequestOptions(q);const ne=(0,x.v)();ne!==null&&ne!==""&&(q.headers||(q.headers={}),D.v.jwtUrlLogin&&D.v.jwtHeaderName&&(q.headers[D.v.jwtHeaderName]=`${ne}`));const se=this.getFromFetchStream(q),he=se.pipe(this.toFailureStream(q)),ue=se.pipe((0,m.h)(Te=>Te.ok===!0),(0,c.b)(Te=>{this.showSuccessAlert(Te),this.inspectorStream.next(Te)}));return(0,l.T)(ue,he).pipe((0,p.K)(Te=>(0,f._)(this.processRequestError(q,Te))),this.handleStreamCancellation(q))}resolveCancelerIfExists(q){this.inFlightRequests.next(q)}cancelAllInFlightRequests(){this.inFlightRequests.next(G)}async datasourceRequest(q){return(0,n.n)(this.fetch(q))}parseRequestOptions(q){const ne=this.dependencies.contextSrv.user?.orgId;return q.retry=q.retry??0,(0,A.R8)(q.url)&&(ne&&(q.headers=q.headers??{},q.headers["X-Grafana-Org-Id"]=ne),q.url.startsWith("/")&&(q.url=q.url.substring(1)),q.headers?.Authorization&&(q.headers["X-DS-Authorization"]=q.headers.Authorization,delete q.headers.Authorization),this.noBackendCache&&(q.headers=q.headers??{},q.headers["X-Grafana-NoCache"]="true")),q.hideFromInspector===void 0&&(q.hideFromInspector=(0,A.R8)(q.url)&&!(0,A.mu)(q.url)),q}getFromFetchStream(q){const ne=(0,j.Xv)(q),se=(0,j.nS)(q);return this.dependencies.fromFetch(ne,se).pipe((0,g.z)(async he=>{const{status:ue,statusText:Te,ok:Ve,headers:ct,url:Ie,type:Ke,redirected:Ge}=he,at=q.responseType??((0,j.rZ)(ct)?"json":void 0),dt=await(0,j.aO)(he,at);return{status:ue,statusText:Te,ok:Ve,data:dt,headers:ct,url:Ie,type:Ke,redirected:Ge,config:q,traceId:he.headers.get(le)??void 0}}),(0,y.B)())}toFailureStream(q){const{isSignedIn:ne}=this.dependencies.contextSrv.user;return se=>se.pipe((0,m.h)(he=>he.ok===!1),(0,g.z)(he=>{const{status:ue,statusText:Te,data:Ve}=he,ct={status:ue,statusText:Te,data:Ve,config:q,traceId:he.headers.get(le)??void 0};return(0,f._)(ct)}),(0,E.a)(he=>he.pipe((0,g.z)((ue,Te)=>{const Ve=Te===0&&q.retry===0;if(ue.status===401&&(0,A.R8)(q.url)&&Ve&&ne){if(ue.data?.error?.id==="ERR_TOKEN_REVOKED")return this.dependencies.appEvents.publish(new H.Dn({component:L,props:{maxConcurrentSessions:ue.data?.error?.maxConcurrentSessions}})),(0,u.of)({});let ct=()=>this.loginPing();return D.v.featureToggles.clientTokenRotation&&(ct=()=>this.rotateToken()),(0,o.D)(ct()).pipe((0,p.K)(Ie=>(Ie.status===401&&this.dependencies.logout(),(0,f._)(Ie))))}return(0,f._)(ue)}))))}showApplicationErrorAlert(q){}showSuccessAlert(q){const{config:ne}=q;if(ne.showSuccessAlert===!1||ne.showSuccessAlert===void 0&&(ne.method==="GET"||(0,A.mu)(ne.url)||!(0,A.R8)(ne.url)))return;const se=q.data;se?.message&&this.dependencies.appEvents.emit(a.SI.alertSuccess,[se.message])}showErrorAlert(q,ne){if(q.showErrorAlert===!1||q.showErrorAlert===void 0&&((0,A.mu)(q.url)||!(0,A.R8)(q.url)))return;let se="",he=ne.data.message;he==="Unexpected error"&&ne.message&&(he=ne.message),he.length>80&&(se=he,he="Error"),ne.status===422&&(se=ne.data.message,he="Validation failed"),this.dependencies.appEvents.emit(ne.status<500?a.SI.alertWarning:a.SI.alertError,[he,se,ne.data.traceID])}processRequestError(q,ne){return ne.data=ne.data??{message:"Unexpected error"},typeof ne.data=="string"&&(ne.data={message:ne.data,error:ne.statusText,response:ne.data}),ne.data&&!ne.data.message&&typeof ne.data.error=="string"&&(ne.data.message=ne.data.error),ne.data.message&&setTimeout(()=>{ne.isHandled||this.showErrorAlert(q,ne)},50),this.inspectorStream.next(ne),ne}handleStreamCancellation(q){return ne=>ne.pipe((0,v.R)(this.inFlightRequests.pipe((0,m.h)(se=>{let he=!1;return q&&q.requestId&&q.requestId===se&&(he=!0),se===G&&(he=!0),he}))),(0,h.T)(()=>({type:C.eA.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:q})))}getInspectorStream(){return this.inspectorStream}async get(q,ne,se,he){return this.request({...he,method:"GET",url:q,params:ne,requestId:se})}async delete(q,ne,se){return this.request({...se,method:"DELETE",url:q,data:ne})}async post(q,ne,se){return this.request({...se,method:"POST",url:q,data:ne})}async patch(q,ne,se){return this.request({...se,method:"PATCH",url:q,data:ne})}async put(q,ne,se){return this.request({...se,method:"PUT",url:q,data:ne})}withNoBackendCache(q){return this.noBackendCache=!0,q().finally(()=>{this.noBackendCache=!1})}rotateToken(){return this.request({url:"/api/user/auth-tokens/rotate",method:"POST",retry:1})}loginPing(){return this.request({url:"/api/login/ping",method:"GET",retry:1})}search(q){return this.get("/api/search",q)}getDashboardByUid(q){return this.get(`/api/dashboards/uid/${q}`)}validateDashboard(q){const ne=JSON.stringify(q,ee,2);return this.request({method:"POST",url:"/api/dashboards/validate",data:{dashboard:ne},showSuccessAlert:!1,showErrorAlert:!1})}getPublicDashboardByUid(q){return this.get(`/api/public/dashboards/${q}`)}getFolderByUid(q,ne={}){const se=new URLSearchParams;return ne.withAccessControl&&se.set("accesscontrol","true"),this.get(`/api/folders/${q}?${se.toString()}`)}}const ae=new fe,de=()=>ae;function ee(me,q){if(!(typeof q=="number"&&!Number.isFinite(q)))return q}},82002:(Y,T,e)=>{"use strict";e.d(T,{Vt:()=>r});var t=e(82897),n=e.n(t),i=e(47891),s=e(54899),l=e(66121),f=e(27876),u=e(47694);class o{constructor(){this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.theme="dark",this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",this.analytics={identifier:""},u.ZP.bootData.user&&(0,t.extend)(this,u.ZP.bootData.user)}}class d{constructor(){this.sidemenuSmallBreakpoint=!1,this.tokenRotationJobId=0,u.ZP.bootData||(u.ZP.bootData={user:{},settings:{},navTree:[]}),this.user=new o,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=u.ZP.minRefreshInterval,this.isSignedIn&&this.scheduleTokenRotationJob()}async fetchUserPermissions(){try{this.accessControlEnabled()&&(this.user.permissions=await(0,s.i)().get("/api/access-control/user/actions",{reloadcache:!0}))}catch(p){console.error(p)}}setLoggedOut(){this.cancelTokenRotationJob(),this.user.isSignedIn=!1,this.isSignedIn=!1,window.location.reload()}hasRole(p){return p==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===p}accessControlEnabled(){return u.ZP.rbacEnabled}licensedAccessControlEnabled(){return(0,l.v)("accesscontrol")&&u.ZP.rbacEnabled}hasPermissionInMetadata(p,g){return this.accessControlEnabled()?!!g.accessControl?.[p]:!0}hasPermission(p){return this.accessControlEnabled()?!!this.user.permissions?.[p]:!0}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(p){return u.ZP.minRefreshInterval?i.intervalToMs(p)>=i.intervalToMs(u.ZP.minRefreshInterval):!0}getValidInterval(p){return this.isAllowedInterval(p)?p:u.ZP.minRefreshInterval}hasAccessToExplore(){return this.accessControlEnabled()?this.hasPermission(f.AccessControlAction.DataSourcesExplore)&&u.ZP.exploreEnabled:(this.isEditor||u.ZP.viewersCanEdit)&&u.ZP.exploreEnabled}hasAccess(p,g){return this.accessControlEnabled()?this.hasPermission(p):g}hasAccessInMetadata(p,g,y){return this.accessControlEnabled()?this.hasPermissionInMetadata(p,g):y}evaluatePermission(p,g){return this.accessControlEnabled()?g.some(y=>this.hasPermission(y))?[]:["Reject"]:p()}scheduleTokenRotationJob(){if(u.ZP.featureToggles.clientTokenRotation&&this.isSignedIn){let p=this.getSessionExpiry();if(p===0){this.rotateToken().then();return}let y=(p-Math.floor(Math.random()*(20-1)+1))*1e3-Date.now();this.tokenRotationJobId=setTimeout(()=>{if(this.getSessionExpiry()>p){this.scheduleTokenRotationJob();return}this.rotateToken().then()},y)}}cancelTokenRotationJob(){u.ZP.featureToggles.clientTokenRotation&&this.tokenRotationJobId>0&&clearTimeout(this.tokenRotationJobId)}rotateToken(){return fetch("/api/user/auth-tokens/rotate",{method:"POST"}).then(p=>{if(p.status===200){this.scheduleTokenRotationJob();return}if(p.status===401){this.setLoggedOut();return}}).catch(p=>{console.error(p)})}getSessionExpiry(){const p=document.cookie.split("; ").find(y=>y.startsWith("grafana_session_expiry="));if(!p)return 0;let g=p.split("=").at(1);return g?parseInt(g,10):0}}let r=new d;const m=c=>{throw new Error("contextSrv can be only overridden in test environment")}},13019:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(82897),n=e.n(t),i=e(54899),s=e(47694),l=e(58379);class f{constructor(){}addDashboardImpression(r){const m=this.impressionKey();let c=[];l.Z.exists(m)&&(c=JSON.parse(l.Z.get(m)),(0,t.isArray)(c)||(c=[])),c=c.filter(p=>r!==p),c.unshift(r),c.length>50&&c.pop(),l.Z.set(m,JSON.stringify(c))}async convertToUIDs(){let r=this.getImpressions();const m=(0,t.filter)(r,p=>(0,t.isNumber)(p));if(!m.length)return;const c=await(0,i.i)().get(`/api/dashboards/ids/${m.join(",")}`);l.Z.set(this.impressionKey(),JSON.stringify([...(0,t.filter)(r,p=>(0,t.isString)(p)),...c]))}getImpressions(){const r=l.Z.get(this.impressionKey())||"[]";return JSON.parse(r)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,t.filter)(this.getImpressions(),m=>(0,t.isString)(m))}impressionKey(){return"dashboard_impressions-"+s.ZP.bootData.user.orgId}}const o=new f},58379:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>i});class t{get(l){return window.localStorage[l]}set(l,f){window.localStorage[l]=f}getBool(l,f){return f!==void 0&&!this.exists(l)?f:window.localStorage[l]==="true"}getObject(l,f){let u=f;if(this.exists(l)){const o=window.localStorage[l];try{u=JSON.parse(o)}catch(d){console.error(`Error parsing store object: ${l}. Returning default: ${f}. [${d}]`)}}return u}setObject(l,f){let u;try{u=JSON.stringify(f)}catch(o){throw new Error(`Could not stringify object: ${l}. [${o}]`)}try{this.set(l,u)}catch(o){const d=new Error(`Could not save item in localStorage: ${l}. [${o}]`);throw o instanceof Error&&(d.name=o.name),d}return!0}exists(l){return window.localStorage[l]!==void 0}delete(l){window.localStorage.removeItem(l)}}const i=new t},4050:(Y,T,e)=>{"use strict";e.d(T,{W:()=>o,Z:()=>d});var t=e(82897),n=e.n(t),i=e(79086),s=e(2703);function l(r,m){if(!r)return!1;if(r[0]==="/"){const c=(0,i.jO)(r);return m.match(c)!=null}return r===m}function f(r){return r===0?.001:r/10}function u(r){return r?{colors:[{opacity:0},{opacity:r/10}]}:null}function o(r,m,c){for(let p=0;p<r.length;p++){const g=r[p],y=m.yaxes,E=g.yaxis||1,v=y[E-1],h=(0,s.Cf)(v.format);(0,t.isNumber)(m.decimals)?g.updateLegendValues(h,m.decimals):(0,t.isNumber)(v.decimals)?g.updateLegendValues(h,v.decimals+1):g.updateLegendValues(h,null)}}class d{constructor(m){this.datapoints=m.datapoints,this.label=m.alias,this.id=m.alias,this.alias=m.alias,this.aliasEscaped=(0,t.escape)(m.alias),this.color=m.color,this.bars={fillColor:m.color},this.valueFormater=(0,s.Cf)("none"),this.stats={},this.legend=!0,this.unit=m.unit,this.dataFrameIndex=m.dataFrameIndex,this.fieldIndex=m.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(m){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let c=0;c<m.length;c++){const p=m[c];l(p.alias,this.alias)&&(p.lines!==void 0&&(this.lines.show=p.lines),p.dashes!==void 0&&(this.dashes.show=p.dashes,this.lines.lineWidth=0),p.points!==void 0&&(this.points.show=p.points),p.bars!==void 0&&(this.bars.show=p.bars),p.fill!==void 0&&(this.lines.fill=f(p.fill)),p.fillGradient!==void 0&&(this.lines.fillColor=u(p.fillGradient)),p.stack!==void 0&&(this.stack=p.stack),p.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:p.linewidth,this.dashes.lineWidth=p.linewidth),p.dashLength!==void 0&&(this.dashes.dashLength[0]=p.dashLength),p.spaceLength!==void 0&&(this.dashes.dashLength[1]=p.spaceLength),p.nullPointMode!==void 0&&(this.nullPointMode=p.nullPointMode),p.pointradius!==void 0&&(this.points.radius=p.pointradius),p.steppedLine!==void 0&&(this.lines.steps=p.steppedLine),p.zindex!==void 0&&(this.zindex=p.zindex),p.fillBelowTo!==void 0&&(this.fillBelowTo=p.fillBelowTo),p.color!==void 0&&this.setColor(p.color),p.transform!==void 0&&(this.transform=p.transform),p.legend!==void 0&&(this.legend=p.legend),p.hideTooltip!==void 0&&(this.hideTooltip=p.hideTooltip),p.yaxis!==void 0&&(this.yaxis=p.yaxis),p.hiddenSeries!==void 0&&(this.hiddenSeries=p.hiddenSeries))}}getFlotPairs(m){const c=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const p=m==="connected",g=m==="null as zero";let y,E,v=0,h,P=0,a=!0;for(let C=0;C<this.datapoints.length;C++){if(E=this.datapoints[C][0],y=this.datapoints[C][1],h!==void 0){const D=y-h;D<this.stats.timeStep&&(this.stats.timeStep=D)}if(h=y,E===null){if(p)continue;g&&(E=0)}E!==null&&((0,t.isNumber)(E)&&(this.stats.total+=E,this.allIsNull=!1,v++),E>this.stats.max&&(this.stats.max=E),E<this.stats.min&&(this.stats.min=E),this.stats.first===null?this.stats.first=E:P>E?(a=!1,C===this.datapoints.length-1&&(this.stats.delta+=E)):(a?this.stats.delta+=E-P:this.stats.delta+=E,a=!0),P=E,E<this.stats.logmin&&E>0&&(this.stats.logmin=E),E!==0&&(this.allIsZero=!1)),c.push([y,E])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),c.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/v,this.stats.current=c[c.length-1][1],this.stats.current===null&&c.length>1&&(this.stats.current=c[c.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=c.length,c}updateLegendValues(m,c){this.valueFormater=m,this.decimals=c}formatValue(m){return(0,t.isFinite)(m)||(m=null),(0,s.zc)(this.valueFormater(m,this.decimals))}isMsResolutionNeeded(){for(let m=0;m<this.datapoints.length;m++)if(this.datapoints[m][1]!==null&&this.datapoints[m][1]!==void 0){const c=this.datapoints[m][1].toString();if(c.length===13&&c%1e3!==0)return!0}return!1}hideFromLegend(m){return!!(m.hideEmpty&&this.allIsNull||!this.legend||m.hideZero&&this.allIsZero)}setColor(m){this.color=m,this.bars.fillColor=m}}},92973:(Y,T,e)=>{"use strict";e.d(T,{E:()=>f,f:()=>l});var t=e(66111),n=e(82378),i=e(72648),s=e(77582);const l=({children:u,value:o})=>{const[d,r]=(0,t.useState)(o);return(0,t.useEffect)(()=>{const m=s.h$.subscribe(n.hD,c=>{r(c.payload)});return()=>m.unsubscribe()},[]),t.createElement(i.Ni.Provider,{value:d},u)},f=(u,o)=>function(r){return t.createElement(l,{value:o},t.createElement(u,{...r}))}},77410:(Y,T,e)=>{"use strict";e.d(T,{q:()=>t});class t extends window.Worker{constructor(i,s){const l=i.toString(),f=l.split("/");f.pop();const u=`${f.join("/")}/`,o=`importScripts('${l}');`,d=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${u}'; ${o}`],{type:"application/javascript"}));super(d,s),URL.revokeObjectURL(d)}}},95156:(Y,T,e)=>{"use strict";e.d(T,{y:()=>n});var t=e(47694);function n(i={}){return t.ZP.rbacEnabled?{...i,accesscontrol:!0}:i}},2024:(Y,T,e)=>{"use strict";e.d(T,{A:()=>t});function t(i){return i.map(n).sort((s,l)=>l.sortRank-s.sortRank||s.name.localeCompare(l.name))}function n(i){const s=i;return s.sortRank=0,s.userId>0?(s.name=s.userLogin,s.sortRank=10):s.teamId>0?(s.name=s.team,s.sortRank=20):s.role&&(s.icon="fa fa-fw fa-street-view",s.name=s.role,s.sortRank=30,s.role==="Editor"&&(s.sortRank+=1)),s.inherited&&(s.sortRank+=100),s}},79378:(Y,T,e)=>{"use strict";e.d(T,{R:()=>t});const t=(n,i,s)=>(n.splice(s,0,n.splice(i,1)[0]),n)},43226:(Y,T,e)=>{"use strict";e.d(T,{vl:()=>i});function t(){const s=navigator.userAgent.indexOf("MSIE")>-1,l=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,f=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,u=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),o=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return s&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||l&&(o&&parseFloat(o[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||f&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(u&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function n(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function i(){return n()?"cmd":"ctrl"}},28630:(Y,T,e)=>{"use strict";e.d(T,{kJ:()=>i});class t{_linkTo(u,o){o<=0&&u.inputEdges.push(this),o>=0&&u.outputEdges.push(this),u.edges.push(this)}link(u,o){if(!u)throw Error("inputNode is required");if(!o)throw Error("outputNode is required");return this.unlink(),this.inputNode=u,this.outputNode=o,this._linkTo(u,1),this._linkTo(o,-1),this}unlink(){let u;const o=this.inputNode,d=this.outputNode;o&&d&&(u=o.edges.indexOf(this),u>-1&&o.edges.splice(u,1),u=d.edges.indexOf(this),u>-1&&d.edges.splice(u,1),u=o.outputEdges.indexOf(this),u>-1&&o.outputEdges.splice(u,1),u=d.inputEdges.indexOf(this),u>-1&&d.inputEdges.splice(u,1))}}class n{constructor(u){this.name=u,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(u){return u?typeof u=="object"?this.inputEdges.find(o=>o.inputNode?.name===u.name):this.inputEdges.find(o=>o.inputNode?.name===u):null}getEdgeTo(u){return u?typeof u=="object"?this.outputEdges.find(o=>o.outputNode?.name===u.name):this.outputEdges.find(o=>o.outputNode?.name===u):null}getOptimizedInputEdges(){const u=[];return this.inputEdges.forEach(o=>{o.inputNode?.inputEdges.map(r=>r.inputNode)?.forEach(r=>{const m=r?.getEdgeTo(this.name);m&&u.push(m)})}),this.inputEdges.filter(o=>u.indexOf(o)===-1)}}class i{constructor(){this.nodes={}}createNode(u){const o=new n(u);return this.nodes[u]=o,o}createNodes(u){const o=[];return u.forEach(d=>{o.push(this.createNode(d))}),o}link(u,o){let d=[],r=[];const m=[],c=[];u instanceof Array?d=u:d=[u],o instanceof Array?r=o:r=[o];for(let g=0;g<d.length;g++){const y=d[g];if(typeof y=="string"){const E=this.getNode(y);if(!E)throw Error(`cannot link input node named ${y} since it doesn't exist in graph`);m.push(E)}else m.push(y)}for(let g=0;g<r.length;g++){const y=r[g];if(typeof y=="string"){const E=this.getNode(y);if(!E)throw Error(`cannot link output node named ${y} since it doesn't exist in graph`);c.push(E)}else c.push(y)}const p=[];return m.forEach(g=>{c.forEach(y=>{p.push(this.createEdge().link(g,y))})}),p}descendants(u){if(!u.length)return new Set;const o=new Set(l(u)?u.map(d=>this.nodes[d]).filter(d=>d!==void 0):u);return this.descendantsRecursive(o)}descendantsRecursive(u,o=new Set){for(const d of u){const r=new Set;for(const{inputNode:m}of d.inputEdges)m&&!o.has(m)&&(o.add(m),r.add(m));this.descendantsRecursive(r,o)}return o}createEdge(){return new t}getNode(u){return this.nodes[u]}}const s=f=>{Object.keys(f.nodes).forEach(u=>{const o=f.nodes[u];let d=o.outputEdges.map(m=>m.outputNode?.name).join(", ");d||(d="<none>");let r=o.inputEdges.map(m=>m.inputNode?.name).join(", ");r||(r="<none>"),console.log(`${o.name}:
 - links to:   ${d}
 - links from: ${r}`)})};function l(f){return f.length>0&&typeof f[0]=="string"}},82052:(Y,T,e)=>{"use strict";e.d(T,{i:()=>n});var t=e(54899);function n(i){if(typeof i=="string")return i;if(i){if(i instanceof Error)return i.message;if((0,t.kW)(i)){if(i.data&&i.data.message)return i.data.message;if(i.statusText)return i.statusText}}return JSON.stringify(i)}},55935:(Y,T,e)=>{"use strict";e.d(T,{$$:()=>_,F3:()=>le,H6:()=>D,HI:()=>I,I$:()=>C,J5:()=>U,OQ:()=>k,Oy:()=>G,RZ:()=>fe,UI:()=>v,Xh:()=>O,Xk:()=>F,Z8:()=>L,Zf:()=>b,_Q:()=>j,_o:()=>K,fR:()=>w,n9:()=>de,uC:()=>M,vP:()=>re,z_:()=>H});var t=e(82897),n=e.n(t),i=e(44288),s=e(40538),l=e(49187),f=e(206),u=e(75849),o=e(47891),d=e(67483),r=e(47406),m=e(86647),c=e(5562),p=e(58379),g=e(97573),y=e(47694),E=e(99822);const v={from:"now-1h",to:"now"},h={dedupStrategy:s.Y4.none},P=100,a="grafana.explore.datasource",C=ee=>`${a}.${ee}`;async function D(ee){const{panel:me,datasourceSrv:q,timeSrv:ne}=ee;let se=await q.get(me.datasource),he=me.targets.map(Te=>(0,t.omit)(Te,"legendFormat")).filter(Te=>Te.datasource?.uid!==g.Yq),ue;if(y.vc.featureToggles.exploreMixedDatasource===!1&&se.meta?.id==="mixed"&&he)for(const Te of he){const Ve=await q.get(Te.datasource||void 0);if(Ve){se=Ve,he=me.targets.filter(ct=>ct.datasource===Ve.name);break}}if(se){let Ve={range:ne.timeRangeForUrl()};if(se.interpolateVariablesInQueries){const Ie=me.scopedVars||{};Ve={...Ve,datasource:se.name,context:"explore",queries:se.interpolateVariablesInQueries(he,Ie)}}else Ve={...Ve,datasource:se.name,context:"explore",queries:he};const ct=JSON.stringify(Ve);ue=l.Cj.renderUrl("/explore",{left:ct})}return ue}function b(ee,me,q,ne,se,he){const ue=me.reduce((Ke,Ge)=>(Ke+=Ge.key,Ke),""),{interval:Te,intervalMs:Ve}=ae(ne,q.minInterval,q.maxDataPoints),ct=`${ue}`,Ie={app:f.zj.Explore,timezone:he||u.Ys,startTime:Date.now(),interval:Te,intervalMs:Ve,panelId:ct,targets:me,range:ne,requestId:"explore_"+ee,rangeRaw:ne.raw,scopedVars:{__interval:{text:Te,value:Te},__interval_ms:{text:Ve,value:Ve}},maxDataPoints:q.maxDataPoints,liveStreaming:q.liveStreaming};return{queries:me,request:Ie,scanning:se,id:I(),done:!1}}const M=({key:ee,...me})=>me,x=(ee,...me)=>me.some(q=>ee.hasOwnProperty(q));var R=(ee=>(ee[ee.RangeFrom=0]="RangeFrom",ee[ee.RangeTo=1]="RangeTo",ee[ee.Datasource=2]="Datasource",ee[ee.SegmentsStart=3]="SegmentsStart",ee))(R||{});const S=ee=>{if(ee)try{return JSON.parse(ee)}catch(me){console.error(me)}},O=(ee,me)=>{if(ee==null)return"";try{return JSON.stringify(ee,null,me)}catch(q){console.error(q)}return""};function U(ee){const me=S(ee),q={datasource:null,queries:[],range:v,mode:null};if(!me)return q;if(!Array.isArray(me))return{...me,isFromCompactUrl:!1};if(me.length<=3)return console.error("Error parsing compact URL state for Explore."),q;const ne={from:me[0],to:me[1]},se=me[2],he=me.slice(3),ue=he.filter(Ve=>!x(Ve,"ui","mode","__panelsState")),Te=he.find(Ve=>x(Ve,"__panelsState"))?.__panelsState;return{datasource:se,queries:ue,range:ne,panelsState:Te,isFromCompactUrl:!0}}function I(ee=0){return`Q-${(0,i.Z)()}-${ee}`}async function F(ee,me=0,q){let ne,se,he;return q?se=q:ee.length>0&&ee[ee.length-1].datasource?se=ee[ee.length-1].datasource:(ne=await(0,m.F)().get(),he=ne.getDefaultQuery?.(f.zj.Explore),se=ne.getRef()),ne||(ne=await(0,m.F)().get(se),he=ne.getDefaultQuery?.(f.zj.Explore)),{...he,refId:(0,E.Hs)(ee),key:I(me),datasource:se}}const w=(ee,me,q=0)=>{const ne=I(q),se=ee.refId||(0,E.Hs)(me);return{...ee,refId:se,key:ne}},K=ee=>{const me=ee.map(q=>q.datasource?.uid);return{allHaveDatasource:me.length===ee.length,noneHaveDatasource:me.length===0,allDatasourceSame:me.every((q,ne,se)=>q===se[0])}};async function L(ee,me){if(ee&&typeof ee=="object"&&ee.length>0){const q=[];for(let ne=0;ne<ee.length;ne++){const se=ee[ne],he=I(ne);let ue=se.refId;ue||(ue=(0,E.Hs)(q));let Te=!0;if(se.datasource)try{await(0,m.F)().get(se.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),Te=!1}Te&&q.push({...se,refId:ue,key:he})}return q}try{const q=me??(await(0,m.F)().get()).getRef();return[await F(ee??[],void 0,q)]}catch{return[]}}const V=["refId","key","context","datasource"];function H(ee){return ee&&ee.some(me=>Object.keys(me).filter(ne=>V.indexOf(ne)===-1).map(ne=>me[ne]).filter(ne=>ne).length>0)}function j(ee,me,q){const ne=Date.now();let se=ee;q.forEach(ue=>{se=[{query:ue,ts:ne},...se]}),se.length>P&&(se=se.slice(0,P));const he=`grafana.explore.history.${me}`;try{return p.Z.setObject(he,se),se}catch(ue){return console.error(ue),ee}}function A(ee){const me=`grafana.explore.history.${ee}`;store.delete(me)}const _=ee=>ee.reduce((q,ne,se)=>{const he=ne.datasource?.uid||ne.key;return q.concat(`${he}-${se}`)},[]),k=(ee,me,q)=>{let ne=o.convertRawToRange(me,ee,q);return ne.to.isBefore(ne.from)&&(ne=o.convertRawToRange({from:ne.raw.to,to:ne.raw.from},ee,q)),ne},Q=ee=>{if(ee===null)return null;if((0,d.v9)(ee)||ee.indexOf("now")!==-1)return ee;if(ee.length===8)return(0,d.zh)(ee,"YYYYMMDD");if(ee.length===15)return(0,d.zh)(ee,"YYYYMMDDTHHmmss");if(ee.length===19)return(0,d.zh)(ee,"YYYY-MM-DD HH:mm:ss");if(ee.match(/^\d+$/)){const q=parseInt(ee,10);return(0,d.zh)(q)}const me=(0,d.zh)(ee);return me.isValid()?me:null},re=(ee,me,q)=>{const ne={from:Q(ee.from),to:Q(ee.to)};return{from:r.parse(ne.from,!1,me),to:r.parse(ne.to,!0,me),raw:ne}},Z=ee=>{if(!ee||typeof ee!="object")return;if(ee.refId)return ee;const me=Object.keys(ee);for(let q=0;q<me.length;q++){const ne=me[q],se=Z(ee[ne]);if(se)return se}},oe=ee=>{if(!ee)return[];if(typeof ee!="object")return[];const me=Object.keys(ee),q=[];for(let ne=0;ne<me.length;ne++){const se=me[ne];if(se==="refId"){q.push(ee[se]);continue}q.push(oe(ee[se]))}return uniq(flatten(q))},G=ee=>c.dP.isLive(ee)?s.UV.Ascending:s.UV.Descending,le=ee=>{let q=`${window.location.protocol==="https:"?"wss://":"ws://"}${window.location.host}${y.vc.appSubUrl}`;return q.endsWith("/")&&(q=q.slice(0,-1)),`${q}${ee}`},fe=ee=>{ee&&ee.unsubscribe()};function ae(ee,me,q){return q?o.calculateInterval(ee,q,me):{interval:"1s",intervalMs:1e3}}const de=ee=>{const me=document.createElement("textarea");me.value=ee,document.body.appendChild(me),me.select(),document.execCommand("copy"),document.body.removeChild(me)}},8878:(Y,T,e)=>{"use strict";e.d(T,{Xv:()=>E,aO:()=>g,nS:()=>s,rZ:()=>c,tW:()=>y});var t=e(82897),n=e.n(t),i=e(55024);const s=h=>{const P=h.method,a=m(h),C=c(a),D=p(h,C),b=v(h);return{method:P,headers:a,body:D,credentials:b}},l={canParse:()=>!0,parse:h=>(h.get("accept")||h.set("accept","application/json, text/plain, */*"),h)},f=h=>({canParse:P=>(P?.method?P?.method.toLowerCase():"")===h,parse:P=>(P.get("content-type")||P.set("content-type","application/json"),P)}),u=f("post"),o=f("put"),d=f("patch"),r=[u,o,d,l],m=h=>{const P=h?.headers?new Headers(h.headers):new Headers;return r.filter(D=>D.canParse(h)).reduce((D,b)=>b.parse(D),P)},c=h=>{if(!h)return!1;const P=h.get("content-type");return!!(P&&P.toLowerCase()==="application/json")},p=(h,P)=>h&&(!h.data||typeof h.data=="string"?h.data:P?JSON.stringify(h.data):new URLSearchParams(h.data));async function g(h,P){if(P)switch(P){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"json":return h.headers.get("Content-Length")==="0"?(console.warn(`${h.url} returned an invalid JSON`),{}):await h.json();case"text":return h.text()}const a=await h.text();try{return JSON.parse(a)}catch{}return a}function y(h){return Object.keys(h).map(P=>{const a=h[P];return Array.isArray(a)?a.map(C=>`${encodeURIComponent(P)}=${encodeURIComponent(C)}`).join("&"):`${encodeURIComponent(P)}=${encodeURIComponent(a)}`}).join("&")}const E=h=>{const P=(0,t.omitBy)(h.params,C=>C===void 0||C&&C.length===0),a=y(P);return h.params&&a.length?`${h.url}?${a}`:h.url},v=h=>h&&(h.credentials?h.credentials:h.withCredentials?((0,i.d)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin")},40229:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{default:()=>t});function t(n,i){i=i||{};const s=i.delimiter||".";let l=i.maxDepth||3,f=1;const u={};function o(d,r){Object.keys(d).forEach(m=>{const c=d[m],p=i?.safe&&Array.isArray(c),y=Object.prototype.toString.call(c)==="[object Object]",E=r?r+s+m:m;if(i?.maxDepth||(l=f+1),!p&&y&&Object.keys(c).length&&f<l)return++f,o(c,E);u[E]=c})}return o(n,null),u}},24816:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>f});var t=e(55024),n=e(79086),i=e(47891),s=e(2703);const l={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:u=>((0,t.d)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,n.yI)(u)),roundInterval:u=>((0,t.d)("kbn.ts","kbn.roundInterval()","@grafana/data"),i.roundInterval(u)),secondsToHms:u=>((0,t.d)("kbn.ts","kbn.secondsToHms()","@grafana/data"),i.secondsToHms(u)),secondsToHhmmss:u=>{const o=[],d=Math.floor(u/3600),r=Math.floor(u%3600/60),m=Math.floor(u%3600%60);return d>9?o.push(""+d):o.push("0"+d),r>9?o.push(""+r):o.push("0"+r),m>9?o.push(""+m):o.push("0"+m),o.join(":")},toPercent:(u,o)=>Math.floor(u/o*1e4)/100+"%",addSlashes:u=>u.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:u=>((0,t.d)("kbn.ts","kbn.describeInterval()","@grafana/data"),i.describeInterval(u)),intervalToSeconds:u=>((0,t.d)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),i.intervalToSeconds(u)),intervalToMs:u=>((0,t.d)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),i.intervalToMs(u)),calculateInterval:(u,o,d)=>((0,t.d)("kbn.ts","kbn.calculateInterval()","@grafana/data"),i.calculateInterval(u,o,d)),queryColorDot:(u,o)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+u,"font-size:"+o+"px"].join(";")+'"></div>',slugifyForUrl:u=>u.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:u=>((0,t.d)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,n.jO)(u)),toFixed:(u,o)=>{if(u===null)return"";const d=o?Math.pow(10,Math.max(0,o)):1,r=String(Math.round(u*d)/d);if(r.indexOf("e")!==-1||u===0)return r;if(o!=null){const m=r.indexOf("."),c=m===-1?0:r.length-m-1;if(c<o)return(c?r:r+".")+String(d).slice(1,o-c+1)}return r},toFixedScaled:(u,o,d,r,m)=>d===null?l.toFixed(u,o)+m:l.toFixed(u,d+r)+m,roundValue:(u,o)=>{if(u===null)return null;const d=Math.pow(10,o),r=(d*u).toFixed(o);return Math.round(parseFloat(r))/d},getUnitFormats:s.QW};typeof Proxy<"u"?l.valueFormats=new Proxy(l.valueFormats,{get(u,o,d){if(typeof o!="string")throw{message:`Value format ${String(o)} is not a string`};const r=(0,s.Cf)(o);return r?(m,c,p,g)=>(0,s.zc)(r(m,c,p,g?"utc":"browser")):Reflect.get(u,o,d)}}):l.valueFormats=(0,s.Td)();const f=l},99822:(Y,T,e)=>{"use strict";e.d(T,{DI:()=>i,Hs:()=>t,R8:()=>l,mu:()=>s,sB:()=>u,vH:()=>n});const t=o=>{for(let d=0;;d++){const r=f(d);if(!o.some(m=>m.refId===r))return r}};function n(o){const d=["refId","hide","key","queryType","datasource"];for(const r in o)if(r!=="label"&&!d.includes(r))return!1;return!0}function i(o,d,r){const m=d||{};return m.refId=t(o),m.hide=!1,!m.datasource&&r&&(m.datasource=r),[...o,m]}function s(o){return o.indexOf("api/datasources/proxy")!==-1||o.indexOf("api/ds/query")!==-1}function l(o){return!o.match(/^http/)}function f(o){const d="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return o<d.length?d[o]:f(Math.floor(o/d.length)-1)+d[o%d.length]}function u(o){return o||void 0}},51424:(Y,T,e)=>{"use strict";e.d(T,{As:()=>c.A,DR:()=>O,HK:()=>v,OH:()=>R,VI:()=>h,au:()=>p,bQ:()=>D,di:()=>E,gt:()=>P,k4:()=>S,kg:()=>y,t2:()=>C,ub:()=>g,y9:()=>a});var t=e(82897),n=e.n(t),i=e(49187),s=e(77258),l=e(86647),f=e(659),u=e(60499),o=e(3153),d=e(47694),r=e(50395),m=e(4219),c=e(43823);async function p(I,F,w,K,L,V,H){const j=w&&w.filter(A=>U(A));if(j.length>0){let A=!1,_=!1,k;try{k=(await(0,m.b)().addToRichHistory({datasourceUid:I,datasourceName:F??"",queries:j,starred:K,comment:L??""})).warning}catch(Q){return Q instanceof Error&&(Q.name===r.j.StorageFull?(A=!0,V&&(0,o.WI)((0,f.$l)((0,u.t_)(Q.message)))):Q.name!==r.j.DuplicatedEntry&&(0,o.WI)((0,f.$l)((0,u.t_)("Rich History update failed",Q.message)))),{richHistoryStorageFull:A,limitExceeded:_}}return k&&k.type===r.V.LimitExceeded&&(_=!0,H&&(0,o.WI)((0,f.$l)((0,u.ZR)(k.message)))),{richHistoryStorageFull:A,limitExceeded:_}}return{}}async function g(I){return await(0,m.b)().getRichHistory(I)}async function y(I){await(0,m.b)().updateSettings(I)}async function E(){return await(0,m.b)().getSettings()}async function v(){return(0,m.b)().deleteAll()}async function h(I,F){try{return await(0,m.b)().updateStarred(I,F)}catch(w){w instanceof Error&&(0,o.WI)((0,f.$l)((0,u.t_)("Saving rich history failed",w.message)));return}}async function P(I,F){try{return await(0,m.b)().updateComment(I,F)}catch(w){w instanceof Error&&(0,o.WI)((0,f.$l)((0,u.t_)("Saving rich history failed",w.message)));return}}async function a(I){try{return await(0,m.b)().deleteRichHistory(I),I}catch(F){F instanceof Error&&(0,o.WI)((0,f.$l)((0,u.t_)("Saving rich history failed",F.message)));return}}const C=I=>{const F={range:{from:"now-1h",to:"now"},datasource:I.datasourceName,queries:I.queries,context:"explore"},w=(0,i.S)(F),K=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return i.Cj.renderUrl(`${K}/explore`,{left:w})},D=I=>{let F;switch(I){case 0:F="today";break;case 1:F="yesterday";break;case 7:F="a week ago";break;case 14:F="two weeks ago";break;default:F=`${I} days ago`}return F};function b(I){return(0,s.dq)(I,{format:"MMMM D"})}function M(I){const F=(0,t.omit)(I,["key","refId","datasource"]);return JSON.stringify(F)}function x(I,F){let w="";return F===c.A.DatasourceAZ||F===c.A.DatasourceZA?w=I.datasourceName:w=b(I.createdAt),w}function R(I,F){return F?.getQueryDisplayText?F.getQueryDisplayText(I):M(I)}function S(I,F){let w={};return I.forEach(K=>{let L=x(K,F);L in w?w[L]=[...w[L],K]:w[L]=[K]}),w}function O(){return(0,l.F)().getList({mixed:d.vc.featureToggles.exploreMixedDatasource===!0}).map(I=>({name:I.name,uid:I.uid}))}function U(I){const F=(0,t.omit)(I,["key","refId","datasource"]);return Object.keys(F).length>0}},43823:(Y,T,e)=>{"use strict";e.d(T,{A:()=>t});var t=(n=>(n.Descending="Descending",n.Ascending="Ascending",n.DatasourceAZ="Datasource A-Z",n.DatasourceZA="Datasource Z-A",n))(t||{})},57465:(Y,T,e)=>{"use strict";e.d(T,{D:()=>r,L:()=>m});var t=e(58635),n=e(35645),i=e(54899),s=e(659),l=e(60499),f=e(3153),u=e(55935);function o(){return`${window.location.protocol}//${window.location.host}${n.v.appSubUrl}`}function d(c){let p=c.replace(o(),"");return p.startsWith("/")?p.substring(1,p.length):p}const r=(0,t.Z)(async function(c){try{return(await(0,i.i)().post("/api/short-urls",{path:d(c)})).url}catch(p){console.error("Error when creating shortened link: ",p),(0,f.WI)((0,s.$l)((0,l.t_)("Error generating shortened link")))}}),m=async c=>{const p=await r(c);p?((0,u.n9)(p),(0,f.WI)((0,s.$l)((0,l.AT)("Shortened link copied to clipboard")))):(0,f.WI)((0,s.$l)((0,l.t_)("Error generating shortened link")))}},97724:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{getFlotRange:()=>s,getFlotTickDecimals:()=>l,getFlotTickSize:()=>i,getPrecision:()=>o,getScaledDecimals:()=>n,getStringPrecision:()=>d,grafanaTimeFormat:()=>f,logp:()=>u,tickStep:()=>t});function t(r,m,c){const p=Math.sqrt(50),g=Math.sqrt(10),y=Math.sqrt(2),E=Math.abs(m-r)/Math.max(0,c);let v=Math.pow(10,Math.floor(Math.log(E)/Math.LN10));const h=E/v;return h>=p?v*=10:h>=g?v*=5:h>=y&&(v*=2),m<r?-v:v}function n(r,m){return r-Math.floor(Math.log(m)/Math.LN10)}function i(r,m,c,p){const g=(m-r)/c;let y=-Math.floor(Math.log(g)/Math.LN10);const E=p,v=Math.pow(10,-y),h=g/v;let P;return h<1.5?P=1:h<3?(P=2,h>2.25&&(E==null||y+1<=E)&&(P=2.5,++y)):h<7.5?P=5:P=10,P*=v,P}function s(r,m,c,p){let y=+(r??c),E=+(m??p);const v=E-y;if(v===0){const P=Math.abs(E===0?1:E*.25);r===null&&(y-=P),(m==null||r!=null)&&(E+=P)}else .02!=null&&(r==null&&(y-=v*.02,y<0&&c!=null&&c>=0&&(y=0)),m==null&&(E+=v*.02,E>0&&p!=null&&p<=0&&(E=0)));return{min:y,max:E}}function l(r,m,c,p){const{min:g,max:y}=s(c.min,c.max,r,m),E=.3*Math.sqrt(p),v=(y-g)/E,h=-Math.floor(Math.log(v)/Math.LN10),P=Math.pow(10,-h),a=v/P;let C;a<1.5?C=1:a<3?(C=2,a>2.25&&(C=2.5)):a<7.5?C=5:C=10,C*=P;const D=Math.max(0,-Math.floor(Math.log(v)/Math.LN10)+1),b=D-Math.floor(Math.log(C)/Math.LN10);return{tickDecimals:D,scaledDecimals:b}}function f(r,m,c){if(m&&c&&r){const p=c-m,g=p/r/1e3,y=864e5,E=31536e6;return g<=45?"HH:mm:ss":g<=7200||p<=y?"HH:mm":g<=8e4?"MM/DD HH:mm":g<=2419200||p<=E?"MM/DD":"YYYY-MM"}return"HH:mm"}function u(r,m){return Math.log(r)/Math.log(m)}function o(r){const m=r.toString();return d(m)}function d(r){if(isNaN(r))return 0;const m=r.indexOf(".");return m===-1?0:r.length-m-1}},5242:(Y,T,e)=>{"use strict";e.d(T,{e:()=>n,h:()=>i});var t=e(67483);const n=(s,l)=>{const f={from:(0,t.zh)(l.from),to:(0,t.zh)(l.to)},u=(f.to.valueOf()-f.from.valueOf())/2;let o,d;return s===-1?(o=f.to.valueOf()-u,d=f.from.valueOf()-u):s===1?(o=f.to.valueOf()+u,d=f.from.valueOf()+u,o>Date.now()&&f.to.valueOf()<Date.now()&&(o=Date.now(),d=f.from.valueOf())):(o=f.to.valueOf(),d=f.from.valueOf()),{from:d,to:o}},i=(s,l)=>{const f=s.to.valueOf()-s.from.valueOf(),u=s.to.valueOf()-f/2,o=f===0?3e4:f*l,d=u+o/2;return{from:u-o/2,to:d}}},17804:(Y,T,e)=>{"use strict";e.d(T,{q7:()=>n});var t=e(67483);function n(l,f){if(!(l.fromDayOfWeek||l.from)&&!(l.toDayOfWeek||l.to))return[];const u={...l};u.from&&!u.to&&(u.to=u.from),!u.from&&u.to&&(u.from=u.to);const o={from:i(u.from),to:i(u.to)};if(!u.fromDayOfWeek&&u.toDayOfWeek&&(u.fromDayOfWeek=u.toDayOfWeek),!u.toDayOfWeek&&u.fromDayOfWeek&&(u.toDayOfWeek=u.fromDayOfWeek),u.fromDayOfWeek&&(o.from.dayOfWeek=Number(u.fromDayOfWeek)),u.toDayOfWeek&&(o.to.dayOfWeek=Number(u.toDayOfWeek)),o.from.dayOfWeek&&o.from.h==null&&o.from.m==null&&(o.from.h=0,o.from.m=0,o.from.s=0),o.to.dayOfWeek&&o.to.h==null&&o.to.m==null&&(o.to.h=23,o.to.m=59,o.to.s=59),!o.from||!o.to)return[];o.from.h==null&&(o.from.h=0),o.to.h==null&&(o.to.h=23);const d=[],r=(0,t.CQ)(f.from).utc();for(r.set("hour",0),r.set("minute",0),r.set("second",0),r.set("millisecond",0),r.add(o.from.h,"hours"),r.add(o.from.m,"minutes"),r.add(o.from.s,"seconds");r.unix()<=f.to.unix();){for(;o.from.dayOfWeek&&o.from.dayOfWeek!==r.isoWeekday();)r.add(24,"hours");if(r.unix()>f.to.unix())break;const m=(0,t.CQ)(r).utc();if(m.hour)if(o.from.h<=o.to.h)m.add(o.to.h-o.from.h,"hours");else if(o.from.h>o.to.h)for(;m.hour()!==o.to.h;)m.add(1,"hours");else for(m.add(24-o.from.h,"hours");m.hour()!==o.to.h;)m.add(1,"hours");for(m.set("minute",o.to.m??0),m.set("second",o.to.s??0);o.to.dayOfWeek&&o.to.dayOfWeek!==m.isoWeekday();)m.add(24,"hours");r.unix()<f.from.unix()&&m.unix()<f.from.unix()||r.unix()>f.to.unix()&&m.unix()>f.to.unix()||d.push({from:r.valueOf(),to:m.valueOf()}),r.add(24,"hours")}return d}function i(l){const f={};if(!l?.length)return f;const u=l.split(":");return u?.length&&(f.h=Math.min(23,Math.max(0,Number(u[0]))),u.length>1&&(f.m=Math.min(60,Math.max(0,Number(u[1]))),u.length>2&&(f.s=Math.min(60,Math.max(0,Number(u[2])))))),f}function s(l){if(!l||l.h==null&&l.m==null&&l.s==null)return"";let f=String(l.h??0).padStart(2,"0")+":"+String(l.m??0).padStart(2,"0");return l.s!=null&&(f+=String(l.s??0).padStart(2,"0")),f}},49427:(Y,T,e)=>{"use strict";e.d(T,{et:()=>s,fy:()=>f,nO:()=>l,np:()=>o});var t=e(53678),n=e(92468),i=e(99098);function s(d){return d.sort((m,c)=>m[0]-c[0]),d.reduce((m,c)=>{if(!m.length)return[c];const p=m.slice(-1)[0],[g,y]=p,[E,v]=c;return v<y?m:E>y?[...m,c]:[...m.slice(0,-1),[g,v]]},[]).reduce((m,c)=>m+(c[1]-c[0]),0)}function l(d){const r={};let m;for(let c=0;m=d(c),!!m;c++){r[m.id]?r[m.id].span=m.span:r[m.id]={span:m.span,children:[]};for(const p of m.parentIds)p&&(r[p]?r[p].children.push(m.id):r[p]={span:void 0,children:[m.id]})}return r}function f(d,r,m){return{main:`${u(d)}ms (${u(d/r*100)}%)`,secondary:`${u(m)}ms (${u(m/d*100)}%)`}}function u(d){return parseFloat(d.toFixed(2))}function o(){const d=new t.v({fields:[{name:n.z.id,type:i.fS.string},{name:n.z.title,type:i.fS.string},{name:n.z.subTitle,type:i.fS.string},{name:n.z.mainStat,type:i.fS.string,config:{displayName:"Total time (% of trace)"}},{name:n.z.secondaryStat,type:i.fS.string,config:{displayName:"Self time (% of total)"}},{name:n.z.color,type:i.fS.number,config:{color:{mode:"continuous-GrYlRd"},displayName:"Self time / Trace duration"}}],meta:{preferredVisualisationType:"nodeGraph"}}),r=new t.v({fields:[{name:n.z.id,type:i.fS.string},{name:n.z.target,type:i.fS.string},{name:n.z.source,type:i.fS.string}],meta:{preferredVisualisationType:"nodeGraph"}});return[d,r]}},53747:(Y,T,e)=>{"use strict";e.d(T,{v:()=>n});let t="";const n=()=>{const s=new URLSearchParams(window.location.search).get("auth_token");return s!==null&&s!==""?(t=s,s):t}},65135:(Y,T,e)=>{"use strict";e.d(T,{A:()=>l});var t=e(66111),n=e(49969),i=e(8581);const s=Object.keys(n.B).map(f=>({label:f,value:f}));function l({value:f,onChange:u,"aria-label":o,inputId:d,autoFocus:r,...m}){return t.createElement(i.Ph,{inputId:d,value:f,options:s,onChange:c=>u(c.value),placeholder:"Choose role...","aria-label":o,autoFocus:r,...m})}},37592:(Y,T,e)=>{"use strict";e.d(T,{B9:()=>E,CP:()=>O,Dx:()=>v,Fm:()=>R,IS:()=>w,Jk:()=>D,M6:()=>j,Nq:()=>g,PK:()=>c,R5:()=>H,V0:()=>F,Xx:()=>P,Y3:()=>U,_1:()=>x,bN:()=>C,b_:()=>I,h8:()=>h,j4:()=>S,oO:()=>A,tQ:()=>y,uV:()=>b,uh:()=>L});var t=e(82897),n=e.n(t),i=e(77258),s=e(66121),l=e(54899),f=e(37932),u=e(47694),o=e(77582),d=e(95156),r=e(27876),m=e(66114);function c(_){return async k=>{try{k((0,m.UA)(!1)),await k(p(_)),await k(a(_)),await k(M(_)),u.ZP.ldapEnabled&&(0,s.v)("ldapsync")&&await k(S()),k((0,m.UA)(!0))}catch(Q){if(console.error(Q),(0,l.kW)(Q)){const re={title:Q.data.message,body:Q.data.error};k((0,m.sL)(re))}}}}function p(_){return async k=>{const Q=await(0,l.i)().get(`/api/users/${_}`,(0,d.y)());k((0,m.pm)(Q))}}function g(_){return async k=>{await(0,l.i)().put(`/api/users/${_.id}`,_),k(c(_.id))}}function y(_,k){return async Q=>{const re={password:k};await(0,l.i)().put(`/api/admin/users/${_}/password`,re),Q(c(_))}}function E(_){return async k=>{await(0,l.i)().post(`/api/admin/users/${_}/disable`),f.E1.push("/admin/users")}}function v(_){return async k=>{await(0,l.i)().post(`/api/admin/users/${_}/enable`),k(c(_))}}function h(_){return async k=>{await(0,l.i)().delete(`/api/admin/users/${_}`),f.E1.push("/admin/users")}}function P(_,k){return async Q=>{const re={isGrafanaAdmin:k};await(0,l.i)().put(`/api/admin/users/${_}/permissions`,re),Q(c(_))}}function a(_){return async k=>{const Q=await(0,l.i)().get(`/api/users/${_}/orgs`);k((0,m.fm)(Q))}}function C(_,k,Q){return async re=>{const Z={loginOrEmail:_.login,role:Q};await(0,l.i)().post(`/api/orgs/${k}/users/`,Z),re(c(_.id))}}function D(_,k,Q){return async re=>{const Z={role:Q};await(0,l.i)().patch(`/api/orgs/${k}/users/${_}`,Z),re(c(_))}}function b(_,k){return async Q=>{await(0,l.i)().delete(`/api/orgs/${k}/users/${_}`),Q(c(_))}}function M(_){return async k=>{if(!o.Vt.hasPermission(r.AccessControlAction.UsersAuthTokenList))return;const Q=await(0,l.i)().get(`/api/admin/users/${_}/auth-tokens`);Q.reverse();const re=Q.map(Z=>({id:Z.id,isActive:Z.isActive,seenAt:(0,i.E8)(Z.seenAt),createdAt:Z.createdAt,clientIp:Z.clientIp,browser:Z.browser,browserVersion:Z.browserVersion,os:Z.os,osVersion:Z.osVersion,device:Z.device}));k((0,m.RC)(re))}}function x(_,k){return async Q=>{const re={authTokenId:_};await(0,l.i)().post(`/api/admin/users/${k}/revoke-auth-token`,re),Q(M(k))}}function R(_){return async k=>{await(0,l.i)().post(`/api/admin/users/${_}/logout`),k(M(_))}}function S(){return async _=>{const k=o.Vt.hasPermission(r.AccessControlAction.LDAPStatusRead);if((0,s.v)("ldapsync")&&k){const Q=await(0,l.i)().get("/api/admin/ldap-sync-status");_((0,m.CY)(Q))}}}function O(_){return async k=>{await(0,l.i)().post(`/api/admin/ldap/sync/${_}`),k(c(_))}}function U(){return async _=>{if(o.Vt.hasPermission(r.AccessControlAction.LDAPStatusRead))try{const k=await(0,l.i)().get("/api/admin/ldap/status");_((0,m.Ls)(k))}catch(k){if((0,l.kW)(k)){k.isHandled=!0;const Q={title:k.data.message,body:k.data.error};_((0,m.y3)(Q))}}}}function I(_){return async k=>{try{const Q=await(0,l.i)().get(`/api/admin/ldap/${encodeURIComponent(_)}`),{name:re,surname:Z,email:oe,login:G,isGrafanaAdmin:le,isDisabled:fe,roles:ae,teams:de}=Q,ee={info:{name:re,surname:Z,email:oe,login:G},permissions:{isGrafanaAdmin:le,isDisabled:fe},roles:ae,teams:de};k((0,m.sJ)(ee))}catch(Q){if((0,l.kW)(Q)){Q.isHandled=!0;const re={title:Q.data.message,body:Q.data.error};k((0,m.eq)()),k((0,m.VB)(re))}}}}function F(){return _=>{_((0,m.WO)())}}function w(){return _=>{_((0,m.WO)()),_((0,m.eq)())}}const K=_=>_.map(k=>Array.isArray(k.value)?k.value.map(Q=>`${k.name}=${Q.value}`).join("&"):`${k.name}=${k.value}`).join("&");function L(){return async(_,k)=>{try{const{perPage:Q,page:re,query:Z,filters:oe}=k().userListAdmin,G=await(0,l.i)().get(`/api/users/search?perpage=${Q}&page=${re}&query=${Z}&${K(oe)}`);_((0,m.xh)(G))}catch(Q){(0,m.k7)(),console.error(Q)}}}const V=(0,t.debounce)(_=>_(L()),500);function H(_){return async k=>{k((0,m.tZ)()),k((0,m.aj)(_)),V(k)}}function j(_){return async k=>{k((0,m.tZ)()),k((0,m.qz)(_)),V(k)}}function A(_){return async k=>{k((0,m.tZ)()),k((0,m.PJ)(_)),k(L())}}},66114:(Y,T,e)=>{"use strict";e.d(T,{CY:()=>o,Ls:()=>f,PJ:()=>R,RC:()=>E,UA:()=>v,VB:()=>d,WO:()=>s,ZP:()=>U,aj:()=>x,eq:()=>l,fm:()=>y,k7:()=>M,pm:()=>g,qz:()=>S,sJ:()=>r,sL:()=>h,tZ:()=>b,xh:()=>D,y3:()=>u});var t=e(62992);const n={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},i=(0,t.oM)({name:"ldap",initialState:n,reducers:{ldapConnectionInfoLoadedAction:(I,F)=>({...I,ldapError:void 0,connectionInfo:F.payload}),ldapFailedAction:(I,F)=>({...I,ldapError:F.payload}),ldapSyncStatusLoadedAction:(I,F)=>({...I,syncInfo:F.payload}),userMappingInfoLoadedAction:(I,F)=>({...I,user:F.payload,userError:void 0}),userMappingInfoFailedAction:(I,F)=>({...I,user:void 0,userError:F.payload}),clearUserMappingInfoAction:(I,F)=>({...I,user:void 0}),clearUserErrorAction:(I,F)=>({...I,userError:void 0})}}),{clearUserErrorAction:s,clearUserMappingInfoAction:l,ldapConnectionInfoLoadedAction:f,ldapFailedAction:u,ldapSyncStatusLoadedAction:o,userMappingInfoFailedAction:d,userMappingInfoLoadedAction:r}=i.actions,m=i.reducer,c={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},p=(0,t.oM)({name:"userAdmin",initialState:c,reducers:{userProfileLoadedAction:(I,F)=>({...I,user:F.payload}),userOrgsLoadedAction:(I,F)=>({...I,orgs:F.payload}),userSessionsLoadedAction:(I,F)=>({...I,sessions:F.payload}),userAdminPageLoadedAction:(I,F)=>({...I,isLoading:!F.payload}),userAdminPageFailedAction:(I,F)=>({...I,error:F.payload,isLoading:!1})}}),{userProfileLoadedAction:g,userOrgsLoadedAction:y,userSessionsLoadedAction:E,userAdminPageLoadedAction:v,userAdminPageFailedAction:h}=p.actions,P=p.reducer,a={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!1},C=(0,t.oM)({name:"userListAdmin",initialState:a,reducers:{usersFetched:(I,F)=>{const{totalCount:w,perPage:K,...L}=F.payload,V=Math.ceil(w/K);return{...I,...L,totalPages:V,perPage:K,showPaging:V>1,isLoading:!1}},usersFetchBegin:I=>({...I,isLoading:!0}),usersFetchEnd:I=>({...I,isLoading:!1}),queryChanged:(I,F)=>({...I,query:F.payload,page:0}),pageChanged:(I,F)=>({...I,page:F.payload}),filterChanged:(I,F)=>{const{name:w,value:K}=F.payload;return I.filters.some(L=>L.name===w)?{...I,page:0,filters:I.filters.map(L=>L.name===w?{...L,value:K}:L)}:{...I,page:0,filters:[...I.filters,F.payload]}}}}),{usersFetched:D,usersFetchBegin:b,usersFetchEnd:M,queryChanged:x,pageChanged:R,filterChanged:S}=C.actions,O=C.reducer,U={ldap:m,userAdmin:P,userListAdmin:O}},67162:(Y,T,e)=>{"use strict";e.d(T,{$:()=>u,Z:()=>h});var t=e(82897),n=e.n(t),i=e(57591);const s=new i.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),l=[{text:"Query",value:"query"}],f={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var u=(P=>(P.IsAbove="gt",P.IsBelow="lt",P.IsOutsideRange="outside_range",P.IsWithinRange="within_range",P.HasNoValue="no_value",P))(u||{});const o=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],d=[{text:"OR",value:"or"},{text:"AND",value:"and"}],r=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],m=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],c=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function p(P){const a=new i.zU({type:P.type,defaultParams:[]});return new i.XN(P,a)}function g(P){return P.toLowerCase().replace(/_/g,"").split(" ")[0]}function y(P){switch(g(P)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function E(P,a){return(0,t.reduce)(P,(C,D)=>(D.metric!==void 0&&D.value!==void 0&&C.push(D.metric+"="+D.value),D.Metric!==void 0&&D.Value!==void 0&&C.push(D.Metric+"="+D.Value),C),[]).join(a)}function v(P){return(0,t.isArray)(P.data)?E(P.data,", "):(0,t.isArray)(P.data.evalMatches)?E(P.data.evalMatches,", "):P.data.error?"Error: "+P.data.error:""}const h={alertQueryDef:s,getStateDisplayModel:y,conditionTypes:l,evalFunctions:o,evalOperators:d,noDataModes:m,executionErrorModes:c,reducerTypes:r,createReducerPart:p,getAlertAnnotationInfo:v,alertStateSortScore:f}},57591:(Y,T,e)=>{"use strict";e.d(T,{C7:()=>f,D:()=>l,XN:()=>s,zU:()=>i});var t=e(82897),n=e.n(t);class i{constructor(r){this.type=r.type,this.params=r.params,this.defaultParams=r.defaultParams,this.renderer=r.renderer,this.category=r.category,this.addStrategy=r.addStrategy}}class s{constructor(r,m){if(this.part=r,this.def=m,!this.def)throw{message:"Could not find query part "+r.type};r.params=r.params||(0,t.clone)(this.def.defaultParams),this.params=r.params,this.text="",this.updateText()}render(r){return this.def.renderer(this,r)}hasMultipleParamsInString(r,m){return r.indexOf(",")===-1?!1:this.def.params[m+1]&&this.def.params[m+1].optional}updateParam(r,m){if(this.hasMultipleParamsInString(r,m)){(0,t.each)(r.split(","),(c,p)=>{this.updateParam(c.trim(),p)});return}r===""&&this.def.params[m].optional?this.params.splice(m,1):this.params[m]=r,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let r=this.def.type+"(";r+=this.params.join(", "),r+=")",this.text=r}}function l(d,r){const m=d.def.type+"(",c=(0,t.map)(d.params,(p,g)=>{const y=d.def.params[g];return y.type==="time"&&p==="auto"&&(p="$__interval"),y.quote==="single"?"'"+p+"'":y.quote==="double"?'"'+p+'"':p});return r&&c.unshift(r),m+c.join(", ")+")"}function f(d,r){return r+" "+d.params[0]}function u(d,r){return d.params[0]}function o(d,r){return'"'+d.params[0]+'"'}},11626:(Y,T,e)=>{"use strict";e.d(T,{ZP:()=>D,Gr:()=>r,gz:()=>g,Oc:()=>y,K:()=>h,J0:()=>P,T2:()=>v,ql:()=>E});var t=e(62992),n=e(67483),i=e(83829),s=e(46818),l=e(72004);const u=(0,i.combineReducers)({dataSources:(0,s.jK)("dataSources",l.nw,({rulesSourceName:x})=>x).reducer,promRules:(0,s.jK)("promRules",l.y6,({rulesSourceName:x})=>x).reducer,rulerRules:(0,s.jK)("rulerRules",l.UR,({rulesSourceName:x})=>x).reducer,amConfigs:(0,s.jK)("amConfigs",l.Yh,x=>x).reducer,silences:(0,s.jK)("silences",l.je,x=>x).reducer,ruleForm:(0,i.combineReducers)({saveRule:(0,s.i6)("saveRule",l.wy).reducer,existingRule:(0,s.i6)("existingRule",l.on).reducer}),grafanaNotifiers:(0,s.i6)("grafanaNotifiers",l.Vj).reducer,saveAMConfig:(0,s.i6)("saveAMConfig",l.mM).reducer,deleteAMConfig:(0,s.i6)("deleteAMConfig",l.Nc).reducer,updateSilence:(0,s.i6)("updateSilence",l.QY).reducer,amAlerts:(0,s.jK)("amAlerts",l.dB,x=>x).reducer,folders:(0,s.jK)("folders",l.vL,x=>x).reducer,amAlertGroups:(0,s.jK)("amAlertGroups",l.mS,x=>x).reducer,testReceivers:(0,s.i6)("testReceivers",l.D8).reducer,updateLotexNamespaceAndGroup:(0,s.i6)("updateLotexNamespaceAndGroup",l.hv).reducer,externalAlertmanagers:(0,i.combineReducers)({alertmanagerConfig:(0,s.i6)("alertmanagerConfig",l.wE).reducer,discoveredAlertmanagers:(0,s.i6)("discoveredAlertmanagers",l.zy).reducer}),managedAlertStateHistory:(0,s.i6)("managedAlertStateHistory",l.Ms).reducer});var o=e(67162);const d={items:[],searchQuery:"",isLoading:!1},r={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function m(x,R){const S=o.Z.getStateDisplayModel(R),O={...x,stateText:S.text,stateIcon:S.iconClass,stateClass:S.stateClass,stateAge:(0,n.CQ)(x.newStateDate).fromNow(!0)};return O.state!=="paused"&&(O.executionError&&(O.info="Execution Error: "+O.executionError),O.evalData&&O.evalData.noData&&(O.info="Query returned no data")),O}const c=(0,t.oM)({name:"alertRules",initialState:d,reducers:{loadAlertRules:x=>({...x,isLoading:!0}),loadedAlertRules:(x,R)=>{const O=R.payload.map(U=>m(U,U.state));return{...x,items:O,isLoading:!1}},setSearchQuery:(x,R)=>({...x,searchQuery:R.payload})}}),p=(0,t.oM)({name:"notificationChannel",initialState:r,reducers:{setNotificationChannels:(x,R)=>({...x,notificationChannelTypes:M(R.payload),notifiers:R.payload}),notificationChannelLoaded:(x,R)=>{const S=R.payload,U=x.notifiers.find(I=>I.type===S.type).options.filter(I=>I.secure);return U.length>0&&U.some(I=>S.settings[I.propertyName]!=="")?b(x,R.payload,U):{...x,notificationChannel:S}},resetSecureField:(x,R)=>({...x,notificationChannel:{...x.notificationChannel,secureFields:{...x.notificationChannel.secureFields,[R.payload]:!1}}})}}),{loadAlertRules:g,loadedAlertRules:y,setSearchQuery:E}=c.actions,{setNotificationChannels:v,notificationChannelLoaded:h,resetSecureField:P}=p.actions,a=c.reducer,C=p.reducer,D={alertRules:a,notificationChannel:C,unifiedAlerting:u};function b(x,R,S){const O={},U={};return S.forEach(I=>{U[I.propertyName]=R.settings[I.propertyName],O[I.propertyName]=""}),{...x,notificationChannel:{...R,settings:{...R.settings,...O},secureSettings:{...U}}}}function M(x){return x.map(R=>({value:R.type,label:R.name,...R,typeName:R.type})).sort((R,S)=>R.name>S.name?1:-1)}},41904:(Y,T,e)=>{"use strict";e.d(T,{Hc:()=>p,I5:()=>c,PN:()=>d,Z0:()=>g,pM:()=>r,z7:()=>o});var t=e(67483),n=e(53843),i=e(56986),s=e(54899),l=e(35645),f=e(41818);const u=15,o={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully",unknownMessageFromError:"unknown messageFromError"};function d(y,E={}){l.v.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([y],{level:i.in.INFO,context:{...E,module:"Alerting"}})}function r(y,E,v){return async function(...h){const P=performance.now(),a=await y(...h);return d(E,{loadTimeMs:(performance.now()-P).toFixed(0),...v}),a}}async function m(){try{const{createdAt:y}=await(0,s.i)().get("/api/user"),E=(0,t.CQ)().subtract(u,"days"),v=(0,t.CQ)(y);return E.isBefore(v)}catch{return!0}}const c=async y=>{await m()||(0,f.ff)("grafana_alerting_rule_creation",y)},p=async y=>{await m()||(0,f.ff)("grafana_alerting_rule_aborted",y)},g=async y=>{await m()||(0,f.ff)("grafana_alerting_rule_form_error",y)}},29427:(Y,T,e)=>{"use strict";e.d(T,{C:()=>f});var t=e(90701),n=e(65583),i=e(54899),s=e(41904);const l=()=>async u=>{try{const o=performance.now(),{data:d,...r}=await(0,n.n)((0,i.i)().fetch(u));return(0,s.PN)("Request finished",{loadTimeMs:(performance.now()-o).toFixed(0),url:u.url,method:u.method??"",responseStatus:r.statusText}),{data:d,meta:r}}catch(o){return{error:o}}},f=(0,t.LC)({reducerPath:"alertingApi",baseQuery:l(),tagTypes:["AlertmanagerChoice"],endpoints:()=>({})})},30173:(Y,T,e)=>{"use strict";e.d(T,{h:()=>l});var t=e(20194),n=e(45849),i=e(29427);const s=10,l=i.C.injectEndpoints({endpoints:f=>({getAlertmanagerAlerts:f.query({query:({amSourceName:u,filter:o})=>{const d=o?.matchers?.filter(E=>E.name&&E.value).map(E=>`${E.name}${(0,t.zy)(E)}${E.value}`),{silenced:r,inhibited:m,unprocessed:c,active:p}=o||{},g=Object.fromEntries(Object.entries({silenced:r,active:p,inhibited:m,unprocessed:c}).filter(([E,v])=>v!==void 0)),y={filter:d};return g&&Object.keys(g).forEach(E=>{y[E]=g[E]}),{url:`/api/alertmanager/${(0,n.gt)(u)}/api/v2/alerts`,params:y}}}),getAlertmanagerChoiceStatus:f.query({query:()=>({url:"/api/v1/ngalert"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagerConfig:f.query({query:()=>({url:"/api/v1/ngalert/admin_config"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagers:f.query({query:()=>({url:"/api/v1/ngalert/alertmanagers"}),transformResponse:u=>u.data}),saveExternalAlertmanagersConfig:f.mutation({query:u=>({url:"/api/v1/ngalert/admin_config",method:"POST",data:u}),invalidatesTags:["AlertmanagerChoice"]}),getValidAlertManagersConfig:f.query({query:()=>({url:`/api/alertmanager/${(0,n.gt)(n.GC)}/config/history?limit=${s}`})}),resetAlertManagerConfigToOldVersion:f.mutation({query:u=>({url:`/api/alertmanager/${(0,n.gt)(n.GC)}/config/history/${u.id}/_activate`,method:"POST"})})})})},44737:(Y,T,e)=>{"use strict";e.d(T,{C$:()=>o,SJ:()=>m,WG:()=>d,Zy:()=>r});var t=e(65583),n=e(54899),i=e(46063),s=e(37190),l=e(45849),f=e(95454),u=e(49011);async function o(v){if(v===l.GC)return{features:{rulerApiEnabled:!0}};const h=(0,l.c$)(v);if(!h)throw new Error(`Cannot find data source configuration for ${v}`);const{url:P,name:a,type:C}=h;if(!P)throw new Error("The data source url cannot be empty.");if(C!=="prometheus"&&C!=="loki")throw new Error(`The build info request is not available for ${C}. Only 'prometheus' and 'loki' are supported`);return d({name:a,url:P,type:C})}async function d(v){const{url:h,name:P,type:a}=v,C=a==="loki"?void 0:await p(h);if(!(C!==void 0)){if(!await g(P))throw new Error(`Unable to fetch alert rules. Is the ${P} data source properly configured?`);const x=await y(P);return{application:i.T8.Cortex,features:{rulerApiEnabled:x}}}const{features:b}=C.data;return b?{application:i.T8.Mimir,features:{rulerApiEnabled:b?.ruler_config_api==="true"}}:{application:i.T8.Prometheus,features:{rulerApiEnabled:!1}}}async function r(v){if(v===l.GC)return{lazyConfigInit:!1};const h=c(v),{url:P,type:a}=h;if(!P)throw new Error("The data source url cannot be empty.");if(a!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${a}. Only 'alertmanager' type is supported`);return await m(P)}async function m(v){try{return{lazyConfigInit:(await p(v))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function c(v){const h=(0,l.c$)(v);if(!h)throw new Error(`Cannot find data source configuration for ${v}`);return h}async function p(v){return(await(0,t.n)((0,n.i)().fetch({url:`${v}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(P=>{if(!("status"in P&&P.status===404))throw P}))?.data}async function g(v){try{return await(0,f.j)(v),!0}catch{return!1}}async function y(v){try{return await(0,u.jw)(v),!0}catch(h){if(E(h))return!1;throw h}}function E(v){return(0,n.kW)(v)?v.data.message?.includes("GetRuleGroup unsupported in rule local store")||v.data.message?.includes("page not found")||v.data.message?.includes(s.jZ):v instanceof Error&&v.message?.includes("404 from rules config endpoint")}},79572:(Y,T,e)=>{"use strict";e.d(T,{T:()=>i});var t=e(29427),n=e(44737);const i=t.C.injectEndpoints({endpoints:s=>({discoverAmFeatures:s.query({queryFn:async({amSourceName:l})=>{try{return{data:await(0,n.Zy)(l)}}catch(f){return{error:f}}}})})})},644:(Y,T,e)=>{"use strict";e.d(T,{QE:()=>o,i9:()=>s});var t=e(65583),n=e(54899),i=e(45849);function s(){return(0,n.i)().get("/api/alert-notifiers")}const l=d=>{const r=d.match(/^(\w+)(\[\d+\])?$/);return r?{type:r[1],index:r[2]}:{type:d,index:void 0}},f=d=>{const r={receivers:{},errorCount:0};d.forEach(c=>{r.receivers[c.name]={active:c.active,notifiers:{},errorCount:0};const p=r.receivers[c.name];c.integrations.forEach(g=>{Boolean(g?.lastNotifyAttemptError)&&(p.errorCount+=1);const E=u(g.name);E&&(p.notifiers[E]||(p.notifiers[E]=[]),p.notifiers[E].push(g))})});const m=Object.values(r.receivers).reduce((c,p)=>c+p.errorCount,0);return{...r,errorCount:m}},u=d=>l(d)?.type;async function o(d){try{const r=await(0,t.n)((0,n.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(d)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return f(r.data)}catch{return f([])}}},95454:(Y,T,e)=>{"use strict";e.d(T,{hd:()=>l,j:()=>u});var t=e(65583),n=e(54899),i=e(45849);function s(o){const{dataSourceName:d,limitAlerts:r}=o;return{rules:(m,c,p)=>{const g=new URLSearchParams;d===i.GC&&r&&g.set("limit_alerts",String(r));const y=l(g,m);return{url:`/api/prometheus/${(0,i.gt)(d)}/api/v1/rules`,params:f(y,c,p)}}}}function l(o,d){return d?.dashboardUID&&(o.set("dashboard_uid",d.dashboardUID),d?.panelId&&o.set("panel_id",String(d.panelId))),Object.fromEntries(o)}function f(o,d,r){let m={...o};if(d?.length&&(m={...m,state:d}),r?.length){const c=r.map(p=>JSON.stringify(p));m={...m,matcher:c}}return m}async function u(o,d,r,m,c){if(d?.dashboardUID&&o!==i.GC)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:p,params:g}=s({dataSourceName:o,limitAlerts:r}).rules(d,c,m),y=await(0,t.n)((0,n.i)().fetch({url:p,params:g,showErrorAlert:!1,showSuccessAlert:!1})).catch(v=>{throw"status"in v&&v.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):v}),E={};return y.data.data.groups.forEach(v=>{v.rules.forEach(h=>{h.query=h.query||""}),E[v.file]?E[v.file].groups.push(v):E[v.file]={dataSourceName:o,name:v.file,groups:[v]}}),Object.values(E)}},49011:(Y,T,e)=>{"use strict";e.d(T,{BC:()=>c,P4:()=>u,jJ:()=>m,jw:()=>r,m6:()=>o,sz:()=>v});var t=e(65583),n=e(54899),i=e(37190),s=e(45849),l=e(95454);function f(h){const a=`${`/api/ruler/${(0,s.gt)(h.dataSourceName)}`}/api/v1/rules`,C=new URLSearchParams;return C.set("subtype",h.apiVersion==="legacy"?"cortex":"mimir"),{rules:D=>{const b=(0,l.hd)(C,D);return{path:`${a}`,params:b}},namespace:D=>({path:`${a}/${encodeURIComponent(D)}`,params:Object.fromEntries(C)}),namespaceGroup:(D,b)=>({path:`${a}/${encodeURIComponent(D)}/${encodeURIComponent(b)}`,params:Object.fromEntries(C)})}}async function u(h,P,a){const{path:C,params:D}=f(h).namespace(P);await(0,t.n)((0,n.i)().fetch({method:"POST",url:C,data:a,showErrorAlert:!1,showSuccessAlert:!1,params:D}))}async function o(h,P){if(P?.dashboardUID&&h.dataSourceName!==s.GC)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:a,params:C}=f(h).rules(P);return p(a,{},C)}async function d(h,P){const{path:a,params:C}=f(h).namespace(P);return(await p(a,{},C))[P]||[]}async function r(h){return p(`/api/ruler/${(0,s.gt)(h)}/api/v1/rules/test/test`,null)}async function m(h,P,a){const{path:C,params:D}=f(h).namespaceGroup(P,a);return p(C,null,D)}async function c(h,P,a){const{path:C,params:D}=f(h).namespaceGroup(P,a);await(0,t.n)((0,n.i)().fetch({url:C,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:D}))}async function p(h,P,a){try{return(await(0,t.n)((0,n.i)().fetch({url:h,showErrorAlert:!1,showSuccessAlert:!1,params:a}))).data}catch(C){if(!g(C))throw C;if(E(C))return P;throw y(C)?{...C,data:{...C.data,message:i.jZ}}:C}}function g(h){const P=h.data!=null;return Number.isFinite(h.status)&&P}function y(h){return h.status===404||h.status===500&&h.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function E(h){return h.status===404&&(h.data.message?.includes("group does not exist")||h.data.message?.includes("no rule groups found"))}async function v(h,P){const{path:a,params:C}=f(h).namespace(P);await(0,t.n)((0,n.i)().fetch({method:"DELETE",url:a,showErrorAlert:!1,showSuccessAlert:!1,params:C}))}},24782:(Y,T,e)=>{"use strict";e.d(T,{i:()=>l});var t=e(9892),n=e(66111),i=e(72648),s=e(8180);const l=({labelKey:u,value:o,operator:d="=",onRemoveLabel:r})=>{const m=(0,i.wW)(f);return n.createElement("div",{className:m.wrapper},u,d,o,!!r&&n.createElement(s.h,{name:"times",size:"xs",onClick:r}))},f=u=>({wrapper:t.css`
    padding: ${u.spacing(.5,1)};
    border-radius: ${u.shape.borderRadius(1)};
    border: solid 1px ${u.colors.border.medium};
    font-size: ${u.typography.bodySmall.fontSize};
    background-color: ${u.colors.background.secondary};
    font-weight: ${u.typography.fontWeightBold};
    color: ${u.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},52694:(Y,T,e)=>{"use strict";e.d(T,{s:()=>i});var t=e(66111),n=e(34807);const i=({labels:s,className:l})=>{const f=Object.entries(s).filter(([u])=>!(u.startsWith("__")&&u.endsWith("__")));return t.createElement("div",{className:l},t.createElement(n.P,{tags:Object.values(f).map(([u,o])=>`${u}=${o}`),className:l}))}},94984:(Y,T,e)=>{"use strict";e.d(T,{P:()=>o});var t=e(9892),n=e(66111),i=e(72648),s=e(24799),l=e(8581),f=e(45849);function u(r){return r.name===f.GC?"Grafana":r.name.slice(0,37)}const o=({onChange:r,current:m,dataSources:c,disabled:p=!1})=>{const g=(0,i.wW)(d),y=(0,n.useMemo)(()=>c.map(E=>({label:u(E),value:E.name,imgUrl:E.imgUrl,meta:E.meta})),[c]);return n.createElement(s.g,{className:g.field,label:p?"Alertmanager":"Choose Alertmanager",disabled:p||y.length===1,"data-testid":"alertmanager-picker"},n.createElement(l.Ph,{"aria-label":p?"Alertmanager":"Choose Alertmanager",width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:E=>E.value&&r(E.value),options:y,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:m,getOptionLabel:E=>E.label}))},d=r=>({field:t.css`
    margin-bottom: ${r.spacing(4)};
  `})},78543:(Y,T,e)=>{"use strict";e.d(T,{a:()=>m});var t=e(9892),n=e(66111),i=e(63418),s=e(61860),l=e(72648),f=e(37190),u=e(80498),o=e(46587),d=e(94884);const r=["message","description"],m=({annotationKey:g,value:y,valueLink:E})=>{const v=f.vY[g]?n.createElement(s.u,{content:g,placement:"top",theme:"info"},n.createElement("span",null,f.vY[g])):g;return n.createElement(u.C,{label:v,horizontal:!0},n.createElement(c,{annotationKey:g,value:y,valueLink:E}))},c=({annotationKey:g,value:y,valueLink:E})=>{const v=(0,l.wW)(p),h=r.includes(g),P=y&&y.startsWith("http"),a=n.createElement(o.Z,{input:y,delimiter:["{{","}}"]});return E?n.createElement("a",{href:i.QX.sanitizeUrl(E),className:v.link},y):h?n.createElement(d.t,{className:v.well},a):P?n.createElement("a",{href:i.QX.sanitizeUrl(y),target:"__blank",className:v.link},y):n.createElement(n.Fragment,null,a)},p=g=>({well:t.css`
    word-break: break-word;
  `,link:t.css`
    word-break: break-all;
    color: ${g.colors.primary.text};
  `})},33950:(Y,T,e)=>{"use strict";e.d(T,{U:()=>l});var t=e(9892),n=e(66111),i=e(72648),s=e(31403);const l=({isCollapsed:u,onToggle:o,idControlled:d,className:r,text:m,size:c="xl",...p})=>{const g=(0,i.wW)(f);return n.createElement(s.zx,{type:"button",fill:"text",variant:"secondary","aria-expanded":!u,"aria-controls":d,className:(0,t.cx)(g.expandButton,r),icon:u?"angle-right":"angle-down",onClick:()=>o(!u),...p},m)},f=u=>({expandButton:t.css`
    margin-right: ${u.spacing(1)};
  `})},80498:(Y,T,e)=>{"use strict";e.d(T,{C:()=>s});var t=e(9892),n=e(66111),i=e(72648);const s=({className:f,label:u,horizontal:o,children:d,childrenWrapperClassName:r})=>{const m=(0,i.wW)(l);return n.createElement("div",{className:(0,t.cx)(m.field,o?m.fieldHorizontal:m.fieldVertical,f)},n.createElement("div",null,u),n.createElement("div",{className:r},d))},l=f=>({fieldHorizontal:t.css`
    flex-direction: row;
    ${f.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:t.css`
    flex-direction: column;
  `,field:t.css`
    display: flex;
    margin: ${f.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${f.spacing(1)};
      font-size: ${f.typography.size.sm};
      font-weight: ${f.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${f.colors.text.secondary};
    }
  `})},53731:(Y,T,e)=>{"use strict";e.d(T,{t:()=>o});var t=e(9892),n=e(66111),i=e(72648),s=e(8180),l=e(78889),f=e(25724),u=e(1562);const o=({cols:r,items:m,isExpandable:c=!1,onCollapse:p,onExpand:g,isExpanded:y,renderExpandedContent:E,testIdGenerator:v,pagination:h,paginationStyles:P,renderPrefixCell:a,renderPrefixHeader:C,footerRow:D,dataTestId:b})=>{const M=(0,i.wW)(u.Z);if((p||g||y)&&!(p&&g&&y))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((c||E)&&!(c&&E))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const x=(0,i.wW)(d(r,c,!!C)),[R,S]=(0,n.useState)([]),O=L=>{y&&p&&g?y(L)?p(L):g(L):S(R.includes(L.id)?R.filter(V=>V!==L.id):[...R,L.id])},U=h?.itemsPerPage??m.length,{page:I,numberOfPages:F,onPageChange:w,pageItems:K}=(0,f.h)(m,1,U);return n.createElement(n.Fragment,null,n.createElement("div",{className:x.container,"data-testid":b??"dynamic-table"},n.createElement("div",{className:x.row,"data-testid":"header"},C&&C(),c&&n.createElement("div",{className:x.cell}),r.map(L=>n.createElement("div",{className:x.cell,key:L.id},L.label))),K.map((L,V)=>{const H=y?y(L):R.includes(L.id);return n.createElement("div",{className:x.row,key:`${L.id}-${V}`,"data-testid":v?.(L,V)??"row"},a&&a(L,V,m),c&&n.createElement("div",{className:(0,t.cx)(x.cell,x.expandCell)},n.createElement(s.h,{"aria-label":`${H?"Collapse":"Expand"} row`,size:"lg","data-testid":"collapse-toggle",className:x.expandButton,name:H?"angle-down":"angle-right",onClick:()=>O(L),type:"button"})),r.map(j=>n.createElement("div",{className:(0,t.cx)(x.cell,x.bodyCell,j.className),"data-column":j.label,key:`${L.id}-${j.id}`},j.renderCell(L,V))),H&&E&&n.createElement("div",{className:x.expandedContentRow,"data-testid":"expanded-content"},E(L,V,m)))}),D&&n.createElement("div",{className:(0,t.cx)(x.row,x.footerRow)},D)),h&&n.createElement(l.t,{className:(0,t.cx)(M,P),currentPage:I,numberOfPages:F,onNavigate:w,hideWhenSinglePage:!0}))},d=(r,m,c)=>{const p=r.map(g=>g.size?typeof g.size=="number"?`${g.size}fr`:g.size:"auto");return m&&p.unshift("calc(1em + 16px)"),c&&p.unshift("0"),g=>({container:t.css`
      border: 1px solid ${g.colors.border.weak};
      border-radius: ${g.shape.borderRadius()};
      color: ${g.colors.text.secondary};
    `,row:t.css`
      display: grid;
      grid-template-columns: ${p.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${g.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${g.colors.background.primary};
      }

      ${g.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${g.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${c?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:t.css`
      display: flex;
      padding: ${g.spacing(1)};
    `,cell:t.css`
      display: flex;
      align-items: center;
      padding: ${g.spacing(1)};

      ${g.breakpoints.down("sm")} {
        padding: ${g.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:t.css`
      overflow: hidden;

      ${g.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${g.colors.text.primary};
        }
      }
    `,expandCell:t.css`
      justify-content: center;

      ${g.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:t.css`
      grid-column-end: ${p.length+1};
      grid-column-start: ${c?3:2};
      grid-row: 2;
      padding: 0 ${g.spacing(3)} 0 ${g.spacing(1)};
      position: relative;

      ${g.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${g.colors.border.strong};
        grid-row: auto;
        padding: ${g.spacing(1)} 0 0 0;
      }
    `,expandButton:t.css`
      margin-right: 0;
      display: block;
    `})}},42042:(Y,T,e)=>{"use strict";e.d(T,{z:()=>d});var t=e(9892),n=e(9085),i=e.n(n),s=e(66111),l=e(26418),f=e(72648),u=e(39604),o=e(56921);const d=({children:m,header:c,content:p,footer:g,arrow:y,showAfter:E=300,wrapperClassName:v,disabled:h=!1,...P})=>{const a=(0,s.useRef)(null),C=(0,f.wW)(r);if(h)return m;const D=s.createElement(l.Stack,{direction:"column",gap:0},c&&s.createElement("div",{className:C.card.header},c),s.createElement("div",{className:C.card.body},p),g&&s.createElement("div",{className:C.card.footer},g));return s.createElement(u.D,{content:D,hideAfter:100},(b,M,x)=>s.createElement(s.Fragment,null,a.current&&s.createElement(o.J,{...x,...P,wrapperClassName:i()(C.popover(y?1.25:0),v),onMouseLeave:M,onMouseEnter:b,referenceElement:a.current,renderArrow:y?({arrowProps:R,placement:S})=>s.createElement("div",{className:C.arrow(S),...R}):()=>s.createElement(s.Fragment,null)}),s.cloneElement(m,{ref:a,onMouseEnter:b,onMouseLeave:M})))},r=m=>({popover:c=>t.css`
    border-radius: ${m.shape.borderRadius()};
    box-shadow: ${m.shadows.z3};
    background: ${m.colors.background.primary};
    border: 1px solid ${m.colors.border.medium};

    margin-bottom: ${m.spacing(c)};
  `,card:{body:t.css`
      padding: ${m.spacing(1)};
    `,header:t.css`
      padding: ${m.spacing(1)};
      background: ${m.colors.background.secondary};
      border-bottom: solid 1px ${m.colors.border.medium};
    `,footer:t.css`
      padding: ${m.spacing(.5)} ${m.spacing(1)};
      background: ${m.colors.background.secondary};
      border-top: solid 1px ${m.colors.border.medium};
    `},arrow:c=>{const p="9px";return t.css`
      width: 0;
      height: 0;

      border-left: ${p} solid transparent;
      border-right: ${p} solid transparent;
      /* using hex colors here because the border colors use alpha transparency */
      border-top: ${p} solid ${m.isLight?"#d2d3d4":"#2d3037"};

      &:after {
        content: '';
        position: absolute;

        border: ${p} solid ${m.colors.background.primary};
        border-bottom: 0;
        border-left-color: transparent;
        border-right-color: transparent;

        margin-top: 1px;
        bottom: 1px;
        left: -${p};
      }
    `}})},63613:(Y,T,e)=>{"use strict";e.d(T,{s:()=>s});var t=e(66111),n=e(61860),i=e(39904);function s({text:l}){return t.createElement(n.u,{placement:"top",content:t.createElement("div",null,l)},t.createElement(i.J,{name:"info-circle",size:"xs"}))}},63029:(Y,T,e)=>{"use strict";e.d(T,{L:()=>i});var t=e(9892),n=e(66111);const i=()=>n.createElement("span",{className:t.css`
      flex: 1;
    `})},79453:(Y,T,e)=>{"use strict";e.d(T,{i:()=>s});var t=e(9892),n=e(66111),i=e(72648);const s=({children:f,state:u,size:o="md",muted:d=!1})=>{const r=(0,i.wW)(l);return n.createElement("span",{className:(0,t.cx)(r.common,r[u],r[o],{[r.muted]:d})},f||u)},l=f=>({common:t.css`
    display: inline-block;
    color: white;
    border-radius: ${f.shape.borderRadius()};
    font-size: ${f.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${f.typography.fontWeightBold};
  `,good:t.css`
    background-color: ${f.colors.success.main};
    border: solid 1px ${f.colors.success.main};
    color: ${f.colors.success.contrastText};
  `,warning:t.css`
    background-color: ${f.colors.warning.main};
    border: solid 1px ${f.colors.warning.main};
    color: ${f.colors.warning.contrastText};
  `,bad:t.css`
    background-color: ${f.colors.error.main};
    border: solid 1px ${f.colors.error.main};
    color: ${f.colors.error.contrastText};
  `,neutral:t.css`
    background-color: ${f.colors.secondary.main};
    border: solid 1px ${f.colors.secondary.main};
    color: ${f.colors.secondary.contrastText};
  `,info:t.css`
    background-color: ${f.colors.primary.main};
    border: solid 1px ${f.colors.primary.main};
    color: ${f.colors.primary.contrastText};
  `,md:t.css`
    padding: ${f.spacing(.5,1)};
    min-width: ${f.spacing(8)};
  `,sm:t.css`
    padding: ${f.spacing(.3,.5)};
    min-width: 52px;
  `,muted:t.css`
    opacity: 0.5;
  `})},46587:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(9892),n=e(66111),i=e(72648),s=e(19985),l=e(42042),f=e(68402);const u=["$",".",'"'];function o({input:E,delimiter:v=["{{","}}"]}){const h=(0,i.wW)(y),[P,a]=v,C=new RegExp(`(?<before>.*?)(${P}(?<token>.*?)${a}|$)`,"gm"),D=E.split(`
`),b=[];return D.forEach((M,x)=>{Array.from(M.matchAll(C)).forEach((S,O)=>{const U=S.groups?.before,I=S.groups?.token?.trim();if(U&&b.push(n.createElement("span",{key:`${x}-${O}-before`},U)),I){const F=g(I),w=F===d.Variable?I:"",K=`${P} ${I} ${a}`;b.push(n.createElement(r,{key:`${x}-${O}-token`,content:K,type:F,description:w}))}}),b.push(n.createElement("br",{key:`${x}-newline`}))}),n.createElement("span",{className:h.wrapper},b)}var d=(E=>(E.Variable="variable",E.Function="function",E.Keyword="keyword",E.Unknown="unknown",E))(d||{});function r({content:E,description:v,type:h}){const P=(0,i.wW)(y),a=Boolean(h)===!1;return n.createElement(l.z,{placement:"top-start",disabled:a,content:n.createElement("div",{className:P.hoverTokenItem},n.createElement(s.C,{text:n.createElement(n.Fragment,null,h),color:"blue"})," ",v&&n.createElement("code",null,v))},n.createElement("span",null,n.createElement(s.C,{className:P.token,text:E,color:"blue"})))}function m(E){return u.some(v=>E.startsWith(v))}function c(E){return f.keywords.some(v=>E.startsWith(v))}function p(E){return f.builtinFunctions.some(v=>E.startsWith(v))}function g(E){let v;return m(E)?v="variable":c(E)?v="keyword":p(E)?v="function":v="unknown",v}const y=E=>({wrapper:t.css`
    white-space: pre-wrap;
  `,token:t.css`
    cursor: default;
    font-family: ${E.typography.fontFamilyMonospace};
  `,popover:t.css`
    border-radius: ${E.shape.borderRadius()};
    box-shadow: ${E.shadows.z3};
    background: ${E.colors.background.primary};
    border: 1px solid ${E.colors.border.medium};

    padding: ${E.spacing(1)};
  `,hoverTokenItem:t.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${E.spacing(1)};
  `})},94884:(Y,T,e)=>{"use strict";e.d(T,{t:()=>s});var t=e(9892),n=e(66111),i=e(72648);const s=({children:f,className:u})=>{const o=(0,i.wW)(l);return n.createElement("div",{className:(0,t.cx)(o.wrapper,u)},f)},l=f=>({wrapper:t.css`
    background-color: ${f.components.panel.background};
    border: solid 1px ${f.components.input.borderColor};
    border-radius: ${f.shape.borderRadius(1)};
    padding: ${f.spacing(.5,1)};
    font-family: ${f.typography.fontFamilyMonospace};
  `})},96308:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>f});var t=e(64681),n=e.n(t),i=e(66111),s=e(72648),l=e(53715);const f=({group:u})=>{const o=(0,s.wW)(l.r),d=u.alerts.length,r=u.alerts.reduce((m,c)=>(m[c.status.state]?m[c.status.state]+=1:m[c.status.state]=1,m),{});return i.createElement("div",null,`${d} ${n()("alert",d)}: `,Object.entries(r).map(([m,c],p)=>i.createElement("span",{key:`${JSON.stringify(u.labels)}-notifications-${p}`,className:o[m]},p>0&&", ",`${c} ${m}`)))}},30151:(Y,T,e)=>{"use strict";e.d(T,{F:()=>p});var t=e(9892),n=e(82897),i=e.n(n),s=e(66111),l=e(26418),f=e(54408),u=e(72648),o=e(39904),d=e(64353),r=e(61860),m=e(46967),c=e(41904);const p=({className:y,onFilterChange:E,defaultQueryString:v})=>{const h=(0,u.wW)(g),P=(0,s.useMemo)(()=>(0,n.debounce)(C=>{(0,f.PN)(c.z7.filterByLabel);const D=C.target;E(D.value)},600),[E]);(0,s.useEffect)(()=>P.cancel(),[P]);const a=s.createElement(o.J,{name:"search"});return s.createElement("div",{className:y},s.createElement(d._,null,s.createElement(l.Stack,{gap:.5},s.createElement("span",null,"Search by label"),s.createElement(r.u,{content:s.createElement("div",null,"Filter alerts using label querying, ex:",s.createElement("pre",null,'{severity="critical", instance=~"cluster-us-.+"}'))},s.createElement(o.J,{className:h.icon,name:"info-circle",size:"sm"})))),s.createElement(m.I,{placeholder:"Search",defaultValue:v,onChange:P,"data-testid":"search-query-input",prefix:a,className:h.inputWidth}))},g=y=>({icon:t.css`
    margin-right: ${y.spacing(.5)};
  `,inputWidth:t.css`
    width: 340px;
    flex-grow: 0;
  `})},50362:(Y,T,e)=>{"use strict";e.d(T,{_:()=>f});var t=e(9892),n=e(66111),i=e(72648),s=e(19985),l=e(31403);const f=({enabled:o=!1,error:d,warning:r,onSetCondition:m})=>{const c=(0,i.wW)(u);return o&&d?n.createElement(s.C,{color:"red",icon:"exclamation-circle",text:"Alert condition",tooltip:d.message}):o&&r?n.createElement(s.C,{color:"orange",icon:"exclamation-triangle",text:"Alert condition",tooltip:r.message}):o&&!d&&!r?n.createElement(s.C,{color:"green",icon:"check",text:"Alert condition"}):o?null:n.createElement("button",{type:"button",className:c.actionLink,onClick:()=>m&&m()},"Make this the alert condition")},u=o=>{const d=(0,l.gN)(o);return{actionLink:t.css`
      ${d};
      color: ${o.colors.text.link};
      cursor: pointer;

      &:hover {
        text-decoration: underline;
      }
    `}}},97201:(Y,T,e)=>{"use strict";e.d(T,{A2:()=>w,bw:()=>L});var t=e(9892),n=e(82897),i=e(66111),s=e(52666),l=e(19447),f=e(77258),u=e(26418),o=e(72648),d=e(31403),r=e(68668),m=e(39904),c=e(8581),p=e(8180),g=e(5076),y=e(71263),E=e(75897),v=e(436),h=e(17349),P=e(97573),a=e(46063),C=e(25724),D=e(42042),b=e(63029),M=e(45608),x=e(50362),R=e(56190);const S=k=>{const Q=k.fields[0];return Q?.config?.displayNameFromDS??k.name??Q?.labels?.__name__},O=k=>{const Q=k.fields[0]?.values[0];return Number.isFinite(Q)?(0,R.O)(Q,5):Q},U=k=>k.fields[0]?.labels??{},I=k=>Object.entries(k).map(([Q,re])=>Q+"="+re).join(", "),F=k=>k.every(re=>re.fields.every(Z=>Z.values.every(oe=>oe==null))),w=({queries:k=[],query:Q,data:re,error:Z,warning:oe,isAlertCondition:G,onSetCondition:le,onUpdateRefId:fe,onRemoveExpression:ae,onUpdateExpressionType:de,onChangeQuery:ee})=>{const me=(0,o.wW)(_),q=Q?.type,ne=re&&Object.values(re).some(Ie=>Boolean(Ie)&&Ie.state===s.Gu.Loading),se=Array.isArray(re?.series)&&!ne,he=re?.series??[],ue=G??!1,Te=G&&se,Ve={[a.x_.Firing]:he.filter(Ie=>O(Ie)>=1),[a.x_.Inactive]:he.filter(Ie=>O(Ie)<1)},ct=(0,i.useCallback)(Ie=>{const Ke=k.filter(Ge=>Ie.refId!==Ge.refId).map(Ge=>({value:Ge.refId,label:Ge.refId}));switch(Ie.type){case P.Us.math:return i.createElement(y.Z,{onChange:ee,query:Ie,labelWidth:"auto",onRunQuery:()=>{}});case P.Us.reduce:return i.createElement(E.v,{onChange:ee,refIds:Ke,labelWidth:"auto",query:Ie});case P.Us.resample:return i.createElement(v.p,{onChange:ee,query:Ie,labelWidth:"auto",refIds:Ke});case P.Us.classic:return i.createElement(g.I,{onChange:ee,query:Ie,refIds:Ke});case P.Us.threshold:return i.createElement(h.M,{onChange:ee,query:Ie,labelWidth:"auto",refIds:Ke});default:return i.createElement(i.Fragment,null,"Expression not supported: ",Ie.type)}},[ee,k]);return i.createElement("div",{className:(0,t.cx)(me.expression.wrapper,ue&&me.expression.alertCondition)},i.createElement("div",{className:me.expression.stack},i.createElement(H,{refId:Q.refId,queryType:q,onRemoveExpression:()=>ae(Q.refId),onUpdateRefId:Ie=>fe(Q.refId,Ie),onUpdateExpressionType:Ie=>de(Q.refId,Ie)}),i.createElement("div",{className:me.expression.body},ct(Q)),se&&i.createElement(L,{series:he,isAlertCondition:G}),i.createElement("div",{className:me.footer},i.createElement(u.Stack,{direction:"row",alignItems:"center"},i.createElement(x._,{onSetCondition:()=>le(Q.refId),enabled:ue,error:Z,warning:oe}),i.createElement(b.L,null),Te&&i.createElement(V,{firing:Ve[a.x_.Firing].length,normal:Ve[a.x_.Inactive].length})))))},K=20,L=({series:k,isAlertCondition:Q})=>{const{pageItems:re,previousPage:Z,nextPage:oe,numberOfPages:G,pageStart:le,pageEnd:fe}=(0,C.h)(k,1,K),ae=(0,o.wW)(_),de=F(k),ee=!de&&(0,l.xI)(k),me=G>1;return i.createElement("div",{className:ae.expression.results},!de&&ee&&i.createElement("div",null,re.map((q,ne)=>i.createElement(A,{key:(0,n.uniqueId)(),frame:q,index:le+ne,isAlertCondition:Q}))),!de&&!ee&&re.map((q,ne)=>i.createElement(j,{key:(0,n.uniqueId)(),frame:q,index:le+ne,isAlertCondition:Q})),de&&i.createElement("div",{className:(0,t.cx)(ae.expression.noData,ae.mutedText)},"No data"),me&&i.createElement("div",{className:ae.pagination.wrapper,"data-testid":"paginate-expression"},i.createElement(u.Stack,null,i.createElement(d.zx,{variant:"secondary",fill:"outline",onClick:Z,icon:"angle-left",size:"sm","aria-label":"previous-page"}),i.createElement(b.L,null),i.createElement("span",{className:ae.mutedText},le," - ",fe," of ",k.length),i.createElement(b.L,null),i.createElement(d.zx,{variant:"secondary",fill:"outline",onClick:oe,icon:"angle-right",size:"sm","aria-label":"next-page"}))))},V=({firing:k,normal:Q})=>{const{mutedText:re}=(0,o.wW)(_);return i.createElement("span",{className:re},`${k} firing, ${Q} normal`)},H=({refId:k,queryType:Q,onUpdateRefId:re,onUpdateExpressionType:Z,onRemoveExpression:oe})=>{const G=(0,o.wW)(_),le=(0,o.wW)(d.gN),[fe,ae]=(0,i.useState)(!1),de=fe!==!1,ee=de&&fe==="refId",me=de&&fe==="expressionType",q=P._M.find(ne=>ne.value===Q);return i.createElement("header",{className:G.header.wrapper},i.createElement(u.Stack,{direction:"row",gap:.5,alignItems:"center"},i.createElement(u.Stack,{direction:"row",gap:1,alignItems:"center",wrap:!1},!ee&&i.createElement("button",{type:"button",className:(0,t.cx)(le,G.editable),onClick:()=>ae("refId")},i.createElement("div",{className:G.expression.refId},k)),ee&&i.createElement(r.H,{autoFocus:!0,defaultValue:k,minWidth:5,onChange:ne=>{re(ne.currentTarget.value),ae(!1)},onFocus:ne=>ne.target.select(),onBlur:ne=>{re(ne.currentTarget.value),ae(!1)}}),!me&&i.createElement("button",{type:"button",className:(0,t.cx)(le,G.editable),onClick:()=>ae("expressionType")},i.createElement("div",{className:G.mutedText},(0,n.capitalize)(Q)),i.createElement(m.J,{size:"xs",name:"pen",className:G.mutedIcon,onClick:()=>ae("expressionType")})),me&&i.createElement(c.Ph,{isOpen:!0,autoFocus:!0,onChange:ne=>{Z(ne.value??P.Us.classic),ae(!1)},onBlur:()=>{ae(!1)},options:P._M,value:q,width:25})),i.createElement(b.L,null),i.createElement(p.h,{type:"button",name:"trash-alt",variant:"secondary",className:G.mutedIcon,onClick:oe})))},j=({frame:k,index:Q,isAlertCondition:re})=>{const Z=(0,o.wW)(_),oe=S(k)||"Series "+Q,G=O(k),le=U(k),fe=Object.entries(le),ae=fe.length>0,de=re&&G!==0,ee=re&&G===0,me=`${ae?"":oe}${ae?`{${I(le)}}`:""}`;return i.createElement("div",{className:Z.expression.resultsRow},i.createElement(u.Stack,{direction:"row",gap:1,alignItems:"center"},i.createElement("div",{className:Z.expression.resultLabel,title:me},i.createElement("span",null,ae?"":oe),ae&&i.createElement(i.Fragment,null,i.createElement("span",null,"{"),fe.map(([q,ne],se)=>i.createElement("span",{key:(0,n.uniqueId)()},i.createElement("span",{className:Z.expression.labelKey},q),i.createElement("span",null,"="),i.createElement("span",null,'"'),i.createElement("span",{className:Z.expression.labelValue},ne),i.createElement("span",null,'"'),se<fe.length-1&&i.createElement("span",null,", "))),i.createElement("span",null,"}"))),i.createElement("div",{className:Z.expression.resultValue},G),de&&i.createElement(M.l,{state:a.x_.Firing,size:"sm"}),ee&&i.createElement(M.l,{state:a.x_.Inactive,size:"sm"})))},A=({frame:k,index:Q})=>{const re=(0,o.wW)(_),Z=k.fields[1],oe=Z.labels,le=Z.config?.displayNameFromDS??(oe?I(Z.labels??{}):"Series "+Q),fe=k.fields[0].values,ae=ee=>k.fields[0].values[ee],de=ee=>k.fields[1].values[ee];return i.createElement("div",{className:re.expression.resultsRow},i.createElement(u.Stack,{direction:"row",gap:1,alignItems:"center"},i.createElement("span",{className:(0,t.cx)(re.mutedText,re.expression.resultLabel),title:le},le),i.createElement("div",{className:re.expression.resultValue},i.createElement(D.z,{placement:"right",wrapperClassName:re.timeseriesTableWrapper,content:i.createElement("table",{className:re.timeseriesTable},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,"Timestamp"),i.createElement("th",null,"Value"))),i.createElement("tbody",null,fe.map((ee,me)=>i.createElement("tr",{key:me},i.createElement("td",{className:re.mutedText},(0,f.dq)(ae(me))),i.createElement("td",{className:re.expression.resultValue},de(me))))))},i.createElement("span",null,"Time series data")))))},_=k=>({expression:{wrapper:t.css`
      display: flex;
      border: solid 1px ${k.colors.border.medium};

      border-radius: ${k.shape.borderRadius()};
      max-width: 640px;
    `,stack:t.css`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      gap: 0;
      min-width: 0; // this one is important to prevent text overflow
    `,alertCondition:t.css``,body:t.css`
      padding: ${k.spacing(1)};
      flex: 1;
    `,refId:t.css`
      font-weight: ${k.typography.fontWeightBold};
      color: ${k.colors.primary.text};
    `,results:t.css`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;

      border-top: solid 1px ${k.colors.border.medium};
    `,noResults:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
    `,resultsRow:t.css`
      padding: ${k.spacing(.75)} ${k.spacing(1)};

      &:nth-child(odd) {
        background-color: ${k.colors.background.secondary};
      }

      &:hover {
        background-color: ${k.colors.background.canvas};
      }
    `,labelKey:t.css`
      color: ${k.isDark?"#73bf69":"#56a64b"};
    `,labelValue:t.css`
      color: ${k.isDark?"#ce9178":"#a31515"};
    `,resultValue:t.css`
      text-align: right;
    `,resultLabel:t.css`
      flex: 1;
      overflow-x: auto;

      display: inline-block;
      white-space: nowrap;
    `,noData:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      padding: ${k.spacing()};
    `},mutedText:t.css`
    color: ${k.colors.text.secondary};
    font-size: 0.9em;

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,header:{wrapper:t.css`
      background: ${k.colors.background.secondary};
      padding: ${k.spacing(.5)} ${k.spacing(1)};
      border-bottom: solid 1px ${k.colors.border.medium};
    `},footer:t.css`
    background: ${k.colors.background.secondary};
    padding: ${k.spacing(1)};
    border-top: solid 1px ${k.colors.border.medium};
  `,draggableIcon:t.css`
    cursor: grab;
  `,mutedIcon:t.css`
    color: ${k.colors.text.secondary};
  `,editable:t.css`
    padding: ${k.spacing(.5)} ${k.spacing(1)};
    border: solid 1px ${k.colors.border.weak};
    border-radius: ${k.shape.borderRadius()};

    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${k.spacing(1)};

    cursor: pointer;
  `,timeseriesTableWrapper:t.css`
    max-height: 500px;

    overflow-y: scroll;
  `,timeseriesTable:t.css`
    table-layout: auto;

    width: 100%;
    height: 100%;

    td,
    th {
      padding: ${k.spacing(1)};
    }

    td {
      background: ${k.colors.background.primary};
    }

    th {
      background: ${k.colors.background.secondary};
    }

    tr {
      border-bottom: 1px solid ${k.colors.border.medium};

      &:last-of-type {
        border-bottom: none;
      }
    }
  `,pagination:{wrapper:t.css`
      border-top: 1px solid ${k.colors.border.medium};
      padding: ${k.spacing()};
    `}})},68402:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{AlertmanagerTemplateFunction:()=>n,availableAlertManagerFunctions:()=>i,builtinFunctions:()=>l,conf:()=>o,keywords:()=>f,language:()=>u});var t=(d=>(d.Delimiter="delimiter",d.Keyword="keyword",d.Function="type.identifier",d.String="string",d.Variable="variable.name",d.Number="number",d.Comment="comment",d.Operator="operator",d.Identifier="idenfifier",d))(t||{}),n=(d=>(d.toUpper="toUpper",d.toLower="toLower",d.title="title",d.join="join",d.match="match",d.safeHtml="safeHtml",d.reReplaceAll="reReplaceAll",d.stringSlice="stringSlice",d))(n||{});const i=Object.values(n),l=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],f=["define","if","else","end","range","break","continue","template","block","with"],u={defaultToken:"",keywords:f,functions:[...l,...i],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},o={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},32139:(Y,T,e)=>{"use strict";e.d(T,{p:()=>En,E:()=>bn});var t=e(9892),n=e(66111),i=e(66698),s=e(51947),l=e(35645),f=e(54408),u=e(72648),o=e(24799),d=e(46967),r=e(52081),m=e(31403),c=e(67487),p=e(68226),g=e(98102),y=e(60499),E=e(77582),v=e(40014),h=e(96044),P=e(27876),a=e(41904),C=e(69945),D=e(72004),b=e(94617),M=e(46818),x=e(21767),R=e(60048),S=e(63619),O=e(8581),U=e(20383),I=e(41213),F=e(30422),w=e(77258),K=e(52666),L=e(86647),V=e(45253),H=e(59980),j=e(9471),A=e(59724),_=e(57027),k=e(32921),Q=e(59957),re=e(75849),Z=e(54899),oe=e(77599);function G(Pt){return"expr"in Pt}function le(Pt){return"grafana_condition"in Pt}var fe=e(45849);function ae(Pt){if(G(Pt))return de(Pt,Pt.dataSourceUid,b.$.cloudAlerting);if(le(Pt))return de(Pt,fe.GC,b.$.grafana);throw new Error("unsupported preview rule request")}function de(Pt,Ae,Me){return(0,k.x)({whileLoading:ee(Me),source:(0,Z.i)().fetch({method:"POST",url:`/api/v1/rule/test/${Ae}`,data:Pt}).pipe((0,j.U)(({data:Ze})=>ee(Me,{state:K.Gu.Done,series:Ze.instances.map(Q.vP)})),(0,A.K)(Ze=>(0,H.of)(ee(Me,{state:K.Gu.Error,error:(0,oe.P)(Ze)}))),(0,_.B)())})}function ee(Pt,Ae={}){return{ruleType:Pt,data:{state:K.Gu.Loading,series:[],timeRange:(0,re.JK)(),...Ae}}}var me=e(69369),q=e(89050),ne=e(90748),se=e(98825),he=e(40538);function ue(Pt){const{preview:Ae}=Pt,Me=(0,u.wW)(Te),Ze={defaults:{},overrides:[{matcher:{id:ne.mi.byName,options:"Info"},properties:[{id:"custom.displayMode",value:he.h2.JSONView}]}]};if(!Ae)return null;const{data:tt,ruleType:It}=Ae;return tt.state===K.Gu.Loading?n.createElement("div",{className:Me.container},n.createElement("span",null,"Loading preview...")):tt.state===K.Gu.Error?n.createElement("div",{className:Me.container},tt.error?(0,M.kk)(tt.error):"Failed to preview alert rule"):n.createElement("div",{className:Me.container},n.createElement("span",null,"Preview based on the result of running the query, for this moment."," ",It===b.$.grafana?"Configuration for `no data` and `error handling` is not applied.":null),n.createElement("div",{className:Me.table},n.createElement(q.Z,null,({width:$t,height:Tt})=>n.createElement("div",{style:{width:`${$t}px`,height:`${Tt}px`}},n.createElement(se.$,{title:"",width:$t,height:Tt,pluginId:"table",data:tt,fieldConfig:Ze})))))}function Te(Pt){return{container:t.css`
      margin: ${Pt.spacing(2)} 0;
    `,table:t.css`
      flex: 1 1 auto;
      height: 135px;
      margin-top: ${Pt.spacing(2)};
      border: 1px solid ${Pt.colors.border.medium};
      border-radius: ${Pt.shape.borderRadius(1)};
    `}}const Ve=["type","dataSourceName","condition","queries","expression"];function ct(){const Pt=(0,u.wW)(at),[Ae,Me]=Ie(),{watch:Ze}=(0,i.Gc)(),[tt,It,$t]=Ze(["type","condition","queries"]),{allDataSourcesAvailable:Tt}=(0,me.S)($t);if(tt===b.$.cloudRecording||tt===b.$.cloudAlerting)return null;const qe=Boolean(It)&&Tt;return n.createElement("div",{className:Pt.container},n.createElement(r.Lh,null,Tt&&n.createElement(m.zx,{disabled:!qe,type:"button",variant:"primary",onClick:Me},"Preview alerts"),!Tt&&n.createElement(V.b,{title:"Preview is not available",severity:"warning"},"Cannot display the query preview. Some of the data sources used in the queries are not available.")),n.createElement(ue,{preview:Ae}))}function Ie(){const[Pt,Ae]=(0,n.useState)(),{getValues:Me}=(0,i.Gc)(),Ze=(0,I.Z)(),tt=(0,n.useCallback)(()=>{const It=Me(Ve),$t=Ke(It);ae($t).pipe((0,F.o)(Tt=>!Ge(Tt),!0)).subscribe(Tt=>{Ze()&&Ae(Tt)})},[Me,Ze]);return[Pt,tt]}function Ke(Pt){const[Ae,Me,Ze,tt,It]=Pt,$t=(0,L.F)().getInstanceSettings(Me);if(!$t)throw new Error(`Cannot find data source settings for ${Me}`);switch(Ae){case b.$.cloudAlerting:return{dataSourceUid:$t.uid,dataSourceName:Me,expr:It};case b.$.grafana:return{grafana_condition:{condition:Ze,data:tt,now:(0,w.lf)(Date.now())}};default:throw new Error(`Alert type ${Ae} not supported by preview.`)}}function Ge(Pt){switch(Pt.data.state){case K.Gu.Done:case K.Gu.Error:return!0;default:return!1}}function at(Pt){return{container:t.css`
      margin-top: ${Pt.spacing(2)};
      max-width: ${Pt.breakpoints.values.xxl}px;
    `}}var dt=e(36894);const Re=()=>{const Pt=(0,u.wW)(ye),{register:Ae,control:Me,watch:Ze,formState:{errors:tt}}=(0,i.Gc)();return Ze("type")===b.$.cloudRecording?null:n.createElement(dt.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(o.g,{label:"For",description:"Expression has to be true for this long for the alert to be fired."},n.createElement("div",{className:Pt.flexRow},n.createElement(o.g,{invalid:!!tt.forTime?.message,error:tt.forTime?.message,className:Pt.inlineField},n.createElement(d.I,{...Ae("forTime",{pattern:{value:/^\d+$/,message:"Must be a positive integer."}}),width:8})),n.createElement(S.g,{name:"forTimeUnit",render:({field:{onChange:$t,ref:Tt,...qe}})=>n.createElement(O.Ph,{...qe,options:U.qr,onChange:rn=>$t(rn?.value),width:15,className:Pt.timeUnit}),control:Me}))),n.createElement(ct,null))},ye=Pt=>({inlineField:t.css`
    margin-bottom: 0;
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-start;
  `,timeUnit:t.css`
    margin-left: ${Pt.spacing(.5)};
  `});var Pe=e(16808),be=e(20700);const Be=({rulesSourceName:Pt})=>{const{control:Ae,watch:Me,formState:{errors:Ze},setValue:tt}=(0,i.Gc)(),It=(0,u.wW)(ke),$t=(0,C._)(wn=>wn.rulerRules),Tt=(0,P.useDispatch)();(0,n.useEffect)(()=>{Tt((0,D.UR)({rulesSourceName:Pt}))},[Pt,Tt]);const qe=$t[Pt]?.result,rn=Me("namespace"),dn=(0,n.useMemo)(()=>qe?Object.keys(qe).map(wn=>({label:wn,value:wn})):[],[qe]),Dn=(0,n.useMemo)(()=>rn&&qe?.[rn]?.map(wn=>({label:wn.name,value:wn.name}))||[],[rn,qe]);return n.createElement("div",{className:It.flexRow},n.createElement(o.g,{"data-testid":"namespace-picker",label:"Namespace",error:Ze.namespace?.message,invalid:!!Ze.namespace?.message},n.createElement(S.g,{render:({field:{onChange:wn,ref:Gn,...ra}})=>n.createElement(O.LT,{...ra,allowCustomValue:!0,className:It.input,onChange:Sa=>{tt("group",""),wn(Sa.value)},options:dn,width:42}),name:"namespace",control:Ae,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:be.p0}}})),n.createElement(o.g,{"data-testid":"group-picker",label:"Group",error:Ze.group?.message,invalid:!!Ze.group?.message},n.createElement(S.g,{render:({field:{ref:wn,...Gn}})=>n.createElement(O.LT,{...Gn,allowCustomValue:!0,options:Dn,width:42,onChange:ra=>{tt("group",ra.value??"")},className:It.input}),name:"group",control:Ae,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:be.p0}}})))},ke=Pt=>({flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;

    & > * + * {
      margin-left: ${Pt.spacing(3)};
    }
  `,input:t.css`
    width: 330px !important;
  `});function ot(Pt){if(Pt===b.$.cloudRecording)return"Select the Namespace and Group for your recording rule.";const Ae="https://grafana.com/docs/grafana/latest/alerting/fundamentals/annotation-label/variables-label-annotation",Me=()=>n.createElement("span",null,"Click"," ",n.createElement("a",{href:Ae,target:"_blank",rel:"noreferrer"},"here"," "),"for documentation on how to template annotations and labels.");return Pt===b.$.grafana?n.createElement("span",null," ","Write a summary to help you better manage your alerts. ",n.createElement(Me,null)):Pt===b.$.cloudAlerting?n.createElement("span",null," ","Select the Namespace and evaluation group for your alert. Write a summary to help you better manage your alerts."," "):""}function ft(){const{watch:Pt}=(0,i.Gc)(),Ae=Pt("type"),Me=Pt("dataSourceName"),Ze=Pt("type");return n.createElement(dt.z,{stepNo:Ze===b.$.cloudRecording?3:4,title:Ze===b.$.cloudRecording?"Folder and group":"Add details for your alert rule",description:ot(Ze)},(Ae===b.$.cloudRecording||Ae===b.$.cloudAlerting)&&Me&&n.createElement(Be,{rulesSourceName:Me}),Ze!==b.$.cloudRecording&&n.createElement(Pe.Z,null))}var gt=e(56412),St=e(72948),ut=e(29460),Dt=e(19191);const ie=()=>{const Pt=(0,u.wW)(Ne),{watch:Ae,getValues:Me}=(0,i.Gc)(),Ze=Ae("type"),tt=Ae("dataSourceName")??fe.GC,It=De(Me("labels")).length>0;return n.createElement(dt.z,{stepNo:Ze===b.$.cloudRecording?4:5,title:Ze===b.$.cloudRecording?"Labels":"Notifications",description:Ze===b.$.cloudRecording?"Add labels to help you better manage your recording rules":"Grafana handles the notifications for alerts by assigning labels to alerts. These labels connect alerts to contact points and silence alert instances that have matching labels."},n.createElement("div",{className:Pt.contentWrapper},n.createElement("div",{style:{display:"flex",flexDirection:"column"}},!It&&Ze!==b.$.cloudRecording&&n.createElement(St.Z,{className:Pt.card},n.createElement(St.Z.Heading,null,"Root route \u2013 default for all alerts"),n.createElement(St.Z.Description,null,"Without custom labels, your alert will be routed through the root route. To view and edit the root route, go to ",n.createElement(ut.r,{href:"/alerting/routes"},"notification policies")," or contact your admin in case you are using non-Grafana alert management.")),n.createElement(Dt.Z,{dataSourceName:tt}))))};function De(Pt){return Pt.filter(Ae=>Ae.key&&Ae.value)}const Ne=Pt=>({contentWrapper:t.css`
    display: flex;
    align-items: center;
  `,hideButton:t.css`
    color: ${Pt.colors.text.secondary};
    cursor: pointer;
    margin-bottom: ${Pt.spacing(1)};
  `,card:t.css`
    max-width: 500px;
  `,flowChart:t.css`
    margin-right: ${Pt.spacing(3)};
  `});var Je=e(20091),Xe=e(30979),Le=e(72142),Ue=e(79841),ve=e(61860),Se=e(39904),$e=e(9405),Ye=e(79662);const _e=[{label:"Yaml",value:"yaml"}],Et=({onClose:Pt})=>{const[Ae,Me]=(0,n.useState)("yaml"),{setValue:Ze}=(0,i.Gc)(),tt=(0,u.wW)(nt),It=$t=>{for(const Tt in $t)Ze(Tt,$t[Tt]);Pt()};return n.createElement(Xe.d,{title:"Inspect Alert rule",subtitle:n.createElement("div",{className:tt.subtitle},n.createElement(pt,{setActiveTab:Me,activeTab:Ae})),onClose:Pt},Ae==="yaml"&&n.createElement(je,{onSubmit:It}))},pt=({activeTab:Pt,setActiveTab:Ae})=>n.createElement(Le.J,null,_e.map((Me,Ze)=>n.createElement(Ue.O,{key:`${Me.value}-${Ze}`,label:Me.label,value:Me.value,onChangeTab:()=>Ae(Me.value),active:Pt===Me.value}))),je=({onSubmit:Pt})=>{const Ae=(0,u.wW)(Qe),{getValues:Me}=(0,i.Gc)(),Ze=(0,x.yh)(Me()),[tt,It]=(0,n.useState)((0,Je.$w)(Ze)),$t=()=>{const Tt=(0,Je.zD)(tt),qe=Me(),rn=we(Tt);Pt({...qe,...rn})};return n.createElement(n.Fragment,null,n.createElement("div",{className:Ae.applyButton},n.createElement(m.zx,{type:"button",onClick:$t},"Apply"),n.createElement(ve.u,{content:n.createElement(ht,null),theme:"info",placement:"left-start",interactive:!0},n.createElement(Se.J,{name:"exclamation-triangle",size:"xl"}))),n.createElement("div",{className:Ae.content},n.createElement(q.Z,{disableWidth:!0},({height:Tt})=>n.createElement($e.p,{width:"100%",height:Tt,language:"yaml",value:tt,onBlur:It,monacoOptions:{minimap:{enabled:!1}}}))))};function ht(){return n.createElement("div",null,"The YAML content in the editor only contains alert rule configuration ",n.createElement("br",null),"To configure Prometheus, you need to provide the rest of the"," ",n.createElement("a",{href:"https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/",target:"_blank",rel:"noreferrer"},"configuration file content."))}function we(Pt){return(0,Ye.cG)(Pt)?(0,x.WL)(Pt):(0,Ye.yF)(Pt)?(0,x.lN)(Pt):{}}const Qe=Pt=>({content:t.css`
    flex-grow: 1;
    height: 100%;
    padding-bottom: 16px;
    margin-bottom: ${Pt.spacing(2)};
  `,applyButton:t.css`
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    flex-grow: 0;
    margin-bottom: ${Pt.spacing(2)};
  `}),nt=()=>({subtitle:t.css`
    display: flex;
    align-items: center;
    justify-content: space-between;
  `});var it=e(68183),yt=e(26418),Lt=e(75e3);function Kt(){const Pt=(0,C._)(Me=>Me.dataSources);return Object.values(Pt).map(Me=>Me.result).filter(Me=>Boolean(Me?.rulerConfig)).map(Me=>(0,fe.c$)(Me.name)).filter(Me=>Boolean(Me))}var an=e(82897),un=e(59679),hn=e(47956),Wn=e(206),Bt=e(34807),Ft=e(61893),Vt=e(45608),At=e(46063);function Nt({fields:Pt}){const Ae=Pt.filter(Tt=>!["State","Info"].includes(Tt.name)),Me=Pt.findIndex(Tt=>Tt.name==="State"),Ze=Pt.findIndex(Tt=>Tt.name==="Info"),tt=Ae.map(Tt=>Pt.indexOf(Tt)),It=Pt[Me]?.values.length??0,$t=[];for(let Tt=0;Tt<It;Tt++){const qe=tt.map(Dn=>[Pt[Dn].name,Pt[Dn].values[Tt]]),rn=Pt[Me]?.values?.[Tt],dn=Pt[Ze]?.values?.[Tt];(0,At.Yb)(rn)&&$t.push({state:rn,info:dn,labels:Object.fromEntries(qe)})}return{instances:$t}}function Rt({preview:Pt}){const Ae=(0,u.wW)(wt),Me=Nt(Pt);return n.createElement("table",{className:Ae.table},n.createElement("caption",null,n.createElement("div",null,"Alerts preview"),n.createElement("span",null,"Preview based on the result of running the query for this moment.")),n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"State"),n.createElement("th",null,"Labels"),n.createElement("th",null,"Info"))),n.createElement("tbody",null,Me.instances.map(({state:Ze,info:tt,labels:It},$t)=>{const Tt=(0,Ft.P3)(It);return n.createElement("tr",{key:$t},n.createElement("td",null,n.createElement(Vt.l,{state:Ze})),n.createElement("td",null,n.createElement(Bt.P,{tags:Tt,className:Ae.tagList})),n.createElement("td",null,tt&&n.createElement(ve.u,{content:tt},n.createElement(Se.J,{name:"info-circle"}))))})))}const wt=Pt=>({table:t.css`
    width: 100%;
    margin: ${Pt.spacing(2,0)};

    caption {
      caption-side: top;
      color: ${Pt.colors.text.primary};

      & > span {
        font-size: ${Pt.typography.bodySmall.fontSize};
        color: ${Pt.colors.text.secondary};
      }
    }

    td,
    th {
      padding: ${Pt.spacing(1,1)};
    }

    td + td,
    th + th {
      padding-left: ${Pt.spacing(3)};
    }

    thead th {
      &:nth-child(1) {
        width: 80px;
      }

      &:nth-child(2) {
        width: auto;
      }

      &:nth-child(3) {
        width: 40px;
      }
    }

    td:nth-child(3) {
      text-align: center;
    }

    tbody tr:nth-child(2n + 1) {
      background-color: ${Pt.colors.background.secondary};
    }
  `,tagList:t.css`
    justify-content: flex-start;
  `}),_t=({value:Pt,onChange:Ae,dataSourceName:Me,showPreviewAlertsButton:Ze=!0})=>{const tt=(0,u.wW)(Qt),{mapToValue:It,mapToQuery:$t}=en(Me),Tt=$t({refId:"A",hide:!1},Pt),{error:qe,loading:rn,value:dn}=(0,un.Z)(()=>(0,L.F)().get(Me),[Me]),Dn=(0,n.useCallback)(da=>{Ae(It(da))},[Ae,It]),[wn,Gn]=Ie(),ra=async()=>{Gn()};if(rn||dn?.name!==Me)return null;const Sa=(0,L.F)().getInstanceSettings(Me);if(qe||!dn||!dn?.components?.QueryEditor||!Sa){const da=qe?.message||"Data source plugin does not export any Query Editor component";return n.createElement("div",null,"Could not load query editor due to: ",da)}const Da=wn?.data.state===K.Gu.Done,Ta=dn?.components?.QueryEditor,An=wn?.data?.series?.find(da=>da.name==="evaluation results"),Fn=An&&An.fields.some(da=>da.values.length>0);return n.createElement(n.Fragment,null,n.createElement(hn.n,{instanceSettings:Sa},n.createElement(Ta,{query:Tt,queries:[Tt],app:Wn.zj.CloudAlerting,onChange:Dn,onRunQuery:an.noop,datasource:dn})),Ze&&n.createElement("div",{className:tt.preview},n.createElement(m.zx,{type:"button",onClick:ra,disabled:wn?.data.state===K.Gu.Loading},"Preview alerts"),Da&&!Fn&&n.createElement(V.b,{title:"Alerts preview",severity:"info",className:tt.previewAlert},"There are no firing alerts for your query."),Fn&&n.createElement(Rt,{preview:An})))},Qt=Pt=>({preview:t.css`
    padding: ${Pt.spacing(2,0)};
    max-width: ${Pt.breakpoints.values.xl}px;
  `,previewAlert:t.css`
    margin: ${Pt.spacing(1,0)};
  `});function en(Pt){return(0,n.useMemo)(()=>{switch((0,L.F)().getInstanceSettings(Pt)?.type){case"loki":case"prometheus":return{mapToValue:Me=>Me.expr,mapToQuery:(Me,Ze)=>({...Me,expr:Ze})};default:throw new Error(`${Pt} is not supported as an expression editor`)}},[Pt])}var sn=e(97201);const Jt=({condition:Pt,onSetCondition:Ae,queries:Me,panelData:Ze,onUpdateRefId:tt,onRemoveExpression:It,onUpdateExpressionType:$t,onUpdateQueryExpression:Tt})=>{const qe=(0,n.useMemo)(()=>Me.reduce((rn,dn)=>(0,Lt.j)(dn.model)?rn.concat(dn.model):rn,[]),[Me]);return n.createElement(yt.Stack,{direction:"row",alignItems:"stretch"},qe.map(rn=>{const dn=Ze[rn.refId],Dn=Pt===rn.refId,wn=Dn&&dn?(0,be.Vp)(dn.series):void 0,Gn=Dn&&dn?(0,be.Yq)(dn.series):void 0;return n.createElement(sn.A2,{key:rn.refId,isAlertCondition:Dn,data:dn,error:wn,warning:Gn,queries:Me,query:rn,onSetCondition:Ae,onRemoveExpression:It,onUpdateRefId:tt,onUpdateExpressionType:$t,onChangeQuery:Tt})}))};var gn=e(36826),Cn=e(67254),In=e(91162),_n=e(19115),zn=e(19426),Hn=e(36584),sa=e(50362),Ma=e(78679);const la=43200,jn=({data:Pt,error:Ae,dsSettings:Me,index:Ze,onChangeDataSource:tt,onChangeQuery:It,onChangeTimeRange:$t,onRunQueries:Tt,onRemoveQuery:qe,onDuplicateQuery:rn,query:dn,queries:Dn,thresholds:wn,thresholdsType:Gn,onChangeThreshold:ra,condition:Sa,onSetCondition:Da,onChangeQueryOptions:Ta})=>{const An=(0,u.wW)(ga),[Fn,da]=(0,n.useState)(),va=Fn?.getDefaultQuery?Fn.getDefaultQuery(Wn.zj.UnifiedAlerting):{};function ea(){const za=(0,u.wW)(ga);return n.createElement("div",{className:za.dsTooltip},n.createElement(ve.u,{content:n.createElement(n.Fragment,null,"Not finding the data source you want? Some data sources are not supported for alerting. Click on the icon for more information.")},n.createElement(Se.J,{name:"info-circle",onClick:()=>window.open(" https://grafana.com/docs/grafana/latest/alerting/fundamentals/data-source-alerting/","_blank")})))}function xa({query:za,error:fs,index:Zs}){const Er={maxDataPoints:{maxDataPoints:za.model.maxDataPoints}.maxDataPoints};return n.createElement(yt.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement(ea,null),$t&&n.createElement(_n.x,{timeRange:za.relativeTimeRange??(0,re.Rr)(),onChange:Ha=>$t(Ha,Zs)}),n.createElement("div",{className:An.queryOptions},n.createElement(Aa,{options:Er,onChange:Ha=>Ta(Ha,Zs)})),n.createElement(sa._,{onSetCondition:()=>Da(za.refId),enabled:Sa===za.refId,error:fs}))}return n.createElement(yt.Stack,{direction:"column",gap:.5},n.createElement("div",{className:An.wrapper},n.createElement(Hn.x,{alerting:!0,dataSource:Me,onDataSourceLoaded:da,onChangeDataSource:za=>tt(za,Ze),id:dn.refId,index:Ze,key:dn.refId,data:Pt,query:{...va,...(0,an.cloneDeep)(dn.model)},onChange:za=>It(za,Ze),onRemoveQuery:qe,onAddQuery:()=>rn((0,an.cloneDeep)(dn)),onRunQuery:Tt,queries:Dn,renderHeaderExtras:()=>n.createElement(xa,{query:dn,index:Ze,error:Ae}),app:Wn.zj.UnifiedAlerting,hideDisableQuery:!0})),Pt.state!==K.Gu.NotStarted&&n.createElement(Ma.l,{data:Pt,thresholds:wn,thresholdsType:Gn,onThresholdsChange:ra?za=>ra(za,Ze):void 0}))},ia=({children:Pt})=>{const Ae=(0,u.wW)(ga);return n.createElement("div",{className:Ae.wrapper},Pt)};function Aa({options:Pt,onChange:Ae}){const Me=Pt.maxDataPoints??"",Ze=tt=>{const It=parseInt(tt.target.value,10),$t=isNaN(It)||It===0?void 0:It;$t!==Pt.maxDataPoints&&Ae({...Pt,maxDataPoints:$t})};return n.createElement(yt.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement(zn.c,{width:8,tooltip:n.createElement(n.Fragment,null,"The maximum data points per series. Used directly by some data sources and used in calculation of auto interval. With streaming data this value is used for the rolling buffer.")},"Max data points"),n.createElement(d.I,{type:"number",className:"width-6",placeholder:la.toLocaleString(),spellCheck:!1,onBlur:Ze,defaultValue:Me}))}const ga=Pt=>({wrapper:t.css`
    label: AlertingQueryWrapper;
    margin-bottom: ${Pt.spacing(1)};
    border: 1px solid ${Pt.colors.border.medium};
    border-radius: ${Pt.shape.borderRadius(1)};
  `,queryOptions:t.css`
    margin-bottom: -${Pt.spacing(2)};
  `,dsTooltip:t.css`
    display: flex;
    align-items: center;
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `});class ya extends n.PureComponent{constructor(Ae){super(Ae),this.onRemoveQuery=Me=>{const{queries:Ze,onQueriesChange:tt}=this.props;tt(Ze.filter(It=>It.refId!==Me.refId))},this.onChangeTimeRange=(Me,Ze)=>{const{queries:tt,onQueriesChange:It}=this.props;It(tt.map(($t,Tt)=>Tt!==Ze?$t:{...$t,relativeTimeRange:Me}))},this.onChangeQueryOptions=(Me,Ze)=>{const{queries:tt,onQueriesChange:It}=this.props;It(tt.map(($t,Tt)=>Tt!==Ze?$t:{...$t,model:{...$t.model,maxDataPoints:Me.maxDataPoints}}))},this.onChangeDataSource=(Me,Ze)=>{const{queries:tt,onQueriesChange:It}=this.props,$t=tt.map((Tt,qe)=>{if(qe!==Ze)return Tt;const rn=this.getDataSourceSettings(Tt);return Me.type===rn?.type?Wa(Tt,Me):rs(Tt,Me)});It($t)},this.onChangeQuery=(Me,Ze)=>{const{queries:tt,onQueriesChange:It}=this.props;It(tt.map(($t,Tt)=>Tt!==Ze?$t:{...$t,refId:Me.refId,queryType:$t.model.queryType??"",model:{...$t.model,...Me,datasource:Me.datasource}}))},this.onDragEnd=Me=>{const{queries:Ze,onQueriesChange:tt}=this.props;if(!Me||!Me.destination)return;const It=Me.source.index,$t=Me.destination.index;if(It===$t)return;const Tt=Array.from(Ze),[qe]=Tt.splice(It,1);Tt.splice($t,0,qe),tt(Tt)},this.getDataSourceSettings=Me=>(0,L.F)().getInstanceSettings(Me.datasourceUid)}render(){const{queries:Ae,expressions:Me}=this.props,Ze=(0,be.Fu)([...Ae,...Me]);return n.createElement(gn.Z5,{onDragEnd:this.onDragEnd},n.createElement(gn.bK,{droppableId:"alerting-queries",direction:"vertical"},tt=>n.createElement("div",{ref:tt.innerRef,...tt.droppableProps},Ae.map((It,$t)=>{const Tt=this.props.data?.[It.refId]??{series:[],state:K.Gu.NotStarted},qe=this.getDataSourceSettings(It),dn=this.props.condition===It.refId?(0,be.Vp)(Tt.series):void 0;return qe?n.createElement(jn,{index:$t,key:It.refId,dsSettings:qe,data:Tt,error:dn,query:It,onChangeQuery:this.onChangeQuery,onRemoveQuery:this.onRemoveQuery,queries:Ae,onChangeDataSource:this.onChangeDataSource,onDuplicateQuery:this.props.onDuplicateQuery,onChangeTimeRange:this.onChangeTimeRange,onChangeQueryOptions:this.onChangeQueryOptions,thresholds:Ze[It.refId]?.config,thresholdsType:Ze[It.refId]?.mode,onRunQueries:this.props.onRunQueries,condition:this.props.condition,onSetCondition:this.props.onSetCondition}):n.createElement(Xa,{key:`${It.refId}-${$t}`,index:$t,model:It.model,onUpdateDatasource:()=>{const Dn=(0,In.ak)().getInstanceSettings(null);Dn&&this.onChangeDataSource(Dn,$t)},onRemoveQuery:()=>{this.onRemoveQuery(It)}})}),tt.placeholder)))}}function Wa(Pt,Ae){return{...Pt,model:{...(0,an.omit)(Pt.model,"datasource"),datasource:{type:Ae.type,uid:Ae.uid}},datasourceUid:Ae.uid}}function rs(Pt,Ae){return{refId:Pt.refId,relativeTimeRange:Pt.relativeTimeRange,queryType:"",datasourceUid:Ae.uid,model:{refId:Pt.refId,hide:!1,datasource:{type:Ae.type,uid:Ae.uid}}}}const Xa=({index:Pt,onUpdateDatasource:Ae,onRemoveQuery:Me,model:Ze})=>{const tt=Ze.refId,[It,$t]=(0,n.useState)(!1),Tt=()=>{$t(rn=>!rn)},qe=()=>{Ae()};return n.createElement(ia,null,n.createElement(Cn.t,{title:tt,draggable:!0,index:Pt,id:tt,isOpen:!0},n.createElement(St.Z,null,n.createElement(St.Z.Heading,null,"This datasource has been removed"),n.createElement(St.Z.Description,null,"The datasource for this query was not found, it was either removed or is not installed correctly."),n.createElement(St.Z.Figure,null,n.createElement(Se.J,{name:"question-circle"})),n.createElement(St.Z.Actions,null,n.createElement(m.zx,{key:"update",variant:"secondary",onClick:qe},"Update datasource"),n.createElement(m.zx,{key:"remove",variant:"destructive",onClick:Me},"Remove query")),n.createElement(St.Z.SecondaryActions,null,n.createElement(m.zx,{key:"details",onClick:Tt,icon:It?"angle-up":"angle-down",fill:"text",size:"sm"},"Show details"))),It&&n.createElement("div",null,n.createElement("pre",null,n.createElement("code",null,JSON.stringify(Ze,null,2))))))},wa=({queries:Pt,expressions:Ae,panelData:Me,onRunQueries:Ze,onChangeQueries:tt,onDuplicateQuery:It,condition:$t,onSetCondition:Tt})=>{const qe=(0,u.wW)(Pa);return n.createElement("div",{className:qe.container},n.createElement(ya,{data:Me,queries:Pt,expressions:Ae,onRunQueries:Ze,onQueriesChange:tt,onDuplicateQuery:It,condition:$t,onSetCondition:Tt}))},Pa=Pt=>({container:t.css`
    background-color: ${Pt.colors.background.primary};
    height: 100%;
    max-width: ${Pt.breakpoints.values.xxl}px;
  `});var os=e(85596),Ca=e(19349);const ta=({queries:Pt,onChangeQuery:Ae,runQueries:Me,panelData:Ze,dataSourceName:tt})=>{const[It,$t]=(0,n.useState)({series:[],state:os.Gu.NotStarted,timeRange:(0,Ca.$t)().timeRange()}),Tt=(0,u.wW)(Qa);(0,n.useEffect)(()=>{$t(Ze?.[Pt[0]?.refId])},[Ze,Pt]);const{error:qe,loading:rn,value:dn}=(0,un.Z)(()=>(0,L.F)().get(tt),[tt]),Dn=ra=>{const Sa=Pt[0],Da=(0,L.F)().getInstanceSettings(tt)?.uid;if(!(0,x.tO)(ra)||!Da)return;const Ta=ra.expr,An={...Sa,refId:ra.refId,queryType:ra.queryType??"",datasourceUid:Da,expr:Ta,model:{refId:ra.refId,expr:Ta,editorMode:"code"}};Ae([An])};if(rn||dn?.name!==tt)return null;const wn=(0,L.F)().getInstanceSettings(tt);if(qe||!dn||!dn?.components?.QueryEditor||!wn){const ra=qe?.message||"Data source plugin does not export any Query Editor component";return n.createElement("div",null,"Could not load query editor due to: ",ra)}const Gn=dn.components.QueryEditor;return n.createElement(n.Fragment,null,Pt.length&&n.createElement(Gn,{query:Pt[0],queries:Pt,app:Wn.zj.UnifiedAlerting,onChange:Dn,onRunQuery:Me,datasource:dn}),It&&n.createElement("div",{className:Tt.vizWrapper},n.createElement(Ma.l,{data:It})))},Qa=Pt=>({vizWrapper:t.css`
    margin: ${Pt.spacing(1,0)};
  `});var ua=e(82002),vs=e(53117),qa=e(3153);function Fa({value:Pt,...Ae}){const Me=Kt(),{loading:Ze=!0}=(0,un.Z)(()=>(0,qa.WI)((0,D.dV)()),[qa.WI]),tt=(0,n.useCallback)(It=>!!Me.find(({id:$t})=>$t===It.id),[Me]);return n.createElement(vs.q,{disabled:Ze,isLoading:Ze,noDefault:!0,alerting:!0,filter:tt,current:Pt,...Ae})}const ns=Pt=>{const{name:Ae,description:Me,image:Ze,selected:tt=!1,value:It,onClick:$t,disabled:Tt=!1}=Pt,qe=(0,u.wW)(ca),rn=(0,t.cx)({[qe.wrapper]:!0,[qe.disabled]:Tt});return n.createElement(St.Z,{className:rn,isSelected:tt,onClick:()=>$t(It),disabled:Tt},n.createElement(St.Z.Figure,null,n.createElement("img",{src:Ze,alt:""})),n.createElement(St.Z.Heading,null,Ae),n.createElement(St.Z.Description,null,Me))},ca=Pt=>({wrapper:t.css`
    width: 380px;
    cursor: pointer;
    user-select: none;
  `,disabled:t.css`
    opacity: 0.5;
  `}),as=({selected:Pt=!1,disabled:Ae,onClick:Me})=>n.createElement(ns,{name:"Grafana managed alert",description:n.createElement("span",null,"Supports multiple data sources of any kind.",n.createElement("br",null),"Transform data with expressions."),image:"public/img/grafana_icon.svg",selected:Pt,disabled:Ae,value:b.$.grafana,onClick:Me}),Os=({children:Pt,visible:Ae=!1})=>Ae?n.createElement(ve.u,{content:"You do not appear to have any compatible datasources.",placement:"top"},n.createElement("div",null,Pt)):n.createElement(n.Fragment,null,Pt),bs=({selected:Pt=!1,disabled:Ae=!1,onClick:Me})=>n.createElement(Os,{visible:Ae},n.createElement(ns,{name:"Mimir or Loki alert",description:n.createElement("span",null,"Use a Mimir, Loki or Cortex datasource.",n.createElement("br",null),"Expressions are not supported."),image:"public/img/alerting/mimir_logo.svg",selected:Pt,disabled:Ae,value:b.$.cloudAlerting,onClick:Me})),ir=({selected:Pt=!1,disabled:Ae=!1,onClick:Me})=>n.createElement(Os,{visible:Ae},n.createElement(ns,{name:"Mimir or Loki recording rule",description:n.createElement("span",null,"Precompute expressions.",n.createElement("br",null),"Should be combined with an alert rule."),image:"public/img/alerting/mimir_logo_recording.svg",selected:Pt,disabled:Ae,value:b.$.cloudRecording,onClick:Me})),ur=({selected:Pt,onChange:Ae,enabledTypes:Me})=>{const Ze=Kt(),tt=!(0,an.isEmpty)(Ze);(0,n.useEffect)(()=>{(0,qa.WI)((0,D.dV)())},[]);const It=(0,u.wW)(mr);return n.createElement(n.Fragment,null,n.createElement(yt.Stack,{direction:"row",gap:2},Me.includes(b.$.grafana)&&n.createElement(as,{selected:Pt===b.$.grafana,onClick:Ae}),Me.includes(b.$.cloudAlerting)&&n.createElement(bs,{selected:Pt===b.$.cloudAlerting,onClick:Ae,disabled:!tt}),Me.includes(b.$.cloudRecording)&&n.createElement(ir,{selected:Pt===b.$.cloudRecording,onClick:Ae,disabled:!tt})),Me.includes(b.$.grafana)&&n.createElement("small",{className:It.meta},"Select \u201CGrafana managed\u201D unless you have a Mimir, Loki or Cortex data source with the Ruler API enabled."))},mr=Pt=>({meta:t.css`
    color: ${Pt.colors.text.disabled};
  `}),er=({editingExistingRule:Pt})=>{const{enabledRuleTypes:Ae,defaultRuleType:Me}=ds(),{control:Ze,formState:{errors:tt},getValues:It,setValue:$t,watch:Tt}=(0,i.Gc)(),qe=(0,u.wW)(ws),rn=Tt("type");return n.createElement(n.Fragment,null,!Pt&&n.createElement(o.g,{error:tt.type?.message,invalid:!!tt.type?.message,"data-testid":"alert-type-picker"},n.createElement(S.g,{render:({field:{onChange:dn}})=>n.createElement(ur,{"aria-label":"Rule type",selected:It("type")??Me,onChange:dn,enabledTypes:Ae}),name:"type",control:Ze,rules:{required:{value:!0,message:"Please select alert type"}}})),n.createElement("div",{className:qe.flexRow},(rn===b.$.cloudAlerting||rn===b.$.cloudRecording)&&n.createElement(o.g,{className:qe.formInput,label:"Select data source",error:tt.dataSourceName?.message,invalid:!!tt.dataSourceName?.message,"data-testid":"datasource-picker"},n.createElement(S.g,{render:({field:{onChange:dn,ref:Dn,...wn}})=>n.createElement(Fa,{...wn,onChange:Gn=>{$t("location",void 0),$t("expression",""),dn(Gn?.name??null)}}),name:"dataSourceName",control:Ze,rules:{required:{value:!0,message:"Please select a data source"}}}))))};function ds(){const Pt=ua.Vt.hasAccess(P.AccessControlAction.AlertingRuleCreate,ua.Vt.hasEditPermissionInFolders),Ae=ua.Vt.hasAccess(P.AccessControlAction.AlertingRuleExternalWrite,ua.Vt.isEditor),Me=Pt?b.$.grafana:b.$.cloudAlerting,Ze=[];return Pt&&Ze.push(b.$.grafana),Ae&&Ze.push(b.$.cloudAlerting,b.$.cloudRecording),{enabledRuleTypes:Ze,defaultRuleType:Me}}const ws=Pt=>({formInput:t.css`
    width: 330px;
    & + & {
      margin-left: ${Pt.spacing(3)};
    }
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-end;
  `});var us=e(62992),Ws=e(99822),Es=e(97573);const Fs=Pt=>{try{return JSON.stringify(Pt),!1}catch{return!0}},Gs=(Pt,Ae)=>{if(Fs(Pt))return null;if(Ae.datasourceUid!==Es.Yq)return Ae;{const Me=Pt.find(Ze=>Ze.refId===Ae.model.expression);return Me?Gs(Pt,Me):null}};var fr=e(47471),lr=e(51935);const tr=(Pt,Ae)=>{const Me=Pt.find(tt=>tt.refId===Ae);return Me&&Gs(Pt,Me)},Ys={queries:[]},js=(0,us.PH)("duplicateQuery"),gr=(0,us.PH)("addNewDataQuery"),is=(0,us.PH)("setDataQueries"),pr=(0,us.PH)("addNewExpression"),hr=(0,us.PH)("removeExpression"),vr=(0,us.PH)("updateExpression"),nr=(0,us.PH)("updateExpressionRefId"),cr=(0,us.PH)("rewireExpressions"),Rs=(0,us.PH)("updateExpressionType"),ms=(0,us.PH)("updateExpressionTimeRange"),Qs=(0,us.PH)("updateMaxDataPoints"),ys=(0,us.PH)("setRecordingRulesQueries"),jt=(0,us.Lq)(Ys,Pt=>{Pt.addCase(js,(Ae,{payload:Me})=>{Ae.queries=He(Ae.queries,Me)}).addCase(gr,Ae=>{const Me=(0,fe.P)();Me&&(Ae.queries=He(Ae.queries,{datasourceUid:Me.uid,model:{refId:"",datasource:{type:Me.type,uid:Me.uid}}}))}).addCase(is,(Ae,{payload:Me})=>{const Ze=Ae.queries.filter(tt=>(0,Lt.j)(tt.model));Ae.queries=[...Me,...Ze]}).addCase(ys,(Ae,{payload:Me})=>{const Ze=Me.recordingRuleQueries[0],tt={...Ze,expr:Me.expression,model:{expr:Me.expression,refId:Ze.model.refId}};Ae.queries=[tt]}).addCase(Qs,(Ae,Me)=>{Ae.queries=Ae.queries.map(Ze=>Ze.refId===Me.payload.refId?{...Ze,model:{...Ze.model,maxDataPoints:Me.payload.maxDataPoints}}:Ze)}),Pt.addCase(pr,Ae=>{Ae.queries=He(Ae.queries,{datasourceUid:Es.Yq,model:fr.mV.newQuery({type:Es.Us.math,conditions:[{...lr.R,query:{params:[]}}],expression:""})})}).addCase(hr,(Ae,{payload:Me})=>{Ae.queries=Ae.queries.filter(Ze=>Ze.refId!==Me)}).addCase(vr,(Ae,{payload:Me})=>{Ae.queries=Ae.queries.map(Ze=>{const tt=tr(Ae.queries,Me.expression),It=tt?tt.relativeTimeRange:(0,re.Rr)();return Ze.refId===Me.refId&&(Ze.model=Me,Me.type===Es.Us.resample&&(Ze.relativeTimeRange=It)),Ze})}).addCase(ms,Ae=>{const Me=Ae.queries.map(Ze=>{if(Ze.datasourceUid===Es.Yq){const tt=tr(Ae.queries,Ze.model.expression),It=tt?tt.relativeTimeRange:(0,re.Rr)();Ze.relativeTimeRange=It}return Ze});Ae.queries=Me}).addCase(nr,(Ae,{payload:Me})=>{const{newRefId:Ze,oldRefId:tt}=Me;if((0,be.Dr)(Ae.queries,Ze))return;const $t=(0,be.Ry)(Ae.queries,tt,Ze);Ae.queries=$t.map(Tt=>Tt.refId===tt?{...Tt,refId:Ze,model:{...Tt.model,refId:Ze}}:Tt)}).addCase(cr,(Ae,{payload:Me})=>{Ae.queries=(0,be.Ry)(Ae.queries,Me.oldRefId,Me.newRefId)}).addCase(Rs,(Ae,Me)=>{Ae.queries=Ae.queries.map(Ze=>Ze.refId===Me.payload.refId?{...Ze,model:{...fr.mV.newQuery({type:Me.payload.type,conditions:[{...lr.R,query:{params:[]}}],expression:""}),refId:Me.payload.refId}}:Ze)})}),He=(Pt,Ae)=>{const Me=(0,Ws.Hs)(Pt),Ze={...Ae,refId:Me,queryType:"",model:{...Ae.model,hide:!1,refId:Me},relativeTimeRange:Ae.relativeTimeRange??mt(Ae.model)};return[...Pt,Ze]},mt=Pt=>{if(!(0,Lt.j)(Pt))return(0,re.Rr)()};var bt=e(81001);function Ht(){const[Pt,Ae]=(0,n.useState)({}),Me=(0,n.useRef)(new bt.v);(0,n.useEffect)(()=>{const Tt=Me.current;return Tt.get().subscribe(qe=>{Ae(qe)}),()=>{Tt.destroy()}},[]);const Ze=(0,n.useCallback)(()=>{Ae({})},[]),tt=(0,n.useCallback)(()=>{Me.current.cancel()},[]),It=(0,n.useCallback)(Tt=>{Me.current.run(Tt)},[]),$t=(0,n.useMemo)(()=>Object.values(Pt).some(Tt=>Tt.state===K.Gu.Loading),[Pt]);return{queryPreviewData:Pt,runQueries:It,cancelQueries:tt,isPreviewLoading:$t,clearPreviewData:Ze}}const nn=({editingExistingRule:Pt,onDataChange:Ae})=>{const{setValue:Me,getValues:Ze,watch:tt,formState:{errors:It},control:$t}=(0,i.Gc)(),{queryPreviewData:Tt,runQueries:qe,cancelQueries:rn,isPreviewLoading:dn,clearPreviewData:Dn}=Ht(),wn={queries:Ze("queries")},[{queries:Gn},ra]=(0,n.useReducer)(jt,wn),[Sa,Da,Ta]=tt(["type","condition","dataSourceName"]),An=Sa===b.$.grafana,Fn=Sa===b.$.cloudRecording,da=Sa===b.$.cloudAlerting,va=Kt(),ea=(0,n.useCallback)(()=>{qe(Ze("queries"))},[qe,Ze]);(0,n.useEffect)(()=>{Me("queries",Gn,{shouldValidate:!1})},[Gn,qe,Me]);const xa=(0,fe.P)()===void 0,za=(0,n.useMemo)(()=>Gn.filter(na=>!(0,Lt.j)(na.model)),[Gn]),fs=(0,n.useMemo)(()=>Gn.filter(na=>(0,Lt.j)(na.model)),[Gn]),Zs=Gn.length===0;(0,n.useEffect)(()=>{const na=Ze("condition");if(!na||b.$.cloudRecording)return;const Ua=(0,be.Vp)(Tt[na]?.series||[]);Ae(Ua?.message||"")},[Tt,Ze,Ae]);const $s=(0,n.useCallback)(na=>{na&&(ea(),Me("condition",na))},[ea,Me]),Er=(0,n.useCallback)((na,Ua)=>{(0,be.Dr)(Gn,Ua)||(ra(nr({oldRefId:na,newRefId:Ua})),Da===na&&$s(Ua))},[Da,Gn,$s]),Ha=(0,n.useCallback)(na=>{Me("queries",na,{shouldValidate:!1}),ra(is(na)),ra(ms()),na.forEach((Ua,Ks)=>{const yr=Gn[Ks].refId,Ls=Ua.refId;yr!==Ls&&ra(cr({oldRefId:yr,newRefId:Ls}))})},[Gn,Me]),Fr=(0,n.useCallback)(na=>{const Ua=na[0],Ks=(0,L.F)().getInstanceSettings(Ua.datasourceUid);if(!Ks)throw new Error("The Data source has not been defined.");if(!(0,x.tO)(Ua.model))return;const yr=Ua.model.expr;Me("queries",na,{shouldValidate:!1}),Me("dataSourceName",Ks.name),Me("expression",yr),ra(ys({recordingRuleQueries:na,expression:yr})),ea()},[ea,Me]),ss=va[0];(0,n.useEffect)(()=>{if(Dn(),Sa===b.$.cloudRecording){const na=Ze("expression"),Ks={refId:"A",datasourceUid:Pt&&(0,L.F)().getInstanceSettings(Ta)?.uid||ss.uid,queryType:"",relativeTimeRange:(0,re.Rr)(),expr:na,model:{refId:"A",hide:!1,expr:na}};ra(ys({recordingRuleQueries:[Ks],expression:na}))}},[Sa,ss,Pt,Ze,Ta,Dn]);const As=(0,n.useCallback)(na=>{ra(js(na))},[]);return(0,n.useEffect)(()=>{if(!(0,be.Dr)(Gn,Da)){const na=Gn.at(-1)?.refId??null;$s(na)}},[Da,Gn,$s]),n.createElement(dt.z,{stepNo:2,title:"Set a query and alert condition"},n.createElement(er,{editingExistingRule:Pt}),Fn&&Ta&&n.createElement(o.g,{error:It.expression?.message,invalid:!!It.expression?.message},n.createElement(ta,{dataSourceName:Ta,queries:Gn,runQueries:ea,onChangeQuery:Fr,panelData:Tt})),da&&Ta&&n.createElement(o.g,{error:It.expression?.message,invalid:!!It.expression?.message},n.createElement(S.g,{name:"expression",render:({field:{ref:na,...Ua}})=>n.createElement(_t,{...Ua,dataSourceName:Ta,showPreviewAlertsButton:!Fn}),control:$t,rules:{required:{value:!0,message:"A valid expression is required"}}})),An&&n.createElement(yt.Stack,{direction:"column"},n.createElement(wa,{queries:za,expressions:fs,onRunQueries:ea,onChangeQueries:Ha,onDuplicateQuery:As,panelData:Tt,condition:Da,onSetCondition:$s}),n.createElement(Jt,{queries:Gn,panelData:Tt,condition:Da,onSetCondition:$s,onRemoveExpression:na=>{ra(hr(na))},onUpdateRefId:Er,onUpdateExpressionType:(na,Ua)=>{ra(Rs({refId:na,type:Ua}))},onUpdateQueryExpression:na=>{ra(vr(na))}}),n.createElement(yt.Stack,{direction:"row"},n.createElement(ve.u,{content:"You appear to have no compatible data sources",show:xa},n.createElement(m.zx,{type:"button",icon:"plus",onClick:()=>{ra(gr())},variant:"secondary","aria-label":it.wl.components.QueryTab.addQuery,disabled:xa},"Add query")),l.v.expressionsEnabled&&n.createElement(m.zx,{type:"button",icon:"plus",onClick:()=>{ra(pr())},variant:"secondary"},"Add expression"),dn&&n.createElement(m.zx,{icon:"fa fa-spinner",type:"button",variant:"destructive",onClick:rn},"Cancel"),!dn&&n.createElement(m.zx,{icon:"sync",type:"button",onClick:ea,disabled:Zs},"Preview")),Zs&&n.createElement(V.b,{title:"No queries or expressions have been configured",severity:"warning"},"Create at least one query or expression to be alerted on")))},qt={message:"Recording rule name must be valid metric name. It may only contain letters, numbers, and colons. It may not contain whitespace.",value:/^[a-zA-Z_:][a-zA-Z0-9_:]*$/},fn=()=>{const Pt=(0,u.wW)(qn),{register:Ae,watch:Me,formState:{errors:Ze}}=(0,i.Gc)(),tt=Me("type");return n.createElement(dt.z,{stepNo:1,title:"Set an alert rule name"},n.createElement(o.g,{className:Pt.formInput,label:"Rule name",description:"Name for the alert rule.",error:Ze?.name?.message,invalid:!!Ze.name?.message},n.createElement(d.I,{id:"name",...Ae("name",{required:{value:!0,message:"Must enter an alert name"},pattern:tt===b.$.cloudRecording?qt:void 0}),placeholder:"Give your alert rule a name."})))},bn="1m",En=({existing:Pt,prefill:Ae})=>{const Me=(0,u.wW)(qn),Ze=(0,P.useDispatch)(),tt=(0,y.iG)(),[It]=(0,h.K)(),[$t,Tt]=(0,n.useState)(!1),[qe,rn]=(0,n.useState)(Pt?.group.interval??bn),dn=It.returnTo??"/alerting/list",[Dn,wn]=(0,n.useState)(!1),Gn=(0,n.useMemo)(()=>Pt?(0,x.DQ)(Pt):Ae?{...(0,x.uZ)(),...Ae}:{...(0,x.uZ)(),queries:(0,x.s0)(),condition:"C",...It.defaults?JSON.parse(It.defaults):{},type:b.$.grafana,evaluateEvery:qe},[Pt,Ae,It,qe]),ra=(0,i.cI)({mode:"onSubmit",defaultValues:Gn,shouldFocusError:!0}),{handleSubmit:Sa,watch:Da}=ra,Ta=Da("type"),An=Da("dataSourceName"),Fn=Boolean(Ta&&(Ta===b.$.grafana||!!An)),da=(0,C._)(Ha=>Ha.ruleForm.saveRule)||M.oq;(0,v.x)(Ha=>Ha.unifiedAlerting.ruleForm.saveRule=M.oq);const[va,ea]=(0,n.useState)(""),xa=(Ha="")=>{ea(Ha)},za=(Ha,Fr)=>{if(va!==""){tt.error(va);return}Ze((0,D.wy)({values:{...Gn,...Ha,annotations:Ha.annotations?.map(({key:ss,value:As})=>({key:ss.trim(),value:As.trim()})).filter(({key:ss,value:As})=>!!ss&&!!As)??[],labels:Ha.labels?.map(({key:ss,value:As})=>({key:ss.trim(),value:As.trim()})).filter(({key:ss})=>!!ss)??[]},existing:Pt,redirectOnSave:Fr?dn:void 0,initialAlertRuleName:Gn.name,evaluateEvery:qe}))},fs=()=>{if(Pt){const Ha=R.Zk(Pt.ruleSourceName,Pt.namespace,Pt.group.name,Pt.rule);Ze((0,D.hS)(Ha,{navigateTo:"/alerting/list"}))}},Zs=Ha=>{Pt||(0,a.Z0)({grafana_version:l.v.buildInfo.version,org_id:E.Vt.user.orgId,user_id:E.Vt.user.id,error:Object.keys(Ha).toString()}),tt.error("There are errors in the form. Please correct them and try again!")},$s=()=>{(0,f.PN)(a.z7.cancelSavingAlertRule),Pt||(0,a.Hc)({grafana_version:l.v.buildInfo.version,org_id:E.Vt.user.orgId,user_id:E.Vt.user.id})},Er=Da("evaluateEvery");return(0,n.useEffect)(()=>rn(Er),[Er]),n.createElement(i.RV,{...ra},n.createElement("form",{onSubmit:Ha=>Ha.preventDefault(),className:Me.form},n.createElement(r.Lh,{height:"auto",justify:"flex-end"},n.createElement(m.zx,{variant:"primary",type:"button",onClick:Sa(Ha=>za(Ha,!1),Zs),disabled:da.loading},da.loading&&n.createElement(c.$,{className:Me.buttonSpinner,inline:!0}),"Save rule"),n.createElement(m.zx,{variant:"primary",type:"button",onClick:Sa(Ha=>za(Ha,!0),Zs),disabled:da.loading},da.loading&&n.createElement(c.$,{className:Me.buttonSpinner,inline:!0}),"Save rule and exit"),n.createElement(s.Link,{to:dn},n.createElement(m.zx,{variant:"secondary",disabled:da.loading,type:"button",onClick:$s},"Cancel")),Pt?n.createElement(m.zx,{variant:"destructive",type:"button",onClick:()=>wn(!0)},"Delete"):null,xn(Da)&&n.createElement(m.zx,{variant:"secondary",type:"button",onClick:()=>Tt(!0),disabled:da.loading},"Edit YAML")),n.createElement("div",{className:Me.contentOuter},n.createElement(p.$,{autoHeightMin:"100%",hideHorizontalTrack:!0},n.createElement("div",{className:Me.contentInner},n.createElement(fn,null),n.createElement(nn,{editingExistingRule:!!Pt,onDataChange:xa}),Fn&&n.createElement(n.Fragment,null,Ta===b.$.grafana?n.createElement(gt.wO,{initialFolder:Gn.folder,evaluateEvery:qe,setEvaluateEvery:rn,existing:Boolean(Pt)}):n.createElement(Re,null),n.createElement(ft,null),n.createElement(ie,null)))))),Dn?n.createElement(g.s,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:fs,onDismiss:()=>wn(!1)}):null,$t?n.createElement(Et,{onClose:()=>Tt(!1)}):null)},xn=Pt=>{const[Ae,Me]=Pt(["type","dataSourceName"]);return(Ae===b.$.cloudAlerting||Ae===b.$.cloudRecording)&&Me!==""},qn=Pt=>({buttonSpinner:t.css`
      margin-right: ${Pt.spacing(1)};
    `,form:t.css`
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    `,contentInner:t.css`
      flex: 1;
      padding: ${Pt.spacing(2)};
    `,contentOuter:t.css`
      background: ${Pt.colors.background.primary};
      border: 1px solid ${Pt.colors.border.weak};
      border-radius: ${Pt.shape.borderRadius()};
      overflow: hidden;
      flex: 1;
      margin-top: ${Pt.spacing(1)};
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;
    `,formInput:t.css`
      width: 275px;

      & + & {
        margin-left: ${Pt.spacing(3)};
      }
    `})},16808:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>L});var t=e(9892),n=e(39493),i=e(66111),s=e(66698),l=e(95831),f=e(26418),u=e(72648),o=e(64353),d=e(46967),r=e(97379),m=e(24799),c=e(63619),p=e(31403),g=e(37190),y=e(8581);const E=({value:V,onChange:H,options:j,className:A,placeholder:_,width:k,custom:Q,onCustomChange:re,disabled:Z=!1,addLabel:oe="+ Add new","aria-label":G,getOptionLabel:le})=>{const[fe,ae]=(0,i.useState)(Q);(0,i.useEffect)(()=>{ae(Q)},[Q]);const de=(0,i.useMemo)(()=>[...j,{value:"__add__",label:oe}],[j,oe]),ee=(0,i.useRef)(null);return(0,i.useEffect)(()=>{ee.current&&fe&&ee.current.focus()},[fe]),fe?i.createElement(d.I,{"aria-label":G,width:k,autoFocus:!Q,value:V||"",placeholder:_,className:A,disabled:Z,ref:ee,onChange:me=>H(me.currentTarget.value)}):i.createElement(y.Ph,{"aria-label":G,width:k,options:de,value:V,className:A,placeholder:_,getOptionLabel:le,disabled:Z,onChange:me=>{const q=me?.value;q==="__add__"?(ae(!0),re&&re(!0),H("")):H(q)}})},v=({value:V,existingKeys:H,"aria-label":j,...A})=>{const _=(0,i.useMemo)(()=>Object.values(g.q6).filter(k=>!H.includes(k)).map(k=>({value:k,label:g.vY[k]})),[H]);return i.createElement(E,{"aria-label":j,value:V,options:_,custom:!!V&&!Object.values(g.q6).includes(V),...A})};var h=e(93006),P=e(89050),a=e(32436),C=e(39904),D=e(61860),b=e(35029),M=e(45253),x=e(14747),R=e(61744),S=e(29427);const O=S.C.injectEndpoints({endpoints:V=>({search:V.query({query:({query:H})=>{const j=new URLSearchParams({type:"dash-db",limit:"1000",page:"1",sort:"name_sort"});return H&&j.set("query",H),{url:`/api/search?${j.toString()}`}}}),dashboard:V.query({query:({uid:H})=>({url:`/api/dashboards/uid/${H}`})})})});function U(V,H){return V.title&&H.title?V.title.localeCompare(H.title):V.title&&!H.title?1:!V.title&&H.title?-1:0}const I=({dashboardUid:V,panelId:H,isOpen:j,onChange:A,onDismiss:_})=>{const k=(0,u.wW)(F),[Q,re]=(0,i.useState)(V),[Z,oe]=(0,i.useState)(H),[G,le]=(0,i.useState)(""),[fe,ae]=(0,i.useState)(""),[de,ee]=(0,i.useState)(""),{useSearchQuery:me,useDashboardQuery:q}=O,{currentData:ne=[],isFetching:se}=me({query:fe}),{currentData:he,isFetching:ue}=q({uid:Q??""},{skip:!Q}),Te=(0,i.useCallback)(ye=>{re(ye),oe(void 0)},[]),Ve=he?.dashboard?.panels?.filter(ye=>typeof ye.id=="number"&&typeof ye.type=="string")?.filter(ye=>ye.title?.toLowerCase().includes(de.toLowerCase())).sort(U)??[],ct=he?.dashboard?.panels?.find(ye=>ye.id.toString()===Z),Ie=(0,i.useMemo)(()=>ne.map(ye=>ye.uid).indexOf(Q??""),[ne,Q]),Ke=V&&V===Q,Ge=Ie>=0,at=(0,i.useCallback)(ye=>{const Pe=Ie>=0;Ke&&Pe&&ye?.scrollToItem(Ie,"smart")},[Ke,Ie]);(0,h.Z)(()=>{ae(G)},500,[G]);const dt=({index:ye,style:Pe})=>{const be=ne[ye],Be=Q===be.uid;return i.createElement("button",{type:"button",title:be.title,style:Pe,className:(0,t.cx)(k.rowButton,{[k.rowOdd]:ye%2===1,[k.rowSelected]:Be}),onClick:()=>Te(be.uid)},i.createElement("div",{className:(0,t.cx)(k.dashboardTitle,k.rowButtonTitle)},be.title),i.createElement("div",{className:k.dashboardFolder},i.createElement(C.J,{name:"folder"})," ",be.folderTitle??"General"))},Re=({index:ye,style:Pe})=>{const be=Ve[ye],Be=be.title||"<No title>",ke=Z===be.id.toString(),ot=be.type==="graph"||be.type==="timeseries";return i.createElement("button",{type:"button",style:Pe,className:(0,t.cx)(k.rowButton,k.panelButton,{[k.rowOdd]:ye%2===1,[k.rowSelected]:ke}),onClick:()=>oe(be.id.toString())},i.createElement("div",{className:k.rowButtonTitle,title:Be},Be),!ot&&i.createElement(D.u,{content:"Alert tab will be disabled for this panel. It is only supported on graph and timeseries panels"},i.createElement(C.J,{name:"exclamation-triangle",className:k.warnIcon,"data-testid":"warning-icon"})))};return i.createElement(b.u,{title:"Select dashboard and panel",closeOnEscape:!0,isOpen:j,onDismiss:_,className:k.modal,contentClassName:k.modalContent},!Ge&&V&&i.createElement(M.b,{title:"Current selection",severity:"info",topSpacing:0,bottomSpacing:1,className:k.modalAlert},i.createElement("div",null,"Dashboard: ",he?.dashboard.title," (",he?.dashboard.uid,") in folder"," ",he?.meta.folderTitle??"General"),Boolean(ct)&&i.createElement("div",null,"Panel: ",ct.title," (",ct.id,")")),i.createElement("div",{className:k.container},i.createElement(x.H,{value:G,onChange:le,title:"Search dashboard",placeholder:"Search dashboard",autoFocus:!0}),i.createElement(x.H,{value:de,onChange:ee,title:"Search panel",placeholder:"Search panel"}),i.createElement("div",{className:k.column},se&&i.createElement(R.u,{text:"Loading dashboards...",className:k.loadingPlaceholder}),!se&&i.createElement(P.Z,null,({height:ye,width:Pe})=>i.createElement(a.t7,{ref:at,itemSize:50,height:ye,width:Pe,itemCount:ne.length},dt))),i.createElement("div",{className:k.column},!Q&&!ue&&i.createElement("div",{className:k.selectDashboardPlaceholder},i.createElement("div",null,"Select a dashboard to get a list of available panels")),ue&&i.createElement(R.u,{text:"Loading dashboard...",className:k.loadingPlaceholder}),Q&&!ue&&i.createElement(P.Z,null,({width:ye,height:Pe})=>i.createElement(a.t7,{itemSize:32,height:Pe,width:ye,itemCount:Ve.length},Re)))),i.createElement(b.u.ButtonRow,null,i.createElement(p.zx,{type:"button",variant:"primary",disabled:!(Q&&Z),onClick:()=>{Q&&Z&&A(Q,Z)}},"Confirm"),i.createElement(p.zx,{type:"button",variant:"secondary",onClick:_},"Cancel")))},F=V=>{const H=(0,p.gN)(V);return{container:t.css`
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: min-content auto;
      gap: ${V.spacing(2)};
      flex: 1;
    `,column:t.css`
      flex: 1 1 auto;
    `,dashboardTitle:t.css`
      height: 22px;
      font-weight: ${V.typography.fontWeightBold};
    `,dashboardFolder:t.css`
      height: 20px;
      font-size: ${V.typography.bodySmall.fontSize};
      color: ${V.colors.text.secondary};
      display: flex;
      flex-direction: row;
      justify-content: flex-start;
      column-gap: ${V.spacing(1)};
      align-items: center;
    `,rowButton:t.css`
      ${H};
      padding: ${V.spacing(.5)};
      overflow: hidden;
      text-overflow: ellipsis;
      text-align: left;
      white-space: nowrap;
      cursor: pointer;
      border: 2px solid transparent;

      &:disabled {
        cursor: not-allowed;
        color: ${V.colors.text.disabled};
      }
    `,rowButtonTitle:t.css`
      text-overflow: ellipsis;
      overflow: hidden;
    `,rowSelected:t.css`
      border-color: ${V.colors.primary.border};
    `,rowOdd:t.css`
      background-color: ${V.colors.background.secondary};
    `,panelButton:t.css`
      display: flex;
      gap: ${V.spacing(1)};
      justify-content: space-between;
      align-items: center;
    `,loadingPlaceholder:t.css`
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    `,selectDashboardPlaceholder:t.css`
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      text-align: center;
      font-weight: ${V.typography.fontWeightBold};
    `,modal:t.css`
      height: 100%;
    `,modalContent:t.css`
      flex: 1;
      display: flex;
      flex-direction: column;
    `,modalAlert:t.css`
      flex-grow: 0;
    `,warnIcon:t.css`
      fill: ${V.colors.warning.main};
    `}},w=()=>{const V=(0,u.wW)(K),[H,j]=(0,l.Z)(!1),{control:A,register:_,watch:k,formState:{errors:Q},setValue:re}=(0,s.Gc)(),Z=k("annotations"),oe=(0,i.useCallback)(me=>Z.filter((q,ne)=>ne!==me).map(({key:q})=>q),[Z]),{fields:G,append:le,remove:fe}=(0,s.Dq)({control:A,name:"annotations"}),ae=Z.find(me=>me.key===g.q6.dashboardUID)?.value,de=Z.find(me=>me.key===g.q6.panelID)?.value,ee=(me,q)=>{const ne=(0,n.ZP)(Z,se=>{const he=se.find(Te=>Te.key===g.q6.dashboardUID),ue=se.find(Te=>Te.key===g.q6.panelID);he?he.value=me:se.push({key:g.q6.dashboardUID,value:me}),ue?ue.value=q:se.push({key:g.q6.panelID,value:q})});re("annotations",ne),j(!1)};return i.createElement(i.Fragment,null,i.createElement(o._,null,"Summary and annotations"),i.createElement("div",{className:V.flexColumn},G.map((me,q)=>{const ne=Z[q]?.key?.toLocaleLowerCase().endsWith("url"),se=ne?d.I:r.K;return i.createElement("div",{key:me.id,className:V.flexRow},i.createElement(m.g,{className:V.field,invalid:!!Q.annotations?.[q]?.key?.message,error:Q.annotations?.[q]?.key?.message,"data-testid":`annotation-key-${q}`},i.createElement(c.g,{name:`annotations.${q}.key`,defaultValue:me.key,render:({field:{ref:he,...ue}})=>i.createElement(v,{...ue,"aria-label":`Annotation detail ${q+1}`,existingKeys:oe(q),width:18}),control:A,rules:{required:{value:!!Z[q]?.value,message:"Required."}}})),i.createElement(m.g,{className:(0,t.cx)(V.flexRowItemMargin,V.field),invalid:!!Q.annotations?.[q]?.value?.message,error:Q.annotations?.[q]?.value?.message},i.createElement(se,{"data-testid":`annotation-value-${q}`,className:(0,t.cx)(V.annotationValueInput,{[V.textarea]:!ne}),..._(`annotations.${q}.value`),placeholder:ne?"https://":"Text",defaultValue:me.value})),i.createElement(p.zx,{type:"button",className:V.flexRowItemMargin,"aria-label":"delete annotation",icon:"trash-alt",variant:"secondary",onClick:()=>fe(q)}))}),i.createElement(f.Stack,{direction:"row",gap:1},i.createElement(p.zx,{className:V.addAnnotationsButton,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{le({key:"",value:""})}},"Add annotation"),i.createElement(p.zx,{type:"button",variant:"secondary",icon:"dashboard",onClick:()=>j(!0)},"Set dashboard and panel")),H&&i.createElement(I,{isOpen:!0,dashboardUid:ae,panelId:de,onChange:ee,onDismiss:()=>j(!1)})))},K=V=>({annotationValueInput:t.css`
    width: 394px;
  `,textarea:t.css`
    height: 76px;
  `,addAnnotationsButton:t.css`
    flex-grow: 0;
    align-self: flex-start;
    margin-left: 148px;
  `,flexColumn:t.css`
    display: flex;
    flex-direction: column;
  `,field:t.css`
    margin-bottom: ${V.spacing(.5)};
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
  `,flexRowItemMargin:t.css`
    margin-left: ${V.spacing(.5)};
  `}),L=w},56412:(Y,T,e)=>{"use strict";e.d(T,{wO:()=>me,Xr:()=>G});var t=e(9892),n=e(66111),i=e(66698),s=e(26418),l=e(72648),f=e(24799),u=e(77117),o=e(46967),d=e(31403),r=e(63619),m=e(8944),c=e(61860),p=e(39904),g=e(41904),y=e(61627),E=e(69945),v=e(45849),h=e(20383),P=e(33950),a=e(61068),C=e(32139),D=e(82897),b=e(64353),M=e(61744),x=e(8581),R=e(77582),S=e(27876),O=e(72004),U=e(79662),I=e(63613),F=e(79658);const w=()=>{const ne=(0,l.wW)(V),se=()=>window.open("https://github.com/grafana/grafana/issues/42947","_blank");return n.createElement(s.Stack,{gap:.5},n.createElement("div",{className:ne.slashNotAllowed},"Folders with '/' character are not allowed."),n.createElement(c.u,{placement:"top",content:"Link to the Github issue",theme:"info"},n.createElement(p.J,{name:"info-circle",size:"xs",className:ne.infoIcon,onClick:se})))},K=ne=>ne.indexOf("/")!==-1;function L(ne){const{value:se}=ne,ue={warningCondition:Ve=>K(Ve),warningComponent:w},Te={disallowValues:!0,isAllowedValue:Ve=>!K(Ve)};return n.createElement(F.Es,{showRoot:!1,rootName:"",allowEmpty:!0,initialTitle:se?.title,initialFolderUid:se?.uid,searchQueryType:S.SearchQueryType.AlertFolder,...ne,permissionLevel:S.PermissionLevelString.Edit,customAdd:Te,folderWarning:ue})}const V=ne=>({slashNotAllowed:t.css`
    color: ${ne.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
  `,infoIcon:t.css`
    color: ${ne.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
    cursor: pointer;
  `});var H=e(20700);const j=1e3,A=ne=>{const he=(0,E._)(Ie=>Ie.rulerRules)[v.GC];return{groupOptions:((0,y.Zo)(v.GC).find(Ie=>Ie.name===ne)?.groups??[]).filter(Ie=>Ie.rules.every(Ke=>(0,U.Pc)(Ke.rulerRule)&&Boolean(Ke.rulerRule.grafana_alert.provenance)===!1)).map(Ie=>({label:Ie.name,value:Ie.name,description:Ie.interval??C.E})),loading:he?.loading}};function _({initialFolder:ne}){const{formState:{errors:se},watch:he,control:ue}=(0,i.Gc)(),Te=(0,l.wW)(k),Ve=(0,S.useDispatch)(),ct=he("folder"),Ie=he("group"),[Ke,Ge]=(0,n.useState)({label:Ie,title:Ie}),at=(0,n.useRef)(!0),{groupOptions:dt,loading:Re}=A(ct?.title??"");(0,n.useEffect)(()=>Ge({label:Ie,title:Ie}),[Ie,Ge]),(0,n.useEffect)(()=>{Ve((0,O.IA)(v.GC))},[Ve]);const ye=(0,n.useCallback)(()=>{Ie&&!at.current&&ct?.title&&Ge({label:"",title:""}),at.current=!1},[Ie,ct?.title]),Pe=(0,n.useCallback)(ot=>dt.includes(ft=>ft.label===ot),[dt]),be=ot=>ot.slice(0,j),Be=(0,n.useCallback)(async ot=>be(ot?dt.filter(gt=>(gt.label??"").toLowerCase().includes(ot.toLowerCase())):dt),[dt]),ke=(0,n.useMemo)(()=>(0,D.debounce)(Be,300,{leading:!0}),[Be]);return n.createElement("div",{className:Te.container},n.createElement(f.g,{label:n.createElement(b._,{htmlFor:"folder",description:"Select a folder for your rule."},n.createElement(s.Stack,{gap:.5},"Folder",n.createElement(I.s,{text:"Each folder has unique folder permission. When you store multiple rules in a folder, the folder access permissions are assigned to the rules."}))),className:Te.formInput,error:se.folder?.message,invalid:!!se.folder?.message,"data-testid":"folder-picker"},n.createElement(r.g,{render:({field:{ref:ot,...ft}})=>n.createElement(L,{inputId:"folder",...ft,enableCreateNew:R.Vt.hasPermission(S.AccessControlAction.FoldersCreate),enableReset:!0,onChange:({title:gt,uid:St})=>{ft.onChange({title:gt,uid:St}),Pe(Ke.value??"")||ye()}}),name:"folder",rules:{required:{value:!0,message:"Select a folder"},validate:{pathSeparator:ot=>(0,H.p0)(ot.title)}}})),n.createElement(f.g,{label:"Evaluation group (interval)","data-testid":"group-picker",description:"Select a group to evaluate all rules in the same group over the same time interval.",className:Te.formInput,error:se.group?.message,invalid:!!se.group?.message},n.createElement(r.g,{render:({field:{ref:ot,...ft}})=>Re?n.createElement(M.u,{text:"Loading..."}):n.createElement(x.qb,{disabled:!ct,inputId:"group",key:`my_unique_select_key__${Ke?.title??""}`,...ft,invalid:Boolean(ct)&&!Ke.title,loadOptions:ke,loadingMessage:"Loading groups...",defaultOptions:dt,defaultValue:Ke,getOptionLabel:gt=>`${gt.label}`,placeholder:"Evaluation group name",onChange:gt=>{ft.onChange(gt.label??"")},value:Ke,allowCustomValue:!0,formatCreateLabel:gt=>"+ Add new ",noOptionsMessage:"Start typing to create evaluation group"}),name:"group",control:ue,rules:{required:{value:!0,message:"Must enter a group name"},validate:{pathSeparator:ot=>(0,H.p0)(ot)}}})))}const k=ne=>({container:t.css`
    display: flex;
    flex-direction: row;
    align-items: baseline;
    max-width: ${ne.breakpoints.values.sm}px;
    justify-content: space-between;
  `,formInput:t.css`
    width: 275px;
    & + & {
      margin-left: ${ne.spacing(3)};
    }
  `});var Q=e(46063);const re=[{value:Q.g0.Alerting,label:"Alerting"},{value:Q.g0.NoData,label:"No Data"},{value:Q.g0.OK,label:"OK"},{value:Q.g0.Error,label:"Error"}],Z=({includeNoData:ne,includeError:se,...he})=>{const ue=(0,n.useMemo)(()=>ne?se?re:re.filter(Te=>Te.value!==Q.g0.Error):re.filter(Te=>Te.value!==Q.g0.NoData),[ne,se]);return n.createElement(x.Ph,{options:ue,...he})};var oe=e(36894);const G=10,le=ne=>({required:{value:!0,message:"Required."},validate:se=>{if(se==="0")return!0;try{const he=(0,h.nd)(se);if(he===0)return!0;try{const ue=(0,h.nd)(ne);return he>=ue?!0:"For duration must be greater than or equal to the evaluation interval."}catch{return!0}}catch(he){return he instanceof Error?he.message:"Failed to parse duration"}}}),fe=(ne,se)=>{const{groupOptions:he}=A(ne);return!(0,n.useCallback)(Te=>he.some(Ve=>Ve.label===Te),[he])(se)},ae=({rules:ne})=>{const{watch:se,register:he,formState:{errors:ue}}=(0,i.Gc)(),Te=(0,l.wW)(q),Ve="eval-every-input",[ct,Ie]=se(["group","folder.title"]),Ke=(ne&&ne[Ie]?.find(Ge=>Ge.name===ct)?.rules)??[];return n.createElement(f.g,{label:"Evaluation interval",description:"Applies to every rule within a group. It can overwrite the interval of an existing alert rule."},n.createElement("div",{className:Te.alignInterval},n.createElement(s.Stack,{direction:"row","justify-content":"left","align-items":"baseline",gap:0},n.createElement(u.W,{htmlFor:Ve,width:16,tooltip:"How often the alert will be evaluated to see if it fires"},"Evaluate every"),n.createElement(f.g,{className:Te.inlineField,error:ue.evaluateEvery?.message,invalid:!!ue.evaluateEvery,validationMessageHorizontalOverflow:!0},n.createElement(o.I,{id:Ve,width:8,...he("evaluateEvery",(0,a.MD)(Ke))})))))};function de({initialFolder:ne,evaluateEvery:se,setEvaluateEvery:he}){const ue=(0,l.wW)(q),{watch:Te,setValue:Ve}=(0,i.Gc)(),[ct,Ie]=(0,n.useState)(!1),[Ke,Ge]=Te(["group","folder.title"]),dt=(0,E._)(St=>St.rulerRules)[v.GC],ye=(0,y.Zo)(v.GC).find(St=>St.name===Ge),Pe=ye?.groups.find(St=>St.name===Ke),be=fe(Ge??"",Ke);(0,n.useEffect)(()=>{!be&&Pe?.interval?he(Pe.interval):(he(C.E),Ve("evaluateEvery",C.E))},[he,be,Ve,Pe]);const Be=(St=!1)=>{St||(0,g.PN)(g.z7.leavingRuleGroupEdit),Ie(!1)},ke=()=>Ie(!0),ot=dt?.loading||be||!Ge||!Ke,ft={name:Ge,rulesSource:v.GC,groups:[]},gt={name:Ke,interval:se,rules:[],totals:{}};return n.createElement("div",null,n.createElement(_,{initialFolder:ne}),Ge&&ct&&n.createElement(a.vq,{namespace:ye??ft,group:Pe??gt,onClose:()=>Be(),intervalEditOnly:!0}),Ge&&Ke&&n.createElement("div",{className:ue.evaluationContainer},n.createElement(s.Stack,{direction:"column",gap:0},n.createElement("div",{className:ue.marginTop},be&&Ke?n.createElement(ae,{rules:dt?.result}):n.createElement(s.Stack,{direction:"column",gap:1},n.createElement("div",{className:ue.evaluateLabel},"Alert rules in the "," ",n.createElement("span",{className:ue.bold},Ke)," group are evaluated every"," ",n.createElement("span",{className:ue.bold},se),"."),!be&&n.createElement("div",null,"Evaluation group interval applies to every rule within a group. It overwrites intervals defined for existing alert rules."))),n.createElement(s.Stack,{direction:"row","justify-content":"right","align-items":"center"},!be&&n.createElement("div",{className:ue.marginTop},n.createElement(d.zx,{icon:"edit",type:"button",variant:"secondary",disabled:ot,onClick:ke},n.createElement("span",null,"Edit evaluation group")))))))}function ee({evaluateEvery:ne}){const se=(0,l.wW)(q),{register:he,formState:{errors:ue}}=(0,i.Gc)(),Te="eval-for-input";return n.createElement(s.Stack,{direction:"row","justify-content":"flex-start","align-items":"flex-start"},n.createElement(u.W,{htmlFor:Te,width:7,tooltip:'Once the condition is breached, the alert goes into pending state. If the alert is pending longer than the "for" value, it becomes a firing alert.'},"for"),n.createElement(f.g,{className:se.inlineField,error:ue.evaluateFor?.message,invalid:!!ue.evaluateFor?.message,validationMessageHorizontalOverflow:!0},n.createElement(o.I,{id:Te,width:8,...he("evaluateFor",le(ne))})))}function me({initialFolder:ne,evaluateEvery:se,setEvaluateEvery:he,existing:ue}){const Te=(0,l.wW)(q),[Ve,ct]=(0,n.useState)(!1),{watch:Ie,setValue:Ke}=(0,i.Gc)(),Ge=Ie("isPaused");return n.createElement(oe.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(s.Stack,{direction:"column","justify-content":"flex-start","align-items":"flex-start"},n.createElement(de,{initialFolder:ne,setEvaluateEvery:he,evaluateEvery:se}),n.createElement(ee,{evaluateEvery:se}),ue&&n.createElement(f.g,{htmlFor:"pause-alert-switch"},n.createElement(r.g,{render:()=>n.createElement(s.Stack,{gap:1,direction:"row",alignItems:"center"},n.createElement(m.r,{id:"pause-alert",onChange:at=>{Ke("isPaused",at.currentTarget.checked)},value:Boolean(Ge)}),n.createElement("label",{htmlFor:"pause-alert",className:Te.switchLabel},"Pause evaluation",n.createElement(c.u,{placement:"top",content:"Turn on to pause evaluation for this alert rule.",theme:"info"},n.createElement(p.J,{tabIndex:0,name:"info-circle",size:"sm",className:Te.infoIcon})))),name:"isPaused"}))),n.createElement(P.U,{isCollapsed:!Ve,onToggle:at=>ct(!at),text:"Configure no data and error handling",className:Te.collapseToggle}),Ve&&n.createElement(n.Fragment,null,n.createElement(f.g,{htmlFor:"no-data-state-input",label:"Alert state if no data or all values are null"},n.createElement(r.g,{render:({field:{onChange:at,ref:dt,...Re}})=>n.createElement(Z,{...Re,inputId:"no-data-state-input",width:42,includeNoData:!0,includeError:!1,onChange:ye=>at(ye?.value)}),name:"noDataState"})),n.createElement(f.g,{htmlFor:"exec-err-state-input",label:"Alert state if execution error or timeout"},n.createElement(r.g,{render:({field:{onChange:at,ref:dt,...Re}})=>n.createElement(Z,{...Re,inputId:"exec-err-state-input",width:42,includeNoData:!1,includeError:!0,onChange:ye=>at(ye?.value)}),name:"execErrState"}))))}const q=ne=>({inlineField:t.css`
    margin-bottom: 0;
  `,collapseToggle:t.css`
    margin: ${ne.spacing(2,0,2,-1)};
  `,evaluateLabel:t.css`
    margin-right: ${ne.spacing(1)};
  `,evaluationContainer:t.css`
    background-color: ${ne.colors.background.secondary};
    padding: ${ne.spacing(2)};
    max-width: ${ne.breakpoints.values.sm}px;
    font-size: ${ne.typography.size.sm};
  `,intervalChangedLabel:t.css`
    margin-bottom: ${ne.spacing(1)};
  `,warningIcon:t.css`
    justify-self: center;
    margin-right: ${ne.spacing(1)};
    color: ${ne.colors.warning.text};
  `,infoIcon:t.css`
    margin-left: 10px;
  `,warningMessage:t.css`
    color: ${ne.colors.warning.text};
  `,bold:t.css`
    font-weight: bold;
  `,alignInterval:t.css`
    margin-top: ${ne.spacing(1)};
    margin-left: -${ne.spacing(1)};
  `,marginTop:t.css`
    margin-top: ${ne.spacing(1)};
  `,switchLabel:(0,t.css)(`
    color: ${ne.colors.text.primary},
    cursor: 'pointer',
    fontSize: ${ne.typography.bodySmall.fontSize},
  `)})},19191:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>K});var t=e(9892),n=e(82897),i=e(66111),s=e(66698),l=e(26418),f=e(31403),u=e(72648),o=e(61744),d=e(24799),r=e(77117),m=e(46967),c=e(64353),p=e(61860),g=e(39904),y=e(27876),E=e(69945),v=e(72004),h=e(93900),P=e(8581);const a=(0,h.c)({ignoreCase:!1});function C(L,V){return a({label:L.label??"",value:L.value??"",data:{}},V)}const D=(L,V,H)=>{const j=H.some(_=>_.label===L),A=L.trim().length;return!Boolean(j)&&Boolean(A)},M=i.forwardRef(function({onChange:V,options:H,defaultValue:j,type:A,onOpenMenu:_=()=>{}},k){return i.createElement("div",{ref:k},i.createElement(d.g,{disabled:!1,"data-testid":`alertlabel-${A}-picker`},i.createElement(P.Ph,{placeholder:`Choose ${A}`,width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:V,onOpenMenu:_,filterOption:C,isValidNewOption:D,options:H,maxMenuHeight:500,noOptionsMessage:"No labels found",defaultValue:j,allowCustomValue:!0})))}),x=L=>{const V=(0,y.useDispatch)();(0,i.useEffect)(()=>{V((0,v.IA)(L))},[V,L]);const j=(0,E._)(Q=>Q.rulerRules)[L],A=j?.result||{},_=(0,n.compact)((0,n.flattenDeep)(Object.keys(A).map(Q=>A[Q].map(re=>re.rules.map(Z=>Z.labels))))),k={};return _.forEach(Q=>{Object.entries(Q).forEach(([re,Z])=>{k[re]=[...new Set([...k[re]||[],Z])]})}),{loading:j?.loading,labelsByKey:k}};function R(L=[]){return L.map(V=>({label:V,value:V}))}const S=({remove:L,className:V,index:H})=>i.createElement(f.zx,{className:V,"aria-label":"delete label",icon:"trash-alt","data-testid":`delete-label-${H}`,variant:"secondary",onClick:()=>{L(H)}}),O=({append:L,className:V})=>i.createElement(f.zx,{className:V,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{L({key:"",value:""})}},"Add label"),U=({dataSourceName:L})=>{const V=(0,u.wW)(w),{register:H,control:j,watch:A,formState:{errors:_},setValue:k}=(0,s.Gc)(),Q=A("labels"),{fields:re,remove:Z,append:oe}=(0,s.Dq)({control:j,name:"labels"}),{loading:G,labelsByKey:le}=x(L),[fe,ae]=(0,i.useState)(""),de=(0,i.useMemo)(()=>R(Object.keys(le)),[le]),ee=(0,i.useCallback)(q=>R(le[q]),[le]),me=(0,i.useMemo)(()=>ee(fe),[fe,ee]);return i.createElement(i.Fragment,null,G&&i.createElement(o.u,{text:"Loading"}),!G&&i.createElement(i.Fragment,null,re.map((q,ne)=>i.createElement("div",{key:q.id},i.createElement("div",{className:(0,t.cx)(V.flexRow,V.centerAlignRow)},i.createElement(d.g,{className:V.labelInput,invalid:Boolean(_.labels?.[ne]?.key?.message),error:_.labels?.[ne]?.key?.message,"data-testid":`label-key-${ne}`},i.createElement(M,{...H(`labels.${ne}.key`,{required:{value:Boolean(Q[ne]?.value),message:"Required."}}),defaultValue:q.key?{label:q.key,value:q.key}:void 0,options:de,onChange:se=>{k(`labels.${ne}.key`,se.value),ae(se.value)},type:"key"})),i.createElement(r.W,{className:V.equalSign},"="),i.createElement(d.g,{className:V.labelInput,invalid:Boolean(_.labels?.[ne]?.value?.message),error:_.labels?.[ne]?.value?.message,"data-testid":`label-value-${ne}`},i.createElement(M,{...H(`labels.${ne}.value`,{required:{value:Boolean(Q[ne]?.key),message:"Required."}}),defaultValue:q.value?{label:q.value,value:q.value}:void 0,options:me,onChange:se=>{k(`labels.${ne}.value`,se.value)},onOpenMenu:()=>{ae(Q[ne].key)},type:"value"})),i.createElement(S,{className:V.deleteLabelButton,index:ne,remove:Z})))),i.createElement(O,{className:V.addLabelButton,append:oe})))},I=()=>{const L=(0,u.wW)(w),{register:V,control:H,watch:j,formState:{errors:A}}=(0,s.Gc)(),_=j("labels"),{fields:k,remove:Q,append:re}=(0,s.Dq)({control:H,name:"labels"});return i.createElement(i.Fragment,null,k.map((Z,oe)=>i.createElement("div",{key:Z.id},i.createElement("div",{className:(0,t.cx)(L.flexRow,L.centerAlignRow),"data-testid":"alertlabel-input-wrapper"},i.createElement(d.g,{className:L.labelInput,invalid:!!A.labels?.[oe]?.key?.message,error:A.labels?.[oe]?.key?.message},i.createElement(m.I,{...V(`labels.${oe}.key`,{required:{value:!!_[oe]?.value,message:"Required."}}),placeholder:"key","data-testid":`label-key-${oe}`,defaultValue:Z.key})),i.createElement(r.W,{className:L.equalSign},"="),i.createElement(d.g,{className:L.labelInput,invalid:!!A.labels?.[oe]?.value?.message,error:A.labels?.[oe]?.value?.message},i.createElement(m.I,{...V(`labels.${oe}.value`,{required:{value:!!_[oe]?.key,message:"Required."}}),placeholder:"value","data-testid":`label-value-${oe}`,defaultValue:Z.value})),i.createElement(S,{className:L.deleteLabelButton,index:oe,remove:Q})))),i.createElement(O,{className:L.addLabelButton,append:re}))},F=({className:L,dataSourceName:V})=>{const H=(0,u.wW)(w);return i.createElement("div",{className:(0,t.cx)(L,H.wrapper)},i.createElement(c._,null,i.createElement(l.Stack,{gap:.5},i.createElement("span",null,"Custom Labels"),i.createElement(p.u,{content:i.createElement("div",null,"The dropdown only displays labels that you have previously used for alerts. Select a label from the dropdown or type in a new one.")},i.createElement(g.J,{className:H.icon,name:"info-circle",size:"sm"})))),i.createElement(i.Fragment,null,i.createElement("div",{className:H.flexRow},i.createElement(r.W,{width:18},"Labels"),i.createElement("div",{className:H.flexColumn},V&&i.createElement(U,{dataSourceName:V}),!V&&i.createElement(I,null)))))},w=L=>({icon:t.css`
      margin-right: ${L.spacing(.5)};
    `,wrapper:t.css`
      margin-bottom: ${L.spacing(4)};
    `,flexColumn:t.css`
      display: flex;
      flex-direction: column;
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;

      & + button {
        margin-left: ${L.spacing(.5)};
      }
    `,deleteLabelButton:t.css`
      margin-left: ${L.spacing(.5)};
      align-self: flex-start;
    `,addLabelButton:t.css`
      flex-grow: 0;
      align-self: flex-start;
    `,centerAlignRow:t.css`
      align-items: baseline;
    `,equalSign:t.css`
      align-self: flex-start;
      width: 28px;
      justify-content: center;
      margin-left: ${L.spacing(.5)};
    `,labelInput:t.css`
      width: 175px;
      margin-bottom: ${L.spacing(1)};
      & + & {
        margin-left: ${L.spacing(1)};
      }
    `}),K=F},36894:(Y,T,e)=>{"use strict";e.d(T,{z:()=>l});var t=e(9892),n=e(66111),i=e(72648),s=e(13393);const l=({title:u,stepNo:o,children:d,description:r})=>{const m=(0,i.wW)(f);return n.createElement("div",{className:m.parent},n.createElement("div",null,n.createElement("span",{className:m.stepNo},o)),n.createElement("div",{className:m.content},n.createElement(s.C,{label:u,className:m.fieldset},r&&n.createElement("p",{className:m.description},r),d)))},f=u=>({fieldset:t.css`
    legend {
      font-size: 16px;
      padding-top: ${u.spacing(.5)};
    }
  `,parent:t.css`
    display: flex;
    flex-direction: row;
    max-width: ${u.breakpoints.values.xl};
    & + & {
      margin-top: ${u.spacing(4)};
    }
  `,description:t.css`
    margin-top: -${u.spacing(2)};
    color: ${u.colors.text.secondary};
  `,stepNo:t.css`
    display: inline-block;
    width: ${u.spacing(4)};
    height: ${u.spacing(4)};
    line-height: ${u.spacing(4)};
    border-radius: 100%;
    text-align: center;
    color: ${u.colors.text.maxContrast};
    background-color: ${u.colors.background.canvas};
    font-size: ${u.typography.size.lg};
    margin-right: ${u.spacing(2)};
  `,content:t.css`
    flex: 1;
  `})},78679:(Y,T,e)=>{"use strict";e.d(T,{l:()=>m});var t=e(9892),n=e(66111),i=e(89050),s=e(19447),l=e(85596),f=e(72648),u=e(18271),o=e(56041),d=e(97201),r=e(20700);const m=({data:p,thresholds:g,thresholdsType:y})=>{const E=(0,f.wW)(c),v=(0,s.xI)(p.series),h=(0,r._4)(p),P=y?{mode:y}:void 0,a={from:p.timeRange.from.valueOf(),to:p.timeRange.to.valueOf()};return n.createElement("div",{className:E.wrapper},n.createElement(i.Z,{disableHeight:!0},({width:C})=>n.createElement("div",{style:{width:C}},v?n.createElement(o.F,{loading:p.state===l.Gu.Loading,statusMessage:h,data:p.series,eventBus:u.Z,height:300,width:C,absoluteRange:a,timeZone:"browser",onChangeTime:()=>{},splitOpenFn:()=>{},loadingState:p.state,thresholdsConfig:g,thresholdsStyle:P}):n.createElement("div",{className:E.instantVectorResultWrapper},n.createElement("header",{className:E.title},"Table"),n.createElement(d.bw,{series:p.series})))))},c=p=>({wrapper:t.css`
    width: 100%;
    position: relative;
  `,instantVectorResultWrapper:t.css`
    border: solid 1px ${p.colors.border.medium};
    border-radius: ${p.shape.borderRadius()};
    padding: 0;

    display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
  `,title:(0,t.css)({label:"panel-title",padding:p.spacing(),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:p.typography.h6.fontSize,fontWeight:p.typography.h6.fontWeight})})},20700:(Y,T,e)=>{"use strict";e.d(T,{p0:()=>D,Vp:()=>b,_4:()=>S,Fu:()=>x,Ry:()=>P,Dr:()=>C,Yq:()=>M});var t=e(19447),n=e(69098),i=e(40538),s=e(85596),l=e(47694),f=e(67162),u=e(75e3),o=e(97573),d=e(82897),r=e(58635),m=e(28630);const c=(0,r.Z)(p,(O,U)=>h(O[0])===h(U[0]));function p(O){const U=new m.kJ,I=O.map(F=>F.refId);return U.createNodes(I),O.forEach(F=>{const w=F.refId;((0,u.j)(F.model)&&F.model.type==="math"?g(F.model.expression??""):[F.model.expression]).forEach(V=>{w&&V&&!(w===V)&&U.link(V,w)})}),U}function g(O){const U=new RegExp(/\$\{(?<var>[a-zA-Z0-9_ ]+?)\}/gm),I=new RegExp(/\$(?<var>[a-zA-Z0-9_]+)/gm),F=Array.from(O.matchAll(U)).map(K=>K.groups?.var),w=Array.from(O.matchAll(I)).map(K=>K.groups?.var);return(0,d.compact)((0,d.uniq)([...F,...w]))}const y=(0,d.memoize)(E,(O,U)=>O+v(U));function E(O,U){const I=U.getNode(O);let F=[];function w(K){const L=K.inputEdges;L.length>0?L.forEach(V=>{V.inputNode&&w(V.inputNode)}):F?.push(K)}return w(I),F.map(K=>K.name)}function v(O){return Object.keys(O.nodes).map(U=>{const I=O.nodes[U];let F=I.outputEdges.map(K=>K.outputNode?.name).join(", "),w=I.inputEdges.map(K=>K.inputNode?.name).join(", ");return`${I.name}:${F}:${w}`}).join(" ")}function h(O){return O.map(U=>{const I=(0,u.j)(U.model)?U.model.type:U.queryType;return U.refId+(U.model.expression??"")+I}).join()}function P(O,U,I){return O.map(F=>{if(U===I||!(0,u.j)(F.model))return F;const w=F.model.type==="math",K=F.model.type==="reduce",L=F.model.type==="resample",V=F.model.type==="classic_conditions",H=F.model.type==="threshold";if(w)return{...F,model:{...F.model,expression:a(F.model.expression??"",U,I)}};if(L||K||H){const j=F.model.expression===U;return{...F,model:{...F.model,expression:j?I:F.model.expression}}}if(V){const j=F.model.conditions?.map(A=>({...A,query:{...A.query,params:A.query.params.map(_=>_===U?I:_)}}));return{...F,model:{...F.model,conditions:j}}}return F})}function a(O,U,I){const F=new RegExp("(\\$"+U+"\\b)|(\\${"+U+"})","gm"),w="${"+I+"}";return O.replace(F,w)}function C(O,U){return O.find(I=>I.refId===U)!==void 0}function D(O){return O.includes("/")||O.includes("\\")?'Cannot contain "/" or "\\" characters':!0}function b(O){if(O.length===0)return;const U=(0,t.xI)(O);let I;return U&&(I=new Error("You cannot use time series data as an alert condition, consider adding a reduce expression.")),I}function M(O){const I=(O[0]?.meta?.notices??[]).find(F=>F.severity==="warning")?.text;return I?new Error(I):void 0}function x(O){const U={},I=[o.Us.threshold,o.Us.classic];for(const K of O){if(!(0,u.j)(K.model)||!I.includes(K.model.type)||!Array.isArray(K.model.conditions))continue;const L=K.model.conditions.some(R);K.model.conditions.forEach(V=>{const H=V.evaluator.params,j=V.query?.params[0]??K.model.expression;if(!j)return;const A=R(V);try{const _=c(O),k=y(j,_);O.filter(re=>k.includes(re.refId)).forEach(re=>{const Z=re.refId,oe=!(0,u.j)(re?.model),G=Boolean(oe&&Z);Z&&!U[Z]&&(U[Z]={config:{mode:n.H.Absolute,steps:[]},mode:i.i3.Line}),Z&&G&&!A&&!L?F(Z,H[0]):Z&&G&&A&&(w(Z,H,V.evaluator.type),U[Z].mode=i.i3.LineAndArea)})}catch(_){console.error("Failed to parse thresholds",_);return}})}function F(K,L){U[K].config.steps.push({value:-1/0,color:"transparent"},{value:L,color:l.vc.theme2.colors.error.main})}function w(K,L,V){V===f.$.IsWithinRange&&U[K].config.steps.push({value:-1/0,color:"transparent"},{value:L[0],color:l.vc.theme2.colors.error.main},{value:L[1],color:l.vc.theme2.colors.error.main},{value:L[1],color:"transparent"}),V===f.$.IsOutsideRange&&U[K].config.steps.push({value:-1/0,color:l.vc.theme2.colors.error.main},{value:L[0],color:l.vc.theme2.colors.error.main},{value:L[0],color:"transparent"},{value:L[1],color:l.vc.theme2.colors.error.main}),U[K].config.steps.sort((H,j)=>H.value-j.value),U[K].config.steps=U[K].config.steps.filter(H=>H.value!==void 0)}return U}function R(O){return O.evaluator.type===f.$.IsWithinRange||O.evaluator.type===f.$.IsOutsideRange}function S(O){const U="Failed to fetch data";if(O.state!==s.Gu.Error)return;const I=O.errors;return I?.length?I.map(F=>F.message??U).join(", "):O.error?.message??U}},48563:(Y,T,e)=>{"use strict";e.d(T,{o:()=>m});var t=e(66111),n=e(67483),i=e(79662),s=e(52694),l=e(53731),f=e(99085),u=e(78543),o=e(80498);const d=({instance:p})=>{const g=(0,f.$9)(p.annotations),y=(0,f.XW)(g);return t.createElement("div",null,p.value&&t.createElement(o.C,{label:"Value",horizontal:!0},p.value),g.map(([E,v])=>t.createElement(u.a,{key:E,annotationKey:E,value:v,valueLink:y.get(E)})))};var r=e(45608);const m=({instances:p,pagination:g,footerRow:y})=>{const E=(0,t.useMemo)(()=>p.map(v=>({data:v,id:(0,i.pB)(v)})),[p]);return t.createElement(l.t,{cols:c,isExpandable:!0,items:E,renderExpandedContent:({data:v})=>t.createElement(d,{instance:v}),pagination:g,footerRow:y})},c=[{id:"state",label:"State",renderCell:({data:{state:p}})=>t.createElement(r.l,{state:p}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{labels:p}})=>t.createElement(s.s,{labels:p})},{id:"created",label:"Created",renderCell:({data:{activeAt:p}})=>t.createElement(t.Fragment,null,p.startsWith("0001")?"-":(0,n.CQ)(p).format("YYYY-MM-DD HH:mm:ss")),size:"150px"}]},45608:(Y,T,e)=>{"use strict";e.d(T,{l:()=>s});var t=e(66111),n=e(79662),i=e(79453);const s=t.memo(({state:l,isPaused:f=!1,size:u="md",muted:o=!1})=>t.createElement(i.i,{state:(0,n.Aq)(l),size:u,muted:o},(0,n.SS)(l)," ",f?" (Paused)":""));s.displayName="AlertStateTag"},41273:(Y,T,e)=>{"use strict";e.d(T,{E:()=>d});var t=e(9892),n=e(66111),i=e(37932),s=e(72648),l=e(31403),f=e(98102),u=e(60048),o=e(93411);const d=n.forwardRef(({text:m,ruleIdentifier:c,isProvisioned:p,className:g},y)=>{const[E,v]=(0,n.useState)(void 0),h=(0,s.wW)(r),P=(0,o.u)("/alerting/new",{copyFrom:u.$V(c)});return n.createElement(n.Fragment,null,n.createElement(l.Qj,{title:"Copy",className:g,size:"sm",key:"clone",variant:"secondary",icon:"copy",href:p?void 0:P,onClick:p?()=>v(P):void 0,ref:y},m),n.createElement(f.s,{isOpen:!!E,title:"Copy provisioned alert rule",body:n.createElement("div",null,n.createElement("p",null,"The new rule will ",n.createElement("span",{className:h.bold},"NOT")," be marked as a provisioned rule."),n.createElement("p",null,"You will need to set a new alert group for the copied rule because the original one has been provisioned and cannot be used for rules created in the UI.")),confirmText:"Copy",onConfirm:()=>E&&i.E1.push(E),onDismiss:()=>v(void 0)}))});d.displayName="CloneRuleButton";const r=m=>({bold:t.css`
    font-weight: ${m.typography.fontWeightBold};
  `})},61068:(Y,T,e)=>{"use strict";e.d(T,{vq:()=>A,MD:()=>j,qd:()=>w,Bg:()=>V});var t=e(9892),n=e(82897),i=e(66111),s=e(66698),l=e(26418),f=e(19985),u=e(72648),o=e(35029),d=e(24799),r=e(64353),m=e(46967),c=e(31403),p=e(60499),g=e(40014),y=e(27876),E=e(69945),v=e(72004),h=e(82963),P=e(45849),a=e(46818),C=e(79662),D=e(20383),b=e(53731),M=e(63613),x=e(35645),R=e(45253);const S=()=>i.createElement(R.b,{severity:"warning",title:"Global evalutation interval limit exceeded"},"A minimum evaluation interval of ",i.createElement("strong",null,x.v.unifiedAlerting.minInterval)," has been configured in Grafana.",i.createElement("br",null),"Please contact the administrator to configure a lower interval.");var O=e(56412);const U=10;function I({message:k,error:Q}){return Q?i.createElement(f.C,{color:"red",icon:"exclamation-circle",text:"Error",tooltip:k}):i.createElement(f.C,{color:"orange",icon:"exclamation-triangle",text:"Unknown",tooltip:k})}const F=(k,Q)=>{const re=V(Q),Z=V(k);return Z===0&&re!==0?1:re===0||Z/re<1?0:Math.ceil(Z/re)+1},w=(k,Q)=>{const re={alertName:"",forDuration:"0s",evaluationsToFire:0};return(0,C.Pc)(k)?{alertName:k.grafana_alert.title,forDuration:k.for,evaluationsToFire:F(k.for,Q)}:(0,C.cG)(k)?{alertName:k.alert,forDuration:k.for??"1m",evaluationsToFire:F(k.for??"1m",Q)}:re},K=k=>{try{const Q=(0,D.nd)(k);return!(Q<O.Xr*1e3||Q%(O.Xr*1e3)!==0)}catch{return!1}},L=(k,Q,re)=>(k?k[re]:[])?.find(oe=>oe.name===Q),V=k=>{try{return(0,D.nd)(k)}catch{return 0}},H=({rulesWithoutRecordingRules:k})=>{const Q=(0,u.wW)(_),{watch:re}=(0,s.Gc)(),Z=re("groupInterval"),oe=!Boolean(Z),G=k.slice().map((fe,ae)=>({id:ae,data:w(fe,Z)})).sort((fe,ae)=>V(fe.data.forDuration)-V(ae.data.forDuration)),le=(0,i.useMemo)(()=>[{id:"alertName",label:"Alert",renderCell:({data:{alertName:fe}})=>i.createElement(i.Fragment,null,fe),size:"330px"},{id:"for",label:"For",renderCell:({data:{forDuration:fe}})=>i.createElement(i.Fragment,null,fe),size:.5},{id:"numberEvaluations",label:"#Eval",renderCell:({data:{evaluationsToFire:fe}})=>oe?i.createElement(I,{message:"#Evaluations not available."}):K(Z)?fe===0?i.createElement(I,{message:"Invalid 'For' value: it should be greater or equal to evaluation interval.",error:!0}):i.createElement(i.Fragment,null,fe):i.createElement(I,{message:"Invalid evaluation interval format",error:!0}),size:.4}],[Z,oe]);return i.createElement("div",{className:Q.tableWrapper},i.createElement(b.t,{items:G,cols:le,pagination:{itemsPerPage:U}}))},j=k=>({required:{value:!0,message:"Required."},validate:Q=>{try{const re=(0,D.nd)(Q);return re<O.Xr*1e3?`Cannot be less than ${O.Xr} seconds.`:re%(O.Xr*1e3)!==0?`Must be a multiple of ${O.Xr} seconds.`:(0,v.iH)(k,Q).length===0?!0:"Invalid evaluation interval. Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."}catch(re){return re instanceof Error?re.message:"Failed to parse duration"}}});function A(k){const{namespace:Q,group:re,onClose:Z,intervalEditOnly:oe}=k,G=(0,u.wW)(_),le=(0,y.useDispatch)(),{loading:fe,error:ae,dispatched:de}=(0,E._)(ye=>ye.updateLotexNamespaceAndGroup)??a.oq,ee=(0,p.iG)(),me=(0,i.useMemo)(()=>({namespaceName:Q.name,groupName:re.name,groupInterval:re.interval??""}),[Q,re]),q=(0,P.EG)(Q.rulesSource),ne=q===P.GC,se=ne?"Folder":"Namespace";(0,i.useEffect)(()=>{de&&!fe&&!ae&&Z(!0)},[de,fe,Z,ae]),(0,g.x)(ye=>ye.unifiedAlerting.updateLotexNamespaceAndGroup=a.oq);const he=ye=>{le((0,v.hv)({rulesSourceName:q,groupName:re.name,newGroupName:ye.groupName,namespaceName:Q.name,newNamespaceName:ye.namespaceName,groupInterval:ye.groupInterval||void 0}))},ue=(0,s.cI)({mode:"onBlur",defaultValues:me,shouldFocusError:!0}),{handleSubmit:Te,register:Ve,watch:ct,formState:{isDirty:Ie,errors:Ke}}=ue,Ge=()=>{ee.error("There are errors in the form. Correct the errors and retry.")},at=(0,n.compact)(re.rules.map(ye=>ye.rulerRule).filter(ye=>!(0,C.yF)(ye))),dt=at.length>0,Re=oe||ne?"Edit evaluation group":"Edit namespace or evaluation group";return i.createElement(o.u,{className:G.modal,isOpen:!0,title:Re,onDismiss:Z,onClickBackdrop:Z},i.createElement(s.RV,{...ue},i.createElement("form",{onSubmit:ye=>ye.preventDefault(),key:JSON.stringify(me)},i.createElement(i.Fragment,null,i.createElement(d.g,{label:i.createElement(r._,{htmlFor:"namespaceName",description:!ne&&"Change the current namespace name. Moving groups between namespaces is not supported"},se),invalid:!!Ke.namespaceName,error:Ke.namespaceName?.message},i.createElement(l.Stack,{gap:1,direction:"row"},i.createElement(m.I,{id:"namespaceName",readOnly:oe||ne,...Ve("namespaceName",{required:"Namespace name is required."}),className:G.formInput}),ne&&k.folderUrl&&i.createElement(c.Qj,{href:k.folderUrl,title:"Go to folder",variant:"secondary",icon:"folder-open",target:"_blank"}))),i.createElement(d.g,{label:i.createElement(r._,{htmlFor:"groupName",description:`Evaluation group name needs to be unique within a ${se.toLocaleLowerCase()}`},"Evaluation group name"),invalid:!!Ke.groupName,error:Ke.groupName?.message},i.createElement(m.I,{id:"groupName",readOnly:oe,...Ve("groupName",{required:"Evaluation group name is required."})})),i.createElement(d.g,{label:i.createElement(r._,{htmlFor:"groupInterval",description:"Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."},i.createElement(l.Stack,{gap:.5},"Rule group evaluation interval",i.createElement(M.s,{text:"How frequently to evaluate rules."}))),invalid:!!Ke.groupInterval,error:Ke.groupInterval?.message},i.createElement(m.I,{id:"groupInterval",placeholder:"1m",...Ve("groupInterval",j(at))})),(0,h.f)(ct("groupInterval")).exceedsLimit&&i.createElement(S,null),i.createElement("div",{className:G.modalButtons},i.createElement(o.u.ButtonRow,null,i.createElement(c.zx,{type:"button",disabled:!Ie||fe,onClick:Te(ye=>he(ye),Ge)},fe?"Saving...":"Save evaluation interval"),i.createElement(c.zx,{variant:"secondary",type:"button",disabled:fe,onClick:()=>Z(!1)},"Cancel"))),!dt&&i.createElement("div",null,"This group does not contain alert rules."),dt&&i.createElement(i.Fragment,null,i.createElement("div",null,"List of rules that belong to this group"),i.createElement("div",{className:G.evalRequiredLabel},"#Eval column represents the number of evaluations needed before alert starts firing."),i.createElement(H,{rulesWithoutRecordingRules:at}))))))}const _=k=>({modal:t.css`
    max-width: 560px;
  `,modalButtons:t.css`
    top: -24px;
    position: relative;
  `,formInput:t.css`
    flex: 1;
  `,tableWrapper:t.css`
    margin-top: ${k.spacing(2)};
    margin-bottom: ${k.spacing(2)};
    height: 100%;
  `,evalRequiredLabel:t.css`
    font-size: ${k.typography.bodySmall.fontSize};
  `})},89149:(Y,T,e)=>{"use strict";e.d(T,{Ii:()=>P,gr:()=>h});var t=e(9892),n=e(66111),i=e(77258),s=e(67483),l=e(72648),f=e(61860),u=e(53739),o=e(99085),d=e(79662),r=e(20383),m=e(52694),c=e(80498),p=e(28371),g=e(68854),y=e(24990),E=e(8674),v=e(78443);const h=15,P=({rule:D})=>{const b=(0,l.wW)(C),{namespace:{rulesSource:M}}=D,x=(0,o.$9)(D.annotations);return n.createElement("div",null,n.createElement(p.f,{rule:D,rulesSource:M,isViewMode:!1}),n.createElement("div",{className:b.wrapper},n.createElement("div",{className:b.leftSide},n.createElement(a,{rule:D}),!!D.labels&&!!Object.keys(D.labels).length&&n.createElement(c.C,{label:"Labels",horizontal:!0},n.createElement(m.s,{labels:D.labels})),n.createElement(E.C,{rulesSource:M,rule:D,annotations:x}),n.createElement(g.J,{annotations:x})),n.createElement("div",{className:b.rightSide},n.createElement(y.C,{rulesSource:M,rule:D}))),n.createElement(v.M,{rule:D,itemsDisplayLimit:h}))},a=({rule:D})=>{let b,M=D.group.interval,x=D.promRule?.lastEvaluation,R=D.promRule?.evaluationTime;return(0,d.yF)(D.rulerRule)||(b=D.rulerRule?.for),n.createElement(n.Fragment,null,M&&n.createElement(c.C,{label:"Evaluate",horizontal:!0},"Every ",M),b&&n.createElement(c.C,{label:"For",horizontal:!0},b),x&&!(0,r.gV)(x)&&n.createElement(c.C,{label:"Last evaluation",horizontal:!0},n.createElement(f.u,{placement:"top",content:`${(0,i.dq)(x,{format:"YYYY-MM-DD HH:mm:ss"})}`,theme:"info"},n.createElement("span",null,`${(0,s.CQ)(x).locale("en").fromNow(!0)} ago`))),x&&!(0,r.gV)(x)&&R!==void 0&&n.createElement(c.C,{label:"Evaluation time",horizontal:!0},n.createElement(f.u,{placement:"top",content:`${R}s`,theme:"info"},n.createElement("span",null,(0,u.q)({timeInMs:R*1e3,humanize:!0})))))},C=D=>({wrapper:t.css`
    display: flex;
    flex-direction: row;

    ${D.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,leftSide:t.css`
    flex: 1;
  `,rightSide:t.css`
    ${D.breakpoints.up("md")} {
      padding-left: 90px;
      width: 300px;
    }
  `})},28371:(Y,T,e)=>{"use strict";e.d(T,{f:()=>Q});var t=e(9892),n=e(66111),i=e(56895),s=e(63418),l=e(49187),f=e(59959),u=e(35645),o=e(72648),d=e(31403),r=e(94599),m=e(52081),c=e(98102),p=e(60499),g=e(82002),y=e(39031),E=e(27876),v=e(46063),h=e(30173),P=e(44391),a=e(35029);const C=(0,n.lazy)(()=>e.e(7520).then(e.bind(e,87520))),D=(0,n.lazy)(()=>e.e(1481).then(e.bind(e,81481)));var b=(G=>(G.Loki="loki",G.Annotations="annotations",G))(b||{});function M(){const[G,le]=(0,n.useState)(!1),[fe,ae]=(0,n.useState)(),de=(0,o.wW)(x),ee=u.v.unifiedAlerting.alertStateHistoryBackend,me=u.v.unifiedAlerting.alertStateHistoryPrimary,ne=[ee,me].some(Te=>Te==="loki")?"loki":"annotations",se=(0,n.useCallback)(()=>{ae(void 0),le(!1)},[]),he=(0,n.useCallback)(Te=>{ae(Te),le(!0)},[]);return{StateHistoryModal:(0,n.useMemo)(()=>fe?n.createElement(a.u,{isOpen:G,onDismiss:se,closeOnBackdropClick:!0,closeOnEscape:!0,title:"State history",className:de.modal,contentClassName:de.modalContent},n.createElement(n.Suspense,{fallback:"Loading..."},ne==="loki"&&n.createElement(D,{ruleUID:fe.grafana_alert.uid}),ne==="annotations"&&n.createElement(C,{alertId:fe.grafana_alert.id??""}))):null,[fe,G,se,ne,de]),showStateHistoryModal:he,hideStateHistoryModal:se}}const x=G=>({modal:t.css`
    width: 80%;
    height: 80%;
    min-width: 800px;
  `,modalContent:t.css`
    height: 100%;
    width: 100%;
    padding: ${G.spacing(2)};
  `});var R=e(72004),S=e(97953),O=e(20194),U=e(37190),I=e(45849),F=e(10505),w=e(60048),K=e(79662),L=e(61860),V=e(58509),H=e(2390);const j=({children:G,plugin:le,loadingComponent:fe,notInstalledFallback:ae})=>{const{loading:de,installed:ee}=usePluginBridge(le);return de?fe??null:ee?React.createElement(React.Fragment,null,G):ae??null};function A(G,le,fe){const ae=new URLSearchParams(fe).toString();return`/a/${G}${le}`+(ae?"?"+ae:"")}const _=({title:G="",severity:le="",url:fe=""})=>{const ae=A(H.W.Incident,"/incidents/declare",{title:G,severity:le,url:fe}),{loading:de,installed:ee,settings:me}=(0,V.n)(H.W.Incident);return n.createElement(n.Fragment,null,de===!0&&n.createElement(d.zx,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident"),ee===!1&&n.createElement(L.u,{content:"Grafana Incident is not installed or is not configured correctly"},n.createElement(d.zx,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident")),me&&n.createElement(d.Qj,{icon:"fire",size:"sm",type:"button",href:ae},"Declare Incident"))};var k=e(41273);const Q=({rule:G,rulesSource:le,isViewMode:fe})=>{const ae=(0,o.wW)(oe),{namespace:de,group:ee,rulerRule:me}=G,{StateHistoryModal:q,showStateHistoryModal:ne}=M(),se=(0,E.useDispatch)(),he=(0,i.TH)(),ue=(0,p.iG)(),[Te,Ve]=(0,n.useState)(),ct=(0,I.HY)(le)?le:(0,O.Xy)(le.jsonData.alertmanagerUid)?.name,Ie=g.Vt.hasPermission(E.AccessControlAction.DataSourcesExplore),Ke=[],Ge=[],at=()=>{if(Te&&Te.rulerRule){const ut=w.Zk((0,I.EG)(Te.namespace.rulesSource),Te.namespace.name,Te.group.name,Te.rulerRule);se((0,R.hS)(ut,{navigateTo:fe?"/alerting/list":void 0})),Ve(void 0)}},dt=(0,K.Jq)(ee),Re=(0,I.EG)(le),ye=(0,K.Pc)(G.rulerRule)&&Boolean(G.rulerRule.grafana_alert.provenance),Pe=(0,K.x_)(G.promRule)&&G.promRule.state===v.x_.Firing,be=(0,S.Bz)(Re),Be=g.Vt.hasPermission(be.create),{isEditable:ke,isRemovable:ot}=(0,P.M)(Re,me),ft=Z(G),gt=()=>(0,F.t6)(le,G),St=he.pathname+he.search;if((0,I.jq)(le)&&Ie&&!dt&&Ke.push(n.createElement(d.Qj,{size:"sm",key:"explore",variant:"primary",icon:"chart-line",target:"__blank",href:(0,F.mH)(le.name,G.query)},"See graph")),G.annotations[U.q6.runbookURL]&&Ke.push(n.createElement(d.Qj,{size:"sm",key:"runbook",variant:"primary",icon:"book",target:"__blank",href:s.QX.sanitizeUrl(G.annotations[U.q6.runbookURL])},"View runbook")),G.annotations[U.q6.dashboardUID]){const ut=G.annotations[U.q6.dashboardUID];if(ut){Ke.push(n.createElement(d.Qj,{size:"sm",key:"dashboard",variant:"primary",icon:"apps",target:"__blank",href:`d/${encodeURIComponent(ut)}`},"Go to dashboard"));const Dt=G.annotations[U.q6.panelID];Dt&&Ke.push(n.createElement(d.Qj,{size:"sm",key:"panel",variant:"primary",icon:"apps",target:"__blank",href:`d/${encodeURIComponent(ut)}?viewPanel=${encodeURIComponent(Dt)}`},"Go to panel"))}}if(ft&&ct&&Ke.push(n.createElement(d.Qj,{size:"sm",key:"silence",icon:"bell-slash",target:"__blank",href:(0,F.Vv)(ct,G)},"Silence")),(0,K.Pc)(G.rulerRule)&&Ke.push(n.createElement(n.Fragment,{key:"history"},n.createElement(d.zx,{size:"sm",icon:"history",onClick:()=>(0,K.Pc)(G.rulerRule)&&ne(G.rulerRule)},"Show state history"),q)),Pe&&re()&&Ke.push(n.createElement(n.Fragment,{key:"declare-incident"},n.createElement(_,{title:G.name,url:gt()}))),fe&&me){const ut=(0,I.EG)(le),Dt=w.Zk(ut,de.name,ee.name,me);if(ke&&!dt&&(Ge.push(n.createElement(r.m,{key:"copy",icon:"copy",onClipboardError:ie=>{ue.error("Error while copying URL",ie)},size:"sm",getText:gt},"Copy link to rule")),!ye)){const ie=l.Cj.renderUrl(`${u.v.appSubUrl}/alerting/${encodeURIComponent(w.$V(Dt))}/edit`,{returnTo:St});Ge.push(n.createElement(d.Qj,{size:"sm",key:"edit",variant:"secondary",icon:"pen",href:ie},"Edit"))}Be&&!dt&&Ge.push(n.createElement(k.E,{key:"clone",text:"Copy",ruleIdentifier:Dt,isProvisioned:ye})),ot&&!dt&&!ye&&Ge.push(n.createElement(d.zx,{size:"sm",type:"button",key:"delete",variant:"secondary",icon:"trash-alt",onClick:()=>Ve(G)},"Delete"))}return Ke.length||Ge.length?n.createElement(n.Fragment,null,n.createElement("div",{className:ae.wrapper},n.createElement(m.Lh,{width:"auto"},Ke.length?Ke:n.createElement("div",null)),n.createElement(m.Lh,{width:"auto"},Ge.length?Ge:n.createElement("div",null))),!!Te&&n.createElement(c.s,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:at,onDismiss:()=>Ve(void 0)})):null};function re(){const G=u.v.buildInfo,le=G.edition===f.e.OpenSource,fe=G.env==="development";return!le||fe}function Z(G){const le=(0,K.Pc)(G.rulerRule),{useGetAlertmanagerChoiceStatusQuery:fe}=h.h,{currentData:ae,isLoading:de}=fe(void 0,{skip:!le});if(!le||de)return!1;const ee=g.Vt.hasAccess(E.AccessControlAction.AlertingInstanceCreate,g.Vt.isEditor),me=ae?.alertmanagersChoice===y.TE.External,q=ae?.alertmanagersChoice===y.TE.All;return ee&&(!me||q)}const oe=G=>({wrapper:t.css`
    padding: ${G.spacing(2)} 0;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    flex-wrap: wrap;
    border-bottom: solid 1px ${G.colors.border.medium};
  `})},68854:(Y,T,e)=>{"use strict";e.d(T,{J:()=>f});var t=e(9892),n=e(66111),i=e(72648),s=e(99085),l=e(78543);function f(o){const d=(0,i.wW)(u),{annotations:r}=o,m=(0,s.XW)(r);return r.length===0?null:n.createElement("div",{className:d.annotations},r.map(([c,p])=>n.createElement(l.a,{key:c,annotationKey:c,value:p,valueLink:m.get(c)})))}const u=()=>({annotations:t.css`
    margin-top: 46px;
  `})},24990:(Y,T,e)=>{"use strict";e.d(T,{C:()=>d});var t=e(9892),n=e(66111),i=e(86647),s=e(72648),l=e(97573),f=e(45849),u=e(79662),o=e(80498);function d(m){const{rulesSource:c,rule:p}=m,g=(0,s.wW)(r),y=(0,n.useMemo)(()=>{if((0,f.jq)(c))return[{name:c.name,icon:c.meta.info.logos.small}];if((0,u.Pc)(p.rulerRule)){const{data:E}=p.rulerRule.grafana_alert,v=E.reduce((h,P)=>{const a=(0,i.F)().getInstanceSettings(P.datasourceUid);return!a||a.uid===l.Yq||(h[a.name]={name:a.name,icon:a.meta.info.logos.small}),h},{});return Object.values(v)}return[]},[p,c]);return y.length===0?null:n.createElement(o.C,{label:"Data source"},y.map(({name:E,icon:v},h)=>n.createElement("div",{key:E},v&&n.createElement(n.Fragment,null,n.createElement("img",{alt:`${E} datasource logo`,className:g.dataSourceIcon,src:v})," "),E)))}function r(m){const c=m.spacing(2);return{dataSourceIcon:t.css`
      width: ${c};
      height: ${c};
    `}}},8674:(Y,T,e)=>{"use strict";e.d(T,{C:()=>E});var t=e(9892),n=e(66111),i=e(45849),s=e(80498),l=e(57706),f=e(56975),u=e(67660),o=e(12724),d=e(72648),r=e(19370),m=e(21899),c=e(94884);const p=({language:h,expr:P})=>{const a=(0,n.useMemo)(()=>[(0,u.Z)({onlyIn:D=>D.type==="code_block",getSyntax:()=>h},{...l.languages,[h]:h==="logql"?r.ZP:m.ZP})],[h]),C=(0,n.useMemo)(()=>(0,o.l1)(P),[P]);return n.createElement(f.ML,{"data-testid":"expression-editor",plugins:a,value:C})},g=({expression:h,rulesSource:P})=>{const a=(0,d.wW)(y);return n.createElement(c.t,{className:(0,t.cx)(a.well,"slate-query-field")},(0,i.jq)(P)?n.createElement(p,{expr:h,language:P.type===i.ye.Loki?"logql":"promql"}):h)},y=h=>({well:t.css`
    font-family: ${h.typography.fontFamilyMonospace};
  `});function E(h){const{annotations:P,rulesSource:a,rule:C}=h,D=v();return(0,i.jq)(a)?n.createElement(s.C,{label:"Expression",horizontal:!0,className:(0,t.cx)({[D.exprRow]:!!P.length})},n.createElement(g,{expression:C.query,rulesSource:a})):null}const v=()=>({exprRow:t.css`
    margin-bottom: 46px;
  `})},78443:(Y,T,e)=>{"use strict";e.d(T,{M:()=>b});var t=e(9892),n=e(82897),i=e(66111),s=e(56895),l=e(72648),f=e(31403),u=e(30151),o=e(34719),d=e(64353),r=e(2594),m=e(46063);const c=({className:R,onStateFilterChange:S,stateFilter:O,filterType:U,itemPerStateStats:I})=>{const F=(0,l.wW)(p),w=j=>function(){return I&&I[j]?i.createElement(o.V,{name:I[j].toFixed(0),colorIndex:9,className:F.tag}):null},K=Object.values(m.bj).map(j=>({label:j,value:j,component:w(j)})),V=[m.x_.Firing,m.x_.Pending].map(j=>({label:(0,n.capitalize)(j),value:j,component:w(j)})),H=U==="grafana"?K:V;return i.createElement("div",{className:R,"data-testid":"alert-instance-state-filter"},i.createElement(d._,null,"State"),i.createElement(r.S,{options:H,value:O,onChange:S,onClick:j=>{j===O&&S(void 0)}}))};function p(R){return{tag:t.css`
      font-size: 11px;
      font-weight: normal;
      padding: ${R.spacing(.25,.5)};
      vertical-align: middle;
      margin-left: ${R.spacing(.5)};
    `}}var g=e(20194),y=e(10505),E=e(40286),v=e(45849),h=e(79662),P=e(80498),a=e(48563),C=e(46253);function D(R){const S=(0,l.wW)(x),{onClick:O,stats:U}=R;return i.createElement("div",{className:S.footerRow},i.createElement("div",null,"Showing ",U.visibleItemsCount," out of ",U.totalItemsCount," instances"),i.createElement(f.zx,{size:"sm",variant:"secondary","data-testid":"show-all",onClick:O},"Show all ",U.totalItemsCount," alert instances"))}function b(R){const S=(0,s.k6)(),{rule:{promRule:O,namespace:U,instanceTotals:I},itemsDisplayLimit:F=Number.POSITIVE_INFINITY,pagination:w,enableFiltering:K=!1}=R,[L,V]=(0,i.useState)(),[H,j]=(0,i.useState)(),[A]=(0,i.useState)(Math.floor(Math.random()*100)),_=`queryString-${A}`,k=(0,l.wW)(x),Q=(0,v.HY)(U.rulesSource)?v.GC:"prometheus",re=(0,i.useMemo)(()=>(0,h.x_)(O)&&O.alerts?.length?M(L,H,(0,y.Zl)(E.As.Importance,O.alerts)):[],[O,H,L]);if(!(0,h.x_)(O))return null;const Z=re.slice(0,F),oe=(0,n.countBy)(O.alerts,se=>(0,m.ED)(se.state)),G=(0,n.sum)(Object.values(I)),le=G-Z.length,fe={totalItemsCount:G,visibleItemsCount:Z.length},ae=(0,y.V2)(U.rulesSource,R.rule,location.pathname+location.search),de=(0,C.r0)(I),q=K?()=>j(void 0):()=>S.push(ae),ne=le?i.createElement(D,{stats:fe,onClick:q}):void 0;return i.createElement(P.C,{label:"Matching instances",horizontal:!0},K&&i.createElement("div",{className:(0,t.cx)(k.flexRow,k.spaceBetween)},i.createElement("div",{className:k.flexRow},i.createElement(u.F,{className:k.rowChild,key:_,defaultQueryString:L,onFilterChange:se=>V(se)}),i.createElement(c,{className:k.rowChild,filterType:Q,stateFilter:H,onStateFilterChange:j,itemPerStateStats:oe}))),!K&&i.createElement("div",{className:k.stats},de),i.createElement(a.o,{instances:Z,pagination:w,footerRow:ne}))}function M(R,S,O){let U=[...O];if(R){const I=(0,g.Zh)(R||"");U=U.filter(({labels:F})=>(0,g.eD)(F,I))}return S&&(U=U.filter(I=>(0,m.ED)(I.state)===S)),U}const x=R=>({flexRow:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      width: 100%;
      flex-wrap: wrap;
      margin-bottom: ${R.spacing(1)};
    `,spaceBetween:t.css`
      justify-content: space-between;
    `,rowChild:t.css`
      margin-right: ${R.spacing(1)};
    `,footerRow:t.css`
      display: flex;
      flex-direction: column;
      gap: ${R.spacing(1)};
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,instancesContainer:t.css`
      margin-bottom: ${R.spacing(2)};
    `,stats:t.css`
      display: flex;
      gap: ${R.spacing(1)};
      padding: ${R.spacing(1,0)};
    `})},46253:(Y,T,e)=>{"use strict";e.d(T,{Pb:()=>c,WN:()=>m,r0:()=>p});var t=e(82897),n=e.n(t),i=e(64681),s=e.n(i),l=e(66111),f=e(26418),u=e(19985),o=e(43055),d=e(46063);const r={recording:0,alerting:0,[d.x_.Pending]:0,[d.x_.Inactive]:0,paused:0,error:0,nodata:0},m=({namespaces:g})=>{const y={...r};g.forEach(({groups:P})=>{P.forEach(a=>{const C=(0,t.omitBy)(a.totals,t.isUndefined);for(let D in C)y[D]+=C[D]})});const E=p(y),v=Boolean(E.length),h=(0,t.sum)(Object.values(y));return E.unshift(l.createElement(l.Fragment,{key:"total"},h," ",s()("rule",h))),l.createElement(f.Stack,{direction:"row"},v&&l.createElement("div",null,l.createElement(f.Stack,{gap:.5},E)))},c=({group:g})=>{const y=g.totals,E=g?.interval,v=p(y),h=Boolean(v.length);return l.createElement(f.Stack,{direction:"row"},h&&l.createElement("div",null,l.createElement(f.Stack,{gap:.5},v)),E&&l.createElement(l.Fragment,null,l.createElement("div",null,"|"),l.createElement(u.C,{text:E,icon:"clock-nine",color:"blue"})))};function p(g){const y=[];return g[o.P.Alerting]&&y.push(l.createElement(u.C,{color:"red",key:"firing",text:`${g[o.P.Alerting]} firing`})),g.error&&y.push(l.createElement(u.C,{color:"red",key:"errors",text:`${g.error} errors`})),g.nodata&&y.push(l.createElement(u.C,{color:"blue",key:"nodata",text:`${g.nodata} no data`})),g[o.P.Pending]&&y.push(l.createElement(u.C,{color:"orange",key:"pending",text:`${g[o.P.Pending]} pending`})),g[o.P.Normal]&&g.paused&&y.push(l.createElement(u.C,{color:"green",key:"paused",text:`${g[o.P.Normal]} normal (${g.paused} paused)`})),g[o.P.Normal]&&!g.paused&&y.push(l.createElement(u.C,{color:"green",key:"inactive",text:`${g[o.P.Normal]} normal`})),g.recording&&y.push(l.createElement(u.C,{color:"purple",key:"recording",text:`${g.recording} recording`})),y}},69369:(Y,T,e)=>{"use strict";e.d(T,{S:()=>s});var t=e(66111),n=e(86647),i=e(22069);function s(l){return{allDataSourcesAvailable:(0,t.useMemo)(()=>l.filter(u=>!(0,i.Pr)(u.datasourceUid)).every(u=>{const o=(0,n.F)().getInstanceSettings(u.datasourceUid);return Boolean(o)}),[l])}}},61627:(Y,T,e)=>{"use strict";e.d(T,{DD:()=>E,Fm:()=>g,Kd:()=>r,ZP:()=>y,Zo:()=>d});var t=e(82897),n=e.n(t),i=e(66111),s=e(43055),l=e(46063),f=e(45849),u=e(79662),o=e(69945);function d(b){const M=(0,o._)(O=>O.promRules),x=(0,o._)(O=>O.rulerRules),R=(0,i.useRef)({}),S=(0,i.useMemo)(()=>{if(b){const O=(0,f.o_)(b);if(!O)throw new Error(`Unknown rules source: ${b}`);return[O]}return(0,f.h_)()},[b]);return(0,i.useMemo)(()=>S.map(O=>{const U=(0,f.jq)(O)?O.name:O,I=M[U]?.result,F=x[U]?.result,w=R.current[U];if(w&&w.promRules===I&&w.rulerRules===F)return w.result;const K={};Object.entries(F||{}).forEach(([V,H])=>{const j={rulesSource:O,name:V,groups:[]};K[V]=j,c(j,H)}),I?.forEach(({name:V,groups:H})=>{const j=K[V]=K[V]||{rulesSource:O,name:V,groups:[]};p(j,H)});const L=Object.values(K);return R.current[U]={promRules:I,rulerRules:F,result:L},L}).flat(),[M,x,S])}function r(b){return b.map(M=>{const x={...M,groups:[]};return x.groups.push({name:"default",rules:m(M.groups.flatMap(R=>R.rules)),totals:v(M.groups)}),x})}function m(b){return b.sort((M,x)=>M.name.localeCompare(x.name))}function c(b,M=[]){b.groups=M.map(x=>{const R=x.rules.filter(U=>(0,u.yF)(U)).length,S=x.rules.filter(U=>(0,u.Pc)(U)&&U.grafana_alert.is_paused).length,O={name:x.name,interval:x.interval,source_tenants:x.source_tenants,rules:[],totals:{paused:S,recording:R}};return O.rules=x.rules.map(U=>P(U,b,O)),O})}function p(b,M){const x=new Map;b.groups.forEach(R=>x.set(R.name,R)),M.forEach(R=>{let S=x.get(R.name);S||(S={name:R.name,rules:[],totals:E(R)},b.groups.push(S),x.set(R.name,S)),S.totals={...S.totals,...E(R)};const O=new Map;S.rules.forEach(U=>{const I=O.get(U.name);I?I.push(U):O.set(U.name,[U])}),(R.rules??[]).forEach(U=>{const I=a(U,O,b.rulesSource);I?(I.promRule=U,I.instanceTotals=(0,u.x_)(U)?g(U):{},I.filteredInstanceTotals=(0,u.x_)(U)?y(U):{}):S.rules.push(h(U,b,S))})})}function g(b){const M=(0,t.countBy)(b.alerts,"state");if(b.totals){const{normal:x,...R}=b.totals;return{...R,inactive:x}}return{alerting:M[s.P.Alerting],pending:M[s.P.Pending],inactive:M[s.P.Normal],nodata:M[s.P.NoData],error:M[s.P.Error]+M.err}}function y(b){if(b.totalsFiltered){const{normal:M,...x}=b.totalsFiltered;return{...x,inactive:M}}return{}}function E(b){if(b.totals){const{firing:S,...O}=b.totals;return{...O,alerting:S}}const M=(0,t.countBy)(b.rules,S=>(0,u.x_)(S)&&S.state),x=(0,t.countBy)(b.rules,S=>S.health),R=b.rules.filter(S=>(0,u.OP)(S)).length;return{alerting:M[l.x_.Firing],error:x.error,nodata:x.nodata,inactive:M[l.x_.Inactive],pending:M[l.x_.Pending],recording:R}}function v(b){const M={};return b.forEach(x=>{const R=x.totals;Object.entries(R).forEach(([S,O])=>{M[S]||(M[S]=0),M[S]+=O})}),M}function h(b,M,x){return{name:b.name,query:b.query,labels:b.labels||{},annotations:(0,u.x_)(b)?b.annotations||{}:{},promRule:b,namespace:M,group:x,instanceTotals:(0,u.x_)(b)?g(b):{},filteredInstanceTotals:(0,u.x_)(b)?y(b):{}}}function P(b,M,x){return(0,u.cG)(b)?{name:b.alert,query:b.expr,labels:b.labels||{},annotations:b.annotations||{},rulerRule:b,namespace:M,group:x,instanceTotals:{},filteredInstanceTotals:{}}:(0,u.yF)(b)?{name:b.record,query:b.expr,labels:b.labels||{},annotations:{},rulerRule:b,namespace:M,group:x,instanceTotals:{},filteredInstanceTotals:{}}:{name:b.grafana_alert.title,query:"",labels:b.labels||{},annotations:b.annotations||{},rulerRule:b,namespace:M,group:x,instanceTotals:{},filteredInstanceTotals:{}}}function a(b,M,x){const R=M.get(b.name);if(!R)return;if((0,f.HY)(x))return R[0];const S=R.find(U=>!U.promRule&&C(U,b,!0));if(S)return S;const O=R.find(U=>!U.promRule&&C(U,b,!1));if(O)return O}function C(b,M,x=!0){return b.name===M.name?(0,t.isEqual)([x?D(b.query):"",b.labels,b.annotations],[x?D(M.query):"",M.labels||{},(0,u.x_)(M)?M.annotations||{}:{}]):!1}function D(b){return b.length>1&&b[0]==="("&&b[b.length-1]===")"&&(b=b.slice(1,-1)),b=b.replace(/\s|\n/g,""),b.split("").sort().join("")}},55485:(Y,T,e)=>{"use strict";e.d(T,{W:()=>f});var t=e(66111),n=e(27876),i=e(72004),s=e(46818),l=e(69945);function f(u){const o=(0,n.useDispatch)(),d=(0,l._)(r=>r.folders);if((0,t.useEffect)(()=>{u&&o((0,i.sw)(u))},[o,u]),u){const r=d[u]||s.oq;return{folder:r.result,loading:r.loading}}return{loading:!1}}},44391:(Y,T,e)=>{"use strict";e.d(T,{M:()=>f});var t=e(82002),n=e(97953),i=e(79662),s=e(55485),l=e(69945);function f(u,o){const d=(0,l._)(v=>v.dataSources),r=o&&(0,i.Pc)(o)?o.grafana_alert.namespace_uid:void 0,m=(0,n.Bz)(u),{folder:c,loading:p}=(0,s.W)(r);if(!o)return{isEditable:!1,isRemovable:!1,loading:!1};if((0,i.Pc)(o)){if(!r)throw new Error(`Rule ${o.grafana_alert.title} does not have a folder uid, cannot determine if it is editable.`);if(!c)return{isEditable:!1,isRemovable:!1,loading:p};const v=c.canSave,h=t.Vt.hasAccessInMetadata(m.update,c,v),P=t.Vt.hasAccessInMetadata(m.delete,c,v);return{isEditable:h,isRemovable:P,loading:p}}const g=Boolean(d[u]?.result?.rulerConfig),y=t.Vt.hasAccess(m.update,t.Vt.isEditor),E=t.Vt.hasAccess(m.delete,t.Vt.isEditor);return{isEditable:y&&g,isRemovable:E&&g,loading:d[u]?.loading}}},25724:(Y,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(82897),n=e.n(t),i=e(66111);function s(l,f=1,u){const[o,d]=(0,i.useState)(f),r=(0,i.useMemo)(()=>(0,t.chunk)(l,u),[l,u]),m=r.length,c=r[o-1]??[],p=(o-1)*u+1,g=(0,t.clamp)(o*u,l.length),y=(0,i.useCallback)(h=>{d((0,t.clamp)(h,1,r.length))},[d,r]),E=(0,i.useCallback)(()=>y(o+1),[o,y]),v=(0,i.useCallback)(()=>y(o-1),[o,y]);return(0,i.useEffect)(()=>d(1),[m]),{page:o,onPageChange:y,numberOfPages:m,pageItems:c,pageStart:p,pageEnd:g,nextPage:E,previousPage:v}}},58509:(Y,T,e)=>{"use strict";e.d(T,{n:()=>i});var t=e(59679),n=e(13011);function i(s){const{loading:l,error:f,value:u}=(0,t.Z)(()=>(0,n.a)(s,{showErrorAlert:!1})),o=u&&!f&&!l,d=u?.enabled;return l&&!u?{loading:!0}:!o||!d?{loading:!1,installed:!1}:{loading:l,installed:!0,settings:u}}},69945:(Y,T,e)=>{"use strict";e.d(T,{_:()=>n});var t=e(27876);function n(i,s){return(0,t.useSelector)(l=>i(l.unifiedAlerting),s)}},734:(Y,T,e)=>{"use strict";e.d(T,{VG:()=>V,HY:()=>j,ug:()=>H});var t=e(46063),n=e(79662);const i=1,s=2,l=3,f=4,u=5,o=6,d=7,r=8,m=9,c=10,p=11,g=12,y=0,E=1,v=2,h=3,P=4,a=5,C=6,D=7;var b=e(82897),M=e(25181);const x=M.WQ.deserialize({version:14,states:"!vOQOPOOOrOPO'#ChOOOO'#Ch'#ChOQOPO'#ClOOOO'#Ci'#CiQQOPOOO!gOQO'#C^O!lOPO'#CjO!qOPO,59SOOOO,59W,59WOOOO-E6g-E6gOOOO,58x,58xOOOO,59U,59UOOOO-E6h-E6h",stateData:"$O~ORUOTUOUUOVUOWUOXUOYUOZUOaPOcQO~ObVOR[XT[XU[XV[XW[XX[XY[XZ[Xa[Xc[X~OSZO~Oa[O~ObVOR[aT[aU[aV[aW[aX[aY[aZ[aa[ac[a~OR~T~U~V~W~Y~Z~RZYXWVUTa~",goto:"zaPPbPPPPPPPPPbgmPsVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken FreeFormExpression",maxTerm:19,skippedNodes:[0],repeatNodeCount:2,tokenData:"#$QRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[=b#[#]F[#]#`#Y#`#a!!n#a#b#Y#b#c!+h#c#f#Y#f#g!:f#g#h!Av#h#i!Jp#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQcPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQbPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i/|#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0TeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U1f#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h3O#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4h#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j6Q#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7j#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W9S#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y:l#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:scSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]<O!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR<VcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR=ieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g>z#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@d#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jA|#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBTeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#eCf#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCmcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]Dx!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREPcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRFceSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YGt#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRG{eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#UI^#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRIeeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#aJv#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRJ}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#iL`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]Mx#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNPcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]! [!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! ccSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!!ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!$W#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!$_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!%p#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%weSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!'Y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'aeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(r#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(ycSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!*U!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*]cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!+oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!-Q#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!.j#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!.qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!0S#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!1l#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1seSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!3U#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3]eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!4n#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!6W#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!7p#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!7wcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!9S!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9ZcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!:meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!<O#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!=h#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!?Q#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?XcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!@d!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@kcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!A}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!C`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!Dx#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EPeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!Fb#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!FieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Gz#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HRcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!I^!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IecSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!JweSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n!LY#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LaeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!Mr#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!MyeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y# [#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# ccSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#!n!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#!ucSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:114,nameSpaceFilter:116,labelFilter:118,groupFilter:120,ruleFilter:122,stateFilter:66,typeFilter:124,healthFilter:126},tokenPrec:128}),R={[l]:"datasource",[u]:"namespace",[o]:"label",[r]:"rule",[d]:"group",[m]:"state",[c]:"type",[p]:"health"};var S=(_=>(_.dataSource="dataSourceFilter",_.nameSpace="nameSpaceFilter",_.label="labelFilter",_.group="groupFilter",_.rule="ruleFilter",_.state="stateFilter",_.type="typeFilter",_.health="healthFilter",_))(S||{});function O(_,k,Q){w(_,k,re=>{if(re.type.id===s){const Z=U(_,re);if(Z.type&&Z.value){const oe=Q[Z.type];oe&&oe(Z.value)}}else if(re.type.id===g){const Z=Q[g];Z&&Z(I(_,re))}})}function U(_,k){if(k.type.id!==s)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const Q=k.firstChild;if(!Q)return{type:void 0,value:void 0};const re=k.getChild(f),Z=re?(0,b.trim)(I(_,re),'"'):void 0;return{type:Q.type.id,value:Z}}function I(_,k){return _.slice(k.from,k.to).trim().replace(/\"/g,"")}function F(_,k,Q){const re=[];w(_,k,oe=>{oe.type.id===s&&oe.firstChild&&re.push(oe.firstChild),oe.type.id===g&&re.push(oe)});let Z=[];return re.forEach(oe=>{const G=Q.findIndex(le=>le.type===oe.type.id);if(G!==-1){if(oe.parent?.type.is(s)){const le=R[oe.type.id],fe=Q.splice(G,1)[0];Z.push(`${le}:${K(fe.value)}`)}if(oe.type.is(g)){const le=Q.splice(G,1)[0];Z.push(le.value)}}}),Q.forEach(oe=>{oe.type===g?Z.push(oe.value):Z.push(`${R[oe.type]}:${K(oe.value)}`)}),Z.join(" ")}function w(_,k,Q){const re=k.join(" ");let oe=x.configure({dialect:re}).parse(_).cursor();do Q(oe.node);while(oe.next())}function K(_){return/\s/.test(_)?`"${_}"`:_}const L=[S.dataSource,S.nameSpace,S.label,S.group,S.rule,S.state,S.type,S.health];var V=(_=>(_.Ok="ok",_.Error="error",_.NoData="nodata",_.Unknown="unknown",_))(V||{});function H(_){const k={labels:[],freeFormWords:[],dataSourceNames:[]},Q={[l]:re=>k.dataSourceNames.push(re),[u]:re=>k.namespace=re,[d]:re=>k.groupName=re,[r]:re=>k.ruleName=re,[o]:re=>k.labels.push(re),[m]:re=>k.ruleState=A(re),[c]:re=>(0,n.Wd)(re)?k.ruleType=re:void 0,[p]:re=>k.ruleHealth=(0,n.vU)(re),[g]:re=>k.freeFormWords.push(re)};return O(_,L,Q),k}function j(_,k){const Q=[];return k.dataSourceNames&&Q.push(...k.dataSourceNames.map(re=>({type:l,value:re}))),k.namespace&&Q.push({type:u,value:k.namespace}),k.groupName&&Q.push({type:d,value:k.groupName}),k.ruleName&&Q.push({type:r,value:k.ruleName}),k.ruleState&&Q.push({type:m,value:k.ruleState}),k.ruleType&&Q.push({type:c,value:k.ruleType}),k.ruleHealth&&Q.push({type:p,value:k.ruleHealth}),k.labels&&Q.push(...k.labels.map(re=>({type:o,value:re}))),k.freeFormWords&&Q.push(...k.freeFormWords.map(re=>({type:g,value:re}))),F(_,L,Q)}function A(_){if(_==="normal")return t.x_.Inactive;if((0,t.I9)(_))return _}},81001:(Y,T,e)=>{"use strict";e.d(T,{v:()=>S});var t=e(46528),n=e(59980),i=e(59724),s=e(57027),l=e(9471),f=e(44288),u=e(52666),o=e(83881),d=e(32921),r=e(47891),m=e(75849),c=e(59957),p=e(86647),g=e(77599),y=e(29930),E=e(75e3),v=e(88039),h=e(59584),P=e(97573);const a={from:21600,to:0},C=(L,V)=>{const H=D(L,V);if(!H)return a;const{from:j,to:A}=M(H,V);return!j.length&&!A.length?a:{from:Math.max(...j),to:Math.min(...A)}},D=(L,V)=>{switch(L.type){case P.Us.classic:return b(L);case P.Us.math:return x(L,V);case P.Us.resample:case P.Us.reduce:case P.Us.threshold:return R(L)}},b=L=>L.conditions?.map(V=>V.query.params[0]),M=(L,V)=>{let H=[],j=[a.to];for(const A of L){const _=V.find(k=>k.refId===A);!_||!_.relativeTimeRange||(H.push(_.relativeTimeRange.from),j.push(_.relativeTimeRange.to))}return{from:H,to:j}},x=(L,V)=>V.filter(H=>H.queryType==="query"&&L.expression?.includes(H.refId)).map(H=>H.refId),R=L=>L.expression?[L.expression]:void 0;class S{constructor(V=(0,y.i)(),H=(0,p.F)()){this.backendSrv=V,this.dataSourceSrv=H,this.subject=new t.t(1),this.lastResult={}}get(){return this.subject.asObservable()}async run(V){if(V.length===0){const H=U(V,u.Gu.Done);return this.subject.next(H)}for(const H of V)if(!(0,E.j)(H.model)){const j=await this.dataSourceSrv.get(H.datasourceUid);if(j.filterQuery&&!j.filterQuery(H.model)){const A=U(V,u.Gu.Done);return this.subject.next(A)}}this.subscription=O(this.backendSrv,V).subscribe({next:H=>{const j=K(H,(A,_)=>{const k=this.lastResult[A],Q=(0,o.zR)(_,k);return(0,h.C)(Q,k)});this.lastResult=j,this.subject.next(this.lastResult)},error:H=>{this.lastResult=w(this.lastResult,H),this.subject.next(this.lastResult)}})}cancel(){if(!this.subscription)return;this.subscription.unsubscribe();let V=!1;const H=K(this.lastResult,(j,A)=>(A.state===u.Gu.Loading&&(V=!0),{...A,state:u.Gu.Done}));V&&this.subject.next(H)}destroy(){this.subject&&this.subject.complete(),this.cancel()}}const O=(L,V)=>{const H=U(V,u.Gu.Loading),j={data:{data:V},url:"/api/v1/eval",method:"POST",requestId:(0,f.Z)()};return(0,d.x)({whileLoading:H,source:L.fetch(j).pipe(F(H),(0,i.K)(A=>(0,n.of)(w(H,A))),(0,v.V)(L,j.requestId),(0,s.B)())})},U=(L,V)=>L.reduce((H,j)=>(H[j.refId]={state:V,series:[],timeRange:I(j,L)},H),{}),I=(L,V)=>{if((0,E.j)(L.model)){const H=C(L.model,V);return r.relativeToTimeRange(H)}return L.relativeTimeRange?r.relativeToTimeRange(L.relativeTimeRange):(console.warn(`Query with refId: ${L.refId} did not have any relative time range, using default.`),(0,m.JK)())},F=L=>(0,l.U)(V=>{const{data:H}=V,j={};for(const[A,_]of Object.entries(H.results))j[A]={timeRange:L[A].timeRange,state:u.Gu.Done,series:_.frames.map(c.vP)};return j}),w=(L,V)=>{const H=(0,g.P)(V);return K(L,(j,A)=>({...A,state:u.Gu.Error,error:H}))},K=(L,V)=>{const H={};for(const[j,A]of Object.entries(L))H[j]=V(j,A);return H}},72004:(Y,T,e)=>{"use strict";e.d(T,{QY:()=>ot,Nc:()=>ie,r0:()=>De,X4:()=>ft,hS:()=>dt,oE:()=>at,S6:()=>gt,yO:()=>ke,mS:()=>Dt,Yh:()=>me,ei:()=>Ie,dV:()=>Ve,lB:()=>Ke,dB:()=>Be,on:()=>Ge,zy:()=>q,wE:()=>ne,vL:()=>St,sw:()=>ut,Ms:()=>Pe,Vj:()=>ye,dn:()=>he,y6:()=>ee,UR:()=>se,IA:()=>Te,nw:()=>ct,je:()=>ue,iH:()=>Je,wy:()=>Re,D8:()=>Ne,mM:()=>be,hv:()=>Xe,tg:()=>Le});var t=e(62992),n=e(82897),i=e(37932),s=e(35645),l=e(46063),f=e(77582),u=e(29930),o=e(41904),d=e(65583),r=e(49187),m=e(54899),c=e(45849);async function p(ve){try{const Se=await(0,d.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,c.gt)(ve)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:Se.data.template_files??{},template_file_provenances:Se.data.template_file_provenances??{},alertmanager_config:Se.data.alertmanager_config??{},last_applied:Se.data.last_applied,id:Se.data.id}}catch(Se){if(ve===c.GC&&(0,m.kW)(Se)&&Se.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw Se}}async function g(ve,Se){await(0,d.n)((0,m.i)().fetch({method:"POST",url:`/api/alertmanager/${(0,c.gt)(ve)}/config/api/v1/alerts`,data:Se,showErrorAlert:!1,showSuccessAlert:!1}))}async function y(ve){await(0,d.n)((0,m.i)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,c.gt)(ve)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function E(ve){return(await(0,d.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,c.gt)(ve)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function v(ve,Se){return(await(0,d.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,c.gt)(ve)}/api/v2/silences`,data:Se,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function h(ve,Se){await(0,m.i)().delete(`/api/alertmanager/${(0,c.gt)(ve)}/api/v2/silence/${encodeURIComponent(Se)}`)}async function P(ve,Se,$e=!0,Ye=!0,_e=!0){const Et=r.Cj.toUrlParams({silenced:$e,active:Ye,inhibited:_e})+Se?.map(je=>`filter=${encodeURIComponent(`${U(je.name)}=${je.isRegex?"~":""}"${U(je.value)}"`)}`).join("&")||"";return(await(0,d.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,c.gt)(ve)}/api/v2/alerts`+(Et?"?"+Et:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function a(ve){return(await(0,d.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,c.gt)(ve)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function C(ve){return(await(0,d.n)((0,m.i)().fetch({url:`/api/alertmanager/${(0,c.gt)(ve)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function D(ve,Se,$e){const Ye={receivers:Se,alert:$e};try{const _e=await(0,d.n)((0,m.i)().fetch({method:"POST",data:Ye,url:`/api/alertmanager/${(0,c.gt)(ve)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(b(_e.data))throw new Error(x(_e.data))}catch(_e){throw(0,m.kW)(_e)&&M(_e.data)&&b(_e.data)?new Error(x(_e.data)):_e}}function b(ve){return ve.receivers.some(Se=>Se.grafana_managed_receiver_configs.some($e=>$e.status==="failed"))}function M(ve){const Se=ve?.receivers;return Array.isArray(Se)?Se.every($e=>typeof $e.name=="string"&&Array.isArray($e.grafana_managed_receiver_configs)):!1}function x(ve){return ve.receivers.flatMap(Se=>Se.grafana_managed_receiver_configs.filter($e=>$e.status==="failed").map($e=>$e.error??"Unknown error.")).join("; ")}async function R(ve){await(0,d.n)((0,m.i)().fetch({method:"POST",data:ve,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{O()})}async function S(){return(await(0,d.n)((0,m.i)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function O(){return(await(0,d.n)((0,m.i)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function U(ve){return ve.replace(/"/g,'\\"')}function I(ve){return(0,m.i)().get("/api/annotations",{alertId:ve}).then(Se=>Se?.sort(F))}function F(ve,Se){const $e=(Et,pt)=>Et>pt?-1:pt>Et?1:0,Ye=$e(ve.timeEnd,Se.timeEnd);if(Ye)return Ye;const _e=$e(ve.time,Se.time);return _e||$e(ve.id,Se.id)}var w=e(44737),K=e(79572),L=e(644),V=e(95454),H=e(49011),j=e(61068),A=e(94617),_=e(20194),k=e(10505),Q=e(46818),re=e(60048),Z=e(21767),oe=e(79662);function G(ve){const Se=async ht=>{if((0,oe.Kl)(ht)){const we=await(0,H.m6)(ve);for(const[Qe,nt]of Object.entries(we))for(const it of nt){const yt=it.rules.find(Lt=>(0,oe.Pc)(Lt)&&Lt.grafana_alert?.uid===ht.uid);if(yt)return{group:it,ruleSourceName:c.GC,namespace:Qe,rule:yt}}}if((0,oe.E4)(ht)){const{ruleSourceName:we,namespace:Qe,groupName:nt}=ht,it=await(0,H.jJ)(ve,Qe,nt);if(!it)return null;const yt=it.rules.find(Lt=>{const Kt=re.Zk(we,Qe,it.name,Lt);return re.Dg(Kt,ht)});return yt?{group:it,ruleSourceName:we,namespace:Qe,rule:yt}:null}if((0,oe.qE)(ht))throw new Error("Native prometheus rules can not be edited in grafana.");return null},$e=async ht=>{const{namespace:we,group:Qe,rule:nt}=ht;if(Qe.rules.length===1){await(0,H.BC)(ve,we,Qe.name);return}await(0,H.P4)(ve,we,{...Qe,rules:Qe.rules.filter(it=>it!==nt)})},Ye=async(ht,we,Qe)=>{const{dataSourceName:nt,group:it,namespace:yt}=ht,Lt=(0,Z.yh)(ht);if(nt&&it&&yt){if(Qe){const un=await Se(re.CK(Qe));if(!un)throw new Error("Rule not found.");if(un.namespace!==yt||un.group.name!==it)await $e(un);else{const hn={...un.group,rules:un.group.rules.map(Wn=>Wn===un.rule?Lt:Wn),evaluateEvery:we};return await(0,H.P4)(ve,yt,hn),re.Zk(nt,yt,it,Lt)}}const Kt=await(0,H.jJ)(ve,yt,it),an=Kt?{...Kt,rules:[...Kt.rules,Lt]}:{name:it,rules:[Lt]};return await(0,H.P4)(ve,yt,an),re.Zk(nt,yt,it,Lt)}else throw new Error("Data source and location must be specified")},_e=async(ht,we,Qe)=>{const{folder:nt,group:it}=ht;if(!nt)throw new Error("Folder must be specified");const yt=(0,Z.mI)(ht),Lt=nt.title,Kt={name:it,interval:we};if(!Qe)return Et(Lt,Kt,yt);const an=await Se(re.CK(Qe));if(!an)throw new Error("Rule not found.");const un=an.namespace===Lt,hn=an.group.name===ht.group;return un&&hn?je(an,yt,we):pt(Lt,Kt,an,yt)},Et=async(ht,we,Qe)=>{const nt=await(0,H.jJ)(ve,ht,we.name);if(!nt)throw new Error(`No group found with name "${we.name}"`);const it={name:we.name,interval:we.interval,rules:(nt.rules??[]).concat(Qe)};return await(0,H.P4)(ve,ht,it),{uid:Qe.grafana_alert.uid??"",ruleSourceName:c.GC}},pt=async(ht,we,Qe,nt)=>(le(Qe,nt),await Et(ht,we,nt)),je=async(ht,we,Qe)=>{le(ht,we);const nt=ht.group.rules.map(it=>(0,oe.Pc)(it)&&it.grafana_alert.uid===ht.rule.grafana_alert.uid?we:it);return await(0,H.P4)(ve,ht.namespace,{name:ht.group.name,interval:Qe,rules:nt}),{uid:ht.rule.grafana_alert.uid,ruleSourceName:c.GC}};return{findEditableRule:Se,deleteRule:$e,saveLotexRule:Ye,saveGrafanaRule:_e}}function le(ve,Se){if(!(0,oe.Pc)(ve.rule))throw new Error("The rule is not a Grafana managed rule");const $e=ve.rule.grafana_alert.uid;Se.grafana_alert.uid=$e}const fe=30*1e3;function ae(ve,Se){const Ye=ve().unifiedAlerting.dataSources[Se]?.result;if(!Ye)throw new Error(`Data source configuration is not available for "${Se}" data source`);return Ye}function de(ve,Se){const $e=ae(ve,Se);if(!$e.rulerConfig)throw new Error(`Ruler API is not available for ${Se}`);return $e.rulerConfig}const ee=(0,t.hg)("unifiedalerting/fetchPromRules",async({rulesSourceName:ve,filter:Se,limitAlerts:$e,matcher:Ye,state:_e},Et)=>{await Et.dispatch(ct({rulesSourceName:ve}));const pt=(0,o.pM)(V.j,`[${ve}] Prometheus rules loaded`,{dataSourceName:ve,thunk:"unifiedalerting/fetchPromRules"});return await(0,Q.$b)(pt(ve,Se,$e,Ye,_e))}),me=(0,t.hg)("unifiedalerting/fetchAmConfig",(ve,Se)=>(0,Q.$b)((async()=>{if((0,c.RY)(ve))return C(ve).then(Et=>({alertmanager_config:Et.config,template_files:{}}));const{data:$e}=await Se.dispatch(K.T.endpoints.discoverAmFeatures.initiate({amSourceName:ve})),Ye=$e?.lazyConfigInit??!1,_e=(0,o.pM)(p,`[${ve}] Alertmanager config loaded`,{dataSourceName:ve,thunk:"unifiedalerting/fetchAmConfig"});return(0,k.fm)(()=>_e(ve),Et=>!!(0,Q.kk)(Et)?.includes("alertmanager storage object not found")&&!Ye,fe).then(Et=>(0,n.isEmpty)(Et.alertmanager_config)&&(0,n.isEmpty)(Et.template_files)&&ve!==c.GC?C(ve).then(pt=>({alertmanager_config:pt.config,template_files:{},template_file_provenances:Et.template_file_provenances,last_applied:Et.last_applied,id:Et.id})):Et).catch(Et=>{if(Ye&&(0,Q.kk)(Et)?.includes("alertmanager storage object not found"))return Promise.resolve({alertmanager_config:{},template_files:{},template_file_provenances:{}});throw Et})})())),q=(0,t.hg)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,Q.$b)(S())),ne=(0,t.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,Q.$b)(O())),se=(0,t.hg)("unifiedalerting/fetchRulerRules",async({rulesSourceName:ve,filter:Se},{dispatch:$e,getState:Ye})=>{await $e(ct({rulesSourceName:ve}));const _e=de(Ye,ve),Et=(0,o.pM)(H.m6,`[${ve}] Ruler rules loaded`,{dataSourceName:ve,thunk:"unifiedalerting/fetchRulerRules"});return await(0,Q.$b)(Et(_e,Se))});function he({rulesSourceName:ve}){return async(Se,$e)=>{await Se(ct({rulesSourceName:ve}));const Ye=ae($e,ve);await Se(ee({rulesSourceName:ve})),Ye.rulerConfig&&await Se(se({rulesSourceName:ve}))}}const ue=(0,t.hg)("unifiedalerting/fetchSilences",ve=>{const Se=(0,o.pM)(E,`[${ve}] Silences loaded`,{dataSourceName:ve,thunk:"unifiedalerting/fetchSilences"});return(0,Q.$b)(Se(ve))});function Te(ve){return(Se,$e)=>{const{rulerRules:Ye}=$e().unifiedAlerting,_e=Ye[ve];(0,n.isEmpty)(_e?.result)&&!(_e&&(0,oe.m$)(_e))&&!_e?.loading&&Se(se({rulesSourceName:ve}))}}function Ve(){return async ve=>{const Se=(0,c.mA)().map($e=>ve(ct({rulesSourceName:$e})));await Promise.allSettled(Se)}}const ct=(0,t.hg)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:ve})=>(0,Q.$b)((async()=>{if(ve===c.GC)return{name:c.GC,id:c.GC,rulerConfig:{dataSourceName:c.GC,apiVersion:"legacy"}};const Se=(0,c.VX)(ve);if(!Se)throw new Error(`Missing data source configuration for ${ve}`);const{id:$e,name:Ye}=Se,Et=await(0,o.pM)(w.C$,`[${ve}] Rules source features discovered`,{dataSourceName:ve,thunk:"unifiedalerting/fetchPromBuildinfo"})(Ye),pt=Et.features.rulerApiEnabled?{dataSourceName:Ye,apiVersion:Et.application===l.T8.Cortex?"legacy":"config"}:void 0;return{name:Ye,id:$e,rulerConfig:pt}})()),{condition:({rulesSourceName:ve},{getState:Se})=>{const $e=Se().unifiedAlerting.dataSources,Ye=Boolean($e[ve]?.result),_e=Boolean($e[ve]?.error);return!(Ye||_e)}});function Ie(ve=!1,Se={}){return async($e,Ye)=>{const _e=performance.now();await Promise.allSettled((0,c.mA)().map(async Et=>{await $e(ct({rulesSourceName:Et}));const{promRules:pt,rulerRules:je,dataSources:ht}=Ye().unifiedAlerting,we=ht[Et].result;if(!we)return;const Qe=ve||!pt[Et]?.loading,nt=(ve||!je[Et]?.loading)&&Boolean(we.rulerConfig);await Promise.allSettled([Qe&&$e(ee({rulesSourceName:Et,...Se})),nt&&$e(se({rulesSourceName:Et}))])})),(0,o.PN)("All Prom and Ruler rules loaded",{loadTimeMs:(performance.now()-_e).toFixed(0)})}}function Ke(ve=!1){return async(Se,$e)=>{const{promRules:Ye}=$e().unifiedAlerting;(0,c.mA)().map(_e=>{(ve||!Ye[_e]?.loading)&&Se(ee({rulesSourceName:_e}))})}}const Ge=(0,t.hg)("unifiedalerting/fetchEditableRule",(ve,Se)=>{const $e=de(Se.getState,ve.ruleSourceName);return(0,Q.$b)(G($e).findEditableRule(ve))});function at(ve,Se){return async($e,Ye)=>{(0,Q.Ez)((async()=>{const _e=(0,c.EG)(ve.rulesSource),Et=de(Ye,_e);await(0,H.BC)(Et,ve.name,Se.name),await $e(he({rulesSourceName:_e}))})(),{successMessage:"Group deleted"})}}function dt(ve,Se={}){return async($e,Ye)=>{(0,Q.Ez)((async()=>{const _e=de(Ye,ve.ruleSourceName),Et=G(_e),pt=await Et.findEditableRule(ve);if(!pt)throw new Error("Rule not found.");await Et.deleteRule(pt),await $e(he({rulesSourceName:pt.ruleSourceName})),Se.navigateTo&&i.E1.replace(Se.navigateTo)})(),{successMessage:"Rule deleted."})}}const Re=(0,t.hg)("unifiedalerting/saveRuleForm",({values:ve,existing:Se,redirectOnSave:$e,evaluateEvery:Ye},_e)=>(0,Q.Ez)((0,Q.$b)((async()=>{const{type:Et}=ve;let pt;if(Et===A.$.cloudAlerting||Et===A.$.cloudRecording){if(!ve.dataSourceName)throw new Error("The Data source has not been defined.");const je=de(_e.getState,ve.dataSourceName);pt=await G(je).saveLotexRule(ve,Ye,Se),await _e.dispatch(se({rulesSourceName:ve.dataSourceName}))}else if(Et===A.$.grafana){const je=de(_e.getState,c.GC);pt=await G(je).saveGrafanaRule(ve,Ye,Se),await _e.dispatch(se({rulesSourceName:c.GC}))}else throw new Error("Unexpected rule form type");if((0,o.PN)(o.z7.successSavingAlertRule,{type:Et,isNew:(!Se).toString()}),Se||(0,o.I5)({grafana_version:s.v.buildInfo.version,org_id:f.Vt.user.orgId,user_id:f.Vt.user.id}),$e)i.E1.push($e);else{const je=re.$V(pt);if(!je){i.E1.push("/alerting/list");return}const ht=`/alerting/${encodeURIComponent(je)}/edit`;i.E1.getLocation().pathname!==ht?i.E1.replace(ht):_e.dispatch(Ge(pt))}})()),{successMessage:Se?`Rule "${ve.name}" updated.`:`Rule "${ve.name}" saved.`,errorMessage:"Failed to save rule"})),ye=(0,t.hg)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,Q.$b)((0,L.i9)())),Pe=(0,t.hg)("unifiedalerting/fetchGrafanaAnnotations",ve=>(0,Q.$b)(I(ve))),be=(0,t.hg)("unifiedalerting/updateAMConfig",({alertManagerSourceName:ve,oldConfig:Se,newConfig:$e,successMessage:Ye,redirectPath:_e,refetch:Et},pt)=>(0,Q.Ez)((0,Q.$b)((async()=>{const je=await pt.dispatch(me(ve)).unwrap(),ht=(0,n.isEmpty)(je.alertmanager_config)&&(0,n.isEmpty)(je.template_files),we=JSON.stringify(je)!==JSON.stringify(Se);if(!ht&&we)throw new Error("It seems configuration has been recently updated. Please reload page and try again to make sure that recent changes are not overwritten.");await g(ve,(0,_.X4)($e)),Et&&await pt.dispatch(me(ve)),_e&&i.E1.push((0,k.eQ)(_e,ve))})()),{successMessage:Ye})),Be=(0,t.hg)("unifiedalerting/fetchAmAlerts",ve=>(0,Q.$b)(P(ve,[],!0,!0,!0))),ke=(ve,Se)=>async $e=>{await(0,Q.Ez)(h(ve,Se),{successMessage:"Silence expired."}),$e(ue(ve)),$e(Be(ve))},ot=(0,t.hg)("unifiedalerting/updateSilence",({alertManagerSourceName:ve,payload:Se,exitOnSave:$e,successMessage:Ye})=>(0,Q.Ez)((0,Q.$b)((async()=>{await v(ve,Se),$e&&i.E1.push("/alerting/silences")})()),{successMessage:Ye})),ft=(ve,Se)=>($e,Ye)=>{const _e=Ye().unifiedAlerting.amConfigs?.[Se]?.result;if(!_e)throw new Error(`Config for ${Se} not found`);if(!_e.alertmanager_config.receivers?.find(pt=>pt.name===ve))throw new Error(`Cannot delete receiver ${ve}: not found in config.`);const Et={..._e,alertmanager_config:{..._e.alertmanager_config,receivers:_e.alertmanager_config.receivers.filter(pt=>pt.name!==ve)}};return $e(be({newConfig:Et,oldConfig:_e,alertManagerSourceName:Se,successMessage:"Contact point deleted.",refetch:!0}))},gt=(ve,Se)=>($e,Ye)=>{const _e=Ye().unifiedAlerting.amConfigs?.[Se]?.result;if(!_e)throw new Error(`Config for ${Se} not found`);if(typeof _e.template_files?.[ve]!="string")throw new Error(`Cannot delete template ${ve}: not found in config.`);const Et={..._e.template_files};delete Et[ve];const pt={..._e,alertmanager_config:{..._e.alertmanager_config,templates:_e.alertmanager_config.templates?.filter(je=>je!==ve)},template_files:Et};return $e(be({newConfig:pt,oldConfig:_e,alertManagerSourceName:Se,successMessage:"Template deleted.",refetch:!0}))},St=(0,t.hg)("unifiedalerting/fetchFolder",ve=>(0,Q.$b)(u.ae.getFolderByUid(ve,{withAccessControl:!0}))),ut=ve=>(Se,$e)=>{$e().unifiedAlerting.folders[ve]?.dispatched||Se(St(ve))},Dt=(0,t.hg)("unifiedalerting/fetchAlertGroups",ve=>(0,Q.$b)(a(ve))),ie=(0,t.hg)("unifiedalerting/deleteAlertManagerConfig",async(ve,Se)=>(0,Q.Ez)((0,Q.$b)((async()=>{await y(ve),await Se.dispatch(me(ve))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),De=(ve,Se)=>async($e,Ye)=>{const _e=Ye().unifiedAlerting.amConfigs[ve].result,Et=_e?.alertmanager_config?.mute_time_intervals?.filter(({name:pt})=>pt!==Se)??[];_e&&(0,Q.Ez)($e(be({alertManagerSourceName:ve,oldConfig:_e,newConfig:{..._e,alertmanager_config:{..._e.alertmanager_config,route:_e.alertmanager_config.route?(0,_.rU)(Se,_e.alertmanager_config?.route):void 0,mute_time_intervals:Et}},refetch:!0})),{successMessage:`Deleted "${Se}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},Ne=(0,t.hg)("unifiedalerting/testReceivers",({alertManagerSourceName:ve,receivers:Se,alert:$e})=>(0,Q.Ez)((0,Q.$b)(D(ve,Se,$e)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),Je=(ve,Se)=>ve.filter($e=>{const{forDuration:Ye}=(0,j.qd)($e,Se),_e=(0,j.Bg)(Ye),Et=(0,j.Bg)(Se);return _e!==0&&_e<Et}),Xe=(0,t.hg)("unifiedalerting/updateLotexNamespaceAndGroup",async(ve,Se)=>(0,Q.Ez)((0,Q.$b)((async()=>{const{rulesSourceName:$e,namespaceName:Ye,groupName:_e,newNamespaceName:Et,newGroupName:pt,groupInterval:je}=ve,ht=de(Se.getState,$e),we=await(0,H.m6)(ht);if(!Boolean(we[Ye]))throw new Error(`Namespace "${Ye}" not found.`);const nt=we[Ye].find(Lt=>Lt.name===_e);if(!nt)throw new Error(`Group "${_e}" not found.`);const it=Boolean(we[Ye].find(Lt=>Lt.name===pt));if(pt!==_e&&it)throw new Error(`Group "${pt}" already exists in namespace "${Ye}".`);const yt=Boolean(we[Et]);if(Et!==Ye&&yt)throw new Error(`Namespace "${Et}" already exists.`);if(Et===Ye&&_e===pt&&je===nt.interval)throw new Error("Nothing changed.");if(je!==nt.interval){const Lt=Je(nt.rules,je??"1m");if(Lt.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${Lt.map(Kt=>{const{alertName:an}=(0,j.qd)(Kt,je??"");return an}).join(",")}`)}if(Et!==Ye){for(const Lt of we[Ye])await(0,H.P4)(ht,Et,Lt.name===_e?{...Lt,name:pt,interval:je}:Lt);await(0,H.sz)(ht,Ye)}else await(0,H.P4)(ht,Ye,{...nt,name:pt,interval:je}),pt!==_e&&await(0,H.BC)(ht,Ye,_e);await Se.dispatch(se({rulesSourceName:$e}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Le=(0,t.hg)("unifiedalerting/updateRulesOrderForGroup",async(ve,Se)=>(0,Q.Ez)((0,Q.$b)((async()=>{const{rulesSourceName:$e,namespaceName:Ye,groupName:_e,newRules:Et}=ve,pt=de(Se.getState,$e),ht=(await(0,H.m6)(pt))[Ye].find(Qe=>Qe.name===_e);if(!ht)throw new Error(`Group "${_e}" not found.`);const we={name:ht.name,interval:ht.interval,rules:Et};await(0,H.P4)(pt,Ye,we),await Se.dispatch(se({rulesSourceName:$e}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Ue=(0,t.hg)("unifiedAlerting/addExternalAlertmanagers",async(ve,Se)=>(0,Q.Ez)((0,Q.$b)((async()=>{await R(ve),Se.dispatch(ne())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},53715:(Y,T,e)=>{"use strict";e.d(T,{r:()=>i});var t=e(9892),n=e(39031);const i=s=>({[n.Z9.Active]:t.css`
    color: ${s.colors.error.text};
  `,[n.Z9.Suppressed]:t.css`
    color: ${s.colors.primary.text};
  `,[n.Z9.Unprocessed]:t.css`
    color: ${s.colors.secondary.text};
  `})},1562:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>n});var t=e(9892);const n=i=>t.css`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${i.spacing(2,0)};
  `},2390:(Y,T,e)=>{"use strict";e.d(T,{W:()=>t});var t=(n=>(n.Incident="grafana-incident-app",n.OnCall="grafana-oncall-app",n.MachineLearning="grafana-ml-app",n))(t||{})},94617:(Y,T,e)=>{"use strict";e.d(T,{$:()=>t});var t=(n=>(n.grafana="grafana",n.cloudAlerting="cloud-alerting",n.cloudRecording="cloud-recording",n))(t||{})},4528:(Y,T,e)=>{"use strict";e.d(T,{t:()=>t});var t=(n=>(n.seconds="s",n.minutes="m",n.hours="h",n.days="d",n.weeks="w",n))(t||{})},97953:(Y,T,e)=>{"use strict";e.d(T,{Bz:()=>c,Fo:()=>u,Ko:()=>m,Ob:()=>f,QX:()=>r,Rv:()=>g,ql:()=>p});var t=e(82002),n=e(84532),i=e(27876),s=e(45849);function l(y){return(0,s.HY)(y)?"grafana":"external"}const f={read:{grafana:i.AccessControlAction.AlertingInstanceRead,external:i.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:i.AccessControlAction.AlertingInstanceCreate,external:i.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:i.AccessControlAction.AlertingInstanceUpdate,external:i.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:i.AccessControlAction.AlertingInstanceUpdate,external:i.AccessControlAction.AlertingInstancesExternalWrite}},u={read:{grafana:i.AccessControlAction.AlertingNotificationsRead,external:i.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:i.AccessControlAction.AlertingNotificationsWrite,external:i.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:i.AccessControlAction.AlertingNotificationsWrite,external:i.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:i.AccessControlAction.AlertingNotificationsWrite,external:i.AccessControlAction.AlertingNotificationsExternalWrite}},o={read:i.AccessControlAction.AlertingProvisioningRead,write:i.AccessControlAction.AlertingProvisioningWrite},d={read:{grafana:i.AccessControlAction.AlertingRuleRead,external:i.AccessControlAction.AlertingRuleExternalRead},create:{grafana:i.AccessControlAction.AlertingRuleCreate,external:i.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:i.AccessControlAction.AlertingRuleUpdate,external:i.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:i.AccessControlAction.AlertingRuleDelete,external:i.AccessControlAction.AlertingRuleExternalWrite}};function r(y){const E=l(y);return{read:f.read[E],create:f.create[E],update:f.update[E],delete:f.delete[E]}}function m(y){const E=l(y);return{read:u.read[E],create:u.create[E],update:u.update[E],delete:u.delete[E]}}function c(y){const E=l(y);return{read:d.read[E],create:d.create[E],update:d.update[E],delete:d.delete[E]}}function p(y,E){return()=>t.Vt.evaluatePermission(()=>E,y)}function g(){return{canCreateGrafanaRules:t.Vt.hasAccess(i.AccessControlAction.FoldersRead,t.Vt.hasEditPermissionInFolders)&&t.Vt.hasAccess(d.create.grafana,t.Vt.hasEditPermissionInFolders),canCreateCloudRules:t.Vt.hasAccess(i.AccessControlAction.DataSourcesRead,t.Vt.isEditor)&&t.Vt.hasAccess(d.create.external,t.Vt.isEditor),canEditRules:y=>{const E=y===s.GC?t.Vt.hasEditPermissionInFolders:t.Vt.isEditor;return t.Vt.hasAccess(c(y).update,E)},canReadProvisioning:t.Vt.hasAccess(o.read,(0,n.RN)())}}},20194:(Y,T,e)=>{"use strict";e.d(T,{FM:()=>o,J8:()=>U,X4:()=>f,Xy:()=>x,Zh:()=>a,_J:()=>g,cm:()=>p,eD:()=>D,m8:()=>I,nv:()=>r,qw:()=>F,rU:()=>u,tA:()=>E,tC:()=>h,u6:()=>S,uK:()=>R,v7:()=>O,vB:()=>b,xz:()=>P,zy:()=>m});var t=e(82897),n=e.n(t),i=e(39031),s=e(82963),l=e(45849);function f(w){return w.alertmanager_config.receivers||(w.alertmanager_config.receivers=[{name:"default "}]),w.alertmanager_config.route||(w.alertmanager_config.route={receiver:w.alertmanager_config.receivers[0].name}),w.template_files||(w.template_files={}),w}function u(w,K){return{...K,mute_time_intervals:K.mute_time_intervals?.filter(V=>V!==w)??[],routes:K.routes?.map(V=>u(w,V))}}function o(w,K,L){return{...L,mute_time_intervals:L.mute_time_intervals?.map(V=>V===K?w:V),routes:L.routes?.map(V=>o(w,K,V))}}function d(w,K){return(K.receiver===w||K.routes?.some(L=>d(w,L)))??!1}function r(w,K){return(K.alertmanager_config.route&&d(w,K.alertmanager_config.route))??!1}function m(w){return w.isEqual?w.isRegex?i._M.regex:i._M.equal:w.isRegex?i._M.notRegex:i._M.notEqual}function c(w){switch(w){case i._M.equal:return{isEqual:!0,isRegex:!1};case i._M.notEqual:return{isEqual:!1,isRegex:!1};case i._M.regex:return{isEqual:!0,isRegex:!0};case i._M.notRegex:return{isEqual:!1,isRegex:!0}}}function p(w){return{name:w.name,value:w.value,operator:m(w)}}function g(w){return{name:w.name,value:w.value,...c(w.operator)}}function y(w){return`{${w.map(p).reduce((V,H)=>{const j=`${H.name}${H.operator}"${H.value}"`;return V?`${V},${j}`:j},"")}}`}const E=[{label:i._M.equal,description:"Equals",value:i._M.equal},{label:i._M.notEqual,description:"Does not equal",value:i._M.notEqual},{label:i._M.regex,description:"Matches regex",value:i._M.regex},{label:i._M.notRegex,description:"Does not match regex",value:i._M.notRegex}],v=[i._M.regex,i._M.notRegex,i._M.notEqual,i._M.equal];function h(w){const K=w.trim();if(K.startsWith("{")&&K.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${K}`);const L=v.map(_=>[_,K.indexOf(_)]).filter(([_,k])=>k>-1).sort((_,k)=>_[1]-k[1]);if(!L.length)throw new Error(`Invalid matcher: ${K}`);const[V,H]=L[0],j=K.slice(0,H).trim(),A=K.slice(H+V.length).trim();if(!j)throw new Error(`Invalid matcher: ${K}`);return{name:j,value:A,isRegex:V===i._M.regex||V===i._M.notRegex,isEqual:V===i._M.equal||V===i._M.regex}}function P(w){const K=m(w);return[w.name,K,w.value]}function a(w){const K=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,}]*)"?/g,L=[];return w.replace(K,(V,H,j,A)=>{const _=j===i._M.equal||j===i._M.regex,k=j===i._M.regex||j===i._M.notRegex;return L.push({name:H,value:k?C(A.trim()):A.trim(),isEqual:_,isRegex:k}),""}),L}function C(w){try{return new RegExp(w),w}catch{return""}}function D(w,K){return K.every(({name:L,value:V,isRegex:H,isEqual:j})=>Object.entries(w).some(([A,_])=>{const k=L===A;let Q;return j&&!H&&(Q=V===_),!j&&!H&&(Q=V!==_),j&&H&&(Q=new RegExp(V).test(_)),!j&&H&&(Q=!new RegExp(V).test(_)),k&&Q}))}function b(...w){const K=w.map(a).flat(),L=(0,t.uniqWith)(K,t.isEqual);return y(L)}function M(){return(0,s.x)().filter(w=>w.type===l.ye.Alertmanager)}function x(w){return M().find(K=>w===K.uid)}function R(w){const{times:K,weekdays:L,days_of_month:V,months:H,years:j}=w,A=S(K),_=O(L),k=U(V),Q=I(H),re=F(j);return[A,_,k,Q,re].join(", ")}function S(w){return"Times: "+(w?w?.map(({start_time:K,end_time:L})=>`${K} - ${L} UTC`).join(" and "):"All")}function O(w){return"Weekdays: "+(w?.map(K=>{if(K.includes(":"))return K.split(":").map(L=>{const V=L.slice(0,3);return V[0].toLocaleUpperCase()+V.slice(1)}).join("-");{const L=K.slice(0,3);return L[0].toLocaleUpperCase()+L.slice(1)}}).join(", ")??"All")}function U(w){return"Days of the month: "+(w?.join(", ")??"All")}function I(w){return"Months: "+(w?.join(", ")??"All")}function F(w){return"Years: "+(w?.join(", ")??"All")}},99085:(Y,T,e)=>{"use strict";e.d(T,{$9:()=>l,XW:()=>f});var t=e(66111),n=e(37190),i=e(10505);function s(u){return{dashboardUID:u.find(([o])=>o===n.q6.dashboardUID)?.[1],panelId:u.find(([o])=>o===n.q6.panelID)?.[1]}}function l(u){return(0,t.useMemo)(()=>Object.entries(u||{}).filter(([o,d])=>!!d.trim()),[u])}function f(u){const o=new Map,{panelId:d,dashboardUID:r}=s(u);return r&&o.set(n.q6.dashboardUID,(0,i.RQ)(r)),r&&d&&o.set(n.q6.panelID,(0,i.yM)(r,d)),o}},82963:(Y,T,e)=>{"use strict";e.d(T,{f:()=>s,x:()=>i});var t=e(35645),n=e(20383);function i(){return Object.values(t.v.datasources)}function s(l){if(!(0,n.wd)(t.v.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const f=(0,n.nd)(t.v.unifiedAlerting.minInterval);if(!l||!(0,n.wd)(l))return{globalLimit:f,exceedsLimit:!1};const u=(0,n.nd)(l),o=f>u&&u>0;return{globalLimit:f,exceedsLimit:o}}},37190:(Y,T,e)=>{"use strict";e.d(T,{c4:()=>i,cm:()=>l,de:()=>s,iF:()=>f,jZ:()=>t,m4:()=>u,p4:()=>n,q6:()=>m,vY:()=>c});const t="ruler not supported",n=2e4,i="alertmanager",s="alerting-alertmanager",l=2e4,f=2e4,u=2e4,o="timeseries",d="table",r="stat";var m=(p=>(p.description="description",p.summary="summary",p.runbookURL="runbook_url",p.alertId="__alertId__",p.dashboardUID="__dashboardUid__",p.panelID="__panelId__",p))(m||{});const c={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"}},45849:(Y,T,e)=>{"use strict";e.d(T,{EG:()=>a,Eu:()=>m,GC:()=>u,G_:()=>F,HY:()=>M,JY:()=>o,LE:()=>E,P:()=>I,RY:()=>b,VX:()=>c,aM:()=>p,c$:()=>x,gt:()=>O,h_:()=>P,jq:()=>D,mA:()=>h,o_:()=>R,v_:()=>C,ye:()=>d,z3:()=>y});var t=e(86647),n=e(82002),i=e(39031),s=e(27876),l=e(97953),f=e(82963);const u="grafana",o="-- Grafana --";var d=(w=>(w.Alertmanager="alertmanager",w.Loki="loki",w.Prometheus="prometheus",w))(d||{});const r=["loki","prometheus"];function m(){return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleExternalRead)?(0,f.x)().filter(w=>r.includes(w.type)&&w.jsonData.manageAlerts!==!1).sort((w,K)=>w.name.localeCompare(K.name)):[]}function c(w){return m().find(K=>K.name===w)}function p(){return(0,f.x)().filter(w=>w.type==="alertmanager").sort((w,K)=>w.name.localeCompare(K.name))}const g={name:u,imgUrl:"public/img/grafana_icon.svg"};function y(){return[g,...p().map(w=>({name:w.name,displayName:w.name,imgUrl:w.meta.info.logos.small,meta:w.meta}))]}function E(w){const K=[],L={instance:l.Ob.read,notification:l.Fo.read};if(n.Vt.hasPermission(L[w].grafana)&&K.push(g),n.Vt.hasPermission(L[w].external)){const V=p().map(H=>({name:H.name,displayName:H.name,imgUrl:H.meta.info.logos.small,meta:H.meta}));K.push(...V)}return K}function v(w){const K=x(w);if(!K)throw new Error(`Data source ${w} not found`);if(K.type!=="loki"&&K.type!=="prometheus")throw new Error(`Unexpected data source type ${K.type}`);return K}function h(){const w=m().map(K=>K.name);return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&w.push(u),w}function P(){const w=m();return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&w.push(u),w}function a(w){return D(w)?w.name:w}function C(w){return D(w)?w.uid:u}function D(w){return w!==u}function b(w){return w!==u&&x(w)?.jsonData?.implementation===i.sK.prometheus}function M(w){return w===u}function x(w){return(0,f.x)().find(K=>K.name===w)}function R(w){return w===u?u:x(w)}function S(w){if(w===u)return u;const K=x(w);if(!K)throw new Error(`Datasource "${w}" not found`);return String(K.id)}function O(w){if(w===u)return u;const K=x(w);if(!K)throw new Error(`Datasource "${w}" not found`);return K.uid}function U(){return(0,t.F)().getList({alerting:!0})[0]}function I(){const w=(0,t.F)().getInstanceSettings("default");return w?.meta.alerting??!1?w:U()}function F(w){return w.jsonData.manageAlerts!==!1}},61893:(Y,T,e)=>{"use strict";e.d(T,{P3:()=>t,cH:()=>n,nW:()=>i});function t(s){return Object.entries(s).map(([l,f])=>`${l}=${f}`).sort()}function n(s){return Object.entries(s).map(([l,f])=>[l,f])}function i(s){const l={};return s.forEach(f=>{l[f[0]]=f[1]}),l}},66367:(Y,T,e)=>{"use strict";e.d(T,{R:()=>s,r:()=>l});var t=e(82897),n=e.n(t),i=e(20194);function s(f){const u=f.filter(o=>!!o.trim()).map(o=>(0,i.tC)(o.trim()));return(0,t.uniqBy)(u,o=>o.name)}const l=f=>{const u=Object.entries(f).filter(([d])=>!(d.startsWith("__")&&d.endsWith("__"))),o=new URLSearchParams;return u.forEach(([d,r])=>o.append("matcher",`${d}=${r}`)),o}},10505:(Y,T,e)=>{"use strict";e.d(T,{ET:()=>g,GV:()=>p,HV:()=>x,J8:()=>a,RQ:()=>S,S0:()=>E,V2:()=>m,VN:()=>b,Vv:()=>D,Zl:()=>F,__:()=>M,aH:()=>R,eQ:()=>C,fm:()=>U,lC:()=>v,mH:()=>c,pF:()=>P,t6:()=>y,yM:()=>O});var t=e(82897),n=e.n(t),i=e(79662),s=e(40286),l=e(46063),f=e(37190),u=e(45849),o=e(66367),d=e(60048),r=e(93411);function m(w,K,L){const V=(0,u.EG)(w),H=d.Yd(V,K),j=encodeURIComponent(d.$V(H)),A=encodeURIComponent(V);return(0,r.u)(`/alerting/${A}/${j}/view`,{returnTo:L})}function c(w,K){return(0,r.u)("/explore",{left:JSON.stringify({datasource:w,queries:[{refId:"A",datasource:w,expr:K}],range:{from:"now-1h",to:"now"}})})}function p(w,K=""){return(0,r.u)(`/alerting/notifications/receivers/${encodeURIComponent(w)}/edit`,{alertmanager:K})}function g(w,K=""){return(0,r.u)("/alerting/routes/mute-timing/edit",{muteName:w,alertmanager:K})}function y(w,K){return(0,u.jq)(w)?(0,r._)(`/alerting/${encodeURIComponent(w.name)}/${encodeURIComponent(K.name)}/find`):window.location.href.split("?")[0]}function E(w){return w.reduce((K,{key:L,value:V})=>(K[L]=V,K),{})}const v=w=>{const K=w.queryString===void 0?void 0:String(w.queryString),L=w.alertState===void 0?void 0:String(w.alertState),V=w.dataSource===void 0?void 0:String(w.dataSource),H=w.ruleType===void 0?void 0:String(w.ruleType),j=w.groupBy===void 0?void 0:String(w.groupBy).split(",");return{queryString:K,alertState:L,dataSource:V,groupBy:j,ruleType:H}},h=w=>({queryString:w.get("queryString")??void 0,contactPoint:w.get("contactPoint")??void 0}),P=w=>{const K=w.queryString===void 0?void 0:String(w.queryString),L=w.silenceState===void 0?void 0:String(w.silenceState);return{queryString:K,silenceState:L}};function a(w){return Object.entries(w).map(([K,L])=>({key:K,value:L}))}function C(w,K,L){const V=new URLSearchParams(L);return K&&V.append(f.c4,K),`${w}?${V.toString()}`}function D(w,K){const L={alertname:K.name,...K.labels};return b(w,L)}function b(w,K){const L=new URLSearchParams;return L.append("alertmanager",w),(0,o.r)(K).forEach((H,j)=>L.append(j,H)),(0,r.u)("/alerting/silence/new",L)}function M(w){return(0,r.u)(`/datasources/edit/${w.uid}`)}function x(w){return(0,r.u)(`/dashboards/f/${w}`)}function R(w){return(0,r.u)(`/dashboards/f/${w.uid}/${w.title}/settings`)}function S(w){return(0,r.u)(`/d/${encodeURIComponent(w)}`)}function O(w,K){return(0,r.u)(`/d/${encodeURIComponent(w)}`,{viewPanel:K})}function U(w,K,L,V=1e3){const H=new Date().getTime(),j=()=>w().catch(A=>{if(K(A)&&new Date().getTime()-H<L)return new Promise(_=>setTimeout(_,V)).then(j);throw A});return j()}const I={[l.bj.Alerting]:1,[l.x_.Firing]:1,[l.bj.Error]:1,[l.bj.Pending]:2,[l.x_.Pending]:2,[l.x_.Inactive]:2,[l.bj.NoData]:3,[l.bj.Normal]:4};function F(w,K){if(w===s.As.Importance)return(0,t.sortBy)(K,V=>[I[(0,l.ED)(V.state)],(0,i.pB)(V).toLocaleLowerCase()]);if(w===s.As.TimeAsc)return(0,t.sortBy)(K,V=>[new Date(V.activeAt)||new Date,(0,i.pB)(V).toLocaleLowerCase()]);if(w===s.As.TimeDesc)return(0,t.sortBy)(K,V=>[new Date(V.activeAt)||new Date,(0,i.pB)(V).toLocaleLowerCase()]).reverse();const L=(0,t.sortBy)(K,V=>(0,i.pB)(V).toLocaleLowerCase());return w===s.As.AlphaDesc&&L.reverse(),L}},46818:(Y,T,e)=>{"use strict";e.d(T,{$b:()=>r,Ez:()=>m,PE:()=>g,i6:()=>o,jK:()=>d,kk:()=>p,op:()=>P,oq:()=>f,yR:()=>h});var t=e(62992),n=e(4063),i=e(54899),s=e(77582),l=e(41904);const f=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function u(a,C=f,D){if(a.pending.match(D))return{result:C.result,loading:!0,error:C.error,dispatched:!0,requestId:D.meta.requestId};if(a.fulfilled.match(D)){if(C.requestId===void 0||C.requestId===D.meta.requestId)return{...C,result:D.payload,loading:!1,error:void 0}}else if(a.rejected.match(D)&&C.requestId===D.meta.requestId)return{...C,loading:!1,error:D.error};return C}function o(a,C){return(0,t.oM)({name:a,initialState:f,reducers:{},extraReducers:D=>D.addDefaultCase((b,M)=>u(C,b,M))})}function d(a,C,D){return(0,t.oM)({name:a,initialState:{},reducers:{},extraReducers:b=>b.addDefaultCase((M,x)=>{if((0,t.Gx)(C)(x)){const R=x,S=D(R.meta.arg);return{...M,[S]:u(C,M[S],R)}}return M})})}function r(a){return a.catch(C=>{throw{message:p(C),code:C.statusCode}})}function m(a,C){return a.then(D=>(C.successMessage&&s.h$.emit(n.SI.alertSuccess,[C.successMessage]),D)).catch(D=>{const b=p(D);throw s.h$.emit(n.SI.alertError,[`${C.errorMessage??"Error"}: ${b}`]),D})}const c="Unknown Error";function p(a){if((0,i.kW)(a))if(a.data?.message){let D=a.data?.message;return typeof a.data?.error=="string"&&(D+=`; ${a.data.error}`),D}else{if(Array.isArray(a.data)&&a.data.length&&a.data[0]?.message)return a.data.map(D=>D?.message).filter(D=>!!D).join(" ");if(a.statusText)return a.statusText}const C=a?.message;return C||((0,l.PN)(l.z7.unknownMessageFromError,{error:JSON.stringify(a)}),c)}function g(a){return Object.values(a).every(y)}function y(a){return a.dispatched&&!a.loading}function E(a){return Object.values(a).every(v)}function v(a){return a.dispatched&&!a.loading&&!a.error}function h(a){return Object.values(a).some(P)}function P(a){return a?a.dispatched&&a.loading:!1}},21767:(Y,T,e)=>{"use strict";e.d(T,{DQ:()=>C,WL:()=>D,aR:()=>O,lN:()=>b,mI:()=>a,s0:()=>M,tO:()=>w,uZ:()=>v,yh:()=>h});var t=e(75849),n=e(47891),i=e(86647),s=e(22069),l=e(99822),f=e(97573),u=e(46063),o=e(67162),d=e(32139),r=e(94617),m=e(97953),c=e(37190),p=e(45849),g=e(10505),y=e(79662),E=e(20383);const v=()=>{const{canCreateGrafanaRules:K,canCreateCloudRules:L}=(0,m.Rv)();return Object.freeze({name:"",labels:[{key:"",value:""}],annotations:[{key:c.q6.summary,value:""},{key:c.q6.description,value:""},{key:c.q6.runbookURL,value:""}],dataSourceName:null,type:K?r.$.grafana:L?r.$.cloudAlerting:void 0,group:"",folder:null,queries:[],recordingRulesQueries:[],condition:"",noDataState:u.g0.NoData,execErrState:u.g0.Error,evaluateFor:"5m",evaluateEvery:d.E,namespace:"",expression:"",forTime:1,forTimeUnit:"m"})};function h(K){const{name:L,expression:V,forTime:H,forTimeUnit:j,type:A}=K;if(A===r.$.cloudAlerting)return{alert:L,for:`${H}${j}`,annotations:(0,g.S0)(K.annotations||[]),labels:(0,g.S0)(K.labels||[]),expr:V};if(A===r.$.cloudRecording)return{record:L,labels:(0,g.S0)(K.labels||[]),expr:V};throw new Error(`unexpected rule type: ${A}`)}function P(K){return[...(0,g.J8)(K||{}),{key:"",value:""}]}function a(K){const{name:L,condition:V,noDataState:H,execErrState:j,evaluateFor:A,queries:_,isPaused:k}=K;if(V)return{grafana_alert:{title:L,condition:V,no_data_state:H,exec_err_state:j,data:_.map(I),is_paused:Boolean(k)},for:A,annotations:(0,g.S0)(K.annotations||[]),labels:(0,g.S0)(K.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function C(K){const{ruleSourceName:L,namespace:V,group:H,rule:j}=K,A=v();if((0,p.HY)(L))if((0,y.Pc)(j)){const _=j.grafana_alert;return{...A,name:_.title,type:r.$.grafana,group:H.name,evaluateEvery:H.interval||A.evaluateEvery,evaluateFor:j.for||"0",noDataState:_.no_data_state,execErrState:_.exec_err_state,queries:_.data,condition:_.condition,annotations:P(j.annotations),labels:P(j.labels),folder:{title:V,id:_.namespace_id},isPaused:_.is_paused}}else throw new Error("Unexpected type of rule for grafana rules source");else if((0,y.cG)(j)){const _=D(j);return{...A,..._,type:r.$.cloudAlerting,dataSourceName:L,namespace:V,group:H.name}}else if((0,y.yF)(j)){const _=b(j);return{...A,..._,type:r.$.cloudRecording,dataSourceName:L,namespace:V,group:H.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function D(K){const L=v(),[V,H]=K.for?(0,E.bG)(K.for):[L.forTime,L.forTimeUnit];return{name:K.alert,expression:K.expr,forTime:V,forTimeUnit:H,annotations:P(K.annotations),labels:P(K.labels)}}function b(K){return{name:K.record,expression:K.expr,labels:P(K.labels)}}const M=()=>{const K=(0,p.P)();if(!K)return[...R("A","B")];const L=(0,t.Rr)();return[{refId:"A",datasourceUid:K.uid,queryType:"",relativeTimeRange:L,model:{refId:"A",hide:!1}},...R("B","C")]},x=K=>{const L=getDefaultRelativeTimeRange();return[{refId:"A",datasourceUid:K[0]?.uid||"",queryType:"",relativeTimeRange:L,model:{refId:"A",hide:!1}}]},R=(...K)=>{const L=K[0],V=K[1],H={refId:K[0],hide:!1,type:f.Us.reduce,datasource:{uid:f.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[],type:o.$.IsAbove},operator:{type:"and"},query:{params:[L]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},j={refId:V,hide:!1,type:f.Us.threshold,datasource:{uid:f.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[0],type:o.$.IsAbove},operator:{type:"and"},query:{params:[V]},reducer:{params:[],type:"last"}}],expression:L};return[{refId:L,datasourceUid:f.Yq,queryType:"",model:H},{refId:V,datasourceUid:f.Yq,queryType:"",model:j}]},S=async(K,L,V,H,j,A)=>{const _=[];for(const k of K){const Q=await(0,i.F)().get(k.datasource?.uid?k.datasource:H),re={uid:Q.uid,type:Q.type},Z=n.relativeToTimeRange(L),{interval:oe,intervalMs:G}=U(Z,A??Q.interval,j),le={__interval:{text:oe,value:oe},__interval_ms:{text:G,value:G},...V},fe=Q.interpolateVariablesInQueries?await Q.interpolateVariablesInQueries([k],le)[0]:k;if(re.uid===f.Yq){const ae={refId:fe.refId,queryType:"",relativeTimeRange:L,datasourceUid:f.Yq,model:fe};_.push(ae)}else{const ae=(0,i.F)().getInstanceSettings(re);if(ae&&ae.meta.alerting){const de={refId:fe.refId,queryType:fe.queryType??"",relativeTimeRange:L,datasourceUid:ae.uid,model:{...fe,maxDataPoints:j,intervalMs:G}};_.push(de)}}}return _},O=async(K,L)=>{const{targets:V}=K;if(!K.id||!L.uid)return;const H=n.timeRangeToRelative(n.convertRawToRange(L.time)),j=await S(V,H,K.scopedVars||{},K.datasource??void 0,K.maxDataPoints??void 0,K.interval??void 0);if(!j.length||!j.find(Q=>Q.datasourceUid!==f.Yq))return;if(!j.find(Q=>Q.datasourceUid===f.Yq)){const[Q,re]=R((0,l.Hs)(j),"-");j.push(Q);const[Z,oe]=R(Q.refId,(0,l.Hs)(j));j.push(oe)}const{folderId:A,folderTitle:_}=L.meta;return{type:r.$.grafana,folder:A&&_?{id:A,title:_}:void 0,queries:j,name:K.title,condition:j[j.length-1].refId,annotations:[{key:c.q6.dashboardUID,value:L.uid},{key:c.q6.panelID,value:String(K.id)}]}};function U(K,L,V){return V?n.calculateInterval(K,V,L):L&&n.intervalToMs(L)>1e3?{interval:L,intervalMs:n.intervalToMs(L)}:{interval:"1s",intervalMs:1e3}}function I(K){const L=K.model;return F(L)&&L.instant&&L.range?{...K,model:{...L,range:!0,instant:!1}}:K}function F(K){return"expr"in K&&"instant"in K&&"range"in K}function w(K){return"expr"in K}},60048:(Y,T,e)=>{"use strict";e.d(T,{$V:()=>E,CK:()=>f,Dg:()=>u,OA:()=>y,Om:()=>h,Yd:()=>l,Zk:()=>i,s0:()=>C});var t=e(45849),n=e(79662);function i(D,b,M,x){return(0,n.Pc)(x)?{uid:x.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:D,namespace:b,groupName:M,rulerRuleHash:h(x)}}function s(D,b,M,x){return{ruleSourceName:D,namespace:b,groupName:M,ruleHash:P(x)}}function l(D,b){const M=b.namespace.name,x=b.group.name;if(b.rulerRule)return i(D,M,x,b.rulerRule);if(b.promRule)return s(D,M,x,b.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function f(D){return i(D.ruleSourceName,D.namespace,D.group.name,D.rule)}function u(D,b){return(0,n.Kl)(D)&&(0,n.Kl)(b)?D.uid===b.uid:(0,n.E4)(D)&&(0,n.E4)(b)?D.groupName===b.groupName&&D.namespace===b.namespace&&D.rulerRuleHash===b.rulerRuleHash&&D.ruleSourceName===b.ruleSourceName:(0,n.qE)(D)&&(0,n.qE)(b)?D.groupName===b.groupName&&D.namespace===b.namespace&&D.ruleHash===b.ruleHash&&D.ruleSourceName===b.ruleSourceName:!1}const o="cri",d="pri";function r(D){return D.replace(/\$/g,"_DOLLAR_")}function m(D){return D.replace(/\_DOLLAR\_/g,"$")}function c(D){return D.replace(/\//g,"").replace(/\\/g,"")}function p(D){return D.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function g(D,b=!1){const x=(b?decodeURIComponent(D):D).split("$");if(x.length===1)return{uid:D,ruleSourceName:"grafana"};if(x.length===5){const[R,S,O,U,I]=x.map(m).map(p);if(R===o)return{ruleSourceName:S,namespace:O,groupName:U,rulerRuleHash:I};if(R===d)return{ruleSourceName:S,namespace:O,groupName:U,ruleHash:I}}throw new Error(`Failed to parse rule location: ${D}`)}function y(D,b=!1){if(D)try{return g(D,b)}catch{return}}function E(D){return(0,n.Kl)(D)?D.uid:(0,n.E4)(D)?[o,D.ruleSourceName,D.namespace,D.groupName,D.rulerRuleHash].map(String).map(r).map(c).join("$"):[d,D.ruleSourceName,D.namespace,D.groupName,D.ruleHash].map(String).map(r).map(c).join("$")}function v(D){let b=0;if(D.length===0)return b;for(let M=0;M<D.length;M++){const x=D.charCodeAt(M);b=(b<<5)-b+x,b=b&b}return b}function h(D){if((0,n.yF)(D))return v(JSON.stringify([D.record,D.expr,a(D.labels)])).toString();if((0,n.cG)(D))return v(JSON.stringify([D.alert,D.expr,a(D.annotations),a(D.labels)])).toString();if((0,n.Pc)(D))return D.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function P(D){if((0,n.OP)(D))return v(JSON.stringify([D.type,D.query,a(D.labels)])).toString();if((0,n.x_)(D))return v(JSON.stringify([D.type,D.query,a(D.annotations),a(D.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function a(D){return JSON.stringify(Object.entries(D||{}).sort((b,M)=>b[0].localeCompare(M[0])))}function C(D){return(0,n.Kl)(D)?t.GC:D.ruleSourceName}},79662:(Y,T,e)=>{"use strict";e.d(T,{Aq:()=>x,C7:()=>M,E:()=>p,E4:()=>v,Jq:()=>O,Kl:()=>E,OP:()=>d,PW:()=>U,Pc:()=>c,Re:()=>b,SS:()=>C,Wd:()=>h,cG:()=>r,m$:()=>y,pB:()=>g,qE:()=>P,ub:()=>S,vU:()=>a,x_:()=>o,yF:()=>m});var t=e(82897),n=e.n(t),i=e(97865),s=e(46063),l=e(734),f=e(37190),u=e(45849);function o(I){return typeof I=="object"&&I.type===s.pz.Alerting}function d(I){return typeof I=="object"&&I.type===s.pz.Recording}function r(I){return typeof I=="object"&&"alert"in I}function m(I){return typeof I=="object"&&"record"in I}function c(I){return typeof I=="object"&&"grafana_alert"in I}function p(I){return I.rulerRule&&c(I.rulerRule)&&Boolean(I.rulerRule.grafana_alert.is_paused)}function g(I){return JSON.stringify(I.labels)}function y(I){return I.error&&I.error?.message?.includes(f.jZ)}function E(I){return"uid"in I}function v(I){return"rulerRuleHash"in I}function h(I){return Object.values(s.pz).includes(I)}function P(I){return"ruleHash"in I}function a(I){switch(I){case"ok":return l.VG.Ok;case"nodata":return l.VG.NoData;case"error":case"err":return l.VG.Error;case"unknown":return l.VG.Unknown;default:return}}function C(I){return I===s.x_.Inactive?"Normal":(0,t.capitalize)(I)}const D=I=>I.reduce((F,{dataSourceName:w,name:K,groups:L})=>(L.forEach(({name:V,rules:H})=>{H.forEach(j=>{o(j)&&F.push({dataSourceName:w,namespaceName:K,groupName:V,rule:j})})}),F),[]),b=I=>o(I.promRule)?I.promRule:null,M=I=>I.reduce((F,{rulesSource:w,name:K,groups:L})=>(L.forEach(({name:V,rules:H})=>{H.forEach(j=>{j.promRule&&o(j.promRule)&&F.push({dataSourceName:(0,u.EG)(w),namespaceName:K,groupName:V,...j})})}),F),[]);function x(I){let F;return Object.values(i.Z).includes(I)?F=I:F=(0,s.ED)(I),R[F]}const R={[s.x_.Inactive]:"good",[s.x_.Firing]:"bad",[s.x_.Pending]:"warning",[s.bj.Alerting]:"bad",[s.bj.Error]:"bad",[s.bj.NoData]:"info",[s.bj.Normal]:"good",[s.bj.Pending]:"warning",[i.Z.NoData]:"info",[i.Z.Paused]:"warning",[i.Z.Alerting]:"bad",[i.Z.OK]:"good",[i.Z.Pending]:"warning",[i.Z.Unknown]:"info"};function S(I){return I?.alerts?I.alerts.reduce((F,w)=>{const K=(0,s.ED)(w.state)!==s.bj.Normal;if(w.activeAt&&K){const L=new Date(w.activeAt);if(F===null||F.getTime()>L.getTime())return L}return F},null):null}function O(I){return Array.isArray(I.source_tenants)}function U(I){return c(I)?I.grafana_alert.title:r(I)?I.alert:m(I)?I.record:""}},20383:(Y,T,e)=>{"use strict";e.d(T,{bG:()=>n,gV:()=>r,nd:()=>d,qr:()=>s,wd:()=>l});var t=e(4528);function n(m){const c=m.match(/(\d+)(\w+)/);if(c)return[Number(c[1]),c[2]];throw new Error(`Invalid interval description: ${m}`)}function i(m){const{sec:c,count:p}=describeInterval(m);return c*p}const s=Object.entries(t.t).map(([m,c])=>({label:m[0].toUpperCase()+m.slice(1),value:c}));function l(m){try{return d(m),!0}catch{return!1}}const f={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},u=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),o=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(t.t).join(", ")}`);function d(m){let c=m,p=[];function g(E){const v=u.exec(E),h=v?.groups?.value&&v?.groups?.type;if(!v||!h)throw o;v&&v.groups?.value&&v.groups?.type&&(c=c.replace(v[0],""),p.push([Number(v.groups.value),v.groups.type])),c&&g(c)}if(g(m),!p.length)throw o;return p.reduce((E,[v,h])=>{const P=v*f[h];return E+P},0)}const r=m=>m.includes("0001-01-01T00")},93411:(Y,T,e)=>{"use strict";e.d(T,{_:()=>i,u:()=>n});var t=e(35645);function n(s,l){const u=new URLSearchParams(l).toString();return`${t.v.appSubUrl}${s}${u?`?${u}`:""}`}function i(s,l){const u=new URLSearchParams(l).toString();try{const o=new URL(t.v.appSubUrl,t.v.appUrl);return o.pathname=s,`${o.href}${u?`?${u}`:""}`}catch{return n(s,l)}}},70659:(Y,T,e)=>{"use strict";e.d(T,{Dl:()=>s,_E:()=>i,lK:()=>l,xD:()=>n});var t=e(54899);function n(f){return(0,t.i)().post("/api/annotations",f)}function i(f){return(0,t.i)().put(`/api/annotations/${f.id}`,f)}function s(f){return(0,t.i)().delete(`/api/annotations/${f.id}`)}async function l(){return(await(0,t.i)().get("/api/annotations/tags")).result.tags.map(({tag:u,count:o})=>({term:u,count:o}))}},86953:(Y,T,e)=>{"use strict";e.d(T,{r:()=>r});var t=e(59980),n=e(39859),i=e(9471),s=e(47891),l=e(206),f=e(75434),u=e(573);let o=100;function d(){return"AQ"+o++}function r(m,c,p){const g={...u.yA,...c.annotations},y={...g.getDefaultQuery?.(),...p},E=g.prepareAnnotation(y);if(!E)return(0,t.of)({});const v=g.prepareQuery(E);if(!v)return(0,t.of)({});const h=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,P=s.calculateInterval(m.range,h,c.interval),a={__interval:{text:P.interval,value:P.interval},__interval_ms:{text:P.intervalMs.toString(),value:P.intervalMs},__annotation:{text:E.name,value:E}},C={startTime:Date.now(),requestId:d(),range:m.range,maxDataPoints:h,scopedVars:a,...P,app:l.zj.Dashboard,publicDashboardAccessToken:m.dashboard.meta.publicDashboardAccessToken,timezone:m.dashboard.timezone,targets:[{...v,refId:"Anno"}]};return(0,f.v7)(c,C).pipe((0,n.z)(D=>{const b=D?.series.length?D.series:D.annotations;return b?.length?g.processEvents(E,b).pipe((0,i.U)(M=>({panelData:D,events:M}))):(0,t.of)({panelData:D,events:[]})}))}},573:(Y,T,e)=>{"use strict";e.d(T,{$w:()=>h,r0:()=>p,yA:()=>m,yr:()=>P});var t=e(82897),n=e.n(t),i=e(59980),s=e(39859),l=e(9471),f=e(50928),u=e(99098),o=e(30471),d=e(39834),r=e(47694);const m={prepareAnnotation:a=>{if((0,t.isString)(a?.query)){const{query:C,...D}=a;return{...D,target:{refId:"annotation_query",query:C},mappings:{}}}return a},prepareQuery:a=>a.target,processEvents:(a,C)=>E(C,a.mappings)};function c(){return a=>a.pipe((0,s.z)(C=>{if(!C?.length)return(0,i.of)(void 0);if(C.length===1)return(0,i.of)(C[0]);const D={interpolate:b=>b};return(0,i.of)(C).pipe(f.Y.mergeTransformer.operator({},D),(0,l.U)(b=>b[0]))}))}const p=[{key:"time",field:a=>a.fields.find(C=>C.type===u.fS.time),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:a=>a.fields.find(C=>C.type===u.fS.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],g=[{key:"color"},{key:"isRegion"},{key:"source"}],y=[...r.vc.isPublicDashboardView?g:[],...p,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function E(a,C){return(0,i.of)(a).pipe(c(),(0,l.U)(D=>{if(!D?.length)return[];let b=!1,M=!1;const x={};for(const O of D.fields){const U=(0,o.CZ)(O,D);x[U.toLowerCase()]=O}C||(C={});const R=[];for(const O of y){const U=C[O.key]||{};if(U.source===d.L.Skip)continue;const I={key:O.key,split:O.split};if(U.source===d.L.Text)I.text=U.value;else{const F=(U.value||O.key).toLowerCase();I.field=x[F],!I.field&&O.field&&(I.field=O.field(D))}(I.field||I.text)&&(R.push(I),I.key==="time"?b=!0:I.key==="text"&&(M=!0))}if(!b||!M)return console.error("Cannot process annotation fields. No time or text present."),[];const S=[];for(let O=0;O<D.length;O++){const U={type:"default",color:"red"};for(const I of R){let F;if(I.text)F=I.text;else if(I.field&&(F=I.field.values[O],F!==void 0&&I.regex)){const w=I.regex.exec(F);w&&(F=w[1]?w[1]:w[0])}F!=null&&(I.split&&typeof F=="string"&&(F=F.split(",")),U[I.key]=F)}S.push(U)}return S}))}const v=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];function h(a){const{type:C}=a;return!(C==="datasource"||v.includes(C))}function P(a){const{type:C}=a;return v.includes(C)}},56777:(Y,T,e)=>{"use strict";e.d(T,{ZP:()=>r,dF:()=>f,iK:()=>s,j4:()=>l,nQ:()=>o,ql:()=>u});var t=e(62992);const n={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",migrationResult:{total:0,migrated:0,failed:0,failedApikeyIDs:[0],failedDetails:[]}},i=(0,t.oM)({name:"apiKeys",initialState:n,reducers:{apiKeysLoaded:(m,c)=>{const{keys:p,keysIncludingExpired:g}=c.payload,y=c.payload.keys.length===0&&c.payload.keysIncludingExpired.length>0?!0:m.includeExpired;return{...m,hasFetched:!0,keys:p,keysIncludingExpired:g,includeExpired:y}},setSearchQuery:(m,c)=>({...m,searchQuery:c.payload}),includeExpiredToggled:m=>({...m,includeExpired:!m.includeExpired}),isFetching:m=>({...m,hasFetched:!1}),setMigrationResult:(m,c)=>({...m,migrationResult:c.payload})}}),{apiKeysLoaded:s,includeExpiredToggled:l,isFetching:f,setSearchQuery:u,setMigrationResult:o}=i.actions,r={apiKeys:i.reducer}},85389:(Y,T,e)=>{"use strict";e.d(T,{AB:()=>l,AW:()=>s,ZP:()=>p,_E:()=>u,uX:()=>f});var t=e(62992);const n={settings:{},providerStatuses:{},isLoading:!1},i=(0,t.oM)({name:"authConfig",initialState:n,reducers:{settingsUpdated:(g,y)=>({...g,settings:y.payload}),providerStatusesLoaded:(g,y)=>({...g,providerStatuses:y.payload}),loadingBegin:g=>({...g,isLoading:!0}),loadingEnd:g=>({...g,isLoading:!1}),setError:(g,y)=>({...g,updateError:y.payload}),resetError:g=>({...g,updateError:void 0}),setWarning:(g,y)=>({...g,warning:y.payload}),resetWarning:g=>({...g,warning:void 0})}}),{settingsUpdated:s,providerStatusesLoaded:l,loadingBegin:f,loadingEnd:u,setError:o,resetError:d,setWarning:r,resetWarning:m}=i.actions,p={authConfig:i.reducer}},24290:(Y,T,e)=>{"use strict";e.d(T,{CN:()=>l.CN,Zi:()=>u,t4:()=>d,zs:()=>o});var t=e(90701),n=e(65583),i=e(52666),s=e(54899),l=e(31545);function f({baseURL:r}){async function m(c){try{const{data:p,...g}=await(0,n.n)((0,s.i)().fetch({...c,url:r+c.url,showErrorAlert:c.showErrorAlert}));return{data:p,meta:g}}catch(p){return c.manageError?c.manageError(p):{error:p}}}return m}const u=(0,t.LC)({reducerPath:"browseDashboardsAPI",baseQuery:f({baseURL:"/api"}),endpoints:r=>({getFolder:r.query({query:m=>({url:`/folders/${m}`,params:{accesscontrol:!0}})}),getAffectedItems:r.query({queryFn:async m=>{const p=Object.keys(m.folder).filter(E=>m.folder[E]).map(E=>(0,s.i)().get(`/api/folders/${E}/counts`)),g=await Promise.all(p),y={folder:Object.values(m.folder).filter(i.fQ).length,dashboard:Object.values(m.dashboard).filter(i.fQ).length,libraryPanel:0,alertRule:0};for(const E of g)y.folder+=E.folder,y.dashboard+=E.dashboard,y.alertRule+=E.alertrule??0;return{data:y}}})})}),{useGetAffectedItemsQuery:o,useGetFolderQuery:d}=u},3918:(Y,T,e)=>{"use strict";e.d(T,{Go:()=>u,J1:()=>d,hn:()=>o,iM:()=>f,qs:()=>l});var t=e(54899),n=e(10216),i=e(55185),s=e(27876);const l=(0,s.createAsyncThunk)("browseDashboards/fetchChildren",async r=>{const m=r===n.YQ?void 0:r;return await(0,i.o)(m,void 0,!0)}),f=(0,s.createAsyncThunk)("browseDashboards/deleteDashboard",async r=>(0,t.i)().delete(`/api/dashboards/uid/${r}`)),u=(0,s.createAsyncThunk)("browseDashboards/deleteFolder",async r=>(0,t.i)().delete(`/api/folders/${r}`,void 0,{params:{forceDeleteRules:!1}})),o=(0,s.createAsyncThunk)("browseDashboards/moveDashboard",async({dashboardUID:r,destinationUID:m})=>{const p={dashboard:(await(0,t.i)().get(`/api/dashboards/uid/${r}`)).dashboard,folderUid:m,overwrite:!1};return(0,t.i)().post("/api/dashboards/db",{message:"",...p})}),d=(0,s.createAsyncThunk)("browseDashboards/moveFolder",async({folderUID:r,destinationUID:m})=>(0,t.i)().post(`/api/folders/${r}/move`,{parentUID:m}))},88612:(Y,T,e)=>{"use strict";e.d(T,{ZP:()=>h,u6:()=>v,xm:()=>y,wk:()=>E});var t={};e.r(t),e.d(t,{extraReducerFetchChildrenFulfilled:()=>f,setAllSelection:()=>d,setFolderOpenState:()=>u,setItemSelectionState:()=>o});var n=e(62992),i=e(3918),s=e(10216),l=e(29910);function f(P,a){const C=a.meta.arg,D=a.payload;if(!C||C===s.YQ){P.rootItems=D;return}if(P.childrenByParentUID[C]=D,P.selectedItems.folder[C])for(const M of D)P.selectedItems[M.kind][M.uid]=!0}function u(P,a){const{folderUID:C,isOpen:D}=a.payload;P.openFolders[C]=D}function o(P,a){const{item:C,isSelected:D}=a.payload;function b(x,R){if(P.selectedItems[x][R]=D,x!=="folder")return;let S=P.childrenByParentUID[R]??[];for(const O of S)b(O.kind,O.uid)}b(C.kind,C.uid);let M=C.parentUID;for(;M;){const x=(0,l.i)(P.rootItems??[],P.childrenByParentUID,M);if(!x)break;D||(P.selectedItems[x.kind][x.uid]=!1),M=x.parentUID}P.selectedItems.$all=P.rootItems?.every(x=>P.selectedItems[x.kind][x.uid])??!1}function d(P,a){const{isSelected:C,folderUID:D}=a.payload;if(P.selectedItems.$all=C,C){let M=function(x){const R=x?P.childrenByParentUID[x]:P.rootItems;if(R)for(const S of R)P.selectedItems[S.kind][S.uid]=C,S.kind==="folder"&&M(S.uid)};var b=M;M(D)}else for(const M in P.selectedItems){if(!(M==="dashboard"||M==="panel"||M==="folder"))continue;const x=P.selectedItems[M];for(const R in x)x[R]=C}}const{extraReducerFetchChildrenFulfilled:r,...m}=t,c={rootItems:void 0,childrenByParentUID:{},openFolders:{},selectedItems:{dashboard:{},folder:{},panel:{},$all:!1}},p=(0,n.oM)({name:"browseDashboards",initialState:c,reducers:m,extraReducers:P=>{P.addCase(i.qs.fulfilled,r)}}),g=p.reducer,{setFolderOpenState:y,setItemSelectionState:E,setAllSelection:v}=p.actions,h={browseDashboards:g}},29910:(Y,T,e)=>{"use strict";e.d(T,{i:()=>t});function t(n,i,s){for(const l of n)if(l.uid===s)return l;for(const l in i){const f=i[l];if(f){for(const u of f)if(u.uid===s)return u}}}},86475:(Y,T,e)=>{"use strict";e.d(T,{D:()=>t,Z:()=>n});const t="connections",n={Base:`/${t}`,DataSources:`/${t}/datasources`,DataSourcesNew:`/${t}/datasources/new`,DataSourcesEdit:`/${t}/datasources/edit/:uid`,DataSourcesDashboards:`/${t}/datasources/edit/:uid/dashboards`,AddNewConnection:`/${t}/add-new-connection`,DataSourcesDetails:`/${t}/datasources/:id`}},10655:(Y,T,e)=>{"use strict";e.d(T,{Bl:()=>P,FJ:()=>y,Mi:()=>c,RS:()=>v,Rh:()=>d,WJ:()=>g,Ym:()=>r,bS:()=>p,jI:()=>h,r5:()=>E,zZ:()=>m});var t=e(90701),n=e(65583),i=e(54899),s=e(659),l=e(60499);function f(a){return typeof a=="object"&&a!=null&&"error"in a}const u=({baseUrl:a})=>async C=>{try{const{data:D,...b}=await(0,n.n)((0,i.i)().fetch({...C,url:a+C.url,showErrorAlert:C.showErrorAlert}));return{data:D,meta:b}}catch(D){return C.manageError?C.manageError(D):{error:D}}},o=a=>({error:(0,i.kW)(a)&&a.status!==404?a:null}),d=(0,t.LC)({reducerPath:"publicDashboardApi",baseQuery:u({baseUrl:"/api"}),tagTypes:["PublicDashboard","AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"],refetchOnMountOrArgChange:!0,endpoints:a=>({getPublicDashboard:a.query({query:C=>({url:`/dashboards/uid/${C}/public-dashboards`,manageError:o,showErrorAlert:!1}),async onQueryStarted(C,{dispatch:D,queryFulfilled:b}){try{await b}catch(M){f(M)&&(0,i.kW)(M.error)&&D((0,s.$l)((0,l.t_)(M.error.data.message)))}},providesTags:(C,D,b)=>[{type:"PublicDashboard",id:b}]}),createPublicDashboard:a.mutation({query:C=>({url:`/dashboards/uid/${C.dashboard.uid}/public-dashboards`,method:"POST",data:C.payload}),async onQueryStarted({dashboard:C,payload:D},{dispatch:b,queryFulfilled:M}){const{data:x}=await M;b((0,s.$l)((0,l.AT)("Dashboard is public!"))),C.updateMeta({publicDashboardUid:x.uid,publicDashboardEnabled:x.isEnabled})},invalidatesTags:(C,D,{dashboard:b})=>[{type:"PublicDashboard",id:b.uid}]}),updatePublicDashboard:a.mutation({query:C=>({url:`/dashboards/uid/${C.dashboard.uid}/public-dashboards/${C.payload.uid}`,method:"PUT",data:C.payload}),async onQueryStarted({dashboard:C,payload:D},{dispatch:b,queryFulfilled:M}){const{data:x}=await M;b((0,s.$l)((0,l.AT)("Public dashboard updated!"))),C.updateMeta({publicDashboardUid:x.uid,publicDashboardEnabled:x.isEnabled})},invalidatesTags:(C,D,{payload:b})=>[{type:"PublicDashboard",id:b.dashboardUid}]}),addRecipient:a.mutation({query:()=>({url:""})}),deleteRecipient:a.mutation({query:()=>({url:""})}),reshareAccessToRecipient:a.mutation({query:()=>({url:""})}),getActiveUsers:a.query({query:()=>({url:"/"}),providesTags:["UsersWithActiveSessions"]}),getActiveUserDashboards:a.query({query:()=>({url:""}),providesTags:(C,D,b)=>[{type:"ActiveUserDashboards",id:b}]}),listPublicDashboards:a.query({query:()=>({url:"/dashboards/public-dashboards"}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:a.mutation({query:C=>({url:`/dashboards/uid/${C.dashboardUid}/public-dashboards/${C.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:C,uid:D},{dispatch:b,queryFulfilled:M}){await M,b((0,s.$l)((0,l.AT)("Public dashboard deleted!"))),C?.updateMeta({publicDashboardUid:D,publicDashboardEnabled:!1})},invalidatesTags:(C,D,{dashboardUid:b})=>[{type:"PublicDashboard",id:b},"AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"]})})}),{useGetPublicDashboardQuery:r,useCreatePublicDashboardMutation:m,useUpdatePublicDashboardMutation:c,useDeletePublicDashboardMutation:p,useListPublicDashboardsQuery:g,useAddRecipientMutation:y,useDeleteRecipientMutation:E,useReshareAccessToRecipientMutation:v,useGetActiveUsersQuery:h,useGetActiveUserDashboardsQuery:P}=d},134:(Y,T,e)=>{"use strict";e.d(T,{E:()=>r});var t=e(82897),n=e(86647),i=e(47694),s=e(86648),l=e(6297),f=e(59096),u=e(15546),o=e(10672);function d(m){return m.libraryPanel&&typeof m.libraryPanel.name=="string"&&typeof m.libraryPanel.uid=="string"}class r{async makeExportable(c){c.cleanUpRepeats();const p=c.getSaveModelClone();p.id=null,c.processRepeats();const g=[],y={},E={},v={},h=new Map;for(const D of p.getVariables())v[D.name]=D;const P=(D,b)=>{if(D.datasource===void 0){D.datasource=b;return}let M=D.datasource,x=null;const R=M?.uid;return R&&R.indexOf("$")===0&&(x=v[R.substring(1)],x&&x.current&&(M=x.current.value)),(0,n.F)().get(M).then(S=>{if(S.meta?.builtIn||(y["datasource"+S.meta?.id]={type:"datasource",id:S.meta.id,name:S.meta.name,version:S.meta.info.version||"1.0.0"},x))return;const O="DS_"+S.name.replace(" ","_").toUpperCase();E[O]={name:O,label:S.name,description:"",type:"datasource",pluginId:S.meta?.id,pluginName:S.meta?.name},D.datasource={type:S.meta.id,uid:"${"+O+"}"}})},a=async D=>{if(D.type!=="row"){if(await P(D),D.targets)for(const M of D.targets)await P(M,D.datasource);const b=i.ZP.panels[D.type];b&&(y["panel"+b.id]={type:"panel",id:b.id,name:b.name,version:b.info.version})}},C=async D=>{if((0,l.V)(D)){const{name:b,uid:M}=D.libraryPanel;let x=D.libraryPanel.model;x||(x=(await(0,s.Mh)(M,!0)).model);const{gridPos:R,id:S,...O}=x;h.has(M)||h.set(M,{name:b,uid:M,kind:f.V.Panel,model:O})}};try{for(const M of p.panels)if(await a(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const x of M.panels)await a(x);for(const M of p.getVariables())(0,u.Xh)(M)&&(await P(M),M.options=[],M.current={},M.refresh=M.refresh!==o.Bd.never?M.refresh:o.Bd.onDashboardLoad);for(const M of p.annotations.list)await P(M);y.grafana={type:"grafana",id:"grafana",name:"Grafana",version:i.ZP.buildInfo.version},(0,t.each)(E,M=>{g.push(M)});for(const M of c.panels)if(await C(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const x of M.panels)await C(x);for(const M of p.getVariables())if((0,u.VC)(M)){const x="VAR_"+M.name.replace(" ","_").toUpperCase();g.push({name:x,type:"constant",label:M.label||M.name,value:M.query,description:""}),M.query="${"+x+"}",M.current={value:M.query,text:M.query,selected:!1},M.options=[M.current]}const D=[...h.entries()].reduce((M,[x,R])=>(M[x]=R,M),{}),b=(0,t.defaults)({__inputs:g,__elements:D,__requires:(0,t.sortBy)(y,["id"])},p);for(let M=0;M<b.panels.length;M++){const x=b.panels[M];d(x)&&(b.panels[M]={gridPos:x.gridPos,id:x.id,libraryPanel:{uid:x.libraryPanel.uid,name:x.libraryPanel.name}})}return b}catch(D){return console.error("Export failed:",D),{error:D}}}}},64503:(Y,T,e)=>{"use strict";e.d(T,{u:()=>l});var t=e(9892),n=e(66111),i=e(72648),s=e(8180);const l=({icon:u,iconType:o,iconSize:d,tooltip:r,onClick:m,children:c})=>{const p=(0,i.wW)(f);return n.createElement("div",{className:p.noBorderContainer},u&&n.createElement(s.h,{name:u,size:d,iconType:o,tooltip:r,tooltipPlacement:"bottom",onClick:m}),c)},f=u=>({noBorderContainer:t.css`
    padding: 0 ${u.spacing(.5)};
    display: flex;
  `})},37877:(Y,T,e)=>{"use strict";e.d(T,{C:()=>r});var t=e(66111),n=e(47406),i=e(82378),s=e(5562),l=e(32873),f=e(77582),u=e(35287),o=e(19349),d=e(45984);class r extends t.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=c=>{(0,o.$t)().setAutoRefresh(c),this.forceUpdate()},this.onRefresh=()=>((0,o.$t)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{f.h$.publish(new d.Qt({direction:d.Im.Left}))},this.onMoveForward=()=>{f.h$.publish(new d.Qt({direction:d.Im.Right}))},this.onChangeTimePicker=c=>{const{dashboard:p}=this.props,g=p.timepicker,y=g.nowDelay&&c.raw.to==="now",E=n.isMathString(c.raw.from)?c.raw.from:c.from,v=n.isMathString(c.raw.to)?c.raw.to:c.to,h={from:E,to:y?"now-"+g.nowDelay:v};(0,o.$t)().setTime(h)},this.onChangeTimeZone=c=>{this.props.dashboard.timezone=c,this.props.onChangeTimeZone(c),this.onRefresh()},this.onChangeFiscalYearStartMonth=c=>{this.props.dashboard.fiscalYearStartMonth=c,this.onRefresh()},this.onZoom=()=>{f.h$.publish(new d.p8({scale:2}))}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(i.md,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:c,isOnCanvas:p}=this.props,{refresh_intervals:g}=c.timepicker,y=(0,o.$t)().getValidIntervals(g||s.o5),E=(0,o.$t)().timeRange(),v=c.getTimezone(),h=c.fiscalYearStartMonth,P=c.panelInEdit?.isEditing;return t.createElement(t.Fragment,null,t.createElement(l.a,{value:E,onChange:this.onChangeTimePicker,timeZone:v,fiscalYearStartMonth:h,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:p}),t.createElement(s.dP,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefresh,value:c.refresh,intervals:y,isOnCanvas:p,tooltip:(0,u.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:P}))}}},15678:(Y,T,e)=>{"use strict";e.d(T,{t:()=>ne});var t=e(9892),n=e(66111),i=e(67948),s=e(56895),l=e(63418),f=e(68183),u=e(37932),o=e(32434),d=e(98102),r=e(34719),m=e(26202),c=e(64319),p=e(5191),g=e(8125),y=e(95379),E=e(9956),v=e(47694),h=e(60499),P=e(77582);function a(he,ue){const[Te,Ve]=(0,n.useState)();return(0,n.useEffect)(()=>{const ct=he.subscribe(ue,Ve);return()=>ct.unsubscribe()},[he,ue]),Te}var C=e(35287),D=e(61962),b=e(72648),M=e(71698),x=e(31403),R=e(39904),S=e(41818),O=e(95130),U=e(663),I=e(27876),F=e(58790);const w=({dashboard:he})=>{const ue=(0,n.useMemo)(()=>(0,U.uZ)(),[]),Te=(0,I.useDispatch)(),Ve=(0,I.useSelector)(ct=>ct.dashboard.initialDatasource);return n.createElement(O.v,null,n.createElement(O.v.Item,{key:"add-visualisation",label:(0,C.t)("dashboard.add-menu.visualization","Visualization"),testId:f.wl.components.PageToolbar.itemButton("Add new visualization menu item"),onClick:()=>{const ct=(0,U.LU)(he,Ve);(0,S.ff)("dashboards_toolbar_add_clicked",{item:"add_visualization"}),u.E1.partial({editPanel:ct}),Te((0,F.Rd)(void 0))}}),n.createElement(O.v.Item,{key:"add-row",label:(0,C.t)("dashboard.add-menu.row","Row"),testId:f.wl.components.PageToolbar.itemButton("Add new row menu item"),onClick:()=>{(0,S.ff)("dashboards_toolbar_add_clicked",{item:"add_row"}),(0,U.L_)(he)}}),n.createElement(O.v.Item,{key:"add-panel-lib",label:(0,C.t)("dashboard.add-menu.import","Import from library"),testId:f.wl.components.PageToolbar.itemButton("Add new panel from panel library menu item"),onClick:()=>{(0,S.ff)("dashboards_toolbar_add_clicked",{item:"import_from_library"}),(0,U.RB)(he)}}),n.createElement(O.v.Item,{key:"add-panel-clipboard",label:(0,C.t)("dashboard.add-menu.paste-panel","Paste panel"),testId:f.wl.components.PageToolbar.itemButton("Add new panel from clipboard menu item"),onClick:()=>{(0,S.ff)("dashboards_toolbar_add_clicked",{item:"paste_panel"}),(0,U.Dh)(he,ue)},disabled:!ue}))},K=({dashboard:he})=>{const ue=L((0,b.l4)()),[Te,Ve]=(0,n.useState)(!1);return n.createElement(M.L,{overlay:()=>n.createElement(w,{dashboard:he}),placement:"bottom",offset:[0,6],onVisibleChange:Ve},n.createElement(x.zx,{icon:"panel-add",size:"lg",fill:"text",className:(0,t.cx)(ue.button,ue.buttonIcon,ue.buttonText),"data-testid":f.wl.components.PageToolbar.itemButton("Add panel button")},n.createElement(C.cC,{i18nKey:"dashboard.toolbar.add"},"Add"),n.createElement(R.J,{name:Te?"angle-up":"angle-down",size:"lg"})))};function L(he){return{button:(0,t.css)({label:"add-panel-button",padding:he.spacing(.5,.5,.5,.75),height:he.spacing((he.components.height.sm+he.components.height.md)/2),borderRadius:he.shape.radius.default}),buttonIcon:(0,t.css)({svg:{margin:0}}),buttonText:(0,t.css)({label:"add-panel-button-text",fontSize:he.typography.body.fontSize,span:{marginLeft:he.spacing(.67)}})}}var V=e(63205),H=e(9398),j=e(10079),A=e(54294),_=e(45984),k=e(64503),Q=e(37877),re=e(96044),Z=e(53818);const oe=({dashboard:he})=>{const[ue]=(0,re.K)(),{showModal:Te,hideModal:Ve}=(0,n.useContext)(p.kr);return(0,n.useEffect)(()=>(ue.shareView&&Te(Z.ShareModal,{dashboard:he,onDismiss:Ve,activeTab:String(ue.shareView)}),()=>{Ve()}),[Te,Ve,he,ue.shareView]),n.createElement(k.u,{tooltip:(0,C.t)("dashboard.toolbar.share","Share dashboard or panel"),icon:"share-alt",iconSize:"lg",onClick:()=>{Te(Z.ShareModal,{dashboard:he,onDismiss:Ve})}})},G={setStarred:D.OQ,updateTimeZoneForSession:A.YT},le=(0,i.connect)(null,G),fe=f.wl.pages.Dashboard.DashNav,ae=[],de=[];function ee(he){ae.push(he)}function me(he){de.push(he)}const q=n.memo(he=>{(0,s.TH)();const ue=(0,o.N)();a(he.dashboard.events,_.hS);const Te=he.dashboard.snapshot?.originalUrl??"",Ve=()=>{window.location.href=l.QX.sanitizeUrl(he.dashboard.snapshot.originalUrl)},ct=(0,h.iG)(),Ie=()=>{try{const ft=new URL(l.QX.sanitizeUrl(Te),v.ZP.appUrl),gt=new URL(v.ZP.appUrl);ft.host!==gt.host?P.h$.publish(new _.Dn({component:d.s,props:{title:"Proceed to external site?",modalClass:se,body:n.createElement(n.Fragment,null,n.createElement("p",null,"This link connects to an external website at"," ",n.createElement("code",null,Te)),n.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:Ve}})):Ve()}catch(ft){ct.error("Invalid URL",ft instanceof Error?ft.message:void 0)}},Ke=()=>{const ft=(0,H.h4)(),{dashboard:gt,setStarred:St}=he;ft.starDashboard(gt.uid,Boolean(gt.meta.isStarred)).then(ut=>{St({id:gt.uid,title:gt.title,url:gt.meta.url??"",isStarred:ut}),gt.meta.isStarred=ut,ue()})},Ge=()=>{u.E1.partial({editview:"settings"})},at=()=>{j.r0.prev()},dt=()=>{j.r0.next()},Re=()=>{j.r0.stop(),ue()},ye=(ft,gt)=>{ft.map((St,ut)=>{const Dt=St.component,ie=n.createElement(Dt,{...he,key:`button-custom-${ut}`});typeof St.index=="number"?gt.splice(St.index,0,ie):gt.push(ie)})},Pe=()=>j.r0.isPlaying,be=()=>{const{dashboard:ft,kioskMode:gt}=he,{canStar:St,canShare:ut,isStarred:Dt}=ft.meta,ie=[];if(gt||Pe())return[];if(St){let De=Dt?(0,C.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,C.t)("dashboard.toolbar.mark-favorite","Mark as favorite");ie.push(n.createElement(k.u,{tooltip:De,icon:Dt?"favorite":"star",iconType:Dt?"mono":"default",iconSize:"lg",onClick:Ke,key:"button-star"}))}return ut&&ie.push(n.createElement(oe,{key:"button-share",dashboard:ft})),ft.meta.publicDashboardEnabled&&ie.push(n.createElement(r.V,{key:"public-dashboard",name:"Public",colorIndex:5,"data-testid":fe.publicDashboardTag})),ye(ae,ie),ie},Be=()=>n.createElement(m.h,{key:"playlist-buttons"},n.createElement(c.h,{tooltip:(0,C.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:at,narrow:!0}),n.createElement(c.h,{onClick:Re},n.createElement(C.cC,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist")),n.createElement(c.h,{tooltip:(0,C.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:dt,narrow:!0})),ke=()=>{const{dashboard:ft,updateTimeZoneForSession:gt,hideTimePicker:St}=he;return St?null:n.createElement(Q.C,{dashboard:ft,onChangeTimeZone:gt,key:"time-controls"})},ot=()=>{const{dashboard:ft,onAddPanel:gt,isFullscreen:St,kioskMode:ut}=he,{canSave:Dt,canEdit:ie,showSettings:De}=ft.meta,{snapshot:Ne}=ft,Je=Ne&&Ne.originalUrl,Xe=[];return Pe()?[Be(),ke()]:ut===I.KioskMode.TV?[ke()]:(ie&&!St&&(v.ZP.featureToggles.emptyDashboardPage?Xe.push(n.createElement(K,{dashboard:ft,key:"panel-add-dropdown"})):Xe.push(n.createElement(c.h,{tooltip:(0,C.t)("dashboard.toolbar.add-panel","Add panel"),icon:"panel-add",iconSize:"xl",onClick:gt,key:"button-panel-add"}))),Dt&&!St&&Xe.push(n.createElement(p.JY,{key:"button-save"},({showModal:Le,hideModal:Ue})=>n.createElement(c.h,{tooltip:(0,C.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{Le(V.d,{dashboard:ft,onDismiss:Ue})}}))),Je&&Xe.push(n.createElement(c.h,{tooltip:(0,C.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:Ie,icon:"link",key:"button-snapshot"})),De&&Xe.push(n.createElement(c.h,{tooltip:(0,C.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:Ge,key:"button-settings"})),ye(de,Xe),Xe.push(ke()),v.ZP.featureToggles.scenes&&Xe.push(n.createElement(c.h,{key:"button-scenes",tooltip:"View as Scene",icon:"apps",onClick:()=>u.E1.push(`/scenes/dashboard/${ft.uid}`)})),Xe)};return n.createElement(y.A,{actions:n.createElement(n.Fragment,null,be(),n.createElement(E.M,{leftActionsSeparator:!0}),n.createElement(g.R,{alignment:"right"},ot()))})});q.displayName="DashNav";const ne=le(q),se=(0,t.css)({width:"max-content",maxWidth:"80vw"})},42557:(Y,T,e)=>{"use strict";e.d(T,{P:()=>E});var t=e(82897),n=e(66111),i=e(47891),s=e(68183),l=e(20941),f=e(24799),u=e(52566),o=e(80124),d=e(46967),r=e(8944),m=e(5562),c=e(19349);const p=({refreshIntervals:v,onRefreshIntervalChange:h,getIntervalsFunc:P=y,validateIntervalsFunc:a=g})=>{const[C,D]=(0,n.useState)(P(v??m.o5)),[b,M]=(0,n.useState)(null);(0,n.useEffect)(()=>{const O=P(v??m.o5);D(O)},[P,v]);const x=(0,n.useMemo)(()=>Array.isArray(C)?C.join(","):"",[C]),R=(0,n.useCallback)(O=>{const U=O.currentTarget.value?O.currentTarget.value.split(","):[];D(U)},[D]),S=(0,n.useCallback)(O=>{const U=a(C);U===null&&h(P(C)),M(U)},[P,C,h,a]);return n.createElement(f.g,{label:"Auto refresh",description:"Define the auto refresh intervals that should be available in the auto refresh list.",error:b,invalid:!!b},n.createElement(d.I,{id:"auto-refresh-input",invalid:!!b,value:x,onChange:R,onBlur:S}))},g=(v,h={getTimeSrv:c.$t})=>{try{return y(v,h),null}catch(P){return P instanceof Error?P.message:"Invalid intervals"}},y=(v,h={getTimeSrv:c.$t})=>{const P=v.filter(a=>a.trim()!=="").map(a=>a.replace(/\s+/g,""));return[...new Set(h.getTimeSrv().getValidIntervals(P))]};class E extends n.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=h=>{const P=h.currentTarget.value;if((0,t.isEmpty)(P))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(P);if(i.isValidTimeSpan(P))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(P);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=h=>{typeof h=="string"&&this.props.onTimeZoneChange(h)},this.onWeekStartChange=h=>{this.props.onWeekStartChange(h)}}render(){return n.createElement(l.s,{label:"Time options",isOpen:!0},n.createElement(f.g,{label:"Time zone","data-testid":s.wl.components.TimeZonePicker.containerV2},n.createElement(u.O,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})),n.createElement(f.g,{label:"Week start","data-testid":s.wl.components.WeekStartPicker.containerV2},n.createElement(o.z,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})),n.createElement(p,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),n.createElement(f.g,{label:"Now delay",description:"Exclude recent data that may be incomplete."},n.createElement(d.I,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})),n.createElement(f.g,{label:"Hide time picker"},n.createElement(r.r,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})),n.createElement(f.g,{label:"Refresh live dashboards",description:"Continuously re-draw panels where the time range references 'now'"},n.createElement(r.r,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})))}}},82557:(Y,T,e)=>{"use strict";e.d(T,{D:()=>fn});var t=e(66111),n=e(56895),i=e(72196),s=e(68183),l=e(37932),f=e(31403),u=e(8125),o=e(95379),d=e(8412),r=e(47694),m=e(82002),c=e(27876),p=e(45984),g=e(67948),y=e(83829),E=e(9892),v=e(59679),h=e(41818),P=e(72648),a=e(20941),C=e(52081),D=e(67487),b=e(61860),M=e(39904),x=e(8180),R=e(35029);const S=({nodes:Ae,edges:Me,direction:Ze,width:tt,height:It,onDoubleClick:$t})=>{const Tt=(0,t.useRef)(null),qe=(0,t.useRef)(null),rn=(0,t.useCallback)(dn=>{$t&&$t(dn.nodes[0])},[$t]);return(0,t.useEffect)(()=>((async()=>{const Dn=await e.e(8271).then(e.t.bind(e,47137,23)),wn={nodes:O(Dn,Ae),edges:U(Dn,Me)},Gn={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:Ze??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};Tt.current=new Dn.Network(qe.current,wn,Gn),Tt.current?.on("doubleClick",rn)})(),()=>{Tt.current&&Tt.current.off("doubleClick")}),[Ze,Me,Ae,rn]),t.createElement("div",null,t.createElement("div",{ref:qe,style:{width:tt??"100%",height:It??"60vh"}}))};function O(Ae,Me){const Ze=Me.map(tt=>({...tt,shape:"box"}));return new Ae.DataSet(Ze)}function U(Ae,Me){const Ze=Me.map(tt=>({...tt,arrows:"to",dashes:!0}));return new Ae.DataSet(Ze)}function I({edges:Ae,nodes:Me,show:Ze,title:tt,children:It}){const[$t,Tt]=(0,t.useState)(Ze),qe=(0,t.useCallback)(()=>Tt(!0),[Tt]),rn=(0,t.useCallback)(()=>Tt(!1),[Tt]);return t.createElement(t.Fragment,null,t.createElement(R.u,{isOpen:$t,title:tt,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:rn,onDismiss:rn},t.createElement(S,{nodes:Me,edges:Ae})),It({showModal:qe}))}const F=({id:Ae,usages:Me})=>{const Ze=(0,t.useMemo)(()=>Me.find(It=>It.variable.id===Ae),[Ae,Me]);if(!Ze)return null;const tt=Ze.nodes.map(It=>It.label.includes(`$${Ae}`)?{...It,color:"#FB7E81"}:It);return t.createElement(I,{show:!1,title:`Showing usages for: $${Ae}`,nodes:tt,edges:Ze.edges},({showModal:It})=>t.createElement(x.h,{onClick:()=>It(),name:"code-branch",title:"Show usages","data-testid":"VariablesUnknownButton"}))};var w=e(19248);const K=1e3;function L({variables:Ae,dashboard:Me}){const[Ze,tt]=(0,t.useState)(!1),[It,$t]=(0,t.useState)(0),[Tt,qe]=(0,t.useState)([]),rn=(0,P.wW)(A);(0,t.useEffect)(()=>$t(wn=>wn+1),[Ae,Me]);const{loading:dn}=(0,v.Z)(async()=>{if(Ze&&It>0){const wn=Date.now(),Gn=await(0,w.Yg)(Ae,Me),Sa=Date.now()-wn;return Sa>=K&&(0,h.ff)("Slow unknown variables expansion",{elapsed:Sa}),$t(0),qe(Gn),Gn}return[]},[Ae,Me,Ze,It]),Dn=wn=>{wn&&(0,h.ff)("Unknown variables section expanded"),tt(wn)};return t.createElement("div",{className:rn.container},t.createElement(a.s,{label:t.createElement(V,null),isOpen:Ze,onToggle:Dn},dn&&t.createElement(C.wc,{justify:"center"},t.createElement(C.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(D.$,{size:16}))),!dn&&Tt&&t.createElement(t.Fragment,null,Tt.length===0&&t.createElement(H,null),Tt.length>0&&t.createElement(j,{usages:Tt}))))}function V(){const Ae=(0,P.wW)(A);return t.createElement("h5",null,"Renamed or missing variables",t.createElement(b.u,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard."},t.createElement(M.J,{name:"info-circle",className:Ae.infoIcon})))}function H(){return t.createElement("span",null,"No renamed or missing variables found.")}function j({usages:Ae}){const Me=(0,P.wW)(A);return t.createElement("table",{className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",{colSpan:5}))),t.createElement("tbody",null,Ae.map(Ze=>{const{variable:tt}=Ze,{id:It,name:$t}=tt;return t.createElement("tr",{key:It},t.createElement("td",{className:Me.firstColumn},t.createElement("span",null,$t)),t.createElement("td",{className:Me.defaultColumn}),t.createElement("td",{className:Me.defaultColumn}),t.createElement("td",{className:Me.defaultColumn}),t.createElement("td",{className:Me.lastColumn},t.createElement(F,{id:tt.id,usages:Ae})))})))}const A=Ae=>({container:E.css`
    margin-top: ${Ae.spacing(4)};
    padding-top: ${Ae.spacing(4)};
  `,infoIcon:E.css`
    margin-left: ${Ae.spacing(1)};
  `,defaultColumn:E.css`
    width: 1%;
  `,firstColumn:E.css`
    width: 1%;
    vertical-align: top;
    color: ${Ae.colors.text.maxContrast};
  `,lastColumn:E.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var _=e(7240),k=e(87095),Q=e(92990),re=e(92624),Z=e(98102);function oe({varName:Ae,isOpen:Me=!1,onConfirm:Ze,onDismiss:tt}){return t.createElement(Z.s,{title:"Delete variable",isOpen:Me,onConfirm:Ze,onDismiss:tt,body:`
      Are you sure you want to delete variable "${Ae}"?
    `,modalClass:G.modal,confirmText:"Delete"})}const G={modal:(0,E.css)({width:"max-content",maxWidth:"80vw"})};var le=e(52666),fe=e(22323),ae=e(15546),de=e(85803),ee=e(69273),me=e(24799),q=e(2594);const ne=[{label:"Label and value",value:ee.bU.dontHide},{label:"Value",value:ee.bU.hideLabel},{label:"Nothing",value:ee.bU.hideVariable}];function se({onChange:Ae,hide:Me,type:Ze}){const tt=(0,t.useMemo)(()=>ne.find(It=>It.value===Me)?.value??ne[0].value,[Me]);return Ze==="constant"?null:t.createElement(me.g,{label:"Show on dashboard"},t.createElement(q.S,{options:ne,onChange:Ae,value:tt}))}var he=e(41624),ue=e(49993),Te=e(57052),Ve=e(83704);function ct({onChange:Ae,type:Me}){const Ze=(0,t.useMemo)(()=>(0,re.bi)(),[]),tt=(0,t.useMemo)(()=>Ze.find(It=>It.value===Me)??Ze[0],[Ze,Me]);return t.createElement(Ve.u,{name:"Select variable type",value:tt,options:Ze,onChange:Ae,testId:s.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var Ie=e(11543),Ke=e(77117);const Ge=({variable:{options:Ae}})=>{const[Me,Ze]=(0,t.useState)(20),[tt,It]=(0,t.useState)([]),$t=(0,t.useCallback)(qe=>{qe.preventDefault(),Ze(Me+20)},[Me,Ze]),Tt=(0,P.wW)(at);return(0,t.useEffect)(()=>It(Ae.slice(0,Me)),[Me,Ae]),tt.length?t.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"}},t.createElement("h5",null,"Preview of values"),t.createElement(Ie.Z,null,tt.map((qe,rn)=>t.createElement(Ie.Z,{key:`${qe.value}-${rn}`,className:Tt.optionContainer},t.createElement(Ke.W,{"aria-label":s.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption},t.createElement("div",{className:Tt.label},qe.text))))),Ae.length>Me&&t.createElement(Ie.Z,{className:Tt.optionContainer},t.createElement(f.zx,{onClick:$t,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link"},"Show more"))):null};Ge.displayName="VariableValuesPreview";function at(Ae){return{wrapper:(0,E.css)({display:"flex",flexDirection:"column",marginTop:Ae.spacing(2)}),optionContainer:(0,E.css)({marginLeft:Ae.spacing(.5),marginBottom:Ae.spacing(.5)}),label:(0,E.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}var dt=e(82897),Re=e(37737),ye=e(50678);const Pe=Ae=>async Me=>{const{rootStateKey:Ze}=Ae;Me((0,_.mb)(Ze,(0,ye.wJ)({name:(0,k.E0)(Ae).name,id:Ae.id})))},be=Ae=>async(Me,Ze)=>{const{rootStateKey:tt}=Ae;Me((0,_.mb)(tt,(0,ye.qe)((0,re.Y6)(Ae))))},Be=(Ae,Me)=>(Ze,tt)=>{const{id:It,rootStateKey:$t}=Ae;let Tt=null;if(Me.match(/^(?!__).*$/)||(Tt="Template names cannot begin with '__', that's reserved for Grafana's global variables"),Me.match(/^\w+$/)||(Tt="Only word and digit characters are allowed in variable names"),(0,k.gt)($t,tt()).filter(dn=>dn.name===Me&&dn.id!==It).length&&(Tt="Variable with the same name already exists"),Tt){Ze((0,_.mb)($t,(0,ye.y8)({newName:Me,errorText:Tt})));return}Ze(ke(Ae,Me))},ke=(Ae,Me)=>(Ze,tt)=>{const{rootStateKey:It}=Ae,$t=(0,k.E0)(Ae,tt());if($t.name===Me){Ze((0,_.mb)(It,(0,ye.Yo)((0,re.Y6)(Ae,{newName:Me}))));return}const Tt={...(0,dt.cloneDeep)($t),name:Me,id:Me},qe=$t.global,rn=$t.index,dn=(0,re.yQ)(Tt);Ze((0,_.mb)(It,(0,Q.VN)((0,re.Y6)(dn,{global:qe,index:rn,model:Tt})))),Ze((0,_.mb)(It,(0,ye.Yo)((0,re.Y6)(dn,{newName:Me})))),Ze((0,_.mb)(It,(0,Q.mZ)((0,re.Y6)(Ae,{reIndex:!1}))))},ot=(Ae,Me="query")=>(Ze,tt)=>{const It=(0,re.mn)(Ae),$t=(0,k.gt)(It,tt()),Tt=gt(Me,$t),qe={type:Me,id:Tt},rn=!1,dn=(0,k.Eo)(It,tt()),Dn=(0,dt.cloneDeep)(fe.z.get(Me).initialState);Dn.id=Tt,Dn.name=Tt,Dn.rootStateKey=It,Ze((0,_.mb)(It,(0,Q.VN)((0,re.Y6)(qe,{global:rn,model:Dn,index:dn})))),l.E1.partial({editIndex:$t.length})},ft=Ae=>(Me,Ze)=>{const tt=(0,re.mn)(Ae),It=Ze(),$t=(0,k.xD)(tt,It),Tt=It.dashboard.getModel(),{usages:qe}=(0,w.V)($t,Tt),rn=(0,w.vI)(qe);Me((0,_.mb)(tt,(0,Re.j4)({usages:qe,usagesNetwork:rn})))};function gt(Ae,Me){let Ze=0,tt=`${Ae}${Ze}`;for(;Me.find(It=>It.id===tt);)tt=`${Ae}${++Ze}`;return tt}var St=(Ae=>(Ae[Ae.MaxSize=50]="MaxSize",Ae))(St||{});const ut=(Ae,Me)=>({editor:(0,k.AE)(Me.identifier.rootStateKey,Ae).editor,variable:(0,k.E0)(Me.identifier,Ae)}),Dt=Ae=>({...(0,y.bindActionCreators)({variableEditorMount:Pe,variableEditorUnMount:be,changeVariableName:Be,updateOptions:de.Rk},Ae),changeVariableProp:(Me,Ze,tt)=>Ae((0,_.mb)(Me.rootStateKey,(0,Q.Pl)((0,re.Y6)(Me,{propName:Ze,propValue:tt})))),changeVariableType:(Me,Ze)=>Ae((0,_.mb)(Me.rootStateKey,(0,Q.Be)((0,re.Y6)(Me,{newType:Ze})))),removeVariable:Me=>{Ae((0,_.mb)(Me.rootStateKey,(0,Q.mZ)((0,re.Y6)(Me,{reIndex:!0}))))}}),ie=(0,g.connect)(ut,Dt);class De extends t.PureComponent{constructor(){super(...arguments),this.state={showDeleteModal:!1},this.onNameChange=Me=>{Me.preventDefault(),this.props.changeVariableName(this.props.identifier,Me.currentTarget.value)},this.onTypeChange=Me=>{Me.value&&this.props.changeVariableType(this.props.identifier,Me.value)},this.onLabelChange=Me=>{Me.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",Me.currentTarget.value)},this.onDescriptionChange=Me=>{this.props.changeVariableProp(this.props.identifier,"description",Me.currentTarget.value)},this.onHideChange=Me=>{this.props.changeVariableProp(this.props.identifier,"hide",Me)},this.onPropChanged=({propName:Me,propValue:Ze,updateOptions:tt=!1})=>{this.props.changeVariableProp(this.props.identifier,Me,Ze),tt&&this.props.updateOptions((0,re.yQ)(this.props.variable))},this.onHandleSubmit=async Me=>{Me.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,re.yQ)(this.props.variable))},this.onModalOpen=()=>{this.setState({showDeleteModal:!0})},this.onModalClose=()=>{this.setState({showDeleteModal:!1})},this.onDelete=()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),l.E1.partial({editIndex:null})},this.onApply=()=>{l.E1.partial({editIndex:null})}}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){const{variable:Me}=this.props,Ze=fe.z.get(this.props.variable.type).editor;if(!Ze)return null;const tt=Me.state===le.Gu.Loading;return t.createElement(t.Fragment,null,t.createElement("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit},t.createElement(ct,{onChange:this.onTypeChange,type:this.props.variable.type}),t.createElement(he.e,null,"General"),t.createElement(Te.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:s.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:St.MaxSize,required:!0}),t.createElement(Te.V,{name:"Label",description:"Optional display name",value:this.props.variable.label??"",placeholder:"Label name",onChange:this.onLabelChange,testId:s.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),t.createElement(ue.W,{name:"Description",value:Me.description??"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),t.createElement(se,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),Ze&&t.createElement(Ze,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,ae.eL)(this.props.variable)?t.createElement(Ge,{variable:this.props.variable}):null,t.createElement("div",{style:{marginTop:"16px"}},t.createElement(C.Lh,{spacing:"md",height:"inherit"},t.createElement(f.zx,{variant:"destructive",fill:"outline",onClick:this.onModalOpen},"Delete"),t.createElement(f.zx,{type:"submit","aria-label":s.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:tt,variant:"secondary"},"Run query",tt&&t.createElement(M.J,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})),t.createElement(f.zx,{variant:"primary",onClick:this.onApply,"data-testid":s.wl.pages.Dashboard.Settings.Variables.Edit.General.applyButton},"Apply")))),t.createElement(oe,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose}))}}const Ne=ie(De);var Je=e(36826),Xe=e(26418),Le=e(69142),Ue=e(3153);const ve=({variables:Ae})=>{const Me=(0,t.useMemo)(()=>(0,w.GQ)(Ae),[Ae]),Ze=(0,t.useMemo)(()=>(0,w.MJ)(Ae),[Ae]);return Ze.length?t.createElement(I,{show:!1,title:"Dependencies",nodes:(0,w.Of)(Me,Ze),edges:Ze},({showModal:tt})=>t.createElement(f.zx,{onClick:()=>{(0,h.ff)("Show variable dependencies"),tt()},icon:"channel-add",variant:"secondary"},"Show dependencies")):null},Se=Ae=>t.createElement(g.Provider,{store:Ue.h},t.createElement(ve,{...Ae})),$e=({id:Ae,usages:Me,isAdhoc:Ze})=>{const tt=(0,t.useMemo)(()=>Me.find($t=>$t.variable.id===Ae),[Me,Ae]);if(Me.length===0||Ze||!tt)return null;const It=tt.nodes.map($t=>$t.label.includes(`$${Ae}`)?{...$t,color:"#FB7E81"}:$t);return t.createElement(I,{show:!1,title:`Showing usages for: $${Ae}`,nodes:It,edges:tt.edges},({showModal:$t})=>t.createElement(x.h,{onClick:()=>{(0,h.ff)("Show variable usages"),$t()},name:"code-branch",title:"Show usages"}))};function Ye({index:Ae,variable:Me,usageTree:Ze,usagesNetwork:tt,onEdit:It,onDuplicate:$t,onDelete:Tt}){const qe=(0,P.l4)(),rn=(0,P.wW)(pt),dn=_e(Me),wn=(0,w.Rv)(Me.id,Ze)>0||(0,ae.Kn)(Me),Gn=(0,re.yQ)(Me);return t.createElement(Je._l,{draggableId:JSON.stringify(Gn),index:Ae},(ra,Sa)=>t.createElement("tr",{ref:ra.innerRef,...ra.draggableProps,style:{userSelect:Sa.isDragging?"none":"auto",background:Sa.isDragging?qe.colors.background.secondary:void 0,...ra.draggableProps.style}},t.createElement("td",{role:"gridcell",className:rn.column},t.createElement(f.zx,{size:"xs",fill:"text",onClick:Da=>{Da.preventDefault(),It(Gn)},className:rn.nameLink,"aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(Me.name)},Me.name)),t.createElement("td",{role:"gridcell",className:rn.definitionColumn,onClick:Da=>{Da.preventDefault(),It(Gn)},"aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(Me.name)},dn),t.createElement("td",{role:"gridcell",className:rn.column},t.createElement(Et,{passed:wn})),t.createElement("td",{role:"gridcell",className:rn.column},t.createElement($e,{id:Me.id,isAdhoc:(0,ae.Kn)(Me),usages:tt})),t.createElement("td",{role:"gridcell",className:rn.column},t.createElement(x.h,{onClick:Da=>{Da.preventDefault(),(0,h.ff)("Duplicate variable"),$t(Gn)},name:"copy",title:"Duplicate variable","aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(Me.name)})),t.createElement("td",{role:"gridcell",className:rn.column},t.createElement(x.h,{onClick:Da=>{Da.preventDefault(),(0,h.ff)("Delete variable"),Tt(Gn)},name:"trash-alt",title:"Remove variable","aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(Me.name)})),t.createElement("td",{role:"gridcell",className:rn.column},t.createElement("div",{...ra.dragHandleProps,className:rn.dragHandle},t.createElement(M.J,{name:"draggabledots",size:"lg"})))))}function _e(Ae){let Me="";return(0,ae.Xh)(Ae)?Ae.definition?Me=Ae.definition:typeof Ae.query=="string"&&(Me=Ae.query):(0,ae.eL)(Ae)&&(Me=Ae.query),Me}function Et({passed:Ae}){const Me=(0,P.wW)(pt);return Ae?t.createElement(M.J,{name:"check",className:Me.iconPassed,title:"This variable is referenced by other variables or dashboard."}):t.createElement(M.J,{name:"exclamation-triangle",className:Me.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function pt(Ae){return{dragHandle:E.css`
      cursor: grab;
    `,column:E.css`
      width: 1%;
    `,nameLink:E.css`
      cursor: pointer;
      color: ${Ae.colors.primary.text};
    `,definitionColumn:E.css`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:E.css`
      color: ${Ae.v1.palette.greenBase};
    `,iconFailed:E.css`
      color: ${Ae.v1.palette.orange};
    `}}function je({variables:Ae,usages:Me,usagesNetwork:Ze,onChangeOrder:tt,onAdd:It,onEdit:$t,onDelete:Tt,onDuplicate:qe}){const rn=dn=>{if(!dn.destination||!dn.source)return;(0,h.ff)("Variable drag and drop");const Dn=JSON.parse(dn.draggableId);tt(Dn,Ae[dn.source.index].index,Ae[dn.destination.index].index)};return t.createElement("div",null,t.createElement("div",null,Ae.length===0&&t.createElement(ht,{onAdd:It}),Ae.length>0&&t.createElement(Xe.Stack,{direction:"column",gap:4},t.createElement("table",{className:"filter-table filter-table--hover","aria-label":s.wl.pages.Dashboard.Settings.Variables.List.table,role:"grid"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",null,"Definition"),t.createElement("th",{colSpan:5}))),t.createElement(Je.Z5,{onDragEnd:rn},t.createElement(Je.bK,{droppableId:"variables-list",direction:"vertical"},dn=>t.createElement("tbody",{ref:dn.innerRef,...dn.droppableProps},Ae.map((Dn,wn)=>t.createElement(Ye,{index:wn,key:`${Dn.name}-${wn}`,variable:Dn,usageTree:Me,usagesNetwork:Ze,onDelete:Tt,onDuplicate:qe,onEdit:$t})),dn.placeholder)))),t.createElement(Xe.Stack,null,t.createElement(Se,{variables:Ae}),t.createElement(f.zx,{"aria-label":s.wl.pages.Dashboard.Settings.Variables.List.newButton,onClick:It,icon:"plus"},"New variable")))))}function ht({onAdd:Ae}){return t.createElement("div",null,t.createElement(Le.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:Me=>{Me.preventDefault(),Ae()}}))}const we=(Ae,Me)=>{const{uid:Ze}=Me.dashboard,tt=(0,k.AE)(Ze,Ae);return{variables:(0,k.xD)(Ze,Ae),idInEditor:tt.editor.id,usagesNetwork:tt.inspect.usagesNetwork,usages:tt.inspect.usages}},Qe=Ae=>({...(0,y.bindActionCreators)({createNewVariable:ot,initListMode:ft},Ae),changeVariableOrder:(Me,Ze,tt)=>Ae((0,_.mb)(Me.rootStateKey,(0,Q.gE)((0,re.Y6)(Me,{fromIndex:Ze,toIndex:tt})))),duplicateVariable:Me=>Ae((0,_.mb)(Me.rootStateKey,(0,Q.Y9)((0,re.Y6)(Me,{newId:void 0})))),removeVariable:Me=>{Ae((0,_.mb)(Me.rootStateKey,(0,Q.mZ)((0,re.Y6)(Me,{reIndex:!0}))))}}),nt=(0,g.connect)(we,Qe);class it extends t.PureComponent{constructor(){super(...arguments),this.state={variableId:void 0},this.onEditVariable=Me=>{const Ze=this.props.variables.findIndex(tt=>tt.id===Me.id);l.E1.partial({editIndex:Ze})},this.onNewVariable=()=>{this.props.createNewVariable(this.props.dashboard.uid)},this.onChangeVariableOrder=(Me,Ze,tt)=>{this.props.changeVariableOrder(Me,Ze,tt)},this.onDuplicateVariable=Me=>{this.props.duplicateVariable(Me)},this.onModalOpen=Me=>{this.setState({variableId:Me})},this.onModalClose=()=>{this.setState({variableId:void 0})},this.onRemoveVariable=()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){const{editIndex:Me,variables:Ze}=this.props,tt=Me!=null?Ze[Me]:void 0,It=tt?{text:tt.name}:void 0;return t.createElement(d.T,{navModel:this.props.sectionNav,pageNav:It},!tt&&t.createElement(je,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!tt&&this.props.variables.length>0&&t.createElement(L,{variables:this.props.variables,dashboard:this.props.dashboard}),tt&&t.createElement(Ne,{identifier:(0,re.yQ)(tt)}),t.createElement(oe,{isOpen:this.state.variableId!==void 0,varName:this.state.variableId?.id??"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose}))}}const yt=nt(it);var Lt=e(73546),Kt=e(77582);const an=({dashboard:Ae,sectionNav:Me})=>{const Ze=Kt.Vt.hasPermission(c.AccessControlAction.DashboardsPermissionsWrite);return t.createElement(d.T,{navModel:Me},t.createElement(Lt.P,{resource:"dashboards",resourceId:Ae.uid,canSetPermissions:Ze}))};var un=e(1108),hn=e(6645),Wn=e(92158),Bt=e(54630),Ft=e(61986),Vt=e(86977);const At=Ae=>({permissions:Ae.dashboard.permissions,canViewFolderPermissions:Ae.folder.canViewFolderPermissions}),Nt={getDashboardPermissions:Vt.qm,addDashboardPermission:Vt.Yq,removeDashboardPermission:Vt.Qk,updateDashboardPermission:Vt.RF,checkFolderPermissions:Ft.J6},Rt=(0,g.connect)(At,Nt);class wt extends t.PureComponent{constructor(Me){super(Me),this.onOpenAddPermissions=()=>{this.setState({isAdding:!0})},this.onRemoveItem=Ze=>{this.props.removeDashboardPermission(this.props.dashboard.id,Ze)},this.onPermissionChanged=(Ze,tt)=>{this.props.updateDashboardPermission(this.props.dashboard.id,Ze,tt)},this.onAddPermission=Ze=>this.props.addDashboardPermission(this.props.dashboard.id,Ze),this.onCancelAddPermission=()=>{this.setState({isAdding:!1})},this.state={isAdding:!1}}componentDidMount(){this.props.getDashboardPermissions(this.props.dashboard.id),this.props.dashboard.meta.folderUid&&this.props.checkFolderPermissions(this.props.dashboard.meta.folderUid)}getFolder(){const{dashboard:Me,canViewFolderPermissions:Ze}=this.props;return{id:Me.meta.folderId,title:Me.meta.folderTitle,url:Me.meta.folderUrl,canViewFolderPermissions:Ze}}render(){const{permissions:Me,dashboard:Ze,sectionNav:tt}=this.props,{isAdding:It}=this.state;return Ze.meta.hasUnsavedFolderChange?t.createElement(d.T,{navModel:tt},t.createElement("h5",null,"You have changed a folder, please save to view permissions.")):t.createElement(d.T,{navModel:tt},t.createElement("div",{className:"page-action-bar"},t.createElement(b.u,{placement:"auto",content:t.createElement(Bt.Z,null)},t.createElement(M.J,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})),t.createElement("div",{className:"page-action-bar__spacer"}),t.createElement(f.zx,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:It},"Add permission")),t.createElement(un.s,{in:It},t.createElement(hn.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})),t.createElement(Wn.Z,{items:Me,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:this.getFolder()}))}}const _t=Rt(wt);var Qt=e(84135),en=e(73446),sn=e(86647),Jt=e(53117),gn=e(13393),Cn=e(46967),In=e(58255),_n=e(8581),zn=e(13355),Hn=e(65583),sa=e(47956),Ma=e(9398),la=e(19349),jn=e(86899),ia=e(86953),Aa=e(573),ga=e(30471),ya=e(39834),Wa=e(2703);class rs extends t.PureComponent{constructor(Me){super(Me),this.updateFields=()=>{const Ze=this.props.response?.panelData,tt=Ze?.series?.[0]??Ze?.annotations?.[0];if(tt&&tt.fields){const It=tt.fields.map($t=>{const Tt=(0,ga.CZ)($t,tt);let qe="";for(let rn=0;rn<tt.length;rn++){if(rn>0&&(qe+=", "),rn>2){qe+="...";break}qe+=$t.values[rn]}return qe.length>50&&(qe=qe.substring(0,50)+"..."),{label:`${Tt} (${$t.type})`,value:Tt,description:qe}});this.setState({fieldNames:It})}},this.onFieldSourceChange=(Ze,tt)=>{const It=this.props.mappings||{},$t=It[Ze]||{};this.props.change({...It,[Ze]:{...$t,source:tt.value||ya.L.Field}})},this.onFieldNameChange=(Ze,tt)=>{const It=this.props.mappings||{},$t=It[Ze]||{};this.props.change({...It,[Ze]:{...$t,value:tt.value,source:ya.L.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(Me){Me.response!==this.props.response&&this.updateFields()}renderRow(Me,Ze,tt){const{fieldNames:It}=this.state;let $t=It;const Tt=Ze.value;let qe=It.find(dn=>Tt===dn.value);Tt&&($t=[...It],qe||$t.push({label:Tt,value:Tt}));let rn=tt?tt[Me.key]:"";if(rn&&Me.key.startsWith("time")){const dn=(0,Wa.Cf)("dateTimeAsIso");rn=(0,Wa.zc)(dn(rn))}return rn==null&&(rn=""),t.createElement("tr",{key:Me.key},t.createElement("td",null,Me.key," ",Me.help&&t.createElement(b.u,{content:Me.help},t.createElement(M.J,{name:"info-circle"}))),t.createElement("td",null,t.createElement(_n.Ph,{value:qe,options:$t,placeholder:Me.placeholder||Me.key,onChange:dn=>{this.onFieldNameChange(Me.key,dn)},noOptionsMessage:"Unknown field names",allowCustomValue:!0})),t.createElement("td",null,`${rn}`))}render(){const Me=this.props.response?.events?.[0],Ze=this.props.mappings||{};return t.createElement("table",{className:"filter-table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Annotation"),t.createElement("th",null,"From"),t.createElement("th",null,"First Value"))),t.createElement("tbody",null,Aa.r0.map(tt=>this.renderRow(tt,Ze[tt.key]||{},Me))))}}class Xa extends t.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:Me,annotation:Ze}=this.props;if((0,Aa.yr)(Me))return;const tt=(0,Ma.h4)().getCurrent();if(!tt)return;this.setState({running:!0});const It=await(0,Hn.n)((0,ia.r)({range:(0,la.$t)().timeRange(),panel:new jn.r({}),dashboard:tt},Me,Ze));this.setState({running:!1,response:It})},this.onQueryChange=Me=>{this.props.onChange({...this.props.annotation,target:Me})},this.onMappingChange=Me=>{this.props.onChange({...this.props.annotation,mappings:Me})},this.onAnnotationChange=Me=>{this.props.onChange(Me)}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(Me){this.props.annotation!==Me.annotation&&!(0,Aa.yr)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:Me,annotation:Ze}=this.props,It={...Aa.yA,...Me.annotations}.prepareAnnotation(Ze);It!==Ze?this.props.onChange(It):this.onRunQuery()}renderStatus(){const{response:Me,running:Ze}=this.state;let tt="alert-info",It="...",$t;if(Ze||Me?.panelData?.state===le.Gu.Loading||!Me)It="loading...";else{const{events:Tt,panelData:qe}=Me;if(qe?.error)tt="alert-error",$t="exclamation-triangle",It=qe.error.message??"error";else if(!Tt?.length)tt="alert-warning",$t="exclamation-triangle",It="No events found";else{const rn=qe?.series?.[0]??qe?.annotations?.[0];It=`${Tt.length} events (from ${rn?.fields.length} fields)`}}return t.createElement("div",{className:(0,E.cx)(tt,E.css`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `)},t.createElement("div",null,$t&&t.createElement(t.Fragment,null,t.createElement(M.J,{name:$t}),"\xA0"),It),t.createElement("div",null,Ze?t.createElement(D.$,null):t.createElement(f.zx,{variant:"secondary",size:"xs",onClick:this.onRunQuery},"TEST")))}render(){const{datasource:Me,annotation:Ze,datasourceInstanceSettings:tt}=this.props,{response:It}=this.state;let $t=Me.annotations?.QueryEditor||Me.components?.QueryEditor;if(!$t)return t.createElement("div",null,"Annotations are not supported. This datasource needs to export a QueryEditor");const Tt={...Me.annotations?.getDefaultQuery?.(),...Ze.target??{refId:"Anno"}};return t.createElement(t.Fragment,null,t.createElement(sa.n,{instanceSettings:tt},t.createElement($t,{key:Me?.name,query:Tt,datasource:Me,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:It?.panelData,range:(0,la.$t)().timeRange(),annotation:Ze,onAnnotationChange:this.onAnnotationChange})),(0,Aa.$w)(Me)&&t.createElement(t.Fragment,null,this.renderStatus(),t.createElement(rs,{response:It,mappings:Ze.mappings,change:this.onMappingChange})))}}var wa=e(11484);class Pa extends t.PureComponent{constructor(){super(...arguments),this.ref=null}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(Me){Me.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,this.angularComponent?.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const Me=(0,wa.w)(),Ze='<plugin-component type="annotations-query-ctrl"> </plugin-component>',tt={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=Me.load(this.ref,tt,Ze),this.angularComponent.digest(),this.angularComponent.getScope().$watch(()=>{if(tt.ctrl.ignoreNextWatcherFiring){tt.ctrl.ignoreNextWatcherFiring=!1;return}this.props.onChange(tt.ctrl.currentAnnotation)}),this.scopeProps=tt}render(){return t.createElement("div",{ref:Me=>this.ref=Me})}}const os="New annotation",Ca=({editIdx:Ae,dashboard:Me})=>{const Ze=(0,P.wW)(ta),[tt,It]=(0,t.useState)(Me.annotations.list[Ae]),$t=(0,t.useMemo)(()=>tt.filter?tt.filter.exclude?ua.ExcludePanels:ua.IncludePanels:ua.AllPanels,[tt.filter]),{value:Tt}=(0,v.Z)(()=>(0,sn.F)().get(tt.datasource),[tt.datasource]),qe=(0,sn.F)().getInstanceSettings(tt.datasource),rn=ea=>{const xa=[...Me.annotations.list];xa.splice(Ae,1,ea),It(ea),Me.annotations.list=xa},dn=ea=>{rn({...tt,name:ea.currentTarget.value})},Dn=ea=>{rn({...tt,datasource:(0,en.iU)(ea)})},wn=ea=>{const xa=ea.currentTarget;rn({...tt,[xa.name]:xa.type==="checkbox"?xa.checked:xa.value})},Gn=ea=>{rn({...tt,iconColor:ea})},ra=ea=>{let xa=ea.value===ua.AllPanels?void 0:{exclude:ea.value===ua.ExcludePanels,ids:tt.filter?.ids??[]};rn({...tt,filter:xa})},Sa=ea=>{if(!Array.isArray(ea))return;const xa={exclude:$t===ua.ExcludePanels,ids:[]};ea.forEach(za=>za.value&&xa.ids.push(za.value)),rn({...tt,filter:xa})},Da=Qa,Ta=()=>{l.E1.partial({editview:null,editIndex:null})},An=()=>{const ea=Me.annotations.list;Me.annotations.list=[...ea.slice(0,Ae),...ea.slice(Ae+1)],Qa()},Fn=tt.name===os,da=(ea,xa)=>ea.label&&xa.label?ea.label.toLowerCase().localeCompare(xa.label.toLowerCase()):-1,va=(0,t.useMemo)(()=>Me?.panels.filter(ea=>r.ZP.panels[ea.type]).map(ea=>({value:ea.id,label:ea.title??`Panel ${ea.id}`,description:ea.description,imgUrl:r.ZP.panels[ea.type].info.logos.small})).sort(da)??[],[Me]);return t.createElement("div",null,t.createElement(gn.C,{className:Ze.settingsForm},t.createElement(me.g,{label:"Name"},t.createElement(Cn.I,{"aria-label":s.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:Fn,value:tt.name,onChange:dn})),t.createElement(me.g,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(Jt.q,{annotations:!0,variables:!0,current:tt.datasource,onChange:Dn})),t.createElement(me.g,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},t.createElement(In.X,{name:"enable",id:"enable",value:tt.enable,onChange:wn})),t.createElement(me.g,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},t.createElement(In.X,{name:"hide",id:"hide",value:tt.hide,onChange:wn})),t.createElement(me.g,{label:"Color",description:"Color to use for the annotation event markers"},t.createElement(C.Lh,null,t.createElement(zn.B,{value:tt?.iconColor,onChange:Gn}))),t.createElement(me.g,{label:"Show in","aria-label":s.wl.pages.Dashboard.Settings.Annotations.NewAnnotation.showInLabel},t.createElement(t.Fragment,null,t.createElement(_n.Ph,{options:vs,value:$t,onChange:ra,"aria-label":s.wl.components.Annotations.annotationsTypeInput}),$t!==ua.AllPanels&&t.createElement(_n.NU,{options:va,value:va.filter(ea=>tt.filter?.ids.includes(ea.value)),onChange:Sa,isClearable:!0,placeholder:"Choose panels",width:100,closeMenuOnSelect:!1,className:Ze.select,"aria-label":s.wl.components.Annotations.annotationsChoosePanelInput})))),t.createElement(gn.C,null,t.createElement("h3",{className:"page-heading"},"Query"),Tt?.annotations&&qe&&t.createElement(Xa,{datasource:Tt,datasourceInstanceSettings:qe,annotation:tt,onChange:rn}),Tt&&!Tt.annotations&&t.createElement(Pa,{datasource:Tt,annotation:tt,onChange:rn})),t.createElement(Xe.Stack,null,!tt.builtIn&&t.createElement(f.zx,{variant:"destructive",onClick:An},"Delete"),t.createElement(f.zx,{variant:"secondary",onClick:Ta,"data-testid":s.wl.pages.Dashboard.Settings.Annotations.NewAnnotation.previewInDashboard},"Preview in dashboard"),t.createElement(f.zx,{variant:"primary",onClick:Da},"Apply")))},ta=Ae=>({settingsForm:(0,E.css)({maxWidth:Ae.spacing(60),marginBottom:Ae.spacing(2)}),select:E.css`
      margin-top: 8px;
    `});function Qa(){l.E1.partial({editIndex:null})}var ua=(Ae=>(Ae[Ae.AllPanels=0]="AllPanels",Ae[Ae.IncludePanels=1]="IncludePanels",Ae[Ae.ExcludePanels=2]="ExcludePanels",Ae))(ua||{});const vs=[{label:"All panels",value:0,description:"Send the annotation data to all panels that support annotations"},{label:"Selected panels",value:1,description:"Send the annotations to the explicitly listed panels"},{label:"All panels except",value:2,description:"Do not send annotation data to the following panels"}];var qa=e(574),Fa=e(13626);const ns=({children:Ae,...Me})=>{const Ze=(0,P.wW)(ca);return t.createElement("div",{className:Ze.buttonWrapper},t.createElement(f.zx,{icon:"plus",variant:"secondary",...Me},Ae))},ca=Ae=>({buttonWrapper:E.css`
    padding: ${Ae.spacing(3)} 0;
  `}),as=({dashboard:Ae,onNew:Me,onEdit:Ze})=>{const[tt,It]=(0,t.useState)(Ae.annotations.list),$t=(Dn,wn)=>{Ae.annotations.list=qa.moveItemImmutably(tt,Dn,Dn+wn),It(Ae.annotations.list)},Tt=Dn=>{Ae.annotations.list=[...tt.slice(0,Dn),...tt.slice(Dn+1)],It(Ae.annotations.list)},qe=tt.length===0||tt.length===1&&tt[0].builtIn,rn=Dn=>Dn.enable===!1?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},"(Disabled) \xA0 ",Dn.name)):Dn.builtIn?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},Dn.name," \xA0 (Built-in)")):t.createElement(t.Fragment,null,Dn.name),dn=(0,sn.F)();return t.createElement(C.wc,null,tt.length>0&&t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Query name"),t.createElement("th",null,"Data source"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,Ae.annotations.list.map((Dn,wn)=>t.createElement("tr",{key:`${Dn.name}-${wn}`},Dn.builtIn?t.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>Ze(wn)},t.createElement(f.zx,{size:"sm",fill:"text",variant:"secondary"},rn(Dn))):t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Ze(wn)},t.createElement(f.zx,{size:"sm",fill:"text",variant:"secondary"},rn(Dn))),t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Ze(wn)},dn.getInstanceSettings(Dn.datasource)?.name||Dn.datasource?.uid),t.createElement("td",{role:"gridcell",style:{width:"1%"}},wn!==0&&t.createElement(x.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>$t(wn,-1)})),t.createElement("td",{role:"gridcell",style:{width:"1%"}},Ae.annotations.list.length>1&&wn!==Ae.annotations.list.length-1?t.createElement(x.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>$t(wn,1)}):null),t.createElement("td",{role:"gridcell",style:{width:"1%"}},!Dn.builtIn&&t.createElement(Fa.m,{size:"sm",onConfirm:()=>Tt(wn),"aria-label":`Delete query with title "${Dn.name}"`})))))),qe&&t.createElement(Le.Z,{onClick:Me,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!qe&&t.createElement(ns,{onClick:Me},"New query"))};function Os({dashboard:Ae,editIndex:Me,sectionNav:Ze}){const tt=()=>{const Tt={name:os,enable:!0,datasource:(0,en.iU)((0,sn.F)().getInstanceSettings(null)),iconColor:"red"};Ae.annotations.list=[...Ae.annotations.list,{...Tt}],l.E1.partial({editIndex:Ae.annotations.list.length-1})},It=Tt=>{l.E1.partial({editIndex:Tt})},$t=Me!=null&&Me<Ae.annotations.list.length;return t.createElement(d.T,{navModel:Ze,pageNav:bs(Ae,Me)},!$t&&t.createElement(as,{dashboard:Ae,onNew:tt,onEdit:It}),$t&&t.createElement(Ca,{dashboard:Ae,editIdx:Me}))}function bs(Ae,Me){if(Me==null)return;const Ze=Ae.annotations.list[Me];if(Ze)return{text:Ze.name}}var ir=e(43339),ur=e(79658),mr=e(5191),er=e(55986),ds=e(13821),ws=e(60499),us=e(50946);const Ws=(Ae,Me)=>{const[Ze,tt]=(0,ds.Z)(()=>(0,us.iM)(Ae,!1),[]),It=(0,ws.iG)();return(0,t.useEffect)(()=>{Ze.value&&(Me(),l.E1.replace("/"),It.success("Dashboard Deleted",`${Ze.value.title} has been deleted`))},[Ze,It,Me]),{state:Ze,onDeleteDashboard:tt}},Es={cleanUpDashboardAndVariables:Vt.lw},Fs=(0,g.connect)(null,Es),Gs=({hideModal:Ae,cleanUpDashboardAndVariables:Me,dashboard:Ze})=>{const tt=Ze.meta.provisioned,{onDeleteDashboard:It}=Ws(Ze.uid,Me),[,$t]=(0,er.default)(async()=>{await It(),Ae()},[Ae]),Tt=fr(Ze.panels,Ze.title);return tt?t.createElement(lr,{hideModal:Ae,provisionedId:Ze.meta.provisionedExternalId}):t.createElement(Z.s,{isOpen:!0,body:Tt,onConfirm:$t,onDismiss:Ae,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},fr=(Ae,Me)=>{const Ze=(0,dt.sumBy)(Ae,tt=>tt.alert?1:0);return Ze>0&&!r.vc.unifiedAlertingEnabled?t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,"This dashboard contains ",Ze," alert",Ze>1?"s":"",". Deleting this dashboard also deletes those alerts.")):t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,Me))},lr=({hideModal:Ae,provisionedId:Me})=>t.createElement(R.u,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:Ae,className:E.css`
      width: 500px;
    `},t.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),t.createElement("p",null,t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null),"File path: ",Me),t.createElement(R.u.ButtonRow,null,t.createElement(f.zx,{variant:"primary",onClick:Ae},"OK"))),tr=Fs(Gs),Ys=({dashboard:Ae})=>t.createElement(mr.JY,null,({showModal:Me,hideModal:Ze})=>t.createElement(f.zx,{variant:"destructive",onClick:()=>{Me(tr,{dashboard:Ae,hideModal:Ze})},"aria-label":"Dashboard settings page delete dashboard button"},"Delete Dashboard"));var js=e(42557);const gr=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];function is({dashboard:Ae,updateTimeZone:Me,updateWeekStart:Ze,sectionNav:tt}){const[It,$t]=(0,t.useState)(0),Tt=Fn=>{Ae.meta.folderUid=Fn.uid,Ae.meta.folderTitle=Fn.title,Ae.meta.hasUnsavedFolderChange=!0},qe=Fn=>{(Fn.currentTarget.name==="title"||Fn.currentTarget.name==="description")&&(Ae[Fn.currentTarget.name]=Fn.currentTarget.value)},rn=Fn=>{Ae.graphTooltip=Fn,$t(It+1)},dn=Fn=>{Ae.timepicker.refresh_intervals=Fn.filter(da=>da.trim()!=="")},Dn=Fn=>{Ae.timepicker.nowDelay=Fn},wn=Fn=>{Ae.timepicker.hidden=Fn,$t(It+1)},Gn=Fn=>{Ae.liveNow=Fn,$t(It+1)},ra=Fn=>{Ae.timezone=Fn,$t(It+1),Me(Fn)},Sa=Fn=>{Ae.weekStart=Fn,$t(It+1),Ze(Fn)},Da=Fn=>{Ae.tags=Fn,$t(It+1)},Ta=Fn=>{Ae.editable=Fn,$t(It+1)},An=[{label:"Editable",value:!0},{label:"Read-only",value:!1}];return t.createElement(d.T,{navModel:tt},t.createElement("div",{style:{maxWidth:"600px"}},t.createElement("div",{className:"gf-form-group"},t.createElement(me.g,{label:"Name"},t.createElement(Cn.I,{id:"title-input",name:"title",onBlur:qe,defaultValue:Ae.title})),t.createElement(me.g,{label:"Description"},t.createElement(Cn.I,{id:"description-input",name:"description",onBlur:qe,defaultValue:Ae.description})),t.createElement(me.g,{label:"Tags"},t.createElement(ir.B,{id:"tags-input",tags:Ae.tags,onChange:Da,width:40})),t.createElement(me.g,{label:"Folder"},t.createElement(ur.Es,{inputId:"dashboard-folder-input",initialTitle:Ae.meta.folderTitle,initialFolderUid:Ae.meta.folderUid,onChange:Tt,enableCreateNew:!0,dashboardId:Ae.id,skipInitialLoad:!0})),t.createElement(me.g,{label:"Editable",description:"Set to read-only to disable all editing. Reload the dashboard for changes to take effect"},t.createElement(q.S,{value:Ae.editable,options:An,onChange:Ta}))),t.createElement(js.P,{onTimeZoneChange:ra,onWeekStartChange:Sa,onRefreshIntervalChange:dn,onNowDelayChange:Dn,onHideTimePickerChange:wn,onLiveNowChange:Gn,refreshIntervals:Ae.timepicker.refresh_intervals,timePickerHidden:Ae.timepicker.hidden,nowDelay:Ae.timepicker.nowDelay,timezone:Ae.timezone,weekStart:Ae.weekStart,liveNow:Ae.liveNow}),t.createElement(a.s,{label:"Panel options",isOpen:!0},t.createElement(me.g,{label:"Graph tooltip",description:"Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect"},t.createElement(q.S,{onChange:rn,options:gr,value:Ae.graphTooltip}))),t.createElement("div",{className:"gf-form-button-row"},Ae.meta.canDelete&&t.createElement(Ys,{dashboard:Ae}))))}const pr={updateTimeZone:Vt.tM,updateWeekStart:Vt.f4},vr=(0,g.connect)(null,pr)(is);var nr=e(9405),cr=e(30992);function Rs({dashboard:Ae,sectionNav:Me}){const[Ze,tt]=(0,t.useState)(JSON.stringify(Ae.getSaveModelClone(),null,2)),It=async()=>{await(0,Ma.h4)().saveJSONDashboard(Ze),cr.H.reloadPage()},$t=(0,P.wW)(ms),Tt="The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on";return t.createElement(d.T,{navModel:Me,subTitle:Tt},t.createElement("div",{className:$t.wrapper},t.createElement(nr.p,{value:Ze,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:tt,containerStyles:$t.codeEditor}),Ae.meta.canSave&&t.createElement("div",null,t.createElement(f.zx,{type:"submit",onClick:It},"Save changes"))))}const ms=Ae=>({wrapper:(0,E.css)({display:"flex",height:"100%",flexDirection:"column",gap:Ae.spacing(2)}),codeEditor:(0,E.css)({flexGrow:1})});var Qs=e(18428),ys=e(34807);const jt=({dashboard:Ae,onNew:Me,onEdit:Ze})=>{const[tt,It]=(0,t.useState)(Ae.links),$t=(dn,Dn)=>{Ae.links=qa.moveItemImmutably(tt,dn,dn+Dn),It(Ae.links)},Tt=(dn,Dn)=>{Ae.links=[...tt,{...dn}],It(Ae.links)},qe=dn=>{Ae.links=[...tt.slice(0,dn),...tt.slice(dn+1)],It(Ae.links)};return Ae.links.length===0?t.createElement("div",null,t.createElement(Le.Z,{onClick:Me,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})):t.createElement(t.Fragment,null,t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Type"),t.createElement("th",null,"Info"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,tt.map((dn,Dn)=>t.createElement("tr",{key:`${dn.title}-${Dn}`},t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Ze(Dn)},t.createElement(M.J,{name:"external-link-alt"})," \xA0 ",dn.type),t.createElement("td",{role:"gridcell"},t.createElement(C.Lh,null,dn.title&&t.createElement("span",null,dn.title),dn.type==="link"&&t.createElement("span",null,dn.url),dn.type==="dashboards"&&t.createElement(ys.P,{tags:dn.tags??[]}))),t.createElement("td",{style:{width:"1%"},role:"gridcell"},Dn!==0&&t.createElement(x.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>$t(Dn,-1)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},tt.length>1&&Dn!==tt.length-1?t.createElement(x.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>$t(Dn,1)}):null),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(x.h,{"aria-label":"copy",name:"copy",onClick:()=>Tt(dn,Dn)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(Fa.m,{"aria-label":`Delete link with title "${dn.title}"`,size:"sm",onConfirm:()=>qe(Dn)})))))),t.createElement(ns,{onClick:Me},"New link"))};function He({dashboard:Ae,sectionNav:Me,editIndex:Ze}){const[tt,It]=(0,t.useState)(!1),$t=()=>{It(!1),l.E1.partial({editIndex:void 0})},Tt=()=>{Ae.links=[...Ae.links,{...Qs.zA}],It(!0),l.E1.partial({editIndex:Ae.links.length-1})},qe=Dn=>{It(!1),l.E1.partial({editIndex:Dn})},rn=Ze!==void 0;let dn;return rn&&(dn={text:tt?"New link":"Edit link",subTitle:tt?"Create a new link on your dashboard":"Edit a specific link of your dashboard"}),t.createElement(d.T,{navModel:Me,pageNav:dn},!rn&&t.createElement(jt,{dashboard:Ae,onNew:Tt,onEdit:qe}),rn&&t.createElement(Qs.fD,{dashboard:Ae,editLinkIdx:Ze,onGoBack:$t}))}var mt=e(99714);const bt=10;class Ht extends t.PureComponent{constructor(Me){super(Me),this.getVersions=(Ze=!1)=>{this.setState({isAppending:Ze}),mt.K8.getHistoryList(this.props.dashboard,{limit:this.limit,start:this.start}).then(tt=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(tt)]}),this.start+=this.limit}).catch(tt=>console.log(tt)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const Ze=this.state.versions.filter(rn=>rn.checked),[tt,It]=Ze,$t=tt.version===this.props.dashboard.version;this.setState({isLoading:!0});const Tt=await mt.K8.getDashboardVersion(this.props.dashboard.uid,It.version),qe=await mt.K8.getDashboardVersion(this.props.dashboard.uid,tt.version);this.setState({baseInfo:It,isLoading:!1,isNewLatest:$t,newInfo:tt,viewMode:"compare",diffData:{lhs:Tt.data,rhs:qe.data}})},this.decorateVersions=Ze=>Ze.map(tt=>({...tt,createdDateString:this.props.dashboard.formatDate(tt.created),ageString:this.props.dashboard.getRelativeTime(tt.created),checked:!1})),this.onCheck=(Ze,tt)=>{this.setState({versions:this.state.versions.map(It=>It.id===tt?{...It,checked:Ze.currentTarget.checked}:It)})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map(Ze=>({...Ze,checked:!1})),viewMode:"list"})},this.limit=bt,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find(Me=>Me.version===1)}render(){const{versions:Me,viewMode:Ze,baseInfo:tt,newInfo:It,isNewLatest:$t,isLoading:Tt,diffData:qe}=this.state,rn=Me.filter(wn=>wn.checked).length===2,dn=Me.length>1,Dn=Me.length>=this.limit;return Ze==="compare"?t.createElement(d.T,{navModel:this.props.sectionNav},t.createElement(mt.Cs,{onClick:this.reset,baseVersion:tt?.version,newVersion:It?.version,isNewLatest:$t}),Tt?t.createElement(nn,{msg:"Fetching changes\u2026"}):t.createElement(mt.U$,{newInfo:It,baseInfo:tt,isNewLatest:$t,diffData:qe})):t.createElement(d.T,{navModel:this.props.sectionNav},Tt?t.createElement(nn,{msg:"Fetching history list\u2026"}):t.createElement(mt.Sd,{versions:Me,onCheck:this.onCheck,canCompare:rn}),this.state.isAppending&&t.createElement(nn,{msg:"Fetching more entries\u2026"}),dn&&t.createElement(mt.R1,{hasMore:Dn,canCompare:rn,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()}))}}const nn=({msg:Ae})=>t.createElement(C.Lh,null,t.createElement(D.$,null),t.createElement("em",null,Ae)),qt=()=>l.E1.partial({editview:null,editIndex:null});function fn({dashboard:Ae,editview:Me,pageNav:Ze,sectionNav:tt}){const[It,$t]=(0,t.useState)(0);(0,t.useEffect)(()=>{Ae.events.subscribe(p.hS,()=>$t(Ta=>Ta+1))},[Ae]);const Tt=(0,t.useMemo)(()=>bn(Ae),[Ae,It]),qe=()=>{Ae.meta.hasUnsavedFolderChange=!1},rn=Tt.find(Ta=>Ta.id===Me)??Tt[0],dn=m.Vt.hasEditPermissionInFolders,Dn=Ae.meta.canSave,wn=(0,n.TH)(),Gn=Pt(wn),ra=xn(Ze,tt,Tt,rn,wn),Sa="sm",Da=[t.createElement(f.zx,{"data-testid":s.wl.pages.Dashboard.Settings.Actions.close,variant:"secondary",key:"close",fill:"outline",size:Sa,onClick:qt},"Close"),dn&&t.createElement(Qt.t,{dashboard:Ae,onSaveSuccess:qe,variant:"secondary",key:"save as",size:Sa}),Dn&&t.createElement(Qt.i,{dashboard:Ae,onSaveSuccess:qe,key:"Save",size:Sa})];return t.createElement(t.Fragment,null,t.createElement(o.A,{actions:t.createElement(u.R,{alignment:"right"},Da)}),t.createElement(rn.component,{sectionNav:ra,dashboard:Ae,editIndex:Gn}))}function bn(Ae){const Me=[];return Ae.meta.canEdit&&(Me.push({title:"General",id:"settings",icon:"sliders-v-alt",component:vr}),Me.push({title:"Annotations",id:"annotations",icon:"comment-alt",component:Os,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),Me.push({title:"Variables",id:"templating",icon:"calculator-alt",component:yt,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),Me.push({title:"Links",id:"links",icon:"link",component:He})),Ae.meta.canMakeEditable&&Me.push({title:"General",icon:"sliders-v-alt",id:"settings",component:qn}),Ae.id&&Ae.meta.canSave&&Me.push({title:"Versions",id:"versions",icon:"history",component:Ht}),Ae.id&&Ae.meta.canAdmin&&(r.ZP.rbacEnabled?m.Vt.hasPermission(c.AccessControlAction.DashboardsPermissionsRead)&&Me.push({title:"Permissions",id:"permissions",icon:"lock",component:an}):Me.push({title:"Permissions",id:"permissions",icon:"lock",component:_t})),Me.push({title:"JSON Model",id:"dashboard_json",icon:"arrow",component:Rs}),Me}function En(Ae,Me){return{...Ae,parentItem:Ae.parentItem?En(Ae.parentItem,Me):Me}}function xn(Ae,Me,Ze,tt,It){const $t={text:"Settings",children:[],icon:"apps",hideFromBreadcrumbs:!0};$t.children=Ze.map(qe=>({text:qe.title,icon:qe.icon,id:qe.id,url:i.u.getUrlForPartial(It,{editview:qe.id,editIndex:null}),active:qe===tt,parentItem:$t,subTitle:qe.subTitle}));const Tt=En(Ae,Me.node);return $t.parentItem=Tt,{main:$t,node:$t.children.find(qe=>qe.active)}}function qn({dashboard:Ae,sectionNav:Me}){return t.createElement(d.T,{navModel:Me},t.createElement("div",{className:"dashboard-settings__header"},"Dashboard not editable"),t.createElement(f.zx,{type:"submit",onClick:()=>Ae.makeEditable()},"Make editable"))}function Pt(Ae){const Me=new URLSearchParams(Ae.search).get("editIndex");if(Me!=null)return parseInt(Me,10)}},18428:(Y,T,e)=>{"use strict";e.d(T,{fD:()=>p,xy:()=>m,zA:()=>d});var t=e(66111),n=e(24799),i=e(46967),s=e(8581),l=e(43339),f=e(20941),u=e(58255),o=e(31403);const d={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},r=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],m={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},c=Object.keys(m).map(g=>({label:g,value:g})),p=({editLinkIdx:g,dashboard:y,onGoBack:E})=>{const[v,h]=(0,t.useState)(g!==null?y.links[g]:d),P=x=>{const R=[...y.links];R.splice(g,1,x),y.links=R,h(x)},a=x=>{P({...v,tags:x})},C=x=>{const R={...v,type:x.value};R.type==="dashboards"?(R.url="",R.tooltip=""):R.tags=[],P(R)},D=x=>{P({...v,icon:x.value})},b=x=>{const R=x.currentTarget;P({...v,[R.name]:R.type==="checkbox"?R.checked:R.value})},M=v.title===d.title;return t.createElement("div",{style:{maxWidth:"600px"}},t.createElement(n.g,{label:"Title"},t.createElement(i.I,{name:"title",id:"title",value:v.title,onChange:b,autoFocus:M})),t.createElement(n.g,{label:"Type"},t.createElement(s.Ph,{inputId:"link-type-input",value:v.type,options:r,onChange:C})),v.type==="dashboards"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"With tags"},t.createElement(l.B,{tags:v.tags,onChange:a}))),v.type==="link"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"URL"},t.createElement(i.I,{name:"url",value:v.url,onChange:b})),t.createElement(n.g,{label:"Tooltip"},t.createElement(i.I,{name:"tooltip",value:v.tooltip,onChange:b,placeholder:"Open dashboard"})),t.createElement(n.g,{label:"Icon"},t.createElement(s.Ph,{value:v.icon,options:c,onChange:D}))),t.createElement(f.s,{label:"Options",isOpen:!0},v.type==="dashboards"&&t.createElement(n.g,null,t.createElement(u.X,{label:"Show as dropdown",name:"asDropdown",value:v.asDropdown,onChange:b})),t.createElement(n.g,null,t.createElement(u.X,{label:"Include current time range",name:"keepTime",value:v.keepTime,onChange:b})),t.createElement(n.g,null,t.createElement(u.X,{label:"Include current template variable values",name:"includeVars",value:v.includeVars,onChange:b})),t.createElement(n.g,null,t.createElement(u.X,{label:"Open link in new tab",name:"targetBlank",value:v.targetBlank,onChange:b}))),t.createElement(o.zx,{onClick:E},"Apply"))}},91183:(Y,T,e)=>{"use strict";e.d(T,{u:()=>m});var t=e(9892),n=e(66111),i=e(23934),s=e(68183),l=e(72648),f=e(51275),u=e(31403),o=e(96044),d=e(36281);const r="showCategory",m=n.memo(({id:g,title:y,children:E,forceOpen:v,isOpenDefault:h,renderTitle:P,className:a,itemsCount:C,isNested:D=!1})=>{const b=h!==!1,[M,x]=(0,i.Z)(p(g),{isExpanded:b}),R=(0,l.wW)(c),[S,O]=(0,o.K)(),[U,I]=(0,n.useState)(M?.isExpanded??b),F=(0,n.useRef)(0),w=(0,n.useRef)(null),K=S[r]===g;(0,n.useEffect)(()=>{F.current&&Date.now()-F.current<200||(K||v)&&(U||I(!0),K&&w.current?.scrollIntoView())},[v,U,K]);const L=(0,n.useCallback)(()=>{F.current=Date.now(),O({[r]:U?void 0:g},!0),x({isExpanded:!U}),I(!U)},[x,I,O,U,g]);P||(P=function(_){return _||C===void 0||C===0?y:n.createElement("span",null,y," ",n.createElement(f.A,{value:C}))});const V=(0,t.cx)({[R.box]:!0,[R.boxNestedExpanded]:D&&U},a,"options-group"),H=(0,t.cx)(R.header,{[R.headerExpanded]:U,[R.headerNested]:D}),j=(0,t.cx)(R.body,{[R.bodyNested]:D});return n.createElement("div",{className:V,"data-testid":"options-category","aria-label":s.wl.components.OptionsGroup.group(g),ref:w},n.createElement("div",{className:H,onClick:L},n.createElement(u.zx,{"aria-label":s.wl.components.OptionsGroup.toggle(g),type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":U,className:R.toggleButton,icon:U?"angle-down":"angle-right",onClick:L}),n.createElement("h6",{id:`button-${g}`,className:R.title},P(U))),U&&n.createElement("div",{className:j,id:g,"aria-labelledby":`button-${g}`},E))});m.displayName="OptionsPaneCategory";const c=g=>({box:t.css`
      border-top: 1px solid ${g.colors.border.weak};
    `,boxNestedExpanded:t.css`
      margin-bottom: ${g.spacing(2)};
    `,title:t.css`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      padding-left: 6px;
      font-weight: ${g.typography.fontWeightMedium};
      margin: 0;
    `,header:t.css`
      display: flex;
      cursor: pointer;
      align-items: center;
      padding: ${g.spacing(.5)};
      color: ${g.colors.text.primary};
      font-weight: ${g.typography.fontWeightMedium};

      &:hover {
        background: ${g.colors.emphasize(g.colors.background.primary,.03)};
      }
    `,toggleButton:t.css`
      align-self: baseline;
    `,headerExpanded:t.css`
      color: ${g.colors.text.primary};
    `,headerNested:t.css`
      padding: ${g.spacing(.5,0,.5,0)};
    `,body:t.css`
      padding: ${g.spacing(1,2,1,4)};
    `,bodyNested:t.css`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${g.colors.border.weak};
      }
    `}),p=g=>`${d.jy}.optionGroup[${g}]`},91752:(Y,T,e)=>{"use strict";e.d(T,{j:()=>i});var t=e(66111),n=e(91183);class i{constructor(l){this.props=l,this.items=[],this.categories=[]}addItem(l){return l.parent=this,this.items.push(l),this}addCategory(l){return l.props.isNested=!0,l.parent=this,this.categories.push(l),this}getCategory(l){let f=this.categories.find(u=>u.props.id===l);return f||(f=new i({title:l,id:l}),this.addCategory(f),f)}render(l){return this.props.customRender?this.props.customRender():t.createElement(n.u,{key:this.props.title,...this.props},this.items.map(f=>f.render(l)),this.categories.map(f=>f.render(l)))}}},66352:(Y,T,e)=>{"use strict";e.d(T,{a:()=>c});var t=e(66111),n=e(55271),i=e.n(n),s=e(68183),l=e(64353),f=e(24799),u=e(9892),o=e(72648),d=e(61860);function r({overrides:p}){const g=(0,o.wW)(m);return t.createElement("div",{className:g.wrapper},p.map((y,E)=>t.createElement(d.u,{content:y.tooltip,key:E.toString(),placement:"top"},t.createElement("div",{"aria-label":y.description,className:g[y.type]}))))}const m=p=>{const g={width:8,height:8,borderRadius:"50%",marginLeft:p.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,u.css)({display:"flex"}),rule:(0,u.css)({...g,backgroundColor:p.colors.primary.main}),data:(0,u.css)({...g,backgroundColor:p.colors.warning.main})}};class c{constructor(g){this.props=g}getLabel(g){const{title:y,description:E,overrides:v}=this.props;if(!g)return this.parent.props.title===y&&!v?.length?null:t.createElement(l._,{description:E},y,v&&v.length>0&&t.createElement(r,{overrides:v}));const h=[];return this.parent.parent&&h.push(this.highlightWord(this.parent.parent.props.title,g)),this.parent.props.title!==y&&h.push(this.highlightWord(this.parent.props.title,g)),t.createElement(l._,{description:E&&this.highlightWord(E,g),category:h},this.highlightWord(y,g),v&&v.length>0&&t.createElement(r,{overrides:v}))}highlightWord(g,y){return t.createElement(i(),{textToHighlight:g,searchWords:[y],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:g}=this.props;!g||g.length}render(g){const{title:y,description:E,render:v,showIf:h,skipField:P}=this.props,a=`${this.parent.props.id} ${y}`;return h&&!h()?null:P?v():t.createElement(f.g,{label:this.getLabel(g),description:E,key:a,"aria-label":s.wl.components.PanelEditor.OptionsPane.fieldLabel(a)},v())}}},57054:(Y,T,e)=>{"use strict";e.d(T,{HZ:()=>p,AL:()=>c});var t=e(82897),n=e(66111),i=e(91353),s=e(64703),l=e(91752),f=e(66352);const u="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",o="An override rule exists for this property";function d(g,y,E){const v=[];if(E){for(const P of E)for(const a of P.fields)if((0,t.get)(a.config,g.path)!=null){v.push({type:"data",description:u,tooltip:u});break}}return y.overrides.some(P=>P.properties.some(a=>a.id===g.id))&&v.push({type:"rule",description:o,tooltip:o}),v}var r=e(13505);function m({data:g,replaceVariables:y,options:E,eventBus:v,instanceState:h}){const P=g?.series??[];return{data:P,replaceVariables:y,options:E,eventBus:v,getSuggestions:C=>(0,s.PW)(P,C),instanceState:h}}function c(g){const{plugin:y,panel:E,onPanelOptionsChanged:v,onFieldConfigsChange:h,data:P,dashboard:a,instanceState:C}=g,D=E.getOptions(),b=E.fieldConfig,M={},x=m({data:P,replaceVariables:E.replaceVariables,options:D,eventBus:a.events,instanceState:C}),R=O=>{const U=(O&&O[0])??`${y.meta.name}`,I=M[U];return I||(M[U]=new l.j({title:U,id:U}))},S={getValue:O=>(0,t.get)(D,O),onChange:(O,U)=>{const I=(0,r.hs)(D,O,U);v(I)}};p(y.getPanelOptionsSupplier(),S,R,x);for(const O of y.fieldConfigRegistry.list()){if(O.isCustom&&O.showIf&&!O.showIf(b.defaults.custom,P?.series)||O.hideFromDefaults)continue;const U=R(O.category),I=O.editor,F=b.defaults,w=O.isCustom?F.custom?(0,t.get)(F.custom,O.path):void 0:(0,t.get)(F,O.path);O.getItemsCount&&(U.props.itemsCount=O.getItemsCount(w)),U.addItem(new f.a({title:O.name,description:O.description,overrides:d(O,b,P?.series),render:function(){const L=V=>{h((0,r.uJ)(b,O.path,V,O.isCustom))};return n.createElement(I,{value:w,onChange:L,item:O,context:x,id:O.id})}}))}return Object.values(M)}function p(g,y,E,v,h){const P=new i.rt;g(P,v);for(const a of P.getItems()){if(a.showIf&&!a.showIf(v.options,v.data))continue;let C=h;if(C?a.category?.[0]?.length&&(C=C.getCategory(a.category[0])):C=E(a.category),(0,i.j)(a)){const b=a.getNestedValueAccess(y),M=b.getContext?b.getContext(v):{...v,options:y.getValue(a.path)};p(a.getBuilder(),b,E,M,C);continue}const D=a.editor;C.addItem(new f.a({title:a.name,description:a.description,render:function(){return n.createElement(D,{value:y.getValue(a.path),onChange:M=>{y.onChange(a.path,M)},item:a,context:v,id:a.id})}}))}}},36281:(Y,T,e)=>{"use strict";e.d(T,{Hl:()=>m,K9:()=>y,OT:()=>v,ZP:()=>P,g_:()=>E,jy:()=>u,my:()=>g,yi:()=>p});var t=e(62992),n=e(52666),i=e(75849),s=e(58379),l=e(96161),f=e(16200);const u="grafana.dashboard.editor.ui",o={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:f.d1.Fill},d=()=>{const a=s.Z.getObject(u,o);let C={...a};return typeof a.topPaneSize=="string"&&(C={...a,topPaneSize:parseFloat(a.topPaneSize)/100}),{getPanel:()=>new l.rY({}),getSourcePanel:()=>new l.rY({}),getData:()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,i.JK)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...o,...C}}},r=(0,t.oM)({name:"panelEditor",initialState:d(),reducers:{updateEditorInitState:(a,C)=>{a.getPanel=()=>C.payload.panel,a.getSourcePanel=()=>C.payload.sourcePanel,a.initDone=!0,a.isOpen=!0,a.shouldDiscardChanges=!1},setEditorPanelData:(a,C)=>{a.getData=()=>C.payload},setDiscardChanges:(a,C)=>{a.shouldDiscardChanges=C.payload},setPanelEditorUIState:(a,C)=>{a.ui={...a.ui,...C.payload},!a.ui.isPanelOptionsVisible&&a.isVizPickerOpen&&(a.isVizPickerOpen=!1)},toggleVizPicker:(a,C)=>{a.isVizPickerOpen=C.payload,a.isVizPickerOpen&&(a.ui.isPanelOptionsVisible=!0)},toggleTableView(a){a.tableViewEnabled=!a.tableViewEnabled},closeEditor:a=>{a.getPanel=()=>new l.rY({}),a.getSourcePanel=()=>new l.rY({}),a.isOpen=!1,a.initDone=!1,a.isVizPickerOpen=!1,a.tableViewEnabled=!1}}}),{updateEditorInitState:m,setEditorPanelData:c,setDiscardChanges:p,closeEditor:g,setPanelEditorUIState:y,toggleVizPicker:E,toggleTableView:v}=r.actions,P={panelEditor:r.reducer}},16200:(Y,T,e)=>{"use strict";e.d(T,{Ip:()=>t,Ok:()=>f,d1:()=>n,d7:()=>s});var t=(u=>(u.Query="query",u.Transform="transform",u.Visualize="visualize",u.Alert="alert",u))(t||{}),n=(u=>(u[u.Fill=0]="Fill",u[u.Fit=1]="Fit",u[u.Exact=2]="Exact",u))(n||{}),i=(u=>(u[u.Off=0]="Off",u[u.Table=1]="Table",u))(i||{});const s=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],l=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var f=(u=>(u[u.Visualizations=0]="Visualizations",u[u.LibraryPanels=1]="LibraryPanels",u[u.Suggestions=2]="Suggestions",u))(f||{})},13505:(Y,T,e)=>{"use strict";e.d(T,{hs:()=>o,jF:()=>l,sY:()=>f,uJ:()=>u});var t=e(82897),n=e.n(t),i=e(84952),s=e(16200);function l(d,r,m,c){if(d===s.d1.Fill)return{width:r,height:m};const p=8*6,g=60,E=(window.innerWidth-g-i.hD*4)/i.cz*c.gridPos.w,v=i.K3*c.gridPos.h+p,h=Math.min(r/E,m/v);return E<=r&&v<=m?{width:E,height:v}:{width:E*h,height:v*h}}function f(d){return d?.meta.skipDataQuery===!1}const u=(d,r,m,c)=>{let p={...d.defaults};const g=m==null||m==="";return c?p.custom?g?p.custom=(0,t.omit)(p.custom,r):p.custom=o(p.custom,r,m):g||(p.custom=o(p.custom,r,m)):g?p=(0,t.omit)(p,r):p=o(p,r,m),{...d,defaults:p}};function o(d,r,m){const c=Array.isArray(r)?r:r.split("."),p=c.shift();if(p.endsWith("]")){const y=p.lastIndexOf("["),E=+p.substring(y+1,p.length-1),v=p.substring(0,y);let h=d[v];const P=Array.isArray(h)?[...h]:[];return c.length&&(h=P[E],(h==null||typeof h!="object")&&(h={}),m=o(h,c,m)),P[E]=m,{...d,[v]:P}}if(!c.length)return{...d,[p]:m};let g=d[p];return(g==null||typeof g!="object")&&(g={}),{...d,[p]:o(g,c,m)}}},84135:(Y,T,e)=>{"use strict";e.d(T,{i:()=>u,t:()=>o});var t=e(66111),n=e(68183),i=e(41818),s=e(5191),l=e(31403),f=e(63205);const u=({dashboard:d,onSaveSuccess:r,size:m})=>t.createElement(s.JY,null,({showModal:c,hideModal:p})=>t.createElement(l.zx,{size:m,onClick:()=>{c(f.d,{dashboard:d,onSaveSuccess:r,onDismiss:p})},"aria-label":n.wl.pages.Dashboard.Settings.General.saveDashBoard},"Save dashboard")),o=({dashboard:d,onSaveSuccess:r,variant:m,size:c})=>t.createElement(s.JY,null,({showModal:p,hideModal:g})=>t.createElement(l.zx,{size:c,onClick:()=>{(0,i.ff)("grafana_dashboard_save_as_clicked"),p(f.d,{dashboard:d,onSaveSuccess:r,onDismiss:g,isCopy:!0})},variant:m,"aria-label":n.wl.pages.Dashboard.Settings.General.saveAsDashBoard},"Save as"))},63205:(Y,T,e)=>{"use strict";e.d(T,{d:()=>Ke});var t=e(66111),n=e(59679),i=e(54899),s=e(35645),l=e(67487),f=e(30979),u=e(72142),o=e(79841),d=e(29930),r=e(15092),m=e(9892),c=e(72648),p=e(45253);function g({dashboard:Ge}){const at=(0,c.wW)(y),{loading:dt,value:Re,error:ye}=(0,n.Z)(async()=>{const be=Ge.getSaveModelClone();return d.ae.validateDashboard(be).catch(ke=>{if(ke.status>=500)throw ke;return ke.data})},[Ge]);let Pe;if(dt)Pe=t.createElement(p.b,{severity:"info",title:"Checking dashboard validity"});else if(Re)Re.isValid||(Pe=t.createElement(p.b,{severity:"warning",title:"Dashboard failed schema validation"},t.createElement("p",null,"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"),t.createElement("div",{className:at.error},Re.message)));else{const be=ye?.message??"Unknown error";Pe=t.createElement(p.b,{severity:"info",title:"Error checking dashboard validity"},t.createElement("p",{className:at.error},be))}return Pe?t.createElement("div",{className:at.root},Pe):null}const y=Ge=>({root:(0,m.css)({marginTop:Ge.spacing(1)}),error:(0,m.css)({fontFamily:Ge.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),E=g;var v=e(64687),h=e(61017);const P=({diff:Ge,oldValue:at,newValue:dt})=>{const Re=(0,c.wW)(a),ye=(0,n.Z)(async()=>{const be=JSON.stringify(at??{},null,2),Be=JSON.stringify(dt??{},null,2);let ke;const ot=[];let ft=0;if(Ge)for(const[gt,St]of Object.entries(Ge)){const ut=t.createElement(v.B,{diffs:St,key:gt,title:gt});gt==="schemaVersion"?ke=ut:ot.push(ut),ft+=St.length}return{schemaChange:ke,diffs:ot,count:ft,showDiffs:ft<15,jsonView:t.createElement(h.Z,{oldValue:be,newValue:Be})}},[Ge,at,dt]),{value:Pe}=ye;return!Pe||!at?t.createElement(l.$,null):Pe.count<1?t.createElement("div",null,"No changes in this dashboard"):t.createElement("div",null,Pe.schemaChange&&t.createElement("div",{className:Re.spacer},Pe.schemaChange),Pe.showDiffs&&t.createElement("div",{className:Re.spacer},Pe.diffs),t.createElement("h4",null,"JSON Model"),Pe.jsonView)},a=Ge=>({spacer:m.css`
    margin-bottom: ${Ge.v1.spacing.xl};
  `});var C=e(98102),D=e(35029),b=e(31403),M=e(84135),x=e(13821),R=e(72196),S=e(41818),O=e(37932),U=e(18271),I=e(60499),F=e(77582),w=e(61962),K=e(50946),L=e(27876),V=e(45984);const H=async(Ge,at,dt)=>{let Re=at.folderUid;Re===void 0&&(Re=dt.meta.folderUid??Ge.folderUid);const ye=await(0,K.uC)({...at,folderUid:Re,dashboard:Ge});return await F.Vt.fetchUserPermissions(),ye},j=(Ge,at=!1)=>{const dt=(0,L.useDispatch)(),Re=(0,I.iG)(),[ye,Pe]=(0,x.Z)(async(be,Be,ke)=>{try{const ot=await H(be,Be,ke);ke.version=ot.version,ke.clearUnsavedChanges(),U.Z.publish(new V.Jd),Re.success("Dashboard saved"),at?(0,S.ff)("grafana_dashboard_copied",{name:ke.title,url:ot.url}):(0,S.ff)(`grafana_dashboard_${ke.id?"saved":"created"}`,{name:ke.title,url:ot.url});const ft=O.E1.getLocation().pathname,gt=R.u.stripBaseFromUrl(ot.url);return gt!==ft&&setTimeout(()=>O.E1.replace(gt)),ke.meta.isStarred&&dt((0,w.gd)({id:ke.uid,title:ke.title,url:gt})),ot}catch(ot){throw ot instanceof Error&&Re.error(ot.message??"Error saving dashboard"),ot}},[dt,Re]);return{state:ye,onDashboardSave:Pe}},A=({dashboard:Ge,dashboardSaveModel:at,error:dt,onDismiss:Re})=>{const{onDashboardSave:ye}=j(Ge);return(0,t.useEffect)(()=>{dt.data&&k(dt.data.status)&&(dt.isHandled=!0)},[dt]),t.createElement(t.Fragment,null,dt.data&&dt.data.status==="version-mismatch"&&t.createElement(C.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"Someone else has updated this dashboard ",t.createElement("br",null)," ",t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await ye(at,{overwrite:!0},Ge),Re()},onDismiss:Re}),dt.data&&dt.data.status==="name-exists"&&t.createElement(C.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"A dashboard with the same name in selected folder already exists. ",t.createElement("br",null),t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await ye(at,{overwrite:!0},Ge),Re()},onDismiss:Re}),dt.data&&dt.data.status==="plugin-dashboard"&&t.createElement(_,{dashboard:Ge,onDismiss:Re}))},_=({onDismiss:Ge,dashboard:at})=>{const{onDashboardSave:dt}=j(at),Re=(0,c.wW)(Q);return t.createElement(D.u,{className:Re.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:Ge},t.createElement("div",{className:Re.modalText},"Your changes will be lost when you update the plugin.",t.createElement("br",null),t.createElement("small",null,"Use ",t.createElement("strong",null,"Save As")," to create custom version.")),t.createElement(D.u.ButtonRow,null,t.createElement(b.zx,{variant:"secondary",onClick:Ge,fill:"outline"},"Cancel"),t.createElement(M.t,{dashboard:at,onSaveSuccess:Ge}),t.createElement(b.zx,{variant:"destructive",onClick:async()=>{await dt(at.getSaveModelClone(),{overwrite:!0},at),Ge()}},"Overwrite")))},k=Ge=>{switch(Ge){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},Q=Ge=>({modal:m.css`
    width: 500px;
  `,modalText:m.css`
    font-size: ${Ge.typography.h4.fontSize};
    color: ${Ge.colors.text.primary};
    margin-bottom: ${Ge.spacing(4)}
    padding-top: ${Ge.spacing(2)};
  `,modalButtonRow:m.css`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${Ge.spacing(2)};
    }
  `});var re=e(94270),Z=e(24799),oe=e(46967),G=e(63619),le=e(8944),fe=e(52081),ae=e(79658),de=e(85385);const ee=Ge=>{const at=Ge.getSaveModelClone();return at.id=null,at.uid="",at.title+=" Copy",at.editable=!0,Ge.id>0&&at.panels.forEach(dt=>{dt.type==="graph"&&dt.alert&&delete dt.thresholds,delete dt.alert}),at},me=({dashboard:Ge,isNew:at,onSubmit:dt,onCancel:Re,onSuccess:ye})=>{const Pe={title:at?Ge.title:`${Ge.title} Copy`,$folder:{uid:Ge.meta.folderUid,title:Ge.meta.folderTitle},copyTags:!1},be=Be=>async ke=>{if(ke&&ke===Be().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await de.t.validateNewDashboardName(Be().$folder.uid,ke),!0}catch(ot){return ot instanceof Error?ot.message:"Dashboard name is invalid"}};return t.createElement(re.l,{defaultValues:Pe,onSubmit:async Be=>{if(!dt)return;const ke=ee(Ge);ke.title=Be.title,Be.copyTags||(ke.tags=[]),(await dt(ke,{folderUid:Be.$folder.uid},Ge)).status==="success"&&ye()}},({register:Be,control:ke,errors:ot,getValues:ft})=>t.createElement(t.Fragment,null,t.createElement(Z.g,{label:"Dashboard name",invalid:!!ot.title,error:ot.title?.message},t.createElement(oe.I,{...Be("title",{validate:be(ft)}),"aria-label":"Save dashboard title field",autoFocus:!0})),t.createElement(Z.g,{label:"Folder"},t.createElement(G.g,{render:({field:{ref:gt,...St}})=>t.createElement(ae.Es,{...St,dashboardId:Ge.id,initialFolderUid:Ge.meta.folderUid,initialTitle:Ge.meta.folderTitle,enableCreateNew:!0}),control:ke,name:"$folder"})),!at&&t.createElement(Z.g,{label:"Copy tags"},t.createElement(le.r,{...Be("copyTags")})),t.createElement(fe.Lh,null,t.createElement(b.zx,{type:"button",variant:"secondary",onClick:Re,fill:"outline"},"Cancel"),t.createElement(b.zx,{type:"submit","aria-label":"Save dashboard button"},"Save"))))};var q=e(68183),ne=e(26418),se=e(58255),he=e(97379);const ue=({dashboard:Ge,saveModel:at,options:dt,onSubmit:Re,onCancel:ye,onSuccess:Pe,onOptionsChange:be})=>{const Be=(0,t.useMemo)(()=>Ge.hasTimeChanged(),[Ge]),ke=(0,t.useMemo)(()=>Ge.hasVariableValuesChanged(),[Ge]),[ot,ft]=(0,t.useState)(!1);return t.createElement(re.l,{onSubmit:async gt=>{if(!Re)return;ft(!0),dt={...dt,message:gt.message},(await Re(at.clone,dt,Ge)).status==="success"?(dt.saveVariables&&Ge.resetOriginalVariables(),dt.saveTimerange&&Ge.resetOriginalTime(),Pe()):ft(!1)}},({register:gt,errors:St})=>{const ut=gt("message");return t.createElement(ne.Stack,{direction:"column",gap:2},Be&&t.createElement(se.X,{checked:!!dt.saveTimerange,onChange:()=>be({...dt,saveTimerange:!dt.saveTimerange}),label:"Save current time range as dashboard default","aria-label":q.wl.pages.SaveDashboardModal.saveTimerange}),ke&&t.createElement(se.X,{checked:!!dt.saveVariables,onChange:()=>be({...dt,saveVariables:!dt.saveVariables}),label:"Save current variable values as dashboard default","aria-label":q.wl.pages.SaveDashboardModal.saveVariables}),t.createElement(he.K,{...ut,"aria-label":"message",value:dt.message,onChange:Dt=>{be({...dt,message:Dt.currentTarget.value}),ut.onChange(Dt)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5}),t.createElement(ne.Stack,{alignItems:"center"},t.createElement(b.zx,{variant:"secondary",onClick:ye,fill:"outline"},"Cancel"),t.createElement(b.zx,{type:"submit",disabled:!at.hasChanges,icon:ot?"fa fa-spinner":void 0,"aria-label":q.wl.pages.SaveDashboardModal.save},"Save"),!at.hasChanges&&t.createElement("div",null,"No changes to save")))})};var Te=e(3574),Ve=e(94599);const ct=({dashboard:Ge,onCancel:at})=>{const[dt,Re]=(0,t.useState)(()=>{const Pe=Ge.getSaveModelClone();return delete Pe.id,JSON.stringify(Pe,null,2)}),ye=(0,t.useCallback)(()=>{const Pe=new Blob([dt],{type:"application/json;charset=utf-8"});(0,Te.saveAs)(Pe,Ge.title+"-"+new Date().getTime()+".json")},[Ge.title,dt]);return t.createElement(t.Fragment,null,t.createElement(ne.Stack,{direction:"column",gap:2},t.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",t.createElement("br",null),t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null)," ",t.createElement("br",null),t.createElement("strong",null,"File path: ")," ",Ge.meta.provisionedExternalId),t.createElement(he.K,{spellCheck:!1,value:dt,onChange:Pe=>{Re(Pe.currentTarget.value)},className:Ie.json}),t.createElement(fe.Lh,null,t.createElement(b.zx,{variant:"secondary",onClick:at,fill:"outline"},"Cancel"),t.createElement(Ve.m,{icon:"copy",getText:()=>dt},"Copy JSON to clipboard"),t.createElement(b.zx,{type:"submit",onClick:ye},"Save JSON to file"))))},Ie={json:m.css`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `},Ke=({dashboard:Ge,onDismiss:at,onSaveSuccess:dt,isCopy:Re})=>{const[ye,Pe]=(0,t.useState)({}),be=Ge.meta.provisioned,Be=Ge.version===0,ke=(0,n.Z)(async()=>Be?void 0:(await d.ae.getDashboardByUid(Ge.uid)).dashboard,[Ge,Be]),ot=(0,t.useMemo)(()=>{const Ne=Ge.getSaveModelClone({saveTimerange:Boolean(ye.saveTimerange),saveVariables:Boolean(ye.saveVariables)});if(!ke.value)return{clone:Ne,diff:{},diffCount:0,hasChanges:!1};const Je=JSON.stringify(Ne,null,2),Xe=JSON.parse(Je),Le=(0,r.Q$)(ke.value,Xe);let Ue=0;for(const ve of Object.values(Le))Ue+=ve.length;return{clone:Ne,diff:Le,diffCount:Ue,hasChanges:Ue>0&&!Be}},[Ge,ke.value,ye,Be]),[ft,gt]=(0,t.useState)(!1),{state:St,onDashboardSave:ut}=j(Ge,Re),Dt=dt?()=>{at(),dt()}:at,ie=()=>ft?t.createElement(P,{diff:ot.diff,oldValue:ke.value,newValue:ot.clone}):St.loading?t.createElement("div",null,t.createElement(l.$,null)):Be||Re?t.createElement(me,{dashboard:Ge,onCancel:at,onSuccess:Dt,onSubmit:ut,isNew:Be}):be?t.createElement(ct,{dashboard:Ge,onCancel:at,onSuccess:Dt}):t.createElement(ue,{dashboard:Ge,saveModel:ot,onCancel:at,onSuccess:Dt,onSubmit:ut,options:ye,onOptionsChange:Pe});if(St.error&&(0,i.kW)(St.error)&&!St.error.isHandled)return t.createElement(A,{error:St.error,dashboard:Ge,dashboardSaveModel:ot.clone,onDismiss:at});let De="Save dashboard";return Re?De="Save dashboard copy":be&&(De="Provisioned dashboard"),t.createElement(f.d,{title:De,onClose:at,subtitle:Ge.title,tabs:t.createElement(u.J,null,t.createElement(o.O,{label:"Details",active:!ft,onChangeTab:()=>gt(!1)}),ot.hasChanges&&t.createElement(o.O,{label:"Changes",active:ft,onChangeTab:()=>gt(!0),counter:ot.diffCount})),scrollableContent:!0},ie(),s.v.featureToggles.showDashboardValidationWarnings&&t.createElement(E,{dashboard:Ge}))}},80882:(Y,T,e)=>{"use strict";e.d(T,{Jd:()=>i,_H:()=>s,Ez:()=>o,_M:()=>u,ek:()=>f,Gt:()=>l,C2:()=>d});var t=e(47694);const n=new Set(["__expr__","aquaqanalytics-kdbbackend-datasource","cloudwatch","datasource","dlopes7-appdynamics-datasource","doitintl-bigquery-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-db2-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-github-datasource","grafana-gitlab-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","marcusolsson-csv-datasource","marcusolsson-ynab-datasource","mssql","mysql","nagasudhirpulla-api-datasource","opentsdb","postgres","prometheus","redis-datasource","sentinelone-dataset-datasource","tdengine-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","yesoreyeram-infinity-datasource"]);var i=(r=>(r.PUBLIC="public",r.EMAIL="email",r))(i||{});const s=r=>r.length>0,l=r=>r?.uid!==""&&r?.uid!==void 0,f=r=>{let m=new Set;for(const c of r)for(const p of c.targets){let g=p?.datasource?.type;g&&!n.has(g)&&m.add(g)}return Array.from(m).sort()},u=r=>`${(0,t.iE)().appUrl}public-dashboards/${r}`,o=r=>`/d/${r}?shareView=public-dashboard`,d=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i},53818:(Y,T,e)=>{"use strict";e.d(T,{ShareModal:()=>Vt});var t=e(66111),n=e(41818),i=e(88683),s=e(35029),l=e(94893),f=e(47694),u=e(77582),o=e(35287),d=e(9892),r=e(72648),m=e(67487),c=e(10655),p=e(80882),g=e(21048),y=e(9085),E=e.n(y),v=e(66698),h=e(68183),P=e(35645),a=e(66121),C=e(5191),D=e(52081),b=e(24799),M=e(46967),x=e(94599),R=e(8944),S=e(64353),O=e(82002),U=e(27876),I=e(80600),F=e(84532),w=e(830);const K=()=>{const{width:At}=(0,w.Z)();return At>1024};var L=e(45253);const V=h.wl.pages.ShareDashboardModal.PublicDashboard,H=({mode:At})=>t.createElement(L.b,{severity:"info",title:`You don\u2019t have permission to ${At} a public dashboard`,"data-testid":V.NoUpsertPermissionsWarningAlert},"Contact your admin to get permission to ",At," create public dashboards"),j=()=>t.createElement(L.b,{title:"Please save your dashboard changes before updating the public configuration",severity:"warning"}),A=h.wl.pages.ShareDashboardModal.PublicDashboard,_=({unsupportedDataSources:At})=>{const Nt=(0,r.wW)(k);return t.createElement(L.b,{severity:"warning",title:"Unsupported data sources","data-testid":A.UnsupportedDataSourcesWarningAlert},t.createElement("p",{className:Nt.unsupportedDataSourceDescription},"There are data sources in this dashboard that are unsupported for public dashboards. Panels that use these data sources may not function properly: ",At,"."),t.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",className:E()("text-link",Nt.unsupportedDataSourceDescription)},"Read more about supported data sources"))},k=At=>({unsupportedDataSourceDescription:d.css`
    color: ${At.colors.text.secondary};
    margin-bottom: ${At.spacing(1)};
  `}),Q=h.wl.pages.ShareDashboardModal.PublicDashboard,re=()=>t.createElement(L.b,{severity:"warning",title:"Template variables are not supported","data-testid":Q.TemplateVariablesWarningAlert},"This public dashboard may not work since it uses template variables");var Z=e(13393),oe=e(95794),G=e(74124);const le=h.wl.pages.ShareDashboardModal.PublicDashboard,fe=({disabled:At,onChange:Nt,register:Rt})=>{const wt=(0,r.wW)(ae),Qt=(0,U.useSelector)(sn=>sn.dashboard).getModel(),en=(0,G.O)(Qt.getDefaultTime(),Qt);return t.createElement(t.Fragment,null,t.createElement(Z.C,{disabled:At,className:wt.dashboardConfig},t.createElement(D.wc,{spacing:"md"},t.createElement(D.Ar,{orientation:1,spacing:"xs",justify:"space-between"},t.createElement(S._,{description:"The public dashboard uses the default time range settings of the dashboard"},"Default time range"),t.createElement(oe.K,{value:en,disabled:!0,onChange:()=>{}})),t.createElement(D.Ar,{orientation:0,spacing:"sm"},t.createElement(R.r,{...Rt("isTimeSelectionEnabled"),"data-testid":le.EnableTimeRangeSwitch,onChange:sn=>{(0,n.ff)("grafana_dashboards_public_time_selection_clicked",{action:sn.currentTarget.checked?"enable":"disable"}),Nt("isTimeSelectionEnabled",sn.currentTarget.checked)}}),t.createElement(S._,{description:"Allow viewers to change time range"},"Time range picker enabled")),t.createElement(D.Ar,{orientation:0,spacing:"sm"},t.createElement(R.r,{...Rt("isAnnotationsEnabled"),onChange:sn=>{(0,n.ff)("grafana_dashboards_public_annotations_clicked",{action:sn.currentTarget.checked?"enable":"disable"}),Nt("isAnnotationsEnabled",sn.currentTarget.checked)},"data-testid":le.EnableAnnotationsSwitch}),t.createElement(S._,{description:"Show annotations on public dashboard"},"Show annotations")))))},ae=At=>({dashboardConfig:d.css`
    margin: ${At.spacing(0,0,3,0)};
  `});var de=e(26202),ee=e(31403),me=e(63619),q=e(2594);const ne=[{label:"Anyone with a link",value:p.Jd.PUBLIC},{label:"Only specified people",value:p.Jd.EMAIL}],se=h.wl.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,he=({recipients:At,dashboardUid:Nt,publicDashboardUid:Rt})=>{const wt=(0,r.wW)(Te),[_t,{isLoading:Qt}]=(0,c.r5)(),[en,{isLoading:sn}]=(0,c.RS)(),Jt=Qt||sn,gn=In=>{(0,n.ff)("grafana_dashboards_public_delete_sharing_email_clicked"),_t({recipientUid:In,dashboardUid:Nt,uid:Rt})},Cn=In=>{(0,n.ff)("grafana_dashboards_public_reshare_email_clicked"),en({recipientUid:In,uid:Rt})};return t.createElement("table",{className:wt.table,"data-testid":se.EmailSharingList},t.createElement("tbody",null,At.map((In,_n)=>t.createElement("tr",{key:In.uid},t.createElement("td",null,In.recipient),t.createElement("td",null,t.createElement(de.h,{className:wt.tableButtonsContainer},t.createElement(ee.zx,{type:"button",variant:"destructive",fill:"text","aria-label":"Revoke",title:"Revoke",size:"sm",disabled:Jt,onClick:()=>gn(In.uid),"data-testid":`${se.DeleteEmail}-${_n}`},"Revoke"),t.createElement(ee.zx,{type:"button",variant:"primary",fill:"text","aria-label":"Resend",title:"Resend",size:"sm",disabled:Jt,onClick:()=>Cn(In.uid),"data-testid":`${se.ReshareLink}-${_n}`},"Resend")))))))},ue=()=>{const{width:At}=(0,w.Z)(),Nt=(0,r.wW)(Te),wt=(0,U.useSelector)(la=>la.dashboard).getModel(),{data:_t}=(0,c.Ym)(wt.uid),[Qt]=(0,c.Mi)(),[en,{isLoading:sn}]=(0,c.FJ)(),{register:Jt,setValue:gn,control:Cn,watch:In,handleSubmit:_n,formState:{errors:zn},reset:Hn}=(0,v.cI)({defaultValues:{shareType:_t?.share||p.Jd.PUBLIC,email:""},mode:"onSubmit"}),sa=la=>{const jn={dashboard:wt,payload:{..._t,share:la}};Qt(jn)},Ma=async la=>{(0,n.ff)("grafana_dashboards_public_add_share_email_clicked"),await en({recipient:la.email,uid:_t.uid,dashboardUid:wt.uid}).unwrap(),Hn({email:"",shareType:p.Jd.EMAIL})};return t.createElement("form",{"data-testid":se.Container,className:Nt.container,onSubmit:_n(Ma)},t.createElement(b.g,{label:"Can view dashboard"},t.createElement(me.g,{name:"shareType",control:Cn,render:({field:la})=>{const{ref:jn,...ia}=la;return t.createElement(q.S,{...ia,size:At<480?"sm":"md",options:ne,onChange:Aa=>{(0,n.ff)("grafana_dashboards_public_share_type_clicked",{type:Aa}),gn("shareType",Aa),sa(Aa)}})}})),In("shareType")===p.Jd.EMAIL&&t.createElement(t.Fragment,null,t.createElement(b.g,{label:"Invite",description:"Invite people by email",error:zn.email?.message,invalid:!!zn.email?.message||void 0},t.createElement("div",{className:Nt.emailContainer},t.createElement(M.I,{className:Nt.emailInput,placeholder:"email",autoCapitalize:"none",...Jt("email",{required:"Email is required",pattern:{value:p.C2,message:"Invalid email"}}),"data-testid":se.EmailSharingInput}),t.createElement(ee.zx,{type:"submit",variant:"primary",disabled:sn,"data-testid":se.EmailSharingInviteButton},"Invite ",sn&&t.createElement(m.$,null)))),!!_t?.recipients?.length&&t.createElement(he,{recipients:_t.recipients,dashboardUid:wt.uid,publicDashboardUid:_t.uid})))},Te=At=>({container:d.css`
    margin-bottom: ${At.spacing(2)};
  `,emailContainer:d.css`
    display: flex;
    gap: ${At.spacing(1)};
  `,emailInput:d.css`
    flex-grow: 1;
  `,table:d.css`
    display: flex;
    max-height: 220px;
    overflow-y: scroll;
    margin-bottom: ${At.spacing(1)};

    & tbody {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    & tr {
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: ${At.spacing(.5,1)};

      :nth-child(odd) {
        background: ${At.colors.background.secondary};
      }
    }
  `,tableButtonsContainer:d.css`
    display: flex;
    justify-content: end;
  `}),Ve=h.wl.pages.ShareDashboardModal.PublicDashboard,ct=()=>{const At=(0,r.wW)(Ie),{showModal:Nt,hideModal:Rt}=(0,t.useContext)(C.kr),wt=K(),_t=O.Vt.hasAccess(U.AccessControlAction.DashboardsPublicWrite,(0,F.RN)()),Qt=!!P.v.featureToggles.publicDashboardsEmailSharing&&(0,a.v)("publicDashboardsEmailSharing"),sn=(0,U.useSelector)(ga=>ga.dashboard).getModel(),Jt=sn.getVariables(),gn=(0,p.ek)(sn.panels),{data:Cn,isFetching:In}=(0,c.Ym)(sn.uid),[_n,{isLoading:zn}]=(0,c.Mi)(),Hn=!_t||zn||In,{handleSubmit:sa,setValue:Ma,register:la}=(0,v.cI)({defaultValues:{isAnnotationsEnabled:Cn?.annotationsEnabled,isTimeSelectionEnabled:Cn?.timeSelectionEnabled,isPaused:!Cn?.isEnabled}}),jn=async ga=>{const{isAnnotationsEnabled:ya,isTimeSelectionEnabled:Wa,isPaused:rs}=ga,Xa={dashboard:sn,payload:{...Cn,annotationsEnabled:ya,timeSelectionEnabled:Wa,isEnabled:!rs}};_n(Xa)},ia=async(ga,ya)=>{Ma(ga,ya),await sa(Wa=>jn(Wa))()},Aa=()=>{Nt(Vt,{dashboard:sn,onDismiss:Rt,activeTab:"public-dashboard"})};return t.createElement("div",null,_t&&sn.hasUnsavedChanges()&&t.createElement(j,null),!_t&&t.createElement(H,{mode:"edit"}),(0,p._H)(Jt)&&t.createElement(re,null),!!gn.length&&t.createElement(_,{unsupportedDataSources:gn.join(", ")}),t.createElement("div",{className:At.titleContainer},t.createElement(D.Lh,{spacing:"sm",align:"center"},t.createElement("h4",{className:At.title},"Settings"),(zn||In)&&t.createElement(m.$,{size:14}))),t.createElement(fe,{disabled:Hn,onChange:ia,register:la}),t.createElement("hr",null),Qt&&t.createElement(ue,null),t.createElement(b.g,{label:"Dashboard URL",className:At.publicUrl},t.createElement(M.I,{value:(0,p._M)(Cn.accessToken),readOnly:!0,disabled:!Cn?.isEnabled,"data-testid":Ve.CopyUrlInput,addonAfter:t.createElement(x.m,{"data-testid":Ve.CopyUrlButton,variant:"primary",disabled:!Cn?.isEnabled,getText:()=>(0,p._M)(Cn.accessToken)},"Copy")})),t.createElement(D.Ar,{orientation:wt?0:1,justify:wt?"flex-end":"flex-start",align:wt?"center":"normal"},t.createElement(D.Lh,{spacing:"sm"},t.createElement(R.r,{...la("isPaused"),disabled:Hn,onChange:ga=>{(0,n.ff)("grafana_dashboards_public_enable_clicked",{action:ga.currentTarget.checked?"disable":"enable"}),ia("isPaused",ga.currentTarget.checked)},"data-testid":Ve.PauseSwitch}),t.createElement(S._,{className:d.css`
              margin-bottom: 0;
            `},"Pause sharing dashboard")),t.createElement(D.Lh,{justify:"flex-end"},t.createElement(I.H,{className:E()(At.deleteButton,{[At.deleteButtonMobile]:!wt}),type:"button",disabled:Hn,"data-testid":Ve.DeleteButton,onDismiss:Aa,variant:"destructive",fill:"outline",dashboard:sn,publicDashboard:{uid:Cn.uid,dashboardUid:sn.uid,title:sn.title}},"Revoke public URL"))))},Ie=At=>({titleContainer:d.css`
    margin-bottom: ${At.spacing(2)};
  `,title:d.css`
    margin: 0;
  `,publicUrl:d.css`
    width: 100%;
    padding-top: ${At.spacing(1)};
    margin-bottom: ${At.spacing(3)};
  `,deleteButton:d.css`
    margin-left: ${At.spacing(3)};
  `,deleteButtonMobile:d.css`
    margin-top: ${At.spacing(2)};
  `}),Ke=ct;var Ge=e(94270),at=e(58255);const dt=h.wl.pages.ShareDashboardModal.PublicDashboard,Re=[{type:"publicAcknowledgment",description:"Your entire dashboard will be public*",testId:dt.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:"Learn more about public dashboards"}},{type:"dataSourcesAcknowledgment",description:"Publishing currently only works with a subset of data sources*",testId:dt.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:"Learn more about public datasources"}},{type:"usageAcknowledgment",description:"Making a dashboard public will cause queries to run each time is viewed, which may increase costs*",testId:dt.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:"Learn more about query caching"}}],ye=({disabled:At,register:Nt})=>{const Rt=(0,r.wW)(Pe);return t.createElement(t.Fragment,null,t.createElement("p",{className:Rt.title},"Before you make the dashboard public, acknowledge the following:"),t.createElement(Z.C,{disabled:At},t.createElement(D.wc,{spacing:"md"},Re.map(wt=>t.createElement(D.Lh,{key:wt.type,spacing:"none",align:"center"},t.createElement(at.X,{...Nt(wt.type,{required:!0}),label:wt.description,"data-testid":wt.testId}),t.createElement(ee.Qj,{variant:"primary",href:wt.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:wt.info.tooltip}))))))},Pe=At=>({title:d.css`
    font-weight: ${At.typography.fontWeightBold};
  `}),be=()=>{const At=(0,r.wW)(Be);return t.createElement("div",{className:At.container},t.createElement("p",{className:At.description},"Currently, we don\u2019t support template variables or frontend data sources"),t.createElement("p",{className:At.description},"We'd love your feedback. To share, please comment on this"," ",t.createElement("a",{href:"https://github.com/grafana/grafana/discussions/49253",target:"_blank",rel:"noreferrer",className:E()("text-link",At.description)},"GitHub discussion"),"."))},Be=At=>({container:d.css`
    margin-bottom: ${At.spacing(3)};
  `,description:d.css`
    color: ${At.colors.text.secondary};
    margin-bottom: ${At.spacing(1)};
  `}),ke=h.wl.pages.ShareDashboardModal.PublicDashboard,ot=({isError:At})=>{const Nt=(0,r.wW)(ft),Rt=O.Vt.hasAccess(U.AccessControlAction.DashboardsPublicWrite,(0,F.RN)()),_t=(0,U.useSelector)(Cn=>Cn.dashboard).getModel(),Qt=(0,p.ek)(_t.panels),[en,{isLoading:sn}]=(0,c.zZ)(),Jt=!Rt||sn||At,gn=async()=>{(0,n.ff)("grafana_dashboards_public_create_clicked"),en({dashboard:_t,payload:{isEnabled:!0}})};return t.createElement("div",null,t.createElement("p",{className:Nt.title},"Welcome to public dashboards public preview!"),t.createElement(be,null),!Rt&&t.createElement(H,{mode:"create"}),(0,p._H)(_t.getVariables())&&t.createElement(re,null),!!Qt.length&&t.createElement(_,{unsupportedDataSources:Qt.join(", ")}),t.createElement(Ge.l,{onSubmit:gn,validateOn:"onChange",maxWidth:"none"},({register:Cn,formState:{isValid:In}})=>t.createElement(t.Fragment,null,t.createElement("div",{className:Nt.checkboxes},t.createElement(ye,{disabled:Jt,register:Cn})),t.createElement("div",{className:Nt.buttonContainer},t.createElement(ee.zx,{type:"submit",disabled:Jt||!In,"data-testid":ke.CreateButton},"Generate public URL ",sn&&t.createElement(m.$,{className:Nt.loadingSpinner}))))))},ft=At=>({title:d.css`
    font-size: ${At.typography.h4.fontSize};
    margin: ${At.spacing(0,0,2)};
  `,checkboxes:d.css`
    margin: ${At.spacing(0,0,4)};
  `,buttonContainer:d.css`
    display: flex;
    justify-content: end;
  `,loadingSpinner:d.css`
    margin-left: ${At.spacing(1)};
  `}),gt=ot,St=()=>{const At=(0,r.wW)(Dt);return t.createElement(g.L,{className:At.loadingContainer},t.createElement(t.Fragment,null,"Loading configuration",t.createElement(m.$,{size:20,className:At.spinner})))},ut=At=>{const{data:Nt,isLoading:Rt,isError:wt}=(0,c.Ym)(At.dashboard.uid);return(0,t.useEffect)(()=>{(0,n.ff)("grafana_dashboards_public_share_viewed")},[]),t.createElement(t.Fragment,null,Rt?t.createElement(St,null):(0,p.Gt)(Nt)?t.createElement(Ke,null):t.createElement(gt,{isError:wt}))},Dt=At=>({loadingContainer:d.css`
    height: 280px;
    align-items: center;
    justify-content: center;
    gap: ${At.spacing(1)};
  `,spinner:d.css`
    margin-bottom: ${At.spacing(0)};
  `});var ie=e(6297),De=e(97379);const Ne=({selectedTheme:At="current",onChange:Nt})=>{const Rt=[{label:(0,o.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,o.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,o.t)("share-modal.theme-picker.light","Light"),value:"light"}];return t.createElement(b.g,{label:(0,o.t)("share-modal.theme-picker.field-name","Theme")},t.createElement(q.S,{options:Rt,value:At,onChange:Nt}))};var Je=e(89346);class Xe extends t.PureComponent{constructor(Nt){super(Nt),this.buildIframeHtml=()=>{const{panel:Rt,dashboard:wt}=this.props,{useCurrentTimeRange:_t,selectedTheme:Qt}=this.state,en=(0,Je.S_)(_t,wt.uid,Qt,Rt);this.setState({iframeHtml:en})},this.onIframeHtmlChange=Rt=>{this.setState({iframeHtml:Rt.currentTarget.value})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange},this.buildIframeHtml)},this.onThemeChange=Rt=>{this.setState({selectedTheme:Rt},this.buildIframeHtml)},this.getIframeHtml=()=>this.state.iframeHtml,this.state={useCurrentTimeRange:!0,selectedTheme:"current",iframeHtml:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_embed_share_viewed"),this.buildIframeHtml()}render(){const{useCurrentTimeRange:Nt,selectedTheme:Rt,iframeHtml:wt}=this.state,Qt=(this.props.dashboard?this.props.dashboard.time.to==="now":!1)?(0,o.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),t.createElement(b.g,{label:(0,o.t)("share-modal.embed.time-range","Current time range"),description:Qt},t.createElement(R.r,{id:"share-current-time-range",value:Nt,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(Ne,{selectedTheme:Rt,onChange:this.onThemeChange}),t.createElement(b.g,{label:(0,o.t)("share-modal.embed.html","Embed HTML"),description:(0,o.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},t.createElement(De.K,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:wt,onChange:this.onIframeHtmlChange})),t.createElement(s.u.ButtonRow,null,t.createElement(x.m,{icon:"copy",variant:"primary",getText:this.getIframeHtml},t.createElement(o.cC,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}}var Le=e(3574),Ue=e(29930),ve=e(134),Se=e(45984),$e=e(89050),Ye=e(9405);function _e({json:At,onDismiss:Nt}){const Rt=(0,t.useCallback)(()=>At,[At]);return t.createElement(s.u,{title:"JSON",onDismiss:Nt,onClickBackdrop:Nt,isOpen:!0},t.createElement($e.Z,{disableHeight:!0},({width:wt})=>t.createElement(Ye.p,{value:At,language:"json",showMiniMap:!1,height:"500px",width:wt})),t.createElement(s.u.ButtonRow,null,t.createElement(x.m,{icon:"copy",getText:Rt},t.createElement(o.cC,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class Et extends t.PureComponent{constructor(Nt){super(Nt),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onTrimDefaultsChange=()=>{this.setState({trimDefaults:!this.state.trimDefaults})},this.onSaveAsFile=()=>{const{dashboard:Rt}=this.props,{shareExternally:wt}=this.state,{trimDefaults:_t}=this.state;wt?this.exporter.makeExportable(Rt).then(Qt=>{_t?(0,Ue.i)().post("/api/dashboards/trim",{dashboard:Qt}).then(en=>{this.openSaveAsDialog(en.dashboard)}):this.openSaveAsDialog(Qt)}):_t?(0,Ue.i)().post("/api/dashboards/trim",{dashboard:Rt.getSaveModelClone()}).then(Qt=>{this.openSaveAsDialog(Qt.dashboard)}):this.openSaveAsDialog(Rt.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:Rt}=this.props,{shareExternally:wt}=this.state,{trimDefaults:_t}=this.state;wt?this.exporter.makeExportable(Rt).then(Qt=>{_t?(0,Ue.i)().post("/api/dashboards/trim",{dashboard:Qt}).then(en=>{this.openJsonModal(en.dashboard)}):this.openJsonModal(Qt)}):_t?(0,Ue.i)().post("/api/dashboards/trim",{dashboard:Rt.getSaveModelClone()}).then(Qt=>{this.openJsonModal(Qt.dashboard)}):this.openJsonModal(Rt.getSaveModelClone())},this.openSaveAsDialog=Rt=>{const wt=JSON.stringify(Rt,null,2),_t=new Blob([wt],{type:"application/json;charset=utf-8"}),Qt=new Date().getTime();(0,Le.saveAs)(_t,`${Rt.title}-${Qt}.json`)},this.openJsonModal=Rt=>{u.h$.publish(new Se.Dn({props:{json:JSON.stringify(Rt,null,2)},component:_e})),this.props.onDismiss?.()},this.state={shareExternally:!1,trimDefaults:!1},this.exporter=new ve.E}componentDidMount(){(0,n.ff)("grafana_dashboards_export_share_viewed")}render(){const{onDismiss:Nt}=this.props,{shareExternally:Rt}=this.state,{trimDefaults:wt}=this.state,_t=(0,o.t)("share-modal.export.share-externally-label","Export for sharing externally"),Qt=(0,o.t)("share-modal.export.share-default-label","Export with default values removed");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),t.createElement(b.g,{label:_t},t.createElement(R.r,{id:"share-externally-toggle",value:Rt,onChange:this.onShareExternallyChange})),P.v.featureToggles.trimDefaults&&t.createElement(b.g,{label:Qt},t.createElement(R.r,{id:"trim-defaults-toggle",value:wt,onChange:this.onTrimDefaultsChange})),t.createElement(s.u.ButtonRow,null,t.createElement(ee.zx,{variant:"secondary",onClick:Nt,fill:"outline"},t.createElement(o.cC,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),t.createElement(ee.zx,{variant:"secondary",onClick:this.onViewJson},t.createElement(o.cC,{i18nKey:"share-modal.export.view-button"},"View JSON")),t.createElement(ee.zx,{variant:"primary",onClick:this.onSaveAsFile},t.createElement(o.cC,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var pt=e(76647);const je=({panel:At,initialFolderUid:Nt,onDismiss:Rt})=>((0,t.useEffect)(()=>{(0,n.ff)("grafana_dashboards_library_panel_share_viewed")},[]),At?t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.library.info"},"Create library panel.")),t.createElement(pt.T,{panel:At,initialFolderUid:Nt,onDismiss:Rt})):null);var ht=e(39904);class we extends t.PureComponent{constructor(Nt){super(Nt),this.buildUrl=async()=>{const{panel:Rt,dashboard:wt}=this.props,{useCurrentTimeRange:_t,useShortUrl:Qt,selectedTheme:en}=this.state,sn=await(0,Je.bl)(_t,en,Rt,Qt),Jt=(0,Je.Sc)(_t,wt.uid,en,Rt);this.setState({shareUrl:sn,imageUrl:Jt})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=Rt=>{this.setState({selectedTheme:Rt})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_link_share_viewed"),this.buildUrl()}componentDidUpdate(Nt,Rt){const{useCurrentTimeRange:wt,useShortUrl:_t,selectedTheme:Qt}=this.state;(Rt.useCurrentTimeRange!==wt||Rt.selectedTheme!==Qt||Rt.useShortUrl!==_t)&&this.buildUrl()}render(){const{panel:Nt,dashboard:Rt}=this.props,wt=Rt?Rt.time.to==="now":!1,{useCurrentTimeRange:_t,useShortUrl:Qt,selectedTheme:en,shareUrl:sn,imageUrl:Jt}=this.state,gn=h.wl.pages.SharePanelModal,Cn=Boolean(Rt.id),In=(0,o.t)("share-modal.link.time-range-label","Lock time range"),_n=(0,o.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),zn=(0,o.t)("share-modal.link.shorten-url","Shorten URL"),Hn=(0,o.t)("share-modal.link.link-url","Link URL");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),t.createElement(Z.C,null,t.createElement(b.g,{label:In,description:wt?_n:""},t.createElement(R.r,{id:"share-current-time-range",value:_t,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(Ne,{selectedTheme:en,onChange:this.onThemeChange}),t.createElement(b.g,{label:zn},t.createElement(R.r,{id:"share-shorten-url",value:Qt,onChange:this.onUrlShorten})),t.createElement(b.g,{label:Hn},t.createElement(M.I,{id:"link-url-input",value:sn,readOnly:!0,addonAfter:t.createElement(x.m,{icon:"copy",variant:"primary",getText:this.getShareUrl},t.createElement(o.cC,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),Nt&&f.ZP.rendererAvailable&&t.createElement(t.Fragment,null,Cn&&t.createElement("div",{className:"gf-form"},t.createElement("a",{href:Jt,target:"_blank",rel:"noreferrer","aria-label":gn.linkToRenderedImage},t.createElement(ht.J,{name:"camera"}),"\xA0",t.createElement(o.cC,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!Cn&&t.createElement(L.b,{severity:"info",title:(0,o.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},t.createElement(o.cC,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),Nt&&!f.ZP.rendererAvailable&&t.createElement(L.b,{severity:"info",title:(0,o.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},t.createElement(o.cC,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the\xA0",t.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var Qe=e(54899),nt=e(8581),it=e(19349),yt=e(10672);const Lt="/api/snapshots";class Kt extends t.PureComponent{constructor(Nt){super(Nt),this.createSnapshot=Rt=>()=>{const{timeoutSeconds:wt}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,Rt)},wt*1e3)},this.saveSnapshot=async(Rt,wt)=>{const{snapshotExpires:_t}=this.state,Qt=this.dashboard.getSaveModelClone();this.scrubDashboard(Qt);const en={dashboard:Qt,name:Qt.title,expires:_t,external:wt};try{const sn=await(0,Qe.i)().post(Lt,en);this.setState({deleteUrl:sn.deleteUrl,snapshotUrl:sn.url,step:2})}finally{(0,n.ff)("grafana_dashboards_snapshot_created",{location:wt?"raintank":"local"}),this.setState({isLoading:!1})}},this.scrubDashboard=Rt=>{const{panel:wt}=this.props,{snapshotName:_t}=this.state;Rt.title=_t,Rt.time=(0,it.$t)().timeRange(),Rt.links=[],Rt.panels.forEach(en=>{en.targets=[],en.links=[],en.datasource=null});const Qt=Rt.annotations.list.filter(en=>en.enable);if(Rt.annotations.list=Qt.map(en=>({name:en.name,enable:en.enable,iconColor:en.iconColor,snapshotData:en.snapshotData,type:en.type,builtIn:en.builtIn,hide:en.hide})),Rt.getVariables().forEach(en=>{en.query="",en.options=en.current?[en.current]:[],en.refresh=yt.Bd.never}),wt){const en=wt.getSaveModel();en.gridPos.w=24,en.gridPos.x=0,en.gridPos.y=0,en.gridPos.h=20,Rt.panels=[en]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(en=>{delete en.snapshotData}),this.dashboard.annotations.list.forEach(en=>{delete en.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:Rt}=this.state;await(0,Qe.i)().get(Rt),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=Rt=>{this.setState({snapshotName:Rt.target.value})},this.onTimeoutChange=Rt=>{this.setState({timeoutSeconds:Number(Rt.target.value)})},this.onExpireChange=Rt=>{this.setState({selectedExpireOption:Rt,snapshotExpires:Rt.value})},this.dashboard=Nt.dashboard,this.expireOptions=[{label:(0,o.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,o.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,o.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,o.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:Nt.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_snapshot_share_viewed"),this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const Nt=await(0,Qe.i)().get("/api/snapshot/shared-options");this.setState({sharingButtonText:Nt.externalSnapshotName,externalEnabled:Nt.externalEnabled})}renderStep1(){const{onDismiss:Nt}=this.props,{snapshotName:Rt,selectedExpireOption:wt,timeoutSeconds:_t,isLoading:Qt,sharingButtonText:en,externalEnabled:sn}=this.state,Jt=(0,o.t)("share-modal.snapshot.name","Snapshot name"),gn=(0,o.t)("share-modal.snapshot.expire","Expire"),Cn=(0,o.t)("share-modal.snapshot.timeout","Timeout (seconds)"),In=(0,o.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",t.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),t.createElement(b.g,{label:Jt},t.createElement(M.I,{id:"snapshot-name-input",width:30,value:Rt,onChange:this.onSnapshotNameChange})),t.createElement(b.g,{label:gn},t.createElement(nt.Ph,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:wt,onChange:this.onExpireChange})),t.createElement(b.g,{label:Cn,description:In},t.createElement(M.I,{id:"timeout-input",type:"number",width:21,value:_t,onChange:this.onTimeoutChange})),t.createElement(s.u.ButtonRow,null,t.createElement(ee.zx,{variant:"secondary",onClick:Nt,fill:"outline"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),sn&&t.createElement(ee.zx,{variant:"secondary",disabled:Qt,onClick:this.createSnapshot(!0)},en),t.createElement(ee.zx,{variant:"primary",disabled:Qt,onClick:this.createSnapshot()},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot"))))}renderStep2(){const{snapshotUrl:Nt}=this.state;return t.createElement(t.Fragment,null,t.createElement(b.g,{label:(0,o.t)("share-modal.snapshot.url-label","Snapshot URL")},t.createElement(M.I,{id:"snapshot-url-input",value:Nt,readOnly:!0,addonAfter:t.createElement(x.m,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),t.createElement("div",{className:"pull-right",style:{padding:"5px"}},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",t.createElement(ee.Qj,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return t.createElement("div",{className:"share-modal-header"},t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:Nt,step:Rt}=this.state;return t.createElement(t.Fragment,null,Rt===1&&this.renderStep1(),Rt===2&&this.renderStep2(),Rt===3&&this.renderStep3(),Nt&&t.createElement(m.$,{inline:!0}))}}const an=[],un=[];function hn(At){an.push(At)}function Wn(At){un.push(At)}function Bt(At,Nt){const wt=[{label:(0,o.t)("share-modal.tab-title.link","Link"),value:"link",component:we}];if(u.Vt.isSignedIn&&f.vc.snapshotEnabled){const Qt=(0,o.t)("share-modal.tab-title.snapshot","Snapshot");wt.push({label:Qt,value:"snapshot",component:Kt})}if(At){const Qt=(0,o.t)("share-modal.tab-title.embed","Embed");if(wt.push({label:Qt,value:"embed",component:Xe}),!(0,ie.V)(At)){const en=(0,o.t)("share-modal.tab-title.library-panel","Library panel");wt.push({label:en,value:"library_panel",component:je})}wt.push(...un)}else{const Qt=(0,o.t)("share-modal.tab-title.export","Export");wt.push({label:Qt,value:"export",component:Et}),wt.push(...an)}Boolean(f.vc.featureToggles.publicDashboards)&&wt.push({label:"Public dashboard",value:"public-dashboard",component:ut});const _t=wt.find(Qt=>Qt.value===Nt);return{tabs:wt,activeTab:_t?.value??wt[0].value}}function Ft(At){const{tabs:Nt,activeTab:Rt}=Bt(At.panel,At.activeTab);return{tabs:Nt,activeTab:Rt}}class Vt extends t.Component{constructor(Nt){super(Nt),this.onSelectTab=Rt=>{this.setState(wt=>({...wt,activeTab:Rt.value}))},this.state=Ft(Nt)}componentDidMount(){(0,n.ff)("grafana_dashboards_share_modal_viewed")}getActiveTab(){const{tabs:Nt,activeTab:Rt}=this.state;return Nt.find(wt=>wt.value===Rt)}renderTitle(){const{panel:Nt}=this.props,{activeTab:Rt}=this.state,wt=Nt?(0,o.t)("share-modal.panel.title","Share Panel"):(0,o.t)("share-modal.dashboard.title","Share"),_t=Bt(this.props.panel,this.state.activeTab).tabs;return t.createElement(i.H,{title:wt,icon:"share-alt",tabs:_t,activeTab:Rt,onChangeTab:this.onSelectTab})}render(){const{dashboard:Nt,panel:Rt}=this.props,_t=this.getActiveTab().component;return t.createElement(s.u,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss},t.createElement(l.I,null,t.createElement(_t,{dashboard:Nt,panel:Rt,onDismiss:this.props.onDismiss})))}}},89346:(Y,T,e)=>{"use strict";e.d(T,{OS:()=>o,S_:()=>c,Sc:()=>m,bl:()=>d});var t=e(49187),n=e(72196),i=e(67483),s=e(35645),l=e(57465),f=e(19349);function u({useCurrentTimeRange:g,selectedTheme:y,panel:E,search:v=window.location.search,range:h=(0,f.$t)().timeRange(),orgId:P=s.v.bootData.user.orgId}){const a=new URLSearchParams(v);return a.set("from",String(h.from.valueOf())),a.set("to",String(h.to.valueOf())),a.set("orgId",String(P)),g||(a.delete("from"),a.delete("to")),y!=="current"&&a.set("theme",y),E&&!a.has("editPanel")&&a.set("viewPanel",String(E.id)),a}function o(){let g=window.location.href;const y=g.indexOf("?");return y!==-1&&(g=g.substring(0,y)),g}async function d(g,y,E,v){const h=o(),P=u({useCurrentTimeRange:g,selectedTheme:y,panel:E}),a=t.Cj.appendQueryToUrl(h,P.toString());return v?await(0,l.D)(a):a}function r(g,y,E,v){const h=o(),P=u({useCurrentTimeRange:g,selectedTheme:E,panel:v});let a=h.replace(s.v.appSubUrl+"/dashboard/",s.v.appSubUrl+"/dashboard-solo/");a=a.replace(s.v.appSubUrl+"/d/",s.v.appSubUrl+"/d-solo/"),n.u.stripBaseFromUrl(h)==="/"&&(a=`${s.v.appUrl}d-solo/${y}`);const D=P.get("editPanel")??P.get("viewPanel")??"";return P.set("panelId",D),P.delete("editPanel"),P.delete("viewPanel"),t.Cj.appendQueryToUrl(a,P.toString())}function m(g,y,E,v){let P=r(g,y,E,v).replace(s.v.appSubUrl+"/dashboard-solo/",s.v.appSubUrl+"/render/dashboard-solo/");return P=P.replace(s.v.appSubUrl+"/d-solo/",s.v.appSubUrl+"/render/d-solo/"),P+="&width=1000&height=500"+p(),P}function c(g,y,E,v){return'<iframe src="'+r(g,y,E,v)+'" width="450" height="200" frameborder="0"></iframe>'}function p(){const g="&tz=UTC"+encodeURIComponent((0,i.CQ)().format("Z"));if(!window.Intl)return g;const y=window.Intl.DateTimeFormat();if(!y.resolvedOptions)return g;const E=y.resolvedOptions();return E.timeZone?"&tz="+encodeURIComponent(E.timeZone):g}},64687:(Y,T,e)=>{"use strict";e.d(T,{B:()=>c});var t=e(9892),n=e(82897),i=e(66111),s=e(72648),l=e(39904);const f=({diff:g})=>{const y=(0,s.wW)(u),E=!(0,n.isUndefined)(g.originalValue)&&!(0,n.isArray)(g.originalValue)&&!(0,n.isObject)(g.originalValue),v=!(0,n.isUndefined)(g.value)&&!(0,n.isArray)(g.value)&&!(0,n.isObject)(g.value);return i.createElement(i.Fragment,null,E&&i.createElement("span",{className:y},String(g.originalValue)),E&&v?i.createElement(l.J,{name:"arrow-right"}):null,v&&i.createElement("span",{className:y},String(g.value)))},u=g=>t.css`
  background-color: ${g.colors.action.hover};
  border-radius: ${g.shape.borderRadius()};
  color: ${g.colors.text.primary};
  font-size: ${g.typography.body.fontSize};
  margin: 0 ${g.spacing(.5)};
  padding: ${g.spacing(.5,1)};
`;var o=e(15092);const d={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},r=({diff:g,title:y})=>{const E=(0,s.wW)(m);return g?i.createElement(i.Fragment,null,i.createElement(l.J,{type:"mono",name:"circle",className:E[g.op]})," ",i.createElement("span",{className:E.embolden},y)," ",i.createElement("span",null,(0,o.dW)(g,g.path.length>1))," ",i.createElement(f,{diff:g})):i.createElement("div",{className:E.withoutDiff},i.createElement(l.J,{type:"mono",name:"circle",className:E.replace})," ",i.createElement("span",{className:E.embolden},y)," ",i.createElement("span",null,(0,o.dW)(d,!1)))},m=g=>({embolden:t.css`
    font-weight: ${g.typography.fontWeightBold};
  `,add:t.css`
    color: ${g.colors.success.main};
  `,replace:t.css`
    color: ${g.colors.success.main};
  `,move:t.css`
    color: ${g.colors.success.main};
  `,copy:t.css`
    color: ${g.colors.success.main};
  `,_get:t.css`
    color: ${g.colors.success.main};
  `,test:t.css`
    color: ${g.colors.success.main};
  `,remove:t.css`
    color: ${g.colors.success.main};
  `,withoutDiff:t.css`
    margin-bottom: ${g.spacing(2)};
  `}),c=({diffs:g,title:y})=>{const E=(0,s.wW)(p);return g.length===1?i.createElement("div",{className:E.container,"data-testid":"diffGroup"},i.createElement(r,{title:y,diff:g[0]})):i.createElement("div",{className:E.container,"data-testid":"diffGroup"},i.createElement(r,{title:y}),i.createElement("ul",{className:E.list},g.map((v,h)=>i.createElement("li",{className:E.listItem,key:`${(0,n.last)(v.path)}__${h}`},i.createElement("span",null,(0,o.dW)(v))," ",i.createElement(f,{diff:v})))))},p=g=>({container:t.css`
    background-color: ${g.colors.background.secondary};
    font-size: ${g.typography.h6.fontSize};
    margin-bottom: ${g.spacing(2)};
    padding: ${g.spacing(2)};
  `,list:t.css`
    margin-left: ${g.spacing(4)};
  `,listItem:t.css`
    margin-bottom: ${g.spacing(1)};
  `})},61017:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>u});var t=e(9892),n=e(66111),i=e(28072),s=e.n(i),l=e(28550),f=e(72648);const u=({oldValue:o,newValue:d})=>{const r=(0,f.l4)(),m={variables:{dark:{diffViewerBackground:r.colors.background.canvas,diffViewerColor:r.colors.text.primary,addedBackground:(0,l.Z)(r.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:(0,l.Z)(r.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:(0,l.Z)(r.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:(0,l.Z)(r.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:(0,l.Z)(r.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:(0,l.Z)(r.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:r.colors.background.primary,gutterBackgroundDark:r.colors.background.primary,highlightBackground:(0,l.Z)(r.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:(0,l.Z)(r.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:r.colors.background.secondary,codeFoldBackground:r.colors.background.secondary,emptyLineBackground:r.colors.background.secondary,gutterColor:r.colors.text.disabled,addedGutterColor:r.colors.text.primary,removedGutterColor:r.colors.text.primary,codeFoldContentColor:r.colors.text.disabled,diffViewerTitleBackground:r.colors.background.secondary,diffViewerTitleColor:r.colors.text.disabled,diffViewerTitleBorderColor:r.colors.border.strong}},codeFold:{fontSize:r.typography.bodySmall.fontSize},gutter:`
      pre {
        color: ${(0,l.Z)(r.colors.text.disabled).setAlpha(1).toString()};
        opacity: 0.61;
      }
    `};return n.createElement("div",{className:t.css`
        font-size: ${r.typography.bodySmall.fontSize};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `},n.createElement(s(),{styles:m,oldValue:o,newValue:d,splitView:!1,compareMethod:i.DiffMethod.CSS,useDarkTheme:r.isDark}))}},99714:(Y,T,e)=>{"use strict";e.d(T,{U$:()=>L,Cs:()=>M,Sd:()=>a,R1:()=>O,K8:()=>s});var t=e(82897),n=e(54899);class i{getHistoryList(j,A){const _=j&&j.uid?j.uid:void 0;return _?(0,n.i)().get(`api/dashboards/uid/${_}/versions`,A):Promise.resolve([])}getDashboardVersion(j,A){return(0,n.i)().get(`api/dashboards/uid/${j}/versions/${A}`)}restoreDashboard(j,A){const _=j&&j.uid?j.uid:void 0,k=`api/dashboards/uid/${_}/restore`;return _&&(0,t.isNumber)(A)?(0,n.i)().post(k,{version:A}):Promise.resolve({})}}const s=new i;var l=e(9892),f=e(66111),u=e(58255),o=e(34719),d=e(5191),r=e(31403),m=e(98102),c=e(13821),p=e(72196),g=e(37932),y=e(60499),E=e(27876);const v=async(H,j)=>await s.restoreDashboard(j,H),h=H=>{const j=(0,E.useSelector)(Q=>Q.dashboard.getModel()),[A,_]=(0,c.Z)(async()=>await v(H,j),[]),k=(0,y.iG)();return(0,f.useEffect)(()=>{if(A.value){const Q=g.E1.getLocation(),re=p.u.stripBaseFromUrl(A.value.url),Z=Q.state?.routeReloadCounter;g.E1.replace({...Q,pathname:re,state:{routeReloadCounter:Z?Z+1:1}}),k.success("Dashboard restored",`Restored from version ${H}`)}},[A,H,k]),{state:A,onRestoreDashboard:_}},P=({hideModal:H,version:j})=>{const{state:A,onRestoreDashboard:_}=h(j);return(0,f.useEffect)(()=>{A.loading===!1&&A.value&&H()},[A,H]),f.createElement(m.s,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:H,onConfirm:_,body:f.createElement("p",null,"Are you sure you want to restore the dashboard to version ",j,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${j}`})},a=({versions:H,canCompare:j,onCheck:A})=>f.createElement("table",{className:"filter-table gf-form-group"},f.createElement("thead",null,f.createElement("tr",null,f.createElement("th",{className:"width-4"}),f.createElement("th",{className:"width-4"},"Version"),f.createElement("th",{className:"width-14"},"Date"),f.createElement("th",{className:"width-10"},"Updated by"),f.createElement("th",null,"Notes"),f.createElement("th",null))),f.createElement("tbody",null,H.map((_,k)=>f.createElement("tr",{key:_.id},f.createElement("td",null,f.createElement(u.X,{"aria-label":`Toggle selection of version ${_.version}`,className:l.css`
                display: inline;
              `,checked:_.checked,onChange:Q=>A(Q,_.id),disabled:!_.checked&&j})),f.createElement("td",null,_.version),f.createElement("td",null,_.createdDateString),f.createElement("td",null,_.createdBy),f.createElement("td",null,_.message),f.createElement("td",{className:"text-right"},k===0?f.createElement(o.V,{name:"Latest",colorIndex:17}):f.createElement(d.JY,null,({showModal:Q,hideModal:re})=>f.createElement(r.zx,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{Q(P,{version:_.version,hideModal:re})}},"Restore")))))));var C=e(72648),D=e(8180),b=e(39904);const M=({onClick:H=t.noop,baseVersion:j=0,newVersion:A=0,isNewLatest:_=!1})=>{const k=(0,C.wW)(x);return f.createElement("h3",{className:k.header},f.createElement(D.h,{name:"arrow-left",size:"xl",onClick:H}),f.createElement("span",null,"Comparing ",j," ",f.createElement(b.J,{name:"arrows-h"})," ",A," ",_&&f.createElement("cite",{className:"muted"},"(Latest)")))},x=H=>({header:l.css`
    font-size: ${H.typography.h3.fontSize};
    display: flex;
    gap: ${H.spacing(2)};
    margin-bottom: ${H.spacing(3)};
  `});var R=e(26418),S=e(61860);const O=({hasMore:H,canCompare:j,getVersions:A,getDiff:_,isLastPage:k})=>f.createElement(R.Stack,null,H&&f.createElement(r.zx,{type:"button",onClick:()=>A(!0),variant:"secondary",disabled:k},"Show more versions"),f.createElement(S.u,{content:"Select two versions to start comparing",placement:"bottom"},f.createElement(r.zx,{type:"button",disabled:!j,onClick:_,icon:"code-branch"},"Compare versions")));var U=e(52081),I=e(20941),F=e(64687),w=e(61017),K=e(15092);const L=({baseInfo:H,newInfo:j,diffData:A,isNewLatest:_})=>{const k=(0,K.Q$)(A.lhs,A.rhs),Q=(0,C.wW)(V);return f.createElement("div",null,f.createElement("div",{className:Q.spacer},f.createElement(U.Lh,{justify:"space-between",align:"center"},f.createElement("div",null,f.createElement("p",{className:Q.versionInfo},f.createElement("strong",null,"Version ",j.version)," updated by ",j.createdBy," ",j.ageString," -"," ",j.message),f.createElement("p",{className:(0,l.cx)(Q.versionInfo,Q.noMarginBottom)},f.createElement("strong",null,"Version ",H.version)," updated by ",H.createdBy," ",H.ageString," -"," ",H.message)),_&&f.createElement(d.JY,null,({showModal:re,hideModal:Z})=>f.createElement(r.zx,{variant:"destructive",icon:"history",onClick:()=>{re(P,{version:H.version,hideModal:Z})}},"Restore to version ",H.version)))),f.createElement("div",{className:Q.spacer},Object.entries(k).map(([re,Z])=>f.createElement(F.B,{diffs:Z,key:re,title:re}))),f.createElement(I.s,{isOpen:!1,label:"View JSON Diff"},f.createElement(w.Z,{oldValue:JSON.stringify(A.lhs,null,2),newValue:JSON.stringify(A.rhs,null,2)})))},V=H=>({spacer:l.css`
    margin-bottom: ${H.spacing(4)};
  `,versionInfo:l.css`
    color: ${H.colors.text.secondary};
    font-size: ${H.typography.bodySmall.fontSize};
  `,noMarginBottom:l.css`
    margin-bottom: 0;
  `})},15092:(Y,T,e)=>{"use strict";e.d(T,{Q$:()=>l,dW:()=>f});var t=e(92497),n=e(56070),i=e(82897),s=e.n(i);const l=(d,r)=>{const m=(0,t.qu)(d,r),c=n.stringify(d,null,2),p=n.stringify(r,null,2),g=v=>v.map(h=>{let P,a,C=0;const D=(0,i.tail)(h.path.split("/"));return h.op==="replace"&&(P=(0,i.get)(d,D),a=h.value,C=p.pointers[h.path].value.line),h.op==="add"&&(a=h.value,C=p.pointers[h.path].value.line),h.op==="remove"&&(P=(0,i.get)(d,D),C=c.pointers[h.path].value.line),{op:h.op,value:a,path:D,originalValue:P,startLineNumber:C}}),y=v=>(0,i.sortBy)(v,"startLineNumber"),E=v=>v.reduce((h,P)=>{const a=P.path[0];return h[a]||(h[a]=[]),h[a].push(P),h},{});return(0,i.flow)([g,y,E])(m)},f=(d,r=!0)=>{const m=(0,i.last)(d.path),c=u(m),p=d.op==="remove"?d.originalValue:d.value;let g=o(d.op);return r&&(c?g+=` item ${m}`:(0,i.isArray)(p)&&!(0,i.isEmpty)(p)?g+=` ${p.length} ${m}`:g+=` ${m}`),g},u=d=>!(0,i.isNaN)((0,i.toNumber)(d)),o=d=>d==="add"?"added":d==="remove"?"deleted":"changed"},91551:(Y,T,e)=>{"use strict";e.d(T,{N:()=>r});var t=e(3947),n=e(73567),i=e(90748),s=e(99098),l=e(30471),f=e(50035),u=e(17882);const o="hideSeriesFrom",d=(0,t.Y4)(o);function r(v,h,P,a){const{overrides:C}=P,D=v,b=C.findIndex(d);if(b<0){if(h===u.R.ToggleSelection){const U=m([D,...E(C,a)]);return{...P,overrides:[...P.overrides,U]}}const S=y(a,D),O=m(S);return{...P,overrides:[...P.overrides,O]}}const M=Array.from(C),[x]=M.splice(b,1);if(h===u.R.ToggleSelection){let S=p(x);const O=E(M,a);if(O.length>0&&(S=S.filter(I=>O.indexOf(I)<0)),S[0]===D&&S.length===1)return{...P,overrides:M};const U=m([D,...O]);return{...P,overrides:[...M,U]}}const R=c(x,D);return g(R,a)?{...P,overrides:M}:{...P,overrides:[...M,R]}}function m(v,h=n.Ys.exclude,P){return P=P??{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:o,matcher:{id:i.mi.byNames,options:{mode:h,names:v,prefix:h===n.Ys.exclude?"All except:":void 0,readOnly:!0}},properties:[{...P,value:{viz:!0,legend:!1,tooltip:!1}}]}}const c=(v,h,P=n.Ys.exclude)=>{const a=v.properties.find(b=>b.id==="custom.hideFrom"),C=p(v),D=C.findIndex(b=>b===h);return D<0?C.push(h):C.splice(D,1),m(C,P,a)},p=v=>{const h=v.matcher.options?.names;return Array.isArray(h)?[...h]:[]},g=(v,h)=>p(v).length===y(h).length,y=(v,h)=>{const P=new Set;for(const a of v)for(const C of a.fields){if(C.type!==s.fS.number)continue;const D=(0,l.CZ)(C,a,v);D!==h&&P.add(D)}return Array.from(P)},E=(v,h)=>{let P=[];for(const a of v){const C=a.properties.find(D=>D.id==="custom.hideFrom");if(C!==void 0&&C.value?.legend===!0){const b=f.Ls.get(a.matcher.id).get(a.matcher.options);for(const M of h)for(const x of M.fields){if(x.type!==s.fS.number)continue;const R=(0,l.CZ)(x,M,h);b(x,M,h)&&P.push(R)}}}return P}},6911:(Y,T,e)=>{"use strict";e.d(T,{A:()=>o});var t=e(924),n=e(67483),i=e(47406);const s=100;class l{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new t.X(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const r=Date.now();this.budget=(r-this.lastUpdate)/s;const m=this.ok.getValue(),c=this.budget<=this.threshold;if(m!==c&&this.ok.next(c),this.lastUpdate=r,this.isLive&&this.ok.getValue()&&this.timeRange){let p;for(const g of this.listeners){if(!g.panel.props.isInView)continue;if(r-g.last>=g.intervalMs){if(!p){const{raw:E}=this.timeRange;p={raw:E,from:(0,n.CQ)(r-this.liveTimeOffset),to:(0,n.CQ)(r)}}g.panel.liveTimeChanged(p),g.last=r}}}}}setLiveTimeRange(r){if(this.timeRange=r,this.isLive=r?.raw?.to==="now",this.isLive){const m=i.parse(r.raw.from,!1)?.valueOf(),c=i.parse(r.raw.to,!0)?.valueOf();this.liveTimeOffset=c-m;for(const p of this.listeners)p.intervalMs=u(this.liveTimeOffset,p.panel.props.width)}}listen(r){this.listeners.push({last:this.lastUpdate,panel:r,intervalMs:u(6e4,r.props.width)})}remove(r){this.listeners=this.listeners.filter(m=>m.panel!==r)}updateInterval(r){if(!(!this.timeRange||!this.isLive)){for(const m of this.listeners)if(m.panel===r){m.intervalMs=u(this.liveTimeOffset,m.panel.props.width);return}}}}const f=5*60*1e3;function u(d,r){const m=Math.ceil(d/r/100)*100;return m>f?f:m}const o=new l;setInterval(o.measure,s)},87449:(Y,T,e)=>{"use strict";e.d(T,{Bg:()=>v,pD:()=>h});var t=e(24259),n=e.n(t),i=e(82897),s=e.n(i),l=e(36365),f=e.n(l),u=e(4063),o=e(47406),d=e(54899),r=e(37932),m=e(29930),c=e(13019),p=e(24816),g=e(91162),y=e(77582),E=e(9398);class v{constructor(){}_dashboardLoadFailed(C,D){return D=D||!1,{meta:{canStar:!1,isSnapshot:D,canDelete:!1,canSave:!1,canEdit:!1,dashboardNotFound:!0},dashboard:{title:C}}}loadDashboard(C,D,b){let M;return C==="script"?M=this._loadScriptedDashboard(D):C==="snapshot"?M=m.ae.get("/api/snapshots/"+D).catch(()=>this._dashboardLoadFailed("Snapshot not found",!0)):C==="ds"?M=this._loadFromDatasource(D):C==="public"?M=m.ae.getPublicDashboardByUid(b).then(x=>x).catch(x=>{const R=x.data.statusCode===403&&x.data.messageId==="publicdashboards.notEnabled",S=x.data.statusCode===404&&x.data.messageId==="publicdashboards.notFound",O=this._dashboardLoadFailed(R?"Public Dashboard paused":"Public Dashboard Not found",!0);return{...O,meta:{...O.meta,publicDashboardEnabled:S?void 0:!R,dashboardNotFound:S}}}):M=m.ae.getDashboardByUid(b).then(x=>{if(x.meta.isFolder)throw y.h$.emit(u.SI.alertError,["Dashboard not found"]),new Error("Dashboard not found");return x}).catch(()=>this._dashboardLoadFailed("Not found",!0)),M.then(x=>(x.meta.dashboardNotFound!==!0&&c.Z.addDashboardImpression(x.dashboard.uid),x)),M}_loadScriptedDashboard(C){const D="public/dashboards/"+C.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,d.i)().get(D).then(this._executeScript.bind(this)).then(b=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:b.data}),b=>(console.error("Script dashboard error "+b),y.h$.emit(u.SI.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard")))}async _loadFromDatasource(C){const D=await(0,g.ak)().get(C);if(!D)return Promise.reject("can not find datasource: "+C);const b=new URLSearchParams(window.location.search),M=b.get("path");if(!M)return Promise.reject("expecting path parameter");const x={};return b.forEach((R,S)=>{x[S]=R}),(0,d.i)().get(`/api/datasources/uid/${D.uid}/resources/${M}`,x).then(R=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:R}))}_executeScript(C){const D={dashboardSrv:(0,E.h4)(),datasourceSrv:(0,g.ak)()},M=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",C)(r.E1.getSearchObject(),p.Z,o,s(),f(),window,document,n(),n(),D);return(0,i.isFunction)(M)?new Promise(x=>{M(R=>{x({data:R})})}):{data:M}}}let h=new v;const P=a=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},9398:(Y,T,e)=>{"use strict";e.d(T,{h4:()=>p});var t=e(65583),n=e(4063),i=e(18271),s=e(35287),l=e(29930),f=e(50946),u=e(45984),o=e(82302),d=e(2476);class r{constructor(){this.onRemovePanel=y=>{const E=this.getCurrent();E&&(0,d.WJ)(E,E.getPanelById(y),!0)},i.h.subscribe(u.Eb,y=>this.onRemovePanel(y.payload))}create(y,E){return new o.f(y,E)}setCurrent(y){this.dashboard=y}getCurrent(){return this.dashboard||console.warn("Calling getDashboardSrv().getCurrent() without calling getDashboardSrv().setCurrent() first."),this.dashboard}saveJSONDashboard(y){const E=JSON.parse(y);return(0,f.uC)({dashboard:E,folderUid:this.dashboard?.meta.folderUid||E.folderUid})}saveDashboard(y,E){return(0,t.n)((0,l.i)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...y,dashboard:y.dashboard.getSaveModelClone()},...E}))}starDashboard(y,E){const v=(0,l.i)(),h={showSuccessAlert:!1,url:"/api/user/stars/dashboard/uid/"+y,method:E?"DELETE":"POST"};return v.request(h).then(()=>{const P=!E;this.dashboard?.uid===y&&(this.dashboard.meta.isStarred=P);const a=P?(0,s.t)("notifications.starred-dashboard","Dashboard starred"):(0,s.t)("notifications.unstarred-dashboard","Dashboard unstarred");return i.h.emit(n.SI.alertSuccess,[a]),P})}}let m;function c(g){m=g}function p(){return m||(m=new r),m}},17424:(Y,T,e)=>{"use strict";e.d(T,{Qi:()=>c,lh:()=>g});var t=e(59980),n=e(49372),i=e(53704),s=e(59724),l=e(89424),f=e(83881),u=e(54899),o=e(32689),d=e(7832),r=e(63496),m=e(45849);const c="-- Public --",p="1min";class g extends l.MF{constructor(E){let v={};g.isMixedDatasource(E)&&(v.mixed=!0),super({name:"public-ds",id:0,type:"public-ds",meta:v,uid:g.resolveUid(E),jsonData:{},access:"proxy",readOnly:!0}),this.interval=g.resolveInterval(E),this.annotations={prepareQuery(h){return{...h,queryType:d.hR.Annotations,refId:"anno"}}}}static resolveUid(E){return typeof E=="string"?E:E?.uid??c}static isMixedDatasource(E){return typeof E=="string"||E==null?!1:E?.uid===r.D}static resolveInterval(E){return typeof E=="string"||E==null?p:("interval"in E?E.interval:void 0)??p}query(E){const{intervalMs:v,maxDataPoints:h,requestId:P,publicDashboardAccessToken:a,panelId:C,queryCachingTTL:D,range:{from:b,to:M}}=E;let x;if(!E.targets.length)return(0,t.of)({data:[]});const R=E.targets[0];if(R.queryType===d.hR.Annotations)return R?.datasource?.uid===m.JY?(0,n.D)(this.getAnnotations(E)):(0,t.of)({data:[]});{const S={intervalMs:v,maxDataPoints:h,queryCachingTTL:D,timeRange:{from:b.valueOf().toString(),to:M.valueOf().toString()}};return(0,u.i)().fetch({url:`/api/public/dashboards/${a}/panels/${C}/query`,method:"POST",data:S,requestId:P}).pipe((0,i.w)(O=>(0,t.of)((0,o.z1)(O,x))),(0,s.K)(O=>(0,t.of)((0,o.z1)(O))))}}async getAnnotations(E){const{publicDashboardAccessToken:v,range:{to:h,from:P}}=E,a={from:P.valueOf(),to:h.valueOf()},C=v?await(0,u.i)().get(`/api/public/dashboards/${v}/annotations`,a):[];return{data:[(0,f.g0)(C)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}},19349:(Y,T,e)=>{"use strict";e.d(T,{$t:()=>h});var t=e(82897),n=e(67483),i=e(75849),s=e(47891),l=e(47406),f=e(37932),u=e(18271),o=e(47694),d=e(82002),r=e(5242),m=e(74124),c=e(45984),p=e(5562);function g({urlRefresh:P,currentRefresh:a,isAllowedIntervalFn:C,minRefreshInterval:D,refreshIntervals:b=p.o5}){if(!P)return a;const M=C(P),x=b.find(R=>R===P);if(!M||!x){const R=D?b.find(O=>O===D):void 0,S=b?.length?b[0]:void 0;return R??S??a}return P||a}class y{constructor(a){this.contextSrv=a,this.timeRangeForUrl=()=>{const C=this.timeRange().raw;return(0,n.v9)(C.from)&&(C.from=C.from.valueOf().toString()),(0,n.v9)(C.to)&&(C.to=C.to.valueOf().toString()),C},this.time=(0,i.JK)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),u.Z.subscribe(c.p8,C=>{this.zoomOut(C.payload.scale,C.payload.updateUrl)}),u.Z.subscribe(c.Qt,C=>{this.shiftTime(C.payload.direction,C.payload.updateUrl)}),u.Z.subscribe(c.QI,()=>{this.makeAbsoluteTime()}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(a){this.timeModel=a,this.time=a.time,this.refresh=a.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,t.cloneDeep)(this.time);const C=s.convertRawToRange(this.time,this.timeModel?.getTimezone(),this.timeModel?.fiscalYearStartMonth);C.to.isBefore(C.from)&&this.setTime({from:C.raw.to,to:C.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(a){return this.contextSrv.minRefreshInterval?a.filter(C=>C!=="").filter(this.contextSrv.isAllowedInterval):a}parseTime(){(0,t.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,n.CQ)(this.time.from).utc()),(0,t.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,n.CQ)(this.time.to).utc())}parseUrlParam(a){if(a.indexOf("now")!==-1)return a;if(a.length===8){const C=(0,n.zh)(a,"YYYYMMDD");if(C.isValid())return C}else if(a.length===15){const C=(0,n.zh)(a,"YYYYMMDDTHHmmss");if(C.isValid())return C}if(!isNaN(a)){const C=parseInt(a,10);return(0,n.zh)(C)}return null}getTimeWindow(a,C){const D=parseInt(a,10);let b;return C.match(/^\d+$/)&&parseInt(C,10)?b=parseInt(C,10):b=s.intervalToMs(C),{from:(0,n.zh)(D-b/2),to:(0,n.zh)(D+b/2)}}initTimeFromUrl(){if(o.vc.isPublicDashboardView&&this.timeModel?.timepicker?.hidden)return;const a=f.E1.getSearch();a.get("time")&&a.get("time.window")&&(this.time=this.getTimeWindow(a.get("time"),a.get("time.window"))),a.get("from")&&(this.time.from=this.parseUrlParam(a.get("from"))||this.time.from),a.get("to")&&(this.time.to=this.parseUrlParam(a.get("to"))||this.time.to),a.get("to")&&a.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=!1)),this.refresh=g({urlRefresh:a.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:o.vc.minRefreshInterval})}updateTimeRangeFromUrl(){const a=f.E1.getSearch();if(a.get("left"))return;const C=this.timeRangeForUrl(),D=a.get("from"),b=a.get("to");D&&b?(D!==C.from||b!==C.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(a){this.timeModel&&(this.timeModel.refresh=a),this.stopAutoRefresh();const C=f.E1.getSearchObject();if(!a){C.refresh&&f.E1.partial({refresh:null},!0);return}const D=this.contextSrv.getValidInterval(a),b=s.intervalToMs(D);this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(b),this.refreshTimeModel()},b);const M=this.contextSrv.getValidInterval(a);C.refresh!==M&&f.E1.partial({refresh:M},!0)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(a){this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(a),this.contextSrv.isGrafanaVisible()?this.refreshTimeModel():this.autoRefreshBlocked=!0},a)}stopAutoRefresh(){clearTimeout(this.refreshTimer),this.refreshTimer=void 0}resumeAutoRefresh(){this.timeModel?.refresh&&this.setAutoRefresh(this.timeModel.refresh)}setTime(a,C=!0){if((0,t.extend)(this.time,a),(0,n.v9)(a.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=null),C===!0){const D=this.timeRangeForUrl(),b=f.E1.getSearchObject();if(b.from===D.from.toString()&&b.to===D.to.toString())return;b.from=D.from.toString(),b.to=D.to.toString(),f.E1.partial(b)}this.refreshTimeModel()}timeRange(){return(0,m.O)(this.time,this.timeModel)}zoomOut(a,C=!0){const D=this.timeRange(),{from:b,to:M}=(0,r.h)(D,a);this.setTime({from:(0,n.zh)(b),to:(0,n.zh)(M)},C)}shiftTime(a,C=!0){const D=this.timeRange(),{from:b,to:M}=(0,r.e)(a,D);this.setTime({from:(0,n.zh)(b),to:(0,n.zh)(M)},C)}makeAbsoluteTime(){if(f.E1.getSearch().get("left"))return;const{from:C,to:D}=this.timeRange();this.setTime({from:C,to:D},!0)}isRefreshOutsideThreshold(a,C=.05){const D=this.timeRange();if(l.isMathString(D.raw.from)){const b=D.to.diff(D.from),M=Date.now()-a,x=b*C;return M>=x}return!1}}let E;function v(P){E=P}function h(){return E||(E=new y(d.Vt)),E}},7592:(Y,T,e)=>{"use strict";e.d(T,{o:()=>L,p:()=>k});var t=e(82897),n=e(30779),i=e(61618),s=e(73446),l=e(49187),f=e(94976),u=e(32195),o=e(92103),d=e(90748),r=e(99098),m=e(31568),c=e(18820),p=e(86647),g=e(40538),y=e(48010),E=e(52974),v=e(47694),h=e(84952);function P(ae){return Array.from(new Array(ae+1),(de,ee)=>ee).filter(de=>ae%de===0)}var a=e(24816),C=e(91162),D=e(15546),b=e(96188),M=e(63496),x=e(7149),R=e(98967),S=e(99822),O=e(2868);function U(ae,de){const ee=[];if(ae?.statistics&&ae?.statistics.length){ae.statistic=ae.statistics[0];for(const me of ae.statistics.splice(1))ee.push({...ae,statistic:me})}for(const me of ee)me.refId=(0,S.Hs)(de),delete me.statistics,de.push(me);return delete ae.statistics,ee}function I(ae){const de=[];if(ae&&"statistics"in ae&&ae?.statistics?.length){for(const ee of ae.statistics.splice(1)){const{statistics:me,name:q,...ne}=ae;de.push({...ne,statistic:ee,name:`${q} - ${ee}`})}ae.statistic=ae.statistics[0],de.length!==0&&(ae.name=`${ae.name} - ${ae.statistic}`),delete ae.statistics}return de}function F(ae){ae.hasOwnProperty("metricQueryType")||(ae.metricQueryType=O.$5.Search),ae.hasOwnProperty("metricEditorMode")||(ae.metricQueryType===O.$5.Query?ae.metricEditorMode=O.MQ.Code:ae.metricEditorMode=ae.expression?O.MQ.Code:O.MQ.Builder)}var w=e(10672),K=e(96161);n.S.setInit(E.u),n.N.setInit(E.l);class L{constructor(de){this.dashboard=de,(0,p.F)()||(0,p.w)(new C.ND)}updateSchema(de){let ee,me,q,ne;const se=this.dashboard.schemaVersion,he=[];if(this.dashboard.schemaVersion=38,se!==this.dashboard.schemaVersion){if(se<2&&(de.services&&de.services.filter&&(this.dashboard.time=de.services.filter.time,this.dashboard.templating.list=de.services.filter.list||[]),he.push(ue=>(ue.type==="graphite"&&(ue.type="graph"),ue.type!=="graph"||((0,t.isBoolean)(ue.legend)&&(ue.legend={show:ue.legend}),ue.grid&&(ue.grid.min&&(ue.grid.leftMin=ue.grid.min,delete ue.grid.min),ue.grid.max&&(ue.grid.leftMax=ue.grid.max,delete ue.grid.max)),ue.y_format&&(ue.y_formats||(ue.y_formats=[]),ue.y_formats[0]=ue.y_format,delete ue.y_format),ue.y2_format&&(ue.y_formats||(ue.y_formats=[]),ue.y_formats[1]=ue.y2_format,delete ue.y2_format)),ue))),se<3){let ue=this.dashboard.getNextPanelId();he.push(Te=>(Te.id||(Te.id=ue,ue+=1),Te))}if(se<4&&he.push(ue=>(ue.type!=="graph"||((0,t.each)(ue.aliasYAxis,(Te,Ve)=>{ue.seriesOverrides=[{alias:Ve,yaxis:Te}]}),delete ue.aliasYAxis),ue)),se<6){const ue=(0,t.find)(de.pulldowns,{type:"annotations"});for(ue&&(this.dashboard.annotations={list:ue.annotations||[]}),ee=0;ee<this.dashboard.templating.list.length;ee++){const Te=this.dashboard.templating.list[ee];Te.datasource===void 0&&(Te.datasource=null),Te.type==="filter"&&(Te.type="query"),Te.type===void 0&&(Te.type="query"),Te.allFormat===void 0&&(Te.allFormat="glob")}}if(se<7&&(de.nav&&de.nav.length&&(this.dashboard.timepicker=de.nav[0]),he.push(ue=>((0,t.each)(ue.targets,Te=>{Te.refId||(Te.refId=ue.getNextQueryLetter&&ue.getNextQueryLetter())}),ue))),se<8&&he.push(ue=>((0,t.each)(ue.targets,Te=>{Te.fields&&Te.tags&&Te.groupBy&&(Te.rawQuery?(delete Te.fields,delete Te.fill):(Te.select=(0,t.map)(Te.fields,Ve=>{const ct=[];return ct.push({type:"field",params:[Ve.name]}),ct.push({type:Ve.func,params:[]}),Ve.mathExpr&&ct.push({type:"math",params:[Ve.mathExpr]}),Ve.asExpr&&ct.push({type:"alias",params:[Ve.asExpr]}),ct}),delete Te.fields,(0,t.each)(Te.groupBy,Ve=>{Ve.type==="time"&&Ve.interval&&(Ve.params=[Ve.interval],delete Ve.interval),Ve.type==="tag"&&Ve.key&&(Ve.params=[Ve.key],delete Ve.key)}),Te.fill&&(Te.groupBy.push({type:"fill",params:[Te.fill]}),delete Te.fill)))}),ue)),se<9&&he.push(ue=>{if(ue.type!=="singlestat"&&ue.thresholds!=="")return ue;if(ue.thresholds){const Te=ue.thresholds.split(",");Te.length>=3&&(Te.shift(),ue.thresholds=Te.join(","))}return ue}),se<10&&he.push(ue=>(ue.type!=="table"||(0,t.each)(ue.styles,Te=>{if(Te.thresholds&&Te.thresholds.length>=3){const Ve=Te.thresholds;Ve.shift(),Te.thresholds=Ve}}),ue)),se<12&&(0,t.each)(this.dashboard.getVariables(),ue=>{ue.refresh&&(ue.refresh=1),ue.refresh||(ue.refresh=0),ue.hideVariable?ue.hide=2:ue.hideLabel&&(ue.hide=1)}),se<12&&he.push(ue=>(ue.type!=="graph"||!ue.grid||ue.yaxes||(ue.yaxes=[{show:ue["y-axis"],min:ue.grid.leftMin,max:ue.grid.leftMax,logBase:ue.grid.leftLogBase,format:ue.y_formats[0],label:ue.leftYAxisLabel},{show:ue["y-axis"],min:ue.grid.rightMin,max:ue.grid.rightMax,logBase:ue.grid.rightLogBase,format:ue.y_formats[1],label:ue.rightYAxisLabel}],ue.xaxis={show:ue["x-axis"]},delete ue.grid.leftMin,delete ue.grid.leftMax,delete ue.grid.leftLogBase,delete ue.grid.rightMin,delete ue.grid.rightMax,delete ue.grid.rightLogBase,delete ue.y_formats,delete ue.leftYAxisLabel,delete ue.rightYAxisLabel,delete ue["y-axis"],delete ue["x-axis"]),ue)),se<13&&he.push(ue=>{if(ue.type!=="graph"||!ue.grid)return ue;ue.thresholds||(ue.thresholds=[]);const Te={},Ve={};return ue.grid.threshold1!==null&&(Te.value=ue.grid.threshold1,ue.grid.thresholdLine?(Te.line=!0,Te.lineColor=ue.grid.threshold1Color,Te.colorMode="custom"):(Te.fill=!0,Te.fillColor=ue.grid.threshold1Color,Te.colorMode="custom")),ue.grid.threshold2!==null&&(Ve.value=ue.grid.threshold2,ue.grid.thresholdLine?(Ve.line=!0,Ve.lineColor=ue.grid.threshold2Color,Ve.colorMode="custom"):(Ve.fill=!0,Ve.fillColor=ue.grid.threshold2Color,Ve.colorMode="custom")),(0,t.isNumber)(Te.value)&&((0,t.isNumber)(Ve.value)?Te.value>Ve.value?(Te.op=Ve.op="lt",ue.thresholds.push(Te),ue.thresholds.push(Ve)):(Te.op=Ve.op="gt",ue.thresholds.push(Te),ue.thresholds.push(Ve)):(Te.op="gt",ue.thresholds.push(Te))),delete ue.grid.threshold1,delete ue.grid.threshold1Color,delete ue.grid.threshold2,delete ue.grid.threshold2Color,delete ue.grid.thresholdLine,ue}),se<14&&(this.dashboard.graphTooltip=de.sharedCrosshair?1:0),se<16&&this.upgradeToGridLayout(de),se<17&&he.push(ue=>{if(ue.minSpan){const Te=h.cz/ue.minSpan,Ve=P(h.cz);ue.maxPerRow=Ve[(0,t.findIndex)(Ve,ct=>ct>Te)-1]}return delete ue.minSpan,ue}),se<18&&he.push(ue=>(ue["options-gauge"]&&(ue.options=ue["options-gauge"],ue.options.valueOptions={unit:ue.options.unit,stat:ue.options.stat,decimals:ue.options.decimals,prefix:ue.options.prefix,suffix:ue.options.suffix},ue.options.thresholds&&ue.options.thresholds.reverse(),delete ue.options.options,delete ue.options.unit,delete ue.options.stat,delete ue.options.decimals,delete ue.options.prefix,delete ue.options.suffix,delete ue["options-gauge"]),ue)),se<19&&he.push(ue=>(ue.links&&(0,t.isArray)(ue.links)&&(ue.links=ue.links.map(j)),ue)),se<20){const ue=Te=>({...Te,url:A(Te.url)});he.push(Te=>(Te.options&&Te.options.dataLinks&&(0,t.isArray)(Te.options.dataLinks)&&(Te.options.dataLinks=Te.options.dataLinks.map(ue)),Te.options&&Te.options.fieldOptions&&Te.options.fieldOptions.defaults&&(Te.options.fieldOptions.defaults.links&&(0,t.isArray)(Te.options.fieldOptions.defaults.links)&&(Te.options.fieldOptions.defaults.links=Te.options.fieldOptions.defaults.links.map(ue)),Te.options.fieldOptions.defaults.title&&(Te.options.fieldOptions.defaults.title=A(Te.options.fieldOptions.defaults.title))),Te))}if(se<21){const ue=Te=>({...Te,url:Te.url.replace(/__series.labels/g,"__field.labels")});he.push(Te=>(Te.options&&Te.options.dataLinks&&(0,t.isArray)(Te.options.dataLinks)&&(Te.options.dataLinks=Te.options.dataLinks.map(ue)),Te.options&&Te.options.fieldOptions&&Te.options.fieldOptions.defaults&&Te.options.fieldOptions.defaults.links&&(0,t.isArray)(Te.options.fieldOptions.defaults.links)&&(Te.options.fieldOptions.defaults.links=Te.options.fieldOptions.defaults.links.map(ue)),Te))}if(se<22&&he.push(ue=>(ue.type!=="table"||(0,t.each)(ue.styles,Te=>{Te.align="auto"}),ue)),se<23)for(const ue of this.dashboard.templating.list){if(!(0,D.U4)(ue))continue;const{multi:Te,current:Ve}=ue;(0,i.Q)(Ve)||(ue.current=(0,b.x)(Ve,Te))}if(se<24&&he.push(ue=>{const Te=ue.type==="table";if(Te&&!ue.styles)return ue;const Ve=ue.table==="table2";return!Te||Ve||(ue.type=Te?"table-old":"table"),ue}),se<25,se<26&&he.push(ue=>(ue.type==="text2"&&(ue.type="text",delete ue.options.angular),ue)),se<27&&(this.dashboard.templating.list=this.dashboard.templating.list.map(ue=>{if(!(0,D.VC)(ue))return ue;const Te={...ue};return Te.current={selected:!0,text:Te.query??"",value:Te.query??""},Te.options=[Te.current],Te.hide===w.bU.dontHide||Te.hide===w.bU.hideLabel?{...Te,type:"textbox"}:Te})),se<28){he.push(ue=>ue.type==="singlestat"?_(ue):ue);for(const ue of this.dashboard.templating.list)ue.tags&&delete ue.tags,ue.tagsQuery&&delete ue.tagsQuery,ue.tagValuesQuery&&delete ue.tagValuesQuery,ue.useTags&&delete ue.useTags}if(se<29)for(const ue of this.dashboard.templating.list)ue.type==="query"&&(ue.refresh!==1&&ue.refresh!==2&&(ue.refresh=1),ue.options?.length&&(ue.options=[]));if(se<30&&(he.push(re),he.push(le)),se<31&&he.push(ue=>{if(ue.transformations){for(const Te of ue.transformations)if(Te.id===m.r.id)return Q(ue,m.r.id,{id:c.R.id,options:{}})}return ue}),se<32,se<33&&he.push(ue=>{if(ue.datasource=k(ue.datasource,{returnDefaultAsNull:!0}),!ue.targets)return ue;for(const Te of ue.targets){const Ve=k(Te.datasource,{returnDefaultAsNull:!0});Ve!=null&&(Te.datasource=Ve)}return ue}),se<34&&(he.push(ue=>(this.migrateCloudWatchQueries(ue),ue)),this.migrateCloudWatchAnnotationQuery()),se<35&&he.push(fe),se<36){for(const Te of this.dashboard.annotations.list)Te.datasource=k(Te.datasource,{returnDefaultAsNull:!1});const ue=(0,p.F)().getInstanceSettings(null);if(ue){for(const Te of this.dashboard.templating.list)Te.type==="query"&&Te.datasource===null&&(Te.datasource=(0,s.iU)(ue));he.push(Te=>{if(Te.targets){let Ve=!1;Te.datasource==null&&Te.targets.length>0&&(Te.datasource=(0,s.iU)(ue),Ve=!0);for(const ct of Te.targets)(ct.datasource==null||ct.datasource.uid==null)&&(Te.datasource?.uid!==M.D?ct.datasource={...Te.datasource}:ct.datasource=k(ct.datasource,{returnDefaultAsNull:!1})),Ve&&ct.datasource?.uid!=="__expr__"&&(Te.datasource=ct.datasource)}return Te})}}if(se<37&&he.push(ue=>(ue.options?.legend&&(ue.options.legend.displayMode==="hidden"||ue.options.legend.showLegend===!1)?(ue.options.legend.displayMode="list",ue.options.legend.showLegend=!1):ue.options?.legend&&(ue.options.legend={...ue.options?.legend,showLegend:!0}),ue)),se<38&&he.push(ue=>{if(ue.type==="table"&&ue.fieldConfig!==void 0){const Te=ue.fieldConfig.defaults?.custom?.displayMode;if(Te!==void 0&&(ue.fieldConfig.defaults.custom.cellOptions=(0,y.q7)(Te),delete ue.fieldConfig.defaults.custom.displayMode),ue.fieldConfig?.overrides)for(const Ve of ue.fieldConfig.overrides)for(let ct=0;ct<Ve.properties?.length;ct++){let Ie=Ve.properties[ct].value;Ve.properties[ct].id==="custom.displayMode"&&(Ve.properties[ct].id="custom.cellOptions",Ve.properties[ct].value=(0,y.q7)(Ie))}}return ue}),he.length!==0)for(me=0;me<this.dashboard.panels.length;me++)for(q=0;q<he.length;q++){this.dashboard.panels[me]=he[q].call(this,this.dashboard.panels[me]);const ue=this.dashboard.panels[me].panels;if(ue)for(ne=0;ne<ue.length;ne++)ue[ne]=he[q].call(this,ue[ne])}}}migrateCloudWatchQueries(de){for(const ee of de.targets||[])if(Z(ee)&&(F(ee),ee.hasOwnProperty("statistics"))){const me=U(ee,[...de.targets]);for(const q of me)de.targets.push(q)}}migrateCloudWatchAnnotationQuery(){for(const de of this.dashboard.annotations.list)if(oe(de)){const ee=I(de);for(const me of ee)this.dashboard.annotations.list.push(me)}}upgradeToGridLayout(de){let ee=0;const me=h.cz/12;let ne=(0,t.max)((0,t.flattenDeep)((0,t.map)(de.rows,he=>(0,t.map)(he.panels,"id"))))+1;if(!de.rows)return;const se=(0,t.some)(de.rows,he=>he.collapse||he.showTitle||he.repeat);for(const he of de.rows){if(he.repeatIteration)continue;const ue=he.height||h.b0,Te=V(ue),Ve={};let ct;se&&(Ve.id=ne,Ve.type="row",Ve.title=he.title,Ve.collapsed=he.collapse,Ve.repeat=he.repeat,Ve.panels=[],Ve.gridPos={x:0,y:ee,w:h.cz,h:Te},ct=new K.rY(Ve),ne++,ee++);const Ie=new H(Te,h.cz,ee);for(const Ke of he.panels){Ke.span=Ke.span||h.kh,Ke.minSpan&&(Ke.minSpan=Math.min(h.cz,h.cz/12*Ke.minSpan));const Ge=Math.floor(Ke.span)*me,at=Ke.height?V(Ke.height):Te,dt=Ie.getPanelPosition(at,Ge);ee=Ie.yPos,Ke.gridPos={x:dt.x,y:ee+dt.y,w:Ge,h:at},Ie.addPanel(Ke.gridPos),delete Ke.span,ct&&Ve.collapsed?ct.panels?.push(Ke):this.dashboard.panels.push(new K.rY(Ke))}ct&&this.dashboard.panels.push(ct),ct&&Ve.collapsed||(ee+=Te)}}}function V(ae){return(0,t.isString)(ae)&&(ae=parseInt(ae.replace("px",""),10)),ae<h.AV&&(ae=h.AV),Math.ceil(ae/(h.K3+h.hD))}class H{constructor(de,ee=h.cz,me=0){this.area=new Array(ee).fill(0),this.yPos=me,this.height=de}reset(){this.area.fill(0)}addPanel(de){for(let ee=de.x;ee<de.x+de.w;ee++)(!this.area[ee]||de.y+de.h-this.yPos>this.area[ee])&&(this.area[ee]=de.y+de.h-this.yPos);return this.area}getPanelPosition(de,ee,me=!1){let q,ne,se;for(let he=this.area.length-1;he>=0&&this.height-this.area[he]>0;he--)if(ne===void 0)ne=he;else if(he<this.area.length-1&&this.area[he]<=this.area[he+1])q=he;else break;if(q!==void 0&&ne!==void 0&&ne-q>=ee-1){const he=(0,t.max)(this.area.slice(q));se={x:q,y:he}}else return me?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(de,ee,!0));return se}}function j(ae){let de=ae.url;return!de&&ae.dashboard&&(de=`dashboard/db/${a.Z.slugifyForUrl(ae.dashboard)}`),!de&&ae.dashUri&&(de=`dashboard/${ae.dashUri}`),de||(de="/"),ae.keepTime&&(de=l.Cj.appendQueryToUrl(de,`$${f.W.keepTime}`)),ae.includeVars&&(de=l.Cj.appendQueryToUrl(de,`$${f.W.includeVars}`)),ae.params&&(de=l.Cj.appendQueryToUrl(de,ae.params)),{url:de,title:ae.title,targetBlank:ae.targetBlank}}function A(ae){const de=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return ae.replace(de,(ee,me,q,ne,se,he)=>me?"__series.name":q?"${__series.name}":ne?"__value.time":se?"__field.name":he?"${__field.name}":ee)}function _(ae){if(v.vc.panels["grafana-singlestat-panel"])return ae.type="grafana-singlestat-panel",ae;let de=!1;return ae.changePlugin||(de=!0,ae=new K.rY(ae)),ae.plugin={angularPanelCtrl:{}},ae.gauge?.show?(x.plugin.meta=v.vc.panels.gauge,ae.changePlugin(x.plugin)):(R.plugin.meta=v.vc.panels.stat,ae.changePlugin(R.plugin)),de?ae.getSaveModel():ae}function k(ae,de){if(de.returnDefaultAsNull&&(ae==null||ae==="default"))return null;if((0,s.cv)(ae))return ae;const ee=(0,p.F)().getInstanceSettings(ae);return ee?(0,s.iU)(ee):{uid:ae}}function Q(ae,de,ee){if(ae.transformations){const me=[];for(const q of ae.transformations)me.push(q),q.id===de&&me.push({...ee});ae.transformations=me}return ae}function re(ae){const de=ae.fieldConfig;if(!de)return ae;if(de.defaults&&de.defaults.mappings&&(de.defaults.mappings=G(de.defaults.mappings,de.defaults.thresholds)),Array.isArray(de.overrides))for(const ee of de.overrides)for(const me of ee.properties)me.id==="mappings"&&(me.value=G(me.value));return ae}function Z(ae){return ae.hasOwnProperty("dimensions")&&ae.hasOwnProperty("namespace")&&ae.hasOwnProperty("region")&&ae.hasOwnProperty("metricName")}function oe(ae){return ae.hasOwnProperty("dimensions")&&ae.hasOwnProperty("namespace")&&ae.hasOwnProperty("region")&&ae.hasOwnProperty("prefixMatching")&&ae.hasOwnProperty("statistics")}function G(ae,de){if(!ae)return;const ee={type:u.H.ValueToText,options:{}},me=[];for(const q of ae){if(q.type&&q.options){q.type===u.H.ValueToText?ee.options={...ee.options,...q.options}:me.push(q);continue}let ne;const se=parseFloat(q.text);if(de&&!isNaN(se)){const he=(0,o.m1)(se,de.steps);he&&he.color&&(ne=he.color)}switch(q.type){case 1:q.value!=null&&(q.value==="null"?me.push({type:u.H.SpecialValue,options:{match:u.e.Null,result:{text:q.text,color:ne}}}):ee.options[String(q.value)]={text:q.text,color:ne});break;case 2:me.push({type:u.H.RangeToText,options:{from:+q.from,to:+q.to,result:{text:q.text,color:ne}}});break}}return Object.keys(ee.options).length>0&&me.unshift(ee),me}function le(ae){return(ae.type==="timeseries"||ae.type==="xychart")&&ae.options.tooltipOptions&&(ae.options={...ae.options,tooltip:ae.options.tooltipOptions},delete ae.options.tooltipOptions),ae}function fe(ae){return ae.type==="timeseries"&&ae.fieldConfig?.defaults.custom?.axisPlacement===g.LB.Hidden&&(ae.fieldConfig={...ae.fieldConfig,overrides:[...ae.fieldConfig.overrides,{matcher:{id:d.mi.byType,options:r.fS.time},properties:[{id:"custom.axisPlacement",value:g.LB.Auto}]}]}),ae}},82302:(Y,T,e)=>{"use strict";e.d(T,{f:()=>w});var t=e(82897),n=e(53376),i=e(50444),s=e(77258),l=e(67483),f=e(35645),u=e(82378),o=e(16514),d=e(84952),r=e(82002);function m(L){return(0,t.isArray)(L)?L.map(m):(0,t.isPlainObject)(L)?Object.keys(L).sort().reduce((V,H)=>{const j=L[H];return j!=null&&(V[H]=m(j)),V},{}):L}var c=e(22323),p=e(85803),g=e(87095),y=e(27876),E=e(45984),v=e(77582),h=e(3153),P=e(10672),a=e(92624),C=e(19349),D=e(86899);const b=new Set(["gridPos","title","description","transparent"]);function M(L,V){const H=[],j={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:H};let A=0;const _=new Map;for(let k of V){let{id:Q}=k;Q||(A||(A=R([L,V])),Q=A++,k={...k,id:Q}),_.set(Q,k)}for(const k of L){const Q=_.get(k.id);if(!Q){j.changed=!0,j.actions.remove.push(k.id),k.destroy();continue}if(_.delete(k.id),Q===k){H.push(k),j.actions.noop.push(k.id);continue}if(k.type===Q.type){const Z=k.getSaveModel();let oe=!0,G=!1;for(const[le,fe]of Object.entries(Q))if(!(0,t.isEqualWith)(fe,Z[le],x))if(j.changed=!0,oe=!1,b.has(le))k[le]=fe,G=!0;else{G=!1;break}if(oe){H.push(k),j.actions.noop.push(k.id);continue}if(G){H.push(k),j.actions.update.push(k.id);continue}}k.destroy();const re=new D.r(Q);re.key=`${re.id}-update-${Date.now()}`,H.push(re),j.changed=!0,j.actions.replace.push(k.id)}for(const k of _.values())H.push(new D.r(k)),j.changed=!0,j.actions.add.push(k.id);return j}function x(L,V){if(L==null&&(V===1/0||V===-1/0||V==null)||V==null&&(L===1/0||L===-1/0||L==null))return!0}function R(L){let V=0;for(const H of L)for(const j of H)j.id>V&&(V=j.id);return V+1}var S=e(7592),O=e(96161);function U(L,V){return L.repeatDirection===d.yM?!1:V.gridPos.x>=L.gridPos.x+L.gridPos.w&&V.gridPos.y===L.gridPos.y}function I(L){for(const V of L)if(delete V.scopedVars,V.panels?.length)for(const H of V.panels)delete H.scopedVars}const F=class{constructor(L,V,H){this.timeRangeUpdatedDuringEdit=!1,this.getVariablesFromState=H?.getVariablesFromState??g.gt,this.events=new i.F,this.id=L.id||null,this.uid=L.uid||null,this.revision=L.revision??void 0,this.title=L.title??"No Title",this.description=L.description,this.tags=L.tags??[],this.style=L.style??"dark",this.timezone=L.timezone??"",this.weekStart=L.weekStart??"",this.editable=L.editable!==!1,this.graphTooltip=L.graphTooltip||0,this.time=L.time??{from:"now-6h",to:"now"},this.timepicker=L.timepicker??{},this.liveNow=Boolean(L.liveNow),this.templating=this.ensureListExist(L.templating),this.annotations=this.ensureListExist(L.annotations),this.refresh=L.refresh||"",this.snapshot=L.snapshot,this.schemaVersion=L.schemaVersion??0,this.fiscalYearStartMonth=L.fiscalYearStartMonth??0,this.version=L.version??0,this.links=L.links??[],this.gnetId=L.gnetId||null,this.panels=(0,t.map)(L.panels??[],j=>new O.rY(j)),this.ensurePanelsHaveUniqueIds(),this.formatDate=this.formatDate.bind(this),this.resetOriginalVariables(!0),this.resetOriginalTime(),this.initMeta(V),this.updateSchema(L),(H?.autoMigrateOldPanels||!f.v.angularSupportEnabled||f.v.featureToggles.autoMigrateOldPanels)&&this.panels.forEach(j=>{const A=O.G7[j.type];!j.autoMigrateFrom&&A&&(j.autoMigrateFrom=j.type,j.type=A)}),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new n.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(v.h$.subscribe(P.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(v.h$.subscribe(P.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(v.h$.subscribe(P.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some(V=>V.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:o.Jx,enable:!0,hide:!0,builtIn:1})}initMeta(L){L=L||{},L.canShare=L.canShare!==!1,L.canSave=L.canSave!==!1,L.canStar=L.canStar!==!1,L.canEdit=L.canEdit!==!1,L.canDelete=L.canDelete!==!1,L.showSettings=L.canEdit,L.canMakeEditable=L.canSave&&!this.editable,L.hasUnsavedFolderChange=!1,this.editable||(L.canEdit=!1,L.canDelete=!1,L.canSave=!1),this.meta=L}getSaveModelClone(L){const V=(0,t.defaults)(L||{},{saveVariables:!0,saveTimerange:!0});let H={};for(const j in this)F.nonPersistedProperties[j]||!this.hasOwnProperty(j)||(H[j]=(0,t.cloneDeep)(this[j]));return this.updateTemplatingSaveModelClone(H,V),V.saveTimerange||(H.time=this.originalTime),H.panels=this.getPanelSaveModels(),H=m(H),H.getVariables=()=>H.templating.list,H}updatePanels(L){const V=M(this.panels,L??[]);return V.changed&&(this.panels=V.panels??[],this.sortPanelsByGridPos(),this.events.publish(new E._B)),V}getPanelSaveModels(){return this.panels.filter(L=>this.isSnapshotTruthy()||!(L.type==="add-panel"||L.repeatPanelId||L.repeatedByRow)).map(L=>{if(L.libraryPanel){const{id:V,title:H,libraryPanel:j,gridPos:A}=L;return{id:V,title:H,gridPos:A,libraryPanel:{uid:j.uid,name:j.name}}}return this.panelInEdit&&this.panelInEdit.id===L.id?this.panelInEdit.getSaveModel():L.getSaveModel()}).map(L=>(this.isSnapshotTruthy()||(delete L.scopedVars,L.type==="row"&&L.panels&&L.panels.length>0&&(L.panels=L.panels.filter(V=>!V.repeatPanelId).map(V=>(delete V.scopedVars,V)))),L))}updateTemplatingSaveModelClone(L,V){const H=this.originalTemplating,j=this.getVariablesFromState(this.uid);if(L.templating={list:j.map(A=>c.z.get(A.type).getSaveModel(A,V.saveVariables))},!V.saveVariables)for(const A of L.templating.list){const _=H.find(({name:k,type:Q})=>k===A.name&&Q===A.type);_&&(A.type==="adhoc"?A.filters=_.filters:A.current=_.current)}}timeRangeUpdated(L){this.events.publish(new u.md(L)),(0,h.WI)((0,p.DU)(this.uid,L)),this.panelInEdit&&(this.timeRangeUpdatedDuringEdit=!0)}startRefresh(L={refreshAll:!0,panelIds:[]}){if(this.events.publish(new u.U5),this.lastRefresh=Date.now(),this.panelInEdit&&(L.refreshAll||L.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}for(const V of this.panels)!this.otherPanelInFullscreen(V)&&(L.refreshAll||L.panelIds.includes(V.id))&&V.refresh()}render(){this.events.publish(new E._z);for(const L of this.panels)L.render()}panelInitialized(L){const V=L.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(L)&&!V&&L.refresh()}otherPanelInFullscreen(L){return(this.panelInEdit||this.panelInView)&&!(L.isViewing||L.isEditing)}initEditPanel(L){return(0,C.$t)().stopAutoRefresh(),this.panelInEdit=L.getEditClone(),this.timeRangeUpdatedDuringEdit=!1,this.panelInEdit}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,C.$t)().resumeAutoRefresh(),(this.panelsAffectedByVariableChange||this.timeRangeUpdatedDuringEdit)&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange??[],refreshAll:this.timeRangeUpdatedDuringEdit}),this.panelsAffectedByVariableChange=null,this.timeRangeUpdatedDuringEdit=!1)}initViewPanel(L){this.panelInView=L,L.setIsViewing(!0)}exitViewPanel(L){this.panelInView=void 0,L.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveUniqueIds(){const L=new Set;let V=this.getNextPanelId();for(const H of this.panelIterator())(!H.id||L.has(H.id))&&(H.id=V++),L.add(H.id)}ensureListExist(L={}){return L.list??=[],L}getNextPanelId(){let L=0;for(const V of this.panelIterator())V.id>L&&(L=V.id);return L+1}*panelIterator(){for(const L of this.panels){yield L;const V=L.panels??[];for(const H of V)yield H}}forEachPanel(L){for(let V=0;V<this.panels.length;V++)L(this.panels[V],V)}getPanelById(L){return this.panelInEdit&&this.panelInEdit.id===L?this.panelInEdit:this.panels.find(V=>V.id===L)??null}canEditPanel(L){return Boolean(this.meta.canEdit&&L&&!L.repeatPanelId&&L.type!=="row")}canEditPanelById(L){return this.canEditPanel(this.getPanelById(L))}addPanel(L){L.id=this.getNextPanelId(),this.panels.unshift(new O.rY(L)),this.sortPanelsByGridPos(),this.events.publish(new E._B)}updateMeta(L){this.meta={...this.meta,...L},this.events.publish(new E.hS)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((L,V)=>L.gridPos.y===V.gridPos.y?L.gridPos.x-V.gridPos.x:L.gridPos.y-V.gridPos.y)}clearUnsavedChanges(){for(const L of this.panels)L.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0)}hasUnsavedChanges(){const L=this.panels.find(V=>V.hasChanged);return Boolean(L)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;I(this.panels);const L=this.panels.filter(V=>(!V.repeat||V.repeatedByRow)&&V.repeatPanelId);(0,t.pull)(this.panels,...L),L.map(V=>V.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables()||this.panelInView)){this.cleanUpRepeats();for(let L=0;L<this.panels.length;L++){const V=this.panels[L];V.repeat&&this.repeatPanel(V,L)}this.sortPanelsByGridPos(),this.events.publish(new E._B)}}cleanUpRowRepeats(L){const V=L.map(j=>j.id),H=L.filter(j=>!j.repeat&&j.repeatPanelId&&V.includes(j.repeatPanelId));(0,t.pull)(L,...H),(0,t.pull)(this.panels,...H)}processRowRepeats(L){if(this.isSnapshotTruthy()||!this.hasVariables())return;let V=L.panels??[];if(!L.collapsed){const H=this.panels.findIndex(j=>j.id===L.id);V=this.getRowPanels(H)}this.cleanUpRowRepeats(V);for(const H of V)if(H.repeat){const j=this.panels.findIndex(A=>A.id===H.id);this.repeatPanel(H,j)}}getPanelRepeatClone(L,V,H){if(V===0)return L;const j=L.getSaveModel();j.id=this.getNextPanelId();const A=new O.rY(j);return this.panels.splice(H+V,0,A),A.repeatPanelId=L.id,A.repeat=void 0,this.panelInView?.id===A.id&&(A.setIsViewing(!0),this.panelInView=A),A}getRowRepeatClone(L,V,H){if(V===0){if(!L.collapsed){const k=this.getRowPanels(H);L.panels=k}return L}const j=new O.rY(L.getSaveModel());let A,_;return L.collapsed?(A=(0,t.cloneDeep)(L.panels)??[],j.panels=A,_=H+V):(A=this.getRowPanels(H),j.panels=A.map(k=>k.getSaveModel()),_=H+(A.length+1)*V),this.panels.splice(_,0,j),this.updateRepeatedPanelIds(j),j}repeatPanel(L,V){const H=this.getPanelRepeatVariable(L);if(!H)return;if(L.type==="row"){this.repeatRow(L,V,H);return}const j=this.getSelectedVariableOptions(H),A=L.maxPerRow||4;let _=0,k=L.gridPos.y;for(let re=0;re<j.length;re++){const Z=j[re];let oe;oe=this.getPanelRepeatClone(L,re,V),oe.scopedVars??={},oe.scopedVars[H.name]=Z,L.repeatDirection===d.OA?(re>0&&(k+=oe.gridPos.h),oe.gridPos.y=k):(oe.gridPos.w=Math.max(d.cz/j.length,d.cz/A),oe.gridPos.x=_,oe.gridPos.y=k,_+=oe.gridPos.w,_+oe.gridPos.w>d.cz&&(_=0,k+=oe.gridPos.h))}const Q=k-L.gridPos.y;if(Q>0){const re=V+j.length;for(const Z of this.panels.slice(re))U(L,Z)||(Z.gridPos.y+=Q)}}repeatRow(L,V,H){const j=this.getSelectedVariableOptions(H);let A=L.gridPos.y;function _(k,Q){k.scopedVars??={},k.scopedVars[H.name]=Q}for(let k=0;k<j.length;k++){const Q=j[k],re=this.getRowRepeatClone(L,k,V);_(re,Q);const Z=this.getRowHeight(re),oe=re.panels||[];let G;if(L.collapsed){for(const le of oe)_(le,Q),k>0&&this.updateRepeatedPanelIds(le,!0);re.gridPos.y+=k,A+=k,G=V+k+1}else{const le=V+(oe.length+1)*k+1;oe.forEach((fe,ae)=>{if(_(fe,Q),k>0){const de=new O.rY(fe);this.updateRepeatedPanelIds(de,!0),de.gridPos.y+=Z*k,this.panels.splice(le+ae,0,de)}}),re.panels=[],re.gridPos.y+=Z*k,A+=Z,G=le+oe.length}if(j.length>1)for(const le of this.panels.slice(G))le.gridPos.y+=A}}updateRepeatedPanelIds(L,V){return L.repeatPanelId=L.id,L.id=this.getNextPanelId(),V?L.repeatedByRow=!0:L.repeat=void 0,L}getSelectedVariableOptions(L){let V;return(0,a.HY)(L)?V=L.options.slice(1,L.options.length):V=(0,t.filter)(L.options,{selected:!0}),V}getRowHeight(L){if(!L.panels||L.panels.length===0)return 0;const V=L.gridPos.y,H=(0,t.map)(L.panels,"gridPos"),j=(0,t.maxBy)(H,A=>A.y+A.h);return j.y+j.h-V}removePanel(L){this.panels=this.panels.filter(V=>V!==L),this.events.publish(new E._B)}removeRow(L,V){(!V&&L.collapsed||V&&!L.collapsed)&&this.toggleRow(L),this.removePanel(L)}expandRows(){const L=this.panels.filter(V=>V.type==="row"&&V.collapsed);for(const V of L)this.toggleRow(V)}collapseRows(){const L=this.panels.filter(V=>V.type==="row"&&!V.collapsed);for(const V of L)this.toggleRow(V)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(L=>L.hide!==2)||this.annotations.list.some(L=>!L.hide)}getPanelInfoById(L){const V=this.panels.findIndex(H=>H.id===L);return V>=0?{panel:this.panels[V],index:V}:null}duplicatePanel(L){const V=L.getSaveModel();return V.id=this.getNextPanelId(),delete V.repeat,delete V.repeatIteration,delete V.repeatPanelId,delete V.scopedVars,V.alert&&delete V.thresholds,delete V.alert,L.gridPos.x+L.gridPos.w*2<=d.cz?V.gridPos.x+=L.gridPos.w:V.gridPos.y+=L.gridPos.h,this.addPanel(V),V}formatDate(L,V){return(0,s.dq)(L,{format:V,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const L of this.panels)L.destroy()}toggleRow(L){const V=(0,t.indexOf)(this.panels,L);if(!L.collapsed){const A=this.getRowPanels(V);(0,t.pull)(this.panels,...A),L.panels=A.map(_=>_.getSaveModel()),L.collapsed=!0,A.some(_=>_.hasChanged)&&L.configRev++,this.events.publish(new E._B);return}L.collapsed=!1;const H=L.panels??[],j=H.some(A=>A.repeat);if(H.length>0){const _=(H[0].gridPos.y??L.gridPos.y)-(L.gridPos.y+L.gridPos.h);let k=V+1,Q=L.gridPos.y;for(const Z of H)Z.gridPos.y??(Z.gridPos.y=L.gridPos.y),Z.gridPos.y-=_,this.panels.splice(k,0,new O.rY(Z)),k+=1,Q=Math.max(Q,Z.gridPos.y+Z.gridPos.h);const re=Q-L.gridPos.y-1;for(const Z of this.panels.slice(k))Z.gridPos.y+=re;L.panels=[],j&&this.processRowRepeats(L)}this.sortPanelsByGridPos(),this.events.publish(new E._B)}getRowPanels(L){const V=this.panels.slice(L+1),H=V.findIndex(A=>A.type==="row");return V.slice(0,H>=0?H:this.panels.length)}on(L,V){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(L,V)}off(L,V){console.log("DashboardModel.off is deprecated"),this.events.off(L,V)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(L){return(0,s.E8)(L,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:r.Vt?.user?.timezone}updateSchema(L){new S.o(this).updateSchema(L)}resetOriginalTime(){this.originalTime=(0,t.cloneDeep)(this.time)}hasTimeChanged(){const{time:L,originalTime:V}=this;return!((0,t.isEqual)(L,V)||(0,t.isEqual)((0,l.CQ)(L?.from),(0,l.CQ)(V?.from))&&(0,t.isEqual)((0,l.CQ)(L?.to),(0,l.CQ)(V?.to)))}resetOriginalVariables(L=!1){if(L){this.originalTemplating=this.cloneVariablesFrom(this.templating.list);return}this.originalTemplating=this.cloneVariablesFrom(this.getVariablesFromState(this.uid))}hasVariableValuesChanged(){return this.hasVariablesChanged(this.originalTemplating,this.getVariablesFromState(this.uid))}autoFitPanels(L,V){const H=Math.max(...this.panels.map(re=>re.gridPos.h+re.gridPos.y)),j=55,A=20;let _=L-j-A;V&&V!==y.KioskMode.TV&&(_+=j);const k=Math.floor(_/(d.K3+d.hD)),Q=H/k;for(const re of this.panels)re.gridPos.y=Math.round(re.gridPos.y/Q)||1,re.gridPos.h=Math.round(re.gridPos.h/Q)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(y.CoreEvents.nq)}getPanelByUrlId(L){const V=parseInt(L??"0",10),H=this.panels.filter(j=>j.collapsed);for(const j of H)j.panels?.some(_=>_.id===V)&&this.toggleRow(j);return this.getPanelById(V)}toggleLegendsForAll(){const L=this.panels.filter(K),V=L.filter(A=>A.legend.show).length,H=L.length-V,j=V>=H;for(const A of L)A.legend.show=!j,A.render()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(L){let V=!0;return r.Vt.accessControlEnabled()&&(L?V=!!this.meta.annotationsPermissions?.dashboard.canEdit:V=!!this.meta.annotationsPermissions?.organization.canEdit),this.canEditDashboard()&&V}canDeleteAnnotations(L){let V=!0;return r.Vt.accessControlEnabled()&&(L?V=!!this.meta.annotationsPermissions?.dashboard.canDelete:V=!!this.meta.annotationsPermissions?.organization.canDelete),V&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(V=>V.builtIn===1)?.enable===!1||!this.canEditDashboard()?!1:!r.Vt.accessControlEnabled()||Boolean(this.meta.annotationsPermissions?.dashboard.canAdd)}canEditDashboard(){return Boolean(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(L,V){!(0,t.isEqual)(L?.gridPos,V?.gridPos)&&this.events.publish(new E._B)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(L){return this.getVariablesFromState(this.uid).find(V=>V.name===L.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(L,V){if(L.length!==V.length)return!1;const H=V.map(j=>({name:j.name,type:j.type,current:(0,t.cloneDeep)(j.current),filters:(0,t.cloneDeep)(j.filters)}));return!(0,t.isEqual)(H,L)}cloneVariablesFrom(L){return L.map(V=>({name:V.name,type:V.type,current:(0,t.cloneDeep)(V.current),filters:(0,t.cloneDeep)(V.filters)}))}variablesTimeRangeProcessDoneHandler(L){const V=L.payload.variableIds.length>0;this.variablesChangedHandler(new P.x9({panelIds:[],refreshAll:!0}),V)}variablesChangedHandler(L,V=!0){if(V&&this.processRepeats(),L.payload.refreshAll||(0,C.$t)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=L.payload.panelIds.filter(H=>H!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(L.payload)}variablesChangedInUrlHandler(L){this.templateVariableValueUpdated(),this.startRefresh(L.payload)}};let w=F;w.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0,timeRangeUpdatedDuringEdit:!0};function K(L){return Boolean(L.legend)}},96161:(Y,T,e)=>{"use strict";e.d(T,{G7:()=>v,Jg:()=>C,rY:()=>P});var t=e(82897),n=e.n(t),i=e(44288),s=e(50444),l=e(206),f=e(16936),u=e(82378),o=e(20308),d=e(47694),r=e(55935),m=e(99822),c=e(45984),p=e(49003);const g={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0,isNew:!0},y={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,queryCachingTTL:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},E={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},title:""},v={graph:"timeseries","table-old":"table",singlestat:"stat","grafana-singlestat-panel":"stat","grafana-piechart-panel":"piechart","grafana-worldmap-panel":"geomap"},h={"heatmap-new":"heatmap"};class P{constructor(b){this.datasource=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.cachedPluginOptions={},this.events=new s.F,this.restoreModel(b),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,i.Z)()}restoreModel(b){for(const x in this)g[x]||!this.hasOwnProperty(x)||b[x]||typeof this[x]!="function"&&typeof this[x]!="symbol"&&delete this[x];for(const x in b)this[x]=b[x];const M=h[this.type];M&&(this.autoMigrateFrom=this.type,this.type=M),(0,t.defaultsDeep)(this,(0,t.cloneDeep)(E)),this.ensureQueryIds()}generateNewKey(){this.key=(0,i.Z)()}ensureQueryIds(){if(this.targets&&(0,t.isArray)(this.targets))for(const b of this.targets)b.refId||(b.refId=(0,m.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(b){this.options=b,this.configRev++,this.events.publish(new c.Wj),this.render()}updateFieldConfig(b){this.fieldConfig=b,this.configRev++,this.events.publish(new c.Wj),this.resendLastResult(),this.render()}getSaveModel(){const b={};for(const M in this)g[M]||!this.hasOwnProperty(M)||(0,t.isEqual)(this[M],E[M])||(b[M]=(0,t.cloneDeep)(this[M]));return this.type==="row"&&this.panels&&this.panels.length>0&&(b.panels=this.panels.map(M=>{if(M.libraryPanel){const{id:x,title:R,libraryPanel:S,gridPos:O}=M;return{id:x,title:R,gridPos:O,libraryPanel:{uid:S.uid,name:S.name}}}return M})),b}setIsViewing(b){this.isViewing=b}updateGridPos(b,M=!0){b.x===this.gridPos.x&&b.y===this.gridPos.y&&b.h===this.gridPos.h&&b.w===this.gridPos.w||(this.gridPos.x=b.x,this.gridPos.y=b.y,this.gridPos.w=b.w,this.gridPos.h=b.h,M&&this.configRev++,this.render())}runAllPanelQueries({dashboardUID:b,dashboardTimezone:M,timeData:x,width:R,publicDashboardAccessToken:S}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardUID:b,publicDashboardAccessToken:S,timezone:M,timeRange:x.timeRange,timeInfo:x.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(R),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,queryCachingTTL:this.queryCachingTTL,transformations:this.transformations,app:this.isEditing?l.zj.PanelEditor:this.isViewing?l.zj.PanelViewer:l.zj.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new u.U5)}render(){this.hasRefreshed?this.events.publish(new c._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((b,M)=>g[M]||y[M]?b:{...b,[M]:this[M]},{})}restorePanelOptions(b){const M=this.cachedPluginOptions[b];M&&(Object.keys(M.properties).map(x=>{this[x]=M.properties[x]}),this.fieldConfig=(0,f.__)(this.fieldConfig,M.fieldConfig))}applyPluginOptionDefaults(b,M){const x=(0,f.d4)({plugin:b,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:M});this.fieldConfig=x.fieldConfig,this.options=x.options}pluginLoaded(b){this.plugin=b;const M=a(b);if(this.autoMigrateFrom){const x=v[this.autoMigrateFrom]!=null,R=this.getOptionsToRemember(),S=this.autoMigrateFrom,O=this.type;this.clearPropertiesBeforePluginChange(),this.type=O,this.plugin=b,this.callPanelTypeChangeHandler(b,S,R,x)}b.onPanelMigration&&M!==this.pluginVersion&&(this.options=b.onPanelMigration(this),this.pluginVersion=M),this.applyPluginOptionDefaults(b,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const b of(0,t.keys)(this))y[b]||delete this[b];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,f.aS)(this.fieldConfig.overrides,f._k)}}callPanelTypeChangeHandler(b,M,x,R){if(b.onPanelTypeChanged){const S=R?{angular:x}:x.options;Object.assign(this.options,b.onPanelTypeChanged(this,M,S,this.fieldConfig))}}changePlugin(b){const M=b.meta.id,x=this.getOptionsToRemember(),R=this.fieldConfig,S=this.type,O=this.isAngularPlugin()||Boolean(v[S]);this.cachedPluginOptions[S]={properties:x,fieldConfig:R},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(M),this.callPanelTypeChangeHandler(b,S,x,O),this.type=M,this.plugin=b,this.configRev++,this.applyPluginOptionDefaults(b,!0),b.onPanelMigration&&(this.pluginVersion=a(b))}updateQueries(b){const{dataSource:M}=b;this.datasource={uid:M.uid,type:M.type},this.cacheTimeout=b.cacheTimeout,this.queryCachingTTL=b.queryCachingTTL,this.timeFrom=b.timeRange?.from,this.timeShift=b.timeRange?.shift,this.hideTimeOverride=b.timeRange?.hide,this.interval=b.minInterval,this.maxDataPoints=b.maxDataPoints,this.targets=b.queries,this.configRev++,this.events.publish(new c.pO)}addQuery(b){b=b||{refId:"A"},b.refId=(0,m.Hs)(this.targets),this.targets.push(b),this.configRev++}changeQuery(b,M){b.refId=this.targets[M].refId,this.configRev++,this.targets=this.targets.map((x,R)=>R===M?b:x)}getEditClone(){const b=this.getSaveModel(),M=new P(b);M.isEditing=!0,M.plugin=this.plugin;const x=this.getQueryRunner();return M.getQueryRunner().useLastResultFrom(x),M}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:d.ZP.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new p.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(b){this.transformations=b,this.resendLastResult(),this.configRev++,this.events.publish(new c.Xw)}setProperty(b,M){this[b]=M,this.configRev++,b==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(b,M,x){const R=this.getQueryRunner().getLastRequest(),S=Object.assign({},this.scopedVars,R?.scopedVars,M);return(0,o.J)().replace(b,S,x)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(b){for(const[M,x]of Object.entries(b.model)){switch(M){case"id":case"gridPos":case"libraryPanel":continue}this[M]=x}this.libraryPanel=b}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function a(D){return D&&D.meta.info.version?D.meta.info.version:d.ZP.buildInfo.version}function C(D){const b={};return Object.entries(D).filter(([M,x])=>!g[M]&&D.hasOwnProperty(M)&&!(0,t.isEqual)(x,E[M])).forEach(([M,x])=>{b[M]=x}),(0,r.Xh)(b)}},86977:(Y,T,e)=>{"use strict";e.d(T,{$j:()=>E,Qk:()=>g,RF:()=>p,Yq:()=>y,f4:()=>a,fG:()=>v,lw:()=>h,qm:()=>m,tM:()=>P});var t=e(54899),n=e(659),i=e(60499),s=e(30992),l=e(46732),f=e(54294),u=e(85805),o=e(85803),d=e(19349),r=e(58790);function m(C){return async D=>{const b=await(0,t.i)().get(`/api/dashboards/id/${C}/permissions`);D((0,r.O0)(b))}}function c(C){return{userId:C.userId,teamId:C.teamId,role:C.role,permission:C.permission}}function p(C,D,b){return async(M,x)=>{const{dashboard:R}=x(),S=[];for(const O of R.permissions){if(O.inherited)continue;const U=c(O);D===O&&(U.permission=b),S.push(U)}await(0,t.i)().post(`/api/dashboards/id/${C}/permissions`,{items:S}),await M(m(C))}}function g(C,D){return async(b,M)=>{const x=M().dashboard,R=[];for(const S of x.permissions)S.inherited||S===D||R.push(c(S));await(0,t.i)().post(`/api/dashboards/id/${C}/permissions`,{items:R}),await b(m(C))}}function y(C,D){return async(b,M)=>{const{dashboard:x}=M(),R=[];for(const S of x.permissions)S.inherited||R.push(c(S));R.push({userId:D.userId,teamId:D.teamId,role:D.role,permission:D.permission}),await(0,t.i)().post(`/api/dashboards/id/${C}/permissions`,{items:R}),await b(m(C))}}function E(C,D){return async b=>{await(0,t.i)().post("/api/dashboards/import",C),b((0,n.$l)((0,i.AT)("Dashboard Imported",D))),b((0,u.m3)())}}function v(C){return async D=>{await(0,t.i)().delete(`/api/dashboards/uid/${C}`),D((0,u.m3)())}}const h=()=>(C,D)=>{const M=D().dashboard.getModel();M&&(M.destroy(),C((0,o.wX)(M.uid))),(0,d.$t)().stopAutoRefresh(),C((0,r.sG)()),C((0,l.Vl)()),s.H.leave()},P=C=>D=>{D((0,f.YT)(C)),(0,d.$t)().refreshTimeModel()},a=C=>D=>{D((0,f.zW)(C)),(0,d.$t)().refreshTimeModel()}},86899:(Y,T,e)=>{"use strict";e.d(T,{f:()=>t.f,r:()=>n.rY});var t=e(82302),n=e(96161)},58790:(Y,T,e)=>{"use strict";e.d(T,{Nv:()=>c,O0:()=>o,Rd:()=>y,ZP:()=>v,dS:()=>m,jA:()=>r,sG:()=>p,sf:()=>d,tq:()=>g});var t=e(62992),n=e(30670),i=e(2024),s=e(27876),l=e(82302);const f={initPhase:s.DashboardInitPhase.NotStarted,getModel:()=>null,permissions:[],initError:null,initialDatasource:void 0},u=(0,t.oM)({name:"dashboard",initialState:f,reducers:{loadDashboardPermissions:(h,P)=>{h.permissions=(0,i.A)(P.payload)},dashboardInitFetching:h=>{h.initPhase=s.DashboardInitPhase.Fetching},dashboardInitServices:h=>{h.initPhase=s.DashboardInitPhase.Services},dashboardInitCompleted:(h,P)=>{h.getModel=()=>P.payload,h.initPhase=s.DashboardInitPhase.Completed},dashboardInitFailed:(h,P)=>{h.initPhase=s.DashboardInitPhase.Failed,h.initError=P.payload,h.getModel=()=>new l.f({...n.Ql,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:h=>{h.initPhase=s.DashboardInitPhase.NotStarted,h.initError=null,h.getModel=()=>null},addPanel:(h,P)=>{},setInitialDatasource:(h,P)=>{h.initialDatasource=P.payload}}}),{loadDashboardPermissions:o,dashboardInitFetching:d,dashboardInitFailed:r,dashboardInitCompleted:m,dashboardInitServices:c,cleanUpDashboard:p,addPanel:g,setInitialDatasource:y}=u.actions,v={dashboard:u.reducer}},663:(Y,T,e)=>{"use strict";e.d(T,{Dh:()=>r,LU:()=>u,L_:()=>o,RB:()=>d,uZ:()=>m});var t=e(82897),n=e.n(t),i=e(47694),s=e(84952),l=e(58379),f=e(2476);function u(c,p){const g={type:"timeseries",title:"Panel Title",gridPos:(0,f.lg)(c),datasource:p?{uid:p}:null,isNew:!0};return c.addPanel(g),g.id}function o(c){const p={type:"row",title:"Row title",gridPos:{x:0,y:0}};c.addPanel(p)}function d(c){const p={type:"add-library-panel",gridPos:(0,f.lg)(c)};c.addPanel(p)}function r(c,p){if(!p)return;const g=(0,f.lg)(c),y={type:p.id,title:"Panel Title",gridPos:{x:g.x,y:g.y,w:p.defaults.gridPos.w,h:p.defaults.gridPos.h}};p.defaults&&((0,t.defaults)(y,p.defaults),y.title=p.defaults.title,l.Z.delete(s.zF)),c.addPanel(y)}function m(){const c=(0,t.chain)(i.ZP.panels).filter({hideFromList:!1}).map(g=>g).value(),p=l.Z.get(s.zF);if(p){const g=JSON.parse(p),y=(0,t.find)(c,{id:g.type});if(y){const E=(0,t.cloneDeep)(y);return E.name=g.title,E.sort=-1,{...E,defaults:{...g}}}}}},2476:(Y,T,e)=>{"use strict";e.d(T,{Kq:()=>D,Po:()=>C,W1:()=>R,WJ:()=>h,bY:()=>a,jN:()=>P,lg:()=>U,oe:()=>b,qw:()=>x});var t=e(82897),n=e.n(t),i=e(4063),s=e(47891),l=e(47406),f=e(20308),u=e(18271),o=e(47694),d=e(84952),r=e(58379),m=e(53818),c=e(96161),p=e(76647),g=e(81283),y=e(32294),E=e(3153),v=e(45984);const h=(I,F,w)=>{if(w!==!1){const K=F.alert&&!o.ZP.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,L=F.alert?"YES":void 0;u.Z.publish(new v.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:K,icon:"trash-alt",confirmText:L,yesText:"Remove",onConfirm:()=>h(I,F,!1)}));return}I.removePanel(F),(0,E.WI)((0,y.qj)(F.key))},P=(I,F)=>{I.duplicatePanel(F)},a=I=>{let F=I;I instanceof c.rY&&(F=I.getSaveModel()),r.Z.set(d.zF,JSON.stringify(F)),u.Z.emit(i.SI.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},C=(I,F)=>{u.Z.publish(new v.Dn({component:m.ShareModal,props:{dashboard:I,panel:F}}))},D=(I,F)=>{u.Z.publish(new v.Dn({component:p.c,props:{panel:F,initialFolderUid:I.meta.folderUid,isOpen:!0}}))},b=I=>{u.Z.publish(new v.Dn({component:g.i,props:{onConfirm:()=>I.unlinkLibraryPanel(),isOpen:!0}}))},M=I=>{I.refresh()},x=I=>{const F={...I.options};F.legend.showLegend===!0?F.legend.showLegend=!1:F.legend.showLegend=!0,I.updateOptions(F)};function R(I,F){const w={timeInfo:"",timeRange:F};if(I.timeFrom){const K=(0,f.J)().replace(I.timeFrom,I.scopedVars),L=s.describeTextRange(K);if(L.invalid)return w.timeInfo="invalid time override",w;if((0,t.isString)(F.raw.from)){const V=l.parse(L.from);w.timeInfo=L.display,w.timeRange={from:V,to:l.parse(L.to),raw:{from:L.from,to:L.to}}}}if(I.timeShift){const K=(0,f.J)().replace(I.timeShift,I.scopedVars);if(s.describeTextRange(K).invalid)return w.timeInfo="invalid timeshift",w;const V="-"+K;w.timeInfo+=" timeshift "+V;const H=l.parseDateMath(V,w.timeRange.from,!1),j=l.parseDateMath(V,w.timeRange.to,!0);w.timeRange={from:H,to:j,raw:{from:H,to:j}}}return I.hideTimeOverride&&(w.timeInfo=""),w}function S(I){const w=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return I.maxDataPoints?I.maxDataPoints:Math.ceil(w*(I.gridPos.w/24))}function O(I,F){const w=I.plugin&&I.plugin.noPadding?0:config.theme.panelPadding*2,K=I.hasTitle()?config.theme.panelHeaderHeight:0;return F-K-w-PANEL_BORDER}function U(I){for(const w of I.panelIterator())w.gridPos.y+=8;return{x:0,y:0,w:12,h:8}}},74124:(Y,T,e)=>{"use strict";e.d(T,{O:()=>i});var t=e(67483),n=e(47406);const i=(s,l)=>{const f={from:(0,t.v9)(s.from)?(0,t.CQ)(s.from):s.from,to:(0,t.v9)(s.to)?(0,t.CQ)(s.to):s.to},u=l?l.getTimezone():void 0;return{from:n.parse(f.from,!1,u,l?.fiscalYearStartMonth),to:n.parse(f.to,!0,u,l?.fiscalYearStartMonth),raw:f}}},3597:(Y,T,e)=>{"use strict";e.d(T,{n:()=>t});const t={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},41632:(Y,T,e)=>{"use strict";e.d(T,{Aq:()=>D,BX:()=>p,CT:()=>P,Ht:()=>c,MP:()=>l,Nu:()=>y,Ww:()=>o,ZP:()=>M,be:()=>f,fk:()=>v,iZ:()=>h,jS:()=>u,j_:()=>a,ng:()=>C,rl:()=>s,wZ:()=>d,yr:()=>g,zT:()=>r});var t=e(62992),n=e(89974);const i={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:n.l.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},s=(0,t.PH)("dataSources/dataSourceLoaded"),l=(0,t.PH)("dataSources/dataSourcesLoad"),f=(0,t.PH)("dataSources/dataSourcesLoaded"),u=(0,t.PH)("dataSources/dataSourceMetaLoaded"),o=(0,t.PH)("dataSources/dataSourcePluginsLoad"),d=(0,t.PH)("dataSources/dataSourcePluginsLoaded"),r=(0,t.PH)("dataSources/setDataSourcesSearchQuery"),m=(0,t.PH)("dataSources/setDataSourcesLayoutMode"),c=(0,t.PH)("dataSources/setDataSourceTypeSearchQuery"),p=(0,t.PH)("dataSources/setDataSourceName"),g=(0,t.PH)("dataSources/setIsDefault"),y=(0,t.PH)("dataSources/setIsSortAscending"),E=(x=i,R)=>l.match(R)?{...x,isLoadingDataSources:!0}:f.match(R)?{...x,isLoadingDataSources:!1,dataSources:R.payload,dataSourcesCount:R.payload.length}:s.match(R)?{...x,dataSource:R.payload}:r.match(R)?{...x,searchQuery:R.payload}:m.match(R)?{...x,layoutMode:R.payload}:o.match(R)?{...x,plugins:[],isLoadingDataSourcePlugins:!0}:d.match(R)?{...x,plugins:R.payload.plugins,categories:R.payload.categories,isLoadingDataSourcePlugins:!1}:c.match(R)?{...x,dataSourceTypeSearchQuery:R.payload}:u.match(R)?{...x,dataSourceMeta:R.payload}:p.match(R)?{...x,dataSource:{...x.dataSource,name:R.payload}}:g.match(R)?{...x,dataSource:{...x.dataSource,isDefault:R.payload}}:y.match(R)?{...x,isSortAscending:R.payload}:x,v={testingStatus:{},loadError:null,loading:!0,plugin:null},h=(0,t.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),P=(0,t.PH)("dataSourceSettings/initDataSourceSettingsFailed"),a=(0,t.PH)("dataSourceSettings/testDataSourceStarting"),C=(0,t.PH)("dataSourceSettings/testDataSourceSucceeded"),D=(0,t.PH)("dataSourceSettings/testDataSourceFailed"),M={dataSources:E,dataSourceSettings:(x=v,R)=>h.match(R)?{...x,plugin:R.payload,loadError:null,loading:!1}:P.match(R)?{...x,plugin:null,loadError:R.payload.message,loading:!1}:a.match(R)?{...x,testingStatus:{message:"Testing... this could take up to a couple of minutes",status:"info"}}:C.match(R)?{...x,testingStatus:{status:R.payload?.status,message:R.payload?.message,details:R.payload?.details}}:D.match(R)?{...x,testingStatus:{status:"error",message:R.payload?.message,details:R.payload?.details}}:x}},97934:()=>{"use strict"},30785:(Y,T,e)=>{"use strict";e.d(T,{L:()=>o});var t=e(9892),n=e(66111),i=e(72648),s=e(8581),l=e(90208),f=e(80760);const u={label:"Fixed color",value:"_____fixed_____"},o=r=>{const{value:m,context:c,onChange:p}=r,g="dark-green",y=(0,i.wW)(d),E=m?.field,v=Boolean(!E),h=(0,f.IX)(c.data),P=(0,f.nw)(h,E,u),a=(0,n.useCallback)(b=>{const M=b.value;if(M&&M!==u.value)p({...m,field:M});else{const x=m?.fixed??g;p({...m,field:void 0,fixed:x})}},[p,m]),C=(0,n.useCallback)(b=>{p({field:void 0,fixed:b??g})},[p]),D=v?u:P.find(b=>b.value===E);return n.createElement(n.Fragment,null,n.createElement("div",{className:y.container},n.createElement(s.Ph,{value:D,options:P,onChange:a,noOptionsMessage:"No fields found"}),v&&n.createElement("div",{className:y.picker},n.createElement(l.zH,{color:m?.fixed??g,onChange:C,enableNamedColors:!0}))))},d=r=>({container:t.css`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:t.css`
    padding-left: 8px;
  `})},26786:(Y,T,e)=>{"use strict";e.d(T,{E:()=>y});var t=e(9892),n=e(66111),i=e(72648),s=e(31403),l=e(11543),f=e(81764),u=e(46967),o=e(39604),d=e(56921),r=e(66120),m=e(16964),c=e(59961),p=e(92484),g=e(26260);const y=v=>{const{value:h,src:P,name:a,placeholder:C,onChange:D,onClear:b,mediaType:M,folderName:x,size:R,color:S}=v,O=(0,i.wW)(E),U=(0,i.l4)(),I=(0,n.createRef)(),F=n.createElement(g.Y,{onChange:D,value:h,mediaType:M,folderName:x});let w=P;!w&&h&&(w=(0,c.t)(h));const K=S&&{fill:U.visualization.getColorByName(S)},L=()=>h&&w?n.createElement(m.V,{src:w,className:O.icon,style:{...K}}):n.createElement(s.Qj,{variant:"primary",fill:"text",size:"sm"},"Set icon"),V=()=>n.createElement(l.Z,null,n.createElement(f._,{label:null,grow:!0},n.createElement(u.I,{value:a,placeholder:C,readOnly:!0,prefix:w&&n.createElement(m.V,{src:w,className:O.icon,style:{...K}}),suffix:n.createElement(s.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:b})})));return n.createElement(o.D,{content:F},(H,j,A)=>n.createElement(n.Fragment,null,I.current&&n.createElement(d.J,{...A,referenceElement:I.current,onMouseEnter:H,onKeyDown:_=>{(0,r.i)(_,j)}}),n.createElement("div",{ref:I,onClick:H,className:O.pointer},R===p.zc.SMALL&&L(),R===p.zc.NORMAL&&V())))},E=v=>({pointer:t.css`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:t.css`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},26260:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>V});var t=e(9892),n=e(29952),i=e(83962),s=e(86922),l=e(66111),f=e(54899),u=e(72648),o=e(31403),d=e(47694),r=e(92484),m=e(24799),c=e(30784),p=e(16964);function g({secondaryText:j="Drag and drop here or browse"}){const A=(0,u.wW)(E);return l.createElement("div",{className:A.iconWrapper},l.createElement("small",{className:A.small},j),l.createElement(o.zx,{type:"button",icon:"upload"},"Upload"))}const y=({mediaType:j,setFormData:A,setUpload:_,error:k})=>{const Q=(0,u.wW)(E),[re,Z]=(0,l.useState)(!1),[oe,G]=(0,l.useState)(""),le=()=>l.createElement(m.g,{label:"Preview"},l.createElement("div",{className:Q.iconPreview},j===r.DD.Icon&&l.createElement(p.V,{src:oe,className:Q.img}),j===r.DD.Image&&l.createElement("img",{src:oe,alt:"Preview of the uploaded file",className:Q.img}))),fe=de=>{fetch(`/api/storage/delete/upload/${de.file.name}`,{method:"DELETE"}).catch(ee=>console.error("cannot delete file",ee))},ae=j==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return l.createElement(c.Yo,{readAs:"readAsBinaryString",onFileRemove:fe,options:{accept:ae,multiple:!1,onDrop:de=>{let ee=new FormData;ee.append("file",de[0]),G(URL.createObjectURL(de[0])),Z(!0),A(ee),_(!0)}}},k.message!==""&&re?l.createElement("p",null,k.message):re?l.createElement(le,null):l.createElement(g,null))};function E(j,A){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:t.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${j.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${j.colors.border.medium};
      background-color: ${A?j.colors.background.secondary:j.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:t.css`
      margin: ${j.spacing(2,0,1)};
    `,small:t.css`
      color: ${j.colors.text.secondary};
      margin-bottom: ${j.spacing(2)};
    `,iconContainer:t.css`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:t.css`
      width: 238px;
      height: 198px;
      border: 1px solid ${j.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:t.css`
      width: 147px;
      height: 147px;
      fill: ${j.colors.text.primary};
    `}}var v=e(8581),h=e(14747),P=e(91162),a=e(89050),C=e(32436),D=e(7804);const b=(0,l.memo)(function(A){const{columnIndex:_,rowIndex:k,style:Q,data:re}=A,{cards:Z,columnCount:oe,onChange:G,selected:le}=re,fe=_+k*oe,ae=Z[fe],de=(0,u.l4)(),ee=M(de);return l.createElement("div",{style:Q},ae&&l.createElement("div",{key:ae.value,className:le===ae.value?(0,t.cx)(ee.card,ee.selected):ee.card,onClick:()=>G(ae.value)},ae.imgUrl.endsWith(".svg")?l.createElement(p.V,{src:ae.imgUrl,className:ee.img}):l.createElement("img",{src:ae.imgUrl,alt:"",className:ee.img}),l.createElement("h6",{className:ee.text},ae.label.slice(0,-4))))},C.wy),M=(0,D.B)(j=>({card:t.css`
      display: inline-block;
      width: 90px;
      height: 90px;
      margin: 0.75rem;
      margin-left: 15px;
      text-align: center;
      cursor: pointer;
      position: relative;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: 8px;
      padding-top: 6px;
      :hover {
        border-color: ${j.colors.action.hover};
        box-shadow: ${j.shadows.z2};
      }
    `,selected:t.css`
      border: 2px solid ${j.colors.primary.main};
      :hover {
        border-color: ${j.colors.primary.main};
      }
    `,img:t.css`
      width: 40px;
      height: 40px;
      object-fit: cover;
      vertical-align: middle;
      fill: ${j.colors.text.primary};
    `,text:t.css`
      color: ${j.colors.text.primary};
      white-space: nowrap;
      font-size: 12px;
      text-overflow: ellipsis;
      display: block;
      overflow: hidden;
    `,grid:t.css`
      border: 1px solid ${j.colors.border.medium};
    `})),x=j=>{const{onChange:A,cards:_,value:k}=j,Q=(0,u.l4)(),re=M(Q);return l.createElement(a.Z,{defaultWidth:680},({width:Z,height:oe})=>{const fe=Math.floor(Z/90),ae=Math.ceil(_.length/fe);return l.createElement(C.Ym,{width:Z,height:oe,columnCount:fe,columnWidth:90,rowCount:ae,rowHeight:90,itemData:{cards:_,columnCount:fe,onChange:A,selected:k},className:re.grid},b)})},R=j=>j===r.DD.Icon?[r.QS.Icon,r.QS.IOT,r.QS.Marker]:[r.QS.BG],S=(j,A)=>j.find(_=>A.startsWith(_.value))??j[0],O=j=>{const{value:A,mediaType:_,folderName:k,newValue:Q,setNewValue:re}=j,Z=(0,u.wW)(U),oe=R(_).map(se=>({label:se,value:se})),[G,le]=(0,l.useState)(),[fe,ae]=(0,l.useState)(S(oe,A?.length?A:k)),[de,ee]=(0,l.useState)([]),[me,q]=(0,l.useState)([]),ne=se=>{se?(se=se.toLowerCase(),q(de.filter(he=>he.search.includes(se)))):q(de)};return(0,l.useEffect)(()=>{const se=fe?.value;if(se){const he=_===r.DD.Icon?ue=>ue.name.endsWith(".svg"):ue=>ue.name.endsWith(".png")||ue.name.endsWith(".gif");(0,P.ak)().get("-- Grafana --").then(ue=>{ue.listFiles(se).subscribe({next:Te=>{const Ve=[];Te.forEach(ct=>{if(he(ct)){const Ie=ct.name.lastIndexOf(".");Ve.push({value:`${se}/${ct.name}`,label:ct.name,search:(Ie?ct.name.substring(0,Ie):ct.name).toLowerCase(),imgUrl:`public/${se}/${ct.name}`})}}),ee(Ve),q(Ve)}})})}},[_,fe]),l.createElement(l.Fragment,null,l.createElement(m.g,null,l.createElement(v.Ph,{options:oe,onChange:ae,value:fe,menuShouldPortal:!1})),l.createElement(m.g,null,l.createElement(h.H,{value:G??"",placeholder:"Search",onChange:se=>{ne(se),le(se)}})),me&&l.createElement("div",{className:Z.cardsWrapper},l.createElement(x,{cards:me,onChange:se=>re(se),value:Q})))},U=j=>({cardsWrapper:t.css`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var I=e(46967),F=e(64353),w=e(59961);const K=j=>{const{newValue:A,setNewValue:_,mediaType:k}=j,Q=(0,u.wW)(L),re=(0,w.t)(A);let Z=A?.substring(A.lastIndexOf("/")+1,A.lastIndexOf("."));return Z.length>20&&(Z=Z.substring(0,20)+"..."),l.createElement(l.Fragment,null,l.createElement(m.g,null,l.createElement(I.I,{onChange:oe=>_(oe.currentTarget.value),value:A})),l.createElement("div",{className:Q.iconContainer},l.createElement(m.g,{label:"Preview"},l.createElement("div",{className:Q.iconPreview},k===r.DD.Icon&&l.createElement(p.V,{src:re,className:Q.img}),k===r.DD.Image&&A&&l.createElement("img",{src:re,alt:"Preview of the selected URL",className:Q.img}))),l.createElement(F._,null,Z)))},L=j=>({iconContainer:t.css`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:t.css`
    width: 238px;
    height: 198px;
    border: 1px solid ${j.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:t.css`
    width: 147px;
    height: 147px;
    fill: ${j.colors.text.primary};
  `}),V=j=>{const{value:A,onChange:_,mediaType:k,folderName:Q}=j,re=(0,u.wW)(H),Z=()=>{_(A)},oe=(0,l.createRef)(),{dialogProps:G}=(0,n.R)({},oe),{overlayProps:le}=(0,s.Ir)({onClose:Z,isDismissable:!0,isOpen:!0},oe),fe=A&&A.includes("://"),[ae,de]=(0,l.useState)(A??""),[ee,me]=(0,l.useState)(fe?r.hQ.URL:r.hQ.Folder),[q,ne]=(0,l.useState)(new FormData),[se,he]=(0,l.useState)(!1),[ue,Te]=(0,l.useState)({message:""}),Ve=at=>`${re.resourcePickerPopoverTab} ${ee===at&&re.resourcePickerPopoverActiveTab}`,ct=()=>l.createElement(O,{value:A,mediaType:k,folderName:Q,newValue:ae,setNewValue:de}),Ie=()=>l.createElement(K,{newValue:ae,setNewValue:de,mediaType:k}),Ke=()=>l.createElement(y,{mediaType:k,setFormData:ne,setUpload:he,newValue:ae,error:ue}),Ge=()=>{switch(ee){case r.hQ.Folder:return ct();case r.hQ.URL:return Ie();case r.hQ.Upload:return Ke();default:return ct()}};return l.createElement(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},l.createElement("section",{ref:oe,...le,...G},l.createElement("div",{className:re.resourcePickerPopover},l.createElement("div",{className:re.resourcePickerPopoverTabs},l.createElement("button",{className:Ve(r.hQ.Folder),onClick:()=>me(r.hQ.Folder)},"Folder"),l.createElement("button",{className:Ve(r.hQ.URL),onClick:()=>me(r.hQ.URL)},"URL")),l.createElement("div",{className:re.resourcePickerPopoverContent},Ge(),l.createElement("div",{className:re.buttonRow},l.createElement(o.zx,{variant:"secondary",onClick:()=>Z(),fill:"outline"},"Cancel"),l.createElement(o.zx,{variant:ae&&ae!==A?"primary":"secondary",onClick:()=>{se?fetch("/api/storage/upload",{method:"POST",body:q}).then(at=>{if(at.status>=400){at.json().then(dt=>Te(dt));return}else return at.json()}).then(at=>{(0,f.i)().get(`api/storage/read/${at.path}`).then(()=>de(`${d.vc.appUrl}api/storage/read/${at.path}`)).then(()=>_(`${d.vc.appUrl}api/storage/read/${at.path}`))}).catch(at=>console.error(at)):_(ae)}},"Select"))))))},H=j=>({resourcePickerPopover:t.css`
    border-radius: ${j.shape.borderRadius()};
    box-shadow: ${j.shadows.z3};
    background: ${j.colors.background.primary};
    border: 1px solid ${j.colors.border.weak};
  `,resourcePickerPopoverTab:t.css`
    width: 50%;
    text-align: center;
    padding: ${j.spacing(1,0)};
    background: ${j.colors.background.secondary};
    color: ${j.colors.text.secondary};
    font-size: ${j.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:t.css`
    color: ${j.colors.text.primary};
    font-weight: ${j.typography.fontWeightMedium};
    background: ${j.colors.background.primary};
  `,resourcePickerPopoverContent:t.css`
    width: 315px;
    font-size: ${j.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${j.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:t.css`
    display: flex;
    width: 100%;
    border-radius: ${j.shape.borderRadius()} ${j.shape.borderRadius()} 0 0;
  `,buttonRow:(0,t.css)({display:"flex",justifyContent:"center",gap:j.spacing(2),padding:j.spacing(1)})})},38647:(Y,T,e)=>{"use strict";e.d(T,{$:()=>c});var t=e(66111),n=e(40538),i=e(11543),s=e(81764),l=e(2594),f=e(31403),u=e(15448),o=e(37565);const d=[{label:"Fixed",value:n.xy.Fixed,description:"Fixed value"},{label:"Field",value:n.xy.Field,description:"Display field value"}],r={settings:{}},m={settings:{}},c=({value:p,context:g,onChange:y})=>{const v=(0,t.useCallback)(D=>{y({...p,mode:D})},[y,p]),h=(0,t.useCallback)(D=>{y({...p,field:D})},[y,p]),P=(0,t.useCallback)((D="")=>{y({...p,fixed:D})},[y,p]),a=()=>{P("")},C=p?.mode??n.xy.Fixed;return t.createElement(t.Fragment,null,t.createElement(i.Z,null,t.createElement(s._,{label:"Source",labelWidth:9,grow:!0},t.createElement(l.S,{value:C,options:d,onChange:v,fullWidth:!0}))),C!==n.xy.Fixed&&t.createElement(i.Z,null,t.createElement(s._,{label:"Field",labelWidth:9,grow:!0},t.createElement(u.b,{context:g,value:p.field??"",onChange:h,item:r}))),C===n.xy.Fixed&&t.createElement(i.Z,{key:p?.fixed},t.createElement(s._,{label:"Value",labelWidth:9,grow:!0},t.createElement(o.A,{context:g,value:p?.fixed,onChange:P,item:m,suffix:p?.fixed&&t.createElement(f.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:a})}))),C===n.xy.Template&&t.createElement(i.Z,null,t.createElement(s._,{label:"Template",labelWidth:9,grow:!0},t.createElement(o.A,{context:g,value:p?.fixed,onChange:P,item:m}))))}},54643:(Y,T,e)=>{"use strict";e.d(T,{Lm:()=>t.L,Lv:()=>y,k9:()=>U,cL:()=>M,$2:()=>F.$});var t=e(30785),n=e(66111);const i=({value:w,onChange:K})=>{const[L,V]=useState(w?[{value:w,label:w}]:[]),[H,j]=useState(),A=window.__grafana_public_path__+"img/icons/unicons/",_=k=>{K(k),j(k)};return useEffect(()=>{getBackendSrv().get(`${A}/index.json`).then(k=>{V(k.files.map(Q=>({value:Q,label:Q})))})},[A]),React.createElement(Select,{options:L,value:H,onChange:k=>{_(k.value)}})},s=null;var l=e(40538),f=e(11543),u=e(81764),o=e(2594),d=e(15448),r=e(25532),m=e(92484),c=e(26786);const p=[{label:"Fixed",value:l.Q8.Fixed,description:"Fixed value"},{label:"Field",value:l.Q8.Field,description:"Use a string field result"}],g={settings:{}},y=w=>{const{value:K,context:L,onChange:V,item:H}=w,j=9,A=(0,n.useCallback)(fe=>{V({...K,mode:fe})},[V,K]),_=(0,n.useCallback)((fe="")=>{V({...K,field:fe})},[V,K]),k=(0,n.useCallback)(fe=>{V({...K,fixed:fe??""})},[V,K]),Q=fe=>{fe.stopPropagation(),V({mode:l.Q8.Fixed,fixed:"",field:""})},re=K?.mode??l.Q8.Fixed,Z=H.settings?.showSourceRadio??!0,oe=H.settings?.resourceType??m.DD.Icon,G=H.settings?.folderName??r.ResourceFolderName.Icon;let le="";return oe===m.DD.Icon&&(K?.fixed?le=(0,r.getPublicOrAbsoluteUrl)(K.fixed):H.settings?.placeholderValue&&(le=(0,r.getPublicOrAbsoluteUrl)(H.settings.placeholderValue))),n.createElement(n.Fragment,null,Z&&n.createElement(f.Z,null,n.createElement(u._,{label:"Source",labelWidth:j,grow:!0},n.createElement(o.S,{value:re,options:p,onChange:A,fullWidth:!0}))),re!==l.Q8.Fixed&&n.createElement(f.Z,null,n.createElement(u._,{label:"Field",labelWidth:j,grow:!0},n.createElement(d.b,{context:L,value:K.field??"",onChange:_,item:g}))),re===l.Q8.Fixed&&n.createElement(c.E,{onChange:k,onClear:Q,value:K?.fixed,src:le,placeholder:H.settings?.placeholderText??"Select a value",name:E(K?.fixed)??"",mediaType:oe,folderName:G,size:m.zc.NORMAL}),re===l.Q8.Mapping&&n.createElement(f.Z,null,n.createElement(u._,{label:"Mappings",labelWidth:j,grow:!0},n.createElement("div",null,"TODO mappings editor!"))))};function E(w){if(!w)return;const K=w.lastIndexOf("/");return K>0?w.substring(K+1):w}var v=e(9892),h=e(72648),P=e(8581),a=e(80760),C=e(45458),D=e(33048);const b={label:"Fixed value",value:"_____fixed_____"},M=w=>{const{value:K,context:L,onChange:V,item:H}=w,{settings:j}=H,A=(0,h.wW)(x),_=K?.field,k=Boolean(!_),Q=(0,a.IX)(L.data),re=(0,a.nw)(Q,_,b),Z=(0,n.useMemo)(()=>(0,D.x5)(j),[j]),oe=(0,n.useCallback)(me=>{V((0,D.C)(me,Z))},[V,Z]),G=(0,n.useCallback)(me=>{const q=me.value;q&&q!==b.value?oe({...K,field:q}):oe({...K,field:void 0})},[oe,K]),le=(0,n.useCallback)(me=>{me!==void 0&&oe({...K,min:me})},[oe,K]),fe=(0,n.useCallback)(me=>{me!==void 0&&oe({...K,max:me})},[oe,K]),ae=(0,n.useCallback)(me=>{me!==void 0&&oe({...K,fixed:me})},[oe,K]),de=K??{},ee=k?b:re.find(me=>me.value===_);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(P.Ph,{value:ee,options:re,onChange:G,noOptionsMessage:"No fields found"})),n.createElement("div",{className:A.range},k&&n.createElement(f.Z,null,n.createElement(u._,{label:"Value",labelWidth:8,grow:!0},n.createElement(C.Y,{value:de.fixed,...Z,onChange:ae}))),!k&&!Z.hideRange&&n.createElement(n.Fragment,null,n.createElement(f.Z,null,n.createElement(u._,{label:"Min",labelWidth:8,grow:!0},n.createElement(C.Y,{value:de.min,...Z,onChange:le}))),n.createElement(f.Z,null,n.createElement(u._,{label:"Max",labelWidth:8,grow:!0},n.createElement(C.Y,{value:de.max,...Z,onChange:fe}))))))},x=w=>({range:v.css`
    padding-top: 8px;
  `});var R=e(99098);const S={label:"Fixed value",value:"_____fixed_____"},O=[{label:"Mod",value:l.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:l.eK.Clamped,description:"Use field values, clamped to max and min"}],U=({value:w,context:K,onChange:L,item:V})=>{const{settings:H}=V,j=0,A=w?.field,_=Boolean(!A),k=(0,a.IX)(K.data),Q=(0,a.nw)(k,A,S,R.fS.number),re=(0,h.wW)(I),Z=(0,n.useCallback)(de=>{const ee=de.value;if(ee&&ee!==S.value)L({...w,field:ee});else{const me=w.fixed??j;L({...w,field:void 0,fixed:me})}},[L,w]),oe=(0,n.useCallback)(de=>{L({...w,mode:de})},[L,w]),G=(0,n.useCallback)(de=>{L({...w,field:void 0,fixed:de??j})},[L,w]),le=w??{},fe=w?.mode??l.eK.Mod,ae=_?S:Q.find(de=>de.value===A);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(f.Z,null,n.createElement(u._,{label:"Limit",labelWidth:8,grow:!0},n.createElement(o.S,{value:fe,options:O,onChange:oe,fullWidth:!0}))),n.createElement(P.Ph,{value:ae,options:Q,onChange:Z,noOptionsMessage:"No fields found"})),n.createElement("div",{className:re.range},_&&n.createElement(f.Z,null,n.createElement(u._,{label:"Value",labelWidth:8,grow:!0},n.createElement(C.Y,{value:le?.fixed??j,onChange:G,max:H?.max,min:H?.min})))))},I=w=>({range:v.css`
    padding-top: 8px;
  `});var F=e(38647)},25532:(Y,T,e)=>{"use strict";e.d(T,{MediaType:()=>t.DD,ResourceFolderName:()=>t.QS,findField:()=>l.PI,findFieldIndex:()=>l.rj,getColorDimension:()=>f,getColorDimensionFromData:()=>l.FP,getPublicOrAbsoluteUrl:()=>g.t,getResourceDimension:()=>g.I,getResourceDimensionFromData:()=>l.Qz,getScalarDimension:()=>E.y,getScalarDimensionFromData:()=>l.z2,getScaleDimensionFromData:()=>l.pb,getScaledDimension:()=>o.W8,getScaledDimensionForField:()=>o.A,getTextDimension:()=>c,getTextDimensionFromData:()=>l.WO});var t=e(92484),n=e(72990),i=e(99601),s=e(6194),l=e(20927);function f(v,h,P){return u((0,l.PI)(v,h.field),h,P)}function u(v,h,P){if(!v){const D=P.visualization.getColorByName(h.fixed??"grey");return{isAssumed:Boolean(h.field?.length)||!h.fixed,fixed:D,value:()=>D,get:b=>D}}const a=(0,n.fD)(v);if(a.isByValue||v.config.mappings?.length){const D=(0,i.xD)(v,!0);D!==v.config&&(v={...v,config:D},v.state=void 0);const b=(0,s.U_)({field:v,theme:P}),M=x=>b(x).color??"#ccc";return{field:v,get:x=>M(v.values[x]),value:()=>M((0,l.cR)(v))}}const C=a.getCalculator(v,P)(0,0);return{fixed:C,value:()=>C,get:D=>C,field:v}}var o=e(33048),d=e(99098),r=e(2703),m=e(40538);function c(v,h){const P=h.field?(0,l.PI)(v,h.field):v?.fields.find(a=>a.type===d.fS.string);return p(P,h)}function p(v,h){let P=h.fixed;const a=h.mode??m.xy.Fixed;if(a===m.xy.Fixed)return{isAssumed:!Boolean(P),fixed:P,value:()=>P,get:D=>P};if(a===m.xy.Template){const D=b=>`TEMPLATE[${h.fixed} // ${b}]`;return v?{field:v,get:b=>D(v.values[b]),value:()=>D((0,l.cR)(v))}:(P=D(""),{isAssumed:!0,fixed:P,value:()=>P,get:b=>P})}if(!v)return{isAssumed:!0,fixed:P,value:()=>P,get:D=>P};let C=D=>(0,r.zc)(v.display(D));return{field:v,get:D=>C(v.values[D]),value:()=>C((0,l.cR)(v))}}var g=e(59961),y=e(97934),E=e(86682)},59961:(Y,T,e)=>{"use strict";e.d(T,{I:()=>s,t:()=>i});var t=e(40538),n=e(20927);function i(l){return l?l.indexOf(":/")>0?l:window.__grafana_public_path__+l:""}function s(l,f){const u=f.mode??t.Q8.Fixed;if(u===t.Q8.Fixed){const r=i(f.fixed);return{isAssumed:!Boolean(r),fixed:r,value:()=>r,get:m=>r}}const o=(0,n.PI)(l,f.field);if(!o){const r="";return{isAssumed:!0,fixed:r,value:()=>r,get:m=>r}}if(u===t.Q8.Mapping){const r=m=>i(`${m}`);return{field:o,get:m=>r(o.values[m]),value:()=>r((0,n.cR)(o))}}const d=r=>{if(o&&o.display){const m=o.display(r).icon;return i(m??"")}return""};return{field:o,get:r=>d(o.values[r]),value:()=>d((0,n.cR)(o))}}},86682:(Y,T,e)=>{"use strict";e.d(T,{y:()=>i});var t=e(40538),n=e(20927);function i(l,f){return s((0,n.PI)(l,f?.field),f)}function s(l,f){if(!l){const d=f.fixed??0;return{isAssumed:Boolean(f.field?.length)||!f.fixed,fixed:d,value:()=>d,get:()=>d}}let u=d=>d%f.max;return f.mode===t.eK.Clamped&&(u=d=>d<f.min?f.min:d>f.max?f.max:d),{field:l,get:d=>{const r=l.values[d];return r===null||typeof r!="number"?0:u(r)},value:()=>(0,n.cR)(l)}}},33048:(Y,T,e)=>{"use strict";e.d(T,{A:()=>l,C:()=>u,W8:()=>s,x5:()=>f});var t=e(99601),n=e(40538),i=e(20927);function s(o,d){return l((0,i.PI)(o,d?.field),d)}function l(o,d,r){if(!o){const E=d.fixed??0;return{isAssumed:Boolean(d.field?.length)||!d.fixed,fixed:E,value:()=>E,get:()=>E}}const m=(0,t.dz)(o),c=d.max-d.min;if(o.values.length<1||c<=0||m.delta<=0)return{fixed:d.min,value:()=>d.min,get:()=>d.min};let g=E=>d.min+E*c;if(r===n.B5.Quad){const E=Math.PI*(d.max/2)**2,v=Math.PI*(d.min/2)**2,h=E-v;g=P=>{let a=v+h*P;return Math.sqrt(a/Math.PI)*2}}const y=E=>{const v=o.values[E];let h=0;return v!==-1/0&&(h=(v-m.min)/m.delta),h>1?h=1:h<0&&(h=0),g(h)};return{get:y,value:()=>y((0,i.cR)(o)),field:o}}function f(o){return o||(o={min:0,max:1}),o.min==null&&(o.min=0),o.max==null&&(o.max=1),o}function u(o,d){let{min:r,max:m}=f(d);if(o||(o={}),o.max==null&&(o.max=m),o.min==null&&(o.min=r),o.min>o.max){const c=o.max;o.max=o.min,o.min=c}return o.min<r&&(o.min=r),o.max>m&&(o.max=m),o.fixed==null&&(o.fixed=o.min+(o.max-o.min)/2),o.field||(o.fixed>m?o.fixed=m:o.fixed<r&&(o.fixed=r)),o}},92484:(Y,T,e)=>{"use strict";e.d(T,{DD:()=>s,QS:()=>i,hQ:()=>l,qj:()=>n,zc:()=>f});var t=e(40538);const n=Object.freeze({fixed:"",mode:t.xy.Field,field:""});var i=(u=>(u.Icon="img/icons/unicons",u.IOT="img/icons/iot",u.Marker="img/icons/marker",u.BG="img/bg",u))(i||{}),s=(u=>(u.Icon="icon",u.Image="image",u))(s||{}),l=(u=>(u.Folder="folder",u.URL="url",u.Upload="upload",u))(l||{}),f=(u=>(u.SMALL="small",u.NORMAL="normal",u))(f||{})},20927:(Y,T,e)=>{"use strict";e.d(T,{FP:()=>f,PI:()=>m,Qz:()=>d,WO:()=>r,cR:()=>p,pb:()=>u,rj:()=>c,z2:()=>o});var t=e(30471),n=e(33750),i=e(35645),s=e(25532),l=e(86682);function f(g,y){if(g?.series&&y.field)for(const E of g.series){const v=(0,s.getColorDimension)(E,y,i.v.theme2);if(!v.isAssumed||g.series.length===1)return v}return(0,s.getColorDimension)(void 0,y,i.v.theme2)}function u(g,y){if(g?.series&&y.field)for(const E of g.series){const v=(0,s.getScaledDimension)(E,y);if(!v.isAssumed||g.series.length===1)return v}return(0,s.getScaledDimension)(void 0,y)}function o(g,y){if(g?.series&&y.field)for(const E of g.series){const v=(0,l.y)(E,y);if(!v.isAssumed||g.series.length===1)return v}return(0,l.y)(void 0,y)}function d(g,y){if(g?.series&&y.field)for(const E of g.series){const v=(0,s.getResourceDimension)(E,y);if(!v.isAssumed||g.series.length===1)return v}return(0,s.getResourceDimension)(void 0,y)}function r(g,y){if(g?.series&&y.field)for(const E of g.series){const v=(0,s.getTextDimension)(E,y);if(!v.isAssumed||g.series.length===1)return v}return(0,s.getTextDimension)(void 0,y)}function m(g,y){const E=c(g,y);return E==null?void 0:g.fields[E]}function c(g,y){if(!(!g||!y?.length))for(let E=0;E<g.fields.length;E++){const v=g.fields[E];if(y===v.name)return E;const h=(0,t.CZ)(v,g);if(y===h)return E}}function p(g){const y=g.state?.calcs;if(y){const h=y[n.gz.lastNotNull];if(h!=null)return h}const E=g.values;let v=E.length-1;for(;v>=0;){const h=E[v--];if(h!=null)return h}}},64563:(Y,T,e)=>{"use strict";e.d(T,{y:()=>R});var t=e(9892),n=e(82897),i=e(66111),s=e(67483),l=e(59472),f=e(53768),u=e(76095),o=e(30471),d=e(56632),r=e(98825),m=e(40538),c=e(72648),p=e(60325),g=e(39904),y=e(31403),E=e(56703),v=e(91551),h=e(39493);function P(O,U,I){return(0,h.ZP)(O,F=>{F.defaults.custom===void 0&&(F.defaults.custom={}),F.defaults.max=I;const{custom:w}=F.defaults;switch(w.stacking===void 0&&(w.stacking={group:"A"}),U){case"lines":w.drawStyle=m.l8.Line,w.stacking.mode=m.o0.None,w.fillOpacity=0;break;case"bars":w.drawStyle=m.l8.Bars,w.stacking.mode=m.o0.None,w.fillOpacity=100;break;case"points":w.drawStyle=m.l8.Points,w.stacking.mode=m.o0.None,w.fillOpacity=0;break;case"stacked_lines":w.drawStyle=m.l8.Line,w.stacking.mode=m.o0.Normal,w.fillOpacity=100;break;case"stacked_bars":w.drawStyle=m.l8.Bars,w.stacking.mode=m.o0.Normal,w.fillOpacity=100;break;default:{const K=U;throw new Error(`Invalid graph-style: ${K}`)}}})}function a(O,U,I){return(0,h.ZP)(O,F=>{F.defaults.thresholds=I,F.defaults.custom=F.defaults.custom??{},F.defaults.custom.thresholdsStyle=U})}var C=e(8243),D=e(82965),b=e(96905);function M(O){const[U,{inc:I}]=(0,C.Z)(0),F=(0,D.Z)(O);return(0,i.useMemo)(()=>{F&&!(0,b.nl)(O,F,b.Ch)&&I()},[O,F,I]),U}const x=20;function R({data:O,height:U,width:I,timeZone:F,absoluteRange:w,onChangeTime:K,loadingState:L,annotations:V,onHiddenSeriesChanged:H,splitOpenFn:j,graphStyle:A,tooltipDisplayMode:_=m.f3.Single,anchorToZero:k=!1,yAxisMaximum:Q,thresholdsConfig:re,thresholdsStyle:Z,eventBus:oe}){const G=(0,c.l4)(),le=(0,c.wW)(S),[fe,ae]=(0,i.useState)(!1),de={from:(0,s.CQ)(w.from),to:(0,s.CQ)(w.to),raw:{from:(0,s.CQ)(w.from),to:(0,s.CQ)(w.to)}},ee=(0,i.useMemo)(()=>(0,l.j)((0,E.F)(E.r),"Explore"),[]),[me,q]=(0,i.useState)({defaults:{min:k?0:void 0,max:Q||void 0,color:{mode:f.S.PaletteClassic},custom:{drawStyle:m.l8.Line,fillOpacity:0,pointSize:5}},overrides:[]}),ne=(0,i.useMemo)(()=>{const Ve=P(me,A,Q);return a(Ve,Z,re)},[me,A,Q,re,Z]),se=(0,i.useMemo)(()=>(0,u.SM)({fieldConfig:ne,data:fe?O:O.slice(0,x),timeZone:F,replaceVariables:Ve=>Ve,theme:G,fieldConfigRegistry:ee}),[ee,O,F,G,ne,fe]),he=M(se);(0,i.useEffect)(()=>{if(H){const Ve=[];se.forEach(ct=>{ct.fields.map(Ke=>Ke.config?.custom?.hideFrom?.viz).every(n.identity)&&Ve.push((0,o.nf)(ct))}),H(Ve)}},[se,H]);const ue={eventBus:oe,sync:()=>d.m.Crosshair,onSplitOpen:j,onToggleSeriesVisibility(Ve,ct){q((0,v.N)(Ve,ct,me,O))}},Te=(0,i.useMemo)(()=>({tooltip:{mode:_,sort:m.As.None},legend:{displayMode:m.jK.List,showLegend:!0,placement:"bottom",calcs:[]}}),[_]);return i.createElement(p._w,{value:ue},O.length>x&&!fe&&i.createElement("div",{className:le.timeSeriesDisclaimer},i.createElement(g.J,{className:le.disclaimerIcon,name:"exclamation-triangle"}),"Showing only ",x," time series.",i.createElement(y.zx,{variant:"primary",fill:"text",onClick:()=>ae(!0),className:le.showAllButton},"Show all ",O.length)),i.createElement(r.$,{data:{series:se,timeRange:de,state:L,annotations:V,structureRev:he},pluginId:"timeseries",title:"",width:I,height:U,onChangeTimeRange:K,timeZone:F,options:Te}))}const S=O=>({timeSeriesDisclaimer:t.css`
    label: time-series-disclaimer;
    margin: ${O.spacing(1)} auto;
    padding: 10px 0;
    text-align: center;
  `,disclaimerIcon:t.css`
    label: disclaimer-icon;
    color: ${O.colors.warning.main};
    margin-right: ${O.spacing(.5)};
  `,showAllButton:t.css`
    margin-left: ${O.spacing(.5)};
  `})},56041:(Y,T,e)=>{"use strict";e.d(T,{F:()=>y});var t=e(66111),n=e(38208),i=e(16983),s=e(64563),l=e(2594),f=e(27876);const u=f.EXPLORE_GRAPH_STYLES.map(E=>({value:E,label:E[0].toUpperCase()+E.slice(1).replace(/_/," ")}));function o(E){const{graphStyle:v,onChangeGraphStyle:h}=E;return t.createElement(l.S,{size:"sm",options:u,value:v,onChange:h})}var d=e(58379);const r="grafana.explore.style.graph",m=E=>{store.set(r,E)},c=()=>g(d.Z.get(r)),p="lines",g=E=>f.EXPLORE_GRAPH_STYLES.find(h=>h===E)??p,y=({data:E,eventBus:v,height:h,width:P,absoluteRange:a,timeZone:C,annotations:D,onChangeTime:b,splitOpenFn:M,thresholdsConfig:x,thresholdsStyle:R,loadingState:S,statusMessage:O})=>{const[U,I]=(0,t.useState)(c),F=(0,t.useCallback)(w=>{(0,i.FG)(w),I(w)},[]);return t.createElement(n.fm,{title:"Graph",width:P,height:h,loadingState:S,statusMessage:O,actions:t.createElement(o,{graphStyle:U,onChangeGraphStyle:F})},(w,K)=>t.createElement(s.y,{graphStyle:U,data:E,height:K,width:w,absoluteRange:a,onChangeTime:b,timeZone:C,annotations:D,splitOpenFn:M,loadingState:S,thresholdsConfig:x,thresholdsStyle:R,eventBus:v}))}},53739:(Y,T,e)=>{"use strict";e.d(T,{q:()=>i});var t=e(66111),n=e(67483);const i=({timeInMs:l,className:f,humanize:u})=>t.createElement("span",{className:f},s(l,u)),s=(l,f=!1)=>{const u=l/1e3;if(!f)return`${u.toFixed(1)}s`;const o=(0,n.Ks)(u,"seconds"),d=o.hours(),r=o.minutes(),m=o.seconds();return d?`${d}h ${r}m ${m}s`:r?`${r}m ${m}s`:`${m}s`}},94619:(Y,T,e)=>{"use strict";e.d(T,{m:()=>Q});var t=e(9892),n=e(66111),i=e(95831),s=e(206),l=e(94976),f=e(35645),u=e(20308),o=e(72648),d=e(83437),r=e(91162),m=e(25405),c=e(27876),p=e(93713),g=e(95638),y=e(13532),E=e(47891),v=e(67483),h=e(39904),P=e(41611);function a({splitOpenFn:Z,traceToLogsOptions:oe,traceToMetricsOptions:G,dataFrame:le,createFocusSpanLink:fe,trace:ae}){if(!le)return;let de=I(ae);const ee=le.fields.some(q=>Boolean(q.config.links?.length));if(le.fields.length===1||!ee)return D(Z,le.fields[0],oe,G,fe,de);if(ee)return function(ne){de={...de,...F(ne)};const se=le.fields.find(he=>Boolean(he.config.links?.length));try{const he=(0,P.a_)({field:se,rowIndex:ne.dataFrameRowIndex,splitOpenFn:Z,range:O(ne),dataFrame:le,vars:de});return{logLinks:[{href:he[0].href,onClick:he[0].onClick,content:n.createElement(h.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:he[0].origin}]}}catch(he){console.error(he);return}}}const C=["cluster","hostname","namespace","pod"].map(Z=>({key:Z}));function D(Z,oe,G,le,fe,ae){let de;G?.datasourceUid&&(de=(0,r.ak)().getInstanceSettings(G.datasourceUid));const ee=de?.type==="grafana-splunk-datasource";let me;return le?.datasourceUid&&(me=(0,r.ak)().getInstanceSettings(le.datasourceUid)),function(ne){ae={...ae,...F(ne)};const se={traceLinks:[]};let he,ue="";if(de&&G){const Te=G.customQuery?G.query:void 0,Ve=G.tags||C;switch(de?.type){case"loki":ue=S(ne,Ve),he=b(ne,G,ue,Te);break;case"grafana-splunk-datasource":ue=S(ne,Ve,{joinBy:" "}),he=x(ne,G,ue,Te);break;case"elasticsearch":case"grafana-opensearch-datasource":ue=S(ne,Ve,{labelValueSign:":",joinBy:" AND "}),he=M(ne,G,ue,Te);break;case"grafana-falconlogscale-datasource":ue=S(ne,Ve,{joinBy:" OR "}),he=R(ne,G,ue,Te)}if(he){const ct={title:de.name,url:"",internal:{datasourceUid:de.uid,datasourceName:de.name,query:he}};if(ae={...ae,__tags:{text:"Tags",value:ue}},(0,P.lt)(ct.internal.query,ae).allVariablesDefined){const Ie=(0,l._)({link:ct,internalLink:ct.internal,scopedVars:ae,range:O(ne,{startMs:G.spanStartTimeShift?E.intervalToMs(G.spanStartTimeShift):0,endMs:G.spanEndTimeShift?E.intervalToMs(G.spanEndTimeShift):0},ee),field:{},onClickFn:Z,replaceVariables:(0,u.J)().replace.bind((0,u.J)())});se.logLinks=[{href:Ie.href,onClick:Ie.onClick,content:n.createElement(h.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:oe}]}}}if(me&&le?.queries){se.metricLinks=[];for(const Te of le.queries){const Ve=U(Te,le?.tags||[],ne),ct={title:me.name,url:"",internal:{datasourceUid:me.uid,datasourceName:me.name,query:{expr:Ve,refId:"A"}}},Ie=(0,l._)({link:ct,internalLink:ct.internal,scopedVars:{},range:O(ne,{startMs:le.spanStartTimeShift?E.intervalToMs(le.spanStartTimeShift):0,endMs:le.spanEndTimeShift?E.intervalToMs(le.spanEndTimeShift):0}),field:{},onClickFn:Z,replaceVariables:(0,u.J)().replace.bind((0,u.J)())});se.metricLinks.push({title:Te?.name,href:Ie.href,onClick:Ie.onClick,content:n.createElement(h.J,{name:"chart-line",title:"Explore metrics for this span"}),field:oe})}}if(ne.references&&fe)for(const Te of ne.references){if(Te.refType==="CHILD_OF")continue;const Ve=fe(Te.traceID,Te.spanID);se.traceLinks.push({href:Ve.href,title:Te.span?Te.span.operationName:"View linked span",content:n.createElement(h.J,{name:"link",title:"View linked span"}),onClick:Ve.onClick,field:Ve.origin})}if(ne.subsidiarilyReferencedBy&&fe)for(const Te of ne.subsidiarilyReferencedBy){const Ve=fe(Te.traceID,Te.spanID);se.traceLinks.push({href:Ve.href,title:Te.span?Te.span.operationName:"View linked span",content:n.createElement(h.J,{name:"link",title:"View linked span"}),onClick:Ve.onClick,field:Ve.origin})}return se}}function b(Z,oe,G,le){const{filterByTraceID:fe,filterBySpanID:ae}=oe;if(le)return{expr:le,refId:""};if(!G)return;let de="{${__tags}}";return fe&&Z.traceID&&(de+=' |="${__span.traceId}"'),ae&&Z.spanID&&(de+=' |="${__span.spanId}"'),{expr:de,refId:""}}function M(Z,oe,G,le){const{filterByTraceID:fe,filterBySpanID:ae}=oe;if(le)return{query:le,refId:"",metrics:[{id:"1",type:"logs"}]};let de=[];return ae&&Z.spanID&&de.push('"${__span.spanId}"'),fe&&Z.traceID&&de.push('"${__span.traceId}"'),G&&de.push("${__tags}"),{query:de.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function x(Z,oe,G,le){const{filterByTraceID:fe,filterBySpanID:ae}=oe;if(le)return{query:le,refId:""};let de="";return G&&(de+="${__tags}"),fe&&Z.traceID&&(de+=' "${__span.traceId}"'),ae&&Z.spanID&&(de+=' "${__span.spanId}"'),{query:de,refId:""}}function R(Z,oe,G,le){const{filterByTraceID:fe,filterBySpanID:ae}=oe;if(le)return{lsql:le,refId:""};if(!G)return;let de="${__tags}";return fe&&Z.traceID&&(de+=' or "${__span.traceId}"'),ae&&Z.spanID&&(de+=' or "${__span.spanId}"'),{lsql:de,refId:""}}function S(Z,oe,{labelValueSign:G="=",joinBy:le=", "}={}){return[...Z.process.tags,...Z.tags,{key:"spanId",value:Z.spanID},{key:"traceId",value:Z.traceID},{key:"name",value:Z.operationName},{key:"duration",value:Z.duration}].map(fe=>{const ae=oe.find(de=>de.key===fe.key);if(ae)return`${ae.value?ae.value:ae.key}${G}"${fe.value}"`}).filter(fe=>Boolean(fe)).join(le)}function O(Z,oe={startMs:0,endMs:0},G=!1){const le=Math.floor(Z.startTime/1e3+oe.startMs),fe=(0,v.CQ)(le),ae=(Z.startTime+Z.duration)/1e3;let de=Math.floor(ae+oe.endMs);G&&de-le<1e3?de=le+1e3:le===de&&de++;const ee=(0,v.CQ)(de);return{from:fe,to:ee,raw:{from:fe,to:ee}}}function U(Z,oe=[],G){if(!Z.query)return`histogram_quantile(0.5, sum(rate(traces_spanmetrics_latency_bucket{service="${G.process.serviceName}"}[5m])) by (le))`;let le=Z.query;if(oe.length&&le.indexOf("$__tags")!==-1){const fe=[...G.process.tags,...G.tags],de=oe.reduce((ee,me)=>{const q=fe.find(ne=>ne.key===me.key)?.value;return q&&ee.push(`${me.value?me.value:me.key}="${q}"`),ee},[])?.join(", ");le=le.replace(/\$__tags/g,de)}return le}function I(Z){return{__trace:{text:"Trace",value:{duration:Z.duration,name:Z.traceName,traceId:Z.traceID}}}}function F(Z){const oe={};for(const G of Z.process.tags)oe[G.key]=G.value;for(const G of Z.tags)oe[G.key]=G.value;return{__span:{text:"Span",value:{spanId:Z.spanID,traceId:Z.traceID,duration:Z.duration,name:Z.operationName,tags:oe}}}}function w(){const[Z,oe]=(0,n.useState)(new Set),G=(0,n.useCallback)(function(me){if(Z.size===0)return;let q=-1,ne=!0;const se=me.reduce((he,ue)=>(ue.depth<=q&&(ne=!0),ne&&he.has(ue.spanID)&&(he.delete(ue.spanID),ne=!1,q=ue.depth),he),new Set(Z));oe(se)},[Z]),le=(0,n.useCallback)(function(me){if(K(me,Z))return;let q;const ne=me.reduce((se,he)=>(q&&he.depth<=q.depth?(se.add(q.spanID),he.hasChildren&&(q=he)):he.hasChildren&&!se.has(he.spanID)&&(q=he),se),new Set(Z));q&&ne.add(q.spanID),oe(ne)},[Z]),fe=(0,n.useCallback)(function(){oe(new Set)},[]),ae=(0,n.useCallback)(function(me){if(K(me,Z))return;const q=me.reduce((ne,se)=>(se.hasChildren&&ne.add(se.spanID),ne),new Set);oe(q)},[Z]),de=(0,n.useCallback)(function(me){const q=new Set(Z);Z.has(me)?q.delete(me):q.add(me),oe(q)},[Z]);return{childrenHiddenIDs:Z,expandOne:G,collapseOne:le,expandAll:fe,collapseAll:ae,childrenToggle:de}}function K(Z,oe){return Z.filter(le=>le.hasChildren).length===oe.size}function L(Z){const[oe,G]=(0,n.useState)(new Map);(0,n.useEffect)(()=>{G(new Map)},[Z,G]);const le=(0,n.useCallback)(function(ee){const me=new Map(oe);me.has(ee)?me.delete(ee):me.set(ee,new g.DetailState),G(me)},[oe]),fe=(0,n.useCallback)(function(ee,me){const q=oe.get(ee);if(!q)return;const ne=q.toggleLogItem(me),se=new Map(oe);return se.set(ee,ne),G(se)},[oe]),ae=(0,n.useCallback)(function(ee,me){const q=oe.get(ee);if(!q)return;const ne=q.toggleReferenceItem(me),se=new Map(oe);return se.set(ee,ne),G(se)},[oe]);return{detailStates:oe,toggleDetail:le,detailLogItemToggle:fe,detailLogsToggle:(0,n.useCallback)(de=>V("logs",oe,G)(de),[oe]),detailWarningsToggle:(0,n.useCallback)(de=>V("warnings",oe,G)(de),[oe]),detailStackTracesToggle:(0,n.useCallback)(de=>V("stackTraces",oe,G)(de),[oe]),detailReferenceItemToggle:ae,detailReferencesToggle:(0,n.useCallback)(de=>V("references",oe,G)(de),[oe]),detailProcessToggle:(0,n.useCallback)(de=>V("process",oe,G)(de),[oe]),detailTagsToggle:(0,n.useCallback)(de=>V("tags",oe,G)(de),[oe])}}function V(Z,oe,G){return le=>{const fe=oe.get(le);if(!fe)return;let ae;Z==="tags"?ae=fe.toggleTags():Z==="process"?ae=fe.toggleProcess():Z==="warnings"?ae=fe.toggleWarnings():Z==="references"?ae=fe.toggleReferences():Z==="stackTraces"?ae=fe.toggleStackTraces():ae=fe.toggleLogs();const de=new Map(oe);de.set(le,ae),G(de)}}function H(){const[Z,oe]=(0,n.useState)(new Set),G=(0,n.useCallback)(function(ae){oe(de=>{const ee=new Set(de);return ee.add(ae),ee})},[]),le=(0,n.useCallback)(function(ae){oe(de=>{const ee=new Set(de);return ee.delete(ae),ee})},[]);return{hoverIndentGuideIds:Z,addHoverIndentGuideId:G,removeHoverIndentGuideId:le}}var j=e(75151);function A(){const[Z,oe]=(0,n.useState)({time:{current:[0,1]}}),G=(0,n.useCallback)(function(ae){oe(de=>{const ee={...de.time,...ae};return{...de,time:ee}})},[]),le=(0,n.useCallback)(function(ae,de){const me={current:[ae,de]};oe(q=>({...q,time:me}))},[]);return{viewRange:Z,updateViewRangeTime:le,updateNextViewRangeTime:G}}const _=Z=>({noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${Z.typography.h4.fontSize};
    color: ${Z.colors.text.secondary};
  `});function k(){return{}}function Q(Z){const{spanFindMatches:oe,traceProp:G,datasource:le,topOfViewRef:fe,topOfViewRefType:ae,exploreId:de}=Z,{detailStates:ee,toggleDetail:me,detailLogItemToggle:q,detailLogsToggle:ne,detailProcessToggle:se,detailReferencesToggle:he,detailReferenceItemToggle:ue,detailTagsToggle:Te,detailWarningsToggle:Ve,detailStackTracesToggle:ct}=L(Z.dataFrames[0]),{removeHoverIndentGuideId:Ie,addHoverIndentGuideId:Ke,hoverIndentGuideIds:Ge}=H(),{viewRange:at,updateViewRangeTime:dt,updateNextViewRangeTime:Re}=A(),{expandOne:ye,collapseOne:Pe,childrenToggle:be,collapseAll:Be,childrenHiddenIDs:ke,expandAll:ot}=w(),{newTraceViewHeaderSearch:ft,setNewTraceViewHeaderSearch:gt,spanFilterMatches:St}=(0,j.F4)(G?.spans),[ut,Dt]=(0,n.useState)(""),[ie,De]=(0,i.Z)(!1),[Ne,Je]=(0,n.useState)(!1),[Xe,Le]=(0,n.useState)(0),Ue=(0,o.wW)(_),[ve,Se]=(0,n.useState)(.25),[$e,Ye]=re({refId:Z.dataFrames[0]?.refId,exploreId:Z.exploreId,datasource:le,splitOpenFn:Z.splitOpenFn}),_e=(0,n.useMemo)(()=>({childrenHiddenIDs:ke,detailStates:ee,hoverIndentGuideIds:Ge,shouldScrollToFirstUiFindMatch:!1,spanNameColumnWidth:ve,traceID:Z.traceProp?.traceID}),[ke,ee,Ge,ve,Z.traceProp?.traceID]),Et=(0,r.ak)().getInstanceSettings(le?.name),pt=(0,d.p)(Et?.jsonData),je=Et?.jsonData?.tracesToMetrics,ht=Et?.jsonData,we=(0,n.useMemo)(()=>a({splitOpenFn:Z.splitOpenFn,traceToLogsOptions:pt,traceToMetricsOptions:je,dataFrame:Z.dataFrames[0],createFocusSpanLink:Ye,trace:G}),[Z.splitOpenFn,pt,je,Z.dataFrames,Ye,G]),Qe=(0,c.useSelector)(yt=>(0,m.Z)(yt.user)),nt=le?le?.type:"unknown",it=Z.scrollElement?Z.scrollElement:document.getElementsByClassName(Z.scrollElementClass??"")[0];return n.createElement(n.Fragment,null,Z.dataFrames?.length&&G?n.createElement(n.Fragment,null,f.v.featureToggles.newTraceViewHeader?n.createElement(n.Fragment,null,n.createElement(g.NewTracePageHeader,{trace:G,data:Z.dataFrames[0],timeZone:Qe,search:ft,setSearch:gt,showSpanFilters:ie,setShowSpanFilters:De,showSpanFilterMatchesOnly:Ne,setShowSpanFilterMatchesOnly:Je,setFocusedSpanIdForSearch:Dt,spanFilterMatches:St,datasourceType:nt,setHeaderHeight:Le,app:de?s.zj.Explore:s.zj.Unknown}),n.createElement(y.Z,{trace:G,viewRange:at,updateNextViewRangeTime:Re,updateViewRangeTime:dt})):n.createElement(g.TracePageHeader,{trace:G,updateNextViewRangeTime:Re,updateViewRangeTime:dt,viewRange:at,timeZone:Qe}),n.createElement(g.TraceTimelineViewer,{registerAccessors:k,scrollToFirstVisibleSpan:k,findMatchesIDs:f.v.featureToggles.newTraceViewHeader?St:oe,trace:G,datasourceType:nt,spanBarOptions:ht?.spanBar,traceTimeline:_e,updateNextViewRangeTime:Re,updateViewRangeTime:dt,viewRange:at,timeZone:Qe,setSpanNameColumnWidth:Se,collapseAll:Be,collapseOne:Pe,expandAll:ot,expandOne:ye,childrenToggle:be,clearShouldScrollToFirstUiFindMatch:k,detailLogItemToggle:q,detailLogsToggle:ne,detailWarningsToggle:Ve,detailStackTracesToggle:ct,detailReferencesToggle:he,detailReferenceItemToggle:ue,detailProcessToggle:se,detailTagsToggle:Te,detailToggle:me,setTrace:k,addHoverIndentGuideId:Ke,removeHoverIndentGuideId:Ie,linksGetter:()=>[],uiFind:Z.search,createSpanLink:we,scrollElement:it,focusedSpanId:$e,focusedSpanIdForSearch:f.v.featureToggles.newTraceViewHeader?ut:Z.focusedSpanIdForSearch,showSpanFilterMatchesOnly:Ne,createFocusSpanLink:Ye,topOfViewRef:fe,topOfViewRefType:ae,headerHeight:Xe})):n.createElement("div",{className:Ue.noDataMsg},"No data"))}function re(Z){const oe=(0,c.useSelector)(ee=>ee.explore[Z.exploreId]?.panelsState.trace),G=oe?.spanId,le=(0,c.useDispatch)(),fe=ee=>le((0,p.km)(Z.exploreId,"trace",{...oe,spanId:ee})),ae=(0,c.useSelector)(ee=>ee.explore[Z.exploreId]?.queries.find(me=>me.refId===Z.refId));return[G,(ee,me)=>{const q={title:"Deep link to this span",url:"",internal:{datasourceUid:Z.datasource?.uid,datasourceName:Z.datasource?.name,query:{...ae,query:ee},panelsState:{trace:{spanId:me}}}},ne=ae?.queryType==="traceql"&&ae.query===ee;return(0,l._)({link:q,internalLink:q.internal,scopedVars:{},range:{},field:{},onClickFn:ne?()=>fe(G===me?void 0:me):Z.splitOpenFn?()=>Z.splitOpenFn({datasourceUid:Z.datasource?.uid,query:{...ae,query:ee},panelsState:{trace:{spanId:me}}}):void 0,replaceVariables:(0,u.J)().replace.bind((0,u.J)())})}]}},99746:(Y,T,e)=>{"use strict";e.d(T,{h:()=>n});var t=e(28550);function n(i,s,l){if(i.isLight)return s;{if(l){const o=(0,t.Z)(s);return t.Z.mostReadable(l,[o.clone().lighten(25),o.clone().lighten(10),o,o.clone().darken(10),o.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const f=(0,t.Z)(s).toHsl();f.l=1-f.l;const u=(0,t.Z)(f);return u.isLight()?u.darken(5).toHex8String():u.lighten(5).toHex8String()}}},13532:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>k});var t=e(9085),n=e.n(t),i=e(58635),s=e(66111),l=e(42413),f=e(9892),u=e(7804),o=e(72648),d=e(99746),r=e(9096);const m=.8,c=2,p=200,g=10,y=60,E=6;function v(Q,re,Z,oe,G){const le=new Map,fe=re.length<y?y:Math.min(re.length,p),ae=window.innerWidth*2;Q.width=ae,Q.height=fe;const de=Math.min(E,Math.max(c,fe/re.length)),ee=fe/re.length,me=Q.getContext("2d",{alpha:!1});if(me){me.fillStyle=G,me.fillRect(0,0,ae,fe);for(let q=0;q<re.length;q++){const{valueWidth:ne,valueOffset:se,serviceName:he}=re[q],ue=se/Z*ae;let Te=ne/Z*ae;Te<g&&(Te=g);let Ve=le.get(he);Ve||(Ve=`rgba(${oe(he).concat(m).join()})`,le.set(he,Ve)),me.fillStyle=Ve,me.fillRect(ue,q*ee,Te,de)}}}const h=(0,u.B)(Q=>({CanvasSpanGraph:f.css`
      label: CanvasSpanGraph;
      background: ${(0,d.h)(Q,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class P extends s.PureComponent{constructor(re){super(re),this.getColor=Z=>(0,r.e6)(Z,this.props.theme),this._setCanvasRef=Z=>{this._canvasElm=Z},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:re,items:Z}=this.props;v(this._canvasElm,Z,re,this.getColor,(0,d.h)(this.props.theme,"#fff"))}}render(){return s.createElement("canvas",{className:h(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const a=(0,o.HE)(P);var C=e(320);const D=()=>({TickLabels:f.css`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:f.css`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function b(Q){const{numTicks:re,duration:Z}=Q,oe=(0,o.wW)(D),G=[];for(let le=0;le<re+1;le++){const fe=le/re,ae=fe===1?{right:"0%"}:{left:`${fe*100}%`};G.push(s.createElement("div",{key:fe,className:oe.TickLabelsLabel,style:ae,"data-testid":"tick"},(0,C.LU)(Z*fe)))}return s.createElement("div",{className:oe.TickLabels,"data-testid":"TickLabels"},G)}var M=e(31403),x=e(54373);const R=()=>({GraphTick:f.css`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function S(Q){const{numTicks:re}=Q,Z=(0,o.wW)(R),oe=[];for(let G=1;G<re;G++){const le=`${G/re*100}%`;oe.push(s.createElement("line",{className:Z.GraphTick,x1:le,y1:"0%",x2:le,y2:"100%",key:G/re}))}return s.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},oe)}const O=()=>({ScrubberHandleExpansion:n()(f.css`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:n()(f.css`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:n()(f.css`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:f.css`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:f.css`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function U({isDragging:Q,onMouseDown:re,onMouseEnter:Z,onMouseLeave:oe,position:G}){const le=`${G*100}%`,fe=(0,o.wW)(O),ae=n()({[fe.ScrubberDragging]:Q});return s.createElement("g",{className:ae,"data-testid":"scrubber-component"},s.createElement("g",{"data-testid":"scrubber-component-g",className:fe.ScrubberHandles,onMouseDown:re,onMouseEnter:Z,onMouseLeave:oe},s.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:le,className:fe.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),s.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:le,className:fe.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),s.createElement("line",{className:fe.ScrubberLine,y2:"100%",x1:le,x2:le,"data-testid":"scrubber-component-line"}))}const I=(0,u.B)(Q=>{const re="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",Z=f.css`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:f.css`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${re} {
        display: unset;
      }
    `,ViewingLayerGraph:f.css`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,d.h)(Q,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:f.css`
      label: ViewingLayerInactive;
      fill: ${(0,d.h)(Q,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:f.css`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,d.h)(Q,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:f.css`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:f.css`
      label: ViewingLayerDrag;
      fill: ${(0,d.h)(Q,"#44f")};
    `,ViewingLayerFullOverlay:f.css`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:Z,ViewingLayerResetZoomHoverClassName:re}}),F={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function w(Q,re){const[Z,oe]=Q<re?[Q,re]:[re,Q];return{x:`${Z*100}%`,width:`${(oe-Z)*100}%`,leadingX:`${re*100}%`}}class K extends s.PureComponent{constructor(re){super(re),this._setRoot=Z=>{this._root=Z},this._getDraggingBounds=Z=>{if(!this._root)throw new Error("invalid state");const{left:oe,width:G}=this._root.getBoundingClientRect(),[le,fe]=this.props.viewRange.time.current;let ae=1,de=0;return Z===F.SHIFT_START?ae=fe:Z===F.SHIFT_END&&(de=le),{clientXLeft:oe,maxValue:ae,minValue:de,width:G}},this._handleReframeMouseMove=({value:Z})=>{this.props.updateNextViewRangeTime({cursor:Z})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:Z})=>{const oe=Z,{time:G}=this.props.viewRange,fe={reframe:{anchor:G.reframe?G.reframe.anchor:oe,shift:oe}};this.props.updateNextViewRangeTime(fe)},this._handleReframeDragEnd=({manager:Z,value:oe})=>{const{time:G}=this.props.viewRange,le=G.reframe?G.reframe.anchor:oe,[fe,ae]=oe<le?[oe,le]:[le,oe];Z.resetBounds(),this.props.updateViewRangeTime(fe,ae,"minimap")},this._handleScrubberEnterLeave=({type:Z})=>{const oe=Z===x.EUpdateTypes.MouseEnter;this.setState({preventCursorLine:oe})},this._handleScrubberDragUpdate=({event:Z,tag:oe,type:G,value:le})=>{G===x.EUpdateTypes.DragStart&&Z.stopPropagation(),oe===F.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:le}):oe===F.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:le})},this._handleScrubberDragEnd=({manager:Z,tag:oe,value:G})=>{const[le,fe]=this.props.viewRange.time.current;let ae;if(oe===F.SHIFT_START)ae=[G,fe];else if(oe===F.SHIFT_END)ae=[le,G];else throw new Error("bad state");Z.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(ae[0],ae[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new x.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:F.REFRAME}),this._draggerStart=new x.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:F.SHIFT_START}),this._draggerEnd=new x.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:F.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(re,Z){const oe=I(this.props.theme),G=w(re,Z);return[s.createElement("rect",{key:"fill",className:n()(oe.ViewingLayerDraggedShift,oe.ViewingLayerDrag),x:G.x,y:"0",width:G.width,height:this.props.height-2}),s.createElement("rect",{key:"edge",className:n()(oe.ViewingLayerDrag),x:G.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:re,viewRange:Z,numTicks:oe,theme:G}=this.props,{preventCursorLine:le}=this.state,{current:fe,cursor:ae,shiftStart:de,shiftEnd:ee,reframe:me}=Z.time,q=de!=null||ee!=null||me!=null,[ne,se]=fe;let he=0;ne&&(he=ne*100);let ue=100;se&&(ue=100-se*100);let Te;!q&&ae!=null&&!le&&(Te=`${ae*100}%`);const Ve=I(G);return s.createElement("div",{"aria-hidden":!0,className:Ve.ViewingLayer,style:{height:re}},(ne!==0||se!==1)&&s.createElement(M.zx,{onClick:this._resetTimeZoomClickHandler,className:n()(Ve.ViewingLayerResetZoom,Ve.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),s.createElement("svg",{height:re,className:Ve.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},he>0&&s.createElement("rect",{x:0,y:0,height:"100%",width:`${he}%`,className:Ve.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),ue>0&&s.createElement("rect",{x:`${100-ue}%`,y:0,height:"100%",width:`${ue}%`,className:Ve.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),s.createElement(S,{numTicks:oe}),Te&&s.createElement("line",{className:Ve.ViewingLayerCursorGuide,x1:Te,y1:"0",x2:Te,y2:re-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),de!=null&&this._getMarkers(ne,de),ee!=null&&this._getMarkers(se,ee),s.createElement(U,{isDragging:de!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:ne||0}),s.createElement(U,{isDragging:ee!=null,position:se||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),me!=null&&this._getMarkers(me.anchor,me.shift)),q&&s.createElement("div",{className:Ve.ViewingLayerFullOverlay}))}}const L=(0,o.HE)(K),V=60,H=4;function j(Q){return{valueOffset:Q.relativeStartTime,valueWidth:Q.duration,serviceName:Q.process.serviceName}}function A(Q){return Q.spans.map(j)}const _=(0,i.Z)(A);class k extends s.PureComponent{render(){const{height:re,trace:Z,viewRange:oe,updateNextViewRangeTime:G,updateViewRangeTime:le}=this.props;if(!Z)return s.createElement("div",null);const fe=_(Z);return s.createElement("div",{className:n()(l.GL,l.H3)},s.createElement(b,{numTicks:H,duration:Z.duration}),s.createElement("div",{className:l.WW},s.createElement(a,{valueWidth:Z.duration,items:fe}),s.createElement(L,{viewRange:oe,numTicks:H,height:re||V,updateViewRangeTime:le,updateNextViewRangeTime:G})))}}k.defaultProps={height:V}},72861:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>g});var t=e(9892),n=e(9085),i=e.n(n),s=e(66111),l=e(41818),f=e(35645),u=e(72648),o=e(31403),d=e(8180),r=e(46967);class m extends s.PureComponent{constructor(){super(...arguments),this.clearUiFind=()=>{this.props.onChange("")}}render(){const{allowClear:E,inputProps:v,value:h}=this.props,P=s.createElement(s.Fragment,null,v.suffix,E&&h&&h.length&&s.createElement(d.h,{name:"times",onClick:this.clearUiFind}));return s.createElement(r.I,{placeholder:"Find...",...v,onChange:a=>this.props.onChange(a.currentTarget.value),suffix:P,value:h})}}m.defaultProps={inputProps:{},trackFindFunction:void 0,value:void 0};var c=e(42413);const p=y=>({TracePageSearchBar:t.css`
      label: TracePageSearchBar;
      float: right;
      position: absolute;
      top: 0;
      right: 0;
      z-index: ${y.zIndex.navbarFixed};
      background: ${y.colors.background.primary};
      margin-bottom: -48px;
      padding: 8px;
      margin-right: 2px;
      border-radius: ${y.shape.radius.default};
      box-shadow: ${y.shadows.z2};
    `,TracePageSearchBarBar:t.css`
      label: TracePageSearchBarBar;
      max-width: 20rem;
      transition: max-width 0.5s;
      &:focus-within {
        max-width: 100%;
      }
    `,TracePageSearchBarSuffix:t.css`
      label: TracePageSearchBarSuffix;
      opacity: 0.6;
    `,TracePageSearchBarBtn:t.css`
      label: TracePageSearchBarBtn;
      transition: 0.2s;
      margin-left: 8px;
    `,TracePageSearchBarBtnDisabled:t.css`
      label: TracePageSearchBarBtnDisabled;
      opacity: 0.5;
    `,TracePageSearchBarLocateBtn:t.css`
      label: TracePageSearchBarLocateBtn;
      padding: 1px 8px 4px;
    `}),g=(0,s.memo)(function(E){const{navigable:v,setSearch:h,searchValue:P,searchBarSuffix:a,spanFindMatches:C,focusedSpanIdForSearch:D,setSearchBarSuffix:b,setFocusedSpanIdForSearch:M,datasourceType:x}=E,R=(0,u.wW)(p),S=P?s.createElement("span",{className:R.TracePageSearchBarSuffix,"aria-label":"Search bar suffix"},a):null,O=i()(R.TracePageSearchBarBtn,{[R.TracePageSearchBarBtnDisabled]:!P}),U={className:i()(R.TracePageSearchBarBar,c.A4),name:"search",suffix:S},I=L=>{M(""),b(""),h(L)},F=()=>{(0,l.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:x,grafana_version:f.v.buildInfo.version,direction:"next"});const L=Array.from(C),V=L.indexOf(D)?L.indexOf(D):0;if(V===-1||V===L.length-1){M(L[0]),b(K(1));return}M(L[V+1]),b(K(V+2))},w=()=>{(0,l.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:x,grafana_version:f.v.buildInfo.version,direction:"prev"});const L=Array.from(C),V=L.indexOf(D)?L.indexOf(D):0;if(V===-1||V===0){M(L[L.length-1]),b(K(L.length));return}M(L[V-1]),b(K(V))},K=L=>C?.size&&C?.size>0?L+" of "+C?.size:"";return s.createElement("div",{className:R.TracePageSearchBar},s.createElement("span",{className:c.NY,style:{display:"flex"}},s.createElement(m,{onChange:I,value:P,inputProps:U,allowClear:!0}),s.createElement(s.Fragment,null,v&&s.createElement(s.Fragment,null,s.createElement(o.zx,{className:O,variant:"secondary",disabled:!P,type:"button",icon:"arrow-down","aria-label":"Next results button",onClick:F}),s.createElement(o.zx,{className:O,variant:"secondary",disabled:!P,type:"button",icon:"arrow-up","aria-label":"Prev results button",onClick:w})))))})},55478:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>d});var t=e(9892),n=e(9085),i=e.n(n),s=e(66111),l=e(72648),f=e(99746),u=e(5861);const o=r=>({Ticks:t.css`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:t.css`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,f.h)(r,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:t.css`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:t.css`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function d(r){const{endTime:m,numTicks:c,showLabels:p,startTime:g}=r;let y;if(p){y=[];const h=(m||0)-(g||0);for(let P=0;P<c;P++){const a=(g||0)+P/(c-1)*h;y.push((0,u.LU)(a))}}const E=(0,l.wW)(o),v=[];for(let h=0;h<c;h++){const P=h/(c-1);v.push(s.createElement("div",{"data-testid":"TicksID",key:P,className:E.TicksTick,style:{left:`${P*100}%`}},y&&s.createElement("span",{className:i()(E.TicksTickLabel,{[E.TicksTickLabelEndAnchor]:P>=1})},y[h])))}return s.createElement("div",{className:E.Ticks},v)}d.defaultProps={endTime:null,showLabels:null,startTime:null}},93804:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(9892),n=e(9085),i=e.n(n),s=e(66111),l=e(72648),f=e(42413);const u=()=>({flexRow:t.css`
      display: flex;
      flex: 0 1 auto;
      flex-direction: row;
    `});function o(r){const{children:m,className:c="",...p}=r,g=(0,l.wW)(u);return s.createElement("div",{className:i()(g.flexRow,c),...p},m)}o.defaultProps={className:""};function d(r){const{children:m,className:c="",width:p,style:g,...y}=r,E=`${p*100}%`,v={...g,flexBasis:E,maxWidth:E};return s.createElement("div",{className:i()(f.WW,c),style:v,"data-testid":"TimelineRowCell",...y},m)}d.defaultProps={className:"",style:{}},o.Cell=d},93183:(Y,T,e)=>{"use strict";e.d(T,{l4:()=>we,ZP:()=>Wn});var t=e(9892),n=e(82897),i=e(58635),s=e(66111),l=e(41818),f=e(35645),u=e(7804),o=e(64319),d=e(72648);const r="peer.service";var m=e(9096);class c{constructor(Ft){this.ys=[],this.heights=[],this.bufferLen=Ft,this.dataLen=-1,this.lastI=-1}profileData(Ft){Ft!==this.dataLen&&(this.dataLen=Ft,this.ys.length=Ft,this.heights.length=Ft,this.lastI>=Ft&&(this.lastI=Ft-1))}calcHeights(Ft,Vt,At){At!=null&&(this.lastI=At);let Nt=Ft+this.bufferLen;if(Nt<=this.lastI)return;Nt>=this.heights.length&&(Nt=this.heights.length-1);let Rt=this.lastI;for(this.lastI===-1&&(Rt=0,this.ys[0]=0);Rt<=Nt;){const wt=this.heights[Rt]=Vt(Rt);this.ys[Rt+1]=this.ys[Rt]+wt,Rt++}this.lastI=Nt}calcYs(Ft,Vt){for(;(this.ys[this.lastI]==null||Ft>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,Vt)}confirmHeight(Ft,Vt){let At=Ft;if(At>this.lastI){this.calcHeights(At,Vt);return}const Nt=Vt(At);if(Nt===this.heights[At])return;const Rt=Nt-this.heights[At];for(this.heights[At]=Nt;++At<=this.lastI;)this.ys[At]+=Rt;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=Rt)}findFloorIndex(Ft,Vt){this.calcYs(Ft,Vt);let At=0,Nt=this.lastI;if(this.ys.length<2||Ft<this.ys[1])return 0;if(Ft>this.ys[Nt])return Nt;let Rt;for(;At<Nt;)if(Rt=At+.5*(Nt-At)|0,Ft>this.ys[Rt]){if(Ft<=this.ys[Rt+1])return Rt;At=Rt}else if(Ft<this.ys[Rt]){if(Ft>=this.ys[Rt-1])return Rt-1;Nt=Rt}else return Rt;throw new Error(`unable to find floor index for y=${Ft}`)}getRowPosition(Ft,Vt){return this.confirmHeight(Ft,Vt),{height:this.heights[Ft],y:this.ys[Ft]}}getEstimatedHeight(){const Ft=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?Ft|0:Ft/(this.lastI+1)*this.heights.length|0}}const p=100;class g extends s.Component{constructor(Ft){super(Ft),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const Vt=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(Vt,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=Vt=>this._yPositions.getRowPosition(Vt,this._getHeight),this.scrollToIndex=(Vt,At)=>{const{scrollElement:Nt}=this.props,Rt=Nt?.getBoundingClientRect().top||0,_t=(Nt?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-Rt,Qt=this.getRowPosition(Vt).y;this.props.scrollElement?.scrollTo({top:Qt+_t-At-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const Vt=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,At=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(Vt<this._startIndexDrawn||At>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=Vt=>{this.props.windowScroller&&(this._wrapperElm=Vt,Vt&&(this._viewHeight=Vt.clientHeight))},this._initItemHolder=Vt=>{this._itemHolderElm=Vt,this._scanItemHeights()},this._scanItemHeights=()=>{const Vt=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let At=null,Nt=null,Rt=!1;const wt=this._itemHolderElm.childNodes,_t=wt.length;for(let Qt=0;Qt<_t;Qt++){const en=wt[Qt],sn=en.getAttribute("data-item-key");if(!sn){console.warn("itemKey not found");continue}const gn=(en.firstElementChild||en).clientHeight,Cn=this._knownHeights.get(sn);gn!==Cn&&(this._knownHeights.set(sn,gn),Rt?Nt=sn:(Rt=!0,At=Nt=sn))}if(At!=null&&Nt!=null){const Qt=Vt(At),en=Nt===At?Qt:Vt(Nt);this._yPositions.calcHeights(en,this._getHeight,Qt),this.forceUpdate()}},this._getHeight=Vt=>{const At=this.props.getKeyFromIndex(Vt),Nt=this._knownHeights.get(At);return Nt!=null&&Nt===Nt?Nt:this.props.itemHeightGetter(Vt,At)},this._yPositions=new c(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:Ft}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=Ft+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(Ft){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&Ft.scrollElement!==this.props.scrollElement&&(Ft.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const Ft=this.props.windowScroller,Vt=Ft?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,At=Ft?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return Vt!==this._viewHeight||At!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const Vt=this._scrollTop,At=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(Vt,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(At,this._getHeight)}render(){const{dataLength:Ft,getKeyFromIndex:Vt,initialDraw:At=p,itemRenderer:Nt,viewBuffer:Rt,viewBufferMin:wt}=this.props,_t=this._getHeight,Qt=[];let en,sn;if(this._yPositions.profileData(Ft),!this._wrapperElm)en=0,sn=(At<Ft?At:Ft)-1;else{this._isViewChanged()&&this._calcViewIndexes();const Cn=wt>this._startIndex?0:this._startIndex-wt,In=wt<Ft-this._endIndex?this._endIndex+wt:Ft-1;Cn<this._startIndexDrawn||In>this._endIndexDrawn?(en=Rt>this._startIndex?0:this._startIndex-Rt,sn=this._endIndex+Rt,sn>=Ft&&(sn=Ft-1)):(en=this._startIndexDrawn>Ft-1?0:this._startIndexDrawn,sn=this._endIndexDrawn>Ft-1?Ft-1:this._endIndexDrawn)}this._yPositions.calcHeights(sn,_t,en||-1),this._startIndexDrawn=en,this._endIndexDrawn=sn,Qt.length=sn-en+1;for(let Cn=en;Cn<=sn;Cn++){const{y:In,height:_n}=this._yPositions.getRowPosition(Cn,_t),zn={height:_n,top:In,position:"absolute"},Hn=Vt(Cn),sa={"data-item-key":Hn};Qt.push(Nt(Hn,zn,Cn,sa))}const Jt={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(Jt.onScroll=this._onScroll,Jt.style.height="100%",Jt.style.overflowY="auto");const gn={position:"relative",height:this._yPositions.getEstimatedHeight()};return s.createElement("div",{...Jt,"data-testid":"ListView"},s.createElement("div",{style:gn},s.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},Qt)))}}g.defaultProps={initialDraw:p,itemsWrapperClassName:"",windowScroller:!1};var y=e(9085),E=e.n(y),v=e(39904),h=e(99746),P=e(52541),a=e(68183),C=e(39604),D=e(56921);function b({children:Bt,content:Ft,overlayClassName:Vt}){const At=(0,s.useRef)(null);return s.createElement(C.D,{content:Ft,hideAfter:300},(Nt,Rt,wt)=>s.createElement(s.Fragment,null,At.current&&s.createElement(D.J,{...wt,referenceElement:At.current,wrapperClassName:Vt,onMouseLeave:Rt,onMouseEnter:Nt}),s.cloneElement(Bt,{ref:At,onMouseEnter:Nt,onMouseLeave:Rt})))}var M=e(42413),x=e(5861);const R="label";var S=e(61860),O=e(31403);const U=()=>({CopyIcon:t.css`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function I(Bt){const Ft=(0,d.wW)(U),[Vt,At]=(0,s.useState)(!1),Nt=()=>{navigator.clipboard.writeText(Bt.copyText),At(!0)};return s.createElement(S.u,{content:Vt?"Copied":Bt.tooltipTitle},s.createElement(O.zx,{className:E()(Ft.CopyIcon),type:"button",icon:Bt.icon,onClick:Nt}))}I.defaultProps={icon:"copy",className:void 0};var F=e(23932),w=e.n(F);const K="copyIcon",L=Bt=>({KeyValueTable:t.css`
      label: KeyValueTable;
      background: ${(0,h.h)(Bt,"#fff")};
      border: 1px solid ${(0,h.h)(Bt,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,body:t.css`
      label: body;
      vertical-align: baseline;
    `,row:t.css`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,h.h)(Bt,"#f5f5f5")};
      }
      &:not(:hover) .${K} {
        visibility: hidden;
      }
    `,keyColumn:t.css`
      label: keyColumn;
      color: ${(0,h.h)(Bt,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:t.css`
      label: copyColumn;
      text-align: right;
    `,linkIcon:t.css`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `}),V=/^(\[|\{)/;function H(Bt){if(typeof Bt=="string"&&V.test(Bt))try{return JSON.parse(Bt)}catch{}return Bt}const j=Bt=>s.createElement("a",{href:Bt.href,title:Bt.title,target:"_blank",rel:"noopener noreferrer"},Bt.children," ",s.createElement(v.J,{name:"external-link-alt"}));j.defaultProps={title:""};function A(Bt){const{data:Ft,linksGetter:Vt}=Bt,At=(0,d.wW)(L);return s.createElement("div",{className:E()(At.KeyValueTable),"data-testid":"KeyValueTable"},s.createElement("table",{className:M.K9},s.createElement("tbody",{className:At.body},Ft.map((Nt,Rt)=>{const wt={__html:w()(H(Nt.value))},_t=s.createElement("div",{className:M.b$,dangerouslySetInnerHTML:wt}),Qt=Vt?Vt(Ft,Rt):null;let en;return Qt&&Qt.length?en=s.createElement("div",null,s.createElement(j,{href:Qt[0].url,title:Qt[0].text},_t)):en=_t,s.createElement("tr",{className:At.row,key:`${Nt.key}-${Rt}`},s.createElement("td",{className:At.keyColumn,"data-testid":"KeyValueTable--keyColumn"},Nt.key),s.createElement("td",null,en),s.createElement("td",{className:At.copyColumn},s.createElement(I,{className:K,copyText:JSON.stringify(Nt,null,2),tooltipTitle:"Copy JSON"})))}))))}const _=Bt=>({header:t.css`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,h.h)(Bt,"#e8e8e8")};
      }
    `,headerEmpty:t.css`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:t.css`
      label: headerHighContrast;
      &:hover {
        background: ${(0,h.h)(Bt,"#ddd")};
      }
    `,emptyIcon:t.css`
      label: emptyIcon;
      color: ${(0,h.h)(Bt,"#aaa")};
    `,summary:t.css`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:t.css`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,h.h)(Bt,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:t.css`
      label: summaryLabel;
      color: ${(0,h.h)(Bt,"#777")};
    `,summaryDelim:t.css`
      label: summaryDelim;
      color: ${(0,h.h)(Bt,"#bbb")};
      padding: 0 0.2em;
    `});function k(Bt){const{data:Ft}=Bt,Vt=(0,d.wW)(_);return!Array.isArray(Ft)||!Ft.length?null:s.createElement("ul",{className:Vt.summary},Ft.map((At,Nt)=>s.createElement("li",{className:Vt.summaryItem,key:`${At.key}-${Nt}`},s.createElement("span",{className:Vt.summaryLabel},At.key),s.createElement("span",{className:Vt.summaryDelim},"="),String(At.value))))}k.defaultProps={data:null};function Q(Bt){const{className:Ft,data:Vt,highContrast:At,interactive:Nt,isOpen:Rt,label:wt,linksGetter:_t,onToggle:Qt}=Bt,en=!Array.isArray(Vt)||!Vt.length,sn=(0,d.wW)(_),Jt=E()(M.Im,{[sn.emptyIcon]:en});let gn=null,Cn=null;return Nt&&(gn=Rt?s.createElement(v.J,{name:"angle-down",className:Jt}):s.createElement(v.J,{name:"angle-right",className:Jt}),Cn={"aria-checked":Rt,onClick:en?null:Qt,role:"switch"}),s.createElement("div",{className:E()(Ft,M.ty)},s.createElement("div",{className:E()(sn.header,{[sn.headerEmpty]:en,[sn.headerHighContrast]:At&&!en}),...Cn,"data-testid":"AccordianKeyValues--header"},gn,s.createElement("strong",{"data-test":R},wt,Rt||":"),!Rt&&s.createElement(k,{data:Vt})),Rt&&s.createElement(A,{data:Vt,linksGetter:_t}))}Q.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const re=Bt=>({AccordianLogs:t.css`
      label: AccordianLogs;
      border: 1px solid ${(0,h.h)(Bt,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:t.css`
      label: AccordianLogsHeader;
      background: ${(0,h.h)(Bt,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,h.h)(Bt,"#dadada")};
      }
    `,AccordianLogsContent:t.css`
      label: AccordianLogsContent;
      background: ${(0,h.h)(Bt,"#f0f0f0")};
      border-top: 1px solid ${(0,h.h)(Bt,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:t.css`
      label: AccordianLogsFooter;
      color: ${(0,h.h)(Bt,"#999")};
    `});function Z(Bt){const{interactive:Ft,isOpen:Vt,linksGetter:At,logs:Nt,openedItems:Rt,onItemToggle:wt,onToggle:_t,timestamp:Qt}=Bt;let en=null,sn="span",Jt=null;Ft&&(en=Vt?s.createElement(v.J,{name:"angle-down",className:M.Im}):s.createElement(v.J,{name:"angle-right",className:"u-align-icon"}),sn="a",Jt={"aria-checked":Vt,onClick:_t,role:"switch"});const gn=(0,d.wW)(re);return s.createElement("div",{className:gn.AccordianLogs},s.createElement(sn,{className:gn.AccordianLogsHeader,...Jt},en," ",s.createElement("strong",null,"Events")," (",Nt.length,")"),Vt&&s.createElement("div",{className:gn.AccordianLogsContent},(0,n.sortBy)(Nt,"timestamp").map((Cn,In)=>s.createElement(Q,{key:`${Cn.timestamp}-${In}`,className:In<Nt.length-1?M.bi:null,data:Cn.fields||[],highContrast:!0,interactive:Ft,isOpen:Rt?Rt.has(Cn):!1,label:`${(0,x.LU)(Cn.timestamp-Qt)}`,linksGetter:At,onToggle:Ft&&wt?()=>wt(Cn):null})),s.createElement("small",{className:gn.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}Z.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const oe=Bt=>({wrapper:t.css`
      label: wrapper;
      bottom: 0;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
      overflow: hidden;
      z-index: 0;
    `,bar:t.css`
      label: bar;
      border-radius: 3px;
      min-width: 2px;
      position: absolute;
      height: 36%;
      top: 32%;
    `,rpc:t.css`
      label: rpc;
      position: absolute;
      top: 35%;
      bottom: 35%;
      z-index: 1;
    `,label:t.css`
      label: label;
      color: #aaa;
      font-size: 12px;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      line-height: 1em;
      white-space: nowrap;
      padding: 0 0.5em;
      position: absolute;
    `,logMarker:t.css`
      label: logMarker;
      background-color: ${(0,h.h)(Bt,"#2c3235")};
      cursor: pointer;
      height: 60%;
      min-width: 1px;
      position: absolute;
      top: 20%;
      &:hover {
        background-color: ${(0,h.h)(Bt,"#464c54")};
      }
      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        border: 1px solid transparent;
      }
      &::after {
        left: 0;
      }
    `});function G(Bt){return`${(Bt*100).toFixed(1)}%`}function le({viewEnd:Bt,viewStart:Ft,getViewedBounds:Vt,color:At,shortLabel:Nt,longLabel:Rt,onClick:wt,rpc:_t,traceStartTime:Qt,span:en,className:sn,labelClassName:Jt}){const[gn,Cn]=(0,s.useState)(Nt),In=()=>Cn(Nt),_n=()=>Cn(Rt),zn=(0,n.groupBy)(en.logs,sa=>{const Ma=Vt(sa.timestamp,sa.timestamp).start;return G(Math.round(Ma*500)/500)}),Hn=(0,d.wW)(oe);return s.createElement("div",{className:E()(Hn.wrapper,sn),onBlur:In,onClick:wt,onFocus:_n,onMouseOut:In,onMouseOver:_n,"aria-hidden":!0,"data-testid":a.wl.components.TraceViewer.spanBar},s.createElement("div",{"aria-label":gn,className:Hn.bar,style:{background:At,left:G(Ft),width:G(Bt-Ft)}},s.createElement("div",{className:E()(Hn.label,Jt),"data-testid":"SpanBar--label"},gn)),s.createElement("div",null,Object.keys(zn).map(sa=>s.createElement(b,{key:sa,content:s.createElement(Z,{interactive:!1,isOpen:!0,logs:zn[sa],timestamp:Qt})},s.createElement("div",{"data-testid":"SpanBar--logMarker",className:Hn.logMarker,style:{left:sa}})))),_t&&s.createElement("div",{className:Hn.rpc,style:{background:_t.color,left:G(_t.viewStart),width:G(_t.viewEnd-_t.viewStart)}}))}const fe=s.memo(le);var ae=e(14391),de=e(42044),ee=e(30909);const me=(Bt,Ft,Vt,At)=>s.createElement(s.Fragment,null,Bt.logLinks?.length?s.createElement(ae.k,{label:"Logs"},Bt.logLinks.map((Nt,Rt)=>s.createElement(de.s,{key:Rt,label:"Logs for this span",onClick:Nt.onClick?wt=>{(0,l.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:At,grafana_version:f.v.buildInfo.version,type:"log",location:"menu"}),wt?.preventDefault(),Nt.onClick(wt),Vt()}:void 0,url:Nt.href,className:Ft.menuItem}))):null,Bt.metricLinks?.length?s.createElement(ae.k,{label:"Metrics"},Bt.metricLinks.map((Nt,Rt)=>s.createElement(de.s,{key:Rt,label:Nt.title??"Metrics for this span",onClick:Nt.onClick?wt=>{(0,l.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:At,grafana_version:f.v.buildInfo.version,type:"metric",location:"menu"}),wt?.preventDefault(),Nt.onClick(wt),Vt()}:void 0,url:Nt.href,className:Ft.menuItem}))):null,Bt.traceLinks?.length?s.createElement(ae.k,{label:"Traces"},Bt.traceLinks.map((Nt,Rt)=>s.createElement(de.s,{key:Rt,label:Nt.title??"View linked span",onClick:Nt.onClick?wt=>{(0,l.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:At,grafana_version:f.v.buildInfo.version,type:"trace",location:"menu"}),wt?.preventDefault(),Nt.onClick(wt),Vt()}:void 0,url:Nt.href,className:Ft.menuItem}))):null),q=({links:Bt,datasourceType:Ft})=>{const Vt=(0,d.wW)(ne),[At,Nt]=(0,s.useState)(!1),[Rt,wt]=(0,s.useState)({x:0,y:0}),_t=()=>Nt(!1);return s.createElement("div",{"data-testid":"SpanLinksMenu"},s.createElement("button",{onClick:Qt=>{Nt(!0),wt({x:Qt.pageX,y:Qt.pageY})},className:Vt.button},s.createElement(v.J,{name:"link",className:Vt.button})),At?s.createElement(ee.x,{onClose:()=>Nt(!1),renderMenuItems:()=>me(Bt,Vt,_t,Ft),focusOnOpen:!0,x:Rt.x,y:Rt.y}):null)},ne=()=>({button:t.css`
      background: transparent;
      border: none;
      padding: 0;
      margin: 0 3px 0 0;
    `,menuItem:t.css`
      max-width: 60ch;
      overflow: hidden;
    `});function se(Bt){return(0,n.get)((0,n.find)(Bt.references,({span:Ft,refType:Vt})=>Ft&&Ft.spanID&&(Vt==="CHILD_OF"||Vt==="FOLLOWS_FROM")),"span")}function he(Bt){const Ft=[];if(!Bt)return Ft;let Vt=se(Bt);for(;Vt;)Ft.push(Vt.spanID),Vt=se(Vt);return Ft}const ue=(0,u.B)(Bt=>({SpanTreeOffset:t.css`
      label: SpanTreeOffset;
      color: ${(0,h.h)(Bt,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:t.css`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:t.css`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: calc(0.5rem + 12px);
      height: 100%;
      border-left: 3px solid transparent;
      display: inline-flex;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,h.h)(Bt,"lightgrey")};
      }
    `,indentGuideActive:t.css`
      label: indentGuideActive;
      border-color: ${(0,h.h)(Bt,"darkgrey")};
      &::before {
        background-color: transparent;
      }
    `,iconWrapper:t.css`
      label: iconWrapper;
      position: absolute;
      right: 0.25rem;
    `}));class Te extends s.PureComponent{constructor(Ft){super(Ft),this.handleMouseLeave=(Vt,At)=>{(!(Vt.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(Vt,"relatedTarget.dataset.ancestorId")!==At)&&this.props.removeHoverIndentGuideId(At)},this.handleMouseEnter=(Vt,At)=>{(!(Vt.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(Vt,"relatedTarget.dataset.ancestorId")!==At)&&this.props.addHoverIndentGuideId(At)},this.ancestorIds=he(Ft.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:Ft,onClick:Vt,showChildrenIcon:At,span:Nt,theme:Rt}=this.props,{hasChildren:wt,spanID:_t}=Nt,Qt=wt?{onClick:Vt,role:"switch","aria-checked":Ft}:null,en=At&&wt&&(Ft?s.createElement(v.J,{name:"angle-down","data-testid":"icon-arrow-down"}):s.createElement(v.J,{name:"angle-right","data-testid":"icon-arrow-right"})),sn=ue(Rt);return s.createElement("span",{className:E()(sn.SpanTreeOffset,{[sn.SpanTreeOffsetParent]:wt}),...Qt},this.ancestorIds.map(Jt=>s.createElement("span",{key:Jt,className:E()(sn.indentGuide,{[sn.indentGuideActive]:this.props.hoverIndentGuideIds.has(Jt)}),"data-ancestor-id":Jt,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:gn=>this.handleMouseEnter(gn,Jt),onMouseLeave:gn=>this.handleMouseLeave(gn,Jt)})),en&&s.createElement("span",{className:sn.iconWrapper,onMouseEnter:Jt=>this.handleMouseEnter(Jt,_t),onMouseLeave:Jt=>this.handleMouseLeave(Jt,_t),"data-testid":"icon-wrapper"},en))}}Te.displayName="UnthemedSpanTreeOffset",Te.defaultProps={childrenVisible:!1,showChildrenIcon:!0};const Ve=(0,d.HE)(Te);var ct=e(55478),Ie=e(93804);const Ke="spanBar",Ge="spanBarLabel",at="nameWrapper",dt="nameWrapperMatchingFilter",Re="jaegerView",ye="nameColumn",Pe=(0,u.B)((Bt,Ft)=>{const Vt={label:"flash",flash:t.keyframes`
    from {
      background-color: ${(0,h.h)(Bt,"#68b9ff")};
    }
    to {
      background-color: 'default';
    }
  `},At=Ft?"":(0,h.h)(Bt,"#fffce4");return{nameWrapper:t.css`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:t.css`
      label: nameWrapperMatchingFilter;
      background-color: ${At};
    `,nameColumn:t.css`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:t.css`
      label: endpointName;
      color: ${(0,h.h)(Bt,"#808080")};
    `,view:t.css`
      label: view;
      position: relative;
    `,viewExpanded:t.css`
      label: viewExpanded;
      background: ${(0,h.h)(Bt,"#f8f8f8")};
      outline: 1px solid ${(0,h.h)(Bt,"#ddd")};
    `,viewExpandedAndMatchingFilter:t.css`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,h.h)(Bt,"#fff3d7")};
      outline: 1px solid ${(0,h.h)(Bt,"#ddd")};
    `,row:t.css`
      label: row;
      &:hover .${Ke} {
        opacity: 1;
      }
      &:hover .${Ge} {
        color: ${(0,h.h)(Bt,"#000")};
      }
      &:hover .${at} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,h.h)(Bt,"#fafafa")},
          ${(0,h.h)(Bt,"#f8f8f8")} 75%,
          ${(0,h.h)(Bt,"#eee")}
        );
      }
      &:hover .${Re} {
        background-color: ${(0,h.h)(Bt,"#f5f5f5")};
        outline: 1px solid ${(0,h.h)(Bt,"#ddd")};
      }
    `,rowClippingLeft:t.css`
      label: rowClippingLeft;
      & .${ye}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,h.h)(Bt,"rgba(25, 25, 25, 0.25)")},
          ${(0,h.h)(Bt,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:t.css`
      label: rowClippingRight;
      & .${Re}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,h.h)(Bt,"rgba(25, 25, 25, 0.25)")},
          ${(0,h.h)(Bt,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:t.css`
      label: rowExpanded;
      & .${Ke} {
        opacity: 1;
      }
      & .${Ge} {
        color: ${(0,h.h)(Bt,"#000")};
      }
      & .${at}, &:hover .${at} {
        background: ${(0,h.h)(Bt,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,h.h)(Bt,"#ddd")};
      }
      & .${dt} {
        background: ${(0,h.h)(Bt,"#fff3d7")};
      }
      &:hover .${Re} {
        background: ${(0,h.h)(Bt,"#eee")};
      }
    `,rowMatchingFilter:t.css`
      label: rowMatchingFilter;
      // background-color: ${(0,h.h)(Bt,"#fffbde")};
      &:hover .${at} {
        background: linear-gradient(
          90deg,
          ${(0,h.h)(Bt,"#fffbde")},
          ${(0,h.h)(Bt,"#fffbde")} 75%,
          ${(0,h.h)(Bt,"#f7f1c6")}
        );
      }
      &:hover .${Re} {
        background-color: ${(0,h.h)(Bt,"#f7f1c6")};
        outline: 1px solid ${(0,h.h)(Bt,"#ddd")};
      }
    `,rowFocused:t.css`
      label: rowFocused;
      background-color: ${(0,h.h)(Bt,"#cbe7ff")};
      animation: ${Vt.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${at}, .${Re}, .${dt} {
        background-color: ${(0,h.h)(Bt,"#cbe7ff")};
        animation: ${Vt.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${Ke} {
        opacity: 1;
      }
      & .${Ge} {
        color: ${(0,h.h)(Bt,"#000")};
      }
      &:hover .${at}, :hover .${Re} {
        background: ${(0,h.h)(Bt,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,h.h)(Bt,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:t.css`
      label: rowExpandedAndMatchingFilter;
      &:hover .${Re} {
        background: ${(0,h.h)(Bt,"#ffeccf")};
      }
    `,name:t.css`
      label: name;
      color: ${(0,h.h)(Bt,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      margin-right: 8px;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &::before {
        content: ' ';
        position: absolute;
        top: 4px;
        bottom: 4px;
        left: 0;
        border-left: 4px solid;
        border-left-color: inherit;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > small {
        color: ${(0,h.h)(Bt,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
    `,nameDetailExpanded:t.css`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:t.css`
      label: svcName;
      padding: 0 0.25rem 0 0.5rem;
      font-size: 1.05em;
    `,svcNameChildrenCollapsed:t.css`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:t.css`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,h.h)(Bt,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:t.css`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:t.css`
      label: labelRight;
      left: 100%;
    `,labelLeft:t.css`
      label: labelLeft;
      right: 100%;
    `}});class be extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(Ft,Vt,At)=>{const Nt=Vt?.type??"";if(Nt===P.Hn)return"";if(Nt===""||Nt===P.th)return`(${At})`;if(Nt===P.Kg){const Rt=Vt?.tag?.trim()??"";if(Rt!==""&&Ft.tags){const wt=Ft.tags?.find(Qt=>Qt.key===Rt),_t=Ft.process?.tags?.find(Qt=>Qt.key===Rt);if(wt)return`(${wt.value})`;if(_t)return`(${_t.value})`}}return""}}render(){const{className:Ft,color:Vt,spanBarOptions:At,columnDivision:Nt,isChildrenExpanded:Rt,isDetailExpanded:wt,isMatchingFilter:_t,showSpanFilterMatchesOnly:Qt,isFocused:en,numTicks:sn,rpc:Jt,noInstrumentedServer:gn,showErrorIcon:Cn,getViewedBounds:In,traceStartTime:_n,span:zn,hoverIndentGuideIds:Hn,addHoverIndentGuideId:sa,removeHoverIndentGuideId:Ma,clippingLeft:la,clippingRight:jn,theme:ia,createSpanLink:Aa,datasourceType:ga}=this.props,{duration:ya,hasChildren:Wa,operationName:rs,process:{serviceName:Xa}}=zn,wa=(0,x.LU)(ya),Pa=In(zn.startTime,zn.startTime+zn.duration),os=Pa.start,Ca=Pa.end,ta=Pe(ia,Qt),Qa=`${Xa}::${rs}`;let ua,vs;os>1-Ca?(ua=`${Qa} | ${wa}`,vs=ta.labelLeft):(ua=`${wa} | ${Qa}`,vs=ta.labelRight);const qa=Fa=>Fa?Object.values(Fa).reduce((ns,ca)=>ns+ca.length,0):0;return s.createElement(Ie.Z,{className:E()(ta.row,{[ta.rowExpanded]:wt,[ta.rowMatchingFilter]:_t,[ta.rowExpandedAndMatchingFilter]:_t&&wt,[ta.rowFocused]:en,[ta.rowClippingLeft]:la,[ta.rowClippingRight]:jn},Ft)},s.createElement(Ie.Z.Cell,{className:E()(ta.nameColumn,ye),width:Nt},s.createElement("div",{className:E()(ta.nameWrapper,at,{[ta.nameWrapperMatchingFilter]:_t,nameWrapperMatchingFilter:_t})},s.createElement(Ve,{onClick:Wa?this._childrenToggle:void 0,childrenVisible:Rt,span:zn,hoverIndentGuideIds:Hn,addHoverIndentGuideId:sa,removeHoverIndentGuideId:Ma}),s.createElement("button",{type:"button",className:E()(ta.name,{[ta.nameDetailExpanded]:wt}),"aria-checked":wt,title:Qa,onClick:this._detailToggle,role:"switch",style:{borderColor:Vt},tabIndex:0},s.createElement("span",{className:E()(ta.svcName,{[ta.svcNameChildrenCollapsed]:Wa&&!Rt})},Cn&&s.createElement(v.J,{name:"exclamation-circle",style:{backgroundColor:zn.errorIconColor?(0,h.h)(ia,zn.errorIconColor):(0,h.h)(ia,"#db2828")},className:ta.errorIcon}),Xa," ",Jt&&s.createElement("span",null,s.createElement(v.J,{name:"arrow-right"})," ",s.createElement("i",{className:ta.rpcColorMarker,style:{background:Jt.color}}),Jt.serviceName),gn&&s.createElement("span",null,s.createElement(v.J,{name:"arrow-right"})," ",s.createElement("i",{className:ta.rpcColorMarker,style:{background:gn.color}}),gn.serviceName)),s.createElement("small",{className:ta.endpointName},Jt?Jt.operationName:rs),s.createElement("small",{className:ta.endpointName}," ",this.getSpanBarLabel(zn,At,wa))),Aa&&(()=>{const Fa=Aa(zn),ns=qa(Fa);if(Fa&&ns===1){const ca=Fa.logLinks?.[0]??Fa.metricLinks?.[0]??Fa.traceLinks?.[0]??void 0;return ca?s.createElement("a",{href:ca.href,target:"_blank",style:{marginRight:"5px"},rel:"noopener noreferrer",onClick:ca.onClick?as=>{!(as.ctrlKey||as.metaKey||as.shiftKey)&&ca.onClick&&(as.preventDefault(),ca.onClick(as))}:void 0},ca.content):null}else return Fa&&ns>1?s.createElement(q,{links:Fa,datasourceType:ga}):null})())),s.createElement(Ie.Z.Cell,{className:E()(ta.view,Re,{[ta.viewExpanded]:wt,[ta.viewExpandedAndMatchingFilter]:_t&&wt}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-Nt,onClick:this._detailToggle},s.createElement(ct.Z,{numTicks:sn}),s.createElement(fe,{rpc:Jt,viewStart:os,viewEnd:Ca,getViewedBounds:In,color:Vt,shortLabel:wa,longLabel:ua,traceStartTime:_n,span:zn,labelClassName:`${Ge} ${vs}`,className:Ke})))}}be.displayName="UnthemedSpanBarRow",be.defaultProps={className:"",rpc:null};const Be=(0,d.HE)(be);var ke=e(77258),ot=e(89719),ft=e(97379);const gt=Bt=>({Divider:t.css`
      background: ${(0,h.h)(Bt,"#ddd")};
    `,DividerVertical:t.css`
      label: DividerVertical;
      display: inline-block;
      width: 1px;
      height: 0.9em;
      margin: 0 8px;
      vertical-align: middle;
    `,DividerHorizontal:t.css`
      label: DividerHorizontal;
      display: block;
      height: 1px;
      width: 100%;
      margin: 24px 0;
      clear: both;
      vertical-align: middle;
      position: relative;
      top: -0.06em;
    `});function St({className:Bt,style:Ft,type:Vt}){const At=(0,d.wW)(gt);return s.createElement("div",{style:Ft,className:(0,t.cx)(At.Divider,Vt==="horizontal"?At.DividerHorizontal:At.DividerVertical,Bt)})}var ut=e(82736);function Dt(Bt){const{reference:Ft,children:Vt,createFocusSpanLink:At}=Bt,Nt=At(Ft.traceID,Ft.spanID);return s.createElement("a",{href:Nt.href,target:Nt.target,rel:"noopener noreferrer",onClick:Nt.onClick?Rt=>{Rt.preventDefault(),Nt.onClick(Rt)}:void 0},Vt)}const ie=Bt=>({AccordianReferenceItem:t.css`
      border-bottom: 1px solid ${(0,h.h)(Bt,"#d8d8d8")};
    `,AccordianKeyValues:t.css`
      margin-left: 10px;
    `,AccordianReferences:t.css`
      label: AccordianReferences;
      border: 1px solid ${(0,h.h)(Bt,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:t.css`
      label: AccordianReferencesHeader;
      background: ${(0,h.h)(Bt,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,h.h)(Bt,"#dadada")};
      }
    `,AccordianReferencesContent:t.css`
      label: AccordianReferencesContent;
      background: ${(0,h.h)(Bt,"#f0f0f0")};
      border-top: 1px solid ${(0,h.h)(Bt,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:t.css`
      label: AccordianReferencesFooter;
      color: ${(0,h.h)(Bt,"#999")};
    `,ReferencesList:t.css`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:t.css`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:t.css`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:t.css`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:t.css`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:t.css`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:t.css`
      margin-right: 8px;
    `,title:t.css`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function De(Bt){const{data:Ft,createFocusSpanLink:Vt,openedItems:At,onItemToggle:Nt,interactive:Rt}=Bt,wt=(0,d.wW)(ie);return s.createElement("div",{className:wt.AccordianReferencesContent},Ft.map((_t,Qt)=>s.createElement("div",{className:Qt<Ft.length-1?wt.AccordianReferenceItem:void 0,key:Qt},s.createElement("div",{className:wt.item,key:`${_t.spanID}`},s.createElement(Dt,{reference:_t,createFocusSpanLink:Vt},s.createElement("span",{className:wt.itemContent},_t.span?s.createElement("span",null,s.createElement("span",{className:(0,t.cx)("span-svc-name",wt.serviceName)},_t.span.process.serviceName),s.createElement("small",{className:"endpoint-name"},_t.span.operationName)):s.createElement("span",{className:(0,t.cx)("span-svc-name",wt.title)},"View Linked Span ",s.createElement(v.J,{name:"external-link-alt"})),s.createElement("small",{className:wt.debugInfo},s.createElement("span",{className:wt.debugLabel,"data-label":"TraceID:"},_t.traceID),s.createElement("span",{className:wt.debugLabel,"data-label":"SpanID:"},_t.spanID))))),!!_t.tags?.length&&s.createElement("div",{className:wt.AccordianKeyValues},s.createElement(Q,{className:Qt<Ft.length-1?M.bi:null,data:_t.tags||[],highContrast:!0,interactive:Rt,isOpen:At?At.has(_t):!1,label:"attributes",linksGetter:null,onToggle:Rt&&Nt?()=>Nt(_t):null})))))}const Ne=({data:Bt,interactive:Ft=!0,isOpen:Vt,onToggle:At,onItemToggle:Nt,openedItems:Rt,createFocusSpanLink:wt})=>{const _t=!Array.isArray(Bt)||!Bt.length;let Qt=null,en="span",sn=null;Ft&&(Qt=Vt?s.createElement(v.J,{name:"angle-down",className:M.Im}):s.createElement(v.J,{name:"angle-right",className:M.Im}),en="a",sn={"aria-checked":Vt,onClick:_t?null:At,role:"switch"});const Jt=(0,d.wW)(ie);return s.createElement("div",{className:Jt.AccordianReferences},s.createElement(en,{className:Jt.AccordianReferencesHeader,...sn},Qt,s.createElement("strong",null,s.createElement("span",null,"References"))," ","(",Bt.length,")"),Vt&&s.createElement(De,{data:Bt,openedItems:Rt,createFocusSpanLink:wt,onItemToggle:Nt,interactive:Ft}))},Je=s.memo(Ne),Xe=()=>({TextList:t.css`
      max-height: 450px;
      overflow: auto;
    `,List:t.css`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:t.css`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function Le(Bt){const{data:Ft}=Bt,Vt=(0,d.wW)(Xe);return s.createElement("div",{className:E()(Vt.TextList),"data-testid":"TextList"},s.createElement("ul",{className:Vt.List},Ft.map((At,Nt)=>s.createElement("li",{className:Vt.item,key:`${Nt}`},At))))}const Ue=Bt=>({header:t.css`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,h.h)(Bt,"#e8e8e8")};
      }
    `});function ve({data:Bt}){return s.createElement(Le,{data:Bt})}function Se(Bt){const{className:Ft,data:Vt,headerClassName:At,interactive:Nt,isOpen:Rt,label:wt,onToggle:_t,TextComponent:Qt=ve}=Bt,en=!Array.isArray(Vt)||!Vt.length,sn=(0,d.wW)(_),Jt=E()(M.Im,{[sn.emptyIcon]:en});let gn=null,Cn=null;Nt&&(gn=Rt?s.createElement(v.J,{name:"angle-down",className:Jt}):s.createElement(v.J,{name:"angle-right",className:Jt}),Cn={"aria-checked":Rt,onClick:en?null:_t,role:"switch"});const In=(0,d.wW)(Ue);return s.createElement("div",{className:Ft||""},s.createElement("div",{className:E()(In.header,At),...Cn,"data-testid":"AccordianText--header"},gn,s.createElement("strong",null,wt)," (",Vt.length,")"),Rt&&s.createElement(Qt,{data:Vt}))}Se.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const $e=Bt=>({header:t.css`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:t.css`
      overflow: hidden;
    `,debugInfo:t.css`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:t.css`
      label: debugLabel;
      &::before {
        color: ${(0,h.h)(Bt,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:t.css`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,h.h)(Bt,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,h.h)(Bt,"#333")};
      }
    `,AccordianWarnings:t.css`
      label: AccordianWarnings;
      background: ${(0,h.h)(Bt,"#fafafa")};
      border: 1px solid ${(0,h.h)(Bt,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:t.css`
      label: AccordianWarningsHeader;
      background: ${(0,h.h)(Bt,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,h.h)(Bt,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:t.css`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,h.h)(Bt,"#e8e8e8")};
    `,AccordianWarningsLabel:t.css`
      label: AccordianWarningsLabel;
      color: ${(0,h.h)(Bt,"#d36c08")};
    `,Textarea:t.css`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:t.css`
      font-size: 1.5em;
    `});function Ye(Bt){const{detailState:Ft,linksGetter:Vt,logItemToggle:At,logsToggle:Nt,processToggle:Rt,span:wt,tagsToggle:_t,traceStartTime:Qt,warningsToggle:en,stackTracesToggle:sn,referencesToggle:Jt,referenceItemToggle:gn,createSpanLink:Cn,createFocusSpanLink:In,topOfViewRefType:_n,datasourceType:zn}=Bt,{isTagsOpen:Hn,isProcessOpen:sa,logs:Ma,isWarningsOpen:la,references:jn,isStackTracesOpen:ia}=Ft,{operationName:Aa,process:ga,duration:ya,relativeStartTime:Wa,startTime:rs,traceID:Xa,spanID:wa,logs:Pa,tags:os,warnings:Ca,references:ta,stackTraces:Qa}=wt,{timeZone:ua}=Bt,vs=[{key:"svc",label:"Service:",value:ga.serviceName},{key:"duration",label:"Duration:",value:(0,x.LU)(ya)},{key:"start",label:"Start Time:",value:(0,x.LU)(Wa)+_e(rs,ua)},...wt.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:wt.childSpanCount}]:[]],qa=(0,d.wW)($e);let Fa;if(Cn){const ca=Cn(wt);ca?.logLinks?Fa=s.createElement(ot.k,{link:{...ca.logLinks[0],title:"Logs for this span",target:"_blank",origin:ca.logLinks[0].field,onClick:as=>{(0,l.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:zn,grafana_version:f.v.buildInfo.version,type:"log",location:"spanDetails"}),ca?.logLinks?.[0].onClick?.(as)}},buttonProps:{icon:"gf-logs"}}):Fa=s.createElement(O.zx,{variant:"primary",size:"sm",icon:"gf-logs",disabled:!0,tooltip:"We did not match any variables between the link and this span. Check your configuration or this span attributes."},"Logs for this span")}const ns=In(Xa,wa);return s.createElement("div",{"data-testid":"span-detail-component"},s.createElement("div",{className:qa.header},s.createElement("h2",{className:E()(M.h2)},Aa),s.createElement("div",{className:qa.listWrapper},s.createElement(ut.Z,{className:M.xb,divider:!0,items:vs}))),Fa,s.createElement(St,{className:M.im,type:"horizontal"}),s.createElement("div",null,s.createElement("div",null,s.createElement(Q,{data:os,label:"Attributes",linksGetter:Vt,isOpen:Hn,onToggle:()=>_t(wa)}),ga.tags&&s.createElement(Q,{className:M.bi,data:ga.tags,label:"Resource",linksGetter:Vt,isOpen:sa,onToggle:()=>Rt(wa)})),Pa&&Pa.length>0&&s.createElement(Z,{linksGetter:Vt,logs:Pa,isOpen:Ma.isOpen,openedItems:Ma.openedItems,onToggle:()=>Nt(wa),onItemToggle:ca=>At(wa,ca),timestamp:Qt}),Ca&&Ca.length>0&&s.createElement(Se,{className:qa.AccordianWarnings,headerClassName:qa.AccordianWarningsHeader,label:s.createElement("span",{className:qa.AccordianWarningsLabel},"Warnings"),data:Ca,isOpen:la,onToggle:()=>en(wa)}),Qa&&Qa.length&&s.createElement(Se,{label:"Stack trace",data:Qa,isOpen:ia,TextComponent:ca=>{let as;return ca.data?.length>1?as=ca.data.map((Os,bs)=>`StackTrace ${bs+1}:
${Os}`).join(`
`):as=ca.data?.[0],s.createElement(ft.K,{className:qa.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:as})},onToggle:()=>sn(wa)}),ta&&ta.length>0&&(ta.length>1||ta[0].refType!=="CHILD_OF")&&s.createElement(Je,{data:ta,isOpen:jn.isOpen,openedItems:jn.openedItems,onToggle:()=>Jt(wa),onItemToggle:ca=>gn(wa,ca),createFocusSpanLink:In}),_n===we.Explore&&s.createElement("small",{className:qa.debugInfo},s.createElement("a",{...ns,onClick:ca=>{ns.onClick&&ca.button===0&&(!ca.currentTarget.target||ca.currentTarget.target==="_self")&&!(ca.metaKey||ca.altKey||ca.ctrlKey||ca.shiftKey)&&(ca.preventDefault(),ns.onClick(ca))}},s.createElement(v.J,{name:"link",className:E()(M.Im,qa.LinkIcon)})),s.createElement("span",{className:qa.debugLabel,"data-label":"SpanID:"})," ",wa)))}const _e=(Bt,Ft)=>{const Vt=(0,ke.dq)(Bt/1e3,{timeZone:Ft,defaultWithMS:!0}),At=Vt.split(" ");return` (${At[1]?At[1]:Vt})`},Et=(0,u.B)(Bt=>({expandedAccent:t.css`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 4px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:t.css`
      label: infoWrapper;
      border: 1px solid ${(0,h.h)(Bt,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class pt extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(Ft,Vt)=>{const{linksGetter:At,span:Nt}=this.props;return At(Nt,Ft,Vt)}}render(){const{color:Ft,columnDivision:Vt,detailState:At,logItemToggle:Nt,logsToggle:Rt,processToggle:wt,referenceItemToggle:_t,referencesToggle:Qt,warningsToggle:en,stackTracesToggle:sn,span:Jt,timeZone:gn,tagsToggle:Cn,traceStartTime:In,hoverIndentGuideIds:_n,addHoverIndentGuideId:zn,removeHoverIndentGuideId:Hn,theme:sa,createSpanLink:Ma,focusedSpanId:la,createFocusSpanLink:jn,topOfViewRefType:ia,datasourceType:Aa}=this.props,ga=Et(sa);return s.createElement(Ie.Z,null,s.createElement(Ie.Z.Cell,{width:Vt,style:{overflow:"hidden"}},s.createElement(Ve,{span:Jt,showChildrenIcon:!1,hoverIndentGuideIds:_n,addHoverIndentGuideId:zn,removeHoverIndentGuideId:Hn}),s.createElement(O.zx,{fill:"text",onClick:this._detailToggle,className:E()(ga.expandedAccent,(0,O.gN)(sa)),style:{borderColor:Ft},"data-testid":"detail-row-expanded-accent"})),s.createElement(Ie.Z.Cell,{width:1-Vt},s.createElement("div",{className:ga.infoWrapper,style:{borderTopColor:Ft}},s.createElement(Ye,{detailState:At,linksGetter:this._linksGetter,logItemToggle:Nt,logsToggle:Rt,processToggle:wt,referenceItemToggle:_t,referencesToggle:Qt,warningsToggle:en,stackTracesToggle:sn,span:Jt,timeZone:gn,tagsToggle:Cn,traceStartTime:In,createSpanLink:Ma,focusedSpanId:la,createFocusSpanLink:jn,topOfViewRefType:ia,datasourceType:Aa}))))}}const je=(0,d.HE)(pt),ht=(0,u.B)(Bt=>{const{topOfViewRefType:Ft}=Bt,Vt=Ft===we.Explore?"fixed":"absolute";return{rowsWrapper:t.css`
      width: 100%;
    `,row:t.css`
      width: 100%;
    `,scrollToTopButton:t.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: ${Vt};
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `}});var we=(Bt=>(Bt.Explore="Explore",Bt.Panel="Panel",Bt))(we||{});const Qe={bar:28,detail:161,detailWithLogs:197},nt=5;function it(Bt,Ft,Vt,At,Nt){if(!Bt)return[];Nt&&At&&(Bt=Bt.filter(_t=>At.has(_t.spanID)));let Rt=null;const wt=[];for(let _t=0;_t<Bt.length;_t++){const Qt=Bt[_t],{spanID:en,depth:sn}=Qt;let Jt=!1;Rt!=null&&(sn>=Rt?Jt=!0:Rt=null),!Jt&&(Ft.has(en)&&(Rt=sn+1),wt.push({span:Qt,isDetail:!1,spanIndex:_t}),Vt.has(en)&&wt.push({span:Qt,isDetail:!0,spanIndex:_t}))}return wt}function yt(Bt){const[Ft,Vt]=Bt;return{left:Ft>0,right:Vt<1}}function Lt(Bt,Ft,Vt,At,Nt){return Bt?it(Bt.spans,Ft,Vt,At,Nt):[]}const Kt=(0,i.Z)(Lt),an=(0,i.Z)(x._h,n.isEqual),un=(0,i.Z)(yt,n.isEqual);class hn extends s.Component{constructor(Ft){super(Ft),this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=Rt=>this.getRowStates()[Rt].spanIndex,this.mapSpanIndexToRowIndex=Rt=>{const wt=this.getRowStates().length;for(let _t=0;_t<wt;_t++){const{spanIndex:Qt}=this.getRowStates()[_t];if(Qt===Rt)return _t}throw new Error(`unable to find row for span index: ${Rt}`)},this.setListView=Rt=>{const wt=this.listView!==Rt;this.listView=Rt,Rt&&wt&&this.props.registerAccessors(this.getAccessors())},this.getKeyFromIndex=Rt=>{const{isDetail:wt,span:_t}=this.getRowStates()[Rt];return`${_t.traceID}--${_t.spanID}--${wt?"detail":"bar"}`},this.getIndexFromKey=Rt=>{const wt=Rt.split("--"),_t=wt[0],Qt=wt[1],en=wt[2]==="detail",sn=this.getRowStates().length;for(let Jt=0;Jt<sn;Jt++){const{span:gn,isDetail:Cn}=this.getRowStates()[Jt];if(gn.spanID===Qt&&gn.traceID===_t&&Cn===en)return Jt}return-1},this.getRowHeight=Rt=>{const{span:wt,isDetail:_t}=this.getRowStates()[Rt];return _t?Array.isArray(wt.logs)&&wt.logs.length?Qe.detailWithLogs:Qe.detail:Qe.bar},this.renderRow=(Rt,wt,_t,Qt)=>{const{isDetail:en,span:sn,spanIndex:Jt}=this.getRowStates()[_t];return en?this.renderSpanDetailRow(sn,Rt,wt,Qt):this.renderSpanBarRow(sn,Jt,Rt,wt,Qt)},this.scrollToSpan=(Rt,wt)=>{if(wt==null)return;const _t=this.getRowStates().findIndex(Qt=>Qt.span.spanID===wt);_t>=0&&this.listView?.scrollToIndex(_t,Rt)},this.scrollToTop=()=>{const{topOfViewRef:Rt,datasourceType:wt,trace:_t}=this.props;Rt?.current?.scrollIntoView({behavior:"smooth"}),(0,l.ff)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:wt,grafana_version:f.v.buildInfo.version,numServices:_t.services.length,numSpans:_t.spans.length})};const{setTrace:Vt,trace:At,uiFind:Nt}=Ft;Vt(At,Nt)}componentDidMount(){this.scrollToSpan(this.props.headerHeight,this.props.focusedSpanId)}shouldComponentUpdate(Ft){let Vt;for(Vt in Ft)if(Ft[Vt]!==this.props[Vt])if(Vt==="shouldScrollToFirstUiFindMatch"){if(Ft[Vt])return!0}else return!0;return!1}componentDidUpdate(Ft){const{registerAccessors:Vt,trace:At,headerHeight:Nt}=Ft,{shouldScrollToFirstUiFindMatch:Rt,clearShouldScrollToFirstUiFindMatch:wt,scrollToFirstVisibleSpan:_t,registerAccessors:Qt,setTrace:en,trace:sn,uiFind:Jt,focusedSpanId:gn,focusedSpanIdForSearch:Cn}=this.props;At!==sn&&en(sn,Jt),this.listView&&Vt!==Qt&&Qt(this.getAccessors()),Rt&&(_t(),wt()),gn!==Ft.focusedSpanId&&this.scrollToSpan(Nt,gn),Cn!==Ft.focusedSpanIdForSearch&&this.scrollToSpan(Nt,Cn)}getRowStates(){const{childrenHiddenIDs:Ft,detailStates:Vt,trace:At,findMatchesIDs:Nt,showSpanFilterMatchesOnly:Rt}=this.props;return Kt(At,Ft,Vt,Nt,Rt)}getClipping(){const{currentViewRangeTime:Ft}=this.props;return un(Ft)}getViewedBounds(){const{currentViewRangeTime:Ft,trace:Vt}=this.props,[At,Nt]=Ft;return an({min:Vt.startTime,max:Vt.endTime,viewStart:At,viewEnd:Nt})}getAccessors(){const Ft=this.listView;if(!Ft)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:Ft.getViewHeight,getBottomRowIndexVisible:Ft.getBottomVisibleIndex,getTopRowIndexVisible:Ft.getTopVisibleIndex,getRowPosition:Ft.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(Ft,Vt,At,Nt,Rt){const{spanID:wt}=Ft,{serviceName:_t}=Ft.process,{childrenHiddenIDs:Qt,childrenToggle:en,detailStates:sn,detailToggle:Jt,findMatchesIDs:gn,spanNameColumnWidth:Cn,trace:In,spanBarOptions:_n,hoverIndentGuideIds:zn,addHoverIndentGuideId:Hn,removeHoverIndentGuideId:sa,createSpanLink:Ma,focusedSpanId:la,focusedSpanIdForSearch:jn,showSpanFilterMatchesOnly:ia,theme:Aa,datasourceType:ga}=this.props;if(!In)return null;const ya=(0,m._K)(_t,Aa),Wa=Qt.has(wt),rs=sn.has(wt),Xa=gn?gn.has(wt):!1,wa=wt===la||wt===jn,Pa=(0,x.yM)(Ft)||Wa&&(0,x.Qx)(In.spans,Vt);let os=null;if(Wa){const ua=(0,x.s2)(In.spans.slice(Vt));if(ua){const vs=this.getViewedBounds()(ua.startTime,ua.startTime+ua.duration);os={color:(0,m._K)(ua.process.serviceName,Aa),operationName:ua.operationName,serviceName:ua.process.serviceName,viewEnd:vs.end,viewStart:vs.start}}}const Ca=Ft.tags.find(ua=>ua.key===r);let ta=null;!Ft.hasChildren&&Ca&&(0,x.JE)(Ft)&&(ta={serviceName:Ca.value,color:(0,m._K)(Ca.value,Aa)});const Qa=ht(this.props);return s.createElement("div",{className:Qa.row,key:At,style:Nt,...Rt},s.createElement(Be,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:ya,spanBarOptions:_n,columnDivision:Cn,isChildrenExpanded:!Wa,isDetailExpanded:rs,isMatchingFilter:Xa,isFocused:wa,showSpanFilterMatchesOnly:ia,numTicks:nt,onDetailToggled:Jt,onChildrenToggled:en,rpc:os,noInstrumentedServer:ta,showErrorIcon:Pa,getViewedBounds:this.getViewedBounds(),traceStartTime:In.startTime,span:Ft,hoverIndentGuideIds:zn,addHoverIndentGuideId:Hn,removeHoverIndentGuideId:sa,createSpanLink:Ma,datasourceType:ga}))}renderSpanDetailRow(Ft,Vt,At,Nt){const{spanID:Rt}=Ft,{serviceName:wt}=Ft.process,{detailLogItemToggle:_t,detailLogsToggle:Qt,detailProcessToggle:en,detailReferencesToggle:sn,detailReferenceItemToggle:Jt,detailWarningsToggle:gn,detailStackTracesToggle:Cn,detailStates:In,detailTagsToggle:_n,detailToggle:zn,spanNameColumnWidth:Hn,trace:sa,timeZone:Ma,hoverIndentGuideIds:la,addHoverIndentGuideId:jn,removeHoverIndentGuideId:ia,linksGetter:Aa,createSpanLink:ga,focusedSpanId:ya,createFocusSpanLink:Wa,topOfViewRefType:rs,theme:Xa,datasourceType:wa}=this.props,Pa=In.get(Rt);if(!sa||!Pa)return null;const os=(0,m._K)(wt,Xa),Ca=ht(this.props);return s.createElement("div",{className:Ca.row,key:Vt,style:{...At,zIndex:1},...Nt},s.createElement(je,{color:os,columnDivision:Hn,onDetailToggled:zn,detailState:Pa,linksGetter:Aa,logItemToggle:_t,logsToggle:Qt,processToggle:en,referenceItemToggle:Jt,referencesToggle:sn,warningsToggle:gn,stackTracesToggle:Cn,span:Ft,timeZone:Ma,tagsToggle:_n,traceStartTime:sa.startTime,hoverIndentGuideIds:la,addHoverIndentGuideId:jn,removeHoverIndentGuideId:ia,createSpanLink:ga,focusedSpanId:ya,createFocusSpanLink:Wa,topOfViewRefType:rs,datasourceType:wa}))}render(){const Ft=ht(this.props),{scrollElement:Vt}=this.props;return s.createElement(s.Fragment,null,s.createElement(g,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:50,viewBufferMin:50,itemsWrapperClassName:Ft.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:Vt}),s.createElement(o.h,{className:Ft.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const Wn=(0,d.HE)(hn)},88989:()=>{"use strict"},5861:(Y,T,e)=>{"use strict";e.d(T,{JE:()=>m,LU:()=>t.LU,Qx:()=>d,_h:()=>n,s2:()=>r,yM:()=>o});var t=e(320);function n(c){const{min:p,max:g,viewStart:y,viewEnd:E}=c,v=g-p,h=p+y*v,a=g-(1-E)*v-h;return(C,D)=>({start:(C-h)/a,end:(D-h)/a})}function i(c,p,g){return!Array.isArray(g.tags)||!g.tags.length?!1:g.tags.some(y=>y.key===c&&y.value===p)}const s=i.bind(null,"span.kind","client"),l=i.bind(null,"span.kind","server"),f=i.bind(null,"error",!0),u=i.bind(null,"error","true"),o=c=>f(c)||u(c);function d(c,p){const{depth:g}=c[p];let y=p+1;for(;y<c.length&&c[y].depth>g;y++)if(o(c[y]))return!0;return!1}function r(c){if(c.length<=1||!s(c[0]))return!1;const g=c[0].depth+1;let y=1;for(;y<c.length&&c[y].depth===g;){if(l(c[y]))return c[y];y++}return null}const m=c=>c.tags.some(({key:p,value:g})=>p==="span.kind"&&g==="client")},82736:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>o});var t=e(9892),n=e(9085),i=e.n(n),s=e(66111),l=e(72648),f=e(99746);const u=d=>r=>({LabeledList:t.css`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${d&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:t.css`
      label: LabeledListItem;
      display: inline-block;
      ${d&&`
        border-right: 1px solid ${(0,f.h)(r,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:t.css`
      label: LabeledListLabel;
      color: ${r.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:t.css`
      label: LabeledListValue;
      margin-right: 0.55rem;
    `});function o(d){const{className:r,divider:m=!1,items:c}=d,p=(0,l.wW)(u(m));return s.createElement("ul",{className:i()(p.LabeledList,r)},c.map(({key:g,label:y,value:E})=>s.createElement("li",{className:p.LabeledListItem,key:`${g}`},s.createElement("span",{className:p.LabeledListLabel},y),s.createElement("strong",{className:p.LabeledListValue},E))))}},95638:(Y,T,e)=>{"use strict";e.d(T,{DetailState:()=>la,NewTracePageHeader:()=>zn,SpanBarSettings:()=>sa.ZP,TracePageHeader:()=>$e,TraceTimelineViewer:()=>k,autoColor:()=>u.h,filterSpans:()=>Jt,filterSpansNewTraceViewHeader:()=>Vt,transformTraceData:()=>jt});var t=e(9892),n=e(66111),i=e(41818),s=e(35645),l=e(7804),f=e(72648),u=e(99746),o=e(21710),d=e.n(o);const m={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let c;function p(){if(c)return c;const He=new(d())(document.body);return c=He,He}function g(He){const mt=p();Object.keys(He).forEach(bt=>{const Ht=He[bt];Ht&&mt.bind(m[bt].binding,Ht)})}function y(){p().reset()}var E=e(9085),v=e.n(E),h=e(42413),P=e(55478),a=e(93804),C=e(8180);const D=()=>({TimelineCollapser:t.css`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function b(He){const{onExpandAll:mt,onExpandOne:bt,onCollapseAll:Ht,onCollapseOne:nn}=He,qt=(0,f.wW)(D);return n.createElement("div",{className:qt.TimelineCollapser,"data-testid":"TimelineCollapser"},n.createElement(C.h,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:bt}),n.createElement(C.h,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:nn}),n.createElement(C.h,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:mt}),n.createElement(C.h,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:Ht}))}var M=e(54373);const x=(0,l.B)(()=>({TimelineColumnResizer:t.css`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:t.css`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:t.css`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:t.css`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:t.css`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:t.css`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:t.css`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:t.css`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `}));class R extends n.PureComponent{constructor(mt){super(mt),this._setRootElm=bt=>{this._rootElm=bt},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:bt,width:Ht}=this._rootElm.getBoundingClientRect(),{min:nn,max:qt}=this.props;return{clientXLeft:bt,width:Ht,maxValue:qt,minValue:nn}},this._handleDragUpdate=({value:bt})=>{this.setState({dragPosition:bt})},this._handleDragEnd=({manager:bt,value:Ht})=>{bt.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(Ht)},this._dragManager=new M.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let mt,bt;const{position:Ht,columnResizeHandleHeight:nn}=this.props,{dragPosition:qt}=this.state;mt=`${Ht*100}%`;const fn={left:mt};let bn=!1,En=!1;const xn=x();if(this._dragManager.isDragging()&&this._rootElm&&qt!=null){bn=qt<Ht,En=qt>Ht;const Pt=`${Math.min(Ht,qt)*100}%`,Ae=`calc(${(1-Math.max(Ht,qt))*100}% - 1px)`;bt={left:Pt,right:Ae}}else bt=fn;bt.height=nn;const qn=bn||En;return n.createElement("div",{className:xn.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},n.createElement("div",{className:v()(xn.gripIcon,qn&&xn.gripIconDragging),style:fn,"data-testid":"TimelineColumnResizer--gripIcon"}),n.createElement("div",{"aria-hidden":!0,className:v()(xn.dragger,qn&&xn.draggerDragging,En&&xn.draggerDraggingRight,bn&&xn.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:bt,"data-testid":"TimelineColumnResizer--dragger"}))}}const S=(0,l.B)(()=>({TimelineViewingLayer:t.css`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:t.css`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:t.css`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:t.css`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:t.css`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:t.css`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:t.css`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:t.css`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function O(He){return Reflect.has(He,"isOutOfView")}function U(He,mt,bt){return He+bt*(mt-He)}function I(He,mt,bt){return(bt-He)/(mt-He)}function F(He,mt){let[bt,Ht]=He<mt?[He,mt]:[mt,He];return bt>=1||Ht<=0?{isOutOfView:!0}:(bt<0&&(bt=0),Ht>1&&(Ht=1),{isDraggingLeft:He>mt,left:`${bt*100}%`,width:`${(Ht-bt)*100}%`})}function w(He,mt,bt,Ht,nn){const qt=I(He,mt,bt),fn=I(He,mt,Ht),bn=F(qt,fn);if(O(bn))return null;const{isDraggingLeft:En,left:xn,width:qn}=bn,Pt=S(),Ae=(0,t.cx)({[Pt.TimelineViewingLayerDraggedDraggingRight]:!En,[Pt.TimelineViewingLayerDraggedReframeDrag]:!nn,[Pt.TimelineViewingLayerDraggedShiftDrag]:nn});return n.createElement("div",{className:(0,t.cx)(Pt.TimelineViewingLayerDragged,Pt.TimelineViewingLayerDraggedDraggingLeft,Ae),style:{left:xn,width:qn},"data-testid":"Dragged"})}class K extends n.PureComponent{constructor(mt){super(mt),this._setRoot=bt=>{this._root=bt},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:bt,width:Ht}=this._root.getBoundingClientRect();return{clientXLeft:bt,width:Ht}},this._handleReframeMouseMove=({value:bt})=>{const[Ht,nn]=this.props.viewRangeTime.current,qt=U(Ht,nn,bt);this.props.updateNextViewRangeTime({cursor:qt})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:bt})=>{const{current:Ht,reframe:nn}=this.props.viewRangeTime,[qt,fn]=Ht,bn=U(qt,fn,bt),xn={reframe:{anchor:nn?nn.anchor:bn,shift:bn}};this.props.updateNextViewRangeTime(xn)},this._handleReframeDragEnd=({manager:bt,value:Ht})=>{const{current:nn,reframe:qt}=this.props.viewRangeTime,[fn,bn]=nn,En=U(fn,bn,Ht),xn=qt?qt.anchor:En,[qn,Pt]=En<xn?[En,xn]:[xn,En];bt.resetBounds(),this.props.updateViewRangeTime(qn,Pt,"timeline-header")},this._draggerReframe=new M.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(mt){const{boundsInvalidator:bt}=this.props;bt!==mt.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:mt}=this.props,{current:bt,cursor:Ht,reframe:nn,shiftEnd:qt,shiftStart:fn}=mt,[bn,En]=bt,xn=nn!=null||qt!=null||fn!=null;let qn;!xn&&Ht!=null&&Ht>=bn&&Ht<=En&&(qn=`${I(bn,En,Ht)*100}%`);const Pt=S();return n.createElement("div",{"aria-hidden":!0,className:Pt.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},qn!=null&&n.createElement("div",{className:Pt.TimelineViewingLayerCursorGuide,style:{left:qn},"data-testid":"TimelineViewingLayer--cursorGuide"}),nn!=null&&w(bn,En,nn.anchor,nn.shift,!1),qt!=null&&w(bn,En,En,qt,!0),fn!=null&&w(bn,En,bn,fn,!0))}}const L=He=>({TimelineHeaderRow:t.css`
      label: TimelineHeaderRow;
      background: ${(0,u.h)(He,"#ececec")};
      border-bottom: 1px solid ${(0,u.h)(He,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:t.css`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:t.css`
      label: TimelineHeaderWrapper;
      align-items: center;
    `});function V(He){const{duration:mt,nameColumnWidth:bt,numTicks:Ht,onCollapseAll:nn,onCollapseOne:qt,onColummWidthChange:fn,onExpandAll:bn,onExpandOne:En,updateViewRangeTime:xn,updateNextViewRangeTime:qn,viewRangeTime:Pt,columnResizeHandleHeight:Ae}=He,[Me,Ze]=Pt.current,tt=(0,f.wW)(L);return n.createElement(a.Z,{className:tt.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},n.createElement(a.Z.Cell,{className:v()(h.oD,h.H3,tt.TimelineHeaderWrapper),width:bt},n.createElement("h4",{className:tt.TimelineHeaderRowTitle},"Service & Operation"),n.createElement(b,{onCollapseAll:nn,onExpandAll:bn,onCollapseOne:qt,onExpandOne:En})),n.createElement(a.Z.Cell,{width:1-bt},n.createElement(K,{boundsInvalidator:bt,updateNextViewRangeTime:qn,updateViewRangeTime:xn,viewRangeTime:Pt}),n.createElement(P.Z,{numTicks:Ht,startTime:Me*mt,endTime:Ze*mt,showLabels:!0})),n.createElement(R,{columnResizeHandleHeight:Ae,position:bt,onChange:fn,min:.2,max:.85}))}var H=e(93183);const j=(0,l.B)(He=>({TraceTimelineViewer:t.css`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,u.h)(He,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,u.h)(He,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,u.h)(He,"teal")};
      }

      & .json-markup-null {
        color: ${(0,u.h)(He,"teal")};
      }

      & .json-markup-number {
        color: ${(0,u.h)(He,"blue","black")};
      }
    `})),A=5;class _ extends n.PureComponent{constructor(mt){super(mt),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"expandOne"})},this.state={height:0}}componentDidMount(){g({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:mt,updateNextViewRangeTime:bt,updateViewRangeTime:Ht,viewRange:nn,traceTimeline:qt,theme:fn,topOfViewRef:bn,focusedSpanIdForSearch:En,...xn}=this.props,{trace:qn}=xn,Pt=j(fn);return n.createElement("div",{className:Pt.TraceTimelineViewer,ref:Ae=>Ae&&this.setState({height:Ae.getBoundingClientRect().height})},n.createElement(V,{duration:qn.duration,nameColumnWidth:qt.spanNameColumnWidth,numTicks:A,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:mt,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:nn.time,updateNextViewRangeTime:bt,updateViewRangeTime:Ht,columnResizeHandleHeight:this.state.height}),n.createElement(H.ZP,{...xn,...qt,setSpanNameColumnWidth:mt,currentViewRangeTime:nn.time.current,topOfViewRef:bn,focusedSpanIdForSearch:En,datasourceType:this.props.datasourceType}))}}const k=(0,f.HE)(_);var Q=e(82897),re=e(77258),Z=e(39904);const oe=()=>({NewWindowIconLarge:t.css`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function G(He){const{isLarge:mt,className:bt,...Ht}=He,nn=(0,f.wW)(oe),qt=v()({[nn.NewWindowIconLarge]:mt},bt);return n.createElement(Z.J,{className:qt,name:"anchor",...Ht})}G.defaultProps={isLarge:!1};const le=He=>n.createElement("a",{href:He.href,title:He.title,target:"_blank",rel:"noopener noreferrer",className:He.className},He.children," ",n.createElement(G,null));function fe(He){const{links:mt}=He;return n.createElement(le,{href:mt[0].url,title:mt[0].text,className:He.className})}var ae=e(82736);const de=100,ee="<trace-without-root-span>",me=()=>({BreakableText:t.css`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),q=/\W*\w+\W*/g;function ne(He){const{className:mt,text:bt,wordRegexp:Ht=q}=He,nn=(0,f.wW)(me);if(!bt)return null;const qt=[];Ht.exec("");let fn=Ht.exec(bt)||[bt];for(;fn;)qt.push(n.createElement("span",{key:`${bt}-${qt.length}`,className:mt||nn.BreakableText},fn[0])),fn=Ht.exec(bt);return qt}ne.defaultProps={wordRegexp:q};const se=He=>({TraceName:t.css`
      label: TraceName;
      font-size: ${He.typography.size.lg};
    `});function he(He){const{className:mt,traceName:bt}=He,Ht=(0,f.wW)(se),nn=String(bt||ee),qt=n.createElement(ne,{text:nn});return n.createElement("span",{className:v()(Ht.TraceName,mt)},qt)}var ue=e(87855);const Te=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:de,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function Ve(){return Te}function ct(He){return(0,Q.get)(Ve(),He)}function Ie(He){const mt=He.references?He.references.find(bt=>bt.refType==="CHILD_OF"):null;return mt?mt.span:null}const Ke=/#\{([^{}]*)\}/g;function Ge(He){const mt=new Set;return He.replace(Ke,(bt,Ht)=>(mt.add(Ht),bt)),Array.from(mt)}function at(He,mt,bt){return He.replace(Ke,(Ht,nn)=>{const qt=bt[nn];return qt==null?"":mt(qt)})}function dt(He,mt){if(typeof He!="string")throw new Error("Invalid template");return{parameters:Ge(He),template:at.bind(null,He,mt)}}function Re(He){if(typeof He=="string")return mt=>mt===He;if(Array.isArray(He))return mt=>He.indexOf(mt)>-1;if(He==null)return()=>!0;throw new Error(`Invalid value: ${He}`)}const ye=He=>He;function Pe(He){try{const mt=dt(He.url,encodeURIComponent),bt=dt(He.text,ye);return{object:He,type:Re(He.type),key:Re(He.key),value:Re(He.value),url:mt,text:bt,parameters:(0,Q.uniq)(mt.parameters.concat(bt.parameters))}}catch(mt){return console.error(`Ignoring invalid link pattern: ${mt}`,He),null}}function be(He,mt){if(mt)return mt.find(bt=>bt.key===He)}function Be(He,mt){let bt=mt;for(;bt;){const Ht=be(He,bt.tags)||be(He,bt.process.tags);if(Ht)return Ht;bt=Ie(bt)}}function ke(He,mt){return He.template(mt)}function ot(He,mt){const bt=[],Ht=Object.keys(mt).filter(nn=>typeof mt[nn]=="string"||mt[nn]==="number");return He?.filter(nn=>nn?.type("traces")).forEach(nn=>{const qt={};nn?.parameters.every(bn=>{const En=bn;return Ht.includes(En)?(qt[bn]=mt[En],!0):!1})&&bt.push({url:ke(nn.url,qt),text:ke(nn.text,qt)})}),bt}function ft(He,mt,bt,Ht){const nn=bt[Ht];let qt="logs";const fn=mt.process.tags===bt;fn&&(qt="process"),mt.tags===bt&&(qt="tags");const En=[];return He.forEach(xn=>{if(xn.type(qt)&&xn.key(nn.key)&&xn.value(nn.value)){const qn={};xn.parameters.every(Ae=>{let Me=be(Ae,bt);return!Me&&!fn&&(Me=Be(Ae,mt)),Me?(qn[Ae]=Me.value,!0):(console.warn(`Skipping link pattern, missing parameter ${Ae} for key ${nn.key} in ${qt}.`,xn.object),!1)})&&En.push({url:ke(xn.url,qn),text:ke(xn.text,qn)})}}),En}function gt(He,mt){return(bt,Ht,nn)=>{if(He.length===0)return[];const qt=Ht[nn];let fn=mt.get(qt);return fn||(fn=ft(He,bt,Ht,nn),mt.set(qt,fn)),fn}}const St=(ct("linkPatterns")||[]).map(Pe).filter(He=>Boolean(He)),ut=(0,ue.Z)(10)(He=>{const mt=[];return He?ot(St,He):mt}),Dt=gt(St,new WeakMap);function ie(He){let mt;const bt=new Set(He.map(({spanID:Ht})=>Ht));for(let Ht=0;Ht<He.length;Ht++){if(He[Ht].references&&He[Ht].references.some(({traceID:bn,spanID:En})=>bn===He[Ht].traceID&&bt.has(En)))continue;if(!mt){mt=He[Ht];continue}const qt=He[Ht].references&&He[Ht].references.length||0,fn=mt.references&&mt.references.length||0;(qt<fn||qt===fn&&He[Ht].startTime<mt.startTime)&&(mt=He[Ht])}return mt?`${mt.process.serviceName}: ${mt.operationName}`:""}const De=(0,Q.memoize)(ie,He=>He.length?He[0].traceID:0);function Ne(He){for(let mt=0;mt<He.length;mt++){const bt=He[mt].tags.filter(qt=>qt.key==="http.method"),Ht=He[mt].tags.filter(qt=>qt.key==="http.status_code"),nn=He[mt].tags.filter(qt=>qt.key==="http.url"||qt.key==="http.target"||qt.key==="http.path");if(bt.length>0||Ht.length>0||nn.length>0)return{method:bt,status:Ht,url:nn}}return{}}const Je=(0,Q.memoize)(Ne,He=>He.length?He[0].traceID:0);var Xe=e(320),Le=e(13532);const Ue=He=>({theme:He,TracePageHeader:t.css`
      label: TracePageHeader;
      & > :last-child {
        border-bottom: 1px solid ${(0,u.h)(He,"#ccc")};
      }
    `,TracePageHeaderTitleRow:t.css`
      label: TracePageHeaderTitleRow;
      align-items: center;
      display: flex;
    `,TracePageHeaderBack:t.css`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderTitle:t.css`
      label: TracePageHeaderTitle;
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
      margin: 0 0 0 0.3em;
      padding-bottom: 0.5em;
    `,TracePageHeaderOverviewItems:t.css`
      label: TracePageHeaderOverviewItems;
      background-color: ${(0,u.h)(He,"#eee")};
      border-bottom: 1px solid ${(0,u.h)(He,"#e4e4e4")};
      padding: 0.25rem 0.5rem !important;
    `,TracePageHeaderOverviewItemValueDetail:v()(t.css`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:t.css`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,TracePageHeaderArchiveIcon:t.css`
      label: TracePageHeaderArchiveIcon;
      font-size: 1.78em;
      margin-right: 0.15em;
    `,TracePageHeaderTraceId:t.css`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
    `,titleBorderBottom:t.css`
      border-bottom: 1px solid ${(0,u.h)(He,"#e8e8e8")};
    `}),ve=(He,mt,bt)=>{const Ht=(0,re.dq)(He.startTime/1e3,{timeZone:mt,defaultWithMS:!0}),nn=Ht.match(/^(.+)(:\d\d\.\d+)$/);return nn?n.createElement("span",{className:bt.TracePageHeaderOverviewItemValue},nn[1],n.createElement("span",{className:bt.TracePageHeaderOverviewItemValueDetail},nn[2])):Ht},Se=[{key:"timestamp",label:"Trace Start:",renderer:ve},{key:"duration",label:"Duration:",renderer:He=>(0,Xe.LU)(He.duration)},{key:"service-count",label:"Services:",renderer:He=>new Set((0,Q.values)(He.processes).map(mt=>mt.serviceName)).size},{key:"depth",label:"Depth:",renderer:He=>(0,Q.get)((0,Q.maxBy)(He.spans,"depth"),"depth",0)+1},{key:"span-count",label:"Total Spans:",renderer:He=>He.spans.length}];function $e(He){const{trace:mt,updateNextViewRangeTime:bt,updateViewRangeTime:Ht,viewRange:nn,timeZone:qt}=He,fn=(0,f.wW)(Ue),bn=n.useMemo(()=>mt?ut(mt):[],[mt]);if(!mt)return null;const En=Se.map(qn=>{const{renderer:Pt,...Ae}=qn;return{...Ae,value:Pt(mt,qt,fn)}}),xn=n.createElement("h1",{className:fn.TracePageHeaderTitle},n.createElement(he,{traceName:De(mt.spans)})," ",n.createElement("small",{className:v()(fn.TracePageHeaderTraceId,h.pQ)},mt.traceID));return n.createElement("header",{className:fn.TracePageHeader},n.createElement("div",{className:v()(fn.TracePageHeaderTitleRow,fn.titleBorderBottom)},bn&&bn.length>0&&n.createElement(fe,{links:bn,className:fn.TracePageHeaderBack}),xn),En&&n.createElement(ae.Z,{className:fn.TracePageHeaderOverviewItems,items:En}),n.createElement(Le.Z,{trace:mt,viewRange:nn,updateNextViewRangeTime:bt,updateViewRangeTime:Ht}))}var Ye=e(61860),_e=e(19985),Et=e(47694),pt=e(65066),je=e(31403);const ht=He=>({ActionButton:t.css`
      label: ActionButton;
      overflow: hidden;
      position: relative;
      width: 110px;
      justify-content: center;
      &:after {
        content: '';
        background: ${He.colors.primary.main};
        display: block;
        position: absolute;
        right: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: all 0.8s;
      }
      &:active:after {
        margin: 0;
        opacity: 0.3;
        transition: 0s;
      }
    `});function we(He){const{onClick:mt,ariaLabel:bt,label:Ht,icon:nn}=He,qt=(0,f.wW)(ht);return n.createElement(je.zx,{className:qt.ActionButton,variant:"secondary",fill:"outline",type:"button",icon:nn,"aria-label":bt,onClick:mt},Ht)}const Qe=He=>({TracePageActions:t.css`
      label: TracePageActions;
      display: flex;
      gap: 4px;
      margin-top: 2px;
    `,feedback:t.css`
      margin: 6px;
      color: ${He.colors.text.secondary};
      font-size: ${He.typography.bodySmall.fontSize};
      &:hover {
        color: ${He.colors.text.link};
      }
    `});function nt(He){const{traceId:mt,data:bt,app:Ht}=He,nn=(0,f.l4)(),qt=Qe(nn),[fn,bn]=(0,n.useState)(!1),En=()=>{navigator.clipboard.writeText(mt),bn(!0),setTimeout(()=>{bn(!1)},5e3)},xn=()=>{const qn=(0,pt.gb)(bt,"Trace-"+mt.substring(mt.length-6));(0,i.ff)("grafana_traces_download_traces_clicked",{app:Ht,grafana_version:Et.vc.buildInfo.version,trace_format:qn,location:"trace-view"})};return n.createElement("div",{className:qt.TracePageActions},n.createElement("a",{href:"https://forms.gle/RZDEx8ScyZNguDoC8",className:qt.feedback,title:"Share your thoughts about tracing in Grafana.",target:"_blank",rel:"noreferrer noopener"},n.createElement(Z.J,{name:"comment-alt-message"})," Give feedback"),n.createElement(we,{onClick:En,ariaLabel:"Copy Trace ID",label:fn?"Copied!":"Trace ID",icon:"copy"}),n.createElement(we,{onClick:xn,ariaLabel:"Export Trace",label:"Export",icon:"save"}))}var it=e(13572),yt=e(26418),Lt=e(2352),Kt=e(11543),an=e(81764),un=e(52081),hn=e(8581),Wn=e(46967),Bt=e(75151),Ft=e(8944);function Vt(He,mt){if(!mt)return;let bt=!1;He.serviceName&&(mt=_t(mt,He),bt=!0),He.spanName&&(mt=Qt(mt,He),bt=!0),(He.from||He.to)&&(mt=en(mt,He),bt=!0);const Ht=At(mt,He.tags);return Ht&&(mt=Ht,bt=!0),bt?new Set(mt.map(nn=>nn.spanID)):void 0}const At=(He,mt)=>{if(mt=mt.filter(bt=>bt.key&&bt.key!==""||bt.value),mt.length>0)return He.filter(bt=>mt.every(Ht=>{if(Ht.key&&Ht.value){if(bt.tags.some(nn=>Rt(Ht,nn)))return wt(Ht.operator,!0);if(bt.process.tags.some(nn=>Rt(Ht,nn)))return wt(Ht.operator,!0);if(bt.logs.some(nn=>nn.fields.some(qt=>Rt(Ht,qt))))return wt(Ht.operator,!0)}else if(Ht.key){if(bt.tags.some(nn=>Nt(Ht.key,nn.key)))return wt(Ht.operator,!0);if(bt.process.tags.some(nn=>Nt(Ht.key,nn.key)))return wt(Ht.operator,!0);if(bt.logs&&bt.logs.some(nn=>nn.fields.some(qt=>Nt(Ht.key,qt.key))))return wt(Ht.operator,!0)}return wt(Ht.operator,!1)}))},Nt=(He,mt)=>He===mt.toString(),Rt=(He,mt)=>He.key===mt.key.toString()&&He.value===mt.value.toString(),wt=(He,mt)=>He==="="?mt:!mt,_t=(He,mt)=>He.filter(bt=>mt.serviceNameOperator==="="?bt.process.serviceName===mt.serviceName:bt.process.serviceName!==mt.serviceName),Qt=(He,mt)=>He.filter(bt=>mt.spanNameOperator==="="?bt.operationName===mt.spanName:bt.operationName!==mt.spanName),en=(He,mt)=>{const bt=sn(mt?.from||""),Ht=sn(mt?.to||"");let nn=[];if(bt&&(nn=He.filter(qt=>mt.fromOperator===">"?qt.duration>bt:qt.duration>=bt)),Ht){const qt=fn=>mt.toOperator==="<"?fn.duration<Ht:fn.duration<=Ht;nn=nn.length>0?nn.filter(fn=>qt(fn)):He.filter(fn=>qt(fn))}return nn},sn=He=>{if(He.includes("\u03BCs"))return parseFloat(He.split("\u03BCs")[0]);if(He.includes("ms"))return parseFloat(He.split("ms")[0])*1e3;if(He.includes("s"))return parseFloat(He.split("s")[0])*1e3*1e3;if(He.includes("m"))return parseFloat(He.split("m")[0])*1e3*1e3*60;if(He.includes("h"))return parseFloat(He.split("h")[0])*1e3*1e3*60*60};function Jt(He,mt){if(!mt)return;const bt=[],Ht=[];He.split(/\s+/).filter(Boolean).forEach(En=>{En[0]==="-"?Ht.push(En.slice(1).toLowerCase()):bt.push(En.toLowerCase())});const nn=(En,xn)=>En.some(qn=>xn.toLowerCase().includes(qn)),qt=En=>En?En.some(xn=>nn(Ht,xn.key)?!1:nn(bt,xn.key)||nn(bt,xn.value.toString())):!1,fn=En=>nn(bt,En.operationName)||nn(bt,En.process.serviceName)||qt(En.tags)||En.logs!==null&&En.logs.some(xn=>qt(xn.fields))||qt(En.process.tags)||bt.some(xn=>xn===En.spanID);return new Set(mt.filter(fn).map(En=>En.spanID))}const gn=(0,n.memo)(function(mt){const{search:bt,spanFilterMatches:Ht,showSpanFilterMatchesOnly:nn,setShowSpanFilterMatchesOnly:qt,setFocusedSpanIdForSearch:fn,datasourceType:bn,reset:En,totalSpans:xn}=mt,[qn,Pt]=(0,n.useState)(-1),Ae=(0,f.wW)(Cn);(0,n.useEffect)(()=>{Pt(-1),fn("")},[fn,Ht]),(0,n.useEffect)(()=>{if(Ht){const qe=Array.from(Ht);fn(qe[qn])}},[qn,fn,Ht]);const Me=()=>{if((0,i.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:bn,grafana_version:s.v.buildInfo.version,direction:"next"}),qn===-1||Ht&&qn===Ht.size-1){Pt(0);return}Pt(qn+1)},Ze=()=>{if((0,i.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:bn,grafana_version:s.v.buildInfo.version,direction:"prev"}),Ht&&(qn===-1||qn===0)){Pt(Ht.size-1);return}Pt(qn-1)},tt=Ht&&Ht?.size>0,It=(0,n.useMemo)(()=>bt.serviceName&&bt.serviceName!==""||bt.spanName&&bt.spanName!==""||sn(bt.from||"")||sn(bt.to||"")||bt.tags.length>1||bt.tags.some(qe=>qe.key),[bt.serviceName,bt.spanName,bt.from,bt.to,bt.tags]),$t=Ht?.size===1?"match":"matches",Tt=Ht?.size===0?n.createElement(n.Fragment,null,n.createElement("span",null,"0 matches"),n.createElement(Ye.u,{content:"There are 0 span matches for the filters selected. Please try removing some of the selected filters.",placement:"left"},n.createElement("span",{className:Ae.matchesTooltip},n.createElement(Z.J,{name:"info-circle",size:"lg"})))):qn!==-1?`${qn+1}/${Ht?.size} ${$t}`:`${Ht?.size} ${$t}`;return n.createElement("div",{className:Ae.searchBar},n.createElement("div",{className:Ae.buttons},n.createElement(n.Fragment,null,n.createElement("div",{className:Ae.resetButton},n.createElement(je.zx,{variant:"destructive",disabled:!It,type:"button",fill:"outline","aria-label":"Reset filters button",onClick:En},"Reset"),n.createElement("div",{className:Ae.matchesOnly},n.createElement(Ft.r,{value:nn,onChange:qe=>qt(qe.currentTarget.checked??!1),label:"Show matches only switch"}),n.createElement("span",{onClick:()=>qt(!nn)},"Show matches only"))),n.createElement("div",{className:Ae.nextPrevButtons},n.createElement("span",{className:Ae.matches},Ht?Tt:`${xn} spans`),n.createElement(je.zx,{variant:"secondary",disabled:!tt,type:"button",fill:"outline","aria-label":"Prev result button",onClick:Ze},"Prev"),n.createElement(je.zx,{variant:"secondary",disabled:!tt,type:"button",fill:"outline","aria-label":"Next result button",onClick:Me},"Next")))))}),Cn=()=>({searchBar:t.css`
      display: inline;
    `,matchesOnly:t.css`
      display: inline-flex;
      margin: 0 0 0 10px;
      vertical-align: middle;

      span {
        cursor: pointer;
        margin: -3px 0 0 5px;
      }
    `,buttons:t.css`
      display: flex;
      justify-content: flex-end;
      margin: 5px 0 0 0;
    `,resetButton:t.css`
      order: 1;
    `,nextPrevButtons:t.css`
      margin-left: auto;
      order: 2;

      button {
        margin-left: 8px;
      }
    `,matches:t.css`
      margin-right: 5px;
    `,matchesTooltip:t.css`
      color: #aaa;
      margin: -2px 0 0 10px;
    `}),In=(0,n.memo)(He=>{const{trace:mt,search:bt,setSearch:Ht,showSpanFilters:nn,setShowSpanFilters:qt,showSpanFilterMatchesOnly:fn,setShowSpanFilterMatchesOnly:bn,setFocusedSpanIdForSearch:En,spanFilterMatches:xn,datasourceType:qn}=He,Pt={...(0,f.wW)(_n)},[Ae,Me]=(0,n.useState)(),[Ze,tt]=(0,n.useState)(),[It,$t]=(0,n.useState)(),[Tt,qe]=(0,n.useState)({}),rn=(0,n.useCallback)(()=>{Me(void 0),tt(void 0),$t(void 0),qe({}),Ht(Bt.js)},[Ht]);if((0,n.useEffect)(()=>{rn()},[rn,mt]),!mt)return null;const dn=()=>{if(!Ae){const An=mt.spans.map(Fn=>Fn.process.serviceName);Me((0,Q.uniq)(An).sort().map(it.E))}},Dn=()=>{if(!Ze){const An=mt.spans.map(Fn=>Fn.operationName);tt((0,Q.uniq)(An).sort().map(it.E))}},wn=()=>{if(!It){let An=[],Fn=[];mt.spans.forEach(da=>{da.tags.forEach(va=>{An.push(va.key)}),da.process.tags.forEach(va=>{An.push(va.key)}),da.logs!==null&&da.logs.forEach(va=>{va.fields.forEach(ea=>{Fn.push(ea.key)})})}),An=(0,Q.uniq)(An).sort(),Fn=(0,Q.uniq)(Fn).sort(),$t([...An,...Fn].map(it.E))}},Gn=async An=>{const Fn=[];return mt.spans.forEach(da=>{const va=da.tags.find(xa=>xa.key===An)?.value;va&&Fn.push(va.toString());const ea=da.process.tags.find(xa=>xa.key===An)?.value;ea&&Fn.push(ea.toString()),da.logs!==null&&da.logs.forEach(xa=>{const za=xa.fields.find(fs=>fs.key===An)?.value;za&&Fn.push(za.toString())})}),(0,Q.uniq)(Fn).sort().map(it.E)},ra=(An,Fn)=>{Ht({...bt,tags:bt.tags?.map(va=>va.id===An.id?{...va,key:Fn?.value||"",value:void 0}:va)}),(async()=>{if(Fn?.value)qe({...Tt,[An.id]:await Gn(Fn.value)});else{const va={...Tt};va[An.id]&&delete va[An.id],qe(va)}})()},Sa=()=>{const An={id:(0,Bt.kb)(),operator:"="};Ht({...bt,tags:[...bt.tags,An]})},Da=An=>{let Fn=bt.tags.filter(da=>da.id!==An);Fn.length===0&&(Fn=[{id:(0,Bt.kb)(),operator:"="}]),Ht({...bt,tags:Fn})},Ta=n.createElement(Ye.u,{content:"Filter your spans below. The more filters, the more specific the filtered spans.",placement:"right"},n.createElement("span",{className:Pt.collapseLabel},"Span Filters",n.createElement(Z.J,{size:"md",name:"info-circle"})));return n.createElement("div",{className:Pt.container},n.createElement(Lt.U,{label:Ta,collapsible:!0,isOpen:nn,onToggle:qt},n.createElement(Kt.Z,null,n.createElement(an._,{label:"Service Name",labelWidth:16},n.createElement(un.Lh,{spacing:"xs"},n.createElement(hn.Ph,{"aria-label":"Select service name operator",onChange:An=>Ht({...bt,serviceNameOperator:An.value}),options:[(0,it.E)("="),(0,it.E)("!=")],value:bt.serviceNameOperator}),n.createElement(hn.Ph,{"aria-label":"Select service name",isClearable:!0,onChange:An=>Ht({...bt,serviceName:An?.value||""}),onOpenMenu:dn,options:Ae,placeholder:"All service names",value:bt.serviceName||null})))),n.createElement(Kt.Z,null,n.createElement(an._,{label:"Span Name",labelWidth:16},n.createElement(un.Lh,{spacing:"xs"},n.createElement(hn.Ph,{"aria-label":"Select span name operator",onChange:An=>Ht({...bt,spanNameOperator:An.value}),options:[(0,it.E)("="),(0,it.E)("!=")],value:bt.spanNameOperator}),n.createElement(hn.Ph,{"aria-label":"Select span name",isClearable:!0,onChange:An=>Ht({...bt,spanName:An?.value||""}),onOpenMenu:Dn,options:Ze,placeholder:"All span names",value:bt.spanName||null})))),n.createElement(Kt.Z,null,n.createElement(an._,{label:"Duration",labelWidth:16},n.createElement(un.Lh,{spacing:"xs"},n.createElement(hn.Ph,{"aria-label":"Select from operator",onChange:An=>Ht({...bt,fromOperator:An.value}),options:[(0,it.E)(">"),(0,it.E)(">=")],value:bt.fromOperator}),n.createElement(Wn.I,{"aria-label":"Select from value",onChange:An=>Ht({...bt,from:An.currentTarget.value}),placeholder:"e.g. 100ms, 1.2s",value:bt.from||"",width:18}),n.createElement(hn.Ph,{"aria-label":"Select to operator",onChange:An=>Ht({...bt,toOperator:An.value}),options:[(0,it.E)("<"),(0,it.E)("<=")],value:bt.toOperator}),n.createElement(Wn.I,{"aria-label":"Select to value",onChange:An=>Ht({...bt,to:An.currentTarget.value}),placeholder:"e.g. 100ms, 1.2s",value:bt.to||"",width:18})))),n.createElement(Kt.Z,null,n.createElement(an._,{label:"Tags",labelWidth:16,tooltip:"Filter by tags, process tags or log fields in your spans."},n.createElement("div",null,bt.tags.map((An,Fn)=>n.createElement("div",{key:Fn},n.createElement(un.Lh,{spacing:"xs",width:"auto"},n.createElement(hn.Ph,{"aria-label":"Select tag key",isClearable:!0,key:An.key,onChange:da=>ra(An,da),onOpenMenu:wn,options:It,placeholder:"Select tag",value:An.key||null}),n.createElement(hn.Ph,{"aria-label":"Select tag operator",onChange:da=>{Ht({...bt,tags:bt.tags?.map(va=>va.id===An.id?{...va,operator:da.value}:va)})},options:[(0,it.E)("="),(0,it.E)("!=")],value:An.operator}),n.createElement("span",{className:Pt.tagValues},n.createElement(hn.Ph,{"aria-label":"Select tag value",isClearable:!0,key:An.value,onChange:da=>{Ht({...bt,tags:bt.tags?.map(va=>va.id===An.id?{...va,value:da?.value||""}:va)})},options:Tt[An.id]?Tt[An.id]:[],placeholder:"Select value",value:An.value})),n.createElement(yt.AccessoryButton,{"aria-label":"Remove tag",variant:"secondary",icon:"times",onClick:()=>Da(An.id),title:"Remove tag"}),n.createElement("span",{className:Pt.addTag},bt?.tags?.length&&Fn===bt.tags.length-1&&n.createElement(yt.AccessoryButton,{"aria-label":"Add tag",variant:"secondary",icon:"plus",onClick:Sa,title:"Add tag"})))))))),n.createElement(gn,{search:bt,spanFilterMatches:xn,showSpanFilterMatchesOnly:fn,setShowSpanFilterMatchesOnly:bn,setFocusedSpanIdForSearch:En,datasourceType:qn,reset:rn,totalSpans:mt.spans.length})))});In.displayName="SpanFilters";const _n=()=>({container:t.css`
      margin: 0.5em 0 -8px 0;
      z-index: 5;

      & > div {
        border-left: none;
        border-right: none;
      }
    `,collapseLabel:t.css`
      svg {
        color: #aaa;
        margin: -2px 0 0 10px;
      }
    `,addTag:t.css`
      margin: 0 0 0 10px;
    `,tagValues:t.css`
      max-width: 200px;
    `}),zn=(0,n.memo)(He=>{const{trace:mt,data:bt,app:Ht,timeZone:nn,search:qt,setSearch:fn,showSpanFilters:bn,setShowSpanFilters:En,showSpanFilterMatchesOnly:xn,setShowSpanFilterMatchesOnly:qn,setFocusedSpanIdForSearch:Pt,spanFilterMatches:Ae,datasourceType:Me,setHeaderHeight:Ze}=He,tt={...(0,f.wW)(Ue),...(0,f.wW)(Hn)};(0,n.useEffect)(()=>{Ze(document.querySelector("."+tt.header)?.scrollHeight??0)},[Ze,bn,tt.header]);const It=(0,n.useMemo)(()=>mt?ut(mt):[],[mt]);if(!mt)return null;const $t=n.createElement("h1",{className:v()(tt.title)},n.createElement(he,{traceName:De(mt.spans)}),n.createElement("small",{className:tt.duration},(0,Xe.LU)(mt.duration))),{method:Tt,status:qe,url:rn}=Je(mt.spans);let dn="green";return qe&&qe.length>0&&(qe[0].value.toString().charAt(0)==="4"?dn="orange":qe[0].value.toString().charAt(0)==="5"&&(dn="red")),n.createElement("header",{className:tt.header},n.createElement("div",{className:tt.titleRow},It&&It.length>0&&n.createElement(fe,{links:It,className:tt.TracePageHeaderBack}),$t,n.createElement(nt,{traceId:mt.traceID,data:bt,app:Ht})),n.createElement("div",{className:tt.subtitle},n.createElement("span",{className:tt.timestamp},ve(mt,nn,tt)),n.createElement("span",{className:tt.tagMeta},Tt&&Tt.length>0&&n.createElement(Ye.u,{content:"http.method",interactive:!0},n.createElement("span",{className:tt.tag},n.createElement(_e.C,{text:Tt[0].value,color:"blue"}))),qe&&qe.length>0&&n.createElement(Ye.u,{content:"http.status_code",interactive:!0},n.createElement("span",{className:tt.tag},n.createElement(_e.C,{text:qe[0].value,color:dn}))),rn&&rn.length>0&&n.createElement(Ye.u,{content:"http.url or http.target or http.path",interactive:!0},n.createElement("span",{className:tt.url},rn[0].value)))),n.createElement(In,{trace:mt,showSpanFilters:bn,setShowSpanFilters:En,showSpanFilterMatchesOnly:xn,setShowSpanFilterMatchesOnly:qn,search:qt,setSearch:fn,spanFilterMatches:Ae,setFocusedSpanIdForSearch:Pt,datasourceType:Me}))});zn.displayName="NewTracePageHeader";const Hn=He=>({header:t.css`
      label: TracePageHeader;
      background-color: ${He.colors.background.primary};
      padding: 0.5em 0 0 0;
      position: sticky;
      top: 0;
      z-index: 5;
    `,titleRow:t.css`
      align-items: flex-start;
      display: flex;
      padding: 0 8px;
    `,title:t.css`
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
    `,subtitle:t.css`
      flex: 1;
      line-height: 1em;
      margin: -0.5em 0.5em 0.75em 0.5em;
    `,tag:t.css`
      margin: 0 0.5em 0 0;
    `,duration:t.css`
      color: #aaa;
      margin: 0 0.75em;
    `,timestamp:t.css`
      vertical-align: middle;
    `,tagMeta:t.css`
      margin: 0 0.75em;
      vertical-align: text-top;
    `,url:t.css`
      margin: -2.5px 0.3em;
      height: 15px;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
      max-width: 30%;
      display: inline-block;
    `});var sa=e(52541),Ma=e(88989);class la{constructor(mt){const{isTagsOpen:bt,isProcessOpen:Ht,isReferencesOpen:nn,isWarningsOpen:qt,isStackTracesOpen:fn,logs:bn,references:En}=mt||{};this.isTagsOpen=Boolean(bt),this.isProcessOpen=Boolean(Ht),this.isReferencesOpen=Boolean(nn),this.isWarningsOpen=Boolean(qt),this.isStackTracesOpen=Boolean(fn),this.logs={isOpen:Boolean(bn&&bn.isOpen),openedItems:bn&&bn.openedItems?new Set(bn.openedItems):new Set},this.references={isOpen:Boolean(En&&En.isOpen),openedItems:En&&En.openedItems?new Set(En.openedItems):new Set}}toggleTags(){const mt=new la(this);return mt.isTagsOpen=!this.isTagsOpen,mt}toggleProcess(){const mt=new la(this);return mt.isProcessOpen=!this.isProcessOpen,mt}toggleReferences(){const mt=new la(this);return mt.references.isOpen=!this.references.isOpen,mt}toggleReferenceItem(mt){const bt=new la(this);return bt.references.openedItems.has(mt)?bt.references.openedItems.delete(mt):bt.references.openedItems.add(mt),bt}toggleWarnings(){const mt=new la(this);return mt.isWarningsOpen=!this.isWarningsOpen,mt}toggleStackTraces(){const mt=new la(this);return mt.isStackTracesOpen=!this.isStackTracesOpen,mt}toggleLogs(){const mt=new la(this);return mt.logs.isOpen=!this.logs.isOpen,mt}toggleLogItem(mt){const bt=new la(this);return bt.logs.openedItems.has(mt)?bt.logs.openedItems.delete(mt):bt.logs.openedItems.add(mt),bt}}var jn=e(90158);class ia{static iterFunction(mt,bt=0){return Ht=>mt(Ht.value,Ht,bt)}static searchFunction(mt){return typeof mt=="function"?mt:(bt,Ht)=>mt instanceof ia?Ht===mt:bt===mt}constructor(mt,bt=[]){this.value=mt,this.children=bt}get depth(){return this.children?.reduce((mt,bt)=>Math.max(bt.depth+1,mt),1)}get size(){let mt=0;return this.walk(()=>mt++),mt}addChild(mt){return this.children?.push(mt instanceof ia?mt:new ia(mt)),this}find(mt){if(ia.iterFunction(ia.searchFunction(mt))(this))return this;for(let Ht=0;Ht<this.children.length;Ht++){const nn=this.children[Ht].find(mt);if(nn)return nn}return null}getPath(mt){const bt=ia.iterFunction(ia.searchFunction(mt)),Ht=(nn,qt)=>{const fn=qt.concat([nn]);if(bt(nn))return fn;for(let bn=0;bn<nn.children.length;bn++){const En=nn.children[bn],xn=Ht(En,fn);if(xn)return xn}return null};return Ht(this,[])}walk(mt,bt=0){const Ht=[];let nn=bt;for(Ht.push({node:this,depth:nn});Ht.length;){const qt=Ht.pop();if(qt){const{node:fn,depth:bn}=qt;mt(fn.value,fn,bn),nn=(bn||0)+1;let En=fn.children.length-1;for(;En>=0;)Ht.push({node:fn.children[En],depth:nn}),En--}}}}function Aa(He,mt){return He.localeCompare(mt)}function ga(He,mt){return He-mt}function ya(He){return`sorted ${He===1?"ascending":"descending"}`}function Wa(He,mt){const{defaultDir:bt=1}=mt;return{key:mt.name,dir:He.key===mt.name?-1*He.dir:bt}}const rs=He=>He.serviceName,Xa=He=>He.tags;var wa=e(27303);const Pa=He=>He.spanID,os=He=>He.operationName,Ca=He=>He.duration,ta=He=>He.startTime,Qa=He=>He.processID,ua=He=>He.references||[],vs=(0,jn.P1)((0,jn.P1)(({span:He})=>He,ua),({type:He})=>He,(He,mt)=>He.find(bt=>bt.refType===mt)),qa=(0,jn.P1)(He=>vs({span:He,type:"CHILD_OF"}),He=>He?He.spanID:null),Fa=He=>{if(!He.process)throw new Error(`
      you must hydrate the spans with the processes, perhaps
      using hydrateSpansWithProcesses(), before accessing a span's process
    `);return He.process},ns=(0,jn.P1)(Fa,rs),ca=(0,jn.P1)(({spans:He})=>He,({leftBound:He})=>He,({rightBound:He})=>He,(He,mt,bt)=>He.filter(Ht=>ta(Ht)>=mt&&ta(Ht)<=bt)),as=(0,jn.P1)(({spans:He})=>He,({text:He})=>He,(He,mt)=>He.filter(bt=>bt?(0,wa.C)(`${ns(bt)} ${os(bt)}`,mt).found:!1)),Os=He=>He.traceID,bs=He=>He.spans,ir=He=>He.processes,ur=(0,jn.P1)(He=>He.span,He=>He.processes,(He,mt)=>({...He,process:mt[Qa(He)]})),mr=(0,jn.P1)(bs,He=>He.reduce((mt,bt)=>mt.set(Pa(bt),bt),new Map)),er="__root__";function ds(He){const mt=new Map(He.spans.map(qt=>[qt.spanID,new ia(qt.spanID)])),bt=new Map(He.spans.map(qt=>[qt.spanID,qt])),Ht=new ia(er);He.spans.forEach(qt=>{const fn=mt.get(qt.spanID);if(Array.isArray(qt.references)&&qt.references.length){const{refType:bn,spanID:En}=qt.references[0];if(bn==="CHILD_OF"||bn==="FOLLOWS_FROM")(mt.get(En)||Ht).children?.push(fn);else throw new Error(`Unrecognized ref type: ${bn}`)}else Ht.children.push(fn)});const nn=(qt,fn)=>{const bn=qt?.value?bt.get(qt.value.toString()):void 0,En=fn?.value?bt.get(fn.value.toString()):void 0;return+(bn?.startTime>En?.startTime)||+(bn?.startTime===En?.startTime)-1};return He.spans.forEach(qt=>{const fn=mt.get(qt.spanID);fn.children.length>1&&fn?.children.sort(nn)}),Ht.children.sort(nn),Ht}const ws=He=>{const mt=bs(He),bt=ir(He);return{...He,spans:mt.map(Ht=>ur({span:Ht,processes:bt}))}},us=(0,jn.P1)(bs,He=>He.length),Ws=(0,jn.P1)(bs,He=>He.reduce((mt,bt)=>mt?Math.min(mt,ta(bt)):ta(bt),0)),Es=(0,jn.P1)(bs,Ws,(He,mt)=>He.reduce((bt,Ht)=>bt?Math.max(ta(Ht)-mt+Ca(Ht),bt):Ca(Ht),0)),Fs=(0,jn.P1)(ds,mr,(He,mt)=>He.children.map(bt=>mt.get(bt.value)).sort((bt,Ht)=>ga(ta(bt),ta(Ht)))[0]),Gs=(0,jn.P1)(ds,He=>He.depth-1),fr=(0,jn.P1)((0,jn.P1)(He=>He.trace,ds),(0,jn.P1)(He=>He.span,Pa),(He,mt)=>He.getPath(mt).length-1),lr=(0,jn.P1)(ir,He=>Object.keys(He).reduce((mt,bt)=>mt.add(rs(He[bt])),new Set)),tr=(0,jn.P1)(lr,He=>He.size),Ys={ms:Xe.Cz,s:Xe.Gk},js=(0,jn.P1)(Es,He=>He>=Xe.WT?Ys.s:Ys.ms),gr=(0,jn.P1)(({duration:He})=>He,({unit:He})=>Ys[He],(He,mt)=>mt(He)),is=(0,jn.P1)(({duration:He})=>He,(0,jn.P1)(({trace:He})=>He,js),(He,mt)=>mt(He)),pr=(0,jn.P1)(({trace:He})=>He,({spans:He})=>He,({sort:He})=>He,(He,mt,{dir:bt,comparator:Ht,selector:nn})=>[...mt].sort((qt,fn)=>bt*Ht(nn(qt,He),nn(fn,He)))),hr=(0,jn.P1)((0,jn.P1)(He=>He.trace,ds),(0,jn.P1)(He=>He.span,Pa),(He,mt)=>{const bt=He.find(mt);return bt?bt.size-1:-1}),vr=(0,jn.P1)((0,jn.P1)((0,jn.P1)(ws,Fs),(0,jn.zB)({name:os,serviceName:ns})),({name:He,serviceName:mt})=>`${mt}: ${He}`),nr=(0,jn.P1)(({spans:He})=>He,(0,jn.P1)(({trace:He})=>He,ds),({collapsed:He})=>He,(He,mt,bt)=>{const Ht=bt.reduce((nn,qt)=>(mt.find(qt).walk(fn=>fn!==qt&&nn.add(fn)),nn),new Set);return Ht.size>0?He.filter(nn=>!Ht.has(Pa(nn))):He}),cr=4,Rs=3,ms=(0,jn.P1)(({trace:He})=>He,({interval:He=cr})=>He,({width:He=Rs})=>He,(He,mt,bt)=>[...Array(mt+1).keys()].map(Ht=>({timestamp:Ws(He)+Es(He)*(Ht/mt),width:bt})));function Qs(He){const mt=new Map,bt=He.reduce((nn,qt)=>(nn.some(fn=>fn.key===qt.key&&fn.value===qt.value)?mt.set(`${qt.key}:${qt.value}`,`Duplicate tag "${qt.key}:${qt.value}"`):nn.push(qt),nn),[]),Ht=Array.from(mt.values());return{tags:bt,warnings:Ht}}function ys(He,mt){const bt=He?.slice()??[],Ht=(mt||[]).map(nn=>nn.toLowerCase());return bt.sort((nn,qt)=>{const fn=nn.key.toLowerCase(),bn=qt.key.toLowerCase();for(let En=0;En<Ht.length;En++){const xn=Ht[En];if(fn.startsWith(xn)&&!bn.startsWith(xn))return-1;if(!fn.startsWith(xn)&&bn.startsWith(xn))return 1}return fn>bn?1:fn<bn?-1:0}),bt}function jt(He){if(!He?.traceID)return null;const mt=He.traceID.toLowerCase();let bt=0,Ht=Number.MAX_SAFE_INTEGER;const nn=new Map,qt=new Map;He.spans=He.spans.filter(Ae=>Boolean(Ae.startTime)),He.processes=Object.entries(He.processes).reduce((Ae,[Me,Ze])=>(Ae[Me]={...Ze,tags:ys(Ze.tags)},Ae),{});const fn=He.spans.length;for(let Ae=0;Ae<fn;Ae++){const Me=He.spans[Ae],{startTime:Ze,duration:tt,processID:It}=Me;let $t=Me.spanID;Ze<Ht&&(Ht=Ze),Ze+tt>bt&&(bt=Ze+tt);const Tt=nn.get($t);Tt!=null?(console.warn(`Dupe spanID, ${Tt+1} x ${$t}`,Me,qt.get($t)),(0,Q.isEqual)(Me,qt.get($t))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),nn.set($t,Tt+1),$t=`${$t}_${Tt}`,Me.spanID=$t):nn.set($t,1),Me.process=He.processes[It],qt.set($t,Me)}const bn=ds(He),En=[],xn={};bn.walk((Ae,Me,Ze=0)=>{if(Ae==="__root__"||typeof Ae!="string")return;const tt=qt.get(Ae);if(!tt)return;const{serviceName:It}=tt.process;xn[It]=(xn[It]||0)+1,tt.relativeStartTime=tt.startTime-Ht,tt.depth=Ze-1,tt.hasChildren=Me.children.length>0,tt.childSpanCount=Me.children.length,tt.warnings=tt.warnings||[],tt.tags=tt.tags||[],tt.references=tt.references||[];const $t=Qs(tt.tags);tt.tags=ys($t.tags,ct("topTagPrefixes")),tt.warnings=tt.warnings.concat($t.warnings),tt.references.forEach((Tt,qe)=>{const rn=qt.get(Tt.spanID);rn&&(Tt.span=rn,qe>0&&(rn.subsidiarilyReferencedBy=rn.subsidiarilyReferencedBy||[],rn.subsidiarilyReferencedBy.push({spanID:Ae,traceID:mt,span:tt,refType:Tt.refType})))}),En.push(tt)});const qn=De(En);return{services:Object.keys(xn).map(Ae=>({name:Ae,numberOfSpans:xn[Ae]})),spans:En,traceID:mt,traceName:qn,processes:He.processes,duration:bt-Ht,startTime:Ht,endTime:bt}}},52541:(Y,T,e)=>{"use strict";e.d(T,{Hn:()=>m,Kg:()=>p,ZP:()=>g,th:()=>c});var t=e(9892),n=e(66111),i=e(13572),s=e(73446),l=e(72648),f=e(11543),u=e(81764),o=e(8581),d=e(46967),r=e(62911);const m="None",c="Duration",p="Tag";function g({options:E,onOptionsChange:v}){const h=(0,l.wW)(y),P=[m,c,p].map(i.E);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Span bar"),n.createElement("div",{className:h.infoText},"Add additional info next to the service and operation on a span bar row in the trace view",n.createElement(r.j,{hrefSuffix:`${E.type}/#span-bar`})),n.createElement(f.Z,{className:h.row},n.createElement(u._,{label:"Label",labelWidth:26,tooltip:"Default: duration",grow:!0},n.createElement(o.Ph,{inputId:"label",options:P,value:E.jsonData.spanBar?.type||"",onChange:a=>{(0,s.tp)({onOptionsChange:v,options:E},"spanBar",{...E.jsonData.spanBar,type:a?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:40}))),E.jsonData.spanBar?.type===p&&n.createElement(f.Z,{className:h.row},n.createElement(u._,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key"},n.createElement(d.I,{type:"text",placeholder:"Enter tag key",onChange:a=>(0,s.tp)({onOptionsChange:v,options:E},"spanBar",{...E.jsonData.spanBar,tag:a.currentTarget.value}),value:E.jsonData.spanBar?.tag||"",width:40}))))}const y=E=>({infoText:t.css`
    label: infoText;
    padding-bottom: ${E.spacing(2)};
    color: ${E.colors.text.secondary};
  `,row:t.css`
    label: row;
    align-items: baseline;
  `})},42413:(Y,T,e)=>{"use strict";e.d(T,{A4:()=>m,GL:()=>u,H3:()=>f,Im:()=>g,K9:()=>E,NY:()=>h,WW:()=>n,b$:()=>p,bi:()=>i,h2:()=>l,im:()=>s,oD:()=>o,pQ:()=>v,ty:()=>y,xb:()=>c});var t=e(9892);const n=t.css`
  position: relative;
`,i=t.css`
  margin-bottom: 0.25rem;
`,s=t.css`
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
`,l=t.css`
  margin: 0;
`,f=t.css`
  padding-left: 0.5rem;
  padding-right: 0.5rem;
`,u=t.css`
  padding-bottom: 0.5rem;
`,o=t.css`
  display: flex;
`,d=t.css`
  align-items: center;
`,r=t.css`
  align-items: start;
`,m=t.css`
  flex: 1 1 auto;
  min-width: 0; /* 1 */
  min-height: 0; /* 1 */
`,c=t.css`
  text-align: right;
`,p=t.css`
  display: inline-block;
`,g=t.css`
  margin: -0.2rem 0.25rem 0 0;
`,y=t.css`
  text-overflow: ellipsis;
`,E=t.css`
  width: 100%;
`,v=t.css`
  color: #aaa;
`,h=t.css`
  justify-content: flex-end;
`},54373:(Y,T,e)=>{"use strict";e.d(T,{EUpdateTypes:()=>n,default:()=>l});var t=(f=>(f.DragEnd="DragEnd",f.DragMove="DragMove",f.DragStart="DragStart",f.MouseEnter="MouseEnter",f.MouseLeave="MouseLeave",f.MouseMove="MouseMove",f))(t||{});const n=t;var i=e(82897);const s=0;class l{constructor({getBounds:u,tag:o,resetBoundsOnResize:d=!0,...r}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=m=>{const{button:c,clientX:p,type:g}=m;if(this._isDragging||c!==s)return;let y=null,E;if(g==="mouseenter")y=n.MouseEnter,E=this._onMouseEnter;else if(g==="mouseleave")y=n.MouseLeave,E=this._onMouseLeave;else if(g==="mousemove")y=n.MouseMove,E=this._onMouseMove;else throw new Error(`invalid event type: ${g}`);if(!E)return;const{value:v,x:h}=this._getPosition(p);E({event:m,type:y,value:v,x:h,manager:this,tag:this.tag})},this._handleDragEvent=m=>{const{button:c,clientX:p,type:g}=m;let y=null,E;if(g==="mousedown"){if(this._isDragging||c!==s)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const P=(0,i.get)(document,"body.style");P&&(P.userSelect="none"),this._isDragging=!0,y=n.DragStart,E=this._onDragStart}else if(g==="mousemove"){if(!this._isDragging)return;y=n.DragMove,E=this._onDragMove}else if(g==="mouseup"){if(!this._isDragging)return;this._stopDragging(),y=n.DragEnd,E=this._onDragEnd}else throw new Error(`invalid event type: ${g}`);if(!E)return;const{value:v,x:h}=this._getPosition(p);E({event:m,type:y,value:v,x:h,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=u,this.tag=o,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=Boolean(d),this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=r.onMouseEnter,this._onMouseLeave=r.onMouseLeave,this._onMouseMove=r.onMouseMove,this._onDragStart=r.onDragStart,this._onDragMove=r.onDragMove,this._onDragEnd=r.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(u){const{clientXLeft:o,maxValue:d,minValue:r,width:m}=this._getBounds();let c=u-o,p=c/m;return r!=null&&p<r?(p=r,c=r*m):d!=null&&p>d&&(p=d,c=d*m),{value:p,x:c}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const u=(0,i.get)(document,"body.style");u&&(u.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}},9096:(Y,T,e)=>{"use strict";e.d(T,{_K:()=>o,e6:()=>d});var t=e(58635),n=e(28550),i=e(16514);function s(m){if(m.length!==7)return[0,0,0];const c=m.slice(1,3),p=m.slice(3,5),g=m.slice(5);return[parseInt(c,16),parseInt(p,16),parseInt(g,16)]}class l{constructor(c,p){const g=r(c,p);this.colorsHex=g,this.colorsRgb=g.map(s),this.cache=new Map}_getColorIndex(c){let p=this.cache.get(c);if(p==null){const g=this.hashCode(c.toLowerCase());p=Math.abs(g%this.colorsHex.length);const y=Array.from(this.cache).pop();if(y&&y[1]){y[1]===p&&(p=this.getNextIndex(p));const E=this.colorsHex[y[1]];if(n.Z.readability(E,this.colorsHex[p])<1.5){let v=p;for(let h=0;h<this.colorsHex.length;h++)if(v=this.getNextIndex(v),n.Z.readability(E,this.colorsHex[v])>1.5){p=v;break}}}this.cache.set(c,p)}return p}getNextIndex(c){return c+1<this.colorsHex.length?c+1:0}hashCode(c){let p=0,g,y;for(g=0;g<c.length;g++)y=c.charCodeAt(g),p=(p<<5)-p+y;return p}getColorByKey(c){const p=this._getColorIndex(c);return this.colorsHex[p]}getRgbColorByKey(c){const p=this._getColorIndex(c);return this.colorsRgb[p]}clear(){this.cache.clear()}}const f=(0,t.Z)((m,c)=>new l(m,c));function u(m){f([],m)}function o(m,c){return f(i.O9,c).getColorByKey(m)}function d(m,c){return f(i.O9,c).getRgbColorByKey(m)}function r(m,c){const p=m.indexOf("#E24D42");p>-1&&m.splice(p,1);const g=m.indexOf("#BF1B00");g>-1&&m.splice(g,1);let y=[];for(const E of m)n.Z.readability(c.colors.background.primary,E)>=3&&y.push(E);return y}},320:(Y,T,e)=>{"use strict";e.d(T,{WT:()=>o,LU:()=>P,Cz:()=>v,Gk:()=>h});var t=e(82897),n=e(6835),i=e.n(n);function s(a,C){const D=Math.floor(Math.log10(Math.abs(a)))+1,b=C+D;return b<=0?Math.trunc(a):Number(a.toPrecision(b))}const l="YYYY-MM-DD",f="HH:mm",u=1e3,o=1e3*u,d=60*o,r=60*d,m=24*r,c=Math.log10(u),p=[{unit:"d",microseconds:m,ofPrevious:24},{unit:"h",microseconds:r,ofPrevious:60},{unit:"m",microseconds:d,ofPrevious:60},{unit:"s",microseconds:o,ofPrevious:1e3},{unit:"ms",microseconds:u,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}],g=(a,C,D)=>s(a/D,C)*D;function y(a){return moment(a/u).format(l)}function E(a){return moment(a/u).format(f)}function v(a){const C=g(a,c,u);return`${i().duration(C/u).asMilliseconds()}ms`}function h(a){const C=g(a,c,o);return`${i().duration(C/u).asSeconds()}s`}function P(a){const[C,D]=(0,t.dropWhile)(p,({microseconds:S},O)=>O<p.length-1&&S>a);if(C.ofPrevious===1e3)return`${(0,t.round)(a/C.microseconds,2)}${C.unit}`;const M=`${Math.floor(a/C.microseconds)}${C.unit}`,x=Math.round(a/D.microseconds%C.ofPrevious),R=`${x}${D.unit}`;return x===0?M:`${M} ${R}`}},75151:(Y,T,e)=>{"use strict";e.d(T,{F4:()=>u,Rx:()=>o,js:()=>f,kb:()=>s});var t=e(66111),n=e(44288),i=e(95638);const s=()=>(0,n.Z)().slice(0,12),f={spanNameOperator:"=",serviceNameOperator:"=",fromOperator:">",toOperator:"<",tags:[{id:s(),operator:"="}]};function u(d){const[r,m]=(0,t.useState)(f),c=(0,t.useMemo)(()=>d&&(0,i.filterSpansNewTraceViewHeader)(r,d),[r,d]);return{newTraceViewHeaderSearch:r,setNewTraceViewHeaderSearch:m,spanFilterMatches:c}}function o(d){const[r,m]=(0,t.useState)(""),c=(0,t.useMemo)(()=>r&&d?(0,i.filterSpans)(r,d):void 0,[r,d]);return{search:r,setSearch:m,spanFindMatches:c}}},335:(Y,T,e)=>{"use strict";e.d(T,{N:()=>i});var t=e(12115),n=e(95638);function i(l){if(!l)return null;let f=l.fields.length===1?l.fields[0].values[0]:s(l);return(0,n.transformTraceData)(f)}function s(l){const f=new t.U(l),u={};for(let o=0;o<f.length;o++){const d=f.get(o);u[d.spanID]||(u[d.spanID]={serviceName:d.serviceName,tags:d.serviceTags})}return{traceID:f.get(0).traceID,processes:u,spans:f.toArray().map((o,d)=>{const r=[];return o.parentSpanID&&r.push({refType:"CHILD_OF",spanID:o.parentSpanID,traceID:o.traceID}),o.references&&r.push(...o.references.map(m=>({refType:"FOLLOWS_FROM",...m}))),{...o,duration:o.duration*1e3,startTime:o.startTime*1e3,processID:o.spanID,flags:0,references:r,logs:o.logs?.map(m=>({...m,timestamp:m.timestamp*1e3}))||[],dataFrameRowIndex:d}})}}},46526:(Y,T,e)=>{"use strict";e.d(T,{eX:()=>m,zU:()=>r});var t=e(62992),n=e(41818),i=e(5562),s=e(55935),l=e(98589),f=e(73257),u=e(86297),o=e(16983);const d=(0,t.PH)("explore/updateDatasourceInstance");function r(c,p,g){return async(y,E)=>{const v=E().user.orgId,{history:h,instance:P}=await(0,o.r_)(v,{uid:p}),a=E().explore[c].datasourceInstance;if((0,n.ff)("explore_change_ds",{from:(a?.meta?.mixed?"mixed":a?.type)||"unknown",to:P.meta.mixed?"mixed":P.type,exploreId:c}),y(d({exploreId:c,datasourceInstance:P,history:h})),g?.importQueries){const C=E().explore[c].queries;await y((0,f.GJ)(c,C,a,P))}E().explore[c].isLive&&y((0,u.oz)(c,i.dP.offOption.value)),g?.importQueries&&y((0,f.aA)(c))}}const m=(c,p)=>{if(d.match(p)){const{datasourceInstance:g,history:y}=p.payload;return(0,s.RZ)(c.querySubscription),{...c,datasourceInstance:g,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,l.DK)(),queryResponse:(0,o.lp)(),loading:!1,queryKeys:[],history:y,datasourceMissing:!1}}return c}},93713:(Y,T,e)=>{"use strict";e.d(T,{CK:()=>P,Om:()=>a,iz:()=>C,km:()=>y,qN:()=>h});var t=e(62992),n=e(82897),i=e.n(n),s=e(86647),l=e(55935),f=e(25405),u=e(46526),o=e(13582),d=e(48197),r=e(73257),m=e(86297),c=e(16983);const p=(0,t.PH)("explore/changeSize"),g=(0,t.PH)("explore/changePanels");function y(b,M,x){return async(R,S)=>{const O=S().explore[b];if(O===void 0)return;const{panelsState:U}=O;R(g({exploreId:b,panelsState:{...U,[M]:x}})),R((0,d.og)())}}const E=(0,t.PH)("explore/initializeExplore"),v=(0,t.PH)("explore/setUrlReplaced");function h(b,{height:M,width:x}){return p({exploreId:b,height:M,width:x})}function P(b,M,x,R,S,O,U,I){return async(F,w)=>{const K=(0,s.F)().getList();let L,V=[];if(K.length>=1){const H=w().user.orgId,j=await(0,c.r_)(H,M);L=j.instance,V=j.history}F(E({exploreId:b,containerWidth:S,eventBridge:O,queries:x,range:R,datasourceInstance:L,history:V,isFromCompactUrl:I})),U!==void 0&&F(g({exploreId:b,panelsState:U})),F((0,m.b3)({exploreId:b})),L&&F((0,r.aA)(b,{replaceUrl:!0}))}}function a(b,M){return async(x,R)=>{const S=R().explore[b];if(!S?.initialized)return;const O=(0,l.J5)(M),U=D(O,(0,c.D)(S)),{containerWidth:I,eventBridge:F}=S,{datasource:w,queries:K,range:L,panelsState:V}=O,H=[];for(let k=0;k<K.length;k++){const Q=K[k];H.push((0,l.fR)(Q,H,k))}const j=(0,f.Z)(R().user),A=(0,f.i)(R().user),_=(0,l.vP)(L,j,A);if(U.datasource){const k=await(0,l.Z8)(K);await x(P(b,w,k,_,I,F,V));return}U.range&&x((0,m.b3)({exploreId:b,rawRange:_.raw})),U.queries&&x((0,r.SE)({exploreId:b,queries:H})),U.panelsState&&V!==void 0&&x(g({exploreId:b,panelsState:V})),(U.queries||U.range)&&x((0,r.aA)(b))}}const C=(b=(0,c.t5)(),M)=>{if(b=(0,r.Y)(b,M),b=(0,u.eX)(b,M),b=(0,m.ok)(b,M),b=(0,o.Oo)(b,M),d.ZU.match(M)){const{richHistory:x,total:R}=M.payload.richHistoryResults;return{...b,richHistory:x,richHistoryTotal:R}}if(d.Zy.match(M)){const x=M.payload.filters;return{...b,richHistorySearchFilters:x}}if(p.match(M)){const x=M.payload.width;return{...b,containerWidth:x}}if(g.match(M)){const{panelsState:x}=M.payload;return{...b,panelsState:x}}if(E.match(M)){const{containerWidth:x,eventBridge:R,queries:S,range:O,datasourceInstance:U,history:I,isFromCompactUrl:F}=M.payload;return{...b,containerWidth:x,eventBridge:R,range:O,queries:S,initialized:!0,queryKeys:(0,l.$$)(S),datasourceInstance:U,history:I,datasourceMissing:!U,queryResponse:(0,c.lp)(),cache:[],isFromCompactUrl:F||!1}}return b},D=(b,M)=>{const x=!(0,n.isEqual)(M?.datasource,b?.datasource),R=!(0,n.isEqual)(M?.queries,b?.queries),S=!(0,n.isEqual)(M?.range||l.UI,b?.range||l.UI),O=!(0,n.isEqual)(M?.panelsState,b?.panelsState);return{datasource:x,queries:R,range:S,panelsState:O}}},13582:(Y,T,e)=>{"use strict";e.d(T,{Cs:()=>E,Ff:()=>m,KZ:()=>P,NV:()=>c,Oo:()=>a,TV:()=>g,WY:()=>d,ch:()=>h,ev:()=>r,fM:()=>f,ik:()=>p,io:()=>y,sO:()=>v});var t=e(62992),n=e(51424),i=e(27876),s=e(4219),l=e(48197);const f=(0,t.PH)("explore/historyUpdated"),u=({updatedQuery:C,deletedId:D})=>async(b,M)=>{o(M().explore,(x,R)=>{const S=x.richHistory.map(U=>U.id===C?.id?C:U).filter(U=>U.id!==D),O=x.richHistory.length-S.length;b((0,l.ZU)({richHistoryResults:{richHistory:S,total:x.richHistoryTotal-O},exploreId:R}))})},o=(C,D)=>{D(C.left,i.ExploreId.left),C.right&&D(C.right,i.ExploreId.right)},d=(C,D,b)=>async(M,x)=>{const{richHistoryStorageFull:R,limitExceeded:S}=await(0,n.au)(C,D,b,!1,"",!x().explore.richHistoryStorageFull,!x().explore.richHistoryLimitExceededWarningShown);R&&M((0,l.fm)()),S&&M((0,l.QN)())},r=(C,D)=>async(b,M)=>{const x=await(0,n.VI)(C,D);b(u({updatedQuery:x}))},m=(C,D)=>async b=>{const M=await(0,n.gt)(C,D);b(u({updatedQuery:M}))},c=C=>async D=>{const b=await(0,n.y9)(C);D(u({deletedId:b}))},p=()=>async C=>{await(0,n.HK)(),C((0,l.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:i.ExploreId.left})),C((0,l.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:i.ExploreId.right}))},g=C=>async(D,b)=>{const M=b().explore[C]?.richHistorySearchFilters;if(M){const x=await(0,n.ub)(M);D((0,l.ZU)({richHistoryResults:x,exploreId:C}))}},y=C=>async(D,b)=>{const M=b().explore[C]?.richHistorySearchFilters,x=b().explore[C]?.richHistory;if(M&&x){const R={...M,page:(M?.page||1)+1},S=await(0,n.ub)(R),O=[...x,...S.richHistory];D((0,l.Zy)({filters:R,exploreId:C})),D((0,l.ZU)({richHistoryResults:{richHistory:O,total:S.total},exploreId:C}))}},E=C=>async D=>{D((0,l.Zy)({filters:void 0,exploreId:C})),D((0,l.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:C}))},v=()=>async(C,D)=>{let b=D().explore.richHistorySettings;b||(b=await(0,n.di)(),C((0,l.e8)(b)))},h=C=>async D=>{D((0,l.e8)(C)),await(0,n.kg)(C)},P=(C,D)=>async(b,M)=>{await b((0,l.Zy)({exploreId:C,filters:{...D}}));const x=M().explore.richHistorySettings;(0,s.X)().lastUsedDataSourcesAvailable&&await b(h({...x,lastUsedDatasourceFilters:D.datasourceFilters}))},a=(C,D)=>f.match(D)?{...C,history:D.payload.history}:C},48197:(Y,T,e)=>{"use strict";e.d(T,{AP:()=>v,CL:()=>g,IS:()=>C,QN:()=>m,Sx:()=>y,WK:()=>h,YV:()=>b,ZP:()=>O,ZU:()=>d,Zy:()=>p,bW:()=>D,e8:()=>c,fm:()=>r,m$:()=>M,nL:()=>E,og:()=>a,tl:()=>o});var t=e(62992),n=e(49187),i=e(37932),s=e(55935),l=e(3032),f=e(93713),u=e(16983);const o=(0,t.PH)("explore/syncTimes"),d=(0,t.PH)("explore/richHistoryUpdated"),r=(0,t.PH)("explore/richHistoryStorageFullAction"),m=(0,t.PH)("explore/richHistoryLimitExceededAction"),c=(0,t.PH)("explore/richHistorySettingsUpdated"),p=(0,t.PH)("explore/richHistorySearchFiltersUpdatedAction"),g=(0,t.PH)("explore/saveCorrelationsAction"),y=(0,t.PH)("explore/splitSizeUpdateAction"),E=(0,t.PH)("explore/maximizePaneAction"),v=(0,t.PH)("explore/evenPaneResizeAction"),h=(0,t.PH)("explore/resetExplore"),P=(0,t.PH)("explore/splitClose"),a=U=>(I,F)=>{const{left:w,right:K}=F().explore,V={orgId:F().user.orgId.toString()};V.left=(0,n.S)((0,u.D)(w)),K?V.right=(0,n.S)((0,u.D)(K)):V.right=null,C.right=V.right,C.left=V.left,i.E1.partial({...V},U?.replace)},C={},D=U=>async(I,F)=>{const w=F().explore[l.Kd.left];let L=(0,u.D)(w);if(U){const{query:H,queries:j}=U;L={datasource:U.datasourceUid,queries:j??(H?[H]:[]),range:U.range||w.range,panelsState:U.panelsState}}const V=(0,n.S)(L);i.E1.partial({right:V},!0)};function b(U){return(I,F)=>{I(P({itemId:U})),I(a())}}const M=(U,I)=>async F=>{const{getDataSourceSrv:w,getTimeSrv:K,getExploreUrl:L,openInNewWindow:V}=I,H=w(),j=await L({panel:U,datasourceSrv:H,timeSrv:K()});if(V&&j){V(j);return}i.E1.push(j)},x=(0,u.t5)(),R={syncedTimes:!1,left:x,right:void 0,correlations:void 0,richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},O={explore:(U=R,I)=>{if(P.match(I)){const{itemId:F}=I.payload,w={left:F===l.Kd.left?U.right:U.left,right:void 0};return{...U,...w,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(y.match(I)){const{largerExploreId:F}=I.payload;return{...U,largerExploreId:F,maxedExploreId:void 0,evenSplitPanes:F===void 0}}if(E.match(I)){const{exploreId:F}=I.payload;return{...U,largerExploreId:F,maxedExploreId:F,evenSplitPanes:!1}}if(v.match(I))return{...U,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(g.match(I))return{...U,correlations:I.payload};if(o.match(I))return{...U,syncedTimes:I.payload.syncedTimes};if(r.match(I))return{...U,richHistoryStorageFull:!0};if(m.match(I))return{...U,richHistoryLimitExceededWarningShown:!0};if(h.match(I)){const F=U[l.Kd.left],w=U[l.Kd.right];return(0,s.RZ)(F.querySubscription),w&&(0,s.RZ)(w.querySubscription),{...R,left:{...x,queries:U.left.queries}}}if(c.match(I)){const F=I.payload;return{...U,richHistorySettings:F}}if(I.payload){const{exploreId:F}=I.payload;if(F!==void 0){const w=U[F];return{...U,[F]:(0,f.iz)(w,I)}}}return U}}},73257:(Y,T,e)=>{"use strict";e.d(T,{CS:()=>ft,K8:()=>$e,ci:()=>gt,qV:()=>Dt,LK:()=>Ye,Sv:()=>Pe,GJ:()=>ie,W1:()=>_e,sK:()=>De,Y:()=>pt,aA:()=>Je,EA:()=>Se,P4:()=>Be,sQ:()=>ye,KO:()=>ve,SE:()=>dt,z0:()=>Et});var t=e(62992),n=e(10322),i=e.n(n),s=e(82897),l=e(23351),f=e(59980),u=e(11572),o=e(84946),d=e(39859),r=e(98803),m=e(52666),c=e(89749),p=e(13787),g=e(89424),y=e(4063),E=e(83881),v=e(35645),h=e(86647),P=e(41818),a=e(55935),C=e(5242),D=e(25405),b=e(63496),M=e(3153),x=e(27876),R=e(3032),S=e(659),O=e(60499),U=e(75434),I=e(9471),F=e(50928),w=e(6194),K=e(99098),L=e(20053),V=e(3281);const H=(we,Qe,nt)=>(we.forEach(it=>{const yt=it.refId;if(!yt)return;const Lt=nt[yt],Kt=Qe.filter(an=>an.source.uid===Lt);j(it,Kt)}),we),j=(we,Qe)=>{we.fields.forEach(nt=>{nt.config.links=nt.config.links?.filter(it=>it.origin!==V.n1.Correlations)||[],Qe.map(it=>{it.config?.field===nt.name&&nt.config.links.push({internal:{query:it.config?.target,datasourceUid:it.target.uid,datasourceName:it.target.name,transformations:it.config?.transformations},url:"",title:it.label||it.target.name,origin:V.n1.Correlations})})})};var A=e(81042);const _=we=>{const Qe=[],nt=[],it=[],yt=[],Lt=[],Kt=[],an=[];for(const un of we.series)switch(un.meta?.preferredVisualisationType){case"logs":yt.push(un);break;case"graph":Qe.push(un);break;case"trace":Lt.push(un);break;case"table":nt.push(un);break;case"rawPrometheus":it.push(un);break;case"nodeGraph":Kt.push(un);break;case"flamegraph":an.push(un);break;default:le(un)&&Qe.push(un),nt.push(un)}return{...we,graphFrames:Qe,tableFrames:nt,logsFrames:yt,traceFrames:Lt,nodeGraphFrames:Kt,flameGraphFrames:an,rawPrometheusFrames:it,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},k=({queries:we,correlations:Qe})=>nt=>{if(we?.length&&Qe?.length){const it=(0,s.mapValues)((0,s.groupBy)(we,"refId"),"0.datasource.uid");H(nt.series,Qe,it)}return nt},Q=we=>we.graphFrames.length?{...we,graphResult:we.graphFrames}:{...we,graphResult:null},re=we=>{if(we.tableFrames.length===0)return(0,f.of)({...we,tableResult:null});we.tableFrames.sort((yt,Lt)=>{const Kt=yt.refId,an=Lt.refId;return Kt>an?1:Kt<an?-1:0});const Qe=we.tableFrames.every(yt=>le(yt)),nt={interpolate:yt=>yt};return(Qe?(0,f.of)(we.tableFrames).pipe(F.Y.joinByFieldTransformer.operator({},nt)):(0,f.of)(we.tableFrames).pipe(F.Y.mergeTransformer.operator({},nt))).pipe((0,I.U)(yt=>{for(const Lt of yt)for(const Kt of Lt.fields)Kt.display=Kt.display??(0,w.U_)({field:Kt,theme:v.v.theme2,timeZone:we.request?.timezone??"browser"});return{...we,tableResult:yt}}))},Z=we=>{const Qe=we.rawPrometheusFrames;if(!Qe||Qe.length===0)return(0,f.of)({...we,tableResult:null});Qe.sort((Lt,Kt)=>{const an=Lt.refId,un=Kt.refId;return an>un?1:an<un?-1:0});const nt=Qe.every(Lt=>le(Lt)),it={interpolate:Lt=>Lt};return(nt?(0,f.of)(Qe).pipe(F.Y.joinByFieldTransformer.operator({},it)):(0,f.of)(Qe).pipe(F.Y.mergeTransformer.operator({},it))).pipe((0,I.U)(Lt=>{const Kt=Lt[0];for(const an of Kt.fields)an.display=an.display??(0,w.U_)({field:an,theme:v.v.theme2,timeZone:we.request?.timezone??"browser"});return{...we,rawPrometheusResult:Kt}}))},oe=(we={})=>Qe=>{if(Qe.logsFrames.length===0)return{...Qe,logsResult:null};const nt=Qe.request?.intervalMs,it=(0,L.aB)(Qe.logsFrames,nt,we.absoluteRange,we.queries),yt=(0,a.Oy)(we.refreshInterval),Lt=(0,A.j0)(it,yt),Kt=Lt.rows,an=Lt.series,un={...Lt,rows:Kt,series:an};return{...Qe,logsResult:un}};function G(we,Qe,nt,it,yt,Lt){return(0,f.of)(we).pipe((0,I.U)(Kt=>(0,E.zR)(Kt,Qe)),(0,I.U)(k({queries:yt,correlations:Lt})),(0,I.U)(_),(0,I.U)(Q),(0,I.U)(Q),(0,I.U)(oe({absoluteRange:nt,refreshInterval:it,queries:yt})),(0,d.z)(Z),(0,d.z)(re))}function le(we){const Qe=(0,s.groupBy)(we.fields,nt=>nt.type);return Boolean(Object.keys(Qe).length===2&&Qe[K.fS.time]?.length===1&&Qe[K.fS.number])}var fe=e(98589),ae=e(13582),de=e(48197),ee=e(86297),me=e(16983);const q=(0,t.PH)("explore/addQueryRow"),ne=(0,t.PH)("explore/changeQueries"),se=(0,t.PH)("explore/cancelQueries"),he=(0,t.PH)("explore/queriesImported"),ue=(0,t.PH)("explore/queryStoreSubscription"),Te=(0,t.PH)("explore/setSupplementaryQueryEnabledAction"),Ve=(0,t.PH)("explore/storeSupplementaryQueryDataProviderAction"),ct=(0,t.PH)("explore/cleanSupplementaryQueryDataProviderAction"),Ie=(0,t.PH)("explore/cleanSupplementaryQueryAction"),Ke=(0,t.PH)("explore/storeSupplementaryQueryDataSubscriptionAction"),Ge=(0,t.PH)("explore/updateSupplementaryQueryDataAction"),at=(0,t.PH)("explore/queryStreamUpdated"),dt=(0,t.PH)("explore/setQueries"),Re=(0,t.PH)("changeLoadingState"),ye=(0,t.PH)("explore/setPausedState"),Pe=(0,t.PH)("explore/clearLogs"),be=(0,t.PH)("explore/scanStart"),Be=(0,t.PH)("explore/scanStop"),ke=(0,t.PH)("explore/addResultsToCache"),ot=(0,t.PH)("explore/clearCache");function ft(we,Qe){return async(nt,it)=>{const yt=it().explore[we].queries;let Lt;if(yt.length===0){const an=it().explore[we].datasourceInstance;(!v.v.featureToggles.exploreMixedDatasource||!an?.meta.mixed)&&(Lt=an)}const Kt=await(0,a.Xk)(yt,Qe,Lt?.getRef());nt(q({exploreId:we,index:Qe,query:Kt}))}}function gt(we){return(Qe,nt)=>{Qe(Be({exploreId:we})),Qe(se({exploreId:we}));const it=nt().explore[we].supplementaryQueries;for(const yt of fe.SY)Qe(ct({exploreId:we,type:yt})),it[yt]?.data?.state!==m.Gu.Done&&Qe(Ie({exploreId:we,type:yt}));Qe((0,de.og)())}}const St=(we,Qe)=>{const nt=we.getRef();return Qe.map(it=>({...it,datasource:nt}))},ut=async(we,Qe,nt)=>{let it=[];if(Qe.meta?.id===we.meta?.id)it=nt;else if((0,c.p)(Qe)&&(0,c.CZ)(we)){const yt=await Qe.exportToAbstractQueries(nt);it=await we.importFromAbstractQueries(yt)}else we.importQueries&&(it=await we.importQueries(nt,Qe));return St(we,it)},Dt=(0,x.createAsyncThunk)("explore/changeQueries",async({queries:we,exploreId:Qe},{getState:nt,dispatch:it})=>{let yt=!1;const Lt=nt().explore[Qe].queries;for(const Kt of we)for(const an of Lt)if(Kt.refId===an.refId&&Kt.datasource?.type!==an.datasource?.type){const un=await(0,h.F)().get(an.datasource),hn=await(0,h.F)().get({uid:Kt.datasource?.uid});await it(ie(Qe,Lt,un,hn,Kt.refId)),yt=!0}yt||it(ne({queries:we,exploreId:Qe})),we.length<Lt.length&&it(Je(Qe))}),ie=(we,Qe,nt,it,yt)=>async Lt=>{if(!nt){Lt(he({exploreId:we,queries:Qe}));return}let Kt=Qe;if(it.uid===b.D)Kt=Qe.map(un=>({...un,datasource:nt.getRef()}));else if(nt.uid===b.D){const un=(0,s.groupBy)(Qe,Wn=>Wn.datasource?.uid),hn=await Promise.all(Object.keys(un).map(async Wn=>{const Bt=await(0,h.F)().get({uid:Wn});return await ut(it,Bt,un[Wn])}));Kt=(0,s.flatten)(hn.filter(Wn=>Wn.length>0))}else{let un=Qe;if(yt!==void 0){const hn=Qe.find(Wn=>Wn.refId===yt);hn&&(un=[hn])}Kt=await ut(it,nt,un)}let an=await(0,a.Z8)(Kt,it.getRef());if(yt!==void 0){Kt.length===0&&(Kt=[await(0,a.Xk)([],void 0,it.getRef())]);const un=Qe.findIndex(Wn=>Wn.refId===yt),hn={...an[0],refId:Qe[un].refId};an=[...Qe],an[un]=hn}return Lt(he({exploreId:we,queries:an})),an};function De(we,Qe,nt){return async(it,yt)=>{const Lt=yt().explore[we],{queries:Kt}=Lt,un=(await Promise.all(Kt.map(hn=>nt({...hn},Qe)))).map((hn,Wn)=>(0,a.fR)(hn,Kt,Wn));it(dt({exploreId:we,queries:un})),Qe.preventSubmit||it(Je(we))}}async function Ne(we,Qe,nt,it,yt,Lt){const Kt=it.meta.id,an=(0,a._Q)(nt,Kt,yt);we((0,ae.fM)({exploreId:Lt,history:an})),we((0,ae.WY)(it.uid,it.name,yt)),await we((0,ae.TV)(R.Kd.left)),await we((0,ae.TV)(R.Kd.right))}const Je=(we,Qe)=>(nt,it)=>{nt((0,ee.b3)({exploreId:we}));const yt=je();Qe?.preserveCache===!0||nt(Ye(we));const Kt=it().explore[we],{datasourceInstance:an,containerWidth:un,isLive:hn,range:Wn,scanning:Bt,queryResponse:Ft,querySubscription:Vt,refreshInterval:At,absoluteRange:Nt,cache:Rt,supplementaryQueries:wt}=Kt;let _t,Qt;const en=Kt.queries.map(Jt=>({...Jt,datasource:Jt.datasource||an?.getRef()}));an!=null&&Ne(nt,it().explore,Kt.history,an,en,we),nt((0,de.og)({replace:Qe?.replaceUrl}));const sn=(0,me.M0)(Rt,Nt);if(sn)_t=(0,l.a)([(0,f.of)(sn),yt]).pipe((0,d.z)(([Jt,gn])=>G(Jt,Ft,Nt,At,en,gn))),Qt=_t.subscribe(Jt=>{Jt.error||nt((0,de.og)()),nt(at({exploreId:we,response:Jt}))});else{if(!(0,a.z_)(en)){nt((0,de.og)({replace:Qe?.replaceUrl}));return}if(!an)return;const Jt=an?.interval;(0,a.RZ)(Vt);const gn={minInterval:Jt,maxDataPoints:un,liveStreaming:hn},Cn=(0,D.Z)(it().user),In=(0,a.Zf)(we,en,gn,Wn,Bt,Cn);if(nt(Re({exploreId:we,loadingState:m.Gu.Loading})),_t=(0,l.a)([(0,U.v7)(an,In.request).pipe(hn?(0,r.p)(500):u.y),yt]).pipe((0,d.z)(([_n,zn])=>G(_n,Ft,Nt,At,en,zn))),Qt=_t.subscribe({next(_n){if(_n.logsResult!==null&&(0,P.ff)("grafana_explore_logs_result_displayed",{datasourceType:an.type}),nt(at({exploreId:we,response:_n})),it().explore[we].scanning)if(_n.state===m.Gu.Done&&_n.series.length===0){const zn=(0,C.e)(-1,it().explore[we].range);nt((0,ee.b3)({exploreId:we,absoluteRange:zn})),nt(Je(we))}else nt(Be({exploreId:we}))},error(_n){nt((0,S.$l)((0,O.t_)("Query processing error",_n))),nt(Re({exploreId:we,loadingState:m.Gu.Error})),console.error(_n)},complete(){it().explore[we].queryResponse.state===m.Gu.Loading&&nt(Re({exploreId:we,loadingState:m.Gu.Done}))}}),hn)for(const _n of fe.SY)nt(ct({exploreId:we,type:_n})),nt(Ie({exploreId:we,type:_n}));else nt(Le({exploreId:we,datasourceInstance:an,transaction:In,newQuerySource:_t,supplementaryQueries:wt,queries:en,absoluteRange:Nt}))}nt(ue({exploreId:we,querySubscription:Qt}))},Xe=async(we,Qe)=>{const nt=we.filter(yt=>yt.datasource?.uid!==b.D),it=(0,s.groupBy)(nt,"datasource.uid");return await Promise.all(Object.values(it).map(async yt=>({datasource:await(0,h.F)().get(yt[0].datasource,Qe),targets:yt})))},Le=(0,x.createAsyncThunk)("explore/handleSupplementaryQueries",async({datasourceInstance:we,exploreId:Qe,transaction:nt,newQuerySource:it,supplementaryQueries:yt,queries:Lt,absoluteRange:Kt},{dispatch:an})=>{let un;we.meta.mixed?un=await Xe(nt.request.targets,nt.request.scopedVars):un=[{datasource:we,targets:nt.request.targets}];for(const hn of fe.SY){const Wn=(0,fe.Z9)(un,hn,{...nt.request,requestId:`${nt.request.requestId}_${(0,s.snakeCase)(hn)}`},it);Wn?(an(Ve({exploreId:Qe,type:hn,dataProvider:Wn})),Ue(yt[hn].data,Lt,Kt)||(an(Ie({exploreId:Qe,type:hn})),yt[hn].enabled&&an(_e(Qe,hn)))):an(ct({exploreId:Qe,type:hn}))}});function Ue(we,Qe,nt){if(!we)return!1;const it=(0,s.zipObject)((0,s.map)(Qe,"refId"),Qe),yt=(0,s.mapValues)((0,s.groupBy)(we.data.map(un=>un.meta?.custom?.sourceQuery),"refId"),s.head),Lt=we.data.every(un=>un.meta?.custom?.logsVolumeType===p.o8.FullRange),Kt=i()(it,yt),an=we.data.every(un=>{const hn=un.meta?.custom?.absoluteRange;return hn?hn&&hn.from<=nt.from&&nt.to<=hn.to:!0});return Lt&&Kt&&an}function ve(we,Qe){return(nt,it)=>{const yt=it().explore[we].queries,Lt=Qe.map((Kt,an)=>(0,a.fR)(Kt,yt,an));nt(dt({exploreId:we,queries:Lt})),nt(Je(we))}}function Se(we){return(Qe,nt)=>{Qe(be({exploreId:we}));const it=(0,C.e)(-1,nt().explore[we].range);Qe((0,ee.b3)({exploreId:we,absoluteRange:it})),Qe(Je(we))}}function $e(we){return(Qe,nt)=>{const it=nt().explore[we].queryResponse,yt=nt().explore[we].absoluteRange,Lt=(0,me.M7)(yt);it.state===m.Gu.Done&&Qe(ke({exploreId:we,cacheKey:Lt,queryResponse:it}))}}function Ye(we){return(Qe,nt)=>{Qe(ot({exploreId:we}))}}function _e(we,Qe){return(nt,it)=>{const{supplementaryQueries:yt}=it().explore[we],Lt=yt[Qe].dataProvider;if(Lt){const Kt=Lt.subscribe({next:an=>{nt(Ge({exploreId:we,type:Qe,data:an}))}});nt(Ke({exploreId:we,type:Qe,dataSubscription:Kt}))}}}function Et(we,Qe,nt){return(it,yt)=>{it(Te({exploreId:we,enabled:Qe,type:nt})),(0,fe.B9)(Qe,nt),Qe&&it(_e(we,nt))}}const pt=(we,Qe)=>{if(q.match(Qe)){const{queries:nt}=we,{index:it,query:yt}=Qe.payload,Lt=[...nt.slice(0,it+1),{...yt},...nt.slice(it+1)];return{...we,queries:Lt,queryKeys:(0,a.$$)(Lt)}}if(ne.match(Qe)){const{queries:nt}=Qe.payload;return{...we,queries:nt}}if(se.match(Qe))return(0,a.RZ)(we.querySubscription),{...we,loading:!1};if(dt.match(Qe)){const{queries:nt}=Qe.payload;return{...we,queries:nt.slice(),queryKeys:(0,a.$$)(nt)}}if(ue.match(Qe)){const{querySubscription:nt}=Qe.payload;return{...we,querySubscription:nt}}if(Te.match(Qe)){const{enabled:nt,type:it}=Qe.payload,{supplementaryQueries:yt}=we,Lt=yt[it].dataSubscription;!nt&&Lt&&Lt.unsubscribe();const Kt={...yt,[it]:{...yt[it],enabled:nt,data:void 0}};return{...we,supplementaryQueries:Kt}}if(Ve.match(Qe)){const{dataProvider:nt,type:it}=Qe.payload,{supplementaryQueries:yt}=we,Lt=yt[it];Lt?.dataSubscription&&Lt.dataSubscription.unsubscribe();const Kt={...yt,[it]:{...Lt,dataProvider:nt,dataSubscription:void 0}};return{...we,supplementaryQueries:Kt}}if(ct.match(Qe)){const{type:nt}=Qe.payload,{supplementaryQueries:it}=we,yt=it[nt];yt?.dataSubscription&&yt.dataSubscription.unsubscribe();const Lt={...it,[nt]:{...yt,dataProvider:void 0,dataSubscription:void 0}};return{...we,supplementaryQueries:Lt}}if(Ie.match(Qe)){const{type:nt}=Qe.payload,{supplementaryQueries:it}=we,yt={...it,[nt]:{...it[nt],data:void 0}};return{...we,supplementaryQueries:yt}}if(Ke.match(Qe)){const{dataSubscription:nt,type:it}=Qe.payload,{supplementaryQueries:yt}=we,Lt={...yt,[it]:{...yt[it],dataSubscription:nt}};return{...we,supplementaryQueries:Lt}}if(Ge.match(Qe)){let{data:nt,type:it}=Qe.payload;const{supplementaryQueries:yt}=we,Lt={...yt,[it]:{...yt[it],data:nt}};return{...we,supplementaryQueries:Lt}}if(at.match(Qe))return ht(we,Qe);if(he.match(Qe)){const{queries:nt}=Qe.payload;return{...we,queries:nt,queryKeys:(0,a.$$)(nt)}}if(Re.match(Qe)){const{loadingState:nt}=Qe.payload;return{...we,queryResponse:{...we.queryResponse,state:nt},loading:nt===m.Gu.Loading||nt===m.Gu.Streaming}}if(ye.match(Qe)){const{isPaused:nt}=Qe.payload;return{...we,isPaused:nt}}if(be.match(Qe))return{...we,scanning:!0};if(Be.match(Qe))return{...we,scanning:!1,scanRange:void 0};if(ke.match(Qe)){const{cache:it}=we,{queryResponse:yt,cacheKey:Lt}=Qe.payload;let Kt=[...it];return Kt.some(un=>un.key===Lt)||(Kt=[{key:Lt,value:yt},...Kt].slice(0,5)),{...we,cache:Kt}}if(ot.match(Qe))return{...we,cache:[]};if(Pe.match(Qe)){if(!we.logsResult)return{...we,clearedAtIndex:null};if(we.queryResponse.state===m.Gu.Loading)return{...we,clearedAtIndex:null,logsResult:{...we.logsResult,rows:[]}};const nt=we.clearedAtIndex?we.clearedAtIndex+we.logsResult.rows.length:we.logsResult.rows.length-1;return{...we,clearedAtIndex:nt,logsResult:{...we.logsResult,rows:[]}}}return we},je=()=>new o.y(we=>{const Qe=M.h.getState().explore.correlations;if(Qe)we.next(Qe),we.complete();else{const nt=M.h.subscribe(()=>{const{correlations:it}=M.h.getState().explore;it&&(nt(),we.next(it),we.complete())})}}),ht=(we,Qe)=>{const{response:nt}=Qe.payload,{request:it,state:yt,series:Lt,error:Kt,graphResult:an,logsResult:un,tableResult:hn,rawPrometheusResult:Wn,traceFrames:Bt,nodeGraphFrames:Ft,flameGraphFrames:Vt,rawPrometheusFrames:At}=nt;if(Kt){if(Kt.type===g.eA.Timeout)return{...we,queryResponse:nt,loading:yt===m.Gu.Loading||yt===m.Gu.Streaming};if(Kt.type===g.eA.Cancelled)return we;v.v.angularSupportEnabled&&we.datasourceInstance?.components?.QueryCtrl&&we.eventBridge.emit(y.Kh.dataError,Kt)}if(!it)return{...we};if(v.v.angularSupportEnabled&&we.datasourceInstance?.components?.QueryCtrl){const Nt=Lt.map(Rt=>(0,E.Zr)(Rt));we.eventBridge.emit(y.Kh.dataReceived,Nt)}return{...we,queryResponse:nt,graphResult:an,tableResult:hn,rawPrometheusResult:Wn,logsResult:we.isLive&&un?{...un,rows:(0,me.bG)(we.clearedAtIndex,un.rows)}:un,loading:yt===m.Gu.Loading||yt===m.Gu.Streaming,showLogs:!!un,showMetrics:!!an,showTable:!!hn?.length,showTrace:!!Bt.length,showNodeGraph:!!Ft.length,showRawPrometheus:!!At.length,showFlameGraph:!!Vt.length,clearedAtIndex:we.isLive?we.clearedAtIndex:null}}},86297:(Y,T,e)=>{"use strict";e.d(T,{F9:()=>P,b3:()=>v,cD:()=>y,mG:()=>h,ok:()=>a,oz:()=>E});var t=e(62992),n=e(67483),i=e(52666),s=e(20308),l=e(5562),f=e(55935),u=e(81042),o=e(25405),d=e(3032),r=e(19349),m=e(48197),c=e(73257);const p=(0,t.PH)("explore/changeRange"),g=(0,t.PH)("explore/changeRefreshInterval"),y=C=>(D,b)=>{const{syncedTimes:M}=b().explore;M?(D(v({...C,exploreId:d.Kd.left})),D((0,c.aA)(d.Kd.left,{preserveCache:!0})),D(v({...C,exploreId:d.Kd.right})),D((0,c.aA)(d.Kd.right,{preserveCache:!0}))):(D(v({...C})),D((0,c.aA)(C.exploreId,{preserveCache:!0})))};function E(C,D){return g({exploreId:C,refreshInterval:D})}const v=C=>(D,b)=>{const{exploreId:M,absoluteRange:x,rawRange:R}=C,S=b().explore[M],O=(0,o.Z)(b().user),U=(0,o.i)(b().user),{range:I}=S;let F=I.raw;x&&(F={from:(0,n.GY)(O,x.from),to:(0,n.GY)(O,x.to)}),R&&(F=R);const w=(0,f.OQ)(O,F,U),K={from:w.from.valueOf(),to:w.to.valueOf()},L={time:w.raw,refresh:!1,timepicker:{},getTimezone:()=>O,timeRangeUpdated:V=>{D(y({exploreId:M,rawRange:V}))}};(0,r.$t)().init(L),(0,s.J)().updateTimeRange((0,r.$t)().timeRange()),D(p({exploreId:M,range:w,absoluteRange:K}))};function h(C){return(D,b)=>{if(C===d.Kd.left){const x=b().explore.left;D(y({exploreId:d.Kd.right,rawRange:x.range.raw}))}else{const x=b().explore.right;D(y({exploreId:d.Kd.left,rawRange:x.range.raw}))}const M=b().explore.syncedTimes;D((0,m.tl)({syncedTimes:!M})),D((0,m.og)())}}function P(){return(C,D)=>{const b=(0,o.Z)(D().user),M=(0,o.i)(D().user),x=D().explore.left,R=(0,f.OQ)(b,x.range.raw,M),S={from:R.from.valueOf(),to:R.to.valueOf()};C(v({exploreId:d.Kd.left,absoluteRange:S}));const O=D().explore.right;if(O){const U=(0,f.OQ)(b,O.range.raw,M),I={from:U.from.valueOf(),to:U.to.valueOf()};C(v({exploreId:d.Kd.right,absoluteRange:I}))}C((0,m.og)())}}const a=(C,D)=>{if(g.match(D)){const{refreshInterval:b}=D.payload,M=l.dP.isLive(b),x=(0,f.Oy)(b),R=(0,u.j0)(C.logsResult,x);return l.dP.isLive(C.refreshInterval)&&!M&&(0,f.RZ)(C.querySubscription),{...C,refreshInterval:b,queryResponse:{...C.queryResponse,state:M?i.Gu.Streaming:i.Gu.Done},isLive:M,isPaused:M?!1:C.isPaused,loading:M,logsResult:R}}if(p.match(D)){const{range:b,absoluteRange:M}=D.payload;return{...C,range:b,absoluteRange:M}}return C}},16983:(Y,T,e)=>{"use strict";e.d(T,{M7:()=>h,lp:()=>g,bG:()=>a,M0:()=>P,D:()=>v,r_:()=>y,t5:()=>p,FG:()=>c});var t=e(82897),n=e(52666),i=e(75849),s=e(58379),l=e(55935),f=e(91162),u=e(98589),o=e(67483);const d=C=>{let D=C.raw.from;(0,o.v9)(D)&&(D=D.valueOf().toString(10));let b=C.raw.to;return(0,o.v9)(b)&&(b=b.valueOf().toString(10)),{from:D,to:b}},r={from:"now-6h",to:"now"},m="grafana.explore.style.graph",c=C=>{s.Z.set(m,C)},p=()=>({containerWidth:0,datasourceInstance:null,datasourceMissing:!1,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:r},absoluteRange:{from:null,to:null},scanning:!1,loading:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:g(),tableResult:null,graphResult:null,logsResult:null,clearedAtIndex:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,u.DK)(),panelsState:{}}),g=()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,i.JK)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function y(C,D){let b;try{b=await(0,f.ak)().get(D)}catch{b=await(0,f.ak)().get()}if(b.init)try{b.init()}catch(R){console.error(R)}const M=`grafana.explore.history.${b.meta?.id}`,x=s.Z.getObject(M,[]);return s.Z.set((0,l.I$)(C),b.uid),{history:x,instance:b}}function E(C){let D=(0,t.mapValues)(C,b=>(0,t.isObject)(b)?E(b):b);if(D=(0,t.omitBy)(D,t.isEmpty),!(0,t.isEmpty)(D))return D}function v(C){return{datasource:C.datasourceInstance?.uid||"",queries:C.queries.map(l.uC),range:d(C.range),panelsState:E(C.panelsState)}}function h(C){const D={from:C.from,to:C.to};return Object.entries(D).map(([M,x])=>`${encodeURIComponent(M)}=${encodeURIComponent(x.toString())}`).join("&")}function P(C,D){const b=h(D),M=C.findIndex(R=>R.key===b);return M>=0?C[M].value:void 0}const a=(C,D)=>D?C?D.slice(C+1):D:[]},41611:(Y,T,e)=>{"use strict";e.d(T,{a_:()=>h,Rb:()=>P,lt:()=>C,u8:()=>a});var t=e(82897),n=e(66111),i=e(72769),s=e(3281),l=e(206),f=e(94976),u=e(20308),o=e(41818),d=e(82002),r=e(27854),m=e.n(r),c=e(55935);const p=(b,M,x)=>{let R={},S={};if(b.type===s.sN.Regex&&b.expression){const O=new RegExp(b.expression,"gi"),U=M.matchAll(O);for(const I of U)I.groups?S=I.groups:S[b.mapValue||x]=I[1]||I[0]}else b.type===s.sN.Logfmt&&(S=m().parse(M));return Object.keys(S).forEach(O=>{const U=typeof S[O]=="string"?S[O]:(0,c.Xh)(S[O]);R[O]={value:U}}),R};var g=e(64703);const E=[b=>!b.internal||d.Vt.hasAccessToExplore()],v="grafana_data_link_clicked",h=b=>{const{field:M,vars:x,splitOpenFn:R,range:S,rowIndex:O,dataFrame:U}=b,I={...x||{}};I.__value={value:{raw:M.values[O]},text:"Raw value"};let F;return U&&(F=(0,i.z)({frame:U,rowIndex:O}),I.__data={value:{name:U.name,refId:U.refId,fields:F},text:"Data"},U.fields.forEach(w=>{F&&F[w.name]&&(I[w.name]={value:F[w.name]})}),I.__targetField={value:F[M.name]}),M.config.links?M.config.links.filter(L=>E.every(V=>V(L,I))).map(L=>{if(L.internal){let V={};L.internal?.transformations&&L.internal?.transformations.forEach(k=>{let Q;k.field?Q=U?.fields.find(Z=>Z.name===k.field)?.values[O]:Q=M.values[O],V={...V,...p(k,Q,M.name)}});const H={...I,...V},j=C(L,H);let A=[];if(j.variables.length===0){const k=M.name.toString();A.push({variableName:k,value:"",match:""})}else A=j.variables;const _=k=>{(0,o.ff)(v,{origin:L.origin||s.n1.Datasource,app:l.zj.Explore,internal:!0}),R?.(k)};return j.allVariablesDefined?{...(0,f._)({link:L,internalLink:L.internal,scopedVars:H,range:S,field:M,onClickFn:b.splitOpenFn?Q=>_(Q):void 0,replaceVariables:(0,u.J)().replace.bind((0,u.J)())}),variables:A}:void 0}else{const V=(j,A)=>(0,u.J)().replace(j,{...A,...I}),H=(0,g.Bq)().getDataLinkUIModel(L,V,M);return H.title||(H.title=P(H.href)),H}}).filter(L=>!!L):[]};function P(b){b.indexOf("://")<0&&(b=`http://${b}`);let M;try{M=new URL(b).hostname}catch{M=b}return M}function a(b,M){return(0,n.useCallback)((x,R)=>x.fields.flatMap(S=>S.config?.links&&S.config?.links.length?h({field:S,rowIndex:R,range:b,dataFrame:x,splitOpenFn:M}):[]),[b,M])}function C(b,M){let x=[];return(0,u.J)().replace.bind((0,u.J)())(D(b),M,void 0,x),x=(0,t.uniqBy)(x,"variableName"),{variables:x,allVariablesDefined:x.every(S=>S.found)}}function D(b){let M="",x;for(x in b)typeof b[x]=="string"?M+=" "+b[x]:typeof b[x]=="object"&&(M+=" "+D(b[x]));return M}},98589:(Y,T,e)=>{"use strict";e.d(T,{B9:()=>p,DK:()=>g,SY:()=>m,Z9:()=>v});var t=e(82897),n=e.n(t),i=e(84946),s=e(12877),l=e(95515),f=e(446),u=e(13787),o=e(52666),d=e(20053),r=e(58379);const m=[u.v8.LogsVolume,u.v8.LogsSample],c=h=>`grafana.explore.logs.enable${h}`,p=(h,P)=>{r.Z.set(c(P),h?"true":"false")},g=()=>{let h={[u.v8.LogsVolume]:{enabled:!0},[u.v8.LogsSample]:{enabled:!1}};for(const P of m){if(P===u.v8.LogsVolume){const C="grafana.explore.logs.enableVolumeHistogram",D=r.Z.get(C);if(D){h[P]={enabled:D==="true"},p(D==="true",u.v8.LogsVolume),localStorage.removeItem(C);continue}}if(P===u.v8.LogsSample)continue;r.Z.get(c(P))==="false"&&(h[P]={enabled:!1})}return h},y=(h,P,a)=>new i.y(C=>{h.subscribe(D=>{if(D.logsResult&&D.logsResult.rows&&D.logsResult.visibleRange&&D.logsResult.bucketSize!==void 0&&D.state===o.Gu.Done){const b=D.logsResult.bucketSize,M=P.map(S=>S.refId),x=(0,t.groupBy)(D.logsResult.rows,"dataFrame.refId");let R=[];M.forEach(S=>{if(x[S]?.length){const O=(0,d.Nw)(x[S],b);R=[...R,...O];const U={logsVolumeType:u.o8.Limited,absoluteRange:D.logsResult?.visibleRange,datasourceName:a,sourceQuery:P.find(I=>I.refId===S)};C.next({data:R.map(I=>{const F=I.meta?.custom||{};return{...I,meta:{custom:{...F,...U}}}}),state:D.state})}}),C.complete()}})}),E=(h,P,a,C)=>{if(h===u.v8.LogsVolume)return y(P,a,C)},v=(h,P,a,C)=>{const b=h.map(({datasource:M,targets:x},R)=>{const S=(0,t.cloneDeep)(a);return S.requestId=`${S.requestId||""}_${R}`,S.targets=x,(0,u.mN)(M,P)?M.getDataProvider(P,S):E(P,C,x,M.name)}).filter(o.fQ);if(b.length!==0)return b.length===1?b[0]:(0,s.T)(...b).pipe((0,f.R)((M,x)=>M.errors&&M.errors.length||x.state===o.Gu.NotStarted?M:x.state===o.Gu.Loading&&M.state===o.Gu.NotStarted?{...M,state:o.Gu.Loading}:x.state&&x.state!==o.Gu.Done?M:{...M,data:[...M.data,...x.data],state:o.Gu.Done},{data:[],state:o.Gu.NotStarted}),(0,l.E)())}},47471:(Y,T,e)=>{"use strict";e.d(T,{mV:()=>D,bE:()=>C});var t=e(49372),n=e(39859),i=e(59250),s=e(22069),l=e(20308),f=e(86647),u=e(66111),o=e(81764),d=e(8581),r=e(5076),m=e(71263),c=e(75897),p=e(436),g=e(17349),y=e(97573),E=e(51935);const v=14;function h(){const b=(0,u.useRef)({}),M=(0,u.useCallback)(R=>{switch(R){case y.Us.math:case y.Us.reduce:case y.Us.resample:case y.Us.threshold:return b.current[R];case y.Us.classic:return}},[]),x=(0,u.useCallback)((R,S)=>{switch(R){case y.Us.math:b.current.math=S;break;case y.Us.reduce:case y.Us.resample:case y.Us.resample:b.current.reduce=S,b.current.resample=S,b.current.threshold=S;break}},[]);return{getCachedExpression:M,setCachedExpression:x}}function P(b){const{query:M,queries:x,onRunQuery:R,onChange:S}=b,{getCachedExpression:O,setCachedExpression:U}=h();(0,u.useEffect)(()=>{U(M.type,M.expression)},[M.expression,M.type,U]);const I=(0,u.useCallback)(K=>{const L=O(K.value),V=(0,E.J)({...M,type:K.value});S({...V,expression:L??V.expression})},[M,S,O]),F=()=>{const K=x.filter(L=>M.refId!==L.refId).map(L=>({value:L.refId,label:L.refId}));switch(M.type){case y.Us.math:return u.createElement(m.Z,{onChange:S,query:M,labelWidth:v,onRunQuery:R});case y.Us.reduce:return u.createElement(c.v,{refIds:K,onChange:S,labelWidth:v,query:M});case y.Us.resample:return u.createElement(p.p,{query:M,labelWidth:v,onChange:S,refIds:K});case y.Us.classic:return u.createElement(r.I,{onChange:S,query:M,refIds:K});case y.Us.threshold:return u.createElement(g.M,{onChange:S,query:M,labelWidth:v,refIds:K})}},w=y._M.find(K=>K.value===M.type);return u.createElement("div",null,u.createElement(o._,{label:"Operation",labelWidth:v},u.createElement(d.Ph,{options:y._M,value:w,onChange:I,width:25})),F())}class a extends s.CK{constructor(M){super(M),this.instanceSettings=M}applyTemplateVariables(M,x){const R=(0,l.J)();return{...M,expression:R.replace(M.expression,x),window:R.replace(M.window,x)}}getCollapsedText(M){return`Expression: ${M.type}`}query(M){let x=M.targets.map(async S=>{const O=await(0,f.F)().get(S.datasource);return O.interpolateVariablesInQueries?O?.interpolateVariablesInQueries([S],M.scopedVars)[0]:S});return(0,t.D)(Promise.all(x)).pipe((0,n.z)(S=>super.query({...M,targets:S})))}newQuery(M){return{refId:"--",datasource:s.hr,type:M?.type??y.Us.math,...M}}}const C={id:-100,uid:y.Yq,name:s.hr.name,type:s.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:i.zV.datasource,name:s.hr.type,id:s.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},D=new a(C);D.meta={id:s.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},D.components={QueryEditor:P}},5076:(Y,T,e)=>{"use strict";e.d(T,{I:()=>P});var t=e(66111),n=e(11543),i=e(81764),s=e(31403),l=e(39904),f=e(51935),u=e(9892),o=e(26418),d=e(72648),r=e(44342),m=e(8581),c=e(46967),p=e(67162);const g=p.Z.reducerTypes.map(a=>({label:a.text,value:a.value})),y=p.Z.evalOperators.map(a=>({label:a.text,value:a.value})),E=p.Z.evalFunctions.map(a=>({label:a.text,value:a.value})),v=({condition:a,index:C,onChange:D,onRemoveCondition:b,refIds:M})=>{const x=(0,d.wW)(h),R=K=>{D({...a,operator:{type:K.value}})},S=K=>{D({...a,reducer:{type:K.value,params:[]}})},O=K=>{D({...a,query:{params:[K.value]}})},U=K=>{D({...a,evaluator:{params:a.evaluator.params,type:K.value}})},I=(K,L)=>{const V=parseFloat(K.currentTarget.value),H=[...a.evaluator.params];H[L]=V,D({...a,evaluator:{...a.evaluator,params:H}})},F=u.css`
    width: 60px;
  `,w=a.evaluator.type===p.$.IsWithinRange||a.evaluator.type===p.$.IsOutsideRange;return t.createElement(o.Stack,{direction:"row"},t.createElement("div",{style:{flex:1}},t.createElement(n.Z,null,C===0?t.createElement("div",{className:(0,u.cx)(x.button,F)},"WHEN"):t.createElement(r.d,{className:(0,u.cx)(x.buttonSelectText,F),options:y,onChange:R,value:y.find(K=>K.value===a.operator.type)}),t.createElement(m.Ph,{options:g,onChange:S,width:20,value:g.find(K=>K.value===a.reducer.type)}),t.createElement("div",{className:x.button},"OF"),t.createElement(m.Ph,{onChange:O,options:M,width:"auto",value:M.find(K=>K.value===a.query.params[0])})),t.createElement(n.Z,null,t.createElement(r.d,{className:x.buttonSelectText,options:E,onChange:U,value:E.find(K=>K.value===a.evaluator.type)}),w?t.createElement(t.Fragment,null,t.createElement(c.I,{type:"number",width:10,onChange:K=>I(K,0),value:a.evaluator.params[0]}),t.createElement("div",{className:x.button},"TO"),t.createElement(c.I,{type:"number",width:10,onChange:K=>I(K,1),value:a.evaluator.params[1]})):a.evaluator.type!==p.$.HasNoValue?t.createElement(c.I,{type:"number",width:10,onChange:K=>I(K,0),value:a.evaluator.params[0]}):null)),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:()=>b(C)},t.createElement(l.J,{name:"trash-alt"})))},h=a=>{const C=u.css`
    color: ${a.colors.primary.text};
    font-size: ${a.typography.bodySmall.fontSize};
  `;return{buttonSelectText:C,button:(0,u.cx)(u.css`
        display: flex;
        align-items: center;
        border-radius: ${a.shape.borderRadius(1)};
        font-weight: ${a.typography.fontWeightMedium};
        border: 1px solid ${a.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${a.spacing(1)};
        background-color: ${a.colors.background.canvas};
      `,C)}},P=({onChange:a,query:C,refIds:D})=>{const b=(R,S)=>{C.conditions&&a({...C,conditions:[...C.conditions.slice(0,S),R,...C.conditions.slice(S+1)]})},M=()=>{if(C.conditions){const R=C.conditions.at(-1)?.query?.params??[],S={...f.R,query:{params:R}};a({...C,conditions:C.conditions.length>0?[...C.conditions,S]:[S]})}},x=R=>{if(C.conditions){const S=C.conditions[R],O=C.conditions.filter(U=>U!==S).map((U,I)=>I===0?{...U,operator:{type:"when"}}:U);a({...C,conditions:O})}};return t.createElement("div",null,t.createElement(n.Z,null,t.createElement(i._,{label:"Conditions",labelWidth:14},t.createElement("div",null,C.conditions?.map((R,S)=>{if(R)return t.createElement(v,{key:S,index:S,condition:R,onChange:O=>b(O,S),onRemoveCondition:x,refIds:D})})))),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:M},t.createElement(l.J,{name:"plus-circle"})))}},71263:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>m});var t=e(9892),n=e(66111),i=e(26418),s=e(72648),l=e(81764),f=e(77117),u=e(39904),o=e(97379),d=e(42042);const r="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",m=({labelWidth:y,onChange:E,query:v,onRunQuery:h})=>{const P=D=>{E({...v,expression:D.target.value})},a=(0,s.wW)(p),C=()=>{v.expression&&h()};return n.createElement(i.Stack,{direction:"row"},n.createElement(l._,{label:n.createElement(f.W,{width:"auto"},n.createElement(d.z,{content:n.createElement("div",{className:a.documentationContainer},n.createElement("header",{className:a.documentationHeader},n.createElement(u.J,{name:"book-open"})," Math operator"),n.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",n.createElement("br",null),"Example: ",n.createElement("code",null,"$A + $B")),n.createElement("header",{className:a.documentationHeader},"Available Math functions"),n.createElement("div",{className:a.documentationFunctions},n.createElement(c,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),n.createElement(c,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(c,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(c,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(c,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),n.createElement(c,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),n.createElement(c,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),n.createElement(c,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),n.createElement(c,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),n.createElement(c,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."})),n.createElement("div",null,"See our additional documentation on"," ",n.createElement("a",{className:a.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},n.createElement(u.J,{size:"xs",name:"external-link-alt"})," Math expressions"),"."))},n.createElement("span",null,"Expression ",n.createElement(u.J,{name:"info-circle"})))),labelWidth:y,grow:!0,shrink:!0},n.createElement(o.K,{value:v.expression,onChange:P,rows:1,placeholder:r,onBlur:C,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},c=({name:y,description:E})=>{const v=(0,s.wW)(g);return n.createElement(n.Fragment,null,n.createElement("span",{className:v.name},y),n.createElement("span",{className:v.description},E))},p=y=>({documentationHeader:t.css`
    font-size: ${y.typography.h5.fontSize};
    font-weight: ${y.typography.h5.fontWeight};
  `,documentationLink:t.css`
    color: ${y.colors.text.link};
  `,documentationContainer:t.css`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${y.spacing(2)};

    padding: ${y.spacing(1)} ${y.spacing(2)};
  `,documentationFunctions:t.css`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${y.spacing(2)};
  `}),g=y=>({name:t.css`
    font-weight: ${y.typography.fontWeightBold};
  `,description:t.css`
    font-size: ${y.typography.bodySmall.fontSize};
    color: ${y.colors.text.disabled};
  `})},75897:(Y,T,e)=>{"use strict";e.d(T,{v:()=>u});var t=e(66111),n=e(81764),i=e(46967),s=e(11543),l=e(8581),f=e(97573);const u=({labelWidth:o="auto",onChange:d,refIds:r,query:m})=>{const c=f.SQ.find(a=>a.value===m.reducer),p=a=>{d({...m,expression:a.value})},g=a=>{d({...m,reducer:a.value})},y=a=>{d({...m,settings:a})},E=a=>{let C;switch(a.value){case f.kN.ReplaceNonNumbers:let D=0;m.settings?.mode===f.kN.ReplaceNonNumbers&&(D=m.settings?.replaceWithValue??0),C={mode:f.kN.ReplaceNonNumbers,replaceWithValue:D};break;default:C={mode:a.value}}y(C)},v=a=>{const C=a.currentTarget.valueAsNumber;y({mode:f.kN.ReplaceNonNumbers,replaceWithValue:C??0})},h=m.settings?.mode??f.kN.Strict,P=()=>{if(h===f.kN.ReplaceNonNumbers)return t.createElement(n._,{label:"Replace With",labelWidth:o},t.createElement(i.I,{type:"number",width:10,onChange:v,value:m.settings?.replaceWithValue??0}))};return t.createElement(t.Fragment,null,t.createElement(s.Z,null,t.createElement(n._,{label:"Function",labelWidth:o},t.createElement(l.Ph,{options:f.SQ,value:c,onChange:g,width:20})),t.createElement(n._,{label:"Input",labelWidth:o},t.createElement(l.Ph,{onChange:p,options:r,value:m.expression,width:"auto"}))),t.createElement(s.Z,null,t.createElement(n._,{label:"Mode",labelWidth:o},t.createElement(l.Ph,{onChange:E,options:f.YM,value:h,width:25})),P()))}},436:(Y,T,e)=>{"use strict";e.d(T,{p:()=>u});var t=e(66111),n=e(11543),i=e(81764),s=e(8581),l=e(46967),f=e(97573);const u=({labelWidth:o="auto",onChange:d,refIds:r,query:m})=>{const c=f.Fr.find(h=>h.value===m.downsampler),p=f.r8.find(h=>h.value===m.upsampler),g=h=>{d({...m,window:h.target.value})},y=h=>{d({...m,expression:h.value})},E=h=>{d({...m,downsampler:h.value})},v=h=>{d({...m,upsampler:h.value})};return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(i._,{label:"Input",labelWidth:o},t.createElement(s.Ph,{onChange:y,options:r,value:m.expression,width:20}))),t.createElement(n.Z,null,t.createElement(i._,{label:"Resample to",labelWidth:o,tooltip:"10s, 1m, 30m, 1h"},t.createElement(l.I,{onChange:g,value:m.window,width:15})),t.createElement(i._,{label:"Downsample"},t.createElement(s.Ph,{options:f.Fr,value:c,onChange:E,width:25})),t.createElement(i._,{label:"Upsample"},t.createElement(s.Ph,{options:f.r8,value:p,onChange:v,width:25}))))}},17349:(Y,T,e)=>{"use strict";e.d(T,{M:()=>c});var t=e(9892),n=e(66111),i=e(72648),s=e(11543),l=e(81764),f=e(8581),u=e(44342),o=e(46967),d=e(67162),r=e(97573);const m=d.$.IsAbove,c=({labelWidth:y,onChange:E,refIds:v,query:h})=>{const P=(0,i.wW)(g),a={type:"query",evaluator:{type:m,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},C=h.conditions?.length?h.conditions:[a],D=C[0],b=r.Mi.find(O=>O.value===C[0].evaluator?.type),M=O=>{E({...h,expression:O.value})},x=O=>{const U=O.value??m;E({...h,conditions:p(C,{type:U})})},R=(O,U)=>{const I=parseFloat(O.currentTarget.value),F=[...D.evaluator.params];F[U]=I,E({...h,conditions:p(C,{params:F})})},S=D.evaluator.type===d.$.IsWithinRange||D.evaluator.type===d.$.IsOutsideRange;return n.createElement(s.Z,null,n.createElement(l._,{label:"Input",labelWidth:y},n.createElement(f.Ph,{onChange:M,options:v,value:h.expression,width:20})),n.createElement(u.d,{className:P.buttonSelectText,options:r.Mi,onChange:x,value:b}),S?n.createElement(n.Fragment,null,n.createElement(o.I,{type:"number",width:10,onChange:O=>R(O,0),defaultValue:D.evaluator.params[0]}),n.createElement("div",{className:P.button},"TO"),n.createElement(o.I,{type:"number",width:10,onChange:O=>R(O,1),defaultValue:D.evaluator.params[1]})):n.createElement(o.I,{type:"number",width:10,onChange:O=>R(O,0),defaultValue:C[0].evaluator.params[0]||0}))};function p(y,E){return[{...y[0],evaluator:{...y[0].evaluator,...E}}]}const g=y=>({buttonSelectText:t.css`
    color: ${y.colors.primary.text};
    font-size: ${y.typography.bodySmall.fontSize};
    text-transform: uppercase;
  `,button:t.css`
    height: 32px;

    color: ${y.colors.primary.text};
    font-size: ${y.typography.bodySmall.fontSize};
    text-transform: uppercase;

    display: flex;
    align-items: center;
    border-radius: ${y.shape.borderRadius(1)};
    font-weight: ${y.typography.fontWeightBold};
    border: 1px solid ${y.colors.border.medium};
    white-space: nowrap;
    padding: 0 ${y.spacing(1)};
    background-color: ${y.colors.background.primary};
  `})},75e3:(Y,T,e)=>{"use strict";e.d(T,{j:()=>i});var t=e(22069),n=e(97573);const i=s=>{if(!s)return!1;if((0,t.Pr)(s.datasource))return!0;const l=s;return typeof l.type!="string"?!1:Object.values(n.Us).includes(l.type)}},97573:(Y,T,e)=>{"use strict";e.d(T,{Fr:()=>d,Mi:()=>m,SQ:()=>f,Us:()=>s,YM:()=>o,Yq:()=>i,_M:()=>l,kN:()=>u,r8:()=>r});var t=e(33750),n=e(67162);const i="__expr__";var s=(c=>(c.math="math",c.reduce="reduce",c.resample="resample",c.classic="classic_conditions",c.threshold="threshold",c))(s||{});const l=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."}],f=[{value:t.gz.min,label:"Min",description:"Get the minimum value"},{value:t.gz.max,label:"Max",description:"Get the maximum value"},{value:t.gz.mean,label:"Mean",description:"Get the average value"},{value:t.gz.sum,label:"Sum",description:"Get the sum of all values"},{value:t.gz.count,label:"Count",description:"Get the number of values"},{value:t.gz.last,label:"Last",description:"Get the last value"}];var u=(c=>(c.Strict="",c.ReplaceNonNumbers="replaceNN",c.DropNonNumbers="dropNN",c))(u||{});const o=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],d=[{value:t.gz.last,label:"Last",description:"Fill with the last value"},{value:t.gz.min,label:"Min",description:"Fill with the minimum value"},{value:t.gz.max,label:"Max",description:"Fill with the maximum value"},{value:t.gz.mean,label:"Mean",description:"Fill with the average value"},{value:t.gz.sum,label:"Sum",description:"Fill with the sum of all values"}],r=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],m=[{value:n.$.IsAbove,label:"Is above"},{value:n.$.IsBelow,label:"Is below"},{value:n.$.IsWithinRange,label:"Is within range"},{value:n.$.IsOutsideRange,label:"Is outside range"}]},51935:(Y,T,e)=>{"use strict";e.d(T,{J:()=>s,R:()=>l});var t=e(33750),n=e(67162),i=e(97573);const s=f=>{switch(f.type){case i.Us.reduce:f.reducer||(f.reducer=t.gz.mean);break;case i.Us.resample:f.downsampler||(f.downsampler=t.gz.mean),f.upsampler||(f.upsampler="fillna"),f.reducer=void 0;break;case i.Us.math:f.expression=void 0;break;case i.Us.classic:f.conditions||(f.conditions=[l]);break;default:f.reducer=void 0}return f},l={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:n.$.IsAbove}}},61986:(Y,T,e)=>{"use strict";e.d(T,{Go:()=>p,J6:()=>y,OD:()=>c,Pb:()=>m,Uk:()=>h,W7:()=>a,a:()=>g,pz:()=>P,v7:()=>v});var t=e(65583),n=e(72196),i=e(37932),s=e(54899),l=e(659),f=e(60499),u=e(77582),o=e(29930),d=e(60492),r=e(15932);function m(C){return async D=>{const b=await o.ae.getFolderByUid(C);return D((0,r.G3)(b)),D((0,l.RL)((0,d.B1)(b))),b}}function c(C){return async D=>{const b=await o.ae.put(`/api/folders/${C.uid}`,{title:C.title,version:C.version});D((0,l.$l)((0,f.AT)("Folder saved"))),D((0,r.G3)(b)),i.E1.push(n.u.stripBaseFromUrl(`${b.url}/settings`))}}function p(C){return async()=>{await o.ae.delete(`/api/folders/${C}?forceDeleteRules=false`),i.E1.push("/dashboards")}}function g(C){return async D=>{const b=await o.ae.get(`/api/folders/${C}/permissions`);D((0,r.R7)(b))}}function y(C){return async D=>{try{await(0,t.n)(o.ae.fetch({method:"GET",showErrorAlert:!1,showSuccessAlert:!1,url:`/api/folders/${C}/permissions`})),D((0,r.$$)(!0))}catch(b){(0,s.kW)(b)&&b.status!==403&&D((0,l.$l)((0,f.ZR)("Error checking folder permissions",b.data?.message))),D((0,r.$$)(!1))}}}function E(C){return{userId:C.userId,teamId:C.teamId,role:C.role,permission:C.permission}}function v(C,D){return async(b,M)=>{const x=M().folder,R=[];for(const S of x.permissions){if(S.inherited)continue;const O=E(S);C===S&&(O.permission=D),R.push(O)}await o.ae.post(`/api/folders/${x.uid}/permissions`,{items:R}),await b(g(x.uid))}}function h(C){return async(D,b)=>{const M=b().folder,x=[];for(const R of M.permissions)R.inherited||R===C||x.push(E(R));await o.ae.post(`/api/folders/${M.uid}/permissions`,{items:x}),await D(g(M.uid))}}function P(C){return async(D,b)=>{const M=b().folder,x=[];for(const R of M.permissions)R.inherited||x.push(E(R));x.push({userId:C.userId,teamId:C.teamId,role:C.role,permission:C.permission}),await o.ae.post(`/api/folders/${M.uid}/permissions`,{items:x}),await D(g(M.uid))}}function a(C,D){return async b=>{const M=await(0,s.i)().post("/api/folders",{title:C,parentUid:D});await u.Vt.fetchUserPermissions(),b((0,l.$l)((0,f.AT)("Folder Created","OK"))),i.E1.push(n.u.stripBaseFromUrl(M.url))}}},60492:(Y,T,e)=>{"use strict";e.d(T,{B1:()=>r,Pr:()=>l,_l:()=>m,y3:()=>s});var t=e(35645),n=e(82002),i=e(27876);const s="manage-folder",l=c=>`folder-dashboards-${c}`,f=c=>`folder-library-panels-${c}`,u=c=>`folder-alerting-${c}`,o=c=>`folder-permissions-${c}`,d=c=>`folder-settings-${c}`;function r(c,p=c.parents){const g={icon:"folder",id:s,subTitle:"Manage folder dashboards and permissions",url:c.url,text:c.title,breadcrumbs:[{title:"Dashboards",url:"dashboards"}],children:[{active:!1,icon:"apps",id:l(c.uid),text:"Dashboards",url:c.url}]};if(p&&p.length>0){const y=p[p.length-1],E=p.slice(0,p.length-1);g.parentItem=r(y,E)}return g.children.push({active:!1,icon:"library-panel",id:f(c.uid),text:"Panels",url:`${c.url}/library-panels`}),n.Vt.hasPermission(i.AccessControlAction.AlertingRuleRead)&&t.v.unifiedAlertingEnabled&&g.children.push({active:!1,icon:"bell",id:u(c.uid),text:"Alert rules",url:`${c.url}/alerting`}),c.canAdmin&&g.children.push({active:!1,icon:"lock",id:o(c.uid),text:"Permissions",url:`${c.url}/permissions`}),c.canSave&&g.children.push({active:!1,icon:"cog",id:d(c.uid),text:"Settings",url:`${c.url}/settings`}),g}function m(c){const p=r({created:"",createdBy:"",hasAcl:!1,updated:"",updatedBy:"",id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return p.children[c].active=!0,{main:p,node:p.children[c]}}},15932:(Y,T,e)=>{"use strict";e.d(T,{$$:()=>o,G3:()=>f,R7:()=>l,Ss:()=>u,ZP:()=>r});var t=e(62992),n=e(2024);const i={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1,permissions:[],canViewFolderPermissions:!1},s=(0,t.oM)({name:"folder",initialState:i,reducers:{loadFolder:(m,c)=>({...m,...c.payload,hasChanged:!1}),setFolderTitle:(m,c)=>({...m,title:c.payload,hasChanged:c.payload.trim().length>0}),loadFolderPermissions:(m,c)=>({...m,permissions:(0,n.A)(c.payload)}),setCanViewFolderPermissions:(m,c)=>(m.canViewFolderPermissions=c.payload,m)}}),{loadFolderPermissions:l,loadFolder:f,setFolderTitle:u,setCanViewFolderPermissions:o}=s.actions,r={folder:s.reducer}},74311:(Y,T,e)=>{"use strict";e.d(T,{Q:()=>d});var t=e(9892),n=e(66111),i=e(72648),s=e(8581),l=e(45253),f=e(7804),u=e(73063);const o=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:u.LI},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],d=({value:m,onChange:c,context:p,item:g})=>{const y=r((0,i.l4)()),[E,v]=(0,n.useState)(),h=g.settings;(0,n.useEffect)(()=>{async function C(){const D=await(0,u.so)(m);v(D)}C()},[m,v]);const{current:P,options:a}=(0,n.useMemo)(()=>{let C=h?.options?[...h.options]:[...o],D=C?.find(b=>b.value===E?.path);return!D&&E&&(D={label:E.path,value:E.path},C.push(D)),{options:C,current:D}},[E,h?.options]);return n.createElement(n.Fragment,null,n.createElement(s.Ph,{value:P,options:a,onChange:C=>c(C.value),allowCustomValue:!0,formatCreateLabel:C=>`Load from URL: ${C}`}),E&&n.createElement(n.Fragment,null,E.error&&n.createElement(l.b,{title:E.error,severity:"warning"}),E.count&&n.createElement("div",{className:y.keys},n.createElement("b",null,"(",E.count,")"),E.examples(10).map(C=>n.createElement("span",{key:C},C,",")),E.count>10&&" ...")))},r=(0,f.B)(m=>({keys:t.css`
      margin-top: 4px;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;

      > span {
        margin-left: 4px;
      }
    `}))},71575:(Y,T,e)=>{"use strict";e.d(T,{C:()=>v});var t=e(99098),n=e(40538),i=e(74311),s=e(9892),l=e(66111),f=e(68183),u=e(72648),o=e(45253),d=e(39904),r=e(8581),m=e(52081),c=e(43524);const p=[{value:n.q1.Auto,label:"Auto",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:n.q1.Coords,label:"Coords",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:n.q1.Geohash,label:"Geohash",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:n.q1.Lookup,label:"Lookup",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],g="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",y=({value:h,onChange:P,context:a,item:C})=>{const[D,b]=(0,l.useState)();(0,l.useEffect)(()=>{C.settings?.source&&C.settings?.data?.length&&C.settings.data[0]&&(0,c.cJ)(C.settings.source).then(R=>{C.settings&&C.settings.data&&b((0,c.g6)(C.settings.data[0],R))})},[C.settings]);const M=(0,u.wW)(E),x=()=>{if(D){if(D.warning)return l.createElement(o.b,{title:D.warning,severity:"warning",buttonContent:l.createElement(d.J,{name:"question-circle",size:"xl"}),className:M.alert,onRemove:()=>{const R=window.open(g,"_blank","noopener,noreferrer");R&&(R.opener=null)}});if(h===n.q1.Auto&&D.description)return l.createElement("span",null,D.description)}return null};return l.createElement(l.Fragment,null,l.createElement(r.Ph,{options:p,value:h,onChange:R=>{P(R.value)}}),l.createElement(m.Lh,{className:M.hGroup},x()))},E=h=>({alert:s.css`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:s.css`
      & div {
        width: 100%;
      }
    `});function v(h,P,a,C,D){switch(a.addCustomEditor({id:"modeEditor",path:`${P}mode`,name:"Location Mode",editor:y,settings:{data:D,source:C}}),C?.mode){case n.q1.Coords:a.addFieldNamePicker({path:`${P}latitude`,name:"Latitude field",settings:{filter:b=>b.type===t.fS.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${P}longitude`,name:"Longitude field",settings:{filter:b=>b.type===t.fS.number,noFieldsMessage:"No numeric fields found"}});break;case n.q1.Geohash:a.addFieldNamePicker({path:`${P}geohash`,name:"Geohash field",settings:{filter:b=>b.type===t.fS.string,noFieldsMessage:"No strings fields found"}});break;case n.q1.Lookup:a.addFieldNamePicker({path:`${P}lookup`,name:"Lookup field",settings:{filter:b=>b.type===t.fS.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${P}gazetteer`,name:"Gazetteer",editor:i.Q})}}},50466:(Y,T,e)=>{"use strict";e.d(T,{EK:()=>c,Fh:()=>p,ie:()=>m,uZ:()=>d,zS:()=>r});var t=e(63897),n=e(30292),i=e(17792),s=e(29501),l=e(99098),f=e(14573);function u(y){if(!y?.length)return;const E=[16,8,4,2,1],v="0123456789bcdefghjkmnpqrstuvwxyz";let h=!0;const P=[],a=[];P[0]=-90,P[1]=90,a[0]=-180,a[1]=180;let C;y.split("").forEach(M=>{C=v.indexOf(M),E.forEach(x=>{o(h?a:P,C,x),h=!h})});const D=(P[0]+P[1])/2;return[(a[0]+a[1])/2,D]}function o(y,E,v){E&v?y[0]=(y[0]+y[1])/2:y[1]=(y[0]+y[1])/2}function d(y){return{name:y.name??"Point",type:l.fS.geo,values:y.values.map(E=>{const v=u(E);if(v)return new t.Z((0,s.mi)(v))}),config:g}}function r(y,E){const v=new Array(y.values.length);for(let h=0;h<y.values.length;h++){const P=y.values[h],a=E.values[h];P===null||a===null||(v[h]=new t.Z((0,s.mi)([P,a])))}return{name:"Point",type:l.fS.geo,values:v,config:g}}function m(y,E){const v=E.values.length,h=new Array(v);for(let P=0;P<v;P++)h[P]=y.find(E.values[P])?.geometry();return{name:"Geometry",type:l.fS.geo,values:h,config:g}}function c(y,E){const v=y.values,h=E.values;if(!v||!h)throw"missing src/dest";if(v.length!==h.length)throw"Source and destination field lengths do not match";const P=y.values.length,a=new Array(P);for(let C=0;C<P;C++){const D=v[C],b=h[C];D&&b?a[C]=new n.Z([D,b]):D?a[C]=D:b&&(a[C]=b)}return{name:"Geometry",type:l.fS.geo,values:a,config:g}}function p(y,E){const v=y.values,h=E.values;if(!v||!h)throw"missing src/dest";if(v.length!==h.length)throw"Source and destination field lengths do not match";const P=y.values.length,a=new Array(P);for(let C=0;C<P;C++){const D=v[C],b=h[C];D&&b&&(a[C]=new i.Z([(0,f.Lb)(D),(0,f.Lb)(b)]))}return{name:"Geometry",type:l.fS.geo,values:a,config:g}}const g=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},73063:(Y,T,e)=>{"use strict";e.d(T,{LI:()=>y,so:()=>E});var t=e(55839),n=e(63897),i=e(83881),s=e(99098),l=e(54899),f=e(69396);function u(v){const h=new f.Z().readFeatures(v,{featureProjection:"EPSG:3857"}),P=h.length,a=new Array(P).fill(null),C=[],D=new Map,b=S=>{let O=D.get(S);return O||(O={types:new Set,values:new Array(P).fill(null),count:0},C.push(S),D.set(S,O)),O},M=(...S)=>{for(const O of S)if(!D.has(O))return O;return"___"+S[0]},x={types:new Set,values:new Array(P).fill(null),count:0};for(let S=0;S<P;S++){const O=h[S];a[S]=O.getGeometry();const U=O.getId();U!=null&&(x.values[S]=U,x.types.add((0,i.DP)(U)),x.count++);for(const I of O.getKeys()){const F=O.get(I);if(F===a[S]||F==null)continue;const w=b(I);w.values[S]=F,w.types.add((0,i.DP)(F)),w.count++}}const R=[];if(x.count>0){const S=o(x);R.push({name:M("id","_id","__id"),type:S,values:x.values,config:{}})}R.push({name:M("geo","geometry"),type:s.fS.geo,values:a,config:{}});for(const S of C){const O=D.get(S);if(!O)continue;const U=o(O);R.push({name:S,type:U,values:O.values,config:{}})}return{fields:R,length:P}}function o(v){return v.count<1?s.fS.other:v.types.size>1?(v.values=v.values.map(h=>h!=null?`${h}`:h),s.fS.string):v.types.values().next().value}var d=e(50466),r=e(29501);function m(v,h){let P=0;const a=new Map;for(const C of h){const D=new n.Z((0,r.mi)([C.longitude,C.latitude])),b={point:()=>D,geometry:()=>D};if(C.name&&(a.set(C.name,b),a.set(C.name.toUpperCase(),b)),C.key&&(a.set(C.key,b),a.set(C.key.toUpperCase(),b)),C.keys)for(const M of C.keys)a.set(M,b),a.set(M.toUpperCase(),b);P++}return{path:v,find:C=>{let D=a.get(C);return!D&&typeof C=="string"&&(D=a.get(C.toUpperCase())),D},count:P,examples:C=>{const D=[];if(a.size<1)D.push("no values found");else for(const b of a.keys())if(D.push(b),D.length>=C)break;return D}}}function c(v,h){let P;if(Array.isArray(h)){const a=h[0];if(a.latitude&&a.longitude&&(a.key||a.keys))return m(v,h)}else Array.isArray(h?.features)&&h?.type==="FeatureCollection"&&(P=u(h));if(!P)try{P=(0,i.g0)(h)}catch(a){return{path:v,error:`${a}`,find:C=>{},examples:C=>[]}}return p(P,{path:v})}function p(v,h){const P=[];let a,C,D,b,M;for(const S of v.fields)if(S.type===s.fS.geo&&(a=S),!M&&S.type===s.fS.string&&(M=S),S.name){h.keys&&h.keys.includes(S.name)&&P.push(S);const O=S.name.toUpperCase();switch(O){case"LAT":case"LATITUTE":C=S;break;case"LON":case"LNG":case"LONG":case"LONGITUE":D=S;break;case"GEOHASH":b=S;break;case"ID":case"UID":case"KEY":case"CODE":h.keys||P.push(S);break;default:h.keys||(O.endsWith("_ID")||O.endsWith("_CODE"))&&P.push(S)}}!P.length&&M&&P.push(M);let x=!1;a?x=a.values[0]?.getType()==="Point":b?(a=(0,d.uZ)(b),x=!0):C&&D&&(a=(0,d.zS)(D,C),x=!0);const R=new Map;return P.forEach(S=>{S.values.forEach((O,U)=>{const I=`${O}`;R.set(I.toUpperCase(),U),R.set(I,U)})}),{path:h.path,find:S=>{const O=R.get(S);if(O!=null){const U=a?.values[O];return{frame:v,index:O,point:()=>!U||x?U:new n.Z((0,t.qg)(U.getExtent())),geometry:()=>U}}},examples:S=>{const O=[];for(let U of R.keys())if(O.push(U),O.length>S)break;return O},frame:()=>v,count:v.length}}const g={},y="public/gazetteer/countries.json";async function E(v){v||(v=y);let h=g[v];if(!h){try{const P=await(0,l.i)().get(v);h=c(v,P)}catch(P){console.warn("Error loading placename lookup",v,P),h={path:v,error:"Error loading URL",find:a=>{},examples:a=>[]}}g[v]=h}return h}},43524:(Y,T,e)=>{"use strict";e.d(T,{cJ:()=>m,g6:()=>p});var t=e(30471),n=e(99098),i=e(50035),s=e(90748),l=e(40538),f=e(50466),u=e(73063);function o(g){return y=>{for(const E of y.fields)if(g(E,y,[]))return E}}function d(g){return y=>{for(const E of y.fields){if(g.has(E.name.toLowerCase()))return E;const v=(0,t.CZ)(E,y);if(g.has(v))return E}}}const r={mode:l.q1.Auto,geohash:d(new Set(["geohash"])),latitude:d(new Set(["latitude","lat"])),longitude:d(new Set(["longitude","lon","lng"])),h3:d(new Set(["h3"])),wkt:d(new Set(["wkt"])),lookup:d(new Set(["lookup"])),geo:g=>g.fields.find(y=>y.type===n.fS.geo)};async function m(g){const y={...r,mode:g?.mode??l.q1.Auto};switch(y.gazetteer=await(0,u.so)(g?.gazetteer),y.mode){case l.q1.Geohash:g?.geohash?y.geohash=o((0,i.sq)({id:s.mi.byName,options:g.geohash})):y.geohash=()=>{};break;case l.q1.Lookup:const E=g?.lookup?.length?(0,i.sq)({id:s.mi.byName,options:g.lookup}):(0,i.sq)({id:s.mi.byType,options:n.fS.string});y.lookup=o(E);break;case l.q1.Coords:g?.latitude?y.latitude=o((0,i.sq)({id:s.mi.byName,options:g.latitude})):y.latitude=()=>{},g?.longitude?y.longitude=o((0,i.sq)({id:s.mi.byName,options:g.longitude})):y.longitude=()=>{};break}return y}function c(g,y){const E={mode:y.mode??l.q1.Auto};if(E.mode===l.q1.Auto){if(E.geo=y.geo(g),E.geo)return E;if(E.latitude=y.latitude(g),E.longitude=y.longitude(g),E.latitude&&E.longitude)return E.mode=l.q1.Coords,E;if(E.geohash=y.geohash(g),E.geohash)return E.mode=l.q1.Geohash,E;if(E.lookup=y.lookup(g),E.lookup)return E.mode=l.q1.Lookup,E}switch(E.mode){case l.q1.Coords:E.latitude=y.latitude(g),E.longitude=y.longitude(g);break;case l.q1.Geohash:E.geohash=y.geohash(g);break;case l.q1.Lookup:E.lookup=y.lookup(g);break}return E}function p(g,y){const E=c(g,y);switch(E.mode){case l.q1.Auto:return E.geo?{field:E.geo}:{warning:"Unable to find location fields"};case l.q1.Coords:return E.latitude&&E.longitude?{field:(0,f.zS)(E.longitude,E.latitude),derived:!0,description:`${E.mode}: ${E.latitude.name}, ${E.longitude.name}`}:{warning:"Select latitude/longitude fields"};case l.q1.Geohash:return E.geohash?{field:(0,f.uZ)(E.geohash),derived:!0,description:`${E.mode}`}:{warning:"Select geohash field"};case l.q1.Lookup:return E.lookup?y.gazetteer?{field:(0,f.ie)(y.gazetteer,E.lookup),derived:!0,description:`${E.mode}: ${y.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},65066:(Y,T,e)=>{"use strict";e.d(T,{Fc:()=>r,KO:()=>c,gb:()=>p,gv:()=>m});var t=e(3574),n=e.n(t),i=e(77258),s=e(13512),l=e(76015),f=e(53678),u=e(96606),o=e(86146),d=e(26991);function r(g,y){let E="";g.meta?.forEach(P=>{const a=`${P.label}: ${JSON.stringify(P.value)}
`;E=E+a}),E=E+`

`,g.rows.forEach(P=>{const a=(0,i.lf)(P.timeEpochMs)+"	"+P.entry+`
`;E=E+a});const v=new Blob([E],{type:"text/plain;charset=utf-8"}),h=`${y}-logs-${(0,i.dq)(new Date)}.txt`;n()(v,h)}function m(g,y,E,v=s.W.noop){const h=(0,l.MJ)([g],E),P=new Blob([String.fromCharCode(65279),h],{type:"text/csv;charset=utf-8"}),a=v!==s.W.noop?"-as-"+v.toLocaleLowerCase():"",C=`${y}-data${a}-${(0,i.dq)(new Date)}.csv`;n()(P,C)}function c(g,y){const E=new Blob([JSON.stringify(g)],{type:"application/json"}),v=`${y}-${(0,i.dq)(new Date)}.json`;n()(E,v)}function p(g,y){let E="otlp";switch(g.meta?.custom?.traceFormat){case"jaeger":{let v=(0,u.c6)(new f.v(g));c(v,y),E="jaeger";break}case"zipkin":{let v=(0,d.H)(new f.v(g));c(v,y),E="zipkin";break}case"otlp":default:{let v=(0,o.g9)(new f.v(g));c(v,y);break}}return E}},90336:(Y,T,e)=>{"use strict";e.d(T,{GY:()=>f,MA:()=>l,nW:()=>s});var t=e(54899),n=e(77582),i=e(27876);const s=(0,i.createAsyncThunk)("users/fetchInvitees",async()=>n.Vt.hasPermission(i.AccessControlAction.OrgUsersAdd)?await(0,t.i)().get("/api/org/invites"):[]),l=(0,i.createAsyncThunk)("users/addInvitee",async(u,{dispatch:o})=>{await(0,t.i)().post("/api/org/invites",u),await o(s())}),f=(0,i.createAsyncThunk)("users/revokeInvite",async u=>(await(0,t.i)().patch(`/api/org/invites/${u}/revoke`,{}),u))},75804:(Y,T,e)=>{"use strict";e.d(T,{ZP:()=>o,wl:()=>s});var t=e(62992),n=e(90336);const i=(0,t.HF)({selectId:d=>d.code}),s=i.getSelectors(),l=i.getInitialState({status:"idle"}),o={invites:(0,t.oM)({name:"invites",initialState:l,reducers:{},extraReducers:d=>{d.addCase(n.nW.pending,r=>{r.status="loading"}).addCase(n.nW.fulfilled,(r,{payload:m})=>{i.setAll(r,m),r.status="succeeded"}).addCase(n.nW.rejected,r=>{r.status="failed"}).addCase(n.GY.fulfilled,(r,{payload:m})=>{i.removeOne(r,m),r.status="succeeded"})}}).reducer}},76647:(Y,T,e)=>{"use strict";e.d(T,{T:()=>p,c:()=>g});var t=e(66111),n=e(93006),i=e(59679),s=e(54899),l=e(24799),f=e(46967),u=e(35029),o=e(31403),d=e(79658),r=e(35287),m=e(86648),c=e(2313);const p=({panel:y,initialFolderUid:E,onDismiss:v})=>{const[h,P]=(0,t.useState)(E),[a,C]=(0,t.useState)(y.title),[D,b]=(0,t.useState)(y.title),[M,x]=(0,t.useState)(!1);(0,t.useEffect)(()=>x(!0),[a]),(0,n.Z)(()=>b(a),350,[a]);const{saveLibraryPanel:R}=(0,c.E)(),S=(0,t.useCallback)(()=>{y.libraryPanel={uid:"",name:a},R(y,h).then(I=>{I instanceof Error||v()})},[y,a,h,v,R]),O=(0,i.Z)(async()=>{try{return!(await(0,m.jh)(a)).some(I=>I.folderUid===h)}catch(I){return(0,s.kW)(I)&&(I.isHandled=!0),!0}finally{x(!1)}},[D,h]),U=!O?.value&&O.value!==void 0&&a===D&&!M;return t.createElement(t.Fragment,null,t.createElement(l.g,{label:(0,r.t)("library-panel.add-modal.name","Library panel name"),invalid:U,error:U?(0,r.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},t.createElement(f.I,{id:"share-panel-library-panel-name-input",name:"name",value:a,onChange:I=>C(I.currentTarget.value)})),t.createElement(l.g,{label:(0,r.t)("library-panel.add-modal.folder","Save in folder"),description:(0,r.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},t.createElement(d.Es,{onChange:({uid:I})=>P(I),initialFolderUid:E,inputId:"share-panel-library-panel-folder-picker"})),t.createElement(u.u.ButtonRow,null,t.createElement(o.zx,{variant:"secondary",onClick:v,fill:"outline"},t.createElement(r.cC,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),t.createElement(o.zx,{onClick:S,disabled:U},t.createElement(r.cC,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},g=({isOpen:y=!1,panel:E,initialFolderUid:v,...h})=>t.createElement(u.u,{title:"Create library panel",isOpen:y,onDismiss:h.onDismiss},t.createElement(p,{panel:E,initialFolderUid:v,onDismiss:h.onDismiss}))},81283:(Y,T,e)=>{"use strict";e.d(T,{i:()=>i});var t=e(66111),n=e(98102);const i=({isOpen:s,onConfirm:l,onDismiss:f})=>t.createElement(n.s,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{l(),f()},onDismiss:f,isOpen:s})},6297:(Y,T,e)=>{"use strict";e.d(T,{V:()=>t});function t(n){return Boolean(n.libraryPanel?.uid)}},86648:(Y,T,e)=>{"use strict";e.d(T,{E8:()=>p,Ef:()=>c,Kq:()=>d,Mh:()=>u,Ob:()=>r,Pq:()=>f,UO:()=>m,jh:()=>o});var t=e(65583),n=e(30670),i=e(86899),s=e(29930),l=e(59096);async function f({searchString:g="",perPage:y=100,page:E=1,excludeUid:v="",sortDirection:h="",typeFilter:P=[],folderFilterUIDs:a=[]}={}){const C=new URLSearchParams;C.append("searchString",g),C.append("sortDirection",h),C.append("typeFilter",P.join(",")),C.append("folderFilterUIDs",a.join(",")),C.append("excludeUid",v),C.append("perPage",y.toString(10)),C.append("page",E.toString(10)),C.append("kind",l.V.Panel.toString(10));const{result:D}=await(0,s.i)().get(`/api/library-elements?${C.toString()}`);return D}async function u(g,y=!1){const E=await(0,t.n)((0,s.i)().fetch({method:"GET",url:`/api/library-elements/${g}`,showSuccessAlert:!y,showErrorAlert:!y})),{result:v}=E.data,h=new i.f({...n.Ql,schemaVersion:35,panels:[v.model]}),P=h.panels[0].getSaveModel();return h.destroy(),{...v,model:P}}async function o(g){const{result:y}=await(0,s.i)().get(`/api/library-elements/name/${g}`);return y}async function d(g,y){const{result:E}=await(0,s.i)().post("/api/library-elements",{folderUid:y,name:g.libraryPanel.name,model:g,kind:l.V.Panel});return E}async function r(g){const{libraryPanel:y,...E}=g,{uid:v,name:h,version:P,folderUid:a}=y,C=l.V.Panel,{result:D}=await(0,s.i)().patch(`/api/library-elements/${v}`,{folderUid:a,name:h,model:E,version:P,kind:C});return D}function m(g){return(0,s.i)().delete(`/api/library-elements/${g}`)}async function c(g){const{result:y}=await(0,s.i)().get(`/api/library-elements/${g}/connections`);return y}async function p(g){const y=await c(g);return y.length===0?[]:await(0,s.i)().search({dashboardUIDs:y.map(v=>v.connectionUid)})}},59096:(Y,T,e)=>{"use strict";e.d(T,{V:()=>t});var t=(i=>(i[i.Panel=1]="Panel",i))(t||{}),n=(i=>(i[i.Dashboard=1]="Dashboard",i))(n||{})},2313:(Y,T,e)=>{"use strict";e.d(T,{E:()=>y});var t=e(66111),n=e(55986),i=e(54899),s=e(659),l=e(35287),f=e(27876),u=e(60499),o=e(86648);function d(E){return(0,u.t_)(E)}function r(E){return(0,u.AT)(E)}async function m(E,v){const h=c(E),P=await g(h,v);return p(E,P),P}function c(E){let v=E.getSaveModel();return v={libraryPanel:{name:E.title,uid:void 0},...v},v}function p(E,v){E.restoreModel({...v.model,configRev:0,libraryPanel:v,title:E.title}),E.hasSavedPanelEditChange=!0,E.refresh()}function g(E,v){return E.libraryPanel?E.libraryPanel&&E.libraryPanel.uid===""?(0,o.Kq)(E,v):(0,o.Ob)(E):Promise.reject()}const y=()=>{const E=(0,f.useDispatch)(),[v,h]=(0,n.default)(async(P,a)=>{try{return await m(P,a)}catch(C){throw(0,i.kW)(C)?(C.isHandled=!0,new Error(C.data.message)):C}},[]);return(0,t.useEffect)(()=>{if(v.error){const P=v.error.message;E((0,s.$l)(d((0,l.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:P}))))}v.value&&E((0,s.$l)(r((0,l.t)("library-panels.save.success","Library panel saved"))))},[E,v]),{state:v,saveLibraryPanel:h}}},30992:(Y,T,e)=>{"use strict";e.d(T,{H:()=>a});var t=e(44288),n=e(8891),i=e(4063),s=e(75118),l=e(37932),f=e(77582),u=e(45984),o=e(9398),d=e(9892),r=e(66111),m=e(72648),c=e(35029),p=e(31403),g=e(7804),y=(C=>(C.Saved="saved",C.EditingStarted="editing-started",C.EditingCanceled="editing-cancelled",C.Deleted="deleted",C))(y||{});function E({onDismiss:C,event:D}){const b=(0,m.wW)(v),M=()=>{if(D?.action===y.Deleted){l.E1.push("/");return}a.reloadPage(),C()};return r.createElement(c.u,{isOpen:!0,title:"Dashboard changed",icon:"copy",onDismiss:C,onClickBackdrop:()=>{},className:b.modal},r.createElement("div",{className:b.description},"The dashboad has been updated by another session. Do you want to continue editing or discard your local changes?"),r.createElement(c.u.ButtonRow,null,r.createElement(p.zx,{onClick:C,variant:"secondary",fill:"outline"},"Continue editing"),r.createElement(p.zx,{onClick:M,variant:"destructive"},"Discard local changes")))}const v=(0,g.B)(C=>({modal:(0,d.css)({width:"600px"}),description:(0,d.css)({color:C.colors.text.secondary,paddingBottom:C.spacing(1)})})),h=(0,t.Z)();class P{constructor(){this.editing=!1,this.observer={next:D=>{if((0,n.se)(D)&&this.editing&&D.state===n.yS.Connected&&this.sendEditingState(),(0,n.RL)(D)){if(D.message.sessionId===h)return;const{action:b}=D.message;switch(b){case y.EditingStarted:case y.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const M=(0,o.h4)().getCurrent();if(M?.uid!==D.message.uid){console.log("dashboard event for different dashboard?",D,M);return}const x=this.editing||M.hasUnsavedChanges();if(b===y.Saved)x?f.h$.publish(new u.Dn({component:E,props:{event:D}})):(f.h$.emit(i.SI.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(x&&b===y.EditingStarted&&!this.hasSeenNotice){const R=D.message,S=this.getRecentEditingEvent();(!S||S.message!==R.message)&&(this.hasSeenNotice=!0,f.h$.emit(i.SI.alertWarning,["Another session is editing this dashboard",R.message])),this.lastEditing=R}return}}}}}}setEditingState(D){const b=this.editing=D;this.editing=D,this.hasSeenNotice=!1,b&&f.Vt.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:D,uid:b}=this;D&&b&&(0,s.gj)().publish(D,{sessionId:h,uid:b,action:this.editing?y.EditingStarted:y.EditingCanceled,timestamp:Date.now()})}watch(D){const b=(0,s.gj)();b&&D!==this.uid&&(this.channel={scope:n.z.Grafana,namespace:"dashboard",path:`uid/${D}`},this.leave(),D&&(this.subscription=b.getStream(this.channel).subscribe(this.observer)),this.uid=D)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){l.E1.reload()}}const a=new P},28625:(Y,T,e)=>{"use strict";e.d(T,{Av:()=>m,Ko:()=>g,MB:()=>E,_A:()=>c});var t=e(83881),n=e(99098),i=e(59957),s=e(7569),l=e(17587),f=e(75118),u=e(44332);const o="__name__";var d=(C=>(C[C.wide=0]="wide",C[C.labels=1]="labels",C))(d||{});const r=class{constructor(C){this.options=C,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:f.T0.Replace,length:0},this.serialize=(D,b,M)=>{const x=b?Object.assign({},{...this.options,...b}):this.options,R=(0,t.Aw)(this,D),S=P(R.fields.map(U=>U.values),typeof M?.maxLength=="number"?Math.min(M.maxLength,x.maxLength):x.maxLength,this.timeFieldIndex,x.maxDelta);R.fields=R.fields.map(U=>({...U,values:U.values.slice(S)}));const O=R.fields[0]?.values?.length??0;return{...R,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:O,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:x}},this.initFromSerialized=D=>{this.name=D.name,this.refId=D.refId,this.meta=D.meta,this.length=D.length,this.labels=D.labels,this.schemaFields=D.schemaFields,this.timeFieldIndex=D.timeFieldIndex,this.pushMode=D.pushMode,this.packetInfo.length=D.packetInfo.length,this.packetInfo.number=D.packetInfo.number,this.packetInfo.action=f.T0.Replace,this.packetInfo.schemaChanged=!0,this.fields=D.fields.map(b=>({...b,type:b.type??n.fS.other,config:b.config??{},values:b.values??[]})),h(this.fields.map(b=>b.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:D,maxDelta:b})=>{const M=D&&this.options.maxLength<D,x=b&&this.options.maxDelta<b,R=b&&this.options.maxDelta===1/0;return Boolean(M||x||R)},this.resize=({maxLength:D,maxDelta:b})=>{b&&(this.options.maxDelta===1/0?this.options.maxDelta=b:this.options.maxDelta=Math.max(b,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,D??0)},this.pushNewValues=D=>{if(!D?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=D[0].length,this.packetInfo.schemaChanged=!1,this.options.action===f.T0.Append?v(this.fields.map(M=>M.values),D,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(D.forEach((M,x)=>{this.fields[x]&&(this.fields[x].values=M)}),h(this.fields.map(M=>M.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const b=this.fields?.[0]?.values.length;b!==void 0&&(this.length=b)},this.resetStateCalculations=()=>{this.fields.forEach(D=>{D.state={...D.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=D=>this.fields.map((b,M)=>D(b)?M:void 0).filter(b=>b!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(D=>{const b=D.values;return b.slice(Math.max(b.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>Boolean(this.packetInfo.length),this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action===f.T0.Replace}push(C){const{schema:D,data:b}=C;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,D){this.pushMode=0,this.timeFieldIndex=D.fields.findIndex(S=>S.type===n.fS.time);const M=D.fields[0];this.timeFieldIndex===1&&M.type===n.fS.string&&(M.name==="labels"||M.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const x=this.pushMode===1?D.fields.slice(1):D.fields;this.refId=D.refId,D.meta&&(this.meta={...D.meta});const{displayNameFormat:R}=this.options;if(a(this.schemaFields,x)){const S=x.length;this.fields.forEach((O,U)=>{const I=x[U%S];O.config=I.config??{},O.labels=I.labels}),R&&this.fields.forEach(O=>{const U={[o]:O.name,...O.labels};O.config.displayNameFromDS=(0,u.W)(R,U)})}else{this.packetInfo.schemaChanged=!0;const S=this.pushMode===0;this.fields=x.map(O=>{const U=O.config??{};if(R){const I={[o]:O.name,...O.labels};U.displayNameFromDS=(0,u.W)(R,I)}return{config:U,name:O.name,labels:O.labels,type:O.type??n.fS.other,values:S?this.fields.find(I=>I.name===O.name&&O.type===I.type)?.values??Array(this.length).fill(void 0):[]}})}this.schemaFields=x}if(b&&b.values.length&&b.values[0].length){let{values:M,entities:x}=b;if(x&&x.forEach((S,O)=>{S&&(0,i.Jy)(S,M[O])}),this.pushMode===1){const S=p(M);for(const I of S.keys())this.labels.has(I)||(this.packetInfo.schemaChanged=!0,this.addLabel(I));let O=Array(this.schemaFields.length).fill([]),U=[];this.labels.forEach(I=>{U.push(S.get(I)??O)}),M=(0,l.v_)(U)}if(M.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${M.length} (labels=${this.pushMode===1})`);this.fields=M.map((S,O)=>{let U=`Field ${O}`,I=(0,t.LI)(S[0]);return O===0&&I===n.fS.number&&S[0]>1600016688632&&(I=n.fS.time,U="Time"),{name:U,type:I,config:{},values:[]}})}let R=M;this.packetInfo.length=M[0].length,this.alwaysReplace||!this.length?this.packetInfo.action=f.T0.Replace:(this.packetInfo.action=f.T0.Append,R=this.fields.map(S=>S.values),v(R,M,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),R.forEach((S,O)=>{const U=this.fields[O],{state:I}=U;U.values=S,I&&(I.calcs=void 0)}),this.length=R[0].length}return{...this.packetInfo}}addLabel(C){const{displayNameFormat:D}=this.options,b=this.labels.size,M=y(C);if(b===0)this.fields.forEach((x,R)=>{if(R>0&&(x.labels=M,D)){const S={[o]:x.name,...M};x.config.displayNameFromDS=(0,u.W)(D,S)}});else for(let x=1;x<this.schemaFields.length;x++){let R=this.schemaFields[x];const S=R.config??{};if(D){const O={[o]:R.name,...M};S.displayNameFromDS=(0,u.W)(D,O)}this.fields.push({...R,config:S,labels:M,values:Array(this.length).fill(void 0)})}this.labels.add(C)}};let m=r;m.deserialize=C=>{const D=new r(C.options);return D.initFromSerialized(C),D},m.empty=C=>new r(c(C)),m.fromDataFrameJSON=(C,D)=>{const b=new r(c(D));return b.push(C),b};function c(C){return{maxLength:C?.maxLength??1e3,maxDelta:C?.maxDelta??1/0,action:C?.action??f.T0.Append,displayNameFormat:C?.displayNameFormat}}function p(C){let D=new Set(C[0]),b=new Map;D.forEach(M=>{let x=Array(C.length-1).fill(null).map(()=>[]);b.set(M,x)});for(let M=0;M<C[0].length;M++){let x=b.get(C[0][M]);for(let R=1;R<C.length;R++)x[R-1].push(C[R][M])}return b}function g(C,D,b,M){let x;b=b||0,M=M||D.length-1;let R=M<=2147483647;for(;M-b>1;)x=R?b+M>>1:Math.floor((b+M)/2),D[x]<C?b=x:M=x;return C-D[b]<=D[M]-C?b:M}function y(C){if(!C.length)return{};if(C.charAt(0)==="{")return(0,s.J8)(C);const D={};return C.split(",").forEach(b=>{const[M,x]=b.trim().split("=");D[M]=x}),D}function E(C){const D=C.packetInfo;return D?.action?D:void 0}function v(C,D,b=1/0,M=0,x=1/0){for(let R=0;R<C.length;R++)for(let S=0;S<D[R].length;S++)C[R].push(D[R][S]);return h(C,b,M,x)}function h(C,D=1/0,b=0,M=1/0){const x=P(C,D,b,M);if(x)for(let R=0;R<C.length;R++)C[R].splice(0,x);return x}function P(C,D=1/0,b=0,M=1/0){if(!C[0]?.length)return 0;const x=C[0].length;let R=0;if(x>D&&(R=x-D),M!==1/0&&b>=0){const S=C[b],O=S[R],U=S[x-1];U-O>M&&(R=g(U-M,S,R))}return R}function a(C,D){if(C?.length!==D.length)return!1;for(let b=0;b<C.length;b++){const M=C[b],x=D[b];if(M.name!==x.name||M.type!==x.type)return!1}return!0}},14035:(Y,T,e)=>{"use strict";e.d(T,{A1:()=>i,g0:()=>n,iL:()=>f});var t=e(83881),n=(u=>(u.NewValuesSameSchema="NewValuesSameSchema",u.FullFrame="FullFrame",u))(n||{});const i=(u,o)=>"type"in u&&u.type===o,s=Object.values(n),l=u=>"type"in u&&s.includes(u.type),f=u=>(0,t.aY)(u)&&"packetInfo"in u},54972:(Y,T,e)=>{"use strict";e.d(T,{j:()=>l});var t=e(9892),n=e(66111),i=e(72648);const s=["level","lvl","filename"],l=({labels:u})=>{const o=(0,i.wW)(f),d=Object.keys(u).filter(r=>!r.startsWith("_")&&!s.includes(r));return d.length===0?n.createElement("span",{className:(0,t.cx)([o.logsLabels])},n.createElement("span",{className:(0,t.cx)([o.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([o.logsLabels])},d.sort().map(r=>{const m=u[r];if(!m)return;const c=`${r}: ${m}`;return n.createElement("span",{key:r,className:(0,t.cx)([o.logsLabel])},n.createElement("span",{className:(0,t.cx)([o.logsLabelValue]),title:c},m))}))},f=u=>({logsLabels:t.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${u.typography.size.xs};
    `,logsLabel:t.css`
      label: logs-label;
      display: flex;
      padding: ${u.spacing(0,.25)};
      background-color: ${u.colors.background.secondary};
      border-radius: ${u.shape.borderRadius(1)};
      margin: ${u.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:t.css`
      label: logs-label__value;
      display: inline-block;
      max-width: ${u.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},25287:(Y,T,e)=>{"use strict";e.d(T,{Q:()=>d});var t=e(2525),n=e(66111),i=e(55271),s=e.n(i),l=e(52216),f=e(72648);function u(r,m){return m.split(/;\s*/).reduce((c,p)=>{if(p==="color:rgba(0,0,0,0.5)")return{color:r.colors.text.secondary};const g=p.match(/([^:\s]+)\s*:\s*(.+)/);if(g&&g[1]&&g[2]){const y=g[1].replace(/-([a-z])/g,(E,v)=>v.toUpperCase());c[y]=g[2]}return c},{})}class o extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(m,c){return m.value===c.prevValue?null:{chunks:t.ZP.parse(m.value).spans.map(g=>g.css?{style:u(m.theme,g.css),text:g.text}:{text:g.text}),prevValue:m.value}}render(){const{chunks:m}=this.state;return m.map((c,p)=>{const g=this.props.highlight?.searchWords?n.createElement(s(),{key:p,textToHighlight:c.text,searchWords:this.props.highlight.searchWords,findChunks:l.Xt,highlightClassName:this.props.highlight.highlightClassName}):c.text;return c.style?n.createElement("span",{key:p,style:c.style,"data-testid":"ansiLogLine"},g):g})}}const d=(0,f.HE)(o);d.displayName="LogMessageAnsi"},70821:(Y,T,e)=>{"use strict";e.d(T,{n:()=>r,r:()=>p});var t=e(9892),n=e(58635),i=e(66111),s=e(55271),l=e.n(s),f=e(52216),u=e(8180),o=e(61860),d=e(25287);const r=1e5;function m(g,y,E,v){const h=E&&E.length>0&&E[0]&&E[0].length>0&&y.length<r,P=E??[];if(g){const a=h?{searchWords:P,highlightClassName:v}:void 0;return i.createElement(d.Q,{value:y,highlight:a})}else return h?i.createElement(l(),{textToHighlight:y,searchWords:P,findChunks:f.Xt,highlightClassName:v}):y}const c=(0,n.Z)((g,y)=>{if(y)try{return JSON.stringify(JSON.parse(g),void 0,2)}catch{return g}return g});class p extends i.PureComponent{constructor(){super(...arguments),this.onShowContextClick=y=>{const{onOpenContext:E}=this.props;y.stopPropagation(),E(this.props.row)}}render(){const{row:y,wrapLogMessage:E,prettifyLogMessage:v,showContextToggle:h,styles:P}=this.props,{hasAnsi:a,raw:C}=y,D=c(C,v),b=h?h(y):!1;return i.createElement(i.Fragment,null,i.createElement("td",{className:P.logsRowMessage},i.createElement("div",{className:(0,t.cx)({[P.positionRelative]:E},{[P.horizontalScroll]:!E})},i.createElement("button",{className:(0,t.cx)(P.logLine,P.positionRelative)},m(a,D,y.searchWords,P.logsRowMatchHighLight)))),i.createElement("td",{className:(0,t.cx)("log-row-menu-cell",P.logRowMenuCell)},i.createElement("span",{className:(0,t.cx)("log-row-menu",P.rowMenu),onClick:M=>M.stopPropagation()},b&&i.createElement(u.h,{tooltip:"Show context",tooltipPlacement:"top",size:"md",name:"gf-show-context",onClick:this.onShowContextClick}),i.createElement(o.u,{placement:"top",content:"Copy"},i.createElement(u.h,{size:"md",name:"copy",onClick:()=>navigator.clipboard.writeText(D)})))))}}},59985:(Y,T,e)=>{"use strict";e.d(T,{w:()=>j});var t=e(58635),n=e(66111),i=e(40538),s=e(72648),l=e(81042),f=e(9892),u=e(82897),o=e(77258),d=e(41818),r=e(61860),m=e(39904),c=e(94599),p=e(8180),g=e(89719),y=e(7804);const E=A=>({logsStatsRow:f.css`
    label: logs-stats-row;
    margin: ${parseInt(A.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:f.css`
    label: logs-stats-row--active;
    color: ${A.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:f.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:f.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:f.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${A.spacing(.75)};
  `,logsStatsRowPercent:f.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${A.spacing(.75)};
    width: ${A.spacing(4.5)};
  `,logsStatsRowBar:f.css`
    label: logs-stats-row__bar;
    height: ${A.spacing(.5)};
    overflow: hidden;
    background: ${A.colors.text.disabled};
  `,logsStatsRowInnerBar:f.css`
    label: logs-stats-row__innerbar;
    height: ${A.spacing(.5)};
    overflow: hidden;
    background: ${A.colors.primary.main};
  `}),v=({active:A,count:_,proportion:k,value:Q})=>{const re=(0,s.wW)(E),Z=`${Math.round(k*100)}%`,oe={width:Z},G=A?(0,f.cx)([re.logsStatsRow,re.logsStatsRowActive]):(0,f.cx)([re.logsStatsRow]);return n.createElement("div",{className:G},n.createElement("div",{className:(0,f.cx)([re.logsStatsRowLabel])},n.createElement("div",{className:(0,f.cx)([re.logsStatsRowValue]),title:Q},Q),n.createElement("div",{className:(0,f.cx)([re.logsStatsRowCount])},_),n.createElement("div",{className:(0,f.cx)([re.logsStatsRowPercent])},Z)),n.createElement("div",{className:(0,f.cx)([re.logsStatsRowBar])},n.createElement("div",{className:(0,f.cx)([re.logsStatsRowInnerBar]),style:oe})))};v.displayName="LogLabelStatsRow";const h=5,P=(0,y.B)(A=>({logsStats:f.css`
      label: logs-stats;
      background: inherit;
      color: ${A.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:f.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${A.colors.border.medium};
      display: flex;
    `,logsStatsTitle:f.css`
      label: logs-stats__title;
      font-weight: ${A.typography.fontWeightMedium};
      padding-right: ${A.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:f.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:f.css`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class a extends n.PureComponent{render(){const{label:_,rowCount:k,stats:Q,value:re,theme:Z,isLabel:oe}=this.props,G=P(Z),le=Q.slice(0,h);let fe=le.find(se=>se.value===re),ae=Q.slice(h);const de=!fe;de&&(fe=ae.find(se=>se.value===re),ae=ae.filter(se=>se.value!==re));const ee=ae.reduce((se,he)=>se+he.count,0),q=le.reduce((se,he)=>se+he.count,0)+ee,ne=ee/q;return n.createElement("div",{className:G.logsStats,"data-testid":"logLabelStats"},n.createElement("div",{className:G.logsStatsHeader},n.createElement("div",{className:G.logsStatsTitle},_,": ",q," of ",k," rows have that ",oe?"label":"field")),n.createElement("div",{className:G.logsStatsBody},le.map(se=>n.createElement(v,{key:se.value,...se,active:se.value===re})),de&&fe&&n.createElement(v,{key:fe.value,...fe,active:!0}),ee>0&&n.createElement(v,{key:"__OTHERS__",count:ee,value:"Other",proportion:ne})))}}const C=(0,s.HE)(a);C.displayName="LogLabelStats";var D=e(34282);const b=(0,t.Z)(A=>({wordBreakAll:f.css`
      label: wordBreakAll;
      word-break: break-all;
    `,copyButton:f.css`
      & > button {
        color: ${A.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: 50%;
        height: ${A.spacing(A.components.height.sm)};
        width: ${A.spacing(A.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${A.colors.success.main};
          }
        }
      }
    `,adjoiningLinkButton:f.css`
      margin-left: ${A.spacing(1)};
    `,wrapLine:f.css`
      label: wrapLine;
      white-space: pre-wrap;
    `,logDetailsStats:f.css`
      padding: 0 ${A.spacing(1)};
    `,logDetailsValue:f.css`
      display: flex;
      align-items: center;
      line-height: 22px;

      .show-on-hover {
        display: inline;
        visibility: hidden;
      }
      &:hover {
        .show-on-hover {
          visibility: visible;
        }
      }
    `,buttonRow:f.css`
      display: flex;
      flex-direction: row;
      gap: ${A.spacing(.5)};
      margin-left: ${A.spacing(.5)};
    `}));class M extends n.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:_,parsedKeys:k,row:Q}=this.props;_&&_(k[0]),(0,d.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:Q.datasourceType,logRowUid:Q.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:_,parsedKeys:k,row:Q}=this.props;_&&_(k[0]),(0,d.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:Q.datasourceType,logRowUid:Q.uid,type:"disable"})},this.filterLabel=()=>{const{onClickFilterLabel:_,parsedKeys:k,parsedValues:Q,row:re}=this.props;_&&_(k[0],Q[0]),(0,d.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:re.datasourceType,filterType:"include",logRowUid:re.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:_,parsedKeys:k,parsedValues:Q,row:re}=this.props;_&&_(k[0],Q[0]),(0,d.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:re.datasourceType,filterType:"exclude",logRowUid:re.uid})},this.updateStats=()=>{const{getStats:_}=this.props,k=_(),Q=k?k.reduce((re,Z)=>re+Z.count,0):0;(!(0,u.isEqual)(this.state.fieldStats,k)||Q!==this.state.fieldCount)&&this.setState({fieldStats:k,fieldCount:Q})},this.showStats=()=>{const{isLabel:_,row:k,app:Q}=this.props,{showFieldsStats:re}=this.state;re||this.updateStats(),this.toggleFieldsStats(),(0,d.ff)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:k.datasourceType,fieldType:_?"label":"detectedField",type:re?"close":"open",logRowUid:k.uid,app:Q})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(_=>({showFieldsStats:!_.showFieldsStats}))}generateClipboardButton(_){const{theme:k}=this.props,Q=b(k);return n.createElement("div",{className:(0,f.cx)("show-on-hover",Q.copyButton)},n.createElement(c.m,{getText:()=>_,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"}))}generateMultiVal(_,k){return n.createElement("table",null,n.createElement("tbody",null,_?.map((Q,re)=>n.createElement("tr",{key:`${Q}-${re}`},n.createElement("td",null,Q,k&&Q!==""&&this.generateClipboardButton(Q))))))}render(){const{theme:_,parsedKeys:k,parsedValues:Q,isLabel:re,links:Z,displayedFields:oe,wrapLogMessage:G,onClickFilterLabel:le,onClickFilterOutLabel:fe,disableActions:ae}=this.props,{showFieldsStats:de,fieldStats:ee,fieldCount:me}=this.state,q=b(_),ne=(0,D.h)(_),se=k==null?!1:k.length===1,he=Q==null?!1:Q.length===1,ue=!ae&&le&&fe,Te=!he&&Q!=null&&!Q.every(ct=>ct===""),Ve=oe&&k!=null&&oe.includes(k[0])?n.createElement(p.h,{variant:"primary",tooltip:"Hide this field",name:"eye",onClick:this.hideField}):n.createElement(p.h,{tooltip:"Show this field instead of the message",name:"eye",onClick:this.showField});return n.createElement(n.Fragment,null,n.createElement("tr",{className:(0,f.cx)(ne.logDetailsValue)},n.createElement("td",{className:ne.logsDetailsIcon},n.createElement("div",{className:q.buttonRow},ue&&n.createElement(p.h,{name:"search-plus",tooltip:"Filter for value",onClick:this.filterLabel}),ue&&n.createElement(p.h,{name:"search-minus",tooltip:"Filter out value",onClick:this.filterOutLabel}),!ae&&oe&&Ve,!ae&&n.createElement(p.h,{variant:de?"primary":"secondary",name:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",disabled:!se,onClick:this.showStats}))),n.createElement("td",{className:ne.logDetailsLabel},se?k[0]:this.generateMultiVal(k)),n.createElement("td",{className:(0,f.cx)(q.wordBreakAll,G&&q.wrapLine)},n.createElement("div",{className:q.logDetailsValue},he?Q[0]:this.generateMultiVal(Q,!0),he&&this.generateClipboardButton(Q[0]),n.createElement("div",{className:(0,f.cx)((he||Te)&&q.adjoiningLinkButton)},Z?.map((ct,Ie)=>n.createElement("span",{key:`${ct.title}-${Ie}`},n.createElement(g.k,{link:ct}))))))),de&&se&&he&&n.createElement("tr",null,n.createElement("td",null,n.createElement(p.h,{variant:de?"primary":"secondary",name:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats})),n.createElement("td",{colSpan:2},n.createElement("div",{className:q.logDetailsStats},n.createElement(C,{stats:ee,label:k[0],value:Q[0],rowCount:me,isLabel:re})))))}}const x=(0,s.HE)(M);x.displayName="LogDetailsRow";var R=e(35160);class S extends n.PureComponent{render(){const{app:_,row:k,theme:Q,hasError:re,onClickFilterOutLabel:Z,onClickFilterLabel:oe,getRows:G,showDuplicates:le,className:fe,onClickShowField:ae,onClickHideField:de,displayedFields:ee,getFieldLinks:me,wrapLogMessage:q,styles:ne}=this.props,se=(0,D.p)(Q,k.logLevel),he=k.labels?k.labels:{},ue=Object.keys(he).length>0,Te=(0,R.YD)(k,me);let Ve=Te.filter(ye=>ye.links?.length);const ct=Ve.filter(ye=>ye.fieldIndex!==k.entryFieldIndex).sort(),Ie=Ve.filter(ye=>ye.fieldIndex===k.entryFieldIndex).sort(),Ke=(0,R.DC)(Ie),Ge=Te.filter(ye=>ye.links?.length===0&&ye.fieldIndex!==k.entryFieldIndex).sort(),at=Ge&&Ge.length>0,dt=ct&&ct.length>0||Ke&&Ke.length>0,Re=re?"":`${se.logsRowLevelColor} ${ne.logsRowLevel} ${ne.logsRowLevelDetails}`;return n.createElement("tr",{className:(0,f.cx)(fe,ne.logDetails)},le&&n.createElement("td",null),n.createElement("td",{className:Re,"aria-label":"Log level"}),n.createElement("td",{colSpan:4},n.createElement("div",{className:ne.logDetailsContainer},n.createElement("table",{className:ne.logDetailsTable},n.createElement("tbody",null,(ue||at)&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:ne.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys(he).sort().map((ye,Pe)=>{const be=he[ye];return n.createElement(x,{key:`${ye}=${be}-${Pe}`,parsedKeys:[ye],parsedValues:[be],isLabel:!0,getStats:()=>(0,l.lL)(G(),ye),onClickFilterOutLabel:Z,onClickFilterLabel:oe,onClickShowField:ae,onClickHideField:de,row:k,app:_,wrapLogMessage:q,displayedFields:ee,disableActions:!1})}),Ge.map((ye,Pe)=>{const{keys:be,values:Be,fieldIndex:ke}=ye;return n.createElement(x,{key:`${be[0]}=${Be[0]}-${Pe}`,parsedKeys:be,parsedValues:Be,onClickShowField:ae,onClickHideField:de,onClickFilterOutLabel:Z,onClickFilterLabel:oe,getStats:()=>(0,l.i6)(k.dataFrame.fields[ke].values),displayedFields:ee,wrapLogMessage:q,row:k,app:_,disableActions:!1})}),dt&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:ne.logDetailsHeading,"aria-label":"Data Links"},"Links")),ct.map((ye,Pe)=>{const{keys:be,values:Be,links:ke,fieldIndex:ot}=ye;return n.createElement(x,{key:`${be[0]}=${Be[0]}-${Pe}`,parsedKeys:be,parsedValues:Be,links:ke,onClickShowField:ae,onClickHideField:de,getStats:()=>(0,l.i6)(k.dataFrame.fields[ot].values),displayedFields:ee,wrapLogMessage:q,row:k,app:_,disableActions:!1})}),Ke?.map((ye,Pe)=>{const{keys:be,values:Be,links:ke,fieldIndex:ot}=ye;return n.createElement(x,{key:`${be[0]}=${Be[0]}-${Pe}`,parsedKeys:be,parsedValues:Be,links:ke,onClickShowField:ae,onClickHideField:de,getStats:()=>(0,l.i6)(k.dataFrame.fields[ot].values),displayedFields:ee,wrapLogMessage:q,row:k,app:_,disableActions:!0})}),!at&&!ue&&!dt&&n.createElement("tr",null,n.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const O=(0,s.HE)(S);O.displayName="LogDetails";var U=e(54972),I=e(70821);class F extends n.PureComponent{render(){const{row:_,showDetectedFields:k,getFieldLinks:Q,wrapLogMessage:re}=this.props,Z=(0,R.YD)(_,Q),oe=re?"":f.css`
          white-space: nowrap;
        `,G=k.map(le=>{const fe=Z.find(ae=>{const{keys:de}=ae;return de[0]===le});return fe!=null?`${le}=${fe.values}`:_.labels[le]!==void 0&&_.labels[le]!==null?`${le}=${_.labels[le]}`:null}).filter(le=>le!==null).join(" ");return n.createElement("td",{className:oe},G)}}const w=(0,s.HE)(F);w.displayName="LogRowMessageDisplayedFields";class K extends n.PureComponent{constructor(){super(...arguments),this.state={showContext:!1,showDetails:!1},this.debouncedContextClose=(0,u.debounce)(()=>{this.setState({showContext:!1})},3e3),this.onOpenContext=_=>{this.setState({showContext:!0}),this.props.onOpenContext(_,this.debouncedContextClose)},this.toggleDetails=()=>{this.props.enableLogDetails&&((0,d.ff)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(_=>({showDetails:!_.showDetails})))},this.onMouseEnter=()=>{this.props.onLogRowHover&&this.props.onLogRowHover(this.props.row)},this.onMouseLeave=()=>{this.props.onLogRowHover&&this.props.onLogRowHover(void 0)}}renderTimeStamp(_){return(0,o.dq)(_,{timeZone:this.props.timeZone,defaultWithMS:!0})}render(){const{getRows:_,onClickFilterLabel:k,onClickFilterOutLabel:Q,onClickShowField:re,onClickHideField:Z,enableLogDetails:oe,row:G,showDuplicates:le,showContextToggle:fe,showLabels:ae,showTime:de,displayedFields:ee,wrapLogMessage:me,prettifyLogMessage:q,theme:ne,getFieldLinks:se,forceEscape:he,app:ue,styles:Te}=this.props,{showDetails:Ve,showContext:ct}=this.state,Ie=(0,D.p)(ne,G.logLevel),{errorMessage:Ke,hasError:Ge}=(0,l.Mi)(G),at=(0,f.cx)(Te.logsRow,{[Te.errorLogRow]:Ge,[Te.contextBackground]:ct}),dt=G.hasUnescapedContent&&he?{...G,entry:(0,l.l3)(G.entry),raw:(0,l.l3)(G.raw)}:G;return n.createElement(n.Fragment,null,n.createElement("tr",{className:at,onClick:this.toggleDetails,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},le&&n.createElement("td",{className:Te.logsRowDuplicates},dt.duplicates&&dt.duplicates>0?`${dt.duplicates+1}x`:null),n.createElement("td",{className:Ge?"":`${Ie.logsRowLevelColor} ${Te.logsRowLevel}`},Ge&&n.createElement(r.u,{content:`Error: ${Ke}`,placement:"right",theme:"error"},n.createElement(m.J,{className:Te.logIconError,name:"exclamation-triangle",size:"xs"}))),oe&&n.createElement("td",{title:Ve?"Hide log details":"See log details",className:Te.logsRowToggleDetails},n.createElement(m.J,{className:Te.topVerticalAlign,name:Ve?"angle-down":"angle-right"})),de&&n.createElement("td",{className:Te.logsRowLocalTime},this.renderTimeStamp(G.timeEpochMs)),ae&&dt.uniqueLabels&&n.createElement("td",{className:Te.logsRowLabels},n.createElement(U.j,{labels:dt.uniqueLabels})),ee&&ee.length>0?n.createElement(w,{row:dt,showDetectedFields:ee,getFieldLinks:se,wrapLogMessage:me}):n.createElement(I.r,{row:dt,showContextToggle:fe,wrapLogMessage:me,prettifyLogMessage:q,onOpenContext:this.onOpenContext,app:ue,styles:Te})),this.state.showDetails&&n.createElement(O,{className:at,showDuplicates:le,getFieldLinks:se,onClickFilterLabel:k,onClickFilterOutLabel:Q,onClickShowField:re,onClickHideField:Z,getRows:_,row:dt,wrapLogMessage:me,hasError:Ge,displayedFields:ee,app:ue,styles:Te}))}}const L=(0,s.HE)(K);L.displayName="LogRow";const V=100;class H extends n.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1},this.openContext=(_,k)=>{this.props.onOpenContext&&this.props.onOpenContext(_,k)},this.makeGetRows=(0,t.Z)(_=>()=>_),this.sortLogs=(0,t.Z)((_,k)=>(0,l.$u)(_,k))}componentDidMount(){const{logRows:_,previewLimit:k}=this.props,re=(_?_.length:0)<=k*2;re?this.setState({renderAll:re}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:_,showContextToggle:k,showLabels:Q,showTime:re,wrapLogMessage:Z,prettifyLogMessage:oe,logRows:G,deduplicatedRows:le,timeZone:fe,onClickFilterLabel:ae,onClickFilterOutLabel:de,theme:ee,enableLogDetails:me,previewLimit:q,getFieldLinks:ne,logsSortOrder:se,displayedFields:he,onClickShowField:ue,onClickHideField:Te,forceEscape:Ve,onLogRowHover:ct,app:Ie,getLogRowContextUi:Ke}=this.props,{renderAll:Ge}=this.state,at=(0,D.h)(ee),dt=le||G,Re=G&&G.length>0,ye=dt?dt.reduce((St,ut)=>ut.duplicates?St+ut.duplicates:St,0):0,Pe=_!==i.Y4.none&&ye>0,be=dt||[],Be=se?this.sortLogs(be,se):be,ke=Be.slice(0,q),ot=Be.slice(q,Be.length),ft=this.makeGetRows(Be),gt=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve({data:[]});return n.createElement("table",{className:at.logsRowsTable},n.createElement("tbody",null,Re&&ke.map((St,ut)=>n.createElement(L,{key:St.uid,getRows:ft,getRowContext:gt,getLogRowContextUi:Ke,row:St,showContextToggle:k,showDuplicates:Pe,showLabels:Q,showTime:re,displayedFields:he,wrapLogMessage:Z,prettifyLogMessage:oe,timeZone:fe,enableLogDetails:me,onClickFilterLabel:ae,onClickFilterOutLabel:de,onClickShowField:ue,onClickHideField:Te,getFieldLinks:ne,logsSortOrder:se,forceEscape:Ve,onOpenContext:this.openContext,onLogRowHover:ct,app:Ie,styles:at})),Re&&Ge&&ot.map((St,ut)=>n.createElement(L,{key:St.uid,getRows:ft,getRowContext:gt,getLogRowContextUi:Ke,row:St,showContextToggle:k,showDuplicates:Pe,showLabels:Q,showTime:re,displayedFields:he,wrapLogMessage:Z,prettifyLogMessage:oe,timeZone:fe,enableLogDetails:me,onClickFilterLabel:ae,onClickFilterOutLabel:de,onClickShowField:ue,onClickHideField:Te,getFieldLinks:ne,logsSortOrder:se,forceEscape:Ve,onOpenContext:this.openContext,onLogRowHover:ct,app:Ie,styles:at})),Re&&!Ge&&n.createElement("tr",null,n.createElement("td",{colSpan:5},"Rendering ",Be.length-q," rows..."))))}}H.defaultProps={previewLimit:V};const j=(0,s.HE)(H);j.displayName="LogsRows"},34282:(Y,T,e)=>{"use strict";e.d(T,{h:()=>u,p:()=>f});var t=e(9892),n=e(58635),i=e(28550),s=e(13787),l=e(85419);const f=(o,d)=>{let r=o.isLight?o.v1.palette.gray5:o.v1.palette.gray2;switch(d){case s.in.crit:case s.in.critical:r="#705da0";break;case s.in.error:case s.in.err:r="#e24d42";break;case s.in.warning:case s.in.warn:r=o.colors.warning.main;break;case s.in.info:r="#7eb26d";break;case s.in.debug:r="#1f78c1";break;case s.in.trace:r="#6ed0e0";break}return{logsRowLevelColor:t.css`
      &::after {
        background-color: ${r};
      }
    `}},u=(0,n.Z)(o=>{const d=l.hoverColor(o.colors.background.secondary,o),r=(0,i.Z)(o.components.dashboard.background).setAlpha(.7).toRgbString();return{logsRowLevel:t.css`
      label: logs-row__level;
      max-width: ${o.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${o.spacing(.5)};
      }
    `,logsRowMatchHighLight:t.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${o.components.textHighlight.text}
      background-color: ${o.components.textHighlight};
    `,logsRowsTable:t.css`
      label: logs-rows;
      font-family: ${o.typography.fontFamilyMonospace};
      font-size: ${o.typography.bodySmall.fontSize};
      width: 100%;
      margin-bottom: ${o.spacing(2.25)}; /* This is to make sure the last row's LogRowMenu is not cut off. */
    `,contextBackground:t.css`
      background: ${d};
    `,logsRow:t.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          visibility: visible;
          z-index: 1;
        }

        background: ${d};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${o.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:t.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logIconError:t.css`
      color: ${o.colors.warning.main};
    `,logsRowToggleDetails:t.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:t.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:t.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:t.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,logDetailsContainer:t.css`
      label: logs-row-details-table;
      border: 1px solid ${o.colors.border.medium};
      padding: 0 ${o.spacing(1)} ${o.spacing(1)};
      border-radius: ${o.shape.radius.default};
      margin: ${o.spacing(2.5)} ${o.spacing(1)} ${o.spacing(2.5)} ${o.spacing(2)};
      cursor: default;
    `,logDetailsTable:t.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:t.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${o.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${o.spacing(.75)};
    `,logDetailsLabel:t.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${o.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:t.css`
      label: logs-row-details__heading;
      font-weight: ${o.typography.fontWeightBold};
      padding: ${o.spacing(1)} 0 ${o.spacing(.5)};
    `,logDetailsValue:t.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${d};
      }
    `,topVerticalAlign:t.css`
      label: topVerticalAlign;
      margin-top: -${o.spacing(.9)};
      margin-left: -${o.spacing(.25)};
    `,detailsOpen:t.css`
      &:hover {
        background-color: ${l.hoverColor(o.colors.background.primary,o)};
      }
    `,errorLogRow:t.css`
      label: erroredLogRow;
      color: ${o.colors.text.secondary};
    `,positionRelative:t.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:t.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${r};
      display: inherit;
    `,horizontalScroll:t.css`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:t.css`
      display: block;
      margin-left: 0px;
    `,rowMenu:t.css`
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      background: ${o.colors.background.primary};
      box-shadow: ${o.shadows.z3};
      padding: ${o.spacing(.5,.5,.5,1)};
      z-index: 100;
      visibility: hidden;
      gap: ${o.spacing(.5)};
    `,logRowMenuCell:t.css`
      position: sticky;
      z-index: ${o.zIndex.dropdown};
      margin-top: -${o.spacing(.125)};
      right: 0px;

      & > span {
        transform: translateX(-100%);
      }
    `,logLine:t.css`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${o.typography.fontFamilyMonospace};
      font-size: ${o.typography.bodySmall.fontSize};
      letter-spacing: ${o.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `,logsRowLevelDetails:t.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:t.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${o.colors.background.primary};
      }
    `}})},35160:(Y,T,e)=>{"use strict";e.d(T,{B2:()=>l,DC:()=>s,YD:()=>i});var t=e(58635),n=e(99098);const i=(0,t.Z)((u,o)=>{const d=l(u,o);return Object.values(d)}),s=(0,t.Z)(u=>{let o=[];return u.forEach(d=>{d.links?.forEach(r=>{if(r.variables){const m=r.variables.map(p=>{const g=p.variableName,y=p.fieldPath?`.${p.fieldPath}`:"";return`${g}${y}`}),c=r.variables.map(p=>p.found?p.value:"");o.push({keys:m,values:c,links:[r],fieldIndex:d.fieldIndex})}})}),o}),l=(0,t.Z)((u,o)=>u.dataFrame.fields.map((d,r)=>({...d,index:r})).filter((d,r)=>!f(d,r,u)).map(d=>{const r=o?o(d,u.rowIndex,u.dataFrame):[];return{keys:[d.name],values:[d.values[u.rowIndex].toString()],links:r,fieldIndex:d.index}}));function f(u,o,d){if(u.name==="labels"&&u.type===n.fS.other||u.name==="id"||u.name==="tsNs")return!0;const r=d.dataFrame.fields.find(m=>m.type===n.fS.time);return!!(u.name===r?.name&&u.type===n.fS.time&&u.values[0]===r.values[0]||u.config.custom?.hidden||u.values[d.rowIndex]==null)}},81042:(Y,T,e)=>{"use strict";e.d(T,{$u:()=>v,DA:()=>g,Di:()=>a,FP:()=>M,Js:()=>b,Mi:()=>h,ZO:()=>d,_c:()=>D,hY:()=>C,i6:()=>c,j0:()=>E,jx:()=>r,l3:()=>P,lL:()=>m});var t=e(82897),n=e.n(t),i=e(13787),s=e(40538),l=e(5109),f=e(99098),u=e(53678),o=e(35160);function d(x){if(!x)return i.in.unknown;let R=i.in.unknown,S;for(const O of Object.keys(i.in)){const I=new RegExp(`\\b${O}\\b`,"i").exec(x);I&&(S===void 0||I.index<S)&&(R=i.in[O],S=I.index)}return R}function r(x){const R=i.in[x.toString().toLowerCase()];return R||i.in.unknown}function m(x,R){const S=x.filter(I=>I.labels[R]!==void 0),O=S.length,U=(0,t.countBy)(S,I=>I.labels[R]);return p(U,O)}function c(x){const R=x.filter(O=>O!=null),S=(0,t.countBy)(R);return p(S,R.length)}const p=(x,R)=>(0,t.chain)(x).map((S,O)=>({count:S,value:O,proportion:S/R})).sortBy("count").reverse().value(),g=(x,R)=>x.timeEpochMs<R.timeEpochMs?-1:x.timeEpochMs>R.timeEpochMs?1:x.timeEpochNs<R.timeEpochNs?-1:x.timeEpochNs>R.timeEpochNs?1:0,y=(x,R)=>x.timeEpochMs>R.timeEpochMs?-1:x.timeEpochMs<R.timeEpochMs?1:x.timeEpochNs>R.timeEpochNs?-1:x.timeEpochNs<R.timeEpochNs?1:0,E=(x,R)=>{const S=x?v(x.rows,R):[];return x?{...x,rows:S}:{hasUniqueLabels:!1,rows:S}},v=(x,R)=>R===s.UV.Ascending?x.sort(g):x.sort(y),h=x=>x.labels.__error__?{hasError:!0,errorMessage:x.labels.__error__}:{hasError:!1},P=x=>x.replace(/\\r\\n|\\n|\\t|\\r/g,R=>R.slice(1)==="t"?"	":`
`);function a(x){return x.map(R=>{const S=(0,o.B2)(R).reduce((O,U)=>{const I=U.keys[0];return O[I]=U.values[0],O},{});return{line:R.entry,timestamp:R.timeEpochNs,fields:{...S,...R.labels}}})}const C=x=>{let R={from:1/0,to:-1/0};return x.forEach(S=>{const O=S.meta?.custom||{};O.absoluteRange?.from&&O.absoluteRange?.to&&(R={from:Math.min(R.from,O.absoluteRange.from),to:Math.max(R.to,O.absoluteRange.to)})}),R},D=x=>{if(x.length===0)throw new Error("Cannot aggregate data frames: there must be at least one data frame to aggregate");const R={},S={};let O=-1/0;const U={};let I=[];return x.forEach(F=>{const w=new l.N(F),K=w.getFirstFieldOfType(f.fS.time),L=w.getFirstFieldOfType(f.fS.number);if(!K)throw new Error("Missing time field");if(!L)throw new Error("Missing value field");const V=L.config.displayNameFromDS||F.name||"logs",H=L.values.length;U[V]={meta:F.meta,valueFieldConfig:L.config,timeFieldConfig:K.config};for(let j=0;j<H;j++){const A=K.values[j],_=L.values[j];R[V]??={},R[V][A]=(R[V][A]||0)+_,S[A]=(S[A]||0)+_,O=Math.max(S[A],O)}}),Object.keys(R).forEach(F=>{const w=new u.v,{meta:K,timeFieldConfig:L,valueFieldConfig:V}=U[F];w.name=F,w.meta=K,w.addField({name:"Time",type:f.fS.time,config:L}),w.addField({name:"Value",type:f.fS.number,config:V});for(const H in R[F]){const j=R[F][H];w.add({Time:Number(H),Value:j})}I.push(w)}),{dataFrames:I,maximum:O}},b=x=>{const R=x[0]?.meta?.custom;return R&&R.datasourceName?{name:R.datasourceName}:null},M=x=>x[0]?.meta?.custom?.logsVolumeType===i.o8.Limited},80600:(Y,T,e)=>{"use strict";e.d(T,{H:()=>m});var t=e(66111),n=e(5191),i=e(31403),s=e(10655),l=e(9892),f=e(72648),u=e(98102);const o=({title:c})=>{const p=(0,f.wW)(r);return t.createElement("p",{className:p.description},c?"Are you sure you want to revoke this URL? The dashboard will no longer be public.":"Orphaned public dashboard will no longer be public.")},d=({dashboardTitle:c,onConfirm:p,onDismiss:g})=>t.createElement(u.s,{isOpen:!0,body:t.createElement(o,{title:c}),onConfirm:p,onDismiss:g,title:"Revoke public URL",icon:"trash-alt",confirmText:"Revoke public URL"}),r=c=>({title:l.css`
    margin-bottom: ${c.spacing(1)};
  `,description:l.css`
    font-size: ${c.typography.body.fontSize};
  `}),m=({dashboard:c,publicDashboard:p,loader:g,children:y,onDismiss:E,...v})=>{const[h,{isLoading:P}]=(0,s.bS)(),a=(C,D)=>{h({dashboard:c,uid:C.uid,dashboardUid:C.dashboardUid}),D()};return t.createElement(n.JY,null,({showModal:C,hideModal:D})=>t.createElement(i.zx,{"aria-label":"Revoke public URL",title:"Revoke public URL",onClick:()=>C(d,{dashboardTitle:p.title,onConfirm:()=>a(p,D),onDismiss:()=>{E?E():D()}}),...v},P&&g?g:y))}},85385:(Y,T,e)=>{"use strict";e.d(T,{t:()=>l});var t=e(29930);const n={FOLDER:"dash-folder",DASHBOARD:"dash-db"};class i extends Error{constructor(u,o){super(o),this.type=u}}class s{constructor(){this.rootName="general"}validateNewDashboardName(u,o){return this.validate(u,o,"A dashboard or a folder with the same name already exists")}validateNewFolderName(u){return this.validate(0,u,"A folder or dashboard in the general folder with the same name already exists")}async validate(u,o,d){o=(o||"").trim();const r=o.toLowerCase();if(o.length===0)throw new i("REQUIRED","Name is required");if(u===0&&r===this.rootName)throw new i("EXISTING","This is a reserved name and cannot be used for a folder.");const m=[];m.push(t.ae.search({type:n.FOLDER,folderIds:[u],query:o})),m.push(t.ae.search({type:n.DASHBOARD,folderIds:[u],query:o}));const c=await Promise.all(m);let p=[];c.length>0&&c[0].length>0&&(p=c[0]),c.length>1&&c[1].length>0&&(p=p.concat(c[1]));for(const g of p)if(r===g.title.toLowerCase())throw new i("EXISTING",d)}}const l=new s},50946:(Y,T,e)=>{"use strict";e.d(T,{$j:()=>v,EW:()=>F,Fd:()=>b,Jx:()=>P,L6:()=>R,Pb:()=>I,ZL:()=>U,ct:()=>a,iM:()=>w,nQ:()=>p,q_:()=>c,uC:()=>M,ys:()=>E});var t=e(72196),n=e(54899),i=e(37932),s=e(86647),l=e(659),f=e(60499),u=e(30992),o=e(27876),d=e(86648),r=e(59096),m=e(24693);function c(L){return async V=>{try{V((0,m.AK)());const H=await(0,n.i)().get(`/api/gnet/dashboards/${L}`);V((0,m.S9)(H)),V(g(H.json)),V(y(H.json))}catch(H){V((0,m.eh)()),(0,n.kW)(H)&&V((0,l.$l)((0,f.t_)(H.data.message||H)))}}}function p(L){return async V=>{V((0,m.Nw)(L)),V(g(L)),V(y(L))}}function g(L){return V=>{if(L&&L.__inputs){const H=[];L.__inputs.forEach(j=>{const A={name:j.name,label:j.label,info:j.description,value:j.value,type:j.type,pluginId:j.pluginId,options:[]};j.type===m.n$.DataSource?h(j,A):A.info||(A.info="Specify a string constant"),H.push(A)}),V((0,m.Zc)(H))}}}function y(L){return async function(V){if(!L||!L.__elements)return;const H=[];for(const j of Object.values(L.__elements)){if(j.kind!==r.V.Panel)continue;const A=j.model,{type:_,description:k}=A,{uid:Q,name:re}=j,Z={model:{model:A,uid:Q,name:re,version:0,type:_,kind:r.V.Panel,description:k},state:m.KQ.New};try{const oe=await(0,d.Mh)(Q,!0);Z.state=m.KQ.Exists,Z.model=oe}catch(oe){if(oe.status!==404)throw oe}H.push(Z)}V((0,m.C2)(H))}}function E(){return L=>{L((0,m.MO)())}}function v(L){return async(V,H)=>{const j=H().importDashboard.dashboard,A=H().importDashboard.inputs;let _=[];L.dataSources?.forEach((re,Z)=>{const oe=A.dataSources[Z];_.push({name:oe.name,type:oe.type,pluginId:oe.pluginId,value:re.uid})}),L.constants?.forEach((re,Z)=>{const oe=A.constants[Z];_.push({value:re,name:oe.name,type:oe.type})});const k=await(0,n.i)().post("api/dashboards/import",{dashboard:{...j,title:L.title,uid:L.uid||j.uid},overwrite:!0,inputs:_,folderUid:L.folder.uid}),Q=t.u.stripBaseFromUrl(k.importedUrl);i.E1.push(Q)}}const h=(L,V)=>{(0,s.F)().getList({pluginId:L.pluginId}).length===0?V.info="No data sources of type "+L.pluginName+" found":V.info||(V.info="Select a "+L.pluginName+" data source")};async function P(L,V){const H={totalCount:L.length,successCount:0};for(const j of L)try{await S(j,V)!==null&&(H.successCount+=1)}catch(A){console.error("Failed to move a folder",A)}return H}function a(L,V){const H=[];for(const j of L)H.push(D(C,!0,j,V));return K(H).then(j=>({totalCount:j.length,successCount:j.filter(A=>A.succeeded).length,alreadyInFolderCount:j.filter(A=>A.alreadyInFolder).length}))}async function C(L,V){const H=await(0,n.i)().get(`/api/dashboards/uid/${L}`);if((H.meta.folderUid===void 0||H.meta.folderUid===null)&&V.uid===""||H.meta.folderUid===V.uid)return{alreadyInFolder:!0};const j={dashboard:H.dashboard,folderUid:V.uid,overwrite:!1};try{return await M(j),{succeeded:!0}}catch(A){if((0,n.kW)(A)){if(A.data?.status!=="plugin-dashboard")return{succeeded:!1};A.isHandled=!0}j.overwrite=!0;try{return await M(j),{succeeded:!0}}catch{return{succeeded:!1}}}}function D(L,V,...H){return async j=>{try{const A=await L(...H);return Array.prototype.concat(j,[A])}catch(A){if(V)return j;throw A}}}function b(L,V){const H=[];for(const j of L)H.push(D(x,!0,j,!0));for(const j of V)H.push(D(w,!0,j,!0));return K(H)}function M(L){return u.H.ignoreNextSave(),(0,n.i)().post("/api/dashboards/db/",{dashboard:L.dashboard,message:L.message??"",overwrite:L.overwrite??!1,folderUid:L.folderUid})}function x(L,V){return(0,n.i)().delete(`/api/folders/${L}?forceDeleteRules=false`,void 0,{showSuccessAlert:V})}function R(L){return(0,n.i)().post("/api/folders",L)}function S(L,V){const H={parentUid:V.uid};return(0,n.i)().post(`/api/folders/${L}/move`,H,{showErrorAlert:!1})}const O=1e3;function U(L,V,H=o.SearchQueryType.Folder){return(0,n.i)().get("/api/search",{query:L,type:H,permission:V,limit:O})}function I(L){return(0,n.i)().get(`/api/folders/${L}`)}function F(L){return(0,n.i)().get(`/api/folders/id/${L}`)}function w(L,V){return(0,n.i)().delete(`/api/dashboards/uid/${L}`,{showSuccessAlert:V})}function K(L){return L.reduce((V,H)=>Promise.resolve(V).then(H),[])}},24693:(Y,T,e)=>{"use strict";e.d(T,{AK:()=>g,C2:()=>c,G7:()=>i,KQ:()=>l,MO:()=>o,Nw:()=>m,S9:()=>r,ZP:()=>E,Zc:()=>d,eh:()=>p,n$:()=>s,wg:()=>f});var t=e(62992),n=e(52666),i=(v=>(v[v.Gcom=0]="Gcom",v[v.Json=1]="Json",v))(i||{}),s=(v=>(v.DataSource="datasource",v.Constant="constant",v.LibraryPanel="libraryPanel",v))(s||{}),l=(v=>(v.New="new",v.Exists="exists",v.Different="different",v))(l||{});const f={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:n.Gu.NotStarted},u=(0,t.oM)({name:"manageDashboards",initialState:f,reducers:{setGcomDashboard:(v,h)=>{v.dashboard={...h.payload.json,id:null},v.meta={updatedAt:h.payload.updatedAt,orgName:h.payload.orgName},v.source=0,v.state=n.Gu.Done},setJsonDashboard:(v,h)=>{v.dashboard={...h.payload,id:null},v.meta=f.meta,v.source=1,v.state=n.Gu.Done},clearDashboard:v=>{v.dashboard={},v.state=n.Gu.NotStarted},setInputs:(v,h)=>{v.inputs={dataSources:h.payload.filter(P=>P.type==="datasource"),constants:h.payload.filter(P=>P.type==="constant"),libraryPanels:[]}},setLibraryPanelInputs:(v,h)=>{v.inputs.libraryPanels=h.payload},fetchFailed:v=>{v.dashboard={},v.state=n.Gu.Error},fetchDashboard:v=>{v.state=n.Gu.Loading}}}),{clearDashboard:o,setInputs:d,setGcomDashboard:r,setJsonDashboard:m,setLibraryPanelInputs:c,fetchFailed:p,fetchDashboard:g}=u.actions,E={importDashboard:u.reducer}},2183:(Y,T,e)=>{"use strict";e.d(T,{FV:()=>l,JE:()=>o,Q$:()=>f,RF:()=>s,Yi:()=>u});var t=e(54899),n=e(659),i=e(17283);function s(d={getBackendSrv:t.i}){return async r=>{const m=await d.getBackendSrv().get("/api/org");return r((0,i.jR)(m)),m}}function l(d={getBackendSrv:t.i}){return async(r,m)=>{const c=m().organization.organization;await d.getBackendSrv().put("/api/org",{name:c.name}),r((0,n.H7)(c.name)),r(s(d))}}function f(d,r={getBackendSrv:t.i}){return async m=>{const c=await r.getBackendSrv().post("/api/user/using/"+d);m((0,n.H7)(c.name))}}function u(d,r={getBackendSrv:t.i}){return async m=>{const c=await r.getBackendSrv().post("/api/orgs/",d);m(f(c.orgId))}}function o(d={getBackendSrv:t.i}){return async r=>{const m=await d.getBackendSrv().get("/api/user/orgs");return r((0,i.IM)(m)),m}}},17283:(Y,T,e)=>{"use strict";e.d(T,{IM:()=>f,ZP:()=>o,jR:()=>l,xR:()=>s});var t=e(62992);const n={organization:{},userOrgs:[]},i=(0,t.oM)({name:"organization",initialState:n,reducers:{organizationLoaded:(d,r)=>({...d,organization:r.payload}),setOrganizationName:(d,r)=>({...d,organization:{...d.organization,name:r.payload}}),userOrganizationsLoaded:(d,r)=>({...d,userOrgs:r.payload})}}),{setOrganizationName:s,organizationLoaded:l,userOrganizationsLoaded:f}=i.actions,o={organization:i.reducer}},51927:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>E});var t=e(9892),n=e(66111),i=e(82229),s=e(206),l=e(37932),f=e(72648),u=e(60325),o=e(52822),d=e(84952),r=e(58379),m=e(36281),c=e(16200),p=e(9398),g=e(27876),y=e(32294);function E(P){const a=(0,f.wW)(h),C=(0,u.R9)(),D=new i.mi(P.data),{dataSummary:b}=D,M=v(P,b),x=(0,g.useDispatch)(),R=(0,p.h4)().getCurrent()?.getPanelById(P.panelId),S=()=>{r.Z.setObject(d.FL,c.Ok.Suggestions),x((0,m.g_)(!0))},O=()=>{R&&x((0,y.Kc)({panel:R,pluginId:"table"}))},U=I=>{R&&(x((0,y.Kc)({...I,panel:R})),I.transformations&&setTimeout(()=>{l.E1.partial({tab:"transform"})},100))};return n.createElement("div",{className:a.wrapper},n.createElement("div",{className:a.message},M),C.app===s.zj.PanelEditor&&b.hasData&&R&&n.createElement("div",{className:a.actions},P.suggestions&&n.createElement(n.Fragment,null,P.suggestions.map(I=>n.createElement(o.x,{key:I.name,icon:"process",onClick:()=>U(I)},I.name))),n.createElement(o.x,{icon:"table",onClick:O},"Switch to table"),n.createElement(o.x,{icon:"chart-line",onClick:S},"Open visualization suggestions")))}function v({data:P,fieldConfig:a,message:C,needsNumberField:D,needsTimeField:b,needsStringField:M},x){return C||(!P.series||P.series.length===0||P.series.every(R=>R.length===0)?a?.defaults.noValue??"No data":M&&!x.hasStringField?"Data is missing a string field":D&&!x.hasNumberField?"Data is missing a number field":b&&!x.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const h=P=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,t.css)({textAlign:"center",color:P.colors.text.secondary,fontSize:P.typography.size.lg,width:"100%"}),actions:(0,t.css)({marginTop:P.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:P.spacing(1),rowGap:P.spacing(1),width:"100%",maxWidth:"600px"})})},35974:(Y,T,e)=>{"use strict";e.d(T,{F:()=>u,X:()=>o});var t=e(66111),n=e(36873),i=e(59250),s=e(45253),l=e(27876);class f extends t.PureComponent{constructor(r){super(r)}render(){const r={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return t.createElement("div",{style:r},t.createElement(s.b,{severity:l.AppNotificationSeverity.Error,...this.props}))}}function u(d,r){const m=class extends t.PureComponent{render(){const g=t.createElement(t.Fragment,null,"Check the server startup logs for more information. ",t.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return t.createElement(f,{title:`Error loading: ${d.id}`,text:g})}},c=new n.c(m);return c.meta=d,c.loadError=!0,c}function o(d,r){const m=class extends t.PureComponent{render(){return t.createElement(f,{title:`Panel plugin not found: ${d}`})}},c=new n.c(r?()=>null:m);return c.meta={id:d,name:d,sort:100,type:i.zV.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},c}},98141:(Y,T,e)=>{"use strict";e.d(T,{$:()=>c});var t=e(66111),n=e(10753),i=e(76095),s=e(75363),l=e(16936),f=e(20308),u=e(72648),o=e(53546),d=e(77582),r=e(38490);const m={defaults:{},overrides:[]};function c(g){const{pluginId:y,data:E,timeZone:v=(0,n.Z)(),options:h={},width:P,height:a,title:C,onOptionsChange:D=()=>{},onChangeTimeRange:b=()=>{},onFieldConfigChange:M=()=>{},fieldConfig:x=m}=g,R=(0,u.l4)(),S=(0,f.J)(),O=(0,t.useMemo)(()=>S.replace.bind(S),[S]),[U,I]=(0,t.useState)((0,r.q1)(y)),[F,w]=(0,t.useState)(),K=p(U,h,x),L=(0,i.Cc)(U,K?.fieldConfig,E,v,R,O);if((0,t.useEffect)(()=>{U&&U.hasPluginId(y)||(0,r.Ub)(y).then(H=>I(H)).catch(H=>{w(H.message)})},[y,U]),F)return t.createElement("div",null,"Failed to load plugin: ",F);if(!U||!U.hasPluginId(y))return t.createElement("div",null,"Loading plugin panel...");if(!U.panel)return t.createElement("div",null,"Seems like the plugin you are trying to load does not have a panel component.");if(!L)return t.createElement("div",null,"No panel data");const V=U.panel;return t.createElement(o.z4,{dependencies:[U,E]},t.createElement(s.b,{meta:U.meta},t.createElement(V,{id:1,data:L,title:C,timeRange:L.timeRange,timeZone:v,options:K.options,fieldConfig:x,transparent:!1,width:P,height:a,renderCounter:0,replaceVariables:H=>H,onOptionsChange:D,onFieldConfigChange:M,onChangeTimeRange:b,eventBus:d.h$})))}function p(g,y,E){return(0,t.useMemo)(()=>{if(g)return(0,l.d4)({plugin:g,currentOptions:y,currentFieldConfig:E,isAfterPluginChange:!1})},[g,E,y])}},64703:(Y,T,e)=>{"use strict";e.d(T,{Bq:()=>O,PR:()=>a,PW:()=>b});var t=e(82897),n=e.n(t),i=e(94976),s=e(3281),l=e(30471),f=e(99098),u=e(72196),o=e(63418),d=e(49187),r=e(55024),m=e(20308),c=e(40538),p=e(47694),g=e(19349),y=e(69155);const E=[{value:`${i.W.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:s.L8.BuiltIn},{value:`${i.W.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:s.L8.BuiltIn},{value:`${i.W.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:s.L8.BuiltIn}],v=[{value:`${i.W.seriesName}`,label:"Name",documentation:"Name of the series",origin:s.L8.Series}],h=[{value:`${i.W.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:s.L8.Value},{value:`${i.W.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:s.L8.Value},{value:`${i.W.valueRaw}`,label:"Raw",documentation:"Raw value",origin:s.L8.Value}],P=U=>U.includes(".")||U.trim().includes(" ")?`["${U}"]`:`.${U}`,a=()=>[...(0,m.J)().getVariables().map(U=>({value:U.name,label:U.name,origin:s.L8.Template})),{value:`${i.W.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:s.L8.Template},...E],C=U=>{const I=[];for(const w of U)for(const K of w.fields)if(K.labels)for(const L of Object.keys(K.labels))I.push(L);const F=(0,t.chain)(I).flatten().uniq().value();return[{value:`${i.W.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:s.L8.Field},...F.map(w=>({value:`__field.labels${P(w)}`,label:`labels.${w}`,documentation:`${w} label value`,origin:s.L8.Field}))]},D=U=>{let I,F;const w=[],K={};if(U.length!==1)return[];const L=U[0];for(const V of L.fields){const H=(0,l.CZ)(V,L,U);K[H]||(w.push({value:`__data.fields${P(H)}`,label:`${H}`,documentation:`Formatted value for ${H} on the same row`,origin:s.L8.Fields}),K[H]=!0,!I&&V.type===f.fS.number&&(I={...V,name:H}),!F&&V.config.displayName&&V.config.displayName!==V.name&&(F={...V,name:H}))}return w.length&&w.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:s.L8.Fields}),I&&(w.push({value:`__data.fields${P(I.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:s.L8.Fields}),w.push({value:`__data.fields${P(I.name)}.text`,label:"Show text value",documentation:"the text value",origin:s.L8.Fields})),F&&w.push({value:`__data.fields${P(F.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:s.L8.Fields}),w},b=(U,I)=>{const F={value:`${i.W.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:s.L8.Value};return I===s.o3.Values?[...v,...C(U),...h,F,...D(U),...a()]:[...v,...C(U),...D(U),...a()]},M=U=>{const I=C(U),F={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...v,...I,...h,F,...a()]};class x{constructor(){this.getDataLinkUIModel=(I,F,w)=>{let K=I.url;I.onBuildUrl&&(K=I.onBuildUrl({origin:w,replaceVariables:F}));const L={href:u.u.assureBaseUrl(K.replace(/\n/g,"")),title:I.title??"",target:I.targetBlank?"_blank":void 0,origin:w};return F&&(L.href=F(L.href,void 0,c.b8.UriEncode),L.title=F(I.title)),I.onClick&&(L.onClick=V=>{I.onClick({origin:w,replaceVariables:F,e:V})}),L.href=(0,p.iE)().disableSanitizeHtml?L.href:o.QX.sanitizeUrl(L.href),L}}getLinkUrl(I){let F=u.u.assureBaseUrl((0,m.J)().replace(I.url||"")),w={};if(I.keepTime){const K=(0,g.$t)().timeRangeForUrl();w.from=K.from,w.to=K.to}return I.includeVars&&(w={...w,...(0,y.c)()}),F=d.Cj.appendQueryToUrl(F,d.Cj.toUrlParams(w)),(0,p.iE)().disableSanitizeHtml?F:o.QX.sanitizeUrl(F)}getAnchorInfo(I){const F=(0,m.J)(),w={};return w.href=this.getLinkUrl(I),w.title=F.replace(I.title||""),w.tooltip=F.replace(I.tooltip||""),w}getPanelLinkAnchorInfo(I,F){(0,r.d)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const w=(K,L,V)=>(0,m.J)().replace(K,{...F,...L},V);return this.getDataLinkUIModel(I,w,{})}}let R;function S(U){R=U}function O(){return R||(R=new x),R}},32294:(Y,T,e)=>{"use strict";e.d(T,{JI:()=>u,Kc:()=>d,ih:()=>r,qj:()=>o});var t=e(16936),n=e(86648),i=e(35974),s=e(85805),l=e(45984),f=e(46732);function u(c){return async(p,g)=>{if(c.libraryPanel?.uid&&!("model"in c.libraryPanel)){p(m(c));return}let y=c.type,E=g().plugins.panels[y];if(!E)try{E=await p((0,s.Ro)(y))}catch{E=(0,i.X)(y,y==="row")}c.plugin||c.pluginLoaded(E),p((0,f.bc)({key:c.key,plugin:E}))}}function o(c){return p=>{p((0,f.WJ)({key:c}))}}function d({panel:c,pluginId:p,options:g,fieldConfig:y,transformations:E}){return async(v,h)=>{if(c.type===p&&!g&&!y&&!E)return;let a=h().plugins.panels[p];if(a||(a=await v((0,s.Ro)(p))),c.type!==p&&c.changePlugin(a),g||y||E){const C=(0,t.d4)({plugin:a,currentOptions:g||c.options,currentFieldConfig:y||c.fieldConfig,isAfterPluginChange:!1});c.options=C.options,c.fieldConfig=C.fieldConfig,c.transformations=E||c.transformations,c.configRev++}c.generateNewKey(),v((0,f.bc)({key:c.key,plugin:a}))}}function r(c,p){return async(g,y)=>{const E=p.model.type,v=c.type;if(c.restoreModel({...p.model,gridPos:c.gridPos,id:c.id,libraryPanel:p}),c.getQueryRunner().clearLastResult(),v!==E){let P=y().plugins.panels[E];P||(P=await g((0,s.Ro)(E))),c.pluginLoaded(P),c.generateNewKey(),await g((0,f.bc)({key:c.key,plugin:P}))}else{const h=c.key;c.generateNewKey(),g((0,f.mr)({oldKey:h,newKey:c.key}))}c.configRev=0,c.hasSavedPanelEditChange=!0,c.refresh(),c.events.publish(l.pO),c.events.publish(l.Wj)}}function m(c){return async p=>{const g=c.libraryPanel.uid;try{const y=await(0,n.Mh)(g,!0);c.initLibraryPanel(y),p(u(c))}catch(y){console.log("ERROR: ",y),p((0,f.bc)({key:c.key,plugin:(0,i.X)("Unable to load library panel: "+g,!1)}))}}}},46732:(Y,T,e)=>{"use strict";e.d(T,{Vl:()=>d,WJ:()=>o,ZP:()=>m,bc:()=>s,mr:()=>u,o8:()=>l,pC:()=>f});var t=e(62992);const n={},i=(0,t.oM)({name:"panels",initialState:n,reducers:{panelModelAndPluginReady:(c,p)=>{c[p.payload.key]={plugin:p.payload.plugin}},changePanelKey:(c,p)=>{c[p.payload.newKey]=c[p.payload.oldKey],delete c[p.payload.oldKey]},removePanel:(c,p)=>{delete c[p.payload.key]},removeAllPanels:c=>{Object.keys(c).forEach(p=>delete c[p])},setPanelInstanceState:(c,p)=>{c[p.payload.key].instanceState=p.payload.value},setPanelAngularComponent:(c,p)=>{const g=c[p.payload.key];g.angularComponent=p.payload.angularComponent}}}),{panelModelAndPluginReady:s,setPanelAngularComponent:l,setPanelInstanceState:f,changePanelKey:u,removePanel:o,removeAllPanels:d}=i.actions,m={panels:i.reducer}},10079:(Y,T,e)=>{"use strict";e.d(T,{r0:()=>r});var t=e(82897),n=e.n(t),i=e(72196),s=e(49187),l=e(47891),f=e(37932),u=e(6129);const o={kiosk:!0,autofitpanels:!0,orgId:!0};class d{constructor(){this.urls=[],this.index=0,this.numberOfLoops=0,this.isPlaying=!1,this.locationUpdated=this.locationUpdated.bind(this)}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}const p=this.urls[this.index],g=f.E1.getSearchObject(),y=(0,t.pickBy)(g,(v,h)=>o[h]),E=i.u.stripBaseFromUrl(p);this.index++,this.validPlaylistUrl=E,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval),f.E1.push(E+"?"+s.Cj.toUrlParams(y))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(c){c.pathname!==this.validPlaylistUrl&&this.stop()}async start(c){this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=f.E1.getHistory().listen(this.locationUpdated);const p=[];let g=await(0,u.A5)(c);if(!g.items?.length)return;this.interval=l.intervalToMs(g.interval);const y=await(0,u.jc)(g.items);for(const E of y)if(E.dashboards)for(const v of E.dashboards)p.push(v.url);p.length&&(this.urls=p,this.isPlaying=!0,this.next())}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),f.E1.getSearchObject().kiosk&&f.E1.partial({kiosk:null}))}}const r=new d},6129:(Y,T,e)=>{"use strict";e.d(T,{A5:()=>g,CE:()=>c,Ds:()=>P,Dv:()=>y,cg:()=>m,d5:()=>h,jc:()=>v,l8:()=>p});var t=e(65583),n=e(12115),i=e(54899),s=e(35645),l=e(659),f=e(60499),u=e(35821),o=e(7832),d=e(3153),r=e(82e3);async function m(a){await E(()=>(0,i.i)().post("/api/playlists",a))}async function c(a,C){await E(()=>(0,i.i)().put(`/api/playlists/${a}`,C))}async function p(a){await E(()=>(0,i.i)().delete(`/api/playlists/${a}`),"Playlist deleted")}async function g(a){const C=await(0,i.i)().get(`/api/playlists/${a}`);if(C.items){for(const D of C.items)if(D.type==="dashboard_by_id"){D.type="dashboard_by_uid";const b=await(0,i.i)().get(`/api/dashboards/ids/${D.value}`);b.length&&(D.value=b[0])}}return C}async function y(){return(0,i.i)().get("/api/playlists/")}async function E(a,C="Playlist saved"){try{await a(),(0,d.WI)((0,l.$l)((0,f.AT)(C)))}catch(D){D instanceof Error&&(0,d.WI)((0,l.$l)((0,f.t_)("Unable to save playlist",D)))}}async function v(a){let C=0;if(!a?.length)return[];const D=[];for(const x of a){const R={query:"*",kind:["dashboard"],limit:1e3};switch(x.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":R.uid=[x.value];break;case"dashboard_by_tag":R.tags=[x.value];break}D.push({refId:`${C++}`,queryType:o.hR.Search,search:R})}if(!s.v.featureToggles.panelTitleSearch){const x=(0,r.getGrafanaSearcher)(),R=[];for(let S=0;S<D.length;S++){const O=(await x.search(D[S].search)).view;R.push({...a[S],dashboards:O.map(U=>({...U}))})}return R}const b=await(0,u.e)(),M=await(0,t.n)(b.query({targets:D}));if(M.data.length!==a.length)throw new Error("unexpected result size");return a.map((x,R)=>{const S=new n.U(M.data[R]);return{...x,dashboards:S.map(O=>({...O}))}})}function h(){return{items:[],interval:"5m",name:"",uid:""}}function P(a,C){return C?.length?(C=C.toLowerCase(),a.filter(D=>D.name.toLowerCase().includes(C))):a}},73354:(Y,T,e)=>{"use strict";e.d(T,{$F:()=>u,E1:()=>c,GP:()=>g,GV:()=>f,P6:()=>y,Tk:()=>p,jL:()=>o});var t=e(2631),n=e(54899),i=e(95156),s=e(11212),l=e(59210);async function f(v){const h=await d(v),P=Boolean(h),[a,C,D]=await Promise.all([c(),r(v,P),m(v)]),b=a.find(x=>x.id===v),M=b?.dependencies||h?.json?.dependencies;return{grafanaDependency:M?.grafanaDependency??M?.grafanaVersion??"",pluginDependencies:M?.plugins||[],links:b?.info.links||h?.json?.info.links||[],readme:D||h?.readme,versions:C}}async function u(){const{items:v}=await(0,n.i)().get(`${s.tB}/plugins`);return v.filter(l.wB)}async function o(){try{return await(0,n.i)().get(`${s.O2}/errors`)}catch{return[]}}async function d(v){try{return await(0,n.i)().get(`${s.tB}/plugins/${v}`,{})}catch(h){(0,n.kW)(h)&&(h.isHandled=!0);return}}async function r(v,h){try{return h?((await(0,n.i)().get(`${s.tB}/plugins/${v}/versions`)).items||[]).map(a=>({version:a.version,createdAt:a.createdAt,isCompatible:a.isCompatible,grafanaDependency:a.grafanaDependency})):[]}catch(P){return(0,n.kW)(P)&&(P.isHandled=!0),[]}}async function m(v){try{const h=await(0,n.i)().get(`${s.O2}/${v}/markdown/README`);return h?(0,t.a)(h):""}catch(h){return(0,n.kW)(h)&&(h.isHandled=!0),""}}async function c(){return(await(0,n.i)().get(`${s.O2}`,(0,i.y)({embedded:0}))).filter(l.EP)}async function p(v){return await(0,n.i)().post(`${s.O2}/${v}/install`,void 0,{showErrorAlert:!1})}async function g(v){return await(0,n.i)().post(`${s.O2}/${v}/uninstall`)}async function y(v,h){return(await(0,n.i)().datasourceRequest({url:`/api/plugins/${v}/settings`,method:"POST",data:h}))?.data}const E={getRemotePlugins:u,getInstalledPlugins:c,installPlugin:p,uninstallPlugin:g}},21048:(Y,T,e)=>{"use strict";e.d(T,{L:()=>s});var t=e(9892),n=e(66111),i=e(72648);const s=({children:f,wrap:u,className:o})=>{const d=(0,i.l4)(),r=l(d,u);return n.createElement("div",{className:(0,t.cx)(r.container,o)},f)},l=(f,u)=>({container:t.css`
    display: flex;
    flex-direction: row;
    flex-wrap: ${u?"wrap":"no-wrap"};
    & > * {
      margin-bottom: ${f.spacing()};
      margin-right: ${f.spacing()};
    }
    & > *:last-child {
      margin-right: 0;
    }
  `})},11212:(Y,T,e)=>{"use strict";e.d(T,{O2:()=>t,tB:()=>n,uJ:()=>i});const t="/api/plugins",n="/api/gnet",i="plugins"},59210:(Y,T,e)=>{"use strict";e.d(T,{AA:()=>E,EP:()=>b,HT:()=>D,Nh:()=>y,RU:()=>a,Uj:()=>g,XB:()=>P,ZG:()=>c,fG:()=>C,uR:()=>d,wB:()=>M});var t=e(59250),n=e(29826),i=e(35645),s=e(66121),l=e(77582),f=e(29930),u=e(27876),o=e(84532);function d(O=[],U=[],I){const F=[],w=v(I);return O.forEach(K=>{const L=U.find(H=>H.slug===K.id),V=w[K.id];L||F.push(r(K,void 0,V))}),U.forEach(K=>{const L=O.find(H=>H.id===K.slug),V=w[K.slug];F.push(r(L,K,V))}),F}function r(O,U,I){return!O&&U?m(U,I):O&&!U?c(O,I):p(O,U,I)}function m(O,U){const{name:I,slug:F,description:w,version:K,orgName:L,popularity:V,downloads:H,typeCode:j,updatedAt:A,createdAt:_,status:k}=O,Q=!!U||R(j);return{description:w,downloads:H,id:F,info:{logos:{small:`https://grafana.com/api/plugins/${F}/versions/${K}/logos/small`,large:`https://grafana.com/api/plugins/${F}/versions/${K}/logos/large`}},name:I,orgName:L,popularity:V,publishedAt:_,signature:h({remote:O,error:U}),updatedAt:A,hasUpdate:!1,isPublished:!0,isInstalled:Q,isDisabled:Q,isCore:O.internal,isDev:!1,isEnterprise:k==="enterprise",type:j,error:U?.errorCode}}function c(O,U){const{name:I,info:{description:F,version:w,logos:K,updated:L,author:V},id:H,dev:j,type:A,signature:_,signatureOrg:k,signatureType:Q,hasUpdate:re,accessControl:Z}=O,oe=!!U||R(A);return{description:F,downloads:0,id:H,info:{logos:K},name:I,orgName:V.name,popularity:0,publishedAt:"",signature:h({local:O,error:U}),signatureOrg:k,signatureType:Q,updatedAt:L,installedVersion:w,hasUpdate:re,isInstalled:!0,isDisabled:oe,isCore:_==="internal",isPublished:!1,isDev:Boolean(j),isEnterprise:!1,type:A,error:U?.errorCode,accessControl:Z}}function p(O,U,I){const F=O?.info.version,w=U?.slug||O?.id||"",K=O?.type||U?.typeCode,L=!!I||R(K);let V={small:`/public/img/icn-${K}.svg`,large:`/public/img/icn-${K}.svg`};return U?V={small:`https://grafana.com/api/plugins/${w}/versions/${U.version}/logos/small`,large:`https://grafana.com/api/plugins/${w}/versions/${U.version}/logos/large`}:O&&O.info.logos&&(V=O.info.logos),{description:O?.info.description||U?.description||"",downloads:U?.downloads||0,hasUpdate:O?.hasUpdate||!1,id:w,info:{logos:V},isCore:Boolean(U?.internal||O?.signature===t.Xy.internal),isDev:Boolean(O?.dev),isEnterprise:U?.status==="enterprise",isInstalled:Boolean(O)||L,isDisabled:L,isPublished:!0,name:U?.name||O?.name||"",orgName:U?.orgName||O?.info.author.name||"",popularity:U?.popularity||0,publishedAt:U?.createdAt||"",type:K,signature:h({local:O,remote:U,error:I}),signatureOrg:O?.signatureOrg||U?.versionSignedByOrgName,signatureType:O?.signatureType||U?.versionSignatureType||U?.signatureType||void 0,updatedAt:U?.updatedAt||O?.info.updated||"",installedVersion:F,error:I?.errorCode,accessControl:O?.accessControl}}const g=O=>`${i.v.pluginCatalogURL}${O}`;var y=(O=>(O.nameAsc="nameAsc",O.nameDesc="nameDesc",O.updated="updated",O.published="published",O.downloads="downloads",O))(y||{});const E=(O,U)=>{const I={nameAsc:(F,w)=>F.name.localeCompare(w.name),nameDesc:(F,w)=>w.name.localeCompare(F.name),updated:(F,w)=>(0,n.J)(w.updatedAt).valueOf()-(0,n.J)(F.updatedAt).valueOf(),published:(F,w)=>(0,n.J)(w.publishedAt).valueOf()-(0,n.J)(F.publishedAt).valueOf(),downloads:(F,w)=>w.downloads-F.downloads};return I[U]?O.sort(I[U]):O};function v(O=[]){return O.reduce((U,I)=>(U[I.pluginId]=I,U),{})}function h(O){const{error:U,local:I,remote:F}=O;if(U)switch(U.errorCode){case t.w2.invalidSignature:return t.Xy.invalid;case t.w2.missingSignature:return t.Xy.missing;case t.w2.modifiedSignature:return t.Xy.modified}return I?.signature?I.signature:F?.signatureType||F?.versionSignatureType?t.Xy.valid:t.Xy.missing}const P=()=>(0,f.i)().get("/api/frontend/settings").then(O=>{i.v.panels=O.panels});function a(O){if(!O)return;const[U]=O.filter(I=>Boolean(I.isCompatible));return U}const C=()=>i.v.pluginAdminEnabled,D=(O,U,I)=>{const F=i.v.pluginAdminExternalManageEnabled,w=l.Vt.hasAccess(u.AccessControlAction.PluginsInstall,(0,o.bO)()),K=Boolean(I);return O.type===t.zV.renderer||O.type===t.zV.secretsmanager||O.isEnterprise&&!(0,s.v)("enterprise.plugins")||O.isDev||!w&&!F||!O.isPublished||!K||!U},b=O=>x(O.id),M=O=>x(O.slug);function x(O){const{pluginCatalogHiddenPlugins:U}=i.v;return!U.includes(O)}function R(O){return O===t.zV.secretsmanager&&!i.v.secretsManagerPluginEnabled}function S(O){return Boolean(O?.signature==="internal")}},84532:(Y,T,e)=>{"use strict";e.d(T,{Gg:()=>f,RN:()=>l,bO:()=>s});var t=e(47694),n=e(82002),i=e(27876);function s(){return t.vc.bootData.user.isGrafanaAdmin}function l(){return n.Vt.hasRole("Admin")}function f(){return n.Vt.hasPermission(i.AccessControlAction.DataSourcesCreate)&&n.Vt.hasPermission(i.AccessControlAction.DataSourcesWrite)}},85805:(Y,T,e)=>{"use strict";e.d(T,{DD:()=>m,LP:()=>E,N9:()=>c,Qd:()=>o,Ro:()=>v,Tz:()=>g,bQ:()=>p,bp:()=>d,m3:()=>y,tQ:()=>r});var t=e(62992),n=e(54899),i=e(38490),s=e(82907),l=e(73354),f=e(11212),u=e(59210);const o=(0,t.hg)(`${f.uJ}/fetchAll`,async(h,P)=>{try{const{dispatch:a}=P,[C,D,{payload:b}]=await Promise.all([(0,l.E1)(),(0,l.jL)(),a(r())]);return(0,u.uR)(C,b,D)}catch{return P.rejectWithValue("Unknown error.")}}),d=(0,t.hg)(`${f.uJ}/fetchAllLocal`,async(h,P)=>{try{return(await(0,l.E1)()).map(C=>(0,u.ZG)(C))}catch{return P.rejectWithValue("Unknown error.")}}),r=(0,t.hg)(`${f.uJ}/fetchRemotePlugins`,async(h,P)=>{try{return await(0,l.$F)()}catch(a){return(0,n.kW)(a)&&(a.isHandled=!0),P.rejectWithValue([])}}),m=(0,t.hg)(`${f.uJ}/fetchDetails`,async(h,P)=>{try{const a=await(0,l.GV)(h);return{id:h,changes:{details:a}}}catch{return P.rejectWithValue("Unknown error.")}}),c=(0,t.hg)(`${f.uJ}/install`,async({id:h,version:P,isUpdating:a=!1},C)=>{const D=a?{isInstalled:!0,installedVersion:P,hasUpdate:!1}:{isInstalled:!0,installedVersion:P};try{return await(0,l.Tk)(h),await(0,u.XB)(),a&&(0,s.Hl)(h),{id:h,changes:D}}catch(b){return console.error(b),(0,n.kW)(b)?C.rejectWithValue(b.data):C.rejectWithValue("Unknown error.")}}),p=(0,t.hg)(`${f.uJ}/install`,async()=>({})),g=(0,t.hg)(`${f.uJ}/uninstall`,async(h,P)=>{try{return await(0,l.GP)(h),await(0,u.XB)(),(0,s.Hl)(h),{id:h,changes:{isInstalled:!1,installedVersion:void 0}}}catch(a){return console.error(a),P.rejectWithValue("Unknown error.")}}),y=(0,t.hg)(`${f.uJ}/loadPluginDashboards`,async(h,P)=>{const D=`api/plugins/${P.getState().dataSources.dataSource.type}/dashboards`;return(0,n.i)().get(D)}),E=(0,t.PH)(`${f.uJ}/panelPluginLoaded`),v=h=>async(P,a)=>{let C=a().plugins.panels[h];return C||(C=await(0,i.Ub)(h),a().plugins.panels[h]||P(E(C))),C}},66552:(Y,T,e)=>{"use strict";e.d(T,{CD:()=>l,I6:()=>p,UC:()=>c});var t=e(62992),n=e(11212),i=e(48996),s=e(85805);const l=(0,t.HF)(),f=g=>new RegExp(`${n.uJ}/(.*)/pending`).test(g.type),u=g=>new RegExp(`${n.uJ}/(.*)/fulfilled`).test(g.type),o=g=>new RegExp(`${n.uJ}/(.*)/rejected`).test(g.type),d=g=>{const y=g.lastIndexOf("/");return g.substring(0,y)},r={items:l.getInitialState(),requests:{},settings:{displayMode:i.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},m=(0,t.oM)({name:"plugins",initialState:r,reducers:{setDisplayMode(g,y){g.settings.displayMode=y.payload}},extraReducers:g=>g.addCase(s.Qd.fulfilled,(y,E)=>{l.upsertMany(y.items,E.payload)}).addCase(s.bp.fulfilled,(y,E)=>{l.upsertMany(y.items,E.payload)}).addCase(s.DD.fulfilled,(y,E)=>{l.updateOne(y.items,E.payload)}).addCase(s.N9.fulfilled,(y,E)=>{l.updateOne(y.items,E.payload)}).addCase(s.Tz.fulfilled,(y,E)=>{l.updateOne(y.items,E.payload)}).addCase(s.LP,(y,E)=>{y.panels[E.payload.meta.id]=E.payload}).addCase(s.m3.pending,(y,E)=>{y.isLoadingPluginDashboards=!0,y.dashboards=[]}).addCase(s.m3.fulfilled,(y,E)=>{y.isLoadingPluginDashboards=!1,y.dashboards=E.payload}).addMatcher(f,(y,E)=>{y.requests[d(E.type)]={status:i.eE.Pending}}).addMatcher(u,(y,E)=>{y.requests[d(E.type)]={status:i.eE.Fulfilled}}).addMatcher(o,(y,E)=>{y.requests[d(E.type)]={status:i.eE.Rejected,error:E.payload}})}),{setDisplayMode:c}=m.actions,p=m.reducer},48996:(Y,T,e)=>{"use strict";e.d(T,{Co:()=>i,cd:()=>n,eE:()=>u,lL:()=>t,tu:()=>f,vF:()=>s,xc:()=>l});var t=(o=>(o.Grid="grid",o.List="list",o))(t||{}),n=(o=>(o.Home="plugins-home",o.Browse="plugins-browse",o.Details="plugins-details",o))(n||{}),i=(o=>(o.app="apps",o.datasource="database",o.panel="credit-card",o.renderer="capture",o.secretsmanager="key-skeleton-alt",o))(i||{}),s=(o=>(o.INSTALL="INSTALL",o.UNINSTALL="UNINSTALL",o.UPDATE="UPDATE",o.REINSTALL="REINSTALL",o))(s||{}),l=(o=>(o.OVERVIEW="Overview",o.VERSIONS="Version history",o.CONFIG="Config",o.DASHBOARDS="Dashboards",o.USAGE="Usage",o))(l||{}),f=(o=>(o.OVERVIEW="overview",o.VERSIONS="version-history",o.CONFIG="config",o.DASHBOARDS="dashboards",o.USAGE="usage",o))(f||{}),u=(o=>(o.Pending="Pending",o.Fulfilled="Fulfilled",o.Rejected="Rejected",o))(u||{})},52889:(Y,T,e)=>{"use strict";e.d(T,{a:()=>s,v:()=>n});var t=e(66111);const n=t.createContext(i());n.displayName="PluginPageContext";function i(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function s(l){return{sectionNav:l??i().sectionNav}}},91162:(Y,T,e)=>{"use strict";e.d(T,{ND:()=>p,ak:()=>E});var t=e(89424),n=e(4063),i=e(20308),s=e(70926),l=e(54899),f=e(86647),u=e(22069),o=e(18271),d=e(47694),r=e(47471),m=e(97573),c=e(22215);class p{constructor(h=(0,i.J)()){this.templateSrv=h,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(h,P){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=h,this.defaultName=P;for(const a of Object.values(h))a.uid||(a.uid=a.name),this.settingsMapByUid[a.uid]=a,this.settingsMapById[a.id]=a;this.datasources[u.hr.type]=r.mV,this.datasources[m.Yq]=r.mV,this.settingsMapByUid[u.hr.uid]=r.bE,this.settingsMapByUid[m.Yq]=r.bE}getDataSourceSettingsByUid(h){return this.settingsMapByUid[h]}getInstanceSettings(h,P){let a=g(h);if((0,u.Pr)(a))return r.bE;if(a==="default"||a==null)return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName];if(a[0]==="$"){const C=this.templateSrv.replace(a,P,y);let D;return C==="default"?D=this.settingsMapByName[this.defaultName]:D=this.settingsMapByUid[C]??this.settingsMapByName[C],D?{...D,isDefault:!1,name:a,uid:a,rawRef:{type:D.type,uid:D.uid}}:void 0}return this.settingsMapByUid[a]??this.settingsMapByName[a]??this.settingsMapById[a]}get(h,P){let a=g(h);if(!a)return this.get(this.defaultName);if((0,u.Pr)(h))return Promise.resolve(this.datasources[m.Yq]);const C=this.settingsMapByName[a];return C&&(a=C.uid),this.datasources[a]?Promise.resolve(this.datasources[a]):(a=this.templateSrv.replace(a,P,y),a==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[a]?Promise.resolve(this.datasources[a]):this.loadDatasource(a))}async loadDatasource(h){if(this.datasources[h])return Promise.resolve(this.datasources[h]);const P=this.getInstanceSettings(h);if(!P)return Promise.reject({message:`Datasource ${h} was not found`});try{const a=await(0,c.nL)(P.meta);if(this.datasources[h])return this.datasources[h];const C=a.DataSourceClass.length!==1;let D;if(C?D=(0,s.V)().instantiate(a.DataSourceClass,{instanceSettings:P}):D=new a.DataSourceClass(P),D.components=a.components,!(D instanceof t.MF)){const b=D;b.name=P.name,b.id=P.id,b.type=P.type,b.meta=P.meta,b.uid=P.uid,D.getRef=t.MF.prototype.getRef}return this.datasources[h]=D,this.datasources[D.uid]=D,D}catch(a){return a instanceof Error&&o.Z.emit(n.SI.alertError,[P.name+" plugin failed",a.toString()]),Promise.reject({message:`Datasource: ${h} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(h={}){const P=Object.values(this.settingsMapByName).filter(C=>!(C.meta.id==="grafana"||C.meta.id==="mixed"||C.meta.id==="dashboard"||h.metrics&&!C.meta.metrics||h.tracing&&!C.meta.tracing||h.logs&&C.meta.category!=="logging"&&!C.meta.logs||h.annotations&&!C.meta.annotations||h.alerting&&!C.meta.alerting||h.pluginId&&C.meta.id!==h.pluginId||h.filter&&!h.filter(C)||h.type&&(Array.isArray(h.type)?!h.type.includes(C.type):h.type!==C.type)||!h.all&&C.meta.metrics!==!0&&C.meta.annotations!==!0&&C.meta.tracing!==!0&&C.meta.logs!==!0&&C.meta.alerting!==!0));if(h.variables)for(const C of this.templateSrv.getVariables()){if(C.type!=="datasource")continue;let D=C.current.value==="default"?this.defaultName:C.current.value;Array.isArray(D)&&D.length===1&&(D=D[0]);const b=!Array.isArray(D)&&this.settingsMapByName[D];if(b){const M=`\${${C.name}}`;P.push({...b,name:M,uid:M})}}const a=P.sort((C,D)=>C.name.toLowerCase()>D.name.toLowerCase()?1:C.name.toLowerCase()<D.name.toLowerCase()?-1:0);if(!h.pluginId&&!h.alerting){if(h.mixed){const C=this.getInstanceSettings("-- Mixed --");C&&P.push(C)}if(h.dashboard){const C=this.getInstanceSettings("-- Dashboard --");C&&P.push(C)}if(!h.tracing){const C=this.getInstanceSettings("-- Grafana --");C&&P.push(C)}}return a}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(h=>({name:h.name,value:h.name,meta:h.meta}))}getMetricSources(h){return this.getList({metrics:!0,variables:!h?.skipVariables}).map(P=>({name:P.name,value:P.name,meta:P.meta}))}async reload(){const h=await(0,l.i)().get("/api/frontend/settings");d.ZP.datasources=h.datasources,d.ZP.defaultDatasource=h.defaultDatasource,this.init(h.datasources,h.defaultDatasource)}}function g(v){return(0,u.Pr)(v)?u.hr.uid:typeof v=="string"?v:v?.uid}function y(v){return Array.isArray(v)?v[0]:v}const E=()=>(0,f.F)()},38490:(Y,T,e)=>{"use strict";e.d(T,{Ub:()=>u,_2:()=>o,q1:()=>d});var t=e(36873),n=e(47694),i=e(35974),s=e(22215);const l={},f={};function u(m){const c=l[m];if(c)return c;const p=n.ZP.panels[m];if(!p)throw new Error(`Plugin ${m} not found`);return l[m]=r(p),l[m]}function o(m){return r(m)}function d(m){return f[m]}function r(m){return(0,s.N$)(m.module,m.info?.version).then(c=>{if(c.plugin)return c.plugin;if(c.PanelCtrl){const p=new t.c(null);return p.angularPanelCtrl=c.PanelCtrl,p}throw new Error("missing export: plugin or PanelCtrl")}).then(c=>(c.meta=m,f[m.id]=c,c)).catch(c=>(console.warn("Error loading panel plugin: "+m.id,c),(0,i.F)(m,c)))}},13011:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>s,a:()=>i});var t=e(54899);const n={};function i(l,f){const u=n[l];return u?Promise.resolve(u):(0,t.i)().get(`/api/plugins/${l}/settings`,void 0,void 0,f).then(o=>(n[l]=o,o)).catch(o=>Promise.reject(new Error("Unknown Plugin")))}const s=l=>l?delete n[l]:Object.keys(n).forEach(f=>delete n[f])},22215:(Y,T,e)=>{"use strict";e.d(T,{kY:()=>Ea,Av:()=>sg,nL:()=>mi,N$:()=>ul});var t={};e.r(t),e.d(t,{plugin:()=>Et});var n={};e.r(n),e.d(n,{plugin:()=>vr});var i={};e.r(i),e.d(i,{plugin:()=>Ae});var s={};e.r(s),e.d(s,{plugin:()=>Cl});var l={};e.r(l),e.d(l,{plugin:()=>Id});var f={};e.r(f),e.d(f,{plugin:()=>eu});var u={};e.r(u),e.d(u,{plugin:()=>iu});var o={};e.r(o),e.d(o,{plugin:()=>Du});var d={};e.r(d),e.d(d,{plugin:()=>Ou});var r={};e.r(r),e.d(r,{plugin:()=>Ql});var m={};e.r(m),e.d(m,{plugin:()=>$u});var c={};e.r(c),e.d(c,{plugin:()=>Vu});var p={};e.r(p),e.d(p,{plugin:()=>fc});var g={};e.r(g),e.d(g,{plugin:()=>Xu});var y={};e.r(y),e.d(y,{plugin:()=>em});var E={};e.r(E),e.d(E,{plugin:()=>vc});var v={};e.r(v),e.d(v,{plugin:()=>bm});var h={};e.r(h),e.d(h,{plugin:()=>Im});var P={};e.r(P),e.d(P,{plugin:()=>Bm});var a={};e.r(a),e.d(a,{plugin:()=>Gc});var C={};e.r(C),e.d(C,{plugin:()=>tf});var D={};e.r(D),e.d(D,{plugin:()=>ff});var b={};e.r(b),e.d(b,{plugin:()=>Pf});var M={};e.r(M),e.d(M,{plugin:()=>xf});var x={};e.r(x),e.d(x,{plugin:()=>il});var R={};e.r(R),e.d(R,{plugin:()=>Kf});var S=e(9892),O=e(71667),U=e(47700),I=e(24259),F=e.n(I),w=e(82897),K=e.n(w),L=e(36365),V=e.n(L),H=e(57706),j=e.n(H),A=e(66111),_=e(15638),k=e(67948),Q=e(51947),re=e(6260),Z=e(83829),oe=e(43031),G=e(20674),le=e(95787),fe=e(43809),ae=e(56975),de=e(36873),ee=e(89424),me=e(206),q=e(38412),ne=e(47406),se=e(19920),he=e(35670),ue=e(40419),Te=e(37219),Ve=e(47694),ct=e(77582),Ie=e(29930),Ke=e(13019),Ge=e(4050),at=e(40229),dt=e(24816),Re=e(97724),ye=e(94984),Pe=e(45849),be=e(35645),Be=e(68226),ke=e(69945),ot=e(72004),ft=e(20194),gt=e(37190),St=e(46818),ut=e(27876),Dt=e(76282),ie=e(72648),De=e(31403),Ne=e(52694),Je=e(33950),Xe=e(96308),Le=e(53715),Ue=e(10505),ve=e(39031);const Se=({alertManagerSourceName:N,group:X,expandAll:te})=>{const[ge,Ee]=(0,A.useState)(te),Ce=(0,ie.wW)($e),Oe=(0,ie.wW)(Le.r);return(0,A.useEffect)(()=>Ee(te),[te]),A.createElement("div",{className:Ce.group,"data-testid":"alert-group"},Object.keys(X.labels).length>0?A.createElement(Ne.s,{labels:X.labels}):A.createElement("div",{className:Ce.noGroupingText},"No grouping"),A.createElement("div",{className:Ce.row},A.createElement(Je.U,{isCollapsed:!ge,onToggle:()=>Ee(!ge)})," ",A.createElement(Xe.Z,{group:X})),ge&&A.createElement("div",{className:Ce.alerts},X.alerts.map((We,ze)=>{const rt=We.status.state.toUpperCase(),st=(0,Dt.vT)({start:new Date(We.startsAt),end:Date.now()});return A.createElement("div",{"data-testid":"alert-group-alert",className:Ce.alert,key:`${We.fingerprint}-${ze}`},A.createElement("div",null,A.createElement("span",{className:Oe[We.status.state]},rt," "),"for ",st),A.createElement("div",null,A.createElement(Ne.s,{labels:We.labels})),A.createElement("div",{className:Ce.actionsRow},We.status.state===ve.Z9.Suppressed&&A.createElement(De.Qj,{href:`${(0,Ue.eQ)("/alerting/silences",N)}&silenceIds=${We.status.silencedBy.join(",")}`,className:Ce.button,icon:"bell",size:"sm"},"Manage silences"),We.status.state===ve.Z9.Active&&A.createElement(De.Qj,{href:(0,Ue.VN)(N,We.labels),className:Ce.button,icon:"bell-slash",size:"sm"},"Silence"),We.generatorURL&&A.createElement(De.Qj,{className:Ce.button,href:We.generatorURL,icon:"chart-line",size:"sm"},"See source")))})))},$e=N=>({noGroupingText:S.css`
    height: ${N.spacing(4)};
  `,group:S.css`
    background-color: ${N.colors.background.secondary};
    margin: ${N.spacing(.5,1,.5,1)};
    padding: ${N.spacing(1)};
  `,row:S.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${N.spacing(1)};
  `,alerts:S.css`
    margin: ${N.spacing(0,2,0,4)};
  `,alert:S.css`
    padding: ${N.spacing(1,0)};
    & + & {
      border-top: 1px solid ${N.colors.border.medium};
    }
  `,button:S.css`
    & + & {
      margin-left: ${N.spacing(1)};
    }
  `,actionsRow:S.css`
    padding: ${N.spacing(1,0)};
  `}),Ye=(N,X)=>(0,A.useMemo)(()=>N.filter(te=>(0,ft.eD)(te.labels,X)||te.alerts.some(ge=>(0,ft.eD)(ge.labels,X))),[N,X]),_e=N=>{const X=(0,ut.useDispatch)(),te=be.v.unifiedAlertingEnabled,ge=N.options.expandAll,Ee=N.options.alertmanager,Oe=((0,ke._)(st=>st.amAlertGroups)||St.oq)[Ee||""]?.result||[],We=N.options.labels?(0,ft.Zh)(N.options.labels):[],ze=Ye(Oe,We);(0,A.useEffect)(()=>{function st(){Ee&&X((0,ot.mS)(Ee))}st();const Ct=setInterval(st,gt.iF);return()=>{clearInterval(Ct)}},[X,Ee]);const rt=ze.length>0;return A.createElement(Be.$,{autoHeightMax:"100%",autoHeightMin:"100%"},te&&A.createElement("div",null,rt&&ze.map(st=>A.createElement(Se,{alertManagerSourceName:Ee,key:JSON.stringify(st.labels),group:st,expandAll:ge})),!rt&&"No alerts"))},Et=new de.c(_e).setPanelOptions(N=>N.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:Pe.GC,category:["Options"],editor:function(te){const ge=(0,A.useMemo)(Pe.z3,[]);return A.createElement(ye.P,{current:te.value,onChange:Ee=>te.onChange(Ee),dataSources:ge})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}));var pt=e(53117),je=e(43339),ht=e(79658),we=e(99151),Qe=e.n(we),nt=e(68183),it=e(8581),yt=e(10216),Lt=e(50946);async function Kt({query:N,permissionLevel:X}){return(await(0,Lt.ZL)(N,X)).map(Ee=>({id:Ee.id,title:Ee.title,url:Ee.url}))}async function an({query:N,permissionLevel:X,extraFolders:te}){const ge=await Kt({query:N,permissionLevel:X}),Ee=te??[],Ce=N?Ee.filter(Oe=>Oe.title?.toLowerCase().includes(N.toLowerCase())):Ee;return ge?Ce.concat(ge):Ce}async function un({query:N,permissionLevel:X=ut.PermissionLevelString.View,extraFolders:te=[]}){return(await an({query:N,permissionLevel:X,extraFolders:te})).map(Ee=>({value:Ee,label:Ee.title}))}function hn(N,X){return N?.find(te=>te.value?.id===X)}async function Wn(N){if(N!=null)try{const{id:X,title:te}=await(0,Lt.EW)(N);return{value:{id:X,title:te},label:te}}catch{console.error(`Could not find folder with id:${N}`)}}const Bt={id:void 0,title:"All"},Ft={id:yt.pW,title:yt.fy};function Vt({onChange:N,extraFolders:X=[],initialFolderId:te,permissionLevel:ge=ut.PermissionLevelString.View}){const[Ee,Ce]=(0,A.useState)(!1),[Oe,We]=(0,A.useState)(void 0),[ze,rt]=(0,A.useState)(void 0),st=(0,A.useCallback)(async Ut=>{let Gt=hn(Ut,te);Gt||(Gt=await Wn(te)??Ut[0],N(Gt.value)),Ce(!0),rt(Ut),We(Gt)},[te,N]),Ct=(0,A.useCallback)(async Ut=>{const Gt=await un({query:Ut,permissionLevel:ge,extraFolders:X});return Ee||await st(Gt),Gt},[ge,X,Ee,st]),Ot=Qe()(Ct,300,{leading:!0}),vt=(0,A.useCallback)(({value:Ut})=>{const Gt=hn(ze,Ut?.id);We(Gt),N(Ut)},[ze,N]);return A.createElement("div",{"data-testid":nt.wl.components.ReadonlyFolderPicker.container},A.createElement(it.qb,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:Oe,value:Oe,loadOptions:Ot,onChange:vt}))}var At=e(59679),Nt=e(67483),Rt=e(20308),wt=e(54899),_t=e(72948),Qt=e(39904),en=e(67162),sn=e(9398),Jt=e(40286);function gn(N){const[X,te]=(0,A.useState)(""),ge=(0,At.Z)(async()=>{if(N.options.showOptions!==Jt.kx.Current)return;const Oe={state:In(N.options.stateFilter)},We=(0,sn.h4)().getCurrent()?.getPanelById(N.id);N.options.alertName&&(Oe.query=(0,Rt.J)().replace(N.options.alertName,We.scopedVars)),N.options.folderId>=0&&(Oe.folderId=N.options.folderId),N.options.dashboardTitle&&(Oe.dashboardQuery=N.options.dashboardTitle),N.options.dashboardAlerts&&(Oe.dashboardId=(0,sn.h4)().getCurrent()?.id),N.options.tags&&(Oe.dashboardTag=N.options.tags);const ze=await(0,wt.i)().get("/api/alerts",Oe,`alert-list-get-current-alert-state-${N.id}`);let rt=Cn(N.options.sortOrder,ze.map(st=>({...st,stateModel:en.Z.getStateDisplayModel(st.state),newStateDateAgo:(0,Nt.CQ)(st.newStateDate).locale("en").fromNow(!0)})));return rt.length>N.options.maxItems&&(rt=rt.slice(0,N.options.maxItems)),te(rt.length===0?"No alerts":""),rt},[N.options.showOptions,N.options.stateFilter.alerting,N.options.stateFilter.execution_error,N.options.stateFilter.no_data,N.options.stateFilter.ok,N.options.stateFilter.paused,N.options.stateFilter.pending,N.options.maxItems,N.options.tags,N.options.dashboardAlerts,N.options.dashboardTitle,N.options.folderId,N.options.alertName,N.options.sortOrder,N.timeRange]),Ee=(0,At.Z)(async()=>{if(N.options.showOptions!==Jt.kx.RecentChanges)return;const Oe={limit:N.options.maxItems,type:"alert",newState:In(N.options.stateFilter)},We=(0,sn.h4)().getCurrent();N.options.dashboardAlerts&&(Oe.dashboardId=We?.id),Oe.from=ne.parse(We?.time.from).unix()*1e3,Oe.to=ne.parse(We?.time.to).unix()*1e3;const ze=await(0,wt.i)().get("/api/annotations",Oe,`alert-list-get-state-changes-${N.id}`),rt=Cn(N.options.sortOrder,ze.map(st=>({...st,time:We?.formatDate(st.time,"MMM D, YYYY HH:mm:ss"),stateModel:en.Z.getStateDisplayModel(st.newState),info:en.Z.getAlertAnnotationInfo(st)})));return te(rt.length===0?"No alerts in current time range":""),rt},[N.options.showOptions,N.options.maxItems,N.options.stateFilter.alerting,N.options.stateFilter.execution_error,N.options.stateFilter.no_data,N.options.stateFilter.ok,N.options.stateFilter.paused,N.options.stateFilter.pending,N.options.dashboardAlerts,N.options.sortOrder]),Ce=(0,ie.wW)(_n);return A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},A.createElement("div",{className:Ce.container},X&&A.createElement("div",{className:Ce.noAlertsMessage},X),A.createElement("section",null,A.createElement("ol",{className:Ce.alertRuleList},N.options.showOptions===Jt.kx.Current?!ge.loading&&ge.value&&ge.value.map(Oe=>A.createElement("li",{className:Ce.alertRuleItem,key:`alert-${Oe.id}`},A.createElement(_t.Z,{href:`${Oe.url}?viewPanel=${Oe.panelId}`,className:Ce.cardContainer},A.createElement(_t.Z.Heading,null,Oe.name),A.createElement(_t.Z.Figure,{className:(0,S.cx)(Ce.alertRuleItemIcon,Oe.stateModel.stateClass)},A.createElement(Qt.J,{name:Oe.stateModel.iconClass,size:"xl",className:Ce.alertIcon})),A.createElement(_t.Z.Meta,null,A.createElement("div",{className:Ce.alertRuleItemText},A.createElement("span",{className:Oe.stateModel.stateClass},Oe.stateModel.text),A.createElement("span",{className:Ce.alertRuleItemTime}," for ",Oe.newStateDateAgo)))))):!Ee.loading&&Ee.value&&Ee.value.map(Oe=>A.createElement("li",{className:Ce.alertRuleItem,key:`alert-${Oe.id}`},A.createElement(_t.Z,{className:Ce.cardContainer},A.createElement(_t.Z.Heading,null,Oe.alertName),A.createElement(_t.Z.Figure,{className:(0,S.cx)(Ce.alertRuleItemIcon,Oe.stateModel.stateClass)},A.createElement(Qt.J,{name:Oe.stateModel.iconClass,size:"xl"})),A.createElement(_t.Z.Meta,null,A.createElement("span",{className:(0,S.cx)(Ce.alertRuleItemText,Oe.stateModel.stateClass)},Oe.stateModel.text),A.createElement("span",null,Oe.time),Oe.info&&A.createElement("span",{className:Ce.alertRuleItemInfo},Oe.info)))))))))}function Cn(N,X){if(N===Jt.As.Importance)return(0,w.sortBy)(X,ge=>en.Z.alertStateSortScore[ge.state||ge.newState]);if(N===Jt.As.TimeAsc)return(0,w.sortBy)(X,ge=>new Date(ge.newStateDate||ge.time));if(N===Jt.As.TimeDesc)return(0,w.sortBy)(X,ge=>new Date(ge.newStateDate||ge.time)).reverse();const te=(0,w.sortBy)(X,ge=>(ge.name||ge.alertName).toLowerCase());return N===Jt.As.AlphaDesc&&te.reverse(),te}function In(N){return Object.entries(N).filter(([X,te])=>te).map(([X,te])=>X)}const _n=N=>({cardContainer:S.css`
    padding: ${N.spacing(.5)} 0 ${N.spacing(.25)} 0;
    line-height: ${N.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:S.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:S.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:S.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${N.colors.background.secondary};
    padding: ${N.spacing(.5)} ${N.spacing(1)};
    border-radius: ${N.shape.borderRadius()};
    margin-bottom: ${N.spacing(.5)};
  `,alertRuleItemIcon:S.css`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${N.spacing(4)};
    padding: 0 ${N.spacing(.5)} 0 ${N.spacing(.25)};
    margin-right: 0px;
  `,alertRuleItemText:S.css`
    font-weight: ${N.typography.fontWeightBold};
    font-size: ${N.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:S.css`
    color: ${N.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:S.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:S.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:S.css`
    margin-right: ${N.spacing(.5)};
  `}),zn=N=>{const X={showOptions:N.options.showOptions??N.show??Jt.kx.Current,maxItems:N.options.maxItems??N.limit??10,sortOrder:N.options.sortOrder??N.sortOrder??Jt.As.AlphaAsc,dashboardAlerts:N.options.dashboardAlerts??N.onlyAlertsOnDashboard??!1,alertName:N.options.alertName??N.nameFilter??"",dashboardTitle:N.options.dashboardTitle??N.dashboardFilter??"",folderId:N.options.folderId??N.folderId,tags:N.options.tags??N.dashboardTags??[],stateFilter:N.options.stateFilter??N.stateFilter?.reduce((ge,Ee)=>({...ge,[Ee]:!0}),{})??{}};return parseFloat(N.pluginVersion||"7.4")<7.5&&["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach(Ee=>delete N[Ee]),X};var Hn=e(46063),sa=e(43055);function Ma(N,X){const te=(0,ft.Zh)(N);return(0,ft.eD)(X,te)}function la(N,X){const{stateFilter:te,alertInstanceLabelFilter:ge}=N;return(0,w.isEmpty)(te)?X:X.filter(Ee=>(te.firing&&((0,sa.j)(Ee,Hn.bj.Alerting)||(0,sa.j)(Ee,Hn.x_.Firing))||te.pending&&((0,sa.j)(Ee,Hn.bj.Pending)||(0,sa.j)(Ee,Hn.x_.Pending))||te.noData&&(0,sa.j)(Ee,Hn.bj.NoData)||te.normal&&(0,sa.j)(Ee,Hn.bj.Normal)||te.error&&(0,sa.j)(Ee,Hn.bj.Error)||te.inactive&&(0,sa.j)(Ee,Hn.x_.Inactive))&&(ge?Ma(N.alertInstanceLabelFilter,Ee.labels):!0))}function jn(N){return!(N.startsWith("__")&&N.endsWith("__"))}const ia=N=>{const{onChange:X,id:te,defaultValue:ge}=N,Ee=(0,ut.useDispatch)();(0,A.useEffect)(()=>{Ee((0,ot.lB)())},[Ee]);const Ce=(0,ke._)(rt=>rt.promRules),Oe=(0,St.PE)(Ce),We=(0,St.yR)(Ce),ze=(0,A.useMemo)(()=>{if((0,w.isEmpty)(Ce))return[];if(!Oe)return[];const rt=Object.keys(Ce).flatMap(st=>Ce[st].result??[]).flatMap(st=>st.groups).flatMap(st=>st.rules.filter(Ct=>Ct.type===Hn.pz.Alerting)).flatMap(st=>st.alerts??[]).map(st=>Object.keys(st.labels??{})).flatMap(st=>st.filter(jn));return(0,w.uniq)(rt)},[Oe,Ce]);return A.createElement(it.NU,{id:te,isLoading:We,defaultValue:ge,"aria-label":"group by label keys",placeholder:"Group by",prefix:A.createElement(Qt.J,{name:"tag-alt"}),onChange:rt=>{X(rt.map(st=>st.value??""))},options:ze.map(rt=>({label:rt,value:rt}))})};var Aa=e(95831),ga=e(49380),ya=e(82378),Wa=e(45253),rs=e(61744),Xa=e(57426),wa=e(82002),Pa=e(89149),os=e(61627),Ca=e(79662),ta=e(24782),Qa=e(64681),ua=e.n(Qa),vs=e(48563),qa=e(84952);const Fa=({alerts:N,options:X,grafanaTotalInstances:te,handleInstancesLimit:ge,limitInstances:Ee,grafanaFilteredInstancesTotal:Ce})=>{const Oe=X.groupMode===Jt.LM.Custom?!0:X.showInstances,[We,ze]=(0,A.useState)(Oe),rt=(0,ie.wW)(ns),st=(0,ie.wW)(De.gN),Ct=(0,A.useCallback)(()=>{ze(ha=>!ha)},[]),Ot=(0,A.useMemo)(()=>la(X,(0,Ue.Zl)(X.sortOrder,N))??[],[N,X]),vt=te!==void 0,Ut=te&&Ce?te-Ce:0,Gt=N.length-Ot.length,Wt=vt?Ut:Gt,Mt=Ot.length>0,Yt=Mt?Ct:w.noop;(0,A.useEffect)(()=>{Ot.length===0&&ze(!1)},[Ot]);const zt=async()=>{ge&&(ge(!1),ze(!0))},Xt=async()=>{ge&&(ge(!0),ze(!0))},cn=Ee?Ce:Ot.length,on=Ot.length,mn=vt?cn:on,Mn=Ee?`Showing ${Pa.gr} of ${te} instances`:`Showing all ${te} instances`,Pn=Ee?"View all instances":`Limit the result to ${Pa.gr} instances`,Bn=te&&Pa.gr===Ot.length&&te>Ot.length,Rn=te&&Pa.gr<Ot.length&&!Ee,$n=Bn||Rn?A.createElement("div",{className:rt.footerRow},A.createElement("div",null,Mn),A.createElement(De.zx,{size:"sm",variant:"secondary",onClick:Ee?zt:Xt},Pn)):void 0;return A.createElement("div",null,X.groupMode===Jt.LM.Default&&A.createElement("button",{className:(0,S.cx)(st,Mt?rt.clickable:""),onClick:()=>Yt()},Mt&&A.createElement(Qt.J,{name:We?"angle-down":"angle-right",size:"md"}),A.createElement("span",null,`${mn} ${ua()("instance",mn)}`),Wt>0&&A.createElement("span",null,", ",`${Wt} hidden by filters`)),We&&A.createElement(vs.o,{instances:Ot,pagination:{itemsPerPage:2*qa.gN},footerRow:$n}))},ns=N=>({clickable:S.css`
    cursor: pointer;
  `,footerRow:S.css`
    display: flex;
    flex-direction: column;
    gap: ${N.spacing(1)};
    justify-content: space-between;
    align-items: center;
    width: 100%;
  `}),ca="__ungrouped__",as=({rules:N,options:X})=>{const te=(0,ie.wW)(js),ge=X.groupBy,Ee=(0,A.useMemo)(()=>{const Ce=new Map,Oe=rt=>ge?ir(rt,ge):!0;N.forEach(rt=>{const st=(0,Ca.Re)(rt),Ct=Oe(rt);(st?.alerts??[]).forEach(Ot=>{const vt=Ct?Os(ge,Ot.labels):ca,Ut=Ce.get(vt)??[];Ce.set(vt,[...Ut,Ot])})});const We=Ce.get(ca)??[];return Ce.delete(ca),Ce.set(ca,We),Array.from(Ce.entries()).reduce((rt,[st,Ct])=>{const Ot=la(X,Ct);return Ot.length>0&&rt.set(st,Ot),rt},new Map)},[ge,N,X]);return A.createElement(A.Fragment,null,Array.from(Ee).map(([Ce,Oe])=>A.createElement("li",{className:te.alertRuleItem,key:Ce,"data-testid":Ce},A.createElement("div",null,A.createElement("div",{className:te.customGroupDetails},A.createElement("div",{className:te.alertLabels},Ce!==ca&&bs(Ce).map(([We,ze])=>A.createElement(ta.i,{key:We,labelKey:We,value:ze})),Ce===ca&&"No grouping")),A.createElement(Fa,{alerts:Oe,options:X})))))};function Os(N,X){return new URLSearchParams(N.map(te=>[te,X[te]])).toString()}function bs(N){return[...new URLSearchParams(N)]}function ir(N,X){const te=(0,Ca.Re)(N);return X.every(ge=>(te?.alerts??[]).some(Ee=>Ee.labels[ge]))}const ur=as;var mr=e(16753),er=e(26418),ds=e(63029),ws=e(60048),us=e(93411);function Ws(N){return Object.values(N).filter(X=>X!==void 0).reduce((X,te)=>X+te,0)}const Es=({rules:N,options:X,handleInstancesLimit:te,limitInstances:ge})=>{const Ee=(0,ie.wW)(js),Ce=(0,ie.wW)(Fs),{href:Oe}=(0,mr.Z)(),We=N.length<=X.maxItems?N:N.slice(0,X.maxItems);return A.createElement(A.Fragment,null,A.createElement("ol",{className:Ee.alertRuleList},We.map((ze,rt)=>{const{namespaceName:st,groupName:Ct,dataSourceName:Ot}=ze,vt=(0,Ca.x_)(ze.promRule)?ze.promRule:void 0,Ut=(0,Ca.ub)(vt),Gt=(0,ws.Yd)(ze.dataSourceName,ze),Wt=(0,ws.$V)(Gt),Mt=ze.dataSourceName===Pe.GC?Ws(ze.instanceTotals):void 0,Yt=ze.dataSourceName===Pe.GC?Ws(ze.filteredInstanceTotals):void 0,zt=(0,us.u)(`/alerting/${encodeURIComponent(Ot)}/${encodeURIComponent(Wt)}/view`,{returnTo:Oe??""});return vt?A.createElement("li",{className:Ee.alertRuleItem,key:`alert-${st}-${Ct}-${ze.name}-${rt}`},A.createElement("div",{className:Ce.icon},A.createElement(Qt.J,{name:en.Z.getStateDisplayModel(vt.state).iconClass,className:Ce[(0,Ca.Aq)(vt.state)],size:"lg"})),A.createElement("div",{className:Ee.alertNameWrapper},A.createElement("div",{className:Ee.instanceDetails},A.createElement(er.Stack,{direction:"row",gap:1,wrap:!1},A.createElement("div",{className:Ee.alertName,title:ze.name},ze.name),A.createElement(ds.L,null),zt&&A.createElement("a",{href:zt,target:"__blank",className:Ee.link,rel:"noopener"},A.createElement(er.Stack,{alignItems:"center",gap:1},"View alert rule",A.createElement(Qt.J,{name:"external-link-alt",size:"sm"})))),A.createElement("div",{className:Ee.alertDuration},A.createElement("span",{className:Ce[(0,Ca.Aq)(vt.state)]},(0,Ca.SS)(vt.state))," ",Ut&&vt.state!==Hn.x_.Inactive&&A.createElement(A.Fragment,null,"for"," ",A.createElement("span",null,(0,Dt.vT)({start:Ut,end:Date.now()}))))),A.createElement(Fa,{alerts:vt.alerts??[],options:X,grafanaTotalInstances:Mt,grafanaFilteredInstancesTotal:Yt,handleInstancesLimit:te,limitInstances:ge}))):null})))},Fs=N=>({common:S.css`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${N.shape.borderRadius()};
    font-size: ${N.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:S.css`
    margin-top: ${N.spacing(2.5)};
    align-self: flex-start;
  `,good:S.css`
    color: ${N.colors.success.main};
  `,bad:S.css`
    color: ${N.colors.error.main};
  `,warning:S.css`
    color: ${N.colors.warning.main};
  `,neutral:S.css`
    color: ${N.colors.secondary.main};
  `,info:S.css`
    color: ${N.colors.primary.main};
  `}),Gs=Es;function fr(N){const X=(te,[ge,Ee])=>Boolean(Ee)?[...te,ge]:te;return Object.entries(N).reduce(X,[])}function lr(N){const X=(0,ut.useDispatch)(),te=(0,A.useMemo)(Pe.mA,[]),[ge,Ee]=(0,Aa.Z)(!0);(0,A.useEffect)(()=>{N.options.stateFilter.inactive===!0&&(N.options.stateFilter.normal=!0),N.options.stateFilter.inactive=void 0},[N.options.stateFilter]);let Ce;(0,ga.Z)(()=>{Ce=(0,sn.h4)().getCurrent()});const Oe=(0,A.useMemo)(()=>fr(N.options.stateFilter),[N.options.stateFilter]),{options:We,replaceVariables:ze}=N,rt={...N.options,alertName:ze(We.alertName),alertInstanceLabelFilter:ze(We.alertInstanceLabelFilter)},st=(0,A.useMemo)(()=>(0,ft.Zh)(rt.alertInstanceLabelFilter),[rt.alertInstanceLabelFilter]);(0,A.useEffect)(()=>{N.options.groupMode===Jt.LM.Default&&X((0,ot.ei)(!1,{limitAlerts:ge?Pa.gr:void 0,matcher:st,state:Oe}))},[N.options.groupMode,ge,X,st,Oe]),(0,A.useEffect)(()=>{X((0,ot.ei)(!1,{limitAlerts:ge?Pa.gr:void 0,matcher:st,state:Oe}));const Rn=Ce?.events.subscribe(ya.md,()=>X((0,ot.ei)(!1,{limitAlerts:ge?Pa.gr:void 0,matcher:st,state:Oe})));return()=>{Rn?.unsubscribe()}},[X,Ce,st,Oe,Ee,ge]);const Ct=Rn=>{Rn?(X((0,ot.ei)(!1,{limitAlerts:Pa.gr,matcher:st,state:Oe})),Ee(!0)):(X((0,ot.ei)(!1,{matcher:st,state:Oe})),Ee(!1))},{prom:Ot,ruler:vt}=(0,ke._)(Rn=>({prom:Rn.promRules[Pe.GC]||St.oq,ruler:Rn.rulerRules[Pe.GC]||St.oq})),Ut=Ot.loading||vt.loading,Gt=!!Ot.result||!!vt.result,Wt=(0,ke._)(Rn=>Rn.promRules),Mt=(0,ke._)(Rn=>Rn.rulerRules),Yt=(0,os.Zo)(),zt=te.some(Rn=>Wt[Rn]?.dispatched),Xt=te.some(Rn=>Mt[Rn]?.dispatched),cn=zt||Xt,on=(0,ie.wW)(js),mn=(0,Ca.C7)(Yt),Mn=N.options.sortOrder,Pn=(0,A.useMemo)(()=>Ys(N,tr(Mn,mn)),[mn,Mn,N]),Bn=Pn.length===0?"No alerts matching filters":void 0;return!wa.Vt.hasPermission(ut.AccessControlAction.AlertingRuleRead)&&!wa.Vt.hasPermission(ut.AccessControlAction.AlertingRuleExternalRead)?A.createElement(Wa.b,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules"):A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},A.createElement("div",{className:on.container},cn&&Ut&&!Gt&&A.createElement(rs.u,{text:"Loading..."}),Bn&&A.createElement("div",{className:on.noAlertsMessage},Bn),A.createElement("section",null,N.options.viewMode===Jt.wO.Stat&&Gt&&A.createElement(Xa.w6,{width:N.width,height:N.height,graphMode:Xa.IG.None,textMode:Xa.jG.Auto,justifyMode:Xa.ap.Auto,theme:Ve.vc.theme2,value:{text:`${Pn.length}`,numeric:Pn.length}}),N.options.viewMode===Jt.wO.List&&N.options.groupMode===Jt.LM.Custom&&Gt&&A.createElement(ur,{rules:Pn,options:rt}),N.options.viewMode===Jt.wO.List&&N.options.groupMode===Jt.LM.Default&&Gt&&A.createElement(Gs,{rules:Pn,options:rt,handleInstancesLimit:Ct,limitInstances:ge}))))}function tr(N,X){if(N===Jt.As.Importance)return(0,w.sortBy)(X,ge=>en.Z.alertStateSortScore[ge.state]);if(N===Jt.As.TimeAsc)return(0,w.sortBy)(X,ge=>{const Ee=(0,Ca.Re)(ge)??void 0;return(0,Ca.ub)(Ee)||new Date});if(N===Jt.As.TimeDesc)return(0,w.sortBy)(X,ge=>{const Ee=(0,Ca.Re)(ge)??void 0;return(0,Ca.ub)(Ee)||new Date}).reverse();const te=(0,w.sortBy)(X,ge=>ge.name.toLowerCase());return N===Jt.As.AlphaDesc&&te.reverse(),te}function Ys(N,X){const{options:te,replaceVariables:ge}=N;let Ee=[...X];if(te.dashboardAlerts){const Ce=(0,sn.h4)().getCurrent()?.uid;Ee=Ee.filter(({annotations:Oe={}})=>Object.entries(Oe).some(([We,ze])=>We===gt.q6.dashboardUID&&ze===Ce))}if(te.alertName){const Ce=ge(te.alertName);Ee=Ee.filter(({name:Oe})=>Oe.toLocaleLowerCase().includes(Ce.toLocaleLowerCase()))}if(Ee=Ee.filter(Ce=>{const Oe=(0,Ca.Re)(Ce);return Oe?te.stateFilter.firing&&Oe.state===Hn.x_.Firing||te.stateFilter.pending&&Oe.state===Hn.x_.Pending||te.stateFilter.normal&&Oe.state===Hn.x_.Inactive:!1}),te.folder&&(Ee=Ee.filter(Ce=>Ce.namespaceName===te.folder.title)),te.datasource){const Ce=te.datasource===Pe.JY;Ee=Ee.filter(Ce?({dataSourceName:Oe})=>Oe===Pe.GC:({dataSourceName:Oe})=>Oe===te.datasource)}return Ee=Ee.reduce((Ce,Oe)=>{const We=(0,Ca.Re)(Oe);return(We?la({stateFilter:te.stateFilter,alertInstanceLabelFilter:ge(te.alertInstanceLabelFilter)},We.alerts??[]):[]).length&&Ce.push(Oe),Ce},[]),Ee}const js=N=>({cardContainer:S.css`
    padding: ${N.spacing(.5)} 0 ${N.spacing(.25)} 0;
    line-height: ${N.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:S.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:S.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:S.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${N.colors.background.secondary};
    padding: ${N.spacing(.5)} ${N.spacing(1)};
    border-radius: ${N.shape.borderRadius()};
    margin-bottom: ${N.spacing(.5)};

    gap: ${N.spacing(2)};
  `,alertName:S.css`
    font-size: ${N.typography.h6.fontSize};
    font-weight: ${N.typography.fontWeightBold};

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,alertNameWrapper:S.css`
    display: flex;
    flex: 1;
    flex-wrap: nowrap;
    flex-direction: column;

    min-width: 100px;
  `,alertLabels:S.css`
    > * {
      margin-right: ${N.spacing(.5)};
    }
  `,alertDuration:S.css`
    font-size: ${N.typography.bodySmall.fontSize};
  `,alertRuleItemText:S.css`
    font-weight: ${N.typography.fontWeightBold};
    font-size: ${N.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:S.css`
    color: ${N.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:S.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:S.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:S.css`
    margin-right: ${N.spacing(.5)};
  `,instanceDetails:S.css`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:S.css`
    margin-bottom: ${N.spacing(.5)};
  `,link:S.css`
    word-break: break-all;
    color: ${N.colors.primary.text};
  `});class gr{getSuggestionsForData(X){const{dataSummary:te}=X;if(te.hasData)return;X.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}function is(N){return N.showOptions===Jt.kx.Current}const pr=new de.c(gn).setPanelOptions(N=>{N.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:Jt.kx.Current},{label:"Recent state changes",value:Jt.kx.RecentChanges}]},defaultValue:Jt.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:Jt.As.AlphaAsc},{label:"Alphabetical (desc)",value:Jt.As.AlphaDesc},{label:"Importance",value:Jt.As.Importance},{label:"Time (asc)",value:Jt.As.TimeAsc},{label:"Time (desc)",value:Jt.As.TimeDesc}]},defaultValue:Jt.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:is}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:is}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function({value:te,onChange:ge}){return A.createElement(Vt,{initialFolderId:te,onChange:Ee=>ge(Ee?.id),extraFolders:[Bt,Ft]})},category:["Filter"],showIf:is}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor(X){return A.createElement(je.B,{tags:X.value,onChange:X.onChange})},category:["Filter"],showIf:is}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:is}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:is}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:is}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:is}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:is}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:is})}).setMigrationHandler(zn).setSuggestionsSupplier(new gr),hr=new de.c(lr).setPanelOptions(N=>{N.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:Jt.wO.List,settings:{options:[{label:"List",value:Jt.wO.List},{label:"Stat",value:Jt.wO.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:Jt.LM.Default,settings:{options:[{value:Jt.LM.Default,label:"Default grouping"},{value:Jt.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:X=>X.groupMode===Jt.LM.Custom,category:["Options"],editor:X=>A.createElement(ia,{id:X.id??"groupBy",defaultValue:X.value.map(te=>({label:te,value:te})),onChange:X.onChange})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:Jt.As.AlphaAsc},{label:"Alphabetical (desc)",value:Jt.As.AlphaDesc},{label:"Importance",value:Jt.As.Importance},{label:"Time (asc)",value:Jt.As.TimeAsc},{label:"Time (desc)",value:Jt.As.TimeDesc}]},defaultValue:Jt.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",description:"Show alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(te){return A.createElement(ht.Es,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:te.value?.title,initialFolderUid:te.value?.uid,permissionLevel:ut.PermissionLevelString.View,onClear:()=>te.onChange(""),...te})},category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter alerts from selected datasource",id:"datasource",defaultValue:null,editor:function(te){return A.createElement(pt.q,{...te,type:["prometheus","loki","grafana"],noDefault:!0,current:te.value,onChange:ge=>te.onChange(ge.name),onClear:()=>te.onChange(null)})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})}),vr=be.v.unifiedAlertingEnabled?hr:pr;var nr=e(53376),cr=e(72196),Rs=e(4063),ms=e(23588),Qs=e(37932),ys=e(34807),jt=e(7804),He=e(398),mt=e(18271),bt=e(39856),Ht=e(61860);const nn=({options:N,annotation:X,formatDate:te,onClick:ge,onAvatarClick:Ee,onTagClick:Ce})=>{const Oe=(0,ie.wW)(bn),{showUser:We,showTags:ze,showTime:rt}=N,{text:st="",login:Ct,email:Ot,avatarUrl:vt,tags:Ut,time:Gt,timeEnd:Wt}=X,Mt=()=>{ge(X)},Yt=()=>{Ee(X)},zt=Ct&&We,Xt=Gt&&rt,cn=Wt&&Wt!==Gt&&rt;return A.createElement(_t.Z,{className:Oe.card,onClick:Mt},A.createElement(_t.Z.Heading,null,A.createElement(bt.D,{className:Oe.heading,onClick:on=>{on.stopPropagation()},content:st})),Xt&&A.createElement(_t.Z.Description,{className:Oe.timestamp},A.createElement(fn,{formatDate:te,time:Gt}),cn&&A.createElement(A.Fragment,null,A.createElement("span",{className:Oe.time},"-"),A.createElement(fn,{formatDate:te,time:Wt})," ")),zt&&A.createElement(_t.Z.Meta,{className:Oe.meta},A.createElement(qt,{email:Ot,login:Ct,avatarUrl:vt,onClick:Yt})),ze&&Ut&&A.createElement(_t.Z.Tags,null,A.createElement(ys.P,{tags:Ut,onClick:on=>Ce(on,!1)})))},qt=({onClick:N,avatarUrl:X,login:te,email:ge})=>{const Ee=(0,ie.wW)(bn),Ce=We=>{We.stopPropagation(),N()},Oe=A.createElement("span",null,"Created by:",A.createElement("br",null)," ",ge);return A.createElement(Ht.u,{content:Oe,theme:"info",placement:"top"},A.createElement("button",{onClick:Ce,className:Ee.avatar,"aria-label":`Created by ${ge}`},A.createElement("img",{src:X,alt:"avatar icon"})))},fn=({time:N,formatDate:X})=>{const te=(0,ie.wW)(bn);return A.createElement("span",{className:te.time},A.createElement("span",null,X(N)))};function bn(N){return{card:(0,S.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:N.spacing(1),margin:N.spacing(.5),width:"inherit"}),heading:(0,S.css)({a:{zIndex:1,position:"relative",color:N.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,S.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,S.css)({margin:0,alignSelf:"center"}),time:(0,S.css)({marginLeft:N.spacing(1),marginRight:N.spacing(1),fontSize:N.typography.bodySmall.fontSize,color:N.colors.text.secondary}),avatar:(0,S.css)({border:"none",background:"inherit",margin:0,padding:N.spacing(.5),img:{borderRadius:"50%",width:N.spacing(2),height:N.spacing(2)}})}}class En extends A.PureComponent{constructor(X){super(X),this.style=xn(be.v.theme2),this.subs=new nr.w0,this.tagListRef=A.createRef(),this.onAnnoClick=async te=>{if(!te.time)return;const{options:ge}=this.props,Ce=(0,sn.h4)().getCurrent(),Oe={from:this._timeOffset(te.time,ge.navigateBefore,!0),to:this._timeOffset(te.timeEnd??te.time,ge.navigateAfter,!1)};if(ge.navigateToPanel&&(Oe.viewPanel=te.panelId),Ce?.uid===te.dashboardUID){Qs.E1.partial(Oe);return}const We=await(0,wt.i)().get("/api/search",{dashboardUIDs:te.dashboardUID});if(We&&We.length&&We[0].uid===te.dashboardUID){const ze=We[0],rt=new URL(ze.url,window.location.origin);rt.searchParams.set("from",Oe.from),rt.searchParams.set("to",Oe.to),Qs.E1.push(cr.u.stripBaseFromUrl(rt.toString()));return}mt.Z.emit(Rs.SI.alertWarning,["Unknown Dashboard: "+te.dashboardUID])},this.onTagClick=(te,ge)=>{if(!ge&&this.state.queryTags.includes(te))return;const Ee=ge?this.state.queryTags.filter(Oe=>Oe!==te):[...this.state.queryTags,te];let Ce;if(ge){const Oe=document.activeElement,We=Oe?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(Oe)&&We){const ze=Number.parseInt(We,10),rt=this.tagListRef.current.querySelector(`[data-tag-id="${ze+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${ze-1}"]`);rt instanceof HTMLElement&&(Ce=rt)}}this.setState({queryTags:Ee},()=>Ce?.focus())},this.onUserClick=te=>{this.setState({queryUser:{id:te.userId,login:te.login,email:te.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(te,ge)=>{const{options:Ee}=this.props,Ce=(0,sn.h4)().getCurrent();return Ce?A.createElement(nn,{annotation:te,formatDate:Ce.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:Ee}):A.createElement(A.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(ms.n1).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(X,te){const{options:ge,timeRange:Ee}=this.props;(ge!==X.options||this.state.queryTags!==te.queryTags||this.state.queryUser!==te.queryUser||X.renderCounter!==this.props.renderCounter||ge.onlyInTimeRange&&Ee!==X.timeRange)&&this.doSearch()}async doSearch(){const{options:X}=this.props,{queryUser:te,queryTags:ge}=this.state,Ee={tags:X.tags,limit:X.limit,type:"annotation"};X.onlyFromThisDashboard&&(Ee.dashboardUID=(0,sn.h4)().getCurrent()?.uid);let Ce="";if(X.onlyInTimeRange){const{timeRange:We}=this.props;Ee.from=We.from.valueOf(),Ee.to=We.to.valueOf()}else Ce="All Time";te&&(Ee.userId=te.id),X.tags&&X.tags.length&&(Ee.tags=X.tags.map(We=>this.props.replaceVariables(We))),ge.length&&(Ee.tags=Ee.tags?[...Ee.tags,...ge]:ge);const Oe=await(0,wt.i)().get("/api/annotations",Ee,`anno-list-panel-${this.props.id}`);this.setState({annotations:Oe,timeInfo:Ce,loaded:!0})}_timeOffset(X,te,ge=!1){let Ee=5,Ce="m";const Oe=/^(\d+)(\w)/.exec(te);Oe&&Oe.length===3&&(Ee=parseInt(Oe[1],10),Ce=Oe[2]);const We=(0,Nt.CQ)(X);return ge&&(Ee*=-1),We.add(Ee,Ce).valueOf()}render(){const{loaded:X,annotations:te,queryUser:ge,queryTags:Ee}=this.state;if(!X)return A.createElement("div",null,"loading...");const Ce=ge||Ee.length>0;return A.createElement(Be.$,{autoHeightMin:"100%"},Ce&&A.createElement("div",{className:this.style.filter},A.createElement("b",null,"Filter:"),ge&&A.createElement(De.zx,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${ge.email}`},ge.email),Ee.length>0&&A.createElement(ys.P,{icon:"times",tags:Ee,onClick:Oe=>this.onTagClick(Oe,!0),getAriaLabel:Oe=>`Remove ${Oe} tag`,className:this.style.tagList,ref:this.tagListRef})),te.length<1&&A.createElement("div",{className:this.style.noneFound},"No Annotations Found"),A.createElement(He.L,{items:te,renderItem:this.renderItem,getItemKey:Oe=>`${Oe.id}`}))}}const xn=(0,jt.B)(N=>({noneFound:S.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,S.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:N.spacing(.5),padding:N.spacing(.5)}),tagList:(0,S.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),qn=Object.freeze([0,0]),Pt={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},Ae=new de.c(En).setPanelOptions(N=>{N.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:Pt.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:Pt.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(X){return A.createElement(je.B,{tags:X.value,onChange:X.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:Pt.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:Pt.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:Pt.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:Pt.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:Pt.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:Pt.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:Pt.navigateAfter,description:""})}).setPanelChangeHandler((N,X,te)=>X==="ryantxu-annolist-panel"?te:N.options);var Me=e(3947),Ze=e(53768),tt=e(72293),It=e(30471),$t=e(82229),Tt=e(99098),qe=e(40538),rn=e(26372),dn=e(34315),Dn=e(91511),wn=e(77587),Gn=e(31911),ra=e(25272),Sa=e(74855),Da=e(96905),Ta=e(87670),An=e(60325),Fn=e(4176),da=e(23888),va=e(729),ea=e(78056),xa=e(68416),za=e(72269),fs=e(85511),Zs=e(20888),$s=e(56632),Er=e(1105);const Ha=({config:N,onUPlotClick:X,setFocusedSeriesIdx:te,setFocusedPointIdx:ge,setCoords:Ee,setHover:Ce,isToolTipOpen:Oe,isActive:We,setIsActive:ze,sync:rt})=>{Oe.current=!1;const st=()=>{ze&&ze(!0)},Ct=()=>{Oe.current||(Ee(null),ze&&ze(!1))};let Ot=null,vt=null;N.addHook("init",Mt=>{Ot=Mt.root.parentElement,vt=Mt.over,Ot?.addEventListener("click",X),vt.addEventListener("mouseleave",Ct),vt.addEventListener("mouseenter",st),rt&&rt()===$s.m.Crosshair&&Mt.root.classList.add("shared-crosshair")});const Ut=()=>{Oe.current&&(Ee(null),X())};N.addHook("drawClear",Ut),N.addHook("destroy",()=>{Ot?.removeEventListener("click",X),vt?.removeEventListener("mouseleave",Ct),vt?.removeEventListener("mouseenter",st),Ut()});let Gt;N.addHook("syncRect",(Mt,Yt)=>{Gt=Yt});const Wt=N.getTooltipInterpolator();return Wt&&N.addHook("setCursor",Mt=>{Oe.current||Wt(te,ge,Yt=>{if(Yt){Ee(null);return}if(!Gt)return;const{x:zt,y:Xt}=(0,Er._)(Mt,Gt);zt!==void 0&&Xt!==void 0&&Ee({canvas:{x:Mt.cursor.left,y:Mt.cursor.top},viewport:{x:zt,y:Xt}})},Mt)}),N.addHook("setLegend",Mt=>{if(!Oe.current&&!Wt&&ge(Mt.legend.idx),Mt.cursor.idxs!=null)for(let Yt=0;Yt<Mt.cursor.idxs.length;Yt++){const zt=Mt.cursor.idxs[Yt];if(zt!=null){const Xt={xIndex:zt,yIndex:0,pageX:Gt.left+Mt.cursor.left,pageY:Gt.top+Mt.cursor.top};(!Oe.current||!Xt)&&Ce(Xt);return}}}),N.addHook("setSeries",(Mt,Yt)=>{Oe.current||te(Yt)}),N};var Fr=e(50796),ss=e(97551),As=e(16225),na=e(75974),Ua=e(2703),Ks=e(72990),yr=e(17587),Ls=e(6194),Vs=e(33750),gi=e(13347),ao=e(2445),ar=e(25532),so=e(5680),Gr=e(28586),Yr=e(60892);const pi=Gr.Gj,gl=Gr.Gj,Ed=8,hi=30,ho=.65,pl=.1,yd=.15,Pd=5,ro=10,hl=.1;function Cd(N,X,te,ge,Ee){const Ce=(0,Fn.X1)(N,14),Oe=X/(Ce.width+2)*14,We=te/ge,ze=Math.min(We,Oe);return{fontSize:Math.min(ze,Ee??ze),textMetrics:Ce}}function oo(N,X){const{xOri:te,xDir:ge,rawValue:Ee,getColor:Ce,formatValue:Oe,formatShortValue:We,fillOpacity:ze=1,showValue:rt,xSpacing:st=0}=N,Ct=te===qe.wN.Horizontal,Ot=!Boolean(N.text?.valueSize),vt=N.stacking!==qe.o0.None,Ut=N.stacking===qe.o0.Percent;let{groupWidth:Gt,barWidth:Wt,barRadius:Mt=0}=N;vt&&([Gt,Wt]=[Wt,Gt]);let Yt,zt;const Xt=Tn=>Array.from(Tn.data[0].map((Ln,Nn)=>Nn)),cn=st===0?void 0:(Tn,Ln)=>{const Nn=Tn.bbox.width,Yn=ge*(Ct?1:-1);let Xn=Ln.length,fa=Xn-1,pa=0,Cs=Nn/na.Z.pxRatio,gs=Math.abs(Math.floor(Cs/st));pa=Xn<gs?0:Math.ceil(Xn/gs);let Ns=Ln.map((cs,Tr)=>pa!==0&&(st>0?Tr:fa-Tr)%pa>0?null:cs);return Yn===1?Ns:Ns.reverse()},on=(Tn,Ln,Nn,Yn,Xn)=>{if(N.xTimeAuto){let fa=Tn.scales.x,pa=fa.min,Cs=fa.max;fa.min=Tn.data[0][0],fa.max=Tn.data[0][Tn.data[0].length-1];let gs=(0,da.mr)(Tn,Ln,Nn,Yn,Xn);return fa.min=pa,fa.max=Cs,gs}return Ln.map(fa=>Ct?We(0,fa):Oe(0,fa))},mn=(Tn,Ln,Nn)=>{Ln=0,Nn=Math.max(1,Tn.data[0].length-1);let Yn=0;(0,Gr.Qm)(Tn.data[0].length,Gt,pi,0,(fa,pa,Cs)=>{Yn=pa+Cs/2});let Xn=Nn-Ln;if(Yn===.5)Ln-=Xn;else{let pa=(1/(1-Yn*2)*Xn-Xn)/2;Ln-=pa,Nn+=pa}return[Ln,Nn]};let Mn=(Tn,Ln)=>{let Nn=Array.from({length:Ln},()=>({offs:Array(Tn).fill(0),size:Array(Tn).fill(0)}));return(0,Gr.Qm)(Tn,Gt,pi,null,(Yn,Xn,fa)=>{(0,Gr.Qm)(Ln,Wt,gl,null,(pa,Cs,gs)=>{Nn[pa].offs[Yn]=Xn+fa*Cs,Nn[pa].size[Yn]=fa*gs})}),Nn},Pn=(Tn,Ln)=>{let Nn=Array.from({length:Ln},()=>({offs:Array(Tn).fill(0),size:Array(Tn).fill(0)}));return(0,Gr.Qm)(Tn,Gt,pi,null,(Yn,Xn,fa)=>{(0,Gr.Qm)(Ln,Wt,gl,null,(pa,Cs,gs)=>{Nn[pa].offs[Yn]=Xn,Nn[pa].size[Yn]=fa})}),Nn};const Bn=Ct?pl:yd,Rn=Ct?Pd:ro;let $n=[],ha=[],Qn=1,On,Jn=N.text?.valueSize??hi,oa=Rn,Oa=1/0,ja=1/0,Ka=Ce!=null,Va=Ka?{fill:{unit:3,values:(Tn,Ln)=>ha[Ln].fill},stroke:{unit:3,values:(Tn,Ln)=>ha[Ln].stroke}}:{},Kn=na.Z.paths.bars({radius:Ut?0:vt?(Tn,Ln)=>Ln===Tn.data.length-1?[Mt,0]:[0,0]:Mt,disp:{x0:{unit:2,values:(Tn,Ln)=>$n[Ln].offs},size:{unit:2,values:(Tn,Ln)=>$n[Ln].size},...Va},each:(Tn,Ln,Nn,Yn,Xn,fa,pa)=>{Yn-=Tn.bbox.left,Xn-=Tn.bbox.top;let Cs=Tn.data[Ln][Nn];Ct?(Oa=Math.min(Oa,Cs<0?Tn.bbox.height-(Xn+pa):Xn),ja=fa):(Oa=pa,ja=Math.min(ja,Cs<0?Yn:Tn.bbox.width-(Yn+fa)));let gs={x:Yn,y:Xn,w:fa,h:pa,sidx:Ln,didx:Nn};if(N.fullHighlight&&(N.xOri===qe.wN.Horizontal?(gs.y=0,gs.h=Tn.bbox.height):(gs.x=0,gs.w=Tn.bbox.width)),Yt.add(gs),rt!==qe.Jp.Never){const Ns=Ee(Ln,Nn);let cs=1;Ut&&La[Ln][Nn]&&(cs=La[Ln][Nn]);const Tr=cs===0?0:Ns/cs,Or=Oe(Ln,Tr);if(oa=Math.min(oa,Math.round(Bn*(Ct?fa:pa))),On[Nn]===void 0&&(On[Nn]={}),On[Nn][Ln]={text:Or,value:Ee(Ln,Nn),hidden:!1},Ot){const{fontSize:Cr,textMetrics:or}=Cd(On[Nn][Ln].text,ja*(Ct?ho:1)-(Ct?0:oa),Oa*(Ct?1:ho)-(Ct?oa:0),1);On[Nn][Ln].textMetrics=or;let hs=Math.round(Math.min(Jn,hi,Cr));Qn=hs/Jn*(hs/14),Jn=hs}else On[Nn][Ln].textMetrics=(0,Fn.X1)(On[Nn][Ln].text,Jn);let Us=Ct?0:-Math.round(hl*Jn),Ds=Ee(Ln,Nn);if(N.negY?.[Ln]&&Ds!=null&&(Ds*=-1),Ds!=null){const Cr=Tn.bbox.left+(Ct?Yn+fa/2:Ds<0?Yn-oa:Yn+fa+oa),or=Tn.bbox.top+(Ct?Ds<0?Xn+pa+oa:Xn-oa:Xn+pa/2-Us),{textMetrics:hs={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=On[Nn][Ln];let Ir=0,ml=0;Ct?(Ir=hs.width*Qn/2,ml=Ds>0?(hs.actualBoundingBoxAscent+hs.actualBoundingBoxDescent)*Qn:0):(ml=(hs.actualBoundingBoxAscent+hs.actualBoundingBoxDescent)*Qn/2,Ir=Ds<0?hs.width*Qn:0),On[Nn][Ln].x=Cr,On[Nn][Ln].y=or,On[Nn][Ln].bbox={x:Cr-Ir,y:or-ml,w:hs.width*Qn,h:(hs.actualBoundingBoxAscent+hs.actualBoundingBoxDescent)*Qn}}}}});const Sn=Tn=>{let Ln=Tn.over;Ln.style.overflow="hidden",Tn.root.querySelectorAll(".u-cursor-pt").forEach(Nn=>{Nn instanceof HTMLElement&&(Nn.style.borderRadius="0",N.fullHighlight&&(Nn.style.zIndex="-1"))})},Vn={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(Tn,Ln)=>{if(Ln===1){zt=null;let Nn=Tn.cursor.left*na.Z.pxRatio,Yn=Tn.cursor.top*na.Z.pxRatio;Yt.get(Nn,Yn,1,1,Xn=>{(0,Yr.Pn)(Nn,Yn,Xn.x,Xn.y,Xn.x+Xn.w,Xn.y+Xn.h)&&(vt?(zt==null||Xn.h*Xn.w<zt.h*zt.w)&&(zt=Xn):zt=Xn)})}return zt&&Ln===zt.sidx?zt.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(Tn,Ln)=>{let Nn=zt&&Ln===zt.sidx,Yn=0,Xn=0;if(vt&&Nn){const fa=zt&&zt.sidx>1&&(0,Yr.zZ)(Yt,zt.sidx-1,zt.didx);fa&&(Ct?Yn=fa.h:Xn=fa.w)}return{left:Nn?(zt.x+Xn)/na.Z.pxRatio:-10,top:Nn?zt.y/na.Z.pxRatio:-10,width:Nn?(zt.w-Xn)/na.Z.pxRatio:0,height:Nn?(zt.h-Yn)/na.Z.pxRatio:0}}}},Zn=Tn=>{if(Yt=Yt||new Yr.lW(0,0,Tn.bbox.width,Tn.bbox.height),Yt.clear(),Tn.series.forEach(Ln=>{Ln._paths=null}),vt?$n=[null].concat(Pn(Tn.data[0].length,Tn.data.length-1)):$n=[null].concat(Mn(Tn.data[0].length,Tn.data.length-1)),Ka){ha=[null];for(let Ln=1;Ln<Tn.data.length;Ln++){let Nn=Tn.data[Ln].map((Yn,Xn)=>Yn!=null?Ce(Ln,Xn,Yn):null);ha.push({fill:ze<1?Nn.map(Yn=>Yn!=null?(0,so.alpha)(Yn,ze):null):Nn,stroke:Nn})}}On={},Jn=N.text?.valueSize??hi,oa=Rn,Oa=ja=1/0},Ia=Tn=>{if(rt===qe.Jp.Never||Jn<Ed)return;Tn.ctx.save(),Tn.ctx.fillStyle=X.colors.text.primary,Tn.ctx.font=`${Jn}px ${X.typography.fontFamily}`;let Ln,Nn;for(const Yn in On){let Xn=!0;for(const fa in On[Yn]){const pa=On[Yn][fa],{text:Cs,x:gs=0,y:Ns=0}=pa;let{value:cs}=pa;N.negY?.[fa]&&cs!=null&&(cs*=-1);let Tr=Ct?"center":cs!==null&&cs<0?"right":"left",Or=Ct?cs!==null&&cs<0?"top":"alphabetic":"middle";if(Tr!==Ln&&(Tn.ctx.textAlign=Ln=Tr),Or!==Nn&&(Tn.ctx.textBaseline=Nn=Or),rt===qe.Jp.Always)Tn.ctx.fillText(Cs,gs,Ns);else if(rt===qe.Jp.Auto){let{bbox:Us}=pa,Ds=!1;if(Us==null)Ds=!0,pa.hidden=!0;else if(!Xn)for(const Cr in On[Yn]){if(Cr===fa)continue;const or=On[Yn][Cr],{bbox:hs,hidden:Ir}=or;if(!Ir&&hs&&(0,Yr.kK)(Us,hs)){Ds=!0,pa.hidden=!0;break}}Xn=!1,!Ds&&Tn.ctx.fillText(Cs,gs,Ns)}}}Tn.ctx.restore()},ma=(Tn,Ln,Nn,Yn)=>{zt?(Tn(zt.sidx),Ln(zt.didx),Nn()):Nn(!0)};let La=null;function aa(Tn,Ln){return La=null,(0,ao.Bj)(Tn[0],Ln,({totals:Nn})=>{La=Nn})}return{cursor:Vn,xRange:mn,xValues:on,xSplits:Xt,hFilter:cn,barsBuilder:Kn,init:Sn,drawClear:Zn,draw:Ia,interpolateTooltip:ma,prepData:aa}}const gg=Object.freeze([0,0]),Dr={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:qe.wm.Auto,showValue:qe.Jp.Auto,stacking:qe.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},vl={fillOpacity:80,gradientMode:qe.FI.None,lineWidth:1};function vo(N){return N===$t.wm.Vertical?{xOri:qe.wN.Horizontal,xDir:qe.bQ.Right,yOri:qe.wN.Vertical,yDir:qe.bQ.Up}:{xOri:qe.wN.Vertical,xDir:qe.bQ.Down,yOri:qe.wN.Horizontal,yDir:qe.bQ.Right}}const Dd=({frame:N,theme:X,orientation:te,showValue:ge,groupWidth:Ee,barWidth:Ce,barRadius:Oe=0,stacking:We,text:ze,rawValue:rt,getColor:st,fillOpacity:Ct,allFrames:Ot,xTickLabelRotation:vt,xTickLabelMaxLength:Ut,xTickLabelSpacing:Gt=0,legend:Wt,timeZone:Mt,fullHighlight:Yt})=>{const zt=new gi.U,Xt=(Qn,On)=>(0,Ua.zc)(N.fields[Qn].display(On)),cn=(Qn,On)=>Ro(Xt(Qn,On),Ut),on=vo(te);N.fields.length===2&&(Ee=Ce,Ce=1);const mn={xOri:on.xOri,xDir:on.xDir,groupWidth:Ee,barWidth:Ce,barRadius:Oe,stacking:We,rawValue:rt,getColor:st,fillOpacity:Ct,formatValue:Xt,formatShortValue:cn,timeZone:Mt,text:ze,showValue:ge,legend:Wt,xSpacing:Gt,xTimeAuto:N.fields[0]?.type===Tt.fS.time&&!N.fields[0].config.unit?.startsWith("time:"),negY:N.fields.map(Qn=>Qn.config.custom?.transform===qe.pR.NegativeY),fullHighlight:Yt},Mn=oo(mn,X);if(zt.setCursor(Mn.cursor),zt.addHook("init",Mn.init),zt.addHook("drawClear",Mn.drawClear),zt.addHook("draw",Mn.draw),zt.setTooltipInterpolator(Mn.interpolateTooltip),vt!==0){let Qn=50,On=on.xOri===qe.wN.Horizontal?14:5;zt.setPadding(xd(N,vt,Ut,Qn,On))}zt.setPrepData(Mn.prepData),zt.addScale({scaleKey:"x",isTime:!1,range:Mn.xRange,distribution:qe.wf.Ordinal,orientation:on.xOri,direction:on.xDir});const Pn=N.fields[0].config.custom?.axisPlacement!==qe.LB.Hidden?on.xOri===qe.wN.Horizontal?qe.LB.Bottom:qe.LB.Left:qe.LB.Hidden,Bn=N.fields[0].config.custom?.axisPlacement!==qe.LB.Hidden;zt.addAxis({scaleKey:"x",isTime:!1,placement:Pn,label:N.fields[0].config.custom?.axisLabel,splits:Mn.xSplits,filter:on.xOri===0?Mn.hFilter:void 0,values:Mn.xValues,timeZone:Mt,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:on.xOri===0?vt*-1:0,theme:X,show:Bn});let Rn=0;const $n=El(Wt);for(let Qn=1;Qn<N.fields.length;Qn++){const On=N.fields[Qn];Rn++;const Jn={...vl,...On.config.custom},oa=On.config.unit||za.j,Oa=(0,Ks.fD)(On),Ka=(0,Ks.YO)(On,X).color;let Va=Jn.axisSoftMin,Kn=Jn.axisSoftMax;if(Va==null&&On.config.min==null&&(Va=0),Kn==null&&On.config.max==null&&(Kn=0),Jn.thresholdsStyle&&On.config.thresholds&&(Jn.thresholdsStyle.mode??qe.i3.Off)!==qe.i3.Off&&zt.addThresholds({config:Jn.thresholdsStyle,thresholds:On.config.thresholds,scaleKey:oa,theme:X,hardMin:On.config.min,hardMax:On.config.max,softMin:Jn.axisSoftMin,softMax:Jn.axisSoftMax}),zt.addSeries({scaleKey:oa,pxAlign:!0,lineWidth:Jn.lineWidth,lineColor:Ka,fillOpacity:Jn.fillOpacity,theme:X,colorMode:Oa,pathBuilder:Mn.barsBuilder,show:!Jn.hideFrom?.viz,gradientMode:Jn.gradientMode,thresholds:On.config.thresholds,hardMin:On.config.min,hardMax:On.config.max,softMin:Va,softMax:Kn,dataFrameFieldIndex:{fieldIndex:$n?Qn:Ot[0].fields.findIndex(Sn=>Sn.type===Tt.fS.number&&Sn.state?.seriesIndex===Rn-1),frameIndex:0}}),zt.addScale({scaleKey:oa,min:On.config.min,max:On.config.max,softMin:Va,softMax:Kn,orientation:on.yOri,direction:on.yDir,distribution:Jn.scaleDistribution?.type,log:Jn.scaleDistribution?.log}),Jn.axisPlacement!==qe.LB.Hidden){let Sn=Jn.axisPlacement;(!Sn||Sn===qe.LB.Auto)&&(Sn=qe.LB.Left),on.xOri===1&&(Sn===qe.LB.Left&&(Sn=qe.LB.Bottom),Sn===qe.LB.Right&&(Sn=qe.LB.Top)),zt.addAxis({scaleKey:oa,label:Jn.axisLabel,size:Jn.axisWidth,placement:Sn,formatValue:(Vn,Zn)=>(0,Ua.zc)(On.display(Vn,Zn)),filter:on.yOri===0?Mn.hFilter:void 0,tickLabelRotation:on.xOri===1?vt*-1:0,theme:X,grid:{show:Jn.axisGridShow}})}}let ha=(0,ao.i7)(N);return zt.setStackingGroups(ha),zt};function Ro(N,X){return N.length>X?N.substring(0,X).concat("..."):N}function xd(N,X,te,ge=0,Ee=0){const Ce=N.fields[0].values,Oe=da.gD,We=N.fields[0].display,ze=vt=>We?We(Ce[vt]):Ce[vt];let rt=0;for(let vt=0;vt<Ce.length;vt++){let Ut=(0,Fn.X1)(Ro((0,Ua.zc)(ze(vt)),te),Oe);rt=Ut.width>rt?Ut.width:rt}const st=X>0?Math.cos(X*Math.PI/180)*(0,Fn.X1)(Ro((0,Ua.zc)(ze(Ce.length-1)),te),Oe).width:0,Ct=X<0?Math.cos(X*-1*Math.PI/180)*(0,Fn.X1)(Ro((0,Ua.zc)(ze(0)),te),Oe).width:0,Ot=Math.sin((X>=0?X:X*-1)*Math.PI/180)*rt-Ee;return[Math.round(da.gD*na.Z.pxRatio),st,Ot,Math.max(0,Ct-ge)]}function io(N,X,te){if(!N?.length)return{warn:"No data in response"};const ge=N.length===1?(0,yr.Y3)(N[0],N[0].fields.findIndex(Ct=>Ct.type===Tt.fS.time)):(0,yr._9)({frames:N});if(!ge)return{warn:"Unable to join data"};let Ee;if(te.colorByField&&(Ee=(0,ar.findField)(ge,te.colorByField),!Ee))return{warn:"Color field not found"};let Ce;if(te.xField&&(Ce=(0,ar.findField)(ge,te.xField),!Ce))return{warn:"Configured x field not found"};let Oe,We,ze=[];for(const Ct of ge.fields)if(Ct!==Ce)switch(Ct.type){case Tt.fS.string:Oe||(Oe=Ct);break;case Tt.fS.time:We||(We=Ct);break;case Tt.fS.number:{const Ot={...Ct,state:{...Ct.state,seriesIndex:ze.length},config:{...Ct.config,custom:{...Ct.config.custom,stacking:{group:"_",mode:te.stacking}}},values:Ct.values.map(vt=>Number.isFinite(vt)||vt==null?vt:null)};te.stacking===qe.o0.Percent&&(Ot.config.unit="percentunit",Ot.display=(0,Ls.U_)({field:Ot,theme:X})),ze.push(Ot)}}let rt=Ce;if(rt||(rt=Oe||We),!rt)return{warn:"Bar charts requires a string or time field"};if(!ze.length)return{warn:"No numeric fields found"};if(Ee&&ze.length>1){const Ct=ze.find(Ot=>Ot!==Ee);Ct&&(ze=[Ct])}if(El(te.legend)){const Ct=te.legend.sortBy.toLowerCase(),Ot=te.legend.calcs??[Ct];ze=(0,w.orderBy)(ze,vt=>(0,Vs.Kx)({field:vt,reducers:Ot})[Ct],te.legend.sortDesc?"desc":"asc")}let st=ze;return te.stacking===qe.o0.Percent&&(st=ze.map(Ct=>{const Ot=ge.fields.find(Ut=>Ut.name===Ct.name),vt={...Ct,config:{...Ot.config},values:Ct.values};return vt.display=(0,Ls.U_)({field:vt,theme:X}),vt}),st.unshift(rt)),ze.unshift(rt),{aligned:ge,colorByField:Ee,viz:[{length:rt.values.length,fields:ze}],legend:{fields:st,length:rt.values.length}}}const El=N=>Boolean(N?.sortBy&&N.sortDesc!==null),yl=10,bd=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(N,X)=>X.text?.valueSize===N.text?.valueSize],Ao=({data:N,options:X,fieldConfig:te,width:ge,height:Ee,timeZone:Ce,id:Oe})=>{const We=(0,ie.l4)(),{eventBus:ze}=(0,An.R9)(),rt=(0,A.useRef)(void 0),st=(0,A.useRef)(!1),[Ct,Ot]=(0,A.useState)(void 0),[vt,Ut]=(0,A.useState)(null),[Gt,Wt]=(0,A.useState)(null),[Mt,Yt]=(0,A.useState)(null),[zt,Xt]=(0,A.useState)(!1),[cn,on]=(0,A.useState)(!1),mn=()=>{st.current=!1,Ut(null),on(!1)},Mn=()=>{st.current=!st.current,on(st.current)},Pn=(0,A.useRef)(),Bn=(0,A.useRef)(),Rn=(0,A.useMemo)(()=>io(N.series,We,X),[N.series,We,X]),$n="viz"in Rn?Rn:null;Bn.current=$n?.colorByField;const ha=(0,A.useRef)(1e4);(0,A.useMemo)(()=>{ha.current++},[X]);const Qn=(0,A.useMemo)(()=>{const Sn=$n?.viz[0],Vn=Pn.current;return Sn&&Vn&&(0,Da.Ch)(Sn,Vn,!0)||ha.current++,Pn.current=Sn,(N.structureRev??0)+ha.current},[$n,N.structureRev]),On=(0,A.useMemo)(()=>!X.orientation||X.orientation===$t.wm.Auto?ge<Ee?$t.wm.Horizontal:$t.wm.Vertical:X.orientation,[ge,Ee,X.orientation]),Jn=(0,A.useMemo)(()=>{if(X.xTickLabelMaxLength)return X.xTickLabelMaxLength;{const Sn=X.xTickLabelRotation,Vn=(0,Fn.X1)("M",da.gD).width;return Ee/2/(Math.sin((Sn>=0?Sn:Sn*-1)*Math.PI/180)*Vn)-3}},[Ee,X.xTickLabelRotation,X.xTickLabelMaxLength]);if("warn"in Rn)return A.createElement(Ta.Z,{panelId:Oe,fieldConfig:te,data:N,message:Rn.warn,needsNumberField:!0});const oa=(Sn,Vn,Zn)=>{const Ia=Vn==null?null:Sn.fields[Vn];if(Ia){const aa=(0,It.CZ)(Ia,Sn);Vn=Rn.aligned.fields.findIndex(Tn=>aa===(0,It.CZ)(Tn,Rn.aligned))}const ma=X.fullHighlight&&X.stacking!==qe.o0.None?qe.f3.Multi:X.tooltip.mode,La=X.tooltip.mode===qe.f3.Multi?X.tooltip.sort:qe.As.None;return A.createElement(A.Fragment,null,cn&&A.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},A.createElement(Fr.P,{onClick:mn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),A.createElement(As.H,{data:Rn.aligned,rowIndex:Zn,columnIndex:Vn,sortOrder:La,mode:ma}))},Oa=Sn=>{const{legend:Vn}=X;if(!Sn||Vn.showLegend===!1)return null;if(Rn.colorByField){const Zn=(0,ss.$m)([Rn.colorByField],We);if(Zn?.length)return A.createElement(va.AY.Legend,{placement:Vn.placement},A.createElement(ea.l,{placement:Vn.placement,items:Zn,displayMode:Vn.displayMode}))}return A.createElement(xa.l,{data:[Rn.legend],config:Sn,maxHeight:"35%",maxWidth:"60%",...X.legend})},ja=(Sn,Vn)=>Pn.current.fields[Sn].values[Vn];let Ka,Va=1;if(Rn.colorByField){const Sn=Rn.colorByField,Vn=Sn.display;Va=(Sn.config.custom.fillOpacity??100)/100,Ka=(Zn,Ia)=>Vn(Bn.current?.values[Ia]).color}else Pn.current.fields.some(Vn=>Vn.config.custom?.gradientMode===qe.FI.Scheme&&Vn.config.color?.mode===Ze.S.Thresholds||Vn.config.mappings?.some(Ia=>Ia.type==="value"?Object.values(Ia.options).some(ma=>ma.color!=null):Ia.options.result.color!=null))&&(Va=(Pn.current.fields.find(Zn=>Zn.type===Tt.fS.number).config.custom.fillOpacity??100)/100,Ka=(Zn,Ia)=>{let ma=Pn.current.fields[Zn];return ma.display(ma.values[Ia]).color});const Kn=(Sn,Vn,Zn)=>{const{barWidth:Ia,barRadius:ma=0,showValue:La,groupWidth:aa,stacking:Tn,legend:Ln,tooltip:Nn,text:Yn,xTickLabelRotation:Xn,xTickLabelSpacing:fa,fullHighlight:pa}=X;return Dd({frame:Sn,getTimeRange:Zn,timeZone:Ce,theme:We,timeZones:[Ce],eventBus:ze,orientation:On,barWidth:Ia,barRadius:ma,showValue:La,groupWidth:aa,xTickLabelRotation:Xn,xTickLabelMaxLength:Jn,xTickLabelSpacing:fa,stacking:Tn,legend:Ln,tooltip:Nn,text:Yn,rawValue:ja,getColor:Ka,fillOpacity:Va,allFrames:Rn.viz,fullHighlight:pa})};return A.createElement(za.d,{theme:We,frames:Rn.viz,prepConfig:Kn,propsToDiff:bd,preparePlotFrame:Sn=>Sn[0],renderLegend:Oa,legend:X.legend,timeZone:Ce,timeRange:{from:1,to:1},structureRev:Qn,width:ge,height:Ee},Sn=>(rt.current!==Sn&&(rt.current=Ha({config:Sn,onUPlotClick:Mn,setFocusedSeriesIdx:Wt,setFocusedPointIdx:Yt,setCoords:Ut,setHover:Ot,isToolTipOpen:st,isActive:zt,setIsActive:Xt})),X.tooltip.mode===qe.f3.None?null:A.createElement(fs.h_,null,Ct&&vt&&Gt&&A.createElement(Zs.S,{position:{x:vt.viewport.x,y:vt.viewport.y},offset:{x:yl,y:yl},allowPointerEvents:st.current},oa(Rn.viz[0],Gt,Mt)))))};var jr=e(52081),Lo=e(2594),Md=e(58255);const vi=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],Pl=N=>{let X=N.value??0;const te=X<0;te&&(X*=-1);let ge=vi[0];for(const Oe of vi)if(ge=Oe,X<=ge.value)break;const Ee=Oe=>{N.onChange(Oe*(te?-1:1))},Ce=()=>{N.onChange(N.value*-1)};return A.createElement(jr.Lh,null,A.createElement(Lo.S,{value:ge.value,options:vi,onChange:Ee}),X!==0&&A.createElement(Ht.u,{content:"Require space from the right side",placement:"top"},A.createElement("div",null,A.createElement(Md.X,{value:te,onChange:Ce,label:"RTL"}))))};var Ra=e(26410);class Ms{getListWithDefaults(X){return X.getListAppender({name:Ra.y.BarChart,pluginId:"barchart",options:{showValue:qe.Jp.Never,legend:{calcs:[],displayMode:qe.jK.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:te=>{te.options.barWidth=.8}}})}getSuggestionsForData(X){const te=this.getListWithDefaults(X),{dataSummary:ge}=X;ge.frameCount===1&&(!ge.hasNumberField||!ge.hasStringField||ge.rowCountTotal>50||(te.append({name:Ra.y.BarChart}),ge.numberFieldCount>1&&(te.append({name:Ra.y.BarChartStacked,options:{stacking:qe.o0.Normal}}),te.append({name:Ra.y.BarChartStackedPercent,options:{stacking:qe.o0.Percent}})),te.append({name:Ra.y.BarChartHorizontal,options:{orientation:$t.wm.Horizontal}}),ge.numberFieldCount>1&&(te.append({name:Ra.y.BarChartHorizontalStacked,options:{stacking:qe.o0.Normal,orientation:$t.wm.Horizontal}}),te.append({name:Ra.y.BarChartHorizontalStackedPercent,options:{orientation:$t.wm.Horizontal,stacking:qe.o0.Percent}}))))}}const Cl=new de.c(Ao).useFieldConfig({standardOptions:{[Me.qb.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Ze.S.PaletteClassic}}},useCustomConfig:N=>{const X=vl;N.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:X.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:X.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:rn.q.fillGradient[0].value,settings:{options:rn.q.fillGradient}}),N.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:qe.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:qe.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),N.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:qe.i3.Off},settings:{options:rn.q.thresholdsDisplayModes},editor:Sa.F,override:Sa.F,process:tt.kG,shouldApply:()=>!0}),dn.r(N,X,!1),Dn.B(N)}}).setPanelOptions((N,X)=>{const te=io(X.data,be.v.theme2,X.options??{});let ge="First string or time field";const Ee="viz"in te?te.viz[0]:void 0;if(Ee?.fields?.length){const Ce=Ee.fields[0];ge+=` (${(0,It.CZ)(Ce,Ee)})`}N.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:ge}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:$t.wm.Auto,label:"Auto"},{value:$t.wm.Horizontal,label:"Horizontal"},{value:$t.wm.Vertical,label:"Vertical"}]},defaultValue:Dr.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:Dr.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:Ce=>Ce.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:Dr.xTickLabelSpacing,editor:Pl}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:qe.Jp.Auto,label:"Auto"},{value:qe.Jp.Always,label:"Always"},{value:qe.Jp.Never,label:"Never"}]},defaultValue:Dr.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:rn.q.stacking},defaultValue:Dr.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Dr.groupWidth,settings:{min:0,max:1,step:.01},showIf:(Ce,Oe)=>Ce.stacking&&Ce.stacking!==qe.o0.None?!1:Eo(Oe)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Dr.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Dr.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:Dr.fullHighlight}),N.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),(!X.options?.fullHighlight||X.options?.stacking===qe.o0.None)&&wn.L(N),Gn.J(N),ra.Z(N,!1)}).setSuggestionsSupplier(new Ms);function Eo(N){let X=0;if(N)for(const te of N)for(const ge of te.fields)ge.type===Tt.fS.number&&X++;return X}var Ei=e(50954),yo=e(30383);const Dl=N=>(0,Ei.rD)(N);var Sd=e(63992);const Td=Object.freeze([0,0]),Po={displayMode:qe.QH.Gradient,minVizHeight:10,minVizWidth:0,showUnfilled:!0,valueMode:qe.M8.Color};class Od{getSuggestionsForData(X){const{dataSummary:te}=X;if(!te.hasData||!te.hasNumberField)return;const ge=X.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});te.numberFieldCount>50||(te.hasStringField&&te.frameCount===1&&te.rowCountTotal<30?(ge.append({name:Ra.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:qe.QH.Basic,orientation:$t.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),ge.append({name:Ra.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:qe.QH.Lcd,orientation:$t.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(ge.append({name:Ra.y.BarGaugeBasic,options:{displayMode:qe.QH.Basic,orientation:$t.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),ge.append({name:Ra.y.BarGaugeLCD,options:{displayMode:qe.QH.Lcd,orientation:$t.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const Id=new de.c(Sd.M).useFieldConfig().setPanelOptions(N=>{(0,yo.j)(N),(0,yo.h)(N),ra.Z(N),N.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:qe.QH.Gradient,label:"Gradient"},{value:qe.QH.Lcd,label:"Retro LCD"},{value:qe.QH.Basic,label:"Basic"}]},defaultValue:Po.displayMode}).addRadio({path:"valueMode",name:"Value display",settings:{options:[{value:qe.M8.Color,label:"Value color"},{value:qe.M8.Text,label:"Text color"},{value:qe.M8.Hidden,label:"Hidden"}]},defaultValue:Po.valueMode}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:Po.showUnfilled,showIf:X=>X.displayMode!=="lcd"}).addNumberInput({path:"minVizWidth",name:"Min width",description:"Minimum column width",defaultValue:Po.minVizWidth,showIf:X=>X.orientation===$t.wm.Vertical}).addNumberInput({path:"minVizHeight",name:"Min height",description:"Minimum row height",defaultValue:Po.minVizHeight,showIf:X=>X.orientation===$t.wm.Horizontal})}).setPanelChangeHandler(Ei.ZH).setMigrationHandler(Dl).setSuggestionsSupplier(new Od);var xr=e(56703),lo=e(76095),yi=e(68948),Bo=e(99375),Co=e(41611),Rd=e(41213),No=e(10092),Pi=e(16514);const xl=N=>X=>{const te=N.visualization.getColorByName(X?.color||Pi.Jx);return{markerTriangle:S.css`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${te};
      `,markerBar:S.css`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${te};
      `}};var bl=e(55986),Ad=e(53165),xs=e(94270),es=e(24799),sr=e(97379),Ml=e(63619),$r=e(24357),Sl=e(70659);const co=A.forwardRef(({annotation:N,onSave:X,onDismiss:te,timeFormatter:ge,className:Ee,...Ce},Oe)=>{const We=(0,ie.wW)(Ld),ze=(0,An.R9)(),rt=(0,A.useRef)(null);(0,Ad.Z)(rt,()=>{te()});const[st,Ct]=(0,bl.default)(async cn=>{const on=await ze.onAnnotationCreate(cn);return X&&X(),on}),[Ot,vt]=(0,bl.default)(async cn=>{const on=await ze.onAnnotationUpdate(cn);return X&&X(),on}),Ut=N.id!==void 0,Gt=N.time!==N.timeEnd,Wt=Ut?vt:Ct,Mt=Ut?Ot:st,Yt=Gt?`${ge(N.time)} - ${ge(N.timeEnd)}`:ge(N.time),zt=({tags:cn,description:on})=>{Wt({id:N.id,tags:cn,description:on,from:Math.round(N.time),to:Math.round(N.timeEnd)})},Xt=A.createElement("div",{ref:Oe,className:(0,S.cx)(We.editor,Ee),...Ce},A.createElement("div",{className:We.header},A.createElement(jr.Lh,{justify:"space-between",align:"center"},A.createElement("div",{className:We.title},"Add annotation"),A.createElement("div",{className:We.ts},Yt))),A.createElement("div",{className:We.editorForm},A.createElement(xs.l,{onSubmit:zt,defaultValues:{description:N?.text,tags:N?.tags||[]}},({register:cn,errors:on,control:mn})=>A.createElement(A.Fragment,null,A.createElement(es.g,{label:"Description",invalid:!!on.description,error:on?.description?.message},A.createElement(sr.K,{...cn("description",{required:"Annotation description is required"})})),A.createElement(es.g,{label:"Tags"},A.createElement(Ml.g,{control:mn,name:"tags",render:({field:{ref:Mn,onChange:Pn,...Bn}})=>A.createElement($r.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:Pn,tagOptions:Sl.lK,tags:Bn.value})})),A.createElement(jr.Lh,{justify:"flex-end"},A.createElement(De.zx,{size:"sm",variant:"secondary",onClick:te,fill:"outline"},"Cancel"),A.createElement(De.zx,{size:"sm",type:"submit",disabled:Mt?.loading},Mt?.loading?"Saving":"Save"))))));return A.createElement(A.Fragment,null,A.createElement("div",{className:We.backdrop}),A.createElement("div",{ref:rt},Xt))});co.displayName="AnnotationEditorForm";const Ld=N=>({backdrop:S.css`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${N.zIndex.navbarFixed};
    `,editorContainer:S.css`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:S.css`
      background: ${N.colors.background.primary};
      box-shadow: ${N.shadows.z3};
      z-index: ${N.zIndex.dropdown};
      border: 1px solid ${N.colors.border.weak};
      border-radius: ${N.shape.borderRadius()};
      width: 460px;
    `,editorForm:S.css`
      padding: ${N.spacing(1)};
    `,header:S.css`
      border-bottom: 1px solid ${N.colors.border.weak};
      padding: ${N.spacing(1.5,1)};
    `,title:S.css`
      font-weight: ${N.typography.fontWeightMedium};
    `,ts:S.css`
      font-size: ${N.typography.bodySmall.fontSize};
      color: ${N.colors.text.secondary};
    `}),Bd=({onDismiss:N,onSave:X,timeZone:te,data:ge,selection:Ee,annotation:Ce,style:Oe})=>{const We=(0,ie.l4)(),ze=(0,ie.wW)(Ss),rt=(0,ie.wW)(xl),[st,Ct]=(0,A.useState)(null),[Ot,vt]=(0,A.useState)(null),Ut=(0,No.D)(st,Ot,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let Gt=ge.fields[0];if(!Gt)return null;const Wt=Gt.display||(0,Ls.U_)({field:Gt,timeZone:te,theme:We}),Mt=Ee.min!==Ee.max;return A.createElement(fs.h_,null,A.createElement(A.Fragment,null,A.createElement("div",{style:Oe},A.createElement("div",{className:(0,S.cx)(S.css`
                position: absolute;
                top: ${Ee.bbox.top}px;
                left: ${Ee.bbox.left}px;
                width: ${Ee.bbox.width}px;
                height: ${Ee.bbox.height}px;
              `,Mt?ze.overlayRange(Ce):ze.overlay(Ce))},A.createElement("div",{ref:Ct,className:Mt?(0,S.cx)(rt(Ce).markerBar,ze.markerBar):(0,S.cx)(rt(Ce).markerTriangle,ze.markerTriangle)}))),A.createElement(co,{annotation:Ce||{time:Ee.min,timeEnd:Ee.max},timeFormatter:Yt=>Wt(Yt).text,onSave:X,onDismiss:N,ref:vt,style:Ut.styles.popper,...Ut.attributes.popper})))},Ss=N=>({overlay:X=>{const te=N.visualization.getColorByName(X?.color||Pi.Jx);return S.css`
        border-left: 1px dashed ${te};
      `},overlayRange:X=>{const te=N.visualization.getColorByName(X?.color||Pi.Jx);return S.css`
        background: ${so.alpha(te,.1)};
        border-left: 1px dashed ${te};
        border-right: 1px dashed ${te};
      `},markerTriangle:S.css`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:S.css`
      top: 100%;
      left: 0;
      position: absolute;
    `}),Do=({data:N,timeZone:X,config:te,children:ge})=>{const Ee=(0,A.useRef)(),[Ce,Oe]=(0,A.useState)(),[We,ze]=(0,A.useState)(!1),[rt,st]=(0,A.useState)(null),Ct=(0,Rd.Z)(),Ot=(0,A.useCallback)(()=>{st(null),Ee.current&&Ee.current.setSelect({top:0,left:0,width:0,height:0}),ze(!1)},[ze,st]);(0,A.useLayoutEffect)(()=>{let Ut=!1;te.addHook("init",Wt=>{Ee.current=Wt;const Mt=Wt.hooks.setSelect;if(Mt)for(let Yt=0;Yt<Mt.length;Yt++){const zt=Mt[Yt];zt!==Gt&&(Mt[Yt]=(...Xt)=>{!Ut&&zt(...Xt)})}}),te.addHook("syncRect",(Wt,Mt)=>{Ct()&&Oe(Mt)});const Gt=Wt=>{Ut&&(ze(!0),st({min:Wt.posToVal(Wt.select.left,"x"),max:Wt.posToVal(Wt.select.left+Wt.select.width,"x"),bbox:{left:Wt.select.left,top:0,height:Wt.select.height,width:Wt.select.width}}),Ut=!1)};te.addHook("setSelect",Gt),te.setCursor({bind:{mousedown:(Wt,Mt,Yt)=>zt=>(Ut=zt.button===0&&(zt.metaKey||zt.ctrlKey),Yt(zt),null),mouseup:(Wt,Mt,Yt)=>zt=>(Ut&&Wt.select.width===0&&(Wt.select.left=Wt.cursor.left,Wt.select.height=Wt.bbox.height/window.devicePixelRatio),Yt(zt),null)}})},[te,Oe,Ct]);const vt=(0,A.useCallback)(({coords:Ut})=>{if(!Ee.current||!Ce||!Ut)return;const Gt=Ee.current.posToVal(Ut.plotCanvas.x,"x");Gt&&(st({min:Gt,max:Gt,bbox:{left:Ut.plotCanvas.x,top:0,height:Ce.height,width:0}}),ze(!0))},[Ce]);return A.createElement(A.Fragment,null,We&&rt&&Ce&&A.createElement(Bd,{selection:rt,onDismiss:Ot,onSave:Ot,data:N,timeZone:X,style:{position:"absolute",top:`${Ce.top}px`,left:`${Ce.left}px`,width:`${Ce.width}px`,height:`${Ce.height}px`}}),ge?ge({startAnnotating:vt}):null)};var Ci=e(12115),Tl=e(66243),Ol=e(77258),Uo=e(82410),Di=e(85419),xi=e(63418),Kr=e(8180),Nd=e(34719);const Il=({annotation:N,timeFormatter:X,canEdit:te,canDelete:ge,onEdit:Ee,onDelete:Ce})=>{const Oe=(0,ie.wW)(Ud),We=X(N.time),ze=X(N.timeEnd);let rt=N.text;const st=N.tags;let Ct="",Ot,vt,Ut=null;const Gt=A.createElement("span",{className:Oe.time},Boolean(N.isRegion)?`${We} - ${ze}`:We);if(N.login&&N.avatarUrl&&(Ot=A.createElement("img",{className:Oe.avatar,alt:"Annotation avatar",src:N.avatarUrl})),N.alertId!==void 0&&N.newState){const Wt=en.Z.getStateDisplayModel(N.newState);Ut=A.createElement("div",{className:Oe.alertState},A.createElement("i",{className:Wt.stateClass},Wt.text)),Ct=en.Z.getAlertAnnotationInfo(N)}else N.title&&(rt=N.title+"<br />"+(typeof rt=="string"?rt:""));return(te||ge)&&(vt=A.createElement("div",{className:Oe.editControls},te&&A.createElement(Kr.h,{name:"pen",size:"sm",onClick:Ee}),ge&&A.createElement(Kr.h,{name:"trash-alt",size:"sm",onClick:Ce}))),A.createElement("div",{className:Oe.wrapper},A.createElement("div",{className:Oe.header},A.createElement(jr.Lh,{justify:"space-between",align:"center",spacing:"md"},A.createElement("div",{className:Oe.meta},A.createElement("span",null,Ot,Ut),Gt),vt)),A.createElement("div",{className:Oe.body},rt&&A.createElement("div",{dangerouslySetInnerHTML:{__html:xi.QX.sanitize(rt)}}),Ct,A.createElement(A.Fragment,null,A.createElement(jr.Lh,{spacing:"xs",wrap:!0},st?.map((Wt,Mt)=>A.createElement(Nd.V,{name:Wt,key:`${Wt}-${Mt}`}))))))};Il.displayName="AnnotationTooltip";const Ud=N=>({wrapper:S.css`
      max-width: 400px;
    `,commentWrapper:S.css`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:S.css`
      padding: ${N.spacing(.5,1)};
      border-bottom: 1px solid ${N.colors.border.weak};
      font-size: ${N.typography.bodySmall.fontSize};
      display: flex;
    `,meta:S.css`
      display: flex;
      justify-content: space-between;
    `,editControls:S.css`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:S.css`
      border-radius: 50%;
      width: 16px;
      height: 16px;
      margin-right: ${N.spacing(1)};
    `,alertState:S.css`
      padding-right: ${N.spacing(1)};
      font-weight: ${N.typography.fontWeightMedium};
    `,time:S.css`
      color: ${N.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:S.css`
      padding: ${N.spacing(1)};

      a {
        color: ${N.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),wd=6,Rl={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function Wd({annotation:N,timeZone:X,width:te}){const{canAddAnnotations:ge,canEditAnnotations:Ee,canDeleteAnnotations:Ce,...Oe}=(0,An.R9)(),We=(0,ie.wW)(xl),ze=(0,ie.wW)(zs),[rt,st]=(0,A.useState)(!1),[Ct,Ot]=(0,A.useState)(!1),[vt,Ut]=(0,A.useState)(null),[Gt,Wt]=(0,A.useState)(null),[Mt,Yt]=(0,A.useState)(null),zt=(0,A.useRef)(),Xt=(0,No.D)(vt,Gt,Rl),cn=(0,No.D)(vt,Mt,Rl),on=(0,A.useCallback)(()=>{Ot(!0),st(!1)},[Ot,st]),mn=(0,A.useCallback)(()=>{Oe.onAnnotationDelete&&Oe.onAnnotationDelete(N.id)},[N,Oe]),Mn=(0,A.useCallback)(()=>{zt.current&&clearTimeout(zt.current),st(!0)},[st]),Pn=(0,A.useCallback)(()=>{zt.current&&clearTimeout(zt.current)},[]),Bn=(0,A.useCallback)(()=>{zt.current=setTimeout(()=>{st(!1)},100)},[st]),Rn=(0,A.useCallback)(Jn=>(0,Ol.dq)(Jn,{format:Uo.U6.fullDate,timeZone:X}),[X]),$n=(0,A.useCallback)(()=>A.createElement(Il,{annotation:N,timeFormatter:Rn,onEdit:on,onDelete:mn,canEdit:Ee(N.dashboardUID),canDelete:Ce(N.dashboardUID)}),[Ee,Ce,mn,on,Rn,N]),ha=Boolean(N.isRegion)&&te>wd;let Qn=`${te/2}px`,On=A.createElement("div",{className:We(N).markerTriangle,style:{left:Qn,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return ha&&(On=A.createElement("div",{className:We(N).markerBar,style:{width:`${te}px`,transform:"translate3d(0,-50%, 0)"}})),A.createElement(A.Fragment,null,A.createElement("div",{ref:Ut,onMouseEnter:Mn,onMouseLeave:Bn,className:ha?void 0:ze.markerWrapper,"data-testid":nt.wl.pages.Dashboard.Annotations.marker},On),rt&&A.createElement(fs.h_,null,A.createElement("div",{ref:Wt,style:Xt.styles.popper,...Xt.attributes.popper,className:ze.tooltip,onMouseEnter:Pn,onMouseLeave:Bn},$n())),Ct&&A.createElement(fs.h_,null,A.createElement(co,{onDismiss:()=>Ot(!1),onSave:()=>Ot(!1),timeFormatter:Rn,annotation:N,ref:Yt,style:cn.styles.popper,...cn.attributes.popper})))}const zs=N=>({markerWrapper:S.css`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:S.css`
      max-width: 400px;
    `,tooltip:S.css`
      ${(0,Di.getTooltipContainerStyles)(N)};
      padding: 0;
    `}),bi=({annotations:N,timeZone:X,config:te})=>{const ge=(0,ie.l4)(),Ee=(0,A.useRef)(),Ce=(0,A.useRef)();(0,A.useEffect)(()=>{const ze=[];for(const rt of N)ze.push(new Ci.U(rt));return Ce.current=ze,()=>{Ce.current=[]}},[N]),(0,A.useLayoutEffect)(()=>{te.addHook("init",ze=>{Ee.current=ze}),te.addHook("draw",ze=>{if(!Ce.current)return null;const rt=ze.ctx;if(!rt)return;rt.save(),rt.beginPath(),rt.rect(ze.bbox.left,ze.bbox.top,ze.bbox.width,ze.bbox.height),rt.clip();const st=(Ct,Ot)=>{rt.beginPath(),rt.lineWidth=2,rt.strokeStyle=Ot,rt.setLineDash([5,5]),rt.moveTo(Ct,ze.bbox.top),rt.lineTo(Ct,ze.bbox.top+ze.bbox.height),rt.stroke(),rt.closePath()};for(let Ct=0;Ct<Ce.current.length;Ct++){const Ot=Ce.current[Ct];for(let vt=0;vt<Ot.length;vt++){const Ut=Ot.get(vt);if(!Ut.time)continue;let Gt=ze.valToPos(Ut.time,"x",!0);const Wt=ge.visualization.getColorByName(Ut.color);if(st(Gt,Wt),Ut.isRegion&&Ut.timeEnd){let Mt=ze.valToPos(Ut.timeEnd,"x",!0);st(Mt,Wt),rt.fillStyle=so.alpha(Wt,.1),rt.rect(Gt,ze.bbox.top,Mt-Gt,ze.bbox.height),rt.fill()}}}rt.restore()})},[te,ge]);const Oe=(0,A.useCallback)((ze,rt)=>{const Ct=new Ci.U(ze).get(rt.fieldIndex);if(!Ct.time||!Ee.current)return;let Ot=Ee.current.valToPos(Ct.time,"x");return Ot<0&&(Ot=0),{x:Ot,y:Ee.current.bbox.height/window.devicePixelRatio+4}},[]),We=(0,A.useCallback)((ze,rt)=>{let st=0;const Ot=new Ci.U(ze).get(rt.fieldIndex);if(Boolean(Ot.isRegion)&&Ee.current){let Ut=Ee.current.valToPos(Ot.time,"x"),Gt=Ee.current.valToPos(Ot.timeEnd,"x");Ut<0&&(Ut=0),Gt>Ee.current.bbox.width/window.devicePixelRatio&&(Gt=Ee.current.bbox.width/window.devicePixelRatio),st=Gt-Ut}return A.createElement(Wd,{annotation:Ot,timeZone:X,width:st})},[X]);return A.createElement(Tl.T,{id:"annotations",config:te,events:N,renderEventMarker:We,mapEventToXYCoords:Oe})};var wo=e(65788),Fd=e(17650),$d=e(65987),Pr=e(14391),Hs=e(42044),uo=e(30909);const xo=({data:N,config:X,onClose:te,timeZone:ge,replaceVariables:Ee,...Ce})=>{const Oe=(0,A.useRef)(),[We,ze]=(0,A.useState)(null),[rt,st]=(0,A.useState)(null),[Ct,Ot]=(0,A.useState)(!1),vt=(0,A.useCallback)(()=>{Ot(!0)},[Ot]),Ut=(0,A.useCallback)(()=>{Ot(!1)},[Ot]),Gt=(0,A.useCallback)(()=>{(0,ao.Zp)("ContextMenuPlugin",!1,"clearing click selection"),st(null)},[st]);(0,A.useLayoutEffect)(()=>{let Mt;const Yt=zt=>{let Xt={viewport:{x:zt.clientX,y:zt.clientY},plotCanvas:{x:0,y:0}};Mt&&(Xt={...Xt,plotCanvas:{x:zt.clientX-Mt.left,y:zt.clientY-Mt.top}}),ze(Xt)};X.addHook("syncRect",(zt,Xt)=>{Mt=Xt}),X.addHook("init",zt=>{const Xt=zt.over;Oe.current=Xt||void 0,Oe.current?.addEventListener("mousedown",Yt),(0,ao.Zp)("ContextMenuPlugin",!1,"init");let cn=!1,on=Array.from(zt.root.querySelectorAll(".u-cursor-pt"));Oe.current?.addEventListener("mousedown",()=>{cn=!0}),Oe.current?.addEventListener("mousemove",()=>{cn=!1}),Oe.current?.addEventListener("mouseup",mn=>{if(!cn||mn.metaKey||mn.ctrlKey){st(null);return}cn=!0,mn.target instanceof HTMLElement&&(mn.target.classList.contains("u-cursor-pt")||((0,ao.Zp)("ContextMenuPlugin",!1,"canvas click"),st({seriesIdx:null,dataIdx:null}))),vt()}),on.length>0&&on.forEach((mn,Mn)=>{mn.addEventListener("click",()=>{const Pn=Mn+1,Bn=zt.cursor.idx;(0,ao.Zp)("ContextMenuPlugin",!1,Pn,Bn),st({seriesIdx:Pn,dataIdx:Bn??null})})})})},[X,vt,ze,st]);const Wt=(0,A.useMemo)(()=>Ce.defaultItems?Ce.defaultItems.map(Mt=>({...Mt,items:Mt.items.map(Yt=>({...Yt,onClick:zt=>{We&&Yt.onClick?.(zt,{coords:We})}}))})):[],[We,Ce.defaultItems]);return A.createElement(A.Fragment,null,A.createElement(wo.Global,{styles:wo.css`
        .uplot .u-cursor-pt {
          pointer-events: auto !important;
        }
      `}),Ct&&We&&A.createElement(Kd,{data:N,frames:Ce.frames,defaultItems:Wt,timeZone:ge,selection:{point:rt,coords:We},replaceVariables:Ee,onClose:()=>{Gt(),Ut(),te&&te()}}))},Kd=({selection:N,timeZone:X,defaultItems:te,replaceVariables:ge,data:Ee,...Ce})=>{const Oe=(0,A.useRef)(null),We=()=>{Ce.onClose&&Ce.onClose()};(0,Fd.Z)(Oe,()=>{We()});const ze=Ee.fields[0];if(!ze)return null;const rt=te?[...te]:[];let st=()=>null;if(N.point){const{seriesIdx:Ot,dataIdx:vt}=N.point,Ut=ze.display;if(Ot&&vt!==null){const Gt=Ee.fields[Ot],Wt=Gt.display(Gt.values[vt]);Gt.config.links&&Gt.config.links.length>0&&Gt.getLinks&&rt.push({items:Gt.getLinks({valueRowIndex:vt}).map(Yt=>({label:Yt.title,ariaLabel:Yt.title,url:Yt.href,target:Yt.target,icon:Yt.target==="_self"?"link":"external-link-alt",onClick:Yt.onClick}))}),st=()=>A.createElement($d.b,{timestamp:Ut(ze.values[vt]).text,displayValue:Wt,seriesColor:Wt.color,displayName:(0,It.CZ)(Gt,Ee,Ce.frames)})}}const Ct=()=>rt?.map((Ot,vt)=>A.createElement(Pr.k,{key:`${Ot.label}${vt}`,label:Ot.label},(Ot.items||[]).map(Ut=>A.createElement(Hs.s,{key:Ut.label,url:Ut.url,label:Ut.label,target:Ut.target,icon:Ut.icon,active:Ut.active,onClick:Ut.onClick}))));return A.createElement(uo.x,{renderMenuItems:Ct,renderHeader:st,x:N.coords.viewport.x,y:N.coords.viewport.y,onClose:We})};var ts=e(45576),Al=e(7211);const ka=({timeZone:N,dataFrame:X,dataFrameFieldIndex:te,config:ge,getFieldLinks:Ee,exemplarColor:Ce,clickedExemplarFieldIndex:Oe,setClickedExemplarFieldIndex:We})=>{const ze=(0,ie.wW)(yn),[rt,st]=(0,A.useState)(!1),[Ct,Ot]=(0,A.useState)(!1),[vt,Ut]=A.useState(null),[Gt,Wt]=A.useState(null),{styles:Mt,attributes:Yt}=(0,No.D)(vt,Gt,{modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top","left-start"]}}]}),zt=(0,A.useRef)();(0,A.useEffect)(()=>{Oe?.fieldIndex===te.fieldIndex&&Oe?.frameIndex===te.frameIndex||Ot(!1)},[Oe,te]);const Xt=()=>{const Bn=[A.createElement("rect",{fill:Ce,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),A.createElement("path",{fill:Ce,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),A.createElement("path",{fill:Ce,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),A.createElement("rect",{fill:Ce,key:"rectangle",width:"5",height:"5"}),A.createElement("path",{fill:Ce,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),A.createElement("path",{fill:Ce,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return Bn[te.frameIndex%Bn.length]},cn=(0,A.useCallback)(()=>{Oe===void 0&&(zt.current&&clearTimeout(zt.current),st(!0))},[st,Oe]),on=()=>{Ot(!0)},mn=(0,A.useCallback)(()=>{zt.current=setTimeout(()=>{st(!1)},150)},[st]),Mn=(0,A.useCallback)(()=>{const Bn=X.fields.find(Qn=>Qn.name==="traceID")||X.fields[0],Rn=[Bn,...X.fields.filter(Qn=>Bn!==Qn)],$n=Qn=>(0,Ol.dq)(Qn,{format:Uo.U6.fullDate,timeZone:N}),ha=()=>{Ot(!1),st(!1),We(void 0)};return A.createElement("div",{onMouseEnter:cn,onMouseLeave:mn,className:ze.tooltip,ref:Wt,style:Mt.popper,...Yt.popper},A.createElement("div",{className:ze.wrapper},Ct&&A.createElement(Al.o,{onClick:ha}),A.createElement("div",{className:ze.body},A.createElement("div",{className:ze.header},A.createElement("span",{className:ze.title},"Exemplars")),A.createElement("div",null,A.createElement("table",{className:ze.exemplarsTable},A.createElement("tbody",null,Rn.map((Qn,On)=>{const Jn=Qn.values[te.fieldIndex],oa=Qn.config.links?.length?Ee(Qn,te.fieldIndex):void 0;return A.createElement("tr",{key:On},A.createElement("td",{valign:"top"},Qn.name),A.createElement("td",null,A.createElement("div",{className:ze.valueWrapper},A.createElement("span",null,Qn.type===Tt.fS.time?$n(Jn):Jn),oa&&A.createElement(ts.Z,{links:oa}))))})))))))},[Yt.popper,X.fields,Ee,te,cn,mn,Mt.popper,ze,N,Ct,We]),Pn=ge.getSeries().find(Bn=>Bn.props.dataFrameFieldIndex?.frameIndex===te.frameIndex)?.props.lineColor;return A.createElement(A.Fragment,null,A.createElement("div",{ref:Ut,onClick:()=>{We(te),on()},onMouseEnter:cn,onMouseLeave:mn,className:ze.markerWrapper,"aria-label":nt.wl.components.DataSource.Prometheus.exemplarMarker},A.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:Pn},className:(0,S.cx)(ze.marble,(rt||Ct)&&ze.activeMarble)},Xt())),(rt||Ct)&&A.createElement(fs.h_,null,Mn()))},yn=N=>{const X=N.isDark?N.v1.palette.dark2:N.v1.palette.white,te=N.isDark?N.v1.palette.dark9:N.v1.palette.gray5,ge=N.isDark?N.v1.palette.black:N.v1.palette.white,Ee=N.isDark?N.v1.palette.dark3:N.v1.palette.gray6;return{markerWrapper:S.css`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:S.css`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${N.v1.palette.red};
      pointer-events: none;
    `,wrapper:S.css`
      background: ${X};
      border: 1px solid ${te};
      border-radius: ${N.shape.borderRadius(2)};
      box-shadow: 0 0 20px ${ge};
      padding: ${N.spacing(1)};
    `,exemplarsTable:S.css`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${N.components.panel.background};
      }

      tr {
        background-color: ${N.colors.background.primary};

        &:nth-child(even) {
          background-color: ${Ee};
        }
      }
    `,valueWrapper:S.css`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${N.spacing(1)};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:S.css`
      background: none;
      padding: 0;
      overflow-y: auto;
      max-height: 95vh;
    `,header:S.css`
      background: ${te};
      padding: 6px 10px;
      display: flex;
    `,title:S.css`
      font-weight: ${N.typography.fontWeightMedium};
      padding-right: ${N.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:S.css`
      font-weight: ${N.typography.fontWeightMedium};
      border-radius: ${N.shape.borderRadius(2)};
      overflow: hidden;
    `,marble:S.css`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:S.css`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},Mi=({exemplars:N,timeZone:X,getFieldLinks:te,config:ge,visibleSeries:Ee})=>{const Ce=(0,A.useRef)(),[Oe,We]=(0,A.useState)();(0,A.useLayoutEffect)(()=>{ge.addHook("init",st=>{Ce.current=st})},[ge]);const ze=(0,A.useCallback)((st,Ct)=>{const Ot=st.fields.find(Yt=>Yt.name===Tt.Ls),vt=st.fields.find(Yt=>Yt.name===Tt.M5);if(!Ot||!vt||!Ce.current)return;const Ut=Object.keys(Ce.current.scales).find(Yt=>!["x","y"].some(zt=>zt===Yt))??za.j,Gt=Ce.current.scales[Ut].min,Wt=Ce.current.scales[Ut].max;let Mt=vt.values[Ct.fieldIndex];return Gt!=null&&Mt<Gt&&(Mt=Gt),Wt!=null&&Mt>Wt&&(Mt=Wt),{x:Ce.current.valToPos(Ot.values[Ct.fieldIndex],"x"),y:Ce.current.valToPos(Mt,Ut)}},[]),rt=(0,A.useCallback)((st,Ct)=>{const Ot=Ee!==void 0?Hd(Ee,st,Ct):!0,vt=Ee!==void 0?zd(st,Ct,Ee):void 0;return Ot?A.createElement(ka,{setClickedExemplarFieldIndex:We,clickedExemplarFieldIndex:Oe,timeZone:X,getFieldLinks:te,dataFrame:st,dataFrameFieldIndex:Ct,config:ge,exemplarColor:vt}):A.createElement(A.Fragment,null)},[ge,X,te,Ee,We,Oe]);return A.createElement(Tl.T,{config:ge,id:"exemplars",events:N,renderEventMarker:rt,mapEventToXYCoords:ze})},Vd=(N,X)=>{const te=N.series.filter(Ee=>Ee.props.show),ge=[];return X?.length&&te.forEach(Ee=>{const Ce=Ee.props?.dataFrameFieldIndex?.frameIndex,Oe=Ee.props?.dataFrameFieldIndex?.fieldIndex;if(Ce!==void 0&&Oe!==void 0){const We=X[Ce]?.fields[Oe];We?.labels&&ge.push({labels:We.labels,color:Ee.props?.lineColor??""})}}),{labels:ge,totalSeriesCount:N.series.length}},zd=(N,X,te)=>{let ge;return te.labels.some(Ee=>{const Ce=Object.keys(Ee.labels),Oe=N.fields.filter(We=>Ce.find(ze=>ze===We.name));return Oe.length&&Oe.every((ze,rt,st)=>{const Ct=ze.values[X.fieldIndex];return Ee.labels[ze.name]===Ct})?(ge=Ee.color,!0):!1}),ge},Hd=(N,X,te)=>{let ge=!1;return N.labels.length===N.totalSeriesCount?ge=!0:N.labels.some(Ee=>{const Ce=Object.keys(Ee.labels);if(Object.keys(Ee.labels).length===0)ge=!0;else{const Oe=X.fields.filter(We=>Ce.find(ze=>ze===We.name));Oe.length&&(ge=N.labels.some(We=>Object.keys(We.labels).every(ze=>{const rt=We.labels[ze];return Oe.find(st=>st.values[te.fieldIndex]===rt)})))}return ge}),ge},Ar=({config:N,onChangeTimeRange:X})=>{const te=(0,A.useRef)(),[ge,Ee]=(0,A.useState)([]),[Ce,Oe]=(0,A.useState)();if((0,A.useLayoutEffect)(()=>{N.addHook("init",vt=>{te.current=vt}),N.addHook("setScale",vt=>{Ee(vt.data?.[0]??[]),Oe(vt.scales.x??void 0)})},[N]),ge.length<2||!X||!Ce||!Ce.time||!Ce.min||!Ce.max)return null;let We=0,ze=ge.length-1;for(;We<=ze&&ge[We]==null;)We++;for(;ze>=0&&ge[ze]==null;)ze--;const rt=ge[We],st=ge[ze],Ct=Ce.min,Ot=Ce.max;return rt==null||st==null||rt<=Ot&&st>=Ct?null:A.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},A.createElement("div",null,A.createElement("div",null,"Data outside time range"),A.createElement(De.zx,{onClick:vt=>X({from:rt,to:st}),variant:"secondary","data-testid":"time-series-zoom-to-data"},"Zoom to data")))};Ar.displayName="OutsideRangePlugin";var Si=e(86979),Qr=e(53004),Ll=e.n(Qr);const Wo=({step:N,y:X,dragBounds:te,mapPositionToValue:ge,formatValue:Ee,onChange:Ce})=>{const Oe=(0,ie.l4)();let We=X,ze="none";X<(te.top??0)&&(ze="top"),X>(te.bottom??0)+22&&(ze="bottom"),ze==="bottom"&&(We=te.bottom??X),ze==="top"&&(We=te.top??X);const rt=typeof Ce!="function",st=(0,ie.wW)(Ut=>kd(Ut,N,ze,rt)),[Ct,Ot]=(0,A.useState)(N.value),vt=(0,A.useMemo)(()=>Oe.colors.getContrastText(Oe.visualization.getColorByName(N.color)),[N.color,Oe]);return A.createElement(Ll(),{axis:"y",grid:[1,1],disabled:rt,onStop:rt?w.noop:(Ut,Gt)=>(Ce(ge(Gt.lastY)),!1),onDrag:(Ut,Gt)=>Ot(ge(Gt.lastY)),position:{x:0,y:We},bounds:te},A.createElement("div",{className:st.handle,style:{color:vt}},A.createElement("span",{className:st.handleText},Ee(Ct))))};Wo.displayName="ThresholdDragHandle";const kd=(N,X,te,ge)=>{const Ee=N.visualization.getColorByName(X.color),Ce=Fo(te),Oe=te!=="none";return{handle:S.css`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${Ee};
      cursor: ${ge?"initial":"grab"};
      border-top-right-radius: ${N.shape.borderRadius(1)};
      border-bottom-right-radius: ${N.shape.borderRadius(1)};
      ${Oe&&S.css`
        margin-top: 0;
        border-radius: ${N.shape.borderRadius(1)};
      `}
      background: ${Ee};
      font-size: ${N.typography.bodySmall.fontSize};
      &:before {
        ${Ce};
      }
    `,handleText:S.css`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function Fo(N){const X=N==="none",te=ge=>S.css`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${ge}px;
    border-right-color: inherit;
    border-top: ${ge}px solid transparent;
    border-bottom: ${ge}px solid transparent;
  `;return X?S.css`
      ${te(9)};
      left: -9px;
    `:N==="top"?S.css`
      ${te(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:N==="bottom"?S.css`
      ${te(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const Bl=60,$o=({config:N,fieldConfig:X,onThresholdsChange:te})=>{const ge=(0,A.useRef)(),[Ee,Ce]=(0,A.useState)(0);(0,A.useLayoutEffect)(()=>{N.setPadding([0,Bl,0,0]),N.addHook("init",We=>{ge.current=We}),N.addHook("draw",()=>{Ce(We=>We+1)})},[N]);const Oe=(0,A.useMemo)(()=>{const We=ge.current;if(!We)return null;const ze=X.defaults.thresholds;if(!ze)return null;const rt=(0,Si.z)(X.defaults),st=X.defaults.decimals,Ct=[];for(let Ot=0;Ot<ze.steps.length;Ot++){const vt=ze.steps[Ot],Ut=We.valToPos(vt.value,rt);if(Number.isNaN(Ut)||!Number.isFinite(Ut))continue;const Gt=We.bbox.height/window.devicePixelRatio,Mt=typeof te=="function"?zt=>{const Xt=[...ze.steps.slice(0,Ot),...ze.steps.slice(Ot+1),{...ze.steps[Ot],value:zt}].sort((cn,on)=>cn.value-on.value);te({...ze,steps:Xt})}:void 0,Yt=A.createElement(Wo,{key:`${vt.value}-${Ot}`,step:vt,y:Ut,dragBounds:{top:0,bottom:Gt},mapPositionToValue:zt=>We.posToVal(zt,rt),formatValue:zt=>(0,Ua.Cf)(rt)(zt,st).text,onChange:Mt});Ct.push(Yt)}return Ct},[Ee,X,te]);return ge.current?A.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(ge.current.bbox.left+ge.current.bbox.width)/window.devicePixelRatio}px`,top:`${ge.current.bbox.top/window.devicePixelRatio}px`,width:`${Bl}px`,height:`${ge.current.bbox.height/window.devicePixelRatio}px`}},Oe):null};$o.displayName="ThresholdControlsPlugin";var Nl=e(88971),Ul=e(49052),_d=e(45778),Gd=e(45389);function Ti(N,X,te,ge){if(!N?.length)return null;let Ee=ge!=null;ge!=null&&ge>0&&(N=[{...N[0],fields:[N[0].fields[ge],...N[0].fields.filter((We,ze)=>ze!==ge)]}]);for(let We of N)for(let ze of We.fields)ze.type===Tt.fS.time&&typeof ze.values[0]!="number"&&(ze.values=(0,Ul.p8)(ze,{destinationType:Tt.fS.time}).values);let Ce;const Oe=[];for(let We of N){const ze=[];let rt=!1,st=!1,Ct=Ee?We:(0,_d.w)({frame:We,refFieldPseudoMin:te?.from.valueOf(),refFieldPseudoMax:te?.to.valueOf()});const Ot=(0,Gd.I)(Ct).fields;for(let vt=0;vt<Ot?.length;vt++){const Ut=Ot[vt];switch(Ut.type){case Tt.fS.time:rt=!0,ze.push(Ut);break;case Tt.fS.number:st=Ee?vt>0:!0,Ce={...Ut,values:Ut.values.map(Mt=>Number.isFinite(Mt)||Mt==null?Mt:null)},ze.push(Ce);break;case Tt.fS.string:Ce={...Ut,values:Ut.values},ze.push(Ce);break;case Tt.fS.boolean:st=!0;const Gt=Ut.config?.custom??{},Wt={...Ut.config,max:1,min:0,custom:Gt};Gt.lineInterpolation!==qe.KC.StepBefore&&(Gt.lineInterpolation=qe.KC.StepAfter),Ce={...Ut,config:Wt,type:Tt.fS.number,values:Ut.values.map(Mt=>Mt==null?Mt:Boolean(Mt)?1:0)},(0,Ua.br)(Wt.unit)||(Wt.unit="bool",Ce.display=(0,Ls.U_)({field:Ce,theme:X})),ze.push(Ce);break}}(Ee||rt)&&st&&Oe.push({...We,length:Ct.length,fields:ze})}return Oe.length?(Yd(Oe,X,0),Oe):null}const Yd=(N,X,te)=>{let ge=0;N.forEach(Ee=>{Ee.fields.forEach((Ce,Oe)=>{Oe!==te&&(Ce.type===Tt.fS.number||Ce.type===Tt.fS.boolean)&&(Ce.state={...Ce.state,seriesIndex:ge++},Ce.display=(0,Ls.U_)({field:Ce,theme:X}))})})};function Oi(N,X){return!N||!N.length?[X]:N.map(te=>te?.length?te:X)}function wl(N,X,te,ge){return N.fields.forEach(Ee=>{if(Ee.state?.origin?.frameIndex===void 0||X[Ee.state?.origin?.frameIndex]===void 0)return;const Ce=[];for(const We of X[Ee.state?.origin?.frameIndex].fields)if(We.type===Tt.fS.string)if(Ee.values instanceof Nl.o){const ze={...We};ze.values=new Nl.o(We.values,Ee.values.getOrderArray()),Ce.push(ze)}else Ce.push(We);const Oe={fields:[...N.fields,...Ce],length:N.fields.length+Ce.length};Ee.getLinks=(0,lo.oB)(Oe,Ee,Ee.state.scopedVars,te,ge)}),N}const pg=Object.freeze([1,0]);var Js=(N=>(N.CandlesVolume="candles+volume",N.Candles="candles",N.Volume="volume",N))(Js||{}),Ko=(N=>(N.Candles="candles",N.OHLCBars="ohlcbars",N))(Ko||{}),Vr=(N=>(N.OpenClose="open-close",N.CloseClose="close-close",N))(Vr||{});const Zr={up:"green",down:"red",flat:"gray"},zr={mode:"candles+volume",candleStyle:"candles",colorStrategy:"open-close",colors:Zr,fields:{},legend:{displayMode:qe.jK.List,showLegend:!0,placement:"bottom",calcs:[]},includeAllFields:!1},Jr={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function jd(N,X,te){const ge=(0,ar.findField)(N,te[X.key]);if(!ge)for(const Ee of N.fields){const Ce=(0,It.CZ)(Ee,N).toLowerCase();if(X.defaults.includes(Ce)||X.defaults.includes(Ee.name))return Ee}return ge}function Xr(N,X,te,ge){if(!N?.length)return null;const Ee=X.fields??{},Ce=N.length===1?(0,yr.Y3)(N[0],N[0].fields.findIndex(vt=>vt.type===Tt.fS.time)):(0,yr._9)({frames:N});if(!Ce?.length)return null;const Oe={aligned:Ce,frame:Ce,names:{}},We=Ti([Ce],te,ge);if(!We)return null;const ze=Oe.frame=We[0],rt=ze.fields.findIndex(vt=>vt.type===Tt.fS.time);if(rt<0)return null;const st=new Set;for(const vt of Object.values(Jr)){const Ut=jd(ze,vt,Ee);Ut&&(Oe[vt.key]=Ut,st.add(Ut))}if(!Oe.open&&!Oe.close&&(Oe.open=ze.fields.find(vt=>vt.type===Tt.fS.number),Oe.open&&st.add(Oe.open)),Oe.open&&!Oe.close&&!Ee.close){const vt=Oe.open.values.slice(1);vt.push(vt[vt.length-1]),Oe.close={...Oe.open,values:vt,name:"Next open",state:void 0},st.add(Oe.close),ze.fields.push(Oe.close),Oe.autoOpenClose=!0}if(Oe.close&&!Oe.open&&!Ee.open){const vt=Oe.close.values.slice();vt.unshift(vt[0]),vt.length=ze.length,Oe.open={...Oe.close,values:vt,name:"Previous close",state:void 0},st.add(Oe.open),ze.fields.push(Oe.open),Oe.autoOpenClose=!0}!Oe.high&&!Ee.high&&(Oe.high=Oe.open),!Oe.low&&!Ee.low&&(Oe.low=Oe.open),X.mode===Js.Volume?(Oe.high&&(Oe.high!==Oe.open&&st.delete(Oe.high),Oe.high=void 0),Oe.low&&(Oe.low!==Oe.open&&st.delete(Oe.low),Oe.low=void 0)):X.mode===Js.Candles&&Oe.volume&&(st.delete(Oe.volume),Oe.volume=void 0);for(const vt of Object.values(Jr)){const Ut=Oe[vt.key];Ut&&(Oe.names[vt.key]=(0,It.CZ)(Ut,Oe.frame))}const Ct=ze.fields[rt],Ot=[Ct];X.includeAllFields?Ot.push(...ze.fields.filter(vt=>vt!==Ct)):Ot.push(...st),Oe.frame={...Oe.frame,fields:Ot};for(let vt=0;vt<Oe.frame.fields.length;vt++){const Ut=Oe.frame.fields[vt];Ut.state={...Ut.state,seriesIndex:vt-1,origin:{fieldIndex:vt,frameIndex:0}}}return Oe}const{alpha:Ii}=so;function $a(N){let{mode:X,candleStyle:te,fields:ge,colorStrategy:Ee,upColor:Ce,downColor:Oe,flatColor:We,volumeAlpha:ze,flatAsUp:rt=!0}=N;const st=X!==Js.Volume&&ge.high!=null&&ge.low!=null,Ct=st&&te===Ko.Candles,Ot=X!==Js.Candles&&ge.volume!=null;function vt(Xt,cn,on,mn,Mn){return Xt>0?on:Xt<0?mn:Mn?on:cn}let Ut=0,Gt=ge.open,Wt=ge.high,Mt=ge.low,Yt=ge.close,zt=ge.volume;return Xt=>{let cn,on,mn,Mn,Pn,Bn;st&&(mn=new Path2D,on=new Path2D,cn=new Path2D),Ot&&(Mn=new Path2D,Pn=new Path2D,Bn=new Path2D);let Rn=new Path2D,$n=Xt.ctx,ha=Xt.data[Ut],Qn=Xt.data[Gt],On=Xt.data[Yt],Jn=st?Xt.data[Wt]:null,oa=st?Xt.data[Mt]:null,Oa=Ot?Xt.data[zt]:null,ja=zt!=null?Math.round(Xt.valToPos(0,Xt.series[zt].scale,!0)):null,[Ka,Va]=Xt.series[0].idxs,Kn=Xt.data[0],Sn=Qn,Vn=Xt.bbox.width;if(Kn.length>1){let aa=null;for(let Tn=0,Ln=1/0;Tn<Kn.length;Tn++)if(Sn[Tn]!==void 0){if(aa!=null){let Nn=Math.abs(Kn[Tn]-Kn[aa]);Nn<Ln&&(Ln=Nn,Vn=Math.abs(Xt.valToPos(Kn[Tn],"x",!0)-Xt.valToPos(Kn[aa],"x",!0)))}aa=Tn}}let Zn=Math.round(.6*Vn),Ia=2,ma=2;Zn<=12&&(Ia=ma=1);let La=Math.floor(Zn/2);for(let aa=Ka;aa<=Va;aa++){let Tn=Math.round(Xt.valToPos(ha[aa],"x",!0)),Ln=aa===Ka?0:Math.sign(On[aa]-On[aa-1]),Nn=Math.sign(On[aa]-Qn[aa]);if(Ot){let Yn=vt(Ee===Vr.CloseClose?Ln:Nn,Bn,Pn,Mn,aa===Ka&&Vr.CloseClose?!1:rt),Xn=Math.round(Xt.valToPos(Oa[aa],Xt.series[zt].scale,!0));Yn.rect(Tn-La,Xn,Zn,ja-Xn)}if(st){let Yn=vt(Ee===Vr.CloseClose?Ln:Nn,mn,on,cn,aa===Ka&&Vr.CloseClose?!1:rt),Xn=Math.round(Xt.valToPos(Jn[aa],Xt.series[Wt].scale,!0)),fa=Math.round(Xt.valToPos(oa[aa],Xt.series[Mt].scale,!0));Yn.rect(Tn-Math.floor(Ia/2),Xn,Ia,fa-Xn);let pa=Math.round(Xt.valToPos(Qn[aa],Xt.series[Gt].scale,!0)),Cs=Math.round(Xt.valToPos(On[aa],Xt.series[Yt].scale,!0));if(Ct){let gs=Math.min(pa,Cs),Ns=Math.max(pa,Cs),cs=Math.max(1,Ns-gs);Yn.rect(Tn-La,gs,Zn,cs),Ee===Vr.CloseClose&&Nn>=0&&cs>ma*2&&Rn.rect(Tn-La+ma,gs+ma,Zn-ma*2,cs-ma*2)}else Yn.rect(Tn-La,pa,La,Ia),Yn.rect(Tn,Cs,La,Ia)}}$n.save(),$n.rect(Xt.bbox.left,Xt.bbox.top,Xt.bbox.width,Xt.bbox.height),$n.clip(),Ot&&($n.fillStyle=Ii(Ce,ze),$n.fill(Pn),$n.fillStyle=Ii(Oe,ze),$n.fill(Mn),$n.fillStyle=Ii(We,ze),$n.fill(Bn)),st&&($n.fillStyle=Ce,$n.fill(on),$n.fillStyle=Oe,$n.fill(cn),$n.fillStyle=We,$n.fill(mn),$n.globalCompositeOperation="destination-out",$n.fill(Rn)),$n.restore()}}const Qd=({data:N,id:X,timeRange:te,timeZone:ge,width:Ee,height:Ce,options:Oe,fieldConfig:We,onChangeTimeRange:ze,replaceVariables:rt})=>{const{sync:st,canAddAnnotations:Ct,onThresholdsChange:Ot,canEditThresholds:vt,showThresholds:Ut,onSplitOpen:Gt}=(0,An.R9)(),Wt=(Mn,Pn)=>(0,Co.a_)({field:Mn,rowIndex:Pn,splitOpenFn:Gt,range:te}),Mt=(0,ie.l4)(),Yt=(0,A.useMemo)(()=>Xr(N.series,Oe,Mt,te),[N.series,Oe,Mt,te]),{renderers:zt,tweakScale:Xt,tweakAxis:cn,shouldRenderPrice:on}=(0,A.useMemo)(()=>{let Mn=(ma,La)=>ma,Pn=(ma,La)=>ma,Bn={renderers:[],tweakScale:Mn,tweakAxis:Pn,shouldRenderPrice:!1};if(!Yt)return Bn;const Rn=Yt.names;if(!Object.keys(Rn).length)return Bn;const{mode:$n,candleStyle:ha,colorStrategy:Qn}=Oe,On={...Zr,...Oe.colors};let{open:Jn,high:oa,low:Oa,close:ja,volume:Ka}=Rn;if(Jn==null||ja==null)return Bn;let Va=.5,Kn=-1,Sn=!1;if(Ka!=null&&$n!==Js.Candles){let ma=Yt.volume;if(ma!=null){Sn=!0;let{fillOpacity:La}=ma.config.custom;La&&(Va=La/100),$n!==Js.Volume&&(ma.config={...ma.config},ma.config.unit="short",ma.display=(0,Ls.U_)({field:ma,theme:Ve.vc.theme2}),Pn=(aa,Tn)=>{if(Tn.name===Yt.volume?.name){let Ln=(Nn,Yn)=>{let Xn=[],fa=Nn.series[Kn].max;for(let pa=0;pa<Yn.length&&(Xn.push(Yn[pa]),!(Yn[pa]>fa));pa++);return Xn};aa.space=20,aa.filter=Ln,aa.ticks={...aa.ticks,filter:Ln}}return aa},Mn=(aa,Tn)=>(Tn.name===Yt.volume?.name&&(aa.range=(Ln,Nn,Yn)=>[0,Yn*7]),aa))}}let Vn=$n!==Js.Volume&&oa!=null&&Oa!=null;if(!Vn&&!Sn)return Bn;let Zn={},Ia=[];return Vn?Zn={open:Jn,high:oa,low:Oa,close:ja}:Ia.push(Jn,ja),Sn&&(Zn.volume=Ka,Zn.open=Jn,Zn.close=ja),{shouldRenderPrice:Vn,renderers:[{fieldMap:Zn,indicesOnly:Ia,init:(ma,La)=>{Kn=La.volume,ma.addHook("drawAxes",$a({mode:$n,fields:La,upColor:Ve.vc.theme2.visualization.getColorByName(On.up),downColor:Ve.vc.theme2.visualization.getColorByName(On.down),flatColor:Ve.vc.theme2.visualization.getColorByName(On.flat),volumeAlpha:Va,colorStrategy:Qn,candleStyle:ha,flatAsUp:!0}))}}],tweakScale:Mn,tweakAxis:Pn}},[Oe,N.structureRev,N.series.length]);if(!Yt)return A.createElement(Ta.Z,{panelId:X,fieldConfig:We,data:N,needsTimeField:!0,needsNumberField:!0});if(on)for(let Mn in zt[0].fieldMap){let Pn=Yt[Mn];Pn.config={...Pn.config,custom:{...Pn.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const mn=Boolean(Ct&&Ct());return A.createElement(yi.p,{frames:[Yt.frame],structureRev:N.structureRev,timeRange:te,timeZone:ge,width:Ee,height:Ce,legend:Oe.legend,renderers:zt,tweakAxis:cn,tweakScale:Xt,options:Oe},(Mn,Pn)=>(Pn.fields.forEach(Bn=>{Bn.getLinks=(0,lo.oB)(Pn,Bn,Bn.state.scopedVars,rt,ge)}),A.createElement(A.Fragment,null,A.createElement(Bo.R,{config:Mn,onZoom:ze}),A.createElement(Er.i,{data:Pn,config:Mn,mode:qe.f3.Multi,sync:st,timeZone:ge}),N.annotations&&A.createElement(bi,{annotations:N.annotations,config:Mn,timeZone:ge}),mn?A.createElement(Do,{data:Pn,timeZone:ge,config:Mn},({startAnnotating:Bn})=>A.createElement(xo,{data:Pn,config:Mn,timeZone:ge,replaceVariables:rt,defaultItems:mn?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Rn,$n)=>{$n&&Bn({coords:$n.coords})}}]}]:[]})):A.createElement(xo,{data:Pn,config:Mn,timeZone:ge,replaceVariables:rt,defaultItems:[]}),N.annotations&&A.createElement(Mi,{config:Mn,exemplars:N.annotations,timeZone:ge,getFieldLinks:Wt}),(vt&&Ot||Ut)&&A.createElement($o,{config:Mn,fieldConfig:We,onThresholdsChange:vt?Ot:void 0}),A.createElement(Ar,{config:Mn,onChangeTimeRange:ze}))))};class Zd{getSuggestionsForData(X){const{dataSummary:te}=X;if(!X.data?.series||!te.hasData||te.timeFieldCount<1||te.numberFieldCount<2||te.numberFieldCount>10)return;const ge=Xr(X.data.series,zr,be.v.theme2);if(!ge||ge.open===ge.high&&ge.open===ge.low)return;X.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Ra.y.Candlestick,options:zr,fieldConfig:{defaults:{},overrides:[]},score:ge.autoOpenClose?$t._.Good:$t._.Best})}}const Ts=[{label:"Candles",value:Js.Candles},{label:"Volume",value:Js.Volume},{label:"Both",value:Js.CandlesVolume}],Jd=[{label:"Candles",value:Ko.Candles},{label:"OHLC Bars",value:Ko.OHLCBars}],Xd=[{label:"Since Open",value:Vr.OpenClose},{label:"Since Prior Close",value:Vr.CloseClose}],qd=N=>N.type===Tt.fS.number;function Vo(N,X,te){let ge="Auto ";if(te){const Ee=te[X.key];Ee?.config?(ge+="= "+(0,It.CZ)(Ee),Ee===te?.open&&X.key!=="open"&&(ge+=` (${X.defaults.join(",")})`)):ge+=`(${X.defaults.join(",")})`}N.addFieldNamePicker({path:`fields.${X.key}`,name:X.name,description:X.description,settings:{filter:qd,placeholderText:ge}})}const eu=new de.c(Qd).useFieldConfig((0,xr.F)(xr.r)).setPanelOptions((N,X)=>{const te=X.options??zr,ge=Xr(X.data,te,be.v.theme2);N.addRadio({path:"mode",name:"Mode",description:"",defaultValue:zr.mode,settings:{options:Ts}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:zr.candleStyle,settings:{options:Jd},showIf:Ee=>Ee.mode!==Js.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:zr.colorStrategy,settings:{options:Xd}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:Zr.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:Zr.down}),Vo(N,Jr.open,ge),te.mode!==Js.Volume&&(Vo(N,Jr.high,ge),Vo(N,Jr.low,ge)),Vo(N,Jr.close,ge),te.mode!==Js.Candles&&Vo(N,Jr.volume,ge),N.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:zr.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),Gn.J(N)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new Zd);var Ri=e(49187),tu=e(61962),Wl=e(19349),Fl=e(69155);const nu=N=>({dashlistSectionHeader:S.css`
    padding: ${N.spacing(.25,1)};
    margin-right: ${N.spacing(1)};
  `,dashlistSection:S.css`
    margin-bottom: ${N.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:S.css`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${N.colors.border.weak};
    margin-right: ${N.spacing(1)};
    padding: ${N.spacing(1)};

    &:hover {
      a {
        color: ${N.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistStar:S.css`
    align-self: center;
    margin-right: 0px;
    color: ${N.colors.secondary.text};
    z-index: 1;
  `,dashlistFolder:S.css`
    color: ${N.colors.text.secondary};
    font-size: ${N.typography.bodySmall.fontSize};
    line-height: ${N.typography.body.lineHeight};
  `,dashlistTitle:S.css`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:S.css`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:S.css`
    position: relative;
    list-style: none;
  `,gridContainer:S.css`
    display: grid;
    gap: ${N.spacing(1)};
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    list-style: none;
    margin-bottom: ${N.spacing(1)};
  `});async function au(N,X){let te=Promise.resolve([]);if(N.showStarred){const st={limit:N.maxItems,starred:"true"};te=(0,Ie.i)().search(st)}let ge=Promise.resolve([]),Ee=[];if(N.showRecentlyViewed){let st=await Ke.Z.getDashboardOpened();Ee=(0,w.take)(st,N.maxItems),ge=(0,Ie.i)().search({dashboardUIDs:Ee,limit:N.maxItems})}let Ce=Promise.resolve([]);if(N.showSearch){const st={limit:N.maxItems,query:X(N.query,{},"text"),folderIds:N.folderId,tag:N.tags.map(Ct=>X(Ct,{},"text")),type:"dash-db"};Ce=(0,Ie.i)().search(st)}const[Oe,We,ze]=await Promise.all([te,Ce,ge]);let rt=new Map;for(const st of Ee){const Ct=ze.find(Ot=>Ot.uid===st);Ct&&rt.set(st,{...Ct,isRecent:!0})}return We.forEach(st=>{st.uid&&(rt.has(st.uid)?rt.get(st.uid).isSearchResult=!0:rt.set(st.uid,{...st,isSearchResult:!0}))}),Oe.forEach(st=>{st.uid&&(rt.has(st.uid)?rt.get(st.uid).isStarred=!0:rt.set(st.uid,{...st,isStarred:!0}))}),rt}function su(N){const[X,te]=(0,A.useState)(new Map),ge=(0,ut.useDispatch)();(0,A.useEffect)(()=>{au(N.options,N.replaceVariables).then(Gt=>{te(Gt)})},[N.options,N.replaceVariables,N.renderCounter]);const Ee=async(Gt,Wt)=>{const{uid:Mt,title:Yt,url:zt}=Wt;Gt.preventDefault(),Gt.stopPropagation();const Xt=await(0,sn.h4)().starDashboard(Wt.uid,Wt.isStarred),cn=new Map(X);cn.set(Wt?.uid??"",{...Wt,isStarred:Xt}),te(cn),ge((0,tu.OQ)({id:Mt??"",title:Yt,url:zt,isStarred:Xt}))},[Ce,Oe,We]=(0,A.useMemo)(()=>{const Gt=[...X.values()];return[Gt.filter(Wt=>Wt.isStarred).sort((Wt,Mt)=>Wt.title.localeCompare(Mt.title)),Gt.filter(Wt=>Wt.isRecent),Gt.filter(Wt=>Wt.isSearchResult).sort((Wt,Mt)=>Wt.title.localeCompare(Mt.title))]},[X]),{showStarred:ze,showRecentlyViewed:rt,showHeadings:st,showSearch:Ct}=N.options,Ot=[{header:"Starred dashboards",dashboards:Ce,show:ze},{header:"Recently viewed dashboards",dashboards:Oe,show:rt},{header:"Search",dashboards:We,show:Ct}],vt=(0,ie.wW)(nu),Ut=Gt=>A.createElement("ul",null,Gt.map(Wt=>{let Mt=Wt.url,Yt={};if(N.options.keepTime){const zt=(0,Wl.$t)().timeRangeForUrl();Yt.from=zt.from,Yt.to=zt.to}return N.options.includeVars&&(Yt={...Yt,...(0,Fl.c)()}),Mt=Ri.Cj.appendQueryToUrl(Mt,Ri.Cj.toUrlParams(Yt)),Mt=(0,Ve.iE)().disableSanitizeHtml?Mt:xi.QX.sanitizeUrl(Mt),A.createElement("li",{className:vt.dashlistItem,key:`dash-${Wt.uid}`},A.createElement("div",{className:vt.dashlistLink},A.createElement("div",{className:vt.dashlistLinkBody},A.createElement("a",{className:vt.dashlistTitle,href:Mt},Wt.title),Wt.folderTitle&&A.createElement("div",{className:vt.dashlistFolder},Wt.folderTitle)),A.createElement(ru,{"aria-label":`Star dashboard "${Wt.title}".`,className:vt.dashlistStar,enabled:{name:"favorite",type:"mono"},disabled:{name:"star",type:"default"},checked:Wt.isStarred,onClick:zt=>Ee(zt,Wt)})))}));return A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Ot.map(({show:Gt,header:Wt,dashboards:Mt},Yt)=>Gt&&A.createElement("div",{className:vt.dashlistSection,key:`dash-group-${Yt}`},st&&A.createElement("h6",{className:vt.dashlistSectionHeader},Wt),Ut(Mt))))}function ru({enabled:N,disabled:X,checked:te,onClick:ge,className:Ee,"aria-label":Ce,...Oe}){const We=(0,A.useCallback)(Ct=>{Ct.preventDefault(),Ct.stopPropagation(),ge?.(Ct)},[ge]),rt={...Oe,...te?N:X},st=(0,ie.wW)(ou);return A.createElement("label",{className:st.wrapper},A.createElement("input",{type:"checkbox",defaultChecked:te,onClick:We,className:st.checkBox,"aria-label":Ce}),A.createElement(Qt.J,{className:(0,S.cx)(st.icon,Ee),...rt}))}const ou=(0,jt.B)(N=>({wrapper:(0,S.css)({display:"flex",alignSelf:"center",cursor:"pointer",zIndex:1}),checkBox:(0,S.css)({appearance:"none","&:focus-visible + *":{...(0,Di.getFocusStyles)(N),borderRadius:N.shape.borderRadius(1)}}),icon:(0,S.css)({marginBottom:0,verticalAlign:"baseline",display:"flex"})})),hg=Object.freeze([0,0]),Lr={includeVars:!1,keepTime:!1,maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},iu=new de.c(su).setPanelOptions(N=>{N.addBooleanSwitch({path:"keepTime",name:"Include current time range",defaultValue:Lr.keepTime}).addBooleanSwitch({path:"includeVars",name:"Include current template variable values",defaultValue:Lr.includeVars}).addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:Lr.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:Lr.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:Lr.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:Lr.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:Lr.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:Lr.query}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:void 0,editor:function({value:te,onChange:ge}){return A.createElement(Vt,{initialFolderId:te,onChange:Ee=>ge(Ee?.id),extraFolders:[Bt,Ft]})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:Lr.tags,editor(X){return A.createElement(je.B,{tags:X.value,onChange:X.onChange})}})}).setMigrationHandler(N=>{const X={showStarred:N.options.showStarred??N.starred,showRecentlyViewed:N.options.showRecentlyViewed??N.recent,showSearch:N.options.showSearch??N.search,showHeadings:N.options.showHeadings??N.headings,maxItems:N.options.maxItems??N.limit,query:N.options.query??N.query,folderId:N.options.folderId??N.folderId,tags:N.options.tags??N.tags};return parseFloat(N.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(Ee=>delete N[Ee]),X});var rr=e(51385),vg=e(50387);const lu=({onBlur:N,placeholder:X})=>{const te=(0,A.useRef)(null);(0,A.useEffect)(()=>{te.current&&te.current.focus()});const ge=Ee=>{Ee.key==="Enter"&&Ee.currentTarget.blur()};return A.createElement("input",{type:"text",placeholder:X,onBlur:N,ref:te,onKeyDown:ge,"data-testid":"column-input"})},Eg=({divStyle:N,onColumnInputBlur:X})=>{const[te,ge]=(0,A.useState)(!1),Ee=()=>{ge(!0)},Ce=Oe=>{const We=Oe.target.value;We&&X(We),ge(!1)};return A.createElement("div",{className:N},te?A.createElement(lu,{placeholder:"Column Name",onBlur:Ce}):A.createElement("button",{onClick:Ee},"+"))};var zo=e(97456);const ba=()=>be.v.featureToggles.enableDatagridEditing,pn="600 13px Inter",Is="400 13px Inter",$l=document.createElement("canvas"),Kl=20,Vl=300,cu=65,du="both",uu="number",Ho={isContextMenuOpen:!1},Ai={isInputOpen:!1},mu={name:"A",fields:[],length:0},fu={kind:rr.p6.Text,data:"",allowOverlay:!0,readonly:!1,displayData:""},Br={columns:rr.EV.empty(),rows:rr.EV.empty()},mo={sticky:!1,tint:!0},gu={fill:!0,sticky:!1};async function Xs(N,X){if(X&&ba()){for(let te=0;te<N.fields.length;te++)delete N.fields[te].config.displayName,delete N.fields[te].config.displayNameFromDS;return await X([N])}return!1}const pu=(N,X=!1)=>{const te=$l.getContext("2d");return te.font=X?pn:Is,te.measureText(N).width},hu=N=>Math.max(pu(N.name,!0)+cu,Math.min(Vl,N.values.toArray().reduce((X,te)=>{const ge=pu(te?.toString()??"");return ge>X?ge:X},0)+Kl)),qr=(N,X,te=!1)=>{const ge={...N,fields:N.fields.map(Ee=>({...Ee,values:Ee.values.slice()}))};for(const Ee of ge.fields){const Ce=Ee.values.toArray();for(let Oe=X.length-1;Oe>=0;Oe--)te?Ce.splice(X[Oe],1):Ce.splice(X[Oe],1,null);Ee.values=[...Ce]}return{...ge,length:ge.fields[0]?.values.length??0}},vu=(N,X)=>{const te=X.x,ge=X.y,Ee=X.x+X.width-1,Ce={...N,fields:N.fields.map(Oe=>({...Oe,values:Oe.values.slice()}))};for(let Oe=te;Oe<=Ee;Oe++){const We=Ce.fields[Oe],ze=We.values.toArray();ze.splice(ge,X.height,...new Array(X.height).fill(null)),We.values=[...ze]}return{...Ce,length:Ce.fields[0]?.values.length??0}},Li=N=>{const X=N.values.toArray();N.values=X.map(te=>te==="undefined"||te==="null"?null:te)};function Eu(N){return{accentColor:N.colors.primary.main,accentFg:N.colors.secondary.main,textDark:N.colors.text.primary,textMedium:N.colors.text.secondary,textLight:N.colors.text.secondary,textBubble:N.colors.text.primary,textHeader:N.colors.text.primary,bgCell:N.colors.background.primary,bgCellMedium:N.colors.background.primary,bgHeader:N.colors.background.primary,bgHeaderHasFocus:N.colors.background.secondary,bgHeaderHovered:N.colors.background.secondary,linkColor:N.colors.text.link,fontFamily:N.typography.fontFamily,headerFontStyle:`${N.typography.fontWeightMedium} ${N.typography.fontSize}px`,fgIconHeader:N.colors.secondary.contrastText,bgIconHeader:N.colors.secondary.main}}const Bi=(N,X,te=!1)=>{const ge=N.values.get(X);switch(N.type){case Tt.fS.boolean:return{kind:rr.p6.Boolean,data:ge||!1,allowOverlay:!1,readonly:!1};case Tt.fS.number:return{kind:rr.p6.Number,data:ge||0,allowOverlay:ba()&&!te,readonly:!1,displayData:ge!=null?ge.toString():""};case Tt.fS.string:return{kind:rr.p6.Text,data:ge||"",allowOverlay:ba()&&!te,readonly:!1,displayData:ge!=null?ge.toString():""};default:return{kind:rr.p6.Text,data:ge||"",allowOverlay:ba()&&!te,readonly:!1,displayData:ge!=null?ge.toString():""}}},zl=(N,X)=>({dataEditor:S.css`
      .dvn-scroll-inner > div:nth-child(2) {
        pointer-events: none !important;
      }
      scrollbar-color: ${N.colors.background.secondary} ${N.colors.background.primary};
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: ${N.colors.background.primary};
      }
      ::-webkit-scrollbar-thumb {
        border-radius: 10px;
      }
      ::-webkit-scrollbar-corner {
        display: none;
      }
    `,addColumnDiv:S.css`
      width: 120px;
      display: flex;
      flex-direction: column;
      background-color: ${N.colors.background.primary};
      button {
        pointer-events: ${X?"none":"auto"};
        border: none;
        outline: none;
        height: 37px;
        font-size: 20px;
        background-color: ${N.colors.background.primary};
        color: ${N.colors.text.primary};
        border-right: 1px solid ${N.components.panel.borderColor};
        border-bottom: 1px solid ${N.components.panel.borderColor};
        transition: background-color 200ms;
        cursor: pointer;
        :hover {
          background-color: ${N.colors.background.secondary};
        }
      }
      input {
        height: 37px;
        border: 1px solid ${N.colors.primary.main};
        :focus {
          outline: none;
        }
      }
    `,renameColumnInput:S.css`
      height: 37px;
      border: 1px solid ${N.colors.primary.main};
      :focus {
        outline: none;
      }
    `}),Hl=N=>N.rows.length||N.columns.length?!0:N.current===void 0?!1:N.current.range&&!(N.current.range.height===1&&N.current.range.width===1);var ls=(N=>(N.columnResizeStart="columnResizeStart",N.columnResizeEnd="columnResizeEnd",N.columnMove="columnMove",N.updateColumns="updateColumns",N.showColumnRenameInput="showColumnRenameInput",N.hideColumnRenameInput="hideColumnRenameInput",N.openCellContextMenu="openCellContextMenu",N.openHeaderContextMenu="openHeaderContextMenu",N.openHeaderDropdownMenu="openHeaderDropdownMenu",N.closeContextMenu="closeContextMenu",N.multipleCellsSelected="multipleCellsSelected",N.gridSelectionCleared="gridSelectionCleared",N.columnFreezeReset="columnFreezeReset",N.columnFreezeChanged="columnFreezeChanged",N.openSearch="openSearch",N.closeSearch="closeSearch",N))(ls||{});const yu={columns:[],contextMenuData:Ho,renameColumnInputData:Ai,gridSelection:Br,columnFreezeIndex:0,toggleSearch:!1,isResizeInProgress:!1},Pu=new Map([[Tt.fS.number,rr.PE.HeaderNumber],[Tt.fS.string,rr.PE.HeaderTextTemplate],[Tt.fS.boolean,rr.PE.HeaderBoolean],[Tt.fS.time,rr.PE.HeaderDate],[Tt.fS.other,rr.PE.HeaderReference]]),kl=(N,X)=>{let te=[];switch(X.type){case"columnResizeStart":te=[...N.columns];const ge=X.payload;return te[ge.columnIndex]={...N.columns[ge.columnIndex],width:ge.width},{...N,columns:te,isResizeInProgress:!0};case"columnMove":te=[...N.columns];const Ee=X.payload,Ce=N.columns[Ee.from].width;let Oe=te.splice(Ee.from,1)[0];return Oe={...Oe,width:Ce},te.splice(Ee.to,0,Oe),{...N,columns:te};case"columnResizeEnd":return{...N,isResizeInProgress:!1};case"updateColumns":const We=X.payload;return te=[...We.frame.fields.map((Mt,Yt)=>{const zt=N.columns.find(cn=>cn.title===Mt.name)?.width;return{title:(0,It.CZ)(Mt,We.frame),width:zt??hu(Mt),icon:Pu.get(Mt.type),hasMenu:ba(),trailingRowOptions:{targetColumn:--Yt}}})],{...N,columns:te};case"showColumnRenameInput":return{...N,renameColumnInputData:{...N.renameColumnInputData,isInputOpen:!0}};case"hideColumnRenameInput":return{...N,renameColumnInputData:{...N.renameColumnInputData,isInputOpen:!1}};case"openCellContextMenu":const ze=X.payload,rt=ze.event,st=ze.cell;return{...N,contextMenuData:{x:rt.bounds.x+rt.localEventX,y:rt.bounds.y+rt.localEventY,column:st[0]===-1?void 0:st[0],row:st[1],isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderContextMenu":const Ct=X.payload,Ot=Ct.event;return{...N,contextMenuData:{x:Ot.bounds.x+Ot.localEventX,y:Ot.bounds.y+Ot.localEventY,column:Ct.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderDropdownMenu":const vt=X.payload,Ut=vt.screenPosition;return{...N,contextMenuData:{x:Ut.x+Ut.width,y:Ut.y+Ut.height,column:vt.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!0},renameColumnInputData:{x:Ut.x,y:Ut.y,width:Ut.width,height:Ut.height,columnIdx:vt.columnIndex,isInputOpen:!1,inputValue:vt.value}};case"closeContextMenu":return{...N,contextMenuData:{isContextMenuOpen:!1}};case"closeSearch":return{...N,toggleSearch:!1};case"openSearch":return{...N,toggleSearch:!0};case"multipleCellsSelected":const Gt=X.payload;return{...N,gridSelection:Gt.selection};case"gridSelectionCleared":return{...N,gridSelection:Br};case"columnFreezeReset":return{...N,columnFreezeIndex:0};case"columnFreezeChanged":const Wt=X.payload;return{...N,columnFreezeIndex:Wt.columnIndex};default:return N}},_a=({menuData:N,data:X,saveData:te,closeContextMenu:ge,dispatch:Ee,gridSelection:Ce,columnFreezeIndex:Oe,renameColumnClicked:We})=>{let ze=[],rt=[];const{row:st,column:Ct,x:Ot,y:vt,isHeaderMenu:Ut}=N;Ce.rows&&(ze=Ce.rows.toArray()),Ce.columns&&(rt=Ce.columns.toArray());let Gt="Delete row";ze.length&&ze.length>1&&(Gt=`Delete ${ze.length} rows`);let Wt="Delete column";rt.length&&rt.length>1&&(Wt=`Delete ${rt.length} columns`);const Mt=st!==void 0&&st>=0||ze.length,Yt=Ct!==void 0&&Ct>=0&&st!==void 0||rt.length,zt=st!==void 0&&st>=0&&!ze.length,Xt=Ct!==void 0&&Ct>=0&&st!==void 0&&!rt.length,cn=()=>A.createElement(A.Fragment,null,Mt?A.createElement(Hs.s,{label:Gt,onClick:()=>{if(ze.length){te(qr(X,ze,!0)),Ee({type:ls.gridSelectionCleared});return}st!==void 0&&st>=0&&te(qr(X,[st],!0))}}):null,Yt?A.createElement(Hs.s,{label:Wt,onClick:()=>{if(rt.length){te({...X,fields:X.fields.filter((mn,Mn)=>!rt.includes(Mn))}),Ee({type:ls.gridSelectionCleared});return}Ct!==void 0&&Ct>=0&&te({...X,fields:X.fields.filter((mn,Mn)=>Mn!==Ct)})}}):null,Yt||Mt?A.createElement(zo.R,null):null,zt?A.createElement(Hs.s,{label:"Clear row",onClick:()=>{te(qr(X,[st]))}}):null,Xt?A.createElement(Hs.s,{label:"Clear column",onClick:()=>{const mn=X.fields[Ct];mn.values=mn.values.map(()=>null),te({...X})}}):null,zt||Xt?A.createElement(zo.R,null):null,A.createElement(Hs.s,{label:"Remove all data",onClick:()=>{te(mu)}}),A.createElement(Hs.s,{label:"Search...",onClick:()=>Ee({type:ls.openSearch})})),on=()=>{if(Ct==null)return null;const mn=X.fields[Ct].type,Mn=[],Pn=$n=>{Mn.push({label:(0,w.capitalize)($n),options:{targetField:X.fields[Ct].name,destinationType:$n}})};mn===Tt.fS.string?(Pn(Tt.fS.number),Pn(Tt.fS.boolean)):mn===Tt.fS.number?(Pn(Tt.fS.string),Pn(Tt.fS.boolean)):mn===Tt.fS.boolean?(Pn(Tt.fS.number),Pn(Tt.fS.string)):(Pn(Tt.fS.string),Pn(Tt.fS.number),Pn(Tt.fS.boolean));let Bn="Set column freeze position";const Rn=Ct+1;return Oe===Rn&&(Bn="Unset column freeze"),A.createElement(A.Fragment,null,Mn.length?A.createElement(Pr.k,{label:"Set field type"},Mn.map(($n,ha)=>A.createElement(Hs.s,{key:ha,label:$n.label,onClick:()=>{const Qn=(0,Ul.p8)(X.fields[Ct],$n.options);$n.options.destinationType===Tt.fS.string&&Li(Qn);const On={name:X.name,fields:[...X.fields],length:X.length};On.fields[Ct]=Qn,te(On)}}))):null,A.createElement(zo.R,null),A.createElement(Hs.s,{label:Bn,onClick:()=>{Ee(Oe===Rn?{type:ls.columnFreezeReset}:{type:ls.columnFreezeChanged,payload:{columnIndex:Rn}})}}),A.createElement(Hs.s,{label:"Rename column",onClick:We}),A.createElement(zo.R,null),A.createElement(Hs.s,{label:"Delete column",onClick:()=>{te({...X,fields:X.fields.filter(($n,ha)=>ha!==Ct)}),Ee({type:ls.gridSelectionCleared})}}),A.createElement(Hs.s,{label:"Clear column",onClick:()=>{const $n=X.fields[Ct];$n.values=$n.values.map(()=>null),te({...X})}}))};return A.createElement(uo.x,{renderMenuItems:Ut?on:cn,x:Ot,y:vt,onClose:ge})},Cu=({renameColumnData:N,onColumnInputBlur:X,classStyle:te})=>{const{x:ge,y:Ee,width:Ce,height:Oe,inputValue:We,columnIdx:ze}=N,[rt,st]=(0,A.useState)({}),[Ct,Ot]=(0,A.useState)(We),vt=(0,A.useRef)(null);(0,A.useLayoutEffect)(()=>{vt.current?.focus();const Mt=vt.current?.getBoundingClientRect();if(Mt){const Yt={right:window.innerWidth<ge+Mt.width,bottom:window.innerHeight<Ee+Mt.height};st({position:"fixed",left:Yt.right?ge-Mt.width:ge,top:Yt.bottom?Ee-Mt.height:Ee,width:Ce,height:Oe})}},[Oe,Ce,ge,Ee]);const Ut=Mt=>{const Yt=Mt.target.value;Yt&&X(Yt,ze)},Gt=Mt=>{Ot(Mt.target.value)},Wt=Mt=>{Mt.key==="Enter"&&Mt.currentTarget.blur()};return A.createElement(fs.h_,null,A.createElement("input",{type:"text",className:te,value:Ct,onBlur:Ut,ref:vt,style:rt,onChange:Gt,onKeyDown:Wt}))};function _l({options:N,data:X,id:te,fieldConfig:ge,width:Ee,height:Ce}){const[Oe,We]=(0,A.useReducer)(kl,yu),{onUpdateData:ze}=(0,An.R9)(),{columns:rt,contextMenuData:st,renameColumnInputData:Ct,gridSelection:Ot,columnFreezeIndex:vt,toggleSearch:Ut,isResizeInProgress:Gt}=Oe,Wt=X.series[N.selectedSeries??0],Mt=(0,ie.l4)(),Yt=Eu(Mt);(0,A.useEffect)(()=>{Wt&&We({type:ls.updateColumns,payload:{frame:Wt}})},[Wt]);const zt=([Kn,Sn])=>{const Vn=Wt.fields[Kn];return!Vn||Sn>Wt.length?fu:Bi(Vn,Sn,Hl(Ot))},Xt=(Kn,Sn)=>{if(Hl(Ot))return;const[Vn,Zn]=Kn,Ia={...Wt,fields:Wt.fields.map(aa=>({...aa,values:[...aa.values]}))},ma=Ia.fields[Vn];if(!ma)return;const La=ma.values.toArray();La[Zn]=Sn.data,ma.values=[...La],Xs(Ia,ze)},cn=Kn=>{const Sn=Wt.length??0;Xs({...Wt,fields:[...Wt.fields,{name:Kn,type:Tt.fS.string,config:{},values:new Array(Sn).fill("")}]},ze)},on=()=>{const Kn=Wt.fields.map(Sn=>{const Vn=Sn.values.slice();return Vn.push(null),{...Sn,values:Vn}});Xs({...Wt,fields:Kn,length:Wt.length+1},ze)},mn=(Kn,Sn,Vn,Zn)=>{We({type:ls.columnResizeStart,payload:{columnIndex:Vn,width:Sn}})},Mn=(Kn,Sn,Vn,Zn)=>{We({type:ls.columnResizeEnd})},Pn=()=>{We({type:ls.closeContextMenu})},Bn=Kn=>{if(Kn.current&&Kn.current.range)return Xs(vu(Wt,Kn.current.range),ze),!0;const Sn=Kn.rows.toArray(),Vn=Kn.columns.toArray();if(Sn.length)return Xs(qr(Wt,Sn),ze),!0;if(Vn.length){const Zn={...Wt,fields:Wt.fields.map((Ia,ma)=>Vn.includes(ma)?{...Ia,values:new Array(Wt.length).fill(null)}:Ia)};return Xs(Zn,ze),!0}return!1},Rn=(Kn,Sn)=>{Sn.preventDefault(),We({type:ls.openCellContextMenu,payload:{event:Sn,cell:Kn}})},$n=(Kn,Sn)=>{Sn.preventDefault(),We({type:ls.openHeaderContextMenu,payload:{event:Sn,columnIndex:Kn}})},ha=(Kn,Sn)=>{We({type:ls.openHeaderDropdownMenu,payload:{screenPosition:Sn,columnIndex:Kn,value:Oe.columns[Kn].title}})},Qn=async(Kn,Sn)=>{const Vn=Wt.fields.map(ma=>ma),Zn=Vn[Kn];Vn.splice(Kn,1),Vn.splice(Sn,0,Zn),await Xs({...Wt,fields:Vn},ze)&&We({type:ls.columnMove,payload:{from:Kn,to:Sn}})},On=(Kn,Sn)=>{const Vn=Wt.fields.map(Zn=>({...Zn,values:Zn.values.slice()}));for(const Zn of Vn){const Ia=Zn.values[Kn];Zn.values.splice(Kn,1),Zn.values.splice(Sn,0,Ia)}Xs({...Wt,fields:Vn},ze)},Jn=()=>{We({type:ls.showColumnRenameInput})},oa=(Kn,Sn)=>{const Vn=Wt.fields.map(Zn=>Zn);Vn[Sn].name=Kn,We({type:ls.hideColumnRenameInput}),Xs({...Wt,fields:Vn},ze)},Oa=()=>{We({type:ls.closeSearch})},ja=Kn=>{We({type:ls.multipleCellsSelected,payload:{selection:Kn}})},Ka=Kn=>{Xs(Kn,ze)};if(!Wt)return A.createElement(Ta.Z,{panelId:te,fieldConfig:ge,data:X});if(!ba())return A.createElement(Ta.Z,{panelId:te,message:"Datagrid is not enabled",fieldConfig:ge,data:X});if(!document.getElementById("portal")){const Kn=document.createElement("div");Kn.id="portal",document.body.appendChild(Kn)}const Va=zl(Mt,Gt);return A.createElement(A.Fragment,null,A.createElement(rr.ZP,{className:Va.dataEditor,getCellContent:zt,columns:rt,rows:Wt.length,width:Ee,height:Ce,initialSize:[Ee,Ce],theme:Yt,smoothScrollX:!0,smoothScrollY:!0,overscrollY:50,onCellEdited:ba()?Xt:void 0,getCellsForSelection:ba()?!0:void 0,showSearch:ba()?Ut:!1,onSearchClose:Oa,gridSelection:Ot,onGridSelectionChange:ba()?ja:void 0,onRowAppended:ba()?on:void 0,onDelete:ba()?Bn:void 0,rowMarkers:ba()?du:uu,onColumnResize:mn,onColumnResizeEnd:Mn,onCellContextMenu:ba()?Rn:void 0,onHeaderContextMenu:ba()?$n:void 0,onHeaderMenuClick:ba()?ha:void 0,trailingRowOptions:mo,rightElement:ba()?A.createElement(Eg,{onColumnInputBlur:cn,divStyle:Va.addColumnDiv}):null,rightElementProps:gu,freezeColumns:vt,onRowMoved:ba()?On:void 0,onColumnMoved:ba()?Qn:void 0}),st.isContextMenuOpen&&A.createElement(_a,{menuData:st,data:Wt,saveData:Ka,closeContextMenu:Pn,dispatch:We,gridSelection:Ot,columnFreezeIndex:vt,renameColumnClicked:Jn}),Ct.isInputOpen?A.createElement(Cu,{onColumnInputBlur:oa,renameColumnData:Ct,classStyle:Va.renameColumnInput}):null)}const yg=Object.freeze([0,0]),Gl={selectedSeries:0},Du=new de.c(_l).setPanelOptions((N,X)=>{const te=X.data.map((ge,Ee)=>({value:Ee,label:ge.refId}));return X.options&&!te.map(ge=>ge.value).includes(X.options.selectedSeries??0)&&(X.options.selectedSeries=Gl.selectedSeries),N.addSelect({path:"selectedSeries",name:"Select series",defaultValue:Gl.selectedSeries,settings:{options:te}})});class xu extends A.Component{constructor(){super(...arguments),this.subscription=new nr.w0,this.state={}}componentDidMount(){const{eventBus:X}=this.props;this.subscription.add(X.subscribe(ms.es,te=>{this.setState({event:te})})),this.subscription.add(X.subscribe(ms.xH,te=>{this.setState({event:te})})),this.subscription.add(X.subscribe(Rs.IA,te=>{this.setState({event:te})})),this.subscription.add(X.subscribe(Rs.oi,te=>{this.setState({event:te})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:X}=this.state;if(!X)return A.createElement("div",null,"no events yet");const{type:te,payload:ge,origin:Ee}=X;return A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},A.createElement("h3",null,"Origin: ",Ee?.path),A.createElement("span",null,"Type: ",te),Boolean(ge)&&A.createElement(A.Fragment,null,A.createElement("pre",null,JSON.stringify(ge.point,null,"  ")),ge.data&&A.createElement(As.H,{data:ge.data,rowIndex:ge.rowIndex,columnIndex:ge.columnIndex})))}}var bu=e(74911);let Ni=100;class Yl extends A.PureComponent{constructor(X){super(X),this.history=new bu.d({capacity:40,append:"head"}),this.eventObserver={next:ge=>{const Ee=ge.origin;this.history.add({key:Ni++,type:ge.type,path:Ee?.path,payload:ge.payload}),this.setState({counter:Ni})}},this.state={counter:Ni};const te=[];te.push(X.eventBus.getStream(ms.es).subscribe(this.eventObserver)),te.push(X.eventBus.getStream(ms.xH).subscribe(this.eventObserver)),te.push(X.eventBus.getStream(ms.v9).subscribe(this.eventObserver)),this.subs=te}componentWillUnmount(){for(const X of this.subs)X.unsubscribe()}render(){return A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((X,te)=>A.createElement("div",{key:X.key},JSON.stringify(X.path)," ",X.type," / X:",JSON.stringify(X.payload.x)," / Y:",JSON.stringify(X.payload.y))))}}class Hr extends A.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(X){const{data:te,options:ge}=this.props;if(X.data!==te&&(this.counters.dataChanged++,ge.counters?.schemaChanged)){const Ee=X.data?.series,Ce=te.series;Ce&&Ee&&((0,Da.nl)(Ce,Ee,Da.Ch)||this.counters.schemaChanged++)}return!0}render(){const{data:X,options:te}=this.props,ge=te.counters??{render:!1,dataChanged:!1,schemaChanged:!1};this.counters.render++;const Ee=Date.now(),Ce=Ee-this.lastRender;this.lastRender=Ee;const Oe=Vs.TB.get(Vs.gz.lastNotNull);return A.createElement("div",null,A.createElement("div",null,A.createElement(Kr.h,{name:"step-backward",title:"reset counters",onClick:this.resetCounters}),A.createElement("span",null,ge.render&&A.createElement("span",null,"Render: ",this.counters.render,"\xA0"),ge.dataChanged&&A.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),ge.schemaChanged&&A.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),A.createElement("span",null,"TIME: ",Ce,"ms"))),X.series&&X.series.map((We,ze)=>A.createElement("div",{key:`${ze}/${We.refId}`},A.createElement("h4",null,(0,It.nf)(We,ze)," (",We.length,")"),A.createElement("table",{className:"filter-table"},A.createElement("thead",null,A.createElement("tr",null,A.createElement("td",null,"Field"),A.createElement("td",null,"Type"),A.createElement("td",null,"Last"))),A.createElement("tbody",null,We.fields.map((rt,st)=>{const Ct=Oe.reduce(rt,!1,!1)[Oe.id];return A.createElement("tr",{key:`${st}/${rt.name}`},A.createElement("td",null,(0,It.CZ)(rt,We,X.series)),A.createElement("td",null,rt.type),A.createElement("td",null,`${Ct}`))}))))))}}var Mu=e(46967);function Su(N){const X=(0,An.R9)(),te=ge=>{X.onInstanceStateChange({name:ge.currentTarget.value})};return A.createElement(A.Fragment,null,A.createElement(es.g,{label:"State name"},A.createElement(Mu.I,{value:X.instanceState?.name??"",onChange:te})))}function bo({value:N,context:X,onChange:te,item:ge}){return A.createElement("div",null,"Current value: ",X.instanceState?.name," ")}const fo=Object.freeze([0,0]);var Bs=(N=>(N.Cursor="cursor",N.Events="events",N.Render="render",N.State="State",N.ThrowError="ThrowError",N))(Bs||{});class Tu extends A.Component{render(){const{options:X}=this.props;switch(X.mode){case Bs.Events:return A.createElement(Yl,{eventBus:this.props.eventBus});case Bs.Cursor:return A.createElement(xu,{eventBus:this.props.eventBus});case Bs.State:return A.createElement(Su,{...this.props});case Bs.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return A.createElement(Hr,{...this.props})}}}const Ou=new de.c(Tu).useFieldConfig().setPanelOptions(N=>{N.addSelect({path:"mode",name:"Mode",defaultValue:Bs.Render,settings:{options:[{label:"Render",value:Bs.Render},{label:"Events",value:Bs.Events},{label:"Cursor",value:Bs.Cursor},{label:"Cursor",value:Bs.Cursor},{label:"Share state",value:Bs.State},{label:"Throw error",value:Bs.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:X})=>X===Bs.State,editor:bo}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:X})=>X===Bs.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:X})=>X===Bs.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:X})=>X===Bs.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var Iu=e(19919);const jl=N=>A.createElement(Iu.Z,{data:N.data.series[0],app:me.zj.Unknown}),Ql=new de.c(jl);var Zl=e(7149),Ui=e(67487);const wi=(N,X)=>{const te="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",ge=X?te:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",Ee=X?te:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",Ce=N.isDark?ge:Ee;return`
      background-color: ${N.colors.background.secondary};
      margin-right: ${N.spacing(4)};
      border: 1px solid ${N.colors.border.weak};
      border-bottom-left-radius: ${N.shape.borderRadius(2)};
      border-bottom-right-radius: ${N.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${N.breakpoints.down("xxl")} {
        margin-right: ${N.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${Ce};
      }
`},Jl=(N,X)=>S.css`
  color: ${X?N.v1.palette.blue95:N.colors.text.secondary};

  ${N.breakpoints.down("sm")} {
    display: none;
  }
`,Mo=S.css`
  padding: 16px;
`,Ru=({card:N})=>{const X=(0,ie.wW)((0,A.useCallback)(ge=>Xl(ge,N.done),[N.done])),te=(0,ie.wW)((0,A.useCallback)(ge=>Jl(ge,N.done),[N.done]));return A.createElement("div",{className:X.card},A.createElement("div",{className:Mo},A.createElement("a",{href:`${N.href}?utm_source=grafana_gettingstarted`,className:X.url},A.createElement("div",{className:X.heading},N.done?"complete":N.heading),A.createElement("h4",{className:X.title},N.title),A.createElement("div",null,A.createElement(Qt.J,{className:te,name:N.icon,size:"xxl"})))),A.createElement("a",{href:`${N.learnHref}?utm_source=grafana_gettingstarted`,className:X.learnUrl,target:"_blank",rel:"noreferrer"},"Learn how in the docs ",A.createElement(Qt.J,{name:"external-link-alt"})))},Xl=(N,X)=>({card:S.css`
      ${wi(N,X)}

      min-width: 230px;

      ${N.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:S.css`
      text-transform: uppercase;
      color: ${X?N.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${N.spacing(2)};
    `,title:S.css`
      margin-bottom: ${N.spacing(2)};
    `,url:S.css`
      display: inline-block;
    `,learnUrl:S.css`
      border-top: 1px solid ${N.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var ko=e(58379);const Au=({card:N})=>{const X=(0,ie.wW)((0,A.useCallback)(ge=>Bu(ge,N.done),[N.done])),te=(0,ie.wW)((0,A.useCallback)(ge=>Jl(ge,N.done),[N.done]));return A.createElement("a",{className:X.card,target:"_blank",rel:"noreferrer",href:`${N.href}?utm_source=grafana_gettingstarted`,onClick:ge=>Lu(ge,N)},A.createElement("div",{className:Mo},A.createElement("div",{className:X.type},N.type),A.createElement("div",{className:X.heading},N.done?"complete":N.heading),A.createElement("h4",{className:X.cardTitle},N.title),A.createElement("div",{className:X.info},N.info),A.createElement(Qt.J,{className:te,name:N.icon,size:"xxl"})))},Lu=(N,X)=>{N.preventDefault(),ko.Z.get(X.key)||ko.Z.set(X.key,!0)},Bu=(N,X)=>({card:S.css`
      ${wi(N,X)}
      width: 460px;
      min-width: 460px;

      ${N.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${N.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:S.css`
      color: ${N.colors.primary.text};
      text-transform: uppercase;
    `,heading:S.css`
      text-transform: uppercase;
      color: ${N.colors.primary.text};
      margin-bottom: ${N.spacing(1)};
    `,cardTitle:S.css`
      margin-bottom: ${N.spacing(2)};
    `,info:S.css`
      margin-bottom: ${N.spacing(2)};
    `,status:S.css`
      display: flex;
      justify-content: flex-end;
    `}),ql=({step:N})=>{const X=(0,ie.wW)(Nu);return A.createElement("div",{className:X.setup},A.createElement("div",{className:X.info},A.createElement("h2",{className:X.title},N.title),A.createElement("p",null,N.info)),A.createElement("div",{className:X.cards},N.cards.map((te,ge)=>{const Ee=`${te.title}-${ge}`;return te.type==="tutorial"?A.createElement(Au,{key:Ee,card:te}):A.createElement(Ru,{key:Ee,card:te})})))},Nu=N=>({setup:S.css`
      display: flex;
      width: 95%;
    `,info:S.css`
      width: 172px;
      margin-right: 5%;

      ${N.breakpoints.down("xxl")} {
        margin-right: ${N.spacing(4)};
      }
      ${N.breakpoints.down("sm")} {
        display: none;
      }
    `,title:S.css`
      color: ${N.v1.palette.blue95};
    `,cards:S.css`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      ${N.breakpoints.down("xxl")} {
        justify-content: flex-start;
      }
    `});var Uu=e(91162);const ec="Grafana fundamentals",Wi="Create users and teams",tc="getting.started.",nc=`${tc}${ec.replace(" ","-").trim().toLowerCase()}`,Fi=`${tc}${Wi.replace(" ","-").trim().toLowerCase()}`,wu=()=>[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:ec,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(ko.Z.get(nc)),key:nc,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(N=>{N((0,Uu.ak)().getMetricSources().filter(X=>X.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,Ie.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:Fi,check:()=>Promise.resolve(ko.Z.get(Fi)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const N=await(0,Ie.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(N.length>0)},done:!1}]}];class Wu extends A.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:wu()},this.onForwardClick=()=>{this.setState(X=>({currentStep:X.currentStep+1}))},this.onPreviousClick=()=>{this.setState(X=>({currentStep:X.currentStep-1}))},this.dismiss=()=>{const{id:X}=this.props,te=(0,sn.h4)().getCurrent(),ge=te?.getPanelById(X);te?.removePanel(ge),Ie.ae.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(Ee=>{ct.Vt.user.helpFlags1=Ee.helpFlags1})}}async componentDidMount(){const{steps:X}=this.state,te=X.map(async Ee=>{const Ce=Ee.cards.map(async We=>We.check().then(ze=>({...We,done:ze}))),Oe=await Promise.all(Ce);return{...Ee,done:Oe.every(We=>We.done),cards:Oe}}),ge=await Promise.all(te);this.setState({currentStep:ge[0].done?1:0,steps:ge,checksDone:!0})}render(){const{checksDone:X,currentStep:te,steps:ge}=this.state,Ee=Fu(),Ce=ge[te];return A.createElement("div",{className:Ee.container},X?A.createElement(A.Fragment,null,A.createElement(De.zx,{variant:"secondary",fill:"text",className:Ee.dismiss,onClick:this.dismiss},"Remove this panel"),te===ge.length-1&&A.createElement(De.zx,{className:(0,S.cx)(Ee.backForwardButtons,Ee.previous),onClick:this.onPreviousClick,"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}),A.createElement("div",{className:Ee.content},A.createElement(ql,{step:Ce})),te<ge.length-1&&A.createElement(De.zx,{className:(0,S.cx)(Ee.backForwardButtons,Ee.forward),onClick:this.onForwardClick,"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"})):A.createElement("div",{className:Ee.loading},A.createElement("div",{className:Ee.loadingText},"Checking completed setup steps"),A.createElement(Ui.$,{size:24,inline:!0})))}}const Fu=(0,jt.B)(()=>{const N=be.v.theme2;return{container:S.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${N.colors.mode}.svg) no-repeat;
      background-size: cover;
      padding: ${N.spacing(4)} ${N.spacing(2)} 0;
    `,content:S.css`
      label: content;
      display: flex;
      justify-content: center;

      ${N.breakpoints.down("xxl")} {
        margin-left: ${N.spacing(3)};
        justify-content: flex-start;
      }
    `,header:S.css`
      label: header;
      margin-bottom: ${N.spacing(3)};
      display: flex;
      flex-direction: column;

      ${N.breakpoints.down("lg")} {
        flex-direction: row;
      }
    `,headerLogo:S.css`
      height: 58px;
      padding-right: ${N.spacing(2)};
      display: none;

      ${N.breakpoints.up("md")} {
        display: block;
      }
    `,heading:S.css`
      label: heading;
      margin-right: ${N.spacing(3)};
      margin-bottom: ${N.spacing(3)};
      flex-grow: 1;
      display: flex;

      ${N.breakpoints.up("md")} {
        margin-bottom: 0;
      }
    `,backForwardButtons:S.css`
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `,previous:S.css`
      left: 10px;

      ${N.breakpoints.down("md")} {
        left: 0;
      }
    `,forward:S.css`
      right: 10px;

      ${N.breakpoints.down("md")} {
        right: 0;
      }
    `,dismiss:S.css`
      align-self: flex-end;
      text-decoration: underline;
      margin-bottom: ${N.spacing(1)};
    `,loading:S.css`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:S.css`
      margin-right: ${N.spacing(1)};
    `}}),$u=new de.c(Wu).setNoPadding();var Ya=e(75133),ps=e(3200);const Pg=Object.freeze([0,0]),_o={bucketOffset:0},$i={fillOpacity:80,gradientMode:qe.FI.None,lineWidth:1};function Go(N,X){return Math.floor(N/X)*X}function ac(N,X){return Math.ceil(N/X)*X}function Yo(N){return N.fields[1].values[0]-N.fields[0].values[0]}const So=(N,X)=>{let{min:te,max:ge}=N.fields[2].config,Ee=new gi.U,Ce=Yo(N),Oe=(vt,Ut,Gt,Wt,Mt,Yt)=>{let zt=vt.axes[Ut]._space,Xt=vt.valToPos(vt.data[0][0]+Ce,"x")-vt.valToPos(vt.data[0][0],"x"),cn=Go(te??vt.data[0][0],Ce),on=ac(ge??vt.data[0][vt.data[0].length-1]+Ce,Ce),mn=[],Mn=Math.ceil(zt/Xt);for(let Pn=0,Bn=cn;Bn<=on;Pn++,Bn+=Ce)!(Pn%Mn)&&mn.push(Bn);return mn};Ee.addScale({scaleKey:"x",isTime:!1,distribution:qe.wf.Linear,orientation:qe.wN.Horizontal,direction:qe.bQ.Right,range:(vt,Ut,Gt)=>{te!=null&&(Ut=te),ge!=null&&(Gt=ge);let Wt=vt.data[0][0],Mt=vt.data[0][vt.data[0].length-1];return Gt===Mt?Gt+=Ce:Gt=ac(Gt,Ce),Ut>Wt&&(Ut=Go(Ut,Ce)),[Ut,Gt]}}),Ee.addScale({scaleKey:"y",isTime:!1,distribution:qe.wf.Linear,orientation:qe.wN.Vertical,direction:qe.bQ.Up});const We=N.fields[0].display,ze=vt=>(0,Ua.zc)(We(vt));Ee.addAxis({scaleKey:"x",isTime:!1,placement:qe.LB.Bottom,incrs:Ya.Zi,splits:Oe,values:(vt,Ut)=>{const Gt=Ut.map(ze),Wt=Gt.reduce((Xt,cn)=>Math.max((0,Fn.X1)(cn,da.gD).width,Xt),0),Mt=10,Yt=vt.bbox.width/((Wt+Mt)*devicePixelRatio),zt=Math.ceil(Gt.length/Yt);return Gt.map((Xt,cn)=>cn%zt===0?Xt:null)},theme:X});let st=N.fields[2].display;Ee.addAxis({scaleKey:"y",isTime:!1,placement:qe.LB.Left,formatValue:(vt,Ut)=>(0,Ua.zc)(st(vt,Ut)),theme:X}),Ee.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let Ct=na.Z.paths.bars({align:1,size:[1,1/0]}),Ot=0;for(let vt=2;vt<N.fields.length;vt++){const Ut=N.fields[vt];Ut.state=Ut.state??{},Ut.state.seriesIndex=Ot++;const Gt={...$i,...Ut.config.custom},Wt="y",Mt=(0,Ks.fD)(Ut),zt=(0,Ks.YO)(Ut,X).color;Ee.addSeries({scaleKey:Wt,lineWidth:Gt.lineWidth,lineColor:zt,fillOpacity:Gt.fillOpacity,theme:X,colorMode:Mt,pathBuilder:Ct,show:!Gt.hideFrom?.viz,gradientMode:Gt.gradientMode,thresholds:Ut.config.thresholds,hardMin:Ut.config.min,hardMax:Ut.config.max,softMin:Gt.axisSoftMin,softMax:Gt.axisSoftMax,dataFrameFieldIndex:Ut.state.origin})}return Ee},sc=N=>{let X=[];for(const te of N.fields)te.name!==Ya.cO&&X.push(te.values);for(let te=1;te<X.length;te++){let ge=X[te];for(let Ee=0;Ee<ge.length;Ee++)ge[Ee]===0&&(ge[Ee]=null)}return X};class rc extends A.Component{constructor(X){super(X),this.state=this.prepState(X)}prepState(X,te=!0){let ge=null;const{alignedFrame:Ee}=X;return Ee&&(ge={alignedData:sc(Ee)},te&&(ge.config=So(Ee,this.props.theme))),ge}renderLegend(X){const{legend:te}=this.props;return!X||te.showLegend===!1?null:A.createElement(xa.l,{data:this.props.rawSeries,config:X,maxHeight:"35%",maxWidth:"60%",...te})}componentDidUpdate(X){const{structureRev:te,alignedFrame:ge,bucketSize:Ee}=this.props;if(ge!==X.alignedFrame){let Ce=this.prepState(this.props,!1);Ce&&(Ee!==X.bucketSize||this.props.options!==X.options||this.state.config===void 0||te!==X.structureRev||!te)&&(Ce.config=So(ge,this.props.theme)),Ce&&this.setState(Ce)}}render(){const{width:X,height:te,children:ge,alignedFrame:Ee}=this.props,{config:Ce}=this.state;return Ce?A.createElement(va.AY,{width:X,height:te,legend:this.renderLegend(Ce)},(Oe,We)=>A.createElement(ps.N,{config:this.state.config,data:this.state.alignedData,width:Oe,height:We,timeRange:null},ge?ge(Ce,Ee):null)):null}}const Ku=({data:N,options:X,width:te,height:ge})=>{const Ee=(0,ie.l4)(),Ce=(0,A.useMemo)(()=>{if(!N.series.length)return;if(N.series.forEach((ze,rt)=>{ze.fields.forEach((st,Ct)=>{st.state={...st.state,origin:{frameIndex:rt,fieldIndex:Ct}}})}),N.series.length===1){const ze=(0,Ya.qr)(N.series[0]);if(ze)return(0,Ya.zM)(ze)}const We=(0,Ya.gY)(N.series,X);if(We)return(0,Ya.zM)(We,Ee)},[N.series,X,Ee]);if(!Ce||!Ce.fields.length)return A.createElement("div",{className:"panel-empty"},A.createElement("p",null,"No histogram found in response"));const Oe=Yo(Ce);return A.createElement(rc,{options:X,theme:Ee,legend:X.legend,rawSeries:N.series,structureRev:N.structureRev,width:te,height:ge,alignedFrame:Ce,bucketSize:Oe},(We,ze)=>null)};function jo(N){if(N?.length!==1)return!1;const X=N[0];if(X.fields.length<3||!(0,Ya.Ok)(X.fields[0].name)||!(0,Ya.kl)(X.fields[1].name))return!1;for(const te of X.fields)if(te.type!==Tt.fS.number)return!1;return!0}const Vu=new de.c(Ku).setPanelOptions(N=>{N.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(X,te)=>jo(te)}).addNumberInput({path:"bucketSize",name:Ya.py.bucketSize.name,description:Ya.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:_o.bucketSize,showIf:(X,te)=>!jo(te)}).addNumberInput({path:"bucketOffset",name:Ya.py.bucketOffset.name,description:Ya.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:_o.bucketOffset,showIf:(X,te)=>!jo(te)}).addBooleanSwitch({path:"combine",name:Ya.py.combine.name,description:Ya.py.combine.description,defaultValue:_o.combine,showIf:(X,te)=>!jo(te)}),Gn.J(N)}).useFieldConfig({standardOptions:{[Me.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Ze.S.PaletteClassic}}},useCustomConfig:N=>{const X=$i;N.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:X.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:X.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:rn.q.fillGradient[0].value,settings:{options:rn.q.fillGradient}}),Dn.B(N)}});var ks=e(8891),Qo=e(64353);const Ki=[{label:"Grafana",value:ks.z.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:ks.z.DataSource,description:"Data sources with live support"},{label:"Plugins",value:ks.z.Plugin,description:"Plugins with live support"}];class oc extends A.PureComponent{constructor(){super(...arguments),this.state={namespaces:[],paths:[]},this.onScopeChanged=X=>{X.value&&this.props.onChange({scope:X.value,namespace:void 0,path:void 0})},this.onNamespaceChanged=X=>{const te={scope:this.props.value?.scope,path:void 0};X.value&&(te.namespace=X.value),this.props.onChange(te)},this.onPathChanged=X=>{const{value:te,onChange:ge}=this.props,Ee={scope:te.scope,namespace:te.namespace};X.value&&(Ee.path=X.value),ge(Ee)}}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(X){this.props.value!==X.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){const{namespaces:X,paths:te}=this.state,{scope:ge,namespace:Ee,path:Ce}=this.props.value,Oe=Hu(Ve.vc.theme2);return A.createElement(A.Fragment,null,A.createElement(Wa.b,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),A.createElement("div",null,A.createElement("div",{className:Oe.dropWrap},A.createElement(Qo._,null,"Scope"),A.createElement(it.Ph,{options:Ki,value:Ki.find(We=>We.value===ge),onChange:this.onScopeChanged})),ge&&A.createElement("div",{className:Oe.dropWrap},A.createElement(Qo._,null,"Namespace"),A.createElement(it.Ph,{options:X,value:X.find(We=>We.value===Ee)??(Ee?{label:Ee,value:Ee}:void 0),onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})),ge&&Ee&&A.createElement("div",{className:Oe.dropWrap},A.createElement(Qo._,null,"Path"),A.createElement(it.Ph,{options:te,value:zu(te,Ce),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0}))))}}function zu(N,X){const te=N.find(ge=>ge.value===X);if(te)return te;if(X)return{label:X,value:X}}const Hu=(0,jt.B)(N=>({dropWrap:S.css`
    margin-bottom: ${N.spacing(1)};
  `}));var ic=e(52666),Zo=e(75118),Vi=e(16065),zi=e(9405),lc=e(28625),Nr=e(90748),ku=e(88144);function cc(N){const{data:X,height:te,width:ge,options:Ee,fieldConfig:Ce,id:Oe,timeRange:We}=N,ze=(0,ie.l4)(),rt=(0,An.R9)(),st=X.series,Ct=st.filter(cn=>cn.meta?.custom?.parentRowIndex===void 0),Ot=st.filter(cn=>cn.meta?.custom?.parentRowIndex!==void 0),vt=Ct?.length,Ut=Ct[0]?.fields.length,Gt=_u(Ct,Ee),Wt=Ct[Gt];let Mt=te,Yt=Ot;if(!vt||!Ut)return A.createElement(Ta.Z,{panelId:Oe,fieldConfig:Ce,data:X});if(vt>1){const cn=ze.spacing.gridSize*ze.components.height.md,on=ze.spacing.gridSize;Mt=te-cn-on,Yt=Ot.filter(mn=>mn.refId===Wt.refId)}const zt=A.createElement(ku.i,{height:Mt,width:ge,data:Wt,noHeader:!Ee.showHeader,showTypeIcons:Ee.showTypeIcons,resizable:!0,initialSortBy:Ee.sortBy,onSortByChange:cn=>uc(cn,N),onColumnResize:(cn,on)=>dc(cn,on,N),onCellFilterAdded:rt.onAddAdHocFilter,footerOptions:Ee.footer,enablePagination:Ee.footer?.enablePagination,subData:Yt,cellHeight:Ee.cellHeight,timeRange:We});if(vt===1)return zt;const Xt=Ct.map((cn,on)=>({label:(0,It.nf)(cn),value:on}));return A.createElement("div",{className:Ur.wrapper},zt,A.createElement("div",{className:Ur.selectWrapper},A.createElement(it.Ph,{options:Xt,value:Xt[Gt],onChange:cn=>mc(cn,N)})))}function _u(N,X){return X.frameIndex>0&&X.frameIndex<N.length?X.frameIndex:0}function dc(N,X,te){const{fieldConfig:ge}=te,{overrides:Ee}=ge,Ce=Nr.mi.byName,Oe="custom.width",We=Ee.find(ze=>ze.matcher.id===Ce&&ze.matcher.options===N);if(We){const ze=We.properties.find(rt=>rt.id===Oe);ze?ze.value=X:We.properties.push({id:Oe,value:X})}else Ee.push({matcher:{id:Ce,options:N},properties:[{id:Oe,value:X}]});te.onFieldConfigChange({...ge,overrides:Ee})}function uc(N,X){X.onOptionsChange({...X.options,sortBy:N})}function mc(N,X){X.onOptionsChange({...X.options,frameIndex:N.value||0})}const Ur={wrapper:S.css`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,selectWrapper:S.css`
    padding: 8px 8px 0px 8px;
  `};var br=(N=>(N.Raw="raw",N.JSON="json",N.Auto="auto",N.None="none",N))(br||{});class Hi extends A.PureComponent{constructor(X){super(X),this.styles=Gu(be.v.theme2),this.streamObserver={next:te=>{(0,ks.se)(te)?this.setState({status:te,changed:Date.now()}):(0,ks.RL)(te)?this.setState({message:te.message,changed:Date.now()}):console.log("ignore",te)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.onSaveJSON=te=>{const{options:ge,onOptionsChange:Ee}=this.props;try{const Ce=JSON.parse(te);Ee({...ge,json:Ce})}catch(Ce){console.log("Error reading JSON",Ce)}},this.onPublishClicked=async()=>{const{addr:te}=this.state;if(!te){console.log("invalid address");return}const ge=this.props.options?.json;if(!ge){console.log("nothing to publish");return}const Ee=await(0,Zo.gj)().publish(te,ge);console.log("onPublishClicked (response from publish)",Ee)},this.isValid=!!(0,Zo.gj)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(X){this.props.options?.channel!==X.options?.channel&&this.loadChannel()}async loadChannel(){const X=this.props.options?.channel;if(!(0,ks.nU)(X)){console.log("INVALID",X),this.unsubscribe(),this.setState({addr:void 0});return}if((0,w.isEqual)(X,this.state.addr)){console.log("Same channel",this.state.addr);return}const te=(0,Zo.gj)();if(!te){console.log("INVALID",X),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",X);try{this.subscription=te.getStream(X).subscribe(this.streamObserver),this.setState({addr:X,error:void 0})}catch(ge){this.setState({addr:void 0,error:ge})}}renderNotEnabled(){const X=`[feature_toggles]
    enable = live`;return A.createElement(Wa.b,{title:"Grafana Live",severity:"info"},A.createElement("p",null,"Grafana live requires a feature flag to run"),A.createElement("b",null,"custom.ini:"),A.createElement("pre",null,X))}renderMessage(X){const{options:te}=this.props,{message:ge}=this.state;if(!ge)return A.createElement("div",null,A.createElement("h4",null,"Waiting for data:"),te.channel?.scope,"/",te.channel?.namespace,"/",te.channel?.path);if(te.message===br.JSON)return A.createElement(Vi.g,{json:ge,open:5});if(te.message===br.Auto&&ge instanceof lc.Av){const Ee={series:(0,lo.SM)({data:[ge],theme:be.v.theme2,replaceVariables:Oe=>Oe,fieldConfig:{defaults:{},overrides:[]}}),state:ic.Gu.Streaming},Ce={...this.props,options:{frameIndex:0,showHeader:!0}};return A.createElement(cc,{...Ce,data:Ee,height:X})}return A.createElement("pre",null,JSON.stringify(ge))}renderPublish(X){const{options:te}=this.props;return A.createElement(A.Fragment,null,A.createElement(zi.p,{height:X-32,language:"json",value:te.json?JSON.stringify(te.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),A.createElement("div",{style:{height:32}},A.createElement(De.zx,{onClick:this.onPublishClicked},"Publish")))}renderStatus(){const{status:X}=this.state;if(X?.state===ks.yS.Connected)return;let te="";return X&&(te=this.styles.status[X.state]),A.createElement("div",{className:(0,S.cx)(te,this.styles.statusWrap)},X?.state)}renderBody(){const{status:X}=this.state,{options:te,height:ge}=this.props;if(te.publish){if(te.message===br.None)return A.createElement("div",null,this.renderPublish(ge));const Ee=ge/2;return A.createElement("div",null,A.createElement("div",{style:{height:Ee,overflow:"hidden"}},A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Ee))),A.createElement("div",null,this.renderPublish(Ee)))}return te.message===br.None?A.createElement("pre",null,JSON.stringify(X)):A.createElement("div",{style:{overflow:"hidden",height:ge}},A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(ge)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:X,error:te}=this.state;return X?te?A.createElement("div",null,A.createElement("h2",null,"ERROR"),A.createElement("div",null,JSON.stringify(te))):A.createElement(A.Fragment,null,this.renderStatus(),this.renderBody()):A.createElement(Wa.b,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const Gu=(0,jt.B)(N=>({statusWrap:S.css`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${N.components.panel.background};
    padding: 10px;
    z-index: ${N.zIndex.modal};
  `,status:{[ks.yS.Pending]:S.css`
      border: 1px solid ${N.v1.palette.orange};
    `,[ks.yS.Connected]:S.css`
      border: 1px solid ${N.colors.success.main};
    `,[ks.yS.Connecting]:S.css`
      border: 1px solid ${N.v1.palette.brandWarning};
    `,[ks.yS.Disconnected]:S.css`
      border: 1px solid ${N.colors.warning.main};
    `,[ks.yS.Shutdown]:S.css`
      border: 1px solid ${N.colors.error.main};
    `,[ks.yS.Invalid]:S.css`
      border: 1px solid red;
    `}})),fc=new de.c(Hi).setPanelOptions(N=>{N.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:oc,defaultValue:{}}),N.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:br.Raw,label:"Raw Text"},{value:br.JSON,label:"JSON"},{value:br.Auto,label:"Auto"},{value:br.None,label:"None"}]},defaultValue:br.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})});var Jo=e(13787),ki=e(20053),Yu=e(51927),ju=e(54972),Qu=e(59985);const gc=({data:N,timeZone:X,fieldConfig:te,options:{showLabels:ge,showTime:Ee,wrapLogMessage:Ce,showCommonLabels:Oe,prettifyLogMessage:We,sortOrder:ze,dedupStrategy:rt,enableLogDetails:st},title:Ct,id:Ot})=>{const vt=ze===qe.UV.Ascending,Ut=(0,ie.wW)(Zu(Ct,vt)),[Gt,Wt]=(0,A.useState)(0),Mt=(0,A.useRef)(null),{eventBus:Yt}=(0,An.R9)(),zt=(0,A.useCallback)(Pn=>{Pn?Yt.publish(new ms.es({point:{time:Pn.timeEpochMs}})):Yt.publish(new ms.xH)},[Yt]),[Xt,cn,on]=(0,A.useMemo)(()=>{const Pn=N?(0,ki.aB)(N.series,N.request?.intervalMs,void 0,N.request?.targets):null,Bn=Pn?.rows||[],Rn=Pn?.meta?.find(ha=>ha.label===ki.Qp),$n=(0,ki.UW)(Bn,rt);return[Bn,$n,Rn]},[N,rt]);(0,A.useLayoutEffect)(()=>{vt&&Mt.current?Wt(Mt.current.offsetHeight):Wt(0)},[vt,Xt]);const mn=(0,A.useCallback)((Pn,Bn)=>(0,Co.a_)({field:Pn,rowIndex:Bn,range:N.timeRange}),[N]);if(!N||Xt.length===0)return A.createElement(Yu.Z,{fieldConfig:te,panelId:Ot,data:N,needsStringField:!0});const Mn=()=>A.createElement("div",{className:Ut.labelContainer},A.createElement("span",{className:Ut.label},"Common labels:"),A.createElement(ju.j,{labels:on?on.value:{labels:"(no common labels)"}}));return A.createElement(Be.$,{autoHide:!0,scrollTop:Gt},A.createElement("div",{className:Ut.container,ref:Mt},Oe&&!vt&&Mn(),A.createElement(Qu.w,{logRows:Xt,deduplicatedRows:cn,dedupStrategy:rt,showLabels:ge,showTime:Ee,wrapLogMessage:Ce,prettifyLogMessage:We,timeZone:X,getFieldLinks:mn,logsSortOrder:ze,enableLogDetails:st,previewLimit:vt?Xt.length:void 0,onLogRowHover:zt,app:me.zj.Dashboard}),Oe&&vt&&Mn()))},Zu=(N,X)=>te=>({container:S.css`
    margin-bottom: ${te.spacing(1.5)};
    //We can remove this hot-fix when we fix panel menu with no title overflowing top of all panels
    margin-top: ${te.spacing(N?0:2.5)};
  `,labelContainer:S.css`
    margin: ${X?te.spacing(.5,0,.5,0):te.spacing(0,0,.5,.5)};
    display: flex;
    align-items: center;
  `,label:S.css`
    margin-right: ${te.spacing(.5)};
    font-size: ${te.typography.bodySmall.fontSize};
    font-weight: ${te.typography.fontWeightMedium};
  `});class Ju{getSuggestionsForData(X){const te=X.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:ge}=X;!ge.hasData||!ge.hasTimeField||!ge.hasStringField||(ge.preferredVisualisationType==="logs"?te.append({name:Ra.y.Logs,score:$t._.Best}):te.append({name:Ra.y.Logs}))}}const Xu=new de.c(gc).setPanelOptions(N=>{N.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:qe.Y4.none,label:"None",description:Jo.Uv[qe.Y4.none]},{value:qe.Y4.exact,label:"Exact",description:Jo.Uv[qe.Y4.exact]},{value:qe.Y4.numbers,label:"Numbers",description:Jo.Uv[qe.Y4.numbers]},{value:qe.Y4.signature,label:"Signature",description:Jo.Uv[qe.Y4.signature]}]},defaultValue:qe.Y4.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:qe.UV.Descending,label:"Newest first"},{value:qe.UV.Ascending,label:"Oldest first"}]},defaultValue:qe.UV.Descending})}).setSuggestionsSupplier(new Ju);var pc=e(53764),Xo=e(6981),hc=e(13724);function qu(N){const{width:X,options:{feedUrl:te=Xo.k,showImage:ge}}=N,{state:Ee,getNews:Ce}=(0,hc.j)(te);return(0,A.useEffect)(()=>{const Oe=N.eventBus.subscribe(ya.U5,Ce);return()=>{Oe.unsubscribe()}},[Ce,N.eventBus]),(0,A.useEffect)(()=>{Ce()},[Ce]),Ee.error?A.createElement("div",null,"Error loading RSS feed."):Ee.loading?A.createElement("div",null,"Loading..."):Ee.value?A.createElement(Be.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Ee.value.map((Oe,We)=>A.createElement(pc.S,{key:We,index:We,width:X,showImage:ge,data:Ee.value}))):null}const Cg=Object.freeze([0,0]),_i={showImage:!0},em=new de.c(qu).setPanelOptions(N=>{N.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:Xo.k},defaultValue:_i.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:_i.showImage})});var Gi=e(58635),eo=e(74538),Yi=e(68545);const tm=({width:N,height:X,data:te,options:ge})=>{const Ee=(0,Co.u8)(te.timeRange);if(!te||!te.series.length)return A.createElement("div",{className:"panel-empty"},A.createElement("p",null,"No data found in response"));const Ce=(0,Gi.Z)(Yi.Ee);return A.createElement("div",{style:{width:N,height:X}},A.createElement(eo.E,{dataFrames:Ce(te.series,ge),getLinks:Ee}))};var nm=e(90208),ji=e(15448);const am=({value:N,onChange:X,context:te})=>{const ge=(0,ie.wW)(sm),Ee=()=>{const We={field:"",color:""};X(N?[...N,We]:[We])},Ce=We=>{const ze=N?.slice();ze.splice(We,1),X(ze)},Oe=(We,ze,rt)=>{let st=N?.slice()??[];st[We][ze]=rt,X(st)};return A.createElement(A.Fragment,null,N?.map((We,ze)=>A.createElement("div",{className:ge.section,key:ze},A.createElement(ji.b,{context:te,value:We.field??"",onChange:rt=>{Oe(ze,"field",rt)},item:{settings:{filter:rt=>rt.name.includes("arc__")},id:`arc-field-${ze}`,name:`arc-field-${ze}`,editor:()=>null}}),A.createElement(nm.zH,{color:We.color||"#808080",onChange:rt=>{Oe(ze,"color",rt)}}),A.createElement(De.zx,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>Ce(ze),title:"Remove arc"}))),A.createElement(De.zx,{size:"sm",icon:"plus",onClick:Ee,variant:"secondary"},"Add arc"))},sm=()=>({section:S.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `}),vc=new de.c(tm).setPanelOptions((N,X)=>{N.addNestedOptions({category:["Nodes"],path:"nodes",build:te=>{te.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),te.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),te.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:am})}}),N.addNestedOptions({category:["Edges"],path:"edges",build:te=>{te.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),te.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})});var rm=e(92156),om=e(26993),Ec=e(9521),im=e(32567),yc=e(68970),lm=e(66838),cm=e(46495),dm=e(95670),Qi=e(28550),Zi=e(18543),Ji=e(50800);let um=0;const mm=()=>um++;function fm(N){const X=(0,A.useRef)(null);return X.current===null&&(X.current=N+mm()),X.current.toString()}const Dg=Object.freeze([0,0]);var Mr=(N=>(N.Donut="donut",N.Pie="pie",N))(Mr||{}),dr=(N=>(N.Name="name",N.Percent="percent",N.Value="value",N))(dr||{}),kr=(N=>(N.Percent="percent",N.Value="value",N))(kr||{});const xg={values:[]},bg={displayLabels:[]};function Pc(N){return!N.field.custom?.hideFrom?.viz&&!isNaN(N.display.numeric)}function Cc(N,X){return X.display.numeric+N}const qo=({fieldDisplayValues:N,pieType:X,width:te,height:ge,highlightedTitle:Ee,displayLabels:Ce=[],tooltipOptions:Oe})=>{const We=(0,ie.l4)(),ze=fm("PieChart"),rt=(0,ie.wW)(el),st=(0,cm.Z)(),{containerRef:Ct,TooltipInPortal:Ot}=(0,dm.Z)({detectBounds:!0,scroll:!0}),vt=N.filter(Pc),Ut=on=>on.display.numeric,Gt=on=>`${ze}-${(0,Qi.Z)(on).toHex()}`,Wt=on=>`url(#${Gt(on)})`,Mt=Ce.length>0,Yt=Oe.mode!=="none"&&st.tooltipOpen,zt=vt.reduce(Cc,0),Xt=qi(te,ge,X),cn=[...new Set(vt.map(on=>on.display.color??Ze.R))];return A.createElement("div",{className:rt.container},A.createElement("svg",{width:Xt.size,height:Xt.size,ref:Ct,style:{overflow:"visible"}},A.createElement(yc.Z,{top:Xt.position,left:Xt.position},cn.map(on=>A.createElement(im.Z,{key:on,id:Gt(on),from:vm(on,We),to:Em(on,We),fromOffset:Xt.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:Xt.outerRadius})),A.createElement(lm.Z,{data:vt,pieValue:Ut,outerRadius:Xt.outerRadius,innerRadius:Xt.innerRadius,cornerRadius:3,padAngle:.005},on=>A.createElement(A.Fragment,null,on.arcs.map(mn=>{const Mn=mn.data.display.color??Ze.R,Pn=xc(Ee,mn);return mn.data.hasLinks&&mn.data.getLinks?A.createElement(Zi.V,{key:mn.index,links:mn.data.getLinks},Bn=>A.createElement(Xi,{tooltip:st,highlightState:Pn,arc:mn,pie:on,fill:Wt(Mn),openMenu:Bn.openMenu,tooltipOptions:Oe})):A.createElement(Xi,{key:mn.index,highlightState:Pn,tooltip:st,arc:mn,pie:on,fill:Wt(Mn),tooltipOptions:Oe})}),Mt&&on.arcs.map(mn=>{const Mn=xc(Ee,mn);return A.createElement(gm,{arc:mn,key:mn.index,highlightState:Mn,outerRadius:Xt.outerRadius,innerRadius:Xt.innerRadius,displayLabels:Ce,total:zt,color:We.colors.text.primary})}))))),Yt?A.createElement(Ot,{key:Math.random(),top:st.tooltipTop,className:rt.tooltipPortal,left:st.tooltipLeft,unstyled:!0,applyPositionStyle:!0},A.createElement(Ji.c,{series:st.tooltipData})):null)};function Xi({arc:N,pie:X,highlightState:te,openMenu:ge,fill:Ee,tooltip:Ce,tooltipOptions:Oe}){const We=(0,ie.l4)(),ze=(0,ie.wW)(el),{eventBus:rt}=(0,An.R9)(),st=(0,A.useCallback)(vt=>{rt?.publish({type:ms.xH.type,payload:{raw:vt,x:0,y:0,dataId:N.data.display.title}}),Ce.hideTooltip()},[rt,N,Ce]),Ct=(0,A.useCallback)(vt=>{rt?.publish({type:ms.es.type,payload:{raw:vt,x:0,y:0,dataId:N.data.display.title}});const Ut=vt.currentTarget.ownerSVGElement;if(Ut){const Gt=(0,Ec.Z)(Ut,vt);Ce.showTooltip({tooltipLeft:Gt.x,tooltipTop:Gt.y,tooltipData:pm(X,N,Oe)})}},[rt,N,Ce,X,Oe]),Ot=bc(te,ze);return A.createElement("g",{key:N.data.display.title,className:Ot,onMouseMove:Oe.mode!=="none"?Ct:void 0,onMouseOut:st,onClick:ge,"aria-label":nt.wl.components.Panels.Visualization.PieChart.svgSlice},A.createElement("path",{d:X.path({...N}),fill:Ee,stroke:We.colors.background.primary,strokeWidth:1}))}function gm({arc:N,outerRadius:X,innerRadius:te,displayLabels:ge,total:Ee,color:Ce,highlightState:Oe}){const We=(0,ie.wW)(el),ze=te===0?X/6:te,[rt,st]=hm(N,X,ze);if(!(N.endAngle-N.startAngle>=.3))return null;let Ot=ge.includes(dr.Name)?Math.min(Math.max(X/150*14,12),30):Math.min(Math.max(X/100*14,12),36);return A.createElement("g",{className:bc(Oe,We)},A.createElement("text",{fill:Ce,x:rt,y:st,dy:".33em",fontSize:Ot,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},ge.includes(dr.Name)&&A.createElement("tspan",{x:rt,dy:"1.2em"},N.data.display.title),ge.includes(dr.Value)&&A.createElement("tspan",{x:rt,dy:"1.2em"},(0,Ua.zc)(N.data.display)),ge.includes(dr.Percent)&&A.createElement("tspan",{x:rt,dy:"1.2em"},(N.data.display.numeric/Ee*100).toFixed(N.data.field.decimals??0)+"%")))}function pm(N,X,te){return te.mode==="multi"?N.arcs.filter(ge=>{const Ee=ge.data.field;return Ee&&!Ee.custom?.hideFrom?.tooltip&&!Ee.custom?.hideFrom?.viz}).map(ge=>({color:ge.data.display.color??Ze.R,label:ge.data.display.title,value:(0,Ua.zc)(ge.data.display),isActive:ge.index===X.index})):[{color:X.data.display.color??Ze.R,label:X.data.display.title,value:(0,Ua.zc)(X.data.display)}]}function hm(N,X,te){const ge=(X+te)/2,Ee=(+N.startAngle+ +N.endAngle)/2-Math.PI/2;return[Math.cos(Ee)*ge,Math.sin(Ee)*ge]}function vm(N,X){return(0,Qi.Z)(N).darken(20*(X.isDark?1:-.7)).spin(4).toRgbString()}function Em(N,X){return(0,Qi.Z)(N).darken(10*(X.isDark?1:-.7)).spin(-4).toRgbString()}function qi(N,X,te,ge=16){const Ee=Math.min(X,N),Ce=(Ee-ge*2)/2,Oe=te===Mr.Pie?Ce:Math.max(Ce/3,20),We=Ce-Oe,ze=(Ee-ge*2)/2,rt=1-(Ce-We)/Ce;return{position:ze+ge,size:Ee,outerRadius:Ce,innerRadius:We,gradientFromOffset:rt}}var Dc=(N=>(N[N.Highlighted=0]="Highlighted",N[N.Deemphasized=1]="Deemphasized",N[N.Normal=2]="Normal",N))(Dc||{});function xc(N,X){return N?N===X.data.display.title?0:1:2}function bc(N,X){switch(N){case 0:return X.svgArg.highlighted;case 1:return X.svgArg.deemphasized;case 2:default:return X.svgArg.normal}}const el=N=>({container:S.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:S.css`
        transition: all 200ms ease-in-out;
      `,highlighted:S.css`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:S.css`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:S.css`
      ${(0,Di.getTooltipContainerStyles)(N)}
    `}),ym={displayMode:qe.jK.List,showLegend:!0,placement:"right",calcs:[],values:[kr.Percent]};function Mc(N){const{data:X,timeZone:te,fieldConfig:ge,replaceVariables:Ee,width:Ce,height:Oe,options:We,id:ze}=N,rt=(0,ie.l4)(),st=Cm(),Ct=(0,rm.nG)({fieldConfig:ge,reduceOptions:We.reduceOptions,data:X.series,theme:rt,replaceVariables:Ee,timeZone:te});return Pm(Ct)?A.createElement(va.AY,{width:Ce,height:Oe,legend:Sc(N,Ct)},(Ot,vt)=>A.createElement(qo,{width:Ot,height:vt,highlightedTitle:st,fieldDisplayValues:Ct,tooltipOptions:We.tooltip,pieType:We.pieType,displayLabels:We.displayLabels})):A.createElement(Ta.Z,{panelId:ze,fieldConfig:ge,data:X})}function Sc(N,X){const te=N.options.legend??ym;if(te.showLegend===!1)return;const ge=X.filter(Pc).reduce(Cc,0),Ee=X.sort((Ce,Oe)=>isNaN(Ce.display.numeric)?1:isNaN(Oe.display.numeric)?-1:Oe.display.numeric-Ce.display.numeric).map((Ce,Oe)=>{const We=Ce.field.custom?.hideFrom??{};if(We.legend)return;const ze=Boolean(We.viz),rt=Ce.display;return{label:rt.title??"",color:rt.color??Ze.R,yAxis:1,disabled:ze,getItemKey:()=>(rt.title??"")+Oe,getDisplayValues:()=>{const st=te.values??[];let Ct=[];if(st.includes(kr.Value)&&Ct.push({numeric:rt.numeric,text:(0,Ua.zc)(rt),title:"Value"}),st.includes(kr.Percent)){const Ot=ze?0:rt.numeric/ge,vt=Ot*100;Ct.push({numeric:Ot,percent:vt,text:ze||isNaN(Ot)?N.fieldConfig.defaults.noValue??"-":vt.toFixed(Ce.field.decimals??0)+"%",title:st.length>1?"Percent":""})}return Ct}}}).filter(Ce=>!!Ce);return A.createElement(ea.l,{items:Ee,seriesVisibilityChangeBehavior:om.Y.Hide,placement:te.placement,displayMode:te.displayMode})}function Pm(N){return N.some(X=>X.view?.dataFrame.length)}function Cm(){const[N,X]=(0,A.useState)(),{eventBus:te}=(0,An.R9)();return(0,A.useEffect)(()=>{const ge=Oe=>{X(Oe.payload.dataId)},Ee=Oe=>{X(void 0)},Ce=new nr.w0;return Ce.add(te.getStream(ms.es).subscribe({next:ge})),Ce.add(te.getStream(ms.xH).subscribe({next:Ee})),()=>{Ce.unsubscribe()}},[X,te]),N}const Dm=(N,X,te)=>{if(X==="grafana-piechart-panel"&&te.angular){const ge=te.angular,Ee=[];let Ce=N.options;if(ge.aliasColors)for(const Oe of Object.keys(ge.aliasColors)){const We=ge.aliasColors[Oe];We&&Ee.push({matcher:{id:Nr.mi.byName,options:Oe},properties:[{id:Me.qb.Color,value:{mode:Ze.S.Fixed,fixedColor:We}}]})}if(N.fieldConfig={overrides:Ee,defaults:{unit:ge.format,decimals:ge.decimals?ge.decimals:0}},Ce.legend={placement:"right",values:[],displayMode:qe.jK.Table,showLegend:!0,calcs:[]},ge.valueName)switch(Ce.reduceOptions={calcs:[]},ge.valueName){case"current":Ce.reduceOptions.calcs=["lastNotNull"];break;case"min":Ce.reduceOptions.calcs=["min"];break;case"max":Ce.reduceOptions.calcs=["max"];break;case"avg":Ce.reduceOptions.calcs=["mean"];break;case"total":Ce.reduceOptions.calcs=["sum"];break}switch(ge.legendType){case"Under graph":Ce.legend.placement="bottom";break;case"Right side":Ce.legend.placement="right";break}switch(ge.pieType){case"pie":Ce.pieType=Mr.Pie;break;case"donut":Ce.pieType=Mr.Donut;break}return ge.legend&&(ge.legend.show||(Ce.legend.showLegend=!1),ge.legend.values&&Ce.legend.values.push(kr.Value),ge.legend.percentage&&Ce.legend.values.push(kr.Percent)),ge.legendType==="On graph"&&(Ce.legend.showLegend=!1,Ce.displayLabels=[dr.Name],ge.legend.values&&Ce.displayLabels.push(dr.Value),ge.legend.percentage&&Ce.displayLabels.push(dr.Percent)),Ce}return{}};class xm{getSuggestionsForData(X){const te=X.getListAppender({name:Ra.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[dr.Percent],legend:{placement:"right",values:[]}},cardOptions:{previewModifier:Ee=>{Ee.options.legend.showLegend=!1}}}),{dataSummary:ge}=X;if(ge.hasNumberField){if(ge.hasStringField&&ge.frameCount===1){if(ge.rowCountTotal>30||ge.rowCountTotal<2)return;te.append({name:Ra.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),te.append({name:Ra.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:Mr.Donut}});return}ge.numberFieldCount>30||ge.numberFieldCount<2||(te.append({name:Ra.y.PieChart}),te.append({name:Ra.y.PieChartDonut,options:{pieType:Mr.Donut}}))}}}const bm=new de.c(Mc).setPanelChangeHandler(Dm).useFieldConfig({disableStandardOptions:[Me.qb.Thresholds],standardOptions:{[Me.qb.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Ze.S.PaletteClassic}}},useCustomConfig:N=>{Dn.B(N)}}).setPanelOptions(N=>{(0,yo.j)(N),N.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:Mr.Pie,label:"Pie"},{value:Mr.Donut,label:"Donut"}]},defaultValue:Mr.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:dr.Percent,label:"Percent"},{value:dr.Name,label:"Name"},{value:dr.Value,label:"Value"}]}}),wn.L(N),Gn.J(N,!1),N.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:kr.Percent,label:"Percent"},{value:kr.Value,label:"Value"}]},showIf:X=>X.legend.showLegend!==!1})}).setSuggestionsSupplier(new xm);var Mm=e(98967),ei=e(49616),Tc=e(59420);const Oc=({data:N,alignedData:X,seriesIdx:te,datapointIdx:ge,timeZone:Ee,onAnnotationAdd:Ce})=>{const Oe=(0,ie.l4)();if(!N||ge==null)return null;const We=X.fields[te],ze=[],rt=new Set;if(We.getLinks){const on=We.values[ge],mn=We.display?We.display(on):{text:`${on}`,numeric:+on};We.getLinks({calculatedValue:mn,valueRowIndex:ge}).forEach(Mn=>{const Pn=`${Mn.title}/${Mn.href}`;rt.has(Pn)||(ze.push(Mn),rt.add(Pn))})}const st=X.fields[0],Ct=st.display||(0,Ls.U_)({field:st,timeZone:Ee,theme:Oe}),Ot=We.state?.origin,vt=We.display||(0,Ls.U_)({field:We,timeZone:Ee,theme:Oe}),Ut=We.values[ge],Gt=vt(Ut),Wt=Ot?(0,It.CZ)(N[Ot.frameIndex].fields[Ot.fieldIndex],N[Ot.frameIndex],N):null,Mt=(0,ss.iK)(We,ge);let Yt;Mt&&(Yt=st.values[Mt]);const zt=st.values[ge];let Xt=null,cn=null;if(Yt){const on=Yt&&(0,ss.Y)(Yt-zt);cn=A.createElement(A.Fragment,null,A.createElement("br",null),A.createElement("strong",null,"Duration:")," ",on),Xt=A.createElement(A.Fragment,null," to"," ",A.createElement("strong",null,Ct(st.values[Mt]).text))}return A.createElement("div",null,A.createElement("div",{style:{fontSize:Oe.typography.bodySmall.fontSize}},Wt,A.createElement("br",null),A.createElement(Ji.V,{label:Gt.text,color:Gt.color||Ze.R,isActive:!0}),"From ",A.createElement("strong",null,Ct(st.values[ge]).text),Xt,cn),A.createElement("div",{style:{margin:Oe.spacing(1,-1,-1,-1),borderTop:`1px solid ${Oe.colors.border.weak}`}},Ce&&A.createElement(Hs.s,{label:"Add annotation",icon:"comment-alt",onClick:Ce}),ze.length>0&&ze.map((on,mn)=>A.createElement(Hs.s,{key:mn,icon:"external-link-alt",target:on.target,label:on.title,url:on.href,onClick:on.onClick}))))};Oc.displayName="StateTimelineTooltip";const ti=10,Sm=({data:N,timeRange:X,timeZone:te,options:ge,width:Ee,height:Ce,replaceVariables:Oe,onChangeTimeRange:We})=>{const ze=(0,ie.l4)(),rt=(0,A.useRef)(void 0),st=(0,A.useRef)(!1),[Ct,Ot]=(0,A.useState)(void 0),[vt,Ut]=(0,A.useState)(null),[Gt,Wt]=(0,A.useState)(null),[Mt,Yt]=(0,A.useState)(null),[zt,Xt]=(0,A.useState)(!1),[cn,on]=(0,A.useState)(!1),{sync:mn,canAddAnnotations:Mn}=(0,An.R9)(),Pn=()=>{st.current=!1,Ut(null),on(!1)},Bn=()=>{st.current=!st.current,on(st.current)},{frames:Rn,warn:$n}=(0,A.useMemo)(()=>(0,ss.AR)(N.series,ge.mergeValues??!0,X,ze),[N.series,ge.mergeValues,X,ze]),ha=(0,A.useMemo)(()=>(0,ss.SA)(Rn,ge.legend,ze),[Rn,ge.legend,ze]),Qn=(0,A.useMemo)(()=>Oi(ge.timezone,te),[ge.timezone,te]),On=(0,A.useCallback)((oa,Oa,ja,Ka)=>{const Va=Rn??[],Kn=Va.reduce((Sn,Vn)=>Sn+Vn.fields.filter(Zn=>Zn.type!==Tt.fS.time).length,0);return Oa===null||ja===null||!oa.meta?.transformations?.length&&oa.fields.length-1!==Kn||!oa.fields[Oa]?null:A.createElement(A.Fragment,null,cn&&A.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},A.createElement(Fr.P,{onClick:Pn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),A.createElement(Oc,{data:Va,alignedData:oa,seriesIdx:Oa,datapointIdx:ja,timeZone:te,onAnnotationAdd:Ka}))},[te,Rn,cn]);if(!Rn||$n)return A.createElement("div",{className:"panel-empty"},A.createElement("p",null,$n??"No data found in response"));if(Rn.length===1){const oa=(0,lc.MB)(Rn[0])}const Jn=Boolean(Mn&&Mn());return A.createElement(Tc.K,{theme:ze,frames:Rn,structureRev:N.structureRev,timeRange:X,timeZone:Qn,width:Ee,height:Ce,legendItems:ha,...ge,mode:ss.KN.Changes},(oa,Oa)=>(rt.current!==oa&&(rt.current=Ha({config:oa,onUPlotClick:Bn,setFocusedSeriesIdx:Wt,setFocusedPointIdx:Yt,setCoords:Ut,setHover:Ot,isToolTipOpen:st,isActive:zt,setIsActive:Xt,sync:mn})),A.createElement(A.Fragment,null,A.createElement(Bo.R,{config:oa,onZoom:We}),A.createElement(Ar,{config:oa,onChangeTimeRange:We}),N.annotations&&A.createElement(bi,{annotations:N.annotations,config:oa,timeZone:te}),Jn?A.createElement(Do,{data:Oa,timeZone:te,config:oa},({startAnnotating:ja})=>ge.tooltip.mode===qe.f3.None||Mt===null||!zt&&mn&&mn()===$s.m.Crosshair?null:A.createElement(fs.h_,null,Ct&&vt&&Gt&&A.createElement(Zs.S,{position:{x:vt.viewport.x,y:vt.viewport.y},offset:{x:ti,y:ti},allowPointerEvents:st.current},On(Oa,Gt,Mt,()=>{ja({coords:{plotCanvas:vt.canvas,viewport:vt.viewport}}),Pn()})))):A.createElement(fs.h_,null,ge.tooltip.mode!==qe.f3.None&&Ct&&vt&&A.createElement(Zs.S,{position:{x:vt.viewport.x,y:vt.viewport.y},offset:{x:ti,y:ti},allowPointerEvents:st.current},On(Oa,Gt,Mt))))))};var Ic=e(32195);const ni=(N,X,te)=>{let ge=N.options??{};if(X==="natel-discrete-panel"&&te.angular){const Ee=te.angular,Ce=N.fieldConfig??{defaults:{},overrides:[]};Ee.units&&(Ce.defaults.unit=Ee.units);const Oe={fillOpacity:100,lineWidth:0};Ce.defaults.custom=Oe,ge.mergeValues=!0;const We={type:Ic.H.ValueToText,options:{}};if(Ce.defaults.mappings=[We],(0,w.isArray)(Ee.colorMaps))for(const ze of Ee.colorMaps){const rt=ze.color;rt&&(We.options[ze.text]={color:rt})}if((0,w.isArray)(Ee.valueMaps))for(const ze of Ee.valueMaps){const rt=ze.text,st=ze.value;if(rt&&st){let Ct=We.options[st];Ct?Ct.text=rt:We.options[st]={text:rt}}}if((0,w.isArray)(Ee.rangeMaps))for(const ze of Ee.rangeMaps){let rt=+ze.from,st=+ze.to;const Ct=ze.text;Ct&&Ce.defaults.mappings.push({type:Ic.H.RangeToText,options:{from:rt,to:st,result:{text:Ct}}})}N.fieldConfig=Ce}return ge},Tm=Object.freeze([0,0]),go={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:qe.Jp.Auto},Rc={fillOpacity:70,lineWidth:0};class Om{getSuggestionsForData(X){const{dataSummary:te}=X;if(!te.hasData||!te.hasTimeField||!te.hasStringField&&!te.hasNumberField||te.numberFieldCount>=30||te.preferredVisualisationType==="logs")return;X.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Ra.y.StateTimeline})}}const Im=new de.c(Sm).setPanelChangeHandler(ni).useFieldConfig({standardOptions:{[Me.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Ze.S.ContinuousGrYlRd}}},useCustomConfig:N=>{N.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Rc.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:Rc.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:ei.c,override:ei.c,shouldApply:X=>X.type!==Tt.fS.time,process:tt.kG})}}).setPanelOptions(N=>{N.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:go.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:qe.Jp.Auto,label:"Auto"},{value:qe.Jp.Always,label:"Always"},{value:qe.Jp.Never,label:"Never"}]},defaultValue:go.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:go.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:go.rowHeight}),Gn.J(N,!1),wn.L(N,!0)}).setSuggestionsSupplier(new Om).setDataSupport({annotations:!0}),Ac=({data:N,alignedData:X,seriesIdx:te,datapointIdx:ge,timeZone:Ee})=>{const Ce=(0,ie.l4)();if(!N||ge==null)return null;const Oe=X.fields[te],We=[],ze=new Set;if(Oe.getLinks){const Wt=Oe.values[ge],Mt=Oe.display?Oe.display(Wt):{text:`${Wt}`,numeric:+Wt};Oe.getLinks({calculatedValue:Mt,valueRowIndex:ge}).forEach(Yt=>{const zt=`${Yt.title}/${Yt.href}`;ze.has(zt)||(We.push(Yt),ze.add(zt))})}const rt=X.fields[0],st=rt.display||(0,Ls.U_)({field:rt,timeZone:Ee,theme:Ce}),Ct=Oe.state?.origin,Ot=Oe.display||(0,Ls.U_)({field:Oe,timeZone:Ee,theme:Ce}),vt=Oe.values[ge],Ut=Ot(vt),Gt=Ct?(0,It.CZ)(N[Ct.frameIndex].fields[Ct.fieldIndex],N[Ct.frameIndex],N):null;return A.createElement("div",null,A.createElement("div",{style:{fontSize:Ce.typography.bodySmall.fontSize}},A.createElement("strong",null,st(rt.values[ge]).text),A.createElement("br",null),A.createElement(Ji.V,{label:Ut.text,color:Ut.color||Ze.R,isActive:!0}),Gt),We.length>0&&A.createElement("div",{style:{margin:Ce.spacing(1,-1,-1,-1),borderTop:`1px solid ${Ce.colors.border.weak}`}},We.map((Wt,Mt)=>A.createElement(Hs.s,{key:Mt,icon:"external-link-alt",target:Wt.target,label:Wt.title,url:Wt.href,onClick:Wt.onClick}))))};Ac.displayName="StatusHistoryTooltip";const Lc=10,Rm=({data:N,timeRange:X,timeZone:te,options:ge,width:Ee,height:Ce,onChangeTimeRange:Oe})=>{const We=(0,ie.l4)(),ze=(0,A.useRef)(void 0),rt=(0,A.useRef)(!1),[st,Ct]=(0,A.useState)(void 0),[Ot,vt]=(0,A.useState)(null),[Ut,Gt]=(0,A.useState)(null),[Wt,Mt]=(0,A.useState)(null),[Yt,zt]=(0,A.useState)(!1),[Xt,cn]=(0,A.useState)(!1),{sync:on}=(0,An.R9)(),mn=()=>{rt.current=!1,vt(null),cn(!1)},Mn=()=>{rt.current=!rt.current,cn(rt.current)},{frames:Pn,warn:Bn}=(0,A.useMemo)(()=>(0,ss.AR)(N.series,!1,X,We),[N.series,X,We]),Rn=(0,A.useMemo)(()=>(0,ss.SA)(Pn,ge.legend,We),[Pn,ge.legend,We]),$n=(0,A.useCallback)((On,Jn,oa)=>{const Oa=Pn??[],ja=Oa.reduce((Ka,Va)=>Ka+Va.fields.filter(Kn=>Kn.type!==Tt.fS.time).length,0);return Jn===null||oa===null||!On.meta?.transformations?.length&&On.fields.length-1!==ja||!On.fields[Jn]?null:A.createElement(A.Fragment,null,Xt&&A.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},A.createElement(Fr.P,{onClick:mn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),A.createElement(Ac,{data:Oa,alignedData:On,seriesIdx:Jn,datapointIdx:oa,timeZone:te}))},[te,Pn,Xt]),ha=On=>ge.tooltip.mode===qe.f3.None||Wt===null||!Yt&&on&&on()===$s.m.Crosshair?null:A.createElement(fs.h_,null,st&&Ot&&Ut&&A.createElement(Zs.S,{position:{x:Ot.viewport.x,y:Ot.viewport.y},offset:{x:Lc,y:Lc},allowPointerEvents:rt.current},$n(On,Ut,Wt))),Qn=(0,A.useMemo)(()=>Oi(ge.timezone,te),[ge.timezone,te]);return!Pn||Bn?A.createElement("div",{className:"panel-empty"},A.createElement("p",null,Bn??"No data found in response")):Pn[0].length>Ee/2?A.createElement("div",{className:"panel-empty"},A.createElement("p",null,"Too many points to visualize properly. ",A.createElement("br",null),"Update the query to return fewer points. ",A.createElement("br",null),"(",Pn[0].length," points received)")):A.createElement(Tc.K,{theme:We,frames:Pn,structureRev:N.structureRev,timeRange:X,timeZone:Qn,width:Ee,height:Ce,legendItems:Rn,...ge,mode:ss.KN.Samples},(On,Jn)=>(ze.current!==On&&(ze.current=Ha({config:On,onUPlotClick:Mn,setFocusedSeriesIdx:Gt,setFocusedPointIdx:Mt,setCoords:vt,setHover:Ct,isToolTipOpen:rt,isActive:Yt,setIsActive:zt})),A.createElement(A.Fragment,null,A.createElement(Bo.R,{config:On,onZoom:Oe}),ha(Jn),A.createElement(Ar,{config:On,onChangeTimeRange:Oe}))))},Mg=Object.freeze([0,0]),Am={colWidth:.9,rowHeight:.9,showValue:qe.Jp.Auto},Bc={fillOpacity:70,lineWidth:1};class Lm{getSuggestionsForData(X){const{dataSummary:te}=X;if(!te.hasData||!te.hasTimeField||!te.hasStringField&&!te.hasNumberField||te.numberFieldCount>=30||te.rowCountMax>100||te.preferredVisualisationType==="logs")return;X.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:Ze.S.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:Ee=>{Ee.options.colWidth=.7}}}).append({name:Ra.y.StatusHistory})}}const Bm=new de.c(Rm).useFieldConfig({standardOptions:{[Me.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Ze.S.Thresholds}}},useCustomConfig:N=>{N.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Bc.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:Bc.fillOpacity,settings:{min:0,max:100,step:1}})}}).setPanelOptions(N=>{N.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:qe.Jp.Auto,label:"Auto"},{value:qe.Jp.Always,label:"Always"},{value:qe.Jp.Never,label:"Never"}]},defaultValue:qe.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),Gn.J(N,!1),wn.L(N,!0)}).setSuggestionsSupplier(new Lm);var Nm=e(30779);const To={align:"auto",inspect:!1,cellOptions:{type:qe.h2.Auto}};var Um=e(8944);function Nc({onChange:N,value:X,context:te}){const ge=Ee=>{Ee?.currentTarget.checked&&(te.options.footer.show=!1),N(Ee?.currentTarget.checked)};return A.createElement(Um.r,{value:Boolean(X),onChange:ge})}function Uc({cellOptions:N,onChange:X}){const te=Ee=>{N.mode=Ee,X(N)},ge=Ee=>{N.valueDisplayMode=Ee,X(N)};return A.createElement(er.Stack,{direction:"column",gap:0},A.createElement(es.g,{label:"Gauge display mode"},A.createElement(Lo.S,{value:N?.mode??qe.QH.Gradient,onChange:te,options:tl})),A.createElement(es.g,{label:"Value display"},A.createElement(Lo.S,{value:N?.valueDisplayMode??qe.M8.Text,onChange:ge,options:wc})))}const tl=[{value:qe.QH.Basic,label:"Basic"},{value:qe.QH.Gradient,label:"Gradient"},{value:qe.QH.Lcd,label:"Retro LCD"}],wc=[{value:qe.M8.Color,label:"Value color"},{value:qe.M8.Text,label:"Text color"},{value:qe.M8.Hidden,label:"Hidden"}],wm=[{value:qe.v7.Basic,label:"Basic"},{value:qe.v7.Gradient,label:"Gradient"}],Wm=({cellOptions:N,onChange:X})=>{const te=ge=>{N.mode=ge,X(N)};return A.createElement(es.g,{label:"Background display mode"},A.createElement(Lo.S,{value:N?.mode??qe.v7.Gradient,onChange:te,options:wm}))};var Wc=e(59472),nl=e(24115);const Sg=["drawStyle","lineInterpolation","barAlignment","lineWidth","fillOpacity","gradientMode","lineStyle","spanNulls","showPoints","pointSize"],Tg=N=>{const{cellOptions:X,onChange:te}=N,ge=(0,A.useMemo)(()=>{const Oe=(0,xr.F)(nl.U);return(0,Wc.j)(Oe,"ChartCell")},[]),Ee=(0,ie.wW)($m),Ce={...nl.U,...X};return A.createElement(jr.wc,null,ge.list(Sg.map(Oe=>`custom.${Oe}`)).map(Oe=>{if(Oe.showIf&&!Oe.showIf(Ce))return null;const We=Oe.editor,ze=Oe.path;return A.createElement(es.g,{label:Oe.name,key:Oe.id,className:Ee.field},A.createElement(We,{onChange:rt=>te({...X,[ze]:rt}),value:(Fm(ze,Ce)?Ce[ze]:void 0)??Oe.defaultValue,item:Oe,context:{data:[]}}))}))};function Fm(N,X){return N in X}const $m=()=>({field:S.css`
    width: 100%;

    // @TODO don't show "scheme" option for custom gradient mode.
    // it needs thresholds to work, which are not supported
    // for area chart cell right now
    [title='Use color scheme to define gradient'] {
      display: none;
    }
  `}),Fc=({value:N,onChange:X})=>{const te=N.type,ge=(0,ie.wW)(Km),Ee=Kc.find(rt=>rt.value.type===te);let[Ce,Oe]=(0,A.useState)({});const We=rt=>{rt.value!==void 0&&(N=rt.value,Ce[N.type]!==void 0&&Object.keys(Ce[N.type]).length>1&&(N=(0,w.merge)(N,Ce[N.type])),X(N))},ze=rt=>{Ce[N.type]=(0,w.merge)(N,rt),Oe(Ce),X(Ce[N.type])};return A.createElement("div",{className:ge.fixBottomMargin},A.createElement(es.g,null,A.createElement(it.Ph,{options:Kc,value:Ee,onChange:We})),te===qe.h2.Gauge&&A.createElement(Uc,{cellOptions:N,onChange:ze}),te===qe.h2.ColorBackground&&A.createElement(Wm,{cellOptions:N,onChange:ze}),te===qe.h2.Sparkline&&A.createElement(Tg,{cellOptions:N,onChange:ze}))},$c={value:{type:qe.h2.Sparkline},label:"Sparkline"},Kc=[{value:{type:qe.h2.Auto},label:"Auto"},...be.v.featureToggles.timeSeriesTable?[$c]:[],{value:{type:qe.h2.ColorText},label:"Colored text"},{value:{type:qe.h2.ColorBackground},label:"Colored background"},{value:{type:qe.h2.Gauge},label:"Gauge"},{value:{type:qe.h2.JSONView},label:"JSON View"},{value:{type:qe.h2.Image},label:"Image"}],Km=N=>({fixBottomMargin:(0,S.css)({marginBottom:N.spacing(-2)})});var ai=e(69098);const Vc=N=>(!N.pluginVersion&&N.columns&&console.log("Was angular table",N),N.options),zc={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},Vm={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},Hc={cell:"color-background",row:"color-background",value:"color-text"},kc=(N,X)=>[-1/0,...N].map((te,ge)=>({color:X[ge],value:(0,w.isNumber)(te)?te:parseInt(te,10)})),zm=(N,X)=>{const te=N.transformations??[];if(Object.keys(zc).includes(X.transform)){const ge={reducers:[]};X.transform==="timeseries_aggregations"&&(ge.includeTimeField=!1,ge.reducers=X.columns.map(Ee=>Vm[Ee.value])),te.push({id:zc[X.transform],options:ge})}return te},Hm=N=>{const te={matcher:{id:/^\/.*\/$/.test(N.pattern)?Nr.mi.byRegexp:Nr.mi.byName,options:N.pattern},properties:[]};return N.alias&&te.properties.push({id:"displayName",value:N.alias}),N.unit&&te.properties.push({id:"unit",value:N.unit}),N.decimals&&te.properties.push({id:"decimals",value:N.decimals}),N.type==="date"&&te.properties.push({id:"unit",value:`time: ${N.dateFormat}`}),N.link&&te.properties.push({id:"links",value:[{title:(0,w.defaultTo)(N.linkTooltip,""),url:(0,w.defaultTo)(N.linkUrl,""),targetBlank:(0,w.defaultTo)(N.linkTargetBlank,!1)}]}),N.colorMode&&te.properties.push({id:"custom.cellOptions",value:{type:Hc[N.colorMode]}}),N.align&&te.properties.push({id:"custom.align",value:N.align==="auto"?null:N.align}),N.thresholds?.length&&te.properties.push({id:"thresholds",value:{mode:ai.H.Absolute,steps:kc(N.thresholds,N.colors)}}),te},km=N=>{let X={custom:{}};if(N){if(X=(0,w.omitBy)({unit:N.unit,decimals:N.decimals,displayName:N.alias,custom:{align:N.align==="auto"?null:N.align}},w.isNil),N.thresholds.length){const te={mode:ai.H.Absolute,steps:kc(N.thresholds,N.colors)};X.thresholds=te}N.colorMode&&(X.custom.cellOptions={type:Hc[N.colorMode]})}return X},_c=(N,X,te)=>{if(X==="table-old"&&te.angular){const ge=te.angular,Ee=zm(N,ge),Ce=ge.styles.find(ze=>ze.pattern==="/.*/"),Oe=km(Ce),We=ge.styles.filter(ze=>ze.pattern!=="/.*/").map(Hm);N.transformations=Ee,N.fieldConfig={defaults:Oe,overrides:We}}return{}},Og=Object.freeze([0,0]),si={cellHeight:qe.Ss.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]};class _m{getSuggestionsForData(X){const te=X.getListAppender({name:Ra.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:ge=>{ge.fieldConfig.defaults.custom.minWidth=50}}});X.dataSummary.fieldCount===0?te.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):te.append({})}}const to="Table footer",al=["Cell options"],Gc=new de.c(cc).setPanelChangeHandler(_c).setMigrationHandler(Vc).useFieldConfig({useCustomConfig:N=>{N.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:To.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:To.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:To.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell type",editor:Fc,override:Fc,defaultValue:To.cellOptions,process:tt.kG,category:al,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:al,showIf:X=>X.cellOptions.type===qe.h2.Auto||X.cellOptions.type===qe.h2.JSONView||X.cellOptions.type===qe.h2.ColorText||X.cellOptions.type===qe.h2.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:To.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(N=>{N.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:si.showHeader}).addRadio({path:"cellHeight",name:"Cell height",defaultValue:si.cellHeight,settings:{options:[{value:qe.Ss.Sm,label:"Small"},{value:qe.Ss.Md,label:"Medium"},{value:qe.Ss.Lg,label:"Large"}]}}).addBooleanSwitch({path:"footer.show",category:[to],name:"Show table footer",defaultValue:si.footer?.show}).addCustomEditor({id:"footer.reducer",category:[to],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:Nm.S.get("stats-picker").editor,defaultValue:[Vs.gz.sum],showIf:X=>X.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[to],name:"Count rows",description:"Display a single count for all data rows",defaultValue:si.footer?.countRows,showIf:X=>X.footer?.reducer?.length===1&&X.footer?.reducer[0]===Vs.gz.count}).addMultiSelect({path:"footer.fields",category:[to],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async X=>{const te=[];if(X&&X.data&&X.data.length>0){const ge=X.data[0];for(const Ee of ge.fields)if(Ee.type===Tt.fS.number){const Ce=(0,It.CZ)(Ee,ge,X.data),Oe=Ee.name;te.push({value:Oe,label:Ce})}}return te}},defaultValue:"",showIf:X=>X.footer?.show&&!X.footer?.countRows||X.footer?.reducer?.length===1&&X.footer?.reducer[0]!==Vs.gz.count}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:Nc})}).setSuggestionsSupplier(new _m);var Gm=e(54391),Ym=e(93006),Ig=e(2631);const Rg=Object.freeze([0,0]);var Ps=(N=>(N.Code="code",N.HTML="html",N.Markdown="markdown",N))(Ps||{}),Yc=(N=>(N.Go="go",N.Html="html",N.Json="json",N.Markdown="markdown",N.Plaintext="plaintext",N.Sql="sql",N.Typescript="typescript",N.Xml="xml",N.Yaml="yaml",N))(Yc||{});const Ag="plaintext",Oo={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},jc={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function jm(N){const X=(0,ie.wW)(Qm),[te,ge]=(0,A.useState)({mode:N.options.mode,content:Qc(N.options,N.replaceVariables,Ve.ZP.disableSanitizeHtml)});if((0,Ym.Z)(()=>{const{options:Ee,replaceVariables:Ce}=N,Oe=Qc(Ee,Ce,Ve.ZP.disableSanitizeHtml);(Oe!==te.content||Ee.mode!==te.mode)&&ge({mode:Ee.mode,content:Oe})},100,[N]),te.mode===Ps.Code){const Ee=N.options.code??Oo;return A.createElement(zi.p,{key:`${Ee.showLineNumbers}/${Ee.showMiniMap}`,value:te.content,language:Ee.language??Oo.language,width:N.width,height:N.height,containerStyles:X.codeEditorContainer,showMiniMap:Ee.showMiniMap,showLineNumbers:Ee.showLineNumbers,readOnly:!0})}return A.createElement(Be.$,{autoHeightMin:"100%"},A.createElement(Gm.Z,{html:te.content,className:X.markdown,"data-testid":"TextPanel-converted-content"}))}function Qc(N,X,te){let{mode:ge,content:Ee}=N;if(!Ee)return"";switch(Ee=X(Ee,{},N.code?.language==="json"?"json":"html"),ge){case Ps.Code:break;case Ps.HTML:te||(Ee=xi.QX.sanitizeTextPanelContent(Ee));break;case Ps.Markdown:default:Ee=(0,Ig.x)(Ee,{noSanitize:te})}return Ee}const Qm=N=>({codeEditorContainer:S.css`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${N.colors.background.primary};
    }
  `,markdown:(0,S.cx)("markdown-html",S.css`
      height: 100%;
    `)});var Zm=e(89050),Jm=e(25503);const Xm=({value:N,onChange:X,context:te})=>{const ge=(0,A.useMemo)(()=>te.options?.mode??Ps.Markdown,[te]),Ee=(0,ie.wW)(qm),Ce=()=>te.getSuggestions?te.getSuggestions().map(Oe=>(0,Jm.T)(Oe)):[];return A.createElement("div",{className:(0,S.cx)(Ee.editorBox)},A.createElement(Zm.Z,{disableHeight:!0},({width:Oe})=>Oe===0?null:A.createElement(zi.p,{value:N,onBlur:X,onSave:X,language:ge,width:Oe,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:Ce})))},qm=N=>({editorBox:S.css`
    label: editorBox;
    border: 1px solid ${N.colors.border.medium};
    border-radius: ${N.shape.borderRadius(1)};
    margin: ${N.spacing(.5)} 0;
    width: 100%;
  `}),ef=N=>{const X=parseFloat(N.pluginVersion||"6.1");let te=N.options;if(N.hasOwnProperty("content")&&N.hasOwnProperty("mode")){const Ee=N,Ce=Ee.content,Oe=Ee.mode;delete Ee.content,delete Ee.mode,X<7.1&&(te={content:Ce,mode:Oe})}return[Ps.Code,Ps.HTML,Ps.Markdown].find(Ee=>Ee===te.mode)||(te={...te,mode:Ps.Markdown}),te},tf=new de.c(jm).setPanelOptions(N=>{N.addRadio({path:"mode",name:"Mode",settings:{options:[{value:Ps.Markdown,label:"Markdown"},{value:Ps.HTML,label:"HTML"},{value:Ps.Code,label:"Code"}]},defaultValue:jc.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(Yc).map(X=>({value:X,label:X}))},defaultValue:Oo.language,showIf:X=>X.mode===Ps.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:Oo.showLineNumbers,showIf:X=>X.mode===Ps.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:Oo.showMiniMap,showIf:X=>X.mode===Ps.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:Xm,defaultValue:jc.content})}).setMigrationHandler(ef);var nf=e(39393),Zc=e(16366),Jc=e(13512);class Xc{getSuggestionsForData(X){const{dataSummary:te}=X;if(!te.hasTimeField||!te.hasNumberField||te.rowCountTotal<2)return;const ge=X.getListAppender({name:Ra.y.LineChart,pluginId:"timeseries",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ce=>{Ce.options.legend.showLegend=!1,Ce.fieldConfig?.defaults.custom?.drawStyle!==qe.l8.Bars&&(Ce.fieldConfig.defaults.custom.lineWidth=Math.max(Ce.fieldConfig.defaults.custom.lineWidth??1,2))}}}),Ee=100;if(ge.append({name:Ra.y.LineChart}),te.rowCountMax<200&&ge.append({name:Ra.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:qe.KC.Smooth}},overrides:[]}}),te.numberFieldCount===1){ge.append({name:Ra.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),ge.append({name:Ra.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Ze.S.ContinuousGrYlRd},custom:{gradientMode:qe.FI.Scheme,lineInterpolation:qe.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),te.rowCountMax<Ee&&(ge.append({name:Ra.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:qe.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:qe.FI.Hue}},overrides:[]}}),ge.append({name:Ra.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Ze.S.ContinuousGrYlRd},custom:{drawStyle:qe.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:qe.FI.Scheme}},overrides:[]}}));return}ge.append({name:Ra.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:qe.o0.Normal,group:"A"}}},overrides:[]}}),ge.append({name:Ra.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:qe.o0.Percent,group:"A"}}},overrides:[]}}),te.rowCountTotal/te.numberFieldCount<Ee&&(ge.append({name:Ra.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:qe.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:qe.FI.Hue,stacking:{mode:qe.o0.Normal,group:"A"}}},overrides:[]}}),ge.append({name:Ra.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:qe.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:qe.FI.Hue,stacking:{mode:qe.o0.Percent,group:"A"}}},overrides:[]}}))}}function af(N){const X=(0,sn.h4)().getCurrent()?.getPanelById(N);if(X){const te=X.transformations?[...X.transformations]:[];return te.push({id:Jc.W.prepareTimeSeries,options:{format:"wide"}}),{name:"Transform to wide time series format",pluginId:"timeseries",transformations:te}}}const sf=({data:N,timeRange:X,timeZone:te,width:ge,height:Ee,options:Ce,fieldConfig:Oe,onChangeTimeRange:We,replaceVariables:ze,id:rt})=>{const{sync:st,canAddAnnotations:Ct,onThresholdsChange:Ot,canEditThresholds:vt,showThresholds:Ut,onSplitOpen:Gt}=(0,An.R9)(),Wt=(cn,on)=>(0,Co.a_)({field:cn,rowIndex:on,splitOpenFn:Gt,range:X}),Mt=(0,A.useMemo)(()=>Ti(N.series,Ve.vc.theme2,X),[N.series,X]),Yt=(0,A.useMemo)(()=>Oi(Ce.timezone,te),[Ce.timezone,te]),zt=(0,A.useMemo)(()=>{if(Mt?.length&&Mt.every(cn=>cn.meta?.type===nf.P.TimeSeriesLong)){const cn=af(rt);return{message:"Long data must be converted to wide",suggestions:cn?[cn]:void 0}}},[Mt,rt]);if(!Mt||zt)return A.createElement(Ta.Z,{panelId:rt,message:zt?.message,fieldConfig:Oe,data:N,needsTimeField:!0,needsNumberField:!0,suggestions:zt?.suggestions});const Xt=Boolean(Ct&&Ct());return A.createElement(yi.p,{frames:Mt,structureRev:N.structureRev,timeRange:X,timeZone:Yt,width:ge,height:Ee,legend:Ce.legend,options:Ce},(cn,on)=>(on.fields.some(mn=>Boolean(mn.config.links?.length))&&(on=wl(on,Mt,ze,te)),A.createElement(A.Fragment,null,A.createElement(Zc.C,{config:cn}),A.createElement(Bo.R,{config:cn,onZoom:We}),Ce.tooltip.mode===qe.f3.None||A.createElement(Er.i,{frames:Mt,data:on,config:cn,mode:Ce.tooltip.mode,sortOrder:Ce.tooltip.sort,sync:st,timeZone:te}),N.annotations&&A.createElement(bi,{annotations:N.annotations,config:cn,timeZone:te}),Xt?A.createElement(Do,{data:on,timeZone:te,config:cn},({startAnnotating:mn})=>A.createElement(xo,{data:on,config:cn,timeZone:te,replaceVariables:ze,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Mn,Pn)=>{Pn&&mn({coords:Pn.coords})}}]}]})):A.createElement(xo,{data:on,frames:Mt,config:cn,timeZone:te,replaceVariables:ze,defaultItems:[]}),N.annotations&&A.createElement(Mi,{visibleSeries:Vd(cn,Mt),config:cn,exemplars:N.annotations,timeZone:te,getFieldLinks:Wt}),(vt&&Ot||Ut)&&A.createElement($o,{config:cn,fieldConfig:Oe,onThresholdsChange:vt?Ot:void 0}),A.createElement(Ar,{config:cn,onChangeTimeRange:We}))))};var sl=e(56808),rf=e(52566);const of=({value:N,onChange:X})=>{const te=(0,ie.wW)(lf);(!N||N.length<1)&&(N=[""]);const ge=()=>{X([...N,sl.RQ.default])},Ee=Oe=>{const We=N.slice();We.splice(Oe,1),X(We)},Ce=(Oe,We)=>{const ze=N.slice();ze[Oe]=We??sl.RQ.default,ze.length===0||ze.length===1&&ze[0]===""?X(void 0):X(ze)};return A.createElement("div",null,N.map((Oe,We)=>A.createElement("div",{className:te.wrapper,key:`${We}.${Oe}`},A.createElement("span",{className:te.first},A.createElement(rf.O,{onChange:ze=>Ce(We,ze),includeInternal:!0,value:Oe??sl.RQ.default})),We===N.length-1?A.createElement(Kr.h,{ariaLabel:"Add timezone",name:"plus",onClick:ge}):A.createElement(Kr.h,{ariaLabel:"Remove timezone",name:"times",onClick:()=>Ee(We)}))))},lf=N=>({wrapper:S.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:S.css`
    margin-right: 8px;
    flex-grow: 2;
  `});var cf=e(7832);let rl=null;const qc=(N,X,te,ge)=>{if(X==="graph"&&te.angular){const{fieldConfig:Ee,options:Ce,annotations:Oe}=df({...te.angular,fieldConfig:ge,panel:N}),We=(0,sn.h4)().getCurrent();return We&&Oe?.length>0&&(We.annotations.list=[...We.annotations.list,...Oe],rl==null&&(rl=setTimeout(()=>{rl=null,(0,Wl.$t)().refreshTimeModel()}))),N.fieldConfig=Ee,N.alert=te.angular.alert,Ce}return Bg(N),{}};function df(N){let X=[];const te=N.fieldConfig?.overrides??[],ge=N.yaxes??[];let Ee=ed(ge[0]);N.fieldConfig?.defaults&&(Ee={...N.fieldConfig?.defaults,...Ee});const Ce={fill:N.dashes?"dash":"solid",dash:[N.dashLength??10,N.spaceLength??10]};if(N.aliasColors)for(const Ct of Object.keys(N.aliasColors)){const Ot=N.aliasColors[Ct];Ot&&te.push({matcher:{id:Nr.mi.byName,options:Ct},properties:[{id:Me.qb.Color,value:{mode:Ze.S.Fixed,fixedColor:Ot}}]})}let Oe=!1;if(N.seriesOverrides?.length)for(const Ct of N.seriesOverrides){if(!Ct.alias)continue;const vt={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(Ct.alias)?Nr.mi.byRegexp:Nr.mi.byName,options:Ct.alias},properties:[]};let Ut;for(const Gt of Object.keys(Ct)){const Wt=Ct[Gt];switch(Gt){case"alias":case"$$hashKey":break;case"yaxis":if(Wt===2){const Mt=ed(ge[1]);uf(Ee,Mt,vt.properties)}break;case"fill":vt.properties.push({id:"custom.fillOpacity",value:Wt*10});break;case"fillBelowTo":Oe=!0,vt.properties.push({id:"custom.fillBelowTo",value:Wt});break;case"fillGradient":Wt&&(vt.properties.push({id:"custom.fillGradient",value:"opacity"}),vt.properties.push({id:"custom.fillOpacity",value:Wt*10}));break;case"points":vt.properties.push({id:"custom.showPoints",value:Wt?qe.Jp.Always:qe.Jp.Never});break;case"bars":Wt?(vt.properties.push({id:"custom.drawStyle",value:qe.l8.Bars}),vt.properties.push({id:"custom.fillOpacity",value:100})):vt.properties.push({id:"custom.drawStyle",value:qe.l8.Line});break;case"lines":vt.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":vt.properties.push({id:"custom.lineWidth",value:Wt});break;case"pointradius":vt.properties.push({id:"custom.pointSize",value:2+Wt*2});break;case"dashLength":case"spaceLength":case"dashes":switch(Ut||(Ut={fill:Ce.fill,dash:[...Ce.dash]}),Gt){case"dashLength":Ut.dash[0]=Wt;break;case"spaceLength":Ut.dash[1]=Wt;break;case"dashes":Ut.fill=Wt?"dash":"solid";break}break;case"stack":vt.properties.push({id:"custom.stacking",value:mf(Wt)});break;case"color":vt.properties.push({id:"color",value:{fixedColor:Wt,mode:Ze.S.Fixed}});break;case"transform":vt.properties.push({id:"custom.transform",value:Wt==="negative-Y"?qe.pR.NegativeY:qe.pR.Constant});break;default:console.log("Ignore override migration:",Ct.alias,Gt,Wt)}}Ut&&vt.properties.push({id:"custom.lineStyle",value:Ut}),vt.properties.length&&te.push(vt)}const We=Ee.custom??{};We.drawStyle=N.bars?qe.l8.Bars:N.lines?qe.l8.Line:qe.l8.Points,N.points?(We.showPoints=qe.Jp.Always,(0,w.isNumber)(N.pointradius)&&(We.pointSize=2+N.pointradius*2)):We.drawStyle!==qe.l8.Points&&(We.showPoints=qe.Jp.Never),We.lineWidth=N.linewidth,Ce.fill!=="solid"&&(We.lineStyle=Ce),Oe?We.fillOpacity=35:(0,w.isNumber)(N.fill)&&(We.fillOpacity=N.fill*10),(0,w.isNumber)(N.fillGradient)&&N.fillGradient>0&&(We.gradientMode=qe.FI.Opacity,We.fillOpacity=N.fillGradient*10),We.spanNulls=N.nullPointMode===ic.Gl.Ignore,N.steppedLine&&(We.lineInterpolation=qe.KC.StepAfter),We.drawStyle===qe.l8.Bars&&(We.fillOpacity=100),N.stack&&(We.stacking={mode:qe.o0.Normal,group:xr.r.stacking.group}),Ee.custom=(0,w.omitBy)(We,w.isNil),Ee.nullValueMode=N.nullPointMode;const ze={legend:{displayMode:qe.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:qe.f3.Single,sort:qe.As.None}},rt=N.legend;if(rt){if(rt.show?ze.legend.displayMode=rt.alignAsTable?qe.jK.Table:qe.jK.List:ze.legend.showLegend=!1,rt.rightSide&&(ze.legend.placement="right"),N.legend.values){const Ct=(0,w.pickBy)(N.legend);ze.legend.calcs=Lg(Ct)}N.legend.sideWidth&&(ze.legend.width=N.legend.sideWidth),rt.hideZero&&te.push(td(Vs.gz.allIsZero)),rt.hideEmpty&&te.push(td(Vs.gz.allIsNull))}N.timeRegions?.length&&N.timeRegions.map((Ot,vt)=>({name:`T${vt+1}`,color:Ot.colorMode!=="custom"?Ot.colorMode:Ot.fillColor,line:Ot.line,fill:Ot.fill,fromDayOfWeek:Ot.fromDayOfWeek,toDayOfWeek:Ot.toDayOfWeek,from:Ot.from,to:Ot.to})).forEach((Ot,vt)=>{const Ut={datasource:{type:"datasource",uid:"grafana"},enable:!0,hide:!0,filter:{exclude:!1,ids:[N.panel.id]},iconColor:Ot.fillColor??Ot.color,name:`T${vt+1}`,target:{queryType:cf.hR.TimeRegions,refId:"Anno",timeRegion:{fromDayOfWeek:Ot.fromDayOfWeek,toDayOfWeek:Ot.toDayOfWeek,from:Ot.from,to:Ot.to,timezone:"utc"}}};Ot.fill?X.push(Ut):Ot.line&&(Ut.iconColor=Ot.lineColor??"white",X.push(Ut))});const st=N.tooltip;if(st&&(st.shared!==void 0&&(ze.tooltip.mode=st.shared?qe.f3.Multi:qe.f3.Single),st.sort!==void 0&&st.shared))switch(st.sort){case 1:ze.tooltip.sort=qe.As.Ascending;break;case 2:ze.tooltip.sort=qe.As.Descending;break;default:ze.tooltip.sort=qe.As.None}if(N.thresholds&&N.thresholds.length>0){let Ct=[],Ot=!1,vt=!1;const Ut=N.thresholds.sort((Wt,Mt)=>Wt.value>Mt.value?1:-1);for(let Wt=0;Wt<Ut.length;Wt++){const Mt=Ut[Wt],Yt=Ut.length>Wt+1?Ut[Wt+1]:null;Mt.fill&&(Ot=!0),Mt.line&&(vt=!0),Mt.op==="gt"&&Ct.push({value:Mt.value,color:ol(Mt)}),Mt.op==="lt"&&(Ct.length===0&&Ct.push({value:-1/0,color:ol(Mt)}),Yt&&Yt.op==="gt"&&Yt.value>Mt.value?Ct.push({value:Mt.value,color:"transparent"}):Yt&&Yt.op==="lt"?Ct.push({value:Mt.value,color:ol(Yt)}):Ct.push({value:Mt.value,color:"transparent"}))}Ct.length>0&&Ct[0].value!==-1/0&&Ct.unshift({color:"transparent",value:-1/0});let Gt=Ot?qe.i3.Area:qe.i3.Line;vt&&Ot&&(Gt=qe.i3.LineAndArea),Ee.custom.thresholdsStyle={mode:Gt},Ee.thresholds={mode:ai.H.Absolute,steps:Ct}}return N.xaxis&&N.xaxis.show===!1&&N.xaxis.mode==="time"&&te.push({matcher:{id:Nr.mi.byType,options:Tt.fS.time},properties:[{id:"custom.axisPlacement",value:qe.LB.Hidden}]}),{fieldConfig:{defaults:(0,w.omitBy)(Ee,w.isNil),overrides:te},options:ze,annotations:X}}function ol(N){return N.colorMode==="critical"?"red":N.colorMode==="warning"?"orange":N.colorMode==="custom"?N.fillColor||N.lineColor:"red"}function ed(N){if(!N)return{};const X={axisPlacement:N.show?qe.LB.Auto:qe.LB.Hidden};if(N.label&&(X.axisLabel=N.label),N.logBase){const te=N.logBase;(te===2||te===10)&&(X.scaleDistribution={type:qe.wf.Log,log:te})}return(0,w.omitBy)({unit:N.format,decimals:po(N.decimals),min:po(N.min),max:po(N.max),custom:X},w.isNil)}function uf(N,X,te){for(const Ce of Object.keys(X)){const Oe=X[Ce];Ce!=="custom"&&Oe!==N[Ce]&&te.push({id:Ce,value:Oe})}const ge=N.custom??{},Ee=X.custom??{};for(const Ce of Object.keys(Ee)){const Oe=Ee[Ce];Oe!==ge[Ce]&&te.push({id:`custom.${Ce}`,value:Oe})}}function po(N){if((0,w.isNumber)(N))return N;if((0,w.isString)(N)){const X=Number(N);if(!isNaN(X))return X}}function Lg(N){const X=[];for(const te of Object.keys(N)){const ge=Vs.TB.getIfExists(te);ge&&X.push(ge.id)}return X}function Bg(N){N.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(N.fieldConfig.defaults.custom.hideFrom.viz=N.fieldConfig.defaults.custom.hideFrom.graph,delete N.fieldConfig.defaults.custom.hideFrom.graph),N.fieldConfig?.overrides&&(N.fieldConfig.overrides=N.fieldConfig.overrides.map(X=>(X.properties=X.properties.map(te=>(te.id==="custom.hideFrom"&&te.value.graph&&(te.value.viz=te.value.graph,delete te.value.graph),te)),X)))}function td(N){return{matcher:{id:Nr.mi.byValue,options:{reducer:N,op:qe.Bd.GTE,value:0}},properties:[{id:"custom.hideFrom",value:{tooltip:!0,viz:!1,legend:!0}}]}}function mf(N){const X=xr.r.stacking?.group;return{mode:N?qe.o0.Normal:qe.o0.None,group:(0,w.isString)(N)?N:X}}const ff=new de.c(sf).setPanelChangeHandler(qc).useFieldConfig((0,xr.F)(xr.r)).setPanelOptions(N=>{wn.L(N),Gn.J(N),N.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:of,defaultValue:void 0})}).setSuggestionsSupplier(new Xc).setDataSupport({annotations:!0,alertStates:!0});var gf=e(86647),pf=e(94619),Ng=e(72861),hf=e(93183),vf=e(75151),Ef=e(335);const yf={wrapper:S.css`
    height: 100%;
    overflow: scroll;
  `},Io=({data:N})=>{const X=(0,A.createRef)(),te=(0,A.useMemo)(()=>(0,Ef.N)(N.series[0]),[N.series]),{search:ge,setSearch:Ee,spanFindMatches:Ce}=(0,vf.Rx)(te?.spans),[Oe,We]=(0,A.useState)(""),[ze,rt]=(0,A.useState)(""),st=(0,At.Z)(async()=>await(0,gf.F)().get(N.request?.targets[0].datasource?.uid)),Ct=st&&st.value?st.value.type:"unknown";return!N||!N.series.length||!te?A.createElement("div",{className:"panel-empty"},A.createElement("p",null,"No data found in response")):A.createElement("div",{className:yf.wrapper},A.createElement("div",{ref:X}),be.v.featureToggles.newTraceViewHeader?null:A.createElement(Ng.Z,{navigable:!0,searchValue:ge,setSearch:Ee,spanFindMatches:Ce,searchBarSuffix:ze,setSearchBarSuffix:rt,focusedSpanIdForSearch:Oe,setFocusedSpanIdForSearch:We,datasourceType:Ct}),A.createElement(pf.m,{dataFrames:N.series,scrollElementClass:yf.wrapper,traceProp:te,spanFindMatches:Ce,search:ge,focusedSpanIdForSearch:Oe,queryResponse:N,datasource:st.value,topOfViewRef:X,topOfViewRefType:hf.l4.Panel}))},Pf=new de.c(Io),Cf=({data:N,timeRange:X,timeZone:te,width:ge,height:Ee,options:Ce,fieldConfig:Oe,replaceVariables:We,id:ze})=>{const{sync:rt}=(0,An.R9)(),st=(0,A.useMemo)(()=>{if(N.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:N.series};let Ct=N.series,Ot;if(Ce.xField){if(Ot=(0,ar.findFieldIndex)(Ct[0],Ce.xField),Ot==null)return{warning:"Unable to find field: "+Ce.xField,frames:N.series}}else if(Ot=Ct[0].fields.findIndex(vt=>vt.type===Tt.fS.number),Ot===-1)return{warning:"No numeric fields found for X axis",frames:Ct};if(Ot!=null){const vt=Ct[0].fields[Ot];if(vt.type===Tt.fS.number&&!(0,yr.lP)(vt.values))return{warning:"Values must be in ascending order",frames:Ct}}return{frames:Ti(Ct,be.v.theme2,void 0,Ot)}},[N.series,Ce.xField]);return st.warning||!st.frames?A.createElement(Ta.Z,{panelId:ze,fieldConfig:Oe,data:N,message:st.warning,needsNumberField:!0}):A.createElement(yi.p,{frames:st.frames,structureRev:N.structureRev,timeRange:X,timeZone:te,width:ge,height:Ee,legend:Ce.legend,options:Ce},(Ct,Ot)=>(Ot.fields.some(vt=>Boolean(vt.config.links?.length))&&(Ot=wl(Ot,st.frames,We,te)),A.createElement(A.Fragment,null,A.createElement(Zc.C,{config:Ct}),Ce.tooltip.mode===qe.f3.None||A.createElement(Er.i,{frames:st.frames,data:Ot,config:Ct,mode:Ce.tooltip.mode,sortOrder:Ce.tooltip.sort,sync:rt,timeZone:te}),A.createElement(xo,{data:Ot,frames:st.frames,config:Ct,timeZone:te,replaceVariables:We,defaultItems:[]}))))};class Df{getSuggestionsForData(X){const{dataSummary:te}=X;return te.numberFieldCount<2||te.rowCountTotal<2||te.rowCountTotal<2?void 0:X.getListAppender({name:Ra.y.LineChart,pluginId:"trend",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ee=>{Ee.options.legend.showLegend=!1,Ee.fieldConfig?.defaults.custom?.drawStyle!==qe.l8.Bars&&(Ee.fieldConfig.defaults.custom.lineWidth=Math.max(Ee.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const xf=new de.c(Cf).useFieldConfig((0,xr.F)(xr.r)).setPanelOptions(N=>{const X=["X Axis"];N.addFieldNamePicker({path:"xField",name:"X Field",description:"An increasing numeric value",category:X,defaultValue:void 0,settings:{isClearable:!0,placeholderText:"First numeric value",filter:te=>te.type===Tt.fS.number}}),wn.L(N),Gn.J(N)}).setSuggestionsSupplier(new Df),bf=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],nd=()=>{const N=(0,ie.wW)(Mf);return A.createElement("div",{className:N.container},A.createElement("h1",{className:N.title},"Welcome to Grafana"),A.createElement("div",{className:N.help},A.createElement("h3",{className:N.helpText},"Need help?"),A.createElement("div",{className:N.helpLinks},bf.map((X,te)=>A.createElement("a",{key:`${X.label}-${te}`,className:N.helpLink,href:`${X.href}?utm_source=grafana_gettingstarted`},X.label)))))},Mf=N=>({container:S.css`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${N.spacing(3)};

      ${N.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${N.breakpoints.down("sm")} {
        padding: 0 ${N.spacing(1)};
      }
    `,title:S.css`
      margin-bottom: 0;

      ${N.breakpoints.down("lg")} {
        margin-bottom: ${N.spacing(1)};
      }

      ${N.breakpoints.down("md")} {
        font-size: ${N.typography.h2.fontSize};
      }
      ${N.breakpoints.down("sm")} {
        font-size: ${N.typography.h3.fontSize};
      }
    `,help:S.css`
      display: flex;
      align-items: baseline;
    `,helpText:S.css`
      margin-right: ${N.spacing(2)};
      margin-bottom: 0;

      ${N.breakpoints.down("md")} {
        font-size: ${N.typography.h4.fontSize};
      }

      ${N.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:S.css`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:S.css`
      margin-right: ${N.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${N.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),il=new de.c(nd).setNoPadding();var Sf=(N=>(N[N.NoData=0]="NoData",N[N.BadFrameSelection=1]="BadFrameSelection",N[N.XNotFound=2]="XNotFound",N))(Sf||{});function ri(N){return N.type===Tt.fS.number}function Tf(N,X){if(!X||!X.length)return{error:0};N||(N={frame:0});let te=X[N.frame??0];if(!te)return{error:1};let ge=-1;for(let We=0;We<te.fields.length;We++){const ze=te.fields[We];if(N.x&&N.x===(0,It.CZ)(ze,te,X)){ge=We;break}if(ri(ze)&&!N.x){ge=We;break}}let Ee=!1;const Ce=te.fields[ge],Oe=[Ce];for(const We of te.fields)if(We.type===Tt.fS.time&&(Ee=!0),!(We===Ce||!ri(We))){if(N.exclude){const ze=(0,It.CZ)(We,te,X);if(N.exclude.includes(ze))continue}Oe.push(We)}return{x:Ce,fields:{x:ll(Ce),y:ad(Ce)},frame:{...te,fields:Oe},hasData:te.fields.length>0,hasTime:Ee}}function ll(N){return N?X=>N===X||!!(N.state&&N.state===X.state):()=>!1}function ad(N){if(!N)return()=>!1;const X=ll(N);return te=>!X(te,void 0,void 0)}const oi=({value:N,onChange:X,context:te})=>{const ge=(0,A.useMemo)(()=>te?.data?.length?te.data.map((We,ze)=>({value:ze,label:(0,It.nf)(We,ze)})):[{value:0,label:"First result"}],[te.data]),Ee=(0,A.useMemo)(()=>Tf(N,te.data),[te.data,N]),Ce=(0,A.useMemo)(()=>{const We={label:"?",value:void 0},ze={numberFields:[We],yFields:[],xAxis:N?.x?{label:`${N.x} (Not found)`,value:N.x}:We},rt=te.data?te.data[N?.frame??0]:void 0;if(rt){const st=Ee.x?(0,It.CZ)(Ee.x,Ee.frame,te.data):void 0;for(let Ct of rt.fields)if(ri(Ct)){const Ot=(0,It.CZ)(Ct,rt,te.data),vt={label:Ot,value:Ot};ze.numberFields.push(vt),We.label==="?"&&(We.label=`${Ot} (First)`),N?.x&&Ot===N.x&&(ze.xAxis=vt),st!==Ot&&ze.yFields.push({label:Ot,value:N?.exclude?.includes(Ot)})}}return ze},[Ee,te.data,N]),Oe=(0,ie.wW)(Of);return te.data?A.createElement("div",null,A.createElement(es.g,{label:"Data"},A.createElement(it.Ph,{options:ge,value:ge.find(We=>We.value===N?.frame)??ge[0],onChange:We=>{X({...N,frame:We.value})}})),A.createElement(es.g,{label:"X Field"},A.createElement(it.Ph,{options:Ce.numberFields,value:Ce.xAxis,onChange:We=>{X({...N,x:We.value})}})),A.createElement(es.g,{label:"Y Fields"},A.createElement("div",null,Ce.yFields.map(We=>A.createElement("div",{key:We.label,className:Oe.row},A.createElement(Kr.h,{name:We.value?"eye-slash":"eye",onClick:()=>{const ze=N?.exclude?[...N.exclude]:[];let rt=ze.indexOf(We.label);rt<0?ze.push(We.label):ze.splice(rt,1),X({...N,exclude:ze})}}),We.label))))):A.createElement("div",null,"No data...")},Of=N=>({sorter:S.css`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:S.css`
    padding: ${N.spacing(.5,1)};
    border-radius: ${N.shape.borderRadius(1)};
    background: ${N.colors.background.secondary};
    min-height: ${N.spacing(4)};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${N.components.input.borderColor};
  `});var If=e(93022),Rf=e(54643);const Ug=Object.freeze([0,0]);var Af=(N=>(N.Auto="auto",N.Manual="manual",N))(Af||{}),Sr=(N=>(N.Lines="lines",N.Points="points",N.PointsAndLines="points+lines",N))(Sr||{});const wg={exclude:[]},sd={label:qe.Jp.Auto,show:"points"},no={series:[]},ii={...sd},Wg=({value:N,onChange:X,context:te})=>{const[ge,Ee]=(0,A.useState)(0),Ce=(0,ie.wW)(Lf),Oe=(st,Ct,Ot)=>{X(N.map((vt,Ut)=>Ut===Ct?{...vt,[Ot]:st}:vt))},We=()=>{X([...N,{pointColor:{},pointSize:ii.pointSize}]),Ee(N.length)};(0,A.useEffect)(()=>{N?.length||We()},[]);const ze=st=>{X(N.filter((Ct,Ot)=>Ot!==st))},rt=st=>st===ge?`${Ce.row} ${Ce.sel}`:Ce.row;return A.createElement(A.Fragment,null,A.createElement(De.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:We,className:Ce.marginBot},"Add series"),A.createElement("div",{className:Ce.marginBot},N.map((st,Ct)=>A.createElement("div",{key:`series/${Ct}`,className:rt(Ct),onMouseDown:()=>Ee(Ct)},A.createElement(If.X,{name:st.name??`Series ${Ct+1}`,onChange:Ot=>Oe(Ot,Ct,"name")}),A.createElement(Kr.h,{name:"trash-alt",title:"remove",className:(0,S.cx)(Ce.actionIcon),onClick:()=>ze(Ct)})))),ge>=0&&N[ge]&&A.createElement(A.Fragment,null,A.createElement("div",{key:`series/${ge}`},A.createElement(es.g,{label:"X Field"},A.createElement(ji.b,{value:N[ge].x??"",context:te,onChange:st=>Oe(st,ge,"x"),item:{}})),A.createElement(es.g,{label:"Y Field"},A.createElement(ji.b,{value:N[ge].y??"",context:te,onChange:st=>Oe(st,ge,"y"),item:{}})),A.createElement(es.g,{label:"Point color"},A.createElement(Rf.Lm,{value:N[ge].pointColor,context:te,onChange:st=>Oe(st,ge,"pointColor"),item:{}})),A.createElement(es.g,{label:"Point size"},A.createElement(Rf.cL,{value:N[ge].pointSize,context:te,onChange:st=>Oe(st,ge,"pointSize"),item:{settings:{min:1,max:100}}})))))},Lf=N=>({marginBot:S.css`
    margin-bottom: 20px;
  `,row:S.css`
    padding: ${N.spacing(.5,1)};
    border-radius: ${N.shape.borderRadius(1)};
    background: ${N.colors.background.secondary};
    min-height: ${N.spacing(4)};
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3px;
    cursor: pointer;

    border: 1px solid ${N.components.input.borderColor};
    &:hover {
      border: 1px solid ${N.components.input.borderHover};
    }
  `,sel:S.css`
    border: 1px solid ${N.colors.primary.border};
    &:hover {
      border: 1px solid ${N.colors.primary.border};
    }
  `,actionIcon:S.css`
    color: ${N.colors.text.secondary};
    &:hover {
      color: ${N.colors.text};
    }
  `});var rd=e(82965),li=(N=>(N.Points="points",N.Lines="lines",N.PointsAndLines="points+lines",N))(li||{}),cl=(N=>(N.Auto="auto",N.Manual="manual",N))(cl||{});const hp={show:"points",lineWidth:1,lineStyle:{fill:"solid"},pointSize:{fixed:5,min:1,max:20},axisPlacement:qe.LB.Auto},Fg=({allSeries:N,data:X,manualSeriesConfigs:te,seriesMapping:ge,rowIndex:Ee,hoveredPointIndex:Ce,options:Oe,range:We})=>{const ze=(0,ie.wW)(Bf);if(!N||Ee==null)return null;const rt=N[Ce],st=rt.frame(X),Ct=rt.x(st),Ot=rt.y(st);let vt;if(Ot.getLinks){const Mt=Ot.values[Ee],Yt=Ot.display?Ot.display(Mt):{text:`${Mt}`,numeric:+Mt};vt=Ot.getLinks({calculatedValue:Yt,valueRowIndex:Ee}).map(zt=>(zt.title||(zt.title=(0,Co.Rb)(zt.href)),zt))}let Ut=st.fields.filter(Mt=>Mt!==Ct&&Mt!==Ot),Gt=null,Wt=null;if(ge===cl.Manual&&te){const Mt=te[Ce].pointColor?.field??"",Yt=te[Ce].pointSize?.field??"",zt=Mt?(0,ar.findField)(st,Mt):void 0,Xt=Yt?(0,ar.findField)(st,Yt):void 0;Wt={colorFacetFieldName:Mt,sizeFacetFieldName:Yt,colorFacetValue:zt?.values[Ee],sizeFacetValue:Xt?.values[Ee]},Ut=Ut.filter(cn=>cn!==zt&&cn!==Xt)}return Gt={name:(0,It.CZ)(Ot,st),val:Ot.values[Ee],field:Ot,color:rt.pointColor(st)},A.createElement(A.Fragment,null,A.createElement("table",{className:ze.infoWrap},A.createElement("tr",null,A.createElement("th",{colSpan:2,style:{backgroundColor:Gt.color}})),A.createElement("tbody",null,A.createElement("tr",null,A.createElement("th",null,(0,It.CZ)(Ct,st)),A.createElement("td",null,ci(Ct,Ct.values[Ee]))),A.createElement("tr",null,A.createElement("th",null,Gt.name,":"),A.createElement("td",null,ci(Gt.field,Gt.val))),Wt!==null&&Wt.colorFacetFieldName&&A.createElement("tr",null,A.createElement("th",null,Wt.colorFacetFieldName,":"),A.createElement("td",null,Wt.colorFacetValue)),Wt!==null&&Wt.sizeFacetFieldName&&A.createElement("tr",null,A.createElement("th",null,Wt.sizeFacetFieldName,":"),A.createElement("td",null,Wt.sizeFacetValue)),Ut.map((Mt,Yt)=>A.createElement("tr",{key:Yt},A.createElement("th",null,(0,It.CZ)(Mt,st),":"),A.createElement("td",null,ci(Mt,Mt.values[Ee])))),vt&&vt.length>0&&A.createElement("tr",null,A.createElement("td",{colSpan:2},A.createElement(jr.wc,null,vt.map((Mt,Yt)=>A.createElement(De.Qj,{key:Yt,icon:"external-link-alt",target:Mt.target,href:Mt.href,onClick:Mt.onClick,fill:"text",style:{width:"100%"}},Mt.title))))))))};function ci(N,X){return N.display?(0,Ua.zc)(N.display(X)):`${X}`}const Bf=N=>({infoWrap:S.css`
    padding: 8px;
    width: 100%;
    th {
      font-weight: ${N.typography.fontWeightMedium};
      padding: ${N.spacing(.25,2)};
    }
  `,highlight:S.css`
    background: ${N.colors.action.hover};
  `,xVal:S.css`
    font-weight: ${N.typography.fontWeightBold};
  `,icon:S.css`
    margin-right: ${N.spacing(1)};
    vertical-align: middle;
  `});function Nf(N,X,te,ge,Ee,Ce){let Oe,We;try{Oe=Uf(N,X()),We=wf(X,Oe,te,ge,Ee,Ce)}catch(ze){let rt="Unknown error in prepScatter";return typeof ze=="string"?rt=ze:ze instanceof Error&&(rt=ze.message),{error:rt,series:[]}}return{series:Oe,builder:We}}function dl(N,X,te,ge,Ee,Ce){const Oe=X[te],We=Oe.fields[Ee];let ze=We.state??{};ze.seriesIndex=N,We.state=ze;let rt=Ce.pointColorFixed?be.v.theme2.visualization.getColorByName(Ce.pointColorFixed):(0,Ks.YO)(We,be.v.theme2).color,st=()=>rt;const Ct={...ii,...We.config.custom};let Ot=Ks.WO.get(Ze.S.PaletteClassic);if(Ce.pointColorIndex){const Mt=X[te].fields[Ce.pointColorIndex];if(Mt){const Yt=Mt.display??(0,Ls.U_)({field:Mt,theme:be.v.theme2});if(Ot=(0,Ks.fD)(We),Ot.isByValue){const zt=Ce.pointColorIndex;st=Xt=>Xt.fields[zt].values.map(cn=>Yt(cn).color)}else rt=Ot.getCalculator(Mt,be.v.theme2)(Mt.values[0],1),st=()=>rt}}let vt=Ce.pointSizeConfig,Ut=Ce.pointSizeConfig?.fixed??We.config.custom?.pointSize?.fixed??5,Gt=()=>Ut;Ce.pointSizeIndex?Gt=Mt=>{const Yt=(0,ar.getScaledDimensionForField)(Mt.fields[Ce.pointSizeIndex],Ce.pointSizeConfig,qe.B5.Quad),zt=Array(Mt.length);for(let Xt=0;Xt<Mt.length;Xt++)zt[Xt]=Yt.get(Xt);return zt}:vt={fixed:Ut,min:Ut,max:Ut};const Wt=(0,It.CZ)(We,Oe,X);return{name:Wt,frame:Mt=>Mt[te],x:Mt=>Mt.fields[ge],y:Mt=>Mt.fields[Ee],legend:()=>[{label:Wt,color:rt,getItemKey:()=>Wt,yAxis:Ee}],showLine:Ct.show!==Sr.Points,lineWidth:Ct.lineWidth??2,lineStyle:Ct.lineStyle,lineColor:()=>rt,showPoints:Ct.show!==Sr.Lines?qe.Jp.Always:qe.Jp.Never,pointSize:Gt,pointColor:st,pointSymbol:(Mt,Yt)=>"circle",label:qe.Jp.Never,labelValue:()=>"",show:!Oe.fields[Ee].config.custom.hideFrom?.viz,hints:{pointSize:vt,pointColor:{mode:Ot}}}}function Uf(N,X){let te=0;if(!X.length)throw"Missing data";if(N.seriesMapping==="manual"){if(!N.series?.length)throw"Missing series config";const ze=[];for(const rt of N.series){if(!rt?.x)throw"Select X dimension";if(!rt?.y)throw"Select Y dimension";for(let st=0;st<X.length;st++){const Ct=X[st],Ot=(0,ar.findFieldIndex)(Ct,rt.x);if(Ot!=null){const vt=(0,ar.findFieldIndex)(Ct,rt.y);if(vt==null)throw"Y must be in the same frame as X";const Ut={pointColorFixed:rt.pointColor?.fixed,pointColorIndex:(0,ar.findFieldIndex)(Ct,rt.pointColor?.field),pointSizeConfig:rt.pointSize,pointSizeIndex:(0,ar.findFieldIndex)(Ct,rt.pointSize?.field)};ze.push(dl(te++,X,st,Ot,vt,Ut))}}}return ze}const ge=N.dims??{},Ee=ge.frame??0,Ce=X[Ee],Oe=[];let We=(0,ar.findFieldIndex)(Ce,ge.x);for(let ze=0;ze<Ce.fields.length;ze++)if(ri(Ce.fields[ze])){if(We==null||ze===We){We=ze;continue}if(ge.exclude&&ge.exclude.includes((0,It.CZ)(Ce.fields[ze],Ce,X)))continue;Oe.push(ze)}if(We==null)throw"Missing X dimension";if(!Oe.length)throw"No Y values";return Oe.map(ze=>dl(te++,X,Ee,We,ze,{}))}const wf=(N,X,te,ge,Ee,Ce)=>{let Oe,We;function ze(Mt){return(zt,Xt,cn,on)=>(na.Z.orient(zt,Xt,(mn,Mn,Pn,Bn,Rn,$n,ha,Qn,On,Jn,oa,Oa,ja,Ka,Va)=>{const Kn=na.Z.pxRatio,Sn=X[Xt-1];let Vn=zt.data[Xt],Zn=Sn.showLine,Ia=Sn.showPoints===qe.Jp.Always;!Ia&&Sn.showPoints===qe.Jp.Auto&&(Ia=Vn[0].length<1e3),!Ia&&!Zn&&(Zn=!0);let ma=1;zt.ctx.save(),zt.ctx.rect(zt.bbox.left,zt.bbox.top,zt.bbox.width,zt.bbox.height),zt.ctx.clip(),zt.ctx.fillStyle=mn.fill(),zt.ctx.strokeStyle=mn.stroke(),zt.ctx.lineWidth=ma;let La=2*Math.PI,aa=Bn.key,Tn=Rn.key,Ln=Sn.hints.pointSize;const Nn=Sn.hints.pointColor.mode.isByValue;let Yn=(Ln.max??Ln.fixed)*Kn,Xn=zt.posToVal(-Yn/2,aa),fa=zt.posToVal(zt.bbox.width/Kn+Yn/2,aa),pa=zt.posToVal(zt.bbox.height/Kn+Yn/2,Tn),Cs=zt.posToVal(-Yn/2,Tn),gs=Mt.disp.size.values(zt,Xt),Ns=Mt.disp.color.values(zt,Xt),cs=Mt.disp.color.alpha,Tr=Zn?new Path2D:null,Or=null;for(let Us=0;Us<Vn[0].length;Us++){let Ds=Vn[0][Us],Cr=Vn[1][Us],or=gs[Us]*Kn;if(Ds>=Xn&&Ds<=fa&&Cr>=pa&&Cr<=Cs){let hs=$n(Ds,Bn,Jn,Qn),Ir=ha(Cr,Rn,oa,On);Zn&&Tr.lineTo(hs,Ir),Ia&&(zt.ctx.moveTo(hs+or/2,Ir),zt.ctx.beginPath(),zt.ctx.arc(hs,Ir,or/2,0,La),Nn&&Ns[Us]!==Or&&(Or=Ns[Us],zt.ctx.fillStyle=(0,so.alpha)(Or,cs),zt.ctx.strokeStyle=Or),zt.ctx.fill(),zt.ctx.stroke(),Mt.each(zt,Xt,Us,hs-or/2-ma/2,Ir-or/2-ma/2,or+ma,or+ma))}}if(Zn){let Us=Sn.frame(N());zt.ctx.strokeStyle=Sn.lineColor(Us),zt.ctx.lineWidth=Sn.lineWidth*Kn;const{lineStyle:Ds}=Sn;Ds&&Ds.fill!=="solid"&&(Ds.fill==="dot"&&(zt.ctx.lineCap="round"),zt.ctx.setLineDash(Ds.dash??[10,10])),zt.ctx.stroke(Tr)}zt.ctx.restore()}),null)}let rt=ze({disp:{size:{values:(Mt,Yt)=>Mt.data[Yt][2]},color:{values:(Mt,Yt)=>Mt.data[Yt][3],alpha:.5}},each:(Mt,Yt,zt,Xt,cn,on,mn)=>{Xt-=Mt.bbox.left,cn-=Mt.bbox.top,Oe.add({x:Xt,y:cn,w:on,h:mn,sidx:Yt,didx:zt})}});const st=new gi.U;st.setCursor({drag:{setScale:!0},dataIdx:(Mt,Yt)=>{if(Yt===1){const zt=na.Z.pxRatio;We=null;let Xt=1/0,cn=Mt.cursor.left*zt,on=Mt.cursor.top*zt;Oe.get(cn,on,1,1,mn=>{if((0,Yr.Pn)(cn,on,mn.x,mn.y,mn.x+mn.w,mn.y+mn.h)){let Mn=mn.x+mn.w/2,Pn=mn.y+mn.h/2,Bn=Mn-cn,Rn=Pn-on,$n=Math.sqrt(Bn**2+Rn**2);$n<=mn.w/2&&$n<=Xt&&(Xt=$n,We=mn)}})}return We&&Yt===We.sidx?We.didx:null},points:{size:(Mt,Yt)=>We&&Yt===We.sidx?We.w/na.Z.pxRatio:0,fill:(Mt,Yt)=>"rgba(255,255,255,0.4)"}});const Ct=()=>{Ce.current&&(ge(void 0),Ee&&Ee())};let Ot=null;st.addHook("init",(Mt,Yt)=>{Mt.over.style.overflow="hidden",Ot=Mt.root.parentElement,Ee&&Ot?.addEventListener("click",Ee)}),st.addHook("destroy",Mt=>{Ee&&(Ot?.removeEventListener("click",Ee),Ct())});let vt;st.addHook("syncRect",(Mt,Yt)=>{vt=Yt}),st.addHook("setLegend",Mt=>{if(Mt.cursor.idxs!=null)for(let Yt=0;Yt<Mt.cursor.idxs.length;Yt++){const zt=Mt.cursor.idxs[Yt];if(zt!=null&&!Ce.current){ge({scatterIndex:Yt-1,xIndex:zt,pageX:vt.left+Mt.cursor.left,pageY:vt.top+Mt.cursor.top});return}}Ce.current||ge(void 0)}),st.addHook("drawClear",Mt=>{Ct(),Oe=Oe||new Yr.lW(0,0,Mt.bbox.width,Mt.bbox.height),Oe.clear(),Mt.series.forEach((Yt,zt)=>{zt>0&&(Yt._paths=null)})}),st.setMode(2);const Ut=N();let Gt=X[0].x(X[0].frame(Ut));st.addScale({scaleKey:"x",isTime:!1,orientation:qe.wN.Horizontal,direction:qe.bQ.Right,range:(Mt,Yt,zt)=>[Gt.config.min??Yt,Gt.config.max??zt]});let Wt=Gt.config.custom.axisLabel;return st.addAxis({scaleKey:"x",placement:Gt.config.custom?.axisPlacement!==qe.LB.Hidden?qe.LB.Bottom:qe.LB.Hidden,show:Gt.config.custom?.axisPlacement!==qe.LB.Hidden,theme:te,label:Wt==null||Wt===""?(0,It.CZ)(Gt,X[0].frame(Ut),Ut):Wt,formatValue:(Mt,Yt)=>(0,Ua.zc)(Gt.display(Mt,Yt))}),X.forEach((Mt,Yt)=>{let zt=Mt.frame(Ut),Xt=Mt.y(zt);const cn=Mt.lineColor(zt),on=Ff(zt,Mt.pointColor);let mn=Xt.config.unit??"y";if(st.addScale({scaleKey:mn,orientation:qe.wN.Vertical,direction:qe.bQ.Up,max:Xt.config.max,min:Xt.config.min}),Xt.config.custom?.axisPlacement!==qe.LB.Hidden){let Mn=Xt.config.custom?.axisLabel;st.addAxis({scaleKey:mn,theme:te,placement:Xt.config.custom?.axisPlacement,label:Mn==null||Mn===""?(0,It.CZ)(Xt,X[Yt].frame(Ut),Ut):Mn,formatValue:(Pn,Bn)=>(0,Ua.zc)(Xt.display(Pn,Bn))})}st.addSeries({facets:[{scale:"x",auto:!0},{scale:mn,auto:!0}],pathBuilder:rt,theme:te,scaleKey:"",lineColor:cn,fillColor:(0,so.alpha)(on,.5),show:!Xt.config.custom.hideFrom?.viz})}),st};function od(N,X,te){return N.error||!X.length?[null]:[null,...N.series.map((ge,Ee)=>{const Ce=ge.frame(X);let Oe;const We=ge.pointColor(Ce);return Array.isArray(We)?Oe=We:Oe=Array(Ce.length).fill(We),[ge.x(Ce).values,ge.y(Ce).values,Wf(Ce,ge.pointSize),Oe]})]}function Wf(N,X){const te=X(N);return Array.isArray(te)?te:Array(N.length).fill(te)}function Ff(N,X){const te=X(N);return Array.isArray(te)?te[0]:te}const id=10,ld=N=>{const[X,te]=(0,A.useState)(),[ge,Ee]=(0,A.useState)([]),[Ce,Oe]=(0,A.useState)(),[We,ze]=(0,A.useState)(),[rt,st]=(0,A.useState)(),[Ct,Ot]=(0,A.useState)(!1),vt=(0,A.useRef)(!1),Ut=(0,rd.Z)(N.options),Gt=(0,rd.Z)(N.data),Wt=()=>{vt.current=!1,Ot(!1),Yt(void 0)},Mt=()=>{vt.current=!vt.current,Ot(vt.current)},Yt=on=>{st(on)},zt=(0,A.useCallback)(()=>{const on=()=>N.data.series,mn=Nf(N.options,on,be.v.theme2,Yt,Mt,vt);mn.error?te(mn.error):mn.series.length&&N.data.series&&(Oe(mn.builder),Ee(mn.series),ze(()=>od(mn,N.data.series)),te(void 0))},[N.data.series,N.options]),Xt=(0,A.useCallback)(()=>{ze(()=>od({error:X,series:ge},N.data.series))},[N.data.series,X,ge]);(0,A.useEffect)(()=>{Ut!==N.options||Gt?.structureRev!==N.data.structureRev?zt():Gt?.series!==N.data.series&&Xt()},[N]);const cn=()=>{const on=[],mn=Bn=>Bn==null?"-":Bn.toFixed(1),Mn=be.v.theme2;for(let Bn=0;Bn<ge.length;Bn++){const Rn=ge[Bn],$n=Rn.frame(N.data.series);if($n)for(const ha of Rn.legend())ha.getDisplayValues=()=>{const Qn=N.options.legend.calcs;if(!Qn?.length)return[];const On=Rn.y($n),Jn=On.display??mn;let oa=null;const Oa=(0,Vs.Kx)({field:On,reducers:Qn});return Qn.map(ja=>{const Ka=Vs.TB.get(ja);let Va=Jn;return Ka.id===Vs.gz.diffperc&&(Va=(0,Ls.U_)({field:{...On,config:{...On.config,unit:"percent"}},theme:Mn})),(Ka.id===Vs.gz.count||Ka.id===Vs.gz.changeCount||Ka.id===Vs.gz.distinctCount)&&(oa||(oa=(0,Ls.U_)({field:{...On,config:{...On.config,unit:"none"}},theme:Mn})),Va=oa),{...Va(Oa[ja]),title:Ka.name,description:Ka.description}})},ha.disabled=!(Rn.show??!0),N.options.seriesMapping===cl.Manual&&(ha.label=N.options.series?.[Bn]?.name??`Series ${Bn+1}`),on.push(ha)}if(!N.options.legend.showLegend)return null;const Pn={flexStart:S.css`
        div {
          justify-content: flex-start !important;
        }
      `};return A.createElement(va.AY.Legend,{placement:N.options.legend.placement,width:N.options.legend.width},A.createElement(ea.l,{className:Pn.flexStart,placement:N.options.legend.placement,items:on,displayMode:N.options.legend.displayMode}))};return X||!Ce||!We?A.createElement("div",{className:"panel-empty"},A.createElement("p",null,X)):A.createElement(A.Fragment,null,A.createElement(va.AY,{width:N.width,height:N.height,legend:cn()},(on,mn)=>A.createElement(ps.N,{config:Ce,data:We,width:on,height:mn,timeRange:N.timeRange})),A.createElement(fs.h_,null,rt&&N.options.tooltip.mode!==qe.f3.None&&A.createElement(Zs.S,{position:{x:rt.pageX,y:rt.pageY},offset:{x:id,y:id},allowPointerEvents:vt.current},Ct&&A.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},A.createElement(Fr.P,{onClick:Wt,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),A.createElement(Fg,{options:N.options.tooltip,allSeries:ge,manualSeriesConfigs:N.options.series,seriesMapping:N.options.seriesMapping,rowIndex:rt.xIndex,hoveredPointIndex:rt.scatterIndex,data:N.data.series,range:N.timeRange}))))};var cd=e(66683);function $f(N){return{standardOptions:{[Me.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Ze.S.PaletteClassic}}},useCustomConfig:X=>{X.addRadio({path:"show",name:"Show",defaultValue:N.show,settings:{options:[{label:"Points",value:Sr.Points},{label:"Lines",value:Sr.Lines},{label:"Both",value:Sr.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:N.pointSize?.fixed,settings:{min:1,max:100,step:1},showIf:te=>te.show!==Sr.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:te=>te.show!==Sr.Points,editor:cd.j,override:cd.j,process:tt.kG,shouldApply:te=>te.type===Tt.fS.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:N.lineWidth,settings:{min:0,max:10,step:1},showIf:te=>te.show!==Sr.Points}),dn.r(X,N),Dn.B(X)}}}const Kf=new de.c(ld).useFieldConfig($f(ii)).setPanelOptions(N=>{N.addRadio({path:"seriesMapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto",description:"No changes to saved model since 8.0"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"",editor:oi,showIf:X=>X.seriesMapping==="auto"}).addCustomEditor({id:"series",path:"series",name:"",defaultValue:[],editor:Wg,showIf:X=>X.seriesMapping==="manual"}),wn.L(N),Gn.J(N)}),jf={"app/plugins/datasource/graphite/module":async()=>await e.e(7494).then(e.bind(e,86069)),"app/plugins/datasource/cloudwatch/module":async()=>await Promise.all([e.e(4761),e.e(678),e.e(8831)]).then(e.bind(e,20678)),"app/plugins/datasource/dashboard/module":async()=>await e.e(2557).then(e.bind(e,32557)),"app/plugins/datasource/elasticsearch/module":async()=>await Promise.all([e.e(4761),e.e(5048),e.e(4601),e.e(9897)]).then(e.bind(e,14601)),"app/plugins/datasource/opentsdb/module":async()=>await e.e(3168).then(e.bind(e,80808)),"app/plugins/datasource/grafana/module":async()=>await Promise.all([e.e(3755),e.e(7537)]).then(e.bind(e,265)),"app/plugins/datasource/influxdb/module":async()=>await e.e(5783).then(e.bind(e,9722)),"app/plugins/datasource/loki/module":async()=>await Promise.all([e.e(4254),e.e(4666),e.e(6196),e.e(4712),e.e(1598)]).then(e.bind(e,34712)),"app/plugins/datasource/jaeger/module":async()=>await e.e(890).then(e.bind(e,94053)),"app/plugins/datasource/zipkin/module":async()=>await e.e(4023).then(e.bind(e,86098)),"app/plugins/datasource/mixed/module":async()=>await e.e(2001).then(e.bind(e,40336)),"app/plugins/datasource/mysql/module":async()=>await Promise.all([e.e(9243),e.e(4251)]).then(e.bind(e,93157)),"app/plugins/datasource/postgres/module":async()=>await Promise.all([e.e(9243),e.e(534)]).then(e.bind(e,18821)),"app/plugins/datasource/mssql/module":async()=>await Promise.all([e.e(9243),e.e(5032)]).then(e.bind(e,21264)),"app/plugins/datasource/prometheus/module":async()=>await Promise.all([e.e(6488),e.e(4254),e.e(4761),e.e(5048),e.e(8366),e.e(6196),e.e(7004)]).then(e.bind(e,71682)),"app/plugins/datasource/testdata/module":async()=>await e.e(319).then(e.bind(e,50747)),"app/plugins/datasource/cloud-monitoring/module":async()=>await Promise.all([e.e(2773),e.e(3549)]).then(e.bind(e,43737)),"app/plugins/datasource/azuremonitor/module":async()=>await Promise.all([e.e(9046),e.e(2364)]).then(e.bind(e,20172)),"app/plugins/datasource/tempo/module":async()=>await Promise.all([e.e(5644),e.e(295)]).then(e.bind(e,25644)),"app/plugins/datasource/alertmanager/module":async()=>await Promise.all([e.e(4761),e.e(6795)]).then(e.bind(e,98548)),"app/plugins/datasource/phlare/module":async()=>await Promise.all([e.e(4254),e.e(9704)]).then(e.bind(e,61674)),"app/plugins/datasource/parca/module":async()=>await e.e(2015).then(e.bind(e,74775)),"app/plugins/panel/text/module":C,"app/plugins/panel/timeseries/module":D,"app/plugins/panel/trend/module":M,"app/plugins/panel/state-timeline/module":h,"app/plugins/panel/status-history/module":P,"app/plugins/panel/candlestick/module":f,"app/plugins/panel/graph/module":async()=>await Promise.all([e.e(6093),e.e(1260)]).then(e.bind(e,4048)),"app/plugins/panel/xychart/module":R,"app/plugins/panel/geomap/module":async()=>await Promise.all([e.e(8537),e.e(8096)]).then(e.bind(e,88763)),"app/plugins/panel/canvas/module":async()=>await Promise.all([e.e(7638),e.e(8528),e.e(3330)]).then(e.bind(e,2321)),"app/plugins/panel/icon/module":async()=>await Promise.all([e.e(8528),e.e(53)]).then(e.bind(e,10529)),"app/plugins/panel/dashlist/module":u,"app/plugins/panel/alertlist/module":n,"app/plugins/panel/annolist/module":i,"app/plugins/panel/heatmap/module":async()=>await e.e(6987).then(e.bind(e,77899)),"app/plugins/panel/table/module":a,"app/plugins/panel/table-old/module":async()=>await e.e(6784).then(e.bind(e,8414)),"app/plugins/panel/news/module":y,"app/plugins/panel/live/module":p,"app/plugins/panel/stat/module":Mm,"app/plugins/panel/datagrid/module":o,"app/plugins/panel/debug/module":d,"app/plugins/panel/flamegraph/module":r,"app/plugins/panel/gettingstarted/module":m,"app/plugins/panel/gauge/module":Zl,"app/plugins/panel/piechart/module":v,"app/plugins/panel/bargauge/module":l,"app/plugins/panel/barchart/module":s,"app/plugins/panel/logs/module":g,"app/plugins/panel/traces/module":b,"app/plugins/panel/welcome/module":x,"app/plugins/panel/nodeGraph/module":E,"app/plugins/panel/histogram/module":c,"app/plugins/panel/alertGroups/module":t};function Qf(N){const te=new URL(N).pathname.split("/");return{id:te[3],version:te[4]}}function Zf(N){const{address:X}=N,te=X.split("/public/plugin-cdn/");return`${be.v.pluginsCDNBaseURL}/${te[1]}`}function Jf(N){const{id:X,version:te}=Qf(N.name),ge=`${be.v.pluginsCDNBaseURL}/${X}/${te}`;return N.source=N.source.replace(/(\/?)(public\/plugins)/g,`${ge}/$2`),N.source=N.source.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${ge}/public/$2$3`),N.source=N.source.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${ge}/public/plugins/${X}/$2.map`),N.source}function Xf(N){return N.metadata.loader==="cdn-loader"&&N.address.startsWith(`${location.origin}/public/plugin-cdn`)&&(N.address=N.address.replace(`${location.origin}/public/plugin-cdn`,be.v.pluginsCDNBaseURL)),N.address}function md(N){const X=document.getElementsByTagName("link");return Array.from(X).map(ge=>ge.href).includes(N.address)?"":eg(N.address)}const fd="?_cache="+Date.now(),qf=100;function eg(N){return new Promise(function(X,te){const ge=setTimeout(function(){te("Unable to load CSS")},qf*1e3),Ee=function(Oe){clearTimeout(ge),Ce.onload=Ce.onerror=w.noop,setTimeout(function(){Oe?te(Oe):X("")},7)},Ce=document.createElement("link");Ce.type="text/css",Ce.rel="stylesheet",Ce.href=N,Ce.href.startsWith(be.v.pluginsCDNBaseURL)||(Ce.href=Ce.href+fd),Ce.onload=function(){Ee()},Ce.onerror=function(Oe){Ee(Oe instanceof ErrorEvent?Oe.message:new Error("Error loading CSS file."))},document.head.appendChild(Ce)})}var gd=e(82907),qg=e(89377),ep=e(4027),tg=e(59554),tp=e(65103),ng=e(85095),np=e(28844),ag=e(26189),ap=e(47825),_s=e(7540);const Ga=ue;Ga.PanelPlugin=de.c,Ga.DataSourcePlugin=ee.hf,Ga.AppPlugin=me.k8,Ga.DataSourceApi=ee.MF,se.i3.registry.set("css",se.i3.newModule({locate:Xf,fetch:md})),se.i3.registry.set("plugin-loader",se.i3.newModule({locate:gd.hf})),se.i3.registry.set("cdn-loader",se.i3.newModule({locate:Zf,translate:Jf})),se.i3.config({baseURL:"public",defaultExtension:"js",packages:{plugins:{defaultExtension:"js"},"plugin-cdn":{defaultExtension:"js"}},map:{text:"vendor/plugin-text/text.js"},meta:{"/*":{esModule:!0,authorization:!0,loader:"plugin-loader"},"*.css":{loader:"css"},"plugin-cdn/*":{esModule:!0,authorization:!1,loader:"cdn-loader"}}});function Ea(N,X){se.i3.registerDynamic(N,[],!0,(te,ge,Ee)=>{Ee.exports=X})}Ea("@grafana/data",q),Ea("@grafana/ui",Ga),Ea("@grafana/runtime",he),Ea("lodash",K()),Ea("moment",V()),Ea("jquery",F()),Ea("d3",U),Ea("rxjs",oe),Ea("rxjs/operators",G),Ea("react-router",re),Ea("react-router-dom",Q),Ea("prismjs",j()),Ea("slate",le.ZP),Ea("slate-react",ae.ZP),Ea("@grafana/slate-react",ae.ZP),Ea("slate-plain-serializer",fe.Z),Ea("react",A),Ea("react-dom",_),Ea("react-redux",k),Ea("redux",Z),Ea("emotion",S),Ea("@emotion/css",S),Ea("@emotion/react",O),Ea("app/features/dashboard/impression_store",{impressions:Ke.Z,__esModule:!0}),Ea("app/core/services/backend_srv",{BackendSrv:Ie.y$,getBackendSrv:Ie.i}),Ea("app/core/utils/datemath",ne),Ea("app/core/utils/flatten",at),Ea("app/core/utils/kbn",dt.Z),Ea("app/core/utils/ticks",Re),Ea("app/core/config",Ve.ZP),Ea("app/core/time_series",Ge.Z),Ea("app/core/time_series2",Ge.Z),Ea("app/core/table_model",Te.Z),Ea("app/core/app_events",ct.h$),Ea("app/core/core",{appEvents:ct.h$,contextSrv:ct.Vt,__esModule:!0});const pd=["jquery.flot","jquery.flot.pie","jquery.flot.time","jquery.flot.fillbelow","jquery.flot.crosshair","jquery.flot.stack","jquery.flot.selection","jquery.flot.stackpercent","jquery.flot.events","jquery.flot.gauge"];for(const N of pd)Ea(N,{fakeDep:1});async function ul(N,X){X&&(0,gd.Vf)({path:N,version:X});const te=jf[N];return te?typeof te=="function"?await te():te:se.i3.import(N)}function mi(N){return ul(N.module,N.info?.version).then(X=>{if(X.plugin){const te=X.plugin;return te.meta=N,te}if(X.Datasource){const te=new ee.hf(X.Datasource);return te.setComponentsFromLegacyExports(X),te.meta=N,te}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function sg(N){return ul(N.module,N.info?.version).then(X=>{const te=X.plugin?X.plugin:new me.k8;return te.init(N),te.meta=N,te.setComponentsFromLegacyExports(X),te})}},82907:(Y,T,e)=>{"use strict";e.d(T,{Hl:()=>l,Vf:()=>s,hf:()=>f});var t=e(13011);const n={},i=Date.now();function s({path:o,version:d}){n[o]||(n[o]=encodeURI(d))}function l(o){const d=`plugins/${o}/module`;n[d]&&delete n[d],(0,t.Z)(o)}function f(o,d=i){const{address:r}=o,m=u(r);if(!m)return`${r}?_cache=${d}`;const p=n[m]||d;return`${r}?_cache=${p}`}function u(o){const d=/\/public\/(plugins\/.+\/module)\.js/i.exec(o);if(!d)return;const[r,m]=d;if(m)return m}},55111:(Y,T,e)=>{"use strict";e.d(T,{O:()=>l,d:()=>f});var t=e(59250),n=e(38490),i=e(13011),s=e(22215);async function l(u){const o=await(0,i.a)(u);let d;if(o.type===t.zV.app&&(d=await(0,s.Av)(o)),o.type===t.zV.datasource&&(d=await(0,s.nL)(o)),o.type===t.zV.panel&&(d=await(0,n._2)(o)),o.type===t.zV.renderer&&(d={meta:o}),!d)throw new Error("Unknown Plugin type: "+o.type);return d}function f(u,o,d){let r={...u},m;function c(p,g){return!g.startsWith(p.url??"")||m&&(m.url?.length??0)>(p.url?.length??0)?p:(m&&(m.active=!1),m={...p,active:!0},m)}return r.children=(r?.children??[]).map(p=>{if(p.children){const g=p.children.map(y=>c(y,d));return{...c(p,d),children:g}}return c(p,d)}),{main:r,node:m??r}}},54294:(Y,T,e)=>{"use strict";e.d(T,{$S:()=>g,Ns:()=>y,PL:()=>v,Uk:()=>a,YT:()=>m,ZP:()=>R,aw:()=>h,p$:()=>P,qD:()=>E,rf:()=>r,z0:()=>C,zW:()=>c,zc:()=>p});var t=e(62992),n=e(82897),i=e.n(n),s=e(77258),l=e(67483),f=e(47694),u=e(77582);const o={orgId:f.ZP.bootData.user.orgId,timeZone:f.ZP.bootData.user.timezone,weekStart:f.ZP.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},d=(0,t.oM)({name:"user/profile",initialState:o,reducers:{updateTimeZone:(S,O)=>{S.timeZone=O.payload.timeZone},updateWeekStart:(S,O)=>{S.weekStart=O.payload.weekStart},updateFiscalYearStartMonth:(S,O)=>{S.fiscalYearStartMonth=O.payload.fiscalYearStartMonth},setUpdating:(S,O)=>{S.isUpdating=O.payload.updating},userLoaded:(S,O)=>{S.user=O.payload.user},initLoadTeams:(S,O)=>{S.teamsAreLoading=!0},teamsLoaded:(S,O)=>{S.teams=O.payload.teams,S.teamsAreLoading=!1},initLoadOrgs:(S,O)=>{S.orgsAreLoading=!0},orgsLoaded:(S,O)=>{S.orgs=O.payload.orgs,S.orgsAreLoading=!1},initLoadSessions:(S,O)=>{S.sessionsAreLoading=!0},sessionsLoaded:(S,O)=>{const U=O.payload.sessions.sort((I,F)=>Number(F.isActive)-Number(I.isActive));S.sessions=U.map(I=>({id:I.id,isActive:I.isActive,seenAt:(0,s.E8)(I.seenAt),createdAt:I.createdAt,clientIp:I.clientIp,browser:I.browser,browserVersion:I.browserVersion,os:I.os,osVersion:I.osVersion,device:I.device})),S.sessionsAreLoading=!1},userSessionRevoked:(S,O)=>{S.sessions=S.sessions.filter(U=>U.id!==O.payload.tokenId),S.isUpdating=!1}}}),r=S=>async O=>{(0,n.set)(u.Vt,"user.fiscalYearStartMonth",S),O(M({fiscalYearStartMonth:S}))},m=S=>async O=>{(!(0,n.isString)(S)||(0,n.isEmpty)(S))&&(S=f.ZP?.bootData?.user?.timezone),(0,n.set)(u.Vt,"user.timezone",S),O(D({timeZone:S}))},c=S=>async O=>{(!(0,n.isString)(S)||(0,n.isEmpty)(S))&&(S=f.ZP?.bootData?.user?.weekStart),(0,n.set)(u.Vt,"user.weekStart",S),O(b({weekStart:S})),(0,l.Ls)(S)},{setUpdating:p,initLoadOrgs:g,orgsLoaded:y,initLoadTeams:E,teamsLoaded:v,userLoaded:h,userSessionRevoked:P,initLoadSessions:a,sessionsLoaded:C,updateTimeZone:D,updateWeekStart:b,updateFiscalYearStartMonth:M}=d.actions,x=d.reducer,R={user:d.reducer}},25405:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>t,i:()=>n});const t=i=>i.timeZone,n=i=>i.fiscalYearStartMonth},9386:(Y,T,e)=>{"use strict";e.d(T,{S:()=>n,f:()=>i});class t{constructor(){this.extraRenderActions=[]}addExtraRenderAction(l){this.extraRenderActions=this.extraRenderActions.concat(l)}getAllExtraRenderAction(){return this.extraRenderActions}}const n=new t,i=new t},36584:(Y,T,e)=>{"use strict";e.d(T,{x:()=>j,t:()=>_});var t=e(9085),n=e.n(t),i=e(82897),s=e(64681),l=e.n(s),f=e(66111),u=e(206),o=e(47956),d=e(50444),r=e(52666),m=e(83881),c=e(4063),p=e(68183),g=e(86647),y=e(11484),E=e(19985),v=e(52081),h=e(53546),P=e(19117),a=e(1029),C=e(67254),D=e(19349),b=e(96161),M=e(9386),x=e(9892),R=e(53117),S=e(72648),O=e(39904),U=e(46967),I=e(57227);const F=k=>{const{query:Q,queries:re,onChange:Z,collapsedText:oe,renderExtras:G,disabled:le}=k,fe=(0,S.wW)(K),[ae,de]=(0,f.useState)(!1),[ee,me]=(0,f.useState)(null),q=Ve=>{de(!0)},ne=Ve=>{if(de(!1),ee){me(null);return}Q.refId!==Ve&&Z({...Q,refId:Ve})},se=Ve=>{const ct=Ve.currentTarget.value.trim();if(ct.length===0){me("An empty query name is not allowed");return}for(const Ie of re)if(Ie!==Q&&ct===Ie.refId){me("Query name already exists");return}ee&&me(null)},he=Ve=>{ne(Ve.currentTarget.value.trim())},ue=Ve=>{Ve.key==="Enter"&&ne(Ve.target.value)},Te=Ve=>{Ve.target.select()};return f.createElement(f.Fragment,null,f.createElement("div",{className:fe.wrapper},!ae&&f.createElement("button",{className:fe.queryNameWrapper,"aria-label":p.wl.components.QueryEditorRow.title(Q.refId),title:"Edit query name",onClick:q,"data-testid":"query-name-div",type:"button"},f.createElement("span",{className:fe.queryName},Q.refId),f.createElement(O.J,{name:"pen",className:fe.queryEditIcon,size:"sm"})),ae&&f.createElement(f.Fragment,null,f.createElement(U.I,{type:"text",defaultValue:Q.refId,onBlur:he,autoFocus:!0,onKeyDown:ue,onFocus:Te,invalid:ee!==null,onChange:se,className:fe.queryNameInput,"data-testid":"query-name-input"}),ee&&f.createElement(I.S,{horizontal:!0},ee)),w(k,fe),G&&f.createElement("div",{className:fe.itemWrapper},G()),le&&f.createElement("em",{className:fe.contextInfo},"Disabled")),oe&&f.createElement("div",{className:fe.collapsedText},oe))},w=(k,Q)=>{const{alerting:re,dataSource:Z,onChangeDataSource:oe}=k;return oe?f.createElement("div",{className:Q.itemWrapper},f.createElement(R.q,{variables:!0,alerting:re,current:Z.name,onChange:oe})):f.createElement("em",{className:Q.contextInfo},"(",Z.name,")")},K=k=>({wrapper:x.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${k.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:x.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${k.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${k.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${k.colors.action.hover};
        border: 1px dashed ${k.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${k.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:x.css`
      font-weight: ${k.typography.fontWeightMedium};
      color: ${k.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${k.spacing(.5)};
    `,queryEditIcon:(0,x.cx)(x.css`
        margin-left: ${k.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:x.css`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:x.css`
      font-weight: ${k.typography.fontWeightRegular};
      font-size: ${k.typography.bodySmall.fontSize};
      color: ${k.colors.text.secondary};
      padding-left: ${k.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:x.css`
      font-size: ${k.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${k.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:x.css`
      display: flex;
      margin-left: 4px;
    `});var L=e(35645);function V({error:k}){const Q=(0,S.wW)(H),re=k?.message??k?.data?.message??"Query error";return f.createElement("div",{className:Q.wrapper},f.createElement("div",{className:Q.icon},f.createElement(O.J,{name:"exclamation-triangle"})),f.createElement("div",{className:Q.message},re,L.v.featureToggles.showTraceId&&k.traceId!=null&&f.createElement(f.Fragment,null,f.createElement("br",null)," ",f.createElement("span",null,"(Trace ID: ",k.traceId,")"))))}const H=k=>({wrapper:(0,x.css)({marginTop:k.spacing(.5),background:k.colors.background.secondary,display:"flex"}),icon:(0,x.css)({background:k.colors.error.main,color:k.colors.error.contrastText,padding:k.spacing(1)}),message:(0,x.css)({fontSize:k.typography.bodySmall.fontSize,fontFamily:k.typography.fontFamilyMonospace,padding:k.spacing(1)})});class j extends f.PureComponent{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.dataSourceSrv=(0,g.F)(),this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const Q=(0,y.w)(),re='<plugin-component type="query-ctrl" />',Z={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=Q.load(this.element,Z,re),this.angularScope=Z.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:Q,onChange:re,queries:Z,onRunQuery:oe,onAddQuery:G,app:le=u.zj.PanelEditor,history:fe}=this.props,{datasource:ae,data:de}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(ae?.components?.QueryCtrl)return f.createElement("div",{ref:ee=>this.element=ee});if(ae){let ee=this.getReactQueryEditor(ae);if(ee)return f.createElement(o.n,{instanceSettings:this.props.dataSource},f.createElement(ee,{key:ae?.name,query:Q,datasource:ae,onChange:re,onRunQuery:oe,onAddQuery:G,data:de,range:(0,D.$t)().timeRange(),queries:Z,app:le,history:fe}))}return f.createElement("div",null,"Data source plugin does not export any Query Editor component")},this.onToggleEditMode=(Q,re)=>{Q.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),re.isOpen||re.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:Q,query:re,onQueryRemoved:Z}=this.props;Q(re),Z&&Z()},this.onCopyQuery=()=>{const{query:Q,onAddQuery:re,onQueryCopied:Z}=this.props,oe=(0,i.cloneDeep)(Q);re(oe),Z&&Z()},this.onDisableQuery=()=>{const{query:Q,onChange:re,onRunQuery:Z,onQueryToggled:oe}=this.props;re({...Q,hide:!Q.hide}),Z(),oe&&oe(Q.hide)},this.onToggleHelp=()=>{this.setState(Q=>({showingHelp:!Q.showingHelp}))},this.onClickExample=Q=>{Q.datasource===void 0&&(Q.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...Q,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:Q,query:re}=this.props,oe=(_(Q,re.refId)?.series??[]).reduce((ae,de)=>{if(!de.meta?.notices)return ae;const ee=(0,i.filter)(de.meta.notices,{severity:"warning"})??[];return ae.concat(ee)},[]),G=(0,i.uniqBy)(oe,"text");if(!(G.length>0))return null;const fe=G.map(ae=>ae.text).join(`
`);return f.createElement(E.C,{color:"orange",icon:"exclamation-triangle",text:f.createElement(f.Fragment,null,G.length," ",l()("warning",G.length)),tooltip:fe})},this.renderExtraActions=()=>{const{query:Q,queries:re,data:Z,onAddQuery:oe,dataSource:G}=this.props,le=M.f.getAllExtraRenderAction().map((fe,ae)=>fe({query:Q,queries:re,timeRange:Z.timeRange,onAddQuery:oe,dataSource:G,key:ae})).filter(Boolean);return le.push(this.renderWarnings()),le},this.renderActions=Q=>{const{query:re,hideDisableQuery:Z=!1}=this.props,{hasTextEditMode:oe,datasource:G,showingHelp:le}=this.state,fe=!!re.hide,ae=G?.components?.QueryEditorHelp;return f.createElement(v.Lh,{width:"auto"},ae&&f.createElement(a.V,{title:"Show data source help",icon:"question-circle",onClick:this.onToggleHelp,active:le}),oe&&f.createElement(a.y,{title:"Toggle text edit mode",icon:"pen",onClick:de=>{this.onToggleEditMode(de,Q)}}),this.renderExtraActions(),f.createElement(a.y,{title:"Duplicate query",icon:"copy",onClick:this.onCopyQuery}),Z?null:f.createElement(a.V,{title:"Disable query",icon:fe?"eye-slash":"eye",active:fe,onClick:this.onDisableQuery}),f.createElement(a.y,{title:"Remove query",icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=Q=>{const{alerting:re,query:Z,dataSource:oe,onChangeDataSource:G,onChange:le,queries:fe,renderHeaderExtras:ae}=this.props;return f.createElement(F,{query:Z,queries:fe,onChangeDataSource:G,dataSource:oe,disabled:Z.hide,onClick:de=>this.onToggleEditMode(de,Q),onChange:le,collapsedText:Q.isOpen?null:this.renderCollapsedText(),renderExtras:ae,alerting:re})}}componentDidMount(){const{data:Q,query:re,id:Z}=this.props,oe=_(Q,re.refId);this.id=(0,i.uniqueId)(Z+"_"),this.setState({data:oe}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:Q,queries:re}=this.props,{datasource:Z}=this.state,oe=new b.rY({targets:re}),G={},le=this;return{datasource:Z,target:Q,panel:oe,dashboard:G,refresh:()=>{Q.hide!==le.props.query.hide&&(Q.hide=le.props.query.hide),this.props.onChange(Q),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new d.F,range:(0,D.$t)().timeRange()}}getInterpolatedDataSourceUID(){if(this.props.query.datasource){const Q=this.dataSourceSrv.getInstanceSettings(this.props.query.datasource);return Q?.rawRef?.uid??Q?.uid}return this.props.dataSource.rawRef?.uid??this.props.dataSource.uid}async loadDatasource(){let Q;const re=this.getInterpolatedDataSourceUID();try{Q=await this.dataSourceSrv.get(re)}catch{Q=await this.dataSourceSrv.get()}typeof this.props.onDataSourceLoaded=="function"&&this.props.onDataSourceLoaded(Q),this.setState({datasource:Q,queriedDataSourceIdentifier:re,hasTextEditMode:(0,i.has)(Q,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(Q){const{datasource:re,queriedDataSourceIdentifier:Z}=this.state,{data:oe,query:G}=this.props;if(Q.id!==this.props.id&&(this.id=(0,i.uniqueId)(this.props.id+"_")),oe!==Q.data){const le=_(oe,G.refId);this.setState({data:le}),this.angularScope&&(this.angularScope.range=(0,D.$t)().timeRange()),this.angularQueryEditor&&le&&A(this.angularScope,le,this.angularQueryEditor)}if(re&&Z!==this.getInterpolatedDataSourceUID()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(Q){if(Q)switch(this.props.app){case u.zj.Explore:return Q.components?.ExploreMetricsQueryField||Q.components?.ExploreLogsQueryField||Q.components?.ExploreQueryField||Q.components?.QueryEditor;case u.zj.PanelEditor:case u.zj.Dashboard:default:return Q.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.getInterpolatedDataSourceUID()!==this.state.queriedDataSourceIdentifier}renderCollapsedText(){const{datasource:Q}=this.state;return Q?.getQueryDisplayText?Q.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:Q,index:re,visualization:Z}=this.props,{datasource:oe,showingHelp:G,data:le}=this.state,fe=Q.hide,ae=n()("query-editor-row",{"query-editor-row--disabled":fe,"gf-form-disabled":fe});if(!oe)return null;const de=this.renderPluginEditor(),ee=oe.components?.QueryEditorHelp;return f.createElement("div",{"data-testid":"query-editor-row","aria-label":p.wl.components.QueryEditorRows.rows},f.createElement(C.t,{id:this.id,draggable:!0,index:re,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},f.createElement("div",{className:ae,id:this.id},f.createElement(h.z4,null,G&&ee&&f.createElement(P.h,null,f.createElement(ee,{onClickExample:me=>this.onClickExample(me),query:this.props.query,datasource:oe})),de),le?.error&&le.error.refId===Q.refId&&f.createElement(V,{error:le.error}),Z)))}}function A(k,Q,re){if(Q.state===r.Gu.Done){const Z=Q.series.map(oe=>(0,m.Zr)(oe));k.events.emit(c.Kh.dataReceived,Z)}else Q.state===r.Gu.Error&&k.events.emit(c.Kh.dataError,Q.error);setTimeout(re.digest)}function _(k,Q){const re=k.series.filter(le=>le.refId===Q);if(k.state!==r.Gu.Loading&&(k.error||k.errors?.length)&&!k.series.length)return{...k,state:r.Gu.Error};let Z=k.state,oe=k.errors?.find(le=>le.refId===Q);!oe&&k.error&&(oe=k.error.refId===Q?k.error:void 0),Z!==r.Gu.Loading&&(oe?Z=r.Gu.Error:k.state===r.Gu.Error&&(Z=r.Gu.Done));const G=k.timeRange;return{...k,state:Z,series:re,error:oe,errors:oe?[oe]:void 0,timeRange:G}}},87865:(Y,T,e)=>{"use strict";e.d(T,{Tl:()=>ee,kt:()=>fe});var t=e(46528),n=e(91017),i=e(53376),s=e(12877),l=e(25740),f=e(9471),u=e(82615),o=e(7880),d=e(61474),r=e(86318),m=e(57027),c=e(46978),p=e(82378),g=e(47694),y=e(82897);function E(me){let q=[];const ne=(0,y.partition)(me,"id"),se=(0,y.groupBy)(ne[0],"id");return q=(0,y.map)(se,he=>he.length>1&&!(0,y.every)(he,v)?(0,y.find)(he,ue=>ue.eventType!=="panel-alert"):(0,y.head)(he)),q=(0,y.concat)(q,ne[1]),q}function v(me){return me.eventType==="panel-alert"}var h=e(19349),P=e(49372),a=e(59724),C=e(54899),D=e(55197);class b{canWork({dashboard:q,range:ne}){return!(!q.id||ne.raw.to!=="now"||!q.panels.find(se=>!!se.alert))}work(q){if(!this.canWork(q))return(0,D.H_)();const{dashboard:ne}=q;return(0,P.D)((0,C.i)().get("/api/alerts/states-for-dashboard",{dashboardId:ne.id},`dashboard-query-runner-alert-states-${ne.id}`)).pipe((0,f.U)(se=>({alertStates:se,annotations:[]})),(0,a.K)(D.Rc))}}var M=e(59980),x=e(39859),R=e(90801),S=e(86647),O=e(45984),U=e(17424),I=e(86953);class F{canRun(q){return q?Boolean(!q.annotationQuery||q.annotations):!1}run({annotation:q,datasource:ne,dashboard:se,range:he}){if(!this.canRun(ne))return(0,M.of)([]);const ue={};return(0,I.r)({dashboard:se,range:he,panel:ue},ne,q).pipe((0,f.U)(Te=>Te.events??[]),(0,a.K)(D.h1))}}var w=e(573);class K{canRun(q){return q?(0,w.yr)(q)?!0:Boolean(q.annotationQuery&&!q.annotations):!1}run({annotation:q,datasource:ne,dashboard:se,range:he}){return this.canRun(ne)?(0,P.D)(ne.annotationQuery({range:he,rangeRaw:he.raw,annotation:q,dashboard:se})).pipe((0,a.K)(D.h1)):(0,M.of)([])}}class L{constructor(q=[new K,new F]){this.runners=q}canWork({dashboard:q}){const ne=q.annotations.list.find(L.getAnnotationsToProcessFilter);return Boolean(ne)}work(q){if(!this.canWork(q))return(0,D.H_)();const{dashboard:ne,range:se}=q;let he=ne.annotations.list.filter(L.getAnnotationsToProcessFilter);ne.meta.publicDashboardAccessToken&&he.length>0&&(he=[he[0]]);const ue=he.map(Te=>{let Ve;if((0,g.iE)().isPublicDashboardView){const ct=new U.lh(U.Qi);Ve=(0,M.of)(ct).pipe((0,a.K)(D.hs))}else Ve=(0,P.D)((0,S.F)().get(Te.datasource)).pipe((0,a.K)(D.hs));return Ve.pipe((0,x.z)(ct=>{const Ie=this.runners.find(Ke=>Ke.canRun(ct));return Ie?(ne.events.publish(new O.z(Te)),Ie.run({annotation:Te,datasource:ct,dashboard:ne,range:se}).pipe((0,u.R)(fe().cancellations().pipe((0,R.h)(Ke=>Ke===Te))),(0,f.U)(Ke=>(ne.snapshot&&(Te.snapshotData=(0,y.cloneDeep)(Ke)),ne.meta.publicDashboardAccessToken?Ke:(0,D.pG)(Te,Ke))),(0,r.x)(()=>{ne.events.publish(new O.RB(Te))}))):(0,M.of)([])}))});return(0,s.T)(ue).pipe((0,o.J)(),(0,d.u)((Te,Ve)=>Te.concat(Ve)),(0,f.U)(Te=>({annotations:Te,alertStates:[]})))}static getAnnotationsToProcessFilter(q){return q.enable&&!Boolean(q.snapshotData)}}var V=e(56422),H=e(97865),j=e(82002),A=e(37190),_=e(79662),k=e(27876),Q=e(46063);class re{constructor(){this.hasAlertRules={}}canWork({dashboard:q,range:ne}){return!(!q.uid||q.meta.publicDashboardAccessToken||ne.raw.to!=="now"||this.hasAlertRules[q.uid]===!1||!(j.Vt.hasPermission(k.AccessControlAction.AlertingRuleRead)&&j.Vt.hasPermission(k.AccessControlAction.AlertingRuleExternalRead)))}work(q){if(!this.canWork(q))return(0,D.H_)();const{dashboard:ne}=q;return(0,P.D)((0,C.i)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:ne.uid},`dashboard-query-runner-unified-alert-states-${ne.id}`)).pipe((0,f.U)(se=>{if(se.status==="success"){this.hasAlertRules[ne.uid]=!1;const he={};return se.data.groups.forEach(ue=>ue.rules.forEach(Te=>{if((0,_.x_)(Te)&&Te.annotations&&Te.annotations[A.q6.panelID]){this.hasAlertRules[ne.uid]=!0;const Ve=Number(Te.annotations[A.q6.panelID]),ct=Z(Te.state);he[Ve]?ct===H.Z.Alerting&&he[Ve].state!==H.Z.Alerting?he[Ve].state=H.Z.Alerting:ct===H.Z.Pending&&he[Ve].state!==H.Z.Alerting&&he[Ve].state!==H.Z.Pending&&(he[Ve].state=H.Z.Pending):he[Ve]={state:ct,id:Object.keys(he).length,panelId:Ve,dashboardId:ne.id}}})),{alertStates:Object.values(he),annotations:[]}}throw new Error("Unexpected alert rules response.")}),(0,a.K)(D.Rc))}}function Z(me){return me===Q.x_.Firing?H.Z.Alerting:me===Q.x_.Pending?H.Z.Pending:H.Z.OK}class oe{constructor(q,ne=(0,h.$t)(),se=[g.vc.unifiedAlertingEnabled?new re:new b,new V.g,new L]){this.dashboard=q,this.timeSrv=ne,this.workers=se,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new t.t(1),this.runs=new n.x,this.cancellationStream=new n.x,this.runsSubscription=this.runs.subscribe(he=>this.executeRun(he)),this.eventsSubscription=q.events.subscribe(p.U5,he=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(q){this.runs.next(q)}getResult(q){return this.results.asObservable().pipe((0,f.U)(ne=>{const se=(0,D.tD)(ne.annotations,q),he=ne.alertStates.find(ue=>Boolean(q)&&ue.panelId===q);return{annotations:E(se),alertState:he}}))}executeRun(q){const se=this.workers.filter(ct=>ct.canWork(q)).map(ct=>ct.work(q)),he=new i.w0,ue=(0,s.T)(se).pipe((0,u.R)(this.runs.asObservable()),(0,o.J)(),(0,d.u)((ct,Ie)=>(ct.annotations=ct.annotations.concat(Ie.annotations),ct.alertStates=ct.alertStates.concat(Ie.alertStates),ct)),(0,r.x)(()=>{he.unsubscribe()}),(0,m.B)()),Te=new i.w0,Ve=(0,l.H)(200).pipe((0,c.h)({annotations:[],alertStates:[]}),(0,u.R)(ue),(0,r.x)(()=>{Te.unsubscribe()}));Te.add(Ve.subscribe(ct=>{this.results.next(ct)})),he.add(ue.subscribe(ct=>{this.results.next(ct)}))}cancel(q){this.cancellationStream.next(q)}cancellations(){return this.cancellationStream.asObservable().pipe((0,m.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let G;function le(me){G&&G.destroy(),G=me}function fe(){if(!G)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return G}let ae;function de(me){ae=me}function ee(me){ae||(ae=({dashboard:ne,timeSrv:se,workers:he})=>new oe(ne,se,he));const q=ae(me);return le(q),q}},56422:(Y,T,e)=>{"use strict";e.d(T,{g:()=>i});var t=e(59980),n=e(55197);class i{canWork({dashboard:l}){return l?.annotations?.list?.some(f=>f.enable&&Boolean(f.snapshotData))}work(l){if(!this.canWork(l))return(0,n.H_)();const f=this.getAnnotationsFromSnapshot(l.dashboard);return(0,t.of)({annotations:f,alertStates:[]})}getAnnotationsFromSnapshot(l){return(l?.annotations?.list?.filter(d=>d.enable)).filter(d=>Boolean(d.snapshotData)).reduce((d,r)=>d.concat((0,n.pG)(r,r.snapshotData)),[])}getAnnotationsInSnapshot(l,f){const u=this.getAnnotationsFromSnapshot(l);return(0,n.tD)(u,f)}}},55197:(Y,T,e)=>{"use strict";e.d(T,{H_:()=>c,Rc:()=>p,em:()=>v,h1:()=>r,hs:()=>m,pG:()=>E,tD:()=>y});var t=e(82897),n=e.n(t),i=e(59980),s=e(12115),l=e(77599),f=e(35645),u=e(3153),o=e(60499),d=e(98864);function r(h){return h.cancelled?(0,i.of)([]):(g("AnnotationQueryRunner failed",h),(0,i.of)([]))}function m(h){return g("Failed to retrieve datasource",h),(0,i.of)(void 0)}const c=()=>(0,i.of)({annotations:[],alertStates:[]});function p(h){return h.cancelled||g("DashboardQueryRunner failed",h),c()}function g(h,P){const a=(0,l.P)(P);console.error("handleAnnotationQueryRunnerError",a);const C=(0,o.t_)(h,a.message);(0,u.WI)((0,d.$l)(C))}function y(h,P){return P==null?h:h.filter(a=>{let C;if(C=a.source,!C)return!0;if(C.filter){const D=(C.filter.ids??[]).includes(P);if(C.filter.exclude){if(D)return!1}else if(!D)return!1}return a.panelId&&a.source.type==="dashboard"?a.panelId===P:!0})}function E(h,P){h.snapshotData&&(h=(0,t.cloneDeep)(h),delete h.snapshotData);for(const a of P)switch(a.source=h,a.color=f.v.theme2.visualization.getColorByName(h.iconColor),a.type=h.name,a.isRegion=Boolean(a.timeEnd&&a.time!==a.timeEnd),a.newState?.toLowerCase()){case"pending":a.color="yellow";break;case"alerting":a.color="red";break;case"ok":a.color="green";break;case"normal":a.color="green";break;case"no_data":a.color="gray";break;case"nodata":a.color="gray";break}return P}function v(h){if(!h||!h.length)return[];const P=[];for(const a of h){const C=new s.U(a);for(let D=0;D<a.length;D++){const b=(0,t.cloneDeep)(C.get(D));P.push(b)}}return P}},49003:(Y,T,e)=>{"use strict";e.d(T,{o:()=>O,t:()=>S});var t=e(82897),n=e(46528),i=e(59980),s=e(39859),l=e(9471),f=e(52666),u=e(83881),o=e(75849),d=e(76095),r=e(96905),m=e(13946),c=e(206),p=e(47891),g=e(20308),y=e(77599),E=e(22069),v=e(14035),h=e(91162),P=e(79543),a=e(17424),C=e(87865),D=e(23351),b=e(86029);function M(I,F){return(0,D.a)([I,F]).pipe((0,s.z)(w=>{const[K,L]=w;if(Boolean(L.annotations?.length)||Boolean(L.alertState)){K.annotations||(K.annotations=[]);const V=K.annotations.concat(new b.i(L.annotations)),H=L.alertState;return(0,i.of)({...K,annotations:V,alertState:H})}return(0,i.of)(K)}))}var x=e(75434);let R=100;function S(){return"Q"+R++}class O{constructor(F){this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new n.t(1),this.dataConfigSource=F}getData(F){const{withFieldConfig:w,withTransforms:K}=F;let L=1,V,H=[],j=[],A,_=!0,k=-1;if(this.dataConfigSource.snapshotData){const Q={state:f.Gu.Done,series:this.dataConfigSource.snapshotData.map(re=>(0,u.g0)(re)),timeRange:(0,o.JK)()};return(0,i.of)(Q)}return this.subject.pipe((0,s.z)(Q=>{let re=this.dataConfigSource.getFieldOverrideOptions(),Z=this.dataConfigSource.getTransformations();if(Q.series===j&&V?.fieldConfig===re?.fieldConfig&&A===Z)return(0,i.of)({...Q,structureRev:L,series:H});V=re,A=Z,j=Q.series;let oe=(0,i.of)(Q);return K&&(oe=this.applyTransformations(Q)),oe.pipe((0,l.U)(G=>{let le=G,fe=!1;if(w&&G.series?.length){if(k===this.dataConfigSource.configRev){const ae=G.series.find(de=>(0,v.iL)(de));ae&&!ae.packetInfo.schemaChanged&&H[0].fields.length===ae.fields.length&&(le={...le,series:H.map((de,ee)=>({...de,length:G.series[ee].length,fields:de.fields.map((me,q)=>({...me,values:G.series[ee].fields[q].values,state:{...me.state,calcs:void 0,range:void 0}}))}))},fe=!0)}re!=null&&(_||!fe)&&(k=this.dataConfigSource.configRev,le={...le,series:(0,d.SM)({timeZone:G.request?.timezone??"browser",data:le.series,...re})},_=!1)}return!fe&&!(0,r.nl)(H,le.series,r.Ch)&&L++,H=le.series,{...le,structureRev:L}}))}))}applyTransformations(F){const w=this.dataConfigSource.getTransformations();if(!w||w.length===0)return(0,i.of)(F);const K={interpolate:L=>(0,g.J)().replace(L,F?.request?.scopedVars)};return(0,m.H)(w,F.series,K).pipe((0,l.U)(L=>({...F,series:L})))}async run(F){const{queries:w,timezone:K,datasource:L,panelId:V,dashboardUID:H,publicDashboardAccessToken:j,timeRange:A,timeInfo:_,cacheTimeout:k,queryCachingTTL:Q,maxDataPoints:re,scopedVars:Z,minInterval:oe,app:G}=F;if((0,P.yl)(L)){this.pipeToSubject((0,P.AK)(F,w[0]),V,!0);return}const le={app:G??c.zj.Dashboard,requestId:S(),timezone:K,panelId:V,dashboardUID:H,publicDashboardAccessToken:j,range:A,timeInfo:_,interval:"",intervalMs:0,targets:(0,t.cloneDeep)(w),maxDataPoints:re,scopedVars:Z||{},cacheTimeout:k,queryCachingTTL:Q,startTime:Date.now(),rangeRaw:A.raw};try{const fe=await U(L,le.scopedVars,j),ae=fe.meta?.mixed;le.targets=le.targets.map(me=>{const q=me.datasource?.type===E.hr.type;return(!me.datasource||me.datasource.uid!==fe.uid&&!ae&&!q)&&(me.datasource=fe.getRef()),me});const de=oe?(0,g.J)().replace(oe,le.scopedVars):fe.interval,ee=p.calculateInterval(A,re,de);le.scopedVars=Object.assign({},le.scopedVars,{__interval:{text:ee.interval,value:ee.interval},__interval_ms:{text:ee.intervalMs.toString(),value:ee.intervalMs}}),le.interval=ee.interval,le.intervalMs=ee.intervalMs,this.lastRequest=le,this.pipeToSubject((0,x.v7)(fe,le),V)}catch(fe){this.pipeToSubject((0,i.of)({state:f.Gu.Error,error:(0,y.P)(fe),series:[],timeRange:le.range}),V)}}pipeToSubject(F,w,K=!1){this.subscription&&this.subscription.unsubscribe();let L=F;const V=this.dataConfigSource.getDataSupport();if(V.alertStates||V.annotations){const H=this.dataConfigSource;L=M(F,(0,C.kt)().getResult(H.id))}this.subscription=L.subscribe({next:H=>{this.lastResult=K?H:(0,u.zR)(H,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&(this.lastResult.state===f.Gu.Loading||this.lastResult.state===f.Gu.Streaming)&&this.subject.next({...this.lastResult,state:f.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new n.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(F){this.lastResult=F.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(F){this.lastResult=F}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}async function U(I,F,w){if(!w&&I&&typeof I=="object"&&"query"in I)return I;const K=await(0,h.ak)().get(I,F);return w?new a.lh(K):K}},88039:(Y,T,e)=>{"use strict";e.d(T,{V:()=>n});var t=e(86318);function n(i,s){return(0,t.x)(()=>{s&&i.resolveCancelerIfExists(s)})}},59584:(Y,T,e)=>{"use strict";e.d(T,{C:()=>n});var t=e(96905);const n=(i,s)=>{let l=1;return s?.structureRev&&s.series&&(l=s.structureRev,(0,t.nl)(i.series,s.series,t.Ch)||l++),i.structureRev=l,i}},75434:(Y,T,e)=>{"use strict";e.d(T,{v7:()=>U});var t=e(82897),n=e(59980),i=e(12877),s=e(25740),l=e(49372),f=e(9471),u=e(59724),o=e(71735),d=e(57027),r=e(46978),m=e(82615),c=e(52666),p=e(89749),g=e(47406),y=e(206),E=e(77599),v=e(22069),h=e(29930),P=e(99822),a=e(47471),C=e(88039),D=e(49187),b=e(75552),M=e(41818),x=e(9398);function R(F){let w=!1;return V=>{if(!V.request||w||D.Cj.getUrlSearchParams().editPanel!=null||V.state!==c.Gu.Done&&V.state!==c.Gu.Error)return;const j={eventName:b.ct.DataRequest,source:V.request.app,datasourceName:F.name,datasourceId:F.id,datasourceUid:F.uid,datasourceType:F.type,dataSize:0,duration:V.request.endTime-V.request.startTime};V.request.app===y.zj.Explore||V.request.app===y.zj.Correlations?K(j,V):L(j,V),V.series&&V.series.length>0&&(j.dataSize=V.series.length),(0,M.r_)(j),w=!0};function K(V,H){const j=Object.keys(H.series).length;V.totalQueries=j}function L(V,H){const j={};for(let Q=0;Q<H.series.length;Q++){const re=H.series[Q].refId;re&&!j[re]&&(j[re]=H.series[Q].meta?.isCachedResponse??!1)}const A=Object.keys(j).length,_=Object.values(j).filter(Q=>Q===!0).length;V.panelId=H.request.panelId,V.totalQueries=A,V.cachedQueries=_;const k=(0,x.h4)().getCurrent();k&&(V.dashboardId=k.id,V.dashboardName=k.title,V.dashboardUid=k.uid,V.folderName=k.meta.folderTitle),H.error&&(V.error=H.error.message)}}function S(F,w){const K=w.panelData.request,L={...w.packets},V=F.key??F.data?.[0]?.refId??"A";L[V]=F;let H=F.state||c.Gu.Done,j,A;const _=[],k=[];for(const oe in L){const G=L[oe];if((G.error||G.errors?.length)&&(H=c.Gu.Error,j=G.error,A=G.errors),G.data&&G.data.length)for(const le of G.data){if(le.meta?.dataTopic===p.w5.Annotations){k.push(le);continue}_.push(le)}}const Q=O(K,H),re={state:H,series:_,annotations:k,error:j,errors:A,request:K,timeRange:Q},Z=new Set([...w.panelData.traceIds??[],...F.traceIds??[]]);return Z.size>0&&(re.traceIds=Array.from(Z)),{packets:L,panelData:re}}function O(F,w){const K=F.range;return!(0,t.isString)(K.raw.from)||w!==c.Gu.Streaming?K:{...K,from:g.parse(K.raw.from,!1),to:g.parse(K.raw.to,!0)}}function U(F,w,K){let L={panelData:{state:c.Gu.Loading,series:[],request:w,timeRange:w.range},packets:{}};if(!w.targets.length)return w.endTime=Date.now(),L.panelData.state=c.Gu.Done,(0,n.of)(L.panelData);const V=I(F,w,K).pipe((0,f.U)(H=>{if(!(0,t.map)(H.data))throw new Error(`Expected response data to be array, got ${typeof H.data}.`);return w.endTime=Date.now(),L=S(H,L),L.panelData}),(0,u.K)(H=>{const j=typeof H=="string"?H:JSON.stringify(H);return console.error("runRequest.catchError",j),(0,n.of)({...L.panelData,state:c.Gu.Error,error:(0,E.P)(H)})}),(0,o.b)(R(F)),(0,C.V)(h.ae,w.requestId),(0,d.B)());return(0,i.T)((0,s.H)(200).pipe((0,r.h)(L.panelData),(0,m.R)(V)),V)}function I(F,w,K){if(w.targets=w.targets.map(V=>(0,P.vH)(V)?{...F?.getDefaultQuery?.(y.zj.PanelEditor),...V}:V),F.type==="public-ds")return(0,l.D)(F.query(w));for(const V of w.targets)if((0,v.Pr)(V.datasource))return a.mV.query(w);const L=K?K(w):F.query(w);return(0,l.D)(L)}},10216:(Y,T,e)=>{"use strict";e.d(T,{CN:()=>i,E_:()=>g,YQ:()=>o,fy:()=>d,pW:()=>u,qb:()=>c,qi:()=>f,rh:()=>m,to:()=>r,xb:()=>p,yw:()=>l});var t=e(1037);const n=null,i=58,s=8,l={label:"A\u2013Z",value:"alpha-asc"},f="search.sections",u=0,o="general",d="General",r="grafana.search.include.panels",m="grafana.search.layout",c="grafana.search.sort",p={dashboard:t.o.DashDB,folder:t.o.DashFolder,home:t.o.DashHome},g=1e3},55185:(Y,T,e)=>{"use strict";e.d(T,{o:()=>l});var t=e(54899),n=e(47694),i=e(58355),s=e(28066);async function l(u,o,d=!1){if(!n.ZP.featureToggles.nestedFolders)return console.error("getFolderChildren requires nestedFolders feature toggle"),[];if(!d&&!u)return await f();const m=await(0,i.O)().search({kind:["dashboard"],query:"*",location:u||"general",limit:1e3}),c=m.view.map(g=>(0,s.f9)(g,m.view));return[...await f(u,o),...c]}async function f(u,o){return(await(0,t.i)().get("/api/folders",{parentUid:u})).map(m=>({kind:"folder",uid:m.uid,title:m.title,parentTitle:o,parentUID:u,url:`/dashboards/f/${m.uid}/`}))}},82e3:(Y,T,e)=>{"use strict";e.d(T,{getGrafanaSearcher:()=>t.O});var t=e(58355)},58355:(Y,T,e)=>{"use strict";e.d(T,{O:()=>R});var t=e(35645),n=e(12115),i=e(83881),s=e(6194),l=e(54899),f=e(28066);const u="Loading",o="api/search-v2",d="name_sort";class r{constructor(O){this.fallbackSearcher=O}async search(O){if(O.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(O)}async starred(O){if(O.facet?.length)throw new Error("facets not supported!");const U=await(0,l.i)().get("api/user/stars");return U?.length?this.doSearchQuery({uid:U,query:O.query??"*"}):{view:new n.U({length:0,fields:[]}),totalRows:0,loadMoreItems:async(I,F)=>{},isItemLoaded:I=>!0}}async tags(O){const U={...O,query:O.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},F=(await(0,l.i)().post(o,U)).frames.map(w=>(0,i.g0)(w));if(F[0]?.name===u)return this.fallbackSearcher.tags(O);for(const w of F)if(w.fields[0].name==="tag")return p(w);return[]}getSortOptions(){const O=[{value:d,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(t.v.licenseInfo.enabledFeatures.analytics){for(const U of g)O.push({value:`-${U.name}`,label:`${U.display} (most)`}),O.push({value:`${U.name}`,label:`${U.display} (least)`});for(const U of y)O.push({value:`-${U.name}`,label:`${U.display} (recent)`}),O.push({value:`${U.name}`,label:`${U.display} (oldest)`})}return Promise.resolve(O)}async doSearchQuery(O){O=await(0,f.Sd)(O);const U={...O,query:O.query??"*",limit:O.limit??m},F=(await(0,l.i)().post(o,U)).frames.map(A=>(0,i.g0)(A)),w=F.length?(0,i.g0)(F[0]):{fields:[],length:0};if(w.name===u)return this.fallbackSearcher.search(O);for(const A of w.fields)A.display=(0,s.U_)({field:A,theme:t.v.theme2});w.meta?.custom||(w.meta={...w.meta,custom:{count:w.length,max_score:1}});const K=w.meta.custom;if(K.locationInfo||(K.locationInfo={}),K.sortBy?.length){const A=w.fields.find(_=>_.name===K.sortBy);if(A){const _=E(A.name);K.sortBy=_,A.name=_}}let L=0,V;const H=async()=>{for(;L>j.dataFrame.length;){const A=j.dataFrame.length;if(A>=K.count)return;const _=await(0,l.i)().post(o,{...U??{},from:A,limit:c}),k=(0,i.g0)(_.frames[0]);if(!k){console.log("no results",k);return}if(k.fields.length!==j.dataFrame.fields.length){console.log("invalid shape",k,j.dataFrame);return}const Q=k.length+j.dataFrame.length;for(let Z=0;Z<k.fields.length;Z++)j.dataFrame.fields[Z].values.push(...k.fields[Z].values);j.dataFrame.length=Q;const re=k.meta?.custom;if(re?.locationInfo&&K)for(const[Z,oe]of Object.entries(re.locationInfo))K.locationInfo[Z]=oe}V=void 0},j=new n.U(w);return{totalRows:K.count??w.length,view:j,loadMoreItems:async(A,_)=>(L=Math.max(L,_),V||(V=H()),V),isItemLoaded:A=>A<j.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const m=50,c=100;function p(S){const O=S.fields[0].values,U=S.fields[1].values,I=[];for(let F=0;F<S.length;F++)I.push({term:O[F],count:U[F]});return I}const g=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],y=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function E(S){for(const O of g)if(O.name===S)return O.display;for(const O of y)if(O.name===S)return O.display;return S}var v=e(22759);class h{constructor(O){this.parent=O,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(O){if(O.facet?.length)throw new Error("facets not supported!");if(O.sort!=null)throw new Error("custom sorting is not supported yet");if(O.tags?.length||O.ds_uid?.length)return this.parent.search(O);const I=(await this.getCache(O.kind)).search(O.query);return{isItemLoaded:()=>!0,loadMoreItems:async(F,w)=>{},totalRows:I.length,view:I}}async getCache(O){const U=O?O.sort().join(","):"*",I=this.cache.get(U);if(I)try{return await I}catch{return this.cache.delete(U),new P(new n.U({name:"error",fields:[],length:0}))}const F=this.parent.search({kind:O,limit:5e3}).then(w=>new P(w.view));return this.cache.set(U,F),F}async starred(O){return this.parent.starred(O)}async getSortOptions(){return this.parent.getSortOptions()}async tags(O){return this.parent.tags(O)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class P{constructor(O){this.full=O,this.ufuzzy=new v.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values,this.empty=new n.U({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(U=>({...U,values:[]})),length:0})}search(O){if(!O?.length||O==="*")return this.full;const U=this.full.dataFrame.fields,I=this.names,F=U.map(V=>[]);let[w,K,L]=this.ufuzzy.search(I,O,!0);for(let V=0;V<U.length;V++){let H=U[V].values,j=F[V];if(K&&L)for(let A=0;A<L.length;A++){let _=K.idx[L[A]];j.push(H[_])}else if(w)for(let A=0;A<w.length;A++){let _=w[A];j.push(H[_])}}return this.empty.dataFrame.fields.forEach((V,H)=>{V.values=F[H]}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var a=e(99098),C=e(29930),D=e(10216),b=e(1037);class M{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards",folderId:0}},this.getFolderViewSort=()=>""}async composeQuery(O,U){const I=await(0,f.Sd)(U);if(I.query==="*"?I.kind?.length===1&&D.xb[I.kind[0]]&&(O.type=D.xb[I.kind[0]]):I.query?.length&&(O.query=I.query),I.uid)O.dashboardUID=I.uid;else if(I.location?.length){let F=this.locationInfo[I.location];F||(await this.doAPIQuery({type:b.o.DashFolder,limit:999}),F=this.locationInfo[I.location]),O.folderIds=[F?.folderId??0]}return O}async search(O){if(O.facet?.length)throw new Error("facets not supported!");const U=await this.composeQuery({limit:O.limit??D.E_,tag:O.tags,sort:O.sort},O);return this.doAPIQuery(U)}async starred(O){if(O.facet?.length)throw new Error("facets not supported!");const U=await this.composeQuery({limit:O.limit??D.E_,tag:O.tags,sort:O.sort,starred:O.starred},O);return this.doAPIQuery(U)}async getSortOptions(){return(await C.ae.get("/api/search/sorting")).sortOptions.map(U=>({value:U.name,label:U.displayName}))}async tags(O){return(await C.ae.get("/api/dashboards/tags")).sort((I,F)=>F.count-I.count)}async doAPIQuery(O){const U=await C.ae.get("/api/search",O),I=[],F=[],w=[],K=[],L=[],V=[],H=[];let j;for(let k of U){const Q=k.type==="dash-folder"?"folder":"dashboard";I.push(Q),F.push(k.title),w.push(k.uid),K.push(k.url),L.push(k.tags),H.push(k.sortMeta);let re=k.folderUid;!re&&Q==="dashboard"&&(re="general"),V.push(re),k.sortMetaName?.length&&(j=k.sortMetaName),k.folderUid&&k.folderTitle?this.locationInfo[k.folderUid]={kind:"folder",name:k.folderTitle,url:k.folderUrl,folderId:k.folderId}:Q==="folder"&&(this.locationInfo[k.uid]={kind:Q,name:k.title,url:k.url,folderId:k.id})}const A={fields:[{name:"kind",type:a.fS.string,config:{},values:I},{name:"name",type:a.fS.string,config:{},values:F},{name:"uid",type:a.fS.string,config:{},values:w},{name:"url",type:a.fS.string,config:{},values:K},{name:"tags",type:a.fS.other,config:{},values:L},{name:"location",type:a.fS.string,config:{},values:V}],length:F.length,meta:{custom:{count:F.length,max_score:1,locationInfo:this.locationInfo}}};j?.length&&H.length&&(A.meta.custom.sortBy=j,A.fields.push({name:j,type:a.fS.number,config:{},values:H}));for(const k of A.fields)k.display=(0,s.U_)({field:k,theme:t.v.theme2});const _=new n.U(A);return{totalRows:A.length,view:_,loadMoreItems:async(k,Q)=>{},isItemLoaded:k=>!0}}}let x;function R(){if(!x){const S=new M,O=t.v.featureToggles.panelTitleSearch;x=O?new r(S):S,O&&location.search.includes("do-frontend-query")&&(x=new h(x))}return x}},28066:(Y,T,e)=>{"use strict";e.d(T,{J6:()=>l,Sd:()=>n,f9:()=>f});var t=e(9398);async function n(u){return u.query&&u.query.indexOf("folder:current")>=0&&(u={...u,location:await i(),query:u.query.replace("folder:current","").trim()},u.query?.length||(u.query="*")),Promise.resolve(u)}async function i(){try{let u=(0,t.h4)().getCurrent();return u||(await s(500),u=(0,t.h4)().getCurrent()),Promise.resolve(u?.meta?.folderUid)}catch(u){console.error(u)}}function s(u){return new Promise(o=>setTimeout(o,u))}function l(u){return u==="dashboard"?"apps":u==="folder"?"folder":"question-circle"}function f(u,o){const d=o?.dataFrame.meta?.custom,r={kind:"dashboard",uid:u.uid,title:u.name,url:u.url,tags:u.tags??[]},m=d?.sortBy;if(m){const c=u[m];(typeof c=="string"||typeof c=="number")&&(r.sortMetaName=m,r.sortMeta=c)}if(u.location){const c=u.location.split("/"),p=c[c.length-1],g=d?.locationInfo[p];g&&(r.parentTitle=g.name,r.parentKind=g.kind,r.parentUID=p)}return r}},1037:(Y,T,e)=>{"use strict";e.d(T,{A:()=>n,o:()=>t});var t=(i=>(i.DashDB="dash-db",i.DashHome="dash-home",i.DashFolder="dash-folder",i))(t||{}),n=(i=>(i.List="list",i.Folders="folders",i))(n||{})},45003:(Y,T,e)=>{"use strict";e.d(T,{Dn:()=>E,LA:()=>d,M4:()=>h,P4:()=>f,Ub:()=>y,ZP:()=>a,aj:()=>P,dt:()=>g,e7:()=>u,pN:()=>p,s3:()=>o});var t=e(62992),n=e(27876);const i={serviceAccount:{},isLoading:!0,tokens:[]},s=(0,t.oM)({name:"serviceaccount",initialState:i,reducers:{serviceAccountFetchBegin:C=>({...C,isLoading:!0}),serviceAccountFetchEnd:C=>({...C,isLoading:!1}),serviceAccountLoaded:(C,D)=>({...C,serviceAccount:D.payload,isLoading:!1}),serviceAccountTokensLoaded:(C,D)=>({...C,tokens:D.payload,isLoading:!1})}}),l=s.reducer,{serviceAccountLoaded:f,serviceAccountTokensLoaded:u,serviceAccountFetchBegin:o,serviceAccountFetchEnd:d}=s.actions,r={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:n.ServiceAccountStateFilter.All},m=(0,t.oM)({name:"serviceaccounts",initialState:r,reducers:{serviceAccountsFetched:(C,D)=>{const{totalCount:b,perPage:M,...x}=D.payload,R=Math.ceil(b/M);return{...C,...x,totalPages:R,perPage:M,showPaging:R>1,isLoading:!1}},serviceAccountsFetchBegin:C=>({...C,isLoading:!0}),serviceAccountsFetchEnd:C=>({...C,isLoading:!1}),acOptionsLoaded:(C,D)=>({...C,roleOptions:D.payload}),queryChanged:(C,D)=>({...C,query:D.payload,page:0}),pageChanged:(C,D)=>({...C,page:D.payload}),stateFilterChanged:(C,D)=>({...C,serviceAccountStateFilter:D.payload})}}),c=m.reducer,{serviceAccountsFetchBegin:p,serviceAccountsFetchEnd:g,serviceAccountsFetched:y,acOptionsLoaded:E,pageChanged:v,stateFilterChanged:h,queryChanged:P}=m.actions,a={serviceAccountProfile:l,serviceAccounts:c}},62295:(Y,T,e)=>{"use strict";e.d(T,{Ii:()=>l,UW:()=>d,ZP:()=>p,cD:()=>u,fT:()=>m,ik:()=>o,ki:()=>f,rI:()=>r,rW:()=>s});var t=e(62992);const n={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},i=(0,t.oM)({name:"supportBundles",initialState:n,reducers:{supportBundlesLoaded:(g,y)=>({...g,supportBundles:y.payload,isLoading:!1}),fetchBegin:g=>({...g,isLoading:!0}),fetchEnd:g=>({...g,isLoading:!1}),collectorsFetchBegin:g=>({...g,createBundlePageLoading:!0}),collectorsFetchEnd:g=>({...g,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(g,y)=>({...g,supportBundleCollectors:y.payload,createBundlePageLoading:!1}),setLoadBundleError:(g,y)=>({...g,loadBundlesError:y.payload,supportBundleCollectors:[]}),setCreateBundleError:(g,y)=>({...g,createBundleError:y.payload})}}),{supportBundlesLoaded:s,fetchBegin:l,fetchEnd:f,supportBundleCollectorsLoaded:u,collectorsFetchBegin:o,collectorsFetchEnd:d,setLoadBundleError:r,setCreateBundleError:m}=i.actions,p={supportBundles:i.reducer}},97189:(Y,T,e)=>{"use strict";e.d(T,{PJ:()=>f,PL:()=>s,UD:()=>p,ZP:()=>y,aj:()=>l,iI:()=>m,n2:()=>c,p3:()=>n,y$:()=>r});var t=e(62992);const n={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},i=(0,t.oM)({name:"teams",initialState:n,reducers:{teamsLoaded:(E,v)=>{const{totalCount:h,perPage:P,...a}=v.payload,C=Math.ceil(h/P);return{...E,...a,totalPages:C,perPage:P,hasFetched:!0}},queryChanged:(E,v)=>({...E,page:1,query:v.payload}),pageChanged:(E,v)=>({...E,page:v.payload})}}),{teamsLoaded:s,queryChanged:l,pageChanged:f}=i.actions,u=i.reducer,o={team:{},members:[],groups:[],searchMemberQuery:""},d=(0,t.oM)({name:"team",initialState:o,reducers:{teamLoaded:(E,v)=>({...E,team:v.payload}),teamMembersLoaded:(E,v)=>({...E,members:v.payload}),setSearchMemberQuery:(E,v)=>({...E,searchMemberQuery:v.payload}),teamGroupsLoaded:(E,v)=>({...E,groups:v.payload})}}),{teamLoaded:r,teamGroupsLoaded:m,teamMembersLoaded:c,setSearchMemberQuery:p}=d.actions,g=d.reducer,y={teams:u,team:g}},28674:(Y,T,e)=>{"use strict";e.d(T,{J:()=>re});var t=e(82897),n=e(55024),i=e(86647),s=e(20308),l=e(57369),f=e(40538),u=e(22323),o=e(82253),d=e(15546),r=e(87095),m=e(92624);let c={};function p(Z){const oe=c[Z];return oe||(c[Z]=(0,t.property)(Z))}class g{constructor(oe,G,le){this.state={name:oe.name,value:G,text:le,type:oe.type}}getValue(oe){let{value:G}=this.state;return G==="string"||G==="number"||G==="boolean"?G:String(G)}getValueText(){const{value:oe,text:G}=this.state;return typeof G=="string"?oe===o.r2?o.xk:G:Array.isArray(G)?G.join(" + "):(console.log("value",G),String(G))}}let y;function E(Z,oe,G){return y?(y.state.name=Z.name,y.state.type=Z.type,y.state.value=oe,y.state.text=G):y=new g(Z,oe,G),y}function v(Z,oe,G,le){if(G=G||{},Z==null||(0,d.Kn)(G)&&oe!==f.b8.QueryParam)return"";if(!Array.isArray(Z)&&typeof Z=="object"&&(Z=`${Z}`),typeof oe=="function")return oe(Z,G,v);oe||(oe=f.b8.Glob);let fe=oe.split(":");fe.length>1?(oe=fe[0],fe=fe.slice(1)):fe=[];let ae=l.Vl.getIfExists(oe);ae||(console.error(`Variable format ${oe} not found. Using glob format as fallback.`),ae=l.Vl.get(f.b8.Glob));const de=E(G,Z,le??Z);return ae.formatter(Z,fe,de)}var h=e(94976),P=e(49187),a=e(19349),C=e(69155),D=e(2703),b=e(99098),M=e(72769),x=e(6194),R=e(30471),S=e(7569);function O(Z,oe,G){return new Proxy({},{get:(le,fe)=>{if(fe==="name")return Z.name;if(fe==="displayName")return(0,R.CZ)(Z,oe,G);if(fe==="labels"||fe==="formattedLabels")return Z.labels?{...Z.labels,__values:Object.values(Z.labels).sort().join(", "),toString:()=>(0,S.aA)(Z.labels,"",!0)}:""}})}function U(Z,oe,G,le){const fe=I(Z,oe,G);return v(fe,le)}function I(Z,oe,G){const le=G?.__dataContext;if(!le)return Z;const{frame:fe,rowIndex:ae,field:de,calculatedValue:ee}=le.value;if(ee)switch(oe){case"numeric":return ee.numeric.toString();case"raw":return ee.numeric;case"time":return"";case"text":default:return(0,D.zc)(ee)}if(ae===void 0)return Z;if(oe==="time"){const se=fe.fields.find(he=>he.type===b.fS.time);return se?se.values[ae]:void 0}const me=de.values[ae];if(oe==="raw")return me;const ne=(de.display??K())(me);switch(oe){case"numeric":return ne.numeric;case"text":return ne.text;default:return(0,D.zc)(ne)}}function F(Z,oe,G,le){const fe=G?.__dataContext;if(!fe||!oe)return Z;const{frame:ae,rowIndex:de}=fe.value;if(de===void 0||oe===void 0)return Z;const ee={name:ae.name,refId:ae.refId,fields:(0,M.z)({frame:ae,rowIndex:de})},me=p(oe)(ee)??"";return v(me,le)}let w;function K(){return w||(w=(0,x.U_)()),w}function L(Z,oe,G,le){const fe=G?.__dataContext;if(!fe||oe!=="name")return Z;const{frame:ae,frameIndex:de}=fe.value,ee=(0,R.nf)(ae,de);return v(ee,le)}function V(Z,oe,G,le){const fe=G?.__dataContext;if(!fe||oe===void 0||oe==="")return Z;const{frame:ae,field:de,data:ee}=fe.value,me=O(de,ae,ee),q=p(oe)(me)??"";return v(q,le)}const H={__value:U,__data:F,__series:L,__field:V,[h.W.includeVars]:j,[h.W.keepTime]:A};function j(Z,oe,G){const le=(0,C.c)(G);return P.Cj.toUrlParams(le)}function A(){return P.Cj.toUrlParams((0,a.$t)().timeRangeForUrl())}const _={getFilteredVariables:r.Q4,getVariables:r.ng,getVariableWithName:r._K};class k{constructor(oe=_){this.dependencies=oe,this.regex=m.J7,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this._variables=[]}init(oe,G){this._variables=oe,this.timeRange=G,this.updateIndex()}get variables(){return(0,n.d)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return this.dependencies.getVariables()}updateIndex(){const oe=G=>G||G==="";if(this.index=this._variables.reduce((G,le)=>(le.current&&(le.current.isNone||oe(le.current.value))&&(G[le.name]=le),G),{}),this.timeRange){const G=this.timeRange.from.valueOf().toString(),le=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:G,text:G}},__to:{current:{value:le,text:le}}}}}updateTimeRange(oe){this.timeRange=oe,this.updateIndex()}variableInitialized(oe){this.index[oe.name]=oe}getAdhocFilters(oe){let G=[],le=(0,i.F)().getInstanceSettings(oe);if(!le)return[];for(const fe of this.getAdHocVariables()){const ae=fe.datasource?.uid;(ae===le.uid||ae?.indexOf("$")===0&&this.replace(ae)===oe)&&(G=G.concat(fe.filters))}return G}setGrafanaVariable(oe,G){this.grafanaVariables.set(oe,G)}setGlobalVariable(oe,G){(0,n.d)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[oe]:{current:G}}}getVariableName(oe){this.regex.lastIndex=0;const G=this.regex.exec(oe);return G?G.slice(1).find(fe=>fe!==void 0):null}containsTemplate(oe){if(!oe)return!1;const G=this.getVariableName(oe),le=G&&this.getVariableAtIndex(G);return le!=null}variableExists(oe){return(0,n.d)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(oe)}highlightVariablesAsHtml(oe){return!oe||!(0,t.isString)(oe)?oe:(oe=(0,t.escape)(oe),this._replaceWithVariableRegex(oe,void 0,(G,le)=>this.getVariableAtIndex(le)?'<span class="template-variable">'+G+"</span>":G))}getAllValue(oe){if(oe.allValue)return oe.allValue;const G=[];for(let le=1;le<oe.options.length;le++)G.push(oe.options[le].value);return G}getVariableValue(oe,G){return G?p(G)(oe.value):oe.value}getVariableText(oe,G){return oe.value===G||typeof G!="string"?oe.text:G}replace(oe,G,le,fe){return G&&G.__sceneObject?l.ep.interpolate(G.__sceneObject.value,oe,G,le):oe?(this.regex.lastIndex=0,this._replaceWithVariableRegex(oe,le,(ae,de,ee,me)=>{const q=this._evaluateVariableExpression(ae,de,ee,me,G);return fe&&fe.push({match:ae,variableName:de,fieldPath:ee,format:me,value:q,found:q!==ae}),q})):oe??""}_evaluateVariableExpression(oe,G,le,fe,ae){const de=this.getVariableAtIndex(G),ee=ae?.[G];if(ee){const se=this.getVariableValue(ee,le),he=this.getVariableText(ee,se);if(se!=null)return v(se,fe,de,he)}if(!de){const se=H[G];return se?se(oe,le,ae,fe):oe}if(fe===f.b8.QueryParam||(0,d.Kn)(de)){const se=u.z.get(de.type).getValueForUrl(de),he=(0,d.Kn)(de)?de.id:de.current.text;return v(se,fe,de,he)}const me=this.grafanaVariables.get(de.current.value);if(me)return v(me,fe,de);let q=de.current.value,ne=de.current.text;if(this.isAllValue(q)&&(q=this.getAllValue(de),ne=o.xk,de.allValue&&fe!==f.b8.Text&&fe!==f.b8.PercentEncode))return this.replace(q);if(le){const se=this.getVariableValue({value:q,text:ne},le);if(se!=null)return v(se,fe,de,ne)}return v(q,fe,de,ne)}_replaceWithVariableRegex(oe,G,le){return this.regex.lastIndex=0,oe.replace(this.regex,(fe,ae,de,ee,me,q,ne)=>le(fe,ae||de||me,q,ee||ne||G))}isAllValue(oe){return oe===o.r2||Array.isArray(oe)&&oe[0]===o.r2}replaceWithText(oe,G){return(0,n.d)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(oe,G,"text")}getVariableAtIndex(oe){if(oe)return this.index[oe]?this.index[oe]:this.dependencies.getVariableWithName(oe)}getAdHocVariables(){return this.dependencies.getFilteredVariables(d.Kn)}}const Q=new k;(0,s.l)(Q);const re=()=>Q},90024:(Y,T,e)=>{"use strict";e.d(T,{J:()=>r});var t=e(40538),n=e(34315),i=e(66111),s=e(52081),l=e(2594),f=e(46967);const u=[{label:"Size",value:t.kW.Size,description:"Split the buckets based on size"},{label:"Count",value:t.kW.Count,description:"Split the buckets based on count"}],o=[{label:"Split",value:t.kW.Size,description:"Split the buckets based on size"}],d=({value:m,onChange:c,item:p})=>i.createElement(s.Lh,null,i.createElement(l.S,{value:m?.mode||t.kW.Size,options:m?.scale?.type===t.wf.Log?o:u,onChange:g=>{c({...m,mode:g})}}),i.createElement(f.I,{value:m?.value??"",placeholder:"Auto",onChange:g=>{c({...m,value:g.currentTarget.value})}}));function r(m,c,p,g){c.addCustomEditor({id:"xBuckets",path:`${m}xBuckets`,name:"X Bucket",editor:d,category:g,defaultValue:{mode:t.kW.Size}}),c.addCustomEditor({id:"yBuckets",path:`${m}yBuckets`,name:"Y Bucket",editor:d,category:g,defaultValue:{mode:t.kW.Size}}),c.addCustomEditor({id:"yBuckets-scale",path:`${m}yBuckets.scale`,name:"Y Bucket scale",category:g,editor:n.Y,defaultValue:{type:t.wf.Linear}})}},77564:(Y,T,e)=>{"use strict";e.d(T,{xf:()=>H,Oy:()=>U,qJ:()=>K,d8:()=>w,Cj:()=>L});var t=e(9471),n=e(13512),i=e(99098),s=e(30471),l=e(2703),f=e(39393),u=e(76282),o=e(75133),d=e(17587),r=e(40538),m=e(56190);const{abs:c,pow:p}=Math,g=new Map;function y(_,k,Q,re){let Z=[],oe=re.map(m.d);for(let G=k;G<Q;G++){let le=c(G),fe=(0,m.O)(p(_,G),le);for(let ae=0;ae<re.length;ae++){let de=re[ae]*fe,ee=(de>=0&&G>=0?0:le)+(G>=oe[ae]?0:oe[ae]),me=(0,m.O)(de,ee);Z.push(me),g.set(me,ee)}}return Z}const E=_=>_%1===0,v=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],h=y(10,-16,0,v),P=y(10,0,16,v),a=P.filter(E),C=h.concat(P),D=h.concat(a),b=1*1e3,M=60*b,x=60*M,R=24*x,S=365*R,O=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,b,2*b,4*b,5*b,10*b,15*b,20*b,30*b,M,2*M,4*M,5*M,10*M,15*M,20*M,30*M,x,2*x,4*x,6*x,8*x,12*x,18*x,R,2*R,3*R,4*R,5*R,6*R,7*R,10*R,15*R,30*R,45*R,60*R,90*R,180*R,S,2*S,3*S,4*S,5*S,6*S,7*S,8*S,9*S,10*S],U={id:n.W.heatmap,name:"Create heatmap",description:"calculate heatmap from source data",defaultOptions:{},operator:(_,k)=>Q=>Q.pipe((0,t.U)(re=>U.transformer(_,k)(re))),transformer:_=>k=>{const Q=H(k,_);return _.keepOriginalData?[Q,...k]:[Q]}};function I(_){return _==="+Inf"?1/0:_==="-Inf"?-1/0:+(_??0)}function F(_,k){return I(_)-I(k)}function w(_){return _?.meta?.custom??{}}function K(_){let k=!1;for(let Q of _.fields)switch(Q.name){case"y":case"yMin":case"yMax":if(k)return!1;k=!0}return k}function L(_){const k=_.frame.fields[0],Q=k.values,re=_.frame.fields.filter((q,ne)=>q.type===i.fS.number&&ne>0),Z=Q.length*re.length,oe=new Array(Z),G=new Array(Z),le=new Array(Z),fe=re.map(q=>q.values.slice());fe.forEach((q,ne)=>{for(let se=0;se<q.length;se++)le[fe.length*se+ne]=q[se]});const ae=Array.from({length:re.length},(q,ne)=>ne);for(let q=0,ne=0,se=0;q<Z;ne=++q%ae.length)G[q]=ae[ne],ne===0&&q>=ae.length&&se++,oe[q]=Q[se];let de=re[0].labels?.le!=null?"yMax":"y";switch(_.layout){case r.kv.le:de="yMax";break;case r.kv.ge:de="yMin";break;case r.kv.unknown:de="y";break}const ee={yOrdinalDisplay:re.map(q=>(0,s.CZ)(q,_.frame)),yMatchWithLabel:Object.keys(re[0].labels??{})[0]};if(ee.yMatchWithLabel&&(ee.yOrdinalLabel=re.map(q=>q.labels?.[ee.yMatchWithLabel]??""),ee.yMatchWithLabel==="le"&&(ee.yMinDisplay="0.0")),_.unit?.length||_.decimals!=null){const q=(0,l.Cf)(_.unit??"short");ee.yMinDisplay&&(ee.yMinDisplay=(0,l.zc)(q(0,_.decimals))),ee.yOrdinalDisplay=ee.yOrdinalDisplay.map(ne=>{let se=+ne;return Number.isNaN(se)?ne:(0,l.zc)(q(se,_.decimals))})}const me={...re[0].config};return me.displayNameFromDS&&delete me.displayNameFromDS,{length:oe.length,refId:_.frame.refId,meta:{type:f.P.HeatmapCells,custom:ee},fields:[{name:k.type===i.fS.time?"xMax":"x",type:k.type,values:oe,config:k.config},{name:de,type:i.fS.number,values:G,config:{unit:"short"}},{name:_.value?.length?_.value:"Value",type:i.fS.number,values:le,config:me,display:re[0].display}]}}function V(_){_=_.slice(),_.sort((Q,re)=>F(Q.name,re.name));const k=_.map(Q=>Q.fields[1].values.slice());return k.reverse(),k.forEach((Q,re)=>{if(re<k.length-1)for(let Z=0;Z<Q.length;Z++)Q[Z]-=k[re+1][Z]}),k.reverse(),_.map((Q,re)=>({...Q,fields:[Q.fields[0],{...Q.fields[1],values:k[re]}]}))}function H(_,k){let Q,re,Z=0;for(let q of _)q.fields.find(se=>se.type===i.fS.time)&&(Z+=q.length);let oe=Array(Z),G=Array(Z),le=0;for(let q of _){const ne=q.fields.find(he=>he.type===i.fS.time);if(!ne)continue;Q||(Q=ne);const se=ne.values;for(let he of q.fields)if(he!==ne&&he.type===i.fS.number){const ue=he.values;for(let Te=0;Te<se.length;Te++,le++)oe[le]=se[Te],G[le]=ue[Te];re||(re=he)}}if(!Q||!re)throw"no heatmap fields found";if(!oe.length||!G.length)throw"no values found";const fe=k.xBuckets??{},ae=k.yBuckets??{};if(fe.scale?.type===r.wf.Log)throw"X axis only supports linear buckets";const de=k.yBuckets?.scale??{type:r.wf.Linear},ee=j(oe,G,{xSorted:(0,d.lP)(oe),xTime:Q.type===i.fS.time,xMode:fe.mode,xSize:fe.mode===r.kW.Size?(0,u.iX)((0,u.RA)(fe.value??"")):fe.value?+fe.value:void 0,yMode:ae.mode,ySize:ae.value?+ae.value:void 0,yLog:de?.type===r.wf.Log?de?.log:void 0});return{length:ee.x.length,name:(0,s.CZ)(re),meta:{type:f.P.HeatmapCells},fields:[{name:"xMin",type:Q.type,values:ee.x,config:Q.config},{name:"yMin",type:i.fS.number,values:ee.y,config:{...re.config,custom:{scaleDistribution:de}}},{name:"Count",type:i.fS.number,values:ee.count,config:{unit:"short"}}]}}function j(_,k,Q){let re=_.length,Z=Q?.xSorted??!1,oe=Q?.ySorted??!1,G=Z?_[0]:1/0,le=oe?k[0]:1/0,fe=Z?_[re-1]:-1/0,ae=oe?k[re-1]:-1/0,de=Q?.yLog;for(let Re=0;Re<re;Re++)Z||(G=Math.min(G,_[Re]),fe=Math.max(fe,_[Re])),oe||(!de||k[Re]>0)&&(le=Math.min(le,k[Re]),ae=Math.max(ae,k[Re]));let ee=Q?.xSize??0,me=Q?.ySize??0,q=Q?.xMode,ne=Q?.yMode;if((!Number.isFinite(ee)||ee<=0)&&(q=r.kW.Count,ee=20),(!Number.isFinite(me)||me<=0)&&(ne=r.kW.Count,me=10),q===r.kW.Count){let Re=(fe-G)/Math.max(ee-1,1),ye=Q?.xTime?O:D,Pe=ye.findIndex(be=>be>Re)-1;ee=ye[Math.max(Pe,0)]}if(ne===r.kW.Count){let Re=(ae-le)/Math.max(me-1,1),ye=Q?.yTime?O:D,Pe=ye.findIndex(be=>be>Re)-1;me=ye[Math.max(Pe,0)]}let se=Q?.xCeil?Re=>(0,o.UO)(Re,ee):Re=>(0,o.mB)(Re,ee),he=Q?.yCeil?Re=>(0,o.UO)(Re,me):Re=>(0,o.mB)(Re,me);if(de){me=1/(Q?.ySize??1);let Re=de===2?Math.log2:Math.log10;he=Q?.yCeil?ye=>(0,o.UO)(Re(ye),me):ye=>(0,o.mB)(Re(ye),me)}let ue=se(G),Te=se(fe),Ve=he(le),ct=he(ae),Ie=Math.round((Te-ue)/ee)+1,Ke=Math.round((ct-Ve)/me)+1,[Ge,at,dt]=A(Ie,Ke,ue,ee,Ve,me,de);for(let Re=0;Re<re;Re++){if(de&&k[Re]<=0)continue;const ye=(se(_[Re])-ue)/ee,Pe=(he(k[Re])-Ve)/me,be=ye*Ke+Pe;dt[be]++}return{x:Ge,y:at,count:dt}}function A(_,k,Q,re,Z,oe,G){const le=_*k,fe=new Array(le),ae=new Array(le),de=new Array(le);for(let ee=0,me=0,q=Q;ee<le;me=++ee%k)de[ee]=0,G?ae[ee]=G**(Z+me*oe):ae[ee]=Z+me*oe,me===0&&ee>=k&&(q+=re),fe[ee]=q;return[fe,ae,de]}},96366:(Y,T,e)=>{"use strict";e.d(T,{Ii:()=>i,JJ:()=>n,ac:()=>s});var t=e(40538),n=(f=>(f.Prepare="prepare",f.Calculate="calculate",f.Modify="modify",f))(n||{}),i=(f=>(f.Heading="heading",f.Distance="distance",f.Area="area",f))(i||{}),s=(f=>(f.AsLine="asLine",f.LineBuilder="lineBuilder",f))(s||{});const l={action:"prepare",source:{mode:t.q1.Auto}}},14573:(Y,T,e)=>{"use strict";e.d(T,{Lb:()=>r,Lp:()=>o,N7:()=>c});var t=e(55839),n=e(17792),i=e(63897),s=e(29501),l=e(76254),f=e(99098),u=e(96366);function o(p){const g=[];for(const y of p.values)y&&g.push(r(y));return new n.Z(g)}function d(p){const g=new Array(p.length);if(p.length>1){let y=m(p[0]);for(let E=1;E<p.length;E++){let v=m(p[E]);if(y&&v){let h=Math.atan2(v[0]-y[0],v[1]-y[1])*180/Math.PI;h<0&&(h+=360),g[E-1]=g[E]=h}}}else g.fill(0);return g}function r(p){return p instanceof i.Z?p.getCoordinates():(0,t.qg)(p.getExtent())}function m(p){if(p)return(0,s.bU)(r(p))}function c(p,g){const y=p.values,E=new Array(p.values.length),v=g.calc??u.Ii.Heading,h=g.field??v;switch(v){case u.Ii.Area:{for(let P=0;P<y.length;P++){const a=y[P];a&&(E[P]=(0,l.bg)(a))}return{name:h,type:f.fS.number,config:{unit:"areaM2"},values:E}}case u.Ii.Distance:{for(let P=0;P<y.length;P++){const a=y[P];a&&(E[P]=(0,l.xA)(a))}return{name:h,type:f.fS.number,config:{unit:"lengthm"},values:E}}case u.Ii.Heading:default:return{name:h,type:f.fS.number,config:{unit:"degree"},values:d(y)}}}},12142:(Y,T,e)=>{"use strict";e.d(T,{PJ:()=>r,ZP:()=>c,eT:()=>u,k7:()=>d,tZ:()=>o,w4:()=>l});var t=e(62992),n=e(47694);const i={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,canInvite:!n.ZP.externalUserMngLinkName,externalUserMngInfo:n.ZP.externalUserMngInfo,externalUserMngLinkName:n.ZP.externalUserMngLinkName,externalUserMngLinkUrl:n.ZP.externalUserMngLinkUrl,isLoading:!1},s=(0,t.oM)({name:"users",initialState:i,reducers:{usersLoaded:(p,g)=>{const{totalCount:y,perPage:E,page:v,orgUsers:h}=g.payload,P=Math.ceil(y/E);return{...p,isLoading:!0,users:h,perPage:E,page:v,totalPages:P}},searchQueryChanged:(p,g)=>({...p,searchQuery:g.payload,page:i.page}),setUsersSearchPage:(p,g)=>({...p,page:g.payload}),pageChanged:(p,g)=>({...p,page:g.payload}),usersFetchBegin:p=>({...p,isLoading:!0}),usersFetchEnd:p=>({...p,isLoading:!1})}}),{searchQueryChanged:l,setUsersSearchPage:f,usersLoaded:u,usersFetchBegin:o,usersFetchEnd:d,pageChanged:r}=s.actions,c={users:s.reducer}},22323:(Y,T,e)=>{"use strict";e.d(T,{z:()=>n});var t=e(53908);const n=new t.B},30002:(Y,T,e)=>{"use strict";e.d(T,{KJ:()=>E,M6:()=>g,Ue:()=>v,Z$:()=>h,ku:()=>y,m2:()=>p});var t=e(82897),n=e.n(t),i=e(91162),s=e(50678),l=e(15546),f=e(85803),u=e(7240),o=e(87095),d=e(92990),r=e(92624),m=e(79134);const c="Filters",p=C=>async(D,b)=>{let M=a(C,b());if(!M&&(D(P(C)),M=a(C,b()),!M))return;const x=M.filters.findIndex(S=>S.key===C.key&&S.value===C.value);if(x===-1){const{value:S,key:O,operator:U}=C,I={value:S,key:O,operator:U,condition:""};return await D(E((0,r.yQ)(M),I))}const R={...M.filters[x],operator:C.operator};return await D(g((0,r.yQ)(M),{index:x,filter:R}))},g=(C,D)=>async(b,M)=>{const x=(0,o.E0)(C,M());b((0,u.mb)(C.rootStateKey,(0,m.e_)((0,r.Y6)(x,D)))),await b((0,f.MB)((0,r.yQ)(x),!0))},y=(C,D)=>async(b,M)=>{const x=(0,o.E0)(C,M());b((0,u.mb)(C.rootStateKey,(0,m.DO)((0,r.Y6)(x,D)))),await b((0,f.MB)((0,r.yQ)(x),!0))},E=(C,D)=>async(b,M)=>{const x=(0,o.E0)(C,M());b((0,u.mb)(C.rootStateKey,(0,m.QL)((0,r.Y6)(x,D)))),await b((0,f.MB)((0,r.yQ)(x),!0))},v=(C,D)=>async(b,M)=>{const x=(0,o.E0)(C,M());b((0,u.mb)(C.rootStateKey,(0,m.aM)((0,r.Y6)(x,D)))),await b((0,f.MB)((0,r.yQ)(x),!0))},h=(C,D)=>async(b,M)=>{const x=(0,o.E0)(C,M());b((0,u.mb)(C.rootStateKey,(0,d.Pl)((0,r.Y6)(x,{propName:"datasource",propValue:D}))));const S=(await(0,i.ak)().get(D))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";b((0,u.mb)(C.rootStateKey,(0,s.z7)({infoText:S})))},P=C=>(D,b)=>{const M=(0,o.S_)(b()),x={...(0,t.cloneDeep)(m.Js),datasource:C.datasource,name:c,id:c,rootStateKey:M},R=!1,S=(0,o.Eo)(M,b()),O={type:"adhoc",id:x.id,rootStateKey:M};D((0,u.mb)(M,(0,d.VN)((0,r.Y6)(O,{global:R,model:x,index:S}))))},a=(C,D)=>{const b=(0,o.S_)(D),M=(0,o.AE)(b,D);return Object.values(M.variables).find(x=>(0,l.Kn)(x)&&x.datasource?.uid===C.datasource.uid)}},44847:(Y,T,e)=>{"use strict";e.d(T,{F:()=>C});var t=e(66111),n=e(70044),i=e(35287),s=e(68118),l=e(39904),f=e(91162);const u=90,o=({datasource:D,onChange:b,disabled:M,filterKey:x,getTagKeysOptions:R})=>{const S=()=>c(D,R),O=()=>p(D,R);return x===null?t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper"},t.createElement(s.V,{disabled:M,className:"query-segment-key",Component:m,value:x,onChange:b,loadOptions:S,inputMinWidth:u})):t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper"},t.createElement(s.V,{disabled:M,className:"query-segment-key",value:x,onChange:b,loadOptions:O,inputMinWidth:u}))},d="-- remove filter --",r={label:d,value:d},m=t.createElement("span",{className:"gf-form-label query-part","aria-label":"Add Filter"},t.createElement(l.J,{name:"plus"})),c=async(D,b)=>{const M=await(0,f.ak)().get(D);return!M||!M.getTagKeys?[]:(await M.getTagKeys(b)).map(R=>({label:R.text,value:R.text}))},p=async(D,b)=>{const M=await c(D,b);return[r,...M]},g=({datasource:D,disabled:b,onChange:M,filterKey:x,filterValue:R,placeHolder:S})=>{const O=()=>y(D,x);return t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper"},t.createElement(s.V,{className:"query-segment-value",disabled:b,placeholder:S,value:R,onChange:M,loadOptions:O}))},y=async(D,b)=>{const M=await(0,f.ak)().get(D);return!M||!M.getTagValues?[]:(await M.getTagValues({key:b})).map(R=>({label:R.text,value:R.text}))},E=["=","!=","<",">","=~","!~"].map(D=>({label:D,value:D})),v=({value:D,disabled:b,onChange:M})=>t.createElement(n.X,{className:"query-segment-operator",value:D,disabled:b,options:E,onChange:M}),h=({datasource:D,filter:{key:b,operator:M,value:x},onKeyChange:R,onOperatorChange:S,onValueChange:O,placeHolder:U,getTagKeysOptions:I,disabled:F})=>t.createElement(t.Fragment,null,t.createElement(o,{disabled:F,datasource:D,filterKey:b,onChange:R,getTagKeysOptions:I}),t.createElement("div",{className:"gf-form"},t.createElement(v,{disabled:F,value:M,onChange:S})),t.createElement(g,{disabled:F,datasource:D,filterKey:b,filterValue:x,onChange:O,placeHolder:U})),P=({datasource:D,appendBefore:b,onCompleted:M,getTagKeysOptions:x})=>{const[R,S]=(0,t.useState)(null),[O,U]=(0,t.useState)("="),I=(0,t.useCallback)(K=>{if(K.value!==d){S(K.value??"");return}S(null)},[S]),F=(0,t.useCallback)(K=>U(K.value??""),[U]),w=(0,t.useCallback)(K=>{M({value:K.value??"",operator:O,condition:"",key:R}),S(null),U("=")},[M,O,R]);return R===null?t.createElement(o,{datasource:D,filterKey:R,onChange:I,getTagKeysOptions:x}):t.createElement(t.Fragment,{key:"filter-builder"},b,t.createElement(h,{datasource:D,filter:{key:R,value:"",operator:O,condition:""},placeHolder:(0,i.t)("variable.adhoc.placeholder","Select value"),onKeyChange:I,onOperatorChange:F,onValueChange:w,getTagKeysOptions:x}))},a=({label:D})=>t.createElement("div",{className:"gf-form"},t.createElement("span",{className:"gf-form-label query-keyword"},D));class C extends t.PureComponent{constructor(){super(...arguments),this.onChange=(b,M)=>x=>{const{filters:R}=this.props,{value:S}=x;return x.value===d?this.props.removeFilter(b):this.props.changeFilter(b,{...R[b],[M]:S})},this.appendFilterToVariable=b=>{this.props.addFilter(b)}}render(){const{filters:b,disabled:M}=this.props;return t.createElement("div",{className:"gf-form-inline"},this.renderFilters(b,M),!M&&t.createElement(P,{datasource:this.props.datasource,appendBefore:b.length>0?t.createElement(a,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,getTagKeysOptions:this.props.getTagKeysOptions}))}renderFilters(b,M){return b.length===0&&M?t.createElement(n.X,{disabled:M,value:"No filters",options:[],onChange:()=>{}}):b.reduce((x,R,S)=>(x.length>0&&x.push(t.createElement(a,{label:"AND",key:`condition-${S}`})),x.push(this.renderFilterSegments(R,S,M)),x),[])}renderFilterSegments(b,M,x){return t.createElement(t.Fragment,{key:`filter-${M}`},t.createElement(h,{disabled:x,datasource:this.props.datasource,filter:b,onKeyChange:this.onChange(M,"key"),onOperatorChange:this.onChange(M,"operator"),onValueChange:this.onChange(M,"value"),getTagKeysOptions:this.props.getTagKeysOptions}))}}},79134:(Y,T,e)=>{"use strict";e.d(T,{DO:()=>o,Js:()=>l,QL:()=>u,aM:()=>r,e_:()=>d,jo:()=>m});var t=e(62992),n=e(10672),i=e(87095),s=e(63510);const l={...n.Eg,type:"adhoc",datasource:null,filters:[]},f=(0,t.oM)({name:"templating/adhoc",initialState:s.s,reducers:{filterAdded:(c,p)=>{const g=(0,i.ir)(c,p.payload.id);g.type==="adhoc"&&g.filters.push(p.payload.data)},filterRemoved:(c,p)=>{const g=(0,i.ir)(c,p.payload.id);if(g.type!=="adhoc")return;const y=p.payload.data;g.filters.splice(y,1)},filterUpdated:(c,p)=>{const g=(0,i.ir)(c,p.payload.id);if(g.type!=="adhoc")return;const{filter:y,index:E}=p.payload.data;g.filters[E]=y},filtersRestored:(c,p)=>{const g=(0,i.ir)(c,p.payload.id);g.type==="adhoc"&&(g.filters=p.payload.data)}}}),{filterAdded:u,filterRemoved:o,filterUpdated:d,filtersRestored:r}=f.actions,m=f.reducer},82253:(Y,T,e)=>{"use strict";e.d(T,{BH:()=>s,IG:()=>f,QX:()=>l,UY:()=>t,r2:()=>i,xk:()=>n});const t="00000000-0000-0000-0000-000000000000",n="All",i="$__all",s="None",l="",f="var-"},95125:(Y,T,e)=>{"use strict";e.d(T,{R:()=>o,z:()=>u});var t=e(588),n=e(66111),i=e(68183),s=e(72648),l=e(97379),f=e(49993);const u="Grafana-LegacyVariableQueryEditor",o=({onChange:d,query:r})=>{const m=(0,s.wW)(f.w),[c,p]=(0,n.useState)(r),g=v=>{p(v.currentTarget.value)},y=(0,n.useCallback)(v=>{d(v.currentTarget.value,v.currentTarget.value)},[d]),E=(0,t.Me)();return n.createElement(l.K,{id:E,rows:2,value:c,onChange:g,onBlur:y,placeholder:"Metric name or tags query",required:!0,"aria-label":i.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:m.textarea})};o.displayName=u},41624:(Y,T,e)=>{"use strict";e.d(T,{e:()=>l});var t=e(9892),n=e(66111),i=e(72648),s=e(19825);function l({className:u,...o}){const d=(0,i.wW)(f);return n.createElement(s.D,{...o,className:(0,t.cx)(d.legend,u)})}function f(u){return{legend:(0,t.css)({marginTop:u.spacing(3),marginBottom:u.spacing(1)})}}},83704:(Y,T,e)=>{"use strict";e.d(T,{u:()=>u});var t=e(9892),n=e(66111),i=e(72648),s=e(24799),l=e(8581),f=e(56991);function u({name:d,description:r,value:m,options:c,onChange:p,testId:g,width:y}){const E=(0,i.wW)(o),v=(0,f.L)(),h=`variable-select-input-${d}-${v}`;return n.createElement(s.g,{label:d,description:r,htmlFor:h},n.createElement("div",{"data-testid":g},n.createElement(l.Ph,{inputId:h,onChange:p,value:m,width:y??30,options:c,className:E.selectContainer})))}function o(d){return{selectContainer:t.css`
      margin-right: ${d.spacing(.5)};
    `}}},49993:(Y,T,e)=>{"use strict";e.d(T,{W:()=>u,w:()=>o});var t=e(9892),n=e(588),i=e(66111),s=e(72648),l=e(24799),f=e(97379);function u({value:d,name:r,description:m,placeholder:c,onChange:p,onBlur:g,ariaLabel:y,required:E,width:v,testId:h}){const P=(0,s.wW)(o),a=(0,n.Me)();return i.createElement(l.g,{label:r,description:m,htmlFor:a},i.createElement(f.K,{id:a,rows:2,value:d,onChange:p,onBlur:g,placeholder:c,required:E,"aria-label":y,cols:v,className:P.textarea,"data-testid":h}))}function o(d){return{textarea:t.css`
      white-space: pre-wrap;
      min-height: ${d.spacing(4)};
      height: auto;
      overflow: auto;
      padding: ${d.spacing(.75,1)};
      width: inherit;
    `}}},57052:(Y,T,e)=>{"use strict";e.d(T,{V:()=>l});var t=e(588),n=e(66111),i=e(24799),s=e(46967);function l({value:f,name:u,placeholder:o="",onChange:d,testId:r,width:m,required:c,onBlur:p,grow:g,description:y,invalid:E,error:v,maxLength:h}){const P=(0,t.Me)(u);return n.createElement(i.g,{label:u,description:y,invalid:E,error:v,htmlFor:P},n.createElement(s.I,{type:"text",id:P,placeholder:o,value:f,onChange:d,onBlur:p,width:g?void 0:m??30,"data-testid":r,maxLength:h,required:c}))}},50678:(Y,T,e)=>{"use strict";e.d(T,{PF:()=>n,PV:()=>m,QR:()=>c,Sg:()=>r,Yo:()=>l,gl:()=>s,qe:()=>o,wJ:()=>u,y8:()=>f,z7:()=>d});var t=e(62992);const n={id:"",isValid:!0,errors:{},name:"",extended:null},i=(0,t.oM)({name:"templating/editor",initialState:n,reducers:{variableEditorMounted:(p,g)=>{p.name=g.payload.name,p.id=g.payload.id},variableEditorUnMounted:(p,g)=>n,changeVariableNameSucceeded:(p,g)=>{p.name=g.payload.data.newName,delete p.errors.name,p.isValid=Object.keys(p.errors).length===0},changeVariableNameFailed:(p,g)=>{p.name=g.payload.newName,p.errors.name=g.payload.errorText,p.isValid=Object.keys(p.errors).length===0},addVariableEditorError:(p,g)=>{p.errors[g.payload.errorProp]=g.payload.errorText,p.isValid=Object.keys(p.errors).length===0},removeVariableEditorError:(p,g)=>{delete p.errors[g.payload.errorProp],p.isValid=Object.keys(p.errors).length===0},changeVariableEditorExtended:(p,g)=>{p.extended={...p.extended,...g.payload}},cleanEditorState:()=>n}}),s=i.reducer,{changeVariableNameSucceeded:l,changeVariableNameFailed:f,variableEditorMounted:u,variableEditorUnMounted:o,changeVariableEditorExtended:d,addVariableEditorError:r,removeVariableEditorError:m,cleanEditorState:c}=i.actions},69155:(Y,T,e)=>{"use strict";e.d(T,{c:()=>s});var t=e(20308),n=e(22323),i=e(82253);function s(l){const f={},u=(0,t.J)().getVariables();for(let o=0;o<u.length;o++){const d=u[o],r=l&&l[d.name];d.skipUrlSync||(r?f[i.IG+d.name]=r.value:f[i.IG+d.name]=n.z.get(d.type).getValueForUrl(d))}return f}},15546:(Y,T,e)=>{"use strict";e.d(T,{$7:()=>y,Ju:()=>m,Kn:()=>s,Kr:()=>o,NX:()=>g,R:()=>r,U4:()=>f,VC:()=>l,X7:()=>p,Xh:()=>i,d7:()=>c,eL:()=>u});var t=e(48976),n=e(95125);const i=E=>E.type==="query",s=E=>E.type==="adhoc",l=E=>E.type==="constant",f=E=>"multi"in E,u=E=>"options"in E,o=E=>"current"in E;function d(E){return E===null?!1:typeof E=="string"}const r=E=>Boolean(E.metricFindQuery)&&!Boolean(E.variables),m=E=>{if(!E.variables||E.variables.getType()!==t.j2.Standard)return!1;const v=E.variables;return"toDataQuery"in v&&Boolean(v.toDataQuery)},c=E=>{if(!E.variables||E.variables.getType()!==t.j2.Custom)return!1;const v=E.variables;return"query"in v&&"editor"in v&&Boolean(v.query)&&Boolean(v.editor)},p=E=>E.variables?E.variables.getType()===t.j2.Datasource:!1;function g(E,v){return E?E.displayName===n.z||r(v):!1}function y(E,v){return E?E.displayName!==n.z&&(p(v)||m(v)||c(v)):!1}},37737:(Y,T,e)=>{"use strict";e.d(T,{Kf:()=>n,iV:()=>s,j4:()=>l});var t=e(62992);const n={usages:[],usagesNetwork:[]},i=(0,t.oM)({name:"templating/inspect",initialState:n,reducers:{initInspect:(f,u)=>{const{usages:o,usagesNetwork:d}=u.payload;f.usages=o,f.usagesNetwork=d}}}),s=i.reducer,{initInspect:l}=i.actions},19248:(Y,T,e)=>{"use strict";e.d(T,{MJ:()=>m,GQ:()=>d,V:()=>E,Of:()=>r,PQ:()=>P,dH:()=>R,Yg:()=>v,Rv:()=>M,vI:()=>D});var t=e(94976);function n(S,O){const U=new Set;for(const I of S)U.add(O(I));return U}var i=e(96161),s=e(55935),l=e(86899),f=e(22323),u=e(15546),o=e(92624);const d=S=>{const O=[];for(const U of S)O.push({id:U.id,label:`${U.id}`});return O},r=(S,O)=>S.filter(U=>O.some(I=>I.from===U.id||I.to===U.id)),m=S=>{const O=[];for(const U of S)for(const I of S){if(U===I)continue;f.z.get(U.type).dependsOn(U,I)&&O.push({from:U.id,to:I.id})}return O};function c(S){const O=(0,o.a9)(S);return O?O.slice(1).find(I=>I!==void 0):void 0}const p=(S,O)=>{o.J7.lastIndex=0;const U=[],F=(0,s.Xh)(O,2).match(o.J7);if(!F)return U;for(const w of F){if(!w||w.indexOf("$__")!==-1||w.indexOf("${__")!==-1||w.indexOf("$hashKey")!==-1)continue;const K=c(w);S.some(L=>L.id===K)||U.find(L=>L===K)||K&&U.push(K)}return U},g={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},y=(S,O,U)=>{const I=Object.keys(O.value).reduce((w,K)=>{const L=O.value[K];if(!L||typeof L!="string")return w;const V=g[K]?g[K].find(j=>j.test(S)):void 0;let H=(0,o.QI)(L,S);return K==="repeat"&&L===S&&(H=!0),!V&&H&&(w={...w,[K]:L}),w},{}),F=Object.keys(O.value).reduce((w,K)=>{const L=O.value[K];if(L&&typeof L=="object"&&Object.keys(L).length){let V=L.title||L.name||L.id||K;Array.isArray(O.value)&&O.key==="panels"&&(V=`${V}[${L.id}]`);const H=y(S,{key:K,value:L},{});Object.keys(H).length&&(w={...w,[V]:H})}return w},{});return(Object.keys(I).length||Object.keys(F).length)&&(U={...U,...I,...F}),U},E=(S,O)=>{if(!O)return{unUsed:[],usages:[]};const U=[];let I=[];const F=O.getSaveModelClone();for(const w of S){const K=w.id,L=y(K,{key:"model",value:F},{});!Object.keys(L).length&&!(0,u.Kn)(w)&&U.push(w),Object.keys(L).length&&I.push({variable:w,tree:L})}return{unUsed:U,usages:I}};async function v(S,O){return new Promise((U,I)=>{setTimeout(()=>{try{const F=h(S,O);U(D(F))}catch(F){I(F)}},200)})}function h(S,O){if(!O)return[];let U=[];const I=O.getSaveModelClone(),F=p(S,I);for(const w of F){const K=y(w,{key:"model",value:I},{});if(Object.keys(K).length){const L={id:w,name:w};U.push({variable:L,tree:K})}}return U}function P(S,O,U){const I=n(O.descendants(S),w=>w.name);I.add(t.W.includeVars);for(const w of S)I.add(w);return a([...I],U)}function a(S,O){const U=[];for(const I of S)O[I]&&U.push(...O[I]);return new Set(U)}const C=(S,O)=>{const{id:U,value:I}=O,{nodes:F,edges:w}=S;if(I&&typeof I=="string"){const K=`${O.id}-${I}`;return F.push({id:K,label:I}),w.push({from:K,to:U}),S}if(I&&typeof I=="object"){const K=Object.keys(I);for(const L of K){const V=`${O.id}-${L}`;F.push({id:V,label:L}),w.push({from:V,to:U}),S=C(S,{id:V,value:I[L]})}return S}return S},D=S=>{const O=[];for(const U of S){const{variable:I,tree:F}=U,w={variable:I,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};O.push(C(w,{id:"dashboard",value:F}))}return O},b=S=>Object.values(S).reduce((U,I)=>typeof I=="object"?U+b(I):U+1,0),M=(S,O)=>{const U=O.find(I=>I.variable.id===S);return U?b(U.tree):0};function x(S){const O=[];for(const U of S)O.push(U),U.panels?.length&&O.push(...x(U.panels.map(I=>new PanelModel(I))));return O}function R(S){const O={};for(const U of S){const I=(0,i.Jg)(U),F=[...I.matchAll(/"repeat":"([^"]+)"/g)].map(L=>L[1]),w=I.match(o.J7)?.map(L=>c(L))??[],K=[...F,...w];for(const L of K)L in O?O[L].add(U.id):O[L]=new Set([U.id])}return O}},85972:(Y,T,e)=>{"use strict";e.d(T,{XJ:()=>b,nn:()=>v,yy:()=>u,Ew:()=>h,cv:()=>M,aN:()=>E,iQ:()=>P,_M:()=>y,ss:()=>C,wF:()=>D,Ug:()=>a});var t=e(62992),n=e(82897);const i=(x,...R)=>R.reduce((S,O)=>O(S),x);var s=e(82253),l=e(15546),f=e(92624);const u={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},o=1e3,d=x=>Array.isArray(x)?x.reduce((R,S)=>((0,n.isString)(S.value)&&(R[S.value]=S),R),{}):{},r=x=>{if(!Array.isArray(x.options))return x.options=[],x;const R=d(x.selectedValues);return x.selectedValues=Object.values(R),x.options=x.options.map(S=>{if(!(0,n.isString)(S.value))return S;const O=!!R[S.value];return S.selected===O?S:{...S,selected:O}}),x.options=m(x.options),x},m=x=>Array.isArray(x)?x.length<=o?x:x.slice(0,o):[],c=x=>{const{options:R,selectedValues:S}=x;return R.length===0||S.length>0||!R[0]||R[0].value!==s.r2||(x.selectedValues=[{...R[0],selected:!0}]),x},p=x=>{const{selectedValues:R}=x;return R.length>1&&(x.selectedValues=R.filter(S=>S.value!==s.r2)),x},g=(0,t.oM)({name:"templating/optionsPicker",initialState:u,reducers:{showOptions:(x,R)=>{const{query:S,options:O}=R.payload;if(x.highlightIndex=-1,x.options=(0,n.cloneDeep)(O),x.id=R.payload.id,x.queryValue="",x.multi=!1,(0,l.U4)(R.payload)&&(x.multi=R.payload.multi??!1),(0,l.Xh)(R.payload)){const{queryValue:U}=R.payload,I=(0,f.bf)(S);x.queryValue=I&&U?U:""}return x.selectedValues=x.options.filter(U=>U.selected),i(x,c,r)},hideOptions:(x,R)=>({...u}),toggleOption:(x,R)=>{const{option:S,clearOthers:O,forceSelect:U}=R.payload,{multi:I,selectedValues:F}=x;if(S){const w=!F.find(K=>K.value===S.value&&K.text===S.text);if(S.value===s.r2||!I||O)return w||U?x.selectedValues=[{...S,selected:!0}]:x.selectedValues=[],i(x,c,p,r);if(U||w)return x.selectedValues.push({...S,selected:!0}),i(x,c,p,r);x.selectedValues=F.filter(K=>K.value!==S.value&&K.text!==S.text)}else x.selectedValues=[];return i(x,c,p,r)},moveOptionsHighlight:(x,R)=>{let S=x.highlightIndex+R.payload;return S<0?S=-1:S>=x.options.length&&(S=x.options.length-1),{...x,highlightIndex:S}},toggleAllOptions:(x,R)=>x.selectedValues.length>0?(x.selectedValues=[],i(x,r)):(x.selectedValues=x.options.filter(S=>S.value!==s.r2).map(S=>({...S,selected:!0})),i(x,r)),updateSearchQuery:(x,R)=>(x.queryValue=R.payload,x),updateOptionsAndFilter:(x,R)=>{const S=(0,n.trimStart)((x.queryValue??"").toLowerCase());return x.options=R.payload.filter(O=>{const U=O.text??"";return(Array.isArray(U)?U.toString():U).toLowerCase().indexOf(S)!==-1}),x.highlightIndex=0,i(x,c,r)},updateOptionsFromSearch:(x,R)=>(x.options=R.payload,x.highlightIndex=0,i(x,c,r)),cleanPickerState:()=>u}}),{toggleOption:y,showOptions:E,hideOptions:v,moveOptionsHighlight:h,toggleAllOptions:P,updateSearchQuery:a,updateOptionsAndFilter:C,updateOptionsFromSearch:D,cleanPickerState:b}=g.actions,M=g.reducer},96188:(Y,T,e)=>{"use strict";e.d(T,{x:()=>t});const t=(s,l)=>s&&(l&&!Array.isArray(s.value)?{...s,value:i(s.value),text:i(s.text)}:!l&&Array.isArray(s.value)?{...s,value:n(s.value),text:n(s.text)}:s),n=s=>Array.isArray(s)?s.length>0?s[0]:"":s,i=s=>Array.isArray(s)?s:[s]},85803:(Y,T,e)=>{"use strict";e.d(T,{Ci:()=>re,DU:()=>me,Fz:()=>G,LX:()=>ue,MB:()=>fe,Rk:()=>Ie,Z7:()=>V,wX:()=>ct,xQ:()=>oe,xs:()=>ne});var t=e(82897),n=e.n(t),i=e(61618),s=e(52666),l=e(73446),f=e(37932),u=e(35645),o=e(659),d=e(82002),r=e(19349),m=e(3153),c=e(60499),p=e(77582),g=e(29930),y=e(28630),E=e(91162),v=e(28674),h=e(22323),P=e(82253),a=e(50678),C=e(15546),D=e(19248),b=e(85972),M=e(96188),x=e(10672),R=e(92624),S=e(7240),O=e(87095),U=e(92990),I=e(30286),F=e(6942);const w=(Re,ye)=>(Pe,be)=>{let Be=0;const ke=ye.templating.list;for(let ft=0;ft<ke.length;ft++){const gt=K(ke[ft]);gt.rootStateKey=Re,h.z.getIfExists(gt.type)&&Pe((0,S.mb)(Re,(0,U.VN)((0,R.Y6)(gt,{global:!1,index:Be++,model:gt}))))}(0,v.J)().updateTimeRange((0,r.$t)().timeRange());const ot=(0,O.gt)(Re,be());for(const ft of ot)Pe((0,S.mb)(Re,(0,U.Mn)((0,R.Y6)(ft))))};function K(Re){if(!(0,C.eL)(Re))return Re;let ye=!1;for(const Pe of Re.options)if(Pe.selected=!1,Array.isArray(Re.current.value))for(const be of Re.current.value)Pe.value===be&&(Pe.selected=ye=!0);else Pe.value===Re.current.value&&(Pe.selected=ye=!0);return!ye&&Re.options.length&&(Re.options[0].selected=!0),Re}const L=(Re,ye)=>Pe=>{const be={...x.Eg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:x.bU.hideVariable,current:{value:{name:ye.title,uid:ye.uid,toString:()=>ye.title}}};Pe((0,S.mb)(Re,(0,U.VN)((0,R.Y6)(be,{global:be.global,index:be.index,model:be}))));const Be={...x.Eg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:x.bU.hideVariable,current:{value:{name:d.Vt.user.orgName,id:d.Vt.user.orgId,toString:()=>d.Vt.user.orgId.toString()}}};Pe((0,S.mb)(Re,(0,U.VN)((0,R.Y6)(Be,{global:Be.global,index:Be.index,model:Be}))));const ke={...x.Eg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:x.bU.hideVariable,current:{value:{login:d.Vt.user.login,id:d.Vt.user.id,email:d.Vt.user.email,toString:()=>d.Vt.user.id.toString()}}};Pe((0,S.mb)(Re,(0,U.VN)((0,R.Y6)(ke,{global:ke.global,index:ke.index,model:ke}))))},V=(Re,ye)=>(Pe,be)=>{const{rootStateKey:Be}=Re,ke=(0,O.E0)(Re,be());if(!(0,C.U4)(ke)||(0,i.Q)(ke.current))return;const ot=(0,M.x)(ke.current,ye);Pe((0,S.mb)(Be,(0,U.Pl)((0,R.Y6)(Re,{propName:"multi",propValue:ye})))),Pe((0,S.mb)(Be,(0,U.Pl)((0,R.Y6)(Re,{propName:"current",propValue:ot}))))},H=async(Re,ye)=>{if(!Re.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${Re.id}`);if(j(Re,ye))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const Pe=A(Re,ye);_(Re.rootStateKey,Pe,ye)&&await new Promise(be=>{const Be=m.h.subscribe(()=>{if(!Re.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${Re.id}`);_(Re.rootStateKey,Pe,m.h.getState())||(Be(),be())})})},j=(Re,ye,Pe=new Set)=>Pe.has(Re.id)?!0:(Pe=new Set([...Pe,Re.id]),A(Re,ye).some(be=>j(be,ye,Pe))),A=(Re,ye)=>{if(!Re.rootStateKey)return[];const Pe=[];for(const be of(0,O.gt)(Re.rootStateKey,ye))Re!==be&&h.z.getIfExists(Re.type)&&h.z.get(Re.type).dependsOn(Re,be)&&Pe.push(be);return Pe},_=(Re,ye,Pe)=>{if(ye.length===0)return!1;const be=(0,O.gt)(Re,Pe);return ye.filter(ke=>be.some(ot=>ot.id===ke.id&&(ot.state===s.Gu.NotStarted||ot.state===s.Gu.Loading))).length>0},k=(Re,ye)=>async(Pe,be)=>{const Be=(0,O.E0)(Re,be());await H(Be,be());const ke=ye[P.IG+Be.name];if(ke!==void 0){const ot=(0,R.Hi)(ke);await h.z.get(Be.type).setValueFromUrl(Be,ot);return}if(Be.hasOwnProperty("refresh")){const ot=Be;if(ot.refresh===x.Bd.onDashboardLoad||ot.refresh===x.Bd.onTimeRangeChanged){await Pe(Ie((0,R.yQ)(ot)));return}}Pe(Ge(Re))},Q=Re=>async(ye,Pe)=>{const be=f.E1.getSearchObject(),Be=(0,O.gt)(Re,Pe()).map(async ke=>await ye(k((0,R.yQ)(ke),be)));await Promise.all(Be)},re=(Re,ye)=>async(Pe,be)=>{const Be=(0,R.Hi)(ye),ke=(0,O.E0)(Re,be());(0,R.iD)(ke)!==x.Bd.never&&await Pe(Ie((0,R.yQ)(ke)));const ot=(0,O.E0)((0,R.yQ)(ke),be());if(!(0,C.eL)(ot))return;if(!ot)throw new Error(`Couldn't find variable with name: ${ke.name}`);let ft=ot.options.find(gt=>gt.text===Be||gt.value===Be);if(!ft&&(0,C.U4)(ot)&&ot.allValue&&Be===ot.allValue&&(ft={text:P.xk,value:P.r2,selected:!1}),!ft){let gt=Be;const St=Be;Array.isArray(Be)&&(gt=Be.reduce((ut,Dt)=>{const ie=ot.options.find(De=>De.value===Dt);return ie?[].concat(ut,[ie.text]):[].concat(ut,[Dt])},[])),ft={text:gt,value:St,selected:!1}}(0,C.U4)(ot)&&(ft=(0,M.x)({text:(0,t.castArray)(ft.text),value:(0,t.castArray)(ft.value),selected:!1},ot.multi)),await h.z.get(ke.type).setValue(ot,ft)},Z=Re=>{let ye,Pe,be,Be;const ke=[];for(ye=0;ye<Re.options.length;ye++)if(Be={...Re.options[ye]},Be.selected=!1,Array.isArray(Re.current.value))for(Pe=0;Pe<Re.current.value.length;Pe++)be=Re.current.value[Pe],Be.value===be&&(Be.selected=!0,ke.push(Be));else Be.value===Re.current.value&&(Be.selected=!0,ke.push(Be));return ke},oe=(Re,ye)=>(Pe,be)=>{const Be=(0,O.E0)(Re,be());if(!(0,C.eL)(Be))return Promise.resolve();const ke=Be.current||{},ot=h.z.get(Be.type).setValue;if(Array.isArray(ke.value)){const St=Z(Be);if(St.length===0){const Dt=Be.options[0];return ot(Be,Dt)}const ut={value:St.map(Dt=>Dt.value),text:St.map(Dt=>Dt.text),selected:!0};return ot(Be,ut)}let ft=null;const gt=(0,R.Tt)(Be);if(ft=Be.options?.find(St=>St.text===gt),ft||ye&&(ft=Be.options?.find(St=>St.text===ye),ft))return ot(Be,ft);if(Be.options){const St=Be.options[0];if(St)return ot(Be,St)}return Promise.resolve()},G=(Re,ye,Pe)=>async be=>{const{rootStateKey:Be}=Re;return be((0,S.mb)(Be,(0,U.Q8)((0,R.Y6)(Re,{option:ye})))),await be(fe(Re,Pe))},le=Re=>{const ye=new y.kJ;return Re.forEach(Pe=>{ye.createNode(Pe.name)}),Re.forEach(Pe=>{Re.forEach(be=>{Pe!==be&&h.z.get(Pe.type).dependsOn(Pe,be)&&ye.link(Pe.name,be.name)})}),ye},fe=(Re,ye,Pe=p.h$)=>async(be,Be)=>{const ke=Be(),{rootStateKey:ot}=Re,ft=(0,O.E0)(Re,ke);if((0,O.AE)(ot,ke).transaction.status===x.LN.Fetching)return(0,R.iD)(ft)===x.Bd.never&&(await be(at((0,R.yQ)(ft))),be(Ge(Re))),Promise.resolve();const gt=(0,O.gt)(ot,ke),St=le(gt),ut=ke.dashboard?.getModel()?.panels??[],Dt=(0,D.dH)(ut),ie=(0,C.Kn)(ft)?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,D.PQ)([ft.id],St,Dt))},De=St.getNode(ft.name);let Ne=[];return De&&(Ne=De.getOptimizedInputEdges().map(Je=>{const Xe=gt.find(Le=>Le.name===Je.inputNode?.name);return Xe?be(Ie((0,R.yQ)(Xe))):Promise.resolve()})),Promise.all(Ne).then(()=>{ye&&(Pe.publish(new x.x9(ie)),f.E1.partial(he(ot,Be)))})},ae=(Re,ye,Pe,be)=>(ye.includes(Re.name)||ye.push(Re.name),Re.outputEdges.forEach(Be=>{const ke=Be.outputNode;if(ke&&!ye.includes(ke.name)){const ot=Pe.find(ft=>ft.name===ke.name);ot&&ot.refresh===x.Bd.onTimeRangeChanged&&be.indexOf(ot)===-1?(be.push(ot),ye.push(ke.name)):ae(ke,ye,Pe,be)}}),be),de=(Re,ye)=>{const Pe=(0,O.gt)(Re,ye),be=le(Pe),Be=[],ke=[];return Pe.forEach(ot=>{const ft=be.getNode(ot.name);if(!Be.includes(ot.name)&&ft){const gt=Pe.find(ut=>ut.name===ft.name),St=gt&&gt.refresh===x.Bd.onTimeRangeChanged;St&&ft.outputEdges.length===0&&ke.push(gt),St&&ke.includes(gt)&&ft.outputEdges.length>0&&(ke.push(gt),ae(ft,Be,Pe,ke)),gt&&gt.refresh&&gt.refresh!==x.Bd.onTimeRangeChanged&&ae(ft,Be,Pe,ke)}}),ke},ee=(Re,ye)=>(0,O.gt)(Re,ye).filter(Be=>Be.hasOwnProperty("refresh")&&Be.hasOwnProperty("options")?Be.refresh===x.Bd.onTimeRangeChanged:!1),me=(Re,ye,Pe={templateSrv:(0,v.J)(),events:p.h$})=>async(be,Be)=>{Pe.templateSrv.updateTimeRange(ye);let ke=[];u.v.featureToggles.refactorVariablesTimeRange?ke=de(Re,Be()):ke=ee(Re,Be());const ot=ke.map(gt=>gt.id),ft=ke.map(gt=>be(q((0,R.yQ)(gt))));try{await Promise.all(ft),Pe.events.publish(new x.eq({variableIds:ot}))}catch(gt){console.error(gt),be((0,o.$l)(Ke("Template variable service failed",gt)))}},q=Re=>async(ye,Pe)=>{const be=(0,O.E0)(Re,Pe());if(!(0,C.eL)(be))return;const Be=be.options.slice();await ye(Ie((0,R.yQ)(be),!0));const ke=(0,O.E0)(Re,Pe());if(!(0,C.eL)(ke))return;const ot=ke.options;JSON.stringify(Be)!==JSON.stringify(ot)&&Pe().dashboard.getModel()?.templateVariableValueUpdated()},ne=(Re,ye,Pe=p.h$)=>async(be,Be)=>{const ke=[],ot=Be().dashboard.getModel(),ft=(0,O.gt)(Re,Be());for(const ie of ft){const De=P.IG+ie.name;if(!ye.hasOwnProperty(De)||!se(ie,ye[De].value))continue;let Ne=ye[De].value;if(ye[De].removed){const Xe=ot?.templating.list.find(Le=>Le.name===ie.name);Xe&&(0,C.Kr)(Xe)&&(Ne=Xe.current.value),Xe&&(0,C.VC)(Xe)&&(Ne=Xe.query)}const Je=h.z.get(ie.type).setValueFromUrl(ie,Ne);ke.push(Je)}const gt=ft.filter(ie=>{const De=P.IG+ie.name;return ye.hasOwnProperty(De)&&se(ie,ye[De].value)&&!(0,C.Kn)(ie)}),St=le(ft),ut=(0,D.dH)(ot?.panels??[]),Dt=(0,D.PQ)(gt.map(ie=>ie.id),St,ut);ke.length&&(await Promise.all(ke),Pe.publish(new x.Wy({refreshAll:Dt.size===0,panelIds:Array.from(Dt)})))};function se(Re,ye){const Pe=h.z.get(Re.type).getValueForUrl(Re);let be=(0,R.Hi)(ye);return Array.isArray(Pe)&&!Array.isArray(be)&&(be=[be]),!(0,t.isEqual)(Pe,be)}const he=(Re,ye)=>{const Pe=f.E1.getSearchObject(),be=Object.keys(Pe).filter(Be=>Be.indexOf(P.IG)===-1).reduce((Be,ke)=>(Be[ke]=Pe[ke],Be),{});for(const Be of(0,O.gt)(Re,ye())){if(Be.skipUrlSync)continue;const ke=h.z.get(Be.type);be[P.IG+Be.name]=ke.getValueForUrl(Be)}return be},ue=(Re,ye)=>async(Pe,be)=>{try{const Be=(0,R.mn)(Re),ke=be(),ot=(0,O.cp)(ke);ot&&(0,O.AE)(ot,ke).transaction.status===x.LN.Fetching&&Pe(ct(ot)),Pe((0,S.mb)(Be,(0,I.Z9)({uid:Be}))),Pe(L(Be,ye)),Pe(w(Be,ye)),Pe(Te(Be)),await Pe(Q(Be)),Pe((0,S.mb)(Be,(0,I.iv)({uid:Be})))}catch(Be){Pe((0,o.$l)(Ke("Templating init failed",Be))),console.error(Be)}};function Te(Re,ye=E.ak){return(Pe,be)=>{const Be=(0,O.gt)(Re,be());for(const ke of Be){if(!(0,C.Kn)(ke)&&!(0,C.Xh)(ke))continue;const{datasource:ot}=ke;if((0,l.cv)(ot))continue;const ft=ye().getInstanceSettings(ot),gt=ft?(0,l.iU)(ft):{uid:ot};Pe((0,S.mb)(Re,(0,U.Pl)((0,R.Y6)(ke,{propName:"datasource",propValue:gt}))))}}}const Ve=Re=>ye=>{ye((0,S.mb)(Re,(0,F.S)())),ye((0,S.mb)(Re,(0,a.QR)())),ye((0,S.mb)(Re,(0,b.XJ)())),ye((0,S.mb)(Re,(0,I.p3)()))},ct=(Re,ye={getBackendSrv:g.i})=>Pe=>{ye.getBackendSrv().cancelAllInFlightRequests(),Pe(Ve(Re))},Ie=(Re,ye=!1)=>async(Pe,be)=>{const{rootStateKey:Be}=Re;try{if(!(0,R.A3)(Be,be()))return;const ke=(0,O.E0)(Re,be());Pe((0,S.mb)(Be,(0,U.$M)((0,R.Y6)(ke)))),await Pe(at((0,R.yQ)(ke))),await h.z.get(ke.type).updateOptions(ke),Pe(Ge(Re))}catch(ke){if(Pe((0,S.mb)(Be,(0,U.Le)((0,R.Y6)(Re,{error:ke})))),ye||(console.error(ke),Pe((0,o.$l)(Ke("Error updating options:",ke,Re)))),ye)throw ke}},Ke=(Re,ye,Pe)=>(0,c.t_)(`${Pe?`Templating [${Pe.id}]`:"Templating"}`,`${Re} ${ye.message}`),Ge=Re=>(ye,Pe)=>{const{rootStateKey:be}=Re;if(!(0,R.A3)(be,Pe()))return;const Be=(0,O.E0)(Re,Pe());Be.state!==s.Gu.Done&&ye((0,S.mb)(Re.rootStateKey,(0,U.qQ)((0,R.Y6)(Be))))};function at(Re,ye=E.ak){return async function(Pe,be){const{id:Be,rootStateKey:ke}=Re;if(!(0,R.A3)(ke,be()))return;const ot=(0,O.E0)(Re,be());if(ot.type==="query")try{const ft=await ye().get(ot.datasource??"");if((0,C.R)(ft)||!(0,C.Ju)(ft)||dt(ot.query))return;const gt={refId:`${ft.name}-${Be}-Variable-Query`,query:ot.query};Pe((0,S.mb)(ke,(0,U.Pl)((0,R.Y6)(Re,{propName:"query",propValue:gt}))))}catch(ft){Pe((0,o.$l)(Ke("Failed to upgrade legacy queries",ft))),console.error(ft)}}}function dt(Re){return Re?Re.hasOwnProperty("refId")&&typeof Re.refId=="string":!1}},7240:(Y,T,e)=>{"use strict";e.d(T,{ZP:()=>d,mb:()=>f,qM:()=>s});var t=e(92624),n=e(51511),i=e(30286);const s={keys:{}},l=r=>({type:`templating/keyed/${r.action.type.replace(/^templating\//,"")}`,payload:r});function f(r,m){const c=(0,t.mn)(r);return l({key:c,action:m})}const u=r=>typeof r.type=="string"&&r.type.startsWith("templating/keyed")&&"payload"in r&&typeof r.payload.key=="string";function o(r=s,m){if(u(m)){const{key:c,action:p}=m.payload,g=(0,t.mn)(c),y=i.Z9.match(p)?g:r.lastKey,E=(0,n.Q)(),v=r.keys[g],h=E(v,p);return{...r,lastKey:y,keys:{...r.keys,[g]:h}}}return r}const d={templating:o}},51511:(Y,T,e)=>{"use strict";e.d(T,{L:()=>r,Q:()=>d});var t=e(83829),n=e(50678),i=e(37737),s=e(85972),l=e(30286),f=e(63510),u=e(6942);let o;function d(){return o||(o=(0,t.combineReducers)({editor:n.gl,variables:u.L,optionsPicker:s.cv,transaction:l.vw,inspect:i.iV})),o}function r(){return{editor:n.PF,variables:f.s,optionsPicker:s.yy,transaction:l.xO,inspect:i.Kf}}},87095:(Y,T,e)=>{"use strict";e.d(T,{AE:()=>u,E0:()=>l,Eo:()=>c,IV:()=>r,Q4:()=>v,QT:()=>p,S_:()=>E,_K:()=>P,cp:()=>y,gt:()=>o,ir:()=>a,ng:()=>h,xD:()=>m});var t=e(58635),n=e(3153),i=e(92624),s=e(51511);function l(C,D=(0,n.y0)(),b=!0){const{id:M,rootStateKey:x}=C,S=u(x,D).variables[M];if(!S){if(b)throw new Error(`Couldn't find variable with id:${M}`);return}return S}function f(C,D,b=(0,n.y0)()){return Object.values(u(D,b).variables).filter(C).sort((M,x)=>M.index-x.index)}function u(C,D=(0,n.y0)()){return D.templating.keys[(0,i.mn)(C)]??(0,s.L)()}function o(C,D=(0,n.y0)()){return f(d,C,D)}function d(C){return C.type!=="system"}const r=(0,t.Z)((C,D)=>o(C,(0,n.y0)())),m=(C,D)=>o(C,D);function c(C,D=(0,n.y0)()){return p(Object.values(u(C,D).variables))}function p(C){const D=C.filter(d).sort((b,M)=>b.index-M.index);return D.length>0?D[D.length-1].index+1:0}function g(C,D=getState()){return u(C,D).transaction.isDirty}function y(C=(0,n.y0)()){return C.templating?.lastKey}function E(C=(0,n.y0)()){if(!C.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return C.templating.lastKey}function v(C,D=(0,n.y0)()){const b=y(D);return b?f(C,b,D):[]}function h(C=(0,n.y0)()){const D=y(C);return D?o(D,C):[]}function P(C,D=(0,n.y0)()){const b=y(D);if(b)return l({id:C,rootStateKey:b,type:"query"},D,!1)}function a(C,D){return C[D]}},92990:(Y,T,e)=>{"use strict";e.d(T,{$M:()=>C,Be:()=>P,Le:()=>b,Mn:()=>a,Pl:()=>y,Q8:()=>h,VN:()=>g,Y9:()=>v,b5:()=>c,gE:()=>E,mZ:()=>p,qQ:()=>D});var t=e(62992),n=e(82897),i=e.n(n),s=e(52666),l=e(22323),f=e(50678),u=e(15546),o=e(92624),d=e(87095),r=e(63510);const m=(0,t.oM)({name:"templating/shared",initialState:r.s,reducers:{addVariable:(M,x)=>{const R=x.payload.id??x.payload.data.model.name,S=l.z.get(x.payload.type),O=(0,n.cloneDeep)(S.initialState),U=S.beforeAdding?S.beforeAdding(x.payload.data.model):(0,n.cloneDeep)(x.payload.data.model),I={...(0,n.defaults)({},U,O),id:R,index:x.payload.data.index,global:x.payload.data.global};M[R]=I},variableStateNotStarted:(M,x)=>{const R=(0,d.ir)(M,x.payload.id);R.state=s.Gu.NotStarted,R.error=null},variableStateFetching:(M,x)=>{const R=(0,d.ir)(M,x.payload.id);R.state=s.Gu.Loading,R.error=null},variableStateCompleted:(M,x)=>{const R=(0,d.ir)(M,x.payload.id);R&&(R.state=s.Gu.Done,R.error=null)},variableStateFailed:(M,x)=>{const R=(0,d.ir)(M,x.payload.id);R&&(R.state=s.Gu.Error,R.error=x.payload.data.error)},removeVariable:(M,x)=>{if(delete M[x.payload.id],!x.payload.data.reIndex)return;const R=Object.values(M).sort((S,O)=>S.index-O.index);for(let S=0;S<R.length;S++)R[S].index=S},duplicateVariable:(M,x)=>{const R=(0,n.cloneDeep)(M[x.payload.id]),S=`copy_of_${R.name}`,O=x.payload.data?.newId??S,U=(0,d.QT)(Object.values(M));M[O]={...(0,n.cloneDeep)(l.z.get(x.payload.type).initialState),...R,id:O,name:S,index:U}},changeVariableOrder:(M,x)=>{const{toIndex:R,fromIndex:S}=x.payload.data,O=Object.values(M);for(let U=0;U<O.length;U++){const I=O[U];I.index===S?I.index=R:I.index>S&&I.index<=R?I.index--:I.index<S&&I.index>=R&&I.index++}},changeVariableType:(M,x)=>{const{id:R}=x.payload,{label:S,name:O,index:U,description:I,rootStateKey:F}=M[R];M[R]={...(0,n.cloneDeep)(l.z.get(x.payload.data.newType).initialState),id:R,rootStateKey:F,label:S,name:O,index:U,description:I}},setCurrentVariableValue:(M,x)=>{if(!x.payload.data.option)return;const R=(0,d.ir)(M,x.payload.id);if(!(0,u.eL)(R))return;const{option:S}=x.payload.data,O={...S,text:(0,o.Hi)(S?.text),value:(0,o.Hi)(S?.value)};R.current=O,R.options=R.options.map(U=>{U.value=(0,o.Hi)(U.value),U.text=(0,o.Hi)(U.text);let I=!1;if(Array.isArray(O.value))for(let F=0;F<O.value.length;F++){const w=O.value[F];if(U.value===w){I=!0;break}}else U.value===O.value&&(I=!0);return U.selected=I,U})},changeVariableProp:(M,x)=>{const R=(0,d.ir)(M,x.payload.id);R[x.payload.data.propName]=x.payload.data.propValue}},extraReducers:M=>M.addCase(f.Yo,(x,R)=>{const S=(0,d.ir)(x,R.payload.id);S.name=R.payload.data.newName})}),c=m.reducer,{removeVariable:p,addVariable:g,changeVariableProp:y,changeVariableOrder:E,duplicateVariable:v,setCurrentVariableValue:h,changeVariableType:P,variableStateNotStarted:a,variableStateFetching:C,variableStateCompleted:D,variableStateFailed:b}=m.actions},30286:(Y,T,e)=>{"use strict";e.d(T,{Z9:()=>u,iv:()=>d,p3:()=>o,vw:()=>r,xO:()=>s});var t=e(62992),n=e(10672),i=e(92990);const s={uid:null,status:n.LN.NotStarted,isDirty:!1},l=(0,t.oM)({name:"templating/transaction",initialState:s,reducers:{variablesInitTransaction:(m,c)=>{m.uid=c.payload.uid,m.status=n.LN.Fetching},variablesCompleteTransaction:(m,c)=>{m.uid===c.payload.uid&&(m.status=n.LN.Completed)},variablesClearTransaction:(m,c)=>{m.uid=null,m.status=n.LN.NotStarted,m.isDirty=!1}},extraReducers:m=>m.addMatcher(f,(c,p)=>{c.status===n.LN.Completed&&(c.isDirty=!0)})});function f(m){return i.mZ.match(m)||i.VN.match(m)||i.Pl.match(m)||i.gE.match(m)||i.Y9.match(m)||i.Be.match(m)}const{variablesInitTransaction:u,variablesClearTransaction:o,variablesCompleteTransaction:d}=l.actions,r=l.reducer},63510:(Y,T,e)=>{"use strict";e.d(T,{s:()=>t});const t={}},6942:(Y,T,e)=>{"use strict";e.d(T,{L:()=>f,S:()=>l});var t=e(62992),n=e(22323),i=e(92990),s=e(63510);const l=(0,t.PH)("templating/cleanVariables"),f=(u=s.s,o)=>{if(l.match(o)){const d=Object.values(u).filter(m=>m.global);return d?d.reduce((m,c)=>(m[c.id]=c,m),{}):s.s}return o?.payload?.type&&n.z.getIfExists(o?.payload?.type)?n.z.get(o.payload.type).reducer((0,i.b5)(u,o),o):u}},10672:(Y,T,e)=>{"use strict";e.d(T,{$U:()=>t.$U,Bd:()=>t.Bd,Eg:()=>f,LN:()=>l,Wy:()=>d,bU:()=>t.bU,eq:()=>o,x9:()=>u});var t=e(69273),n=e(52666),i=e(55391),s=e(82253),l=(r=>(r.NotStarted="Not started",r.Fetching="Fetching",r.Completed="Completed",r))(l||{});const f={id:s.UY,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:t.bU.dontHide,skipUrlSync:!1,state:n.Gu.NotStarted,error:null,description:null};class u extends i.R{}u.type="variables-changed";class o extends i.R{}o.type="variables-time-range-process-done";class d extends i.R{}d.type="variables-changed-in-url"},92624:(Y,T,e)=>{"use strict";e.d(T,{A3:()=>S,AQ:()=>C,HY:()=>v,Hi:()=>R,J7:()=>m,N9:()=>P,QI:()=>E,Tt:()=>h,Y6:()=>I,_6:()=>y,a9:()=>c,bf:()=>g,bi:()=>b,gR:()=>a,iD:()=>D,mn:()=>O,xT:()=>x,yQ:()=>U});var t=e(82897),n=e.n(t),i=e(20308),s=e(55935),l=e(3153),f=e(19349),u=e(22323),o=e(82253),d=e(87095),r=e(10672);const m=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,c=F=>(m.lastIndex=0,m.exec(F)),p="__searchFilter",g=F=>F&&typeof F=="string"?F.indexOf(p)!==-1:!1,y=F=>{const{query:w,wildcardChar:K}=F;if(!g(w))return{};let{options:L}=F;return L=L||{searchFilter:""},{__searchFilter:{value:L.searchFilter?`${L.searchFilter}${K}`:`${K}`,text:""}}};function E(...F){const w=F[F.length-1];F[0]=typeof F[0]=="string"?F[0]:(0,s.Xh)(F[0]);const L=F.slice(0,-1).join(" ").match(m);return!!(L!==null?L.find(H=>{const j=c(H);return j!==null&&j.indexOf(w)>-1}):!1)}const v=F=>{if(!F||!F.current)return!1;if(F.current.value){const w=Array.isArray(F.current.value);if(w&&F.current.value.length&&F.current.value[0]===o.r2||!w&&F.current.value===o.r2)return!0}if(F.current.text){const w=Array.isArray(F.current.text);if(w&&F.current.text.length&&F.current.text[0]===o.xk||!w&&F.current.text===o.xk)return!0}return!1},h=F=>!F||!F.current||!F.current.text?"":Array.isArray(F.current.text)?F.current.text.toString():typeof F.current.text!="string"?"":F.current.text,P=F=>!F||!F.current||F.current.value===void 0||F.current.value===null?null:Array.isArray(F.current.value)?F.current.value.toString():typeof F.current.value!="string"?null:F.current.value;function a(F,w=(0,i.J)()){return!F||!F.regex?"":w.replace(F.regex,{},"regex")}function C(F,w,K=(0,f.$t)()){const L={range:void 0,variable:F,searchFilter:w};return(F.refresh===r.Bd.onTimeRangeChanged||F.refresh===r.Bd.onDashboardLoad)&&(L.range=K.timeRange()),L}function D(F){if(!F||!F.hasOwnProperty("refresh"))return r.Bd.never;const w=F;return w.refresh!==r.Bd.onTimeRangeChanged&&w.refresh!==r.Bd.onDashboardLoad&&w.refresh!==r.Bd.never?r.Bd.never:w.refresh}function b(){return u.z.list().filter(F=>F.id!=="system").map(({id:F,name:w,description:K})=>({label:w,value:F,description:K}))}function M(F){return(0,t.isArray)(F)&&(F.length===0?F=void 0:F.length===1&&(F=F[0])),F}function x(F,w){let K=0;const L={};for(const V in F){if(!V.startsWith(o.IG))continue;let H=M(w[V]),j=M(F[V]);(0,t.isEqual)(j,H)||(L[V]={value:F[V]},K++)}for(const V in w){if(!V.startsWith(o.IG))continue;const H=w[V];(0,t.isArray)(H)&&H.length===0||F.hasOwnProperty(V)||(L[V]={value:"",removed:!0},K++)}return K?L:void 0}function R(F){return Array.isArray(F)?F.map(String):F==null?"":typeof F=="number"?F.toString(10):typeof F=="string"?F:typeof F=="boolean"?F.toString():""}function S(F,w=(0,l.y0)()){return(0,d.AE)(F,w).transaction.status!==r.LN.NotStarted}function O(F){return String(F)}const U=F=>{if(!F.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${F.id}`);return{type:F.type,id:F.id,rootStateKey:F.rootStateKey}};function I(F,w){return{type:F.type,id:F.id,data:w}}},92077:(Y,T,e)=>{"use strict";var t=e(63418),n=e(35645);const i=n.v.bootData.settings.cspReportOnlyEnabled;n.v.bootData.settings.trustedTypesDefaultPolicyEnabled&&window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",{createHTML:(B,W,z)=>i?(console.error("[HTML not sanitized with Trusted Types]",B,W,z),B):B.replace(/<script/gi,"&lt;script"),createScript:B=>B,createScriptURL:(B,W,z)=>i?(console.error("[ScriptURL not sanitized with Trusted Types]",B,W,z),B):t.QX.sanitizeUrl(B)});var s=e(32478),l=e(88656),f=e(4547),u=e(44032),o=e(63073),d=e(3574),r=e(24259),m=e(91162),c=e(87449),p=e(9398),g=e(134),y=e(15678),E=e(99714),v=e(82557),h=e(82897),P=e.n(h),a=e(66111),C=e(91676),D=e(67483),b=e(10753),M=e(30779),x=e(2653),R=e(8488),S=e(72196),O=e(54899),U=e(47458),I=e(37932),F=e(82378),w=e(36535),K=e(19920),L=e(86647),V=e(54665),H=e(5494),j=e(87670),A=e(98825),_=e(87221),k=e(90771),Q=e(47694),re=e(79378),Z=e(9892),oe=e(99098),G=e(50035),le=e(90748),fe=e(30471),ae=e(13512),de=e(50928),ee=e(91603),me=e(2594),q=e(31403),ne=e(7804),se=e(8581),he=e(53908),ue=e(46967);function Te(B,W){switch(W.type){case oe.fS.boolean:return(0,h.isUndefined)(B)?!1:Ve(B);case oe.fS.number:return isNaN(B)?0:parseFloat(B);case oe.fS.string:return B?String(B):"";default:return B}}const Ve=B=>(0,h.isString)(B)?!(B[0]==="F"||B[0]==="f"||B[0]==="0"):!!B;function ct(B){return function({options:z,onChange:J,field:ce}){const{validator:pe,converter:xe=Te}=B,{value:Fe}=z,[et,lt]=(0,a.useState)(!pe(Fe)),xt=(0,a.useCallback)(Zt=>{lt(!pe(Zt.currentTarget.value))},[lt,pe]),kt=(0,a.useCallback)(Zt=>{if(et)return;const{value:tn}=Zt.currentTarget;J({...z,value:xe(tn,ce)})},[z,J,et,ce,xe]);return a.createElement(ue.I,{className:"flex-grow-1",invalid:et,defaultValue:String(z.value),placeholder:"Value",onChange:xt,onBlur:kt})}}const Ie=()=>[{name:"Is greater",id:le.mE.greater,component:ct({validator:B=>!isNaN(B)})},{name:"Is greater or equal",id:le.mE.greaterOrEqual,component:ct({validator:B=>!isNaN(B)})},{name:"Is lower",id:le.mE.lower,component:ct({validator:B=>!isNaN(B)})},{name:"Is lower or equal",id:le.mE.lowerOrEqual,component:ct({validator:B=>!isNaN(B)})},{name:"Is equal",id:le.mE.equal,component:ct({validator:()=>!0})},{name:"Is not equal",id:le.mE.notEqual,component:ct({validator:()=>!0})},{name:"Regex",id:le.mE.regex,component:ct({validator:()=>!0,converter:B=>String(B)})}],Ke=()=>null,Ge=()=>[{name:"Is null",id:le.mE.isNull,component:Ke},{name:"Is not null",id:le.mE.isNotNull,component:Ke}];function at(B){return function({options:z,onChange:J,field:ce}){const{validator:pe}=B,[xe,Fe]=(0,a.useState)({from:!pe(z.from),to:!pe(z.to)}),et=(0,a.useCallback)((xt,kt)=>{Fe({...xe,[kt]:!pe(xt.currentTarget.value)})},[Fe,pe,xe]),lt=(0,a.useCallback)((xt,kt)=>{if(xe[kt])return;const{value:Zt}=xt.currentTarget;J({...z,[kt]:Te(Zt,ce)})},[z,J,xe,ce]);return a.createElement(a.Fragment,null,a.createElement(ue.I,{className:"flex-grow-1 gf-form-spacing",invalid:xe.from,defaultValue:String(z.from),placeholder:"From",onChange:xt=>et(xt,"from"),onBlur:xt=>lt(xt,"from")}),a.createElement("div",{className:"gf-form-label"},"and"),a.createElement(ue.I,{className:"flex-grow-1",invalid:xe.to,defaultValue:String(z.to),placeholder:"To",onChange:xt=>et(xt,"to"),onBlur:xt=>lt(xt,"to")}))}}const dt=()=>[{name:"Is between",id:le.mE.between,component:at({validator:B=>!isNaN(B)})}],Re=new he.B(()=>[...Ie(),...Ge(),...dt()]),ye=B=>{const{onDelete:W,onChange:z,filter:J,fieldsInfo:ce}=B,{fieldsAsOptions:pe,fieldByDisplayName:xe}=ce,Fe=Be(J,pe)??"",et=xe[Fe],lt=et?Pe(et):[],xt=be(J,lt),kt=Re.getIfExists(xt),Zt=(0,a.useCallback)(vn=>{vn?.value&&z({...J,fieldName:vn.value})},[z,J]),tn=(0,a.useCallback)(vn=>{if(!vn?.value)return;const Un=vn.value,Za=G.U8.get(Un).getDefaultOptions(et);z({...J,config:{id:Un,options:Za}})},[z,J,et]),ln=(0,a.useCallback)(vn=>{z({...J,config:{...J.config,options:vn}})},[z,J]);return!et||!kt||!kt.component?null:a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form-spacing"},a.createElement("div",{className:"gf-form-label width-7"},"Field"),a.createElement(se.Ph,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:pe,value:J.fieldName,onChange:Zt})),a.createElement("div",{className:"gf-form gf-form-spacing"},a.createElement("div",{className:"gf-form-label"},"Match"),a.createElement(se.Ph,{className:"width-12",placeholder:"Select test",options:lt,value:xt,onChange:tn})),a.createElement("div",{className:"gf-form gf-form--grow gf-form-spacing"},a.createElement("div",{className:"gf-form-label"},"Value"),a.createElement(kt.component,{field:et,options:J.config.options??{},onChange:ln})),a.createElement("div",{className:"gf-form"},a.createElement(q.zx,{icon:"times",onClick:W,variant:"secondary"})))},Pe=B=>{const W=[];for(const z of G.U8.list())!z.isApplicable(B)||!Re.getIfExists(z.id)||W.push({value:z.id,label:z.name,description:z.description});return W},be=(B,W)=>{const z=W.find(J=>J.value===B.config.id);if(z&&z.value)return z.value;if(W[0]?.value)return W[0]?.value},Be=(B,W)=>{const z=W.find(J=>J.value===B.fieldName);if(z&&z.value)return z.value;if(W[0]?.value)return W[0]?.value},ke=[{label:"Include",value:ee.PQ.include},{label:"Exclude",value:ee.PQ.exclude}],ot=[{label:"Match all",value:ee.ER.all},{label:"Match any",value:ee.ER.any}],ft=B=>{const{input:W,options:z,onChange:J}=B,ce=St(),pe=ut(W),xe=(0,a.useCallback)(()=>{const kt=W[0],Zt=kt.fields.find(vn=>vn.type!==oe.fS.time);if(!Zt)return;const tn=(0,h.cloneDeep)(z.filters),ln=G.U8.get(le.mE.greater);tn.push({fieldName:(0,fe.CZ)(Zt,kt,W),config:{id:ln.id,options:ln.getDefaultOptions(Zt)}}),J({...z,filters:tn})},[J,z,W]),Fe=(0,a.useCallback)(kt=>{let Zt=(0,h.cloneDeep)(z.filters);Zt.splice(kt,1),J({...z,filters:Zt})},[z,J]),et=(0,a.useCallback)((kt,Zt)=>{let tn=(0,h.cloneDeep)(z.filters);tn[Zt]=kt,J({...z,filters:tn})},[z,J]),lt=(0,a.useCallback)(kt=>{J({...z,type:kt??ee.PQ.include})},[z,J]),xt=(0,a.useCallback)(kt=>{J({...z,match:kt??ee.ER.all})},[z,J]);return a.createElement("div",null,a.createElement("div",{className:"gf-form gf-form-inline"},a.createElement("div",{className:"gf-form-label width-8"},"Filter type"),a.createElement("div",{className:"width-15"},a.createElement(me.S,{options:ke,value:z.type,onChange:lt,fullWidth:!0}))),a.createElement("div",{className:"gf-form gf-form-inline"},a.createElement("div",{className:"gf-form-label width-8"},"Conditions"),a.createElement("div",{className:"width-15"},a.createElement(me.S,{options:ot,value:z.match,onChange:xt,fullWidth:!0}))),a.createElement("div",{className:ce.conditions},z.filters.map((kt,Zt)=>a.createElement(ye,{key:Zt,filter:kt,fieldsInfo:pe,onChange:tn=>et(tn,Zt),onDelete:()=>Fe(Zt)})),a.createElement("div",{className:"gf-form"},a.createElement(q.zx,{icon:"plus",size:"sm",onClick:xe,variant:"secondary"},"Add condition"))))},gt={id:ae.W.filterByValue,editor:ft,transformation:de.Y.filterByValueTransformer,name:de.Y.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source."},St=(0,ne.B)(()=>({conditions:Z.css`
    padding-left: 16px;
  `})),ut=B=>(0,a.useMemo)(()=>{const W={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(B)?B.reduce((z,J)=>J.fields.reduce((ce,pe)=>{const xe=(0,fe.CZ)(pe,J,B);return ce.fieldByDisplayName[xe]||(ce.fieldsAsOptions.push({label:xe,value:xe,type:pe.type}),ce.fieldByDisplayName[xe]=pe),ce},z),W):W},[B]);var Dt=e(59250),ie=e(91353),De=e(91752),Ne=e(57054),Je=e(13505);function Xe(B,W){const z={data:B.input,options:B.options},J=new De.j({id:"root",title:"root"}),ce=xe=>{if(xe?.length){const Fe=xe[0];let et=J.categories.find(lt=>lt.props.id===Fe);return et||(et=new De.j({id:Fe,title:Fe}),J.categories.push(et)),et}return J},pe={getValue:xe=>(0,h.get)(B.options,xe),onChange:(xe,Fe)=>{B.onChange((0,Je.hs)(B.options,xe,Fe))}};return(0,Ne.HZ)(W,pe,ce,z),J}function Le(B){const W={data:[],options:{}},z={},J=new ie.rt;B(J,W);for(const ce of J.getItems())ce.defaultValue!=null&&(0,h.set)(z,ce.path,ce.defaultValue);return z}var Ue=e(90024),ve=e(77564);const Se=(B,W)=>{const z=W.options??{};(0,Ue.J)("",B,z)},$e=B=>{(0,a.useEffect)(()=>{if(!B.options.xBuckets?.mode){const z=Le(Se);B.onChange({...z,...B.options}),console.log("geometry useEffect",z)}});const W=Xe(B,Se);return a.createElement("div",null,a.createElement("div",null,W.items.map(z=>z.render())))},Ye={id:ve.Oy.id,editor:$e,transformation:ve.Oy,name:ve.Oy.name,description:ve.Oy.description,state:Dt.BV.alpha};var _e=e(72648),Et=e(6058),pt=e(11543),je=e(81764),ht=e(33750),we=e(71294),Qe=e(53768),nt=e(31290),it=e(69098),yt=e(32195);function Lt(B,W,z){const J={},ce={};for(const pe of B.fields){const xe=(0,fe.CZ)(pe,B),et=z.index[xe].handler;if(!et)continue;const lt=pe.values[W];if(lt==null)continue;const xt=et.processor(lt,J,ce);xt!=null&&(J[et.targetProperty??et.key]=xt)}return ce.mappingValues&&(J.mappings=un(ce)),J}var Kt=(B=>(B.Name="field.name",B.Value="field.value",B.Label="field.label",B.Ignore="__ignore",B))(Kt||{});const an=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:Bt},{key:"min",processor:Bt},{key:"unit",processor:B=>B.toString()},{key:"decimals",processor:Bt},{key:"displayName",name:"Display name",processor:B=>B.toString()},{key:"color",processor:B=>({fixedColor:B,mode:Qe.S.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(B,W)=>{const z=(0,nt.I)(B);if(!isNaN(z))return W.thresholds||(W.thresholds={mode:it.H.Absolute,steps:[{value:-1/0,color:"green"}]}),W.thresholds.steps.push({value:z,color:"red"}),W.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:ht.gz.allValues,processor:(B,W,z)=>{if((0,h.isArray)(B))return z.mappingValues=B,W.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:ht.gz.allValues,processor:(B,W,z)=>{if((0,h.isArray)(B))return z.mappingColors=B,W.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:ht.gz.allValues,processor:(B,W,z)=>{if((0,h.isArray)(B))return z.mappingTexts=B,W.mappings}}];function un(B){const W={type:yt.H.ValueToText,options:{}};if(!B.mappingValues)return[];for(let z=0;z<B.mappingValues.length;z++){const J=B.mappingValues[z];J!=null&&(W.options[J.toString()]={color:B.mappingColors&&B.mappingColors[z],text:B.mappingTexts&&B.mappingTexts[z],index:z})}return[W]}let hn=null;function Wn(){if(hn===null){hn={};for(const B of an)hn[B.key]=B}return hn}function Bt(B){const W=(0,nt.I)(B);if(!isNaN(W))return W}function Ft(B,W){for(const z of W)if(B===z.fieldName)return z.handlerKey;return B.toLowerCase()}function Vt(B){return B?Wn()[B]:null}function At(B,W,z){const J={index:{}};let ce=W.find(xe=>xe.handlerKey==="field.name"),pe=W.find(xe=>xe.handlerKey==="field.value");for(const xe of B.fields){const Fe=(0,fe.CZ)(xe,B),et=W.find(kt=>kt.fieldName===Fe),lt=et?et.handlerKey:Fe.toLowerCase();let xt=Vt(lt);z&&(xt?(xt.key==="field.name"&&(J.nameField=xe),xt.key==="field.value"&&(J.valueField=xe)):et||(!J.nameField&&!ce&&xe.type===oe.fS.string&&(J.nameField=xe,xt=Vt("field.name")),!J.valueField&&!pe&&xe.type===oe.fS.number&&(J.valueField=xe,xt=Vt("field.value")))),!xt&&z&&(xt=Vt("field.label")),J.index[Fe]={automatic:!et,handler:xt,reducerId:et?.reducerId??xt?.defaultReducer??ht.gz.lastNotNull}}return J}function Nt({frame:B,mappings:W,onChange:z,withReducers:J,withNameAndValue:ce}){const pe=(0,_e.wW)(_t),xe=Rt(B,W,ce),Fe=an.map(xt=>wt(xt,!1)),et=(xt,kt)=>{const Zt=W.findIndex(tn=>tn.fieldName===xt.fieldName);if(kt)if(Zt!==-1){const tn=[...W];tn.splice(Zt,1,{...W[Zt],handlerKey:kt.value}),z(tn)}else z([...W,{fieldName:xt.fieldName,handlerKey:kt.value}]);else z(Zt!==-1?W.filter((tn,ln)=>ln!==Zt):[...W,{fieldName:xt.fieldName,handlerKey:"__ignore"}])},lt=(xt,kt)=>{const Zt=W.findIndex(tn=>tn.fieldName===xt.fieldName);if(Zt!==-1){const tn=[...W];tn.splice(Zt,1,{...W[Zt],reducerId:kt}),z(tn)}else z([...W,{fieldName:xt.fieldName,handlerKey:xt.handlerKey,reducerId:kt}])};return a.createElement("table",{className:pe.table},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Field"),a.createElement("th",null,"Use as"),J&&a.createElement("th",null,"Select"))),a.createElement("tbody",null,xe.map(xt=>a.createElement("tr",{key:xt.fieldName},a.createElement("td",{className:pe.labelCell},xt.fieldName),a.createElement("td",{className:pe.selectCell,"data-testid":`${xt.fieldName}-config-key`},a.createElement(se.Ph,{options:Fe,value:xt.configOption,placeholder:xt.placeholder,isClearable:!0,onChange:kt=>et(xt,kt)})),J&&a.createElement("td",{"data-testid":`${xt.fieldName}-reducer`,className:pe.selectCell},a.createElement(we.m,{stats:[xt.reducerId],defaultStat:xt.reducerId,onChange:kt=>lt(xt,kt[0])}))))))}function Rt(B,W,z){const J=[],ce=At(B,W??[],z);for(const pe of B.fields){const xe=(0,fe.CZ)(pe,B),Fe=ce.index[xe],et=wt(Fe.handler,Fe.automatic);J.push({fieldName:xe,configOption:Fe.automatic?null:et,placeholder:Fe.automatic?et?.label:"Choose",handlerKey:Fe.handler?.key??null,reducerId:Fe.reducerId})}for(const pe of W)if(!J.find(xe=>xe.fieldName===pe.fieldName)){const xe=Vt(pe.handlerKey);J.push({fieldName:pe.fieldName,handlerKey:pe.handlerKey,configOption:wt(xe,!1),missingInFrame:!0,reducerId:pe.reducerId??ht.gz.lastNotNull})}return Object.values(J)}function wt(B,W){if(!B)return null;let z=B.name??(0,h.capitalize)(B.key);return W&&(z=`${z} (auto)`),{label:z,value:B.key}}const _t=B=>({table:Z.css`
    margin-top: ${B.spacing(1)};

    td,
    th {
      border-right: 4px solid ${B.colors.background.primary};
      border-bottom: 4px solid ${B.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${B.typography.bodySmall.fontSize};
      line-height: ${B.spacing(4)};
      padding: ${B.spacing(0,1)};
    }
  `,labelCell:Z.css`
    font-size: ${B.typography.bodySmall.fontSize};
    background: ${B.colors.background.secondary};
    padding: ${B.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:Z.css`
    padding: 0;
    min-width: 161px;
  `});var Qt=e(9471);function en(B,W){let z=null;for(const Fe of W)if(Fe.refId===B.configRefId){z=Fe;break}if(!z)return W;const J={fields:[],length:1},ce=At(z,B.mappings??[],!1);for(const Fe of z.fields){const et={...Fe},lt=(0,fe.CZ)(Fe,z),xt=ce.index[lt],kt=(0,ht.Kx)({field:Fe,reducers:[xt.reducerId]});et.values=[kt[xt.reducerId]],J.fields.push(et)}const pe=[],xe=(0,G.sq)(B.applyTo||{id:le.mi.numeric});for(const Fe of W){if(Fe===z&&W.length>1)continue;const et={fields:[],length:Fe.length};for(const lt of Fe.fields)if(xe(lt,Fe,W)){const xt=Lt(J,0,ce);et.fields.push({...lt,config:{...lt.config,...xt}})}else et.fields.push(lt);pe.push(et)}return pe}const sn={id:ae.W.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data",defaultOptions:{configRefId:"config",mappings:[]},operator:B=>W=>W.pipe((0,Qt.U)(z=>en(B,z)))};function Jt({input:B,onChange:W,options:z}){const J=(0,_e.wW)(Cn),ce=B.map(tn=>tn.refId).filter(tn=>tn!=null).map(tn=>({label:tn,value:tn})),pe=z.configRefId||"config",xe=z.applyTo??{id:le.mi.byType,options:"number"},Fe=Et.i.get(xe.id),et=B.find(tn=>tn.refId===pe),lt=tn=>{W({...z,configRefId:tn.value||"config"})},xt=tn=>{W({...z,applyTo:{id:tn.value}})},kt=tn=>{W({...z,applyTo:{id:xe.id,options:tn}})},Zt=Et.i.list().filter(tn=>!tn.excludeFromPicker).map(tn=>({label:tn.name,value:tn.id,description:tn.description}));return a.createElement(a.Fragment,null,a.createElement(pt.Z,null,a.createElement(je._,{label:"Config query",labelWidth:20},a.createElement(se.Ph,{onChange:lt,options:ce,value:pe,width:30}))),a.createElement(pt.Z,null,a.createElement(je._,{label:"Apply to",labelWidth:20},a.createElement(se.Ph,{onChange:xt,options:Zt,value:xe.id,width:30}))),a.createElement(pt.Z,null,a.createElement(je._,{label:"Apply to options",labelWidth:20,className:J.matcherOptions},a.createElement(Fe.component,{matcher:Fe.matcher,data:B,options:xe.options,onChange:kt}))),a.createElement(pt.Z,null,et&&a.createElement(Nt,{frame:et,mappings:z.mappings,onChange:tn=>W({...z,mappings:tn}),withReducers:!0})))}const gn={id:sn.id,editor:Jt,transformation:sn,name:sn.name,description:sn.description,state:Dt.BV.beta,help:`
### Use cases

This transformation allows you select one query and from it extract standard options such as
**Min**, **Max**, **Unit**, and **Thresholds** and apply them to other query results.
This enables dynamic query driven visualization configuration.

### Options

- **Config query**: Selet the query that returns the data you want to use as configuration.
- **Apply to**: Select what fields or series to apply the configuration to.
- **Apply to options**: Usually a field type or field name regex depending on what option you selected in **Apply to**.

### Field mapping table

Below the configuration listed above you will find the field table. Here all fields found in the data returned by the config query will be listed along with a **Use as** and **Select** option. This table gives you control over what field should be mapped to which config property and if there are multiple rows which value to select.

## Example

Input[0] (From query: A, name: ServerA)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 10    |
| 1626178119129 | 30    |

Input[1] (From query: B)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 100   |
| 1626178119129 | 100   |

Output (Same as Input[0] but now with config on the Value field)

| Time          | Value (config: Max=100) |
| ------------- | ----------------------- |
| 1626178119127 | 10                      |
| 1626178119129 | 30                      |

Each row in the source data becomes a separate field. Each field now also has a maximum
configuration option set. Options such as **min**, **max**, **unit**, and **thresholds** are all part of field configuration, and if they are set like this, they will be used by the visualization instead of any options that are manually configured.
in the panel editor options pane.

## Value mappings

You can also transform a query result into value mappings. This is is a bit different because every
row in the configuration query result is used to define a single value mapping row. See the following example.

Config query result:

| Value | Text   | Color |
| ----- | ------ | ----- |
| L     | Low    | blue  |
| M     | Medium | green |
| H     | High   | red   |

In the field mapping specify:

| Field | Use as                  | Select     |
| ----- | ----------------------- | ---------- |
| Value | Value mappings / Value  | All values |
| Text  | Value mappings / Text   | All values |
| Color | Value mappings / Ciolor | All values |

Grafana will build the value mappings from you query result and apply it the the real data query results. You should see values being mapped and colored according to the config query results.
`},Cn=B=>({matcherOptions:Z.css`
    min-width: 404px;
  `});var In=e(59980),_n=e(66392),zn=e(62294),Hn=e(52081),sa=e(41165),Ma=e(14835);const la=[{value:zn.ie.BinaryOperation,label:"Binary operation"},{value:zn.ie.ReduceRow,label:"Reduce row"},{value:zn.ie.Index,label:"Row index"}],jn=new Set([oe.fS.time,oe.fS.number,oe.fS.string]);class ia extends a.PureComponent{constructor(W){super(W),this.onToggleReplaceFields=()=>{const{options:z}=this.props;this.props.onChange({...z,replaceFields:!z.replaceFields})},this.onModeChanged=z=>{const{options:J,onChange:ce}=this.props,pe=z.value??zn.ie.BinaryOperation;ce({...J,mode:pe})},this.onAliasChanged=z=>{const{options:J}=this.props;this.props.onChange({...J,alias:z.target.value})},this.updateReduceOptions=z=>{const{options:J,onChange:ce}=this.props;ce({...J,mode:zn.ie.ReduceRow,reduce:z})},this.onFieldToggle=z=>{const{selected:J}=this.state;J.indexOf(z)>-1?this.onChange(J.filter(ce=>ce!==z)):this.onChange([...J,z])},this.onChange=z=>{this.setState({selected:z});const{reduce:J}=this.props.options;this.updateReduceOptions({...J,include:z})},this.onStatsChange=z=>{const J=z.length?z[0]:ht.gz.sum,{reduce:ce}=this.props.options;this.updateReduceOptions({...ce,reducer:J})},this.updateBinaryOptions=z=>{const{options:J,onChange:ce}=this.props;ce({...J,mode:zn.ie.BinaryOperation,binary:z})},this.onBinaryLeftChanged=z=>{const{binary:J}=this.props.options;this.updateBinaryOptions({...J,left:z.value})},this.onBinaryRightChanged=z=>{const{binary:J}=this.props.options;this.updateBinaryOptions({...J,right:z.value})},this.onBinaryOperationChanged=z=>{const{binary:J}=this.props.options;this.updateBinaryOptions({...J,operator:z.value})},this.state={include:W.options?.reduce?.include||[],names:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(W){this.props.input!==W.input&&this.initOptions()}initOptions(){const{options:W}=this.props,z=W?.reduce?.include||[],J={interpolate:pe=>pe},ce=(0,In.of)(this.props.input).pipe(de.Y.ensureColumnsTransformer.operator(null,J),this.extractAllNames(),this.extractNamesAndSelected(z)).subscribe(({selected:pe,names:xe})=>{this.setState({names:xe,selected:pe},()=>ce.unsubscribe())})}extractAllNames(){return W=>W.pipe((0,Qt.U)(z=>{const J=[],ce={};for(const pe of z)for(const xe of pe.fields){if(!jn.has(xe.type))continue;const Fe=(0,fe.CZ)(xe,pe,z);ce[Fe]||(ce[Fe]=!0,J.push(Fe))}return J}))}extractNamesAndSelected(W){return z=>z.pipe((0,Qt.U)(J=>{if(!W.length)return{names:J,selected:[]};const ce=[],pe=[];for(const xe of J)W.includes(xe)&&pe.push(xe),ce.push(xe);return{names:ce,selected:pe}}))}renderReduceRow(W){const{names:z,selected:J}=this.state;return W=(0,h.defaults)(W,{reducer:ht.gz.sum}),a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Field name"),a.createElement(Hn.Lh,{spacing:"xs",align:"flex-start",wrap:!0},z.map((ce,pe)=>a.createElement(sa.B,{key:`${ce}/${pe}`,onClick:()=>{this.onFieldToggle(ce)},label:ce,selected:J.indexOf(ce)>-1}))))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Calculation"),a.createElement(we.m,{allowMultiple:!1,className:"width-18",stats:[W.reducer],onChange:this.onStatsChange,defaultStat:ht.gz.sum}))))}renderBinaryOperation(W){W=(0,h.defaults)(W,{reducer:ht.gz.sum});let z=!W?.left,J=!W?.right;const ce=this.state.names.map(et=>(et===W?.left&&(z=!0),et===W?.right&&(J=!0),{label:et,value:et})),pe=z?ce:[...ce,{label:W?.left,value:W?.left}],xe=J?ce:[...ce,{label:W?.right,value:W?.right}],Fe=_n.n.list().map(et=>({label:et.id,value:et.id}));return a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Operation")),a.createElement("div",{className:"gf-form"},a.createElement(se.Ph,{allowCustomValue:!0,placeholder:"Field or number",options:pe,className:"min-width-18 gf-form-spacing",value:W?.left,onChange:this.onBinaryLeftChanged}),a.createElement(se.Ph,{className:"width-8 gf-form-spacing",options:Fe,value:W.operator??Fe[0].value,onChange:this.onBinaryOperationChanged}),a.createElement(se.Ph,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:xe,value:W?.right,onChange:this.onBinaryRightChanged})))}render(){const{options:W}=this.props,z=W.mode??zn.ie.BinaryOperation;return a.createElement("div",null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Mode"),a.createElement(se.Ph,{className:"width-18",options:la,value:la.find(J=>J.value===z),onChange:this.onModeChanged}))),z===zn.ie.BinaryOperation&&this.renderBinaryOperation(W.binary),z===zn.ie.ReduceRow&&this.renderReduceRow(W.reduce),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Alias"),a.createElement(ue.I,{className:"width-18",value:W.alias??"",placeholder:(0,zn.h)(W),onChange:this.onAliasChanged}))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(Ma.LegacyForms.Switch,{label:"Replace all fields",labelClass:"width-8",checked:!!W.replaceFields,onChange:this.onToggleReplaceFields}))))}}const Aa={id:ae.W.calculateField,editor:ia,transformation:de.Y.calculateFieldTransformer,name:"Add field from calculation",description:"Use the row values to calculate a new field"};var ga=e(32302);const ya=[{value:ga.HO.FieldName,label:"Copy frame name to field name"},{value:ga.HO.Label,label:"Add a label with the frame name"},{value:ga.HO.Drop,label:"Ignore the frame name"}];class Wa extends a.PureComponent{constructor(W){super(W),this.onModeChanged=z=>{const{options:J,onChange:ce}=this.props,pe=z.value??ga.HO.FieldName;ce({...J,frameNameMode:pe})},this.onLabelChanged=z=>{const{options:J}=this.props;this.props.onChange({...J,frameNameLabel:z.target.value})}}render(){const{options:W}=this.props,z=W.frameNameMode??ga.HO.FieldName;return a.createElement("div",null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Name"),a.createElement(se.Ph,{className:"width-18",options:ya,value:ya.find(J=>J.value===z),onChange:this.onModeChanged}))),z===ga.HO.Label&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Label"),a.createElement(ue.I,{className:"width-18",value:W.frameNameLabel??"",placeholder:"frame",onChange:this.onLabelChanged}))))}}const rs={id:ae.W.concatenate,editor:Wa,transformation:de.Y.concatenateTransformer,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length."};var Xa=e(15448),wa=e(16453),Pa=e(25532);const os={settings:{width:24,isClearable:!1}},Ca=({input:B,options:W,onChange:z})=>{const J=wa.OL.filter(lt=>lt.value!==oe.fS.trace),ce=(0,a.useCallback)(lt=>xt=>{const kt=W.conversions;kt[lt]={...kt[lt],targetField:xt??"",dateFormat:void 0},z({...W,conversions:kt})},[z,W]),pe=(0,a.useCallback)(lt=>xt=>{const kt=W.conversions;kt[lt]={...kt[lt],destinationType:xt.value},z({...W,conversions:kt})},[z,W]),xe=(0,a.useCallback)(lt=>xt=>{const kt=W.conversions;kt[lt]={...kt[lt],dateFormat:xt.currentTarget.value},z({...W,conversions:kt})},[z,W]),Fe=(0,a.useCallback)(()=>{z({...W,conversions:[...W.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[z,W]),et=(0,a.useCallback)(lt=>{const xt=W.conversions;xt.splice(lt,1),z({...W,conversions:xt})},[z,W]);return a.createElement(a.Fragment,null,W.conversions.map((lt,xt)=>a.createElement("div",{key:`${lt.targetField}-${xt}`},a.createElement(pt.Z,null,a.createElement(je._,{label:"Field"},a.createElement(Xa.b,{context:{data:B},value:lt.targetField??"",onChange:ce(xt),item:os})),a.createElement(je._,{label:"as"},a.createElement(se.Ph,{options:J,value:lt.destinationType,placeholder:"Type",onChange:pe(xt),width:18})),lt.destinationType===oe.fS.time&&a.createElement(je._,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly."},a.createElement(ue.I,{value:lt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:xe(xt),width:24})),lt.destinationType===oe.fS.string&&(lt.dateFormat||(0,Pa.findField)(B?.[0],lt.targetField)?.type===oe.fS.time)&&a.createElement(je._,{label:"Date format",tooltip:"Specify the output format."},a.createElement(ue.I,{value:lt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:xe(xt),width:24})),a.createElement(q.zx,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>et(xt),"aria-label":"Remove convert field type transformer"})),lt.destinationType===oe.fS.enum&&Q.Oh&&a.createElement(pt.Z,null,a.createElement(je._,{label:"",labelWidth:6},a.createElement("div",null,"TODO... show options here (alpha panels enabled)"))))),a.createElement(q.zx,{size:"sm",icon:"plus",onClick:Fe,variant:"secondary","aria-label":"Add a convert field type transformer"},"Convert field type"))},ta={id:ae.W.convertFieldType,editor:Ca,transformation:de.Y.convertFieldTypeTransformer,name:de.Y.convertFieldTypeTransformer.name,description:de.Y.convertFieldTypeTransformer.description};var Qa=e(79086),ua=e(24799);class vs extends a.PureComponent{constructor(W){super(W),this.onFieldToggle=z=>{const{selected:J}=this.state;J.indexOf(z)>-1?this.onChange(J.filter(ce=>ce!==z)):this.onChange([...J,z])},this.onChange=z=>{const{regex:J,isRegexValid:ce}=this.state,pe={...this.props.options,include:{names:z}};J&&ce&&(pe.include=pe.include??{},pe.include.pattern=J),this.setState({selected:z},()=>{this.props.onChange(pe)})},this.onInputBlur=z=>{const{selected:J,regex:ce}=this.state;let pe=!0;try{ce&&(0,Qa.jO)(ce)}catch{pe=!1}pe?this.props.onChange({...this.props.options,include:{pattern:ce}}):this.props.onChange({...this.props.options,include:{names:J}}),this.setState({isRegexValid:pe})},this.state={include:W.options.include?.names||[],regex:W.options.include?.pattern,options:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(W){this.props.input!==W.input&&this.initOptions()}initOptions(){const{input:W,options:z}=this.props,J=Array.from(z.include?.names??[]),ce=[],pe={};for(const xe of W)for(const Fe of xe.fields){const et=(0,fe.CZ)(Fe,xe,W);let lt=pe[et];lt||(lt=pe[et]={name:et,count:0},ce.push(lt)),lt.count++}if(z.include?.pattern)try{const xe=(0,Qa.jO)(z.include.pattern);for(const Fe of ce)xe.test(Fe.name)&&J.push(Fe.name)}catch(xe){console.error(xe)}if(J.length){const xe=ce.filter(Fe=>J.includes(Fe.name));this.setState({options:ce,selected:xe.map(Fe=>Fe.name),regex:z.include?.pattern})}else this.setState({options:ce,selected:ce.map(xe=>xe.name),regex:z.include?.pattern})}render(){const{options:W,selected:z,isRegexValid:J}=this.state;return a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Identifier"),a.createElement(Hn.Lh,{spacing:"xs",align:"flex-start",wrap:!0},a.createElement(ua.g,{invalid:!J,error:J?void 0:"Invalid pattern",className:Z.css`
                margin-bottom: 0;
              `},a.createElement(ue.I,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:ce=>this.setState({regex:ce.currentTarget.value}),onBlur:this.onInputBlur,width:25})),W.map((ce,pe)=>{const xe=`${ce.name}${ce.count>1?" ("+ce.count+")":""}`,Fe=z.indexOf(ce.name)>-1;return a.createElement(sa.B,{key:`${ce.name}/${pe}`,onClick:()=>{this.onFieldToggle(ce.name)},label:xe,selected:Fe})}))))}}const qa={id:ae.W.filterFieldsByName,editor:vs,transformation:de.Y.filterFieldsByNameTransformer,name:"Filter by name",description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive."};var Fa=e(57227);class ns extends a.PureComponent{constructor(W){super(W),this.onFieldToggle=z=>{const{selected:J}=this.state;J.indexOf(z)>-1?this.onChange(J.filter(ce=>ce!==z)):this.onChange([...J,z])},this.onChange=z=>{this.setState({selected:z}),this.props.onChange({...this.props.options,include:z.join("|")})},this.state={include:W.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(W){this.props.input!==W.input&&this.initOptions()}initOptions(){const{input:W,options:z}=this.props,J=z.include?z.include.split("|"):[],ce=[],pe={};for(const xe of W)if(xe.refId){let Fe=pe[xe.refId];Fe||(Fe=pe[xe.refId]={refId:xe.refId,count:0},ce.push(Fe)),Fe.count++}if(J.length){const xe=[],Fe=[];for(const et of ce)J.includes(et.refId)&&Fe.push(et),xe.push(et);this.setState({options:xe,selected:Fe.map(et=>et.refId)})}else this.setState({options:ce,selected:[]})}render(){const{options:W,selected:z}=this.state,{input:J}=this.props;return a.createElement(a.Fragment,null,J.length<=1&&a.createElement("div",null,a.createElement(Fa.S,null,"Filter data by query expects multiple queries in the input.")),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Series refId"),a.createElement(Hn.Lh,{spacing:"xs",align:"flex-start",wrap:!0},W.map((ce,pe)=>{const xe=`${ce.refId}${ce.count>1?" ("+ce.count+")":""}`,Fe=z.indexOf(ce.refId)>-1;return a.createElement(sa.B,{key:`${ce.refId}/${pe}`,onClick:()=>{this.onFieldToggle(ce.refId)},label:xe,selected:Fe})})))))}}const ca={id:ae.W.filterByRefId,editor:ns,transformation:de.Y.filterFramesByRefIdTransformer,name:"Filter data by query",description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel."};var as=e(61171);function Os(B){return(0,a.useMemo)(()=>Array.isArray(B)?Object.keys(B.reduce((W,z)=>!z||!Array.isArray(z.fields)?W:z.fields.reduce((J,ce)=>{const pe=(0,fe.CZ)(ce,z,B);return J[pe]=!0,J},W),{})):[],[B])}function bs(B){const W=new Set;for(const z of B)for(const J of z.fields)if(J.labels)for(const ce of Object.keys(J.labels))W.add(ce);return W}const ir=({input:B,options:W,onChange:z})=>{const J=Os(B),ce=(0,a.useCallback)(pe=>xe=>{z({...W,fields:{...W.fields,[pe]:xe}})},[z]);return a.createElement("div",null,J.map(pe=>a.createElement(mr,{onConfigChange:ce(pe),fieldName:pe,config:W.fields[pe],key:pe})))},ur=[{label:"Group by",value:as.x.groupBy},{label:"Calculate",value:as.x.aggregate}],mr=({fieldName:B,config:W,onConfigChange:z})=>{const J=er(),ce=(0,a.useCallback)(pe=>{z({aggregations:W?.aggregations??[],operation:pe?.value??null})},[W,z]);return a.createElement("div",{className:(0,Z.cx)("gf-form-inline",J.row)},a.createElement("div",{className:(0,Z.cx)("gf-form",J.fieldName)},a.createElement("div",{className:(0,Z.cx)("gf-form-label",J.rowSpacing)},B)),a.createElement("div",{className:(0,Z.cx)("gf-form",J.cell)},a.createElement("div",{className:(0,Z.cx)("gf-form-spacing",J.rowSpacing)},a.createElement(se.Ph,{className:"width-12",options:ur,value:W?.operation,placeholder:"Ignored",onChange:ce,isClearable:!0}))),W?.operation===as.x.aggregate&&a.createElement("div",{className:(0,Z.cx)("gf-form","gf-form--grow",J.calculations)},a.createElement(we.m,{className:(0,Z.cx)("flex-grow-1",J.rowSpacing),placeholder:"Select Stats",allowMultiple:!0,stats:W.aggregations,onChange:pe=>{z({...W,aggregations:pe})}})))},er=(0,ne.B)(()=>{const B=Z.css`
    display: table-cell;
  `;return{row:Z.css`
      display: table-row;
    `,cell:B,rowSpacing:Z.css`
      margin-bottom: 4px;
    `,fieldName:Z.css`
      ${B}
      min-width: 250px;
      white-space: nowrap;
    `,calculations:Z.css`
      ${B}
      width: 99%;
    `}}),ds={id:ae.W.groupBy,editor:ir,transformation:de.Y.groupByTransformer,name:de.Y.groupByTransformer.name,description:de.Y.groupByTransformer.description};var ws=e(90834);const us=({input:B,options:W,onChange:z})=>{const J=Os(B).map(lt=>({label:lt,value:lt})),ce=(0,a.useCallback)(lt=>{z({...W,columnField:lt?.value})},[z,W]),pe=(0,a.useCallback)(lt=>{z({...W,rowField:lt?.value})},[z,W]),xe=(0,a.useCallback)(lt=>{z({...W,valueField:lt?.value})},[z,W]),Fe=[{label:"Null",value:ws.U.Null,description:"Null value"},{label:"True",value:ws.U.True,description:"Boolean true value"},{label:"False",value:ws.U.False,description:"Boolean false value"},{label:"Empty",value:ws.U.Empty,description:"Empty string"}],et=(0,a.useCallback)(lt=>{z({...W,emptyValue:lt?.value})},[z,W]);return a.createElement(a.Fragment,null,a.createElement(pt.Z,null,a.createElement(je._,{label:"Column",labelWidth:8},a.createElement(se.Ph,{options:J,value:W.columnField,onChange:ce,isClearable:!0})),a.createElement(je._,{label:"Row",labelWidth:8},a.createElement(se.Ph,{options:J,value:W.rowField,onChange:pe,isClearable:!0})),a.createElement(je._,{label:"Cell Value",labelWidth:10},a.createElement(se.Ph,{options:J,value:W.valueField,onChange:xe,isClearable:!0})),a.createElement(je._,{label:"Empty Value"},a.createElement(se.Ph,{options:Fe,value:W.emptyValue,onChange:et,isClearable:!0}))))},Ws={id:ae.W.groupingToMatrix,editor:us,transformation:de.Y.groupingToMatrixTransformer,name:"Grouping to matrix",description:"Takes a three fields combination and produces a Matrix"};var Es=e(75133),Fs=e(8944),Gs=e(45458);const fr=({input:B,options:W,onChange:z})=>{const ce=(0,a.useCallback)(Fe=>{z({...W,bucketSize:Fe})},[z,W]),pe=(0,a.useCallback)(Fe=>{z({...W,bucketOffset:Fe})},[z,W]),xe=(0,a.useCallback)(()=>{z({...W,combine:!W.combine})},[z,W]);return a.createElement("div",null,a.createElement(pt.Z,null,a.createElement(je._,{labelWidth:18,label:Es.py.bucketSize.name,tooltip:Es.py.bucketSize.description},a.createElement(Gs.Y,{value:W.bucketSize,placeholder:"auto",onChange:ce,min:0}))),a.createElement(pt.Z,null,a.createElement(je._,{labelWidth:18,label:Es.py.bucketOffset.name,tooltip:Es.py.bucketOffset.description},a.createElement(Gs.Y,{value:W.bucketOffset,placeholder:"none",onChange:pe,min:0}))),a.createElement(pt.Z,null,a.createElement(je._,{labelWidth:18,label:Es.py.combine.name,tooltip:Es.py.combine.description},a.createElement(Fs.x,{value:W.combine??!1,onChange:xe}))))},lr={id:ae.W.histogram,editor:fr,transformation:de.Y.histogramTransformer,name:de.Y.histogramTransformer.name,description:de.Y.histogramTransformer.description};var tr=e(13221);const Ys=[{value:tr.c.outer,label:"OUTER",description:"Keep all rows from any table with a value"},{value:tr.c.inner,label:"INNER",description:"Drop rows that do not match a value in all tables"}];function js({input:B,options:W,onChange:z}){const J=Os(B).map(xe=>({label:xe,value:xe})),ce=(0,a.useCallback)(xe=>{z({...W,byField:xe?.value})},[z,W]),pe=(0,a.useCallback)(xe=>{z({...W,mode:xe?.value})},[z,W]);return a.createElement(a.Fragment,null,a.createElement(pt.Z,null,a.createElement(je._,{label:"Mode",labelWidth:8,grow:!0},a.createElement(se.Ph,{options:Ys,value:W.mode??tr.c.outer,onChange:pe}))),a.createElement(pt.Z,null,a.createElement(je._,{label:"Field",labelWidth:8,grow:!0},a.createElement(se.Ph,{options:J,value:W.byField,onChange:ce,placeholder:"time",isClearable:!0}))))}const gr={id:ae.W.joinByField,aliasIds:[ae.W.seriesToColumns],editor:js,transformation:de.Y.joinByFieldTransformer,name:de.Y.joinByFieldTransformer.name,description:de.Y.joinByFieldTransformer.description};var is=e(31568),pr=e(26418);const hr=[{value:is.k.Columns,label:"Columns"},{value:is.k.Rows,label:"Rows"}],vr=({input:B,options:W,onChange:z})=>{const{labelNames:ce,selected:pe}=(0,a.useMemo)(()=>{let et=[],lt={};for(const kt of B)for(const Zt of kt.fields)if(Zt.labels)for(const tn of Object.keys(Zt.labels))lt[tn]||(et.push({value:tn,label:tn}),lt[tn]=!0);const xt=new Set(W.keepLabels?.length?W.keepLabels:Object.keys(lt));return{labelNames:et,selected:xt}},[W.keepLabels,B]),xe=et=>{z({...W,valueLabel:et?.value})},Fe=et=>{if(pe.has(et)?pe.delete(et):pe.add(et),pe.size===ce.length||!pe.size){const{keepLabels:lt,...xt}=W;z(xt)}else z({...W,keepLabels:[...pe]})};return a.createElement("div",null,a.createElement(pt.Z,null,a.createElement(je._,{label:"Mode",labelWidth:20},a.createElement(me.S,{options:hr,value:W.mode??is.k.Columns,onChange:et=>z({...W,mode:et})}))),a.createElement(pt.Z,null,a.createElement(je._,{label:"Labels",labelWidth:20},a.createElement(pr.Stack,{gap:1,wrap:!0},ce.map((et,lt)=>{const xt=et.label;return a.createElement(sa.B,{key:`${xt}/${lt}`,onClick:()=>Fe(xt),label:xt,selected:pe.has(xt)})})))),W.mode!==is.k.Rows&&a.createElement(pt.Z,null,a.createElement(je._,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name"},a.createElement(se.Ph,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:ce,value:W?.valueLabel,onChange:xe,className:"min-width-16"}))))},nr={id:ae.W.labelsToFields,editor:vr,transformation:de.Y.labelsToFieldsTransformer,name:"Labels to fields",description:`Groups series by time and return labels or tags as fields.
                Useful for showing time series with labels in a table where each label key becomes a separate column`},cr=({options:B,onChange:W})=>{const z=(0,a.useCallback)(J=>{W({...B,limitField:Number(J.currentTarget.value)})},[W,B]);return a.createElement(a.Fragment,null,a.createElement(pt.Z,null,a.createElement(je._,{label:"Limit",labelWidth:8},a.createElement(ue.I,{placeholder:"Limit count",pattern:"[0-9]*",value:B.limitField,onChange:z,width:25}))))},Rs={id:ae.W.limit,editor:cr,transformation:de.Y.limitTransformer,name:"Limit",description:"Limit the number of items displayed."},ms=({input:B,options:W,onChange:z})=>B.length<=1?a.createElement(Fa.S,null,"Merge has no effect when applied on a single frame."):null,Qs={id:ae.W.merge,editor:ms,transformation:de.Y.mergeTransformer,name:"Merge",description:`Merge many series/tables and return a single table where mergeable values will be combined into the same row.
                Useful for showing multiple series, tables or a combination of both visualized in a table.`};var ys=e(36826),jt=e(74700),He=e(39904),mt=e(8180);const bt=({options:B,input:W,onChange:z})=>{const{indexByName:J,excludeByName:ce,renameByName:pe}=B,xe=Os(W),Fe=(0,a.useMemo)(()=>fn(xe,J),[xe,J]),et=(0,a.useCallback)((kt,Zt)=>{z({...B,excludeByName:{...ce,[kt]:Zt}})},[z,B,ce]),lt=(0,a.useCallback)(kt=>{if(!kt||!kt.destination)return;const Zt=kt.source.index,tn=kt.destination.index;Zt!==tn&&z({...B,indexByName:qt(xe,Zt,tn)})},[z,B,xe]),xt=(0,a.useCallback)((kt,Zt)=>{z({...B,renameByName:{...B.renameByName,[kt]:Zt}})},[z,B]);return W.length>1?a.createElement(Fa.S,null,"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."):a.createElement(ys.Z5,{onDragEnd:lt},a.createElement(ys.bK,{droppableId:"sortable-fields-transformer",direction:"vertical"},kt=>a.createElement("div",{ref:kt.innerRef,...kt.droppableProps},Fe.map((Zt,tn)=>a.createElement(Ht,{fieldName:Zt,renamedFieldName:pe[Zt],index:tn,onToggleVisibility:et,onRenameField:xt,visible:!ce[Zt],key:Zt})),kt.placeholder)))};bt.displayName="OrganizeFieldsTransformerEditor";const Ht=({fieldName:B,renamedFieldName:W,index:z,visible:J,onToggleVisibility:ce,onRenameField:pe})=>{const xe=(0,_e.wW)(nn);return a.createElement(ys._l,{draggableId:B,index:z},Fe=>a.createElement("div",{className:"gf-form-inline",ref:Fe.innerRef,...Fe.draggableProps},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label gf-form-label--justify-left width-30"},a.createElement(He.J,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:xe.draggable,...Fe.dragHandleProps}),a.createElement(mt.h,{className:xe.toggle,size:"md",name:J?"eye":"eye-slash",onClick:()=>ce(B,J)}),a.createElement("span",{className:xe.name,title:B},B)),a.createElement(ue.I,{className:"flex-grow-1",defaultValue:W||"",placeholder:`Rename ${B}`,onBlur:et=>pe(B,et.currentTarget.value)}))))};Ht.displayName="DraggableFieldName";const nn=B=>({toggle:Z.css`
    margin: 0 8px;
    color: ${B.colors.text.secondary};
  `,draggable:Z.css`
    opacity: 0.4;
    &:hover {
      color: ${B.colors.text.maxContrast};
    }
  `,name:Z.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${B.typography.bodySmall.fontSize};
    font-weight: ${B.typography.fontWeightMedium};
  `}),qt=(B,W,z)=>{const J=Array.from(B),[ce]=J.splice(W,1);return J.splice(z,0,ce),J.reduce((pe,xe,Fe)=>(pe[xe]=Fe,pe),{})},fn=(B,W={})=>{if(!W||Object.keys(W).length===0)return B;const z=(0,jt.$)(W);return B.sort(z)},bn={id:ae.W.organize,editor:bt,transformation:de.Y.organizeFieldsTransformer,name:"Organize fields",description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data."};var En=e(27742),xn=e(68183);const qn=({options:B,onChange:W})=>{const z=[{label:"Series to rows",value:En.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:En.AL.ReduceFields,description:"Collapse each field into a single value"}],J=(0,a.useCallback)(xe=>{const Fe=xe.value;W({...B,mode:Fe,includeTimeField:Fe===En.AL.ReduceFields?!!B.includeTimeField:!1})},[W,B]),ce=(0,a.useCallback)(()=>{W({...B,includeTimeField:!B.includeTimeField})},[W,B]),pe=(0,a.useCallback)(()=>{W({...B,labelsToFields:!B.labelsToFields})},[W,B]);return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8","aria-label":xn.wl.components.Transforms.Reduce.modeLabel},"Mode"),a.createElement(se.Ph,{options:z,value:z.find(xe=>xe.value===B.mode)||z[0],onChange:J,className:"flex-grow-1"}))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8","aria-label":xn.wl.components.Transforms.Reduce.calculationsLabel},"Calculations"),a.createElement(we.m,{className:"flex-grow-1",placeholder:"Choose Stat",allowMultiple:!0,stats:B.reducers||[],onChange:xe=>{W({...B,reducers:xe})}}))),B.mode===En.AL.ReduceFields&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(Ma.LegacyForms.Switch,{label:"Include time",labelClass:"width-8",checked:!!B.includeTimeField,onChange:ce}))),B.mode!==En.AL.ReduceFields&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(Ma.LegacyForms.Switch,{label:"Labels to fields",labelClass:"width-8",checked:!!B.labelsToFields,onChange:pe}))))},Pt={id:ae.W.reduce,editor:qn,transformation:de.Y.reduceTransformer,name:de.Y.reduceTransformer.name,description:de.Y.reduceTransformer.description};class Ae extends a.PureComponent{constructor(W){super(W),this.handleRegexChange=z=>{const J=z.currentTarget.value;let ce=!0;if(J)try{J&&(0,Qa.jO)(J)}catch{ce=!1}this.setState(pe=>({...pe,regex:J,isRegexValid:ce}))},this.handleRenameChange=z=>{const J=z.currentTarget.value;this.setState(ce=>({...ce,renamePattern:J}))},this.handleRegexBlur=z=>{const J=z.currentTarget.value;let ce=!0;try{J&&(0,Qa.jO)(J)}catch{ce=!1}this.setState({isRegexValid:ce},()=>{ce&&this.props.onChange({...this.props.options,regex:J})})},this.handleRenameBlur=z=>{const J=z.currentTarget.value;this.setState({renamePattern:J},()=>this.props.onChange({...this.props.options,renamePattern:J}))},this.state={regex:W.options.regex,renamePattern:W.options.renamePattern,isRegexValid:!0}}render(){const{regex:W,renamePattern:z,isRegexValid:J}=this.state;return a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Match"),a.createElement(ua.g,{invalid:!J,error:J?void 0:"Invalid pattern",className:Z.css`
                margin-bottom: 0;
              `},a.createElement(ue.I,{placeholder:"Regular expression pattern",value:W||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Replace"),a.createElement(ua.g,{className:Z.css`
                margin-bottom: 0;
              `},a.createElement(ue.I,{placeholder:"Replacement pattern",value:z||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})))))}}const Me={id:ae.W.renameByRegex,editor:Ae,transformation:de.Y.renameByRegexTransformer,name:"Rename by regex",description:"Renames part of the query result by using regular expression with placeholders."},Ze=({input:B,options:W,onChange:z})=>null,tt={id:ae.W.seriesToRows,editor:Ze,transformation:de.Y.seriesToRowsTransformer,name:"Series to rows",description:`Merge many series and return a single series with time, metric and value as columns.
                Useful for showing multiple time series visualized in a table.`},It=({input:B,options:W,onChange:z})=>{const J=Os(B).map(xe=>({label:xe,value:xe})),ce=(0,a.useCallback)((xe,Fe)=>{z({...W,sort:[Fe]})},[z,W]),pe=W.sort?.length?W.sort:[{}];return a.createElement("div",null,pe.map((xe,Fe)=>a.createElement(pt.Z,{key:`${xe.field}/${Fe}`},a.createElement(je._,{label:"Field",labelWidth:10,grow:!0},a.createElement(se.Ph,{options:J,value:xe.field,placeholder:"Select field",onChange:et=>{ce(Fe,{...xe,field:et.value})}})),a.createElement(je._,{label:"Reverse"},a.createElement(Fs.x,{value:!!xe.desc,onChange:()=>{ce(Fe,{...xe,desc:!xe.desc})}})))))},$t={id:ae.W.sortBy,editor:It,transformation:de.Y.sortByTransformer,name:de.Y.sortByTransformer.name,description:de.Y.sortByTransformer.description};function Tt({options:B,onChange:W}){const[z,J]=(0,a.useState)(B),ce=qe(),pe=rn(),xe=()=>{z.push({path:""}),J([...z]),lt()},Fe=xt=>{z&&(z.splice(xt,1),J([...z]),lt())},et=(xt,kt,Zt)=>{z&&(Zt==="alias"?z[kt].alias=xt.currentTarget.value??"":z[kt].path=xt.currentTarget.value??"",J([...z]))},lt=()=>{W(z)};return a.createElement("ol",{className:(0,Z.cx)(pe.list)},z&&z.map((xt,kt)=>a.createElement("li",{key:kt},a.createElement(pt.Z,null,a.createElement(je._,{label:"Field",tooltip:ce.field,grow:!0},a.createElement(ue.I,{onBlur:lt,onChange:Zt=>et(Zt,kt,"path"),value:xt.path,placeholder:'A valid json path, e.g. "object.value1" or "object.value2[0]"'})),a.createElement(je._,{label:"Alias",tooltip:ce.alias},a.createElement(ue.I,{width:12,value:xt.alias,onBlur:lt,onChange:Zt=>et(Zt,kt,"alias")})),a.createElement(je._,{className:(0,Z.cx)(pe.removeIcon)},a.createElement(mt.h,{onClick:()=>Fe(kt),name:"trash-alt"}))))),a.createElement(je._,null,a.createElement(q.zx,{icon:"plus",onClick:()=>xe(),variant:"secondary"},"Add path")))}const qe=()=>{const B=[{path:"object",description:"=> extract fields from object"},{path:"object.value1",description:"=> extract value1"},{path:"object.value2",description:"=> extract value2"},{path:"object.value2[0]",description:"=> extract value2 first element"},{path:"object.value2[1]",description:"=> extract value2 second element"}];return{field:a.createElement("div",null,"A valid path of an json object.",a.createElement("div",null,a.createElement("strong",null,"JSON Value:")),a.createElement("pre",null,a.createElement("code",null,["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`))),a.createElement("strong",null,"Valid Paths:"),B.map((W,z)=>a.createElement("p",{key:z},a.createElement("code",null,W.path),a.createElement("i",null,W.description)))),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function rn(){return{list:Z.css`
      margin-left: 20px;
    `,removeIcon:Z.css`
      margin: 0 0 0 4px;
      align-items: center;
    `}}var dn=e(83881),Dn=(B=>(B.JSON="json",B.KeyValues="kvp",B.Auto="auto",B))(Dn||{});const wn={id:Dn.JSON,name:"JSON",description:"Parse JSON string",parse:B=>JSON.parse(B)};function Gn(B){const W=[];let z="",J="";const ce={};for(let pe=0;pe<B.length;pe++){let xe=B[pe];xe===z&&(z="",xe=B[++pe]);const Fe=xe==="\\";if(Fe&&(xe=B[++pe]),Fe||z.length){W.push(xe);continue}switch((xe==='"'||xe==="'")&&(z=xe),xe){case":":case"=":W.length&&(J&&(ce[J]=""),J=W.join(""),W.length=0);break;case'"':case"'":case" ":case`
`:case"	":case"\r":case`
`:W.length&&J===""&&(ce[W.join("")]="",W.length=0);case",":case";":case"&":case"{":case"}":if(W.length){const et=W.join("");J.length?(ce[J]=et,J=""):J=et,W.length=0}break;default:W.push(xe),pe===B.length-1&&J===""&&W.length&&(ce[W.join("")]="",W.length=0)}}return J.length&&(ce[J]=W.join("")),ce}const ra={id:Dn.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:Gn},Sa=[wn,ra],Da={id:Dn.Auto,name:"Auto",description:"parse new fields automatically",parse:B=>{for(const W of Sa)try{const z=W.parse(B);if(z!=null)return z}catch{}}},Ta=new he.B(()=>[...Sa,Da]),An={id:ae.W.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:(B,W)=>z=>z.pipe((0,Qt.U)(J=>An.transformer(B,W)(J))),transformer:B=>W=>W.map(z=>Fn(z,B))};function Fn(B,W){if(!W.source)return B;const z=(0,Pa.findField)(B,W.source);if(!z)return B;const J=Ta.getIfExists(W.format??Dn.Auto);if(!J)throw new Error("unkonwn extractor");const ce=B.length,pe=[],xe=new Map;for(let et=0;et<ce;et++){let lt=z.values[et];if((0,h.isString)(lt))try{lt=J.parse(lt)}catch{lt={}}if(W.format===Dn.JSON&&W.jsonPaths&&W.jsonPaths?.length>0){const xt={},kt=W.jsonPaths.filter(Zt=>Zt.path);kt.length>0&&(kt.forEach(Zt=>{const tn=Zt.alias&&Zt.alias.length>0?Zt.alias:Zt.path;xt[tn]=(0,h.get)(lt,Zt.path)??"Not Found"}),lt=xt)}for(const[xt,kt]of Object.entries(lt)){let Zt=xe.get(xt);Zt==null&&(Zt=new Array(ce),xe.set(xt,Zt),pe.push(xt)),Zt[et]=kt}}const Fe=pe.map(et=>{const lt=xe.get(et);return{name:et,values:lt,type:lt?(0,dn.DP)(lt.find(xt=>xt!=null)):oe.fS.other,config:{}}});if(W.keepTime){const et=(0,Pa.findField)(B,"Time")||(0,Pa.findField)(B,"time");et&&Fe.unshift(et)}return W.replace||Fe.unshift(...B.fields),{...B,fields:Fe}}const da={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},va=({input:B,options:W,onChange:z})=>{const J=lt=>{z({...W,source:lt})},ce=lt=>{z({...W,format:lt?.value})},pe=lt=>{z({...W,jsonPaths:lt})},xe=()=>{W.replace&&(W.keepTime=!1),z({...W,replace:!W.replace})},Fe=()=>{z({...W,keepTime:!W.keepTime})},et=Ta.selectOptions(W.format?[W.format]:void 0);return a.createElement("div",null,a.createElement(pt.Z,null,a.createElement(je._,{label:"Source",labelWidth:16},a.createElement(Xa.b,{context:{data:B},value:W.source??"",onChange:J,item:da}))),a.createElement(pt.Z,null,a.createElement(je._,{label:"Format",labelWidth:16},a.createElement(se.Ph,{value:et.current[0],options:et.options,onChange:ce,width:24,placeholder:"Auto"}))),W.format==="json"&&a.createElement(Tt,{options:W.jsonPaths??[],onChange:pe}),a.createElement(pt.Z,null,a.createElement(je._,{label:"Replace all fields",labelWidth:16},a.createElement(Fs.x,{value:W.replace??!1,onChange:xe}))),W.replace&&a.createElement(pt.Z,null,a.createElement(je._,{label:"Keep time",labelWidth:16},a.createElement(Fs.x,{value:W.keepTime??!1,onChange:Fe}))))},ea={id:ae.W.extractFields,editor:va,transformation:An,name:"Extract fields",description:"Parse fields from content (JSON, labels, etc)"};var xa=e(45253),za=e(15670);const fs={id:ae.W.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels",defaultOptions:{},operator:(B,W)=>z=>z.pipe((0,Qt.U)(J=>fs.transformer(B,W)(J))),transformer:B=>W=>!W||!W.length?W:[Zs(B,W)]};function Zs(B,W){if(!B.value?.length)return $s("No value labele configured");const z=bs(W);if(z.size<1)return $s("No labels in result");if(!z.has(B.value))return $s("Value label not found");let J=B.join?.length?B.join:Array.from(z);J=J.filter(kt=>kt!==B.value);const ce=new Set,pe=new Map,xe={};for(const kt of W)for(const Zt of kt.fields)if(Zt.labels&&Zt.type!==oe.fS.time){const tn=J.map(Ja=>Zt.labels[Ja]),ln=tn.join(",");let vn=pe.get(ln);vn||(vn={keys:tn,values:{}},pe.set(ln,vn));const Un=Zt.labels[B.value],Za=Zt.values,Na=vn.values[Un];Na?vn.values[Un]=Na.concat(Za):vn.values[Un]=Za,xe[Un]||(xe[Un]=Zt),ce.add(Un)}const Fe=Array.from(ce),et=J.map(()=>[]),lt=Fe.map(()=>[]);for(const kt of pe.values()){let Zt=-1,tn=!1;for(;!tn;){Zt++,tn=!0;for(let ln=0;ln<J.length;ln++)et[ln].push(kt.keys[ln]);for(let ln=0;ln<Fe.length;ln++){const vn=Fe[ln],Un=kt.values[vn]??[];lt[ln].push(Un[Zt]),Un.length>Zt+1&&(tn=!1)}}}const xt={fields:[],length:lt[0].length};for(let kt=0;kt<J.length;kt++)xt.fields.push({name:J[kt],config:{},type:oe.fS.string,values:et[kt]});for(let kt=0;kt<Fe.length;kt++){const Zt=xe[Fe[kt]];xt.fields.push({name:Fe[kt],config:{},type:Zt.type??oe.fS.number,values:lt[kt]})}return xt}function $s(B){return{meta:{notices:[{severity:"error",text:B}]},fields:[{name:"Error",type:oe.fS.string,config:{},values:[B]}],length:0}}function Er({input:B,options:W,onChange:z}){const J=(0,a.useMemo)(()=>{let et;const lt=bs(B),xt=Array.from(lt).map(Un=>({label:Un,value:Un}));let kt=xt.find(Un=>Un.value===W.value);!kt&&W.value&&(kt={label:`${W.value} (not found)`,value:W.value},xt.push(kt)),B.length?lt.size===0&&(et=a.createElement(xa.b,{title:"No labels found"},"The input does not contain any labels")):et=a.createElement(xa.b,{title:"No input found"},"No input (or labels) found"),lt.delete(W.value);const Zt=Array.from(lt).map(Un=>({label:Un,value:Un}));let tn=Zt;const ln=Boolean(W.join?.length);let vn="Join";return ln?tn=Zt.filter(Un=>!W.join.includes(Un.value)):vn=Zt.map(Un=>Un.value).join(", "),{warn:et,valueOptions:xt,valueOption:kt,joinOptions:Zt,addOptions:tn,addText:vn,hasJoin:ln,key:Date.now()}},[W,B]),ce=(et,lt)=>{if(!W.join)return;const xt=W.join.slice();if(lt)xt[et]=lt;else if(xt.splice(et,1),!xt.length){z({...W,join:void 0});return}const kt=new Set(xt);W.value&&kt.delete(W.value),z({...W,join:Array.from(kt)})},pe=et=>{const lt=et?.value;if(!lt)return;const xt=W.join?W.join.slice():[];xt.push(lt),z({...W,join:xt})},xe=10,Fe="No labels found";return a.createElement("div",null,J.warn,a.createElement(pt.Z,null,a.createElement(je._,{error:"required",invalid:!Boolean(W.value?.length),label:"Value",labelWidth:xe,tooltip:"Select the label indicating the values name"},a.createElement(se.Ph,{options:J.valueOptions,value:J.valueOption,onChange:et=>z({...W,value:et.value}),noOptionsMessage:Fe}))),J.hasJoin?W.join.map((et,lt)=>a.createElement(pt.Z,{key:et+lt},a.createElement(je._,{label:"Join",labelWidth:xe,error:"Unable to join by the value label",invalid:et===W.value},a.createElement(Hn.Lh,null,a.createElement(se.Ph,{options:J.joinOptions,value:J.joinOptions.find(xt=>xt.value===et),isClearable:!0,onChange:xt=>ce(lt,xt?.value),noOptionsMessage:Fe}),Boolean(J.addOptions.length&&lt===W.join.length-1)&&a.createElement(za.b,{icon:"plus",label:"",options:J.addOptions,onChange:pe,variant:"secondary"}))))):a.createElement(a.Fragment,null,Boolean(J.addOptions.length)&&a.createElement(pt.Z,null,a.createElement(je._,{label:"Join",labelWidth:xe},a.createElement(se.Ph,{options:J.addOptions,placeholder:J.addText,onChange:pe,noOptionsMessage:Fe})))))}const Ha={id:fs.id,editor:Er,transformation:fs,name:fs.name,description:fs.description,state:Dt.BV.beta};var Fr=e(74311),ss=e(39859),As=e(49372),na=e(73063);const Ua={id:ae.W.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:B=>W=>W.pipe((0,ss.z)(z=>(0,As.D)(Ks(z,B))))};async function Ks(B,W){const z=G.Ls.get(le.mi.byName).get(W?.lookupField),J=await(0,na.so)(W?.gazetteer??na.LI);return J.frame?yr(B,J,z):Promise.reject("missing frame in gazetteer")}function yr(B,W,z){const J=W.frame()?.fields;return J?B.map(ce=>{const pe=ce.length,xe=[];for(const Fe of ce.fields)if(xe.push(Fe),z(Fe,ce,B)){const et=Fe.values,lt=[];for(const xt of J){const kt=new Array(pe);lt.push(kt),xe.push({...xt,values:kt})}for(let xt=0;xt<lt.length;xt++){const kt=W.find(et[xt]);if(kt?.index!=null)for(let Zt=0;Zt<J.length;Zt++)lt[Zt][xt]=J[Zt].values[kt.index]}}return{...ce,fields:xe}}):B}const Ls={settings:{width:30,filter:B=>B.type===oe.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},Vs={settings:{}},gi=({input:B,options:W,onChange:z})=>{const J=(0,a.useCallback)(pe=>{z({...W,lookupField:pe})},[z,W]),ce=(0,a.useCallback)(pe=>{z({...W,gazetteer:pe})},[z,W]);return a.createElement("div",null,a.createElement(pt.Z,null,a.createElement(je._,{label:"Field",labelWidth:12},a.createElement(Xa.b,{context:{data:B},value:W?.lookupField??"",onChange:J,item:Ls}))),a.createElement(pt.Z,null,a.createElement(je._,{label:"Lookup",labelWidth:12},a.createElement(Fr.Q,{value:W?.gazetteer??"",context:{data:B},item:Vs,onChange:ce}))))},ao={id:ae.W.fieldLookup,editor:gi,transformation:Ua,name:"Field lookup",description:"Use a field value to lookup additional fields from an external source.  This currently supports spatial data, but will eventually support more formats",state:Dt.BV.alpha};var ar=e(80760),so=e(98294),Gr=e(43137);const Yr=(B,W,z=[])=>(W===0?z.push(B):B.forEach(J=>{Yr(J,W-1,z)}),z);function pi(B){const W=B[0].length,z=B.length,J=new Map;for(let ce=0;ce<W;ce++){let pe=J;for(let xe=0;xe<z;xe++){let Fe=B[xe][ce],et=pe.get(Fe);et==null&&(et=xe===z-1?[]:new Map,pe.set(Fe,et)),pe=et}pe.push(ce)}return Yr(J,z)}const gl={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function Ed(B,W,z){return W.map((J,ce)=>B.withNames?`${J}${B.separator1}${z[ce]}`:z[ce]).join(B.separator2)}function hi(B,W){const z={};return B.forEach((J,ce)=>{z[J]=String(W[ce])}),z}const ho={id:ae.W.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{},operator:(B,W)=>z=>z.pipe((0,Qt.U)(J=>ho.transformer(B,W)(J))),transformer:(B,W)=>{const z=(0,so.f)({names:B.fields});if(!z)return Gr.d.transformer({},W);const J=(0,G.sq)(z);return ce=>ce.length?pl(ce[0],J,B):ce}};function pl(B,W,z){const J=B.fields.filter(Fe=>W(Fe,B,[B])),ce=J.map(Fe=>Fe.values),pe=J.map(Fe=>Fe.name),xe={...gl,...z?.naming};return pi(ce).map(Fe=>{let et=B.name,lt={};if(xe.asLabels)lt=hi(pe,J.map((kt,Zt)=>ce[Zt][Fe[0]]));else{let kt=Ed(xe,pe,J.map((Zt,tn)=>ce[tn][Fe[0]]));xe?.append&&B.name&&(kt=`${B.name} ${kt}`),et=kt}let xt=B.fields;if(!z?.keepFields){const kt=new Set(pe);xt=B.fields.filter(Zt=>!kt.has(Zt.name))}return{name:et,meta:B.meta,length:Fe.length,fields:xt.map(kt=>{const Zt=kt.values,tn=Array(Fe.length);for(let ln=0;ln<Fe.length;ln++)tn[ln]=Zt[Fe[ln]];return{name:kt.name,type:kt.type,config:kt.config,labels:{...kt.labels,...lt},values:tn}})}})}function yd({input:B,options:W,onChange:z}){const J=(0,ar.IX)(B),ce=(0,ar.nw)(J),pe=(0,a.useMemo)(()=>{const lt=new Set(W.fields);return lt.size<1?ce:ce.filter(xt=>!lt.has(xt.value))},[ce,W]),xe=(0,a.useCallback)(lt=>{if(!lt.value)return;const xt=new Set(W.fields);xt.add(lt.value),z({...W,fields:[...xt]})},[z,W]),Fe=(0,a.useCallback)(lt=>{if(!lt)return;const xt=new Set(W.fields);xt.delete(lt),z({...W,fields:[...xt]})},[z,W]);if(B.length>1)return a.createElement(Fa.S,null,"Partition by values only works with a single frame.");const et=[...new Set(W.fields)];return a.createElement("div",null,a.createElement(pt.Z,null,a.createElement(je._,{label:"Field",labelWidth:10,grow:!0},a.createElement(Hn.Lh,null,et.map(lt=>a.createElement(q.zx,{key:lt,icon:"times",variant:"secondary",size:"md",onClick:()=>Fe(lt)},lt)),pe.length&&a.createElement(za.b,{variant:"secondary",size:"md",options:pe,onChange:xe,label:"Select field",icon:"plus"})))))}const Pd={id:ae.W.partitionByValues,editor:yd,transformation:ho,name:ho.name,description:ho.description,state:Dt.BV.alpha};var ro=e(39393),hl=e(53678),Cd=e(17587),oo=(B=>(B.TimeSeriesWide="wide",B.TimeSeriesLong="long",B.TimeSeriesMulti="multi",B.TimeSeriesMany="many",B))(oo||{});function gg(B){if(!Array.isArray(B)||B.length===0)return B;const W=[];for(const z of Dr(B)){const J=z.fields[0];if(!J||J.type!==oe.fS.time)continue;const ce=[],pe=[];for(const xe of z.fields)switch(xe.type){case oe.fS.number:case oe.fS.boolean:ce.push(xe);break;case oe.fS.string:pe.push(xe);break}for(const xe of ce)if(pe.length){const Fe=new Map;for(let et=0;et<z.length;et++){const lt=J.values[et],xt=xe.values[et];if(xt===void 0||lt==null)continue;const kt=pe.map(tn=>tn.values[et]).join("/");let Zt=Fe.get(kt);if(!Zt){Zt={key:kt,time:[],value:[],labels:{}};for(const tn of pe)Zt.labels[tn.name]=tn.values[et];Fe.set(kt,Zt)}Zt.time.push(lt),Zt.value.push(xt)}for(const et of Fe.values())W.push({name:z.name,refId:z.refId,meta:{...z.meta,type:ro.P.TimeSeriesMulti},fields:[{...J,values:et.time},{...xe,values:et.value,labels:et.labels}],length:et.time.length})}else W.push({name:z.name,refId:z.refId,meta:{...z.meta,type:ro.P.TimeSeriesMulti},fields:[J,xe],length:z.length})}return W}function Dr(B){if(!Array.isArray(B)||B.length===0)return B;const W=[];for(const z of B){let J;const ce=[],pe={},xe={},Fe={},et={};for(let ln=0;ln<z.fields.length;ln++){const vn=z.fields[ln];switch(vn.type){case oe.fS.string:case oe.fS.boolean:vn.name in et||(et[vn.name]=ln,xe[vn.name]=!0);break;case oe.fS.time:if(!J){J=vn;break}default:if(vn.name in pe){const Na=pe[vn.name];if(vn.type!==Na)continue}else pe[vn.name]=vn.type,ce.push(vn.name);const Un=JSON.stringify(vn.labels),Za=Fe[Un];if(Za!==void 0?Za.push(ln):Fe[Un]=[ln],vn.labels!=null)for(const Na in vn.labels)xe[Na]=!0}}if(!J)continue;const lt=[],xt=[],kt=[],Zt=[];for(let ln=0;ln<z.length;ln++)lt.push({time:J.values[ln],wideRowIndex:ln});for(const ln in Fe)xt.push(ln);for(const ln in xe)kt.push(ln);for(const ln in et)Zt.push(ln);lt.sort((ln,vn)=>ln.time-vn.time),xt.sort(),kt.sort(),ce.sort();const tn=new hl.v({...z,meta:{...z.meta,type:ro.P.TimeSeriesLong},fields:[{name:J.name,type:J.type}]});for(const ln of ce)tn.addField({name:ln,type:pe[ln]});for(const ln of kt)tn.addField({name:ln,type:oe.fS.string});for(const ln of lt){const{time:vn,wideRowIndex:Un}=ln;for(const Za of xt){const Na={};for(const qs of Zt)Na[qs]=z.fields[et[qs]].values[Un];let Ja=0;for(const qs of Fe[Za]){const Rr=z.fields[qs];if(Ja++===0&&Rr.labels!=null)for(const fi in Rr.labels)Na[fi]=Rr.labels[fi];Na[Rr.name]=Rr.values[Un]}Na[J.name]=vn,tn.add(Na)}}W.push(tn)}return W}function vl(B){return pl(B,z=>z.type===oe.fS.string).map(z=>(z.meta||(z.meta={}),z.meta.type=ro.P.TimeSeriesMulti,z))}const vo={id:ae.W.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:(B,W)=>z=>z.pipe((0,Qt.U)(J=>vo.transformer(B,W)(J))),transformer:B=>{const W=B?.format??"wide";if(W==="many"||W==="multi")return gg;if(W==="long")return Dr;const z=G.Ls.get(le.mi.firstTimeField).get({});return J=>{if(!J.length)return[];const ce=[];for(const xe of J)xe.meta?.type===ro.P.TimeSeriesLong?vl(xe).forEach(Fe=>ce.push(Fe)):ce.push(xe);const pe=(0,Cd._9)({frames:ce,joinBy:z,keepOriginIndices:!0});return pe?(pe.meta||(pe.meta={}),pe.meta.type=ro.P.TimeSeriesWide,[pe]):[]}}},Dd={label:"Wide time series",value:oo.TimeSeriesWide,description:"Creates a single frame joined by time",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is shared time field"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"Multiple value fields of any type"))},Ro={label:"Multi-frame time series",value:oo.TimeSeriesMulti,description:"Creates a new frame for each time/number pair",info:a.createElement("ul",null,a.createElement("li",null,"Multiple frames"),a.createElement("li",null,"Each frame has two fields: time, value"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"String values are represented as labels"),a.createElement("li",null,"All values are numeric"))},xd={label:"Long time series",value:oo.TimeSeriesLong,description:"Convert each frame to long format",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is time field"),a.createElement("li",null,"Time in ascending order, but may have duplictes"),a.createElement("li",null,"String values are represented as separate fields rather than as labels"),a.createElement("li",null,"Multiple value fields may exist"))},io=[Dd,Ro,xd];function El(B){const{options:W,onChange:z}=B,J=(0,_e.wW)(yl),ce=(0,a.useCallback)(pe=>{z({...W,format:pe.value})},[z,W]);return a.createElement(a.Fragment,null,a.createElement(pt.Z,null,a.createElement(je._,{label:"Format",labelWidth:12},a.createElement(se.Ph,{width:35,options:io,value:io.find(pe=>pe.value===oo.TimeSeriesMulti&&W.format===oo.TimeSeriesMany?!0:pe.value===W.format)||io[0],onChange:ce,className:"flex-grow-1"}))),a.createElement(pt.Z,null,a.createElement(je._,{label:"Info",labelWidth:12},a.createElement("div",{className:J.info},(io.find(pe=>pe.value===W.format)||io[0]).info))))}const yl=B=>({info:Z.css`
    margin-left: 20px;
  `}),bd={id:vo.id,editor:El,transformation:vo,name:vo.name,description:vo.description,help:`
  ### Use cases

  This takes query results and transforms them into a predictable timeseries format.
  This transformer may be especially useful when using old panels that only expect the
  many-frame timeseries format.
  `},Ao={id:ae.W.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config",defaultOptions:{},operator:B=>W=>W.pipe((0,Qt.U)(z=>z.map(J=>jr(B,J))))};function jr(B,W){const z=At(W,B.mappings??[],!0),{nameField:J,valueField:ce}=z;if(!J||!ce)return W;const pe=[];for(let xe=0;xe<J.values.length;xe++){const Fe=J.values[xe],et=ce.values[xe],lt=Lt(W,xe,z),xt=Lo(W,xe,z),kt={name:`${Fe}`,type:ce.type,values:[et],config:lt,labels:xt};pe.push(kt)}return{fields:pe,length:1}}function Lo(B,W,z){const J={...z.nameField.labels};for(let ce=0;ce<B.fields.length;ce++){const pe=B.fields[ce],xe=(0,fe.CZ)(pe,B),Fe=z.index[xe];if(Fe.handler&&Fe.handler.key!==Kt.Label)continue;const et=pe.values[W];et!=null&&(J[xe]=et)}return J}function Md({input:B,options:W,onChange:z}){return B.length===0?null:a.createElement("div",null,a.createElement(Nt,{frame:B[0],mappings:W.mappings??[],onChange:J=>z({...W,mappings:J}),withNameAndValue:!0}))}const vi={id:Ao.id,editor:Md,transformation:Ao,name:Ao.name,description:Ao.description,state:Dt.BV.beta,help:`
### Use cases 

This transforms rows into separate fields. This can be useful as fields can be styled and configured 
individually, something rows cannot. It can also use additional fields as sources for dynamic field 
configuration or map them to field labels. The additional labels can then be used to define better 
display names for the resulting fields.

Useful when visualization data in:
- Gauge
- Stat
- Pie chart

## Example

Input:

| Name    | Value | Max |
| ------- | ----- | --- |
| ServerA | 10    | 100 |
| ServerB | 20    | 200 |
| ServerC | 30    | 300 |

Output:

| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
| ------------------------- | ------------------------- | ------------------------- |
| 10                        | 20                        | 30                        |

As you can see each row in the source data becomes a separate field. Each field now also has a max 
config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field 
configuration and if set like this will be used by the visualization instead of any options manually 
configured in the panel editor options pane.

`};var Pl=e(40538),Ra=e(71575),Ms=e(96366),Cl=e(50466),Eo=e(43524),Ei=e(14573);const yo={id:ae.W.spatial,name:"Spatial operations",description:"Apply spatial operations to query results",defaultOptions:{},operator:B=>W=>W.pipe((0,ss.z)(z=>(0,As.D)(Sd(z,B))))};function Dl(B){return B.action===Ms.JJ.Modify&&B.modify?.op===Ms.ac.LineBuilder}async function Sd(B,W){const z=await(0,Eo.cJ)(W.source);if(Dl(W)){const J=await(0,Eo.cJ)(W.modify?.target);return B.map(ce=>{const pe=(0,Eo.g6)(ce,z),xe=(0,Eo.g6)(ce,J);if(pe.field&&xe.field){const Fe=[...ce.fields],et=(0,Cl.Fh)(pe.field,xe.field),lt=Fe[0];return lt.type===oe.fS.geo&&lt!==pe.field&&lt!==xe.field?Fe[0]=(0,Cl.EK)(lt,et):Fe.unshift(et),{...ce,fields:Fe}}return ce})}return B.map(J=>{let ce=(0,Eo.g6)(J,z);if(ce.field){if(W.action===Ms.JJ.Modify){switch(W.modify?.op){case Ms.ac.AsLine:let xe=ce.field.name;return(!xe||xe==="Point")&&(xe="Line"),{...J,length:1,fields:[{...ce.field,name:xe,type:oe.fS.geo,values:[(0,Ei.Lp)(ce.field)]}]}}return J}const pe=ce.derived?[ce.field,...J.fields]:J.fields.slice(0);if(W.action===Ms.JJ.Calculate&&(pe.push((0,Ei.N7)(ce.field,W.calculate??{})),ce.derived=!0),ce.derived)return{...J,fields:pe}}return J})}const Td=(B,W)=>{const z=W.options??{};B.addSelect({path:"action",name:"Action",description:"",defaultValue:Ms.JJ.Prepare,settings:{options:[{value:Ms.JJ.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:Ms.JJ.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:Ms.JJ.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),z.action===Ms.JJ.Calculate?B.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:Ms.Ii.Heading,settings:{options:[{value:Ms.Ii.Heading,label:"Heading"},{value:Ms.Ii.Area,label:"Area"},{value:Ms.Ii.Distance,label:"Distance"}]}}):z.action===Ms.JJ.Modify&&B.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:Ms.ac.AsLine,settings:{options:[{value:Ms.ac.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:Ms.ac.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),Dl(z)?(B.addNestedOptions({category:["Source"],path:"source",build:(J,ce)=>{const pe=z.source??{};pe.mode||(pe.mode=Pl.q1.Auto),(0,Ra.C)("Point","",J,pe)}}),B.addNestedOptions({category:["Target"],path:"modify",build:(J,ce)=>{const pe=z.modify?.target??{};pe.mode||(pe.mode=Pl.q1.Auto),(0,Ra.C)("Point","target.",J,pe)}})):(0,Ra.C)("Location","source.",B,z.source)},Po=B=>{(0,a.useEffect)(()=>{if(!B.options.source?.mode){const J=Le(Td);B.onChange({...J,...B.options}),console.log("geometry useEffect",J)}},[]);const W=Od((0,_e.l4)()),z=Xe(B,Td);return a.createElement("div",null,a.createElement("div",null,z.items.map(J=>J.render())),a.createElement("div",null,z.categories.map(J=>a.createElement("div",{key:J.props.id,className:W.wrap},a.createElement("h5",null,J.props.title),a.createElement("div",{className:W.item},J.items.map(ce=>ce.render()))))))},Od=B=>({wrap:Z.css`
      margin-bottom: 20px;
    `,item:Z.css`
      border-left: 4px solid ${B.colors.border.strong};
      padding-left: 10px;
    `}),Id={id:ae.W.spatial,editor:Po,transformation:yo,name:yo.name,description:yo.description,state:Dt.BV.alpha};var xr=e(19447);const lo={id:ae.W.timeSeriesTable,name:"Time series to table transform",description:"Time series to table rows",defaultOptions:{},operator:B=>W=>W.pipe((0,Qt.U)(z=>yi(B,z)))};function yi(B,W){const z=Bo(W),J={},ce=[];for(const pe of W){if(!(0,xr.pP)(pe)){ce.push(pe);continue}const xe=pe.refId??"",Fe=z[xe]??{};let et=J[xe];if(!et){et={name:"Trend"+(xe&&Object.keys(z).length>1?` #${xe}`:""),type:oe.fS.frame,config:{},values:[]},J[xe]=et;const xt=new hl.v;for(const kt of Object.values(Fe))xt.addField(kt);xt.addField(et),xt.refId=xe,ce.push(xt)}const lt=pe.fields[1].labels;for(const xt of Object.keys(Fe)){const kt=lt?.[xt]??null;Fe[xt].values.push(kt)}et.values.push(pe)}return ce}function Bo(B){const W={};for(const z of B){if(!(0,xr.pP)(z))continue;const J=z.refId??"";W[J]||(W[J]={});for(const ce of z.fields)if(ce.labels)for(const pe of Object.keys(ce.labels))W[J][pe]||(W[J][pe]={name:pe,type:oe.fS.string,config:{},values:[]})}return W}function Co({input:B,options:W,onChange:z}){return B.length===0?null:a.createElement("div",null)}const Rd={id:lo.id,editor:Co,transformation:lo,name:lo.name,description:lo.description,state:Dt.BV.beta,help:""},No=()=>[Pt,qa,Me,ca,gt,bn,gr,tt,rs,Aa,nr,ds,$t,Qs,lr,vi,gn,bd,ta,Id,ao,ea,Ye,Ws,Rs,Ha,Pd,...n.v.featureToggles.timeSeriesTable?[Rd]:[]];function Pi(B){return new Promise((W,z)=>{let J;typeof B=="string"?(J=document.createElement("script"),J.src=B):J=B,J.onload=()=>W(),J.onerror=ce=>z(ce),document.body.appendChild(J)})}const xl=()=>new Promise(B=>{window.__monacoKustoResolvePromise=B;const W=document.createElement("script");return W.innerHTML=`require(['vs/language/kusto/monaco.contribution'], function() {
      window.__monacoKustoResolvePromise();
    });`,document.body.appendChild(W)});async function bl(){const B=(window.__grafana_public_path__??"public/")+"lib/monaco/min/vs",W=[[`${B}/language/kusto/bridge.min.js`],[`${B}/language/kusto/kusto.javascript.client.min.js`,`${B}/language/kusto/newtonsoft.json.min.js`,`${B}/language/kusto/Kusto.Language.Bridge.min.js`]];let z=Promise.resolve();for(const J of W){await z;const ce=J.filter(pe=>!document.querySelector(`script[src="${pe}"]`)).map(pe=>Pi(pe));await Promise.all(ce)}await xl()}function Ad(){return[{id:"kusto",name:"kusto",init:bl}]}var xs=e(58166),es=e(67948),sr=e(56895),Ml=e(6260),$r=e(41818),Sl=e(53546),co=e(5191),Ld=e(29428),Bd=e(85511),Ss=e(52666),Do=e(36578),Ci=e(16534),Tl=e(86824),Ol=e(5080),Uo=e(80472),Di=e(18111);const xi=()=>{const B=!!Q.ZP.oauth;return{saml:{bgColor:"#464646",enabled:Q.ZP.samlEnabled,name:Q.ZP.samlName||Di.bm,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:B&&Boolean(Q.ZP.oauth.google),name:Q.ZP.oauth?.google?.name||"Google",icon:Q.ZP.oauth?.google?.icon||"google"},azuread:{bgColor:"#2f2f2f",enabled:B&&Boolean(Q.ZP.oauth.azuread),name:Q.ZP.oauth?.azuread?.name||"Microsoft",icon:Q.ZP.oauth?.azuread?.icon||"microsoft"},github:{bgColor:"#464646",enabled:B&&Boolean(Q.ZP.oauth.github),name:Q.ZP.oauth?.github?.name||"GitHub",icon:Q.ZP.oauth?.github?.icon||"github"},gitlab:{bgColor:"#fc6d26",enabled:B&&Boolean(Q.ZP.oauth.gitlab),name:Q.ZP.oauth?.gitlab?.name||"GitLab",icon:Q.ZP.oauth?.gitlab?.icon||"gitlab"},grafanacom:{bgColor:"#262628",enabled:B&&Boolean(Q.ZP.oauth.grafana_com),name:Q.ZP.oauth?.grafana_com?.name||"Grafana.com",icon:Q.ZP.oauth?.grafana_com?.icon||"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:B&&Boolean(Q.ZP.oauth.okta),name:Q.ZP.oauth?.okta?.name||"Okta",icon:Q.ZP.oauth?.okta?.icon||"okta"},oauth:{bgColor:"#262628",enabled:B&&Boolean(Q.ZP.oauth.generic_oauth),name:Q.ZP.oauth?.generic_oauth?.name||"OAuth",icon:Q.ZP.oauth?.generic_oauth?.icon||"signin",hrefName:"generic_oauth"}}},Kr=B=>({button:Z.css`
      color: #d8d9da;
      position: relative;
    `,buttonIcon:Z.css`
      position: absolute;
      left: ${B.spacing(1)};
      top: 50%;
      transform: translateY(-50%);
    `,divider:{base:Z.css`
        color: ${B.colors.text};
        display: flex;
        margin-bottom: ${B.spacing(1)};
        justify-content: space-between;
        text-align: center;
        width: 100%;
      `,line:Z.css`
        width: 100px;
        height: 10px;
        border-bottom: 1px solid ${B.colors.text};
      `}}),Nd=()=>{const B=(0,_e.wW)(Kr);return a.createElement(a.Fragment,null,a.createElement("div",{className:B.divider.base},a.createElement("div",null,a.createElement("div",{className:B.divider.line})),a.createElement("div",null,a.createElement("span",null,!Q.ZP.disableLoginForm&&a.createElement("span",null,"or"))),a.createElement("div",null,a.createElement("div",{className:B.divider.line}))),a.createElement("div",{className:"clearfix"}))};function Il(B,W,z){return(0,Z.cx)(W.button,Z.css`
      background-color: ${B.bgColor};
      color: ${z.colors.getContrastText(B.bgColor)};

      &:hover {
        background-color: ${z.colors.emphasize(B.bgColor,.15)};
        box-shadow: ${z.shadows.z1};
      }
    `)}const Ud=()=>{const B=(0,h.pickBy)(xi(),ce=>ce.enabled),W=Object.keys(B).length>0,z=(0,_e.l4)(),J=(0,_e.wW)(Kr);return W?a.createElement(Hn.wc,null,a.createElement(Nd,null),Object.entries(B).map(([ce,pe])=>a.createElement(q.Qj,{key:ce,className:Il(pe,J,z),href:`login/${pe.hrefName?pe.hrefName:ce}`,target:"_self",fullWidth:!0},a.createElement(He.J,{className:J.buttonIcon,name:pe.icon}),"Sign in with ",pe.name))):null},wd=()=>{const B=(0,Q.iE)().verifyEmailEnabled?`${(0,Q.iE)().appSubUrl}/verify`:`${(0,Q.iE)().appSubUrl}/signup`,W=(0,Z.css)({paddingTop:"16px"});return a.createElement(Hn.wc,null,a.createElement("div",{className:W},"New to Grafana?"),a.createElement(q.Qj,{className:Z.css`
          width: 100%;
          justify-content: center;
        `,href:B,variant:"secondary",fill:"outline"},"Sign up"))},Rl=Z.css`
  padding: 0;
  margin-top: 4px;
`,Wd=()=>(document.title=Do.c.AppTitle,a.createElement(Uo.dd,null,a.createElement(Tl.Z,null,({loginHint:B,passwordHint:W,disableLoginForm:z,disableUserSignUp:J,login:ce,isLoggingIn:pe,changePassword:xe,skipPasswordChange:Fe,isChangingPassword:et})=>a.createElement(a.Fragment,null,!et&&a.createElement(Uo.$s,null,!z&&a.createElement(Ol.U,{onSubmit:ce,loginHint:B,passwordHint:W,isLoggingIn:pe},a.createElement(Hn.Lh,{justify:"flex-end"},a.createElement(q.Qj,{className:Rl,fill:"text",href:`${Q.ZP.appSubUrl}/user/password/send-reset-email`},"Forgot your password?"))),a.createElement(Ud,null),!J&&a.createElement(wd,null)),et&&a.createElement(Uo.$s,null,a.createElement(Ci.G,{onSubmit:xe,onSkip:()=>Fe()}))))));var zs=e(8412),bi=e(76770),wo=e(72948);function Fd({description:B,text:W,url:z}){const J=(0,_e.wW)($d);return a.createElement(wo.Z,{className:J.card,href:z},a.createElement(wo.Z.Heading,null,W),a.createElement(wo.Z.Description,{className:J.description},B))}const $d=B=>({card:(0,Z.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,Z.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})});function Pr({navId:B}){const{node:W}=(0,bi.q)(B),z=(0,_e.wW)(Hs),J=W.children?.filter(ce=>!ce.hideFromTabs);return a.createElement(zs.T,{navId:W.id},a.createElement(zs.T.Contents,null,a.createElement("div",{className:z.content},J&&J.length>0&&a.createElement("section",{className:z.grid},J?.map(ce=>a.createElement(Fd,{key:ce.id,description:ce.subTitle,text:ce.text,url:ce.url??""}))))))}const Hs=B=>({content:(0,Z.css)({display:"flex",flexDirection:"column",gap:B.spacing(2)}),grid:(0,Z.css)({display:"grid",gap:B.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:B.spacing(2,0)})});var uo=e(77346),xo=e(98148);function Kd(){return a.createElement(zs.T,{navId:"home",layout:uo.Q.Canvas,pageNav:{text:"Page not found"}},a.createElement(xo.j,{entity:"Page"}))}var ts=e(82002),Al=e(66121),ka=e(77582),yn=e(27876),Mi=e(77258);const Vd="dddd YYYY-MM-DD HH:mm zz",zd="/admin/ldap";class Hd extends a.PureComponent{constructor(){super(...arguments),this.onUserSync=()=>{this.props.onUserSync()}}render(){const{ldapSyncInfo:W,user:z}=this.props,ce=W&&W.nextSync?(0,Mi.dq)(W.nextSync,{format:Vd}):"",pe=`${zd}?user=${z&&z.login}`,xe=ka.Vt.hasPermission(yn.AccessControlAction.LDAPUsersRead),Fe=ka.Vt.hasPermission(yn.AccessControlAction.LDAPUsersSync);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Synchronisation"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"External sync"),a.createElement("td",null,"User synced via LDAP. Some changes must be done in LDAP or mappings."),a.createElement("td",null,a.createElement("span",{className:"label label-tag"},"LDAP"))),a.createElement("tr",null,W.enabled?a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},ce)):a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},"Not enabled")))))),a.createElement("div",{className:"gf-form-button-row"},Fe&&a.createElement(q.zx,{variant:"secondary",onClick:this.onUserSync},"Sync user"),xe&&a.createElement(q.Qj,{variant:"secondary",href:pe},"Debug LDAP Mapping"))))}}var Ar=e(71657),Si=e(35029),Qr=e(61860),Ll=e(66226),Wo=e(11630),kd=e(13821),Fo=e(29930);function Bl({onSelected:B,className:W,inputId:z,autoFocus:J,excludeOrgs:ce}){(0,a.useEffect)(()=>{J&&z&&document.getElementById(z)?.focus()},[J,z]);const[pe,xe]=(0,kd.Z)(async()=>{const et=(await(0,Fo.i)().get("/api/orgs")).map(lt=>({value:{id:lt.id,name:lt.name},label:lt.name}));if(ce){let lt=ce.map(kt=>kt.orgId);return et.filter(kt=>!lt.includes(kt.value.id))}else return et});return a.createElement(se.qb,{inputId:z,className:W,isLoading:pe.loading,defaultOptions:!0,isSearchable:!1,loadOptions:xe,onChange:B,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var $o=e(65135);class Nl extends a.PureComponent{constructor(){super(...arguments),this.addToOrgButtonRef=a.createRef(),this.state={showAddOrgModal:!1},this.showOrgAddModal=()=>{this.setState({showAddOrgModal:!0})},this.dismissOrgAddModal=()=>{this.setState({showAddOrgModal:!1},()=>{this.addToOrgButtonRef.current?.focus()})}}render(){const{user:W,orgs:z,isExternalUser:J,onOrgRoleChange:ce,onOrgRemove:pe,onOrgAdd:xe}=this.props,{showAddOrgModal:Fe}=this.state,et=Z.css`
      margin-top: 0.8rem;
    `,lt=ka.Vt.hasPermission(yn.AccessControlAction.OrgUsersAdd)&&!J;return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Organizations"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,z.map((xt,kt)=>a.createElement(Gd,{key:`${xt.orgId}-${kt}`,isExternalUser:J,user:W,org:xt,onOrgRoleChange:ce,onOrgRemove:pe}))))),a.createElement("div",{className:et},lt&&a.createElement(q.zx,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef},"Add user to organization")),a.createElement(Yd,{user:W,userOrgs:z,isOpen:Fe,onOrgAdd:xe,onDismiss:this.dismissOrgAddModal})))}}const Ul=(0,ne.B)(B=>({removeButton:Z.css`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${B.v1.palette.blue95};
    `,label:Z.css`
      font-weight: 500;
    `,disabledTooltip:Z.css`
      display: flex;
    `,tooltipItem:Z.css`
      margin-left: 5px;
    `,tooltipItemLink:Z.css`
      color: ${B.v1.palette.blue95};
    `,rolePickerWrapper:Z.css`
      display: flex;
    `,rolePicker:Z.css`
      flex: auto;
      margin-right: ${B.spacing(1)};
    `}));class _d extends a.PureComponent{constructor(){super(...arguments),this.state={currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]},this.onOrgRemove=async()=>{const{org:W}=this.props;this.props.onOrgRemove(W.orgId)},this.onChangeRoleClick=()=>{const{org:W}=this.props;this.setState({isChangingRole:!0,currentRole:W.role})},this.onOrgRoleChange=W=>{this.setState({currentRole:W})},this.onOrgRoleSave=()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)},this.onCancelClick=()=>{this.setState({isChangingRole:!1})},this.onBasicRoleChange=W=>{this.props.onOrgRoleChange(this.props.org.orgId,W)}}componentDidMount(){ka.Vt.licensedAccessControlEnabled()&&ka.Vt.hasPermission(yn.AccessControlAction.ActionRolesList)&&(0,Wo.ul)(this.props.org.orgId).then(W=>this.setState({roleOptions:W})).catch(W=>console.error(W))}render(){const{user:W,org:z,isExternalUser:J,theme:ce}=this.props,pe=W?.authLabels?.length&&W?.authLabels[0],xe=pe?`Synced via ${pe}`:"",{currentRole:Fe,isChangingRole:et}=this.state,lt=Ul(ce),xt=(0,Z.cx)("width-16",lt.label),kt=ka.Vt.hasPermission(yn.AccessControlAction.OrgUsersWrite),Zt=ka.Vt.hasPermission(yn.AccessControlAction.OrgUsersRemove)&&!J,tn=J||!kt,ln=`${z.name}-input`;return a.createElement("tr",null,a.createElement("td",{className:xt},a.createElement("label",{htmlFor:ln},z.name)),ka.Vt.licensedAccessControlEnabled()?a.createElement("td",null,a.createElement("div",{className:lt.rolePickerWrapper},a.createElement("div",{className:lt.rolePicker},a.createElement(Ll.R,{userId:W?.id||0,orgId:z.orgId,basicRole:z.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:tn})),J&&a.createElement(pg,{lockMessage:xe}))):a.createElement(a.Fragment,null,et?a.createElement("td",null,a.createElement($o.A,{inputId:ln,value:Fe,onChange:this.onOrgRoleChange,autoFocus:!0})):a.createElement("td",{className:"width-25"},z.role),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},kt&&a.createElement(wl,{lockMessage:xe,isExternalUser:J,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})))),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},Zt&&a.createElement(Ar.p,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0},"Remove from organization"))))}}const Gd=(0,_e.HE)(_d),Ti=(0,ne.B)(()=>({modal:Z.css`
    width: 500px;
  `,buttonRow:Z.css`
    text-align: center;
  `,modalContent:Z.css`
    overflow: visible;
  `}));class Yd extends a.PureComponent{constructor(){super(...arguments),this.state={selectedOrg:null,role:yn.OrgRole.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]},this.onOrgSelect=W=>{const z=this.props.userOrgs.find(J=>J.orgId===W.value?.id);this.setState({selectedOrg:W.value,role:z?.role||yn.OrgRole.Viewer}),ka.Vt.licensedAccessControlEnabled()&&ka.Vt.hasPermission(yn.AccessControlAction.ActionRolesList)&&(0,Wo.ul)(W.value?.id).then(J=>this.setState({roleOptions:J})).catch(J=>console.error(J))},this.onOrgRoleChange=W=>{this.setState({role:W})},this.onAddUserToOrg=async()=>{const{selectedOrg:W,role:z}=this.state;this.props.onOrgAdd(W.id,z),ka.Vt.licensedAccessControlEnabled()&&ka.Vt.hasPermission(yn.AccessControlAction.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,Wo.hB)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.setState({pendingOrgId:null,pendingRoles:[],pendingUserId:null}))},this.onCancel=()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()},this.onRoleUpdate=async(W,z,J)=>{this.setState({pendingRoles:W,pendingOrgId:J,pendingUserId:z})}}render(){const{isOpen:W,user:z,userOrgs:J}=this.props,{role:ce,roleOptions:pe,selectedOrg:xe}=this.state,Fe=Ti();return a.createElement(Si.u,{className:Fe.modal,contentClassName:Fe.modalContent,title:"Add to an organization",isOpen:W,onDismiss:this.onCancel},a.createElement(ua.g,{label:"Organization"},a.createElement(Bl,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:J,autoFocus:!0})),a.createElement(ua.g,{label:"Role",disabled:xe===null},ka.Vt.accessControlEnabled()?a.createElement(Ll.R,{userId:z?.id||0,orgId:xe?.id,basicRole:ce,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:pe,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles}):a.createElement($o.A,{inputId:"new-org-role-input",value:ce,onChange:this.onOrgRoleChange})),a.createElement(Si.u.ButtonRow,null,a.createElement(Hn.Lh,{spacing:"md",justify:"center"},a.createElement(q.zx,{variant:"secondary",fill:"outline",onClick:this.onCancel},"Cancel"),a.createElement(q.zx,{variant:"primary",disabled:xe===null,onClick:this.onAddUserToOrg},"Add to organization"))))}}const Oi=B=>({disabledTooltip:Z.css`
    display: flex;
  `,tooltipItemLink:Z.css`
    color: ${B.v1.palette.blue95};
  `,lockMessageClass:Z.css`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `,icon:Z.css`
    line-height: 2;
  `});function wl({lockMessage:B,onChangeRoleClick:W,isExternalUser:z,onOrgRoleSave:J,onCancelClick:ce}){const pe=(0,_e.wW)(Oi);return a.createElement("div",{className:pe.disabledTooltip},z?a.createElement(a.Fragment,null,a.createElement("span",{className:pe.lockMessageClass},B),a.createElement(Qr.u,{placement:"right-end",interactive:!0,content:a.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:pe.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement("div",{className:pe.icon},a.createElement(He.J,{name:"question-circle"})))):a.createElement(Ar.p,{confirmText:"Save",onClick:W,onCancel:ce,onConfirm:J,disabled:z},"Change role"))}const pg=({lockMessage:B})=>{const W=(0,_e.wW)(Js);return a.createElement("div",{className:W.disabledTooltip},a.createElement("span",{className:W.lockMessageClass},B),a.createElement(Qr.u,{placement:"right-end",interactive:!0,content:a.createElement("div",null,"This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:W.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement(He.J,{name:"question-circle"})))},Js=B=>({disabledTooltip:Z.css`
    display: flex;
  `,tooltipItemLink:Z.css`
    color: ${B.v1.palette.blue95};
  `,lockMessageClass:Z.css`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `}),Ko=[{label:"Yes",value:!0},{label:"No",value:!1}];function Vr({isGrafanaAdmin:B,onGrafanaAdminChange:W}){const[z,J]=(0,a.useState)(!1),[ce,pe]=(0,a.useState)(B),xe=()=>J(!0),Fe=()=>{J(!1),pe(B)},et=()=>W(ce),lt=ka.Vt.hasPermission(yn.AccessControlAction.UsersPermissionsUpdate);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Permissions"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Grafana Admin"),z?a.createElement("td",{colSpan:2},a.createElement(me.S,{options:Ko,value:ce,onChange:pe,autoFocus:!0})):a.createElement("td",{colSpan:2},B?a.createElement(a.Fragment,null,a.createElement(He.J,{name:"shield"})," Yes"):a.createElement(a.Fragment,null,"No")),a.createElement("td",null,lt&&a.createElement(Ar.p,{onClick:xe,onConfirm:et,onCancel:Fe,confirmText:"Change"},"Change"))))))))}var Zr=e(98102),zr=e(50869);function Jr({user:B,onUserUpdate:W,onUserDelete:z,onUserDisable:J,onUserEnable:ce,onPasswordChange:pe}){const[xe,Fe]=(0,a.useState)(!1),[et,lt]=(0,a.useState)(!1),xt=(0,a.useRef)(null),kt=Wr=>()=>{Fe(Wr),!Wr&&xt.current&&xt.current.focus()},Zt=(0,a.useRef)(null),tn=Wr=>()=>{lt(Wr),!Wr&&Zt.current&&Zt.current.focus()},ln=()=>z(B.id),vn=()=>J(B.id),Un=()=>ce(B.id),Za=Wr=>{W({...B,name:Wr})},Na=Wr=>{W({...B,email:Wr})},Ja=Wr=>{W({...B,login:Wr})},qs=B.authLabels?.length&&B.authLabels[0],Rr=qs?`Synced via ${qs}`:"",fi=B.isExternal||!ka.Vt.hasPermissionInMetadata(yn.AccessControlAction.UsersWrite,B),Jh=B.isExternal||!ka.Vt.hasPermissionInMetadata(yn.AccessControlAction.UsersPasswordUpdate,B),Xh=ka.Vt.hasPermissionInMetadata(yn.AccessControlAction.UsersDelete,B),qh=ka.Vt.hasPermissionInMetadata(yn.AccessControlAction.UsersDisable,B),ev=ka.Vt.hasPermissionInMetadata(yn.AccessControlAction.UsersEnable,B);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"User information"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement(Xr,{label:"Name",value:B.name,locked:fi,lockMessage:Rr,onChange:Za}),a.createElement(Xr,{label:"Email",value:B.email,locked:fi,lockMessage:Rr,onChange:Na}),a.createElement(Xr,{label:"Username",value:B.login,locked:fi,lockMessage:Rr,onChange:Ja}),a.createElement(Xr,{label:"Password",value:"********",inputType:"password",locked:Jh,lockMessage:Rr,onChange:pe})))),a.createElement("div",{className:jd.buttonRow},Xh&&a.createElement(a.Fragment,null,a.createElement(q.zx,{variant:"destructive",onClick:kt(!0),ref:xt},"Delete user"),a.createElement(Zr.s,{isOpen:xe,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:ln,onDismiss:kt(!1)})),B.isDisabled&&ev&&a.createElement(q.zx,{variant:"secondary",onClick:Un},"Enable user"),!B.isDisabled&&qh&&a.createElement(a.Fragment,null,a.createElement(q.zx,{variant:"secondary",onClick:tn(!0),ref:Zt},"Disable user"),a.createElement(Zr.s,{isOpen:et,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:vn,onDismiss:tn(!1)})))))}const jd={buttonRow:Z.css`
    margin-top: 0.8rem;
    > * {
      margin-right: 16px;
    }
  `};class Xr extends a.PureComponent{constructor(){super(...arguments),this.state={editing:!1,value:this.props.value||""},this.setInputElem=W=>{this.inputElem=W},this.onEditClick=()=>{this.props.inputType==="password"?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)},this.onCancelClick=()=>{this.setState({editing:!1,value:this.props.value||""})},this.onInputChange=(W,z)=>{z!==zr.G.Invalid&&this.setState({value:W.target.value})},this.onInputBlur=(W,z)=>{z!==zr.G.Invalid&&this.setState({value:W.target.value})},this.focusInput=()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()},this.onSave=()=>{this.props.onChange&&this.props.onChange(this.state.value)}}render(){const{label:W,locked:z,lockMessage:J,inputType:ce}=this.props,{value:pe}=this.state,xe=(0,Z.cx)("width-16",Z.css`
        font-weight: 500;
      `);if(z)return a.createElement(Ii,{label:W,value:pe,lockMessage:J});const Fe=`${W}-input`;return a.createElement("tr",null,a.createElement("td",{className:xe},a.createElement("label",{htmlFor:Fe},W)),a.createElement("td",{className:"width-25",colSpan:2},this.state.editing?a.createElement(ue.I,{id:Fe,type:ce,defaultValue:pe,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):a.createElement("span",null,this.props.value)),a.createElement("td",null,a.createElement(Ar.p,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick},"Edit")))}}Xr.defaultProps={value:"",locked:!1,lockMessage:"",inputType:"text"};const Ii=({label:B,value:W,lockMessage:z})=>{const J=Z.css`
    font-style: italic;
    margin-right: 0.6rem;
  `,ce=(0,Z.cx)("width-16",Z.css`
      font-weight: 500;
    `);return a.createElement("tr",null,a.createElement("td",{className:ce},B),a.createElement("td",{className:"width-25",colSpan:2},W),a.createElement("td",null,a.createElement("span",{className:J},z)))};var $a=e(35287);class Qd extends a.PureComponent{constructor(){super(...arguments),this.forceAllLogoutButton=a.createRef(),this.state={showLogoutModal:!1},this.showLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!0})},this.dismissLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!1},()=>{this.forceAllLogoutButton.current?.focus()})},this.onSessionRevoke=W=>()=>{this.props.onSessionRevoke(W)},this.onAllSessionsRevoke=()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}}render(){const{sessions:W}=this.props,{showLogoutModal:z}=this.state,J=Z.css`
      margin-top: 0.8rem;
    `,ce=ka.Vt.hasPermission(yn.AccessControlAction.UsersLogout);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Sessions"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Last seen"),a.createElement("th",null,"Logged on"),a.createElement("th",null,"IP address"),a.createElement("th",{colSpan:2},"Browser and OS"))),a.createElement("tbody",null,W&&W.map((pe,xe)=>a.createElement("tr",{key:`${pe.id}-${xe}`},a.createElement("td",null,pe.isActive?"Now":pe.seenAt),a.createElement("td",null,(0,$a.$q)(pe.createdAt,{dateStyle:"long"})),a.createElement("td",null,pe.clientIp),a.createElement("td",null,`${pe.browser} on ${pe.os} ${pe.osVersion}`),a.createElement("td",null,a.createElement("div",{className:"pull-right"},ce&&a.createElement(Ar.p,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(pe.id),autoFocus:!0},"Force logout")))))))),a.createElement("div",{className:J},ce&&W.length>0&&a.createElement(q.zx,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton},"Force logout from all devices"),a.createElement(Zr.s,{isOpen:z,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal}))))}}const Zd=Qd;var Ts=e(37592);class Jd extends a.PureComponent{constructor(){super(...arguments),this.onUserUpdate=W=>{this.props.updateUser(W)},this.onPasswordChange=W=>{const{user:z,setUserPassword:J}=this.props;z&&J(z.id,W)},this.onUserDelete=W=>{this.props.deleteUser(W)},this.onUserDisable=W=>{this.props.disableUser(W)},this.onUserEnable=W=>{this.props.enableUser(W)},this.onGrafanaAdminChange=W=>{const{user:z,updateUserPermissions:J}=this.props;z&&J(z.id,W)},this.onOrgRemove=W=>{const{user:z,deleteOrgUser:J}=this.props;z&&J(z.id,W)},this.onOrgRoleChange=(W,z)=>{const{user:J,updateOrgUserRole:ce}=this.props;J&&ce(J.id,W,z)},this.onOrgAdd=(W,z)=>{const{user:J,addOrgUser:ce}=this.props;J&&ce(J,W,z)},this.onSessionRevoke=W=>{const{user:z,revokeSession:J}=this.props;z&&J(W,z.id)},this.onAllSessionsRevoke=()=>{const{user:W,revokeAllSessions:z}=this.props;W&&z(W.id)},this.onUserSync=()=>{const{user:W,syncLdapUser:z}=this.props;W&&z(W.id)}}async componentDidMount(){const{match:W,loadAdminUserPage:z}=this.props;z(parseInt(W.params.id,10))}render(){const{user:W,orgs:z,sessions:J,ldapSyncInfo:ce,isLoading:pe}=this.props,xe=W?.isExternal&&W?.authLabels?.includes("LDAP"),Fe=ka.Vt.hasPermission(yn.AccessControlAction.UsersAuthTokenList),et=ka.Vt.hasPermission(yn.AccessControlAction.LDAPStatusRead),lt=!Q.ZP.auth.DisableSyncLock&&W?.isExternallySynced,xt={text:W?.login??"",icon:"shield",breadcrumbs:[{title:"Users",url:"admin/users"}],subTitle:"Manage settings for an individual user."};return a.createElement(zs.T,{navId:"global-users",pageNav:xt},a.createElement(zs.T.Contents,{isLoading:pe},W&&a.createElement(a.Fragment,null,a.createElement(Jr,{user:W,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),xe&&lt&&(0,Al.v)("ldapsync")&&ce&&et&&a.createElement(Hd,{ldapSyncInfo:ce,user:W,onUserSync:this.onUserSync}),a.createElement(Vr,{isGrafanaAdmin:W.isGrafanaAdmin,onGrafanaAdminChange:this.onGrafanaAdminChange})),z&&a.createElement(Nl,{user:W,orgs:z,isExternalUser:lt,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),J&&Fe&&a.createElement(Zd,{sessions:J,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke})))}}const Xd=B=>({user:B.userAdmin.user,sessions:B.userAdmin.sessions,orgs:B.userAdmin.orgs,ldapSyncInfo:B.ldap.syncInfo,isLoading:B.userAdmin.isLoading,error:B.userAdmin.error}),qd={loadAdminUserPage:Ts.PK,updateUser:Ts.Nq,setUserPassword:Ts.tQ,disableUser:Ts.B9,enableUser:Ts.Dx,deleteUser:Ts.h8,updateUserPermissions:Ts.Xx,addOrgUser:Ts.bN,updateOrgUserRole:Ts.Jk,deleteOrgUser:Ts.uV,revokeSession:Ts._1,revokeAllSessions:Ts.Fm,syncLdapUser:Ts.CP},eu=(0,es.connect)(Xd,qd)(Jd);var Ri=e(86245);const tu=({ldapConnectionInfo:B})=>a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Connection"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Host"),a.createElement("th",{colSpan:2},"Port"))),a.createElement("tbody",null,B&&B.map((W,z)=>a.createElement("tr",{key:z},a.createElement("td",null,W.host),a.createElement("td",null,W.port),a.createElement("td",null,W.available?a.createElement(He.J,{name:"check",className:"pull-right"}):a.createElement(He.J,{name:"exclamation-triangle",className:"pull-right"}))))))),a.createElement("div",{className:"gf-form-group"},a.createElement(Wl,{ldapConnectionInfo:B})))),Wl=({ldapConnectionInfo:B})=>{if(!B.some(ce=>ce.error))return null;const z=[];B.forEach(ce=>{ce.error&&z.push(ce)});const J=z.map((ce,pe)=>a.createElement("div",{key:pe},a.createElement("span",{style:{fontWeight:500}},ce.host,":",ce.port,a.createElement("br",null)),a.createElement("span",null,ce.error),pe!==z.length-1&&a.createElement(a.Fragment,null,a.createElement("br",null),a.createElement("br",null))));return a.createElement(xa.b,{title:"Connection error",severity:yn.AppNotificationSeverity.Error},J)};var Fl=e(67487);const nu="dddd YYYY-MM-DD HH:mm zz";class au extends a.PureComponent{constructor(){super(...arguments),this.state={isSyncing:!1},this.handleSyncClick=()=>{this.setState({isSyncing:!this.state.isSyncing})}}render(){const{ldapSyncInfo:W}=this.props,{isSyncing:z}=this.state,J=(0,Mi.dq)(W.nextSync,{format:nu});return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Synchronisation",a.createElement(q.zx,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0},a.createElement("span",{className:"btn-title"},"Bulk-sync now"),z&&a.createElement(Fl.$,{inline:!0}))),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"Active synchronisation"),a.createElement("td",{colSpan:2},W.enabled?"Enabled":"Disabled")),a.createElement("tr",null,a.createElement("td",null,"Scheduled"),a.createElement("td",null,W.schedule)),a.createElement("tr",null,a.createElement("td",null,"Next scheduled synchronisation"),a.createElement("td",null,J)))))))}}const su=({groups:B,showAttributeMapping:W})=>{const z=W?B:B.filter(J=>J.orgRole);return a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,W&&a.createElement("th",null,"LDAP Group"),a.createElement("th",null,"Organization",a.createElement(Qr.u,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info"},a.createElement("span",{className:"gf-form-help-icon"},a.createElement(He.J,{name:"info-circle"})))),a.createElement("th",null,"Role"))),a.createElement("tbody",null,z.map((J,ce)=>a.createElement("tr",{key:`${J.orgId}-${ce}`},W&&a.createElement("td",null,J.groupDN),J.orgName&&J.orgRole?a.createElement("td",null,J.orgName):a.createElement("td",null),J.orgRole?a.createElement("td",null,J.orgRole):a.createElement("td",null,a.createElement("span",{className:"text-warning"},"No match",a.createElement(Qr.u,{placement:"top",content:"No matching groups found",theme:"info"},a.createElement("span",{className:"gf-form-help-icon"},a.createElement(He.J,{name:"info-circle"})))))))))))},ru=({info:B,showAttributeMapping:W})=>a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{colSpan:2},"User information"),W&&a.createElement("th",null,"LDAP attribute"))),a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"},"First name"),a.createElement("td",null,B.name.ldapValue),W&&a.createElement("td",null,B.name.cfgAttrValue)),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Surname"),a.createElement("td",null,B.surname.ldapValue),W&&a.createElement("td",null,B.surname.cfgAttrValue)),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Username"),a.createElement("td",null,B.login.ldapValue),W&&a.createElement("td",null,B.login.cfgAttrValue)),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Email"),a.createElement("td",null,B.email.ldapValue),W&&a.createElement("td",null,B.email.cfgAttrValue)))))),ou=({permissions:B})=>a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{colSpan:1},"Permissions"))),a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"}," Grafana admin"),a.createElement("td",null,B.isGrafanaAdmin?a.createElement(a.Fragment,null,a.createElement(He.J,{name:"shield"})," Yes"):"No")),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Status"),a.createElement("td",null,B.isDisabled?a.createElement(a.Fragment,null,a.createElement(He.J,{name:"times"})," Inactive"):a.createElement(a.Fragment,null,a.createElement(He.J,{name:"check"})," Active"))))))),hg=({teams:B,showAttributeMapping:W})=>{const z=W?B:B.filter(J=>J.teamName);return a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,W&&a.createElement("th",null,"LDAP Group"),a.createElement("th",null,"Organisation"),a.createElement("th",null,"Team"))),a.createElement("tbody",null,z.map((J,ce)=>a.createElement("tr",{key:`${J.teamName}-${ce}`},W&&a.createElement(a.Fragment,null,a.createElement("td",null,J.groupDN),!J.orgName&&a.createElement(a.Fragment,null,a.createElement("td",null),a.createElement("td",null,a.createElement("div",{className:"text-warning"},"No match",a.createElement(Qr.u,{placement:"top",content:"No matching teams found",theme:"info"},a.createElement("span",{className:"gf-form-help-icon"},a.createElement(He.J,{name:"info-circle"}))))))),J.orgName&&a.createElement(a.Fragment,null,a.createElement("td",null,J.orgName),a.createElement("td",null,J.teamName))))))))},Lr=({ldapUser:B,showAttributeMapping:W})=>a.createElement(a.Fragment,null,a.createElement(ru,{info:B.info,showAttributeMapping:W}),a.createElement(ou,{permissions:B.permissions}),B.roles&&B.roles.length>0&&a.createElement(su,{groups:B.roles,showAttributeMapping:W}),B.teams&&B.teams.length>0?a.createElement(hg,{teams:B.teams,showAttributeMapping:W}):a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"No teams found via LDAP"))))))),{FormField:iu}=Ma.LegacyForms;class rr extends a.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0},this.search=W=>{W.preventDefault();const z=W.target.elements.username.value;z&&this.fetchUserMapping(z)},this.onClearUserError=()=>{this.props.clearUserError()}}async componentDidMount(){const{clearUserMappingInfo:W,queryParams:z}=this.props;await W(),await this.fetchLDAPStatus(),z.username&&await this.fetchUserMapping(z.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:W,loadLdapSyncStatus:z}=this.props;return Promise.all([W(),z()])}async fetchUserMapping(W){const{loadUserMapping:z}=this.props;return await z(W)}render(){const{ldapUser:W,userError:z,ldapError:J,ldapSyncInfo:ce,ldapConnectionInfo:pe,navModel:xe,queryParams:Fe}=this.props,{isLoading:et}=this.state,lt=ka.Vt.hasPermission(yn.AccessControlAction.LDAPUsersRead);return a.createElement(zs.T,{navModel:xe},a.createElement(zs.T.Contents,{isLoading:et},a.createElement(a.Fragment,null,J&&J.title&&a.createElement("div",{className:"gf-form-group"},a.createElement(xa.b,{title:J.title,severity:yn.AppNotificationSeverity.Error},J.body)),a.createElement(tu,{ldapConnectionInfo:pe}),(0,Al.v)("ldapsync")&&ce&&a.createElement(au,{ldapSyncInfo:ce}),lt&&a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Test user mapping"),a.createElement("div",{className:"gf-form-group"},a.createElement("form",{onSubmit:this.search,className:"gf-form-inline"},a.createElement(iu,{label:"Username",labelWidth:8,inputWidth:30,type:"text",id:"username",name:"username",defaultValue:Fe.username}),a.createElement(q.zx,{type:"submit"},"Run"))),z&&z.title&&a.createElement("div",{className:"gf-form-group"},a.createElement(xa.b,{title:z.title,severity:yn.AppNotificationSeverity.Error,onRemove:this.onClearUserError},z.body)),W&&a.createElement(Lr,{ldapUser:W,showAttributeMapping:!0})))))}}const vg=B=>({navModel:(0,Ri.ht)(B.navIndex,"ldap"),ldapConnectionInfo:B.ldap.connectionInfo,ldapUser:B.ldap.user,ldapSyncInfo:B.ldap.syncInfo,userError:B.ldap.userError,ldapError:B.ldap.ldapError}),lu={loadLdapState:Ts.Y3,loadLdapSyncStatus:Ts.j4,loadUserMapping:Ts.b_,clearUserError:Ts.V0,clearUserMappingInfo:Ts.IS},zo=(0,es.connect)(vg,lu)(rr);var ba=e(49969);const pn=B=>a.lazy(B);var Is=e(97953);const $l=[],Kl=[...$l,{path:"/alerting",component:()=>a.createElement(Pr,{navId:"alerting-legacy"})},{path:"/alerting/list",component:pn(()=>Promise.all([e.e(5524),e.e(8347),e.e(2461)]).then(e.bind(e,65007)))},{path:"/alerting/ng/list",component:pn(()=>e.e(4286).then(e.bind(e,65007)))},{path:"/alerting/notifications",roles:Q.vc.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:pn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:pn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:pn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:pn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:pn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:pn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notification/new",component:pn(()=>e.e(476).then(e.bind(e,13915)))},{path:"/alerting/notification/:id/edit",component:pn(()=>e.e(7384).then(e.bind(e,18910)))}],Vl=[...$l,{path:"/alerting",component:pn(()=>Promise.all([e.e(5524),e.e(6034)]).then(e.bind(e,90237)))},{path:"/alerting/list",roles:(0,Is.ql)([yn.AccessControlAction.AlertingRuleRead,yn.AccessControlAction.AlertingRuleExternalRead],[ba.B.Viewer,ba.B.Editor,ba.B.Admin]),component:pn(()=>Promise.all([e.e(5524),e.e(8347),e.e(2461)]).then(e.bind(e,36291)))},{path:"/alerting/routes",roles:(0,Is.ql)([yn.AccessControlAction.AlertingNotificationsRead,yn.AccessControlAction.AlertingNotificationsExternalRead],[ba.B.Editor,ba.B.Admin]),component:pn(()=>Promise.all([e.e(5524),e.e(8648)]).then(e.bind(e,11482)))},{path:"/alerting/routes/mute-timing/new",roles:(0,Is.ql)([yn.AccessControlAction.AlertingNotificationsWrite,yn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:pn(()=>Promise.all([e.e(5524),e.e(9355)]).then(e.bind(e,89657)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,Is.ql)([yn.AccessControlAction.AlertingNotificationsWrite,yn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:pn(()=>Promise.all([e.e(5524),e.e(9355)]).then(e.bind(e,89657)))},{path:"/alerting/silences",roles:(0,Is.ql)([yn.AccessControlAction.AlertingInstanceRead,yn.AccessControlAction.AlertingInstancesExternalRead],["Viewer","Editor","Admin"]),component:pn(()=>Promise.all([e.e(5524),e.e(1783)]).then(e.bind(e,99658)))},{path:"/alerting/silence/new",roles:(0,Is.ql)([yn.AccessControlAction.AlertingInstanceCreate,yn.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:pn(()=>Promise.all([e.e(5524),e.e(1783)]).then(e.bind(e,99658)))},{path:"/alerting/silence/:id/edit",roles:(0,Is.ql)([yn.AccessControlAction.AlertingInstanceUpdate,yn.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:pn(()=>Promise.all([e.e(5524),e.e(1783)]).then(e.bind(e,99658)))},{path:"/alerting/notifications",roles:(0,Is.ql)([yn.AccessControlAction.AlertingNotificationsRead,yn.AccessControlAction.AlertingNotificationsExternalRead],["Editor","Admin"]),component:pn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,79070)))},{path:"/alerting/notifications/:type/new",roles:(0,Is.ql)([yn.AccessControlAction.AlertingNotificationsWrite,yn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:pn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,79070)))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,Is.ql)([yn.AccessControlAction.AlertingNotificationsWrite,yn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:pn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,79070)))},{path:"/alerting/notifications/:type/:id/duplicate",roles:(0,Is.ql)([yn.AccessControlAction.AlertingNotificationsWrite,yn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:pn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,79070)))},{path:"/alerting/notifications/:type",roles:(0,Is.ql)([yn.AccessControlAction.AlertingNotificationsWrite,yn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:pn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,79070)))},{path:"/alerting/groups/",roles:(0,Is.ql)([yn.AccessControlAction.AlertingInstanceRead,yn.AccessControlAction.AlertingInstancesExternalRead],[ba.B.Viewer,ba.B.Editor,ba.B.Admin]),component:pn(()=>Promise.all([e.e(5524),e.e(2415)]).then(e.bind(e,48401)))},{path:"/alerting/new",pageClass:"page-alerting",roles:(0,Is.ql)([yn.AccessControlAction.AlertingRuleCreate,yn.AccessControlAction.AlertingRuleExternalWrite],[ba.B.Viewer,ba.B.Editor,ba.B.Admin]),component:pn(()=>Promise.all([e.e(5524),e.e(5372)]).then(e.bind(e,85670)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,Is.ql)([yn.AccessControlAction.AlertingRuleUpdate,yn.AccessControlAction.AlertingRuleExternalWrite],[ba.B.Viewer,ba.B.Editor,ba.B.Admin]),component:pn(()=>Promise.all([e.e(5524),e.e(5372)]).then(e.bind(e,85670)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,Is.ql)([yn.AccessControlAction.AlertingRuleRead,yn.AccessControlAction.AlertingRuleExternalRead],[ba.B.Viewer,ba.B.Editor,ba.B.Admin]),component:pn(()=>e.e(4679).then(e.bind(e,77110)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,Is.ql)([yn.AccessControlAction.AlertingRuleRead,yn.AccessControlAction.AlertingRuleExternalRead],[ba.B.Viewer,ba.B.Editor,ba.B.Admin]),component:pn(()=>e.e(7918).then(e.bind(e,29309)))},{path:"/alerting/admin",roles:()=>["Admin"],component:pn(()=>Promise.all([e.e(5524),e.e(6488),e.e(7680)]).then(e.bind(e,30315)))}];function cu(B=Q.vc){return B.unifiedAlertingEnabled?Vl:B.alertingEnabled?Kl:(0,h.uniq)([...Kl,...Vl].map(z=>z.path)).map(z=>({path:z,component:pn(()=>e.e(1333).then(e.bind(e,39597)))}))}var du=e(86475);function uu(){return Q.vc.featureToggles.dataConnectionsConsole?[{path:`/${du.D}`,exact:!1,component:pn(()=>Promise.all([e.e(6488),e.e(6526),e.e(6747),e.e(9133),e.e(5981)]).then(e.bind(e,51689)))}]:[]}var Ho=e(3597),Ai=e(48996);const mu=[{path:"/plugins",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:Ai.cd.Home,component:pn(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/browse",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:Ai.cd.Browse,component:pn(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:Ai.cd.Details,component:pn(()=>Promise.all([e.e(6488),e.e(6526),e.e(6747),e.e(2417)]).then(e.bind(e,5793)))},{path:"/admin/plugins/*",navId:"admin-plugins",component:()=>a.createElement(sr.l_,{to:"/plugins"})}];function fu(){return mu}var Br=e(62992),mo=e(4063),gu=e(2555),Xs=e(34177);function pu(B){return console.error(B),qr("Exception thrown","See console for details")}function hu(){return qr("Page not found","404 Error")}function qr(B,W){const z={text:B,subTitle:W,icon:"exclamation-triangle"};return{node:z,main:z}}var vu=e(13011),Li=e(22215),Eu=e(55111),Bi=e(52889);const zl={loading:!0,pluginNav:null,plugin:null};function Hl({pluginId:B,pluginNavSection:W}){const z=(0,sr.$B)(),J=(0,sr.TH)(),[ce,pe]=(0,a.useReducer)(ls.reducer,zl),xe=n.v.appSubUrl+J.pathname+J.search,{plugin:Fe,loading:et,pluginNav:lt}=ce,xt=(0,Eu.d)(W,lt,xe),kt=(0,a.useMemo)(()=>(0,I.Ox)(J.search),[J.search]),Zt=(0,a.useMemo)(()=>(0,Bi.a)(xt),[xt]),tn=(0,Xs.p)();(0,a.useEffect)(()=>{yu(B,pe)},[B]);const ln=(0,a.useCallback)(Un=>pe(ls.actions.changeNav(Un)),[]);if(!Fe||B!==Fe.meta.id){const Un=tn.chrome.state.getValue().layout;return a.createElement(zs.T,{navModel:xt,pageNav:{text:""},layout:Un},et&&a.createElement(gu.Z,null))}if(!Fe.root)return a.createElement(zs.T,{navModel:xt??qr("Plugin load error")},a.createElement("div",null,"No root app page component found"));const vn=Fe.root&&a.createElement(Fe.root,{meta:Fe.meta,basename:z.url,onNavChanged:ln,query:kt,path:J.pathname});return lt?a.createElement(a.Fragment,null,xt?a.createElement(zs.T,{navModel:xt,pageNav:lt?.node},a.createElement(zs.T.Contents,{isLoading:et},vn)):a.createElement(zs.T,null,vn)):a.createElement(Bi.v.Provider,{value:Zt},vn)}const ls=(0,Br.oM)({name:"prom-builder-container",initialState:zl,reducers:{setState:(B,W)=>{Object.assign(B,W.payload)},changeNav:(B,W)=>{let z=W.payload;z&&z.node.children&&(z={...z,node:{...z.main,hideFromBreadcrumbs:!0}}),B.pluginNav=z}}});async function yu(B,W){try{const z=await(0,vu.a)(B).then(J=>{const ce=Pu(J);return ce?(ka.h$.emit(mo.SI.alertError,[ce]),W(ls.actions.setState({pluginNav:qr(ce)})),null):(0,Li.Av)(J)});W(ls.actions.setState({plugin:z,loading:!1,pluginNav:null}))}catch{W(ls.actions.setState({plugin:null,loading:!1,pluginNav:hu()}))}}function Pu(B){return B?B.type!==Dt.zV.app?"Plugin must be an app":B.enabled?null:"Application Not Enabled":"Unknown Plugin"}const kl=Hl;var _a=e(3153);function Cu(){const B=(0,_a.y0)(),{navIndex:W}=B,z=pe=>pe.startsWith("standalone-plugin-page-/"),J=pe=>"pluginId"in pe&&"id"in pe;return[...Object.values(W).filter(J).map(pe=>{const xe=(0,Ri.vw)(pe),Fe=`/a/${pe.pluginId}`,et=z(pe.id)&&pe.url||Fe,lt=z(pe.id)&&!pe.url?.startsWith("/a/");return{path:et,exact:!1,sensitive:lt,component:()=>a.createElement(kl,{pluginId:pe.pluginId,pluginNavSection:xe})}}),{path:"/a/:pluginId",exact:!1,component:({match:pe})=>a.createElement(kl,{pluginId:pe.params.pluginId,pluginNavSection:W.home})}]}const _l=[{path:"/profile",component:pn(()=>e.e(7323).then(e.bind(e,87807)))},{path:"/profile/password",component:pn(()=>e.e(5771).then(e.bind(e,75771)))},{path:"/profile/select-org",component:pn(()=>e.e(1456).then(e.bind(e,90779)))},{path:"/profile/notifications",component:pn(()=>e.e(743).then(e.bind(e,76137)))}];function yg(B=Q.vc){return B.profileEnabled?_l:(0,h.uniq)(_l.map(z=>z.path)).map(z=>({path:z,component:pn(()=>e.e(3395).then(e.bind(e,92080)))}))}const Gl=()=>Q.vc.featureToggles.publicDashboards?[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:yn.DashboardRoutes.Public,component:pn(()=>e.e(1344).then(e.bind(e,10429)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:yn.DashboardRoutes.Public,chromeless:!0,component:pn(()=>Promise.all([e.e(3189),e.e(7638),e.e(717),e.e(6647),e.e(2613)]).then(e.bind(e,72766)))}]:[],Du=[];function xu(){return[...Cu(),{path:"/",pageClass:"page-dashboard",routeName:yn.DashboardRoutes.Home,component:pn(()=>Promise.all([e.e(3189),e.e(3755),e.e(7638),e.e(717),e.e(6647),e.e(2060),e.e(1579),e.e(8347),e.e(6281),e.e(5296)]).then(e.bind(e,25487)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:yn.DashboardRoutes.Normal,component:pn(()=>Promise.all([e.e(3189),e.e(3755),e.e(7638),e.e(717),e.e(6647),e.e(2060),e.e(1579),e.e(8347),e.e(6281),e.e(5296)]).then(e.bind(e,25487)))},{path:"/dashboard/new",roles:()=>ts.Vt.evaluatePermission(()=>[],[yn.AccessControlAction.DashboardsCreate]),pageClass:"page-dashboard",routeName:yn.DashboardRoutes.New,component:pn(()=>Promise.all([e.e(3189),e.e(3755),e.e(7638),e.e(717),e.e(6647),e.e(2060),e.e(1579),e.e(8347),e.e(6281),e.e(5296)]).then(e.bind(e,25487)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>ts.Vt.evaluatePermission(()=>["Editor","Admin"],[yn.AccessControlAction.DashboardsCreate]),component:pn(()=>Promise.all([e.e(3189),e.e(3755),e.e(7638),e.e(717),e.e(6647),e.e(2060),e.e(1579),e.e(8347),e.e(6281),e.e(5296)]).then(e.bind(e,81704)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:yn.DashboardRoutes.Normal,component:pn(()=>Promise.all([e.e(3189),e.e(3755),e.e(7638),e.e(717),e.e(6647),e.e(2060),e.e(1579),e.e(8347),e.e(6281),e.e(5296)]).then(e.bind(e,25487)))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:yn.DashboardRoutes.Normal,chromeless:!0,component:pn(()=>Promise.all([e.e(717),e.e(1034)]).then(e.bind(e,30237)))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:yn.DashboardRoutes.Normal,chromeless:!0,component:pn(()=>Promise.all([e.e(717),e.e(1034)]).then(e.bind(e,30237)))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:yn.DashboardRoutes.Normal,chromeless:!0,component:pn(()=>Promise.all([e.e(717),e.e(1034)]).then(e.bind(e,30237)))},{path:"/dashboard/import",roles:()=>ts.Vt.evaluatePermission(()=>["Editor","Admin"],[yn.AccessControlAction.DashboardsCreate]),component:pn(()=>e.e(8808).then(e.bind(e,26440)))},{path:Ho.n.List,component:pn(()=>Promise.all([e.e(6488),e.e(4620)]).then(e.bind(e,99113)))},{path:Ho.n.Edit,component:pn(()=>Promise.all([e.e(6488),e.e(9133),e.e(1477)]).then(e.bind(e,72443)))},{path:Ho.n.Dashboards,component:pn(()=>Promise.all([e.e(6488),e.e(2929)]).then(e.bind(e,46144)))},{path:Ho.n.New,component:pn(()=>Promise.all([e.e(6488),e.e(4253)]).then(e.bind(e,70594)))},{path:"/datasources/correlations",component:pn(()=>Q.ZP.featureToggles.correlations?e.e(413).then(e.bind(e,84306)):e.e(2093).then(e.bind(e,91598)))},{path:"/dashboards",component:pn(()=>Promise.all([e.e(6526),e.e(4074)]).then(e.bind(e,32722)))},{path:"/dashboards/folder/new",roles:()=>ts.Vt.evaluatePermission(()=>["Editor","Admin"],[yn.AccessControlAction.FoldersCreate]),component:pn(()=>e.e(8932).then(e.bind(e,94883)))},{path:"/dashboards/f/:uid/:slug/permissions",component:Q.ZP.rbacEnabled?pn(()=>e.e(8431).then(e.bind(e,42524))):pn(()=>e.e(8431).then(e.bind(e,45663)))},{path:"/dashboards/f/:uid/:slug/settings",component:pn(()=>e.e(4827).then(e.bind(e,90315)))},{path:"/dashboards/f/:uid/:slug",component:pn(()=>Promise.all([e.e(6526),e.e(4074)]).then(e.bind(e,32722)))},{path:"/dashboards/f/:uid",component:pn(()=>Promise.all([e.e(6526),e.e(4074)]).then(e.bind(e,32722)))},{path:"/explore",pageClass:"page-explore",roles:()=>ts.Vt.evaluatePermission(()=>Q.ZP.viewersCanEdit?[]:["Editor","Admin"],[yn.AccessControlAction.DataSourcesExplore]),component:pn(()=>Q.ZP.exploreEnabled?Promise.all([e.e(4254),e.e(5048),e.e(8366),e.e(2060),e.e(6579),e.e(9782)]).then(e.bind(e,72665)):e.e(172).then(e.bind(e,20750)))},{path:"/apps",component:()=>a.createElement(Pr,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>a.createElement(Pr,{navId:"alerts-and-incidents"})},{path:"/monitoring",component:()=>a.createElement(Pr,{navId:"monitoring"})},{path:"/admin/general",component:()=>a.createElement(Pr,{navId:"admin/general"})},{path:"/admin/plugins",component:()=>a.createElement(Pr,{navId:"admin/plugins"})},{path:"/admin/access",component:()=>a.createElement(Pr,{navId:"admin/access"})},{path:"/org",component:pn(()=>e.e(529).then(e.bind(e,23242)))},{path:"/org/new",component:pn(()=>e.e(950).then(e.bind(e,72040)))},{path:"/org/users",component:pn(()=>e.e(8039).then(e.bind(e,71221)))},{path:"/org/users/invite",component:pn(()=>e.e(7707).then(e.bind(e,40509)))},{path:"/org/apikeys",roles:()=>ts.Vt.evaluatePermission(()=>["Admin"],[yn.AccessControlAction.ActionAPIKeysRead]),component:pn(()=>e.e(3082).then(e.bind(e,91948)))},{path:"/org/serviceaccounts",roles:()=>ts.Vt.evaluatePermission(()=>["Admin"],[yn.AccessControlAction.ServiceAccountsRead,yn.AccessControlAction.ServiceAccountsCreate]),component:pn(()=>e.e(1337).then(e.bind(e,50951)))},{path:"/org/serviceaccounts/create",component:pn(()=>e.e(9738).then(e.bind(e,36497)))},{path:"/org/serviceaccounts/:id",component:pn(()=>e.e(687).then(e.bind(e,66446)))},{path:"/org/teams",roles:()=>ts.Vt.evaluatePermission(()=>Q.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[yn.AccessControlAction.ActionTeamsRead,yn.AccessControlAction.ActionTeamsCreate]),component:pn(()=>e.e(9671).then(e.bind(e,17721)))},{path:"/org/teams/new",roles:()=>ts.Vt.evaluatePermission(()=>Q.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[yn.AccessControlAction.ActionTeamsCreate]),component:pn(()=>e.e(8715).then(e.bind(e,39874)))},{path:"/org/teams/edit/:id/:page?",roles:()=>ts.Vt.evaluatePermission(()=>Q.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[yn.AccessControlAction.ActionTeamsRead,yn.AccessControlAction.ActionTeamsCreate]),component:pn(()=>e.e(8612).then(e.bind(e,59582)))},{path:"/admin/authentication",roles:()=>ts.Vt.evaluatePermission(()=>["Admin","ServerAdmin"],[yn.AccessControlAction.SettingsWrite]),component:Q.ZP.featureToggles.authenticationConfigUI&&Q.ZP.licenseInfo.enabledFeatures?.saml?pn(()=>e.e(8741).then(e.bind(e,88075))):()=>a.createElement(sr.l_,{to:"/admin"})},{path:"/admin",component:()=>a.createElement(Pr,{navId:"cfg"})},{path:"/admin/access",component:()=>a.createElement(Pr,{navId:"admin/access"})},{path:"/admin/config",component:()=>a.createElement(Pr,{navId:"admin/config"})},{path:"/admin/settings",component:pn(()=>e.e(9603).then(e.bind(e,55486)))},{path:"/admin/upgrading",component:pn(()=>e.e(2446).then(e.bind(e,62446)))},{path:"/admin/users",component:pn(()=>e.e(7497).then(e.bind(e,51894)))},{path:"/admin/users/create",component:pn(()=>e.e(2508).then(e.bind(e,49562)))},{path:"/admin/users/edit/:id",component:eu},{path:"/admin/orgs",component:pn(()=>e.e(3798).then(e.bind(e,61608)))},{path:"/admin/orgs/edit/:id",component:pn(()=>e.e(2721).then(e.bind(e,29209)))},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:pn(()=>e.e(7675).then(e.bind(e,14527)))},{path:"/admin/stats",component:pn(()=>e.e(7641).then(e.bind(e,93976)))},{path:"/admin/ldap",component:zo},{path:"/login",component:Wd,pageClass:"login-page",chromeless:!0},{path:"/invite/:code",component:pn(()=>e.e(7429).then(e.bind(e,62887))),chromeless:!0},{path:"/verify",component:Q.ZP.verifyEmailEnabled?pn(()=>e.e(7583).then(e.bind(e,27583))):()=>a.createElement(sr.l_,{to:"/signup"}),pageClass:"login-page",chromeless:!0},{path:"/signup",component:Q.ZP.disableUserSignUp?()=>a.createElement(sr.l_,{to:"/login"}):pn(()=>e.e(615).then(e.bind(e,40615))),pageClass:"login-page",chromeless:!0},{path:"/user/password/send-reset-email",chromeless:!0,component:pn(()=>e.e(133).then(e.bind(e,37673)))},{path:"/user/password/reset",component:pn(()=>e.e(6848).then(e.bind(e,18310))),pageClass:"login-page",chromeless:!0},{path:"/dashboard/snapshots",component:pn(()=>e.e(5295).then(e.bind(e,11155)))},{path:"/playlists",component:pn(()=>e.e(9218).then(e.bind(e,21977)))},{path:"/playlists/play/:uid",component:pn(()=>e.e(3090).then(e.bind(e,48579)))},{path:"/playlists/new",component:pn(()=>e.e(9975).then(e.bind(e,29666)))},{path:"/playlists/edit/:uid",component:pn(()=>e.e(2341).then(e.bind(e,58809)))},{path:"/sandbox/benchmarks",component:pn(()=>e.e(4908).then(e.bind(e,12902)))},{path:"/sandbox/test",component:pn(()=>Promise.all([e.e(3755),e.e(1579),e.e(8595)]).then(e.bind(e,42594)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:pn(()=>Promise.all([e.e(3189),e.e(3778)]).then(e.bind(e,42029)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>ts.Vt.evaluatePermission(()=>["Viewer","Editor","Admin"],[yn.AccessControlAction.AlertingRuleRead]),component:pn(()=>e.e(1324).then(e.bind(e,30097)))},{path:"/library-panels",component:pn(()=>Promise.all([e.e(3189),e.e(7878)]).then(e.bind(e,45407)))},{path:"/notifications",component:pn(()=>e.e(743).then(e.bind(e,76137)))},...Ni(),...fu(),...bu(),...cu(),...yg(),...Du,...Gl(),...uu(),{path:"/*",component:Kd}].filter(Ss.fQ)}function bu(B=Q.ZP){return B.supportBundlesEnabled?[{path:"/support-bundles",component:pn(()=>e.e(9939).then(e.bind(e,57906)))},{path:"/support-bundles/create",component:pn(()=>e.e(539).then(e.bind(e,46190)))}]:[]}function Ni(B=Q.ZP){return B.featureToggles.scenes?[{path:"/scenes",component:pn(()=>e.e(207).then(e.bind(e,13190)))},{path:"/scenes/dashboard/:uid",component:pn(()=>e.e(207).then(e.bind(e,44336)))},{path:"/scenes/grafana-monitoring",exact:!1,component:pn(()=>e.e(207).then(e.bind(e,38282)))},{path:"/scenes/:name",component:pn(()=>e.e(207).then(e.bind(e,23192)))}]:[]}const Yl=a.forwardRef((B,W)=>a.createElement("div",{id:"ngRoot",ref:W,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}}));Yl.displayName="AngularRoot";var Hr=e(55024),Mu=e(11484),Su=e(70926),bo=e(20308),fo=e(19349),Bs=e(85385),Tu=e(64703);async function Ou(){if(n.v.angularSupportEnabled){const{AngularApp:B}=await Promise.all([e.e(6093),e.e(2773),e.e(9974),e.e(4704)]).then(e.bind(e,62459)),W=new B;W.init(),W.bootstrap()}else(0,Mu.W)({load:(B,W,z)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})}),(0,Su.t)({get:B=>{switch(B){case"backendSrv":return(0,Hr.d)("getLegacyAngularInjector","backendSrv","use getBackendSrv() in @grafana/runtime"),(0,O.i)();case"contextSrv":return(0,Hr.d)("getLegacyAngularInjector","contextSrv"),ka.Vt;case"dashboardSrv":return(0,Hr.d)("getLegacyAngularInjector","getDashboardSrv"),(0,p.h4)();case"datasourceSrv":return(0,Hr.d)("getLegacyAngularInjector","datasourceSrv","use getDataSourceSrv() in @grafana/runtime"),(0,L.F)();case"linkSrv":return(0,Hr.d)("getLegacyAngularInjector","linkSrv"),(0,Tu.Bq)();case"validationSrv":return(0,Hr.d)("getLegacyAngularInjector","validationSrv"),Bs.t;case"timeSrv":return(0,Hr.d)("getLegacyAngularInjector","timeSrv"),(0,fo.$t)();case"templateSrv":return(0,Hr.d)("getLegacyAngularInjector","templateSrv","use getTemplateSrv() in @grafana/runtime"),(0,bo.J)()}throw"Angular is disabled.  Unable to expose: "+B}})}var Iu=e(9085),jl=e.n(Iu),Ql=e(29952),Zl=e(83962),Ui=e(86922),wi=e(57386),Jl=e(56651);const Mo=0,Ru=B=>{const W=a.useRef(null),z=a.useRef(null),J=a.useRef(B.items);J.current=B.items;const ce=(0,Jl.useVirtual)({size:J.current.length,parentRef:z}),{query:pe,search:xe,currentRootActionId:Fe,activeIndex:et,options:lt}=(0,xs.useKBar)(tn=>({search:tn.searchQuery,currentRootActionId:tn.currentRootActionId,activeIndex:tn.activeIndex}));a.useEffect(()=>{const tn=ln=>{ln.key==="ArrowUp"||ln.ctrlKey&&ln.key==="p"?(ln.preventDefault(),pe.setActiveIndex(vn=>{let Un=vn>Mo?vn-1:vn;if(typeof J.current[Un]=="string"){if(Un===0)return vn;Un-=1}return Un})):ln.key==="ArrowDown"||ln.ctrlKey&&ln.key==="n"?(ln.preventDefault(),pe.setActiveIndex(vn=>{let Un=vn<J.current.length-1?vn+1:vn;if(typeof J.current[Un]=="string"){if(Un===J.current.length-1)return vn;Un+=1}return Un})):ln.key==="Enter"&&(ln.preventDefault(),W.current?.click())};return window.addEventListener("keydown",tn),()=>window.removeEventListener("keydown",tn)},[pe]);const{scrollToIndex:xt}=ce;a.useEffect(()=>{xt(et,{align:et<=1?"end":"auto"})},[et,xt]),a.useEffect(()=>{pe.setActiveIndex(typeof B.items[Mo]=="string"?Mo+1:Mo)},[xe,Fe,B.items,pe]);const kt=a.useCallback((tn,ln)=>{if(typeof ln=="string")return;const vn=ln.url;ln.command?(ln.command.perform(ln),pe.toggle()):vn?tn.ctrlKey||tn.metaKey||tn.shiftKey||pe.toggle():(pe.setSearch(""),pe.setCurrentRootAction(ln.id)),lt.callbacks?.onSelectAction?.(ln)},[pe,lt]),Zt=(0,wi.usePointerMovedSinceMount)();return a.createElement("div",{ref:z,style:{maxHeight:B.maxHeight||400,position:"relative",overflow:"auto"}},a.createElement("div",{role:"listbox",id:xs.KBAR_LISTBOX,style:{height:`${ce.totalSize}px`,width:"100%"}},ce.virtualItems.map(tn=>{const ln=J.current[tn.index],{target:vn,url:Un}=ln,Za=typeof ln!="string"&&{onPointerMove:()=>Zt&&et!==tn.index&&pe.setActiveIndex(tn.index),onPointerDown:()=>pe.setActiveIndex(tn.index),onClick:Rr=>kt(Rr,ln)},Na=tn.index===et,Ja={id:(0,xs.getListboxItemId)(tn.index),role:"option","aria-selected":Na,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${tn.start}px)`},...Za},qs=a.cloneElement(B.onRender({item:ln,active:Na}),{ref:tn.measureRef});return Un?a.createElement("a",{key:tn.index,href:Un,target:vn,ref:Na?W:null,...Ja},qs):a.createElement("div",{key:tn.index,ref:Na?W:null,...Ja},qs)})))},Xl=a.forwardRef(({action:B,active:W,currentRootActionId:z},J)=>{const ce=a.useMemo(()=>{if(!z)return B.ancestors;const et=B.ancestors.findIndex(lt=>lt.id===z);return B.ancestors.slice(et+1)},[B.ancestors,z]),pe=(0,_e.wW)(ko);let xe=B.name;const Fe=et=>Boolean(et.command?.perform||et.url);return B.children.length&&!Fe(B)&&!xe.endsWith("...")&&(xe+="..."),a.createElement("div",{ref:J,className:(0,Z.cx)(pe.row,W&&pe.activeRow)},a.createElement("div",{className:pe.actionContainer},B.icon,a.createElement("div",{className:pe.textContainer},ce.map(et=>a.createElement(a.Fragment,{key:et.id},!Fe(et)&&a.createElement(a.Fragment,null,a.createElement("span",{className:pe.breadcrumbAncestor},et.name),a.createElement("span",{className:pe.breadcrumbSeparator},"\u203A")))),a.createElement("span",null,xe)),B.subtitle&&a.createElement("span",{className:pe.subtitleText},B.subtitle)))});Xl.displayName="ResultItem";const ko=B=>({row:(0,Z.css)({padding:B.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:B.shape.radius.default,margin:B.spacing(0,1)}),activeRow:(0,Z.css)({color:B.colors.text.maxContrast,background:B.colors.emphasize(B.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:B.spacing(.5),borderRadius:B.shape.radius.default,backgroundImage:B.colors.gradients.brandVertical}}),actionContainer:(0,Z.css)({display:"flex",gap:B.spacing(1),alignItems:"baseline",fontSize:B.typography.fontSize,width:"100%"}),textContainer:(0,Z.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),breadcrumbAncestor:(0,Z.css)({color:B.colors.text.secondary}),breadcrumbSeparator:(0,Z.css)({color:B.colors.text.secondary,marginLeft:B.spacing(1),marginRight:B.spacing(1)}),subtitleText:(0,Z.css)({...B.typography.bodySmall,color:B.colors.text.secondary,display:"block",flexBasis:"20%",flexGrow:1,flexShrink:0,maxWidth:"fit-content",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})});var Au=e(99151),Lu=e.n(Au),Bu=e(13019),ql=e(82e3);const Nu=5,Uu=4,ec=3,Wi=2,tc=1,nc=100,Fi=5,wu=Lu()(Fu,200);async function Wu(){if(!ts.Vt.user.isSignedIn)return[];const B=(await Bu.Z.getDashboardOpened()).slice(0,Fi),z=(await(0,ql.getGrafanaSearcher)().search({kind:["dashboard"],limit:Fi,uid:B})).view.toArray();return z.sort((ce,pe)=>{const xe=B.indexOf(ce.uid),Fe=B.indexOf(pe.uid);return xe-Fe}),z.map(ce=>{const{url:pe,name:xe}=ce;return{id:`recent-dashboards${pe}`,name:`${xe}`,section:(0,$a.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:Nu,url:pe}})}async function Fu(B){if(B.length===0||!ts.Vt.user.isSignedIn&&!n.v.bootData.settings.anonymousEnabled)return[];const W=await(0,ql.getGrafanaSearcher)().search({kind:["dashboard","folder"],query:B,limit:nc});return W.view.map(J=>{const{url:ce,name:pe,kind:xe,location:Fe}=J;return{id:`go/${xe}${ce}`,name:`${pe}`,section:xe==="dashboard"?(0,$a.t)("command-palette.section.dashboard-search-results","Dashboards"):(0,$a.t)("command-palette.section.folder-search-results","Folders"),priority:tc,url:ce,subtitle:W.view.dataFrame.meta?.custom?.locationInfo[Fe]?.name}})}function $u(B,W){const[z,J]=(0,a.useState)([]),[ce,pe]=(0,a.useState)(!1),xe=(0,a.useRef)(0);return(0,a.useEffect)(()=>{const Fe=Date.now();W&&B.length>0?(pe(!0),wu(B).then(et=>{Fe>xe.current&&(J(et),pe(!1),xe.current=Fe)})):(J([]),pe(!1),xe.current=Fe)},[W,B]),{searchResults:z,isFetchingSearchResults:ce}}var Ya=e(45984),ps=e(18271),Pg=e(25337),_o=e(41197);const $i=B=>{let W=B.children||[];if(B.id==="help"){const z=()=>{ps.Z.publish(new Ya.Dn({component:_o.B}))};B.children=[...W,...(0,Pg.dP)(),...Ku(),{id:"keyboard-shortcuts",text:(0,$a.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:z}]}return B},Go=(B,W)=>{const z=B.onClick;return B.onClick=()=>{(0,$r.ff)("grafana_navigation_item_clicked",{path:B.url??B.id,state:W?"expanded":"collapsed"}),z?.()},B.children&&(B.children=B.children.map(J=>Go(J,W))),B},ac=(B,W)=>Boolean(B===W||Yo(B,W)),Yo=(B,W)=>Boolean(B.children?.some(z=>z===W?!0:Yo(z,W))),So=B=>B?.split("?")[0]??"",sc=(B,W)=>{const z=So(W?.url),J=So(B.url);return J&&J.length>z?.length},rc=(B,W,z)=>{const J="/dashboards";for(const ce of B){const pe=So(ce.url),xe=S.u.stripBaseFromUrl(pe);if(xe&&ce.id!=="starred")if(xe===W){z=ce;break}else if(xe!=="/"&&W.startsWith(xe))sc(ce,z)&&(z=ce);else if(xe==="/alerting/list"&&W.startsWith("/alerting/notification/")){z=ce;break}else xe===J&&W.startsWith("/d/")&&sc(ce,z)&&(z=ce);if(ce.children&&(z=rc(ce.children,W,z)),So(z?.url)===W)return z}return z};function Ku(){const{buildInfo:B,licenseInfo:W}=n.v,z=W.stateInfo?` (${W.stateInfo})`:"",J=[];return J.push({target:"_blank",id:"version",text:`${B.edition}${z}`,url:W.licenseUrl,icon:"external-link-alt"}),B.hasUpdate&&J.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),J}var jo=e(21544),Vu=e(42454);async function ks(B,W){const z=(0,jo.j)({colors:{mode:B}});if(z.flags.topnav=Q.vc.featureToggles.topnav,ps.Z.publish(new F.hD(z)),Q.vc.theme2.isDark=z.isDark,W)return;const J=document.createElement("link");if(J.rel="stylesheet",J.href=Q.vc.bootData.themePaths[z.colors.mode],J.onload=()=>{const xe=document.getElementsByTagName("link");for(let Fe=0;Fe<xe.length;Fe++){const et=xe[Fe];et.href&&et.href.includes(`build/grafana.${z.isDark?"light":"dark"}`)&&et.remove()}},document.body.appendChild(J),!ka.Vt.isSignedIn)return;const ce=new Vu.y("user"),pe=await ce.load();await ce.update({...pe,theme:z.colors.mode})}async function Qo(B){const W=Q.vc.theme2;ks(W.isDark?"light":"dark",B)}function Ki(B){return"navModel."+B.id}function oc(B,W=[]){const z=[];for(let J of B){J.id==="help"&&(J=$i({...J}),delete J.url);const{url:ce,target:pe,text:xe,isCreateAction:Fe,children:et,onClick:lt}=J,xt=Boolean(et?.length);if(!(ce||lt||xt))continue;const kt=Fe?(0,$a.t)("command-palette.section.actions","Actions"):(0,$a.t)("command-palette.section.pages","Pages"),Zt=Fe?Uu:ec,tn=W.map(vn=>vn.text).join(" > "),ln={id:Ki(J),name:xe,section:kt,url:ce,target:pe,parent:W.length>0&&!Fe?Ki(W[W.length-1]):void 0,perform:lt,priority:Zt,subtitle:Fe?void 0:tn};if(z.push(ln),et?.length){const vn=oc(et,[...W,J]);z.push(...vn)}}return z}const zu=B=>{const W=[{id:"preferences/theme",name:(0,$a.t)("command-palette.action.change-theme","Change theme..."),keywords:"interface color dark light",section:(0,$a.t)("command-palette.section.preferences","Preferences"),priority:Wi},{id:"preferences/dark-theme",name:(0,$a.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>ks("dark"),parent:"preferences/theme",priority:Wi},{id:"preferences/light-theme",name:(0,$a.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>ks("light"),parent:"preferences/theme",priority:Wi}],z=oc(B);return[...W,...z]};function Hu(B){const[W,z]=(0,a.useState)([]),[J,ce]=(0,a.useState)([]),{navBarTree:pe}=(0,yn.useSelector)(xe=>({navBarTree:xe.navBarTree}));return(0,a.useEffect)(()=>{const xe=zu(pe);z(xe)},[pe]),(0,a.useEffect)(()=>{B||Wu().then(xe=>ce(xe)).catch(xe=>{console.error("Error loading recent dashboard actions",xe)})},[B]),B?W:[...J,...W]}var ic=e(22759);const Zo={name:"none",priority:xs.Priority.NORMAL};function Vi(B,W){return W.priority-B.priority}function zi(){const{search:B,actions:W,rootActionId:z}=(0,xs.useKBar)(xt=>({search:xt.searchQuery,actions:xt.actions,rootActionId:xt.currentRootActionId})),J=a.useMemo(()=>Object.keys(W).reduce((xt,kt)=>{const Zt=W[kt];if(!Zt.parent&&!z&&xt.push(Zt),Zt.id===z)for(let tn=0;tn<Zt.children.length;tn++)xt.push(Zt.children[tn]);return xt},[]).sort(Vi),[W,z]),ce=a.useCallback(xt=>{let kt=[];for(let Zt=0;Zt<xt.length;Zt++)kt.push(xt[Zt]);return function Zt(tn,ln=kt){for(let vn=0;vn<tn.length;vn++)if(tn[vn].children.length>0){let Un=tn[vn].children;for(let Za=0;Za<Un.length;Za++)ln.push(Un[Za]);Zt(tn[vn].children,ln)}return ln}(xt)},[]),pe=!B,xe=a.useMemo(()=>pe?J:ce(J),[ce,J,pe]),Fe=lc(xe,B),et=a.useMemo(()=>{let xt={},kt=[],Zt=[];for(let ln=0;ln<Fe.length;ln++){const vn=Fe[ln],Un=vn.action,Za=vn.score||xs.Priority.NORMAL,Na={name:typeof Un.section=="string"?Un.section:Un.section?.name||Zo.name,priority:typeof Un.section=="string"?Za:Un.section?.priority||0+Za};xt[Na.name]||(xt[Na.name]=[],kt.push(Na)),xt[Na.name].push({priority:Un.priority+Za,action:Un})}Zt=kt.sort(Vi).map(ln=>({name:ln.name,actions:xt[ln.name].sort(Vi).map(vn=>vn.action)}));let tn=[];for(let ln=0;ln<Zt.length;ln++){let vn=Zt[ln];vn.name!==Zo.name&&tn.push(vn.name);for(let Un=0;Un<vn.actions.length;Un++)tn.push(vn.actions[Un])}return tn},[Fe]),lt=a.useMemo(()=>z,[et]);return a.useMemo(()=>({results:et,rootActionId:lt}),[lt,et])}function lc(B,W){const z=ku(),J=a.useMemo(()=>({filtered:B,search:W}),[B,W]),{filtered:ce,search:pe}=(0,wi.useThrottledValue)(J);return a.useMemo(()=>{if(pe.trim()==="")return ce.map(et=>({score:0,action:et}));const xe=ce.map(({name:et,keywords:lt,subtitle:xt})=>`${et} ${lt??""} ${xt??""}`.toLowerCase()),Fe=[];if(pe.length>Nr){const et=pe.toLowerCase();for(let lt=0;lt<xe.length;lt++){const kt=xe[lt].indexOf(et);if(kt>-1){const Zt=kt*-1,tn=ce[lt];Fe.push({score:Zt,action:tn})}}}else{const et=z.split(pe).length,lt=1/0,xt=et<5,[,kt,Zt]=z.search(xe,pe,xt,lt);if(kt&&Zt)for(let tn=0;tn<Zt.length;tn++){const ln=Zt[tn],vn=Zt.length-tn,Un=ce[kt.idx[ln]];Fe.push({score:vn,action:Un})}}return Fe},[ce,pe,z])}const Nr=25;function ku(){const B=a.useRef();return B.current||(B.current=new ic.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1})),B.current}function cc(){const B=(0,_e.wW)(dc),{query:W,showing:z,searchQuery:J}=(0,xs.useKBar)(xt=>({showing:xt.visualState===xs.VisualState.showing,searchQuery:xt.searchQuery})),ce=Hu(J);(0,xs.useRegisterActions)(ce,[ce]);const{searchResults:pe,isFetchingSearchResults:xe}=$u(J,z),Fe=(0,a.useRef)(null),{overlayProps:et}=(0,Ui.Ir)({isOpen:z,onClose:()=>W.setVisualState(xs.VisualState.animatingOut)},Fe),{dialogProps:lt}=(0,Ql.R)({},Fe);return(0,a.useEffect)(()=>{z&&(0,$r.ff)("command_palette_opened")},[z]),ce.length>0?a.createElement(xs.KBarPortal,null,a.createElement(xs.KBarPositioner,{className:B.positioner},a.createElement(xs.KBarAnimator,{className:B.animator},a.createElement(Zl.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},a.createElement("div",{...et,...lt},a.createElement("div",{className:B.searchContainer},xe?a.createElement(Fl.$,{className:B.spinner}):a.createElement(He.J,{name:"search",size:"md"}),a.createElement(xs.KBarSearch,{defaultPlaceholder:(0,$a.t)("command-palette.search-box.placeholder","Search or jump to..."),className:B.search})),a.createElement("div",{className:B.resultsContainer},a.createElement(_u,{searchResults:pe}))))))):null}const _u=({searchResults:B})=>{const{results:W,rootActionId:z}=zi(),J=(0,_e.wW)(dc),ce=(0,$a.t)("command-palette.section.dashboard-search-results","Dashboards"),pe=(0,$a.t)("command-palette.section.folder-search-results","Folders"),xe=(0,a.useMemo)(()=>B.filter(lt=>lt.id.startsWith("go/dashboard")).map(lt=>new xs.ActionImpl(lt,{store:{}})),[B]),Fe=(0,a.useMemo)(()=>B.filter(lt=>lt.id.startsWith("go/folder")).map(lt=>new xs.ActionImpl(lt,{store:{}})),[B]),et=(0,a.useMemo)(()=>{const lt=[...W];return Fe.length>0&&(lt.push(pe),lt.push(...Fe)),xe.length>0&&(lt.push(ce),lt.push(...xe)),lt},[W,ce,xe,pe,Fe]);return a.createElement(Ru,{items:et,maxHeight:650,onRender:({item:lt,active:xt})=>{const kt=et[0]===lt;return typeof lt=="string"?a.createElement("div",{className:(0,Z.cx)(J.sectionHeader,kt&&J.sectionHeaderFirst)},lt):a.createElement(Xl,{action:lt,active:xt,currentRootActionId:z})}})},dc=B=>({positioner:(0,Z.css)({zIndex:B.zIndex.portal,marginTop:"0px",paddingTop:"4px !important","&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:B.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,Z.css)({maxWidth:B.breakpoints.values.md,width:"100%",background:B.colors.background.primary,color:B.colors.text.primary,borderRadius:B.shape.radius.default,border:`1px solid ${B.colors.border.weak}`,overflow:"hidden",boxShadow:B.shadows.z3}),searchContainer:(0,Z.css)({alignItems:"center",background:B.components.input.background,borderBottom:`1px solid ${B.colors.border.weak}`,display:"flex",gap:B.spacing(1),padding:B.spacing(1,2)}),search:(0,Z.css)({fontSize:B.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:B.components.input.text}),spinner:(0,Z.css)({height:"22px"}),resultsContainer:(0,Z.css)({paddingBottom:B.spacing(1)}),sectionHeader:(0,Z.css)({padding:B.spacing(1.5,2,2,2),fontSize:B.typography.bodySmall.fontSize,fontWeight:B.typography.fontWeightMedium,color:B.colors.text.secondary,borderTop:`1px solid ${B.colors.border.weak}`,marginTop:B.spacing(1)}),sectionHeaderFirst:(0,Z.css)({paddingBottom:B.spacing(1),borderTop:"none",marginTop:0})});var uc=e(79288),mc=e(68226),Ur=e(13211),br=e(29460);function Hi({children:B,icon:W,isActive:z,isChild:J,onClick:ce,target:pe,url:xe}){const Fe=(0,_e.l4)(),et=Gu(Fe,z,J),lt=a.createElement("div",{className:et.linkContent},W&&a.createElement(He.J,{"data-testid":"dropdown-child-icon",name:W}),a.createElement("div",{className:et.linkText},B),pe==="_blank"&&a.createElement(He.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:et.externalLinkIcon}));let xt=a.createElement("button",{"data-testid":xn.wl.components.NavMenu.item,className:(0,Z.cx)(et.button,et.element),onClick:ce},lt);return xe&&(xt=!pe&&xe.startsWith("/")?a.createElement(br.r,{"data-testid":xn.wl.components.NavMenu.item,className:et.element,href:xe,target:pe,onClick:ce},lt):a.createElement("a",{"data-testid":xn.wl.components.NavMenu.item,href:xe,target:pe,className:et.element,onClick:ce},lt)),a.createElement("li",{className:et.listItem},xt)}Hi.displayName="NavBarMenuItem";const Gu=(B,W,z)=>({button:(0,Z.css)({backgroundColor:"unset",borderStyle:"unset"}),linkContent:(0,Z.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"}),linkText:(0,Z.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,Z.css)({color:B.colors.text.secondary}),element:(0,Z.css)({alignItems:"center",boxSizing:"border-box",position:"relative",color:W?B.colors.text.primary:B.colors.text.secondary,padding:B.spacing(1,1,1,z?5:0),...z&&{borderRadius:B.shape.borderRadius()},width:"100%","&:hover, &:focus-visible":{...z&&{background:B.colors.emphasize(B.colors.background.primary,.03)},textDecoration:"underline",color:B.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${B.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:W?"block":"none",content:'" "',height:B.spacing(3),position:"absolute",left:B.spacing(1),top:"50%",transform:"translateY(-50%)",width:B.spacing(.5),borderRadius:B.shape.borderRadius(1),backgroundImage:B.colors.gradients.brandVertical}}),listItem:(0,Z.css)({boxSizing:"border-box",position:"relative",display:"flex",width:"100%",...z&&{padding:B.spacing(0,2)}})});var fc=e(23934),Jo=e(40419);function ki({link:B}){const W=(0,_e.l4)(),z=Yu(W);if(B.icon==="grafana")return a.createElement(Do.c.MenuLogo,{className:z.img});if(B.icon){const J=(0,Jo.toIconName)(B.icon);return a.createElement(He.J,{name:J??"link",size:"xl"})}else return a.createElement("img",{className:(0,Z.cx)(z.img,B.roundIcon&&z.round),src:B.img,alt:""})}function Yu(B){return{img:(0,Z.css)({height:B.spacing(3),width:B.spacing(3)}),round:(0,Z.css)({borderRadius:"50%"})}}const ju=({children:B})=>{const W=(0,_e.wW)(Qu);return a.createElement("div",null,B,a.createElement("span",{className:W.highlight}))},Qu=B=>({highlight:Z.css`
      background-color: ${B.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      display: inline-block;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `});function gc({link:B,activeItem:W,children:z,className:J,onClose:ce}){const pe=(0,_e.wW)(Zu),xe=B.highlightText?ju:a.Fragment,Fe=B===W,et=Yo(B,W),[lt,xt]=(0,fc.Z)(`grafana.navigation.expanded[${B.text}]`,!1)??Boolean(et);return a.createElement(a.Fragment,null,a.createElement("div",{className:(0,Z.cx)(pe.collapsibleSectionWrapper,J)},a.createElement(Hi,{isActive:B===W,onClick:()=>{B.onClick?.(),ce?.()},target:B.target,url:B.url},a.createElement("div",{className:(0,Z.cx)(pe.labelWrapper,{[pe.isActive]:Fe,[pe.hasActiveChild]:et})},a.createElement(xe,null,a.createElement(ki,{link:B})),B.text)),z&&a.createElement(q.zx,{"aria-label":`${lt?"Collapse":"Expand"} section`,variant:"secondary",fill:"text",className:pe.collapseButton,onClick:()=>xt(!lt)},a.createElement(He.J,{name:lt?"angle-up":"angle-down",size:"xl"}))),lt&&z)}const Zu=B=>({collapsibleSectionWrapper:(0,Z.css)({alignItems:"center",display:"flex"}),collapseButton:(0,Z.css)({color:B.colors.text.disabled,padding:B.spacing(0,.5),marginRight:B.spacing(1)}),collapseWrapperActive:(0,Z.css)({backgroundColor:B.colors.action.disabledBackground}),collapseContent:(0,Z.css)({padding:0}),labelWrapper:(0,Z.css)({display:"grid",fontSize:B.typography.pxToRem(14),gridAutoFlow:"column",gridTemplateColumns:`${B.spacing(7)} auto`,placeItems:"center",fontWeight:B.typography.fontWeightMedium}),isActive:(0,Z.css)({color:B.colors.text.primary,"&::before":{display:"block",content:'" "',height:B.spacing(3),position:"absolute",left:B.spacing(1),top:"50%",transform:"translateY(-50%)",width:B.spacing(.5),borderRadius:B.shape.borderRadius(1),backgroundImage:B.colors.gradients.brandVertical}}),hasActiveChild:(0,Z.css)({color:B.colors.text.primary})});function Ju({link:B,activeItem:W,onClose:z}){const J=(0,_e.wW)(Xu);return B.emptyMessage&&!pc(B)?a.createElement(gc,{onClose:z,link:B,activeItem:W},a.createElement("ul",{className:J.children},a.createElement("div",{className:J.emptyMessage},B.emptyMessage))):a.createElement(gc,{onClose:z,link:B,activeItem:W},pc(B)&&a.createElement("ul",{className:J.children},B.children.map(ce=>!ce.isCreateAction&&a.createElement(Hi,{key:`${B.text}-${ce.text}`,isActive:ac(ce,W),isChild:!0,onClick:()=>{ce.onClick?.(),z()},target:ce.target,url:ce.url},ce.text))))}const Xu=B=>({children:(0,Z.css)({display:"flex",flexDirection:"column"}),flex:(0,Z.css)({display:"flex"}),itemWithoutMenu:(0,Z.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,Z.css)({height:"100%",width:"100%"}),iconContainer:(0,Z.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,Z.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${B.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,Z.css)({fontSize:B.typography.pxToRem(14),justifySelf:"start"}),emptyMessage:(0,Z.css)({color:B.colors.text.secondary,fontStyle:"italic",padding:B.spacing(1,1.5,1,7)})});function pc(B){return Boolean(B.children&&B.children.length>0)}const Xo="350px";function hc({activeItem:B,navItems:W,searchBarHidden:z,onClose:J}){const ce=(0,_e.l4)(),pe=qu(ce,z),xe=ce.transitions.duration.shortest,Fe=Cg(ce,xe),{chrome:et}=(0,Xs.p)(),lt=et.useState(),xt=(0,a.useRef)(null),kt=(0,a.useRef)(null),{dialogProps:Zt}=(0,Ql.R)({},xt),[tn,ln]=(0,a.useState)(!1),vn=()=>ln(!1),{overlayProps:Un,underlayProps:Za}=(0,Ui.Ir)({isDismissable:!0,isOpen:!0,onClose:vn},xt);return(0,a.useEffect)(()=>{lt.megaMenuOpen&&ln(!0)},[lt.megaMenuOpen]),a.createElement(Ui.Xj,null,a.createElement(uc.Z,{nodeRef:xt,in:tn,unmountOnExit:!0,classNames:Fe.overlay,timeout:{enter:xe,exit:0},onExited:J},a.createElement(Zl.MT,{contain:!0,autoFocus:!0},a.createElement("div",{"data-testid":"navbarmenu",ref:xt,...Un,...Zt,className:pe.container},a.createElement("div",{className:pe.mobileHeader},a.createElement(He.J,{name:"bars",size:"xl"}),a.createElement(mt.h,{"aria-label":"Close navigation menu",name:"times",onClick:vn,size:"xl",variant:"secondary"})),a.createElement("nav",{className:pe.content},a.createElement(mc.$,{showScrollIndicators:!0,hideHorizontalTrack:!0},a.createElement("ul",{className:pe.itemList},W.map(Na=>a.createElement(Ju,{link:Na,onClose:vn,activeItem:B,key:Na.text})))))))),a.createElement(uc.Z,{nodeRef:kt,in:tn,unmountOnExit:!0,classNames:Fe.backdrop,timeout:{enter:xe,exit:0}},a.createElement("div",{ref:kt,className:pe.backdrop,...Za})))}hc.displayName="NavBarMenu";const qu=(B,W)=>{const z=(W?Ur.$:Ur.$*2)+1;return{backdrop:(0,Z.css)({backdropFilter:"blur(1px)",backgroundColor:B.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:W?0:Ur.$,zIndex:B.zIndex.modalBackdrop,[B.breakpoints.up("md")]:{top:z}}),container:(0,Z.css)({display:"flex",bottom:0,flexDirection:"column",left:0,marginRight:B.spacing(1.5),right:0,zIndex:B.zIndex.modal,position:"fixed",top:W?0:Ur.$,backgroundColor:B.colors.background.primary,boxSizing:"content-box",flex:"1 1 0",[B.breakpoints.up("md")]:{borderRight:`1px solid ${B.colors.border.weak}`,right:"unset",top:z}}),content:(0,Z.css)({display:"flex",flexDirection:"column",flexGrow:1,minHeight:0}),mobileHeader:(0,Z.css)({display:"flex",justifyContent:"space-between",padding:B.spacing(1,1,1,2),borderBottom:`1px solid ${B.colors.border.weak}`,[B.breakpoints.up("md")]:{display:"none"}}),itemList:(0,Z.css)({display:"grid",gridAutoRows:`minmax(${B.spacing(6)}, auto)`,gridTemplateColumns:`minmax(${Xo}, auto)`,minWidth:Xo})}},Cg=(B,W)=>{const z={transitionDuration:`${W}ms`,transitionTimingFunction:B.transitions.easing.easeInOut,[B.breakpoints.down("md")]:{overflow:"hidden"}},J={...z,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},ce={...z,transitionProperty:"opacity"},pe={width:"100%",[B.breakpoints.up("md")]:{boxShadow:B.shadows.z3,width:Xo}},xe={boxShadow:"none",width:0},Fe={opacity:1},et={opacity:0};return{backdrop:{enter:(0,Z.css)(et),enterActive:(0,Z.css)(ce,Fe),enterDone:(0,Z.css)(Fe)},overlay:{enter:(0,Z.css)(xe),enterActive:(0,Z.css)(J,pe),enterDone:(0,Z.css)(pe)}}},_i=a.memo(({onClose:B,searchBarHidden:W})=>{const z=(0,yn.useSelector)(lt=>lt.navBarTree),J=(0,_e.l4)(),ce=em(J),pe=(0,sr.TH)(),Fe=(0,h.cloneDeep)(z).filter(lt=>lt.id!=="profile"&&lt.id!=="help").map(lt=>Go(lt,!0)),et=rc(Fe,pe.pathname);return a.createElement("div",{className:ce.menuWrapper},a.createElement(hc,{activeItem:et,navItems:Fe,onClose:B,searchBarHidden:W}))});_i.displayName="MegaMenu";const em=B=>({menuWrapper:(0,Z.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:B.zIndex.sidemenu})});var Gi=e(42879),eo=e(64319),Yi=e(14393);function tm({href:B,isCurrent:W,text:z}){const J=(0,_e.wW)(nm),ce=()=>{(0,$r.ff)("grafana_breadcrumb_clicked",{url:B})};return a.createElement("li",{className:J.breadcrumbWrapper},W?a.createElement("span",{"data-testid":Gi.z.Breadcrumbs.breadcrumb(z),className:J.breadcrumb,"aria-current":"page"},z):a.createElement(a.Fragment,null,a.createElement("a",{onClick:ce,"data-testid":Gi.z.Breadcrumbs.breadcrumb(z),className:(0,Z.cx)(J.breadcrumb,J.breadcrumbLink),href:B},z),a.createElement("div",{className:J.separator,"aria-hidden":!0},a.createElement(He.J,{name:"angle-right"}))))}const nm=B=>{const W=(0,Z.css)({color:B.colors.text.secondary});return{breadcrumb:(0,Z.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:B.spacing(0,.5),whiteSpace:"nowrap",color:B.colors.text.secondary}),breadcrumbLink:(0,Z.css)({color:B.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,Z.css)({alignItems:"center",color:B.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[B.breakpoints.down("md")]:{display:"none","&:nth-last-child(2)":{display:"flex",flexDirection:"row-reverse",[`.${W}`]:{transform:"rotate(180deg)"}},"&:first-child&:last-child":{display:"flex",[`.${W}`]:{display:"none"}}}}),separator:W}};function ji({breadcrumbs:B,className:W}){const z=(0,_e.wW)(am);return a.createElement("nav",{"aria-label":"Breadcrumbs",className:W},a.createElement("ol",{className:z.breadcrumbs},B.map((J,ce)=>a.createElement(tm,{...J,isCurrent:ce===B.length-1,key:ce}))))}const am=B=>({breadcrumbs:(0,Z.css)({display:"flex",alignItems:"center",flexWrap:"nowrap"})});var sm=e(67345),vc=e(9956);function rm({actions:B,searchBarHidden:W,sectionNav:z,pageNav:J,onToggleMegaMenu:ce,onToggleSearchBar:pe,onToggleKioskMode:xe}){const Fe=(0,yn.useSelector)(xt=>xt.navIndex)[Yi.Qz],et=(0,_e.wW)(om),lt=(0,sm.t)(z,J,Fe);return a.createElement("div",{"data-testid":Gi.z.NavToolbar.container,className:et.pageToolbar},a.createElement("div",{className:et.menuButton},a.createElement(mt.h,{name:"bars",tooltip:(0,$a.t)("navigation.toolbar.toggle-menu","Toggle menu"),tooltipPlacement:"bottom",size:"xl",onClick:ce})),a.createElement(ji,{breadcrumbs:lt,className:et.breadcrumbs}),a.createElement("div",{className:et.actions},B,B&&a.createElement(vc.M,null),W&&a.createElement(eo.h,{onClick:xe,narrow:!0,title:(0,$a.t)("navigation.toolbar.enable-kiosk","Enable kiosk mode"),icon:"monitor"}),a.createElement(eo.h,{onClick:pe,narrow:!0,title:(0,$a.t)("navigation.toolbar.toggle-search-bar","Toggle top search bar")},a.createElement(He.J,{name:W?"angle-down":"angle-up",size:"xl"}))))}const om=B=>({breadcrumbs:(0,Z.css)({maxWidth:"50%"}),pageToolbar:(0,Z.css)({height:Ur.$,display:"flex",padding:B.spacing(0,1,0,2),alignItems:"center"}),menuButton:(0,Z.css)({display:"flex",alignItems:"center",marginRight:B.spacing(1)}),actions:(0,Z.css)({label:"NavToolbar-actions",display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:B.spacing(1),flexGrow:1,gap:B.spacing(.5),minWidth:0,".body-drawer-open &":{display:"none"}})});function Ec({item:B,isSectionRoot:W=!1}){const z=(0,_e.wW)(im),J=B.children?.filter(et=>!et.hideFromTabs),ce=W&&Boolean(B.children[0].children?.length),pe=(0,Z.cx)({[z.link]:!0,[z.activeStyle]:B.active,[z.isSection]:Boolean(J?.length)||B.isSection,[z.isSectionRoot]:W,[z.noRootMargin]:ce});let xe=null;B.img?xe=a.createElement("img",{"data-testid":"section-image",className:z.sectionImg,src:B.img,alt:""}):B.icon&&(xe=a.createElement(He.J,{"data-testid":"section-icon",className:z.sectionImg,name:B.icon}));const Fe=()=>{(0,$r.ff)("grafana_navigation_item_clicked",{path:B.url??B.id,sectionNav:!0})};return a.createElement(a.Fragment,null,a.createElement("a",{onClick:Fe,href:B.url,className:pe,"aria-label":xn.wl.components.Tab.title(B.text),role:"tab","aria-selected":B.active},W&&xe,B.text,B.tabSuffix&&a.createElement(B.tabSuffix,{className:z.suffix})),J?.map((et,lt)=>a.createElement(Ec,{item:et,key:lt})))}const im=B=>({link:Z.css`
      padding: ${B.spacing(1,0,1,1.5)};
      display: flex;
      align-items: flex-start;
      border-radius: ${B.shape.radius.default};
      gap: ${B.spacing(1)};
      height: 100%;
      position: relative;
      color: ${B.colors.text.secondary};

      &:hover,
      &:focus {
        text-decoration: underline;
        z-index: 1;
      }
    `,activeStyle:Z.css`
      label: activeTabStyle;
      color: ${B.colors.text.primary};
      font-weight: ${B.typography.fontWeightMedium};
      background: ${B.colors.emphasize(B.colors.background.canvas,.03)};

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: ${B.shape.radius.default};
        background-image: ${B.colors.gradients.brandVertical};
      }
    `,suffix:Z.css`
      margin-left: ${B.spacing(1)};
    `,sectionImg:(0,Z.css)({margin:"6px 0",width:B.spacing(2)}),isSectionRoot:(0,Z.css)({fontSize:B.typography.h4.fontSize,marginTop:0,marginBottom:B.spacing(2),fontWeight:B.typography.fontWeightMedium}),isSection:(0,Z.css)({color:B.colors.text.primary,fontSize:B.typography.h5.fontSize,marginTop:B.spacing(2),fontWeight:B.typography.fontWeightMedium}),noRootMargin:(0,Z.css)({marginBottom:0})}),yc=({isExpanded:B,onClick:W})=>{const z=(0,_e.l4)(),J=lm(z);return a.createElement(q.zx,{title:"Toggle section navigation","aria-label":B?"Close section navigation":"Open section navigation",icon:"arrow-to-right",className:jl()(J.icon,{[J.iconExpanded]:B}),variant:"secondary",fill:"text",size:"md",onClick:W})};yc.displayName="SectionNavToggle";const lm=B=>({icon:(0,Z.css)({alignSelf:"center",margin:B.spacing(1,0),transform:"rotate(90deg)",transition:B.transitions.create("opacity"),color:B.colors.text.secondary,zIndex:1,[B.breakpoints.up("md")]:{alignSelf:"flex-start",position:"relative",left:0,margin:B.spacing(0,0,0,1),top:B.spacing(2),transform:"none"},"div:hover > &, &:focus":{opacity:1}}),iconExpanded:(0,Z.css)({rotate:"180deg",[B.breakpoints.up("md")]:{opacity:0,margin:0,position:"absolute",right:0,left:"initial"}})});function cm({model:B}){const W=(0,_e.wW)(Qi),{isExpanded:z,onToggleSectionNav:J}=dm();return Boolean(B.main?.children?.length)?a.createElement("div",{className:W.navContainer},a.createElement("nav",{className:(0,Z.cx)(W.nav,{[W.navExpanded]:z})},a.createElement(mc.$,{showScrollIndicators:!0},a.createElement("div",{className:W.items,role:"tablist"},a.createElement(Ec,{item:B.main,isSectionRoot:!0})))),a.createElement(yc,{isExpanded:z,onClick:J})):null}function dm(){const B=(0,_e.l4)(),W=window.matchMedia(`(max-width: ${B.breakpoints.values.lg}px)`).matches,[z,J]=(0,fc.Z)("grafana.sectionNav.expanded",!W),[ce,pe]=(0,a.useState)(!W&&z);return(0,a.useEffect)(()=>{const Fe=window.matchMedia(`(max-width: ${B.breakpoints.values.lg}px)`),et=lt=>pe(lt.matches?!1:z);return Fe.addEventListener("change",et),()=>Fe.removeEventListener("change",et)},[z,B.breakpoints.values.lg]),{isExpanded:ce,onToggleSectionNav:()=>{J(!ce),pe(!ce)}}}const Qi=B=>({navContainer:(0,Z.css)({display:"flex",flexDirection:"column",position:"relative",[B.breakpoints.up("md")]:{flexDirection:"row"}}),nav:(0,Z.css)({display:"flex",flexDirection:"column",background:B.colors.background.canvas,flexShrink:0,transition:B.transitions.create(["width","max-height"]),maxHeight:0,visibility:"hidden",[B.breakpoints.up("md")]:{width:0,maxHeight:"unset"}}),navExpanded:(0,Z.css)({maxHeight:"50vh",visibility:"visible",[B.breakpoints.up("md")]:{width:"250px",maxHeight:"unset"}}),items:(0,Z.css)({display:"flex",flexDirection:"column",padding:B.spacing(2,1,2,2),minWidth:"250px",[B.breakpoints.up("md")]:{padding:B.spacing(4.5,1,2,2)}})});var Zi=e(71698),Ji=e(95831),um=e(30979),mm=e(98699),fm=e(6981),Dg=e(27443),Mr=e(61744),dr=e(53764),kr=e(13724);function xg({feedUrl:B}){const W=(0,_e.wW)(bg),{state:z,getNews:J}=(0,kr.j)(B),[ce,pe]=(0,Dg.Z)();return(0,a.useEffect)(()=>{J()},[J]),z.loading||z.error?a.createElement("div",{className:W.innerWrapper},z.loading&&a.createElement(Mr.u,{text:"Loading..."}),z.error&&z.error.message):z.value?a.createElement("div",{ref:ce},pe.width>0&&z.value.map((xe,Fe)=>a.createElement(dr.S,{key:Fe,index:Fe,showImage:!0,width:pe.width,data:z.value})),a.createElement("div",{className:W.grot},a.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog"},a.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})))):null}const bg=B=>({innerWrapper:Z.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,grot:(0,Z.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:B.spacing(5,0),img:{width:"186px",height:"186px"}})});function Pc({className:B}){const[W,z]=(0,Ji.Z)(!1),J=(0,_e.wW)(Cc);return a.createElement(a.Fragment,null,a.createElement(eo.h,{className:B,onClick:z,iconOnly:!0,icon:"rss","aria-label":"News"}),W&&a.createElement(um.d,{title:a.createElement("div",{className:J.title},a.createElement(mm.H3,null,(0,$a.t)("news.title","Latest from the blog")),a.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog",className:J.grot},a.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})),a.createElement("div",{className:J.actions},a.createElement(q.zx,{icon:"times",variant:"secondary",fill:"text",onClick:z,"aria-label":xn.wl.components.Drawer.General.close}))),scrollableContent:!0,onClose:z,size:"md"},a.createElement(xg,{feedUrl:fm.k})))}const Cc=B=>({title:(0,Z.css)({display:"flex",alignItems:"center",justifyContent:"center",gap:B.spacing(2),borderBottom:`1px solid ${B.colors.border.weak}`}),grot:(0,Z.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:B.spacing(2,0),img:{width:"75px",height:"75px"}}),actions:(0,Z.css)({position:"absolute",right:B.spacing(1),top:B.spacing(2)})});function qo({breakpoint:B,onChange:W}){(0,a.useEffect)(()=>{const z=window.matchMedia(`(min-width: ${B}px)`),J=ce=>W(ce);return z.addEventListener("change",J),()=>z.removeEventListener("change",J)},[B,W])}var Xi=e(2183);function gm({orgs:B,onSelectChange:W}){const z=(0,_e.wW)(pm);return a.createElement(za.b,{"aria-label":"Change organization",variant:"secondary",buttonCss:z.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:B.map(J=>({label:J.name,description:J.role,value:J})),onChange:W,icon:"building"})}const pm=B=>({buttonCss:(0,Z.css)({color:B.colors.text.secondary,"&:hover":{color:B.colors.text.primary}})});function hm({orgs:B,onSelectChange:W}){const z=(0,_e.wW)(vm),{orgName:J,orgId:ce,orgRole:pe}=ts.Vt.user,[xe,Fe]=(0,a.useState)(()=>({label:J,value:{role:pe,orgId:ce,name:J},description:pe})),et=lt=>{Fe(lt),W(lt)};return a.createElement(se.Ph,{"aria-label":"Change organization",width:"auto",value:xe,prefix:a.createElement(He.J,{className:"prefix-icon",name:"building"}),className:z.select,options:B.map(lt=>({label:lt.name,description:lt.role,value:lt})),onChange:et})}const vm=B=>({select:(0,Z.css)({border:"none",background:"none",color:B.colors.text.secondary,"&:hover":{color:B.colors.text.primary,"& .prefix-icon":(0,Z.css)({color:B.colors.text.primary})}})});function Em(){const B=(0,_e.l4)(),W=(0,yn.useDispatch)(),z=(0,yn.useSelector)(et=>et.organization.userOrgs),J=et=>{et.value&&((0,Xi.Q$)(et.value.orgId),I.E1.push(`/?orgId=${et.value.orgId}`),window.location.reload())};(0,a.useEffect)(()=>{ts.Vt.isSignedIn&&W((0,Xi.JE)())},[W]);const ce=B.breakpoints.values.sm,[pe,xe]=(0,a.useState)(!window.matchMedia(`(min-width: ${ce}px)`).matches);if(qo({breakpoint:ce,onChange:et=>{xe(!et.matches)}}),z?.length<=1)return null;const Fe=pe?gm:hm;return a.createElement(Fe,{orgs:z,onSelectChange:J})}var qi=e(95130);function Dc(B){const W=[];for(const z of B)z.isCreateAction&&W.push(z),z.children&&W.push(...Dc(z.children));return W}const xc=({})=>{const B=(0,_e.wW)(bc),W=(0,_e.l4)(),z=(0,yn.useSelector)(xt=>xt.navBarTree),J=W.breakpoints.values.sm,[ce,pe]=(0,a.useState)(!1),[xe,Fe]=(0,a.useState)(!window.matchMedia(`(min-width: ${J}px)`).matches),et=(0,a.useMemo)(()=>Dc(z),[z]);qo({breakpoint:J,onChange:xt=>{Fe(!xt.matches)}});const lt=()=>a.createElement(qi.v,null,et.map((xt,kt)=>a.createElement(qi.v.Item,{key:kt,url:xt.url,label:xt.text,onClick:()=>(0,$r.ff)("grafana_menu_item_clicked",{url:xt.url,from:"quickadd"})})));return et.length>0?a.createElement(a.Fragment,null,a.createElement(Zi.L,{overlay:lt,placement:"bottom-end",onVisibleChange:pe},a.createElement(eo.h,{iconOnly:!0,icon:xe?"plus-circle":"plus",isOpen:xe?void 0:ce,"aria-label":"New"})),a.createElement(vc.M,{className:B.separator})):null},bc=B=>({buttonContent:(0,Z.css)({alignItems:"center",display:"flex"}),buttonText:(0,Z.css)({[B.breakpoints.down("md")]:{display:"none"}}),separator:(0,Z.css)({[B.breakpoints.down("sm")]:{display:"none"}})});function el(){const B=(0,sr.TH)(),W=(0,_e.wW)(ym),z=t.QX.sanitizeUrl(S.u.getUrlForPartial(B,{forceLogin:"true"}));return a.createElement("a",{className:W.link,href:z,target:"_self"},"Sign in")}const ym=B=>({link:(0,Z.css)({paddingRight:B.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var Mc=e(42044);function Sc({node:B}){const W=(0,_e.wW)(Pm),z=Go((0,h.cloneDeep)(B),!1);return z?a.createElement(qi.v,{header:a.createElement("div",{onClick:J=>J.stopPropagation(),className:W.header},a.createElement("div",null,z.text),z.subTitle&&a.createElement("div",{className:W.subTitle},z.subTitle))},z.children?.map(J=>J.url?a.createElement(Mc.s,{url:J.url,label:J.text,icon:J.icon,target:J.target,key:J.id}):a.createElement(Mc.s,{icon:J.icon,onClick:J.onClick,label:J.text,key:J.id}))):null}const Pm=B=>({header:(0,Z.css)({fontSize:B.typography.h5.fontSize,fontWeight:B.typography.h5.fontWeight,padding:B.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,Z.css)({color:B.colors.text.secondary,fontSize:B.typography.bodySmall.fontSize})});var Cm=e(85419),Dm=e(43226);function xm(){const B=(0,_e.l4)(),{query:W}=(0,xs.useKBar)(xe=>({kbarSearchQuery:xe.searchQuery,kbarIsOpen:xe.visualState===xs.VisualState.showing})),z=B.breakpoints.values.sm,[J,ce]=(0,a.useState)(!window.matchMedia(`(min-width: ${z}px)`).matches);qo({breakpoint:z,onChange:xe=>{ce(!xe.matches)}});const pe=()=>{W.toggle()};return J?a.createElement(eo.h,{iconOnly:!0,icon:"search","aria-label":(0,$a.t)("nav.search.placeholderCommandPalette","Search or jump to..."),onClick:pe}):a.createElement(bm,{onClick:pe})}function bm({onClick:B}){const W=(0,_e.wW)(Mm),z=(0,a.useMemo)(()=>(0,Dm.vl)(),[]);return a.createElement("div",{className:W.wrapper},a.createElement("div",{className:W.inputWrapper},a.createElement("div",{className:W.prefix},a.createElement(He.J,{name:"search"})),a.createElement("button",{className:W.fakeInput,onClick:B},(0,$a.t)("nav.search.placeholderCommandPalette","Search or jump to...")),a.createElement("div",{className:W.suffix},a.createElement(He.J,{name:"keyboard"}),a.createElement("span",{className:W.shortcut},z,"+k"))))}const Mm=B=>{const W=(0,ue.H)({theme:B});return{wrapper:W.wrapper,inputWrapper:W.inputWrapper,prefix:W.prefix,suffix:(0,Z.css)([W.suffix,{display:"flex",gap:B.spacing(.5)}]),shortcut:(0,Z.css)({fontSize:B.typography.bodySmall.fontSize}),fakeInput:(0,Z.css)([W.input,{textAlign:"left",paddingLeft:28,color:B.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":Z.css`
          ${(0,Cm.focusCss)(B)}
        `}]),button:(0,Z.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}};function ei({children:B,align:W="left"}){const z=(0,_e.wW)(Tc),ce=(0,_e.l4)().breakpoints.values.sm,[pe,xe]=(0,a.useState)(!window.matchMedia(`(min-width: ${ce}px)`).matches);return qo({breakpoint:ce,onChange:Fe=>{xe(!Fe.matches)}}),pe?a.createElement(a.Fragment,null,B):a.createElement("div",{"data-test-id":"wrapper",className:(0,Z.cx)(z.wrapper,{[z[W]]:W==="right"})},B)}const Tc=B=>({wrapper:(0,Z.css)({display:"flex",gap:B.spacing(.5),alignItems:"center"}),right:(0,Z.css)({justifyContent:"flex-end"}),left:(0,Z.css)({}),center:(0,Z.css)({})}),Oc=a.memo(function(){const W=(0,_e.wW)(ti),z=(0,yn.useSelector)(et=>et.navIndex),J=(0,sr.TH)(),ce=(0,h.cloneDeep)(z.help),pe=ce?$i(ce):void 0,xe=z.profile;let Fe=Q.vc.appSubUrl||"/";return!Q.vc.bootData.user.isSignedIn&&!Q.vc.anonymousEnabled&&(Fe=t.QX.sanitizeUrl(S.u.getUrlForPartial(J,{forceLogin:"true"}))),a.createElement("div",{className:W.layout},a.createElement(ei,null,a.createElement("a",{className:W.logo,href:Fe,title:"Go to home"},a.createElement(Do.c.MenuLogo,{className:W.img})),a.createElement(Em,null)),a.createElement(ei,null,a.createElement(xm,null)),a.createElement(ei,{align:"right"},a.createElement(xc,null),pe&&a.createElement(Zi.L,{overlay:()=>a.createElement(Sc,{node:pe}),placement:"bottom-end"},a.createElement(eo.h,{iconOnly:!0,icon:"question-circle","aria-label":"Help"})),a.createElement(Pc,{className:W.newsButton}),!ka.Vt.user.isSignedIn&&a.createElement(el,null),xe&&a.createElement(Zi.L,{overlay:()=>a.createElement(Sc,{node:xe}),placement:"bottom-end"},a.createElement(eo.h,{className:W.profileButton,imgSrc:ka.Vt.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"}))))}),ti=B=>({layout:(0,Z.css)({height:Ur.$,display:"flex",gap:B.spacing(1),alignItems:"center",padding:B.spacing(0,1,0,2),borderBottom:`1px solid ${B.colors.border.weak}`,justifyContent:"space-between",[B.breakpoints.up("sm")]:{gridTemplateColumns:"1.5fr minmax(240px, 1fr) 1.5fr",display:"grid",justifyContent:"flex-start"}}),img:(0,Z.css)({height:B.spacing(3),width:B.spacing(3)}),logo:(0,Z.css)({display:"flex"}),profileButton:(0,Z.css)({padding:B.spacing(0,.25),img:{borderRadius:"50%",height:"24px",marginRight:0,width:"24px"}}),newsButton:(0,Z.css)({[B.breakpoints.down("sm")]:{display:"none"}})});function Sm({children:B}){const W=(0,_e.wW)(Ic),{chrome:z}=(0,Xs.p)(),J=z.useState(),ce=J.searchBarHidden||J.kioskMode===yn.KioskMode.TV,pe=(0,Z.cx)({[W.content]:!0,[W.contentNoSearchBar]:ce,[W.contentChromeless]:J.chromeless});return a.createElement("main",{className:jl()("main-view",ce&&"main-view--search-bar-hidden")},!J.chromeless&&a.createElement("div",{className:(0,Z.cx)(W.topNav)},!ce&&a.createElement(Oc,null),a.createElement(rm,{searchBarHidden:ce,sectionNav:J.sectionNav.node,pageNav:J.pageNav,actions:J.actions,onToggleSearchBar:z.onToggleSearchBar,onToggleMegaMenu:z.onToggleMegaMenu,onToggleKioskMode:z.onToggleKioskMode})),a.createElement("div",{className:pe},a.createElement("div",{className:W.panes},J.layout===uo.Q.Standard&&J.sectionNav&&a.createElement(cm,{model:J.sectionNav}),a.createElement("div",{className:W.pageContainer},B))),!J.chromeless&&a.createElement(a.Fragment,null,a.createElement(_i,{searchBarHidden:ce,onClose:()=>z.setMegaMenu(!1)}),a.createElement(cc,null)))}const Ic=B=>{const W=B.isDark?"0 0.6px 1.5px rgb(0 0 0), 0 2px 4px rgb(0 0 0 / 40%), 0 5px 10px rgb(0 0 0 / 23%)":"0 4px 8px rgb(0 0 0 / 4%)";return{content:(0,Z.css)({display:"flex",flexDirection:"column",paddingTop:Ur.$*2,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,Z.css)({paddingTop:Ur.$}),contentChromeless:(0,Z.css)({paddingTop:0}),topNav:(0,Z.css)({display:"flex",position:"fixed",zIndex:B.zIndex.navbarFixed,left:0,right:0,boxShadow:W,background:B.colors.background.primary,flexDirection:"column",borderBottom:`1px solid ${B.colors.border.weak}`}),panes:(0,Z.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[B.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,Z.css)({label:"page-container",flexGrow:1,minHeight:0})}};var ni=e(659),Tm=e(98864),go=e(60499),Rc=e(49380);function Om({appNotification:B,onClearNotification:W}){const z=(0,_e.wW)(Im);(0,Rc.Z)(()=>{setTimeout(()=>{W(B.id)},yn.timeoutMap[B.severity])});const J=B.component||B.text||B.traceId;return a.createElement(xa.b,{severity:B.severity,title:B.title,onRemove:()=>W(B.id),elevated:!0},J&&a.createElement("div",{className:z.wrapper},a.createElement("span",null,B.component||B.text),B.traceId&&a.createElement("span",{className:z.trace},"Trace ID: ",B.traceId)))}function Im(B){return{wrapper:(0,Z.css)({display:"flex",flexDirection:"column"}),trace:(0,Z.css)({fontSize:B.typography.pxToRem(10)})}}function Ac(){const B=(0,yn.useSelector)(ce=>(0,Tm.vo)(ce.appNotifications)),W=(0,yn.useDispatch)(),z=(0,_e.wW)(Lc);(0,a.useEffect)(()=>{ps.Z.on(mo.SI.alertWarning,ce=>W((0,ni.$l)((0,go.ZR)(...ce)))),ps.Z.on(mo.SI.alertSuccess,ce=>W((0,ni.$l)((0,go.AT)(...ce)))),ps.Z.on(mo.SI.alertError,ce=>W((0,ni.$l)((0,go.t_)(...ce))))},[W]);const J=ce=>{W((0,ni.ad)(ce))};return a.createElement("div",{className:z.wrapper},a.createElement(Hn.wc,null,B.map((ce,pe)=>a.createElement(Om,{key:`${ce.id}-${pe}`,appNotification:ce,onClearNotification:J}))))}function Lc(B){return{wrapper:(0,Z.css)({label:"app-notifications-list",zIndex:B.zIndex.portal,minWidth:400,maxWidth:600,position:"fixed",right:6,top:88})}}var Rm=e(13426),Mg=e.n(Rm),Am=e(39198);function Bc({error:B,errorInfo:W}){const z=(0,sr.TH)(),J=B?.name==="ChunkLoadError";return(0,a.useEffect)(()=>{J&&z.search.indexOf("chunkNotFound")===-1&&(window.location.href=S.u.getUrlForPartial(z,{chunkNotFound:!0}))},[z,J]),a.createElement(zs.T,{navId:"error",layout:uo.Q.Canvas},a.createElement("div",{className:Lm()},J&&a.createElement("div",null,a.createElement("h2",null,"Unable to find application file"),a.createElement("br",null),a.createElement("h2",{className:"page-heading"},"Grafana has likely been updated. Please try reloading the page."),a.createElement("br",null),a.createElement("div",{className:"gf-form-group"},a.createElement(q.zx,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload()},"Reload")),a.createElement(Am.X,{title:"Error details",error:B,errorInfo:W})),!J&&a.createElement(Am.X,{title:"An unexpected error happened",error:B,errorInfo:W})))}const Lm=(0,ne.B)(()=>Z.css`
    width: 500px;
    margin: 64px auto;
  `);function Bm(){const B=(0,_e.wW)(Nm);return a.createElement("div",{className:B.loadingPage},a.createElement(Mr.u,{text:"Loading..."}))}const Nm=()=>({loadingPage:(0,Z.css)({height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function To(B){const{chrome:W,keybindings:z}=(0,Xs.p)();return W.setMatchedRoute(B.route),(0,a.useLayoutEffect)(()=>{z.clearAndInitGlobalBindings(B.route)},[z,B.route]),(0,a.useEffect)(()=>(Nc(B.route),Uc(),(0,I.GQ)("GrafanaRoute",!1,"Mounted",B.match),()=>{(0,I.GQ)("GrafanaRoute",!1,"Unmounted",B.route),Nc(B.route,!0)}),[]),(0,a.useEffect)(()=>{Uc(),(0,$r.sm)(),(0,I.GQ)("GrafanaRoute",!1,"Updated",B)}),(0,I.GQ)("GrafanaRoute",!1,"Rendered",B.route),a.createElement(Sl.SV,null,({error:J,errorInfo:ce})=>J?a.createElement(Bc,{error:J,errorInfo:ce}):a.createElement(a.Suspense,{fallback:a.createElement(Bm,null)},a.createElement(B.route.component,{...B,queryParams:(0,I.Ox)(B.location.search)})))}function Um(B){return B.pageClass?B.pageClass.split(" "):[]}function Nc(B,W=!1){for(const z of Um(B))W?document.body.classList.remove(z):document.body.classList.add(z)}function Uc(){document.body.classList.remove("sidemenu-open--xs");const B=document.getElementById("tooltip");B?.parentElement?.removeChild(B);const W=document.querySelectorAll(".tooltip");for(let z=0;z<W.length;z++){const J=W[z];J.parentElement?.removeChild(J)}for(const z of Mg().drops)z.destroy()}var tl=e(92973),wc=e(75118);class wm extends a.PureComponent{constructor(){super(...arguments),this.styles=Wm(n.v.theme2),this.state={},this.initListener=()=>{const W=(0,wc.gj)();W&&(this.subscription=W.getConnectionState().subscribe({next:z=>{this.setState({show:!z})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:W}=this.state;return W?!ts.Vt.isSignedIn||!n.v.liveEnabled||ts.Vt.user.orgRole===""?null:a.createElement("div",{className:this.styles.foot},a.createElement(xa.b,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})):null}}const Wm=(0,ne.B)(B=>({foot:Z.css`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:Z.css`
      max-width: 400px;
      margin: auto;
    `}));let Wc=[],nl=[];function Sg(B){Wc.push(B)}function Tg(B){nl.push(B)}class Fm extends a.Component{constructor(W){super(W),this.renderRoute=z=>{const J=z.roles?z.roles():[];return a.createElement(Ml.CompatRoute,{exact:z.exact===void 0?!0:z.exact,sensitive:z.sensitive===void 0?!1:z.sensitive,path:z.path,key:z.path,render:ce=>J?.length&&!J.some(pe=>ts.Vt.hasRole(pe))?a.createElement(sr.l_,{to:"/"}):a.createElement(To,{...ce,route:z})})},this.state={}}async componentDidMount(){await Ou(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return a.createElement(sr.rs,null,xu().map(W=>this.renderRoute(W)))}render(){const{app:W}=this.props,{ready:z}=this.state;(0,I.GQ)("AppWrapper",!1,"rendering");const J=ce=>{(0,$r.ff)("command_palette_action_selected",{actionId:ce.id,actionName:ce.name})};return a.createElement(es.Provider,{store:_a.h},a.createElement(Sl.z4,{style:"page"},a.createElement(Xs.h.Provider,{value:W.context},a.createElement(tl.f,{value:n.v.theme2},a.createElement(xs.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:J}}},a.createElement(co.$i,null,a.createElement(Ld.n,null),a.createElement("div",{className:"grafana-app"},a.createElement(sr.F0,{history:I.E1.getHistory()},a.createElement(Ml.CompatRouter,null,a.createElement(Sm,null,nl.map((ce,pe)=>a.createElement(ce,{key:pe.toString()})),a.createElement(Yl,null),a.createElement(Ac,null),z&&this.renderRoutes(),Wc.map((ce,pe)=>a.createElement(ce,{key:pe.toString()})))))),a.createElement(wm,null),a.createElement(co.Y0,null),a.createElement(Bd.lO,null)))))))}}var $m=e(81653),Fc=e(924),$c=e(58379);function Kc(B,W){if(B===W)return!0;if(!(B instanceof Object)||!(W instanceof Object))return!1;const z=Object.keys(B),J=z.length;for(let ce=0;ce<J;ce++)if(!(z[ce]in W))return!1;for(let ce=0;ce<J;ce++)if(B[z[ce]]!==W[z[ce]])return!1;return J===Object.keys(W).length}class Km{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.routeChangeHandled=!0,this.state=new Fc.X({chromeless:!0,sectionNav:{node:{text:(0,$a.t)("nav.home.title","Home")},main:{text:""}},searchBarHidden:$c.Z.getBool(this.searchBarStorageKey,!1),kioskMode:null,layout:uo.Q.Canvas}),this.onToggleMegaMenu=()=>{const W=!this.state.getValue().megaMenuOpen;(0,$r.ff)("grafana_toggle_menu_clicked",{action:W?"open":"close"}),this.update({megaMenuOpen:W})},this.setMegaMenu=W=>{this.update({megaMenuOpen:W})},this.onToggleSearchBar=()=>{const W=!this.state.getValue().searchBarHidden;$c.Z.set(this.searchBarStorageKey,W),this.update({searchBarHidden:W})},this.onToggleKioskMode=()=>{const W=this.getNextKioskMode();this.update({kioskMode:W}),I.E1.partial({kiosk:this.getKioskUrlValue(W)})}}setMatchedRoute(W){this.currentRoute!==W&&(this.currentRoute=W,this.routeChangeHandled=!1)}update(W){const z=this.state.getValue(),J={...z};this.routeChangeHandled||(J.actions=void 0,J.pageNav=void 0,J.sectionNav={node:{text:(0,$a.t)("nav.home.title","Home")},main:{text:""}},J.chromeless=this.currentRoute?.chromeless,J.layout=uo.Q.Standard,this.routeChangeHandled=!0),Object.assign(J,W),J.chromeless=J.kioskMode===yn.KioskMode.Full||this.currentRoute?.chromeless,this.ignoreStateUpdate(J,z)||this.state.next(J)}ignoreStateUpdate(W,z){return!!(Kc(W,z)||(W.sectionNav!==z.sectionNav||W.pageNav!==z.pageNav)&&W.actions===z.actions&&W.layout===z.layout&&ai(W.sectionNav.node,z.sectionNav.node)&&ai(W.pageNav,z.pageNav))}useState(){return(0,$m.Z)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),I.E1.partial({kiosk:null})}setKioskModeFromUrl(W){switch(W){case"tv":this.update({kioskMode:yn.KioskMode.TV});break;case"1":case!0:this.update({kioskMode:yn.KioskMode.Full})}}getKioskUrlValue(W){switch(W){case yn.KioskMode.TV:return"tv";case yn.KioskMode.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:W,searchBarHidden:z}=this.state.getValue();return z||W===yn.KioskMode.TV?(ps.Z.emit(mo.SI.alertSuccess,[(0,$a.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),yn.KioskMode.Full):W?null:yn.KioskMode.TV}}function ai(B,W){if(B===W)return!0;const z=B?.children?.find(ce=>ce.active),J=W?.children?.find(ce=>ce.active);return B?.text===W?.text&&B?.url===W?.url&&z?.url===J?.url}var Vc=e(52974);function zc({actions:B,children:W,info:z,pageNav:J,layout:ce,renderTitle:pe,subTitle:xe}){const Fe=(0,a.useContext)(Bi.v);return a.createElement(zs.T,{navModel:Fe.sectionNav,pageNav:J,layout:ce,actions:B,renderTitle:pe,info:z,subTitle:xe},a.createElement(zs.T.Contents,null,W))}var Vm=e(49187);function Hc(B){const W=B.target instanceof Element&&kc(B.target);if(!(B.ctrlKey||B.metaKey||B.defaultPrevented)&&W){let z=W.getAttribute("href");const J=W.getAttribute("target");if(z&&!J){const ce=Vm.Cj.parseKeyValue(z.split("?")[1]),pe=ce.orgId&&Number(ce.orgId)!==Q.vc.bootData.user.orgId;if((0,I.GQ)("utils",!1,"intercepting link click",B),B.preventDefault(),z=S.u.stripBaseFromUrl(z),z[0]!=="/"||pe)if(z.indexOf("://")>0||z.indexOf("mailto:")===0||pe){window.location.href=z;return}else if(z.indexOf("#")===0){window.location.hash=z;return}else z=`/${z}`;I.E1.push(z)}}}function kc(B){for(;B!==null&&B.tagName;){if(B.tagName.toUpperCase()==="A")return B;B=B.parentElement}return null}var zm=e(2476);function Hm(B,...W){const z=(0,es.connect)(...W)(B);return J=>a.createElement(z,{...J,store:_a.h})}function km(B,...W){const z=(0,es.connect)(...W)(B);return J=>a.createElement(es.Provider,{store:_a.h},a.createElement(z,{...J,store:_a.h}))}const _c=km(B=>a.createElement(a.Fragment,null,a.createElement(co.$i,{...B},a.createElement(co.Y0,null))));class Og{constructor(){this.reactModalRoot=document.body,this.reactModalNode=document.createElement("div"),this.root=(0,C.s)(this.reactModalNode),this.onReactModalDismiss=()=>{this.root.render(null),this.reactModalRoot.removeChild(this.reactModalNode)}}init(){ps.Z.subscribe(Ya.VJ,W=>this.showConfirmModal(W.payload)),ps.Z.subscribe(Ya.Dn,W=>this.showModalReact(W.payload)),ps.Z.subscribe(F.EK,W=>(0,zm.bY)(W.payload))}showModalReact(W){const{component:z,props:J}=W,ce={component:z,props:{...J,isOpen:!0,onDismiss:this.onReactModalDismiss}},pe=a.createElement((0,tl.E)(_c,n.v.theme2),ce);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(pe)}showConfirmModal(W){const{confirmText:z,onConfirm:J=()=>{},onDismiss:ce,text2:pe,altActionText:xe,onAltAction:Fe,noText:et,text:lt,text2htmlBind:xt,yesText:kt="Yes",icon:Zt,title:tn="Confirm",yesButtonVariant:ln}=W,vn={confirmText:kt,confirmButtonVariant:ln,confirmationText:z,icon:Zt,title:tn,body:lt,description:pe&&xt?t.QX.sanitize(pe):pe,isOpen:!0,dismissText:et,onConfirm:()=>{J(),this.onReactModalDismiss()},onDismiss:()=>{ce?.(),this.onReactModalDismiss()},onAlternative:Fe?()=>{Fe(),this.onReactModalDismiss()}:void 0,alternativeText:xe},Un={component:Zr.s,props:vn},Za=a.createElement((0,tl.E)(_c,n.v.theme2),Un);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(Za)}}var si=e(88383),_m=e(73289);function to(B,W=!1){return new Promise(z=>{const J=document.createElement("script");J.onload=z,J.src=B,J.async=W,document.head.appendChild(J)})}const al=(0,si.h)("EchoSrv"),Gc=al.logger;(0,_m.x)("echo",void 0,al);class Gm{constructor(W){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const z of this.backends)z.flush()},this.addBackend=z=>{Gc("Adding backend",!1,z),this.backends.push(z)},this.addEvent=(z,J)=>{const ce=this.getMeta(),pe={...z,meta:{...ce,...J}};for(const xe of this.backends)(xe.supportedEvents.length===0||xe.supportedEvents.indexOf(pe.type)>-1)&&xe.addEvent(pe);Gc("Reporting event",!1,pe)},this.getMeta=()=>({sessionId:"",userId:ts.Vt.user.id,userLogin:ts.Vt.user.login,userSignedIn:ts.Vt.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),path:window.location.pathname,url:window.location.href}),this.config={...this.config,...W},setInterval(this.flush,this.config.flushInterval)}}const Ym=(B,W)=>{(0,H.RP)().addEvent({type:H.ee.Performance,payload:{name:B,value:W}})},Ig=B=>captureException(B);class Rg{constructor(W){this.options=W,this.buffer=[],this.supportedEvents=[H.ee.Performance],this.addEvent=z=>{this.buffer.push(z.payload)},this.flush=()=>{this.buffer.length!==0&&(Fo.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])}}}var Ps=e(75552);class Yc{constructor(W){this.options=W,this.supportedEvents=[H.ee.Pageview,H.ee.Interaction],this.addEvent=ce=>{window.applicationInsights&&((0,Ps.Si)(ce)&&window.applicationInsights.trackPageView?.(),(0,Ps.fV)(ce)&&window.applicationInsights.trackEvent?.({name:ce.payload.interactionName,properties:ce.payload.properties}))},this.flush=()=>{};const z={config:{connectionString:W.connectionString,endpointUrl:W.endpointUrl}};to("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then(()=>{const ce=new window.Microsoft.ApplicationInsights.ApplicationInsights(z);window.applicationInsights=ce.loadAppInsights()})}}class Ag{constructor(W){this.options=W,this.supportedEvents=[H.ee.Pageview],this.googleAnalytics4SendManualPageViews=!1,this.addEvent=ce=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:ce.payload.page})},this.flush=()=>{};const z=`https://www.googletagmanager.com/gtag/js?id=${W.googleAnalyticsId}`;to(z,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const J={page_path:window.location.pathname};W.user&&(J.user_id=W.user.analytics.identifier),this.googleAnalytics4SendManualPageViews=W.googleAnalytics4SendManualPageViews,window.gtag("config",W.googleAnalyticsId,J)}}class Oo{constructor(W){this.options=W,this.supportedEvents=[H.ee.Pageview],this.trackedUserId=null,this.addEvent=ce=>{if(!window.ga)return;window.ga("set",{page:ce.payload.page}),window.ga("send","pageview");const{userSignedIn:pe,userId:xe}=ce.meta;pe&&xe!==this.trackedUserId&&(this.trackedUserId=xe,window.ga("set","userId",xe))},this.flush=()=>{};const z=`https://www.google-analytics.com/analytics${W.debug?"_debug":""}.js`;to(z);const J=window.ga=window.ga||function(){(J.q=J.q||[]).push(arguments)};J.l=+new Date,J("create",W.googleAnalyticsId,"auto"),J("set","anonymizeIp",!0)}}class jc{constructor(W){this.options=W,this.supportedEvents=[H.ee.Pageview,H.ee.Interaction,H.ee.ExperimentView],this.addEvent=pe=>{window.rudderanalytics&&((0,Ps.Si)(pe)&&window.rudderanalytics.page?.(),(0,Ps.fV)(pe)&&window.rudderanalytics.track?.(pe.payload.interactionName,pe.payload.properties),(0,Ps.mR)(pe)&&window.rudderanalytics.track?.("experiment_viewed",{experiment_id:pe.payload.experimentId,experiment_group:pe.payload.experimentGroup,experiment_variant:pe.payload.experimentVariant}))},this.flush=()=>{};const z=W.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";to(z);const J=window.rudderanalytics=[],ce=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let pe=0;pe<ce.length;pe++){const xe=ce[pe];J[xe]=function(Fe){return function(){J.push([Fe].concat(Array.prototype.slice.call(arguments)))}}(xe)}if(window.rudderanalytics?.load?.(W.writeKey,W.dataPlaneUrl,{configUrl:W.configUrl}),W.user){const{identifier:pe,intercomIdentifier:xe}=W.user.analytics,Fe={};xe&&(Fe.Intercom={user_hash:xe}),window.rudderanalytics?.identify?.(pe,{email:W.user.email,orgId:W.user.orgId,language:W.user.language},Fe)}}}var jm=e(13891),Qc=e(68372),Qm=e(1335),Zm=e(71568),Jm=e(2194),Xm=e(75078),qm=e(74128);class ef extends qm.d{constructor(){super(...arguments),this.name="EchoSrvTransport",this.version=n.v.buildInfo.version}send(W){(0,H.RP)().addEvent({type:H.ee.GrafanaJavascriptAgent,payload:W})}getIgnoreUrls(){return[]}}class tf{constructor(W){this.options=W,this.supportedEvents=[H.ee.GrafanaJavascriptAgent],this.addEvent=ce=>{this.transports.forEach(pe=>pe.send(ce.payload))},this.flush=()=>{};const z=[];this.transports=[],W.customEndpoint&&this.transports.push(new jm.V({url:W.customEndpoint,apiKey:W.apiKey})),W.errorInstrumentalizationEnabled&&z.push(new Qc.w),W.consoleInstrumentalizationEnabled&&z.push(new Qm.J),W.webVitalsInstrumentalizationEnabled&&z.push(new Zm.P);const J={globalObjectKey:W.globalObjectKey||"faro",preventGlobalExposure:W.preventGlobalExposure||!1,app:{version:W.buildInfo.version,environment:W.buildInfo.env},instrumentations:z,transports:[new ef],ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],metas:[...Jm.i,{session:{id:(Math.random()+1).toString(36).substring(2)}}]};this.faroInstance=(0,Xm.p)(J),W.user&&this.faroInstance.api.setUser({id:W.user.id,attributes:{orgId:String(W.user.orgId)||""}})}}var nf=e(37916),Zc=e(81534),Jc=e(34785),Xc=e(48606),af=e(51401),sf=e(51499),sl=e(76501),rf=e(28466),of=e(3469);const lf=3,cf=5e3;class rl{constructor(W){this.options=W,this._disabledUntil=new Date(Date.now()),this._buffer=(0,af.x)(W.maxConcurrentRequests??lf)}sendEvent(W){if(new Date(Date.now())<this._disabledUntil){const ce="Dropping frontend event due to too many requests.";return console.warn(ce),Promise.resolve({event:W,reason:ce,status:"skipped"})}const z={body:JSON.stringify({...W,level:W.level??(W.exception?Xc.z.Error:Xc.z.Info),exception:W.exception?{values:W.exception.values?.map(ce=>({...ce,value:df(ce.value)}))}:W.exception,breadcrumbs:W.breadcrumbs?.map(ce=>({...ce,timestamp:qc(ce.timestamp)})),timestamp:qc(W.timestamp)}),url:this.options.endpoint},J={body:z.body,headers:{"Content-Type":"application/json"},method:"POST",referrerPolicy:(0,sf.hv)()?"origin":""};return this.options.fetchParameters!==void 0&&Object.assign(J,this.options.fetchParameters),this._buffer.add(()=>new sl.cW((ce,pe)=>{window.fetch(z.url,J).then(xe=>{if(xe.status===200){ce({status:"success"});return}if(xe.status===429){const Fe=Date.now(),et=xe.headers.get("Retry-After");et?this._disabledUntil=new Date(Fe+(0,rf.JY)(et,Fe)):this._disabledUntil=new Date(Fe+cf),of.kg.warn(`Too many requests, backing off till: ${this._disabledUntil}`)}pe(xe)}).catch(pe)})).then(void 0,ce=>{if(ce.message==="Not adding Promise due to buffer limit reached."){const pe="Dropping frontend log event due to too many requests in flight.";return console.warn(pe),{event:W,reason:pe,status:"skipped"}}throw ce})}}function qc(B){return B?new Date(B*1e3).toISOString():new Date().toISOString()}function df(B){return typeof B=="string"||B===void 0?B:B&&typeof B=="object"&&Object.keys(B).length===0?"":String(B)}class ol extends Jc.d8{sendEvent(W){return(0,H.RP)().addEvent({type:H.ee.Sentry,payload:W}),Promise.resolve({status:"success",event:W})}sendSession(W){return Promise.resolve({status:"skipped"})}_sendRequest(W,z){throw new Error("should not happen")}}class ed{constructor(W){this.options=W,this.supportedEvents=[H.ee.Sentry],this.addEvent=J=>{this.transports.forEach(ce=>ce.sendEvent(J.payload))},this.flush=()=>{},this.transports=[],W.dsn&&this.transports.push(new Jc.Vh({dsn:W.dsn},fetch)),W.customEndpoint&&this.transports.push(new rl({endpoint:W.customEndpoint}));const z={release:W.buildInfo.version,environment:W.buildInfo.env,dsn:W.dsn||"https://examplePublicKey@o0.ingest.sentry.io/0",sampleRate:W.sampleRate,transport:ol,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"]};W.user&&(0,nf.av)({email:W.user.email,id:String(W.user.id)}),(0,Zc.S1)(z)}}var uf=e(35582),po=e.n(uf),Lg=e(76767),Bg=e(93013),td=e(55935),mf=e(63205),ff=e(53818);function gf(B){return()=>{const W=document.querySelectorAll(":hover");for(let z=W.length-1;z>0;z--){const J=W[z];J instanceof HTMLElement&&J.dataset?.panelid&&B(parseInt(J.dataset?.panelid,10))}}}class pf{constructor(W,z){this.locationService=W,this.chromeService=z}clearAndInitGlobalBindings(W){po().reset(),W.chromeless||(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g d",this.goToDashboards),this.bind("g e",this.goToExplore),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("t a",this.makeAbsoluteTime),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>Qo(!1)),this.bind("c r",()=>Qo(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const z=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(z&&z instanceof HTMLElement&&(z.nodeName==="INPUT"||z.nodeName==="TEXTAREA"||z.hasAttribute("data-slate-editor"))){z.blur();return}this.exit()}}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToDashboards(){this.locationService.push("/dashboards")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}makeAbsoluteTime(){ps.Z.publish(new Ya.QI)}showHelpModal(){ps.Z.publish(new Ya.Dn({component:_o.B}))}exit(){const W=this.locationService.getSearchObject();if(W.editview){this.locationService.partial({editview:null,editIndex:null});return}if(W.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(W.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(W.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:z}=this.chromeService.state.getValue();z&&this.chromeService.exitKioskMode(),W.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(W,z){po().bind(W,J=>{J.preventDefault(),J.stopPropagation(),J.returnValue=!1,z.call(this)},"keydown")}bindGlobal(W,z){po().bindGlobal(W,J=>{J.preventDefault(),J.stopPropagation(),J.returnValue=!1,z.call(this)},"keydown")}unbind(W,z){po().unbind(W,z)}bindWithPanelId(W,z){this.bind(W,gf(z))}setupTimeRangeBindings(W=!0){this.bind("t z",()=>{ps.Z.publish(new Ya.p8({scale:2,updateUrl:W}))}),this.bind("ctrl+z",()=>{ps.Z.publish(new Ya.p8({scale:2,updateUrl:W}))}),this.bind("t left",()=>{ps.Z.publish(new Ya.Qt({direction:Ya.Im.Left,updateUrl:W}))}),this.bind("t right",()=>{ps.Z.publish(new Ya.Qt({direction:Ya.Im.Right,updateUrl:W}))})}setupDashboardBindings(W){this.bind("mod+o",()=>{W.graphTooltip=(W.graphTooltip+1)%3,W.events.publish(new mo.oi),W.startRefresh()}),this.bind("mod+s",()=>{W.meta.canSave&&ps.Z.publish(new Ya.Dn({component:mf.d,props:{dashboard:W}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",z=>{if(W.canEditPanelById(z)){const J=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:J?null:z})}}),this.bindWithPanelId("v",z=>{const J=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:J?null:z})}),this.bindWithPanelId("p l",z=>{const J=W.getPanelById(z),ce={...J.options};ce.legend.showLegend?ce.legend.showLegend=!1:ce.legend.showLegend=!0,J.updateOptions(ce)}),this.bindWithPanelId("i",z=>{this.locationService.partial({inspect:z})}),ka.Vt.hasAccessToExplore()&&this.bindWithPanelId("x",async z=>{const J=W.getPanelById(z),ce=await(0,td.H6)({panel:J,datasourceSrv:(0,m.ak)(),timeSrv:(0,fo.$t)()});if(ce){const pe=S.u.stripBaseFromUrl(ce);pe&&this.locationService.push(pe)}}),this.bindWithPanelId("p r",z=>{W.canEditPanelById(z)&&!(W.panelInView||W.panelInEdit)&&ps.Z.publish(new Ya.Eb(z))}),this.bindWithPanelId("p d",z=>{if(W.canEditPanelById(z)){const J=W.getPanelInfoById(z).index;W.duplicatePanel(W.panels[J])}}),this.bindWithPanelId("p s",z=>{const J=W.getPanelInfoById(z);ps.Z.publish(new Ya.Dn({component:ff.ShareModal,props:{dashboard:W,panel:J?.panel}}))}),this.bind("d l",()=>{W.toggleLegendsForAll()}),this.bind("d shift+c",()=>{W.collapseRows()}),this.bind("d shift+e",()=>{W.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{W.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const J=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+J})}}async function Ng(){if(window.location.search.indexOf("why-render")!==-1){const{default:B}=await e.e(2182).then(e.t.bind(e,62182,23));B(React,{trackAllPureComponents:!0})}}var hf=e(6911),vf=e(53747),Ef=e(21056),yf=e(88214),Io=e(40333),Pf=e(21237),Cf=e(89730),Df=e(77410);const xf=()=>new Df.q(new URL(e.p+e.u(8186),e.b));var bf=e(84946),nd=e(53704);const Mf=B=>new bf.y(W=>{const z=B.subscribe(Io.sj(J=>{W.next(J)}),Io.sj(J=>{W.error(J)}),Io.sj(()=>{W.complete()}));return{unsubscribe:()=>{z.then(J=>J.unsubscribe())}}}),il=B=>(0,As.D)(B).pipe((0,nd.w)(W=>Mf(W)));class Sf{constructor(W){this.getConnectionState=()=>il(this.centrifugeWorker.getConnectionState()),this.getDataStream=z=>il(this.centrifugeWorker.getDataStream(z)).pipe((0,Pf.Q)(Cf.z)),this.getQueryData=async z=>{const J=JSON.parse(JSON.stringify(z));return this.centrifugeWorker.getQueryData(J)},this.getPresence=z=>this.centrifugeWorker.getPresence(z),this.getStream=z=>il(this.centrifugeWorker.getStream(z)),this.centrifugeWorker=Io.Ud(xf()),this.centrifugeWorker.initialize(W,Io.sj(W.dataStreamSubscriberReadiness))}}var ri=e(8891),Tf=e(32689),ll=e(22069),ad=e(28625),oi=e(14035);class Of{constructor(W){this.deps=W,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=z=>{let J;const ce=pe=>{const xe=pe.data[0];if(!J&&!(0,oi.A1)(xe,oi.g0.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${xe?.type}`);return}switch(xe.type){case oi.g0.FullFrame:{J=ad.Av.deserialize(xe.frame);return}case oi.g0.NewValuesSameSchema:{J.pushNewValues(xe.values);return}}};return this.deps.centrifugeSrv.getDataStream(z).pipe((0,Qt.U)(pe=>(ce(pe),{...pe,data:[J??ad.Av.empty()]})))},this.getStream=z=>this.deps.centrifugeSrv.getStream(z),this.getQueryData=z=>(0,As.D)(this.deps.centrifugeSrv.getQueryData(z)).pipe((0,nd.w)(J=>{const ce=(0,Tf.z1)(J,z.request.targets);return ce.data?.length&&ce.data.find(xe=>xe.meta?.channel)?(0,ll.B9)(ce,z.request,ll.PI):(0,In.of)(ce)})),this.publish=async(z,J)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,ri.Aj)(z),data:J}),this.getPresence=z=>this.deps.centrifugeSrv.getPresence(z)}}function If(){const B={appUrl:`${window.location.origin}${n.v.appSubUrl}`,orgId:ts.Vt.user.orgId,orgRole:ts.Vt.user.orgRole,liveEnabled:n.v.liveEnabled,dataStreamSubscriberReadiness:hf.A.ok.asObservable(),grafanaAuthToken:(0,vf.v)()},W=n.v.featureToggles["live-service-web-worker"]?new Sf(B):new Ef.R(B);(0,wc.cA)(new Of({centrifugeSrv:W,backendSrv:(0,O.i)()}))}function Rf(){return getGrafanaLiveSrv()}var Ug=e(51927),Af=e(98141);const Sr=2;class wg{constructor(){this.extensionsByExtensionPoint={}}allowedToAdd({extensionPointId:W,title:z}){return this.countByExtensionPoint(W)>=Sr?!1:(this.addExtensionToExtensionPoint(W,z),!0)}addExtensionToExtensionPoint(W,z){this.extensionsByExtensionPoint[W]||(this.extensionsByExtensionPoint[W]=[]),this.extensionsByExtensionPoint[W].push(z)}countByExtensionPoint(W){return this.extensionsByExtensionPoint[W]?.length??0}getExtensionTitlesByExtensionPoint(W){return this.extensionsByExtensionPoint[W]}}var sd=e(22623);function no(B){console.warn(`[Plugin Extensions] ${B}`)}function ii(B){return typeof B=="object"&&"type"in B&&B.type===sd.D.link}function Wg(B,W=""){return(...z)=>{try{return B(...z)}catch(J){J instanceof Error&&console.warn(`${W}${J.message}`)}}}function Lf(B){return{openModal:({title:z,body:J})=>{ps.Z.publish(new Ya.Dn({component:rd({title:z,body:J})}))},context:B}}const rd=({title:B,body:W})=>({onDismiss:J})=>a.createElement(Si.u,{title:B,isOpen:!0,onDismiss:J,onClickBackdrop:J},a.createElement(W,{onDismiss:J}));function li(B,W=new Map){if(!B||typeof B!="object"||Object.isFrozen(B))return B;const z=Array.isArray(B)?[...B]:{...B};if(W.has(B))return W.get(B);W.set(B,z);const J=Reflect.ownKeys(z);for(const ce of J){const pe=Array.isArray(z)?z[Number(ce)]:z[ce];pe&&(typeof pe=="object"||typeof pe=="function")&&(Array.isArray(z)?z[Number(ce)]=li(pe,W):z[ce]=li(pe,W))}return Object.freeze(z)}function cl(B,W){const z=`${B}${W.extensionPointId}${W.title}`;return Array.from(z).reduce((J,ce)=>Math.imul(31,J)+ce.charCodeAt(0)|0,0).toString()}function hp(B,W="extension is not a link extension"){if(!isPluginExtensionLink(B))throw new Error(W)}function Fg(B,W="extension is not a command extension config"){if(!isPluginExtensionLinkConfig(B))throw new Error(W)}function ci(B,W){if(!wf(B,W))throw new Error(`Invalid link extension. The "path" is required and should start with "/a/${B}/" (currently: "${W}"). Skipping the extension.`)}function Bf(B){if(!od(B))throw new Error(`Invalid extension "${B.title}". The extensionPointId should start with either "grafana/" or "plugins/" (currently: "${B.extensionPointId}"). Skipping the extension.`)}function Nf(B){if(!Wf(B))throw new Error(`Invalid extension "${B.title}". The "configure" property must be a function. Skipping the extension.`)}function dl(B,W){for(const z of W)if(!Ff(B[z]))throw new Error(`Invalid extension "${B.title}". Property "${z}" must be a string and cannot be empty. Skipping the extension.`)}function Uf(B,W="The provided value is a Promise."){if(ld(B))throw new Error(W)}function wf(B,W){return Boolean(typeof W=="string"&&W.length>0&&W.startsWith(`/a/${B}/`))}function od(B){return Boolean(B.extensionPointId?.startsWith("grafana/")||B.extensionPointId?.startsWith("plugins/"))}function Wf(B){return B.configure?typeof B.configure=="function":!0}function Ff(B){return typeof B=="string"&&B.length>0}function id(B,W){try{if(dl(W,["title","description","extensionPointId"]),Bf(W),Nf(W),ii(W)){if(!W.path&&!W.onClick)return no(`Invalid extension "${W.title}". Either "path" or "onClick" is required.`),!1;W.path&&ci(B,W.path)}return!0}catch(z){return z instanceof Error&&no(z.message),!1}}function ld(B){return B instanceof Promise||typeof B=="object"&&B!==null&&"then"in B&&"catch"in B}function cd(B){const W={},z=new wg;for(const{pluginId:J,extensionConfigs:ce,error:pe}of B){if(pe){no(`"${J}" plugin failed to load, skip registering its extensions.`);continue}for(const xe of ce){const{extensionPointId:Fe}=xe;if(!z.allowedToAdd(xe)){no(`"${J}" plugin has reached the limit of ${Sr} for "${Fe}", skip registering extension "${xe.title}".`);continue}if(!xe||!id(J,xe))continue;let et={config:xe,pluginId:J};Array.isArray(W[Fe])?W[Fe].push(et):W[Fe]=[et]}}return li(W)}const $f=({context:B,extensionPointId:W,registry:z})=>{const J=B?li(B):{},ce=z[W]??[],pe=[];for(const xe of ce)try{const Fe=xe.config;if(ii(Fe)){const et=Kf(xe.pluginId,Fe,J);if(Fe.configure&&et===void 0)continue;const lt={id:cl(xe.pluginId,Fe),type:sd.D.link,pluginId:xe.pluginId,onClick:$g(Fe,J),title:et?.title||Fe.title,description:et?.description||Fe.description,path:et?.path||Fe.path};pe.push(lt)}}catch(Fe){Fe instanceof Error&&no(Fe.message)}return{extensions:pe}};function Kf(B,W,z){try{const J=W.configure?.(z);if(J===void 0)return;let{title:ce=W.title,description:pe=W.description,path:xe=W.path,...Fe}=J;if(Uf(J,`The configure() function for "${W.title}" returned a promise, skipping updates.`),xe&&ci(B,xe),dl({title:ce,description:pe},["title","description"]),Object.keys(Fe).length>0)throw new Error(`Invalid extension "${W.title}". Trying to override not-allowed properties: ${Object.keys(Fe).join(", ")}`);return{title:ce,description:pe,path:xe}}catch(J){J instanceof Error&&no(J.message);return}}function $g(B,W){const{onClick:z}=B;if(z)return function(ce){try{const pe=z(ce,Lf(W));ld(pe)&&pe.catch(xe=>{xe instanceof Error&&no(xe.message)})}catch(pe){pe instanceof Error&&no(pe.message)}}}var Vf=e(38490);async function Kg(B={}){const W=Object.values(B).filter(z=>z.preload);return Promise.all(W.map(Vg))}async function Vg(B){const{path:W,version:z,id:J}=B;try{const{plugin:ce}=await Li.N$(W,z),{extensionConfigs:pe=[]}=ce;return{pluginId:J,extensionConfigs:pe}}catch(ce){return console.error(`[Plugins] Failed to preload plugin: ${W} (version: ${z})`,ce),{pluginId:J,extensionConfigs:[],error:ce}}}var zg=e(46528),Hg=e(31129),zf=e(206),Hf=e(47891),kg=e(49003),_g=e(59584),dd=e(75434);class Gg{constructor(){this.subject=new zg.t(1)}get(){return this.subject.asObservable()}run(W){const{queries:z,timezone:J,datasource:ce,panelId:pe,app:xe,dashboardUID:Fe,timeRange:et,timeInfo:lt,cacheTimeout:xt,queryCachingTTL:kt,maxDataPoints:Zt,scopedVars:tn,minInterval:ln}=W;this.subscription&&this.subscription.unsubscribe();const vn={app:xe??zf.zj.Unknown,requestId:(0,kg.t)(),timezone:J,panelId:pe,dashboardUID:Fe,range:et,timeInfo:lt,interval:"",intervalMs:0,targets:(0,h.cloneDeep)(z),maxDataPoints:Zt,scopedVars:tn||{},cacheTimeout:xt,queryCachingTTL:kt,startTime:Date.now()};vn.rangeRaw=et.raw,(0,As.D)(Yg(ce,vn.scopedVars)).pipe((0,Hg.P)()).subscribe({next:Un=>{vn.targets=vn.targets.map(Ja=>(Ja.datasource||(Ja.datasource=Un.getRef()),Ja));const Za=ln?(0,bo.J)().replace(ln,vn.scopedVars):Un.interval,Na=Hf.calculateInterval(et,Zt,Za);vn.scopedVars=Object.assign({},vn.scopedVars,{__interval:{text:Na.interval,value:Na.interval},__interval_ms:{text:Na.intervalMs.toString(),value:Na.intervalMs}}),vn.interval=Na.interval,vn.intervalMs=Na.intervalMs,this.subscription=(0,dd.v7)(Un,vn).subscribe({next:Ja=>{const qs=(0,dn.zR)(Ja,this.lastResult);this.lastResult=(0,_g.C)(qs,this.lastResult),this.subject.next(this.lastResult)}})},error:Un=>console.error("PanelQueryRunner Error",Un)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===Ss.Gu.Loading&&this.subject.next({...this.lastResult,state:Ss.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function Yg(B,W){return B&&"query"in B?B:(0,m.ak)().get(B,W)}function jg(){window.grafanaRuntime={getDashboardSaveModel:()=>{const B=(0,p.h4)().getCurrent();if(B)return B.getSaveModelClone()},getDashboardTimeRange:()=>{const B=(0,fo.$t)().timeRange();return{from:B.from.valueOf(),to:B.to.valueOf(),raw:B.raw}},getPanelData:()=>{const B=(0,p.h4)().getCurrent();if(B)return B.panels.reduce((W,z)=>(W[z.id]=z.getQueryRunner().getLastResult(),W),{})}}}var di=e(22323),kn=e(92624),kf=e(73446),_f=e(53117),wr=e(41624),_r=e(50678);function Gf(B){return B.extended&&"infoText"in B.extended?B.extended:null}function Yf(B){return B.extended&&"dataSourceTypes"in B.extended?B.extended:null}function ud(B){return B.extended&&"dataSource"in B.extended?B.extended:null}var Ba=e(87095),ui=e(30002);const Qg=(B,W)=>{const{rootStateKey:z}=W.variable;if(!z)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:Gf(_r.PF)};const{editor:J}=(0,Ba.AE)(z,B);return{extended:Gf(J)}},Zg={changeVariableDatasource:ui.Z$},Jg=(0,es.connect)(Qg,Zg);class Xg extends a.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=W=>{this.props.changeVariableDatasource((0,kn.yQ)(this.props.variable),(0,kf.iU)(W))}}componentDidMount(){const{rootStateKey:W}=this.props.variable;if(!W){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:W,extended:z}=this.props,J=z?.infoText??null;return a.createElement(a.Fragment,null,a.createElement(wr.e,null,"Ad-hoc options"),a.createElement(ua.g,{label:"Data source",htmlFor:"data-source-picker"},a.createElement(_f.q,{current:W.datasource,onChange:this.onDatasourceChanged,width:30,noDefault:!0})),J?a.createElement(xa.b,{title:J,severity:"info"}):null)}}const jf=Jg(Xg);var Qf=e(44847);const Zf={addFilter:ui.KJ,removeFilter:ui.ku,changeFilter:ui.M6},Jf=(0,es.connect)(null,Zf);class Xf extends a.PureComponent{constructor(){super(...arguments),this.addFilter=W=>{this.props.addFilter((0,kn.yQ)(this.props.variable),W)},this.removeFilter=W=>{this.props.removeFilter((0,kn.yQ)(this.props.variable),W)},this.changeFilter=(W,z)=>{this.props.changeFilter((0,kn.yQ)(this.props.variable),{index:W,filter:z})}}render(){const{filters:W,datasource:z}=this.props.variable;return a.createElement(Qf.F,{datasource:z,filters:W,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const md=Jf(Xf);md.displayName="AdHocPicker";var fd=e(79134);const qf=B=>B.map(W=>ep(W).map(gd).join("|")),eg=B=>{if((0,h.isArray)(B))return B.map(tg).filter(tp);const W=tg(B);return W===null?[]:[W]};function gd(B){return B==null?"":/\|/g[Symbol.replace](B,"__gfp__")}function qg(B){return B==null?"":/__gfp__/g[Symbol.replace](B,"|")}function ep(B){return[B.key,B.operator,B.value]}function tg(B){if(!(0,h.isString)(B)||B.length===0)return null;const W=B.split("|").map(qg);return{key:W[0],operator:W[1],value:W[2],condition:""}}function tp(B){return B!==null&&(0,h.isString)(B.value)}const ng=async()=>{},np=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:fd.Js,reducer:fd.jo,picker:md,editor:jf,dependsOn:()=>!1,setValue:ng,setValueFromUrl:async(B,W)=>{const z=eg(W);await(0,_a.WI)((0,ui.Ue)((0,kn.yQ)(B),z))},updateOptions:ng,getSaveModel:B=>{const{index:W,id:z,state:J,global:ce,rootStateKey:pe,...xe}=(0,h.cloneDeep)(B);return xe},getValueForUrl:B=>{const W=B?.filters??[];return qf(W)}});var ag=e(83829),ap=e(94437),_s=e(82253),Ga=e(15546),Ea=e(91017),pd=e(85850),ul=e(12877),mi=e(90801),sg=e(68140),N=e(82615),X=e(59724),te=e(86318),ge=e(44288),Ee=e(75849),Ce=e(10672),Oe=e(85803),We=e(7240),ze=e(63510);const rt={...Ce.Eg,type:"query",datasource:null,query:"",regex:"",sort:Ce.$U.disabled,refresh:Ce.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},st=(B,W)=>{if(W===Ce.$U.disabled)return B;const z=Math.ceil(W/2),J=W%2===0;return z===1?B=(0,h.sortBy)(B,"text"):z===2?B=(0,h.sortBy)(B,ce=>{if(!ce.text)return-1;const pe=ce.text.match(/.*?(\d+).*/);return!pe||pe.length<2?-1:parseInt(pe[1],10)}):z===3&&(B=(0,h.sortBy)(B,ce=>(0,h.toLower)(ce.text))),J&&(B=B.reverse()),B},Ct=(B,W)=>{const z=[];let J=null;W.lastIndex=0;do J=W.exec(B),J&&z.push(J);while(W.global&&J&&J[0]!==""&&J[0]!==void 0);return z},Ot=(B,W,z)=>{let J,ce=[];B&&(J=(0,Qa.jO)(B));for(let pe=0;pe<z.length;pe++){const xe=z[pe];let Fe=xe.text===void 0||xe.text===null?xe.value:xe.text,et=xe.value===void 0||xe.value===null?xe.text:xe.value;if((0,h.isNumber)(et)&&(et=et.toString()),(0,h.isNumber)(Fe)&&(Fe=Fe.toString()),J){const lt=Ct(et,J);if(!lt.length)continue;const xt=lt.find(ln=>ln.groups&&ln.groups.value),kt=lt.find(ln=>ln.groups&&ln.groups.text),Zt=lt.find(ln=>ln.length>1),tn=lt.length>1&&Zt;if(xt||kt)et=xt?.groups?.value??kt?.groups?.text,Fe=kt?.groups?.text??xt?.groups?.value;else if(tn){for(let ln=0;ln<lt.length;ln++){const vn=lt[ln];ce.push({text:vn[1],value:vn[1],selected:!1})}continue}else Zt&&(Fe=Zt[1],et=Zt[1])}ce.push({text:Fe,value:et,selected:!1})}return ce=(0,h.uniqBy)(ce,"value"),st(ce,W)},vt=(0,Br.oM)({name:"templating/query",initialState:ze.s,reducers:{updateVariableOptions:(B,W)=>{const{results:z,templatedRegex:J}=W.payload.data,ce=(0,Ba.ir)(B,W.payload.id);if(ce.type!=="query")return;const{includeAll:pe,sort:xe}=ce,Fe=Ot(J,xe,z);pe&&Fe.unshift({text:_s.xk,value:_s.r2,selected:!1}),Fe.length||Fe.push({text:_s.BH,value:_s.QX,isNone:!0,selected:!1}),ce.options=Fe}}}),Ut=vt.reducer,{updateVariableOptions:Gt}=vt.actions;function Wt(){return B=>B.pipe((0,Qt.U)(W=>{const z=W.series;if(!z||!z.length)return[];if(zt(z))return z;const J=(0,dn.F9)(z),ce=[];let pe=-1,xe=-1,Fe=-1,et=-1;for(const lt of J)for(let xt=0;xt<lt.fields.length;xt++){const kt=lt.fields[xt],Zt=(0,fe.CZ)(kt,lt,z).toLowerCase();kt.type===oe.fS.string&&Fe===-1&&(Fe=xt),Zt==="text"&&kt.type===oe.fS.string&&xe===-1&&(xe=xt),Zt==="value"&&kt.type===oe.fS.string&&pe===-1&&(pe=xt),Zt==="expandable"&&(kt.type===oe.fS.boolean||kt.type===oe.fS.number)&&et===-1&&(et=xt)}if(Fe===-1)throw new Error("Couldn't find any field of type string in the results.");for(const lt of z)for(let xt=0;xt<lt.length;xt++){const kt=et!==-1?lt.fields[et].values[xt]:void 0,Zt=lt.fields[Fe].values[xt],tn=xe!==-1?lt.fields[xe].values[xt]:null,ln=pe!==-1?lt.fields[pe].values[xt]:null;if(pe===-1&&xe===-1){ce.push({text:Zt,value:Zt,expandable:kt});continue}if(pe===-1&&xe!==-1){ce.push({text:tn,value:tn,expandable:kt});continue}if(pe!==-1&&xe===-1){ce.push({text:ln,value:ln,expandable:kt});continue}ce.push({text:tn,value:ln,expandable:kt})}return ce}))}function Mt(B){return W=>W.pipe((0,Qt.U)(z=>{const{variable:J,dispatch:ce,getTemplatedRegexFunc:pe}=B;if(!J.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const xe=pe(J),Fe=(0,kn.Y6)(J,{results:z,templatedRegex:xe});ce((0,We.mb)(J.rootStateKey,Gt(Fe)))}))}function Yt(B){return W=>W.pipe((0,ss.z)(()=>{const{dispatch:z,variable:J,searchFilter:ce}=B;return ce?(0,In.of)():(0,As.D)(z((0,Oe.xQ)((0,kn.yQ)(J))))}))}function zt(B){if(!B)return!1;if(!B.length)return!0;const W=B[0];if((0,dn.aY)(W))return!1;for(const z in W){if(!W.hasOwnProperty(z)||W[z]!==null&&typeof W[z]!="string"&&typeof W[z]!="number")continue;const J=z.toLowerCase();if(J==="text"||J==="value")return!0}return!1}var Xt=e(48976);class cn{constructor(){this.runners=[new on,new mn,new Mn,new Bn]}getRunnerForDatasource(W){const z=this.runners.find(J=>J.canRun(W));if(z)return z;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class on{constructor(){this.type=Xt.j2.Legacy}canRun(W){return(0,Ga.R)(W)}getTarget({datasource:W,variable:z}){if((0,Ga.R)(W))return z.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:W,variable:z,searchFilter:J,timeSrv:ce},pe){if(!(0,Ga.R)(W))return Rn();const xe=(0,kn.AQ)(z,J,ce);return(0,As.D)(W.metricFindQuery(z.query,xe)).pipe((0,ss.z)(Fe=>{if(!Fe||!Fe.length)return Rn();const et=Fe;return(0,In.of)({series:et,state:Ss.Gu.Done,timeRange:xe.range})}))}}class mn{constructor(){this.type=Xt.j2.Standard}canRun(W){return(0,Ga.Ju)(W)}getTarget({datasource:W,variable:z}){if((0,Ga.Ju)(W))return W.variables.toDataQuery(z.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:W,runRequest:z},J){return(0,Ga.Ju)(W)?W.variables.query?z(W,J,W.variables.query):z(W,J):Rn()}}class Mn{constructor(){this.type=Xt.j2.Custom}canRun(W){return(0,Ga.d7)(W)}getTarget({datasource:W,variable:z}){if((0,Ga.d7)(W))return z.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:W,runRequest:z},J){return(0,Ga.d7)(W)?z(W,J,W.variables.query):Rn()}}const Pn="variable-query";class Bn{constructor(){this.type=Xt.j2.Datasource}canRun(W){return(0,Ga.X7)(W)}getTarget({datasource:W,variable:z}){if((0,Ga.X7)(W))return{...z.query,refId:z.query.refId??Pn};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:W,runRequest:z},J){return(0,Ga.X7)(W)?z(W,J):Rn()}}function Rn(){return(0,In.of)({state:Ss.Gu.Done,series:[],timeRange:(0,Ee.JK)()})}class $n{constructor(W={dispatch:_a.WI,getState:_a.y0,getVariable:Ba.E0,getTemplatedRegex:kn.gR,getTimeSrv:fo.$t,queryRunners:new cn,runRequest:dd.v7}){this.dependencies=W,this.updateOptionsRequests=new Ea.x,this.updateOptionsResults=new Ea.x,this.cancelRequests=new Ea.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(W){this.updateOptionsRequests.next(W)}getResponse(W){return this.updateOptionsResults.asObservable().pipe((0,mi.h)(z=>z.identifier===W))}cancelRequest(W){this.cancelRequests.next({identifier:W})}destroy(){this.subscription.unsubscribe()}onNewRequest(W){const{datasource:z,identifier:J,searchFilter:ce}=W;try{const{dispatch:pe,runRequest:xe,getTemplatedRegex:Fe,getVariable:et,queryRunners:lt,getTimeSrv:xt,getState:kt}=this.dependencies,Zt=(0,Ba.S_)(kt());this.updateOptionsResults.next({identifier:J,state:Ss.Gu.Loading});const tn=et(J,kt());if(tn.type!=="query")return;const ln=xt(),vn={variable:tn,datasource:z,searchFilter:ce,timeSrv:ln,runRequest:xe},Un=lt.getRunnerForDatasource(z),Za=Un.getTarget({datasource:z,variable:tn}),Na=this.getRequest(tn,W,Za);Un.runRequest(vn,Na).pipe((0,mi.h)(()=>{const Ja=(0,Ba.S_)(kt());return Zt===Ja}),(0,mi.h)(Ja=>Ja.state===Ss.Gu.Done||Ja.state===Ss.Gu.Error),(0,sg.q)(1),(0,ss.z)(Ja=>Ja.state===Ss.Gu.Error?(0,pd._)(()=>Ja.error):(0,In.of)(Ja)),Wt(),Mt({variable:tn,dispatch:pe,getTemplatedRegexFunc:Fe}),Yt({variable:tn,dispatch:pe,searchFilter:ce}),(0,N.R)((0,ul.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,mi.h)(Ja=>{let qs=!1;return Ja.identifier.id===J.id&&(qs=!0,this.updateOptionsResults.next({identifier:J,state:Ss.Gu.Loading,cancelled:qs})),qs}))),(0,X.K)(Ja=>Ja.cancelled?(0,In.of)({}):(this.updateOptionsResults.next({identifier:J,state:Ss.Gu.Error,error:Ja}),(0,pd._)(()=>Ja))),(0,te.x)(()=>{this.updateOptionsResults.next({identifier:J,state:Ss.Gu.Done})})).subscribe()}catch(pe){this.updateOptionsResults.next({identifier:J,state:Ss.Gu.Error,error:pe})}}getRequest(W,z,J){const{searchFilter:ce}=z,pe={variable:{text:W.current.text,value:W.current.value}},et={...ce?{searchFilter:{text:ce,value:ce}}:{},...pe},lt=W.refresh===Ce.Bd.onTimeRangeChanged?this.dependencies.getTimeSrv().timeRange():(0,Ee.JK)();return{app:zf.zj.Dashboard,requestId:(0,ge.Z)(),timezone:"",range:lt,interval:"",intervalMs:0,targets:[J],scopedVars:et,startTime:Date.now()}}}let ha;function Qn(B){ha=B}function On(){return ha}const Jn=B=>{if(!oa(B))return B.name;const{current:W}=B;return Array.isArray(W.text)?W.text.join(" + "):W.text},oa=B=>Array.isArray(B?.options)||typeof B?.current=="object";var Oa=(B=>(B[B.moveUp=38]="moveUp",B[B.moveDown=40]="moveDown",B[B.select=32]="select",B[B.cancel=27]="cancel",B[B.selectAndClose=13]="selectAndClose",B))(Oa||{});class ja extends a.PureComponent{constructor(){super(...arguments),this.onKeyDown=W=>{if(Oa[W.keyCode]&&W.keyCode!==Oa.select){const z=W.ctrlKey||W.metaKey||W.shiftKey;this.props.onNavigate(W.keyCode,z),W.preventDefault()}},this.onChange=W=>{this.props.onChange(W.target.value)}}render(){const{value:W,id:z,onNavigate:J,...ce}=this.props;return a.createElement("input",{...ce,ref:pe=>{pe&&(pe.focus(),pe.setAttribute("style",`width:${Math.max(pe.width,150)}px`))},type:"text",className:"gf-form-input",value:W??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,$a.t)("variable.dropdown.placeholder","Enter variable value")})}}const Ka=({loading:B,disabled:W,onClick:z,text:J,onCancel:ce,id:pe})=>{const xe=(0,_e.wW)(Sn),Fe=(0,a.useCallback)(et=>{et.stopPropagation(),et.preventDefault(),z()},[z]);return B?a.createElement("div",{className:xe.container,"data-testid":xn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${J}`),title:J,id:pe},a.createElement(Va,{text:J}),a.createElement(Kn,{onCancel:ce})):a.createElement("button",{onClick:Fe,className:xe.container,"data-testid":xn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${J}`),"aria-expanded":!1,"aria-controls":`options-${pe}`,id:pe,title:J,disabled:W},a.createElement(Va,{text:J}),a.createElement(He.J,{"aria-hidden":!0,name:"angle-down",size:"sm"}))},Va=({text:B})=>{const W=(0,_e.wW)(Sn);return a.createElement("span",{className:W.textAndTags},B===_s.xk?(0,$a.t)("variable.picker.link-all","All"):B)},Kn=({onCancel:B})=>{const W=(0,a.useCallback)(z=>{z.preventDefault(),B()},[B]);return a.createElement(Qr.u,{content:"Cancel query"},a.createElement(He.J,{className:"spin-clockwise",name:"sync",size:"xs",onClick:W,"aria-label":xn.wl.components.LoadingIndicator.icon}))},Sn=B=>({container:Z.css`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${B.spacing(1)};
    background-color: ${B.components.input.background};
    border: 1px solid ${B.components.input.borderColor};
    border-radius: ${B.shape.borderRadius(1)};
    display: flex;
    align-items: center;
    color: ${B.colors.text};
    height: ${B.spacing(B.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${B.colors.action.disabledBackground};
      color: ${B.colors.action.disabledText};
      border: 1px solid ${B.colors.action.disabledBackground};
    }
  `,textAndTags:Z.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${B.spacing(.25)};
    user-select: none;
  `});class Vn extends a.PureComponent{constructor(){super(...arguments),this.onToggle=W=>z=>{const J=z.shiftKey||z.ctrlKey||z.metaKey;this.handleEvent(z),this.props.onToggle(W,J)},this.onToggleAll=W=>{this.handleEvent(W),this.props.onToggleAll()}}handleEvent(W){W.preventDefault(),W.stopPropagation()}render(){const{multi:W,values:z,highlightIndex:J,selectedValues:ce,onToggle:pe,onToggleAll:xe,theme:Fe,...et}=this.props,lt=Zn(Fe);return a.createElement("div",{className:lt.variableValueDropdown},a.createElement("div",{className:lt.variableOptionsWrapper},a.createElement("ul",{className:lt.variableOptionsColumn,"aria-label":xn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...et},this.renderMultiToggle(),z.map((xt,kt)=>this.renderOption(xt,kt)))))}renderOption(W,z){const{highlightIndex:J,multi:ce,theme:pe}=this.props,xe=Zn(pe),Fe=W.value===_s.r2;return a.createElement("li",{key:`${W.value}`},a.createElement("button",{"data-testid":xn.wl.components.Variables.variableOption,role:"checkbox",type:"button","aria-checked":W.selected,className:(0,Z.cx)((0,q.gN)(pe),xe.variableOption,{[xe.highlighted]:z===J},xe.noStyledButton),onClick:this.onToggle(W)},a.createElement("span",{className:(0,Z.cx)(xe.variableOptionIcon,{[xe.variableOptionIconSelected]:W.selected,[xe.hideVariableOptionIcon]:!ce})}),a.createElement("span",{"data-testid":xn.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${W.text}`)},Fe?(0,$a.t)("variable.picker.option-all","All"):W.text)))}renderMultiToggle(){const{multi:W,selectedValues:z,theme:J}=this.props,ce=Zn(J);if(!W)return null;const pe=()=>a.createElement($a.cC,{i18nKey:"variable.picker.option-tooltip"},"Clear selections");return a.createElement(Qr.u,{content:pe,placement:"top"},a.createElement("button",{className:(0,Z.cx)((0,q.gN)(J),ce.variableOption,ce.variableOptionColumnHeader,ce.noStyledButton),role:"checkbox","aria-checked":z.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top"},a.createElement("span",{className:(0,Z.cx)(ce.variableOptionIcon,{[ce.variableOptionIconManySelected]:z.length>1})}),a.createElement($a.cC,{i18nKey:"variable.picker.option-selected-values"},"Selected")," (",z.length,")"))}}const Zn=(0,ne.B)(B=>{const W=B.isDark?"public/img/checkbox.png":"public/img/checkbox_white.png";return{hideVariableOptionIcon:(0,Z.css)({display:"none"}),highlighted:(0,Z.css)({backgroundColor:B.colors.action.hover}),noStyledButton:(0,Z.css)({width:"100%",textAlign:"left"}),variableOption:(0,Z.css)({display:"block",padding:"2px 27px 0 8px",position:"relative",whiteSpace:"nowrap",minWidth:"115px",["&:hover"]:{backgroundColor:B.colors.action.hover}}),variableOptionColumnHeader:(0,Z.css)({paddingTop:"5px",paddingBottom:"5px",marginBottom:"5px"}),variableOptionIcon:(0,Z.css)({display:"inline-block",width:"24px",height:"18px",position:"relative",top:"4px",background:`url(${W}) left top no-repeat`}),variableOptionIconManySelected:(0,Z.css)({background:`url(${W}) 0px -36px no-repeat`}),variableOptionIconSelected:(0,Z.css)({background:`url(${W}) 0px -18px no-repeat`}),variableValueDropdown:(0,Z.css)({backgroundColor:B.colors.background.primary,border:`1px solid ${B.colors.border.weak}`,borderRadius:B.shape.borderRadius(2),boxShadow:B.shadows.z2,position:"absolute",top:B.spacing(B.components.height.md),maxHeight:"400px",minHeight:"150px",minWidth:"150px",overflowY:"auto",overflowX:"hidden",zIndex:B.zIndex.typeahead}),variableOptionsColumn:(0,Z.css)({maxHeight:"350px",display:"table-cell",lineHeight:"26px",listStyleType:"none"}),variableOptionsWrapper:(0,Z.css)({display:"table",width:"100%"})}}),Ia=(0,_e.HE)(Vn);var ma=e(61618),La=e(92990),aa=e(85972);const Tn=(B,W,z)=>async(J,ce)=>{if(W===Oa.cancel)return await J(Yn(B));if(W===Oa.select)return J(fa(B,z));if(W===Oa.selectAndClose)return(0,Ba.AE)(B,ce()).optionsPicker.multi?J(fa(B,z)):(J(fa(B,z,!0)),J(Yn(B)));if(W===Oa.moveDown)return J((0,We.mb)(B,(0,aa.Ew)(1)));if(W===Oa.moveUp)return J((0,We.mb)(B,(0,aa.Ew)(-1)))},Ln=(B,W="")=>async(z,J)=>{const{rootStateKey:ce}=B,{id:pe,queryValue:xe}=(0,Ba.AE)(ce,J()).optionsPicker,Fe={id:pe,rootStateKey:ce,type:"query"},et=(0,Ba.E0)(Fe,J());if(!(0,Ga.eL)(et))return;const{query:lt,options:xt}=et;if(z((0,We.mb)(ce,(0,aa.Ug)(W))),(0,h.trim)(xe)!==(0,h.trim)(W))return(0,kn.bf)(lt)?Cs(z,J,W,ce):z((0,We.mb)(ce,(0,aa.ss)(xt)))},Nn=async B=>{if((0,ma.Q)(B.current))return;await di.z.get(B.type).setValue(B,B.current,!0)},Yn=(B,W)=>async(z,J)=>{const ce=(0,Ba.AE)(B,J()).optionsPicker,pe={id:ce.id,rootStateKey:B,type:"query"},xe=(0,Ba.E0)(pe,J());if(!(0,Ga.eL)(xe))return;const Fe={option:gs(ce)},et={propName:"queryValue",propValue:ce.queryValue};z((0,We.mb)(B,(0,La.Q8)((0,kn.Y6)(xe,Fe)))),z((0,We.mb)(B,(0,La.Pl)((0,kn.Y6)(xe,et))));const lt=(0,Ba.E0)(pe,J());if((0,Ga.eL)(lt)&&(z((0,We.mb)(B,(0,aa.nn)())),(0,kn.N9)(xe)!==(0,kn.N9)(lt)))return W?W(lt):await Nn(lt)},Xn=(B,W)=>async(z,J)=>{const{id:ce,rootStateKey:pe}=B,xe=(0,Ba.AE)(pe,J()).optionsPicker;xe.id&&xe.id!==ce&&await z(Yn(pe,W));const Fe=(0,Ba.E0)(B,J());(0,Ga.eL)(Fe)&&z((0,We.mb)(pe,(0,aa.aN)(Fe)))},fa=(B,W,z=!1)=>(J,ce)=>{const{highlightIndex:pe,options:xe}=(0,Ba.AE)(B,ce()).optionsPicker,Fe=xe[pe];J((0,We.mb)(B,(0,aa._M)({option:Fe,forceSelect:z,clearOthers:W})))},pa=async(B,W,z,J)=>{try{const{id:ce}=(0,Ba.AE)(J,W()).optionsPicker,pe={id:ce,rootStateKey:J,type:"query"},xe=(0,Ba.E0)(pe,W());if(!(0,Ga.eL)(xe))return;await di.z.get(xe.type).updateOptions(xe,z);const et=(0,Ba.E0)(pe,W());if(!(0,Ga.eL)(et))return;B((0,We.mb)(J,(0,aa.wF)(et.options)))}catch(ce){console.error(ce)}},Cs=(0,h.debounce)(pa,500);function gs(B){const{options:W,selectedValues:z,queryValue:J,multi:ce}=B;if(W.length===0&&J&&J.length>0)return{text:J,value:J,selected:!1};if(!ce)return z.find(Fe=>Fe.selected);const pe=[],xe=[];for(const Fe of z)Fe.selected&&(pe.push(Fe.text.toString()),xe.push(Fe.value.toString()));return{value:xe,text:pe,selected:!0}}const Ns=()=>{const B=pe=>({...(0,ag.bindActionCreators)({openOptions:Xn,commitChangesToVariable:Yn,navigateOptions:Tn},pe),filterOrSearchOptions:(xe,Fe="")=>{pe(Ln(xe,Fe))},toggleAllOptions:xe=>pe((0,We.mb)(xe.rootStateKey,(0,aa.iQ)())),toggleOption:(xe,Fe,et,lt)=>pe((0,We.mb)(xe.rootStateKey,(0,aa._M)({option:Fe,clearOthers:et,forceSelect:lt})))}),W=(pe,xe)=>{const{rootStateKey:Fe}=xe.variable;return Fe?{picker:(0,Ba.AE)(Fe,pe).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:aa.yy})},z=(0,es.connect)(W,B);class J extends a.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,kn.yQ)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(xe,Fe)=>{((0,Ga.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(xe,Fe)},this.onToggleSingleValueVariable=(xe,Fe)=>{this.props.toggleOption((0,kn.yQ)(this.props.variable),xe,Fe,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(xe,Fe)=>{this.props.toggleOption((0,kn.yQ)(this.props.variable),xe,Fe,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,kn.yQ)(this.props.variable))},this.onFilterOrSearchOptions=xe=>{this.props.filterOrSearchOptions((0,kn.yQ)(this.props.variable),xe)},this.onNavigate=(xe,Fe)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,xe,Fe)},this.onCancel=()=>{On().cancelRequest((0,kn.yQ)(this.props.variable))}}render(){const{variable:xe,picker:Fe}=this.props,et=Fe.id===xe.id;return a.createElement("div",{className:"variable-link-wrapper"},et?this.renderOptions(Fe):this.renderLink(xe))}renderLink(xe){const Fe=Jn(xe),et=xe.state===Ss.Gu.Loading;return a.createElement(Ka,{id:_s.IG+xe.id,text:Fe,onClick:this.onShowOptions,loading:et,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(xe){const{id:Fe}=this.props.variable;return a.createElement(ap.L,{onClick:this.onHideOptions},a.createElement(ja,{id:_s.IG+Fe,value:xe.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${Fe}`}),a.createElement(Ia,{values:xe.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:xe.highlightIndex,multi:xe.multi,selectedValues:xe.selectedValues,id:`options-${Fe}`}))}}const ce=z(J);return ce.displayName="OptionsPicker",ce};var cs=e(57052);class Tr extends a.PureComponent{constructor(){super(...arguments),this.onChange=W=>{this.props.onPropChange({propName:"query",propValue:W.currentTarget.value})},this.onBlur=W=>{this.props.onPropChange({propName:"query",propValue:W.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(a.Fragment,null,a.createElement(wr.e,null,"Constant options"),a.createElement(cs.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,testId:xn.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30}))}}const Or={...Ce.Eg,type:"constant",hide:Ce.bU.hideVariable,query:"",current:{},options:[]},Us=(0,Br.oM)({name:"templating/constant",initialState:ze.s,reducers:{createConstantOptionsFromQuery:(B,W)=>{const z=(0,Ba.ir)(B,W.payload.id);z.type==="constant"&&(z.options=[{text:z.query.trim(),value:z.query.trim(),selected:!1}])}}}),Ds=Us.reducer,{createConstantOptionsFromQuery:Cr}=Us.actions,or=B=>async W=>{const{rootStateKey:z}=B;await W((0,We.mb)(z,Cr((0,kn.Y6)(B)))),await W((0,Oe.xQ)(B))},hs=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:Or,reducer:Ds,picker:Ns(),editor:Tr,dependsOn:()=>!1,setValue:async(B,W,z=!1)=>{await(0,_a.WI)((0,Oe.Fz)((0,kn.yQ)(B),W,z))},setValueFromUrl:async(B,W)=>{await(0,_a.WI)((0,Oe.Ci)((0,kn.yQ)(B),W))},updateOptions:async B=>{await(0,_a.WI)(or((0,kn.yQ)(B)))},getSaveModel:B=>{const{index:W,id:z,state:J,global:ce,current:pe,options:xe,rootStateKey:Fe,...et}=(0,h.cloneDeep)(B);return et},getValueForUrl:B=>B.current.value,beforeAdding:B=>{const{current:W,options:z,query:J,...ce}=(0,h.cloneDeep)(B),pe={selected:!0,text:J,value:J};return{...ce,current:pe,options:[pe],query:J}}});var Ir=e(588),ml=e(58255);function rg({value:B,name:W,description:z,onChange:J,ariaLabel:ce}){const pe=(0,Ir.Me)();return a.createElement(ml.X,{id:pe,label:W,description:z,value:B,onChange:J,"aria-label":ce})}const hd=({onMultiChanged:B,onPropChange:W,variable:z})=>{const J=(0,a.useCallback)(xe=>{B((0,kn.yQ)(z),xe.target.checked)},[B,z]),ce=(0,a.useCallback)(xe=>{W({propName:"includeAll",propValue:xe.target.checked})},[W]),pe=(0,a.useCallback)(xe=>{W({propName:"allValue",propValue:xe.currentTarget.value})},[W]);return a.createElement(Hn.wc,{spacing:"md",height:"inherit"},a.createElement(rg,{value:z.multi,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:J}),a.createElement(rg,{value:z.includeAll,name:"Include All option",description:"Enables an option to include all variables",onChange:ce}),z.includeAll&&a.createElement(cs.V,{value:z.allValue??"",onChange:pe,name:"Custom all value",placeholder:"blank = auto",testId:xn.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInputV2}))};hd.displayName="SelectionOptionsEditor";var sp=e(49993);class vp extends a.PureComponent{constructor(){super(...arguments),this.onChange=W=>{this.props.onPropChange({propName:"query",propValue:W.currentTarget.value})},this.onSelectionOptionsChange=async({propName:W,propValue:z})=>{this.props.onPropChange({propName:W,propValue:z,updateOptions:!0})},this.onBlur=W=>{this.props.onPropChange({propName:"query",propValue:W.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(a.Fragment,null,a.createElement(wr.e,null,"Custom options"),a.createElement(sp.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:52,testId:xn.wl.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),a.createElement(wr.e,null,"Selection options"),a.createElement(hd,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const Ep=(B,W)=>({}),yp={changeVariableMultiValue:Oe.Z7},Pp=Hm(vp,Ep,yp),Cp={...Ce.Eg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},rp=(0,Br.oM)({name:"templating/custom",initialState:ze.s,reducers:{createCustomOptionsFromQuery:(B,W)=>{const z=(0,Ba.ir)(B,W.payload.id);if(z.type!=="custom")return;const{includeAll:J,query:ce}=z,xe=(ce.match(/(?:\\,|[^,])+/g)??[]).map(Fe=>{Fe=Fe.replace(/\\,/g,",");const et=/^(.+)\s:\s(.+)$/g.exec(Fe)??[];if(et.length===3){const[,lt,xt]=et;return{text:lt.trim(),value:xt.trim(),selected:!1}}else return{text:Fe.trim(),value:Fe.trim(),selected:!1}});J&&xe.unshift({text:_s.xk,value:_s.r2,selected:!1}),z.options=xe}}}),Dp=rp.reducer,{createCustomOptionsFromQuery:xp}=rp.actions,bp=B=>async W=>{const{rootStateKey:z}=B;await W((0,We.mb)(z,xp((0,kn.Y6)(B)))),await W((0,Oe.xQ)(B))},Mp=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:Cp,reducer:Dp,picker:Ns(),editor:Pp,dependsOn:()=>!1,setValue:async(B,W,z=!1)=>{await(0,_a.WI)((0,Oe.Fz)((0,kn.yQ)(B),W,z))},setValueFromUrl:async(B,W)=>{await(0,_a.WI)((0,Oe.Ci)((0,kn.yQ)(B),W))},updateOptions:async B=>{await(0,_a.WI)(bp((0,kn.yQ)(B)))},getSaveModel:B=>{const{index:W,id:z,state:J,global:ce,rootStateKey:pe,...xe}=(0,h.cloneDeep)(B);return xe},getValueForUrl:B=>(0,kn.HY)(B)?_s.xk:B.current.value});var og=e(83704);const Sp={...Ce.Eg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:Ce.Bd.onDashboardLoad},op=(0,Br.oM)({name:"templating/datasource",initialState:ze.s,reducers:{createDataSourceOptions:(B,W)=>{const{sources:z,regex:J}=W.payload.data,ce=[],pe=(0,Ba.ir)(B,W.payload.id);if(pe.type==="datasource"){for(let xe=0;xe<z.length;xe++){const Fe=z[xe];Fe.meta.id===pe.query&&(Tp(Fe,J)&&ce.push({text:Fe.name,value:Fe.name,selected:!1}),Op(Fe,J)&&ce.push({text:"default",value:"default",selected:!1}))}ce.length===0&&ce.push({text:"No data sources found",value:"",selected:!1}),pe.includeAll&&ce.unshift({text:_s.xk,value:_s.r2,selected:!1}),pe.options=ce}}}});function Tp(B,W){return W?W.exec(B.name):!0}function Op(B,W){return B.isDefault?W?W.exec("default"):!0:!1}const Ip=op.reducer,{createDataSourceOptions:Rp}=op.actions,Ap=(B,W={getDatasourceSrv:m.ak})=>async(z,J)=>{const{rootStateKey:ce}=B,pe=W.getDatasourceSrv().getList({metrics:!0,variables:!1}),xe=(0,Ba.E0)(B,J());if(xe.type!=="datasource")return;let Fe;xe.regex&&(Fe=(0,bo.J)().replace(xe.regex,void 0,"regex"),Fe=(0,Qa.jO)(Fe)),z((0,We.mb)(ce,Rp((0,kn.Y6)(B,{sources:pe,regex:Fe})))),await z((0,Oe.xQ)(B))},Lp=(B,W={getDatasourceSrv:m.ak})=>z=>{const J=W.getDatasourceSrv().getList({metrics:!0,variables:!0}),ce=(0,h.chain)(J).uniqBy("meta.id").map(pe=>({text:pe.meta.name,value:pe.meta.id})).value();ce.unshift({text:"",value:""}),z((0,We.mb)(B,(0,_r.z7)({dataSourceTypes:ce})))},Bp=(B,W)=>{const{variable:{rootStateKey:z}}=W;if(!z)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:Yf(_r.PF)};const{editor:J}=(0,Ba.AE)(z,B);return{extended:Yf(J)}},Np={initDataSourceVariableEditor:Lp,changeVariableMultiValue:Oe.Z7},Up=(0,es.connect)(Bp,Np);class wp extends a.PureComponent{constructor(){super(...arguments),this.onRegExChange=W=>{this.props.onPropChange({propName:"regex",propValue:W.currentTarget.value})},this.onRegExBlur=W=>{this.props.onPropChange({propName:"regex",propValue:W.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:W,propName:z})=>{this.props.onPropChange({propName:z,propValue:W,updateOptions:!0})},this.getSelectedDataSourceTypeValue=()=>{const{extended:W}=this.props;if(!W?.dataSourceTypes.length)return"";const z=W.dataSourceTypes.find(ce=>ce.value===this.props.variable.query);return(z?z.value:W.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=W=>{this.props.onPropChange({propName:"query",propValue:W.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:W}=this.props.variable;if(!W){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(W)}render(){const{variable:W,extended:z,changeVariableMultiValue:J}=this.props,ce=z?.dataSourceTypes?.length?z.dataSourceTypes?.map(xe=>({value:xe.value??"",label:xe.text})):[],pe=ce.find(xe=>xe.value===W.query)??ce[0];return a.createElement(a.Fragment,null,a.createElement(wr.e,null,"Data source options"),a.createElement(og.u,{name:"Type",value:pe,options:ce,onChange:this.onDataSourceTypeChanged,testId:xn.wl.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),a.createElement(cs.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,description:a.createElement("div",null,"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",a.createElement("br",null),a.createElement("br",null),"Example: ",a.createElement("code",null,"/^prod/"))}),a.createElement(wr.e,null,"Selection options"),a.createElement(hd,{variable:W,onPropChange:this.onSelectionOptionsChange,onMultiChanged:J}))}}const Wp=Up(wp),Fp=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:Sp,reducer:Ip,picker:Ns(),editor:Wp,dependsOn:(B,W)=>B.regex?(0,kn.QI)(B.regex,W.name):!1,setValue:async(B,W,z=!1)=>{await(0,_a.WI)((0,Oe.Fz)((0,kn.yQ)(B),W,z))},setValueFromUrl:async(B,W)=>{await(0,_a.WI)((0,Oe.Ci)((0,kn.yQ)(B),W))},updateOptions:async B=>{await(0,_a.WI)(Ap((0,kn.yQ)(B)))},getSaveModel:B=>{const{index:W,id:z,state:J,global:ce,rootStateKey:pe,...xe}=(0,h.cloneDeep)(B);return{...xe,options:[]}},getValueForUrl:B=>(0,kn.HY)(B)?_s.xk:B.current.value});var $p=e(69155);const ig=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(B=>({label:`${B}`,value:B})),ip=a.memo(({onPropChange:B,variable:W})=>{const z=lt=>{B({propName:"auto",propValue:lt.target.checked,updateOptions:!0})},J=lt=>{B({propName:"query",propValue:lt.currentTarget.value})},ce=lt=>{B({propName:"query",propValue:lt.currentTarget.value,updateOptions:!0})},pe=lt=>{B({propName:"auto_count",propValue:lt.value,updateOptions:!0})},xe=lt=>{B({propName:"auto_min",propValue:lt.currentTarget.value,updateOptions:!0})},Fe=ig.find(lt=>lt.value===W.auto_count)??ig[0],et=(0,_e.wW)(Kp);return a.createElement(a.Fragment,null,a.createElement(wr.e,null,"Interval options"),a.createElement(cs.V,{value:W.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:J,onBlur:ce,testId:xn.wl.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),a.createElement(rg,{value:W.auto,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:z}),W.auto&&a.createElement("div",{className:et.autoFields},a.createElement(og.u,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:Fe,options:ig,onChange:pe,width:9}),a.createElement(cs.V,{value:W.auto_min,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:xe,width:11})))});ip.displayName="IntervalVariableEditor";function Kp(B){return{autoFields:(0,Z.css)({marginTop:B.spacing(2),display:"flex",flexDirection:"column"})}}var Vp=e(28674);const zp={...Ce.Eg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:Ce.Bd.onTimeRangeChanged,current:{}},lp=(0,Br.oM)({name:"templating/interval",initialState:ze.s,reducers:{createIntervalOptions:(B,W)=>{const z=(0,Ba.ir)(B,W.payload.id);if(z.type!=="interval")return;const J=(0,h.map)(z.query.match(/(["'])(.*?)\1|\w+/g),ce=>(ce=ce.replace(/["']+/g,""),{text:ce.trim(),value:ce.trim(),selected:!1}));z.auto&&J.length&&J[0].text!=="auto"&&J.unshift({text:"auto",value:"$__auto_interval_"+z.name,selected:!1}),z.options=J}}}),Hp=lp.reducer,{createIntervalOptions:kp}=lp.actions,_p=B=>async W=>{const{rootStateKey:z}=B;await W((0,We.mb)(z,kp((0,kn.Y6)(B)))),await W(lg(B)),await W((0,Oe.xQ)(B))},lg=(B,W={calculateInterval:Hf.calculateInterval,getTimeSrv:fo.$t,templateSrv:(0,Vp.J)()})=>(z,J)=>{const ce=(0,Ba.E0)(B,J());if(ce.type==="interval"&&ce.auto){const pe=W.calculateInterval(W.getTimeSrv().timeRange(),ce.auto_count,ce.auto_min);W.templateSrv.setGrafanaVariable("$__auto_interval_"+ce.name,pe.interval),W.templateSrv.setGrafanaVariable("$__auto_interval",pe.interval)}},Gp=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:zp,reducer:Hp,picker:Ns(),editor:ip,dependsOn:()=>!1,setValue:async(B,W,z=!1)=>{await(0,_a.WI)(lg((0,kn.yQ)(B))),await(0,_a.WI)((0,Oe.Fz)((0,kn.yQ)(B),W,z))},setValueFromUrl:async(B,W)=>{await(0,_a.WI)(lg((0,kn.yQ)(B))),await(0,_a.WI)((0,Oe.Ci)((0,kn.yQ)(B),W))},updateOptions:async B=>{await(0,_a.WI)(_p((0,kn.yQ)(B)))},getSaveModel:B=>{const{index:W,id:z,state:J,global:ce,rootStateKey:pe,...xe}=(0,h.cloneDeep)(B);return xe},getValueForUrl:B=>B.current.value});var cp=e(69273);const cg=[{label:"On dashboard load",value:cp.Bd.onDashboardLoad},{label:"On time range change",value:cp.Bd.onTimeRangeChanged}];function Yp({onChange:B,refresh:W}){const z=(0,a.useMemo)(()=>cg.find(J=>J.value===W)?.value??cg[0].value,[W]);return a.createElement(ua.g,{label:"Refresh",description:"When to update the values of this variable"},a.createElement(me.S,{options:cg,onChange:B,value:z}))}const dg=[{label:"Disabled",value:Ce.$U.disabled},{label:"Alphabetical (asc)",value:Ce.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:Ce.$U.alphabeticalDesc},{label:"Numerical (asc)",value:Ce.$U.numericalAsc},{label:"Numerical (desc)",value:Ce.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:Ce.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:Ce.$U.alphabeticalCaseInsensitiveDesc}];function jp({onChange:B,sort:W}){const z=(0,a.useMemo)(()=>dg.find(J=>J.value===W)??dg[0],[W]);return a.createElement(og.u,{name:"Sort",description:"How to sort the values of this variable",value:z,options:dg,onChange:B,testId:xn.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,width:25})}var Qp=e(53376),Zp=e(77599),dp=e(95125);async function Jp(B,W=Li.nL){if((0,Ga.d7)(B))return B.variables.editor;if((0,Ga.X7)(B)){const z=await W(B.meta);if(!z.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return z.components.QueryEditor??null}return(0,Ga.Ju)(B)?Xp:(0,Ga.R)(B)?(await W(B.meta)).components.VariableQueryEditor??dp.R:null}function Xp({datasource:B,query:W,onChange:z}){const J=(0,a.useCallback)(ce=>{z({refId:"StandardVariableQuery",query:ce})},[z]);return a.createElement(dp.R,{query:W.query,onChange:J,datasource:B,templateSrv:(0,bo.J)()})}function qp(B,W,z){return{next:ce=>{if(ce.state===Ss.Gu.Error){z.unsubscribe(),W(ce.error);return}if(ce.state===Ss.Gu.Done){z.unsubscribe(),B();return}},error:ce=>{z.unsubscribe(),W(ce)},complete:()=>{z.unsubscribe(),B()}}}const eh=(B,W)=>async(z,J)=>{try{const{rootStateKey:ce}=B;if(!(0,kn.A3)(ce,J()))return;const pe=(0,Ba.E0)(B,J());if(pe.type!=="query")return;(0,Ba.AE)(ce,J()).editor.id===pe.id&&z((0,We.mb)(ce,(0,_r.PV)({errorProp:"update"})));const xe=await(0,L.F)().get(pe.datasource??"");await new Promise((Fe,et)=>{const lt=new Qp.w0,xt=qp(Fe,et,lt),kt=On().getResponse(B).subscribe(xt);lt.add(kt),On().queueRequest({identifier:B,datasource:xe,searchFilter:W})})}catch(ce){if(ce instanceof Error){const pe=(0,Zp.P)(ce),{rootStateKey:xe}=B;throw(0,Ba.AE)(xe,J()).editor.id===B.id&&z((0,We.mb)(xe,(0,_r.Sg)({errorProp:"update",errorText:pe.message}))),pe}}},th=B=>async(W,z)=>{const J=(0,Ba.E0)(B,z());J.type==="query"&&await W(up((0,kn.yQ)(J),J.datasource))},up=(B,W)=>async(z,J)=>{try{const{rootStateKey:ce}=B,{editor:pe}=(0,Ba.AE)(ce,J()),Fe=ud(pe)?.dataSource,et=await(0,L.F)().get(W??"");Fe&&Fe.type!==et?.type&&z((0,We.mb)(ce,(0,La.Pl)((0,kn.Y6)(B,{propName:"query",propValue:""}))));const lt=await Jp(et);z((0,We.mb)(ce,(0,_r.z7)({dataSource:et,VariableQueryEditor:lt})))}catch(ce){console.error(ce)}},nh=(B,W,z)=>async(J,ce)=>{const{rootStateKey:pe}=B,xe=(0,Ba.E0)(B,ce());if(xe.type==="query"){if(ah(xe.name,W)){const Fe="Query cannot contain a reference to itself. Variable: $"+xe.name;J((0,We.mb)(pe,(0,_r.Sg)({errorProp:"query",errorText:Fe})));return}J((0,We.mb)(pe,(0,_r.PV)({errorProp:"query"}))),J((0,We.mb)(pe,(0,La.Pl)((0,kn.Y6)(B,{propName:"query",propValue:W})))),z!==void 0?J((0,We.mb)(pe,(0,La.Pl)((0,kn.Y6)(B,{propName:"definition",propValue:z})))):typeof W=="string"&&J((0,We.mb)(pe,(0,La.Pl)((0,kn.Y6)(B,{propName:"definition",propValue:W})))),await J((0,Oe.Rk)(B))}};function ah(B,W){if(typeof W=="string"&&W.match(new RegExp("\\$"+B+"(/| |$)")))return!0;const z=mp(W);for(let J in z)if(z.hasOwnProperty(J)){const ce=z[J];if(typeof ce=="string"&&ce.match(new RegExp("\\$"+B+"(/| |$)")))return!0}return!1}function mp(B){return typeof B!="object"||B===null?{query:B}:Object.keys(B).reduce((J,ce)=>{const pe=B[ce];if(typeof pe!="object"||pe===null)return J[ce]=pe,J;const xe=mp(pe);for(let Fe in xe)xe.hasOwnProperty(Fe)&&(J[`${ce}_${Fe}`]=xe[Fe]);return J},{})}const sh=(B,W)=>{const{rootStateKey:z}=W.variable;if(!z)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:ud(_r.PF)};const{editor:J}=(0,Ba.AE)(z,B);return{extended:ud(J)}},rh={initQueryVariableEditor:th,changeQueryVariableDataSource:up,changeQueryVariableQuery:nh,changeVariableMultiValue:Oe.Z7},oh=(0,es.connect)(sh,rh);class ih extends a.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=W=>{this.props.onPropChange({propName:"datasource",propValue:W.isDefault?null:(0,kf.iU)(W)})},this.onLegacyQueryChange=async(W,z)=>{this.props.variable.query!==W&&this.props.changeQueryVariableQuery((0,kn.yQ)(this.props.variable),W,z)},this.onQueryChange=async W=>{if(this.props.variable.query!==W){let z="";W&&W.hasOwnProperty("query")&&typeof W.query=="string"&&(z=W.query),this.props.changeQueryVariableQuery((0,kn.yQ)(this.props.variable),W,z)}},this.onRegExChange=W=>{this.setState({regex:W.currentTarget.value})},this.onRegExBlur=async W=>{const z=W.currentTarget.value;this.props.variable.regex!==z&&this.props.onPropChange({propName:"regex",propValue:z,updateOptions:!0})},this.onRefreshChange=W=>{this.props.onPropChange({propName:"refresh",propValue:W})},this.onSortChange=async W=>{this.props.onPropChange({propName:"sort",propValue:W.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:W,propName:z})=>{this.props.onPropChange({propName:z,propValue:W,updateOptions:!0})},this.renderQueryEditor=()=>{const{extended:W,variable:z}=this.props;if(!W||!W.dataSource||!W.VariableQueryEditor)return null;const J=W.dataSource,ce=W.VariableQueryEditor;let pe=z.query;if(typeof pe=="string"?pe=pe||(J.variables?.getDefaultQuery?.()??""):pe={...J.variables?.getDefaultQuery?.(),...z.query},(0,Ga.NX)(ce,J))return a.createElement(ua.g,{label:"Query"},a.createElement(ce,{datasource:J,query:pe,templateSrv:(0,bo.J)(),onChange:this.onLegacyQueryChange}));const xe=(0,fo.$t)().timeRange();return(0,Ga.$7)(ce,J)?a.createElement(ua.g,{label:"Query"},a.createElement(ce,{datasource:J,query:pe,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:Ss.Gu.Done,timeRange:xe},range:xe,onBlur:()=>{},history:[]})):null}}async componentDidMount(){await this.props.initQueryVariableEditor((0,kn.yQ)(this.props.variable))}componentDidUpdate(W){W.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,kn.yQ)(this.props.variable),this.props.variable.datasource)}render(){return a.createElement(a.Fragment,null,a.createElement(wr.e,null,"Query options"),a.createElement(ua.g,{label:"Data source",htmlFor:"data-source-picker"},a.createElement(_f.q,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0,width:30})),this.renderQueryEditor(),a.createElement(sp.W,{value:this.state.regex??this.props.variable.regex,name:"Regex",description:a.createElement("div",null,"Optional, if you want to extract part of a series name or metric node segment.",a.createElement("br",null),"Named capture groups can be used to separate the display text and value (",a.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank"},"see examples"),")."),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,testId:xn.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),a.createElement(jp,{onChange:this.onSortChange,sort:this.props.variable.sort}),a.createElement(Yp,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh}),a.createElement(wr.e,null,"Selection options"),a.createElement(hd,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const lh=oh(ih),ch=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:rt,reducer:Ut,picker:Ns(),editor:lh,dependsOn:(B,W)=>(0,kn.QI)(B.query,B.datasource?.uid,B.regex,W.name),setValue:async(B,W,z=!1)=>{await(0,_a.WI)((0,Oe.Fz)((0,kn.yQ)(B),W,z))},setValueFromUrl:async(B,W)=>{await(0,_a.WI)((0,Oe.Ci)((0,kn.yQ)(B),W))},updateOptions:async(B,W)=>{await(0,_a.WI)(eh((0,kn.yQ)(B),W))},getSaveModel:B=>{const{index:W,id:z,state:J,global:ce,queryValue:pe,rootStateKey:xe,...Fe}=(0,h.cloneDeep)(B);return B.refresh!==Ce.Bd.never?{...Fe,options:[]}:Fe},getValueForUrl:B=>(0,kn.HY)(B)?_s.xk:B.current.value}),dh=()=>({id:"system",description:"",name:"system",initialState:{...Ce.Eg,type:"system",hide:Ce.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:Ss.Gu.Done},reducer:(B,W)=>B,picker:null,editor:null,dependsOn:()=>!1,setValue:async(B,W,z=!1)=>{},setValueFromUrl:async(B,W)=>{},updateOptions:async B=>{},getSaveModel:B=>({}),getValueForUrl:B=>""});function uh({onPropChange:B,variable:{query:W}}){const z=(0,a.useCallback)((pe,xe)=>{pe.preventDefault(),B({propName:"originalQuery",propValue:pe.currentTarget.value,updateOptions:!1}),B({propName:"query",propValue:pe.currentTarget.value,updateOptions:xe})},[B]),J=(0,a.useCallback)(pe=>z(pe,!1),[z]),ce=(0,a.useCallback)(pe=>z(pe,!0),[z]);return a.createElement(a.Fragment,null,a.createElement(wr.e,null,"Text options"),a.createElement(cs.V,{value:W,name:"Default value",placeholder:"default value, if any",onChange:J,onBlur:ce,width:30,testId:xn.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function mh({variable:B,onVariableChange:W,readOnly:z}){const J=(0,yn.useDispatch)(),[ce,pe]=(0,a.useState)(B.current.value);(0,a.useEffect)(()=>{pe(B.current.value)},[B]);const xe=(0,a.useCallback)(()=>{if(!B.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(B.current.value!==ce){if(J((0,We.mb)(B.rootStateKey,(0,La.Pl)((0,kn.Y6)({id:B.id,type:B.type},{propName:"query",propValue:ce})))),W){W({...B,current:(0,ma.Q)(B.current)?{}:{...B.current,value:ce}});return}di.z.get(B.type).updateOptions(B)}},[B,ce,J,W]),Fe=(0,a.useCallback)(xt=>pe(xt.target.value),[pe]),et=xt=>xe(),lt=xt=>{xt.keyCode===13&&(xt.preventDefault(),xe())};return a.createElement(ue.I,{type:"text",value:ce,onChange:Fe,onBlur:et,disabled:z,onKeyDown:lt,placeholder:(0,$a.t)("variable.textbox.placeholder","Enter variable value"),id:_s.IG+B.id})}const fh={...Ce.Eg,type:"textbox",query:"",current:{},options:[],originalQuery:null},fp=(0,Br.oM)({name:"templating/textbox",initialState:ze.s,reducers:{createTextBoxOptions:(B,W)=>{const z=(0,Ba.ir)(B,W.payload.id);if(z.type!=="textbox")return;const J={text:z.query.trim(),value:z.query.trim(),selected:!1};z.options=[J],z.current=J}}}),gh=fp.reducer,{createTextBoxOptions:ph}=fp.actions,hh=B=>async(W,z)=>{const{rootStateKey:J,type:ce}=B;W((0,We.mb)(J,ph((0,kn.Y6)(B))));const pe=(0,Ba.E0)(B,z());pe.type==="textbox"&&await di.z.get(ce).setValue(pe,pe.options[0],!0)},vh=(B,W)=>async(z,J)=>{const{rootStateKey:ce}=B,pe=(0,Ba.E0)(B,J());if(pe.type!=="textbox")return;const xe=(0,kn.Hi)(W);z((0,We.mb)(ce,(0,La.Pl)((0,kn.Y6)(pe,{propName:"query",propValue:xe})))),await z((0,Oe.Ci)((0,kn.yQ)(pe),xe))},Eh=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:fh,reducer:gh,picker:mh,editor:uh,dependsOn:(B,W)=>!1,setValue:async(B,W,z=!1)=>{await(0,_a.WI)((0,Oe.Fz)((0,kn.yQ)(B),W,z))},setValueFromUrl:async(B,W)=>{await(0,_a.WI)(vh((0,kn.yQ)(B),W))},updateOptions:async B=>{await(0,_a.WI)(hh((0,kn.yQ)(B)))},getSaveModel:(B,W)=>{const{index:z,id:J,state:ce,global:pe,originalQuery:xe,rootStateKey:Fe,...et}=(0,h.cloneDeep)(B);if(B.query!==xe&&!W){const lt=xe??"",xt={selected:!1,text:lt,value:lt};return{...et,query:lt,current:xt,options:[xt]}}return et},getValueForUrl:B=>B.current.value,beforeAdding:B=>({...(0,h.cloneDeep)(B),originalQuery:B.query})});var ug=e(24290),mg=e(10655),yh=e(61962);const Ph={navBarTree:yh.V4,navIndex:Yi.G4,appNotifications:Tm.VW};var Ch=e(66114),Dh=e(11626),xh=e(56777),bh=e(85389),Mh=e(88612),Sh=e(36281),Th=e(58790),Oh=e(41632),Ih=e(48197),Rh=e(15932),Ah=e(75804),Lh=e(24693),Bh=e(17283),Nh=e(46732),Uh=e(66552),wh=e(54294),Wh=e(45003),Fh=e(62295),$h=e(97189),Kh=e(12142),fg=e(29427),Vh=e(70431);const zh={...Ph,...Dh.ZP,...$h.ZP,...xh.ZP,...Rh.ZP,...Th.ZP,...Ih.ZP,...Oh.ZP,...Kh.ZP,...Wh.ZP,...wh.ZP,...Ah.ZP,...Bh.ZP,...Mh.ZP,...Ch.ZP,...Lh.ZP,...Sh.ZP,...Nh.ZP,...We.ZP,...Fh.ZP,...bh.ZP,plugins:Uh.I6,[fg.C.reducerPath]:fg.C.reducer,[mg.Rh.reducerPath]:mg.Rh.reducer,[ug.Zi.reducerPath]:ug.Zi.reducer},gp={},tv=B=>{Object.assign(gp,B)},Hh=()=>{const B=(0,ag.combineReducers)({...zh,...gp});return(W,z)=>{if(z.type!==Vh.e.type)return B(W,z);const{cleanupAction:J}=z.payload;return J(W),B(W,z)}};function nv(B){addReducer(B)}function kh(B){const W=(0,Br.xC)({reducer:Hh(),middleware:z=>z({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(fg.C.middleware,mg.Rh.middleware,ug.Zi.middleware),devTools:!1,preloadedState:{navIndex:(0,Yi.Cu)(),...B}});return(0,_a.PQ)(W),W}P().move=re.R;const pp=e(72866),vd=pp.keys().map(B=>pp(B));class _h{async init(){try{parent.postMessage("GrafanaAppInit","*");const W=(0,$a.uC)(Q.ZP.bootData.user.language);(0,O.jW)(Fo.ae),jh(),Qh(),(0,D.i_)(Q.ZP.bootData.user.locale),(0,D.Ls)(Q.ZP.bootData.user.weekStart),(0,A.L)(Af.$),(0,_.t)(zc),(0,j.$)(Ug.Z),(0,U.x)(I.E1),(0,b.K)(()=>Q.ZP.bootData.user.timezone),If(),(0,F.Xw)(ps.Z),await W,Gh(),kh(),Yh(),M.S.setInit(Vc.u),M.N.setInit(Vc.l),x.Z.setInit(No),di.z.setInit(()=>[ch(),Mp(),Eh(),hs(),Fp(),Gp(),np(),dh()]),R.F.setInit(Ad),(0,w.pD)(()=>new Gg),Qn(new $n),(0,w.Iw)(dd.v7),(0,K.Qf)({importPanelPlugin:Vf.Ub,getPanelPluginFromCache:Vf.q1}),S.u.initialize({config:Q.ZP,getTimeRangeForUrl:(0,fo.$t)().timeRangeForUrl,getVariablesUrlParams:$p.c}),document.addEventListener("click",Hc);const z=new m.ND;z.init(Q.ZP.datasources,Q.ZP.defaultDatasource),(0,L.w)(z),jg(),new Og().init();const ce=await Kg(Q.ZP.apps),pe=xt=>$f({...xt,registry:cd(ce)});(0,V.o)(pe);const xe=I.E1.getSearchObject(),Fe=new Km,et=new pf(I.E1,Fe);Fe.setKioskModeFromUrl(xe.kiosk),this.context={backend:Fo.ae,location:I.E1,chrome:Fe,keybindings:et,config:Q.ZP},(0,C.s)(document.getElementById("reactRoot")).render(a.createElement(Fm,{app:this}))}catch(W){console.error("Failed to start Grafana",W),window.__grafana_load_failed()}}}function Gh(){vd.length>0&&vd[0].addExtensionReducers()}function Yh(){vd.length>0&&vd[0].init()}function jh(){(0,H.tz)(new Gm({debug:!1})),window.addEventListener("load",B=>{const W="frontend_boot_load_time_seconds",z="frontend_boot_js_done_time_seconds",J="frontend_boot_css_time_seconds";performance&&(performance.mark(W),fl("first-paint","frontend_boot_","_time_seconds"),fl("first-contentful-paint","frontend_boot_","_time_seconds"),fl(W),fl(z),fl(J))}),ts.Vt.user.orgRole!==""&&(0,H.e6)(new Rg({})),Q.ZP.sentry.enabled&&(0,H.e6)(new ed({...Q.ZP.sentry,user:Q.ZP.bootData.user,buildInfo:Q.ZP.buildInfo})),Q.ZP.grafanaJavascriptAgent.enabled&&(0,H.e6)(new tf({...Q.ZP.grafanaJavascriptAgent,app:{version:Q.ZP.buildInfo.version,environment:Q.ZP.buildInfo.env},buildInfo:Q.ZP.buildInfo,user:{id:String(Q.ZP.bootData.user?.id),email:Q.ZP.bootData.user?.email}})),Q.ZP.googleAnalyticsId&&(0,H.e6)(new Oo({googleAnalyticsId:Q.ZP.googleAnalyticsId})),Q.ZP.googleAnalytics4Id&&(0,H.e6)(new Ag({googleAnalyticsId:Q.ZP.googleAnalytics4Id,googleAnalytics4SendManualPageViews:Q.ZP.googleAnalytics4SendManualPageViews})),Q.ZP.rudderstackWriteKey&&Q.ZP.rudderstackDataPlaneUrl&&(0,H.e6)(new jc({writeKey:Q.ZP.rudderstackWriteKey,dataPlaneUrl:Q.ZP.rudderstackDataPlaneUrl,user:Q.ZP.bootData.user,sdkUrl:Q.ZP.rudderstackSdkUrl,configUrl:Q.ZP.rudderstackConfigUrl})),Q.ZP.applicationInsightsConnectionString&&(0,H.e6)(new Yc({connectionString:Q.ZP.applicationInsightsConnectionString,endpointUrl:Q.ZP.applicationInsightsEndpointUrl}))}function Qh(){(0,k.n)()>0&&document.body.classList.add("no-overlay-scrollbar")}function fl(B,W="",z=""){const J=P().first(performance.getEntriesByName(B));if(J){const ce=J.name.replace(/-/g,"_");Ym(`${W}${ce}${z}`,Math.round(J.startTime)/1e3)}}const Zh=new _h;window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,Zh.init()},39031:(Y,T,e)=>{"use strict";e.d(T,{As:()=>t,TE:()=>s,Z9:()=>n,_M:()=>i,sK:()=>l});var t=(f=>(f.Active="active",f.Expired="expired",f.Pending="pending",f))(t||{}),n=(f=>(f.Unprocessed="unprocessed",f.Active="active",f.Suppressed="suppressed",f))(n||{}),i=(f=>(f.equal="=",f.notEqual="!=",f.regex="=~",f.notRegex="!~",f))(i||{}),s=(f=>(f.Internal="internal",f.External="external",f.All="all",f))(s||{}),l=(f=>(f.cortex="cortex",f.mimir="mimir",f.prometheus="prometheus",f))(l||{})},53552:(Y,T,e)=>{"use strict";e.d(T,{$5:()=>i,MQ:()=>s,Rv:()=>u,az:()=>f});const t=Object.freeze([0,0]),n={statistics:[]};var i=(d=>(d[d.Query=1]="Query",d[d.Search=0]="Search",d))(i||{}),s=(d=>(d[d.Builder=0]="Builder",d[d.Code=1]="Code",d))(s||{});const l={parameters:[]};var f=(d=>(d.And="and",d.Function="function",d.FunctionParameter="functionParameter",d.GroupBy="groupBy",d.Operator="operator",d.Or="or",d.Property="property",d))(f||{}),u=(d=>(d.String="string",d))(u||{});const o={logGroupNames:[],logGroups:[],statsGroups:[]}},2868:(Y,T,e)=>{"use strict";e.d(T,{$5:()=>t.$5,KB:()=>n,MQ:()=>t.MQ,wf:()=>i});var t=e(53552),n=(s=>(s.Scheduled="Scheduled",s.Running="Running",s.Complete="Complete",s.Failed="Failed",s.Cancelled="Cancelled",s.Timeout="Timeout",s))(n||{}),i=(s=>(s.Regions="regions",s.Namespaces="namespaces",s.Metrics="metrics",s.DimensionKeys="dimensionKeys",s.DimensionValues="dimensionValues",s.EBSVolumeIDs="ebsVolumeIDs",s.EC2InstanceAttributes="ec2InstanceAttributes",s.ResourceArns="resourceARNs",s.Statistics="statistics",s.LogGroups="logGroups",s.Accounts="accounts",s))(i||{})},79543:(Y,T,e)=>{"use strict";e.d(T,{hD:()=>I,oe:()=>f.o,yl:()=>u,AK:()=>o});var t=e(84946),n=e(89749),i=e(52666),s=e(75849),l=e(9398),f=e(21471);function u(w){return w?typeof w=="string"?w===f.o:"meta"in w&&w.meta.name===f.o||w.uid===f.o:!1}function o(w,K){return new t.y(L=>{const V=(0,l.h4)().getCurrent(),H=d(w.queries);if(!H){L.next(r("Missing panel reference ID"));return}const j=V?.getPanelById(H);if(!j){L.next(r("Unknown Panel: "+H));return}const A=j.getQueryRunner(),_=A.getData({withTransforms:Boolean(K?.withTransforms),withFieldConfig:!1}).subscribe({next:k=>{K?.topic===n.w5.Annotations&&(k={...k,series:k.annotations??[],annotations:void 0}),L.next(k)}});if(!j.isInView){const{datasource:k,targets:Q}=j,re={...w,datasource:k,panelId:H,queries:Q};A.run(re)}return()=>{_.unsubscribe()}})}function d(w){if(!(!w||!w.length))return w[0].panelId}function r(w){return{state:i.Gu.Error,series:[],request:{},error:{message:w},timeRange:(0,s.JK)()}}var m=e(9892),c=e(588),p=e(64681),g=e.n(p),y=e(66111),E=e(59679),v=e(72648),h=e(24799),P=e(8581),a=e(52081),C=e(2594),D=e(8944),b=e(67487),M=e(72948),x=e(47694),R=e(91162),S=e(36584);function O(w){return JSON.stringify(w)}const U=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function I({panelData:w,queries:K,onChange:L,onRunQueries:V}){const{value:H}=(0,E.Z)(()=>(0,R.ak)().get()),j=K[0],A=(0,y.useMemo)(()=>(0,l.h4)().getCurrent()?.getPanelById(j.panelId??-124134),[j.panelId]),{value:_,loading:k}=(0,E.Z)(async()=>{if(!A)return[];const q=await(0,R.ak)().get(A.datasource);return Promise.all(A.targets.map(async ne=>{const se=ne.datasource?await(0,R.ak)().get(ne.datasource):q,he=se.getQueryDisplayText||O,ue=(0,S.t)(w,ne.refId)??w;return{refId:ne.refId,query:he(ne),name:se.name,img:se.meta.info.logos.small,data:ue.series,error:ue.error}}))},[w,A]),Q=(0,y.useCallback)(q=>{L([q]),V()},[L,V]),re=(0,y.useCallback)(q=>{Q({...j,panelId:q})},[j,Q]),Z=(0,y.useCallback)(()=>{Q({...j,withTransforms:!j.withTransforms})},[j,Q]),oe=(0,y.useCallback)(q=>{Q({...j,topic:q?n.w5.Annotations:void 0})},[j,Q]),G=(0,y.useCallback)(q=>{const ne=q.datasource??H,se=(0,R.ak)().getInstanceSettings(ne)?.name,he=q.targets.length;return`${he} ${g()("query",he)} to ${se}`},[H]),le=(0,l.h4)().getCurrent(),fe=Boolean(j.withTransforms||A?.transformations?.length),ae=(0,y.useMemo)(()=>le?.panels.filter(q=>x.ZP.panels[q.type]&&q.targets&&q.id!==le.panelInEdit?.id&&q.datasource?.uid!==f.o).map(q=>({value:q.id,label:q.title??"Panel "+q.id,description:G(q),imgUrl:x.ZP.panels[q.type].info.logos.small}))??[],[le,G]),de=(0,v.wW)(F),ee=(0,c.Me)();if(!le)return null;if(ae.length<1)return y.createElement("p",{className:de.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const me=ae.find(q=>q.value===j.panelId);return y.createElement(y.Fragment,null,y.createElement(h.g,{label:"Source",description:"Use the same results as panel"},y.createElement(P.Ph,{inputId:ee,placeholder:"Choose panel",isSearchable:!0,options:ae,value:me,onChange:q=>re(q.value)})),y.createElement(a.Lh,{height:"auto",wrap:!0,align:"flex-start"},y.createElement(h.g,{label:"Data Source",description:"Use data or annotations from the panel",className:de.horizontalField},y.createElement(C.S,{options:U,value:j.topic===n.w5.Annotations,onChange:oe})),fe&&y.createElement(h.g,{label:"Transform",description:"Apply panel transformations from the source panel"},y.createElement(D.r,{value:Boolean(j.withTransforms),onChange:Z}))),k?y.createElement(b.$,null):y.createElement(y.Fragment,null,_&&Boolean(_.length)&&y.createElement(h.g,{label:"Queries from panel"},y.createElement(a.wc,{spacing:"sm"},_.map((q,ne)=>y.createElement(M.Z,{key:`DashboardQueryRow-${ne}`},y.createElement(M.Z.Heading,null,q.refId),y.createElement(M.Z.Figure,null,y.createElement("img",{src:q.img,alt:q.name,title:q.name,width:40})),y.createElement(M.Z.Meta,null,q.query)))))))}function F(w){return{horizontalField:(0,m.css)({marginRight:w.spacing(2)}),noQueriesText:(0,m.css)({padding:w.spacing(1.25)})}}},21471:(Y,T,e)=>{"use strict";e.d(T,{o:()=>t});const t="-- Dashboard --",n="dashboard"},35821:(Y,T,e)=>{"use strict";e.d(T,{k:()=>ct,e:()=>Ie});var t=e(82897),n=e(49372),i=e(59980),s=e(12877),l=e(9471),f=e(59957),u=e(52666),o=e(8891),d=e(53678),r=e(12115),m=e(83881),c=e(22069),p=e(20308),g=e(75118),y=e(54899),E=e(86647),v=e(7592),h=e(9398),P=e(9892),a=e(66111),C=e(72648),D=e(13393),b=e(24799),M=e(8581),x=e(8944),R=e(24357),S=e(70659),O=e(7832),U=e(36365),I=e.n(U),F=e(56808),w=e(52566),K=e(31403),L=e(52081),V=e(4883),H=e(10516),j=e(72505),A=e(39904),_=e(73267),k=e(85419);const Q="time-of-day-picker-panel",re=({minuteStep:Ke=1,showHour:Ge=!0,showSeconds:at=!1,onChange:dt,value:Re,size:ye="auto",disabled:Pe,disabledHours:be,disabledMinutes:Be,disabledSeconds:ke,placeholder:ot,format:ft="HH:mm",defaultValue:gt=void 0,allowEmpty:St=!1,width:ut})=>{const Dt=(0,C.wW)(oe),ie=()=>ut?P.css`
        width: ${ut}px;
      `:(0,_.ht)()[ye];return a.createElement(j.Z,{value:Re,defaultValue:gt,onChange:De=>dt(De),showHour:Ge,showSecond:at,format:ft,allowEmpty:St,className:(0,P.cx)(ie(),Dt.input),popupClassName:(0,P.cx)(Dt.picker,Q),minuteStep:Ke,inputIcon:a.createElement(Z,{wrapperStyle:Dt.caretWrapper}),disabled:Pe,disabledHours:be,disabledMinutes:Be,disabledSeconds:ke,placeholder:ot})},Z=({wrapperStyle:Ke=""})=>a.createElement("div",{className:Ke},a.createElement(A.J,{name:"angle-down"})),oe=Ke=>{const Ge=Ke.components.input.background,at=Ke.v1.palette.black,dt=Ke.colors.background.secondary,Re=Ke.shape.borderRadius(1),ye=Ke.components.input.borderColor;return{caretWrapper:P.css`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${Ke.colors.text.secondary};
    `,picker:P.css`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${Ge};
        border-color: ${ye};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${Ke.v1.palette.orange};
            border-radius: ${Re};
          }

          &:hover {
            background: ${dt};
          }

          &.rc-time-picker-panel-select-option-disabled {
            color: ${Ke.colors.action.disabledText};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${at};
        background-color: ${Ge};
        border-color: ${ye};
        border-radius: ${Re};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${Ge};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:P.css`
      .rc-time-picker-input {
        background-color: ${Ge};
        border-radius: ${Re};
        border-color: ${ye};
        height: ${Ke.spacing(4)};

        &:focus {
          ${(0,k.focusCss)(Ke)}
        }

        &:disabled {
          background-color: ${Ke.colors.action.disabledBackground};
          color: ${Ke.colors.action.disabledText};
          border: 1px solid ${Ke.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }

      .rc-time-picker-clear {
        position: absolute;
        right: 20px;
        top: 50%;
        cursor: pointer;
        overflow: hidden;
        transform: translateY(-50%);
        color: ${Ke.colors.text.secondary};
      }
    `}},G=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((Ke,Ge)=>({label:Ke,value:Ge+1})),le=({value:Ke,onChange:Ge})=>{const at=(0,C.wW)(fe),dt=Date.now(),Re=(0,F.Pr)(Ke.timezone??"utc",dt),ye=(0,h.h4)().getCurrent()?.getTimezone()===Ke.timezone,[Pe,be]=(0,a.useState)(!1),Be=()=>{be(!Pe)},ke=De=>{if(!De)return;const Ne=I()();if(De){const Je=De.split(":");Ne.set("hour",parseInt(Je[0],10)),Ne.set("minute",parseInt(Je[1],10))}return Ne},ot=()=>{let De="Everyday";return Ke.fromDayOfWeek&&!Ke.toDayOfWeek&&(De=G[Ke.fromDayOfWeek-1].label),De},ft=()=>{const De=a.createElement(a.Fragment,null,a.createElement(H.d,{title:Re?.name}),a.createElement(V.v,{timeZone:Ke.timezone,timestamp:dt}));return ye?a.createElement(a.Fragment,null,"Dashboard timezone (",De,")"):De},gt=(De,Ne)=>{const Je=De?De.format("HH:mm"):void 0;Ge(Ne==="from"?{...Ke,from:Je}:{...Ke,to:Je})},St=De=>{Ge({...Ke,timezone:De})},ut=De=>{const Ne=De?De.value:void 0,Je=De?Ke.toDayOfWeek:void 0;Ge({...Ke,fromDayOfWeek:Ne,toDayOfWeek:Je})},Dt=De=>{Ge({...Ke,toDayOfWeek:De?De.value:void 0})},ie=()=>Pe?a.createElement(w.O,{value:Ke.timezone,includeInternal:!0,onChange:De=>St(De),onBlur:()=>be(!1),menuShouldPortal:!0,openMenuOnFocus:!1,width:100,autoFocus:!0}):a.createElement("div",{className:at.timezoneContainer},a.createElement("div",{className:at.timezone},ft()),a.createElement(K.zx,{variant:"secondary",onClick:Be,size:"sm"},"Change timezone"));return a.createElement(D.C,{className:at.wrapper},a.createElement(b.g,{label:"From"},a.createElement(L.Lh,{spacing:"xs"},a.createElement(M.Ph,{options:G,isClearable:!0,placeholder:"Everyday",value:Ke.fromDayOfWeek??null,onChange:De=>ut(De),width:20}),a.createElement(re,{value:ke(Ke.from),onChange:De=>gt(De,"from"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),a.createElement(b.g,{label:"To"},a.createElement(L.Lh,{spacing:"xs"},(Ke.fromDayOfWeek||Ke.toDayOfWeek)&&a.createElement(M.Ph,{options:G,isClearable:!0,placeholder:ot(),value:Ke.toDayOfWeek??null,onChange:De=>Dt(De),width:20}),a.createElement(re,{value:ke(Ke.to),onChange:De=>gt(De,"to"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),a.createElement(b.g,{label:"Timezone"},ie()))},fe=Ke=>({wrapper:(0,P.css)({maxWidth:Ke.spacing(60),marginBottom:Ke.spacing(2)}),timezoneContainer:P.css`
      padding: 5px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
    `,timezone:P.css`
      margin-right: 5px;
    `}),ae="Enabling this returns annotations that match any of the tags specified below",de=a.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),ee=[{label:"Dashboard",value:O._$.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:O._$.Tags,description:"This will fetch any annotation events that match the tags filter"}],me=[{label:"Annotations & Alerts",value:O.hR.Annotations,description:"Show annotations or alerts managed by grafana"},{label:"Time regions",value:O.hR.TimeRegions,description:"Configure a repeating time region"}],q=[10,50,100,200,300,500,1e3,2e3].map(Ke=>({label:String(Ke),value:Ke}));function ne({query:Ke,onChange:Ge}){const at=Ke,{limit:dt,matchAny:Re,tags:ye,type:Pe,queryType:be}=at;let Be=be??O.hR.Annotations;const ke=(0,a.useMemo)(()=>(0,h.h4)().dashboard?.getTimezone(),[]),ot=(0,C.wW)(se),ft=De=>Ge({...at,type:De.value}),gt=De=>Ge({...at,limit:De.value}),St=De=>Ge({...at,matchAny:De.target.checked}),ut=De=>Ge({...at,tags:De}),Dt=De=>{const Ne={...at,queryType:De.value};Ne.queryType===O.hR.TimeRegions?Ne.timeRegion||(Ne.timeRegion={timezone:ke}):delete Ne.timeRegion,Ge(Ne)},ie=De=>{Ge({...at,timeRegion:De})};return a.createElement(D.C,{className:ot.container},a.createElement(b.g,{label:"Query type"},a.createElement(M.Ph,{inputId:"grafana-annotations__query-type",options:me,value:Be,onChange:Dt})),Be===O.hR.Annotations&&a.createElement(a.Fragment,null,a.createElement(b.g,{label:"Filter by"},a.createElement(M.Ph,{inputId:"grafana-annotations__filter-by",options:ee,value:Pe,onChange:ft})),a.createElement(b.g,{label:"Max limit"},a.createElement(M.Ph,{inputId:"grafana-annotations__limit",width:16,options:q,value:dt,onChange:gt})),Pe===O._$.Tags&&a.createElement(a.Fragment,null,a.createElement(b.g,{label:"Match any",description:ae},a.createElement(x.r,{id:"grafana-annotations__match-any",value:Re,onChange:St})),a.createElement(b.g,{label:"Tags",description:de},a.createElement(R.D,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:ut,tagOptions:S.lK,tags:ye??[]})))),Be===O.hR.TimeRegions&&at.timeRegion&&a.createElement(le,{value:at.timeRegion,onChange:ie}))}const se=Ke=>({container:(0,P.css)({maxWidth:Ke.spacing(60),marginBottom:Ke.spacing(2)})});var he=e(99098),ue=e(17804);function Te(Ke,Ge,at,dt){if(!Ge)return;const Re=(0,ue.q7)(Ge,at);if(!Re.length)return;const ye=[],Pe=[],be=[],Be=Ge.timezone??dt;for(const ke of Re){let ot=ke.from,ft=ke.to;const gt=(0,F.Pr)(Be,ot);if(gt){const St=gt.offsetInMins*60*1e3;ot+=St,ft+=St}ye.push(ot),Pe.push(ft),be.push(Ke)}return{fields:[{name:"time",type:he.fS.time,values:ye,config:{}},{name:"timeEnd",type:he.fS.time,values:Pe,config:{}},{name:"text",type:he.fS.string,values:be,config:{}}],length:ye.length}}let Ve=100;class ct extends c.CK{constructor(Ge){super(Ge),this.annotations={QueryEditor:ne,prepareAnnotation(at){return at.target=at.target??{type:at.type??O._$.Dashboard,limit:at.limit??100,tags:at.tags??[],matchAny:at.matchAny??!1},at},prepareQuery(at){let dt;if((0,t.isString)(at.datasource)){const Pe=(0,v.p)(at.datasource,{returnDefaultAsNull:!1});Pe&&(dt=Pe)}else dt=at.datasource;const{filter:Re,...ye}=at;return{...ye,refId:at.name,queryType:O.hR.Annotations,datasource:dt}}}}getDefaultQuery(){return{queryType:O.hR.RandomWalk}}query(Ge){const at=[],dt=[],Re=(0,p.J)();for(const ye of Ge.targets){if(ye.queryType===O.hR.Annotations)return(0,n.D)(this.getAnnotations({range:Ge.range,rangeRaw:Ge.range.raw,annotation:ye,dashboard:(0,h.h4)().getCurrent()}));if(!ye.hide){if(ye.queryType===O.hR.Snapshot){at.push((0,i.of)({data:(ye.snapshot??[]).map(Pe=>(0,f.vP)(Pe)),state:u.Gu.Done}));continue}if(ye.queryType===O.hR.TimeRegions){const Pe=Te("",ye.timeRegion,Ge.range,Ge.timezone);at.push((0,i.of)({data:Pe?[Pe]:[],state:u.Gu.Done}));continue}if(ye.queryType===O.hR.LiveMeasurements){let Pe=Re.replace(ye.channel,Ge.scopedVars);const{filter:be}=ye,Be=(0,o.H7)(Pe);if(!(0,o.nU)(Be))continue;const ke={maxLength:Ge.maxDataPoints??500};ye.buffer?(ke.maxDelta=ye.buffer,ke.maxLength=ke.maxLength*2):Ge.rangeRaw?.to==="now"&&(ke.maxDelta=Ge.range.to.valueOf()-Ge.range.from.valueOf()),at.push((0,g.gj)().getDataStream({key:`${Ge.requestId}.${Ve++}`,addr:Be,filter:be,buffer:ke}))}else ye.queryType||(ye.queryType=O.hR.RandomWalk),dt.push(ye)}}return dt.length&&at.push(super.query({...Ge,targets:dt})),at.length?at.length===1?at[0]:(0,s.T)(...at):(0,i.of)()}listFiles(Ge){return this.query({targets:[{refId:"A",queryType:O.hR.List,path:Ge}]}).pipe((0,l.U)(at=>{const dt=at.data[0]??new d.v;return new r.U(dt)}))}metricFindQuery(Ge){return Promise.resolve([])}async getAnnotations(Ge){const at=Ge.annotation.target;if(at?.queryType===O.hR.TimeRegions){const be=Te(Ge.annotation.name,at.timeRegion,Ge.range,(0,h.h4)().getCurrent()?.timezone);return Promise.resolve({data:be?[be]:[]})}const dt=Ge.annotation,Re=dt.target,ye={from:Ge.range.from.valueOf(),to:Ge.range.to.valueOf(),limit:Re.limit,tags:Re.tags,matchAny:Re.matchAny};if(Re.type===O._$.Dashboard){if(!Ge.dashboard.uid)return Promise.resolve({data:[]});ye.dashboardUID=Ge.dashboard.uid,delete ye.tags}else{if(!Array.isArray(Re.tags)||Re.tags.length===0)return Promise.resolve({data:[]});const be=(0,p.J)(),Be="__delimiter__",ke=[];for(const ot of ye.tags){const ft=be.replace(ot,{},gt=>typeof gt=="string"?gt:gt.join(Be));for(const gt of ft.split(Be))ke.push(gt)}ye.tags=ke}const Pe=await(0,y.i)().get("/api/annotations",ye,`grafana-data-source-annotations-${dt.name}-${Ge.dashboard?.uid}`);return{data:[(0,m.g0)(Pe)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}async function Ie(){return await(0,E.F)().get("-- Grafana --")}},7832:(Y,T,e)=>{"use strict";e.d(T,{_$:()=>i,hR:()=>t,wi:()=>n});var t=(s=>(s.LiveMeasurements="measurements",s.Annotations="annotations",s.Snapshot="snapshot",s.TimeRegions="timeRegions",s.RandomWalk="randomWalk",s.List="list",s.Read="read",s.Search="search",s))(t||{});const n={refId:"A",queryType:"randomWalk"};var i=(s=>(s.Dashboard="dashboard",s.Tags="tags",s))(i||{})},56991:(Y,T,e)=>{"use strict";e.d(T,{L:()=>s});var t=e(82897),n=e.n(t),i=e(66111);function s(){const l=(0,i.useRef)(null);return l.current==null&&(l.current=(0,t.uniqueId)()),l.current}},96606:(Y,T,e)=>{"use strict";e.d(T,{Wp:()=>f,c6:()=>o,xM:()=>s});var t=e(53678),n=e(99098),i=e(95638);function s(d){const r=d.spans.map(c=>l(c,d.processes)),m=new t.v({fields:[{name:"traceID",type:n.fS.string},{name:"spanID",type:n.fS.string},{name:"parentSpanID",type:n.fS.string},{name:"operationName",type:n.fS.string},{name:"serviceName",type:n.fS.string},{name:"serviceTags",type:n.fS.other},{name:"startTime",type:n.fS.number},{name:"duration",type:n.fS.number},{name:"logs",type:n.fS.other},{name:"tags",type:n.fS.other},{name:"warnings",type:n.fS.other},{name:"stackTraces",type:n.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"jaeger"}}});for(const c of r)m.add(c);return m}function l(d,r){return{spanID:d.spanID,traceID:d.traceID,parentSpanID:d.references?.find(m=>m.refType==="CHILD_OF")?.spanID,operationName:d.operationName,startTime:d.startTime/1e3,duration:d.duration/1e3,logs:d.logs.map(m=>({...m,timestamp:m.timestamp/1e3})),tags:d.tags,warnings:d.warnings??void 0,stackTraces:d.stackTraces,serviceName:r[d.processID].serviceName,serviceTags:r[d.processID].tags}}function f(d,r){const m=new t.v({fields:[{name:"traceID",type:n.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:r.uid,datasourceName:r.name,query:{query:"${__value.raw}"}}}]}},{name:"traceName",type:n.fS.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:n.fS.time,config:{displayNameFromDS:"Start time"}},{name:"duration",type:n.fS.number,config:{displayNameFromDS:"Duration",unit:"\xB5s"}}],meta:{preferredVisualisationType:"table"}}),c=d.map(u).sort((p,g)=>g?.startTime-p?.startTime);for(const p of c)m.add(p);return m}function u(d){const r=(0,i.transformTraceData)(d);if(r)return{traceID:r.traceID,startTime:r.startTime/1e3,duration:r.duration,traceName:r.traceName}}function o(d){let r={traceID:"",spans:[],processes:{},warnings:null},m=[];for(let c=0;c<d.length;c++){const p=d.get(c);r.traceID||(r.traceID=p.traceID),m.find(g=>g===p.serviceName)||(m.push(p.serviceName),r.processes[`p${m.length}`]={serviceName:p.serviceName,tags:p.serviceTags}),r.spans.push({traceID:p.traceID,spanID:p.spanID,duration:p.duration*1e3,references:p.parentSpanID?[{refType:"CHILD_OF",spanID:p.parentSpanID,traceID:p.traceID}]:[],flags:0,logs:p.logs.map(g=>({...g,timestamp:g.timestamp*1e3})),operationName:p.operationName,processID:Object.keys(r.processes).find(g=>r.processes[g].serviceName===p.serviceName)||"",startTime:p.startTime*1e3,tags:p.tags,warnings:p.warnings?p.warnings:null})}return{data:[r],total:0,limit:0,offset:0,errors:null}}},19370:(Y,T,e)=>{"use strict";e.d(T,{$5:()=>t,EH:()=>s,Rd:()=>i,ZP:()=>d,md:()=>l,r8:()=>f,uR:()=>n,xY:()=>o});const t=[{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"}],n=[{label:"json",insertText:"json",documentation:"Extracting labels from the log line using json parser."},{label:"regexp",insertText:'regexp ""',documentation:"Extracting labels from the log line using regexp parser.",move:-1},{label:"logfmt",insertText:"logfmt",documentation:"Extracting labels from the log line using logfmt parser."},{label:"pattern",insertText:"pattern",documentation:"Extracting labels from the log line using pattern parser. Only available in Loki 2.3+."},{label:"unpack",insertText:"unpack",detail:"unpack identifier",documentation:'Parses a JSON log line, unpacking all embedded labels in the pack stage. A special property "_entry" will also be used to replace the original log line. Only available in Loki 2.2+.'}],i=[{label:"unwrap",insertText:"unwrap",detail:"unwrap identifier",documentation:"Take labels and use the values as sample data for metric aggregations."},{label:"label_format",insertText:"label_format",documentation:"Use to rename, modify or add labels. For example, | label_format foo=bar ."},{label:"line_format",insertText:"line_format",documentation:'Rewrites log line content. For example, | line_format "{{.query}} {{.duration}}" .'}],s=[{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average of all values in the specified interval."},{insertText:"bytes_over_time",label:"bytes_over_time",detail:"bytes_over_time(range-vector)",documentation:"Counts the amount of bytes used by each log stream for a given range"},{insertText:"bytes_rate",label:"bytes_rate",detail:"bytes_rate(range-vector)",documentation:"Calculates the number of bytes per second for each stream."},{insertText:"first_over_time",label:"first_over_time",detail:"first_over_time(range-vector)",documentation:"The first of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The last of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum of all values in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the number of entries per second."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."}],l=[{insertText:"vector",label:"vector",detail:"vector(scalar)",documentation:"Returns the scalar as a vector with no labels."}],f=[...t,...s,...l],u=[...f,...i,...n].map(r=>r.label),o={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((without|by)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-zA-Z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},"context-pipe":{pattern:/\s\|[^=~]\s?\w*/i,inside:{"pipe-operator":{pattern:/\|/i,alias:"operator"},"pipe-operations":{pattern:new RegExp(`${[...n,...i].map(r=>r.label).join("|")}`,"i"),alias:"keyword"}}},function:new RegExp(`\\b(?:${f.map(r=>r.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=\])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],quote:{pattern:/"(?:\\.|[^\\"])*"/,alias:"string",greedy:!0},backticks:{pattern:/`(?:\\.|[^\\`])*`/,alias:"string",greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:/\s?(\|[=~]?|!=?|<(?:=>?|<|>)?|>[>=]?)\s?/i,punctuation:/[{}(),.]/},d=o},63496:(Y,T,e)=>{"use strict";e.d(T,{D:()=>E,w:()=>v});var t=e(82897),n=e.n(t),i=e(59980),s=e(49372),l=e(53208),f=e(39859),u=e(9471),o=e(76997),d=e(59724),r=e(7880),m=e(61474),c=e(89424),p=e(52666),g=e(86647),y=e(77599);const E="-- Mixed --";class v extends c.MF{constructor(a){super(a)}query(a){const C=a.targets.filter(M=>M.datasource?.uid!==E);if(!C.length)return(0,i.of)({data:[]});const D=(0,t.groupBy)(C,"datasource.uid"),b=[];for(const M in D){const x=D[M];b.push({datasource:(0,g.F)().get(x[0].datasource,a.scopedVars),targets:x})}return b.length?this.batchQueries(b,a):(0,i.of)({data:[]})}batchQueries(a,C){const D=a.filter(this.isQueryable).map((b,M)=>(0,s.D)(b.datasource).pipe((0,f.z)(x=>{const R=(0,t.cloneDeep)(C);return R.requestId=`mixed-${M}-${R.requestId||""}`,R.targets=b.targets,(0,s.D)(x.query(R)).pipe((0,u.U)(S=>({...S,data:S.data||[],state:p.Gu.Loading,key:`mixed-${M}-${S.key||""}`})),(0,o.q)(),(0,d.K)(S=>(S=(0,y.P)(S),S.message=`${x.name}: ${S.message}`,(0,i.of)([{data:[],state:p.Gu.Error,error:S,key:`mixed-${M}-${R.requestId||""}`}]))))})));return(0,l.D)(D).pipe(h(),(0,u.U)(this.finalizeResponses),(0,r.J)())}testDatasource(){return Promise.resolve({message:"",status:""})}isQueryable(a){return a&&Array.isArray(a.targets)&&a.targets.length>0}finalizeResponses(a){const{length:C}=a;if(C===0)return a;const D=a.find(b=>b.state===p.Gu.Error);return D?a.push(D):a[C-1].state=p.Gu.Done,a}}function h(){return(0,m.u)((P,a)=>a.reduce((C,D)=>(C.push.apply(C,D),C),P),[])}},21899:(Y,T,e)=>{"use strict";e.d(T,{Ty:()=>t,ZP:()=>d,r8:()=>f});const t=[{label:"$__interval",sortValue:"$__interval"},{label:"$__rate_interval",sortValue:"$__rate_interval"},{label:"$__range",sortValue:"$__range"},{label:"1m",sortValue:"00:01:00"},{label:"5m",sortValue:"00:05:00"},{label:"10m",sortValue:"00:10:00"},{label:"30m",sortValue:"00:30:00"},{label:"1h",sortValue:"01:00:00"},{label:"1d",sortValue:"24:00:00"}],n=["by","group_left","group_right","ignoring","on","offset","without"],i=null,s=[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:"calculates the arccosine of all elements in v"},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:"calculates the inverse hyperbolic cosine of all elements in v"},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:"calculates the arcsine of all elements in v"},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:"calculates the inverse hyperbolic sine of all elements in v"},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:"calculates the arctangent of all elements in v"},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:"calculates the inverse hyperbolic tangent of all elements in v"},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:"calculates the cosine of all elements in v"},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:"calculates the hyperbolic cosine of all elements in v"},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:"calculates the sine of all elements in v"},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:"calculates the hyperbolic sine of all elements in v"},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:"calculates the tangent of all elements in v"},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:"calculates the hyperbolic tangent of all elements in v"}],f=[...[{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"group",insertText:"group",documentation:"All values in the resulting vector are 1"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions"}],...s,{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:"Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:"Converts radians to degrees for all elements in v"},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(\u03C6 float, b instant-vector)",documentation:"Calculates the \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:"For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"pi",label:"pi",detail:"pi()",documentation:"Returns pi"},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:"Converts degrees to radians for all elements in v"},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:"Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:"Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The most recent point value in specified interval."}],u=f.map(r=>r.label),d={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${f.map(r=>r.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${n.join("|")})\\b`,"i"),punctuation:/[{};()`,.]/}},69407:(Y,T,e)=>{"use strict";e.d(T,{$C:()=>y,BC:()=>P,M7:()=>u,NZ:()=>p,T1:()=>v,Yt:()=>m,rB:()=>g,t3:()=>h,vO:()=>E,yf:()=>c});var t=e(12115),n=e(92468),i=e(53678),s=e(99098),l=e(53768),f=e(49427);function u(M){const{nodes:x,edges:R}=o(M),[S,O]=(0,f.np)();for(const U of x)S.add(U);for(const U of R)O.add(U);return[S,O]}function o(M){const x=[],R=[],S=new t.U(M),O=d(S),U=(0,f.nO)(I=>{if(I>=M.length)return;const F=S.get(I);return{span:{...F},id:F.spanID,parentIds:F.parentSpanID?[F.parentSpanID]:[]}});for(let I=0;I<S.length;I++){const F=S.get(I),w=U[F.spanID].children.map(H=>{const j=U[H].span;return[j.startTime,j.startTime+j.duration]}),K=(0,f.et)(w),L=F.duration-K,V=(0,f.fy)(F.duration,O,L);x.push({[n.z.id]:F.spanID,[n.z.title]:F.serviceName??"",[n.z.subTitle]:F.operationName,[n.z.mainStat]:V.main,[n.z.secondaryStat]:V.secondary,[n.z.color]:L/O}),F.parentSpanID&&U[F.parentSpanID].span&&R.push({[n.z.id]:F.parentSpanID+"--"+F.spanID,[n.z.target]:F.spanID,[n.z.source]:F.parentSpanID})}return{nodes:x,edges:R}}function d(M){let x=0,R=1/0;for(let S=0;S<M.length;S++){const O=M.get(S);O.startTime<R&&(R=O.startTime),O.startTime+O.duration>x&&(x=O.startTime+O.duration)}return x-R}const r="traces_service_graph_request_server_seconds_sum",m="traces_service_graph_request_total",c="traces_service_graph_request_failed_total",p="traces_service_graph_request_server_seconds_bucket",g={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:[]},y={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:['status_code="STATUS_CODE_ERROR"']},E={expr:"histogram_quantile(.9, sum(rate(traces_spanmetrics_latency_bucket{}[$__range])) by (le))",params:[]},v='span_kind="SPAN_KIND_SERVER"',h=[r,m,c,p];function P(M,x){const R=C(M),S={},O={};return D(R[m],"total",m,S,O),D(R[r],"seconds",r,S,O),D(R[c],"failed",c,S,O),b(S,O,x)}function a(){function M(S,O){return new i.v({name:S,fields:O,meta:{preferredVisualisationType:"nodeGraph"}})}const x=M("Nodes",[{name:n.z.id,type:s.fS.string},{name:n.z.title,type:s.fS.string,config:{displayName:"Service name"}},{name:n.z.mainStat,type:s.fS.number,config:{unit:"ms/r",displayName:"Average response time"}},{name:n.z.secondaryStat,type:s.fS.number,config:{unit:"r/sec",displayName:"Requests per second"}},{name:n.z.arc+"success",type:s.fS.number,config:{displayName:"Success",color:{fixedColor:"green",mode:l.S.Fixed}}},{name:n.z.arc+"failed",type:s.fS.number,config:{displayName:"Failed",color:{fixedColor:"red",mode:l.S.Fixed}}}]),R=M("Edges",[{name:n.z.id,type:s.fS.string},{name:n.z.source,type:s.fS.string},{name:n.z.target,type:s.fS.string},{name:n.z.mainStat,type:s.fS.number,config:{unit:"ms/r",displayName:"Average response time"}},{name:n.z.secondaryStat,type:s.fS.number,config:{unit:"r/sec",displayName:"Requests per second"}}]);return[x,R]}function C(M){return M[0].data.reduce((x,R)=>(x[R.refId]=new t.U(R),x),{})}function D(M,x,R,S,O){if(!M)return;const U=`Value #${R}`;for(let I=0;I<M.length;I++){const F=M.get(I),w=`${F.client}_${F.server}`;O[w]?O[w][x]=(O[w][x]||0)+F[U]:O[w]={target:F.server,source:F.client,[x]:F[U]},S[F.server]?S[F.server][x]=(S[F.server][x]||0)+F[U]:S[F.server]={[x]:F[U]},S[F.client]||(S[F.client]={[x]:0})}}function b(M,x,R){const[S,O]=a();for(const U of Object.keys(M)){const I=M[U];S.add({[n.z.id]:U,[n.z.title]:U,[n.z.mainStat]:I.total?I.seconds/I.total*1e3:Number.NaN,[n.z.secondaryStat]:I.total?Math.round(I.total*100)/100:Number.NaN,[n.z.arc+"success"]:I.total?(I.total-Math.min(I.failed||0,I.total))/I.total:1,[n.z.arc+"failed"]:I.total?Math.min(I.failed||0,I.total)/I.total:0})}for(const U of Object.keys(x)){const I=x[U];O.add({[n.z.id]:U,[n.z.source]:I.source,[n.z.target]:I.target,[n.z.mainStat]:I.total?I.seconds/I.total*1e3:Number.NaN,[n.z.secondaryStat]:I.total?Math.round(I.total*100)/100:Number.NaN})}return{nodes:S,edges:O}}},86146:(Y,T,e)=>{"use strict";e.d(T,{IM:()=>g,Jk:()=>D,RY:()=>o,g9:()=>y,n4:()=>b,xA:()=>x});var t=e(77156),n=e(64018),i=e(53678),s=e(99098),l=e(77258),f=e(69407);function u(U,I,F,w){const K=new i.v({fields:[{name:"Time",type:s.fS.time,config:{custom:{width:200}}},{name:"traceID",type:s.fS.string,config:{displayNameFromDS:"Trace ID",custom:{width:180},links:[{title:"Click to open trace ${__value.raw}",url:"",internal:{datasourceUid:I,datasourceName:F,query:{query:"${__value.raw}"}}}]}},{name:"Message",type:s.fS.string}],meta:{preferredVisualisationType:"table"}});if(!U||w.length===0)return K;const L=U.fields.find(V=>V.type===s.fS.time);for(let V of U.fields){let H=!1;if(V.type===s.fS.string){const j=V.values;for(let A=0;A<j.length;A++){const _=j[A];if(_)for(let k of w){const Q=_.match(k);if(Q){const re=Q[1],Z=L?L.values[A]:null;K.fields[0].values.push(Z),K.fields[1].values.push(re),K.fields[2].values.push(_),H=!0}}}}if(H)break}return K}function o(U,I,F,w){return U.data.forEach((K,L)=>{const V=u(K,I,F,w);U.data[L]=V}),U}function d(U){if(U.stringValue)return U.stringValue;if(U.boolValue!==void 0)return Boolean(U.boolValue);if(U.intValue!==void 0)return Number.parseInt(U.intValue,10);if(U.doubleValue)return Number.parseFloat(U.doubleValue);if(U.arrayValue){const I=[];for(const F of U.arrayValue.values)I.push(d(F));return I}return""}function r(U){const I=[];let F="OTLPResourceNoServiceName";if(!U)return{serviceName:F,serviceTags:I};for(const w of U.attributes)w.key===n.R9.SERVICE_NAME&&(F=w.value.stringValue||F),I.push({key:w.key,value:d(w.value)});return{serviceName:F,serviceTags:I}}function m(U,I){const F=[];if(I&&(I.name&&F.push({key:"otel.library.name",value:I.name}),I.version&&F.push({key:"otel.library.version",value:I.version})),U.attributes)for(const w of U.attributes)F.push({key:w.key,value:d(w.value)});if(U.status&&(U.status.code&&U.status.code!==t.Q.UNSET&&(F.push({key:"otel.status_code",value:t.Q[U.status.code]}),U.status.message&&F.push({key:"otel.status_description",value:U.status.message})),U.status.code===t.Q.ERROR&&F.push({key:"error",value:!0})),U.kind!==void 0){const w=U.kind.toString().toLowerCase().split("_");F.push({key:"span.kind",value:w.length?w[w.length-1]:U.kind.toString()})}return F}function c(U){const I=[];if(U.links)for(const F of U.links){const{traceId:w,spanId:K}=F,L=[];if(F.attributes)for(const V of F.attributes)L.push({key:V.key,value:d(V.value)});I.push({traceID:w,spanID:K,tags:L})}return I}function p(U){const I=[];if(U.events)for(const F of U.events){const w=[];if(F.attributes)for(const K of F.attributes)w.push({key:K.key,value:d(K.value)});I.push({fields:w,timestamp:F.timeUnixNano/1e6})}return I}function g(U,I=!1){const F=new i.v({fields:[{name:"traceID",type:s.fS.string},{name:"spanID",type:s.fS.string},{name:"parentSpanID",type:s.fS.string},{name:"operationName",type:s.fS.string},{name:"serviceName",type:s.fS.string},{name:"serviceTags",type:s.fS.other},{name:"startTime",type:s.fS.number},{name:"duration",type:s.fS.number},{name:"logs",type:s.fS.other},{name:"references",type:s.fS.other},{name:"tags",type:s.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}});try{for(const K of U){const{serviceName:L,serviceTags:V}=r(K.resource);for(const H of K.instrumentationLibrarySpans)for(const j of H.spans)F.add({traceID:j.traceId.length>16?j.traceId.slice(16):j.traceId,spanID:j.spanId,parentSpanID:j.parentSpanId||"",operationName:j.name||"",serviceName:L,serviceTags:V,startTime:j.startTimeUnixNano/1e6,duration:(j.endTimeUnixNano-j.startTimeUnixNano)/1e6,tags:m(j,H.instrumentationLibrary),logs:p(j),references:c(j)})}}catch(K){return console.error(K),{error:{message:"JSON is not valid OpenTelemetry format: "+K},data:[]}}let w=[F];return I&&w.push(...(0,f.M7)(F)),{data:w}}function y(U){let I={batches:[]},F={};for(let w=0;w<U.length;w++){const K=U.get(w);F[K.serviceName]||(F[K.serviceName]=I.batches.length,I.batches.push({resource:{attributes:[],droppedAttributesCount:0},instrumentationLibrarySpans:[{spans:[]}]}));let L=F[K.serviceName];if(I.batches[L].resource.attributes.length===0&&(I.batches[L].resource.attributes=v(K.serviceTags)),!I.batches[L].instrumentationLibrarySpans[0].instrumentationLibrary){let V=K.tags.find(H=>H.key==="otel.library.name")?.value;V&&(I.batches[L].instrumentationLibrarySpans[0].instrumentationLibrary={name:V,version:K.tags.find(H=>H.key==="otel.library.version")?.value})}I.batches[L].instrumentationLibrarySpans[0].spans.push({traceId:K.traceID.padStart(32,"0"),spanId:K.spanID,parentSpanId:K.parentSpanID||"",traceState:"",name:K.operationName,kind:E(K.tags),startTimeUnixNano:K.startTime*1e6,endTimeUnixNano:(K.startTime+K.duration)*1e6,attributes:v(K.tags),droppedAttributesCount:0,droppedEventsCount:0,droppedLinksCount:0,status:P(K.tags),events:a(K.logs),links:C(K.references)})}return I}function E(U){let I;switch(U.find(w=>w.key==="span.kind")?.value){case"server":I="SPAN_KIND_SERVER";break;case"client":I="SPAN_KIND_CLIENT";break;case"producer":I="SPAN_KIND_PRODUCER";break;case"consumer":I="SPAN_KIND_CONSUMER";break}return I}function v(U){return U.filter(I=>!["span.kind","otel.library.name","otel.libary.version","otel.status_description","otel.status_code"].includes(I.key)).reduce((I,F)=>[...I,{key:F.key,value:h(F)}],[])}function h(U){if(typeof U.value=="string")return{stringValue:U.value};if(typeof U.value=="boolean")return{boolValue:U.value};if(typeof U.value=="number")return U.value%1===0?{intValue:U.value}:{doubleValue:U.value};if(typeof U.value=="object"&&Array.isArray(U.value)){const I=[];for(const F of U.value)I.push(h(F));return{arrayValue:{values:I}}}return{stringValue:U.value}}function P(U){let I;const F=U.find(w=>w.key==="otel.status_code");return F&&(I={code:F.value,message:U.find(w=>w.key==="otel_status_description")?.value}),I}function a(U){if(!U||!U.length)return;let I=[];for(const F of U){let w={timeUnixNano:F.timestamp*1e6,attributes:[],droppedAttributesCount:0,name:""};for(const K of F.fields)w.attributes.push({key:K.key,value:h(K)});I.push(w)}return I}function C(U){if(!U||!U.length)return;let I=[];for(const F of U){let w={traceId:F.traceID,spanId:F.spanID,attributes:[],droppedAttributesCount:0};if(F.tags?.length)for(const K of F.tags)w.attributes?.push({key:K.key,value:h(K)});I.push(w)}return I}function D(U,I=!1){const F=U.data[0];if(!F)return O;let w=[...U.data];return I&&w.push(...(0,f.M7)(F)),{...U,data:w}}function b(U,I){const F=new i.v({fields:[{name:"traceID",type:s.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:I.uid,datasourceName:I.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"traceName",type:s.fS.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:s.fS.string,config:{displayNameFromDS:"Start time"}},{name:"traceDuration",type:s.fS.number,config:{displayNameFromDS:"Duration",unit:"ms"}}],meta:{preferredVisualisationType:"table"}});if(!U?.length)return F;const w=U.sort((K,L)=>parseInt(L?.startTimeUnixNano,10)/1e6-parseInt(K?.startTimeUnixNano,10)/1e6).map(M);for(const K of w)F.add(K);return F}function M(U){let I="";U.rootServiceName&&(I+=U.rootServiceName+" "),U.rootTraceName&&(I+=U.rootTraceName);const F=parseInt(U.startTimeUnixNano,10)/1e6;let w=isNaN(F)?"":(0,l.dq)(F);return{traceID:U.traceID,startTime:w,traceDuration:U.durationMs?.toString(),traceName:I}}function x(U,I){const F=new i.v({fields:[{name:"traceID",type:s.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",custom:{width:200},links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:I.uid,datasourceName:I.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"startTime",type:s.fS.string,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"traceName",type:s.fS.string,config:{displayNameFromDS:"Name"}},{name:"traceDuration",type:s.fS.number,config:{displayNameFromDS:"Duration",unit:"ms",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}});if(!U?.length)return[F];const w=[],K=U.sort((L,V)=>parseInt(V?.startTimeUnixNano,10)/1e6-parseInt(L?.startTimeUnixNano,10)/1e6).reduce((L,V,H)=>{const j=M(V);return L.push(j),w.push(R(V,I,H)),L},[]);for(const L of K)F.add(L);return[F,...w]}const R=(U,I,F)=>{const w={};let K=!1;U.spanSet?.spans.forEach(V=>{V.name&&(K=!0),V.attributes?.forEach(H=>{w[H.key]={name:H.key,type:s.fS.string,config:{displayNameFromDS:H.key}}})});const L=new i.v({fields:[{name:"traceIdHidden",config:{custom:{hidden:!0}}},{name:"spanID",type:s.fS.string,config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:I.uid,datasourceName:I.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"spanStartTime",type:s.fS.string,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"name",type:s.fS.string,config:{displayNameFromDS:"Name",custom:{hidden:!K}}},...Object.values(w),{name:"duration",type:s.fS.number,config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table",custom:{parentRowIndex:F}}});return U.spanSet?.spans.forEach(V=>{L.add(S(V,U.traceID))}),L};function S(U,I){const F=parseInt(U.startTimeUnixNano,10)/1e6;let w=(0,l.dq)(F);const K={traceIdHidden:I,spanID:U.spanID,spanStartTime:w,duration:parseInt(U.durationNanos,10),name:U.name};return U.attributes?.forEach(L=>{L.value.boolValue&&(K[L.key]=L.value.boolValue),L.value.doubleValue&&(K[L.key]=L.value.doubleValue),L.value.intValue&&(K[L.key]=L.value.intValue),L.value.stringValue&&(K[L.key]=L.value.stringValue)}),K}const O={data:[new i.v({fields:[{name:"trace",type:s.fS.trace,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}})]}},26991:(Y,T,e)=>{"use strict";e.d(T,{H:()=>r,m:()=>l});var t=e(82897),n=e.n(t),i=e(53678),s=e(99098);function l(c){const p=c.map(f),g=new i.v({fields:[{name:"traceID",type:s.fS.string},{name:"spanID",type:s.fS.string},{name:"parentSpanID",type:s.fS.string},{name:"operationName",type:s.fS.string},{name:"serviceName",type:s.fS.string},{name:"serviceTags",type:s.fS.other},{name:"startTime",type:s.fS.number},{name:"duration",type:s.fS.number},{name:"logs",type:s.fS.other},{name:"tags",type:s.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"zipkin"}}});for(const y of p)g.add(y);return g}function f(c){const p={traceID:c.traceId,spanID:c.id,parentSpanID:c.parentId,operationName:c.name,serviceName:c.localEndpoint?.serviceName||c.remoteEndpoint?.serviceName||"unknown",serviceTags:o(c),startTime:c.timestamp/1e3,duration:c.duration/1e3,logs:c.annotations?.map(u)??[],tags:Object.keys(c.tags||{}).reduce((g,y)=>y==="error"?(g.push({key:"error",value:!0}),g.push({key:"errorValue",value:c.tags.error}),g):(g.push({key:y,value:c.tags[y]}),g),[])};return c.kind&&(p.tags=[{key:"kind",value:c.kind},...p.tags??[]]),c.shared&&(p.tags=[{key:"shared",value:c.shared},...p.tags??[]]),p}function u(c){return{timestamp:c.timestamp,fields:[{key:"annotation",value:c.value}]}}function o(c){const p=c.localEndpoint||c.remoteEndpoint;return p?[d("ipv4",p.ipv4),d("ipv6",p.ipv6),d("port",p.port),d("endpointType",c.localEndpoint?"local":"remote")].filter(t.identity):[]}function d(c,p){if(p)return{key:c,value:p}}const r=c=>{let p=[];for(let g=0;g<c.length;g++){const y=c.get(g);p.push({traceId:y.traceID,parentId:y.parentSpanID,name:y.operationName,id:y.spanID,timestamp:y.startTime*1e3,duration:y.duration*1e3,...m(y),annotations:y.logs.length?y.logs.map(E=>({timestamp:E.timestamp,value:E.fields[0].value})):void 0,tags:y.tags.length?y.tags.filter(E=>E.key!=="kind"&&E.key!=="endpointType"&&E.key!=="shared").reduce((E,v)=>v.key==="error"?{...E,[v.key]:y.tags.find(h=>h.key==="errorValue").value||""}:{...E,[v.key]:v.value},{}):void 0,kind:y.tags.find(E=>E.key==="kind")?.value,shared:y.tags.find(E=>E.key==="shared")?.value})}return p},m=c=>{const p=c.serviceTags.find(g=>g.key==="endpointType")?.value==="local"?"localEndpoint":"remoteEndpoint";return c.serviceName!=="unknown"?{[p]:{serviceName:c.serviceName,ipv4:c.serviceTags.find(g=>g.key==="ipv4")?.value,ipv6:c.serviceTags.find(g=>g.key==="ipv6")?.value,port:c.serviceTags.find(g=>g.key==="port")?.value}}:void 0}},40286:(Y,T,e)=>{"use strict";e.d(T,{As:()=>t,LM:()=>i,kx:()=>n,wO:()=>s});var t=(l=>(l[l.AlphaAsc=1]="AlphaAsc",l[l.AlphaDesc=2]="AlphaDesc",l[l.Importance=3]="Importance",l[l.TimeAsc=4]="TimeAsc",l[l.TimeDesc=5]="TimeDesc",l))(t||{}),n=(l=>(l.Current="current",l.RecentChanges="changes",l))(n||{}),i=(l=>(l.Default="default",l.Custom="custom",l))(i||{}),s=(l=>(l.List="list",l.Stat="stat",l))(s||{})},28586:(Y,T,e)=>{"use strict";e.d(T,{Gj:()=>n,Qm:()=>f});var t=e(56190);const n=1,i=2,s=3,l=(u,o,d,r)=>(0,t.O)(o+u*(d+r),6);function f(u,o,d,r,m){let c=1-o,p=d===n?c/(u-1):d===i?c/u:d===s?c/(u+1):0;(isNaN(p)||p===1/0)&&(p=0);let g=d===n?0:d===i?p/2:d===s?p:0,y=o/u,E=(0,t.O)(y,6);if(r==null)for(let v=0;v<u;v++)m(v,l(v,g,y,p),E);else m(r,l(r,g,y,p),E)}},60892:(Y,T,e)=>{"use strict";e.d(T,{Pn:()=>i,kK:()=>l,lW:()=>f,zZ:()=>s});const t=10,n=4;function i(u,o,d,r,m,c){return u>=d&&u<=m&&o>=r&&o<=c}function s(u,o,d){let r;if(u.o.length&&(r=u.o.find(m=>m.sidx===o&&m.didx===d)),r==null&&u.q)for(let m=0;m<u.q.length&&(r=s(u.q[m],o,d),!r);m++);return r}function l(u,o){return u.x<=o.x+o.w&&u.x+u.w>=o.x&&u.y+u.h>=o.y&&u.y<=o.y+o.h}class f{constructor(o,d,r,m,c=0){this.x=o,this.y=d,this.w=r,this.h=m,this.l=c,this.o=[],this.q=null}split(){let o=this,d=o.x,r=o.y,m=o.w/2,c=o.h/2,p=o.l+1;o.q=[new f(d+m,r,m,c,p),new f(d,r,m,c,p),new f(d,r+c,m,c,p),new f(d+m,r+c,m,c,p)]}quads(o,d,r,m,c){let p=this,g=p.q,y=p.x+p.w/2,E=p.y+p.h/2,v=d<E,h=o<y,P=o+r>y,a=d+m>E;v&&P&&c(g[0]),h&&v&&c(g[1]),h&&a&&c(g[2]),P&&a&&c(g[3])}add(o){let d=this;if(d.q!=null)d.quads(o.x,o.y,o.w,o.h,r=>{r.add(o)});else{let r=d.o;if(r.push(o),r.length>t&&d.l<n){d.split();for(let m=0;m<r.length;m++){let c=r[m];d.quads(c.x,c.y,c.w,c.h,p=>{p.add(c)})}d.o.length=0}}}get(o,d,r,m,c){let p=this,g=p.o;for(let y=0;y<g.length;y++)c(g[y]);p.q!=null&&p.quads(o,d,r,m,y=>{y.get(o,d,r,m,c)})}clear(){this.o.length=0,this.q=null}}},63992:(Y,T,e)=>{"use strict";e.d(T,{M:()=>r,l:()=>m});var t=e(82897),n=e.n(t),i=e(66111),s=e(82229),l=e(92156),f=e(19670),u=e(18543),o=e(4387),d=e(47694);class r extends i.PureComponent{constructor(){super(...arguments),this.renderComponent=(p,g)=>{const{options:y,fieldConfig:E}=this.props,{value:v,alignmentFactors:h,orientation:P,width:a,height:C,count:D}=p,{field:b,display:M,view:x,colIndex:R}=v,{openMenu:S,targetClassName:O}=g;let U;return x&&(0,t.isNumber)(R)&&(U=x.getFieldDisplayProcessor(R)),i.createElement(f.xf,{value:m(D,E.defaults,M),width:a,height:C,orientation:P,field:b,text:y.text,display:U,theme:d.vc.theme2,itemSpacing:this.getItemSpacing(),displayMode:y.displayMode,onClick:S,className:O,alignmentFactors:D>1?h:void 0,showUnfilled:y.showUnfilled,valueDisplayMode:y.valueMode})},this.renderValue=p=>{const{value:g,orientation:y}=p,{hasLinks:E,getLinks:v}=g;return E&&v?i.createElement("div",{style:{width:"100%",display:y===s.wm.Vertical?"flex":"initial"}},i.createElement(u.V,{links:v},h=>this.renderComponent(p,h))):this.renderComponent(p,{})},this.getValues=()=>{const{data:p,options:g,replaceVariables:y,fieldConfig:E,timeZone:v}=this.props;return(0,l.nG)({fieldConfig:E,reduceOptions:g.reduceOptions,replaceVariables:y,theme:d.vc.theme2,data:p.series,timeZone:v})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}render(){const{height:p,width:g,options:y,data:E,renderCounter:v}=this.props;return i.createElement(o.Q,{source:E,getAlignmentFactors:l.sg,getValues:this.getValues,renderValue:this.renderValue,renderCounter:v,width:g,height:p,minVizWidth:y.minVizWidth,minVizHeight:y.minVizHeight,itemSpacing:this.getItemSpacing(),orientation:y.orientation})}}function m(c,p,g){return c===1&&!p.displayName?{...g,title:void 0}:g}},19919:(Y,T,e)=>{"use strict";e.d(T,{Z:()=>ye});var t=e(9892),n=e(66111),i=e(27443),s=e(72648);const l=22*window.devicePixelRatio,f=10*window.devicePixelRatio,u=.5*window.devicePixelRatio,o=20*window.devicePixelRatio,d=.5*window.devicePixelRatio,r=4*window.devicePixelRatio,m=800,c=120;var p=e(22759),g=e(42044),y=e(30909);const v=({contextMenuData:Pe,graphRef:be,totalTicks:Be,levels:ke,setContextMenuData:ot,setTopLevelIndex:ft,setSelectedBarIndex:gt,setRangeMin:St,setRangeMax:ut,data:Dt})=>{const ie=ke[Pe.levelIndex][Pe.barIndex],De=()=>n.createElement(n.Fragment,null,n.createElement(g.s,{label:"Focus block",icon:"eye",onClick:()=>{be.current&&Pe&&(ft(Pe.levelIndex),gt(Pe.barIndex),St(ie.start/Be),ut((ie.start+Dt.getValue(ie.itemIndex))/Be),ot(void 0))}}),n.createElement(g.s,{label:"Copy function name",icon:"copy",onClick:()=>{be.current&&Pe&&navigator.clipboard.writeText(Dt.getLabel(ie.itemIndex)).then(()=>{ot(void 0)})}}));return n.createElement("div",{"data-testid":"contextMenu"},Pe.e.clientX&&Pe.e.clientY&&n.createElement(y.x,{renderMenuItems:()=>De(),x:Pe.e.clientX+10,y:Pe.e.clientY,focusOnOpen:!1}))},h=n.memo(({data:Pe,levels:be,topLevelIndex:Be,selectedBarIndex:ke,totalTicks:ot})=>{const ft=(0,s.wW)(a);if(be[Be]&&be[Be][ke]){const gt=be[Be][ke],St=P(Pe,gt,ot),ut=`${St?.unitValue} (${St?.percentValue}%) of ${St?.samples} total samples (${St?.unitTitle})`;return n.createElement(n.Fragment,null,n.createElement("div",{className:ft.metadata},ut))}return n.createElement(n.Fragment,null)}),P=(Pe,be,Be)=>{const ke=Pe.getValueDisplay(be.itemIndex),ot=Math.round(1e4*(ke.numeric/Be))/100;let ft=ke.text+ke.suffix;const gt=Pe.getUnitTitle();return gt==="Count"&&(ke.suffix||(ft=ke.text)),{percentValue:ot,unitTitle:gt,unitValue:ft,samples:Be.toLocaleString()}};h.displayName="FlameGraphMetadata";const a=()=>({metadata:t.css`
    margin: 8px 0;
    text-align: center;
  `}),C=h,D=({data:Pe,tooltipRef:be,item:Be,totalTicks:ke})=>{const ot=(0,s.wW)(M);let ft=null;if(Be){const gt=b(Pe,Be,ke);ft=n.createElement("div",{className:ot.tooltipContent},n.createElement("p",null,Pe.getLabel(Be.itemIndex)),n.createElement("p",{className:ot.lastParagraph},gt.unitTitle,n.createElement("br",null),"Total: ",n.createElement("b",null,gt.unitValue)," (",gt.percentValue,"%)",n.createElement("br",null),"Self: ",n.createElement("b",null,gt.unitSelf)," (",gt.percentSelf,"%)",n.createElement("br",null),"Samples: ",n.createElement("b",null,gt.samples)))}return n.createElement("div",{ref:be,className:ot.tooltip},ft)},b=(Pe,be,Be)=>{const ke=Pe.getValueDisplay(be.itemIndex),ot=Pe.getSelfDisplay(be.itemIndex),ft=Math.round(1e4*(ke.numeric/Be))/100,gt=Math.round(1e4*(ot.numeric/Be))/100;let St=ke.text+ke.suffix,ut=ot.text+ot.suffix;const Dt=Pe.getUnitTitle();return Dt==="Count"&&(ke.suffix||(St=ke.text),ot.suffix||(ut=ot.text)),{name:Pe.getLabel(be.itemIndex),percentValue:ft,percentSelf:gt,unitTitle:Dt,unitValue:St,unitSelf:ut,samples:ke.numeric.toLocaleString()}},M=Pe=>({tooltip:t.css`
    title: tooltip;
    position: fixed;
  `,tooltipContent:t.css`
    title: tooltipContent;
    background-color: ${Pe.components.tooltip.background};
    border-radius: ${Pe.shape.radius.default};
    border: 1px solid ${Pe.components.tooltip.background};
    box-shadow: ${Pe.shadows.z2};
    color: ${Pe.components.tooltip.text};
    font-size: ${Pe.typography.bodySmall.fontSize};
    padding: ${Pe.spacing(.5,1)};
    transition: opacity 0.3s;
    z-index: ${Pe.zIndex.tooltip};
    max-width: 400px;
    overflow-wrap: break-word;
  `,lastParagraph:t.css`
    title: lastParagraph;
    margin-bottom: 0;
  `,name:t.css`
    title: name;
    margin-bottom: 10px;
  `}),x=D;var R=e(16514);function S(Pe,be,Be,ke,ot,ft){const gt=[];for(let St=0;St<be.length;St+=1){const ut=be[St],Dt=U(ut.start,ke,ot,ft);let ie=Pe.getValue(ut.itemIndex);const De=ie*ft<=f;if(De)for(;St<be.length-1&&ut.start+ie===be[St+1].start&&Pe.getValue(be[St+1].itemIndex)*ft<=f;)St+=1,ie+=Pe.getValue(be[St].itemIndex);const Ne=Pe.getValueDisplay(ut.itemIndex);let Je=Ne.suffix?Ne.text+Ne.suffix:Ne.text;const Xe=ie*ft-(De?0:d*2);gt.push({width:Xe,height:l,x:Dt,y:Be*l,collapsed:De,ticks:ie,label:Pe.getLabel(ut.itemIndex),unitLabel:Je})}return gt}function O(Pe,be,Be,ke,ot,ft,gt,St,ut){if(be.width<u)return;Pe.beginPath(),Pe.rect(be.x+(be.collapsed?0:d),be.y,be.width,be.height);const Dt=Math.min(1,be.ticks/Be/(ot-ke)),ie=50-50*Dt,De=65+7*Dt,Ne=be.label;be.collapsed?Pe.fillStyle=ut.has(Ne)?I(ie,De):R.O9[55]:(Pe.stroke(),ft?Pe.fillStyle=ut.has(Ne)?I(ie,De):R.O9[55]:Pe.fillStyle=gt>St-1?I(ie,De):I(ie,De+15)),Pe.fill(),!be.collapsed&&be.width>=o&&(Pe.save(),Pe.clip(),Pe.fillStyle="#222",Pe.fillText(`${Ne} (${be.unitLabel})`,Math.max(be.x,0)+r,be.y+l/2),Pe.restore())}function U(Pe,be,Be,ke){return(Pe-be*Be)*ke}function I(Pe,be){return`hsl(${Pe}, 100%, ${be}%)`}const F=({data:Pe,app:be,levels:Be,topLevelIndex:ke,selectedBarIndex:ot,rangeMin:ft,rangeMax:gt,search:St,setTopLevelIndex:ut,setSelectedBarIndex:Dt,setRangeMin:ie,setRangeMax:De,selectedView:Ne})=>{const Je=(0,s.wW)(w),Xe=Pe.getValue(0),[Le,{width:Ue}]=(0,i.Z)(),ve=(0,n.useRef)(null),Se=(0,n.useRef)(null),[$e,Ye]=(0,n.useState)(),[_e,Et]=(0,n.useState)(),[pt]=(0,n.useState)(()=>new p.Z),je=(0,n.useMemo)(()=>{const ht=new Set;if(St){let we=pt.filter(Pe.getUniqueLabels(),St);if(we)for(let Qe of we)ht.add(Pe.getUniqueLabels()[Qe])}return ht},[pt,St,Pe]);return(0,n.useEffect)(()=>{if(!Be.length)return;const ht=Ue*window.devicePixelRatio/Xe/(gt-ft),we=ve.current?.getContext("2d"),Qe=ve.current,nt=l*Be.length;Qe.width=Math.round(Ue*window.devicePixelRatio),Qe.height=Math.round(nt*window.devicePixelRatio),Qe.style.width=`${Ue}px`,Qe.style.height=`${nt}px`,we.textBaseline="middle",we.font=12*window.devicePixelRatio+"px monospace",we.strokeStyle="white";for(let it=0;it<Be.length;it++){const yt=Be[it],Lt=S(Pe,yt,it,Xe,ft,ht);for(const Kt of Lt)O(we,Kt,Xe,ft,gt,St,it,ke,je)}},[Pe,Be,Ue,Xe,ft,gt,St,ke,je]),(0,n.useEffect)(()=>{ve.current&&(ve.current.onclick=ht=>{Ye(void 0);const we=ve.current.clientWidth/Xe/(gt-ft),{levelIndex:Qe,barIndex:nt}=K(Pe,ht,we,Be,Xe,ft);nt!==-1&&!isNaN(Qe)&&!isNaN(nt)?Et({e:ht,levelIndex:Qe,barIndex:nt}):Et(void 0)},ve.current.onmousemove=ht=>{if(Se.current&&_e===void 0){Ye(void 0);const we=ve.current.clientWidth/Xe/(gt-ft),{levelIndex:Qe,barIndex:nt}=K(Pe,ht,we,Be,Xe,ft);nt!==-1&&!isNaN(Qe)&&!isNaN(nt)&&(Se.current.style.top=ht.clientY+"px",document.documentElement.clientWidth-ht.clientX<400?(Se.current.style.right=document.documentElement.clientWidth-ht.clientX+15+"px",Se.current.style.left="auto"):(Se.current.style.left=ht.clientX+15+"px",Se.current.style.right="auto"),Ye(Be[Qe][nt]))}},ve.current.onmouseleave=()=>{Ye(void 0)})},[Pe,Be,ft,gt,ke,Xe,Ue,ut,ie,De,Ne,Dt,Et,_e]),(0,n.useEffect)(()=>{const ht=we=>{we.target.parentElement?.id!=="flameGraphCanvasContainer"&&Et(void 0)};return window.addEventListener("click",ht),()=>window.removeEventListener("click",ht)},[Et]),n.createElement("div",{className:Je.graph,ref:Le},n.createElement(C,{data:Pe,levels:Be,topLevelIndex:ke,selectedBarIndex:ot,totalTicks:Xe}),n.createElement("div",{className:Je.canvasContainer,id:"flameGraphCanvasContainer"},n.createElement("canvas",{ref:ve,"data-testid":"flameGraph"})),n.createElement(x,{tooltipRef:Se,item:$e,data:Pe,totalTicks:Xe}),_e&&n.createElement(v,{data:Pe,contextMenuData:_e,levels:Be,totalTicks:Xe,graphRef:ve,setContextMenuData:Et,setTopLevelIndex:ut,setSelectedBarIndex:Dt,setRangeMin:ie,setRangeMax:De}))},w=()=>({graph:t.css`
    overflow: scroll;
    height: 100%;
    flex-grow: 1;
    flex-basis: 50%;
  `,canvasContainer:t.css`
    cursor: pointer;
  `}),K=(Pe,be,Be,ke,ot,ft)=>{const gt=Math.floor(be.offsetY/(l/window.devicePixelRatio)),St=L(be.offsetX,Pe,ke[gt],Be,ot,ft);return{levelIndex:gt,barIndex:St}},L=(Pe,be,Be,ke,ot,ft)=>{if(Be){let gt=0,St=Be.length-1;for(;gt<=St;){const ut=gt+St>>1,Dt=U(Be[ut].start,ot,ft,ke),ie=U(Be[ut].start+be.getValue(Be[ut].itemIndex),ot,ft,ke);if(Dt<=Pe&&ie>=Pe)return ut;Dt>Pe?St=ut-1:gt=ut+1}}return-1},V=F;var H=e(21544),j=e(6194),A=(Pe=>(Pe.Bytes="bytes",Pe.Short="short",Pe.Nanoseconds="ns",Pe))(A||{}),_=(Pe=>(Pe.Symbol="Symbol",Pe.Self="Self",Pe.Total="Total",Pe))(_||{}),k=(Pe=>(Pe.TopTable="topTable",Pe.FlameGraph="flameGraph",Pe.Both="both",Pe))(k||{});function Q(Pe){const be=[];let Be=0;for(let ke=0;ke<Pe.data.length;ke++){const ot=Pe.getLevel(ke),ft=ke>0?Pe.getLevel(ke-1):void 0;if(be[ot]=be[ot]||[],ft&&ft>=ot){const St=be[ot][be[ot].length-1];Be=St.start+Pe.getValue(St.itemIndex)}const gt={itemIndex:ke,start:Be};be[ot].push(gt)}return be}class re{constructor(be,Be=(0,H.j)()){if(this.data=be,this.labelField=be.fields.find(ot=>ot.name==="label"),this.levelField=be.fields.find(ot=>ot.name==="level"),this.valueField=be.fields.find(ot=>ot.name==="value"),this.selfField=be.fields.find(ot=>ot.name==="self"),!(this.labelField&&this.levelField&&this.valueField&&this.selfField))throw new Error("Malformed dataFrame: value, level and label and self fields are required.");const ke=this.labelField?.config?.type?.enum;ke?(this.labelDisplayProcessor=(0,j.je)(Be,ke),this.uniqueLabels=ke.text||[]):(this.labelDisplayProcessor=ot=>({text:ot+"",numeric:0}),this.uniqueLabels=[...new Set(this.labelField.values)]),this.valueDisplayProcessor=(0,j.U_)({field:this.valueField,theme:Be})}getLabel(be){return this.labelDisplayProcessor(this.labelField.values[be]).text}getLevel(be){return this.levelField.values[be]}getValue(be){return this.valueField.values[be]}getValueDisplay(be){return this.valueDisplayProcessor(this.valueField.values[be])}getSelf(be){return this.selfField.values[be]}getSelfDisplay(be){return this.valueDisplayProcessor(this.selfField.values[be])}getUniqueLabels(){return this.uniqueLabels}getUnitTitle(){switch(this.valueField.config.unit){case A.Bytes:return"RAM";case A.Nanoseconds:return"Time"}return"Count"}}var Z=e(83231),oe=e(83272),G=e(206),le=e(41818),fe=e(46967),ae=e(31403),de=e(2594),ee=e(47694);const me=({app:Pe,search:be,setTopLevelIndex:Be,setSelectedBarIndex:ke,setRangeMin:ot,setRangeMax:ft,setSearch:gt,selectedView:St,setSelectedView:ut,containerWidth:Dt})=>{const ie=(0,s.wW)(Le=>ne(Le,Pe));let De=[{value:k.TopTable,label:"Top Table",description:"Only show top table"},{value:k.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];Dt>=m&&De.push({value:k.Both,label:"Both",description:"Show both the top table and flame graph"});const Ne=()=>{Be(0),ke(0),ot(0),ft(1),gt(""),Xe("")},[Je,Xe]=q(be,gt);return n.createElement("div",{className:ie.header},n.createElement("div",{className:ie.leftContainer},n.createElement("div",{className:ie.inputContainer},n.createElement(fe.I,{value:Je||"",onChange:Le=>{Xe(Le.currentTarget.value)},placeholder:"Search..",width:44})),n.createElement(ae.zx,{type:"button",variant:"secondary",onClick:Ne},"Reset view")),n.createElement("div",{className:ie.rightContainer},n.createElement(de.S,{options:De,value:St,onChange:Le=>{(0,le.ff)("grafana_flamegraph_view_selected",{app:Pe,grafana_version:ee.vc.buildInfo.version,view:Le}),ut(Le)}})))};function q(Pe,be){const[Be,ke]=(0,n.useState)(Pe),ot=(0,oe.Z)(Pe);return(0,Z.Z)(()=>{be(Be)},250,[Be]),(0,n.useEffect)(()=>{ot!==Pe&&Pe!==Be&&ke(Pe)},[Pe,ot,Be]),[Be,ke]}const ne=(Pe,be)=>({header:t.css`
    display: flow-root;
    width: 100%;
    background: ${Pe.colors.background.primary};
    top: 0;
    height: 50px;
    z-index: ${Pe.zIndex.navbarFixed};
    ${be===G.zj.Explore?"position: sticky; margin-bottom: 8px; padding-top: 9px":""};
  `,inputContainer:t.css`
    float: left;
    margin-right: 20px;
  `,leftContainer:t.css`
    float: left;
  `,rightContainer:t.css`
    float: right;
  `}),se=me;var he=e(89050),ue=e(99098),Te=e(76095),Ve=e(35645),ct=e(88144);const Ie=({data:Pe,app:be,totalLevels:Be,selectedView:ke,search:ot,setSearch:ft,setTopLevelIndex:gt,setSelectedBarIndex:St,setRangeMin:ut,setRangeMax:Dt})=>{const ie=(0,s.wW)(Ge),De=Xe=>{ot===Xe?ft(""):((0,le.ff)("grafana_flamegraph_table_item_selected",{app:be,grafana_version:Ve.v.buildInfo.version}),ft(Xe),gt(0),St(0),ut(0),Dt(1))},[Ne,Je]=(0,n.useState)([{displayName:"Self",desc:!0}]);return n.createElement("div",{className:ie.topTableContainer,"data-testid":"topTable"},n.createElement(he.Z,{style:{width:"100%",height:l*Be+"px"}},({width:Xe,height:Le})=>{if(Xe<3||Le<3)return null;const Ue=Ke(Pe,Xe,De);return n.createElement(ct.i,{initialSortBy:Ne,onSortByChange:ve=>{ve&&ve.length&&(0,le.ff)("grafana_flamegraph_table_sort_selected",{app:be,grafana_version:Ve.v.buildInfo.version,sort:ve[0].displayName+"_"+(ve[0].desc?"desc":"asc")}),Je(ve)},data:Ue,width:Xe,height:Le})}))};function Ke(Pe,be,Be){let ke={};for(let Dt=0;Dt<Pe.data.length;Dt++){const ie=Pe.getValue(Dt),De=Pe.getSelf(Dt),Ne=Pe.getLabel(Dt);ke[Ne]=ke[Ne]||{},ke[Ne].self=ke[Ne].self?ke[Ne].self+De:De,ke[Ne].total=ke[Ne].total?ke[Ne].total+ie:ie}const ot={type:ue.fS.string,name:"Symbol",values:[],config:{custom:{width:be-c*2},links:[{title:"Highlight symbol",url:"",onClick:Dt=>{const De=Dt.origin.field.values[Dt.origin.rowIndex];Be(De)}}]}},ft={type:ue.fS.number,name:"Self",values:[],config:{unit:Pe.selfField.config.unit,custom:{width:c}}},gt={type:ue.fS.number,name:"Total",values:[],config:{unit:Pe.valueField.config.unit,custom:{width:c}}};for(let Dt in ke)ot.values.push(Dt),ft.values.push(ke[Dt].self),gt.values.push(ke[Dt].total);const St={fields:[ot,ft,gt],length:ot.values.length};return(0,Te.SM)({data:[St],fieldConfig:{defaults:{},overrides:[]},replaceVariables:Dt=>Dt,theme:Ve.v.theme2})[0]}const Ge=()=>({topTableContainer:t.css`
      flex-grow: 1;
      flex-basis: 50%;
      overflow: hidden;
    `}),at=Ie,dt=Pe=>{const[be,Be]=(0,n.useState)(0),[ke,ot]=(0,n.useState)(0),[ft,gt]=(0,n.useState)(0),[St,ut]=(0,n.useState)(1),[Dt,ie]=(0,n.useState)(""),[De,Ne]=(0,n.useState)(k.Both),[Je,{width:Xe}]=(0,i.Z)(),Le=(0,s.l4)(),[Ue,ve]=(0,n.useMemo)(()=>{if(!Pe.data)return[void 0,void 0];const $e=new re(Pe.data,Le);return[$e,Q($e)]},[Pe.data,Le]),Se=(0,s.wW)(Re);return(0,n.useEffect)(()=>{Xe>0&&Xe<m&&De===k.Both&&Ne(k.FlameGraph)},[De,Ne,Xe]),(0,n.useEffect)(()=>{Be(0),ot(0),gt(0),ut(1)},[Pe.data]),n.createElement(n.Fragment,null,Ue&&n.createElement("div",{ref:Je,className:Se.container},n.createElement(se,{app:Pe.app,setTopLevelIndex:Be,setSelectedBarIndex:ot,setRangeMin:gt,setRangeMax:ut,search:Dt,setSearch:ie,selectedView:De,setSelectedView:Ne,containerWidth:Xe}),n.createElement("div",{className:Se.body},De!==k.FlameGraph&&n.createElement(at,{data:Ue,app:Pe.app,totalLevels:ve.length,selectedView:De,search:Dt,setSearch:ie,setTopLevelIndex:Be,setSelectedBarIndex:ot,setRangeMin:gt,setRangeMax:ut}),De!==k.TopTable&&n.createElement(V,{data:Ue,app:Pe.app,levels:ve,topLevelIndex:be,selectedBarIndex:ke,rangeMin:ft,rangeMax:St,search:Dt,setTopLevelIndex:Be,setSelectedBarIndex:ot,setRangeMin:gt,setRangeMax:ut,selectedView:De}))))};function Re(Pe){return{container:(0,t.css)({height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0,gap:Pe.spacing(2)}),body:(0,t.css)({display:"flex",flexGrow:1,minHeight:0})}}const ye=dt},7149:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{plugin:()=>C});var t=e(36873),n=e(25272),i=e(30383),s=e(50954);const l=D=>(0,s.rD)(D),f=(D,b,M)=>{const x=(0,s.ZH)(D,b,M);if(b==="singlestat"&&M.angular){const R=M.angular.gauge;R&&(x.showThresholdMarkers=R.thresholdMarkers,x.showThresholdLabels=R.thresholdLabels)}return x};var u=e(66111),o=e(6194),d=e(92156),r=e(69823),m=e(18543),c=e(4387),p=e(47694),g=e(63992);class y extends u.PureComponent{constructor(){super(...arguments),this.renderComponent=(b,M)=>{const{options:x,fieldConfig:R}=this.props,{width:S,height:O,count:U,value:I}=b,{field:F,display:w}=I,{openMenu:K,targetClassName:L}=M;return u.createElement(r.a,{value:(0,g.l)(U,R.defaults,w),width:S,height:O,field:F,text:x.text,showThresholdLabels:x.showThresholdLabels,showThresholdMarkers:x.showThresholdMarkers,theme:p.vc.theme2,onClick:K,className:L})},this.renderValue=b=>{const{value:M}=b,{getLinks:x,hasLinks:R}=M;return R&&x?u.createElement(m.V,{links:x,style:{flexGrow:1}},S=>this.renderComponent(b,S)):this.renderComponent(b,{})},this.getValues=()=>{const{data:b,options:M,replaceVariables:x,fieldConfig:R,timeZone:S}=this.props;for(let O of b.series)for(let U of O.fields)if(U.config.unit==="percent"||U.config.unit==="percentunit"){const I=U.config.min??0,F=U.config.max??(U.config.unit==="percent"?100:1);U.state=U.state??{},U.state.range={min:I,max:F,delta:F-I},U.display=(0,o.U_)({field:U,theme:p.vc.theme2})}return(0,d.nG)({fieldConfig:R,reduceOptions:M.reduceOptions,replaceVariables:x,theme:p.vc.theme2,data:b.series,timeZone:S})}}render(){const{height:b,width:M,data:x,renderCounter:R,options:S}=this.props;return u.createElement(c.Q,{getValues:this.getValues,renderValue:this.renderValue,width:M,height:b,source:x,autoGrid:!0,renderCounter:R,orientation:S.orientation})}}const E=Object.freeze([0,0]),v={showThresholdLabels:!1,showThresholdMarkers:!0};var h=e(69098),P=e(26410);class a{getSuggestionsForData(b){const{dataSummary:M}=b;if(!M.hasData||!M.hasNumberField||M.numberFieldCount>=50)return;const x=b.getListAppender({name:P.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:h.H.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:R=>{R.options.reduceOptions.values&&(R.options.reduceOptions.limit=2)}}});M.hasStringField&&M.frameCount===1&&M.rowCountTotal<10?(x.append({name:P.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),x.append({name:P.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(x.append({name:P.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),x.append({name:P.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const C=new t.c(y).useFieldConfig({useCustomConfig:D=>{D.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(D=>{(0,i.j)(D),(0,i.h)(D),D.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:v.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:v.showThresholdMarkers}),n.Z(D)}).setPanelChangeHandler(f).setSuggestionsSupplier(new a).setMigrationHandler(l)},16225:(Y,T,e)=>{"use strict";e.d(T,{H:()=>m});var t=e(9892),n=e(66111),i=e(30471),s=e(2703),l=e(574),f=e(40538),u=e(72648),o=e(52081),d=e(31403),r=e(56206);const m=({data:p,rowIndex:g,columnIndex:y,sortOrder:E,mode:v,header:h=void 0})=>{const P=(0,u.wW)(c);if(!p||g==null)return null;const a=p.fields.map((O,U)=>({...O,hovered:U===y})),C=a.filter(O=>!Boolean(O.config.custom?.hideFrom?.tooltip)),D=C.find(O=>O.name==="traceID")||a[0],b=[];if(C.filter(O=>D===O).length>0&&b.push(D),b.push(...C.filter(O=>D!==O)),b.length===0)return null;const M=[],x=[],R=new Set;for(const O of b){if(v===f.f3.Single&&y!=null&&!O.hovered)continue;const U=O.values[g],I=O.display?O.display(U):{text:`${U}`,numeric:+U};O.getLinks&&O.getLinks({calculatedValue:I,valueRowIndex:g}).forEach(F=>{const w=`${F.title}/${F.href}`;R.has(w)||(x.push(F),R.add(w))}),M.push({name:(0,i.CZ)(O,p),value:U,valueString:(0,s.zc)(I),highlight:O.hovered})}E&&E!==f.As.None&&M.sort((O,U)=>l.sortValues(E)(O.value,U.value));const S=()=>x.length>0&&n.createElement("tr",null,n.createElement("td",{colSpan:2},n.createElement(o.wc,null,x.map((O,U)=>n.createElement(d.Qj,{key:U,icon:"external-link-alt",target:O.target,href:O.href,onClick:O.onClick,fill:"text",style:{width:"100%"}},O.title)))));return n.createElement("div",{className:P.wrapper},h&&n.createElement("div",{className:P.header},n.createElement("span",{className:P.title},h)),n.createElement("table",{className:P.infoWrap},n.createElement("tbody",null,M.map((O,U)=>n.createElement("tr",{key:`${U}/${g}`,className:O.highlight?P.highlight:""},n.createElement("th",null,O.name,":"),n.createElement("td",null,(0,r.Q)(O.valueString)))),S())))},c=p=>{const g=p.isDark?p.v1.palette.dark2:p.v1.palette.white,y=p.isDark?p.v1.palette.dark9:p.v1.palette.gray5,E=p.isDark?p.v1.palette.dark3:p.v1.palette.gray6;return{wrapper:t.css`
      background: ${g};
      border: 1px solid ${y};
      border-radius: ${p.shape.borderRadius(2)};
    `,header:t.css`
      background: ${y};
      padding: 6px 10px;
      display: flex;
    `,title:t.css`
      font-weight: ${p.typography.fontWeightMedium};
      padding-right: ${p.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,infoWrap:t.css`
      padding: 8px;
      th {
        font-weight: ${p.typography.fontWeightMedium};
        padding: ${p.spacing(.25,2)};
      }
      tr {
        background-color: ${p.colors.background.primary};
        &:nth-child(even) {
          background-color: ${E};
        }
      }
    `,highlight:t.css`
      /* !important is required to overwrite default table styles */
      background: ${p.colors.action.hover} !important;
    `,link:t.css`
      color: #6e9fff;
    `}}},38286:(Y,T,e)=>{"use strict";e.d(T,{Cg:()=>i,EQ:()=>l,Er:()=>f,H:()=>s,bD:()=>n});var t=e(40538),n=(u=>(u.Point="point",u.Line="line",u.Polygon="polygon",u.Any="*any*",u))(n||{});const i=5;var s=(u=>(u.Left="left",u.Center="center",u.Right="right",u))(s||{}),l=(u=>(u.Top="top",u.Middle="middle",u.Bottom="bottom",u))(l||{});const f=Object.freeze({size:{fixed:i,min:2,max:15},color:{fixed:"dark-green"},opacity:.4,symbol:{mode:t.Q8.Fixed,fixed:"img/icons/marker/circle.svg"},textConfig:{fontSize:12,textAlign:"center",textBaseline:"middle",offsetX:0,offsetY:0},rotation:{fixed:0,mode:t.eK.Mod,min:-360,max:360}})},56206:(Y,T,e)=>{"use strict";e.d(T,{Q:()=>s});var t=e(9892),n=e(66111),i=e(44768);const s=l=>(0,i.CB)(l)?n.createElement("a",{href:l,target:"_blank",className:(0,t.cx)("external-link"),rel:"noreferrer"},l):l},44768:(Y,T,e)=>{"use strict";e.d(T,{B1:()=>o,CB:()=>y,FB:()=>p,gE:()=>c,n_:()=>r,sA:()=>m,uH:()=>g,vV:()=>f});var t=e(92053),n=e(79582),i=e(25532),s=e(35821),l=e(38286);function f(E,v,h,P){const a={};return P&&Object.keys(P).length?(a.color=(0,i.getColorDimension)(E,P.color??l.Er.color,h),a.size=(0,i.getScaledDimension)(E,P.size??l.Er.size),a.rotation=(0,i.getScalarDimension)(E,P.rotation??l.Er.rotation),P.text&&(P.text.field||P.text.fixed)&&(a.text=(0,i.getTextDimension)(E,P.text))):v.fields&&(v.fields.color&&(a.color=(0,i.getColorDimension)(E,v.config.color??l.Er.color,h)),v.fields.size&&(a.size=(0,i.getScaledDimension)(E,v.config.size??l.Er.size)),v.fields.text&&(a.text=(0,i.getTextDimension)(E,v.config.text)),v.fields.rotation&&(a.rotation=(0,i.getScalarDimension)(E,v.config.rotation??l.Er.rotation))),a}let u;function o(){return u||(u=[],d()),u}async function d(){const E=await(0,s.e)();for(let v of["maps","gazetteer"])E.listFiles(v).subscribe({next:h=>{h.forEach(P=>{if(P.name.endsWith(".geojson")){const a=`public/${v}/${P.name}`;u.push({value:a,label:a})}})}})}const r=(E,v,h)=>{const[P]=E.initMapView(v.view,void 0);return E.map=new t.Z({view:P,pixelRatio:1,layers:[],controls:[],target:h,interactions:(0,n.c)({mouseWheelZoom:!1})})},m=(E,v)=>{E.initControls(v.controls),E.forceUpdate()},c=(E,v,h)=>{E.panelContext&&E.panelContext.onInstanceStateChange&&E.panelContext.onInstanceStateChange({map:E.map,layers:v,selected:h,actions:E.actions})},p=E=>{let v=E.layers.length;for(;v<100;){const h=`Layer ${v++}`;if(!E.byName.has(h))return h}return`Layer ${Date.now()}`};function g(E,v,h,P){const a=E.getPixelFromCoordinate(h),C=E.getPixelFromCoordinate(P),D=Math.abs(a[0]-C[0]),b=Math.abs(a[1]-C[1]);return D>v||b>v}const y=E=>{try{return new URL(E).protocol.includes("http")}catch{return!1}}},7211:(Y,T,e)=>{"use strict";e.d(T,{o:()=>i});var t=e(66111),n=e(50796);function i(s){return t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingBottom:"6px"}},t.createElement(n.P,{onClick:s.onClick,style:{position:"relative",top:"auto",right:"auto",marginRight:0}}))}},53764:(Y,T,e)=>{"use strict";e.d(T,{S:()=>f});var t=e(9892),n=e(66111),i=e(63418),s=e(77258),l=e(72648);function f({width:o,showImage:d,data:r,index:m}){const c=(0,l.wW)(u),p=o>600,g=r.get(m);return n.createElement("article",{className:(0,t.cx)(c.item,p&&c.itemWide)},d&&g.ogImage&&n.createElement("a",{tabIndex:-1,href:i.QX.sanitizeUrl(g.link),target:"_blank",rel:"noopener noreferrer",className:(0,t.cx)(c.socialImage,p&&c.socialImageWide),"aria-hidden":!0},n.createElement("img",{src:g.ogImage,alt:g.title})),n.createElement("div",{className:c.body},n.createElement("time",{className:c.date,dateTime:(0,s.dq)(g.date,{format:"MMM DD"})},(0,s.dq)(g.date,{format:"MMM DD"})," "),n.createElement("a",{className:c.link,href:i.QX.sanitizeUrl(g.link),target:"_blank",rel:"noopener noreferrer"},n.createElement("h3",{className:c.title},g.title)),n.createElement("div",{className:c.content,dangerouslySetInnerHTML:{__html:i.QX.sanitize(g.content)}})))}const u=o=>({container:t.css`
    height: 100%;
  `,item:t.css`
    display: flex;
    padding: ${o.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${o.spacing(1)};
    border-bottom: 2px solid ${o.colors.border.weak};
    background: ${o.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:t.css`
    flex-direction: row;
  `,body:t.css`
    display: flex;
    flex-direction: column;
  `,socialImage:t.css`
    display: flex;
    align-items: center;
    margin-bottom: ${o.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${o.shape.radius.default} ${o.shape.radius.default} 0 0;
    }
  `,socialImageWide:t.css`
    margin-right: ${o.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${o.shape.radius.default};
    }
  `,link:t.css`
    color: ${o.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${o.colors.text.link};
      text-decoration: underline;
    }
  `,title:t.css`
    font-size: 16px;
    margin-bottom: ${o.spacing(.5)};
  `,content:t.css`
    p {
      margin-bottom: 4px;
      color: ${o.colors.text};
    }
  `,date:t.css`
    margin-bottom: ${o.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 ${o.shape.radius.default};
    color: ${o.colors.text.secondary};
  `})},6981:(Y,T,e)=>{"use strict";e.d(T,{k:()=>t});const t="https://grafana.com/blog/news.xml"},13724:(Y,T,e)=>{"use strict";e.d(T,{j:()=>c});var t=e(13821),n=e(12115);function i(p){const y=new DOMParser().parseFromString(p,"text/xml");return{items:Array.from(y.querySelectorAll("entry")).map(v=>({title:u(v,"title"),link:v.querySelector("link")?.getAttribute("href")??"",content:u(v,"content"),pubDate:u(v,"published"),ogImage:v.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function s(p){const y=new DOMParser().parseFromString(p,"text/xml");return{items:Array.from(y.querySelectorAll("item")).map(v=>({title:u(v,"title"),link:u(v,"link"),content:u(v,"description"),pubDate:u(v,"pubDate"),ogImage:v.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function l(p){return await(await fetch(p)).text()}function f(p){return new DOMParser().parseFromString(p,"text/xml").querySelector("feed")!==null}function u(p,g){return p.querySelector(g)?.textContent??""}async function o(p){const g=await l(p);return f(g)?i(g):s(g)}var d=e(67483),r=e(99098);function m(p){const g=[],y=[],E=[],v=[],h=[];for(const P of p.items){const a=(0,d.CQ)(P.pubDate);try{if(g.push(a.valueOf()),y.push(P.title),E.push(P.link),h.push(P.ogImage),P.content){const C=P.content.replace(/<\/?[^>]+(>|$)/g,"");v.push(C)}}catch(C){console.warn("Error reading news item:",C,P)}}return{fields:[{name:"date",type:r.fS.time,config:{displayName:"Date"},values:g},{name:"title",type:r.fS.string,config:{},values:y},{name:"link",type:r.fS.string,config:{},values:E},{name:"content",type:r.fS.string,config:{},values:v},{name:"ogImage",type:r.fS.string,config:{},values:h}],length:g.length}}function c(p){const[g,y]=(0,t.Z)(async()=>{const E=await o(p),v=m(E);return new n.U(v)},[p],{loading:!0});return{state:g,getNews:y}}},74538:(Y,T,e)=>{"use strict";e.d(T,{E:()=>ut});var t=e(9892),n=e(9085),i=e.n(n),s=e(66111),l=e(62326),f=e(72648),u=e(67487),o=e(39904),d=e(68545);const r=(0,s.memo)(function(Ue){const{edge:ve,onClick:Se,onMouseEnter:$e,onMouseLeave:Ye,hovering:_e}=Ue,{source:Et,target:pt}=ve,je=(0,d.dM)({x1:Et.x,y1:Et.y,x2:pt.x,y2:pt.y},90);return s.createElement("g",{onClick:ht=>Se(ht,ve),style:{cursor:"pointer"},"aria-label":`Edge from: ${Et.id} to: ${pt.id}`},s.createElement("line",{strokeWidth:_e?2:1,stroke:"#999",x1:je.x1,y1:je.y1,x2:je.x2,y2:je.y2,markerEnd:"url(#triangle)"}),s.createElement("line",{stroke:"transparent",x1:je.x1,y1:je.y1,x2:je.x2,y2:je.y2,strokeWidth:20,onMouseEnter:()=>{$e(ve.id)},onMouseLeave:()=>{Ye(ve.id)}}))});function m(){return s.createElement("defs",null,s.createElement("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"8",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:"10",markerHeight:"10",orient:"auto"},s.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#999"})))}const c=Le=>({mainGroup:t.css`
      pointer-events: none;
      font-size: 8px;
    `,background:t.css`
      fill: ${Le.components.tooltip.background};
    `,text:t.css`
      fill: ${Le.components.tooltip.text};
    `}),p=(0,s.memo)(function(Ue){const{edge:ve}=Ue,{source:Se,target:$e}=ve,Ye=(0,d.dM)({x1:Se.x,y1:Se.y,x2:$e.x,y2:$e.y},90),_e={x:Ye.x1+(Ye.x2-Ye.x1)/2,y:Ye.y1+(Ye.y2-Ye.y1)/2},Et=(0,f.wW)(c),pt=[ve.mainStat,ve.secondaryStat].filter(nt=>nt),je=pt.length>1?"30":"15",ht=pt.length>1?15:7.5;let we=pt.length>1?-5:2.5;const Qe=[];return pt.forEach((nt,it)=>{Qe.push(s.createElement("text",{key:it,className:Et.text,x:_e.x,y:_e.y+we,textAnchor:"middle"},nt)),we+=15}),s.createElement("g",{className:Et.mainGroup},s.createElement("rect",{className:Et.background,x:_e.x-40,y:_e.y-ht,width:"80",height:je,rx:"5"}),Qe)});var g=e(82897),y=e(53768),E=e(40538),v=e(78056),h=e(46920);function P(){return{item:t.css`
      label: LegendItem;
      flex-grow: 0;
    `,legend:t.css`
      label: Legend;
      pointer-events: all;
    `}}const a=function(Ue){const{nodes:ve,onSort:Se,sort:$e,sortable:Ye}=Ue,_e=(0,f.l4)(),Et=(0,f.wW)(P),pt=C(ve,_e),je=(0,s.useCallback)(ht=>{Se({field:ht.data.field,ascending:ht.data.field===$e?.field?!$e?.ascending:!1})},[$e,Se]);return s.createElement(v.l,{className:Et.legend,displayMode:E.jK.List,placement:"bottom",items:pt,itemRenderer:ht=>s.createElement(s.Fragment,null,s.createElement(h.e,{item:ht,className:Et.item,onLabelClick:Ye?je:void 0}),Ye&&($e?.field===ht.data.field?s.createElement(o.J,{name:$e.ascending?"arrow-up":"arrow-down"}):""))})};function C(Le,Ue){if(!Le.length)return[];const ve=[Le[0].mainStat,Le[0].secondaryStat].filter(g.identity),Se=Le.find($e=>$e.arcSections.length>0);return Se&&Se.arcSections[0].config?.color?.mode===y.S.Fixed&&ve.push(...new Set(Le.map($e=>$e.arcSections).flat())),Le[0].color&&ve.push(Le[0].color),ve.map($e=>{const Ye={label:$e.config.displayName||$e.name,yAxis:0,data:{field:$e}};return $e.config.color?.mode===y.S.Fixed&&$e.config.color?.fixedColor?Ye.color=Ue.visualization.getColorByName($e.config.color?.fixedColor||""):$e.config.color?.mode&&(Ye.gradient=$e.config.color?.mode),Ye.color||Ye.gradient||(Ye.color=Ue.visualization.getColorByName("")),Ye})}const D=40,b=Le=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:t.css`
    fill: ${Le.components.panel.background};
    stroke: ${Le.colors.border.strong};
  `,text:t.css`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),M=(0,s.memo)(function(Ue){const{marker:ve,onClick:Se}=Ue,{node:$e}=ve,Ye=(0,f.wW)(b);return $e.x!==void 0&&$e.y!==void 0?s.createElement("g",{"data-node-id":$e.id,className:Ye.mainGroup,onClick:_e=>{Se?.(_e,ve)},"aria-label":`Hidden nodes marker: ${$e.id}`},s.createElement("circle",{className:Ye.mainCircle,r:D,cx:$e.x,cy:$e.y}),s.createElement("g",null,s.createElement("foreignObject",{x:$e.x-25,y:$e.y-25,width:"50",height:"50"},s.createElement("div",{className:Ye.text},s.createElement("span",null,ve.count>100?">100":ve.count," nodes"))))):null});var x=e(28550),R=e(72990);const S=40,O=(Le,Ue)=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
    transition: opacity 300ms;
    opacity: ${Ue==="inactive"?.5:1};
  `,mainCircle:t.css`
    fill: ${Le.components.panel.background};
  `,hoverCircle:t.css`
    opacity: 0.5;
    fill: transparent;
    stroke: ${Le.colors.primary.text};
  `,text:t.css`
    fill: ${Le.colors.text.primary};
    pointer-events: none;
  `,titleText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${(0,x.Z)(Le.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 100px;
  `,statsText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:t.css`
    width: 200px;
    & span {
      background-color: ${(0,x.Z)(Le.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `,clickTarget:t.css`
    fill: none;
    stroke: none;
    pointer-events: fill;
  `}),U=(0,s.memo)(function(Ue){const{node:ve,onMouseEnter:Se,onMouseLeave:$e,onClick:Ye,hovering:_e}=Ue,Et=(0,f.l4)(),pt=O(Et,_e),je=_e==="active";return ve.x!==void 0&&ve.y!==void 0?s.createElement("g",{"data-node-id":ve.id,className:pt.mainGroup,"aria-label":`Node: ${ve.title}`},s.createElement("circle",{className:pt.mainCircle,r:S,cx:ve.x,cy:ve.y}),je&&s.createElement("circle",{className:pt.hoverCircle,r:S-3,cx:ve.x,cy:ve.y,strokeWidth:2}),s.createElement(F,{node:ve}),s.createElement("g",{className:pt.text,style:{pointerEvents:"none"}},s.createElement(I,{node:ve,hovering:_e}),s.createElement("foreignObject",{x:ve.x-(je?100:50),y:ve.y+S+5,width:je?"200":"100",height:"40"},s.createElement("div",{className:i()(pt.titleText,je&&pt.textHovering)},s.createElement("span",null,ve.title),s.createElement("br",null),s.createElement("span",null,ve.subTitle)))),s.createElement("rect",{"data-testid":`node-click-rect-${ve.id}`,onMouseEnter:()=>{Se(ve.id)},onMouseLeave:()=>{$e(ve.id)},onClick:ht=>{Ye(ht,ve)},className:pt.clickTarget,x:ve.x-S-5,y:ve.y-S-5,width:S*2+10,height:S*2+50})):null});function I({node:Le,hovering:Ue}){const ve=(0,f.l4)(),Se=O(ve,Ue),$e=Ue==="active";return Le.x!==void 0&&Le.y!==void 0?Le.icon?s.createElement("foreignObject",{x:Le.x-35,y:Le.y-20,width:"70",height:"40"},s.createElement("div",{style:{width:70,overflow:"hidden",display:"flex",justifyContent:"center",marginTop:-4}},s.createElement(o.J,{"data-testid":`node-icon-${Le.icon}`,name:Le.icon,size:"xxxl"}))):s.createElement("foreignObject",{x:Le.x-($e?100:35),y:Le.y-15,width:$e?"200":"70",height:"40"},s.createElement("div",{className:i()(Se.statsText,$e&&Se.textHovering)},s.createElement("span",null,Le.mainStat&&(0,d.Ew)(Le.mainStat.config,Le.mainStat.values[Le.dataFrameRowIndex])),s.createElement("br",null),s.createElement("span",null,Le.secondaryStat&&(0,d.Ew)(Le.secondaryStat.config,Le.secondaryStat.values[Le.dataFrameRowIndex])))):null}function F(Le){const{node:Ue}=Le,ve=Ue.arcSections.find(_e=>_e.values[Ue.dataFrameRowIndex]>=1),Se=(0,f.l4)();if(ve)return s.createElement("circle",{fill:"none",stroke:Se.visualization.getColorByName(ve.config.color?.fixedColor||""),strokeWidth:2,r:S,cx:Ue.x,cy:Ue.y});const $e=Ue.arcSections.filter(_e=>_e.values[Ue.dataFrameRowIndex]!==0);if($e.length===0)return s.createElement("circle",{fill:"none",stroke:Ue.color?K(Ue.color,Ue.dataFrameRowIndex,Se):"gray",strokeWidth:2,r:S,cx:Ue.x,cy:Ue.y});const{elements:Ye}=$e.reduce((_e,Et,pt)=>{const je=Et.config.color?.fixedColor||"",ht=Et.values[Ue.dataFrameRowIndex],we=s.createElement(w,{key:pt,r:S,x:Ue.x,y:Ue.y,startPercent:_e.percent,percent:ht+_e.percent>1?1-_e.percent:ht,color:Se.visualization.getColorByName(je),strokeWidth:2});return _e.elements.push(we),_e.percent=_e.percent+ht,_e},{elements:[],percent:0});return s.createElement(s.Fragment,null,Ye)}function w({r:Le,x:Ue,y:ve,startPercent:Se,percent:$e,color:Ye,strokeWidth:_e=2}){const Et=Se+$e,pt=Ue+Math.sin(2*Math.PI*Se)*Le,je=ve-Math.cos(2*Math.PI*Se)*Le,ht=Ue+Math.sin(2*Math.PI*Et)*Le,we=ve-Math.cos(2*Math.PI*Et)*Le,Qe=$e>.5?"1":"0";return s.createElement("path",{fill:"none",d:`M ${pt} ${je} A ${Le} ${Le} 0 ${Qe} 1 ${ht} ${we}`,stroke:Ye,strokeWidth:_e})}function K(Le,Ue,ve){return Le.config.color?(0,R.fD)(Le).getCalculator(Le,ve)(0,Le.values[Ue]):Le.values[Ue]}var L=e(52081),V=e(31403);function H(){return{wrapper:t.css`
      label: wrapper;
      pointer-events: all;
    `}}function j(Le){const{config:Ue,onConfigChange:ve,onPlus:Se,onMinus:$e,disableZoomOut:Ye,disableZoomIn:_e}=Le,[Et,pt]=(0,s.useState)(!1),je=!1,ht=(0,f.wW)(H);return s.createElement("div",{className:ht.wrapper},s.createElement(L.wc,{spacing:"sm"},s.createElement(L.Lh,{spacing:"xs"},s.createElement(V.zx,{icon:"plus-circle",onClick:Se,size:"md",title:"Zoom in",variant:"secondary",disabled:_e}),s.createElement(V.zx,{icon:"minus-circle",onClick:$e,size:"md",title:"Zoom out",variant:"secondary",disabled:Ye})),s.createElement(L.Lh,{spacing:"xs"},s.createElement(V.zx,{icon:"code-branch",onClick:()=>ve({...Ue,gridLayout:!1}),size:"md",title:"Default layout",variant:"secondary",disabled:!Ue.gridLayout}),s.createElement(V.zx,{icon:"apps",onClick:()=>ve({...Ue,gridLayout:!0}),size:"md",title:"Grid layout",variant:"secondary",disabled:Ue.gridLayout}))),je&&s.createElement(V.zx,{size:"xs",fill:"text",onClick:()=>pt(we=>!we)},Et?"Hide config":"Show config"),je&&Et&&Object.keys(Ue).filter(we=>we!=="show").map(we=>s.createElement("div",{key:we},we,s.createElement("input",{style:{width:50},type:"number",value:Ue[we],onChange:Qe=>{ve({...Ue,[we]:parseFloat(Qe.target.value)})}}))))}var A=e(88687),_=e(92653),k=e(77410);const Q=()=>new k.q(new URL(e.p+e.u(1256),e.b));function re(Le,Ue,ve,Se,$e){const[Ye,_e]=(0,s.useMemo)(()=>{if(!(Le.length&&Ue.length))return[{},{}];const Et=Ue.reduce((je,ht)=>(je[ht.source.id]=[...je[ht.source.id]??[],ht],je[ht.target.id]=[...je[ht.target.id]??[],ht],je),{}),pt=Le.reduce((je,ht)=>(je[ht.id]=ht,je),{});return[Et,pt]},[Ue,Le]);return(0,s.useMemo)(()=>Le.length<=ve?{nodes:Le,edges:Ue}:Se.gridLayout?oe(Le,ve,$e):Z(Le,Ue,_e,Ye,ve,$e),[Ue,Ye,ve,Le,_e,$e,Se.gridLayout])}function Z(Le,Ue,ve,Se,$e,Ye){let _e;Ye?_e=[ve[Ye]]:(_e=Le.filter(Qe=>Qe.incoming===0),_e.length||(_e=[Le[0]]));const{visibleNodes:Et,markers:pt}=G($e,_e,ve,Se),je=le(pt,Et,ve,Se),ht=(0,g.fromPairs)(je.map(Qe=>[Qe.node.id,Qe]));for(const Qe of je)Qe.count===1&&(delete ht[Qe.node.id],Et[Qe.node.id]=Qe.node);const we=Ue.filter(Qe=>(Et[Qe.source.id]||ht[Qe.source.id])&&(Et[Qe.target.id]||ht[Qe.target.id]));return{nodes:Object.values(Et),edges:we,markers:Object.values(ht)}}function oe(Le,Ue,ve){let Se=0,$e=Ue,Ye=[];if(ve){const _e=Le.findIndex(je=>je.id===ve),Et=Math.floor(Ue/2);let pt=Et;Se=_e-Et,Se<0&&(pt+=Math.abs(Se),Se=0),$e=_e+pt+1,$e>Le.length&&(Se>0&&(Se=Math.max(0,Se-($e-Le.length))),$e=Le.length),Se>1&&Ye.push({node:Le[Se-1],count:Se}),Le.length-$e>1&&Ye.push({node:Le[$e],count:Le.length-$e})}else Le.length-Ue>1&&(Ye=[{node:Le[Ue],count:Le.length-Ue}]);return{nodes:Le.slice(Se,$e),edges:[],markers:Ye}}function G(Le,Ue,ve,Se){const $e={};let Ye=[...Ue];for(;Object.keys($e).length<Le&&Ye.length>0;){let Et=Ye.shift();if($e[Et.id])continue;$e[Et.id]=Et;const je=(Se[Et.id]||[]).map(ht=>{const we=ht.source.id===Et.id?ht.target.id:ht.source.id;return ve[we]});Ye=Ye.concat(je)}const _e=(0,g.uniq)(Ye.filter(Et=>!$e[Et.id]));return{visibleNodes:$e,markers:_e}}function le(Le,Ue,ve,Se){return Le.map($e=>{const Ye={};let _e=0,Et=[$e];for(;Et.length>0&&_e<=101;){let pt=Et.shift();if(Ue[pt.id]||Ye[pt.id])continue;Ye[pt.id]||_e++,Ye[pt.id]=pt;const ht=(Se[pt.id]||[]).map(we=>{const Qe=we.source.id===pt.id?we.target.id:we.source.id;return ve[Qe]});Et=Et.concat(ht)}return{node:$e,count:_e}})}const fe={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function ae(Le,Ue,ve=fe,Se,$e,Ye){const[_e,Et]=(0,s.useState)([]),[pt,je]=(0,s.useState)([]),[ht,we]=(0,s.useState)(!1),Qe=(0,_.default)(),nt=(0,s.useRef)();(0,A.Z)(()=>{nt.current&&nt.current()}),(0,s.useEffect)(()=>{if(Le.length===0){Et([]),je([]),we(!1);return}we(!0);const hn=de(Le,Ue,({nodes:Wn,edges:Bt})=>{Qe()&&(Et(Wn),je(Bt),we(!1))});return nt.current=hn,hn},[Le,Ue,Qe]);const[it,yt]=(0,s.useMemo)(()=>{if(Le.length===0)return[[],[]];const hn=Le.map(Bt=>({...Bt})),Wn=Ue.map(Bt=>({...Bt}));return ee(hn,$e,ve.sort),[hn,Wn]},[ve.sort,Le,Ue,$e]),{nodes:Lt,edges:Kt,markers:an}=re(ve.gridLayout?it:_e,ve.gridLayout?yt:pt,Se,ve,Ye),un=(0,s.useMemo)(()=>(0,d.Tz)([...Lt,...(an||[]).map(hn=>hn.node)]),[Lt,an]);return{nodes:Lt,edges:Kt,markers:an,bounds:un,hiddenNodesCount:Le.length-Lt.length,loading:ht}}function de(Le,Ue,ve){const Se=Q();return Se.onmessage=$e=>{for(let Ye=0;Ye<Le.length;Ye++)$e.data.nodes[Ye]={...Le[Ye],...$e.data.nodes[Ye]};ve($e.data)},Se.postMessage({nodes:Le.map($e=>({id:$e.id,incoming:$e.incoming})),edges:Ue,config:fe}),()=>{Se.terminate()}}function ee(Le,Ue,ve){const _e=Math.min(Math.floor((Ue-120)/140),Le.length),Et=Math.floor((_e-1)*120/2);ve&&Le.sort((pt,je)=>{const ht=ve.field.values[pt.dataFrameRowIndex],we=ve.field.values[je.dataFrameRowIndex];return ve.ascending?ht-we:we-ht});for(const[pt,je]of Le.entries()){const ht=Math.floor(pt/_e),we=pt%_e;je.x=we*120-Et,je.y=-60+ht*140}}var me=e(85506),q=e(30909),ne=e(14391),se=e(42044);function he(Le,Ue,ve,Se,$e,Ye){const[_e,Et]=(0,s.useState)(void 0),pt=(0,s.useCallback)((ht,we)=>{const[Qe,nt]=Se.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],it=[{label:Qe,onClick:Kt=>{Ye(Kt.id),$e({...Se,gridLayout:nt}),Et(void 0)}}],yt=Ue?Le(Ue,we.dataFrameRowIndex):[],Lt=Te(yt,we,it);Et(ue(s.createElement(Ge,{node:we,nodes:Ue}),ht,Et,Lt))},[Se,Ue,Le,Et,$e,Ye]);return{onEdgeOpen:(0,s.useCallback)((ht,we)=>{if(!ve)return;const Qe=Le(ve,we.dataFrameRowIndex),nt=Te(Qe,we);Et(ue(s.createElement(at,{edge:we,edges:ve}),ht,Et,nt))},[ve,Le,Et]),onNodeOpen:pt,MenuComponent:_e}}function ue(Le,Ue,ve,Se){return s.createElement(q.x,{renderHeader:()=>Le,renderMenuItems:Se,onClose:()=>ve(void 0),x:Ue.pageX,y:Ue.pageY})}function Te(Le,Ue,ve){if(!(Le.length||ve?.length))return;const Se=ct(Le);return()=>{let $e=Se?.map((Ye,_e)=>s.createElement(ne.k,{key:`${Ye.label}${_e}`,label:Ye.label},(Ye.items||[]).map(Ve(Ue))));return ve&&($e=[...ve.map(Ve(Ue)),...$e]),$e}}function Ve(Le){return function(ve){return s.createElement(se.s,{key:ve.label,url:ve.url,label:ve.label,ariaLabel:ve.ariaLabel,onClick:ve.onClick?Se=>{Se?.ctrlKey||Se?.metaKey||Se?.shiftKey||(Se?.preventDefault(),Se?.stopPropagation(),ve.onClick?.(Le))}:void 0,target:"_self"})}}function ct(Le){const Ue="Open in Explore",ve=Le.reduce((Se,$e)=>{let Ye,_e;return $e.title.indexOf("/")!==-1?(Ye=$e.title.split("/")[0],_e=$e.title.split("/")[1],Se[Ye]=Se[Ye]||[],Se[Ye].push({l:$e,newTitle:_e})):(Se[Ue]=Se[Ue]||[],Se[Ue].push({l:$e})),Se},{});return Object.keys(ve).map(Se=>({label:Se,ariaLabel:Se,items:ve[Se].map($e=>({label:$e.newTitle||$e.l.title,ariaLabel:$e.newTitle||$e.l.title,url:$e.l.href,onClick:$e.l.onClick}))}))}function Ie({field:Le,index:Ue}){return s.createElement(Ke,{label:Le.config?.displayName||Le.name,value:(0,d.Ew)(Le.config,Le.values[Ue]||"")})}function Ke({label:Le,value:Ue}){const ve=(0,f.wW)(dt);return s.createElement("tr",null,s.createElement("td",{className:ve.label},Le,": "),s.createElement("td",{className:ve.value},Ue))}function Ge({node:Le,nodes:Ue}){const ve=[];if(Ue){const Se=(0,d.F)(Ue);for(const $e of[Se.title,Se.subTitle,Se.mainStat,Se.secondaryStat,...Se.details])$e&&$e.values[Le.dataFrameRowIndex]&&ve.push(s.createElement(Ie,{field:$e,index:Le.dataFrameRowIndex}))}else Le.title&&ve.push(s.createElement(Ke,{label:"Title",value:Le.title})),Le.subTitle&&ve.push(s.createElement(Ke,{label:"Subtitle",value:Le.subTitle}));return s.createElement("table",{style:{width:"100%"}},s.createElement("tbody",null,ve))}function at(Le){const Ue=Le.edge.dataFrameRowIndex,ve=(0,d.lr)(Le.edges),Se=ve.source?.values[Ue]||"",$e=ve.target?.values[Ue]||"",Ye=[];Se&&$e&&Ye.push(s.createElement(Ke,{key:"header-row",label:"Source \u2192 Target",value:`${Se} \u2192 ${$e}`}));for(const _e of[ve.mainStat,ve.secondaryStat,...ve.details])_e&&_e.values[Ue]&&Ye.push(s.createElement(Ie,{key:`field-row-${Ue}`,field:_e,index:Ue}));return s.createElement("table",{style:{width:"100%"}},s.createElement("tbody",null,Ye))}const dt=Le=>({label:t.css`
      label: Label;
      line-height: 1.25;
      color: ${Le.colors.text.disabled};
      font-size: ${Le.typography.size.sm};
      font-weight: ${Le.typography.fontWeightMedium};
      padding-right: ${Le.spacing(1)};
    `,value:t.css`
      label: Value;
      font-size: ${Le.typography.size.sm};
      font-weight: ${Le.typography.fontWeightMedium};
      color: ${Le.colors.text.primary};
    `});var Re=e(83272);function ye(Le,Ue,ve){const Se=(0,Re.Z)(Le.gridLayout);let $e;if(Se===!0&&!Le.gridLayout&&ve){const Ye=Ue.find(_e=>_e.id===ve);Ye&&($e={x:-Ye.x,y:-Ye.y})}return $e}function Pe(Le){const[Ue,ve]=(0,s.useState)(),Se=(0,_.default)();return(0,s.useEffect)(()=>{Le&&(ve(Le),setTimeout(()=>{Se()&&ve(void 0)},500))},[Le,Se]),Ue}function be({scale:Le=1,bounds:Ue,focus:ve}={}){const Se=(0,_.default)(),$e=(0,s.useRef)(!1),Ye=(0,s.useRef)(0),_e=(0,s.useRef)(null),Et={x:0,y:0},pt=(0,s.useMemo)(()=>({right:Ue?-Ue.left:1/0,left:Ue?-Ue.right:-1/0,bottom:Ue?-Ue.top:-1/0,top:Ue?-Ue.bottom:1/0}),[Ue]),je=(0,s.useRef)(Et),ht=(0,s.useRef)(Et),we=(0,s.useRef)(Et),[Qe,nt]=(0,s.useState)({isPanning:!1,position:Et});(0,s.useEffect)(()=>{const Lt=Ft=>{!$e.current&&Se()&&($e.current=!0,je.current=ke(Ft),ht.current={...we.current},nt(Vt=>({...Vt,isPanning:!0})),un())},Kt=()=>{$e.current&&Se()&&($e.current=!1,nt(Ft=>({...Ft,isPanning:!1})),hn())},an=Ft=>{Lt(Ft),Wn(Ft)},un=()=>{document.addEventListener("mousemove",Wn),document.addEventListener("mouseup",Kt),document.addEventListener("touchmove",Wn),document.addEventListener("touchend",Kt)},hn=()=>{document.removeEventListener("mousemove",Wn),document.removeEventListener("mouseup",Kt),document.removeEventListener("touchmove",Wn),document.removeEventListener("touchend",Kt)},Wn=Ft=>{cancelAnimationFrame(Ye.current);const Vt=ke(Ft);Ye.current=requestAnimationFrame(()=>{if(Se()&&_e.current){let At=Vt.x-je.current.x,Nt=Vt.y-je.current.y;we.current={x:Be(ht.current.x+At/Le,pt.left,pt.right),y:Be(ht.current.y+Nt/Le,pt.top,pt.bottom)},nt(Rt=>({...Rt,position:{...we.current}}))}})},Bt=_e.current;return Bt&&(Bt.addEventListener("mousedown",an),Bt.addEventListener("touchstart",an)),()=>{Bt&&(Bt.removeEventListener("mousedown",an),Bt.removeEventListener("touchstart",an))}},[Le,pt,Se]);const it=(0,Re.Z)(ve);(0,s.useEffect)(()=>{if(ve&&it?.x!==ve.x&&it?.y!==ve.y){const Lt={x:Be(ve.x,pt.left,pt.right),y:Be(ve.y,pt.top,pt.bottom)};nt({position:Lt,isPanning:!1}),we.current=Lt,ht.current=Lt}},[ve,it,pt,we,ht]);let yt=Qe.position;return ve&&it?.x!==ve.x&&it?.y!==ve.y&&(yt=ve),{state:{...Qe,position:{x:Be(yt.x,pt.left,pt.right),y:Be(yt.y,pt.top,pt.bottom)}},ref:_e}}function Be(Le,Ue,ve){return Math.min(Math.max(Le,Ue??-1/0),ve??1/0)}function ke(Le){if(Le.changedTouches){const Ue=Le;return{x:Ue.changedTouches[0].clientX,y:Ue.changedTouches[0].clientY}}else{const Ue=Le;return{x:Ue.clientX,y:Ue.clientY}}}const ot={stepDown:Le=>Le/1.5,stepUp:Le=>Le*1.5,min:.13,max:2.25};function ft({stepUp:Le,stepDown:Ue,min:ve,max:Se}=ot){const $e=(0,s.useRef)(null),[Ye,_e]=(0,s.useState)(1),Et=(0,s.useCallback)(()=>{Ye<(Se??1/0)&&_e(Le(Ye))},[Ye,Le,Se]),pt=(0,s.useCallback)(()=>{Ye>(ve??-1/0)&&_e(Ue(Ye))},[Ye,Ue,ve]),je=(0,s.useCallback)(function(ht){if(ht.ctrlKey||ht.metaKey){if(ht.preventDefault(),_e(Math.min(Math.max(ve??-1/0,Ye+Math.min(ht.deltaY,2)*-.01),Se??1/0)),ht.deltaY<0){const we=Ye+Math.max(ht.deltaY,-4)*-.015;_e(Math.max(ve??-1/0,we))}else if(ht.deltaY>0){const we=Ye+Math.min(ht.deltaY,4)*-.015;_e(Math.min(Se??1/0,we))}}},[ve,Se,Ye]);return(0,s.useEffect)(()=>{if(!$e.current)return;const ht=$e.current;return ht.addEventListener("wheel",je,{passive:!1}),()=>{ht&&ht.removeEventListener("wheel",je)}},[je]),{onStepUp:Et,onStepDown:pt,scale:Math.max(Math.min(Ye,Se??1/0),ve??-1/0),isMax:Ye>=(Se??1/0),isMin:Ye<=(ve??-1/0),ref:$e}}const gt=Le=>({wrapper:t.css`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:t.css`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:t.css`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${Le.typography.h4.fontSize};
    color: ${Le.colors.text.secondary};
  `,mainGroup:t.css`
    label: mainGroup;
    will-change: transform;
  `,viewControls:t.css`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:t.css`
    label: legend;
    background: ${Le.colors.background.secondary};
    box-shadow: ${Le.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:t.css`
    margin-left: auto;
  `,alert:t.css`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${Le.shape.borderRadius()};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${Le.colors.warning.main};
    color: ${Le.colors.warning.contrastText};
  `,loadingWrapper:t.css`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),St=200;function ut({getLinks:Le,dataFrames:Ue,nodeLimit:ve}){const Se=ve||St,{edges:$e,nodes:Ye}=(0,me.Y)(Ue),[_e,{width:Et,height:pt}]=(0,l.Z)(),[je,ht]=(0,s.useState)(fe),we=Ye[0],Qe=$e[0],nt=(0,s.useMemo)(()=>(0,d.HB)(we,Qe),[Qe,we]),{nodeHover:it,setNodeHover:yt,clearNodeHover:Lt,edgeHover:Kt,setEdgeHover:an,clearEdgeHover:un}=Xe(),[hn,Wn]=(0,s.useState)([]);(0,s.useEffect)(()=>{let ya=[];it?ya=(0,d.uX)(nt.nodes,nt.edges,it):Kt&&(ya=(0,d.MP)(nt.nodes,nt.edges,Kt)),Wn(ya)},[it,Kt,nt]);const[Bt,Ft]=(0,s.useState)(),Vt=(0,s.useCallback)((ya,Wa)=>Ft(Wa.node.id),[Ft]),{nodes:At,edges:Nt,markers:Rt,bounds:wt,hiddenNodesCount:_t,loading:Qt}=ae(nt.nodes,nt.edges,je,Se,Et,Bt),en=ye(je,At,Bt),{panRef:sn,zoomRef:Jt,onStepUp:gn,onStepDown:Cn,isPanning:In,position:_n,scale:zn,isMaxZoom:Hn,isMinZoom:sa}=Je(wt,en),{onEdgeOpen:Ma,onNodeOpen:la,MenuComponent:jn}=he(Le,we,Qe,je,ht,Ft),ia=(0,f.wW)(gt),Aa=(0,s.useCallback)(ya=>{_e(ya),Jt.current=ya},[_e,Jt]),ga=Pe(Bt);return s.createElement("div",{ref:Aa,className:ia.wrapper},Qt?s.createElement("div",{className:ia.loadingWrapper},"Computing layout\xA0",s.createElement(u.$,null)):null,Ue.length&&nt.nodes.length?s.createElement("svg",{ref:sn,viewBox:`${-(Et/2)} ${-(pt/2)} ${Et} ${pt}`,className:i()(ia.svg,In&&ia.svgPanning)},s.createElement("g",{className:ia.mainGroup,style:{transform:`scale(${zn}) translate(${Math.floor(_n.x)}px, ${Math.floor(_n.y)}px)`}},s.createElement(m,null),!je.gridLayout&&s.createElement(De,{edges:Nt,nodeHoveringId:it,edgeHoveringId:Kt,onClick:Ma,onMouseEnter:an,onMouseLeave:un}),s.createElement(Dt,{nodes:At,onMouseEnter:yt,onMouseLeave:Lt,onClick:la,hoveringIds:hn||[ga]}),s.createElement(ie,{markers:Rt||[],onClick:Vt}),!je.gridLayout&&s.createElement(Ne,{edges:Nt,nodeHoveringId:it,edgeHoveringId:Kt}))):s.createElement("div",{className:ia.noDataMsg},"No data"),s.createElement("div",{className:ia.viewControls},At.length?s.createElement("div",{className:ia.legend},s.createElement(a,{sortable:je.gridLayout,nodes:At,sort:je.sort,onSort:ya=>{ht({...je,sort:ya})}})):null,s.createElement("div",{className:ia.viewControlsWrapper},s.createElement(j,{config:je,onConfigChange:ya=>{ya.gridLayout!==je.gridLayout&&Ft(void 0),ht(ya)},onMinus:Cn,onPlus:gn,scale:zn,disableZoomIn:Hn,disableZoomOut:sa}))),_t>0&&s.createElement("div",{className:ia.alert,"aria-label":"Nodes hidden warning"},s.createElement(o.J,{size:"sm",name:"info-circle"})," ",_t," nodes are hidden for performance reasons."),jn)}const Dt=(0,s.memo)(function(Ue){return s.createElement(s.Fragment,null,Ue.nodes.map(ve=>s.createElement(U,{key:ve.id,node:ve,onMouseEnter:Ue.onMouseEnter,onMouseLeave:Ue.onMouseLeave,onClick:Ue.onClick,hovering:!Ue.hoveringIds||Ue.hoveringIds.length===0?"default":Ue.hoveringIds?.includes(ve.id)?"active":"inactive"})))}),ie=(0,s.memo)(function(Ue){return s.createElement(s.Fragment,null,Ue.markers.map(ve=>s.createElement(M,{key:"marker-"+ve.node.id,marker:ve,onClick:Ue.onClick})))}),De=(0,s.memo)(function(Ue){return s.createElement(s.Fragment,null,Ue.edges.map(ve=>s.createElement(r,{key:ve.id,edge:ve,hovering:ve.source.id===Ue.nodeHoveringId||ve.target.id===Ue.nodeHoveringId||Ue.edgeHoveringId===ve.id,onClick:Ue.onClick,onMouseEnter:Ue.onMouseEnter,onMouseLeave:Ue.onMouseLeave})))}),Ne=(0,s.memo)(function(Ue){return s.createElement(s.Fragment,null,Ue.edges.map((ve,Se)=>{const $e=ve.source.id===Ue.nodeHoveringId||ve.target.id===Ue.nodeHoveringId||Ue.edgeHoveringId===ve.id,Ye=ve.mainStat||ve.secondaryStat;return $e&&Ye&&s.createElement(p,{key:ve.id,edge:ve})}))});function Je(Le,Ue){const{scale:ve,onStepDown:Se,onStepUp:$e,ref:Ye,isMax:_e,isMin:Et}=ft(),{state:pt,ref:je}=be({scale:ve,bounds:Le,focus:Ue}),{position:ht,isPanning:we}=pt;return{zoomRef:Ye,panRef:je,position:ht,isPanning:we,scale:ve,onStepDown:Se,onStepUp:$e,isMaxZoom:_e,isMinZoom:Et}}function Xe(){const[Le,Ue]=(0,s.useState)(void 0),ve=(0,s.useCallback)(()=>Ue(void 0),[Ue]),[Se,$e]=(0,s.useState)(void 0),Ye=(0,s.useCallback)(()=>$e(void 0),[$e]);return{nodeHover:Le,setNodeHover:Ue,clearNodeHover:ve,edgeHover:Se,setEdgeHover:$e,clearEdgeHover:Ye}}},85506:(Y,T,e)=>{"use strict";e.d(T,{Y:()=>n});var t=e(66111);function n(i){return(0,t.useMemo)(()=>i.reduce((s,l)=>(l.fields.filter(u=>u.name==="source").length?s.edges.push(l):s.nodes.push(l),s),{edges:[],nodes:[]}),[i])}},68545:(Y,T,e)=>{"use strict";e.d(T,{Ee:()=>b,Ew:()=>E,F:()=>f,HB:()=>d,MP:()=>x,Tz:()=>D,dM:()=>l,lr:()=>u,uX:()=>R});var t=e(5109),n=e(92468),i=e(99098),s=e(53768);function l(S,O){const U=S.x2-S.x1,I=S.y2-S.y1,F=Math.sqrt(U*U+I*I),w=Math.max((F-O)/F,0),K=U*w,L=I*w,V=U-K,H=I-L,j=S.x1+V/2,A=S.y1+H/2;return{x1:j,y1:A,x2:j+K,y2:A+L}}function f(S){const O={...S,fields:S.fields.map(I=>({...I,name:I.name.toLowerCase()}))},U=new t.N(O);return{id:U.getFieldByName(n.z.id.toLowerCase()),title:U.getFieldByName(n.z.title.toLowerCase()),subTitle:U.getFieldByName(n.z.subTitle.toLowerCase()),mainStat:U.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:U.getFieldByName(n.z.secondaryStat.toLowerCase()),arc:o(S,n.z.arc),details:o(S,n.z.detail),color:U.getFieldByName(n.z.color),icon:U.getFieldByName(n.z.icon)}}function u(S){const O={...S,fields:S.fields.map(I=>({...I,name:I.name.toLowerCase()}))},U=new t.N(O);return{id:U.getFieldByName(n.z.id.toLowerCase()),source:U.getFieldByName(n.z.source.toLowerCase()),target:U.getFieldByName(n.z.target.toLowerCase()),mainStat:U.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:U.getFieldByName(n.z.secondaryStat.toLowerCase()),details:o(S,n.z.detail.toLowerCase())}}function o(S,O){return S.fields.filter(U=>U.name.match(new RegExp("^"+O)))}function d(S,O){if(!(O||S))return{nodes:[],edges:[]};if(S){const U=f(S);if(!U.id)throw new Error("id field is required for nodes data frame.");const I={};for(let w=0;w<U.id.values.length;w++){const K=U.id.values[w];I[K]=y(K,U,w)}let F=O?r(O,u(O)):[];for(const w of F)I[w.target].incoming++;return{nodes:Object.values(I),edges:F,legend:U.arc.map(w=>({color:w.config.color?.fixedColor??"",name:w.config.displayName||w.name}))}}else{O=O;const U={},I=u(O);let F=r(O,I);for(let K=0;K<F.length;K++){const L=F[K],{source:V,target:H}=p(I,K);U[H.id]=U[H.id]||H,U[V.id]=U[V.id]||V,m(I.mainStat)&&(U[H.id].mainStatNumeric=(U[H.id].mainStatNumeric??0)+I.mainStat.values[K]),m(I.secondaryStat)&&(U[H.id].secondaryStatNumeric=(U[H.id].secondaryStatNumeric??0)+I.secondaryStat.values[K]),U[L.target].incoming++}return{nodes:c(U,I),edges:F}}}function r(S,O){if(!O.id)throw new Error("id field is required for edges data frame.");return O.id.values.map((U,I)=>{const F=O.target?.values[I],w=O.source?.values[I];return{id:U,dataFrameRowIndex:I,source:w,target:F,mainStat:O.mainStat?E(O.mainStat.config,O.mainStat.values[I]):"",secondaryStat:O.secondaryStat?E(O.secondaryStat.config,O.secondaryStat.values[I]):""}})}function m(S){return S&&S.type===i.fS.number}function c(S,O){const U=[],I=[],F=m(O.secondaryStat)?{...O.secondaryStat,values:U}:void 0,w=m(O.mainStat)?{...O.mainStat,values:I}:void 0;return Object.values(S).map((K,L)=>{if(w||F){const V={...K};return w&&(V.mainStat=w,I.push(K.mainStatNumeric),V.dataFrameRowIndex=L),F&&(V.secondaryStat=F,U.push(K.secondaryStatNumeric),V.dataFrameRowIndex=L),V}return K})}function p(S,O){const U=S.target?.values[O],I=S.source?.values[O];return{target:g(U,O),source:g(I,O)}}function g(S,O){return{id:S,title:S,subTitle:"",dataFrameRowIndex:O,incoming:0,arcSections:[]}}function y(S,O,U){return{id:S,title:O.title?.values[U]||"",subTitle:O.subTitle?.values[U]||"",dataFrameRowIndex:U,incoming:0,mainStat:O.mainStat,secondaryStat:O.secondaryStat,arcSections:O.arc,color:O.color,icon:O.icon?.values[U]||""}}function E(S,O){if(typeof O=="string")return O;{const U=S.decimals||2;return Number.isFinite(O)?O.toFixed(U)+(S.unit?" "+S.unit:""):""}}function v(S){const O=P();for(let U=0;U<S;U++)O.add(h(U));return O}function h(S){return{id:S.toString(),title:`service:${S}`,subtitle:"service",arc__success:.5,arc__errors:.5,mainstat:.1,secondarystat:2,color:.5,icon:"database"}}function P(){const S={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.title]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.subTitle]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.arc+"success"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"green"}}},[NodeGraphDataFrameFieldNames.arc+"errors"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"red"}}},[NodeGraphDataFrameFieldNames.color]:{values:[],type:FieldType.number,config:{color:{mode:"continuous-GrYlRd"}}},[NodeGraphDataFrameFieldNames.icon]:{values:[],type:FieldType.string}};return new MutableDataFrame({name:"nodes",fields:Object.keys(S).map(O=>({...S[O],name:O}))})}function a(S){const O=C();for(const U of S)O.add({id:U.source+"--"+U.target,...U});return O}function C(){const S={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.source]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.target]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number}};return new MutableDataFrame({name:"edges",fields:Object.keys(S).map(O=>({...S[O],name:O}))})}function D(S){if(S.length===0)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const O=S.reduce((F,w)=>(w.x>F.right&&(F.right=w.x),w.x<F.left&&(F.left=w.x),w.y>F.bottom&&(F.bottom=w.y),w.y<F.top&&(F.top=w.y),F),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),U=O.top+(O.bottom-O.top)/2,I=O.left+(O.right-O.left)/2;return{...O,center:{x:I,y:U}}}function b(S,O){let U=S.filter(I=>!!(I.meta?.preferredVisualisationType==="nodeGraph"||I.name==="nodes"||I.name==="edges"||I.refId==="nodes"||I.refId==="edges"||new t.N(I).getFieldByName(n.z.id)));return O&&(U=M(U,O)),U}const M=(S,O)=>S.map(U=>{if(new t.N(U).getFieldByName(n.z.source.toLowerCase())){if(O?.edges?.mainStatUnit){const F=U.fields.find(w=>w.name.toLowerCase()===n.z.mainStat);F&&(F.config={...F.config,unit:O.edges.mainStatUnit})}if(O?.edges?.secondaryStatUnit){const F=U.fields.find(w=>w.name.toLowerCase()===n.z.secondaryStat);F&&(F.config={...F.config,unit:O.edges.secondaryStatUnit})}}else{if(O?.nodes?.mainStatUnit){const F=U.fields.find(w=>w.name.toLowerCase()===n.z.mainStat);F&&(F.config={...F.config,unit:O.nodes.mainStatUnit})}if(O?.nodes?.secondaryStatUnit){const F=U.fields.find(w=>w.name.toLowerCase()===n.z.secondaryStat);F&&(F.config={...F.config,unit:O.nodes.secondaryStatUnit})}if(O?.nodes?.arcs?.length)for(const F of O.nodes.arcs){const w=U.fields.find(K=>K.name.toLowerCase()===F.field);w&&F.color&&(w.config={...w.config,color:{fixedColor:F.color,mode:s.S.Fixed}})}}return U}),x=(S,O,U)=>{const I=O.find(F=>F.id===U);return I?[...new Set(S.filter(F=>I.source===F.id||I.target===F.id).map(F=>F.id))]:[]},R=(S,O,U)=>{const I=S.find(F=>F.id===U);if(I){const F=O.filter(w=>w.source===I.id||w.target===I.id);return[...new Set(F.flatMap(w=>S.filter(K=>w.source===K.id||w.target===K.id).map(K=>K.id)))]}return[]}},30383:(Y,T,e)=>{"use strict";e.d(T,{h:()=>u,j:()=>f});var t=e(30779),n=e(33750),i=e(30471),s=e(79086),l=e(40538);function f(o,d=!0){const r=["Value options"];o.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:r,defaultValue:!1}),o.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:r,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:m=>m.reduceOptions.values===!0}),o.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:r,editor:t.S.get("stats-picker").editor,defaultValue:[n.gz.lastNotNull],showIf:m=>m.reduceOptions.values===!1}),d&&o.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:r,settings:{allowCustomValue:!0,options:[],getOptions:async m=>{const c=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(m&&m.data)for(const p of m.data)for(const g of p.fields){const y=(0,i.CZ)(g,p,m.data),E=`/^${(0,s.GE)(y)}$/`;c.push({value:E,label:y})}return Promise.resolve(c)}},defaultValue:""})}function u(o,d){o.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:d,settings:{options:[{value:l.wm.Auto,label:"Auto"},{value:l.wm.Horizontal,label:"Horizontal"},{value:l.wm.Vertical,label:"Vertical"}]},defaultValue:l.wm.Auto})}},98967:(Y,T,e)=>{"use strict";e.r(T),e.d(T,{plugin:()=>D});var t=e(36873),n=e(40538),i=e(25272),s=e(50954),l=e(53768);const f=(b,M,x)=>{const R=(0,s.ZH)(b,M,x);if(x.angular&&(M==="singlestat"||M==="grafana-singlestat-panel")){const S=x.angular;if(R.graphMode=n.IG.None,S.sparkline&&S.sparkline.show&&(R.graphMode=n.IG.Area),S.colorBackground)R.colorMode=n.pc.Background;else if(S.colorValue)R.colorMode=n.pc.Value;else if(R.colorMode=n.pc.None,S.sparkline?.lineColor&&R.graphMode===n.IG.Area){const O=b.fieldConfig??{};O.defaults.color={mode:l.S.Fixed,fixedColor:S.sparkline.lineColor},b.fieldConfig=O}S.valueName==="name"&&(R.textMode=n.jG.Name)}return R};var u=e(82897),o=e(66111),d=e(99098),r=e(92156),m=e(76095),c=e(57426),p=e(18543),g=e(4387),y=e(47694);class E extends o.PureComponent{constructor(){super(...arguments),this.renderComponent=(M,x)=>{const{timeRange:R,options:S}=this.props,{value:O,alignmentFactors:U,width:I,height:F,count:w,orientation:K}=M,{openMenu:L,targetClassName:V}=x;let H=O.sparkline;return H&&(H.timeRange=R),o.createElement(c.w6,{value:O.display,count:w,sparkline:H,colorMode:S.colorMode,graphMode:S.graphMode,justifyMode:S.justifyMode,textMode:this.getTextMode(),alignmentFactors:U,parentOrientation:K,text:S.text,width:I,height:F,theme:y.vc.theme2,onClick:L,className:V})},this.renderValue=M=>{const{value:x}=M,{getLinks:R,hasLinks:S}=x;return S&&R?o.createElement(p.V,{links:R},O=>this.renderComponent(M,O)):this.renderComponent(M,{})},this.getValues=()=>{const{data:M,options:x,replaceVariables:R,fieldConfig:S,timeZone:O}=this.props;let U;for(let I of M.series)for(let F of I.fields){let{config:w}=F;if(F.type===d.fS.number){if(F.state?.range)continue;!U&&(!(0,u.isNumber)(w.min)||!(0,u.isNumber)(w.max))&&(U=(0,m.Xu)(M.series));const K=w.min??U.min,L=w.max??U.max;F.state=F.state??{},F.state.range={min:K,max:L,delta:L-K}}}return(0,r.nG)({fieldConfig:S,reduceOptions:x.reduceOptions,replaceVariables:R,theme:y.vc.theme2,data:M.series,sparkline:x.graphMode!==n.IG.None,timeZone:O})}}getTextMode(){const{options:M,fieldConfig:x,title:R}=this.props;return M.textMode===n.jG.Auto&&(x.defaults.displayName||!R)?n.jG.ValueAndName:M.textMode}render(){const{height:M,options:x,width:R,data:S,renderCounter:O}=this.props;return o.createElement(g.Q,{getValues:this.getValues,getAlignmentFactors:r.sg,renderValue:this.renderValue,width:R,height:M,source:S,itemSpacing:3,renderCounter:O,autoGrid:!0,orientation:x.orientation})}}var v=e(30383);const h=Object.freeze([0,0]),P={colorMode:n.pc.Value,graphMode:n.IG.Area,justifyMode:n.ap.Auto,textMode:n.jG.Auto};var a=e(26410);class C{getSuggestionsForData(M){const{dataSummary:x}=M;if(!x.hasData)return;const R=M.getListAppender({name:a.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:S=>{S.options.reduceOptions.values&&(S.options.reduceOptions.limit=1)}}});x.hasStringField&&x.hasNumberField&&x.frameCount===1&&x.rowCountTotal<10&&(R.append({name:a.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),R.append({name:a.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.Background}})),x.stringFieldCount===1&&x.frameCount===1&&x.rowCountTotal<10&&x.fieldCount===1&&R.append({name:a.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.None}}),x.hasNumberField&&x.hasTimeField&&(R.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),R.append({name:a.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:n.IG.None,colorMode:n.pc.Background}}))}}const D=new t.c(E).useFieldConfig().setPanelOptions(b=>{const M=["Stat styles"];(0,v.j)(b),(0,v.h)(b,M),i.Z(b),b.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:M,settings:{options:[{value:n.jG.Auto,label:"Auto"},{value:n.jG.Value,label:"Value"},{value:n.jG.ValueAndName,label:"Value and name"},{value:n.jG.Name,label:"Name"},{value:n.jG.None,label:"None"}]},defaultValue:P.textMode}),b.addSelect({path:"colorMode",name:"Color mode",defaultValue:n.pc.Value,category:M,settings:{options:[{value:n.pc.None,label:"None"},{value:n.pc.Value,label:"Value"},{value:n.pc.Background,label:"Background Gradient"},{value:n.pc.BackgroundSolid,label:"Background Solid"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:M,defaultValue:P.graphMode,settings:{options:[{value:n.IG.None,label:"None"},{value:n.IG.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:P.justifyMode,category:M,settings:{options:[{value:n.ap.Auto,label:"Auto"},{value:n.ap.Center,label:"Center"}]}})}).setNoPadding().setPanelChangeHandler(f).setSuggestionsSupplier(new C).setMigrationHandler(s.rD)},66683:(Y,T,e)=>{"use strict";e.d(T,{j:()=>d});var t=e(66111),n=e(52081),i=e(2594),s=e(8581),l=e(8180);const f=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],u=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(m=>({label:m,value:m})),o=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(m=>({label:m,value:m})),d=({value:m,onChange:c})=>{const p=(0,t.useMemo)(()=>m?.fill==="dash"?u:o,[m]),g=(0,t.useMemo)(()=>{if(!m?.dash?.length)return p[0];const y=m.dash?.join(", "),E=p.find(v=>v.value===y);return E||{label:y,value:y}},[m,p]);return t.createElement(n.Lh,null,t.createElement(i.S,{value:m?.fill||"solid",options:f,onChange:y=>{let E;y==="dot"?E=r(o[0].value):y==="dash"&&(E=r(u[0].value)),c({...m,fill:y,dash:E})}}),m?.fill&&m?.fill!=="solid"&&t.createElement(t.Fragment,null,t.createElement(s.Ph,{allowCustomValue:!0,options:p,value:g,width:20,onChange:y=>{c({...m,dash:r(y.value??"")})},formatCreateLabel:y=>`Segments: ${r(y).join(", ")}`}),t.createElement("div",null,"\xA0",t.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},t.createElement(l.h,{name:"question-circle"})))))};function r(m){const c=[];for(const p of m.split(/(?:,| )+/)){const g=Number.parseInt(p,10);isNaN(g)||c.push(g)}return c}},49616:(Y,T,e)=>{"use strict";e.d(T,{c:()=>u});var t=e(66111),n=e(47891),i=e(52081),s=e(2594),l=e(46967);const f=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],u=({value:o,onChange:d})=>{const r=typeof o=="number",m=r?n.secondsToHms(o/1e3):void 0;f[2].value=r?o:36e5;const c=y=>{let E=!1;if(y)try{E=n.intervalToSeconds(y)*1e3}catch(v){console.warn("ERROR",v)}d(E)},p=y=>{y.key==="Enter"&&c(y.target.value)},g=y=>{c(y.target.value)};return t.createElement(i.Lh,null,t.createElement(s.S,{value:o,options:f,onChange:d}),r&&t.createElement(l.I,{autoFocus:!1,placeholder:"never",width:10,defaultValue:m,onKeyDown:p,onBlur:g,prefix:t.createElement("div",null,"<"),spellCheck:!1}))}},74855:(Y,T,e)=>{"use strict";e.d(T,{F:()=>i});var t=e(66111),n=e(8581);const i=({item:s,value:l,onChange:f,id:u})=>{const o=(0,t.useCallback)(d=>{f({mode:d.value})},[f]);return t.createElement(n.Ph,{inputId:u,value:l.mode,options:s.settings.options,onChange:o})}},56703:(Y,T,e)=>{"use strict";e.d(T,{F:()=>y,r:()=>p});var t=e(3947),n=e(53768),i=e(99098),s=e(72293),l=e(40538),f=e(26372),u=e(22110),o=e(34315),d=e(91511),r=e(66683),m=e(49616),c=e(74855);const p={drawStyle:l.l8.Line,lineInterpolation:l.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:l.FI.None,barAlignment:l.pu.Center,stacking:{mode:l.o0.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1},g=["Graph styles"];function y(E){return{standardOptions:{[t.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:n.S.PaletteClassic}}},useCustomConfig:v=>{v.addRadio({path:"drawStyle",name:"Style",category:g,defaultValue:E.drawStyle,settings:{options:f.q.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:g,defaultValue:E.lineInterpolation,settings:{options:f.q.lineInterpolation},showIf:h=>h.drawStyle===l.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:g,defaultValue:E.barAlignment,settings:{options:f.q.barAlignment},showIf:h=>h.drawStyle===l.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:g,defaultValue:E.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:h=>h.drawStyle!==l.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:g,defaultValue:E.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:h=>h.drawStyle!==l.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:g,defaultValue:f.q.fillGradient[0].value,settings:{options:f.q.fillGradient},showIf:h=>h.drawStyle!==l.l8.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:g,hideFromDefaults:!0,settings:{filter:h=>h.type===i.fS.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:g,showIf:h=>h.drawStyle===l.l8.Line,editor:r.j,override:r.j,process:s.kG,shouldApply:h=>h.type===i.fS.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:g,defaultValue:!1,editor:m.c,override:m.c,showIf:h=>h.drawStyle===l.l8.Line,shouldApply:h=>h.type!==i.fS.time,process:s.kG}).addRadio({path:"showPoints",name:"Show points",category:g,defaultValue:f.q.showPoints[0].value,settings:{options:f.q.showPoints},showIf:h=>h.drawStyle!==l.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:g,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:h=>h.showPoints!==l.Jp.Never||h.drawStyle===l.l8.Points}),u.V(v,E.stacking,g),v.addSelect({category:g,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:l.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:l.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),o.r(v,E),d.B(v),v.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:l.i3.Off},settings:{options:f.q.thresholdsDisplayModes},editor:c.F,override:c.F,process:s.kG,shouldApply:()=>!0})}}}},63073:()=>{"use strict";let Y=window.matchMedia;window.matchMedia=T=>{let e=Y(T);return e.addEventListener||(e.addEventListener=(t,n)=>{e.addListener(n)},e.removeEventListener=(t,n)=>{e.removeListener(n)}),e}},3153:(Y,T,e)=>{"use strict";e.d(T,{PQ:()=>i,WI:()=>l,h:()=>n,y0:()=>s});var t=e(7240);let n;function i(f){n=f}function s(){return!n||!n.getState?{templating:{...t.qM,lastKey:"key"}}:n.getState()}function l(f){if(!(!n||!n.getState))return n.dispatch(f)}},73757:(Y,T,e)=>{"use strict";e.d(T,{pC:()=>u,B5:()=>n,V5:()=>i,bf:()=>s,n8:()=>l,hw:()=>t,BL:()=>d,vT:()=>r,eL:()=>m});var t=(c=>(c[c.Admin=4]="Admin",c[c.Editor=2]="Editor",c[c.Member=0]="Member",c[c.Viewer=1]="Viewer",c))(t||{}),n=(c=>(c.Viewer="Viewer",c.Editor="Editor",c.Admin="Admin",c))(n||{}),i=(c=>(c[c.View=1]="View",c[c.Edit=2]="Edit",c[c.Admin=4]="Admin",c))(i||{}),s=(c=>(c.View="View",c.Edit="Edit",c.Admin="Admin",c))(s||{}),l=(c=>(c.Folder="dash-folder",c.Dashboard="dash-db",c.AlertFolder="dash-folder-alerting",c))(l||{}),f=(c=>(c[c.Query=1]="Query",c[c.Admin=2]="Admin",c))(f||{}),u=(c=>(c.Team="Team",c.User="User",c.Viewer="Viewer",c.Editor="Editor",c))(u||{});const o=[{value:1,label:"Query",description:"Can query data source."}],d=[{value:"Team",label:"Team"},{value:"User",label:"User"},{value:"Viewer",label:"Everyone With Viewer Role"},{value:"Editor",label:"Everyone With Editor Role"}],r=[{value:1,label:"View",description:"Can view dashboards."},{value:2,label:"Edit",description:"Can add, edit and delete dashboards."},{value:4,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}],m=[{value:t.Member,label:"Member",description:"Is team member"},{value:t.Admin,label:"Admin",description:"Can add/remove permissions, members and delete team."}]},20352:()=>{"use strict"},47622:()=>{"use strict"},18285:()=>{"use strict"},56968:()=>{"use strict"},45984:(Y,T,e)=>{"use strict";e.d(T,{Dn:()=>D,Eb:()=>P,GL:()=>u,GT:()=>p,Im:()=>E,Jd:()=>M,OW:()=>b,QI:()=>h,Qt:()=>v,RB:()=>R,VJ:()=>C,Wj:()=>r,Xw:()=>d,Yr:()=>O,_B:()=>m,_z:()=>g,hS:()=>c,le:()=>a,nq:()=>l,p8:()=>y,pO:()=>o,xF:()=>S,xt:()=>f,z:()=>x});var t=e(84336),n=e(55391);const i=(0,t.X)("ds-request-response"),s=(0,t.X)("ds-request-error"),l=(0,t.X)("template-variable-value-updated"),f=(0,t.X)("graph-click"),u=(0,t.X)("threshold-changed");class o extends n.m{}o.type="panel-queries-changed";class d extends n.m{}d.type="panel-transformations-changed";class r extends n.m{}r.type="panels-options-changed";class m extends n.m{}m.type="dashboard-panels-changed";class c extends n.m{}c.type="dashboard-meta-changed";class p extends n.m{}p.type="panel-directive-ready";class g extends n.m{}g.type="render";class y extends n.R{}y.type="zoom-out";var E=(U=>(U[U.Left=-1]="Left",U[U.Right=1]="Right",U))(E||{});class v extends n.R{}v.type="shift-time";class h extends n.m{}h.type="absolute-time";class P extends n.R{}P.type="remove-panel";class a extends n.R{}a.type="show-modal";class C extends n.R{}C.type="show-confirm-modal";class D extends n.R{}D.type="show-react-modal";class b extends n.m{}b.type="hide-modal";class M extends n.m{}M.type="dashboard-saved";class x extends n.R{}x.type="annotation-query-started";class R extends n.R{}R.type="annotation-query-finished";class S extends n.R{}S.type="panel-edit-started";class O extends n.R{}O.type="panel-edit-finished"},3032:(Y,T,e)=>{"use strict";e.d(T,{Kd:()=>t,f0:()=>n,zN:()=>s,zQ:()=>i});var t=(l=>(l.left="left",l.right="right",l))(t||{});const n=["lines","bars","points","stacked_lines","stacked_bars"];var i=(l=>(l.table="table",l.raw="raw",l))(i||{});const s=["table","raw"]},59784:()=>{"use strict"},27876:(Y,T,e)=>{"use strict";e.d(T,{AccessControlAction:()=>b,AppNotificationSeverity:()=>y,AppNotificationTimeout:()=>E,CoreEvents:()=>M,DashboardInitPhase:()=>f,DashboardRoutes:()=>l,EXPLORE_GRAPH_STYLES:()=>h.f0,ExploreId:()=>h.Kd,KioskMode:()=>u,OrgRole:()=>o.B5,PermissionLevelString:()=>o.bf,SearchQueryType:()=>o.n8,ServiceAccountStateFilter:()=>m,TABLE_RESULTS_STYLE:()=>h.zQ,TeamPermissionLevel:()=>o.hw,createAsyncThunk:()=>P.hg,teamsPermissionLevels:()=>o.eL,timeoutMap:()=>v,useDispatch:()=>P.I0,useSelector:()=>P.v9});var t=e(28317),n=e(20352),i=e(88391),s=e(59784),l=(x=>(x.Home="home-dashboard",x.New="new-dashboard",x.Normal="normal-dashboard",x.Path="path-dashboard",x.Scripted="scripted-dashboard",x.Public="public-dashboard",x))(l||{}),f=(x=>(x.NotStarted="Not started",x.Fetching="Fetching",x.Services="Services",x.Failed="Failed",x.Completed="Completed",x))(f||{}),u=(x=>(x.TV="tv",x.Full="full",x))(u||{}),o=e(73757),d=e(47622),r=e(26945),m=(x=>(x.All="All",x.WithExpiredTokens="WithExpiredTokens",x.Disabled="Disabled",x))(m||{}),c=e(56968),p=e(89040),g=e(81146),y=(x=>(x.Success="success",x.Warning="warning",x.Error="error",x.Info="info",x))(y||{}),E=(x=>(x[x.Success=3e3]="Success",x[x.Warning=5e3]="Warning",x[x.Error=7e3]="Error",x))(E||{});const v={success:3e3,warning:5e3,error:7e3,info:3e3};var h=e(3032),P=e(29633),a=e(51904),C=e(18285),D=e(49400),b=(x=>(x.UsersRead="users:read",x.UsersWrite="users:write",x.UsersAuthTokenList="users.authtoken:read",x.UsersAuthTokenUpdate="users.authtoken:write",x.UsersPasswordUpdate="users.password:write",x.UsersDelete="users:delete",x.UsersCreate="users:create",x.UsersEnable="users:enable",x.UsersDisable="users:disable",x.UsersPermissionsUpdate="users.permissions:write",x.UsersLogout="users:logout",x.UsersQuotasList="users.quotas:read",x.UsersQuotasUpdate="users.quotas:write",x.ServiceAccountsRead="serviceaccounts:read",x.ServiceAccountsCreate="serviceaccounts:create",x.ServiceAccountsWrite="serviceaccounts:write",x.ServiceAccountsDelete="serviceaccounts:delete",x.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",x.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",x.OrgsRead="orgs:read",x.OrgsPreferencesRead="orgs.preferences:read",x.OrgsWrite="orgs:write",x.OrgsPreferencesWrite="orgs.preferences:write",x.OrgsCreate="orgs:create",x.OrgsDelete="orgs:delete",x.OrgUsersRead="org.users:read",x.OrgUsersAdd="org.users:add",x.OrgUsersRemove="org.users:remove",x.OrgUsersWrite="org.users:write",x.LDAPUsersRead="ldap.user:read",x.LDAPUsersSync="ldap.user:sync",x.LDAPStatusRead="ldap.status:read",x.DataSourcesExplore="datasources:explore",x.DataSourcesRead="datasources:read",x.DataSourcesCreate="datasources:create",x.DataSourcesWrite="datasources:write",x.DataSourcesDelete="datasources:delete",x.DataSourcesPermissionsRead="datasources.permissions:read",x.DataSourcesCachingRead="datasources.caching:read",x.DataSourcesInsightsRead="datasources.insights:read",x.ActionServerStatsRead="server.stats:read",x.ActionTeamsCreate="teams:create",x.ActionTeamsDelete="teams:delete",x.ActionTeamsRead="teams:read",x.ActionTeamsWrite="teams:write",x.ActionTeamsPermissionsRead="teams.permissions:read",x.ActionTeamsPermissionsWrite="teams.permissions:write",x.ActionRolesList="roles:read",x.ActionTeamsRolesList="teams.roles:read",x.ActionTeamsRolesAdd="teams.roles:add",x.ActionTeamsRolesRemove="teams.roles:remove",x.ActionUserRolesList="users.roles:read",x.ActionUserRolesAdd="users.roles:add",x.ActionUserRolesRemove="users.roles:remove",x.DashboardsRead="dashboards:read",x.DashboardsWrite="dashboards:write",x.DashboardsDelete="dashboards:delete",x.DashboardsCreate="dashboards:create",x.DashboardsPermissionsRead="dashboards.permissions:read",x.DashboardsPermissionsWrite="dashboards.permissions:write",x.DashboardsPublicWrite="dashboards.public:write",x.FoldersRead="folders:read",x.FoldersWrite="folders:write",x.FoldersDelete="folders:delete",x.FoldersCreate="folders:create",x.FoldersPermissionsRead="folders.permissions:read",x.FoldersPermissionsWrite="folders.permissions:write",x.ActionSupportBundlesCreate="support.bundles:create",x.ActionSupportBundlesRead="support.bundles:read",x.ActionSupportBundlesDelete="support.bundles:delete",x.AlertingRuleCreate="alert.rules:create",x.AlertingRuleRead="alert.rules:read",x.AlertingRuleUpdate="alert.rules:write",x.AlertingRuleDelete="alert.rules:delete",x.AlertingInstanceCreate="alert.instances:create",x.AlertingInstanceUpdate="alert.instances:write",x.AlertingInstanceRead="alert.instances:read",x.AlertingNotificationsRead="alert.notifications:read",x.AlertingNotificationsWrite="alert.notifications:write",x.AlertingRuleExternalWrite="alert.rules.external:write",x.AlertingRuleExternalRead="alert.rules.external:read",x.AlertingInstancesExternalWrite="alert.instances.external:write",x.AlertingInstancesExternalRead="alert.instances.external:read",x.AlertingNotificationsExternalWrite="alert.notifications.external:write",x.AlertingNotificationsExternalRead="alert.notifications.external:read",x.AlertingProvisioningRead="alert.provisioning:read",x.AlertingProvisioningWrite="alert.provisioning:write",x.ActionAPIKeysRead="apikeys:read",x.ActionAPIKeysCreate="apikeys:create",x.ActionAPIKeysDelete="apikeys:delete",x.PluginsInstall="plugins:install",x.PluginsWrite="plugins:write",x.SettingsRead="settings:read",x.SettingsWrite="settings:write",x))(b||{}),M=e(45984)},51904:()=>{"use strict"},88391:()=>{"use strict"},81146:()=>{"use strict"},89040:()=>{"use strict"},49400:()=>{"use strict"},29633:(Y,T,e)=>{"use strict";e.d(T,{I0:()=>i,hg:()=>l,v9:()=>s});var t=e(62992),n=e(67948);const i=n.useDispatch,s=n.useSelector,l=(f,u,o)=>(0,t.hg)(f,u,o)},26410:(Y,T,e)=>{"use strict";e.d(T,{y:()=>t});var t=(n=>(n.LineChart="Line chart",n.LineChartSmooth="Line chart smooth",n.LineChartGradientColorScheme="Line chart with gradient color scheme",n.AreaChart="Area chart",n.AreaChartStacked="Area chart stacked",n.AreaChartStackedPercent="Area chart 100% stacked",n.BarChart="Bar chart",n.BarChartGradientColorScheme="Bar chart with gradient color scheme",n.BarChartStacked="Bar chart stacked",n.BarChartStackedPercent="Bar chart 100% stacked",n.BarChartHorizontal="Bar chart horizontal",n.BarChartHorizontalStacked="Bar chart horizontal stacked",n.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",n.Candlestick="Candlestick",n.PieChart="Pie chart",n.PieChartDonut="Pie chart donut",n.Stat="Stat",n.StatColoredBackground="Stat colored background",n.Gauge="Gauge",n.GaugeNoThresholds="Gauge no thresholds",n.BarGaugeBasic="Bar gauge basic",n.BarGaugeLCD="Bar gauge LCD",n.Table="Table",n.StateTimeline="State timeline",n.StatusHistory="Status history",n.TextPanel="Text",n.DashboardList="Dashboard list",n.Logs="Logs",n))(t||{})},28317:()=>{"use strict"},46063:(Y,T,e)=>{"use strict";e.d(T,{ED:()=>f,I9:()=>i,T8:()=>o,Yb:()=>s,bj:()=>n,g0:()=>d,pz:()=>u,x_:()=>t});var t=(r=>(r.Firing="firing",r.Inactive="inactive",r.Pending="pending",r))(t||{}),n=(r=>(r.Normal="Normal",r.Alerting="Alerting",r.Pending="Pending",r.NoData="NoData",r.Error="Error",r))(n||{});function i(r){return Object.values(t).includes(r)}function s(r){return Object.values(n).some(m=>m===r)}function l(r){return r!==null&&typeof r<"u"&&!Object.values(t).includes(r)}function f(r){return l(r)?r.split(" ")[0]:r}var u=(r=>(r.Alerting="alerting",r.Recording="recording",r))(u||{}),o=(r=>(r.Cortex="Cortex",r.Mimir="Mimir",r.Prometheus="Prometheus",r.Thanos="Thanos",r))(o||{}),d=(r=>(r.Alerting="Alerting",r.NoData="NoData",r.KeepLastState="KeepLastState",r.OK="OK",r.Error="Error",r))(d||{})},43055:(Y,T,e)=>{"use strict";e.d(T,{P:()=>s,j:()=>n});var t=e(46063);function n(l,f){return(0,t.ED)(l.state)===f}var i=(l=>(l.Firing="firing",l))(i||{}),s=(l=>(l.Alerting="alerting",l.Pending="pending",l.Normal="inactive",l.NoData="nodata",l.Error="error",l))(s||{})},26945:()=>{"use strict"},23932:Y=>{const T="    ";function e(s){let l="";return s&&Object.keys(s).forEach(function(f){l+=f+":"+s[f]+";"}),l}function t(s){function l(u){return'class="'+u+'"'}function f(u){return'style="'+e(s["."+u])+'"'}return s?f:l}function n(s){return s===null?"null":Array.isArray(s)?"array":typeof s=="string"&&/^https?:/.test(s)?"link":typeof s=="object"&&typeof s.toISOString=="function"?"date":typeof s}function i(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}Y.exports=function(s,l){let f="";const u=t(l);let o=function(r,m,c,p){if(!r.length)return m+" "+c;let g=m+`
`;return f+=T,r.forEach(function(y,E){g+=f+p(y)+(E<r.length-1?",":"")+`
`}),f=f.slice(0,-T.length),g+f+c};function d(r){if(r===void 0)return"";switch(n(r)){case"boolean":return"<span "+u("json-markup-bool")+">"+r+"</span>";case"number":return"<span "+u("json-markup-number")+">"+r+"</span>";case"date":return'<span class="json-markup-string">"'+i(r.toISOString())+'"</span>';case"null":return"<span "+u("json-markup-null")+">null</span>";case"string":return"<span "+u("json-markup-string")+'>"'+i(r.replace(/\n/g,`
`+f))+'"</span>';case"link":return"<span "+u("json-markup-string")+'>"<a href="'+encodeURI(r)+'">'+i(r)+'</a>"</span>';case"array":return o(r,"[","]",d);case"object":const m=Object.keys(r).filter(function(c){return r[c]!==void 0});return o(m,"{","}",function(c){return"<span "+u("json-markup-key")+'>"'+i(c)+'":</span> '+d(r[c])})}return""}return"<div "+u("json-markup")+">"+d(s)+"</div>"}},26189:()=>{(function(Y){var T={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(t){var n={x:-1,y:-1,locked:!1};t.setCrosshair=function(f){if(!f)n.x=-1;else{var u=t.p2c(f);n.x=Math.max(0,Math.min(u.left,t.width())),n.y=Math.max(0,Math.min(u.top,t.height()))}t.triggerRedrawOverlay()},t.clearCrosshair=t.setCrosshair,t.lockCrosshair=function(f){f&&t.setCrosshair(f),n.locked=!0},t.unlockCrosshair=function(){n.locked=!1};function i(l){n.locked||n.x!=-1&&(n.x=-1,t.triggerRedrawOverlay())}function s(l){if(!n.locked){if(t.getSelection&&t.getSelection()){n.x=-1;return}var f=t.offset();n.x=Math.max(0,Math.min(l.pageX-f.left,t.width())),n.y=Math.max(0,Math.min(l.pageY-f.top,t.height())),t.triggerRedrawOverlay()}}t.hooks.bindEvents.push(function(l,f){l.getOptions().crosshair.mode&&(f.mouseout(i),f.mousemove(s))}),t.hooks.drawOverlay.push(function(l,f){var u=l.getOptions().crosshair;if(u.mode){var o=l.getPlotOffset();if(f.save(),f.translate(o.left,o.top),n.x!=-1){var d=l.getOptions().crosshair.lineWidth%2?.5:0;if(f.strokeStyle=u.color,f.lineWidth=u.lineWidth,f.lineJoin="round",f.beginPath(),u.mode.indexOf("x")!=-1){var r=Math.floor(n.x)+d;f.moveTo(r,0),f.lineTo(r,l.height())}if(u.mode.indexOf("y")!=-1){var m=Math.floor(n.y)+d;f.moveTo(0,m),f.lineTo(l.width(),m)}f.stroke()}f.restore()}}),t.hooks.shutdown.push(function(l,f){f.unbind("mouseout",i),f.unbind("mousemove",s)})}Y.plot.plugins.push({init:e,options:T,name:"crosshair",version:"1.0"})})(jQuery)},47825:()=>{(function(Y){function T(e){e.hooks.processDatapoints.push(function(t,n,i){n.dashes.show&&t.hooks.draw.push(function(s,l){var f=s.getPlotOffset(),u=n.xaxis,o=n.yaxis;function d(p,g){var y=i.points,E=i.pointsize,v=null,h=null,P=0,a=!0,C,D;n.dashes.dashLength[0]?(C=n.dashes.dashLength[0],n.dashes.dashLength[1]?D=n.dashes.dashLength[1]:D=C):D=C=n.dashes.dashLength,l.beginPath();for(var b=E;b<y.length;b+=E){let L=function(V){var H=Math.sqrt(Math.pow(I-O,2)+Math.pow(F-U,2));if(H<=V)return{deltaX:I-O,deltaY:F-U,distance:H,remainder:V-H};var j=I>O?1:-1,A=F>U?1:-1;return{deltaX:j*Math.sqrt(Math.pow(V,2)/(1+Math.pow((F-U)/(I-O),2))),deltaY:A*Math.sqrt(Math.pow(V,2)-Math.pow(V,2)/(1+Math.pow((F-U)/(I-O),2))),distance:V,remainder:0}};var K=L,M=y[b-E],x=y[b-E+1],R=y[b],S=y[b+1];if(!(M==null||R==null)){if(x<=S&&x<o.min){if(S<o.min)continue;M=(o.min-x)/(S-x)*(R-M)+M,x=o.min}else if(S<=x&&S<o.min){if(x<o.min)continue;R=(o.min-x)/(S-x)*(R-M)+M,S=o.min}if(x>=S&&x>o.max){if(S>o.max)continue;M=(o.max-x)/(S-x)*(R-M)+M,x=o.max}else if(S>=x&&S>o.max){if(x>o.max)continue;R=(o.max-x)/(S-x)*(R-M)+M,S=o.max}if(M<=R&&M<u.min){if(R<u.min)continue;x=(u.min-M)/(R-M)*(S-x)+x,M=u.min}else if(R<=M&&R<u.min){if(M<u.min)continue;S=(u.min-M)/(R-M)*(S-x)+x,R=u.min}if(M>=R&&M>u.max){if(R>u.max)continue;x=(u.max-M)/(R-M)*(S-x)+x,M=u.max}else if(R>=M&&R>u.max){if(M>u.max)continue;S=(u.max-M)/(R-M)*(S-x)+x,R=u.max}(M!=v||x!=h)&&l.moveTo(u.p2c(M)+p,o.p2c(x)+g);var O=u.p2c(M)+p,U=o.p2c(x)+g,I=u.p2c(R)+p,F=o.p2c(S)+g,w;do w=L(P>0?P:a?C:D),(w.deltaX!=0||w.deltaY!=0)&&(a?l.lineTo(O+w.deltaX,U+w.deltaY):l.moveTo(O+w.deltaX,U+w.deltaY)),a=!a,P=w.remainder,O+=w.deltaX,U+=w.deltaY;while(w.distance>0);v=R,h=S}}l.stroke()}l.save(),l.translate(f.left,f.top),l.lineJoin="round";var r=n.dashes.lineWidth,m=n.shadowSize;if(r>0&&m>0){l.lineWidth=m,l.strokeStyle="rgba(0,0,0,0.1)";var c=Math.PI/18;d(Math.sin(c)*(r/2+m/2),Math.cos(c)*(r/2+m/2)),l.lineWidth=m/2,d(Math.sin(c)*(r/2+m/4),Math.cos(c)*(r/2+m/4))}l.lineWidth=r,l.strokeStyle=n.color,r>0&&d(0,0),l.restore()})})}Y.plot.plugins.push({init:T,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},28844:()=>{(function(Y){"use strict";var T={series:{fillBelowTo:null}};function e(t){function n(l,f){var u;for(u=0;u<f.length;++u)if(f[u].id===l.fillBelowTo)return f[u];return null}function i(l,f,u,o,d,r,m,c){var p,g,y,E,v,h;return p=u-l,g=o-f,y=m-d,E=c-r,v=(-g*(l-d)+p*(f-r))/(-y*g+p*E),h=(y*(f-r)-E*(l-d))/(-y*g+p*E),v>=0&&v<=1&&h>=0&&h<=1?[l+h*p,f+h*g]:null}function s(l,f,u){if(u.fillBelowTo===null)return;var o,d,r,m,c,p,g;function y(D,b){f.beginPath(),f.moveTo(u.xaxis.p2c(D)+p.left,u.yaxis.p2c(b)+p.top)}function E(){f.closePath(),f.fill()}function v(){if(r.length/d!==c.length/m)return console.error("Refusing to graph inconsistent number of points"),!1;var D;for(D=0;D<r.length/d;D++)if(r[D*d]!==null&&c[D*m]!==null&&r[D*d]!==c[D*m])return console.error("Refusing to graph points without matching value"),!1;return!0}function h(D,b){console.assert(b>D,"expects the end index to be greater than the start index");var M=D===0||r[D-1]===null||c[D-1]===null,x=!1,R,S;for(R=D;R<b;R++)if(r[R*d+1]===null||c[R*d+1]===null)x=!1,M=!0;else if(r[R*d+1]===c[R*m+1])x=!0,M=!1;else if(r[R*d+1]>c[R*m+1]){M?y(r[R*d],r[R*d+1]):x?y(r[(R-1)*d],r[(R-1)*d+1]):(S=P(R),y(S[0],S[1])),C(R,b);return}else M=!1,x=!1}function P(D){console.assert(D>0,"expects the second point in the series line segment");var b,M;for(b=1;b<c.length/m;b++)if(M=i(r[(D-1)*d],r[(D-1)*d+1],r[D*d],r[D*d+1],c[(b-1)*m],c[(b-1)*m+1],c[b*m],c[b*m+1]),M!==null)return M;console.error("intersectionPoint() should only be called when an intersection happens")}function a(D,b){console.assert(D>=b,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M;for(M=D;M>=b;M--)f.lineTo(o.xaxis.p2c(c[M*m])+p.left,o.yaxis.p2c(c[M*m+1])+p.top);E()}function C(D,b){console.assert(D<=b,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M,x;for(M=D;M<b;M++)if(r[M*d+1]===null&&M>D){a(M-1,D),h(M,b);return}else if(r[M*d+1]===c[M*m+1]){a(M,D),h(M,b);return}else if(r[M*d+1]<c[M*m+1]){x=P(M),f.lineTo(u.xaxis.p2c(x[0])+p.left,u.yaxis.p2c(x[1])+p.top),a(M,D),h(M,b);return}else f.lineTo(u.xaxis.p2c(r[M*d])+p.left,u.yaxis.p2c(r[M*d+1])+p.top);a(b,D)}o=n(u,l.getData()),o&&(d=u.datapoints.pointsize,r=u.datapoints.points,m=o.datapoints.pointsize,c=o.datapoints.points,p=l.getPlotOffset(),v()&&(g=Y.color.parse(u.color),g.a=.4,g.normalize(),f.fillStyle=g.toString(),h(0,r.length/d)))}t.hooks.drawSeries.push(s)}Y.plot.plugins.push({init:e,options:T,name:"fillbelow",version:"0.1.0"})})(jQuery)},7540:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(Y){var T=function(){var u,o,d,r,m,c,p=function(D,b){u=b,o=D.getPlaceholder(),d=D.getOptions(),r=d.series.gauges,m=D.getData(),c=e(r.debug)};p.prototype.calculateLayout=function(){var D=o.width(),b=o.height(),M=Math.min(m.length,r.layout.columns),x=Math.ceil(m.length/M),R=r.layout.margin,S=r.layout.hMargin,O=r.layout.vMargin,U=(D-R*2-S*(M-1))/M,I=(b-R*2-O*(x-1))/x;if(r.layout.square){var F=Math.min(U,I);U=F,I=F}g(r,U);var w=r.cell.margin,K=0,L=0;r.label.show&&(K=r.label.margin,L=r.label.font.size);var V=0,H=0;r.value.show&&(V=r.value.margin,H=r.value.font.size);var j=0;r.threshold.show&&(j=r.threshold.width);var A=0,_=0;r.threshold.label.show&&(A=r.threshold.label.margin,_=r.threshold.label.font.size);for(var k=U/2-w-j-A*2-_,Q=r.gauge.startAngle,re=r.gauge.endAngle,Z=(re-Q)/100,oe=-1,G=Q;G<re;G+=Z)oe=Math.max(oe,Math.sin(i(G)));oe=Math.max(oe,Math.sin(i(re)));var le=(I-w*2-K*2-L)/(1+oe);le*oe<V+H/2&&(le=I-w*2-K*2-L-V-H/2);var fe=le-A*2-_-j,ae=Math.min(k,fe),de=r.gauge.width;de>=ae&&(de=Math.max(3,ae/3));var ee=A*2+_+j+ae,me=Math.max(ee*(1+oe),ee+V+H/2);return{canvasWidth:D,canvasHeight:b,margin:R,hMargin:S,vMargin:O,columns:M,rows:x,cellWidth:U,cellHeight:I,cellMargin:w,labelMargin:K,labelFontSize:L,valueMargin:V,valueFontSize:H,width:de,radius:ae,thresholdWidth:j,thresholdLabelMargin:A,thresholdLabelFontSize:_,gaugeOuterHeight:me}};function g(D,b){D.gauge.width==="auto"&&(D.gauge.width=Math.max(5,b/8)),D.label.margin==="auto"&&(D.label.margin=Math.max(1,b/20)),D.label.font.size==="auto"&&(D.label.font.size=Math.max(5,b/8)),D.value.margin==="auto"&&(D.value.margin=Math.max(1,b/30)),D.value.font.size==="auto"&&(D.value.font.size=Math.max(5,b/9)),D.threshold.width==="auto"&&(D.threshold.width=Math.max(3,b/100)),D.threshold.label.margin==="auto"&&(D.threshold.label.margin=Math.max(3,b/40)),D.threshold.label.font.size==="auto"&&(D.threshold.label.font.size=Math.max(5,b/15))}p.prototype.calculateAutoValues=g,p.prototype.calculateCellLayout=function(D,b,M){var x=t(b.columns,M),R=n(b.columns,M),S=b.margin+(b.cellWidth+b.hMargin)*x,O=b.margin+(b.cellHeight+b.vMargin)*R,U=S+b.cellWidth/2,I=O+b.cellMargin+b.labelMargin*2+b.labelFontSize+b.thresholdWidth+b.thresholdLabelFontSize+b.thresholdLabelMargin*2+b.radius,F=b.cellHeight-b.cellMargin*2-b.labelMargin*2-b.labelFontSize-b.gaugeOuterHeight,w=0;return D.cell.vAlign==="middle"?w=F/2:D.cell.vAlign==="bottom"&&(w=F),I+=w,{col:x,row:R,x:S,y:O,offsetY:w,cellWidth:b.cellWidth,cellHeight:b.cellHeight,cellMargin:b.cellMargin,cx:U,cy:I}},p.prototype.drawBackground=function(D){r.frame.show&&(u.save(),u.strokeStyle=d.grid.borderColor,u.lineWidth=d.grid.borderWidth,u.strokeRect(0,0,D.canvasWidth,D.canvasHeight),d.grid.backgroundColor&&(u.fillStyle=d.grid.backgroundColor,u.fillRect(0,0,D.canvasWidth,D.canvasHeight)),u.restore())},p.prototype.drawCellBackground=function(D,b){u.save(),D.cell.border&&D.cell.border.show&&D.cell.border.color&&D.cell.border.width&&(u.strokeStyle=D.cell.border.color,u.lineWidth=D.cell.border.width,u.strokeRect(b.x,b.y,b.cellWidth,b.cellHeight)),D.cell.background&&D.cell.background.color&&(u.fillStyle=D.cell.background.color,u.fillRect(b.x,b.y,b.cellWidth,b.cellHeight)),u.restore()},p.prototype.drawGauge=function(D,b,M,x,R){var S=D.gauge.shadow.show?D.gauge.shadow.blur:0,O=v(D,R),U=y(D,b,R);P(M.cx,M.cy,b.radius,b.width,i(D.gauge.startAngle),i(D.gauge.endAngle),D.gauge.border.color,D.gauge.border.width,D.gauge.background.color,S),P(M.cx,M.cy,b.radius-1,b.width-2,i(U.a1),i(U.a2),O,1,O,S),D.gauge.neutralValue!=null&&E(D,b,M,O)};function y(D,b,M){let x={};var R=D.gauge.neutralValue;return R!=null?M<R?(x.a1=h(D,b,M),x.a2=h(D,b,R)):(x.a1=h(D,b,R),x.a2=h(D,b,M)):(x.a1=D.gauge.startAngle,x.a2=h(D,b,M)),x}function E(D,b,M,x){var R=(D.gauge.max-D.gauge.min)/600;s(u,M.cx,M.cy,b.radius-2,b.width-4,i(h(D,b,D.gauge.neutralValue-R)),i(h(D,b,D.gauge.neutralValue+R)),x,2,D.gauge.background.color)}function v(D,b){for(var M,x=0;x<D.threshold.values.length;x++){var R=D.threshold.values[x];if(M=R.color,b<R.value)break}return M}function h(D,b,M){var x=D.gauge.startAngle+(D.gauge.endAngle-D.gauge.startAngle)*((M-D.gauge.min)/(D.gauge.max-D.gauge.min));return x<D.gauge.startAngle?x=D.gauge.startAngle:x>D.gauge.endAngle&&(x=D.gauge.endAngle),x}p.prototype.drawThreshold=function(D,b,M){for(var x=D.gauge.startAngle,R=0;R<D.threshold.values.length;R++){var S=D.threshold.values[R];c1=S.color,a2=h(D,b,S.value),s(u,M.cx,M.cy,b.radius+b.thresholdWidth,b.thresholdWidth-2,i(x),i(a2),c1,1,c1),x=a2}};function P(D,b,M,x,R,S,O,U,I,F){R!==S&&(u.save(),s(u,D,b,M,x,R,S,O,U,I),F&&(s(u,D,b,M,x,R,S),u.clip(),u.shadowOffsetX=0,u.shadowOffsetY=0,u.shadowBlur=10,u.shadowColor="gray",s(u,D,b,M+1,x+2,R,S,O,1)),u.restore())}p.prototype.drawLable=function(D,b,M,x,R){C(M.cx,M.y+M.cellMargin+b.labelMargin+M.offsetY,"flotGaugeLabel"+x,D.label.formatter?D.label.formatter(R.label,R.data[0][1]):text,D.label)},p.prototype.drawValue=function(D,b,M,x,R){C(M.cx,M.cy-D.value.font.size/2,"flotGaugeValue"+x,D.value.formatter?D.value.formatter(R.label,R.data[0][1]):text,D.value)},p.prototype.drawThresholdValues=function(D,b,M,x){a(D,b,M,"Min"+x,D.gauge.min,D.gauge.startAngle),a(D,b,M,"Max"+x,D.gauge.max,D.gauge.endAngle);for(var R=0;R<D.threshold.values.length;R++){var S=D.threshold.values[R];if(S.value>D.gauge.min&&S.value<D.gauge.max){var O=h(D,b,S.value);a(D,b,M,x+"_"+R,S.value,O)}}var U=D.gauge.neutralValue;U!=null&&U>D.gauge.min&&U<D.gauge.max&&a(D,b,M,"Neutral"+x,U,h(D,b,U))};function a(D,b,M,x,R,S){C(M.cx+(b.thresholdLabelMargin+b.thresholdLabelFontSize/2+b.radius)*Math.cos(i(S)),M.cy+(b.thresholdLabelMargin+b.thresholdLabelFontSize/2+b.radius)*Math.sin(i(S)),"flotGaugeThresholdValue"+x,D.threshold.label.formatter?D.threshold.label.formatter(R):R,D.threshold.label,S)}function C(D,b,M,x,R,S){var O=Y(o).find("#"+M),U=O.length;U||(O=Y("<span></span>"),O.attr("id",M),O.attr("class","flot-temp-elem"),o.append(O)),O.css("position","absolute"),O.css("top",b+"px"),O.css("white-space","nowrap"),R.font.size&&O.css("font-size",R.font.size+"px"),R.font.family&&O.css("font-family",R.font.family),R.color&&O.css("color",R.color),R.background.color&&O.css("background-color",R.background.color),R.background.opacity&&O.css("opacity",R.background.opacity),O.text(x),O.css("left",D+"px"),O.css("left",parseInt(O.css("left"))-O.width()/2+"px"),!U&&S&&(O.css("top",parseInt(O.css("top"))-O.height()/2+"px"),O.css("transform","rotate("+(180*S+90)+"deg)"))}return p}();function e(u){return typeof Logger<"u"?new Logger(u):null}function t(u,o){return o%u}function n(u,o){return Math.floor(o/u)}function i(u){return u*Math.PI}function s(u,o,d,r,m,c,p,g,y,E){if(c!==p){var v=!1;u.save(),u.beginPath(),u.arc(o,d,r,c,p,v),u.lineTo(o+(r-m)*Math.cos(p),d+(r-m)*Math.sin(p)),u.arc(o,d,r-m,p,c,!v),u.closePath(),y&&(u.lineWidth=y),g&&(u.strokeStyle=g,u.stroke()),E&&(u.fillStyle=E,u.fill()),u.restore()}}function l(u){u.hooks.processOptions.push(function(o,d){var r=e(d.series.gauges.debug);d.series.gauges.show&&(d.grid.show=!1,d.legend.show=!1);var m=d.series.gauges.threshold.values;m.sort(function(c,p){return c.value<p.value?-1:c.value>p.value?1:0})}),u.hooks.draw.push(function(o,d){var r=o.getOptions(),m=r.series.gauges,c=e(m.debug);if(m.show){var p=o.getData();if(!(!p||!p.length)){var g=new T(o,d),y=g.calculateLayout();m.debug.layout,g.drawBackground(y);for(var E=0;E<p.length;E++){var v=p[E],h=Y.extend({},m,v.gauges);v.gauges&&g.calculateAutoValues(h,y.cellWidth);var P=g.calculateCellLayout(h,y,E);g.drawCellBackground(h,P),h.debug.layout,h.label.show&&g.drawLable(h,y,P,E,v),g.drawGauge(h,y,P,v.label,v.data[0][1]),h.threshold.show&&g.drawThreshold(h,y,P),h.threshold.label.show&&g.drawThresholdValues(h,y,P,E),h.value.show&&g.drawValue(h,y,P,E,v)}}}})}var f={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(u,o){return u}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(u,o){return parseInt(o)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(u){return u}},values:[]}}}};Y.plot.plugins.push({init:l,options:f,name:"gauge",version:"1.1.0"})})(jQuery)},89377:()=>{(function(Y){Y.color={},Y.color.make=function(e,t,n,i){var s={};return s.r=e||0,s.g=t||0,s.b=n||0,s.a=i??1,s.add=function(l,f){for(var u=0;u<l.length;++u)s[l.charAt(u)]+=f;return s.normalize()},s.scale=function(l,f){for(var u=0;u<l.length;++u)s[l.charAt(u)]*=f;return s.normalize()},s.toString=function(){return s.a>=1?"rgb("+[s.r,s.g,s.b].join(",")+")":"rgba("+[s.r,s.g,s.b,s.a].join(",")+")"},s.normalize=function(){function l(f,u,o){return u<f?f:u>o?o:u}return s.r=l(0,parseInt(s.r),255),s.g=l(0,parseInt(s.g),255),s.b=l(0,parseInt(s.b),255),s.a=l(0,s.a,1),s},s.clone=function(){return Y.color.make(s.r,s.b,s.g,s.a)},s.normalize()},Y.color.extract=function(e,t){var n;do{if(n=e.css(t).toLowerCase(),n!=""&&n!="transparent")break;e=e.parent()}while(e.length&&!Y.nodeName(e.get(0),"body"));return n=="rgba(0, 0, 0, 0)"&&(n="transparent"),Y.color.parse(n)},Y.color.parse=function(e){var t,n=Y.color.make;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55);if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55,parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return n(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return n(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var i=Y.trim(e).toLowerCase();return i=="transparent"?n(255,255,255,0):(t=T[i]||[0,0,0],n(t[0],t[1],t[2]))};var T={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(Y){var T=Object.prototype.hasOwnProperty;Y.fn.detach||(Y.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(i,s){var l=s.children("."+i)[0];if(l==null&&(l=document.createElement("canvas"),l.className=i,Y(l).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(s),!l.getContext))if(window.G_vmlCanvasManager)l=window.G_vmlCanvasManager.initElement(l);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=l;var f=this.context=l.getContext("2d"),u=window.devicePixelRatio||1,o=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1;this.pixelRatio=u/o,this.resize(s.width(),s.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(i,s){if(i<=0||s<=0)throw new Error("Invalid dimensions for plot, width = "+i+", height = "+s);var l=this.element,f=this.context,u=this.pixelRatio;this.width!=i&&(l.width=i*u,l.style.width=i+"px",this.width=i),this.height!=s&&(l.height=s*u,l.style.height=s+"px",this.height=s),f.restore(),f.save(),f.scale(u,u)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var i=this._textCache;for(var s in i)if(T.call(i,s)){var l=this.getTextLayer(s),f=i[s];l.hide();for(var u in f)if(T.call(f,u)){var o=f[u];for(var d in o)if(T.call(o,d)){for(var r=o[d].positions,m=0,c;c=r[m];m++)c.active?c.rendered||(l.append(c.element),c.rendered=!0):(r.splice(m--,1),c.rendered&&c.element.detach());r.length==0&&delete o[d]}}l.show()}},e.prototype.getTextLayer=function(i){var s=this.text[i];return s==null&&(this.textContainer==null&&(this.textContainer=Y("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),s=this.text[i]=Y("<div></div>").addClass(i).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),s},e.prototype.getTextInfo=function(i,s,l,f,u){var o,d,r,m;if(s=""+s,typeof l=="object"?o=l.style+" "+l.variant+" "+l.weight+" "+l.size+"px/"+l.lineHeight+"px "+l.family:o=l,d=this._textCache[i],d==null&&(d=this._textCache[i]={}),r=d[o],r==null&&(r=d[o]={}),m=r[s],m==null){var c=Y("<div></div>").html(s).css({position:"absolute","max-width":u,top:-9999}).appendTo(this.getTextLayer(i));typeof l=="object"?c.css({font:o,color:l.color}):typeof l=="string"&&c.addClass(l),m=r[s]={element:c,positions:[]};var p=this._textSizeCache[s];p?(m.width=p.width,m.height=p.height):(m.width=c.outerWidth(!0),m.height=c.outerHeight(!0),this._textSizeCache[s]={width:m.width,height:m.height}),c.detach()}return m},e.prototype.addText=function(i,s,l,f,u,o,d,r,m){var c=this.getTextInfo(i,f,u,o,d),p=c.positions;r=="center"?s-=c.width/2:r=="right"&&(s-=c.width),m=="middle"?l-=c.height/2:m=="bottom"&&(l-=c.height);for(var g=0,y;y=p[g];g++)if(y.x==s&&y.y==l){y.active=!0;return}y={active:!0,rendered:!1,element:p.length?c.element.clone():c.element,x:s,y:l},p.push(y),y.element.css({top:Math.round(l),left:Math.round(s),"text-align":r})},e.prototype.removeText=function(i,s,l,f,u,o){if(f==null){var d=this._textCache[i];if(d!=null){for(var r in d)if(T.call(d,r)){var m=d[r];for(var c in m)if(T.call(m,c))for(var p=m[c].positions,g=0,y;y=p[g];g++)y.active=!1}}}else for(var p=this.getTextInfo(i,f,u,o).positions,g=0,y;y=p[g];g++)y.x==s&&y.y==l&&(y.active=!1)};function t(i,s,l,f){var u=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},d=null,r=null,m=null,c=null,p=null,g=[],y=[],E={left:0,right:0,top:0,bottom:0},v=0,h=0,P={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},a=this;a.setData=M,a.setupGrid=Q,a.draw=fe,a.getPlaceholder=function(){return i},a.getCanvas=function(){return d.element},a.getPlotOffset=function(){return E},a.width=function(){return v},a.height=function(){return h},a.offset=function(){var ie=m.offset();return ie.left+=E.left,ie.top+=E.top,ie},a.getData=function(){return u},a.getAxes=function(){var ie={},De;return Y.each(g.concat(y),function(Ne,Je){Je&&(ie[Je.direction+(Je.n!=1?Je.n:"")+"axis"]=Je)}),ie},a.getXAxes=function(){return g},a.getYAxes=function(){return y},a.c2p=O,a.p2c=U,a.getOptions=function(){return o},a.highlight=ot,a.unhighlight=ft,a.triggerRedrawOverlay=Be,a.pointOffset=function(ie){return{left:parseInt(g[R(ie,"x")-1].p2c(+ie.x)+E.left,10),top:parseInt(y[R(ie,"y")-1].p2c(+ie.y)+E.top,10)}},a.shutdown=V,a.destroy=function(){V(),i.removeData("plot").empty(),u=[],o=null,d=null,r=null,m=null,c=null,p=null,g=[],y=[],P=null,Ie=[],a=null},a.resize=function(){var ie=i.width(),De=i.height();d.resize(ie,De),r.resize(ie,De)},a.hooks=P,D(a),b(l),K(),M(s),Q(),fe(),L();function C(ie,De){De=[a].concat(De);for(var Ne=0;Ne<ie.length;++Ne)ie[Ne].apply(this,De)}function D(){for(var ie={Canvas:e},De=0;De<f.length;++De){var Ne=f[De];Ne.init(a,ie),Ne.options&&Y.extend(!0,o,Ne.options)}}function b(ie){Y.extend(!0,o,ie),ie&&ie.colors&&(o.colors=ie.colors),o.xaxis.color==null&&(o.xaxis.color=Y.color.parse(o.grid.color).scale("a",.22).toString()),o.yaxis.color==null&&(o.yaxis.color=Y.color.parse(o.grid.color).scale("a",.22).toString()),o.xaxis.tickColor==null&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color),o.yaxis.tickColor==null&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color),o.grid.borderColor==null&&(o.grid.borderColor=o.grid.color),o.grid.tickColor==null&&(o.grid.tickColor=Y.color.parse(o.grid.color).scale("a",.22).toString());var De,Ne,Je,Xe=i.css("font-size"),Le=Xe?+Xe.replace("px",""):13,Ue={style:i.css("font-style"),size:Math.round(.8*Le),variant:i.css("font-variant"),weight:i.css("font-weight"),family:i.css("font-family")};for(Je=o.xaxes.length||1,De=0;De<Je;++De)Ne=o.xaxes[De],Ne&&!Ne.tickColor&&(Ne.tickColor=Ne.color),Ne=Y.extend(!0,{},o.xaxis,Ne),o.xaxes[De]=Ne,Ne.font&&(Ne.font=Y.extend({},Ue,Ne.font),Ne.font.color||(Ne.font.color=Ne.color),Ne.font.lineHeight||(Ne.font.lineHeight=Math.round(Ne.font.size*1.15)));for(Je=o.yaxes.length||1,De=0;De<Je;++De)Ne=o.yaxes[De],Ne&&!Ne.tickColor&&(Ne.tickColor=Ne.color),Ne=Y.extend(!0,{},o.yaxis,Ne),o.yaxes[De]=Ne,Ne.font&&(Ne.font=Y.extend({},Ue,Ne.font),Ne.font.color||(Ne.font.color=Ne.color),Ne.font.lineHeight||(Ne.font.lineHeight=Math.round(Ne.font.size*1.15)));for(o.xaxis.noTicks&&o.xaxis.ticks==null&&(o.xaxis.ticks=o.xaxis.noTicks),o.yaxis.noTicks&&o.yaxis.ticks==null&&(o.yaxis.ticks=o.yaxis.noTicks),o.x2axis&&(o.xaxes[1]=Y.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top",o.x2axis.min==null&&(o.xaxes[1].min=null),o.x2axis.max==null&&(o.xaxes[1].max=null)),o.y2axis&&(o.yaxes[1]=Y.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right",o.y2axis.min==null&&(o.yaxes[1].min=null),o.y2axis.max==null&&(o.yaxes[1].max=null)),o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas),o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor),o.lines&&Y.extend(!0,o.series.lines,o.lines),o.points&&Y.extend(!0,o.series.points,o.points),o.bars&&Y.extend(!0,o.series.bars,o.bars),o.shadowSize!=null&&(o.series.shadowSize=o.shadowSize),o.highlightColor!=null&&(o.series.highlightColor=o.highlightColor),De=0;De<o.xaxes.length;++De)I(g,De+1).options=o.xaxes[De];for(De=0;De<o.yaxes.length;++De)I(y,De+1).options=o.yaxes[De];for(var ve in P)o.hooks[ve]&&o.hooks[ve].length&&(P[ve]=P[ve].concat(o.hooks[ve]));C(P.processOptions,[o])}function M(ie){u=x(ie),F(),w()}function x(ie){for(var De=[],Ne=0;Ne<ie.length;++Ne){var Je=Y.extend(!0,{},o.series);ie[Ne].data!=null?(Je.data=ie[Ne].data,delete ie[Ne].data,Y.extend(!0,Je,ie[Ne]),ie[Ne].data=Je.data):Je.data=ie[Ne],De.push(Je)}return De}function R(ie,De){var Ne=ie[De+"axis"];return typeof Ne=="object"&&(Ne=Ne.n),typeof Ne!="number"&&(Ne=1),Ne}function S(){return Y.grep(g.concat(y),function(ie){return ie})}function O(ie){var De={},Ne,Je;for(Ne=0;Ne<g.length;++Ne)Je=g[Ne],Je&&(De["x"+Je.n]=Je.c2p(ie.left));for(Ne=0;Ne<y.length;++Ne)Je=y[Ne],Je&&(De["y"+Je.n]=Je.c2p(ie.top));return De.x1!==void 0&&(De.x=De.x1),De.y1!==void 0&&(De.y=De.y1),De}function U(ie){var De={},Ne,Je,Xe;for(Ne=0;Ne<g.length;++Ne)if(Je=g[Ne],Je&&Je.used&&(Xe="x"+Je.n,ie[Xe]==null&&Je.n==1&&(Xe="x"),ie[Xe]!=null)){De.left=Je.p2c(ie[Xe]);break}for(Ne=0;Ne<y.length;++Ne)if(Je=y[Ne],Je&&Je.used&&(Xe="y"+Je.n,ie[Xe]==null&&Je.n==1&&(Xe="y"),ie[Xe]!=null)){De.top=Je.p2c(ie[Xe]);break}return De}function I(ie,De){return ie[De-1]||(ie[De-1]={n:De,direction:ie==g?"x":"y",options:Y.extend(!0,{},ie==g?o.xaxis:o.yaxis)}),ie[De-1]}function F(){var ie=u.length,De=-1,Ne;for(Ne=0;Ne<u.length;++Ne){var Je=u[Ne].color;Je!=null&&(ie--,typeof Je=="number"&&Je>De&&(De=Je))}ie<=De&&(ie=De+1);var Xe,Le=[],Ue=o.colors,ve=Ue.length,Se=0;for(Ne=0;Ne<ie;Ne++)Xe=Y.color.parse(Ue[Ne%ve]||"#666"),Ne%ve==0&&Ne&&(Se>=0?Se<.5?Se=-Se-.2:Se=0:Se=-Se),Le[Ne]=Xe.scale("rgb",1+Se);var $e=0,Ye;for(Ne=0;Ne<u.length;++Ne){if(Ye=u[Ne],Ye.color==null?(Ye.color=Le[$e].toString(),++$e):typeof Ye.color=="number"&&(Ye.color=Le[Ye.color].toString()),Ye.lines.show==null){var _e,Et=!0;for(_e in Ye)if(Ye[_e]&&Ye[_e].show){Et=!1;break}Et&&(Ye.lines.show=!0)}Ye.lines.zero==null&&(Ye.lines.zero=!!Ye.lines.fill),Ye.xaxis=I(g,R(Ye,"x")),Ye.yaxis=I(y,R(Ye,"y"))}}function w(){var ie=Number.POSITIVE_INFINITY,De=Number.NEGATIVE_INFINITY,Ne=Number.MAX_VALUE,Je,Xe,Le,Ue,ve,Se,$e,Ye,_e,Et,pt,je,ht,we,Qe,nt;function it(Ft,Vt,At){Vt<Ft.datamin&&Vt!=-Ne&&(Ft.datamin=Vt),At>Ft.datamax&&At!=Ne&&(Ft.datamax=At)}for(Y.each(S(),function(Ft,Vt){Vt.datamin=ie,Vt.datamax=De,Vt.used=!1}),Je=0;Je<u.length;++Je)Se=u[Je],Se.datapoints={points:[]},C(P.processRawData,[Se,Se.data,Se.datapoints]);for(Je=0;Je<u.length;++Je){if(Se=u[Je],Qe=Se.data,nt=Se.datapoints.format,!nt){if(nt=[],nt.push({x:!0,number:!0,required:!0}),nt.push({y:!0,number:!0,required:!0}),Se.stack||Se.bars.show||Se.lines.show&&Se.lines.fill){var yt=!!(Se.bars.show&&Se.bars.zero||Se.lines.show&&Se.lines.zero);nt.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:yt}),Se.bars.horizontal&&(delete nt[nt.length-1].y,nt[nt.length-1].x=!0)}Se.datapoints.format=nt}if(Se.datapoints.pointsize==null){Se.datapoints.pointsize=nt.length,Ye=Se.datapoints.pointsize,$e=Se.datapoints.points;var Lt=Se.lines.show&&Se.lines.steps;for(Se.xaxis.used=Se.yaxis.used=!0,Xe=Le=0;Xe<Qe.length;++Xe,Le+=Ye){we=Qe[Xe];var Kt=we==null;if(!Kt)for(Ue=0;Ue<Ye;++Ue)je=we[Ue],ht=nt[Ue],ht&&(ht.number&&je!=null&&(je=+je,isNaN(je)?je=null:je==1/0?je=Ne:je==-1/0&&(je=-Ne)),je==null&&(ht.required&&(Kt=!0),ht.defaultValue!=null&&(je=ht.defaultValue))),$e[Le+Ue]=je;if(Kt)for(Ue=0;Ue<Ye;++Ue)je=$e[Le+Ue],je!=null&&(ht=nt[Ue],ht.autoscale!==!1&&(ht.x&&it(Se.xaxis,je,je),ht.y&&it(Se.yaxis,je,je))),$e[Le+Ue]=null;if(Lt&&Le>0&&(!Kt||$e[Le-Ye]!=null)){for(Ue=0;Ue<Ye;++Ue)$e[Le+Ye+Ue]=$e[Le+Ue];$e[Le+1]=$e[Le-Ye+1]||0,Kt&&($e[Le]=we[0]),Le+=Ye}}}}for(Je=0;Je<u.length;++Je){if(Se=u[Je],$e=Se.datapoints.points,Ye=Se.datapoints.pointsize,Se.transform==="negative-Y")for(Xe=0;Xe<$e.length;Xe+=Ye)$e[Xe]!=null&&(je=$e[Xe+1],$e[Xe+1]=-je);C(P.processDatapoints,[Se,Se.datapoints])}for(Je=0;Je<u.length;++Je){Se=u[Je],$e=Se.datapoints.points,Ye=Se.datapoints.pointsize,nt=Se.datapoints.format;var an=ie,un=ie,hn=De,Wn=De;for(Xe=0;Xe<$e.length;Xe+=Ye)if($e[Xe]!=null)for(Ue=0;Ue<Ye;++Ue)je=$e[Xe+Ue],ht=nt[Ue],!(!ht||ht.autoscale===!1||je==Ne||je==-Ne)&&(ht.x&&(je<an&&(an=je),je>hn&&(hn=je)),ht.y&&(je<un&&(un=je),je>Wn&&(Wn=je)));if(Se.bars.show){var Bt;switch(Se.bars.align){case"left":Bt=0;break;case"right":Bt=-Se.bars.barWidth;break;default:Bt=-Se.bars.barWidth/2}Se.bars.horizontal?(un+=Bt,Wn+=Bt+Se.bars.barWidth):(an+=Bt,hn+=Bt+Se.bars.barWidth)}it(Se.xaxis,an,hn),it(Se.yaxis,un,Wn)}Y.each(S(),function(Ft,Vt){Vt.datamin==ie&&(Vt.datamin=null),Vt.datamax==De&&(Vt.datamax=null)})}function K(){i.find(".flot-temp-elem").remove(),i.css("position")=="static"&&i.css("position","relative"),d=new e("flot-base",i),r=new e("flot-overlay",i),c=d.context,p=r.context,m=Y(r.element).unbind();var ie=i.data("plot");ie&&(ie.shutdown(),r.clear()),i.data("plot",a)}function L(){o.grid.hoverable&&(m.mousemove(at),m.bind("mouseleave",dt),Y(document).bind("touchend",ye)),o.grid.clickable&&m.click(Re),C(P.bindEvents,[m])}function V(){Ke&&clearTimeout(Ke),m.unbind("mousemove",at),m.unbind("mouseleave",dt),m.unbind("click",Re),Y(document).unbind("touchend",ye),C(P.shutdown,[m])}function H(ie){function De(Ue){return Ue}var Ne,Je,Xe=ie.options.transform||De,Le=ie.options.inverseTransform;ie.direction=="x"?(Ne=ie.scale=v/Math.abs(Xe(ie.max)-Xe(ie.min)),Je=Math.min(Xe(ie.max),Xe(ie.min))):(Ne=ie.scale=h/Math.abs(Xe(ie.max)-Xe(ie.min)),Ne=-Ne,Je=Math.max(Xe(ie.max),Xe(ie.min))),Xe==De?ie.p2c=function(Ue){return(Ue-Je)*Ne}:ie.p2c=function(Ue){return(Xe(Ue)-Je)*Ne},Le?ie.c2p=function(Ue){return Le(Je+Ue/Ne)}:ie.c2p=function(Ue){return Je+Ue/Ne}}function j(ie){for(var De=ie.options,Ne=ie.ticks||[],Je=De.labelWidth||0,Xe=De.labelHeight||0,Le=Je||(ie.direction=="x"?Math.floor(d.width/(Ne.length||1)):null),Ue=ie.direction+"Axis "+ie.direction+ie.n+"Axis",ve="flot-"+ie.direction+"-axis flot-"+ie.direction+ie.n+"-axis "+Ue,Se=De.font||"flot-tick-label tickLabel",$e=0;$e<Ne.length;++$e){var Ye=Ne[$e];if(Ye.label){var _e=d.getTextInfo(ve,Ye.label,Se,null,Le);Je=Math.max(Je,_e.width+1),Xe=Math.max(Xe,_e.height)}}ie.labelWidth=De.labelWidth||Je,ie.labelHeight=De.labelHeight||Xe}function A(ie){var De=ie.labelWidth,Ne=ie.labelHeight,Je=ie.options.position,Xe=ie.direction==="x",Le=ie.options.tickLength,Ue=o.grid.axisMargin,ve=o.grid.labelMargin,Se=o.grid.eventSectionHeight,$e=!0,Ye=!0,_e=!0,Et=!1;Y.each(Xe?g:y,function(pt,je){je&&(je.show||je.reserveSpace)&&(je===ie?Et=!0:je.options.position===Je&&(Et?Ye=!1:$e=!1),Et||(_e=!1))}),Ye&&(Ue=0),Le==null&&(Le=_e?"full":5),isNaN(+Le)||(ve+=+Le),Xe?(Ne+=ve,Ne+=Se,Je=="bottom"?(E.bottom+=Ne+Ue,ie.box={top:d.height-E.bottom,height:Ne}):(ie.box={top:E.top+Ue,height:Ne},E.top+=Ne+Ue)):(De+=ve,Je=="left"?(ie.box={left:E.left+Ue,width:De},E.left+=De+Ue):(E.right+=De+Ue,ie.box={left:d.width-E.right,width:De})),ie.position=Je,ie.tickLength=Le,ie.box.padding=ve,ie.box.eventSectionPadding=Se,ie.innermost=$e}function _(ie){ie.direction=="x"?(ie.box.left=E.left-ie.labelWidth/2,ie.box.width=d.width-E.left-E.right+ie.labelWidth):(ie.box.top=E.top-ie.labelHeight/2,ie.box.height=d.height-E.bottom-E.top+ie.labelHeight)}function k(){var ie=o.grid.minBorderMargin,De,Ne;if(ie==null)for(ie=0,Ne=0;Ne<u.length;++Ne)ie=Math.max(ie,2*(u[Ne].points.radius+u[Ne].points.lineWidth/2));var Je={left:ie,right:ie,top:ie,bottom:ie};Y.each(S(),function(Xe,Le){Le.reserveSpace&&Le.ticks&&Le.ticks.length&&(Le.direction==="x"?(Je.left=Math.max(Je.left,Le.labelWidth/2),Je.right=Math.max(Je.right,Le.labelWidth/2)):(Je.bottom=Math.max(Je.bottom,Le.labelHeight/2),Je.top=Math.max(Je.top,Le.labelHeight/2)))}),E.left=Math.ceil(Math.max(Je.left,E.left)),E.right=Math.ceil(Math.max(Je.right,E.right)),E.top=Math.ceil(Math.max(Je.top,E.top)),E.bottom=Math.ceil(Math.max(Je.bottom,E.bottom))}function Q(){var ie,De=S(),Ne=o.grid.show;for(var Je in E){var Xe=o.grid.margin||0;E[Je]=typeof Xe=="number"?Xe:Xe[Je]||0}C(P.processOffset,[E]);for(var Je in E)typeof o.grid.borderWidth=="object"?E[Je]+=Ne?o.grid.borderWidth[Je]:0:E[Je]+=Ne?o.grid.borderWidth:0;if(Y.each(De,function(ve,Se){var $e=Se.options;Se.show=$e.show==null?Se.used:$e.show,Se.reserveSpace=$e.reserveSpace==null?Se.show:$e.reserveSpace,re(Se)}),C(P.processRange,[]),Ne){for(var Le=Y.grep(De,function(ve){return ve.show||ve.reserveSpace}),Ue=!1,ie=0;ie<2&&(Y.each(Le,function(Se,$e){oe($e),G($e),Ue=le($e,$e.ticks)||Ue,j($e)}),Ue&&P.processRange.length>0);ie++)C(P.processRange,[]),Ue=!1;for(ie=Le.length-1;ie>=0;--ie)A(Le[ie]);k(),Y.each(Le,function(ve,Se){_(Se)})}v=d.width-E.left-E.right,h=d.height-E.bottom-E.top,Y.each(De,function(ve,Se){H(Se)}),Ne&&me(),ct()}function re(ie){var De=ie.options,Ne=+(De.min!=null?De.min:ie.datamin),Je=+(De.max!=null?De.max:ie.datamax),Xe=Je-Ne;if(Xe==0){var Le=.25,Ue=Math.abs(Je==0?1:Je*Le);De.min==null&&(Ne-=Ue),(De.max==null||De.min!=null)&&(Je+=Ue)}else{var ve=De.autoscaleMargin;ve!=null&&(De.min==null&&(Ne-=Xe*ve,Ne<0&&ie.datamin!=null&&ie.datamin>=0&&(Ne=0)),De.max==null&&(Je+=Xe*ve,Je>0&&ie.datamax!=null&&ie.datamax<=0&&(Je=0)))}ie.min=Ne,ie.max=Je}function Z(ie){if(ie=Math.abs(String(ie).replace(".","")),ie==0)return 0;for(;ie!=0&&ie%10==0;)ie/=10;return Math.floor(Math.log(ie)/Math.LN10)+1}function oe(ie){var De=ie.options,Ne;typeof De.ticks=="number"&&De.ticks>0?Ne=De.ticks:Ne=.3*Math.sqrt(ie.direction=="x"?d.width:d.height);var Je=(ie.max-ie.min)/Ne,Xe=-Math.floor(Math.log(Je)/Math.LN10),Le=De.tickDecimals;Le!=null&&Xe>Le&&(Xe=Le);var Ue=Math.pow(10,-Xe),ve=Je/Ue,Se;if(ve<1.5?Se=1:ve<3?(Se=2,ve>2.25&&(Le==null||Xe+1<=Le)&&(Se=2.5,++Xe)):ve<7.5?Se=5:Se=10,Se*=Ue,De.minTickSize!=null&&Se<De.minTickSize&&(Se=De.minTickSize),ie.delta=Je,ie.tickDecimals=Math.max(0,Le??Xe),ie.tickSize=De.tickSize||Se,De.mode=="time"&&!ie.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(ie.tickGenerator||(ie.tickGenerator=function(pt){var je=[],ht=n(pt.min,pt.tickSize),we=0,Qe=Number.NaN,nt;do nt=Qe,Qe=ht+we*pt.tickSize,je.push(Qe),++we;while(Qe<pt.max&&Qe!=nt);return je},ie.tickFormatter=function(pt,je){var ht=je.tickDecimals?Math.pow(10,je.tickDecimals):1,we=""+Math.round(pt*ht)/ht;if(je.tickDecimals!=null){var Qe=we.indexOf("."),nt=Qe==-1?0:we.length-Qe-1;if(nt<je.tickDecimals)return(nt?we:we+".")+(""+ht).substr(1,je.tickDecimals-nt)}return we}),Y.isFunction(De.tickFormatter)&&(ie.tickFormatter=function(pt,je){return""+De.tickFormatter(pt,je)}),De.alignTicksWithAxis!=null){var $e=(ie.direction=="x"?g:y)[De.alignTicksWithAxis-1];if($e&&$e.used&&$e!=ie){var Ye=ie.tickGenerator(ie);if(Ye.length>0&&(De.min==null&&(ie.min=Math.min(ie.min,Ye[0])),De.max==null&&Ye.length>1&&(ie.max=Math.max(ie.max,Ye[Ye.length-1]))),ie.tickGenerator=function(pt){var je=[],ht,we;for(we=0;we<$e.ticks.length;++we)ht=($e.ticks[we].v-$e.min)/($e.max-$e.min),ht=pt.min+ht*(pt.max-pt.min),je.push(ht);return je},!ie.mode&&De.tickDecimals==null){var _e=Math.max(0,-Math.floor(Math.log(ie.delta)/Math.LN10)+1),Et=ie.tickGenerator(ie);Et.length>1&&/\..*0$/.test((Et[1]-Et[0]).toFixed(_e))||(ie.tickDecimals=_e)}}}}function G(ie){var De=ie.options.ticks,Ne=[];De==null||typeof De=="number"&&De>0?Ne=ie.tickGenerator(ie):De&&(Y.isFunction(De)?Ne=De(ie):Ne=De);var Je,Xe;for(ie.ticks=[],Je=0;Je<Ne.length;++Je){var Le=null,Ue=Ne[Je];typeof Ue=="object"?(Xe=+Ue[0],Ue.length>1&&(Le=Ue[1])):Xe=+Ue,Le==null&&(Le=ie.tickFormatter(Xe,ie)),isNaN(Xe)||ie.ticks.push({v:Xe,label:Le})}}function le(ie,De){var Ne=!1;return ie.options.autoscaleMargin&&De.length>0&&(ie.options.min==null&&(ie.min=Math.min(ie.min,De[0].v),Ne=!0),ie.options.max==null&&De.length>1&&(ie.max=Math.max(ie.max,De[De.length-1].v),Ne=!0)),Ne}function fe(){d.clear(),C(P.drawBackground,[c]);var ie=o.grid;ie.show&&ie.backgroundColor&&de(),ie.show&&!ie.aboveData&&ee();for(var De=0;De<u.length;++De)C(P.drawSeries,[c,u[De]]),ne(u[De]);C(P.draw,[c]),ie.show&&ie.aboveData&&ee(),d.render(),Be()}function ae(ie,De){for(var Ne,Je,Xe,Le,Ue=S(),ve=0;ve<Ue.length;++ve)if(Ne=Ue[ve],Ne.direction==De&&(Le=De+Ne.n+"axis",!ie[Le]&&Ne.n==1&&(Le=De+"axis"),ie[Le])){Je=ie[Le].from,Xe=ie[Le].to;break}if(ie[Le]||(Ne=De=="x"?g[0]:y[0],Je=ie[De+"1"],Xe=ie[De+"2"]),Je!=null&&Xe!=null&&Je>Xe){var Se=Je;Je=Xe,Xe=Se}return{from:Je,to:Xe,axis:Ne}}function de(){c.save(),c.translate(E.left,E.top),c.fillStyle=Dt(o.grid.backgroundColor,h,0,"rgba(255, 255, 255, 0)"),c.fillRect(0,0,v,h),c.restore()}function ee(){var ie,De,Ne,Je;c.save(),c.translate(E.left,E.top);var Xe=o.grid.markings;if(Xe)for(Y.isFunction(Xe)&&(De=a.getAxes(),De.xmin=De.xaxis.min,De.xmax=De.xaxis.max,De.ymin=De.yaxis.min,De.ymax=De.yaxis.max,Xe=Xe(De)),ie=0;ie<Xe.length;++ie){var Le=Xe[ie],Ue=ae(Le,"x"),ve=ae(Le,"y");if(Ue.from==null&&(Ue.from=Ue.axis.min),Ue.to==null&&(Ue.to=Ue.axis.max),ve.from==null&&(ve.from=ve.axis.min),ve.to==null&&(ve.to=ve.axis.max),!(Ue.to<Ue.axis.min||Ue.from>Ue.axis.max||ve.to<ve.axis.min||ve.from>ve.axis.max)){Ue.from=Math.max(Ue.from,Ue.axis.min),Ue.to=Math.min(Ue.to,Ue.axis.max),ve.from=Math.max(ve.from,ve.axis.min),ve.to=Math.min(ve.to,ve.axis.max);var Se=Ue.from===Ue.to,$e=ve.from===ve.to;if(!(Se&&$e))if(Ue.from=Math.floor(Ue.axis.p2c(Ue.from)),Ue.to=Math.floor(Ue.axis.p2c(Ue.to)),ve.from=Math.floor(ve.axis.p2c(ve.from)),ve.to=Math.floor(ve.axis.p2c(ve.to)),Se||$e){var Ye=Le.lineWidth||o.grid.markingsLineWidth,_e=Ye%2?.5:0;c.beginPath(),c.strokeStyle=Le.color||o.grid.markingsColor,c.lineWidth=Ye,Se?(c.moveTo(Ue.to+_e,ve.from),c.lineTo(Ue.to+_e,ve.to)):(c.moveTo(Ue.from,ve.to+_e),c.lineTo(Ue.to,ve.to+_e)),c.stroke()}else c.fillStyle=Le.color||o.grid.markingsColor,c.fillRect(Ue.from,ve.to,Ue.to-Ue.from,ve.from-ve.to)}}De=S(),Ne=o.grid.borderWidth;for(var Et=0;Et<De.length;++Et){var pt=De[Et],je=pt.box,ht=pt.tickLength,we,Qe,nt,it;if(!(!pt.show||pt.ticks.length==0)){for(c.lineWidth=1,pt.direction=="x"?(we=0,ht=="full"?Qe=pt.position=="top"?0:h:Qe=je.top-E.top+(pt.position=="top"?je.height:0)):(Qe=0,ht=="full"?we=pt.position=="left"?0:v:we=je.left-E.left+(pt.position=="left"?je.width:0)),pt.innermost||(c.strokeStyle=pt.options.color,c.beginPath(),nt=it=0,pt.direction=="x"?nt=v+1:it=h+1,c.lineWidth==1&&(pt.direction=="x"?Qe=Math.floor(Qe)+.5:we=Math.floor(we)+.5),c.moveTo(we,Qe),c.lineTo(we+nt,Qe+it),c.stroke()),c.strokeStyle=pt.options.tickColor,c.beginPath(),ie=0;ie<pt.ticks.length;++ie){var yt=pt.ticks[ie].v;nt=it=0,!(isNaN(yt)||yt<pt.min||yt>pt.max||ht=="full"&&(typeof Ne=="object"&&Ne[pt.position]>0||Ne>0)&&(yt==pt.min||yt==pt.max))&&(pt.direction=="x"?(we=pt.p2c(yt),it=ht=="full"?-h:ht,pt.position=="top"&&(it=-it)):(Qe=pt.p2c(yt),nt=ht=="full"?-v:ht,pt.position=="left"&&(nt=-nt)),c.lineWidth==1&&(pt.direction=="x"?we=Math.floor(we)+.5:Qe=Math.floor(Qe)+.5),c.moveTo(we,Qe),c.lineTo(we+nt,Qe+it))}c.stroke()}}Ne&&(Je=o.grid.borderColor,typeof Ne=="object"||typeof Je=="object"?(typeof Ne!="object"&&(Ne={top:Ne,right:Ne,bottom:Ne,left:Ne}),typeof Je!="object"&&(Je={top:Je,right:Je,bottom:Je,left:Je}),Ne.top>0&&(c.strokeStyle=Je.top,c.lineWidth=Ne.top,c.beginPath(),c.moveTo(0-Ne.left,0-Ne.top/2),c.lineTo(v,0-Ne.top/2),c.stroke()),Ne.right>0&&(c.strokeStyle=Je.right,c.lineWidth=Ne.right,c.beginPath(),c.moveTo(v+Ne.right/2,0-Ne.top),c.lineTo(v+Ne.right/2,h),c.stroke()),Ne.bottom>0&&(c.strokeStyle=Je.bottom,c.lineWidth=Ne.bottom,c.beginPath(),c.moveTo(v+Ne.right,h+Ne.bottom/2),c.lineTo(0,h+Ne.bottom/2),c.stroke()),Ne.left>0&&(c.strokeStyle=Je.left,c.lineWidth=Ne.left,c.beginPath(),c.moveTo(0-Ne.left/2,h+Ne.bottom),c.lineTo(0-Ne.left/2,0),c.stroke())):(c.lineWidth=Ne,c.strokeStyle=o.grid.borderColor,c.strokeRect(-Ne/2,-Ne/2,v+Ne,h+Ne))),c.restore()}function me(){Y.each(S(),function(ie,De){var Ne=De.box,Je=De.direction+"Axis "+De.direction+De.n+"Axis",Xe="flot-"+De.direction+"-axis flot-"+De.direction+De.n+"-axis "+Je,Le=De.options.font||"flot-tick-label tickLabel",Ue,ve,Se,$e,Ye;if(d.removeText(Xe),!(!De.show||De.ticks.length==0))for(var _e=0;_e<De.ticks.length;++_e)Ue=De.ticks[_e],!(!Ue.label||Ue.v<De.min||Ue.v>De.max)&&(De.direction=="x"?($e="center",ve=E.left+De.p2c(Ue.v),De.position=="bottom"?Se=Ne.top+Ne.padding+Ne.eventSectionPadding:(Se=Ne.top+Ne.height-Ne.padding,Ye="bottom")):(Ye="middle",Se=E.top+De.p2c(Ue.v),De.position=="left"?(ve=Ne.left+Ne.width-Ne.padding,$e="right"):ve=Ne.left+Ne.padding),d.addText(Xe,ve,Se,Ue.label,Le,null,null,$e,Ye))})}function q(ie){for(var De=[],Ne=null,Je=null,Xe=ie.datapoints,Le=[],Ue=0;Ue<Xe.pointsize-2;Ue++)Le.push(0);for(var ve=0;ve<Xe.points.length;ve+=Xe.pointsize){var Se=Xe.points[ve],$e=Xe.points[ve+1];ve===Xe.points.length-Xe.pointsize?Je=null:Je=Xe.points[ve+Xe.pointsize],Se!==null&&$e!==null&&Ne===null&&Je===null&&(De.push(Se),De.push($e),De.push.apply(De,Le)),Ne=Se}var Ye=Xe.points;Xe.points=De,ie.points.radius=ie.lines.lineWidth/2,he(ie),Xe.points=Ye}function ne(ie){ie.lines.show&&(se(ie),!ie.points.show&&!ie.bars.show&&q(ie)),ie.bars.show&&Te(ie),ie.points.show&&he(ie)}function se(ie){function De(ve,Se,$e,Ye,_e){var Et=ve.points,pt=ve.pointsize,je=null,ht=null;c.beginPath();for(var we=pt;we<Et.length;we+=pt){var Qe=Et[we-pt],nt=Et[we-pt+1],it=Et[we],yt=Et[we+1];if(!(Qe==null||it==null)){if(nt<=yt&&nt<_e.min){if(yt<_e.min)continue;Qe=(_e.min-nt)/(yt-nt)*(it-Qe)+Qe,nt=_e.min}else if(yt<=nt&&yt<_e.min){if(nt<_e.min)continue;it=(_e.min-nt)/(yt-nt)*(it-Qe)+Qe,yt=_e.min}if(nt>=yt&&nt>_e.max){if(yt>_e.max)continue;Qe=(_e.max-nt)/(yt-nt)*(it-Qe)+Qe,nt=_e.max}else if(yt>=nt&&yt>_e.max){if(nt>_e.max)continue;it=(_e.max-nt)/(yt-nt)*(it-Qe)+Qe,yt=_e.max}if(Qe<=it&&Qe<Ye.min){if(it<Ye.min)continue;nt=(Ye.min-Qe)/(it-Qe)*(yt-nt)+nt,Qe=Ye.min}else if(it<=Qe&&it<Ye.min){if(Qe<Ye.min)continue;yt=(Ye.min-Qe)/(it-Qe)*(yt-nt)+nt,it=Ye.min}if(Qe>=it&&Qe>Ye.max){if(it>Ye.max)continue;nt=(Ye.max-Qe)/(it-Qe)*(yt-nt)+nt,Qe=Ye.max}else if(it>=Qe&&it>Ye.max){if(Qe>Ye.max)continue;yt=(Ye.max-Qe)/(it-Qe)*(yt-nt)+nt,it=Ye.max}(Qe!=je||nt!=ht)&&c.moveTo(Ye.p2c(Qe)+Se,_e.p2c(nt)+$e),je=it,ht=yt,c.lineTo(Ye.p2c(it)+Se,_e.p2c(yt)+$e)}}c.stroke()}function Ne(ve,Se,$e){for(var Ye=ve.points,_e=ve.pointsize,Et=Math.min(Math.max(0,$e.min),$e.max),pt=0,je,ht=!1,we=1,Qe=0,nt=0;!(_e>0&&pt>Ye.length+_e);){pt+=_e;var it=Ye[pt-_e],yt=Ye[pt-_e+we],Lt=Ye[pt],Kt=Ye[pt+we];if(ht){if(_e>0&&it!=null&&Lt==null){nt=pt,_e=-_e,we=2;continue}if(_e<0&&pt==Qe+_e){c.fill(),ht=!1,_e=-_e,we=1,pt=Qe=nt+_e;continue}}if(!(it==null||Lt==null)){if(it<=Lt&&it<Se.min){if(Lt<Se.min)continue;yt=(Se.min-it)/(Lt-it)*(Kt-yt)+yt,it=Se.min}else if(Lt<=it&&Lt<Se.min){if(it<Se.min)continue;Kt=(Se.min-it)/(Lt-it)*(Kt-yt)+yt,Lt=Se.min}if(it>=Lt&&it>Se.max){if(Lt>Se.max)continue;yt=(Se.max-it)/(Lt-it)*(Kt-yt)+yt,it=Se.max}else if(Lt>=it&&Lt>Se.max){if(it>Se.max)continue;Kt=(Se.max-it)/(Lt-it)*(Kt-yt)+yt,Lt=Se.max}if(ht||(c.beginPath(),c.moveTo(Se.p2c(it),$e.p2c(Et)),ht=!0),yt>=$e.max&&Kt>=$e.max){c.lineTo(Se.p2c(it),$e.p2c($e.max)),c.lineTo(Se.p2c(Lt),$e.p2c($e.max));continue}else if(yt<=$e.min&&Kt<=$e.min){c.lineTo(Se.p2c(it),$e.p2c($e.min)),c.lineTo(Se.p2c(Lt),$e.p2c($e.min));continue}var an=it,un=Lt;yt<=Kt&&yt<$e.min&&Kt>=$e.min?(it=($e.min-yt)/(Kt-yt)*(Lt-it)+it,yt=$e.min):Kt<=yt&&Kt<$e.min&&yt>=$e.min&&(Lt=($e.min-yt)/(Kt-yt)*(Lt-it)+it,Kt=$e.min),yt>=Kt&&yt>$e.max&&Kt<=$e.max?(it=($e.max-yt)/(Kt-yt)*(Lt-it)+it,yt=$e.max):Kt>=yt&&Kt>$e.max&&yt<=$e.max&&(Lt=($e.max-yt)/(Kt-yt)*(Lt-it)+it,Kt=$e.max),it!=an&&c.lineTo(Se.p2c(an),$e.p2c(yt)),c.lineTo(Se.p2c(it),$e.p2c(yt)),c.lineTo(Se.p2c(Lt),$e.p2c(Kt)),Lt!=un&&(c.lineTo(Se.p2c(Lt),$e.p2c(Kt)),c.lineTo(Se.p2c(un),$e.p2c(Kt)))}}}c.save(),c.translate(E.left,E.top),c.lineJoin="round";var Je=ie.lines.lineWidth,Xe=ie.shadowSize;if(Je>0&&Xe>0){c.lineWidth=Xe,c.strokeStyle="rgba(0,0,0,0.1)";var Le=Math.PI/18;De(ie.datapoints,Math.sin(Le)*(Je/2+Xe/2),Math.cos(Le)*(Je/2+Xe/2),ie.xaxis,ie.yaxis),c.lineWidth=Xe/2,De(ie.datapoints,Math.sin(Le)*(Je/2+Xe/4),Math.cos(Le)*(Je/2+Xe/4),ie.xaxis,ie.yaxis)}c.lineWidth=Je,c.strokeStyle=ie.color;var Ue=Ve(ie.lines,ie.color,0,h);Ue&&(c.fillStyle=Ue,Ne(ie.datapoints,ie.xaxis,ie.yaxis)),Je>0&&De(ie.datapoints,0,0,ie.xaxis,ie.yaxis),c.restore()}function he(ie){function De(ve,Se,$e,Ye,_e,Et,pt,je){for(var ht=ve.points,we=ve.pointsize,Qe=0;Qe<ht.length;Qe+=we){var nt=ht[Qe],it=ht[Qe+1];nt==null||nt<Et.min||nt>Et.max||it<pt.min||it>pt.max||(c.beginPath(),nt=Et.p2c(nt),it=pt.p2c(it)+Ye,je=="circle"?c.arc(nt,it,Se,0,_e?Math.PI:Math.PI*2,!1):je(c,nt,it,Se,_e),c.closePath(),$e&&(c.fillStyle=$e,c.fill()),c.stroke())}}c.save(),c.translate(E.left,E.top);var Ne=ie.points.lineWidth,Je=ie.shadowSize,Xe=ie.points.radius,Le=ie.points.symbol;if(Ne==0&&(Ne=1e-4),Ne>0&&Je>0){var Ue=Je/2;c.lineWidth=Ue,c.strokeStyle="rgba(0,0,0,0.1)",De(ie.datapoints,Xe,null,Ue+Ue/2,!0,ie.xaxis,ie.yaxis,Le),c.strokeStyle="rgba(0,0,0,0.2)",De(ie.datapoints,Xe,null,Ue/2,!0,ie.xaxis,ie.yaxis,Le)}c.lineWidth=Ne,c.strokeStyle=ie.color,De(ie.datapoints,Xe,Ve(ie.points,ie.color),0,!1,ie.xaxis,ie.yaxis,Le),c.restore()}function ue(ie,De,Ne,Je,Xe,Le,Ue,ve,Se,$e,Ye){var _e,Et,pt,je,ht,we,Qe,nt,it;$e?(nt=we=Qe=!0,ht=!1,_e=Ne,Et=ie,je=De+Je,pt=De+Xe,Et<_e&&(it=Et,Et=_e,_e=it,ht=!0,we=!1)):(ht=we=Qe=!0,nt=!1,_e=ie+Je,Et=ie+Xe,pt=Ne,je=De,je<pt&&(it=je,je=pt,pt=it,nt=!0,Qe=!1)),!(Et<Ue.min||_e>Ue.max||je<ve.min||pt>ve.max)&&(_e<Ue.min&&(_e=Ue.min,ht=!1),Et>Ue.max&&(Et=Ue.max,we=!1),pt<ve.min&&(pt=ve.min,nt=!1),je>ve.max&&(je=ve.max,Qe=!1),_e=Ue.p2c(_e),pt=ve.p2c(pt),Et=Ue.p2c(Et),je=ve.p2c(je),Le&&(Se.fillStyle=Le(pt,je),Se.fillRect(_e,je,Et-_e,pt-je)),Ye>0&&(ht||we||Qe||nt)&&(Se.beginPath(),Se.moveTo(_e,pt),ht?Se.lineTo(_e,je):Se.moveTo(_e,je),Qe?Se.lineTo(Et,je):Se.moveTo(Et,je),we?Se.lineTo(Et,pt):Se.moveTo(Et,pt),nt?Se.lineTo(_e,pt):Se.moveTo(_e,pt),Se.stroke()))}function Te(ie){function De(Xe,Le,Ue,ve,Se,$e){for(var Ye=Xe.points,_e=Xe.pointsize,Et=0;Et<Ye.length;Et+=_e)Ye[Et]!=null&&ue(Ye[Et],Ye[Et+1],Ye[Et+2],Le,Ue,ve,Se,$e,c,ie.bars.horizontal,ie.bars.lineWidth)}c.save(),c.translate(E.left,E.top),c.lineWidth=ie.bars.lineWidth,c.strokeStyle=ie.color;var Ne;switch(ie.bars.align){case"left":Ne=0;break;case"right":Ne=-ie.bars.barWidth;break;default:Ne=-ie.bars.barWidth/2}var Je=ie.bars.fill?function(Xe,Le){return Ve(ie.bars,ie.color,Xe,Le)}:null;De(ie.datapoints,Ne,Ne+ie.bars.barWidth,Je,ie.xaxis,ie.yaxis),c.restore()}function Ve(ie,De,Ne,Je){var Xe=ie.fill;if(!Xe)return null;if(ie.fillColor)return Dt(ie.fillColor,Ne,Je,De);var Le=Y.color.parse(De);return Le.a=typeof Xe=="number"?Xe:.4,Le.normalize(),Le.toString()}function ct(){if(o.legend.container!=null?Y.find(o.legend.container).html(""):i.find(".legend").remove(),!!o.legend.show){for(var ie=[],De=[],Ne=!1,Je=o.legend.labelFormatter,Xe,Le,Ue=0;Ue<u.length;++Ue)Xe=u[Ue],Xe.label&&(Le=Je?Je(Xe.label,Xe):Xe.label,Le&&De.push({label:Le,color:Xe.color}));if(o.legend.sorted)if(Y.isFunction(o.legend.sorted))De.sort(o.legend.sorted);else if(o.legend.sorted=="reverse")De.reverse();else{var ve=o.legend.sorted!="descending";De.sort(function(we,Qe){return we.label==Qe.label?0:we.label<Qe.label!=ve?1:-1})}for(var Ue=0;Ue<De.length;++Ue){var Se=De[Ue];Ue%o.legend.noColumns==0&&(Ne&&ie.push("</tr>"),ie.push("<tr>"),Ne=!0),ie.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+Se.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+Se.label+"</td>")}if(Ne&&ie.push("</tr>"),ie.length!=0){var $e='<table style="font-size:smaller;color:'+o.grid.color+'">'+ie.join("")+"</table>";if(o.legend.container!=null)Y(o.legend.container).html($e);else{var Ye="",_e=o.legend.position,Et=o.legend.margin;Et[0]==null&&(Et=[Et,Et]),_e.charAt(0)=="n"?Ye+="top:"+(Et[1]+E.top)+"px;":_e.charAt(0)=="s"&&(Ye+="bottom:"+(Et[1]+E.bottom)+"px;"),_e.charAt(1)=="e"?Ye+="right:"+(Et[0]+E.right)+"px;":_e.charAt(1)=="w"&&(Ye+="left:"+(Et[0]+E.left)+"px;");var pt=Y('<div class="legend">'+$e.replace('style="','style="position:absolute;'+Ye+";")+"</div>").appendTo(i);if(o.legend.backgroundOpacity!=0){var je=o.legend.backgroundColor;je==null&&(je=o.grid.backgroundColor,je&&typeof je=="string"?je=Y.color.parse(je):je=Y.color.extract(pt,"background-color"),je.a=1,je=je.toString());var ht=pt.children();Y('<div style="position:absolute;width:'+ht.width()+"px;height:"+ht.height()+"px;"+Ye+"background-color:"+je+';"> </div>').prependTo(pt).css("opacity",o.legend.backgroundOpacity)}}}}}var Ie=[],Ke=null;function Ge(ie,De,Ne){var Je=o.grid.mouseActiveRadius,Xe=Je*Je+1,Le=null,Ue=!1,ve,Se,$e;for(ve=u.length-1;ve>=0;--ve)if(Ne(u[ve])){var Ye=u[ve],_e=Ye.xaxis,Et=Ye.yaxis,pt=Ye.datapoints.points,je=_e.c2p(ie),ht=Et.c2p(De),we=Je/_e.scale,Qe=Je/Et.scale;if($e=Ye.datapoints.pointsize,_e.options.inverseTransform&&(we=Number.MAX_VALUE),Et.options.inverseTransform&&(Qe=Number.MAX_VALUE),Ye.lines.show||Ye.points.show)for(Se=0;Se<pt.length;Se+=$e){var nt=pt[Se],it=pt[Se+1];if(nt!=null&&!(nt-je>we||nt-je<-we||it-ht>Qe||it-ht<-Qe)){var yt=Math.abs(_e.p2c(nt)-ie),Lt=Math.abs(Et.p2c(it)-De),Kt=yt*yt+Lt*Lt;Kt<Xe&&(Xe=Kt,Le=[ve,Se/$e])}}if(Ye.bars.show&&!Le){var an,un;switch(Ye.bars.align){case"left":an=0;break;case"right":an=-Ye.bars.barWidth;break;default:an=-Ye.bars.barWidth/2}for(un=an+Ye.bars.barWidth,Se=0;Se<pt.length;Se+=$e){var nt=pt[Se],it=pt[Se+1],hn=pt[Se+2];nt!=null&&(u[ve].bars.horizontal?je<=Math.max(hn,nt)&&je>=Math.min(hn,nt)&&ht>=it+an&&ht<=it+un:je>=nt+an&&je<=nt+un&&ht>=Math.min(hn,it)&&ht<=Math.max(hn,it))&&(Le=[ve,Se/$e])}}}return Le?(ve=Le[0],Se=Le[1],$e=u[ve].datapoints.pointsize,{datapoint:u[ve].datapoints.points.slice(Se*$e,(Se+1)*$e),dataIndex:Se,series:u[ve],seriesIndex:ve}):null}function at(ie){o.grid.hoverable&&be("plothover",ie,function(De){return De.hoverable!=!1})}function dt(ie){o.grid.hoverable&&be("plothover",ie,function(De){return!1})}function Re(ie){a.isSelecting||be("plotclick",ie,function(De){return De.clickable!=!1})}function ye(ie){if(ie.cancelable){if(!m.is(ie.target)&&m.has(ie.target).length===0){be("plotleave",ie,function(De){});return}at(Pe(ie)),ie.preventDefault()}}function Pe(ie){if(!ie||!ie.originalEvent||ie.pageX&&ie.pageY)return ie;var De=ie.originalEvent;if(De.changedTouches.length===0)return ie;var Ne=De.changedTouches[0];return ie.pageX=Ne.pageX,ie.pageY=Ne.pageY,ie}function be(ie,De,Ne){var Je=m.offset(),Xe=De.pageX-Je.left-E.left,Le=De.pageY-Je.top-E.top,Ue=O({left:Xe,top:Le});Ue.pageX=De.pageX,Ue.pageY=De.pageY,Ue.ctrlKey=De.ctrlKey,Ue.metaKey=De.metaKey;var ve=Ge(Xe,Le,Ne);if(ve&&(ve.pageX=parseInt(ve.series.xaxis.p2c(ve.datapoint[0])+Je.left+E.left,10),ve.pageY=parseInt(ve.series.yaxis.p2c(ve.datapoint[1])+Je.top+E.top,10)),o.grid.autoHighlight){for(var Se=0;Se<Ie.length;++Se){var $e=Ie[Se];$e.auto==ie&&!(ve&&$e.series==ve.series&&$e.point[0]==ve.datapoint[0]&&$e.point[1]==ve.datapoint[1])&&ft($e.series,$e.point)}ve&&ot(ve.series,ve.datapoint,ie)}i.trigger(ie,[Ue,ve])}function Be(){var ie=o.interaction.redrawOverlayInterval;if(ie==-1){ke();return}Ke||(Ke=setTimeout(ke,ie))}function ke(){Ke=null,p.save(),r.clear(),p.translate(E.left,E.top);var ie,De;for(ie=0;ie<Ie.length;++ie)De=Ie[ie],De.series.bars.show?ut(De.series,De.point):St(De.series,De.point);p.restore(),C(P.drawOverlay,[p])}function ot(ie,De,Ne){if(typeof ie=="number"&&(ie=u[ie]),typeof De=="number"){var Je=ie.datapoints.pointsize;De=ie.datapoints.points.slice(Je*De,Je*(De+1))}var Xe=gt(ie,De);Xe==-1?(Ie.push({series:ie,point:De,auto:Ne}),Be()):Ne||(Ie[Xe].auto=!1)}function ft(ie,De){if(ie==null&&De==null){Ie=[],Be();return}if(typeof ie=="number"&&(ie=u[ie]),typeof De=="number"){var Ne=ie.datapoints.pointsize;De=ie.datapoints.points.slice(Ne*De,Ne*(De+1))}var Je=gt(ie,De);Je!=-1&&(Ie.splice(Je,1),Be())}function gt(ie,De){for(var Ne=0;Ne<Ie.length;++Ne){var Je=Ie[Ne];if(Je.series==ie&&Je.point[0]==De[0]&&Je.point[1]==De[1])return Ne}return-1}function St(ie,De){var Ne=De[0],Je=De[1],Xe=ie.xaxis,Le=ie.yaxis,Ue=typeof ie.highlightColor=="string"?ie.highlightColor:Y.color.parse(ie.color).scale("a",.5).toString();if(!(Ne<Xe.min||Ne>Xe.max||Je<Le.min||Je>Le.max)){var ve=ie.points.radius+ie.points.lineWidth/2;p.lineWidth=ve,p.strokeStyle=Ue;var Se=1.5*ve;Ne=Xe.p2c(Ne),Je=Le.p2c(Je),p.beginPath(),ie.points.symbol=="circle"?p.arc(Ne,Je,Se,0,2*Math.PI,!1):ie.points.symbol(p,Ne,Je,Se,!1),p.closePath(),p.stroke()}}function ut(ie,De){var Ne=typeof ie.highlightColor=="string"?ie.highlightColor:Y.color.parse(ie.color).scale("a",.5).toString(),Je=Ne,Xe;switch(ie.bars.align){case"left":Xe=0;break;case"right":Xe=-ie.bars.barWidth;break;default:Xe=-ie.bars.barWidth/2}p.lineWidth=ie.bars.lineWidth,p.strokeStyle=Ne,ue(De[0],De[1],De[2]||0,Xe,Xe+ie.bars.barWidth,function(){return Je},ie.xaxis,ie.yaxis,p,ie.bars.horizontal,ie.bars.lineWidth)}function Dt(ie,De,Ne,Je){if(typeof ie=="string")return ie;for(var Xe=c.createLinearGradient(0,Ne,0,De),Le=0,Ue=ie.colors.length;Le<Ue;++Le){var ve=ie.colors[Le];if(typeof ve!="string"){var Se=Y.color.parse(Je);ve.brightness!=null&&(Se=Se.scale("rgb",ve.brightness)),ve.opacity!=null&&(Se.a*=ve.opacity),ve=Se.toString()}Xe.addColorStop(Le/(Ue-1),ve)}return Xe}}Y.plot=function(i,s,l){var f=new t(Y(i),s,l,Y.plot.plugins);return f},Y.plot.version="0.8.3",Y.plot.plugins=[],Y.fn.plot=function(i,s){return this.each(function(){Y.plot(this,i,s)})};function n(i,s){return s*Math.floor(i/s)}}(jQuery)},4027:()=>{(function(Y){function T(e){var t={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},n={},i=null;function s(E){t.active&&(m(E),e.getPlaceholder().trigger("plotselecting",[u()]))}function l(E){E.which==1&&(document.body.focus(),document.onselectstart!==void 0&&n.onselectstart==null&&(n.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&n.ondrag==null&&(n.ondrag=document.ondrag,document.ondrag=function(){return!1}),r(t.first,E),t.active=!0,i=function(v){f(v)},Y(document).one("mouseup",i))}function f(E){return i=null,document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag),t.active=!1,m(E),y()?o(E):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function u(){if(!y()||!t.show)return null;var E={},v=t.first,h=t.second,P=e.getAxes(),a=!0;return Y.each(P,function(C,D){D.used&&(anyUsed=!1)}),Y.each(P,function(C,D){if(D.used||a){var b=D.c2p(v[D.direction]),M=D.c2p(h[D.direction]);E[C]={from:Math.min(b,M),to:Math.max(b,M)}}}),E}function o(E){var v=u();v.ctrlKey=E.ctrlKey,v.metaKey=E.metaKey,e.getPlaceholder().trigger("plotselected",[v]),v.xaxis&&v.yaxis&&e.getPlaceholder().trigger("selected",[{x1:v.xaxis.from,y1:v.yaxis.from,x2:v.xaxis.to,y2:v.yaxis.to}])}function d(E,v,h){return v<E?E:v>h?h:v}function r(E,v){var h=e.getOptions(),P=e.getPlaceholder().offset(),a=e.getPlotOffset();E.x=d(0,v.pageX-P.left-a.left,e.width()),E.y=d(0,v.pageY-P.top-a.top,e.height()),h.selection.mode=="y"&&(E.x=E==t.first?0:e.width()),h.selection.mode=="x"&&(E.y=E==t.first?0:e.height())}function m(E){E.pageX!=null&&(r(t.second,E),y()?(e.isSelecting=!0,t.show=!0,e.triggerRedrawOverlay()):c(!0))}function c(E){t.show&&(t.show=!1,e.triggerRedrawOverlay(),E||e.getPlaceholder().trigger("plotunselected",[]))}function p(E,v){var h,P,a,C,D=e.getAxes();for(var b in D)if(h=D[b],h.direction==v&&(C=v+h.n+"axis",!E[C]&&h.n==1&&(C=v+"axis"),E[C])){P=E[C].from,a=E[C].to;break}if(E[C]||(h=v=="x"?e.getXAxes()[0]:e.getYAxes()[0],P=E[v+"1"],a=E[v+"2"]),P!=null&&a!=null&&P>a){var M=P;P=a,a=M}return{from:P,to:a,axis:h}}function g(E,v){var h,P,a=e.getOptions();a.selection.mode=="y"?(t.first.x=0,t.second.x=e.width()):(P=p(E,"x"),t.first.x=P.axis.p2c(P.from),t.second.x=P.axis.p2c(P.to)),a.selection.mode=="x"?(t.first.y=0,t.second.y=e.height()):(P=p(E,"y"),t.first.y=P.axis.p2c(P.from),t.second.y=P.axis.p2c(P.to)),t.show=!0,e.triggerRedrawOverlay(),!v&&y()&&o()}function y(){var E=e.getOptions().selection.minSize;return Math.abs(t.second.x-t.first.x)>=E&&Math.abs(t.second.y-t.first.y)>=E}e.clearSelection=c,e.setSelection=g,e.getSelection=u,e.hooks.bindEvents.push(function(E,v){var h=E.getOptions();h.selection.mode!=null&&(v.mousemove(s),v.mousedown(l))}),e.hooks.drawOverlay.push(function(E,v){if(t.show&&y()){var h=E.getPlotOffset(),P=E.getOptions();v.save(),v.translate(h.left,h.top);var a=Y.color.parse(P.selection.color);v.strokeStyle=a.scale("a",.8).toString(),v.lineWidth=1,v.lineJoin=P.selection.shape,v.fillStyle=a.scale("a",.4).toString();var C=Math.min(t.first.x,t.second.x)+.5,D=Math.min(t.first.y,t.second.y)+.5,b=Math.abs(t.second.x-t.first.x)-1,M=Math.abs(t.second.y-t.first.y)-1;v.fillRect(C,D,b,M),v.strokeRect(C,D,b,M),v.restore()}}),e.hooks.shutdown.push(function(E,v){v.unbind("mousemove",s),v.unbind("mousedown",l),i&&(Y(document).unbind("mouseup",i),document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag))})}Y.plot.plugins.push({init:T,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},65103:()=>{(function(Y){var T={series:{stack:null}};function e(t){function n(s,l){for(var f=null,u=0;u<l.length&&s!=l[u];++u)l[u].stack==s.stack&&(f=l[u]);return f}function i(s,l,f){if(!(l.stack==null||l.stack===!1)){var u=n(l,s.getData());if(u){for(var o=f.pointsize,d=f.points,r=u.datapoints.pointsize,m=u.datapoints.points,c=[],p,g,y,E,v,h,P=l.lines.show,a=l.bars.horizontal,C=o>2&&(a?f.format[2].x:f.format[2].y),D=P&&l.lines.steps,b=a?1:0,M=a?0:1,x=0,R=0,S,O;!(x>=d.length&&R>=m.length);){if(S=c.length,x<d.length&&d[x]==null){for(O=0;O<o;++O)c.push(d[x+O]);x+=o}else if(x>=d.length){for(O=0;O<o;++O)c.push(m[R+O]);C&&(c[S+2]=m[R+M]),R+=r}else if(R>=m.length){for(O=0;O<o;++O)c.push(d[x+O]);x+=o}else if(R<m.length&&m[R]==null)R+=r;else{if(p=d[x+b],g=d[x+M],E=m[R+b],v=m[R+M],h=0,p==E){for(O=0;O<o;++O)c.push(d[x+O]);c[S+M]+=v,h=v,x+=o,R+=r}else if(p>E){if(x==0){for(O=0;O<o;++O)c.push(m[R+O]);h=v}if(x>0&&d[x-o]!=null){for(y=0,c.push(E),c.push(y+v),O=2;O<o;++O)c.push(d[x+O]);h=v}R+=r}else{for(O=0;O<o;++O)c.push(d[x+O]);R>0&&m[R-r]!=null&&(h=0),c[S+M]+=h,x+=o}fromgap=!1,S!=c.length&&C&&(c[S+2]=h)}if(D&&S!=c.length&&S>0&&c[S]!=null&&c[S]!=c[S-o]&&c[S+1]!=c[S-o+1]){for(O=0;O<o;++O)c[S+o+O]=c[S+O];c[S+1]=c[S-o+1]}}f.points=c}}}t.hooks.processDatapoints.push(i)}Y.plot.plugins.push({init:e,options:T,name:"stack",version:"1.2"})})(jQuery)},85095:()=>{(function(Y){var T={series:{stackpercent:null}};function e(t){var n={},i=!1,s={};function l(o,d,r,m){if(i||(i=!0,s=f(o.getData())),d.stackpercent==!0){var c=r.length;d.percents=[];var p=0,g=1;d.bars&&d.bars.horizontal&&d.bars.horizontal===!0&&(p=1,g=0);for(var y=0;y<c;y++){var E=s[r[y][p]+""];E>0?d.percents.push(r[y][g]*100/E):d.percents.push(0)}}}function f(o){var d=o.length,r={};if(d>0){for(var m=0;m<d;m++)if(o[m].stackpercent){var c=0,p=1;o[m].bars&&o[m].bars.horizontal&&o[m].bars.horizontal===!0&&(c=1,p=0);for(var g=o[m].data.length,y=0;y<g;y++){var E=0;o[m].data[y][1]!=null&&(E=o[m].data[y][p]),r[o[m].data[y][c]+""]?r[o[m].data[y][c]+""]+=E:r[o[m].data[y][c]+""]=E}}}return r}function u(o,d,r){if(d.stackpercent){i||(s=f(o.getData()));var m=[],c=0,p=1;d.bars&&d.bars.horizontal&&d.bars.horizontal===!0&&(c=1,p=0);for(var g=0;g<r.points.length;g+=3)n[r.points[g+c]]||(n[r.points[g+c]]=0),m[g+c]=r.points[g+c],m[g+p]=r.points[g+p]+n[r.points[g+c]],m[g+2]=n[r.points[g+c]],n[r.points[g+c]]+=r.points[g+p],s[m[g+c]+""]>0?(m[g+p]=m[g+p]*100/s[m[g+c]+""],m[g+2]=m[g+2]*100/s[m[g+c]+""]):(m[g+p]=0,m[g+2]=0);r.points=m}}t.hooks.processRawData.push(l),t.hooks.processDatapoints.push(u)}Y.plot.plugins.push({init:e,options:T,name:"stackpercent",version:"0.1"})})(jQuery)},59554:()=>{(function(Y){var T={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(d,r){return r*Math.floor(d/r)}function t(d,r,m,c){if(typeof d.strftime=="function")return d.strftime(r);var p=function(C,D){return C=""+C,D=""+(D??"0"),C.length==1?D+C:C},g=[],y=!1,E=d.getHours(),v=E<12;m==null&&(m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),c==null&&(c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var h;E>12?h=E-12:E==0?h=12:h=E;for(var P=0;P<r.length;++P){var a=r.charAt(P);if(y){switch(a){case"a":a=""+c[d.getDay()];break;case"b":a=""+m[d.getMonth()];break;case"d":a=p(d.getDate(),"");break;case"e":a=p(d.getDate()," ");break;case"h":case"H":a=p(E);break;case"I":a=p(h);break;case"l":a=p(h," ");break;case"m":a=p(d.getMonth()+1,"");break;case"M":a=p(d.getMinutes());break;case"q":a=""+(Math.floor(d.getMonth()/3)+1);break;case"S":a=p(d.getSeconds());break;case"y":a=p(d.getFullYear()%100);break;case"Y":a=""+d.getFullYear();break;case"p":a=v?"am":"pm";break;case"P":a=v?"AM":"PM";break;case"w":a=""+d.getDay();break}g.push(a),y=!1}else a=="%"?y=!0:g.push(a)}return g.join("")}function n(d){function r(g,y,E,v){g[y]=function(){return E[v].apply(E,arguments)}}var m={date:d};d.strftime!=null&&r(m,"strftime",d,"strftime"),r(m,"getTime",d,"getTime"),r(m,"setTime",d,"setTime");for(var c=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],p=0;p<c.length;p++)r(m,"get"+c[p],d,"getUTC"+c[p]),r(m,"set"+c[p],d,"setUTC"+c[p]);return m}function i(d,r){if(r.timezone=="browser")return new Date(d);if(!r.timezone||r.timezone=="utc")return n(new Date(d));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var m=new timezoneJS.Date;return m.setTimezone(r.timezone),m.setTime(d),m}else return n(new Date(d))}var s={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},l=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],f=l.concat([[3,"month"],[6,"month"],[1,"year"]]),u=l.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function o(d){d.hooks.processOptions.push(function(r,m){Y.each(r.getAxes(),function(c,p){var g=p.options;g.mode=="time"&&(p.tickGenerator=function(y){var E=[],v=i(y.min,g),h=0,P=g.tickSize&&g.tickSize[1]==="quarter"||g.minTickSize&&g.minTickSize[1]==="quarter"?u:f;g.minTickSize!=null&&(typeof g.tickSize=="number"?h=g.tickSize:h=g.minTickSize[0]*s[g.minTickSize[1]]);for(var a=0;a<P.length-1&&!(y.delta<(P[a][0]*s[P[a][1]]+P[a+1][0]*s[P[a+1][1]])/2&&P[a][0]*s[P[a][1]]>=h);++a);var C=P[a][0],D=P[a][1];if(D=="year"){if(g.minTickSize!=null&&g.minTickSize[1]=="year")C=Math.floor(g.minTickSize[0]);else{var b=Math.pow(10,Math.floor(Math.log(y.delta/s.year)/Math.LN10)),M=y.delta/s.year/b;M<1.5?C=1:M<3?C=2:M<7.5?C=5:C=10,C*=b}C<1&&(C=1)}y.tickSize=g.tickSize||[C,D];var x=y.tickSize[0];D=y.tickSize[1];var R=x*s[D];D=="second"?v.setSeconds(e(v.getSeconds(),x)):D=="minute"?v.setMinutes(e(v.getMinutes(),x)):D=="hour"?v.setHours(e(v.getHours(),x)):D=="month"?v.setMonth(e(v.getMonth(),x)):D=="quarter"?v.setMonth(3*e(v.getMonth()/3,x)):D=="year"&&v.setFullYear(e(v.getFullYear(),x)),v.setMilliseconds(0),R>=s.minute&&v.setSeconds(0),R>=s.hour&&v.setMinutes(0),R>=s.day&&v.setHours(0),R>=s.day*4&&v.setDate(1),R>=s.month*2&&v.setMonth(e(v.getMonth(),3)),R>=s.quarter*2&&v.setMonth(e(v.getMonth(),6)),R>=s.year&&v.setMonth(0);var S=0,O=Number.NaN,U;do if(U=O,O=v.getTime(),E.push(O),D=="month"||D=="quarter")if(x<1){v.setDate(1);var I=v.getTime();v.setMonth(v.getMonth()+(D=="quarter"?3:1));var F=v.getTime();v.setTime(O+S*s.hour+(F-I)*x),S=v.getHours(),v.setHours(0)}else v.setMonth(v.getMonth()+x*(D=="quarter"?3:1));else D=="year"?v.setFullYear(v.getFullYear()+x):v.setTime(O+R);while(O<y.max&&O!=U);return E},p.tickFormatter=function(y,E){var v=i(y,E.options);if(g.timeformat!=null)return t(v,g.timeformat,g.monthNames,g.dayNames);var h=E.options.tickSize&&E.options.tickSize[1]=="quarter"||E.options.minTickSize&&E.options.minTickSize[1]=="quarter",P=E.tickSize[0]*s[E.tickSize[1]],a=E.max-E.min,C=g.twelveHourClock?" %p":"",D=g.twelveHourClock?"%I":"%H",b;P<s.minute?b=D+":%M:%S"+C:P<s.day?a<2*s.day?b=D+":%M"+C:b="%b %d "+D+":%M"+C:P<s.month?b="%b %d":h&&P<s.quarter||!h&&P<s.year?a<s.year?b="%b":b="%b %Y":h&&P<s.year?a<s.year?b="Q%q":b="Q%q %Y":b="%Y";var M=t(v,b,g.monthNames,g.dayNames);return M})})})}Y.plot.plugins.push({init:o,options:T,name:"time",version:"1.0"}),Y.plot.formatDate=t})(jQuery)}}]);

//# sourceMappingURL=2077.2b2e29da64666561c56b.js.map
